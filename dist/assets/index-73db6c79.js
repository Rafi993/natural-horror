(function(){const ro=document.createElement("link").relList;if(ro&&ro.supports&&ro.supports("modulepreload"))return;for(const ki of document.querySelectorAll('link[rel="modulepreload"]'))fs(ki);new MutationObserver(ki=>{for(const $ of ki)if($.type==="childList")for(const R of $.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&fs(R)}).observe(document,{childList:!0,subtree:!0});function Io(ki){const $={};return ki.integrity&&($.integrity=ki.integrity),ki.referrerpolicy&&($.referrerPolicy=ki.referrerpolicy),ki.crossorigin==="use-credentials"?$.credentials="include":ki.crossorigin==="anonymous"?$.credentials="omit":$.credentials="same-origin",$}function fs(ki){if(ki.ep)return;ki.ep=!0;const $=Io(ki);fetch(ki.href,$)}})();function pd(Xa){return Xa&&Xa.__esModule&&Object.prototype.hasOwnProperty.call(Xa,"default")?Xa.default:Xa}var Jc={},dd={get exports(){return Jc},set exports(Xa){Jc=Xa}};(function(Xa,ro){/*! For license information please see plotly.min.js.LICENSE.txt */(function(Io,fs){Xa.exports=fs()})(self,function(){return function(){var Io={98847:function($,R,e){var k=e(71828),A={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var l in A){var T=l.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");k.addStyleRule(T,A[l])}},98222:function($,R,e){$.exports=e(82887)},27206:function($,R,e){$.exports=e(60822)},59893:function($,R,e){$.exports=e(23381)},5224:function($,R,e){$.exports=e(83832)},59509:function($,R,e){$.exports=e(72201)},75557:function($,R,e){$.exports=e(91815)},40338:function($,R,e){$.exports=e(21462)},35080:function($,R,e){$.exports=e(51319)},61396:function($,R,e){$.exports=e(57516)},40549:function($,R,e){$.exports=e(98128)},49866:function($,R,e){$.exports=e(99442)},36089:function($,R,e){$.exports=e(93740)},19548:function($,R,e){$.exports=e(8729)},35831:function($,R,e){$.exports=e(93814)},61039:function($,R,e){$.exports=e(14382)},97040:function($,R,e){$.exports=e(51759)},77986:function($,R,e){$.exports=e(10421)},24296:function($,R,e){$.exports=e(43102)},58872:function($,R,e){$.exports=e(92165)},29626:function($,R,e){$.exports=e(3325)},65591:function($,R,e){$.exports=e(36071)},69738:function($,R,e){$.exports=e(43905)},92650:function($,R,e){$.exports=e(35902)},35630:function($,R,e){$.exports=e(69816)},73434:function($,R,e){$.exports=e(94507)},27909:function($,R,e){var k=e(19548);k.register([e(27206),e(5224),e(58872),e(65591),e(69738),e(92650),e(49866),e(25743),e(6197),e(97040),e(85461),e(73434),e(54201),e(81299),e(47645),e(35630),e(77986),e(83043),e(93005),e(96881),e(4534),e(50581),e(40549),e(77900),e(47582),e(35080),e(21641),e(17280),e(5861),e(29626),e(10021),e(65317),e(96268),e(61396),e(35831),e(16122),e(46163),e(40344),e(40338),e(48131),e(36089),e(55334),e(75557),e(19440),e(99488),e(59893),e(97393),e(98222),e(61039),e(24296),e(66398),e(59509)]),$.exports=k},46163:function($,R,e){$.exports=e(15154)},96881:function($,R,e){$.exports=e(64943)},50581:function($,R,e){$.exports=e(21164)},55334:function($,R,e){$.exports=e(54186)},65317:function($,R,e){$.exports=e(94873)},10021:function($,R,e){$.exports=e(67618)},54201:function($,R,e){$.exports=e(58810)},5861:function($,R,e){$.exports=e(20593)},16122:function($,R,e){$.exports=e(29396)},83043:function($,R,e){$.exports=e(13551)},48131:function($,R,e){$.exports=e(46858)},47582:function($,R,e){$.exports=e(17988)},21641:function($,R,e){$.exports=e(68868)},96268:function($,R,e){$.exports=e(20467)},19440:function($,R,e){$.exports=e(91271)},99488:function($,R,e){$.exports=e(21461)},97393:function($,R,e){$.exports=e(85956)},25743:function($,R,e){$.exports=e(52979)},66398:function($,R,e){$.exports=e(32275)},17280:function($,R,e){$.exports=e(6419)},77900:function($,R,e){$.exports=e(61510)},81299:function($,R,e){$.exports=e(87619)},93005:function($,R,e){$.exports=e(93601)},40344:function($,R,e){$.exports=e(96595)},47645:function($,R,e){$.exports=e(70954)},6197:function($,R,e){$.exports=e(47462)},4534:function($,R,e){$.exports=e(17659)},85461:function($,R,e){$.exports=e(19990)},82884:function($){$.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},50215:function($,R,e){var k=e(82884),A=e(41940),l=e(85555),T=e(44467).templatedArray;e(24695),$.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:A({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:k.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:k.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",l.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",l.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:A({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function($,R,e){var k=e(71828),A=e(89298),l=e(92605).draw;function T(d){var s=d._fullLayout;k.filterVisible(s.annotations).forEach(function(t){var o=A.getFromId(d,t.xref),r=A.getFromId(d,t.yref),n=A.getRefType(t.xref),a=A.getRefType(t.yref);t._extremes={},n==="range"&&x(t,o),a==="range"&&x(t,r)})}function x(d,s){var t,o=s._id,r=o.charAt(0),n=d[r],a=d["a"+r],i=d[r+"ref"],c=d["a"+r+"ref"],h=d["_"+r+"padplus"],f=d["_"+r+"padminus"],b={x:1,y:-1}[r]*d[r+"shift"],v=3*d.arrowsize*d.arrowwidth||0,g=v+b,y=v-b,p=3*d.startarrowsize*d.arrowwidth||0,m=p+b,w=p-b;if(c===i){var u=A.findExtremes(s,[s.r2c(n)],{ppadplus:g,ppadminus:y}),S=A.findExtremes(s,[s.r2c(a)],{ppadplus:Math.max(h,m),ppadminus:Math.max(f,w)});t={min:[u.min[0],S.min[0]],max:[u.max[0],S.max[0]]}}else m=a?m+a:m,w=a?w-a:w,t=A.findExtremes(s,[s.r2c(n)],{ppadplus:Math.max(h,g,m),ppadminus:Math.max(f,y,w)});d._extremes[o]=t}$.exports=function(d){var s=d._fullLayout;if(k.filterVisible(s.annotations).length&&d._fullData.length)return k.syncOrAsync([l,T],d)}},44317:function($,R,e){var k=e(71828),A=e(73972),l=e(44467).arrayEditor;function T(d,s){var t,o,r,n,a,i,c,h=d._fullLayout.annotations,f=[],b=[],v=[],g=(s||[]).length;for(t=0;t<h.length;t++)if(n=(r=h[t]).clicktoshow){for(o=0;o<g;o++)if(i=(a=s[o]).xaxis,c=a.yaxis,i._id===r.xref&&c._id===r.yref&&i.d2r(a.x)===x(r._xclick,i)&&c.d2r(a.y)===x(r._yclick,c)){(r.visible?n==="onout"?b:v:f).push(t);break}o===g&&r.visible&&n==="onout"&&b.push(t)}return{on:f,off:b,explicitOff:v}}function x(d,s){return s.type==="log"?s.l2r(d):s.d2r(d)}$.exports={hasClickToShow:function(d,s){var t=T(d,s);return t.on.length>0||t.explicitOff.length>0},onClick:function(d,s){var t,o,r=T(d,s),n=r.on,a=r.off.concat(r.explicitOff),i={},c=d._fullLayout.annotations;if(n.length||a.length){for(t=0;t<n.length;t++)(o=l(d.layout,"annotations",c[n[t]])).modifyItem("visible",!0),k.extendFlat(i,o.getUpdateObj());for(t=0;t<a.length;t++)(o=l(d.layout,"annotations",c[a[t]])).modifyItem("visible",!1),k.extendFlat(i,o.getUpdateObj());return A.call("update",d,{},i)}}}},25625:function($,R,e){var k=e(71828),A=e(7901);$.exports=function(l,T,x,d){d("opacity");var s=d("bgcolor"),t=d("bordercolor"),o=A.opacity(t);d("borderpad");var r=d("borderwidth"),n=d("showarrow");if(d("text",n?" ":x._dfltTitle.annotation),d("textangle"),k.coerceFont(d,"font",x.font),d("width"),d("align"),d("height")&&d("valign"),n){var a,i,c=d("arrowside");c.indexOf("end")!==-1&&(a=d("arrowhead"),i=d("arrowsize")),c.indexOf("start")!==-1&&(d("startarrowhead",a),d("startarrowsize",i)),d("arrowcolor",o?T.bordercolor:A.defaultLine),d("arrowwidth",2*(o&&r||1)),d("standoff"),d("startstandoff")}var h=d("hovertext"),f=x.hoverlabel||{};if(h){var b=d("hoverlabel.bgcolor",f.bgcolor||(A.opacity(s)?A.rgb(s):A.defaultLine)),v=d("hoverlabel.bordercolor",f.bordercolor||A.contrast(b));k.coerceFont(d,"hoverlabel.font",{family:f.font.family,size:f.font.size,color:f.font.color||v})}d("captureevents",!!h)}},94128:function($,R,e){var k=e(92770),A=e(58163);$.exports=function(l,T,x,d){T=T||{};var s=x==="log"&&T.type==="linear",t=x==="linear"&&T.type==="log";if(s||t)for(var o,r,n=l._fullLayout.annotations,a=T._id.charAt(0),i=0;i<n.length;i++)o=n[i],r="annotations["+i+"].",o[a+"ref"]===T._id&&c(a),o["a"+a+"ref"]===T._id&&c("a"+a);function c(h){var f=o[h],b=null;b=s?A(f,T.range):Math.pow(10,f),k(b)||(b=null),d(r+h,b)}}},84046:function($,R,e){var k=e(71828),A=e(89298),l=e(85501),T=e(25625),x=e(50215);function d(s,t,o){function r(S,_){return k.coerce(s,t,x,S,_)}var n=r("visible"),a=r("clicktoshow");if(n||a){T(s,t,o,r);for(var i=t.showarrow,c=["x","y"],h=[-10,-30],f={_fullLayout:o},b=0;b<2;b++){var v=c[b],g=A.coerceRef(s,t,f,v,"","paper");if(g!=="paper"&&A.getFromId(f,g)._annIndices.push(t._index),A.coercePosition(t,f,r,g,v,.5),i){var y="a"+v,p=A.coerceRef(s,t,f,y,"pixel",["pixel","paper"]);p!=="pixel"&&p!==g&&(p=t[y]="pixel");var m=p==="pixel"?h[b]:.4;A.coercePosition(t,f,r,p,y,m)}r(v+"anchor"),r(v+"shift")}if(k.noneOrAll(s,t,["x","y"]),i&&k.noneOrAll(s,t,["ax","ay"]),a){var w=r("xclick"),u=r("yclick");t._xclick=w===void 0?t.x:A.cleanPosition(w,f,t.xref),t._yclick=u===void 0?t.y:A.cleanPosition(u,f,t.yref)}}}$.exports=function(s,t){l(s,t,{name:"annotations",handleItemDefaults:d})}},92605:function($,R,e){var k=e(39898),A=e(73972),l=e(74875),T=e(71828),x=T.strTranslate,d=e(89298),s=e(7901),t=e(91424),o=e(30211),r=e(63893),n=e(6964),a=e(28569),i=e(44467).arrayEditor,c=e(13011);function h(v,g){var y=v._fullLayout.annotations[g]||{},p=d.getFromId(v,y.xref),m=d.getFromId(v,y.yref);p&&p.setScale(),m&&m.setScale(),b(v,y,g,!1,p,m)}function f(v,g,y,p,m){var w=m[y],u=m[y+"ref"],S=y.indexOf("y")!==-1,_=d.getRefType(u)==="domain",E=S?p.h:p.w;return v?_?w+(S?-g:g)/v._length:v.p2r(v.r2p(w)+g):w+(S?-g:g)/E}function b(v,g,y,p,m,w){var u,S,_=v._fullLayout,E=v._fullLayout._size,L=v._context.edits;p?(u="annotation-"+p,S=p+".annotations"):(u="annotation",S="annotations");var C=i(v.layout,S,g),P=C.modifyBase,I=C.modifyItem,U=C.getUpdateObj;_._infolayer.selectAll("."+u+'[data-index="'+y+'"]').remove();var z="clip"+_._uid+"_ann"+y;if(g._input&&g.visible!==!1){var H={x:{},y:{}},F=+g.textangle||0,N=_._infolayer.append("g").classed(u,!0).attr("data-index",String(y)).style("opacity",g.opacity),B=N.append("g").classed("annotation-text-g",!0),j=L[g.showarrow?"annotationTail":"annotationPosition"],K=g.captureevents||L.annotationText||j,G=B.append("g").style("pointer-events",K?"all":null).call(n,"pointer").on("click",function(){v._dragging=!1,v.emit("plotly_clickannotation",ye(k.event))});g.hovertext&&G.on("mouseover",function(){var ve=g.hoverlabel,Oe=ve.font,xe=this.getBoundingClientRect(),ke=v.getBoundingClientRect();o.loneHover({x0:xe.left-ke.left,x1:xe.right-ke.left,y:(xe.top+xe.bottom)/2-ke.top,text:g.hovertext,color:ve.bgcolor,borderColor:ve.bordercolor,fontFamily:Oe.family,fontSize:Oe.size,fontColor:Oe.color},{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:v})}).on("mouseout",function(){o.loneUnhover(_._hoverlayer.node())});var V=g.borderwidth,W=g.borderpad,J=V+W,X=G.append("rect").attr("class","bg").style("stroke-width",V+"px").call(s.stroke,g.bordercolor).call(s.fill,g.bgcolor),ee=g.width||g.height,re=_._topclips.selectAll("#"+z).data(ee?[0]:[]);re.enter().append("clipPath").classed("annclip",!0).attr("id",z).append("rect"),re.exit().remove();var ie=g.font,se=_._meta?T.templateString(g.text,_._meta):g.text,fe=G.append("text").classed("annotation-text",!0).text(se);L.annotationText?fe.call(r.makeEditable,{delegate:G,gd:v}).call(ge).on("edit",function(ve){g.text=ve,this.call(ge),I("text",ve),m&&m.autorange&&P(m._name+".autorange",!0),w&&w.autorange&&P(w._name+".autorange",!0),A.call("_guiRelayout",v,U())}):fe.call(ge)}else k.selectAll("#"+z).remove();function ye(ve){var Oe={index:y,annotation:g._input,fullAnnotation:g,event:ve};return p&&(Oe.subplotId=p),Oe}function ge(ve){return ve.call(t.font,ie).attr({"text-anchor":{left:"start",right:"end"}[g.align]||"middle"}),r.convertToTspans(ve,v,he),ve}function he(){var ve=fe.selectAll("a");ve.size()===1&&ve.text()===fe.text()&&G.insert("a",":first-child").attr({"xlink:xlink:href":ve.attr("xlink:href"),"xlink:xlink:show":ve.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(X.node());var Oe=G.select(".annotation-text-math-group"),xe=!Oe.empty(),ke=t.bBox((xe?Oe:fe).node()),Me=ke.width,Te=ke.height,Q=g.width||Me,oe=g.height||Te,ce=Math.round(Q+2*J),me=Math.round(oe+2*J);function Ae(At,ht){return ht==="auto"&&(ht=At<.3333333333333333?"left":At>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ht]}for(var Ie=!1,Ce=["x","y"],Re=0;Re<Ce.length;Re++){var le,de,_e,Fe,Ve,He=Ce[Re],nt=g[He+"ref"]||He,tt=g["a"+He+"ref"],ot={x:m,y:w}[He],dt=(F+(He==="x"?0:-90))*Math.PI/180,kt=ce*Math.cos(dt),mt=me*Math.sin(dt),wt=Math.abs(kt)+Math.abs(mt),Lt=g[He+"anchor"],Ct=g[He+"shift"]*(He==="x"?1:-1),It=H[He],Ut=d.getRefType(nt);if(ot&&Ut!=="domain"){var Rt=ot.r2fraction(g[He]);(Rt<0||Rt>1)&&(tt===nt?((Rt=ot.r2fraction(g["a"+He]))<0||Rt>1)&&(Ie=!0):Ie=!0),le=ot._offset+ot.r2p(g[He]),Fe=.5}else{var Ge=Ut==="domain";He==="x"?(_e=g[He],le=Ge?ot._offset+ot._length*_e:le=E.l+E.w*_e):(_e=1-g[He],le=Ge?ot._offset+ot._length*_e:le=E.t+E.h*_e),Fe=g.showarrow?.5:_e}if(g.showarrow){It.head=le;var We=g["a"+He];if(Ve=kt*Ae(.5,g.xanchor)-mt*Ae(.5,g.yanchor),tt===nt){var Be=d.getRefType(tt);Be==="domain"?(He==="y"&&(We=1-We),It.tail=ot._offset+ot._length*We):Be==="paper"?He==="y"?(We=1-We,It.tail=E.t+E.h*We):It.tail=E.l+E.w*We:It.tail=ot._offset+ot.r2p(We),de=Ve}else It.tail=le+We,de=Ve+We;It.text=It.tail+Ve;var Ye=_[He==="x"?"width":"height"];if(nt==="paper"&&(It.head=T.constrain(It.head,1,Ye-1)),tt==="pixel"){var rt=-Math.max(It.tail-3,It.text),Se=Math.min(It.tail+3,It.text)-Ye;rt>0?(It.tail+=rt,It.text+=rt):Se>0&&(It.tail-=Se,It.text-=Se)}It.tail+=Ct,It.head+=Ct}else de=Ve=wt*Ae(Fe,Lt),It.text=le+Ve;It.text+=Ct,Ve+=Ct,de+=Ct,g["_"+He+"padplus"]=wt/2+de,g["_"+He+"padminus"]=wt/2-de,g["_"+He+"size"]=wt,g["_"+He+"shift"]=Ve}if(Ie)G.remove();else{var ze=0,Ke=0;if(g.align!=="left"&&(ze=(Q-Me)*(g.align==="center"?.5:1)),g.valign!=="top"&&(Ke=(oe-Te)*(g.valign==="middle"?.5:1)),xe)Oe.select("svg").attr({x:J+ze-1,y:J+Ke}).call(t.setClipUrl,ee?z:null,v);else{var st=J+Ke-ke.top,ct=J+ze-ke.left;fe.call(r.positionText,ct,st).call(t.setClipUrl,ee?z:null,v)}re.select("rect").call(t.setRect,J,J,Q,oe),X.call(t.setRect,V/2,V/2,ce-V,me-V),G.call(t.setTranslate,Math.round(H.x.text-ce/2),Math.round(H.y.text-me/2)),B.attr({transform:"rotate("+F+","+H.x.text+","+H.y.text+")"});var Tt,Et=function(At,ht){N.selectAll(".annotation-arrow-g").remove();var pt=H.x.head,gt=H.y.head,Pt=H.x.tail+At,Ot=H.y.tail+ht,Ht=H.x.text+At,jt=H.y.text+ht,Nt=T.rotationXYMatrix(F,Ht,jt),Gt=T.apply2DTransform(Nt),un=T.apply2DTransform2(Nt),pn=+X.attr("width"),Kt=+X.attr("height"),wn=Ht-.5*pn,Bn=wn+pn,vn=jt-.5*Kt,cn=vn+Kt,dn=[[wn,vn,wn,cn],[wn,cn,Bn,cn],[Bn,cn,Bn,vn],[Bn,vn,wn,vn]].map(un);if(!dn.reduce(function(Zn,qn){return Zn^!!T.segmentsIntersect(pt,gt,pt+1e6,gt+1e6,qn[0],qn[1],qn[2],qn[3])},!1)){dn.forEach(function(Zn){var qn=T.segmentsIntersect(Pt,Ot,pt,gt,Zn[0],Zn[1],Zn[2],Zn[3]);qn&&(Pt=qn.x,Ot=qn.y)});var sn=g.arrowwidth,hn=g.arrowcolor,En=g.arrowside,Mn=N.append("g").style({opacity:s.opacity(hn)}).classed("annotation-arrow-g",!0),Rn=Mn.append("path").attr("d","M"+Pt+","+Ot+"L"+pt+","+gt).style("stroke-width",sn+"px").call(s.stroke,s.rgb(hn));if(c(Rn,En,g),L.annotationPosition&&Rn.node().parentNode&&!p){var Nn=pt,Fn=gt;if(g.standoff){var rr=Math.sqrt(Math.pow(pt-Pt,2)+Math.pow(gt-Ot,2));Nn+=g.standoff*(Pt-pt)/rr,Fn+=g.standoff*(Ot-gt)/rr}var $n,mr,fr=Mn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Pt-Nn)+","+(Ot-Fn),transform:x(Nn,Fn)}).style("stroke-width",sn+6+"px").call(s.stroke,"rgba(0,0,0,0)").call(s.fill,"rgba(0,0,0,0)");a.init({element:fr.node(),gd:v,prepFn:function(){var Zn=t.getTranslate(G);$n=Zn.x,mr=Zn.y,m&&m.autorange&&P(m._name+".autorange",!0),w&&w.autorange&&P(w._name+".autorange",!0)},moveFn:function(Zn,qn){var ur=Gt($n,mr),Zt=ur[0]+Zn,nn=ur[1]+qn;G.call(t.setTranslate,Zt,nn),I("x",f(m,Zn,"x",E,g)),I("y",f(w,qn,"y",E,g)),g.axref===g.xref&&I("ax",f(m,Zn,"ax",E,g)),g.ayref===g.yref&&I("ay",f(w,qn,"ay",E,g)),Mn.attr("transform",x(Zn,qn)),B.attr({transform:"rotate("+F+","+Zt+","+nn+")"})},doneFn:function(){A.call("_guiRelayout",v,U());var Zn=document.querySelector(".js-notes-box-panel");Zn&&Zn.redraw(Zn.selectedObj)}})}}};g.showarrow&&Et(0,0),j&&a.init({element:G.node(),gd:v,prepFn:function(){Tt=B.attr("transform")},moveFn:function(At,ht){var pt="pointer";if(g.showarrow)g.axref===g.xref?I("ax",f(m,At,"ax",E,g)):I("ax",g.ax+At),g.ayref===g.yref?I("ay",f(w,ht,"ay",E.w,g)):I("ay",g.ay+ht),Et(At,ht);else{if(p)return;var gt,Pt;if(m)gt=f(m,At,"x",E,g);else{var Ot=g._xsize/E.w,Ht=g.x+(g._xshift-g.xshift)/E.w-Ot/2;gt=a.align(Ht+At/E.w,Ot,0,1,g.xanchor)}if(w)Pt=f(w,ht,"y",E,g);else{var jt=g._ysize/E.h,Nt=g.y-(g._yshift+g.yshift)/E.h-jt/2;Pt=a.align(Nt-ht/E.h,jt,0,1,g.yanchor)}I("x",gt),I("y",Pt),m&&w||(pt=a.getCursor(m?.5:gt,w?.5:Pt,g.xanchor,g.yanchor))}B.attr({transform:x(At,ht)+Tt}),n(G,pt)},clickFn:function(At,ht){g.captureevents&&v.emit("plotly_clickannotation",ye(ht))},doneFn:function(){n(G),A.call("_guiRelayout",v,U());var At=document.querySelector(".js-notes-box-panel");At&&At.redraw(At.selectedObj)}})}}}$.exports={draw:function(v){var g=v._fullLayout;g._infolayer.selectAll(".annotation").remove();for(var y=0;y<g.annotations.length;y++)g.annotations[y].visible&&h(v,y);return l.previousPromises(v)},drawOne:h,drawRaw:b}},13011:function($,R,e){var k=e(39898),A=e(7901),l=e(82884),T=e(71828),x=T.strScale,d=T.strRotate,s=T.strTranslate;$.exports=function(t,o,r){var n,a,i,c,h=t.node(),f=l[r.arrowhead||0],b=l[r.startarrowhead||0],v=(r.arrowwidth||1)*(r.arrowsize||1),g=(r.arrowwidth||1)*(r.startarrowsize||1),y=o.indexOf("start")>=0,p=o.indexOf("end")>=0,m=f.backoff*v+r.standoff,w=b.backoff*g+r.startstandoff;if(h.nodeName==="line"){n={x:+t.attr("x1"),y:+t.attr("y1")},a={x:+t.attr("x2"),y:+t.attr("y2")};var u=n.x-a.x,S=n.y-a.y;if(c=(i=Math.atan2(S,u))+Math.PI,m&&w&&m+w>Math.sqrt(u*u+S*S))return void N();if(m){if(m*m>u*u+S*S)return void N();var _=m*Math.cos(i),E=m*Math.sin(i);a.x+=_,a.y+=E,t.attr({x2:a.x,y2:a.y})}if(w){if(w*w>u*u+S*S)return void N();var L=w*Math.cos(i),C=w*Math.sin(i);n.x-=L,n.y-=C,t.attr({x1:n.x,y1:n.y})}}else if(h.nodeName==="path"){var P=h.getTotalLength(),I="";if(P<m+w)return void N();var U=h.getPointAtLength(0),z=h.getPointAtLength(.1);i=Math.atan2(U.y-z.y,U.x-z.x),n=h.getPointAtLength(Math.min(w,P)),I="0px,"+w+"px,";var H=h.getPointAtLength(P),F=h.getPointAtLength(P-.1);c=Math.atan2(H.y-F.y,H.x-F.x),a=h.getPointAtLength(Math.max(0,P-m)),I+=P-(I?w+m:m)+"px,"+P+"px",t.style("stroke-dasharray",I)}function N(){t.style("stroke-dasharray","0px,100px")}function B(j,K,G,V){j.path&&(j.noRotate&&(G=0),k.select(h.parentNode).append("path").attr({class:t.attr("class"),d:j.path,transform:s(K.x,K.y)+d(180*G/Math.PI)+x(V)}).style({fill:A.rgb(r.arrowcolor),"stroke-width":0}))}y&&B(b,n,i,g),p&&B(f,a,c,v)}},32745:function($,R,e){var k=e(92605),A=e(44317);$.exports={moduleType:"component",name:"annotations",layoutAttributes:e(50215),supplyLayoutDefaults:e(84046),includeBasePlot:e(76325)("annotations"),calcAutorange:e(3749),draw:k.draw,drawOne:k.drawOne,drawRaw:k.drawRaw,hasClickToShow:A.hasClickToShow,onClick:A.onClick,convertCoords:e(94128)}},26997:function($,R,e){var k=e(50215),A=e(30962).overrideAll,l=e(44467).templatedArray;$.exports=A(l("annotation",{visible:k.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:k.xanchor,xshift:k.xshift,yanchor:k.yanchor,yshift:k.yshift,text:k.text,textangle:k.textangle,font:k.font,width:k.width,height:k.height,opacity:k.opacity,align:k.align,valign:k.valign,bgcolor:k.bgcolor,bordercolor:k.bordercolor,borderpad:k.borderpad,borderwidth:k.borderwidth,showarrow:k.showarrow,arrowcolor:k.arrowcolor,arrowhead:k.arrowhead,startarrowhead:k.startarrowhead,arrowside:k.arrowside,arrowsize:k.arrowsize,startarrowsize:k.startarrowsize,arrowwidth:k.arrowwidth,standoff:k.standoff,startstandoff:k.startstandoff,hovertext:k.hovertext,hoverlabel:k.hoverlabel,captureevents:k.captureevents}),"calc","from-root")},5485:function($,R,e){var k=e(71828),A=e(89298);function l(T,x){var d=x.fullSceneLayout.domain,s=x.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},k.extendFlat(T._xa,t),A.setConvert(T._xa),T._xa._offset=s.l+d.x[0]*s.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*s.w*(d.x[1]-d.x[0])},T._ya={},k.extendFlat(T._ya,t),A.setConvert(T._ya),T._ya._offset=s.t+(1-d.y[1])*s.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*s.h*(d.y[1]-d.y[0])}}$.exports=function(T){for(var x=T.fullSceneLayout.annotations,d=0;d<x.length;d++)l(x[d],T);T.fullLayout._infolayer.selectAll(".annotation-"+T.id).remove()}},20226:function($,R,e){var k=e(71828),A=e(89298),l=e(85501),T=e(25625),x=e(26997);function d(s,t,o,r){function n(i,c){return k.coerce(s,t,x,i,c)}function a(i){var c=i+"axis",h={_fullLayout:{}};return h._fullLayout[c]=o[c],A.coercePosition(t,h,n,i,i,.5)}n("visible")&&(T(s,t,r.fullLayout,n),a("x"),a("y"),a("z"),k.noneOrAll(s,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",n("ax",-10),n("ay",-30),k.noneOrAll(s,t,["ax","ay"])))}$.exports=function(s,t,o){l(s,t,{name:"annotations",handleItemDefaults:d,fullLayout:o.fullLayout})}},82188:function($,R,e){var k=e(92605).drawRaw,A=e(63538),l=["x","y","z"];$.exports=function(T){for(var x=T.fullSceneLayout,d=T.dataScale,s=x.annotations,t=0;t<s.length;t++){for(var o=s[t],r=!1,n=0;n<3;n++){var a=l[n],i=o[a],c=x[a+"axis"].r2fraction(i);if(c<0||c>1){r=!0;break}}r?T.fullLayout._infolayer.select(".annotation-"+T.id+'[data-index="'+t+'"]').remove():(o._pdata=A(T.glplot.cameraParams,[x.xaxis.r2l(o.x)*d[0],x.yaxis.r2l(o.y)*d[1],x.zaxis.r2l(o.z)*d[2]]),k(T.graphDiv,o,t,T.id,o._xa,o._ya))}}},2468:function($,R,e){var k=e(73972),A=e(71828);$.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(26997)}}},layoutAttributes:e(26997),handleDefaults:e(20226),includeBasePlot:function(l,T){var x=k.subplotsRegistry.gl3d;if(x)for(var d=x.attrRegex,s=Object.keys(l),t=0;t<s.length;t++){var o=s[t];d.test(o)&&(l[o].annotations||[]).length&&(A.pushUnique(T._basePlotModules,x),A.pushUnique(T._subplots.gl3d,o))}},convert:e(5485),draw:e(82188)}},7561:function($,R,e){$.exports=e(63489),e(94338),e(3961),e(38751),e(86825),e(37715),e(99384),e(43805),e(88874),e(83290),e(29108),e(55422),e(94320),e(31320),e(51367),e(21457)},72201:function($,R,e){var k=e(7561),A=e(71828),l=e(50606),T=l.EPOCHJD,x=l.ONEDAY,d={valType:"enumerated",values:A.sortObjectKeys(k.calendars),editType:"calc",dflt:"gregorian"},s=function(v,g,y,p){var m={};return m[y]=d,A.coerce(v,g,m,y,p)},t="##",o={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function n(v){var g=r[v];return g||(r[v]=k.instance(v))}function a(v){return A.extendFlat({},d,{description:v})}function i(v){return"Sets the calendar system to use with `"+v+"` date data."}var c={xcalendar:a(i("x"))},h=A.extendFlat({},c,{ycalendar:a(i("y"))}),f=A.extendFlat({},h,{zcalendar:a(i("z"))}),b=a(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));$.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:h,bar:h,box:h,heatmap:h,contour:h,histogram:h,histogram2d:h,histogram2dcontour:h,scatter3d:f,surface:f,mesh3d:f,scattergl:h,ohlc:c,candlestick:c},layout:{calendar:a(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:b},yaxis:{calendar:b},scene:{xaxis:{calendar:b},yaxis:{calendar:b},zaxis:{calendar:b}},polar:{radialaxis:{calendar:b}}},transforms:{filter:{valuecalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:d,handleDefaults:s,handleTraceDefaults:function(v,g,y,p){for(var m=0;m<y.length;m++)s(v,g,y[m]+"calendar",p.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:n,worldCalFmt:function(v,g,y){for(var p,m,w,u,S,_=Math.floor((g+.05)/x)+T,E=n(y).fromJD(_),L=0;(L=v.indexOf("%",L))!==-1;)(p=v.charAt(L+1))==="0"||p==="-"||p==="_"?(w=3,m=v.charAt(L+2),p==="_"&&(p="-")):(m=p,p="0",w=2),(u=o[m])?(S=u===t?t:E.formatDate(u[p]),v=v.substr(0,L)+S+v.substr(L+w),L+=S.length):L+=w;return v}}},22399:function($,R){R.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],R.defaultLine="#444",R.lightLine="#eee",R.background="#fff",R.borderLine="#BEC8D9",R.lightFraction=90.9090909090909},7901:function($,R,e){var k=e(84267),A=e(92770),l=e(73627).isTypedArray,T=$.exports={},x=e(22399);T.defaults=x.defaults;var d=T.defaultLine=x.defaultLine;T.lightLine=x.lightLine;var s=T.background=x.background;function t(o){if(A(o)||typeof o!="string")return o;var r=o.trim();if(r.substr(0,3)!=="rgb")return o;var n=r.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return o;var a=n[1].trim().split(/\s*[\s,]\s*/),i=r.charAt(3)==="a"&&a.length===4;if(!i&&a.length!==3)return o;for(var c=0;c<a.length;c++){if(!a[c].length||(a[c]=Number(a[c]),!(a[c]>=0)))return o;if(c===3)a[c]>1&&(a[c]=1);else if(a[c]>=1)return o}var h=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return i?"rgba("+h+", "+a[3]+")":"rgb("+h+")"}T.tinyRGB=function(o){var r=o.toRgb();return"rgb("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+")"},T.rgb=function(o){return T.tinyRGB(k(o))},T.opacity=function(o){return o?k(o).getAlpha():0},T.addOpacity=function(o,r){var n=k(o).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+r+")"},T.combine=function(o,r){var n=k(o).toRgb();if(n.a===1)return k(o).toRgbString();var a=k(r||s).toRgb(),i=a.a===1?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a},c={r:i.r*(1-n.a)+n.r*n.a,g:i.g*(1-n.a)+n.g*n.a,b:i.b*(1-n.a)+n.b*n.a};return k(c).toRgbString()},T.contrast=function(o,r,n){var a=k(o);return a.getAlpha()!==1&&(a=k(T.combine(o,s))),(a.isDark()?r?a.lighten(r):s:n?a.darken(n):d).toString()},T.stroke=function(o,r){var n=k(r);o.style({stroke:T.tinyRGB(n),"stroke-opacity":n.getAlpha()})},T.fill=function(o,r){var n=k(r);o.style({fill:T.tinyRGB(n),"fill-opacity":n.getAlpha()})},T.clean=function(o){if(o&&typeof o=="object"){var r,n,a,i,c=Object.keys(o);for(r=0;r<c.length;r++)if(i=o[a=c[r]],a.substr(a.length-5)==="color")if(Array.isArray(i))for(n=0;n<i.length;n++)i[n]=t(i[n]);else o[a]=t(i);else if(a.substr(a.length-10)==="colorscale"&&Array.isArray(i))for(n=0;n<i.length;n++)Array.isArray(i[n])&&(i[n][1]=t(i[n][1]));else if(Array.isArray(i)){var h=i[0];if(!Array.isArray(h)&&h&&typeof h=="object")for(n=0;n<i.length;n++)T.clean(i[n])}else i&&typeof i=="object"&&!l(i)&&T.clean(i)}}},63583:function($,R,e){var k=e(13838),A=e(41940),l=e(1426).extendFlat,T=e(30962).overrideAll;$.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:k.linecolor,outlinewidth:k.linewidth,bordercolor:k.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:l({},k.ticks,{dflt:""}),ticklabeloverflow:l({},k.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,tickfont:A({}),tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,separatethousands:k.separatethousands,exponentformat:k.exponentformat,minexponent:k.minexponent,showexponent:k.showexponent,title:{text:{valType:"string"},font:A({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:A({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function($){$.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function($,R,e){var k=e(71828),A=e(44467),l=e(26218),T=e(38701),x=e(96115),d=e(89426),s=e(63583);$.exports=function(t,o,r){var n=A.newContainer(o,"colorbar"),a=t.colorbar||{};function i(S,_){return k.coerce(a,n,s,S,_)}var c=r.margin||{t:0,b:0,l:0,r:0},h=r.width-c.l-c.r,f=r.height-c.t-c.b,b=i("orientation")==="v",v=i("thicknessmode");i("thickness",v==="fraction"?30/(b?h:f):30);var g=i("lenmode");i("len",g==="fraction"?1:b?f:h),i("x",b?1.02:.5),i("xanchor",b?"left":"center"),i("xpad"),i("y",b?.5:1.02),i("yanchor",b?"middle":"bottom"),i("ypad"),k.noneOrAll(a,n,["x","y"]),i("outlinecolor"),i("outlinewidth"),i("bordercolor"),i("borderwidth"),i("bgcolor");var y=k.coerce(a,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:b?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");i("ticklabeloverflow",y.indexOf("inside")!==-1?"hide past domain":"hide past div"),l(a,n,i,"linear");var p=r.font,m={outerTicks:!1,font:p};y.indexOf("inside")!==-1&&(m.bgColor="black"),d(a,n,i,"linear",m),x(a,n,i,"linear",m),T(a,n,i,"linear",m),i("title.text",r._dfltTitle.colorbar);var w=n.tickfont,u=k.extendFlat({},w,{color:p.color,size:k.bigFont(w.size)});k.coerceFont(i,"title.font",u),i("title.side",b?"top":"right")}},98981:function($,R,e){var k=e(39898),A=e(84267),l=e(74875),T=e(73972),x=e(89298),d=e(28569),s=e(71828),t=s.strTranslate,o=e(1426).extendFlat,r=e(6964),n=e(91424),a=e(7901),i=e(92998),c=e(63893),h=e(52075).flipScale,f=e(71453),b=e(52830),v=e(13838),g=e(18783),y=g.LINE_SPACING,p=g.FROM_TL,m=g.FROM_BR,w=e(30939).cn;$.exports={draw:function(u){var S=u._fullLayout._infolayer.selectAll("g."+w.colorbar).data(function(_){var E,L,C,P,I=_._fullLayout,U=_.calcdata,z=[];function H(ee){return o(ee,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function F(){typeof P.calc=="function"?P.calc(_,C,E):(E._fillgradient=L.reversescale?h(L.colorscale):L.colorscale,E._zrange=[L[P.min],L[P.max]])}for(var N=0;N<U.length;N++){var B=U[N],j=(C=B[0].trace)._module.colorbar;if(C.visible===!0&&j)for(var K=Array.isArray(j),G=K?j:[j],V=0;V<G.length;V++){var W=(P=G[V]).container;(L=W?C[W]:C)&&L.showscale&&((E=H(L.colorbar))._id="cb"+C.uid+(K&&W?"-"+W:""),E._traceIndex=C.index,E._propPrefix=(W?W+".":"")+"colorbar.",E._meta=C._meta,F(),z.push(E))}}for(var J in I._colorAxes)if((L=I[J]).showscale){var X=I._colorAxes[J];(E=H(L.colorbar))._id="cb"+J,E._propPrefix=J+".colorbar.",E._meta=I._meta,P={min:"cmin",max:"cmax"},X[0]!=="heatmap"&&(C=X[1],P.calc=C._module.colorbar.calc),F(),z.push(E)}return z}(u),function(_){return _._id});S.enter().append("g").attr("class",function(_){return _._id}).classed(w.colorbar,!0),S.each(function(_){var E=k.select(this);s.ensureSingle(E,"rect",w.cbbg),s.ensureSingle(E,"g",w.cbfills),s.ensureSingle(E,"g",w.cblines),s.ensureSingle(E,"g",w.cbaxis,function(C){C.classed(w.crisp,!0)}),s.ensureSingle(E,"g",w.cbtitleunshift,function(C){C.append("g").classed(w.cbtitle,!0)}),s.ensureSingle(E,"rect",w.cboutline);var L=function(C,P,I){var U=P.orientation==="v",z=P.len,H=P.lenmode,F=P.thickness,N=P.thicknessmode,B=P.outlinewidth,j=P.borderwidth,K=P.bgcolor,G=P.xanchor,V=P.yanchor,W=P.xpad,J=P.ypad,X=P.x,ee=U?P.y:1-P.y,re=I._fullLayout,ie=re._size,se=P._fillcolor,fe=P._line,ye=P.title,ge=ye.side,he=P._zrange||k.extent((typeof se=="function"?se:fe.color).domain()),ve=typeof fe.color=="function"?fe.color:function(){return fe.color},Oe=typeof se=="function"?se:function(){return se},xe=P._levels,ke=function(Ut,Rt,Ge){var We,Be,Ye=Rt._levels,rt=[],Se=[],ze=Ye.end+Ye.size/100,Ke=Ye.size,st=1.001*Ge[0]-.001*Ge[1],ct=1.001*Ge[1]-.001*Ge[0];for(Be=0;Be<1e5&&(We=Ye.start+Be*Ke,!(Ke>0?We>=ze:We<=ze));Be++)We>st&&We<ct&&rt.push(We);if(Rt._fillgradient)Se=[0];else if(typeof Rt._fillcolor=="function"){var Tt=Rt._filllevels;if(Tt)for(ze=Tt.end+Tt.size/100,Ke=Tt.size,Be=0;Be<1e5&&(We=Tt.start+Be*Ke,!(Ke>0?We>=ze:We<=ze));Be++)We>Ge[0]&&We<Ge[1]&&Se.push(We);else(Se=rt.map(function(Et){return Et-Ye.size/2})).push(Se[Se.length-1]+Ye.size)}else Rt._fillcolor&&typeof Rt._fillcolor=="string"&&(Se=[0]);return Ye.size<0&&(rt.reverse(),Se.reverse()),{line:rt,fill:Se}}(0,P,he),Me=ke.fill,Te=ke.line,Q=Math.round(F*(N==="fraction"?U?ie.w:ie.h:1)),oe=Q/(U?ie.w:ie.h),ce=Math.round(z*(H==="fraction"?U?ie.h:ie.w:1)),me=ce/(U?ie.h:ie.w),Ae=Math.round(U?X*ie.w+W:ee*ie.h+J),Ie={center:.5,right:1}[G]||0,Ce={top:1,middle:.5}[V]||0,Re=U?X-Ie*oe:ee-Ce*oe,le=U?ee-Ce*me:X-Ie*me,de=Math.round(U?ie.h*(1-le):ie.w*le);P._lenFrac=me,P._thickFrac=oe,P._uFrac=Re,P._vFrac=le;var _e=P._axis=function(Ut,Rt,Ge){var We=Ut._fullLayout,Be=Rt.orientation==="v",Ye={type:"linear",range:Ge,tickmode:Rt.tickmode,nticks:Rt.nticks,tick0:Rt.tick0,dtick:Rt.dtick,tickvals:Rt.tickvals,ticktext:Rt.ticktext,ticks:Rt.ticks,ticklen:Rt.ticklen,tickwidth:Rt.tickwidth,tickcolor:Rt.tickcolor,showticklabels:Rt.showticklabels,ticklabelposition:Rt.ticklabelposition,ticklabeloverflow:Rt.ticklabeloverflow,ticklabelstep:Rt.ticklabelstep,tickfont:Rt.tickfont,tickangle:Rt.tickangle,tickformat:Rt.tickformat,exponentformat:Rt.exponentformat,minexponent:Rt.minexponent,separatethousands:Rt.separatethousands,showexponent:Rt.showexponent,showtickprefix:Rt.showtickprefix,tickprefix:Rt.tickprefix,showticksuffix:Rt.showticksuffix,ticksuffix:Rt.ticksuffix,title:Rt.title,showline:!0,anchor:"free",side:Be?"right":"bottom",position:1},rt=Be?"y":"x",Se={type:"linear",_id:rt+Rt._id},ze={letter:rt,font:We.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:We.calendar};function Ke(st,ct){return s.coerce(Ye,Se,v,st,ct)}return f(Ye,Se,Ke,ze,We),b(Ye,Se,Ke,ze),Se}(I,P,he);_e.position=oe+(U?X+W/ie.w:ee+J/ie.h);var Fe=["top","bottom"].indexOf(ge)!==-1;if(U&&Fe&&(_e.title.side=ge,_e.titlex=X+W/ie.w,_e.titley=le+(ye.side==="top"?me-J/ie.h:J/ie.h)),U||Fe||(_e.title.side=ge,_e.titley=ee+J/ie.h,_e.titlex=le+W/ie.w),fe.color&&P.tickmode==="auto"){_e.tickmode="linear",_e.tick0=xe.start;var Ve=xe.size,He=s.constrain(ce/50,4,15)+1,nt=(he[1]-he[0])/((P.nticks||He)*Ve);if(nt>1){var tt=Math.pow(10,Math.floor(Math.log(nt)/Math.LN10));Ve*=tt*s.roundUp(nt/tt,[2,5,10]),(Math.abs(xe.start)/xe.size+1e-6)%1<2e-6&&(_e.tick0=0)}_e.dtick=Ve}_e.domain=U?[le+J/ie.h,le+me-J/ie.h]:[le+W/ie.w,le+me-W/ie.w],_e.setScale(),C.attr("transform",t(Math.round(ie.l),Math.round(ie.t)));var ot,dt=C.select("."+w.cbtitleunshift).attr("transform",t(-Math.round(ie.l),-Math.round(ie.t))),kt=_e.ticklabelposition,mt=_e.title.font.size,wt=C.select("."+w.cbaxis),Lt=0,Ct=0;function It(Ut,Rt){var Ge={propContainer:_e,propName:P._propPrefix+"title",traceIndex:P._traceIndex,_meta:P._meta,placeholder:re._dfltTitle.colorbar,containerGroup:C.select("."+w.cbtitle)},We=Ut.charAt(0)==="h"?Ut.substr(1):"h"+Ut;C.selectAll("."+We+",."+We+"-math-group").remove(),i.draw(I,Ut,o(Ge,Rt||{}))}return s.syncOrAsync([l.previousPromises,function(){var Ut,Rt;(U&&Fe||!U&&!Fe)&&(ge==="top"&&(Ut=W+ie.l+ie.w*X,Rt=J+ie.t+ie.h*(1-le-me)+3+.75*mt),ge==="bottom"&&(Ut=W+ie.l+ie.w*X,Rt=J+ie.t+ie.h*(1-le)-3-.25*mt),ge==="right"&&(Rt=J+ie.t+ie.h*ee+3+.75*mt,Ut=W+ie.l+ie.w*le),It(_e._id+"title",{attributes:{x:Ut,y:Rt,"text-anchor":U?"start":"middle"}}))},function(){if(!U&&!Fe||U&&Fe){var Ut,Rt=C.select("."+w.cbtitle),Ge=Rt.select("text"),We=[-B/2,B/2],Be=Rt.select(".h"+_e._id+"title-math-group").node(),Ye=15.6;if(Ge.node()&&(Ye=parseInt(Ge.node().style.fontSize,10)*y),Be?(Ut=n.bBox(Be),Ct=Ut.width,(Lt=Ut.height)>Ye&&(We[1]-=(Lt-Ye)/2)):Ge.node()&&!Ge.classed(w.jsPlaceholder)&&(Ut=n.bBox(Ge.node()),Ct=Ut.width,Lt=Ut.height),U){if(Lt){if(Lt+=5,ge==="top")_e.domain[1]-=Lt/ie.h,We[1]*=-1;else{_e.domain[0]+=Lt/ie.h;var rt=c.lineCount(Ge);We[1]+=(1-rt)*Ye}Rt.attr("transform",t(We[0],We[1])),_e.setScale()}}else Ct&&(ge==="right"&&(_e.domain[0]+=(Ct+mt/2)/ie.w),Rt.attr("transform",t(We[0],We[1])),_e.setScale())}C.selectAll("."+w.cbfills+",."+w.cblines).attr("transform",U?t(0,Math.round(ie.h*(1-_e.domain[1]))):t(Math.round(ie.w*_e.domain[0]),0)),wt.attr("transform",U?t(0,Math.round(-ie.t)):t(Math.round(-ie.l),0));var Se=C.select("."+w.cbfills).selectAll("rect."+w.cbfill).attr("style","").data(Me);Se.enter().append("rect").classed(w.cbfill,!0).style("stroke","none"),Se.exit().remove();var ze=he.map(_e.c2p).map(Math.round).sort(function(Et,At){return Et-At});Se.each(function(Et,At){var ht=[At===0?he[0]:(Me[At]+Me[At-1])/2,At===Me.length-1?he[1]:(Me[At]+Me[At+1])/2].map(_e.c2p).map(Math.round);U&&(ht[1]=s.constrain(ht[1]+(ht[1]>ht[0])?1:-1,ze[0],ze[1]));var pt=k.select(this).attr(U?"x":"y",Ae).attr(U?"y":"x",k.min(ht)).attr(U?"width":"height",Math.max(Q,2)).attr(U?"height":"width",Math.max(k.max(ht)-k.min(ht),2));if(P._fillgradient)n.gradient(pt,I,P._id,U?"vertical":"horizontalreversed",P._fillgradient,"fill");else{var gt=Oe(Et).replace("e-","");pt.attr("fill",A(gt).toHexString())}});var Ke=C.select("."+w.cblines).selectAll("path."+w.cbline).data(fe.color&&fe.width?Te:[]);Ke.enter().append("path").classed(w.cbline,!0),Ke.exit().remove(),Ke.each(function(Et){var At=Ae,ht=Math.round(_e.c2p(Et))+fe.width/2%1;k.select(this).attr("d","M"+(U?At+","+ht:ht+","+At)+(U?"h":"v")+Q).call(n.lineGroupStyle,fe.width,ve(Et),fe.dash)}),wt.selectAll("g."+_e._id+"tick,path").remove();var st=Ae+Q+(B||0)/2-(P.ticks==="outside"?1:0),ct=x.calcTicks(_e),Tt=x.getTickSigns(_e)[2];return x.drawTicks(I,_e,{vals:_e.ticks==="inside"?x.clipEnds(_e,ct):ct,layer:wt,path:x.makeTickPath(_e,st,Tt),transFn:x.makeTransTickFn(_e)}),x.drawLabels(I,_e,{vals:ct,layer:wt,transFn:x.makeTransTickLabelFn(_e),labelFns:x.makeLabelFns(_e,st)})},function(){if(U&&!Fe||!U&&Fe){var Ut,Rt,Ge=_e.position||0,We=_e._offset+_e._length/2;if(ge==="right")Rt=We,Ut=ie.l+ie.w*Ge+10+mt*(_e.showticklabels?1:.5);else if(Ut=We,ge==="bottom"&&(Rt=ie.t+ie.h*Ge+10+(kt.indexOf("inside")===-1?_e.tickfont.size:0)+(_e.ticks!=="intside"&&P.ticklen||0)),ge==="top"){var Be=ye.text.split("<br>").length;Rt=ie.t+ie.h*Ge+10-Q-y*mt*Be}It((U?"h":"v")+_e._id+"title",{avoid:{selection:k.select(I).selectAll("g."+_e._id+"tick"),side:ge,offsetTop:U?0:ie.t,offsetLeft:U?ie.l:0,maxShift:U?re.width:re.height},attributes:{x:Ut,y:Rt,"text-anchor":"middle"},transform:{rotate:U?-90:0,offset:0}})}},l.previousPromises,function(){var Ut,Rt=Q+B/2;kt.indexOf("inside")===-1&&(Ut=n.bBox(wt.node()),Rt+=U?Ut.width:Ut.height),ot=dt.select("text");var Ge=0,We=U&&ge==="top",Be=!U&&ge==="right",Ye=0;if(ot.node()&&!ot.classed(w.jsPlaceholder)){var rt,Se=dt.select(".h"+_e._id+"title-math-group").node();Se&&(U&&Fe||!U&&!Fe)?(Ge=(Ut=n.bBox(Se)).width,rt=Ut.height):(Ge=(Ut=n.bBox(dt.node())).right-ie.l-(U?Ae:de),rt=Ut.bottom-ie.t-(U?de:Ae),U||ge!=="top"||(Rt+=Ut.height,Ye=Ut.height)),Be&&(ot.attr("transform",t(Ge/2+mt/2,0)),Ge*=2),Rt=Math.max(Rt,U?Ge:rt)}var ze=2*(U?W:J)+Rt+j+B/2,Ke=0;!U&&ye.text&&V==="bottom"&&ee<=0&&(ze+=Ke=ze/2,Ye+=Ke),re._hColorbarMoveTitle=Ke,re._hColorbarMoveCBTitle=Ye;var st=j+B;C.select("."+w.cbbg).attr("x",(U?Ae:de)-st/2-(U?W:0)).attr("y",(U?de:Ae)-(U?ce:J+Ye-Ke)).attr(U?"width":"height",Math.max(ze-Ke,2)).attr(U?"height":"width",Math.max(ce+st,2)).call(a.fill,K).call(a.stroke,P.bordercolor).style("stroke-width",j);var ct=Be?Math.max(Ge-10,0):0;if(C.selectAll("."+w.cboutline).attr("x",(U?Ae:de+W)+ct).attr("y",(U?de+J-ce:Ae)+(We?Lt:0)).attr(U?"width":"height",Math.max(Q,2)).attr(U?"height":"width",Math.max(ce-(U?2*J+Lt:2*W+ct),2)).call(a.stroke,P.outlinecolor).style({fill:"none","stroke-width":B}),C.attr("transform",t(ie.l-(U?Ie*ze:0),ie.t-(U?0:(1-Ce)*ze-Ye))),!U&&(j||A(K).getAlpha()&&!A.equals(re.paper_bgcolor,K))){var Tt=wt.selectAll("text"),Et=Tt[0].length,At=C.select("."+w.cbbg).node(),ht=n.bBox(At),pt=n.getTranslate(C);Tt.each(function(Gt,un){var pn=Et-1;if(un===0||un===pn){var Kt,wn=n.bBox(this),Bn=n.getTranslate(this);if(un===pn){var vn=wn.right+Bn.x;(Kt=ht.right+pt.x+de-j-2+X-vn)>0&&(Kt=0)}else if(un===0){var cn=wn.left+Bn.x;(Kt=ht.left+pt.x+de+j+2-cn)<0&&(Kt=0)}Kt&&(Et<3?this.setAttribute("transform","translate("+Kt+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var gt={},Pt=p[G],Ot=m[G],Ht=p[V],jt=m[V],Nt=ze-Q;U?(H==="pixels"?(gt.y=ee,gt.t=ce*Ht,gt.b=ce*jt):(gt.t=gt.b=0,gt.yt=ee+z*Ht,gt.yb=ee-z*jt),N==="pixels"?(gt.x=X,gt.l=ze*Pt,gt.r=ze*Ot):(gt.l=Nt*Pt,gt.r=Nt*Ot,gt.xl=X-F*Pt,gt.xr=X+F*Ot)):(H==="pixels"?(gt.x=X,gt.l=ce*Pt,gt.r=ce*Ot):(gt.l=gt.r=0,gt.xl=X+z*Pt,gt.xr=X-z*Ot),N==="pixels"?(gt.y=1-ee,gt.t=ze*Ht,gt.b=ze*jt):(gt.t=Nt*Ht,gt.b=Nt*jt,gt.yt=ee-F*Ht,gt.yb=ee+F*jt)),l.autoMargin(I,P._id,gt)}],I)}(E,_,u);L&&L.then&&(u._promises||[]).push(L),u._context.edits.colorbarPosition&&function(C,P,I){var U,z,H,F=P.orientation==="v",N=I._fullLayout._size;d.init({element:C.node(),gd:I,prepFn:function(){U=C.attr("transform"),r(C)},moveFn:function(B,j){C.attr("transform",U+t(B,j)),z=d.align((F?P._uFrac:P._vFrac)+B/N.w,F?P._thickFrac:P._lenFrac,0,1,P.xanchor),H=d.align((F?P._vFrac:1-P._uFrac)-j/N.h,F?P._lenFrac:P._thickFrac,0,1,P.yanchor);var K=d.getCursor(z,H,P.xanchor,P.yanchor);r(C,K)},doneFn:function(){if(r(C),z!==void 0&&H!==void 0){var B={};B[P._propPrefix+"x"]=z,B[P._propPrefix+"y"]=H,P._traceIndex!==void 0?T.call("_guiRestyle",I,B,P._traceIndex):T.call("_guiRelayout",I,B)}}})}(E,_,u)}),S.exit().each(function(_){l.autoMargin(u,_._id)}).remove(),S.order()}}},76228:function($,R,e){var k=e(71828);$.exports=function(A){return k.isPlainObject(A.colorbar)}},12311:function($,R,e){$.exports={moduleType:"component",name:"colorbar",attributes:e(63583),supplyDefaults:e(62499),draw:e(98981).draw,hasColorbar:e(76228)}},50693:function($,R,e){var k=e(63583),A=e(30587).counter,l=e(78607),T=e(63282).scales;function x(d){return"`"+d+"`"}l(T),$.exports=function(d,s){d=d||"";var t,o=(s=s||{}).cLetter||"c",r=("onlyIfNumerical"in s?s.onlyIfNumerical:Boolean(d),"noScale"in s?s.noScale:d==="marker.line"),n="showScaleDflt"in s?s.showScaleDflt:o==="z",a=typeof s.colorscaleDflt=="string"?T[s.colorscaleDflt]:null,i=s.editTypeOverride||"",c=d?d+".":"";"colorAttr"in s?(t=s.colorAttr,s.colorAttr):x(c+(t={z:"z",c:"color"}[o]));var h=o+"auto",f=o+"min",b=o+"max",v=o+"mid",g={};g[f]=g[b]=void 0;var y={};y[h]=!1;var p={};return t==="color"&&(p.color={valType:"color",arrayOk:!0,editType:i||"style"},s.anim&&(p.color.anim=!0)),p[h]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:g},p[f]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:y},p[b]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:y},p[v]={valType:"number",dflt:null,editType:"calc",impliedEdits:g},p.colorscale={valType:"colorscale",editType:"calc",dflt:a,impliedEdits:{autocolorscale:!1}},p.autocolorscale={valType:"boolean",dflt:s.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},p.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(p.showscale={valType:"boolean",dflt:n,editType:"calc"},p.colorbar=k),s.noColorAxis||(p.coloraxis={valType:"subplotid",regex:A("coloraxis"),dflt:null,editType:"calc"}),p}},78803:function($,R,e){var k=e(92770),A=e(71828),l=e(52075).extractOpts;$.exports=function(T,x,d){var s,t=T._fullLayout,o=d.vals,r=d.containerStr,n=r?A.nestedProperty(x,r).get():x,a=l(n),i=a.auto!==!1,c=a.min,h=a.max,f=a.mid,b=function(){return A.aggNums(Math.min,null,o)},v=function(){return A.aggNums(Math.max,null,o)};c===void 0?c=b():i&&(c=n._colorAx&&k(c)?Math.min(c,b()):b()),h===void 0?h=v():i&&(h=n._colorAx&&k(h)?Math.max(h,v()):v()),i&&f!==void 0&&(h-f>f-c?c=f-(h-f):h-f<f-c&&(h=f+(f-c))),c===h&&(c-=.5,h+=.5),a._sync("min",c),a._sync("max",h),a.autocolorscale&&(s=c*h<0?t.colorscale.diverging:c>=0?t.colorscale.sequential:t.colorscale.sequentialminus,a._sync("colorscale",s))}},33046:function($,R,e){var k=e(71828),A=e(52075).hasColorscale,l=e(52075).extractOpts;$.exports=function(T,x){function d(i,c){var h=i["_"+c];h!==void 0&&(i[c]=h)}function s(i,c){var h=c.container?k.nestedProperty(i,c.container).get():i;if(h)if(h.coloraxis)h._colorAx=x[h.coloraxis];else{var f=l(h),b=f.auto;(b||f.min===void 0)&&d(h,c.min),(b||f.max===void 0)&&d(h,c.max),f.autocolorscale&&d(h,"colorscale")}}for(var t=0;t<T.length;t++){var o=T[t],r=o._module.colorbar;if(r)if(Array.isArray(r))for(var n=0;n<r.length;n++)s(o,r[n]);else s(o,r);A(o,"marker.line")&&s(o,{container:"marker.line",min:"cmin",max:"cmax"})}for(var a in x._colorAxes)s(x[a],{min:"cmin",max:"cmax"})}},1586:function($,R,e){var k=e(92770),A=e(71828),l=e(76228),T=e(62499),x=e(63282).isValid,d=e(73972).traceIs;function s(t,o){var r=o.slice(0,o.length-1);return o?A.nestedProperty(t,r).get()||{}:t}$.exports=function t(o,r,n,a,i){var c=i.prefix,h=i.cLetter,f="_module"in r,b=s(o,c),v=s(r,c),g=s(r._template||{},c)||{},y=function(){return delete o.coloraxis,delete r.coloraxis,t(o,r,n,a,i)};if(f){var p=n._colorAxes||{},m=a(c+"coloraxis");if(m){var w=d(r,"contour")&&A.nestedProperty(r,"contours.coloring").get()||"heatmap",u=p[m];return void(u?(u[2].push(y),u[0]!==w&&(u[0]=!1,A.warn(["Ignoring coloraxis:",m,"setting","as it is linked to incompatible colorscales."].join(" ")))):p[m]=[w,r,[y]])}}var S=b[h+"min"],_=b[h+"max"],E=k(S)&&k(_)&&S<_;a(c+h+"auto",!E)?a(c+h+"mid"):(a(c+h+"min"),a(c+h+"max"));var L,C,P=b.colorscale,I=g.colorscale;P!==void 0&&(L=!x(P)),I!==void 0&&(L=!x(I)),a(c+"autocolorscale",L),a(c+"colorscale"),a(c+"reversescale"),c!=="marker.line."&&(c&&f&&(C=l(b)),a(c+"showscale",C)&&(c&&g&&(v._template=g),T(b,v,n)))}},52075:function($,R,e){var k=e(39898),A=e(84267),l=e(92770),T=e(71828),x=e(7901),d=e(63282).isValid,s=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function o(c){var h,f,b,v=c._colorAx,g=v||c,y={};for(f=0;f<s.length;f++)y[b=s[f]]=g[b];if(v)for(h="c",f=0;f<t.length;f++)y[b=t[f]]=g["c"+b];else{var p;for(f=0;f<t.length;f++)((p="c"+(b=t[f]))in g||(p="z"+b)in g)&&(y[b]=g[p]);h=p.charAt(0)}return y._sync=function(m,w){var u=t.indexOf(m)!==-1?h+m:m;g[u]=g["_"+u]=w},y}function r(c){for(var h=o(c),f=h.min,b=h.max,v=h.reversescale?n(h.colorscale):h.colorscale,g=v.length,y=new Array(g),p=new Array(g),m=0;m<g;m++){var w=v[m];y[m]=f+w[0]*(b-f),p[m]=w[1]}return{domain:y,range:p}}function n(c){for(var h=c.length,f=new Array(h),b=h-1,v=0;b>=0;b--,v++){var g=c[b];f[v]=[1-g[0],g[1]]}return f}function a(c,h){h=h||{};for(var f=c.domain,b=c.range,v=b.length,g=new Array(v),y=0;y<v;y++){var p=A(b[y]).toRgb();g[y]=[p.r,p.g,p.b,p.a]}var m,w=k.scale.linear().domain(f).range(g).clamp(!0),u=h.noNumericCheck,S=h.returnArray;return(m=u&&S?w:u?function(_){return i(w(_))}:S?function(_){return l(_)?w(_):A(_).isValid()?_:x.defaultLine}:function(_){return l(_)?i(w(_)):A(_).isValid()?_:x.defaultLine}).domain=w.domain,m.range=function(){return b},m}function i(c){var h={r:c[0],g:c[1],b:c[2],a:c[3]};return A(h).toRgbString()}$.exports={hasColorscale:function(c,h,f){var b=h?T.nestedProperty(c,h).get()||{}:c,v=b[f||"color"],g=!1;if(T.isArrayOrTypedArray(v)){for(var y=0;y<v.length;y++)if(l(v[y])){g=!0;break}}return T.isPlainObject(b)&&(g||b.showscale===!0||l(b.cmin)&&l(b.cmax)||d(b.colorscale)||T.isPlainObject(b.colorbar))},extractOpts:o,extractScale:r,flipScale:n,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(c,h){return a(r(c),h)}}},21081:function($,R,e){var k=e(63282),A=e(52075);$.exports={moduleType:"component",name:"colorscale",attributes:e(50693),layoutAttributes:e(72673),supplyLayoutDefaults:e(30959),handleDefaults:e(1586),crossTraceDefaults:e(33046),calc:e(78803),scales:k.scales,defaultScale:k.defaultScale,getScale:k.get,isValidScale:k.isValid,hasColorscale:A.hasColorscale,extractOpts:A.extractOpts,extractScale:A.extractScale,flipScale:A.flipScale,makeColorScaleFunc:A.makeColorScaleFunc,makeColorScaleFuncFromTrace:A.makeColorScaleFuncFromTrace}},72673:function($,R,e){var k=e(1426).extendFlat,A=e(50693),l=e(63282).scales;$.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:l.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:l.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:l.RdBu,editType:"calc"}},coloraxis:k({_isSubplotObj:!0,editType:"calc"},A("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},30959:function($,R,e){var k=e(71828),A=e(44467),l=e(72673),T=e(1586);$.exports=function(x,d){function s(h,f){return k.coerce(x,d,l,h,f)}s("colorscale.sequential"),s("colorscale.sequentialminus"),s("colorscale.diverging");var t,o,r=d._colorAxes;function n(h,f){return k.coerce(t,o,l.coloraxis,h,f)}for(var a in r){var i=r[a];if(i[0])t=x[a]||{},(o=A.newContainer(d,a,"coloraxis"))._name=a,T(t,o,d,n,{prefix:"",cLetter:"c"});else{for(var c=0;c<i[2].length;c++)i[2][c]();delete d._colorAxes[a]}}}},63282:function($,R,e){var k=e(84267),A={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},l=A.RdBu;function T(x){var d=0;if(!Array.isArray(x)||x.length<2||!x[0]||!x[x.length-1]||+x[0][0]!=0||+x[x.length-1][0]!=1)return!1;for(var s=0;s<x.length;s++){var t=x[s];if(t.length!==2||+t[0]<d||!k(t[1]).isValid())return!1;d=+t[0]}return!0}$.exports={scales:A,defaultScale:l,get:function(x,d){if(d||(d=l),!x)return d;function s(){try{x=A[x]||JSON.parse(x)}catch{x=d}}return typeof x=="string"&&(s(),typeof x=="string"&&s()),T(x)?x:d},isValid:function(x){return A[x]!==void 0||T(x)}}},92807:function($){$.exports=function(R,e,k,A,l){var T=(R-k)/(A-k),x=T+e/(A-k),d=(T+x)/2;return l==="left"||l==="bottom"?T:l==="center"||l==="middle"?d:l==="right"||l==="top"?x:T<.6666666666666666-d?T:x>1.3333333333333333-d?x:d}},70461:function($,R,e){var k=e(71828),A=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];$.exports=function(l,T,x,d){return l=x==="left"?0:x==="center"?1:x==="right"?2:k.constrain(Math.floor(3*l),0,2),T=d==="bottom"?0:d==="middle"?1:d==="top"?2:k.constrain(Math.floor(3*T),0,2),A[T][l]}},64505:function($,R){R.selectMode=function(e){return e==="lasso"||e==="select"},R.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"},R.openMode=function(e){return e==="drawline"||e==="drawopenpath"},R.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"},R.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"},R.selectingOrDrawing=function(e){return R.freeMode(e)||R.rectMode(e)}},28569:function($,R,e){var k=e(48956),A=e(57035),l=e(38520),T=e(71828).removeElement,x=e(85555),d=$.exports={};d.align=e(92807),d.getCursor=e(70461);var s=e(26041);function t(){var r=document.createElement("div");r.className="dragcover";var n=r.style;return n.position="fixed",n.left=0,n.right=0,n.top=0,n.bottom=0,n.zIndex=999999999,n.background="none",document.body.appendChild(r),r}function o(r){return k(r.changedTouches?r.changedTouches[0]:r,document.body)}d.unhover=s.wrapped,d.unhoverRaw=s.raw,d.init=function(r){var n,a,i,c,h,f,b,v,g=r.gd,y=1,p=g._context.doubleClickDelay,m=r.element;g._mouseDownTime||(g._mouseDownTime=0),m.style.pointerEvents="all",m.onmousedown=u,l?(m._ontouchstart&&m.removeEventListener("touchstart",m._ontouchstart),m._ontouchstart=u,m.addEventListener("touchstart",u,{passive:!1})):m.ontouchstart=u;var w=r.clampFn||function(E,L,C){return Math.abs(E)<C&&(E=0),Math.abs(L)<C&&(L=0),[E,L]};function u(E){g._dragged=!1,g._dragging=!0;var L=o(E);n=L[0],a=L[1],b=E.target,f=E,v=E.buttons===2||E.ctrlKey,E.clientX===void 0&&E.clientY===void 0&&(E.clientX=n,E.clientY=a),(i=new Date().getTime())-g._mouseDownTime<p?y+=1:(y=1,g._mouseDownTime=i),r.prepFn&&r.prepFn(E,n,a),A&&!v?(h=t()).style.cursor=window.getComputedStyle(m).cursor:A||(h=document,c=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(m).cursor),document.addEventListener("mouseup",_),document.addEventListener("touchend",_),r.dragmode!==!1&&(E.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(E){E.preventDefault();var L=o(E),C=r.minDrag||x.MINDRAG,P=w(L[0]-n,L[1]-a,C),I=P[0],U=P[1];(I||U)&&(g._dragged=!0,d.unhover(g,E)),g._dragged&&r.moveFn&&!v&&(g._dragdata={element:m,dx:I,dy:U},r.moveFn(I,U))}function _(E){if(delete g._dragdata,r.dragmode!==!1&&(E.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",_),document.removeEventListener("touchend",_),A?T(h):c&&(h.documentElement.style.cursor=c,c=null),g._dragging){if(g._dragging=!1,new Date().getTime()-g._mouseDownTime>p&&(y=Math.max(y-1,1)),g._dragged)r.doneFn&&r.doneFn();else if(r.clickFn&&r.clickFn(y,f),!v){var L;try{L=new MouseEvent("click",E)}catch{var C=o(E);(L=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,C[0],C[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}b.dispatchEvent(L)}g._dragging=!1,g._dragged=!1}else g._dragged=!1}},d.coverSlip=t},26041:function($,R,e){var k=e(11086),A=e(79990),l=e(24401).getGraphDiv,T=e(26675),x=$.exports={};x.wrapped=function(d,s,t){(d=l(d))._fullLayout&&A.clear(d._fullLayout._uid+T.HOVERID),x.raw(d,s,t)},x.raw=function(d,s){var t=d._fullLayout,o=d._hoverdata;s||(s={}),s.target&&!d._dragged&&k.triggerHandler(d,"plotly_beforehover",s)===!1||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),d._hoverdata=void 0,s.target&&o&&d.emit("plotly_unhover",{event:s,points:o}))}},79952:function($,R){R.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},R.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},91424:function($,R,e){var k=e(39898),A=e(71828),l=A.numberFormat,T=e(92770),x=e(84267),d=e(73972),s=e(7901),t=e(21081),o=A.strTranslate,r=e(63893),n=e(77922),a=e(18783).LINE_SPACING,i=e(37822).DESELECTDIM,c=e(34098),h=e(39984),f=e(23469).appendArrayPointValue,b=$.exports={};function v(xe,ke,Me){var Te=ke.fillpattern,Q=Te&&b.getPatternAttr(Te.shape,0,"");if(Q){var oe=b.getPatternAttr(Te.bgcolor,0,null),ce=b.getPatternAttr(Te.fgcolor,0,null),me=Te.fgopacity,Ae=b.getPatternAttr(Te.size,0,8),Ie=b.getPatternAttr(Te.solidity,0,.3),Ce=ke.uid;b.pattern(xe,"point",Me,Ce,Q,Ae,Ie,void 0,Te.fillmode,oe,ce,me)}else ke.fillcolor&&xe.call(s.fill,ke.fillcolor)}b.font=function(xe,ke,Me,Te){A.isPlainObject(ke)&&(Te=ke.color,Me=ke.size,ke=ke.family),ke&&xe.style("font-family",ke),Me+1&&xe.style("font-size",Me+"px"),Te&&xe.call(s.fill,Te)},b.setPosition=function(xe,ke,Me){xe.attr("x",ke).attr("y",Me)},b.setSize=function(xe,ke,Me){xe.attr("width",ke).attr("height",Me)},b.setRect=function(xe,ke,Me,Te,Q){xe.call(b.setPosition,ke,Me).call(b.setSize,Te,Q)},b.translatePoint=function(xe,ke,Me,Te){var Q=Me.c2p(xe.x),oe=Te.c2p(xe.y);return!!(T(Q)&&T(oe)&&ke.node())&&(ke.node().nodeName==="text"?ke.attr("x",Q).attr("y",oe):ke.attr("transform",o(Q,oe)),!0)},b.translatePoints=function(xe,ke,Me){xe.each(function(Te){var Q=k.select(this);b.translatePoint(Te,Q,ke,Me)})},b.hideOutsideRangePoint=function(xe,ke,Me,Te,Q,oe){ke.attr("display",Me.isPtWithinRange(xe,Q)&&Te.isPtWithinRange(xe,oe)?null:"none")},b.hideOutsideRangePoints=function(xe,ke){if(ke._hasClipOnAxisFalse){var Me=ke.xaxis,Te=ke.yaxis;xe.each(function(Q){var oe=Q[0].trace,ce=oe.xcalendar,me=oe.ycalendar,Ae=d.traceIs(oe,"bar-like")?".bartext":".point,.textpoint";xe.selectAll(Ae).each(function(Ie){b.hideOutsideRangePoint(Ie,k.select(this),Me,Te,ce,me)})})}},b.crispRound=function(xe,ke,Me){return ke&&T(ke)?xe._context.staticPlot?ke:ke<1?1:Math.round(ke):Me||0},b.singleLineStyle=function(xe,ke,Me,Te,Q){ke.style("fill","none");var oe=(((xe||[])[0]||{}).trace||{}).line||{},ce=Me||oe.width||0,me=Q||oe.dash||"";s.stroke(ke,Te||oe.color),b.dashLine(ke,me,ce)},b.lineGroupStyle=function(xe,ke,Me,Te){xe.style("fill","none").each(function(Q){var oe=(((Q||[])[0]||{}).trace||{}).line||{},ce=ke||oe.width||0,me=Te||oe.dash||"";k.select(this).call(s.stroke,Me||oe.color).call(b.dashLine,me,ce)})},b.dashLine=function(xe,ke,Me){Me=+Me||0,ke=b.dashStyle(ke,Me),xe.style({"stroke-dasharray":ke,"stroke-width":Me+"px"})},b.dashStyle=function(xe,ke){ke=+ke||1;var Me=Math.max(ke,3);return xe==="solid"?xe="":xe==="dot"?xe=Me+"px,"+Me+"px":xe==="dash"?xe=3*Me+"px,"+3*Me+"px":xe==="longdash"?xe=5*Me+"px,"+5*Me+"px":xe==="dashdot"?xe=3*Me+"px,"+Me+"px,"+Me+"px,"+Me+"px":xe==="longdashdot"&&(xe=5*Me+"px,"+2*Me+"px,"+Me+"px,"+2*Me+"px"),xe},b.singleFillStyle=function(xe,ke){var Me=k.select(xe.node());v(xe,((Me.data()[0]||[])[0]||{}).trace||{},ke)},b.fillGroupStyle=function(xe,ke){xe.style("stroke-width",0).each(function(Me){var Te=k.select(this);Me[0].trace&&v(Te,Me[0].trace,ke)})};var g=e(90998);b.symbolNames=[],b.symbolFuncs=[],b.symbolBackOffs=[],b.symbolNeedLines={},b.symbolNoDot={},b.symbolNoFill={},b.symbolList=[],Object.keys(g).forEach(function(xe){var ke=g[xe],Me=ke.n;b.symbolList.push(Me,String(Me),xe,Me+100,String(Me+100),xe+"-open"),b.symbolNames[Me]=xe,b.symbolFuncs[Me]=ke.f,b.symbolBackOffs[Me]=ke.backoff||0,ke.needLine&&(b.symbolNeedLines[Me]=!0),ke.noDot?b.symbolNoDot[Me]=!0:b.symbolList.push(Me+200,String(Me+200),xe+"-dot",Me+300,String(Me+300),xe+"-open-dot"),ke.noFill&&(b.symbolNoFill[Me]=!0)});var y=b.symbolNames.length;function p(xe,ke,Me,Te){var Q=xe%100;return b.symbolFuncs[Q](ke,Me,Te)+(xe>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}b.symbolNumber=function(xe){if(T(xe))xe=+xe;else if(typeof xe=="string"){var ke=0;xe.indexOf("-open")>0&&(ke=100,xe=xe.replace("-open","")),xe.indexOf("-dot")>0&&(ke+=200,xe=xe.replace("-dot","")),(xe=b.symbolNames.indexOf(xe))>=0&&(xe+=ke)}return xe%100>=y||xe>=400?0:Math.floor(Math.max(xe,0))};var m={x1:1,x2:0,y1:0,y2:0},w={x1:0,x2:0,y1:1,y2:0},u=l("~f"),S={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:m},horizontalreversed:{node:"linearGradient",attrs:m,reversed:!0},vertical:{node:"linearGradient",attrs:w},verticalreversed:{node:"linearGradient",attrs:w,reversed:!0}};b.gradient=function(xe,ke,Me,Te,Q,oe){for(var ce=Q.length,me=S[Te],Ae=new Array(ce),Ie=0;Ie<ce;Ie++)me.reversed?Ae[ce-1-Ie]=[u(100*(1-Q[Ie][0])),Q[Ie][1]]:Ae[Ie]=[u(100*Q[Ie][0]),Q[Ie][1]];var Ce=ke._fullLayout,Re="g"+Ce._uid+"-"+Me,le=Ce._defs.select(".gradients").selectAll("#"+Re).data([Te+Ae.join(";")],A.identity);le.exit().remove(),le.enter().append(me.node).each(function(){var de=k.select(this);me.attrs&&de.attr(me.attrs),de.attr("id",Re);var _e=de.selectAll("stop").data(Ae);_e.exit().remove(),_e.enter().append("stop"),_e.each(function(Fe){var Ve=x(Fe[1]);k.select(this).attr({offset:Fe[0]+"%","stop-color":s.tinyRGB(Ve),"stop-opacity":Ve.getAlpha()})})}),xe.style(oe,G(Re,ke)).style(oe+"-opacity",null),xe.classed("gradient_filled",!0)},b.pattern=function(xe,ke,Me,Te,Q,oe,ce,me,Ae,Ie,Ce,Re){var le=ke==="legend";me&&(Ae==="overlay"?(Ie=me,Ce=s.contrast(Ie)):(Ie=void 0,Ce=me));var de,_e,Fe,Ve,He,nt,tt,ot,dt,kt=Me._fullLayout,mt="p"+kt._uid+"-"+Te,wt={},Lt=x(Ce),Ct=s.tinyRGB(Lt),It=Re*Lt.getAlpha();switch(Q){case"/":de=oe*Math.sqrt(2),_e=oe*Math.sqrt(2),nt="path",wt={d:Fe="M-"+de/4+","+_e/4+"l"+de/2+",-"+_e/2+"M0,"+_e+"L"+de+",0M"+de/4*3+","+_e/4*5+"l"+de/2+",-"+_e/2,opacity:It,stroke:Ct,"stroke-width":(Ve=ce*oe)+"px"};break;case"\\":de=oe*Math.sqrt(2),_e=oe*Math.sqrt(2),nt="path",wt={d:Fe="M"+de/4*3+",-"+_e/4+"l"+de/2+","+_e/2+"M0,0L"+de+","+_e+"M-"+de/4+","+_e/4*3+"l"+de/2+","+_e/2,opacity:It,stroke:Ct,"stroke-width":(Ve=ce*oe)+"px"};break;case"x":de=oe*Math.sqrt(2),_e=oe*Math.sqrt(2),Fe="M-"+de/4+","+_e/4+"l"+de/2+",-"+_e/2+"M0,"+_e+"L"+de+",0M"+de/4*3+","+_e/4*5+"l"+de/2+",-"+_e/2+"M"+de/4*3+",-"+_e/4+"l"+de/2+","+_e/2+"M0,0L"+de+","+_e+"M-"+de/4+","+_e/4*3+"l"+de/2+","+_e/2,Ve=oe-oe*Math.sqrt(1-ce),nt="path",wt={d:Fe,opacity:It,stroke:Ct,"stroke-width":Ve+"px"};break;case"|":nt="path",nt="path",wt={d:Fe="M"+(de=oe)/2+",0L"+de/2+","+(_e=oe),opacity:It,stroke:Ct,"stroke-width":(Ve=ce*oe)+"px"};break;case"-":nt="path",nt="path",wt={d:Fe="M0,"+(_e=oe)/2+"L"+(de=oe)+","+_e/2,opacity:It,stroke:Ct,"stroke-width":(Ve=ce*oe)+"px"};break;case"+":nt="path",Fe="M"+(de=oe)/2+",0L"+de/2+","+(_e=oe)+"M0,"+_e/2+"L"+de+","+_e/2,Ve=oe-oe*Math.sqrt(1-ce),nt="path",wt={d:Fe,opacity:It,stroke:Ct,"stroke-width":Ve+"px"};break;case".":de=oe,_e=oe,ce<Math.PI/4?He=Math.sqrt(ce*oe*oe/Math.PI):(tt=ce,ot=Math.PI/4,He=(dt=oe/2)+(oe/Math.sqrt(2)-dt)*(tt-ot)/(1-ot)),nt="circle",wt={cx:de/2,cy:_e/2,r:He,opacity:It,fill:Ct}}var Ut=[Q||"noSh",Ie||"noBg",Ce||"noFg",oe,ce].join(";"),Rt=kt._defs.select(".patterns").selectAll("#"+mt).data([Ut],A.identity);Rt.exit().remove(),Rt.enter().append("pattern").each(function(){var Ge=k.select(this);if(Ge.attr({id:mt,width:de+"px",height:_e+"px",patternUnits:"userSpaceOnUse",patternTransform:le?"scale(0.8)":""}),Ie){var We=x(Ie),Be=s.tinyRGB(We),Ye=We.getAlpha(),rt=Ge.selectAll("rect").data([0]);rt.exit().remove(),rt.enter().append("rect").attr({width:de+"px",height:_e+"px",fill:Be,"fill-opacity":Ye})}var Se=Ge.selectAll(nt).data([0]);Se.exit().remove(),Se.enter().append(nt).attr(wt)}),xe.style("fill",G(mt,Me)).style("fill-opacity",null),xe.classed("pattern_filled",!0)},b.initGradients=function(xe){var ke=xe._fullLayout;A.ensureSingle(ke._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),k.select(xe).selectAll(".gradient_filled").classed("gradient_filled",!1)},b.initPatterns=function(xe){var ke=xe._fullLayout;A.ensureSingle(ke._defs,"g","patterns").selectAll("pattern").remove(),k.select(xe).selectAll(".pattern_filled").classed("pattern_filled",!1)},b.getPatternAttr=function(xe,ke,Me){return xe&&A.isArrayOrTypedArray(xe)?ke<xe.length?xe[ke]:Me:xe},b.pointStyle=function(xe,ke,Me){if(xe.size()){var Te=b.makePointStyleFns(ke);xe.each(function(Q){b.singlePointStyle(Q,k.select(this),ke,Te,Me)})}},b.singlePointStyle=function(xe,ke,Me,Te,Q){var oe=Me.marker,ce=oe.line;if(ke.style("opacity",Te.selectedOpacityFn?Te.selectedOpacityFn(xe):xe.mo===void 0?oe.opacity:xe.mo),Te.ms2mrc){var me;me=xe.ms==="various"||oe.size==="various"?3:Te.ms2mrc(xe.ms),xe.mrc=me,Te.selectedSizeFn&&(me=xe.mrc=Te.selectedSizeFn(xe));var Ae=b.symbolNumber(xe.mx||oe.symbol)||0;xe.om=Ae%200>=100;var Ie=Oe(xe,Me),Ce=J(xe,Me);ke.attr("d",p(Ae,me,Ie,Ce))}var Re,le,de,_e=!1;if(xe.so)de=ce.outlierwidth,le=ce.outliercolor,Re=oe.outliercolor;else{var Fe=(ce||{}).width;de=(xe.mlw+1||Fe+1||(xe.trace?(xe.trace.marker.line||{}).width:0)+1)-1||0,le="mlc"in xe?xe.mlcc=Te.lineScale(xe.mlc):A.isArrayOrTypedArray(ce.color)?s.defaultLine:ce.color,A.isArrayOrTypedArray(oe.color)&&(Re=s.defaultLine,_e=!0),Re="mc"in xe?xe.mcc=Te.markerScale(xe.mc):oe.color||"rgba(0,0,0,0)",Te.selectedColorFn&&(Re=Te.selectedColorFn(xe))}if(xe.om)ke.call(s.stroke,Re).style({"stroke-width":(de||1)+"px",fill:"none"});else{ke.style("stroke-width",(xe.isBlank?0:de)+"px");var Ve=oe.gradient,He=xe.mgt;He?_e=!0:He=Ve&&Ve.type,A.isArrayOrTypedArray(He)&&(He=He[0],S[He]||(He=0));var nt=oe.pattern,tt=nt&&b.getPatternAttr(nt.shape,xe.i,"");if(He&&He!=="none"){var ot=xe.mgc;ot?_e=!0:ot=Ve.color;var dt=Me.uid;_e&&(dt+="-"+xe.i),b.gradient(ke,Q,dt,He,[[0,ot],[1,Re]],"fill")}else if(tt){var kt=b.getPatternAttr(nt.bgcolor,xe.i,null),mt=b.getPatternAttr(nt.fgcolor,xe.i,null),wt=nt.fgopacity,Lt=b.getPatternAttr(nt.size,xe.i,8),Ct=b.getPatternAttr(nt.solidity,xe.i,.3),It=xe.mcc||A.isArrayOrTypedArray(nt.shape)||A.isArrayOrTypedArray(nt.bgcolor)||A.isArrayOrTypedArray(nt.size)||A.isArrayOrTypedArray(nt.solidity),Ut=Me.uid;It&&(Ut+="-"+xe.i),b.pattern(ke,"point",Q,Ut,tt,Lt,Ct,xe.mcc,nt.fillmode,kt,mt,wt)}else s.fill(ke,Re);de&&s.stroke(ke,le)}},b.makePointStyleFns=function(xe){var ke={},Me=xe.marker;return ke.markerScale=b.tryColorscale(Me,""),ke.lineScale=b.tryColorscale(Me,"line"),d.traceIs(xe,"symbols")&&(ke.ms2mrc=c.isBubble(xe)?h(xe):function(){return(Me.size||6)/2}),xe.selectedpoints&&A.extendFlat(ke,b.makeSelectedPointStyleFns(xe)),ke},b.makeSelectedPointStyleFns=function(xe){var ke={},Me=xe.selected||{},Te=xe.unselected||{},Q=xe.marker||{},oe=Me.marker||{},ce=Te.marker||{},me=Q.opacity,Ae=oe.opacity,Ie=ce.opacity,Ce=Ae!==void 0,Re=Ie!==void 0;(A.isArrayOrTypedArray(me)||Ce||Re)&&(ke.selectedOpacityFn=function(ot){var dt=ot.mo===void 0?Q.opacity:ot.mo;return ot.selected?Ce?Ae:dt:Re?Ie:i*dt});var le=Q.color,de=oe.color,_e=ce.color;(de||_e)&&(ke.selectedColorFn=function(ot){var dt=ot.mcc||le;return ot.selected?de||dt:_e||dt});var Fe=Q.size,Ve=oe.size,He=ce.size,nt=Ve!==void 0,tt=He!==void 0;return d.traceIs(xe,"symbols")&&(nt||tt)&&(ke.selectedSizeFn=function(ot){var dt=ot.mrc||Fe/2;return ot.selected?nt?Ve/2:dt:tt?He/2:dt}),ke},b.makeSelectedTextStyleFns=function(xe){var ke={},Me=xe.selected||{},Te=xe.unselected||{},Q=xe.textfont||{},oe=Me.textfont||{},ce=Te.textfont||{},me=Q.color,Ae=oe.color,Ie=ce.color;return ke.selectedTextColorFn=function(Ce){var Re=Ce.tc||me;return Ce.selected?Ae||Re:Ie||(Ae?Re:s.addOpacity(Re,i))},ke},b.selectedPointStyle=function(xe,ke){if(xe.size()&&ke.selectedpoints){var Me=b.makeSelectedPointStyleFns(ke),Te=ke.marker||{},Q=[];Me.selectedOpacityFn&&Q.push(function(oe,ce){oe.style("opacity",Me.selectedOpacityFn(ce))}),Me.selectedColorFn&&Q.push(function(oe,ce){s.fill(oe,Me.selectedColorFn(ce))}),Me.selectedSizeFn&&Q.push(function(oe,ce){var me=ce.mx||Te.symbol||0,Ae=Me.selectedSizeFn(ce);oe.attr("d",p(b.symbolNumber(me),Ae,Oe(ce,ke),J(ce,ke))),ce.mrc2=Ae}),Q.length&&xe.each(function(oe){for(var ce=k.select(this),me=0;me<Q.length;me++)Q[me](ce,oe)})}},b.tryColorscale=function(xe,ke){var Me=ke?A.nestedProperty(xe,ke).get():xe;if(Me){var Te=Me.color;if((Me.colorscale||Me._colorAx)&&A.isArrayOrTypedArray(Te))return t.makeColorScaleFuncFromTrace(Me)}return A.identity};var _,E,L={start:1,end:-1,middle:0,bottom:1,top:-1};function C(xe,ke,Me,Te,Q){var oe=k.select(xe.node().parentNode),ce=ke.indexOf("top")!==-1?"top":ke.indexOf("bottom")!==-1?"bottom":"middle",me=ke.indexOf("left")!==-1?"end":ke.indexOf("right")!==-1?"start":"middle",Ae=Te?Te/.8+1:0,Ie=(r.lineCount(xe)-1)*a+1,Ce=L[me]*Ae,Re=.75*Me+L[ce]*Ae+(L[ce]-1)*Ie*Me/2;xe.attr("text-anchor",me),Q||oe.attr("transform",o(Ce,Re))}function P(xe,ke){var Me=xe.ts||ke.textfont.size;return T(Me)&&Me>0?Me:0}function I(xe,ke,Me){return Me&&(xe=B(xe)),ke?z(xe[1]):U(xe[0])}function U(xe){var ke=k.round(xe,2);return _=ke,ke}function z(xe){var ke=k.round(xe,2);return E=ke,ke}function H(xe,ke,Me,Te){var Q=xe[0]-ke[0],oe=xe[1]-ke[1],ce=Me[0]-ke[0],me=Me[1]-ke[1],Ae=Math.pow(Q*Q+oe*oe,.25),Ie=Math.pow(ce*ce+me*me,.25),Ce=(Ie*Ie*Q-Ae*Ae*ce)*Te,Re=(Ie*Ie*oe-Ae*Ae*me)*Te,le=3*Ie*(Ae+Ie),de=3*Ae*(Ae+Ie);return[[U(ke[0]+(le&&Ce/le)),z(ke[1]+(le&&Re/le))],[U(ke[0]-(de&&Ce/de)),z(ke[1]-(de&&Re/de))]]}b.textPointStyle=function(xe,ke,Me){if(xe.size()){var Te;if(ke.selectedpoints){var Q=b.makeSelectedTextStyleFns(ke);Te=Q.selectedTextColorFn}var oe=ke.texttemplate,ce=Me._fullLayout;xe.each(function(me){var Ae=k.select(this),Ie=oe?A.extractOption(me,ke,"txt","texttemplate"):A.extractOption(me,ke,"tx","text");if(Ie||Ie===0){if(oe){var Ce=ke._module.formatLabels,Re=Ce?Ce(me,ke,ce):{},le={};f(le,ke,me.i);var de=ke._meta||{};Ie=A.texttemplateString(Ie,Re,ce._d3locale,le,me,de)}var _e=me.tp||ke.textposition,Fe=P(me,ke),Ve=Te?Te(me):me.tc||ke.textfont.color;Ae.call(b.font,me.tf||ke.textfont.family,Fe,Ve).text(Ie).call(r.convertToTspans,Me).call(C,_e,Fe,me.mrc)}else Ae.remove()})}},b.selectedTextStyle=function(xe,ke){if(xe.size()&&ke.selectedpoints){var Me=b.makeSelectedTextStyleFns(ke);xe.each(function(Te){var Q=k.select(this),oe=Me.selectedTextColorFn(Te),ce=Te.tp||ke.textposition,me=P(Te,ke);s.fill(Q,oe);var Ae=d.traceIs(ke,"bar-like");C(Q,ce,me,Te.mrc2||Te.mrc,Ae)})}},b.smoothopen=function(xe,ke){if(xe.length<3)return"M"+xe.join("L");var Me,Te="M"+xe[0],Q=[];for(Me=1;Me<xe.length-1;Me++)Q.push(H(xe[Me-1],xe[Me],xe[Me+1],ke));for(Te+="Q"+Q[0][0]+" "+xe[1],Me=2;Me<xe.length-1;Me++)Te+="C"+Q[Me-2][1]+" "+Q[Me-1][0]+" "+xe[Me];return Te+"Q"+Q[xe.length-3][1]+" "+xe[xe.length-1]},b.smoothclosed=function(xe,ke){if(xe.length<3)return"M"+xe.join("L")+"Z";var Me,Te="M"+xe[0],Q=xe.length-1,oe=[H(xe[Q],xe[0],xe[1],ke)];for(Me=1;Me<Q;Me++)oe.push(H(xe[Me-1],xe[Me],xe[Me+1],ke));for(oe.push(H(xe[Q-1],xe[Q],xe[0],ke)),Me=1;Me<=Q;Me++)Te+="C"+oe[Me-1][1]+" "+oe[Me][0]+" "+xe[Me];return Te+"C"+oe[Q][1]+" "+oe[0][0]+" "+xe[0]+"Z"};var F={hv:function(xe,ke,Me){return"H"+U(ke[0])+"V"+I(ke,1,Me)},vh:function(xe,ke,Me){return"V"+z(ke[1])+"H"+I(ke,0,Me)},hvh:function(xe,ke,Me){return"H"+U((xe[0]+ke[0])/2)+"V"+z(ke[1])+"H"+I(ke,0,Me)},vhv:function(xe,ke,Me){return"V"+z((xe[1]+ke[1])/2)+"H"+U(ke[0])+"V"+I(ke,1,Me)}},N=function(xe,ke,Me){return"L"+I(ke,0,Me)+","+I(ke,1,Me)};function B(xe,ke){var Me=xe.backoff,Te=xe.trace,Q=xe.d,oe=xe.i;if(Me&&Te&&Te.marker&&Te.marker.angle%360==0&&Te.line&&Te.line.shape!=="spline"){var ce=A.isArrayOrTypedArray(Me),me=xe,Ae=ke?ke[0]:_||0,Ie=ke?ke[1]:E||0,Ce=me[0],Re=me[1],le=Ce-Ae,de=Re-Ie,_e=Math.atan2(de,le),Fe=ce?Me[oe]:Me;if(Fe==="auto"){var Ve=me.i;Te.type==="scatter"&&Ve--;var He=me.marker,nt=He.symbol;A.isArrayOrTypedArray(nt)&&(nt=nt[Ve]);var tt=He.size;A.isArrayOrTypedArray(tt)&&(tt=tt[Ve]),Fe=He?b.symbolBackOffs[b.symbolNumber(nt)]*tt:0,Fe+=b.getMarkerStandoff(Q[Ve],Te)||0}var ot=Ce-Fe*Math.cos(_e),dt=Re-Fe*Math.sin(_e);(ot<=Ce&&ot>=Ae||ot>=Ce&&ot<=Ae)&&(dt<=Re&&dt>=Ie||dt>=Re&&dt<=Ie)&&(xe=[ot,dt])}return xe}b.steps=function(xe){var ke=F[xe]||N;return function(Me){for(var Te="M"+U(Me[0][0])+","+z(Me[0][1]),Q=Me.length,oe=1;oe<Q;oe++)Te+=ke(Me[oe-1],Me[oe],oe===Q-1);return Te}},b.applyBackoff=B,b.makeTester=function(){var xe=A.ensureSingleById(k.select("body"),"svg","js-plotly-tester",function(Me){Me.attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),ke=A.ensureSingle(xe,"path","js-reference-point",function(Me){Me.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});b.tester=xe,b.testref=ke},b.savedBBoxes={};var j=0;function K(xe){var ke=xe.getAttribute("data-unformatted");if(ke!==null)return ke+xe.getAttribute("data-math")+xe.getAttribute("text-anchor")+xe.getAttribute("style")}function G(xe,ke){if(!xe)return null;var Me=ke._context,Te=Me._exportedPlot?"":Me._baseUrl||"";return Te?"url('"+Te+"#"+xe+"')":"url(#"+xe+")"}b.bBox=function(xe,ke,Me){var Te,Q,oe;if(Me||(Me=K(xe)),Me){if(Te=b.savedBBoxes[Me])return A.extendFlat({},Te)}else if(xe.childNodes.length===1){var ce=xe.childNodes[0];if(Me=K(ce)){var me=+ce.getAttribute("x")||0,Ae=+ce.getAttribute("y")||0,Ie=ce.getAttribute("transform");if(!Ie){var Ce=b.bBox(ce,!1,Me);return me&&(Ce.left+=me,Ce.right+=me),Ae&&(Ce.top+=Ae,Ce.bottom+=Ae),Ce}if(Me+="~"+me+"~"+Ae+"~"+Ie,Te=b.savedBBoxes[Me])return A.extendFlat({},Te)}}ke?Q=xe:(oe=b.tester.node(),Q=xe.cloneNode(!0),oe.appendChild(Q)),k.select(Q).attr("transform",null).call(r.positionText,0,0);var Re=Q.getBoundingClientRect(),le=b.testref.node().getBoundingClientRect();ke||oe.removeChild(Q);var de={height:Re.height,width:Re.width,left:Re.left-le.left,top:Re.top-le.top,right:Re.right-le.left,bottom:Re.bottom-le.top};return j>=1e4&&(b.savedBBoxes={},j=0),Me&&(b.savedBBoxes[Me]=de),j++,A.extendFlat({},de)},b.setClipUrl=function(xe,ke,Me){xe.attr("clip-path",G(ke,Me))},b.getTranslate=function(xe){var ke=(xe[xe.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(Me,Te,Q){return[Te,Q].join(" ")}).split(" ");return{x:+ke[0]||0,y:+ke[1]||0}},b.setTranslate=function(xe,ke,Me){var Te=xe.attr?"attr":"getAttribute",Q=xe.attr?"attr":"setAttribute",oe=xe[Te]("transform")||"";return ke=ke||0,Me=Me||0,oe=oe.replace(/(\btranslate\(.*?\);?)/,"").trim(),oe=(oe+=o(ke,Me)).trim(),xe[Q]("transform",oe),oe},b.getScale=function(xe){var ke=(xe[xe.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(Me,Te,Q){return[Te,Q].join(" ")}).split(" ");return{x:+ke[0]||1,y:+ke[1]||1}},b.setScale=function(xe,ke,Me){var Te=xe.attr?"attr":"getAttribute",Q=xe.attr?"attr":"setAttribute",oe=xe[Te]("transform")||"";return ke=ke||1,Me=Me||1,oe=oe.replace(/(\bscale\(.*?\);?)/,"").trim(),oe=(oe+="scale("+ke+","+Me+")").trim(),xe[Q]("transform",oe),oe};var V=/\s*sc.*/;b.setPointGroupScale=function(xe,ke,Me){if(ke=ke||1,Me=Me||1,xe){var Te=ke===1&&Me===1?"":"scale("+ke+","+Me+")";xe.each(function(){var Q=(this.getAttribute("transform")||"").replace(V,"");Q=(Q+=Te).trim(),this.setAttribute("transform",Q)})}};var W=/translate\([^)]*\)\s*$/;function J(xe,ke){var Me;return xe&&(Me=xe.mf),Me===void 0&&(Me=ke.marker&&ke.marker.standoff||0),ke._geo||ke._xA?Me:-Me}b.setTextPointsScale=function(xe,ke,Me){xe&&xe.each(function(){var Te,Q=k.select(this),oe=Q.select("text");if(oe.node()){var ce=parseFloat(oe.attr("x")||0),me=parseFloat(oe.attr("y")||0),Ae=(Q.attr("transform")||"").match(W);Te=ke===1&&Me===1?[]:[o(ce,me),"scale("+ke+","+Me+")",o(-ce,-me)],Ae&&Te.push(Ae),Q.attr("transform",Te.join(""))}})},b.getMarkerStandoff=J;var X,ee,re,ie,se,fe,ye=Math.atan2,ge=Math.cos,he=Math.sin;function ve(xe,ke){var Me=ke[0],Te=ke[1];return[Me*ge(xe)-Te*he(xe),Me*he(xe)+Te*ge(xe)]}function Oe(xe,ke){var Me,Te,Q=xe.ma;Q===void 0&&(Q=ke.marker.angle||0);var oe=ke.marker.angleref;if(oe==="previous"||oe==="north"){if(ke._geo){var ce=ke._geo.project(xe.lonlat);Me=ce[0],Te=ce[1]}else{var me=ke._xA,Ae=ke._yA;if(!me||!Ae)return 90;Me=me.c2p(xe.x),Te=Ae.c2p(xe.y)}if(ke._geo){var Ie,Ce=xe.lonlat[0],Re=xe.lonlat[1],le=ke._geo.project([Ce,Re+1e-5]),de=ke._geo.project([Ce+1e-5,Re]),_e=ye(de[1]-Te,de[0]-Me),Fe=ye(le[1]-Te,le[0]-Me);if(oe==="north")Ie=Q/180*Math.PI;else if(oe==="previous"){var Ve=Ce/180*Math.PI,He=Re/180*Math.PI,nt=X/180*Math.PI,tt=ee/180*Math.PI,ot=nt-Ve,dt=ge(tt)*he(ot),kt=he(tt)*ge(He)-ge(tt)*he(He)*ge(ot);Ie=-ye(dt,kt)-Math.PI,X=Ce,ee=Re}var mt=ve(_e,[ge(Ie),0]),wt=ve(Fe,[he(Ie),0]);Q=ye(mt[1]+wt[1],mt[0]+wt[0])/Math.PI*180,oe!=="previous"||fe===ke.uid&&xe.i===se+1||(Q=null)}if(oe==="previous"&&!ke._geo)if(fe===ke.uid&&xe.i===se+1&&T(Me)&&T(Te)){var Lt=Me-re,Ct=Te-ie,It=ke.line&&ke.line.shape||"",Ut=It.slice(It.length-1);Ut==="h"&&(Ct=0),Ut==="v"&&(Lt=0),Q+=ye(Ct,Lt)/Math.PI*180+90}else Q=null}return re=Me,ie=Te,se=xe.i,fe=ke.uid,Q}b.getMarkerAngle=Oe},90998:function($,R,e){var k,A,l,T,x=e(95616),d=e(39898).round,s="M0,0Z",t=Math.sqrt(2),o=Math.sqrt(3),r=Math.PI,n=Math.cos,a=Math.sin;function i(h){return h===null}function c(h,f,b){if(!(h&&h%360!=0||f))return b;if(l===h&&T===f&&k===b)return A;function v(I,U){var z=n(I),H=a(I),F=U[0],N=U[1]+(f||0);return[F*z-N*H,F*H+N*z]}l=h,T=f,k=b;for(var g=h/180*r,y=0,p=0,m=x(b),w="",u=0;u<m.length;u++){var S=m[u],_=S[0],E=y,L=p;if(_==="M"||_==="L")y=+S[1],p=+S[2];else if(_==="m"||_==="l")y+=+S[1],p+=+S[2];else if(_==="H")y=+S[1];else if(_==="h")y+=+S[1];else if(_==="V")p=+S[1];else if(_==="v")p+=+S[1];else if(_==="A"){y=+S[1],p=+S[2];var C=v(g,[+S[6],+S[7]]);S[6]=C[0],S[7]=C[1],S[3]=+S[3]+h}_!=="H"&&_!=="V"||(_="L"),_!=="h"&&_!=="v"||(_="l"),_!=="m"&&_!=="l"||(y-=E,p-=L);var P=v(g,[y,p]);_!=="H"&&_!=="V"||(_="L"),_!=="M"&&_!=="L"&&_!=="m"&&_!=="l"||(S[1]=P[0],S[2]=P[1]),S[0]=_,w+=S[0]+S.slice(1).join(",")}return A=w,w}$.exports={circle:{n:0,f:function(h,f,b){if(i(f))return s;var v=d(h,2),g="M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z";return b?c(f,b,g):g}},square:{n:1,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")}},diamond:{n:2,f:function(h,f,b){if(i(f))return s;var v=d(1.3*h,2);return c(f,b,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"Z")}},cross:{n:3,f:function(h,f,b){if(i(f))return s;var v=d(.4*h,2),g=d(1.2*h,2);return c(f,b,"M"+g+","+v+"H"+v+"V"+g+"H-"+v+"V"+v+"H-"+g+"V-"+v+"H-"+v+"V-"+g+"H"+v+"V-"+v+"H"+g+"Z")}},x:{n:4,f:function(h,f,b){if(i(f))return s;var v=d(.8*h/t,2),g="l"+v+","+v,y="l"+v+",-"+v,p="l-"+v+",-"+v,m="l-"+v+","+v;return c(f,b,"M0,"+v+g+y+p+y+p+m+p+m+g+m+g+"Z")}},"triangle-up":{n:5,f:function(h,f,b){if(i(f))return s;var v=d(2*h/o,2);return c(f,b,"M-"+v+","+d(h/2,2)+"H"+v+"L0,-"+d(h,2)+"Z")}},"triangle-down":{n:6,f:function(h,f,b){if(i(f))return s;var v=d(2*h/o,2);return c(f,b,"M-"+v+",-"+d(h/2,2)+"H"+v+"L0,"+d(h,2)+"Z")}},"triangle-left":{n:7,f:function(h,f,b){if(i(f))return s;var v=d(2*h/o,2);return c(f,b,"M"+d(h/2,2)+",-"+v+"V"+v+"L-"+d(h,2)+",0Z")}},"triangle-right":{n:8,f:function(h,f,b){if(i(f))return s;var v=d(2*h/o,2);return c(f,b,"M-"+d(h/2,2)+",-"+v+"V"+v+"L"+d(h,2)+",0Z")}},"triangle-ne":{n:9,f:function(h,f,b){if(i(f))return s;var v=d(.6*h,2),g=d(1.2*h,2);return c(f,b,"M-"+g+",-"+v+"H"+v+"V"+g+"Z")}},"triangle-se":{n:10,f:function(h,f,b){if(i(f))return s;var v=d(.6*h,2),g=d(1.2*h,2);return c(f,b,"M"+v+",-"+g+"V"+v+"H-"+g+"Z")}},"triangle-sw":{n:11,f:function(h,f,b){if(i(f))return s;var v=d(.6*h,2),g=d(1.2*h,2);return c(f,b,"M"+g+","+v+"H-"+v+"V-"+g+"Z")}},"triangle-nw":{n:12,f:function(h,f,b){if(i(f))return s;var v=d(.6*h,2),g=d(1.2*h,2);return c(f,b,"M-"+v+","+g+"V-"+v+"H"+g+"Z")}},pentagon:{n:13,f:function(h,f,b){if(i(f))return s;var v=d(.951*h,2),g=d(.588*h,2),y=d(-h,2),p=d(-.309*h,2);return c(f,b,"M"+v+","+p+"L"+g+","+d(.809*h,2)+"H-"+g+"L-"+v+","+p+"L0,"+y+"Z")}},hexagon:{n:14,f:function(h,f,b){if(i(f))return s;var v=d(h,2),g=d(h/2,2),y=d(h*o/2,2);return c(f,b,"M"+y+",-"+g+"V"+g+"L0,"+v+"L-"+y+","+g+"V-"+g+"L0,-"+v+"Z")}},hexagon2:{n:15,f:function(h,f,b){if(i(f))return s;var v=d(h,2),g=d(h/2,2),y=d(h*o/2,2);return c(f,b,"M-"+g+","+y+"H"+g+"L"+v+",0L"+g+",-"+y+"H-"+g+"L-"+v+",0Z")}},octagon:{n:16,f:function(h,f,b){if(i(f))return s;var v=d(.924*h,2),g=d(.383*h,2);return c(f,b,"M-"+g+",-"+v+"H"+g+"L"+v+",-"+g+"V"+g+"L"+g+","+v+"H-"+g+"L-"+v+","+g+"V-"+g+"Z")}},star:{n:17,f:function(h,f,b){if(i(f))return s;var v=1.4*h,g=d(.225*v,2),y=d(.951*v,2),p=d(.363*v,2),m=d(.588*v,2),w=d(-v,2),u=d(-.309*v,2),S=d(.118*v,2),_=d(.809*v,2);return c(f,b,"M"+g+","+u+"H"+y+"L"+p+","+S+"L"+m+","+_+"L0,"+d(.382*v,2)+"L-"+m+","+_+"L-"+p+","+S+"L-"+y+","+u+"H-"+g+"L0,"+w+"Z")}},hexagram:{n:18,f:function(h,f,b){if(i(f))return s;var v=d(.66*h,2),g=d(.38*h,2),y=d(.76*h,2);return c(f,b,"M-"+y+",0l-"+g+",-"+v+"h"+y+"l"+g+",-"+v+"l"+g+","+v+"h"+y+"l-"+g+","+v+"l"+g+","+v+"h-"+y+"l-"+g+","+v+"l-"+g+",-"+v+"h-"+y+"Z")}},"star-triangle-up":{n:19,f:function(h,f,b){if(i(f))return s;var v=d(h*o*.8,2),g=d(.8*h,2),y=d(1.6*h,2),p=d(4*h,2),m="A "+p+","+p+" 0 0 1 ";return c(f,b,"M-"+v+","+g+m+v+","+g+m+"0,-"+y+m+"-"+v+","+g+"Z")}},"star-triangle-down":{n:20,f:function(h,f,b){if(i(f))return s;var v=d(h*o*.8,2),g=d(.8*h,2),y=d(1.6*h,2),p=d(4*h,2),m="A "+p+","+p+" 0 0 1 ";return c(f,b,"M"+v+",-"+g+m+"-"+v+",-"+g+m+"0,"+y+m+v+",-"+g+"Z")}},"star-square":{n:21,f:function(h,f,b){if(i(f))return s;var v=d(1.1*h,2),g=d(2*h,2),y="A "+g+","+g+" 0 0 1 ";return c(f,b,"M-"+v+",-"+v+y+"-"+v+","+v+y+v+","+v+y+v+",-"+v+y+"-"+v+",-"+v+"Z")}},"star-diamond":{n:22,f:function(h,f,b){if(i(f))return s;var v=d(1.4*h,2),g=d(1.9*h,2),y="A "+g+","+g+" 0 0 1 ";return c(f,b,"M-"+v+",0"+y+"0,"+v+y+v+",0"+y+"0,-"+v+y+"-"+v+",0Z")}},"diamond-tall":{n:23,f:function(h,f,b){if(i(f))return s;var v=d(.7*h,2),g=d(1.4*h,2);return c(f,b,"M0,"+g+"L"+v+",0L0,-"+g+"L-"+v+",0Z")}},"diamond-wide":{n:24,f:function(h,f,b){if(i(f))return s;var v=d(1.4*h,2),g=d(.7*h,2);return c(f,b,"M0,"+g+"L"+v+",0L0,-"+g+"L-"+v+",0Z")}},hourglass:{n:25,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M"+v+","+v+"H-"+v+"L"+v+",-"+v+"H-"+v+"Z")},noDot:!0},bowtie:{n:26,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M"+v+","+v+"V-"+v+"L-"+v+","+v+"V-"+v+"Z")},noDot:!0},"circle-cross":{n:27,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(h,f,b){if(i(f))return s;var v=d(h,2),g=d(h/t,2);return c(f,b,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g+"M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v+"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(h,f,b){if(i(f))return s;var v=d(1.3*h,2);return c(f,b,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"ZM0,-"+v+"V"+v+"M-"+v+",0H"+v)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(h,f,b){if(i(f))return s;var v=d(1.3*h,2),g=d(.65*h,2);return c(f,b,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"ZM-"+g+",-"+g+"L"+g+","+g+"M-"+g+","+g+"L"+g+",-"+g)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(h,f,b){if(i(f))return s;var v=d(1.4*h,2);return c(f,b,"M0,"+v+"V-"+v+"M"+v+",0H-"+v)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(h,f,b){if(i(f))return s;var v=d(1.2*h,2),g=d(.85*h,2);return c(f,b,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(h,f,b){if(i(f))return s;var v=d(h/2,2),g=d(h,2);return c(f,b,"M"+v+","+g+"V-"+g+"M"+(v-g)+",-"+g+"V"+g+"M"+g+","+v+"H-"+g+"M-"+g+","+(v-g)+"H"+g)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(h,f,b){if(i(f))return s;var v=d(1.2*h,2),g=d(1.6*h,2),y=d(.8*h,2);return c(f,b,"M-"+v+","+y+"L0,0M"+v+","+y+"L0,0M0,-"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(h,f,b){if(i(f))return s;var v=d(1.2*h,2),g=d(1.6*h,2),y=d(.8*h,2);return c(f,b,"M-"+v+",-"+y+"L0,0M"+v+",-"+y+"L0,0M0,"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(h,f,b){if(i(f))return s;var v=d(1.2*h,2),g=d(1.6*h,2),y=d(.8*h,2);return c(f,b,"M"+y+","+v+"L0,0M"+y+",-"+v+"L0,0M-"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(h,f,b){if(i(f))return s;var v=d(1.2*h,2),g=d(1.6*h,2),y=d(.8*h,2);return c(f,b,"M-"+y+","+v+"L0,0M-"+y+",-"+v+"L0,0M"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(h,f,b){if(i(f))return s;var v=d(1.4*h,2);return c(f,b,"M"+v+",0H-"+v)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(h,f,b){if(i(f))return s;var v=d(1.4*h,2);return c(f,b,"M0,"+v+"V-"+v)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M"+v+",-"+v+"L-"+v+","+v)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M"+v+","+v+"L-"+v+",-"+v)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M0,0L-"+v+","+d(2*h,2)+"H"+v+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M0,0L-"+v+",-"+d(2*h,2)+"H"+v+"Z")},noDot:!0},"arrow-left":{n:47,f:function(h,f,b){if(i(f))return s;var v=d(2*h,2),g=d(h,2);return c(f,b,"M0,0L"+v+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-right":{n:48,f:function(h,f,b){if(i(f))return s;var v=d(2*h,2),g=d(h,2);return c(f,b,"M0,0L-"+v+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M-"+v+",0H"+v+"M0,0L-"+v+","+d(2*h,2)+"H"+v+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(h,f,b){if(i(f))return s;var v=d(h,2);return c(f,b,"M-"+v+",0H"+v+"M0,0L-"+v+",-"+d(2*h,2)+"H"+v+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(h,f,b){if(i(f))return s;var v=d(2*h,2),g=d(h,2);return c(f,b,"M0,-"+g+"V"+g+"M0,0L"+v+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(h,f,b){if(i(f))return s;var v=d(2*h,2),g=d(h,2);return c(f,b,"M0,-"+g+"V"+g+"M0,0L-"+v+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(h,f,b){if(i(f))return s;var v=r/2.5,g=2*h*n(v),y=2*h*a(v);return c(f,b,"M0,0L"+-g+","+y+"L"+g+","+y+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(h,f,b){if(i(f))return s;var v=r/4,g=2*h*n(v),y=2*h*a(v);return c(f,b,"M0,0L"+-g+","+y+"A "+2*h+","+2*h+" 0 0 1 "+g+","+y+"Z")},backoff:.4,noDot:!0}}},25673:function($){$.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function($,R,e){var k=e(92770),A=e(73972),l=e(89298),T=e(71828),x=e(45827);function d(s,t,o,r){var n=t["error_"+r]||{},a=[];if(n.visible&&["linear","log"].indexOf(o.type)!==-1){for(var i=x(n),c=0;c<s.length;c++){var h=s[c],f=h.i;if(f===void 0)f=c;else if(f===null)continue;var b=h[r];if(k(o.c2l(b))){var v=i(b,f);if(k(v[0])&&k(v[1])){var g=h[r+"s"]=b-v[0],y=h[r+"h"]=b+v[1];a.push(g,y)}}}var p=o._id,m=t._extremes[p],w=l.findExtremes(o,a,T.extendFlat({tozero:m.opts.tozero},{padded:!0}));m.min=m.min.concat(w.min),m.max=m.max.concat(w.max)}}$.exports=function(s){for(var t=s.calcdata,o=0;o<t.length;o++){var r=t[o],n=r[0].trace;if(n.visible===!0&&A.traceIs(n,"errorBarsOK")){var a=l.getFromId(s,n.xaxis),i=l.getFromId(s,n.yaxis);d(r,n,a,"x"),d(r,n,i,"y")}}}},45827:function($){function R(e,k){return e==="percent"?function(A){return Math.abs(A*k/100)}:e==="constant"?function(){return Math.abs(k)}:e==="sqrt"?function(A){return Math.sqrt(Math.abs(A))}:void 0}$.exports=function(e){var k=e.type,A=e.symmetric;if(k==="data"){var l=e.array||[];if(A)return function(s,t){var o=+l[t];return[o,o]};var T=e.arrayminus||[];return function(s,t){var o=+l[t],r=+T[t];return isNaN(o)&&isNaN(r)?[NaN,NaN]:[r||0,o||0]}}var x=R(k,e.value),d=R(k,e.valueminus);return A||e.valueminus===void 0?function(s){var t=x(s);return[t,t]}:function(s){return[d(s),x(s)]}}},97587:function($,R,e){var k=e(92770),A=e(73972),l=e(71828),T=e(44467),x=e(25673);$.exports=function(d,s,t,o){var r="error_"+o.axis,n=T.newContainer(s,r),a=d[r]||{};function i(b,v){return l.coerce(a,n,x,b,v)}if(i("visible",a.array!==void 0||a.value!==void 0||a.type==="sqrt")!==!1){var c=i("type","array"in a?"data":"percent"),h=!0;c!=="sqrt"&&(h=i("symmetric",!((c==="data"?"arrayminus":"valueminus")in a))),c==="data"?(i("array"),i("traceref"),h||(i("arrayminus"),i("tracerefminus"))):c!=="percent"&&c!=="constant"||(i("value"),h||i("valueminus"));var f="copy_"+o.inherit+"style";o.inherit&&(s["error_"+o.inherit]||{}).visible&&i(f,!(a.color||k(a.thickness)||k(a.width))),o.inherit&&n[f]||(i("color",t),i("thickness"),i("width",A.traceIs(s,"gl3d")?0:4))}}},37369:function($,R,e){var k=e(71828),A=e(30962).overrideAll,l=e(25673),T={error_x:k.extendFlat({},l),error_y:k.extendFlat({},l)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var x={error_x:k.extendFlat({},l),error_y:k.extendFlat({},l),error_z:k.extendFlat({},l)};delete x.error_x.copy_ystyle,delete x.error_y.copy_ystyle,delete x.error_z.copy_ystyle,delete x.error_z.copy_zstyle,$.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:A(x,"calc","nested"),scattergl:A(T,"calc","nested")}},supplyDefaults:e(97587),calc:e(84532),makeComputeError:e(45827),plot:e(19398),style:e(62662),hoverInfo:function(d,s,t){(s.error_y||{}).visible&&(t.yerr=d.yh-d.y,s.error_y.symmetric||(t.yerrneg=d.y-d.ys)),(s.error_x||{}).visible&&(t.xerr=d.xh-d.x,s.error_x.symmetric||(t.xerrneg=d.x-d.xs))}}},19398:function($,R,e){var k=e(39898),A=e(92770),l=e(91424),T=e(34098);$.exports=function(x,d,s,t){var o=s.xaxis,r=s.yaxis,n=t&&t.duration>0;d.each(function(a){var i,c=a[0].trace,h=c.error_x||{},f=c.error_y||{};c.ids&&(i=function(y){return y.id});var b=T.hasMarkers(c)&&c.marker.maxdisplayed>0;f.visible||h.visible||(a=[]);var v=k.select(this).selectAll("g.errorbar").data(a,i);if(v.exit().remove(),a.length){h.visible||v.selectAll("path.xerror").remove(),f.visible||v.selectAll("path.yerror").remove(),v.style("opacity",1);var g=v.enter().append("g").classed("errorbar",!0);n&&g.style("opacity",0).transition().duration(t.duration).style("opacity",1),l.setClipUrl(v,s.layerClipId,x),v.each(function(y){var p=k.select(this),m=function(L,C,P){var I={x:C.c2p(L.x),y:P.c2p(L.y)};return L.yh!==void 0&&(I.yh=P.c2p(L.yh),I.ys=P.c2p(L.ys),A(I.ys)||(I.noYS=!0,I.ys=P.c2p(L.ys,!0))),L.xh!==void 0&&(I.xh=C.c2p(L.xh),I.xs=C.c2p(L.xs),A(I.xs)||(I.noXS=!0,I.xs=C.c2p(L.xs,!0))),I}(y,o,r);if(!b||y.vis){var w,u=p.select("path.yerror");if(f.visible&&A(m.x)&&A(m.yh)&&A(m.ys)){var S=f.width;w="M"+(m.x-S)+","+m.yh+"h"+2*S+"m-"+S+",0V"+m.ys,m.noYS||(w+="m-"+S+",0h"+2*S),u.size()?n&&(u=u.transition().duration(t.duration).ease(t.easing)):u=p.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),u.attr("d",w)}else u.remove();var _=p.select("path.xerror");if(h.visible&&A(m.y)&&A(m.xh)&&A(m.xs)){var E=(h.copy_ystyle?f:h).width;w="M"+m.xh+","+(m.y-E)+"v"+2*E+"m0,-"+E+"H"+m.xs,m.noXS||(w+="m0,-"+E+"v"+2*E),_.size()?n&&(_=_.transition().duration(t.duration).ease(t.easing)):_=p.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),_.attr("d",w)}else _.remove()}})}})}},62662:function($,R,e){var k=e(39898),A=e(7901);$.exports=function(l){l.each(function(T){var x=T[0].trace,d=x.error_y||{},s=x.error_x||{},t=k.select(this);t.selectAll("path.yerror").style("stroke-width",d.thickness+"px").call(A.stroke,d.color),s.copy_ystyle&&(s=d),t.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(A.stroke,s.color)})}},77914:function($,R,e){var k=e(41940),A=e(528).hoverlabel,l=e(1426).extendFlat;$.exports={hoverlabel:{bgcolor:l({},A.bgcolor,{arrayOk:!0}),bordercolor:l({},A.bordercolor,{arrayOk:!0}),font:k({arrayOk:!0,editType:"none"}),align:l({},A.align,{arrayOk:!0}),namelength:l({},A.namelength,{arrayOk:!0}),editType:"none"}}},30732:function($,R,e){var k=e(71828),A=e(73972);function l(T,x,d,s){s=s||k.identity,Array.isArray(T)&&(x[0][d]=s(T))}$.exports=function(T){var x=T.calcdata,d=T._fullLayout;function s(a){return function(i){return k.coerceHoverinfo({hoverinfo:i},{_module:a._module},d)}}for(var t=0;t<x.length;t++){var o=x[t],r=o[0].trace;if(!A.traceIs(r,"pie-like")){var n=A.traceIs(r,"2dMap")?l:k.fillArray;n(r.hoverinfo,o,"hi",s(r)),r.hovertemplate&&n(r.hovertemplate,o,"ht"),r.hoverlabel&&(n(r.hoverlabel.bgcolor,o,"hbg"),n(r.hoverlabel.bordercolor,o,"hbc"),n(r.hoverlabel.font.size,o,"hts"),n(r.hoverlabel.font.color,o,"htc"),n(r.hoverlabel.font.family,o,"htf"),n(r.hoverlabel.namelength,o,"hnl"),n(r.hoverlabel.align,o,"hta"))}}}},75914:function($,R,e){var k=e(73972),A=e(88335).hover;$.exports=function(l,T,x){var d=k.getComponentMethod("annotations","onClick")(l,l._hoverdata);function s(){l.emit("plotly_click",{points:l._hoverdata,event:T})}x!==void 0&&A(l,T,x,!0),l._hoverdata&&T&&T.target&&(d&&d.then?d.then(s):s(),T.stopImmediatePropagation&&T.stopImmediatePropagation())}},26675:function($){$.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function($,R,e){var k=e(71828),A=e(77914),l=e(38048);$.exports=function(T,x,d,s){var t=k.extendFlat({},s.hoverlabel);x.hovertemplate&&(t.namelength=-1),l(T,x,function(o,r){return k.coerce(T,x,A,o,r)},t)}},23469:function($,R,e){var k=e(71828);R.getSubplot=function(s){return s.subplot||s.xaxis+s.yaxis||s.geo},R.isTraceInSubplots=function(s,t){if(s.type==="splom"){for(var o=s.xaxes||[],r=s.yaxes||[],n=0;n<o.length;n++)for(var a=0;a<r.length;a++)if(t.indexOf(o[n]+r[a])!==-1)return!0;return!1}return t.indexOf(R.getSubplot(s))!==-1},R.flat=function(s,t){for(var o=new Array(s.length),r=0;r<s.length;r++)o[r]=t;return o},R.p2c=function(s,t){for(var o=new Array(s.length),r=0;r<s.length;r++)o[r]=s[r].p2c(t);return o},R.getDistanceFunction=function(s,t,o,r){return s==="closest"?r||R.quadrature(t,o):s.charAt(0)==="x"?t:o},R.getClosest=function(s,t,o){if(o.index!==!1)o.index>=0&&o.index<s.length?o.distance=0:o.index=!1;else for(var r=0;r<s.length;r++){var n=t(s[r]);n<=o.distance&&(o.index=r,o.distance=n)}return o},R.inbox=function(s,t,o){return s*t<0||s===0?o:1/0},R.quadrature=function(s,t){return function(o){var r=s(o),n=t(o);return Math.sqrt(r*r+n*n)}},R.makeEventData=function(s,t,o){var r="index"in s?s.index:s.pointNumber,n={data:t._input,fullData:t,curveNumber:t.index,pointNumber:r};if(t._indexToPoints){var a=t._indexToPoints[r];a.length===1?n.pointIndex=a[0]:n.pointIndices=a}else n.pointIndex=r;return t._module.eventData?n=t._module.eventData(n,s,t,o,r):("xVal"in s?n.x=s.xVal:"x"in s&&(n.x=s.x),"yVal"in s?n.y=s.yVal:"y"in s&&(n.y=s.y),s.xa&&(n.xaxis=s.xa),s.ya&&(n.yaxis=s.ya),s.zLabelVal!==void 0&&(n.z=s.zLabelVal)),R.appendArrayPointValue(n,t,r),n},R.appendArrayPointValue=function(s,t,o){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],i=l(a);if(s[i]===void 0){var c=T(k.nestedProperty(t,a).get(),o);c!==void 0&&(s[i]=c)}}},R.appendArrayMultiPointValues=function(s,t,o){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],i=l(a);if(s[i]===void 0){for(var c=k.nestedProperty(t,a).get(),h=new Array(o.length),f=0;f<o.length;f++)h[f]=T(c,o[f]);s[i]=h}}};var A={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function l(s){return A[s]||s}function T(s,t){return Array.isArray(t)?Array.isArray(s)&&Array.isArray(s[t[0]])?s[t[0]][t[1]]:void 0:s[t]}var x={x:!0,y:!0},d={"x unified":!0,"y unified":!0};R.isUnifiedHover=function(s){return typeof s=="string"&&!!d[s]},R.isXYhover=function(s){return typeof s=="string"&&!!x[s]}},88335:function($,R,e){var k=e(39898),A=e(92770),l=e(84267),T=e(71828),x=T.strTranslate,d=T.strRotate,s=e(11086),t=e(63893),o=e(39918),r=e(91424),n=e(7901),a=e(28569),i=e(89298),c=e(73972),h=e(23469),f=e(26675),b=e(99017),v=e(43969),g=f.YANGLE,y=Math.PI*g/180,p=1/Math.sin(y),m=Math.cos(y),w=Math.sin(y),u=f.HOVERARROWSIZE,S=f.HOVERTEXTPAD,_={box:!0,ohlc:!0,violin:!0,candlestick:!0},E={scatter:!0,scattergl:!0,splom:!0};function L(V){return[V.trace.index,V.index,V.x0,V.y0,V.name,V.attr,V.xa?V.xa._id:"",V.ya?V.ya._id:""].join(",")}R.hover=function(V,W,J,X){V=T.getGraphDiv(V);var ee=W.target;T.throttle(V._fullLayout._uid+f.HOVERID,f.HOVERMINTIME,function(){(function(re,ie,se,fe,ye){se||(se="xy");var ge=Array.isArray(se)?se:[se],he=re._fullLayout,ve=he._plots||[],Oe=ve[se],xe=he._has("cartesian");if(Oe){var ke=Oe.overlays.map(function(qn){return qn.id});ge=ge.concat(ke)}for(var Me=ge.length,Te=new Array(Me),Q=new Array(Me),oe=!1,ce=0;ce<Me;ce++){var me=ge[ce];if(ve[me])oe=!0,Te[ce]=ve[me].xaxis,Q[ce]=ve[me].yaxis;else{if(!he[me]||!he[me]._subplot)return void T.warn("Unrecognized subplot: "+me);var Ae=he[me]._subplot;Te[ce]=Ae.xaxis,Q[ce]=Ae.yaxis}}var Ie=ie.hovermode||he.hovermode;if(Ie&&!oe&&(Ie="closest"),["x","y","closest","x unified","y unified"].indexOf(Ie)===-1||!re.calcdata||re.querySelector(".zoombox")||re._dragging)return a.unhoverRaw(re,ie);var Ce=he.hoverdistance;Ce===-1&&(Ce=1/0);var Re=he.spikedistance;Re===-1&&(Re=1/0);var le,de,_e,Fe,Ve,He,nt,tt,ot,dt,kt,mt,wt,Lt=[],Ct=[],It={hLinePoint:null,vLinePoint:null},Ut=!1;if(Array.isArray(ie))for(Ie="array",_e=0;_e<ie.length;_e++)(Ve=re.calcdata[ie[_e].curveNumber||0])&&(He=Ve[0].trace,Ve[0].trace.hoverinfo!=="skip"&&(Ct.push(Ve),He.orientation==="h"&&(Ut=!0)));else{for(Fe=0;Fe<re.calcdata.length;Fe++)Ve=re.calcdata[Fe],(He=Ve[0].trace).hoverinfo!=="skip"&&h.isTraceInSubplots(He,ge)&&(Ct.push(Ve),He.orientation==="h"&&(Ut=!0));var Rt,Ge;if(ye){if(s.triggerHandler(re,"plotly_beforehover",ie)===!1)return;var We=ye.getBoundingClientRect();Rt=ie.clientX-We.left,Ge=ie.clientY-We.top,he._calcInverseTransform(re);var Be=T.apply3DTransform(he._invTransform)(Rt,Ge);if(Rt=Be[0],Ge=Be[1],Rt<0||Rt>Te[0]._length||Ge<0||Ge>Q[0]._length)return a.unhoverRaw(re,ie)}else Rt="xpx"in ie?ie.xpx:Te[0]._length/2,Ge="ypx"in ie?ie.ypx:Q[0]._length/2;if(ie.pointerX=Rt+Te[0]._offset,ie.pointerY=Ge+Q[0]._offset,le="xval"in ie?h.flat(ge,ie.xval):h.p2c(Te,Rt),de="yval"in ie?h.flat(ge,ie.yval):h.p2c(Q,Ge),!A(le[0])||!A(de[0]))return T.warn("Fx.hover failed",ie,re),a.unhoverRaw(re,ie)}var Ye=1/0;function rt(qn,ur){for(Fe=0;Fe<Ct.length;Fe++)if((Ve=Ct[Fe])&&Ve[0]&&Ve[0].trace&&(He=Ve[0].trace).visible===!0&&He._length!==0&&["carpet","contourcarpet"].indexOf(He._module.name)===-1){if(He.type==="splom"?nt=ge[tt=0]:(nt=h.getSubplot(He),tt=ge.indexOf(nt)),ot=Ie,h.isUnifiedHover(ot)&&(ot=ot.charAt(0)),mt={cd:Ve,trace:He,xa:Te[tt],ya:Q[tt],maxHoverDistance:Ce,maxSpikeDistance:Re,index:!1,distance:Math.min(Ye,Ce),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:n.defaultLine,name:He.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},he[nt]&&(mt.subplot=he[nt]._subplot),he._splomScenes&&he._splomScenes[He.uid]&&(mt.scene=he._splomScenes[He.uid]),wt=Lt.length,ot==="array"){var Zt=ie[Fe];"pointNumber"in Zt?(mt.index=Zt.pointNumber,ot="closest"):(ot="","xval"in Zt&&(dt=Zt.xval,ot="x"),"yval"in Zt&&(kt=Zt.yval,ot=ot?"closest":"y"))}else qn!==void 0&&ur!==void 0?(dt=qn,kt=ur):(dt=le[tt],kt=de[tt]);if(Ce!==0)if(He._module&&He._module.hoverPoints){var nn=He._module.hoverPoints(mt,dt,kt,ot,{finiteRange:!0,hoverLayer:he._hoverlayer});if(nn)for(var zn,_n=0;_n<nn.length;_n++)zn=nn[_n],A(zn.x0)&&A(zn.y0)&&Lt.push(z(zn,Ie))}else T.log("Unrecognized trace type in hover:",He);if(Ie==="closest"&&Lt.length>wt&&(Lt.splice(0,wt),Ye=Lt[0].distance),xe&&Re!==0&&Lt.length===0){mt.distance=Re,mt.index=!1;var Cn=He._module.hoverPoints(mt,dt,kt,"closest",{hoverLayer:he._hoverlayer});if(Cn&&(Cn=Cn.filter(function(kn){return kn.spikeDistance<=Re})),Cn&&Cn.length){var Un,Gn=Cn.filter(function(kn){return kn.xa.showspikes&&kn.xa.spikesnap!=="hovered data"});if(Gn.length){var ar=Gn[0];A(ar.x0)&&A(ar.y0)&&(Un=ze(ar),(!It.vLinePoint||It.vLinePoint.spikeDistance>Un.spikeDistance)&&(It.vLinePoint=Un))}var yr=Cn.filter(function(kn){return kn.ya.showspikes&&kn.ya.spikesnap!=="hovered data"});if(yr.length){var $t=yr[0];A($t.x0)&&A($t.y0)&&(Un=ze($t),(!It.hLinePoint||It.hLinePoint.spikeDistance>Un.spikeDistance)&&(It.hLinePoint=Un))}}}}}function Se(qn,ur,Zt){for(var nn,zn=null,_n=1/0,Cn=0;Cn<qn.length;Cn++)nn=qn[Cn].spikeDistance,Zt&&Cn===0&&(nn=-1/0),nn<=_n&&nn<=ur&&(zn=qn[Cn],_n=nn);return zn}function ze(qn){return qn?{xa:qn.xa,ya:qn.ya,x:qn.xSpike!==void 0?qn.xSpike:(qn.x0+qn.x1)/2,y:qn.ySpike!==void 0?qn.ySpike:(qn.y0+qn.y1)/2,distance:qn.distance,spikeDistance:qn.spikeDistance,curveNumber:qn.trace.index,color:qn.color,pointNumber:qn.index}:null}rt();var Ke={fullLayout:he,container:he._hoverlayer,event:ie},st=re._spikepoints,ct={vLinePoint:It.vLinePoint,hLinePoint:It.hLinePoint};re._spikepoints=ct;var Tt=function(){Lt.sort(function(qn,ur){return qn.distance-ur.distance}),Lt=function(qn,ur){for(var Zt=ur.charAt(0),nn=[],zn=[],_n=[],Cn=0;Cn<qn.length;Cn++){var Un=qn[Cn];c.traceIs(Un.trace,"bar-like")||c.traceIs(Un.trace,"box-violin")?_n.push(Un):Un.trace[Zt+"period"]?zn.push(Un):nn.push(Un)}return nn.concat(zn).concat(_n)}(Lt,Ie)};Tt();var Et=Ie.charAt(0),At=(Et==="x"||Et==="y")&&Lt[0]&&E[Lt[0].trace.type];if(xe&&Re!==0&&Lt.length!==0){var ht=Se(Lt.filter(function(qn){return qn.ya.showspikes}),Re,At);It.hLinePoint=ze(ht);var pt=Se(Lt.filter(function(qn){return qn.xa.showspikes}),Re,At);It.vLinePoint=ze(pt)}if(Lt.length===0){var gt=a.unhoverRaw(re,ie);return!xe||It.hLinePoint===null&&It.vLinePoint===null||F(st)&&H(re,It,Ke),gt}if(xe&&F(st)&&H(re,It,Ke),h.isXYhover(ot)&&Lt[0].length!==0&&Lt[0].trace.type!=="splom"){var Pt=Lt[0],Ot=(Lt=_[Pt.trace.type]?Lt.filter(function(qn){return qn.trace.index===Pt.trace.index}):[Pt]).length;rt(B("x",Pt,he),B("y",Pt,he));var Ht,jt=[],Nt={},Gt=0,un=function(qn){var ur=_[qn.trace.type]?L(qn):qn.trace.index;if(Nt[ur]){var Zt=Nt[ur]-1,nn=jt[Zt];Zt>0&&Math.abs(qn.distance)<Math.abs(nn.distance)&&(jt[Zt]=qn)}else Gt++,Nt[ur]=Gt,jt.push(qn)};for(Ht=0;Ht<Ot;Ht++)un(Lt[Ht]);for(Ht=Lt.length-1;Ht>Ot-1;Ht--)un(Lt[Ht]);Lt=jt,Tt()}var pn=re._hoverdata,Kt=[],wn=j(re),Bn=K(re);for(_e=0;_e<Lt.length;_e++){var vn=Lt[_e],cn=h.makeEventData(vn,vn.trace,vn.cd);if(vn.hovertemplate!==!1){var dn=!1;vn.cd[vn.index]&&vn.cd[vn.index].ht&&(dn=vn.cd[vn.index].ht),vn.hovertemplate=dn||vn.trace.hovertemplate||!1}if(vn.xa&&vn.ya){var sn=vn.x0+vn.xa._offset,hn=vn.x1+vn.xa._offset,En=vn.y0+vn.ya._offset,Mn=vn.y1+vn.ya._offset,Rn=Math.min(sn,hn),Nn=Math.max(sn,hn),Fn=Math.min(En,Mn),rr=Math.max(En,Mn);cn.bbox={x0:Rn+Bn,x1:Nn+Bn,y0:Fn+wn,y1:rr+wn}}vn.eventData=[cn],Kt.push(cn)}re._hoverdata=Kt;var $n=Ie==="y"&&(Ct.length>1||Lt.length>1)||Ie==="closest"&&Ut&&Lt.length>1,mr=n.combine(he.plot_bgcolor||n.background,he.paper_bgcolor),fr=P(Lt,{gd:re,hovermode:Ie,rotateLabels:$n,bgColor:mr,container:he._hoverlayer,outerContainer:he._paper.node(),commonLabelOpts:he.hoverlabel,hoverdistance:he.hoverdistance});if(h.isUnifiedHover(Ie)||(function(qn,ur,Zt){var nn,zn,_n,Cn,Un,Gn,ar,yr=0,$t=1,kn=qn.size(),zt=new Array(kn),Wt=0;function tn(yn){var Ln=yn[0],Hn=yn[yn.length-1];if(zn=Ln.pmin-Ln.pos-Ln.dp+Ln.size,_n=Hn.pos+Hn.dp+Hn.size-Ln.pmax,zn>.01){for(Un=yn.length-1;Un>=0;Un--)yn[Un].dp+=zn;nn=!1}if(!(_n<.01)){if(zn<-.01){for(Un=yn.length-1;Un>=0;Un--)yn[Un].dp-=_n;nn=!1}if(nn){var Wn=0;for(Cn=0;Cn<yn.length;Cn++)(Gn=yn[Cn]).pos+Gn.dp+Gn.size>Ln.pmax&&Wn++;for(Cn=yn.length-1;Cn>=0&&!(Wn<=0);Cn--)(Gn=yn[Cn]).pos>Ln.pmax-1&&(Gn.del=!0,Wn--);for(Cn=0;Cn<yn.length&&!(Wn<=0);Cn++)if((Gn=yn[Cn]).pos<Ln.pmin+1)for(Gn.del=!0,Wn--,_n=2*Gn.size,Un=yn.length-1;Un>=0;Un--)yn[Un].dp-=_n;for(Cn=yn.length-1;Cn>=0&&!(Wn<=0);Cn--)(Gn=yn[Cn]).pos+Gn.dp+Gn.size>Ln.pmax&&(Gn.del=!0,Wn--)}}}for(qn.each(function(yn){var Ln=yn[ur],Hn=Ln._id.charAt(0)==="x",Wn=Ln.range;Wt===0&&Wn&&Wn[0]>Wn[1]!==Hn&&($t=-1),zt[Wt++]=[{datum:yn,traceIndex:yn.trace.index,dp:0,pos:yn.pos,posref:yn.posref,size:yn.by*(Hn?p:1)/2,pmin:0,pmax:Hn?Zt.width:Zt.height}]}),zt.sort(function(yn,Ln){return yn[0].posref-Ln[0].posref||$t*(Ln[0].traceIndex-yn[0].traceIndex)});!nn&&yr<=kn;){for(yr++,nn=!0,Cn=0;Cn<zt.length-1;){var Sn=zt[Cn],An=zt[Cn+1],Tn=Sn[Sn.length-1],an=An[0];if((zn=Tn.pos+Tn.dp+Tn.size-an.pos-an.dp+an.size)>.01&&Tn.pmin===an.pmin&&Tn.pmax===an.pmax){for(Un=An.length-1;Un>=0;Un--)An[Un].dp+=zn;for(Sn.push.apply(Sn,An),zt.splice(Cn+1,1),ar=0,Un=Sn.length-1;Un>=0;Un--)ar+=Sn[Un].dp;for(_n=ar/Sn.length,Un=Sn.length-1;Un>=0;Un--)Sn[Un].dp-=_n;nn=!1}else Cn++}zt.forEach(tn)}for(Cn=zt.length-1;Cn>=0;Cn--){var mn=zt[Cn];for(Un=mn.length-1;Un>=0;Un--){var on=mn[Un],fn=on.datum;fn.offset=on.dp,fn.del=on.del}}}(fr,$n?"xa":"ya",he),U(fr,$n,he._invScaleX,he._invScaleY)),ye&&ye.tagName){var Zn=c.getComponentMethod("annotations","hasClickToShow")(re,Kt);o(k.select(ye),Zn?"pointer":"")}ye&&!fe&&function(qn,ur,Zt){if(!Zt||Zt.length!==qn._hoverdata.length)return!0;for(var nn=Zt.length-1;nn>=0;nn--){var zn=Zt[nn],_n=qn._hoverdata[nn];if(zn.curveNumber!==_n.curveNumber||String(zn.pointNumber)!==String(_n.pointNumber)||String(zn.pointNumbers)!==String(_n.pointNumbers))return!0}return!1}(re,0,pn)&&(pn&&re.emit("plotly_unhover",{event:ie,points:pn}),re.emit("plotly_hover",{event:ie,points:re._hoverdata,xaxes:Te,yaxes:Q,xvals:le,yvals:de}))})(V,W,J,X,ee)})},R.loneHover=function(V,W){var J=!0;Array.isArray(V)||(J=!1,V=[V]);var X=W.gd,ee=j(X),re=K(X),ie=P(V.map(function(ye){var ge=ye._x0||ye.x0||ye.x||0,he=ye._x1||ye.x1||ye.x||0,ve=ye._y0||ye.y0||ye.y||0,Oe=ye._y1||ye.y1||ye.y||0,xe=ye.eventData;if(xe){var ke=Math.min(ge,he),Me=Math.max(ge,he),Te=Math.min(ve,Oe),Q=Math.max(ve,Oe),oe=ye.trace;if(c.traceIs(oe,"gl3d")){var ce=X._fullLayout[oe.scene]._scene.container,me=ce.offsetLeft,Ae=ce.offsetTop;ke+=me,Me+=me,Te+=Ae,Q+=Ae}xe.bbox={x0:ke+re,x1:Me+re,y0:Te+ee,y1:Q+ee},W.inOut_bbox&&W.inOut_bbox.push(xe.bbox)}else xe=!1;return{color:ye.color||n.defaultLine,x0:ye.x0||ye.x||0,x1:ye.x1||ye.x||0,y0:ye.y0||ye.y||0,y1:ye.y1||ye.y||0,xLabel:ye.xLabel,yLabel:ye.yLabel,zLabel:ye.zLabel,text:ye.text,name:ye.name,idealAlign:ye.idealAlign,borderColor:ye.borderColor,fontFamily:ye.fontFamily,fontSize:ye.fontSize,fontColor:ye.fontColor,nameLength:ye.nameLength,textAlign:ye.textAlign,trace:ye.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ye.hovertemplate||!1,hovertemplateLabels:ye.hovertemplateLabels||!1,eventData:xe}}),{gd:X,hovermode:"closest",rotateLabels:!1,bgColor:W.bgColor||n.background,container:k.select(W.container),outerContainer:W.outerContainer||W.container}),se=0,fe=0;return ie.sort(function(ye,ge){return ye.y0-ge.y0}).each(function(ye,ge){var he=ye.y0-ye.by/2;ye.offset=he-5<se?se-he+5:0,se=he+ye.by+ye.offset,ge===W.anchorIndex&&(fe=ye.offset)}).each(function(ye){ye.offset-=fe}),U(ie,!1,X._fullLayout._invScaleX,X._fullLayout._invScaleY),J?ie:ie.node()};var C=/<extra>([\s\S]*)<\/extra>/;function P(V,W){var J=W.gd,X=J._fullLayout,ee=W.hovermode,re=W.rotateLabels,ie=W.bgColor,se=W.container,fe=W.outerContainer,ye=W.commonLabelOpts||{};if(V.length===0)return[[]];var ge=W.fontFamily||f.HOVERFONT,he=W.fontSize||f.HOVERFONTSIZE,ve=V[0],Oe=ve.xa,xe=ve.ya,ke=ee.charAt(0),Me=ke+"Label",Te=ve[Me];if(Te===void 0&&Oe.type==="multicategory")for(var Q=0;Q<V.length&&(Te=V[Q][Me])===void 0;Q++);var oe=G(J,fe),ce=oe.top,me=oe.width,Ae=oe.height,Ie=Te!==void 0&&ve.distance<=W.hoverdistance&&(ee==="x"||ee==="y");if(Ie){var Ce,Re,le=!0;for(Ce=0;Ce<V.length;Ce++)if(le&&V[Ce].zLabel===void 0&&(le=!1),Re=V[Ce].hoverinfo||V[Ce].trace.hoverinfo){var de=Array.isArray(Re)?Re:Re.split("+");if(de.indexOf("all")===-1&&de.indexOf(ee)===-1){Ie=!1;break}}le&&(Ie=!1)}var _e=se.selectAll("g.axistext").data(Ie?[0]:[]);if(_e.enter().append("g").classed("axistext",!0),_e.exit().remove(),_e.each(function(){var pt=k.select(this),gt=T.ensureSingle(pt,"path","",function(Nn){Nn.style({"stroke-width":"1px"})}),Pt=T.ensureSingle(pt,"text","",function(Nn){Nn.attr("data-notex",1)}),Ot=ye.bgcolor||n.defaultLine,Ht=ye.bordercolor||n.contrast(Ot),jt=n.contrast(Ot),Nt={family:ye.font.family||ge,size:ye.font.size||he,color:ye.font.color||jt};gt.style({fill:Ot,stroke:Ht}),Pt.text(Te).call(r.font,Nt).call(t.positionText,0,0).call(t.convertToTspans,J),pt.attr("transform","");var Gt,un,pn=G(J,Pt.node());if(ee==="x"){var Kt=Oe.side==="top"?"-":"";Pt.attr("text-anchor","middle").call(t.positionText,0,Oe.side==="top"?ce-pn.bottom-u-S:ce-pn.top+u+S),Gt=Oe._offset+(ve.x0+ve.x1)/2,un=xe._offset+(Oe.side==="top"?0:xe._length);var wn=pn.width/2+S;Gt<wn?(Gt=wn,gt.attr("d","M-"+(wn-u)+",0L-"+(wn-2*u)+","+Kt+u+"H"+(S+pn.width/2)+"v"+Kt+(2*S+pn.height)+"H-"+wn+"V"+Kt+u+"Z")):Gt>X.width-wn?(Gt=X.width-wn,gt.attr("d","M"+(wn-u)+",0L"+wn+","+Kt+u+"v"+Kt+(2*S+pn.height)+"H-"+wn+"V"+Kt+u+"H"+(wn-2*u)+"Z")):gt.attr("d","M0,0L"+u+","+Kt+u+"H"+(S+pn.width/2)+"v"+Kt+(2*S+pn.height)+"H-"+(S+pn.width/2)+"V"+Kt+u+"H-"+u+"Z")}else{var Bn,vn,cn;xe.side==="right"?(Bn="start",vn=1,cn="",Gt=Oe._offset+Oe._length):(Bn="end",vn=-1,cn="-",Gt=Oe._offset),un=xe._offset+(ve.y0+ve.y1)/2,Pt.attr("text-anchor",Bn),gt.attr("d","M0,0L"+cn+u+","+u+"V"+(S+pn.height/2)+"h"+cn+(2*S+pn.width)+"V-"+(S+pn.height/2)+"H"+cn+u+"V-"+u+"Z");var dn,sn=pn.height/2,hn=ce-pn.top-sn,En="clip"+X._uid+"commonlabel"+xe._id;if(Gt<pn.width+2*S+u){dn="M-"+(u+S)+"-"+sn+"h-"+(pn.width-S)+"V"+sn+"h"+(pn.width-S)+"Z";var Mn=pn.width-Gt+S;t.positionText(Pt,Mn,hn),Bn==="end"&&Pt.selectAll("tspan").each(function(){var Nn=k.select(this),Fn=r.tester.append("text").text(Nn.text()).call(r.font,Nt),rr=G(J,Fn.node());Math.round(rr.width)<Math.round(pn.width)&&Nn.attr("x",Mn-rr.width),Fn.remove()})}else t.positionText(Pt,vn*(S+u),hn),dn=null;var Rn=X._topclips.selectAll("#"+En).data(dn?[0]:[]);Rn.enter().append("clipPath").attr("id",En).append("path"),Rn.exit().remove(),Rn.select("path").attr("d",dn),r.setClipUrl(Pt,dn?En:null,J)}pt.attr("transform",x(Gt,un))}),h.isUnifiedHover(ee)){se.selectAll("g.hovertext").remove();var Fe=V.filter(function(pt){return pt.hoverinfo!=="none"});if(Fe.length===0)return;var Ve=X.hoverlabel,He=Ve.font,nt={showlegend:!0,legend:{title:{text:Te,font:He},font:He,bgcolor:Ve.bgcolor,bordercolor:Ve.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:X.legend?X.legend.traceorder:void 0,orientation:"v"}},tt={font:He};b(nt,tt,J._fullData);var ot=tt.legend;ot.entries=[];for(var dt=0;dt<Fe.length;dt++){var kt=Fe[dt];if(kt.hoverinfo!=="none"){var mt=I(kt,!0,ee,X,Te),wt=mt[0],Lt=mt[1];kt.name=Lt,kt.text=Lt!==""?Lt+" : "+wt:wt;var Ct=kt.cd[kt.index];Ct&&(Ct.mc&&(kt.mc=Ct.mc),Ct.mcc&&(kt.mc=Ct.mcc),Ct.mlc&&(kt.mlc=Ct.mlc),Ct.mlcc&&(kt.mlc=Ct.mlcc),Ct.mlw&&(kt.mlw=Ct.mlw),Ct.mrc&&(kt.mrc=Ct.mrc),Ct.dir&&(kt.dir=Ct.dir)),kt._distinct=!0,ot.entries.push([kt])}}ot.entries.sort(function(pt,gt){return pt[0].trace.index-gt[0].trace.index}),ot.layer=se,ot._inHover=!0,ot._groupTitleFont=Ve.grouptitlefont,v(J,ot);var It,Ut,Rt,Ge,We=se.select("g.legend"),Be=G(J,We.node()),Ye=Be.width+2*S,rt=Be.height+2*S,Se=Fe[0],ze=(Se.x0+Se.x1)/2,Ke=(Se.y0+Se.y1)/2,st=!(c.traceIs(Se.trace,"bar-like")||c.traceIs(Se.trace,"box-violin"));ke==="y"?st?(Ut=Ke-S,It=Ke+S):(Ut=Math.min.apply(null,Fe.map(function(pt){return Math.min(pt.y0,pt.y1)})),It=Math.max.apply(null,Fe.map(function(pt){return Math.max(pt.y0,pt.y1)}))):Ut=It=T.mean(Fe.map(function(pt){return(pt.y0+pt.y1)/2}))-rt/2,ke==="x"?st?(Rt=ze+S,Ge=ze-S):(Rt=Math.max.apply(null,Fe.map(function(pt){return Math.max(pt.x0,pt.x1)})),Ge=Math.min.apply(null,Fe.map(function(pt){return Math.min(pt.x0,pt.x1)}))):Rt=Ge=T.mean(Fe.map(function(pt){return(pt.x0+pt.x1)/2}))-Ye/2;var ct,Tt,Et=Oe._offset,At=xe._offset;return Ge+=Et-Ye,Ut+=At-rt,ct=(Rt+=Et)+Ye<me&&Rt>=0?Rt:Ge+Ye<me&&Ge>=0?Ge:Et+Ye<me?Et:Rt-ze<ze-Ge+Ye?me-Ye:0,ct+=S,Tt=(It+=At)+rt<Ae&&It>=0?It:Ut+rt<Ae&&Ut>=0?Ut:At+rt<Ae?At:It-Ke<Ke-Ut+rt?Ae-rt:0,Tt+=S,We.attr("transform",x(ct-1,Tt-1)),We}var ht=se.selectAll("g.hovertext").data(V,function(pt){return L(pt)});return ht.enter().append("g").classed("hovertext",!0).each(function(){var pt=k.select(this);pt.append("rect").call(n.fill,n.addOpacity(ie,.8)),pt.append("text").classed("name",!0),pt.append("path").style("stroke-width","1px"),pt.append("text").classed("nums",!0).call(r.font,ge,he)}),ht.exit().remove(),ht.each(function(pt){var gt=k.select(this).attr("transform",""),Pt=pt.color;Array.isArray(Pt)&&(Pt=Pt[pt.eventData[0].pointNumber]);var Ot=pt.bgcolor||Pt,Ht=n.combine(n.opacity(Ot)?Ot:n.defaultLine,ie),jt=n.combine(n.opacity(Pt)?Pt:n.defaultLine,ie),Nt=pt.borderColor||n.contrast(Ht),Gt=I(pt,Ie,ee,X,Te,gt),un=Gt[0],pn=Gt[1],Kt=gt.select("text.nums").call(r.font,pt.fontFamily||ge,pt.fontSize||he,pt.fontColor||Nt).text(un).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,J),wn=gt.select("text.name"),Bn=0,vn=0;if(pn&&pn!==un){wn.call(r.font,pt.fontFamily||ge,pt.fontSize||he,jt).text(pn).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,J);var cn=G(J,wn.node());Bn=cn.width+2*S,vn=cn.height+2*S}else wn.remove(),gt.select("rect").remove();gt.select("path").style({fill:Ht,stroke:Nt});var dn=pt.xa._offset+(pt.x0+pt.x1)/2,sn=pt.ya._offset+(pt.y0+pt.y1)/2,hn=Math.abs(pt.x1-pt.x0),En=Math.abs(pt.y1-pt.y0),Mn=G(J,Kt.node()),Rn=Mn.width/X._invScaleX,Nn=Mn.height/X._invScaleY;pt.ty0=(ce-Mn.top)/X._invScaleY,pt.bx=Rn+2*S,pt.by=Math.max(Nn+2*S,vn),pt.anchor="start",pt.txwidth=Rn,pt.tx2width=Bn,pt.offset=0;var Fn,rr,$n=(Rn+u+S+Bn)*X._invScaleX;if(re)pt.pos=dn,Fn=sn+En/2+$n<=Ae,rr=sn-En/2-$n>=0,pt.idealAlign!=="top"&&Fn||!rr?Fn?(sn+=En/2,pt.anchor="start"):pt.anchor="middle":(sn-=En/2,pt.anchor="end");else if(pt.pos=sn,Fn=dn+hn/2+$n<=me,rr=dn-hn/2-$n>=0,pt.idealAlign!=="left"&&Fn||!rr)if(Fn)dn+=hn/2,pt.anchor="start";else{pt.anchor="middle";var mr=$n/2,fr=dn+mr-me,Zn=dn-mr;fr>0&&(dn-=fr),Zn<0&&(dn+=-Zn)}else dn-=hn/2,pt.anchor="end";Kt.attr("text-anchor",pt.anchor),Bn&&wn.attr("text-anchor",pt.anchor),gt.attr("transform",x(dn,sn)+(re?d(g):""))}),ht}function I(V,W,J,X,ee,re){var ie="",se="";V.nameOverride!==void 0&&(V.name=V.nameOverride),V.name&&(V.trace._meta&&(V.name=T.templateString(V.name,V.trace._meta)),ie=N(V.name,V.nameLength));var fe=J.charAt(0),ye=fe==="x"?"y":"x";V.zLabel!==void 0?(V.xLabel!==void 0&&(se+="x: "+V.xLabel+"<br>"),V.yLabel!==void 0&&(se+="y: "+V.yLabel+"<br>"),V.trace.type!=="choropleth"&&V.trace.type!=="choroplethmapbox"&&(se+=(se?"z: ":"")+V.zLabel)):W&&V[fe+"Label"]===ee?se=V[ye+"Label"]||"":V.xLabel===void 0?V.yLabel!==void 0&&V.trace.type!=="scattercarpet"&&(se=V.yLabel):se=V.yLabel===void 0?V.xLabel:"("+V.xLabel+", "+V.yLabel+")",!V.text&&V.text!==0||Array.isArray(V.text)||(se+=(se?"<br>":"")+V.text),V.extraText!==void 0&&(se+=(se?"<br>":"")+V.extraText),re&&se===""&&!V.hovertemplate&&(ie===""&&re.remove(),se=ie);var ge=V.hovertemplate||!1;if(ge){var he=V.hovertemplateLabels||V;V[fe+"Label"]!==ee&&(he[fe+"other"]=he[fe+"Val"],he[fe+"otherLabel"]=he[fe+"Label"]),se=(se=T.hovertemplateString(ge,he,X._d3locale,V.eventData[0]||{},V.trace._meta)).replace(C,function(ve,Oe){return ie=N(Oe,V.nameLength),""})}return[se,ie]}function U(V,W,J,X){var ee=function(ie){return ie*J},re=function(ie){return ie*X};V.each(function(ie){var se=k.select(this);if(ie.del)return se.remove();var fe=se.select("text.nums"),ye=ie.anchor,ge=ye==="end"?-1:1,he={start:1,end:-1,middle:0}[ye],ve=he*(u+S),Oe=ve+he*(ie.txwidth+S),xe=0,ke=ie.offset,Me=ye==="middle";Me&&(ve-=ie.tx2width/2,Oe+=ie.txwidth/2+S),W&&(ke*=-w,xe=ie.offset*m),se.select("path").attr("d",Me?"M-"+ee(ie.bx/2+ie.tx2width/2)+","+re(ke-ie.by/2)+"h"+ee(ie.bx)+"v"+re(ie.by)+"h-"+ee(ie.bx)+"Z":"M0,0L"+ee(ge*u+xe)+","+re(u+ke)+"v"+re(ie.by/2-u)+"h"+ee(ge*ie.bx)+"v-"+re(ie.by)+"H"+ee(ge*u+xe)+"V"+re(ke-u)+"Z");var Te=xe+ve,Q=ke+ie.ty0-ie.by/2+S,oe=ie.textAlign||"auto";oe!=="auto"&&(oe==="left"&&ye!=="start"?(fe.attr("text-anchor","start"),Te=Me?-ie.bx/2-ie.tx2width/2+S:-ie.bx-S):oe==="right"&&ye!=="end"&&(fe.attr("text-anchor","end"),Te=Me?ie.bx/2-ie.tx2width/2-S:ie.bx+S)),fe.call(t.positionText,ee(Te),re(Q)),ie.tx2width&&(se.select("text.name").call(t.positionText,ee(Oe+he*S+xe),re(ke+ie.ty0-ie.by/2+S)),se.select("rect").call(r.setRect,ee(Oe+(he-1)*ie.tx2width/2+xe),re(ke-ie.by/2-1),ee(ie.tx2width),re(ie.by+2)))})}function z(V,W){var J=V.index,X=V.trace||{},ee=V.cd[0],re=V.cd[J]||{};function ie(ve){return ve||A(ve)&&ve===0}var se=Array.isArray(J)?function(ve,Oe){var xe=T.castOption(ee,J,ve);return ie(xe)?xe:T.extractOption({},X,"",Oe)}:function(ve,Oe){return T.extractOption(re,X,ve,Oe)};function fe(ve,Oe,xe){var ke=se(Oe,xe);ie(ke)&&(V[ve]=ke)}if(fe("hoverinfo","hi","hoverinfo"),fe("bgcolor","hbg","hoverlabel.bgcolor"),fe("borderColor","hbc","hoverlabel.bordercolor"),fe("fontFamily","htf","hoverlabel.font.family"),fe("fontSize","hts","hoverlabel.font.size"),fe("fontColor","htc","hoverlabel.font.color"),fe("nameLength","hnl","hoverlabel.namelength"),fe("textAlign","hta","hoverlabel.align"),V.posref=W==="y"||W==="closest"&&X.orientation==="h"?V.xa._offset+(V.x0+V.x1)/2:V.ya._offset+(V.y0+V.y1)/2,V.x0=T.constrain(V.x0,0,V.xa._length),V.x1=T.constrain(V.x1,0,V.xa._length),V.y0=T.constrain(V.y0,0,V.ya._length),V.y1=T.constrain(V.y1,0,V.ya._length),V.xLabelVal!==void 0&&(V.xLabel="xLabel"in V?V.xLabel:i.hoverLabelText(V.xa,V.xLabelVal,X.xhoverformat),V.xVal=V.xa.c2d(V.xLabelVal)),V.yLabelVal!==void 0&&(V.yLabel="yLabel"in V?V.yLabel:i.hoverLabelText(V.ya,V.yLabelVal,X.yhoverformat),V.yVal=V.ya.c2d(V.yLabelVal)),V.zLabelVal!==void 0&&V.zLabel===void 0&&(V.zLabel=String(V.zLabelVal)),!(isNaN(V.xerr)||V.xa.type==="log"&&V.xerr<=0)){var ye=i.tickText(V.xa,V.xa.c2l(V.xerr),"hover").text;V.xerrneg!==void 0?V.xLabel+=" +"+ye+" / -"+i.tickText(V.xa,V.xa.c2l(V.xerrneg),"hover").text:V.xLabel+="  "+ye,W==="x"&&(V.distance+=1)}if(!(isNaN(V.yerr)||V.ya.type==="log"&&V.yerr<=0)){var ge=i.tickText(V.ya,V.ya.c2l(V.yerr),"hover").text;V.yerrneg!==void 0?V.yLabel+=" +"+ge+" / -"+i.tickText(V.ya,V.ya.c2l(V.yerrneg),"hover").text:V.yLabel+="  "+ge,W==="y"&&(V.distance+=1)}var he=V.hoverinfo||V.trace.hoverinfo;return he&&he!=="all"&&((he=Array.isArray(he)?he:he.split("+")).indexOf("x")===-1&&(V.xLabel=void 0),he.indexOf("y")===-1&&(V.yLabel=void 0),he.indexOf("z")===-1&&(V.zLabel=void 0),he.indexOf("text")===-1&&(V.text=void 0),he.indexOf("name")===-1&&(V.name=void 0)),V}function H(V,W,J){var X,ee,re=J.container,ie=J.fullLayout,se=ie._size,fe=J.event,ye=!!W.hLinePoint,ge=!!W.vLinePoint;if(re.selectAll(".spikeline").remove(),ge||ye){var he=n.combine(ie.plot_bgcolor,ie.paper_bgcolor);if(ye){var ve,Oe,xe=W.hLinePoint;X=xe&&xe.xa,(ee=xe&&xe.ya).spikesnap==="cursor"?(ve=fe.pointerX,Oe=fe.pointerY):(ve=X._offset+xe.x,Oe=ee._offset+xe.y);var ke,Me,Te=l.readability(xe.color,he)<1.5?n.contrast(he):xe.color,Q=ee.spikemode,oe=ee.spikethickness,ce=ee.spikecolor||Te,me=i.getPxPosition(V,ee);if(Q.indexOf("toaxis")!==-1||Q.indexOf("across")!==-1){if(Q.indexOf("toaxis")!==-1&&(ke=me,Me=ve),Q.indexOf("across")!==-1){var Ae=ee._counterDomainMin,Ie=ee._counterDomainMax;ee.anchor==="free"&&(Ae=Math.min(Ae,ee.position),Ie=Math.max(Ie,ee.position)),ke=se.l+Ae*se.w,Me=se.l+Ie*se.w}re.insert("line",":first-child").attr({x1:ke,x2:Me,y1:Oe,y2:Oe,"stroke-width":oe,stroke:ce,"stroke-dasharray":r.dashStyle(ee.spikedash,oe)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:ke,x2:Me,y1:Oe,y2:Oe,"stroke-width":oe+2,stroke:he}).classed("spikeline",!0).classed("crisp",!0)}Q.indexOf("marker")!==-1&&re.insert("circle",":first-child").attr({cx:me+(ee.side!=="right"?oe:-oe),cy:Oe,r:oe,fill:ce}).classed("spikeline",!0)}if(ge){var Ce,Re,le=W.vLinePoint;X=le&&le.xa,ee=le&&le.ya,X.spikesnap==="cursor"?(Ce=fe.pointerX,Re=fe.pointerY):(Ce=X._offset+le.x,Re=ee._offset+le.y);var de,_e,Fe=l.readability(le.color,he)<1.5?n.contrast(he):le.color,Ve=X.spikemode,He=X.spikethickness,nt=X.spikecolor||Fe,tt=i.getPxPosition(V,X);if(Ve.indexOf("toaxis")!==-1||Ve.indexOf("across")!==-1){if(Ve.indexOf("toaxis")!==-1&&(de=tt,_e=Re),Ve.indexOf("across")!==-1){var ot=X._counterDomainMin,dt=X._counterDomainMax;X.anchor==="free"&&(ot=Math.min(ot,X.position),dt=Math.max(dt,X.position)),de=se.t+(1-dt)*se.h,_e=se.t+(1-ot)*se.h}re.insert("line",":first-child").attr({x1:Ce,x2:Ce,y1:de,y2:_e,"stroke-width":He,stroke:nt,"stroke-dasharray":r.dashStyle(X.spikedash,He)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:Ce,x2:Ce,y1:de,y2:_e,"stroke-width":He+2,stroke:he}).classed("spikeline",!0).classed("crisp",!0)}Ve.indexOf("marker")!==-1&&re.insert("circle",":first-child").attr({cx:Ce,cy:tt-(X.side!=="top"?He:-He),r:He,fill:nt}).classed("spikeline",!0)}}}function F(V,W){return!W||W.vLinePoint!==V._spikepoints.vLinePoint||W.hLinePoint!==V._spikepoints.hLinePoint}function N(V,W){return t.plainText(V||"",{len:W,allowedTags:["br","sub","sup","b","i","em"]})}function B(V,W,J){var X=W[V+"a"],ee=W[V+"Val"],re=W.cd[0];if(X.type==="category"||X.type==="multicategory")ee=X._categoriesMap[ee];else if(X.type==="date"){var ie=W.trace[V+"periodalignment"];if(ie){var se=W.cd[W.index],fe=se[V+"Start"];fe===void 0&&(fe=se[V]);var ye=se[V+"End"];ye===void 0&&(ye=se[V]);var ge=ye-fe;ie==="end"?ee+=ge:ie==="middle"&&(ee+=ge/2)}ee=X.d2c(ee)}return re&&re.t&&re.t.posLetter===X._id&&(J.boxmode!=="group"&&J.violinmode!=="group"||(ee+=re.t.dPos)),ee}function j(V){return V.offsetTop+V.clientTop}function K(V){return V.offsetLeft+V.clientLeft}function G(V,W){var J=V._fullLayout,X=W.getBoundingClientRect(),ee=X.x,re=X.y,ie=ee+X.width,se=re+X.height,fe=T.apply3DTransform(J._invTransform)(ee,re),ye=T.apply3DTransform(J._invTransform)(ie,se),ge=fe[0],he=fe[1],ve=ye[0],Oe=ye[1];return{x:ge,y:he,width:ve-ge,height:Oe-he,top:Math.min(he,Oe),left:Math.min(ge,ve),right:Math.max(ge,ve),bottom:Math.max(he,Oe)}}},38048:function($,R,e){var k=e(71828),A=e(7901),l=e(23469).isUnifiedHover;$.exports=function(T,x,d,s){s=s||{};var t=x.legend;function o(r){s.font[r]||(s.font[r]=t?x.legend.font[r]:x.font[r])}x&&l(x.hovermode)&&(s.font||(s.font={}),o("size"),o("family"),o("color"),t?(s.bgcolor||(s.bgcolor=A.combine(x.legend.bgcolor,x.paper_bgcolor)),s.bordercolor||(s.bordercolor=x.legend.bordercolor)):s.bgcolor||(s.bgcolor=x.paper_bgcolor)),d("hoverlabel.bgcolor",s.bgcolor),d("hoverlabel.bordercolor",s.bordercolor),d("hoverlabel.namelength",s.namelength),k.coerceFont(d,"hoverlabel.font",s.font),d("hoverlabel.align",s.align)}},98212:function($,R,e){var k=e(71828),A=e(528);$.exports=function(l,T){function x(d,s){return T[d]!==void 0?T[d]:k.coerce(l,T,A,d,s)}return x("clickmode"),x("hovermode")}},30211:function($,R,e){var k=e(39898),A=e(71828),l=e(28569),T=e(23469),x=e(528),d=e(88335);$.exports={moduleType:"component",name:"fx",constants:e(26675),schema:{layout:x},attributes:e(77914),layoutAttributes:x,supplyLayoutGlobalDefaults:e(22774),supplyDefaults:e(54268),supplyLayoutDefaults:e(34938),calc:e(30732),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:function(s,t,o){return A.castOption(s,t,"hoverlabel."+o)},castHoverinfo:function(s,t,o){return A.castOption(s,o,"hoverinfo",function(r){return A.coerceHoverinfo({hoverinfo:r},{_module:s._module},t)})},hover:d.hover,unhover:l.unhover,loneHover:d.loneHover,loneUnhover:function(s){var t=A.isD3Selection(s)?s:k.select(s);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e(75914)}},528:function($,R,e){var k=e(26675),A=e(41940),l=A({editType:"none"});l.family.dflt=k.HOVERFONT,l.size.dflt=k.HOVERFONTSIZE,$.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:l,grouptitlefont:A({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function($,R,e){var k=e(71828),A=e(528),l=e(98212),T=e(38048);$.exports=function(x,d){function s(n,a){return k.coerce(x,d,A,n,a)}l(x,d)&&(s("hoverdistance"),s("spikedistance")),s("dragmode")==="select"&&s("selectdirection");var t=d._has("mapbox"),o=d._has("geo"),r=d._basePlotModules.length;d.dragmode==="zoom"&&((t||o)&&r===1||t&&o&&r===2)&&(d.dragmode="pan"),T(x,d,s),k.coerceFont(s,"hoverlabel.grouptitlefont",d.hoverlabel.font)}},22774:function($,R,e){var k=e(71828),A=e(38048),l=e(528);$.exports=function(T,x){A(T,x,function(d,s){return k.coerce(T,x,l,d,s)})}},83312:function($,R,e){var k=e(71828),A=e(30587).counter,l=e(27670).Y,T=e(85555).idRegex,x=e(44467),d={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[A("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:l({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function s(r,n,a){var i=n[a+"axes"],c=Object.keys((r._splomAxes||{})[a]||{});return Array.isArray(i)?i:c.length?c:void 0}function t(r,n,a,i,c,h){var f=n(r+"gap",a),b=n("domain."+r);n(r+"side",i);for(var v=new Array(c),g=b[0],y=(b[1]-g)/(c-f),p=y*(1-f),m=0;m<c;m++){var w=g+y*m;v[h?c-1-m:m]=[w,w+p]}return v}function o(r,n,a,i,c){var h,f=new Array(a);function b(v,g){n.indexOf(g)!==-1&&i[g]===void 0?(f[v]=g,i[g]=v):f[v]=""}if(Array.isArray(r))for(h=0;h<a;h++)b(h,r[h]);else for(b(0,c),h=1;h<a;h++)b(h,c+(h+1));return f}$.exports={moduleType:"component",name:"grid",schema:{layout:{grid:d}},layoutAttributes:d,sizeDefaults:function(r,n){var a=r.grid||{},i=s(n,a,"x"),c=s(n,a,"y");if(r.grid||i||c){var h,f,b=Array.isArray(a.subplots)&&Array.isArray(a.subplots[0]),v=Array.isArray(i),g=Array.isArray(c),y=v&&i!==a.xaxes&&g&&c!==a.yaxes;b?(h=a.subplots.length,f=a.subplots[0].length):(g&&(h=c.length),v&&(f=i.length));var p=x.newContainer(n,"grid"),m=C("rows",h),w=C("columns",f);if(m*w>1){b||v||g||C("pattern")==="independent"&&(b=!0),p._hasSubplotGrid=b;var u,S,_=C("roworder")==="top to bottom",E=b?.2:.1,L=b?.3:.1;y&&n._splomGridDflt&&(u=n._splomGridDflt.xside,S=n._splomGridDflt.yside),p._domains={x:t("x",C,E,u,w),y:t("y",C,L,S,m,_)}}else delete n.grid}function C(P,I){return k.coerce(a,p,d,P,I)}},contentDefaults:function(r,n){var a=n.grid;if(a&&a._domains){var i,c,h,f,b,v,g,y=r.grid||{},p=n._subplots,m=a._hasSubplotGrid,w=a.rows,u=a.columns,S=a.pattern==="independent",_=a._axisMap={};if(m){var E=y.subplots||[];v=a.subplots=new Array(w);var L=1;for(i=0;i<w;i++){var C=v[i]=new Array(u),P=E[i]||[];for(c=0;c<u;c++)if(S?(b=L===1?"xy":"x"+L+"y"+L,L++):b=P[c],C[c]="",p.cartesian.indexOf(b)!==-1){if(g=b.indexOf("y"),h=b.slice(0,g),f=b.slice(g),_[h]!==void 0&&_[h]!==c||_[f]!==void 0&&_[f]!==i)continue;C[c]=b,_[h]=c,_[f]=i}}}else{var I=s(n,y,"x"),U=s(n,y,"y");a.xaxes=o(I,p.xaxis,u,_,"x"),a.yaxes=o(U,p.yaxis,w,_,"y")}var z=a._anchors={},H=a.roworder==="top to bottom";for(var F in _){var N,B,j,K=F.charAt(0),G=a[K+"side"];if(G.length<8)z[F]="free";else if(K==="x"){if(G.charAt(0)==="t"===H?(N=0,B=1,j=w):(N=w-1,B=-1,j=-1),m){var V=_[F];for(i=N;i!==j;i+=B)if((b=v[i][V])&&(g=b.indexOf("y"),b.slice(0,g)===F)){z[F]=b.slice(g);break}}else for(i=N;i!==j;i+=B)if(f=a.yaxes[i],p.cartesian.indexOf(F+f)!==-1){z[F]=f;break}}else if(G.charAt(0)==="l"?(N=0,B=1,j=u):(N=u-1,B=-1,j=-1),m){var W=_[F];for(i=N;i!==j;i+=B)if((b=v[W][i])&&(g=b.indexOf("y"),b.slice(g)===F)){z[F]=b.slice(0,g);break}}else for(i=N;i!==j;i+=B)if(h=a.xaxes[i],p.cartesian.indexOf(h+F)!==-1){z[F]=h;break}}}}}},69819:function($,R,e){var k=e(85555),A=e(44467).templatedArray;e(24695),$.exports=A("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",k.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",k.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function($,R,e){var k=e(92770),A=e(58163);$.exports=function(l,T,x,d){T=T||{};var s=x==="log"&&T.type==="linear",t=x==="linear"&&T.type==="log";if(s||t){for(var o,r,n=l._fullLayout.images,a=T._id.charAt(0),i=0;i<n.length;i++)if(r="images["+i+"].",(o=n[i])[a+"ref"]===T._id){var c=o[a],h=o["size"+a],f=null,b=null;if(s){f=A(c,T.range);var v=h/Math.pow(10,f)/2;b=2*Math.log(v+Math.sqrt(1+v*v))/Math.LN10}else b=(f=Math.pow(10,c))*(Math.pow(10,h/2)-Math.pow(10,-h/2));k(f)?k(b)||(b=null):(f=null,b=null),d(r+a,f),d(r+"size"+a,b)}}}},81603:function($,R,e){var k=e(71828),A=e(89298),l=e(85501),T=e(69819);function x(d,s,t){function o(f,b){return k.coerce(d,s,T,f,b)}var r=o("source");if(!o("visible",!!r))return s;o("layer"),o("xanchor"),o("yanchor"),o("sizex"),o("sizey"),o("sizing"),o("opacity");for(var n={_fullLayout:t},a=["x","y"],i=0;i<2;i++){var c=a[i],h=A.coerceRef(d,s,n,c,"paper",void 0);h!=="paper"&&A.getFromId(n,h)._imgIndices.push(s._index),A.coercePosition(s,n,o,h,c,0)}return s}$.exports=function(d,s){l(d,s,{name:"images",handleItemDefaults:x})}},80750:function($,R,e){var k=e(39898),A=e(91424),l=e(89298),T=e(41675),x=e(77922);$.exports=function(d){var s,t,o=d._fullLayout,r=[],n={},a=[];for(t=0;t<o.images.length;t++){var i=o.images[t];if(i.visible)if(i.layer==="below"&&i.xref!=="paper"&&i.yref!=="paper"){s=T.ref2id(i.xref)+T.ref2id(i.yref);var c=o._plots[s];if(!c){a.push(i);continue}c.mainplot&&(s=c.mainplot.id),n[s]||(n[s]=[]),n[s].push(i)}else i.layer==="above"?r.push(i):a.push(i)}var h={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},f={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function b(u){var S=k.select(this);if(this._imgSrc!==u.source)if(S.attr("xmlns",x.svg),u.source&&u.source.slice(0,5)==="data:")S.attr("xlink:href",u.source),this._imgSrc=u.source;else{var _=new Promise(function(E){var L=new Image;function C(){S.remove(),E()}this.img=L,L.setAttribute("crossOrigin","anonymous"),L.onerror=C,L.onload=function(){var P=document.createElement("canvas");P.width=this.width,P.height=this.height,P.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var I=P.toDataURL("image/png");S.attr("xlink:href",I),E()},S.on("error",C),L.src=u.source,this._imgSrc=u.source}.bind(this));d._promises.push(_)}}function v(u){var S,_,E=k.select(this),L=l.getFromId(d,u.xref),C=l.getFromId(d,u.yref),P=l.getRefType(u.xref)==="domain",I=l.getRefType(u.yref)==="domain",U=o._size;S=L!==void 0?typeof u.xref=="string"&&P?L._length*u.sizex:Math.abs(L.l2p(u.sizex)-L.l2p(0)):u.sizex*U.w,_=C!==void 0?typeof u.yref=="string"&&I?C._length*u.sizey:Math.abs(C.l2p(u.sizey)-C.l2p(0)):u.sizey*U.h;var z,H,F=S*h[u.xanchor].offset,N=_*f[u.yanchor].offset,B=h[u.xanchor].sizing+f[u.yanchor].sizing;switch(z=L!==void 0?typeof u.xref=="string"&&P?L._length*u.x+L._offset:L.r2p(u.x)+L._offset:u.x*U.w+U.l,z+=F,H=C!==void 0?typeof u.yref=="string"&&I?C._length*(1-u.y)+C._offset:C.r2p(u.y)+C._offset:U.h-u.y*U.h+U.t,H+=N,u.sizing){case"fill":B+=" slice";break;case"stretch":B="none"}E.attr({x:z,y:H,width:S,height:_,preserveAspectRatio:B,opacity:u.opacity});var j=(L&&l.getRefType(u.xref)!=="domain"?L._id:"")+(C&&l.getRefType(u.yref)!=="domain"?C._id:"");A.setClipUrl(E,j?"clip"+o._uid+j:null,d)}var g=o._imageLowerLayer.selectAll("image").data(a),y=o._imageUpperLayer.selectAll("image").data(r);g.enter().append("image"),y.enter().append("image"),g.exit().remove(),y.exit().remove(),g.each(function(u){b.bind(this)(u),v.bind(this)(u)}),y.each(function(u){b.bind(this)(u),v.bind(this)(u)});var p=Object.keys(o._plots);for(t=0;t<p.length;t++){s=p[t];var m=o._plots[s];if(m.imagelayer){var w=m.imagelayer.selectAll("image").data(n[s]||[]);w.enter().append("image"),w.exit().remove(),w.each(function(u){b.bind(this)(u),v.bind(this)(u)})}}}},68804:function($,R,e){$.exports={moduleType:"component",name:"images",layoutAttributes:e(69819),supplyLayoutDefaults:e(81603),includeBasePlot:e(76325)("images"),draw:e(80750),convertCoords:e(75378)}},33030:function($,R,e){var k=e(41940),A=e(22399);$.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:A.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:k({editType:"legend"}),grouptitlefont:k({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:k({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function($){$.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function($,R,e){var k=e(73972),A=e(71828),l=e(44467),T=e(9012),x=e(33030),d=e(10820),s=e(10130);$.exports=function(t,o,r){var n,a=t.legend||{},i=l.newContainer(o,"legend");function c(C,P){return A.coerce(a,i,x,C,P)}for(var h=function(C,P){var I=n._input,U=n;return A.coerce(I,U,T,C,P)},f=o.font||{},b=A.coerceFont(c,"grouptitlefont",A.extendFlat({},f,{size:Math.round(1.1*f.size)})),v=0,g=!1,y="normal",p=0;p<r.length;p++)(n=r[p]).visible&&((n.showlegend||n._dfltShowLegend&&!(n._module&&n._module.attributes&&n._module.attributes.showlegend&&n._module.attributes.showlegend.dflt===!1))&&(v++,n.showlegend&&(g=!0,(k.traceIs(n,"pie-like")||n._input.showlegend===!0)&&v++),A.coerceFont(h,"legendgrouptitle.font",b)),(k.traceIs(n,"bar")&&o.barmode==="stack"||["tonextx","tonexty"].indexOf(n.fill)!==-1)&&(y=s.isGrouped({traceorder:y})?"grouped+reversed":"reversed"),n.legendgroup!==void 0&&n.legendgroup!==""&&(y=s.isReversed({traceorder:y})?"reversed+grouped":"grouped"));var m=A.coerce(t,o,d,"showlegend",g&&v>1);if(m===!1&&(o.legend=void 0),(m!==!1||a.uirevision)&&(c("uirevision",o.uirevision),m!==!1)){c("bgcolor",o.paper_bgcolor),c("bordercolor"),c("borderwidth");var w,u,S,_=A.coerceFont(c,"font",o.font),E=c("orientation")==="h";if(E?(w=0,k.getComponentMethod("rangeslider","isVisible")(t.xaxis)?(u=1.1,S="bottom"):(u=-.1,S="top")):(w=1.02,u=1,S="auto"),c("traceorder",y),s.isGrouped(o.legend)&&c("tracegroupgap"),c("entrywidth"),c("entrywidthmode"),c("itemsizing"),c("itemwidth"),c("itemclick"),c("itemdoubleclick"),c("groupclick"),c("x",w),c("xanchor"),c("y",u),c("yanchor",S),c("valign"),A.noneOrAll(a,i,["x","y"]),c("title.text")){c("title.side",E?"left":"top");var L=A.extendFlat({},_,{size:A.bigFont(_.size)});A.coerceFont(c,"title.font",L)}}}},43969:function($,R,e){var k=e(39898),A=e(71828),l=e(74875),T=e(73972),x=e(11086),d=e(28569),s=e(91424),t=e(7901),o=e(63893),r=e(85167),n=e(14928),a=e(18783),i=a.LINE_SPACING,c=a.FROM_TL,h=a.FROM_BR,f=e(82424),b=e(53630),v=e(10130);function g(E,L,C){var P=E[0],I=P.width,U=L.entrywidthmode,z=P.trace.legendwidth||L.entrywidth;return U==="fraction"?L._maxWidth*z:C+(z||I)}function y(E,L,C,P,I){var U=C.data()[0][0].trace,z={event:I,node:C.node(),curveNumber:U.index,expandedIndex:U._expandedIndex,data:E.data,layout:E.layout,frames:E._transitionData._frames,config:E._context,fullData:E._fullData,fullLayout:E._fullLayout};U._group&&(z.group=U._group),T.traceIs(U,"pie-like")&&(z.label=C.datum()[0].label),x.triggerHandler(E,"plotly_legendclick",z)!==!1&&(P===1?L._clickTimeout=setTimeout(function(){E._fullLayout&&r(C,E,P)},E._context.doubleClickDelay):P===2&&(L._clickTimeout&&clearTimeout(L._clickTimeout),E._legendMouseDownTime=0,x.triggerHandler(E,"plotly_legenddoubleclick",z)!==!1&&r(C,E,P)))}function p(E,L,C){var P,I,U=E.data()[0][0],z=U.trace,H=T.traceIs(z,"pie-like"),F=!C._inHover&&L._context.edits.legendText&&!H,N=C._maxNameLength;U.groupTitle?(P=U.groupTitle.text,I=U.groupTitle.font):(I=C.font,C.entries?P=U.text:(P=H?U.label:z.name,z._meta&&(P=A.templateString(P,z._meta))));var B=A.ensureSingle(E,"text","legendtext");B.attr("text-anchor","start").call(s.font,I).text(F?m(P,N):P);var j=C.itemwidth+2*n.itemGap;o.positionText(B,j,0),F?B.call(o.makeEditable,{gd:L,text:P}).call(u,E,L,C).on("edit",function(K){this.text(m(K,N)).call(u,E,L,C);var G=U.trace._fullInput||{},V={};if(T.hasTransform(G,"groupby")){var W=T.getTransformIndices(G,"groupby"),J=W[W.length-1],X=A.keyedContainer(G,"transforms["+J+"].styles","target","value.name");X.set(U.trace._group,K),V=X.constructUpdate()}else V.name=K;return T.call("_guiRestyle",L,V,z.index)}):u(B,E,L,C)}function m(E,L){var C=Math.max(4,L);if(E&&E.trim().length>=C/2)return E;for(var P=C-(E=E||"").length;P>0;P--)E+=" ";return E}function w(E,L){var C,P=L._context.doubleClickDelay,I=1,U=A.ensureSingle(E,"rect","legendtoggle",function(z){L._context.staticPlot||z.style("cursor","pointer").attr("pointer-events","all"),z.call(t.fill,"rgba(0,0,0,0)")});L._context.staticPlot||(U.on("mousedown",function(){(C=new Date().getTime())-L._legendMouseDownTime<P?I+=1:(I=1,L._legendMouseDownTime=C)}),U.on("mouseup",function(){if(!L._dragged&&!L._editing){var z=L._fullLayout.legend;new Date().getTime()-L._legendMouseDownTime>P&&(I=Math.max(I-1,1)),y(L,z,E,I,k.event)}}))}function u(E,L,C,P,I){P._inHover&&E.attr("data-notex",!0),o.convertToTspans(E,C,function(){(function(U,z,H,F){var N=U.data()[0][0];if(H._inHover||!N||N.trace.showlegend){var B=U.select("g[class*=math-group]"),j=B.node();H||(H=z._fullLayout.legend);var K,G,V=H.borderwidth,W=(F===1?H.title.font:N.groupTitle?N.groupTitle.font:H.font).size*i;if(j){var J=s.bBox(j);K=J.height,G=J.width,F===1?s.setTranslate(B,V,V+.75*K):s.setTranslate(B,0,.25*K)}else{var X=U.select(F===1?".legendtitletext":".legendtext"),ee=o.lineCount(X),re=X.node();if(K=W*ee,G=re?s.bBox(re).width:0,F===1)H.title.side==="left"&&(G+=2*n.itemGap),o.positionText(X,V+n.titlePad,V+W);else{var ie=2*n.itemGap+H.itemwidth;N.groupTitle&&(ie=n.itemGap,G-=H.itemwidth),o.positionText(X,ie,-W*((ee-1)/2-.3))}}F===1?(H._titleWidth=G,H._titleHeight=K):(N.lineHeight=W,N.height=Math.max(K,16)+3,N.width=G)}else U.remove()})(L,C,P,I)})}function S(E){return A.isRightAnchor(E)?"right":A.isCenterAnchor(E)?"center":"left"}function _(E){return A.isBottomAnchor(E)?"bottom":A.isMiddleAnchor(E)?"middle":"top"}$.exports=function(E,L){return L||(L=E._fullLayout.legend||{}),function(C,P){var I,U,z=C._fullLayout,H="legend"+z._uid,F=P._inHover;if(F?(I=P.layer,H+="-hover"):I=z._infolayer,I){if(C._legendMouseDownTime||(C._legendMouseDownTime=0),F){if(!P.entries)return;U=f(P.entries,P)}else{if(!C.calcdata)return;U=z.showlegend&&f(C.calcdata,P)}var N=z.hiddenlabels||[];if(!(F||z.showlegend&&U.length))return I.selectAll(".legend").remove(),z._topdefs.select("#"+H).remove(),l.autoMargin(C,"legend");var B=A.ensureSingle(I,"g","legend",function(re){F||re.attr("pointer-events","all")}),j=A.ensureSingleById(z._topdefs,"clipPath",H,function(re){re.append("rect")}),K=A.ensureSingle(B,"rect","bg",function(re){re.attr("shape-rendering","crispEdges")});K.call(t.stroke,P.bordercolor).call(t.fill,P.bgcolor).style("stroke-width",P.borderwidth+"px");var G=A.ensureSingle(B,"g","scrollbox"),V=P.title;if(P._titleWidth=0,P._titleHeight=0,V.text){var W=A.ensureSingle(G,"text","legendtitletext");W.attr("text-anchor","start").call(s.font,V.font).text(V.text),u(W,G,C,P,1)}else G.selectAll(".legendtitletext").remove();var J=A.ensureSingle(B,"rect","scrollbar",function(re){re.attr(n.scrollBarEnterAttrs).call(t.fill,n.scrollBarColor)}),X=G.selectAll("g.groups").data(U);X.enter().append("g").attr("class","groups"),X.exit().remove();var ee=X.selectAll("g.traces").data(A.identity);ee.enter().append("g").attr("class","traces"),ee.exit().remove(),ee.style("opacity",function(re){var ie=re[0].trace;return T.traceIs(ie,"pie-like")?N.indexOf(re[0].label)!==-1?.5:1:ie.visible==="legendonly"?.5:1}).each(function(){k.select(this).call(p,C,P)}).call(b,C,P).each(function(){F||k.select(this).call(w,C)}),A.syncOrAsync([l.previousPromises,function(){return function(re,ie,se,fe){var ye=re._fullLayout;fe||(fe=ye.legend);var ge=ye._size,he=v.isVertical(fe),ve=v.isGrouped(fe),Oe=fe.entrywidthmode==="fraction",xe=fe.borderwidth,ke=2*xe,Me=n.itemGap,Te=fe.itemwidth+2*Me,Q=2*(xe+Me),oe=_(fe),ce=fe.y<0||fe.y===0&&oe==="top",me=fe.y>1||fe.y===1&&oe==="bottom",Ae=fe.tracegroupgap,Ie={};fe._maxHeight=Math.max(ce||me?ye.height/2:ge.h,30);var Ce=0;fe._width=0,fe._height=0;var Re=function(We){var Be=0,Ye=0,rt=We.title.side;return rt&&(rt.indexOf("left")!==-1&&(Be=We._titleWidth),rt.indexOf("top")!==-1&&(Ye=We._titleHeight)),[Be,Ye]}(fe);if(he)se.each(function(We){var Be=We[0].height;s.setTranslate(this,xe+Re[0],xe+Re[1]+fe._height+Be/2+Me),fe._height+=Be,fe._width=Math.max(fe._width,We[0].width)}),Ce=Te+fe._width,fe._width+=Me+Te+ke,fe._height+=Q,ve&&(ie.each(function(We,Be){s.setTranslate(this,0,Be*fe.tracegroupgap)}),fe._height+=(fe._lgroupsLength-1)*fe.tracegroupgap);else{var le=S(fe),de=fe.x<0||fe.x===0&&le==="right",_e=fe.x>1||fe.x===1&&le==="left",Fe=me||ce,Ve=ye.width/2;fe._maxWidth=Math.max(de?Fe&&le==="left"?ge.l+ge.w:Ve:_e?Fe&&le==="right"?ge.r+ge.w:Ve:ge.w,2*Te);var He=0,nt=0;se.each(function(We){var Be=g(We,fe,Te);He=Math.max(He,Be),nt+=Be}),Ce=null;var tt=0;if(ve){var ot=0,dt=0,kt=0;ie.each(function(){var We=0,Be=0;k.select(this).selectAll("g.traces").each(function(rt){var Se=g(rt,fe,Te),ze=rt[0].height;s.setTranslate(this,Re[0],Re[1]+xe+Me+ze/2+Be),Be+=ze,We=Math.max(We,Se),Ie[rt[0].trace.legendgroup]=We});var Ye=We+Me;dt>0&&Ye+xe+dt>fe._maxWidth?(tt=Math.max(tt,dt),dt=0,kt+=ot+Ae,ot=Be):ot=Math.max(ot,Be),s.setTranslate(this,dt,kt),dt+=Ye}),fe._width=Math.max(tt,dt)+xe,fe._height=kt+ot+Q}else{var mt=se.size(),wt=nt+ke+(mt-1)*Me<fe._maxWidth,Lt=0,Ct=0,It=0,Ut=0;se.each(function(We){var Be=We[0].height,Ye=g(We,fe,Te),rt=wt?Ye:He;Oe||(rt+=Me),rt+xe+Ct-Me>=fe._maxWidth&&(tt=Math.max(tt,Ut),Ct=0,It+=Lt,fe._height+=Lt,Lt=0),s.setTranslate(this,Re[0]+xe+Ct,Re[1]+xe+It+Be/2+Me),Ut=Ct+Ye+Me,Ct+=rt,Lt=Math.max(Lt,Be)}),wt?(fe._width=Ct+ke,fe._height=Lt+Q):(fe._width=Math.max(tt,Ut)+ke,fe._height+=Lt+Q)}}fe._width=Math.ceil(Math.max(fe._width+Re[0],fe._titleWidth+2*(xe+n.titlePad))),fe._height=Math.ceil(Math.max(fe._height+Re[1],fe._titleHeight+2*(xe+n.itemGap))),fe._effHeight=Math.min(fe._height,fe._maxHeight);var Rt=re._context.edits,Ge=Rt.legendText||Rt.legendPosition;se.each(function(We){var Be=k.select(this).select(".legendtoggle"),Ye=We[0].height,rt=We[0].trace.legendgroup,Se=g(We,fe,Te);ve&&rt!==""&&(Se=Ie[rt]);var ze=Ge?Te:Ce||Se;he||Oe||(ze+=Me/2),s.setRect(Be,0,-Ye/2,ze,Ye)})}(C,X,ee,P)},function(){var re,ie,se,fe,ye=z._size,ge=P.borderwidth;if(!F){var he=function(_e){var Fe=_e._fullLayout.legend,Ve=S(Fe),He=_(Fe);return l.autoMargin(_e,"legend",{x:Fe.x,y:Fe.y,l:Fe._width*c[Ve],r:Fe._width*h[Ve],b:Fe._effHeight*h[He],t:Fe._effHeight*c[He]})}(C);if(he)return;var ve=ye.l+ye.w*P.x-c[S(P)]*P._width,Oe=ye.t+ye.h*(1-P.y)-c[_(P)]*P._effHeight;if(z.margin.autoexpand){var xe=ve,ke=Oe;ve=A.constrain(ve,0,z.width-P._width),Oe=A.constrain(Oe,0,z.height-P._effHeight),ve!==xe&&A.log("Constrain legend.x to make legend fit inside graph"),Oe!==ke&&A.log("Constrain legend.y to make legend fit inside graph")}s.setTranslate(B,ve,Oe)}if(J.on(".drag",null),B.on("wheel",null),F||P._height<=P._maxHeight||C._context.staticPlot){var Me=P._effHeight;F&&(Me=P._height),K.attr({width:P._width-ge,height:Me-ge,x:ge/2,y:ge/2}),s.setTranslate(G,0,0),j.select("rect").attr({width:P._width-2*ge,height:Me-2*ge,x:ge,y:ge}),s.setClipUrl(G,H,C),s.setRect(J,0,0,0,0),delete P._scrollY}else{var Te,Q,oe,ce=Math.max(n.scrollBarMinHeight,P._effHeight*P._effHeight/P._height),me=P._effHeight-ce-2*n.scrollBarMargin,Ae=P._height-P._effHeight,Ie=me/Ae,Ce=Math.min(P._scrollY||0,Ae);K.attr({width:P._width-2*ge+n.scrollBarWidth+n.scrollBarMargin,height:P._effHeight-ge,x:ge/2,y:ge/2}),j.select("rect").attr({width:P._width-2*ge+n.scrollBarWidth+n.scrollBarMargin,height:P._effHeight-2*ge,x:ge,y:ge+Ce}),s.setClipUrl(G,H,C),de(Ce,ce,Ie),B.on("wheel",function(){de(Ce=A.constrain(P._scrollY+k.event.deltaY/me*Ae,0,Ae),ce,Ie),Ce!==0&&Ce!==Ae&&k.event.preventDefault()});var Re=k.behavior.drag().on("dragstart",function(){var _e=k.event.sourceEvent;Te=_e.type==="touchstart"?_e.changedTouches[0].clientY:_e.clientY,oe=Ce}).on("drag",function(){var _e=k.event.sourceEvent;_e.buttons===2||_e.ctrlKey||(Q=_e.type==="touchmove"?_e.changedTouches[0].clientY:_e.clientY,de(Ce=function(Fe,Ve,He){var nt=(He-Ve)/Ie+Fe;return A.constrain(nt,0,Ae)}(oe,Te,Q),ce,Ie))});J.call(Re);var le=k.behavior.drag().on("dragstart",function(){var _e=k.event.sourceEvent;_e.type==="touchstart"&&(Te=_e.changedTouches[0].clientY,oe=Ce)}).on("drag",function(){var _e=k.event.sourceEvent;_e.type==="touchmove"&&(Q=_e.changedTouches[0].clientY,de(Ce=function(Fe,Ve,He){var nt=(Ve-He)/Ie+Fe;return A.constrain(nt,0,Ae)}(oe,Te,Q),ce,Ie))});G.call(le)}function de(_e,Fe,Ve){P._scrollY=C._fullLayout.legend._scrollY=_e,s.setTranslate(G,0,-_e),s.setRect(J,P._width,n.scrollBarMargin+_e*Ve,n.scrollBarWidth,Fe),j.select("rect").attr("y",ge+_e)}C._context.edits.legendPosition&&(B.classed("cursor-move",!0),d.init({element:B.node(),gd:C,prepFn:function(){var _e=s.getTranslate(B);se=_e.x,fe=_e.y},moveFn:function(_e,Fe){var Ve=se+_e,He=fe+Fe;s.setTranslate(B,Ve,He),re=d.align(Ve,0,ye.l,ye.l+ye.w,P.xanchor),ie=d.align(He,0,ye.t+ye.h,ye.t,P.yanchor)},doneFn:function(){re!==void 0&&ie!==void 0&&T.call("_guiRelayout",C,{"legend.x":re,"legend.y":ie})},clickFn:function(_e,Fe){var Ve=I.selectAll("g.traces").filter(function(){var He=this.getBoundingClientRect();return Fe.clientX>=He.left&&Fe.clientX<=He.right&&Fe.clientY>=He.top&&Fe.clientY<=He.bottom});Ve.size()>0&&y(C,B,Ve,_e,Fe)}}))}],C)}}(E,L)}},82424:function($,R,e){var k=e(73972),A=e(10130);$.exports=function(l,T){var x,d,s=T._inHover,t=A.isGrouped(T),o=A.isReversed(T),r={},n=[],a=!1,i={},c=0,h=0;function f(U,z){if(U!==""&&A.isGrouped(T))n.indexOf(U)===-1?(n.push(U),a=!0,r[U]=[z]):r[U].push(z);else{var H="~~i"+c;n.push(H),r[H]=[z],c++}}for(x=0;x<l.length;x++){var b=l[x],v=b[0],g=v.trace,y=g.legendgroup;if(s||g.visible&&g.showlegend)if(k.traceIs(g,"pie-like"))for(i[y]||(i[y]={}),d=0;d<b.length;d++){var p=b[d].label;i[y][p]||(f(y,{label:p,color:b[d].color,i:b[d].i,trace:g,pts:b[d].pts}),i[y][p]=!0,h=Math.max(h,(p||"").length))}else f(y,v),h=Math.max(h,(g.name||"").length)}if(!n.length)return[];var m=!a||!t,w=[];for(x=0;x<n.length;x++){var u=r[n[x]];m?w.push(u[0]):w.push(u)}for(m&&(w=[w]),x=0;x<w.length;x++){var S=1/0;for(d=0;d<w[x].length;d++){var _=w[x][d].trace.legendrank;S>_&&(S=_)}w[x][0]._groupMinRank=S,w[x][0]._preGroupSort=x}var E=function(U,z){return U.trace.legendrank-z.trace.legendrank||U._preSort-z._preSort};for(w.forEach(function(U,z){U[0]._preGroupSort=z}),w.sort(function(U,z){return U[0]._groupMinRank-z[0]._groupMinRank||U[0]._preGroupSort-z[0]._preGroupSort}),x=0;x<w.length;x++){w[x].forEach(function(U,z){U._preSort=z}),w[x].sort(E);var L=w[x][0].trace,C=null;for(d=0;d<w[x].length;d++){var P=w[x][d].trace.legendgrouptitle;if(P&&P.text){C=P,s&&(P.font=T._groupTitleFont);break}}if(o&&w[x].reverse(),C){var I=!1;for(d=0;d<w[x].length;d++)if(k.traceIs(w[x][d].trace,"pie-like")){I=!0;break}w[x].unshift({i:-1,groupTitle:C,noClick:I,trace:{showlegend:L.showlegend,legendgroup:L.legendgroup,visible:T.groupclick==="toggleitem"||L.visible}})}for(d=0;d<w[x].length;d++)w[x][d]=[w[x][d]]}return T._lgroupsLength=w.length,T._maxNameLength=h,w}},85167:function($,R,e){var k=e(71828),A=e(73972),l=!0;$.exports=function(T,x,d){var s=x._fullLayout;if(!x._dragged&&!x._editing){var t,o=s.legend.itemclick,r=s.legend.itemdoubleclick,n=s.legend.groupclick;if(d===1&&o==="toggle"&&r==="toggleothers"&&l&&x.data&&x._context.showTips&&k.notifier(k._(x,"Double-click on legend to isolate one trace"),"long"),l=!1,d===1?t=o:d===2&&(t=r),t){var a=n==="togglegroup",i=s.hiddenlabels?s.hiddenlabels.slice():[],c=T.data()[0][0];if(!c.groupTitle||!c.noClick){var h,f,b,v,g,y=x._fullData,p=c.trace,m=p.legendgroup,w={},u=[],S=[],_=[];if(A.traceIs(p,"pie-like")){var E=c.label,L=i.indexOf(E);t==="toggle"?L===-1?i.push(E):i.splice(L,1):t==="toggleothers"&&(i=[],x.calcdata[0].forEach(function(W){E!==W.label&&i.push(W.label)}),x._fullLayout.hiddenlabels&&x._fullLayout.hiddenlabels.length===i.length&&L===-1&&(i=[])),A.call("_guiRelayout",x,"hiddenlabels",i)}else{var C,P=m&&m.length,I=[];if(P)for(h=0;h<y.length;h++)(C=y[h]).visible&&C.legendgroup===m&&I.push(h);if(t==="toggle"){var U;switch(p.visible){case!0:U="legendonly";break;case!1:U=!1;break;case"legendonly":U=!0}if(P)if(a)for(h=0;h<y.length;h++)y[h].visible!==!1&&y[h].legendgroup===m&&V(y[h],U);else V(p,U);else V(p,U)}else if(t==="toggleothers"){var z,H,F,N,B=!0;for(h=0;h<y.length;h++)if(z=y[h]===p,F=y[h].showlegend!==!0,!(z||F||(H=P&&y[h].legendgroup===m)||y[h].visible!==!0||A.traceIs(y[h],"notLegendIsolatable"))){B=!1;break}for(h=0;h<y.length;h++)if(y[h].visible!==!1&&!A.traceIs(y[h],"notLegendIsolatable"))switch(p.visible){case"legendonly":V(y[h],!0);break;case!0:N=!!B||"legendonly",z=y[h]===p,F=y[h].showlegend!==!0&&!y[h].legendgroup,H=z||P&&y[h].legendgroup===m,V(y[h],!(!H&&!F)||N)}}for(h=0;h<S.length;h++)if(b=S[h]){var j=b.constructUpdate(),K=Object.keys(j);for(f=0;f<K.length;f++)v=K[f],(w[v]=w[v]||[])[_[h]]=j[v]}for(g=Object.keys(w),h=0;h<g.length;h++)for(v=g[h],f=0;f<u.length;f++)w[v].hasOwnProperty(f)||(w[v][f]=void 0);A.call("_guiRestyle",x,w,u)}}}}function G(W,J,X){var ee=u.indexOf(W),re=w[J];return re||(re=w[J]=[]),u.indexOf(W)===-1&&(u.push(W),ee=u.length-1),re[ee]=X,ee}function V(W,J){if(!c.groupTitle||a){var X=W._fullInput;if(A.hasTransform(X,"groupby")){var ee=S[X.index];if(!ee){var re=A.getTransformIndices(X,"groupby"),ie=re[re.length-1];ee=k.keyedContainer(X,"transforms["+ie+"].styles","target","value.visible"),S[X.index]=ee}var se=ee.get(W._group);se===void 0&&(se=!0),se!==!1&&ee.set(W._group,J),_[X.index]=G(X.index,"visible",X.visible!==!1)}else{var fe=X.visible!==!1&&J;G(X.index,"visible",fe)}}}}},10130:function($,R){R.isGrouped=function(e){return(e.traceorder||"").indexOf("grouped")!==-1},R.isVertical=function(e){return e.orientation!=="h"},R.isReversed=function(e){return(e.traceorder||"").indexOf("reversed")!==-1}},2199:function($,R,e){$.exports={moduleType:"component",name:"legend",layoutAttributes:e(33030),supplyLayoutDefaults:e(99017),draw:e(43969),style:e(53630)}},53630:function($,R,e){var k=e(39898),A=e(73972),l=e(71828),T=l.strTranslate,x=e(91424),d=e(7901),s=e(52075).extractOpts,t=e(34098),o=e(63463),r=e(53581).castOption,n=e(14928);function a(h,f){return(f?"radial":"horizontal")+(h?"":"reversed")}function i(h){var f=h[0].trace,b=f.contours,v=t.hasLines(f),g=t.hasMarkers(f),y=f.visible&&f.fill&&f.fill!=="none",p=!1,m=!1;if(b){var w=b.coloring;w==="lines"?p=!0:v=w==="none"||w==="heatmap"||b.showlines,b.type==="constraint"?y=b._operation!=="=":w!=="fill"&&w!=="heatmap"||(m=!0)}return{showMarker:g,showLine:v,showFill:y,showGradientLine:p,showGradientFill:m,anyLine:v||p,anyFill:y||m}}function c(h,f,b){return h&&l.isArrayOrTypedArray(h)?f:h>b?b:h}$.exports=function(h,f,b){var v=f._fullLayout;b||(b=v.legend);var g=b.itemsizing==="constant",y=b.itemwidth,p=(y+2*n.itemGap)/2,m=T(p,0),w=function(_,E,L,C){var P;if(_+1)P=_;else{if(!(E&&E.width>0))return 0;P=E.width}return g?C:Math.min(P,L)};function u(_,E,L){var C=_[0].trace,P=C.marker||{},I=P.line||{},U=L?C.visible&&C.type===L:A.traceIs(C,"bar"),z=k.select(E).select("g.legendpoints").selectAll("path.legend"+L).data(U?[_]:[]);z.enter().append("path").classed("legend"+L,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),z.exit().remove(),z.each(function(H){var F=k.select(this),N=H[0],B=w(N.mlw,P.line,5,2);F.style("stroke-width",B+"px");var j=N.mcc;if(!b._inHover&&"mc"in N){var K=s(P),G=K.mid;G===void 0&&(G=(K.max+K.min)/2),j=x.tryColorscale(P,"")(G)}var V=j||N.mc||P.color,W=P.pattern,J=W&&x.getPatternAttr(W.shape,0,"");if(J){var X=x.getPatternAttr(W.bgcolor,0,null),ee=x.getPatternAttr(W.fgcolor,0,null),re=W.fgopacity,ie=c(W.size,8,10),se=c(W.solidity,.5,1),fe="legend-"+C.uid;F.call(x.pattern,"legend",f,fe,J,ie,se,j,W.fillmode,X,ee,re)}else F.call(d.fill,V);B&&d.stroke(F,N.mlc||I.color)})}function S(_,E,L){var C=_[0],P=C.trace,I=L?P.visible&&P.type===L:A.traceIs(P,L),U=k.select(E).select("g.legendpoints").selectAll("path.legend"+L).data(I?[_]:[]);if(U.enter().append("path").classed("legend"+L,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),U.exit().remove(),U.size()){var z=(P.marker||{}).line,H=w(r(z.width,C.pts),z,5,2),F=l.minExtend(P,{marker:{line:{width:H}}});F.marker.line.color=z.color;var N=l.minExtend(C,{trace:F});o(U,N,F)}}h.each(function(_){var E=k.select(this),L=l.ensureSingle(E,"g","layers");L.style("opacity",_[0].trace.opacity);var C=b.valign,P=_[0].lineHeight,I=_[0].height;if(C!=="middle"&&P&&I){var U={top:1,bottom:-1}[C]*(.5*(P-I+3));L.attr("transform",T(0,U))}else L.attr("transform",null);L.selectAll("g.legendfill").data([_]).enter().append("g").classed("legendfill",!0),L.selectAll("g.legendlines").data([_]).enter().append("g").classed("legendlines",!0);var z=L.selectAll("g.legendsymbols").data([_]);z.enter().append("g").classed("legendsymbols",!0),z.selectAll("g.legendpoints").data([_]).enter().append("g").classed("legendpoints",!0)}).each(function(_){var E,L=_[0].trace,C=[];if(L.visible)switch(L.type){case"histogram2d":case"heatmap":C=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":C=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":C=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":C=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":C=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":C=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var P=k.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(C);P.enter().append("path").classed("legend3dandfriends",!0).attr("transform",m).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(I,U){var z,H=k.select(this),F=s(L),N=F.colorscale,B=F.reversescale;if(N){if(!E){var j=N.length;z=U===0?N[B?j-1:0][1]:U===1?N[B?0:j-1][1]:N[Math.floor((j-1)/2)][1]}}else{var K=L.vertexcolor||L.facecolor||L.color;z=l.isArrayOrTypedArray(K)?K[U]||K[0]:K}H.attr("d",I[0]),z?H.call(d.fill,z):H.call(function(G){if(G.size()){var V="legendfill-"+L.uid;x.gradient(G,f,V,a(B,E==="radial"),N,"fill")}})})}).each(function(_){var E=_[0].trace,L=E.type==="waterfall";if(_[0]._distinct&&L){var C=_[0].trace[_[0].dir].marker;return _[0].mc=C.color,_[0].mlw=C.line.width,_[0].mlc=C.line.color,u(_,this,"waterfall")}var P=[];E.visible&&L&&(P=_[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var I=k.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(P);I.enter().append("path").classed("legendwaterfall",!0).attr("transform",m).style("stroke-miterlimit",1),I.exit().remove(),I.each(function(U){var z=k.select(this),H=E[U[0]].marker,F=w(void 0,H.line,5,2);z.attr("d",U[1]).style("stroke-width",F+"px").call(d.fill,H.color),F&&z.call(d.stroke,H.line.color)})}).each(function(_){u(_,this,"funnel")}).each(function(_){u(_,this)}).each(function(_){var E=_[0].trace,L=k.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&A.traceIs(E,"box-violin")?[_]:[]);L.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),L.exit().remove(),L.each(function(){var C=k.select(this);if(E.boxpoints!=="all"&&E.points!=="all"||d.opacity(E.fillcolor)!==0||d.opacity((E.line||{}).color)!==0){var P=w(void 0,E.line,5,2);C.style("stroke-width",P+"px").call(d.fill,E.fillcolor),P&&d.stroke(C,E.line.color)}else{var I=l.minExtend(E,{marker:{size:g?12:l.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});L.call(x.pointStyle,I,f)}})}).each(function(_){S(_,this,"funnelarea")}).each(function(_){S(_,this,"pie")}).each(function(_){var E,L,C=i(_),P=C.showFill,I=C.showLine,U=C.showGradientLine,z=C.showGradientFill,H=C.anyFill,F=C.anyLine,N=_[0],B=N.trace,j=s(B),K=j.colorscale,G=j.reversescale,V=t.hasMarkers(B)||!H?"M5,0":F?"M5,-2":"M5,-3",W=k.select(this),J=W.select(".legendfill").selectAll("path").data(P||z?[_]:[]);if(J.enter().append("path").classed("js-fill",!0),J.exit().remove(),J.attr("d",V+"h"+y+"v6h-"+y+"z").call(function(re){if(re.size())if(P)x.fillGroupStyle(re,f);else{var ie="legendfill-"+B.uid;x.gradient(re,f,ie,a(G),K,"fill")}}),I||U){var X=w(void 0,B.line,10,5);L=l.minExtend(B,{line:{width:X}}),E=[l.minExtend(N,{trace:L})]}var ee=W.select(".legendlines").selectAll("path").data(I||U?[E]:[]);ee.enter().append("path").classed("js-line",!0),ee.exit().remove(),ee.attr("d",V+(U?"l"+y+",0.0001":"h"+y)).call(I?x.lineGroupStyle:function(re){if(re.size()){var ie="legendline-"+B.uid;x.lineGroupStyle(re),x.gradient(re,f,ie,a(G),K,"stroke")}})}).each(function(_){var E,L,C=i(_),P=C.anyFill,I=C.anyLine,U=C.showLine,z=C.showMarker,H=_[0],F=H.trace,N=!z&&!I&&!P&&t.hasText(F);function B(ee,re,ie,se){var fe=l.nestedProperty(F,ee).get(),ye=l.isArrayOrTypedArray(fe)&&re?re(fe):fe;if(g&&ye&&se!==void 0&&(ye=se),ie){if(ye<ie[0])return ie[0];if(ye>ie[1])return ie[1]}return ye}function j(ee){return H._distinct&&H.index&&ee[H.index]?ee[H.index]:ee[0]}if(z||N||U){var K={},G={};if(z){K.mc=B("marker.color",j),K.mx=B("marker.symbol",j),K.mo=B("marker.opacity",l.mean,[.2,1]),K.mlc=B("marker.line.color",j),K.mlw=B("marker.line.width",l.mean,[0,5],2),G.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var V=B("marker.size",l.mean,[2,16],12);K.ms=V,G.marker.size=V}U&&(G.line={width:B("line.width",j,[0,10],5)}),N&&(K.tx="Aa",K.tp=B("textposition",j),K.ts=10,K.tc=B("textfont.color",j),K.tf=B("textfont.family",j)),E=[l.minExtend(H,K)],(L=l.minExtend(F,G)).selectedpoints=null,L.texttemplate=null}var W=k.select(this).select("g.legendpoints"),J=W.selectAll("path.scatterpts").data(z?E:[]);J.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",m),J.exit().remove(),J.call(x.pointStyle,L,f),z&&(E[0].mrc=3);var X=W.selectAll("g.pointtext").data(N?E:[]);X.enter().append("g").classed("pointtext",!0).append("text").attr("transform",m),X.exit().remove(),X.selectAll("text").call(x.textPointStyle,L,f)}).each(function(_){var E=_[0].trace,L=k.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&E.type==="candlestick"?[_,_]:[]);L.enter().append("path").classed("legendcandle",!0).attr("d",function(C,P){return P?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",m).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(C,P){var I=k.select(this),U=E[P?"increasing":"decreasing"],z=w(void 0,U.line,5,2);I.style("stroke-width",z+"px").call(d.fill,U.fillcolor),z&&d.stroke(I,U.line.color)})}).each(function(_){var E=_[0].trace,L=k.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&E.type==="ohlc"?[_,_]:[]);L.enter().append("path").classed("legendohlc",!0).attr("d",function(C,P){return P?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",m).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(C,P){var I=k.select(this),U=E[P?"increasing":"decreasing"],z=w(void 0,U.line,5,2);I.style("fill","none").call(x.dashLine,U.line.dash,z),z&&d.stroke(I,U.line.color)})})}},42068:function($,R,e){e(93348),$.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},26023:function($,R,e){var k=e(73972),A=e(74875),l=e(41675),T=e(24255),x=e(34031).eraseActiveShape,d=e(71828),s=d._,t=$.exports={};function o(v,g){var y,p,m=g.currentTarget,w=m.getAttribute("data-attr"),u=m.getAttribute("data-val")||!0,S=v._fullLayout,_={},E=l.list(v,null,!0),L=S._cartesianSpikesEnabled;if(w==="zoom"){var C,P=u==="in"?.5:2,I=(1+P)/2,U=(1-P)/2;for(p=0;p<E.length;p++)if(!(y=E[p]).fixedrange)if(C=y._name,u==="auto")_[C+".autorange"]=!0;else if(u==="reset"){if(y._rangeInitial===void 0)_[C+".autorange"]=!0;else{var z=y._rangeInitial.slice();_[C+".range[0]"]=z[0],_[C+".range[1]"]=z[1]}y._showSpikeInitial!==void 0&&(_[C+".showspikes"]=y._showSpikeInitial,L!=="on"||y._showSpikeInitial||(L="off"))}else{var H=[y.r2l(y.range[0]),y.r2l(y.range[1])],F=[I*H[0]+U*H[1],I*H[1]+U*H[0]];_[C+".range[0]"]=y.l2r(F[0]),_[C+".range[1]"]=y.l2r(F[1])}}else w!=="hovermode"||u!=="x"&&u!=="y"||(u=S._isHoriz?"y":"x",m.setAttribute("data-val",u)),_[w]=u;S._cartesianSpikesEnabled=L,k.call("_guiRelayout",v,_)}function r(v,g){for(var y=g.currentTarget,p=y.getAttribute("data-attr"),m=y.getAttribute("data-val")||!0,w=v._fullLayout._subplots.gl3d||[],u={},S=p.split("."),_=0;_<w.length;_++)u[w[_]+"."+S[1]]=m;var E=m==="pan"?m:"zoom";u.dragmode=E,k.call("_guiRelayout",v,u)}function n(v,g){for(var y=g.currentTarget.getAttribute("data-attr"),p=y==="resetLastSave",m=y==="resetDefault",w=v._fullLayout,u=w._subplots.gl3d||[],S={},_=0;_<u.length;_++){var E,L=u[_],C=L+".camera",P=L+".aspectratio",I=L+".aspectmode",U=w[L]._scene;p?(S[C+".up"]=U.viewInitial.up,S[C+".eye"]=U.viewInitial.eye,S[C+".center"]=U.viewInitial.center,E=!0):m&&(S[C+".up"]=null,S[C+".eye"]=null,S[C+".center"]=null,E=!0),E&&(S[P+".x"]=U.viewInitial.aspectratio.x,S[P+".y"]=U.viewInitial.aspectratio.y,S[P+".z"]=U.viewInitial.aspectratio.z,S[I]=U.viewInitial.aspectmode)}k.call("_guiRelayout",v,S)}function a(v,g){var y=g.currentTarget,p=y._previousVal,m=v._fullLayout,w=m._subplots.gl3d||[],u=["xaxis","yaxis","zaxis"],S={},_={};if(p)_=p,y._previousVal=null;else{for(var E=0;E<w.length;E++){var L=w[E],C=m[L],P=L+".hovermode";S[P]=C.hovermode,_[P]=!1;for(var I=0;I<3;I++){var U=u[I],z=L+"."+U+".showspikes";_[z]=!1,S[z]=C[U].showspikes}}y._previousVal=S}return _}function i(v,g){for(var y=g.currentTarget,p=y.getAttribute("data-attr"),m=y.getAttribute("data-val")||!0,w=v._fullLayout,u=w._subplots.geo||[],S=0;S<u.length;S++){var _=u[S],E=w[_];if(p==="zoom"){var L=E.projection.scale,C=m==="in"?2*L:.5*L;k.call("_guiRelayout",v,_+".projection.scale",C)}}p==="reset"&&b(v,"geo")}function c(v){var g=v._fullLayout;return!g.hovermode&&(g._has("cartesian")?g._isHoriz?"y":"x":"closest")}function h(v){var g=c(v);k.call("_guiRelayout",v,"hovermode",g)}function f(v,g){for(var y=g.currentTarget.getAttribute("data-val"),p=v._fullLayout,m=p._subplots.mapbox||[],w={},u=0;u<m.length;u++){var S=m[u],_=p[S].zoom,E=y==="in"?1.05*_:_/1.05;w[S+".zoom"]=E}k.call("_guiRelayout",v,w)}function b(v,g){for(var y=v._fullLayout,p=y._subplots[g]||[],m={},w=0;w<p.length;w++)for(var u=p[w],S=y[u]._subplot.viewInitial,_=Object.keys(S),E=0;E<_.length;E++){var L=_[E];m[u+"."+L]=S[L]}k.call("_guiRelayout",v,m)}t.toImage={name:"toImage",title:function(v){var g=(v._context.toImageButtonOptions||{}).format||"png";return s(v,g==="png"?"Download plot as a png":"Download plot")},icon:T.camera,click:function(v){var g=v._context.toImageButtonOptions,y={format:g.format||"png"};d.notifier(s(v,"Taking snapshot - this may take a few seconds"),"long"),y.format!=="svg"&&d.isIE()&&(d.notifier(s(v,"IE only supports svg.  Changing format to svg."),"long"),y.format="svg"),["filename","width","height","scale"].forEach(function(p){p in g&&(y[p]=g[p])}),k.call("downloadImage",v,y).then(function(p){d.notifier(s(v,"Snapshot succeeded")+" - "+p,"long")}).catch(function(){d.notifier(s(v,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(v){return s(v,"Edit in Chart Studio")},icon:T.disk,click:function(v){A.sendDataToCloud(v)}},t.editInChartStudio={name:"editInChartStudio",title:function(v){return s(v,"Edit in Chart Studio")},icon:T.pencil,click:function(v){A.sendDataToCloud(v)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(v){return s(v,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:o},t.pan2d={name:"pan2d",_cat:"pan",title:function(v){return s(v,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:o},t.select2d={name:"select2d",_cat:"select",title:function(v){return s(v,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:o},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(v){return s(v,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:o},t.drawclosedpath={name:"drawclosedpath",title:function(v){return s(v,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:o},t.drawopenpath={name:"drawopenpath",title:function(v){return s(v,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:o},t.drawline={name:"drawline",title:function(v){return s(v,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:o},t.drawrect={name:"drawrect",title:function(v){return s(v,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:o},t.drawcircle={name:"drawcircle",title:function(v){return s(v,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:o},t.eraseshape={name:"eraseshape",title:function(v){return s(v,"Erase active shape")},icon:T.eraseshape,click:x},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:o},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:o},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(v){return s(v,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:o},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(v){return s(v,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:o},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(v){return s(v,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:o},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(v){return s(v,"Compare data on hover")},attr:"hovermode",val:function(v){return v._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:o},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(v){return s(v,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:r},t.pan3d={name:"pan3d",_cat:"pan",title:function(v){return s(v,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:r},t.orbitRotation={name:"orbitRotation",title:function(v){return s(v,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:r},t.tableRotation={name:"tableRotation",title:function(v){return s(v,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:r},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(v){return s(v,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:n},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(v){return s(v,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:n},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(v,g){var y=a(v,g);k.call("_guiRelayout",v,y)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:i},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:i},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(v){return s(v,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:i},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:h},t.resetViewSankey={name:"resetSankeyGroup",title:function(v){return s(v,"Reset view")},icon:T.home,click:function(v){for(var g={"node.groups":[],"node.x":[],"node.y":[]},y=0;y<v._fullData.length;y++){var p=v._fullData[y]._viewInitial;g["node.groups"].push(p.node.groups.slice()),g["node.x"].push(p.node.x.slice()),g["node.y"].push(p.node.y.slice())}k.call("restyle",v,g)}},t.toggleHover={name:"toggleHover",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(v,g){var y=a(v,g);y.hovermode=c(v),k.call("_guiRelayout",v,y)}},t.resetViews={name:"resetViews",title:function(v){return s(v,"Reset views")},icon:T.home,click:function(v,g){var y=g.currentTarget;y.setAttribute("data-attr","zoom"),y.setAttribute("data-val","reset"),o(v,g),y.setAttribute("data-attr","resetLastSave"),n(v,g),b(v,"geo"),b(v,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(v){return s(v,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(v){var g=v._fullLayout,y=g._cartesianSpikesEnabled;g._cartesianSpikesEnabled=y==="on"?"off":"on",k.call("_guiRelayout",v,function(p){for(var m=p._fullLayout._cartesianSpikesEnabled==="on",w=l.list(p,null,!0),u={},S=0;S<w.length;S++){var _=w[S];u[_._name+".showspikes"]=!!m||_._showSpikeInitial}return u}(v))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(v){return s(v,"Reset view")},attr:"reset",icon:T.home,click:function(v){b(v,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:f},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:f}},93348:function($,R,e){var k=e(26023),A=Object.keys(k),l=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(l),x=[];A.forEach(function(d){(function(s){if(T.indexOf(s._cat||s.name)===-1){var t=s.name,o=(s._cat||s.name).toLowerCase();x.indexOf(t)===-1&&x.push(t),x.indexOf(o)===-1&&x.push(o)}})(k[d])}),x.sort(),$.exports={DRAW_MODES:l,backButtons:T,foreButtons:x}},35750:function($,R,e){var k=e(71828),A=e(7901),l=e(44467),T=e(42068);$.exports=function(x,d){var s=x.modebar||{},t=l.newContainer(d,"modebar");function o(n,a){return k.coerce(s,t,T,n,a)}o("orientation"),o("bgcolor",A.addOpacity(d.paper_bgcolor,.5));var r=A.contrast(A.rgb(d.modebar.bgcolor));o("color",A.addOpacity(r,.3)),o("activecolor",A.addOpacity(r,.7)),o("uirevision",d.uirevision),o("add"),o("remove")}},64168:function($,R,e){$.exports={moduleType:"component",name:"modebar",layoutAttributes:e(42068),supplyLayoutDefaults:e(35750),manage:e(14192)}},14192:function($,R,e){var k=e(41675),A=e(34098),l=e(73972),T=e(23469).isUnifiedHover,x=e(37676),d=e(26023),s=e(93348).DRAW_MODES,t=e(71828).extendDeep;$.exports=function(o){var r=o._fullLayout,n=o._context,a=r._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var i,c=n.modeBarButtons;i=Array.isArray(c)&&c.length?function(h){for(var f=t([],h),b=0;b<f.length;b++)for(var v=f[b],g=0;g<v.length;g++){var y=v[g];if(typeof y=="string"){if(d[y]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));f[b][g]=d[y]}}return f}(c):!n.displayModeBar&&n.watermark?[]:function(h){var f=h._fullLayout,b=h._fullData,v=h._context;function g(fe,ye){if(typeof ye=="string"){if(ye.toLowerCase()===fe.toLowerCase())return!0}else{var ge=ye.name,he=ye._cat||ye.name;if(ge===fe||he===fe.toLowerCase())return!0}return!1}var y=f.modebar.add;typeof y=="string"&&(y=[y]);var p=f.modebar.remove;typeof p=="string"&&(p=[p]);var m=v.modeBarButtonsToAdd.concat(y.filter(function(fe){for(var ye=0;ye<v.modeBarButtonsToRemove.length;ye++)if(g(fe,v.modeBarButtonsToRemove[ye]))return!1;return!0})),w=v.modeBarButtonsToRemove.concat(p.filter(function(fe){for(var ye=0;ye<v.modeBarButtonsToAdd.length;ye++)if(g(fe,v.modeBarButtonsToAdd[ye]))return!1;return!0})),u=f._has("cartesian"),S=f._has("gl3d"),_=f._has("geo"),E=f._has("pie"),L=f._has("funnelarea"),C=f._has("gl2d"),P=f._has("ternary"),I=f._has("mapbox"),U=f._has("polar"),z=f._has("smith"),H=f._has("sankey"),F=function(fe){for(var ye=k.list({_fullLayout:fe},null,!0),ge=0;ge<ye.length;ge++)if(!ye[ge].fixedrange)return!1;return!0}(f),N=T(f.hovermode),B=[];function j(fe){if(fe.length){for(var ye=[],ge=0;ge<fe.length;ge++){for(var he=fe[ge],ve=d[he],Oe=ve.name.toLowerCase(),xe=(ve._cat||ve.name).toLowerCase(),ke=!1,Me=0;Me<w.length;Me++){var Te=w[Me].toLowerCase();if(Te===Oe||Te===xe){ke=!0;break}}ke||ye.push(d[he])}B.push(ye)}}var K=["toImage"];v.showEditInChartStudio?K.push("editInChartStudio"):v.showSendToCloud&&K.push("sendDataToCloud"),j(K);var G=[],V=[],W=[],J=[];(u||C||E||L||P)+_+S+I+U+z>1?(V=["toggleHover"],W=["resetViews"]):_?(G=["zoomInGeo","zoomOutGeo"],V=["hoverClosestGeo"],W=["resetGeo"]):S?(V=["hoverClosest3d"],W=["resetCameraDefault3d","resetCameraLastSave3d"]):I?(G=["zoomInMapbox","zoomOutMapbox"],V=["toggleHover"],W=["resetViewMapbox"]):C?V=["hoverClosestGl2d"]:E?V=["hoverClosestPie"]:H?(V=["hoverClosestCartesian","hoverCompareCartesian"],W=["resetViewSankey"]):V=["toggleHover"],u&&(V=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(fe){for(var ye=0;ye<fe.length;ye++)if(!l.traceIs(fe[ye],"noHover"))return!1;return!0}(b)||N)&&(V=[]),!u&&!C||F||(G=["zoomIn2d","zoomOut2d","autoScale2d"],W[0]!=="resetViews"&&(W=["resetScale2d"])),S?J=["zoom3d","pan3d","orbitRotation","tableRotation"]:(u||C)&&!F||P?J=["zoom2d","pan2d"]:I||_?J=["pan2d"]:U&&(J=["zoom2d"]),function(fe){for(var ye=!1,ge=0;ge<fe.length&&!ye;ge++){var he=fe[ge];he._module&&he._module.selectPoints&&(l.traceIs(he,"scatter-like")?(A.hasMarkers(he)||A.hasText(he))&&(ye=!0):l.traceIs(he,"box-violin")&&he.boxpoints!=="all"&&he.points!=="all"||(ye=!0))}return ye}(b)&&J.push("select2d","lasso2d");var X=[],ee=function(fe){X.indexOf(fe)===-1&&V.indexOf(fe)!==-1&&X.push(fe)};if(Array.isArray(m)){for(var re=[],ie=0;ie<m.length;ie++){var se=m[ie];typeof se=="string"?(se=se.toLowerCase(),s.indexOf(se)!==-1?(f._has("mapbox")||f._has("cartesian"))&&J.push(se):se==="togglespikelines"?ee("toggleSpikelines"):se==="togglehover"?ee("toggleHover"):se==="hovercompare"?ee("hoverCompareCartesian"):se==="hoverclosest"?(ee("hoverClosestCartesian"),ee("hoverClosestGeo"),ee("hoverClosest3d"),ee("hoverClosestGl2d"),ee("hoverClosestPie")):se==="v1hovermode"&&(ee("toggleHover"),ee("hoverClosestCartesian"),ee("hoverCompareCartesian"),ee("hoverClosestGeo"),ee("hoverClosest3d"),ee("hoverClosestGl2d"),ee("hoverClosestPie"))):re.push(se)}m=re}return j(J),j(G.concat(W)),j(X),function(fe,ye){if(ye.length)if(Array.isArray(ye[0]))for(var ge=0;ge<ye.length;ge++)fe.push(ye[ge]);else fe.push(ye);return fe}(B,m)}(o),a?a.update(o,i):r._modeBar=x(o,i)}else a&&(a.destroy(),delete r._modeBar)}},37676:function($,R,e){var k=e(39898),A=e(92770),l=e(71828),T=e(24255),x=e(11506).version,d=new DOMParser;function s(o){this.container=o.container,this.element=document.createElement("div"),this.update(o.graphInfo,o.buttons),this.container.appendChild(this.element)}var t=s.prototype;t.update=function(o,r){this.graphInfo=o;var n=this.graphInfo._context,a=this.graphInfo._fullLayout,i="modebar-"+a._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar",n.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),a.modebar.orientation==="v"&&(this.element.className+=" vertical",r=r.reverse());var c=a.modebar,h=n.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";l.deleteRelatedStyleRule(i),l.addRelatedStyleRule(i,h+"#"+i+" .modebar-group","background-color: "+c.bgcolor),l.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+c.color),l.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+c.activecolor),l.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+c.activecolor);var f=!this.hasButtons(r),b=this.hasLogo!==n.displaylogo,v=this.locale!==n.locale;if(this.locale=n.locale,(f||b||v)&&(this.removeAllButtons(),this.updateButtons(r),n.watermark||n.displaylogo)){var g=this.getLogo();n.watermark&&(g.className=g.className+" watermark"),a.modebar.orientation==="v"?this.element.insertBefore(g,this.element.childNodes[0]):this.element.appendChild(g),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(o){var r=this;this.buttons=o,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(n){var a=r.createGroup();n.forEach(function(i){var c=i.name;if(!c)throw new Error("must provide button 'name' in button config");if(r.buttonsNames.indexOf(c)!==-1)throw new Error("button name '"+c+"' is taken");r.buttonsNames.push(c);var h=r.createButton(i);r.buttonElements.push(h),a.appendChild(h)}),r.element.appendChild(a)})},t.createGroup=function(){var o=document.createElement("div");return o.className="modebar-group",o},t.createButton=function(o){var r=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var a=o.title;a===void 0?a=o.name:typeof a=="function"&&(a=a(this.graphInfo)),(a||a===0)&&n.setAttribute("data-title",a),o.attr!==void 0&&n.setAttribute("data-attr",o.attr);var i=o.val;if(i!==void 0&&(typeof i=="function"&&(i=i(this.graphInfo)),n.setAttribute("data-val",i)),typeof o.click!="function")throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(h){o.click(r.graphInfo,h),r.updateActiveButton(h.currentTarget)}),n.setAttribute("data-toggle",o.toggle||!1),o.toggle&&k.select(n).classed("active",!0);var c=o.icon;return typeof c=="function"?n.appendChild(c()):n.appendChild(this.createIcon(c||T.question)),n.setAttribute("data-gravity",o.gravity||"n"),n},t.createIcon=function(o){var r,n=A(o.height)?Number(o.height):o.ascent-o.descent,a="http://www.w3.org/2000/svg";if(o.path){(r=document.createElementNS(a,"svg")).setAttribute("viewBox",[0,0,o.width,n].join(" ")),r.setAttribute("class","icon");var i=document.createElementNS(a,"path");i.setAttribute("d",o.path),o.transform?i.setAttribute("transform",o.transform):o.ascent!==void 0&&i.setAttribute("transform","matrix(1 0 0 -1 0 "+o.ascent+")"),r.appendChild(i)}return o.svg&&(r=d.parseFromString(o.svg,"application/xml").childNodes[0]),r.setAttribute("height","1em"),r.setAttribute("width","1em"),r},t.updateActiveButton=function(o){var r=this.graphInfo._fullLayout,n=o!==void 0?o.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var i=a.getAttribute("data-val")||!0,c=a.getAttribute("data-attr"),h=a.getAttribute("data-toggle")==="true",f=k.select(a);if(h)c===n&&f.classed("active",!f.classed("active"));else{var b=c===null?c:l.nestedProperty(r,c).get();f.classed("active",b===i)}})},t.hasButtons=function(o){var r=this.buttons;if(!r||o.length!==r.length)return!1;for(var n=0;n<o.length;++n){if(o[n].length!==r[n].length)return!1;for(var a=0;a<o[n].length;a++)if(o[n][a].name!==r[n][a].name)return!1}return!0},t.getLogo=function(){var o=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",l._(this.graphInfo,"Produced with Plotly.js")+" (v"+x+")"),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(T.newplotlylogo)),o.appendChild(r),o},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){l.removeElement(this.container.querySelector(".modebar")),l.deleteRelatedStyleRule(this._uid)},$.exports=function(o,r){var n=o._fullLayout,a=new s({graphInfo:o,container:n._modebardiv.node(),buttons:r});return n._privateplot&&k.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),a}},37113:function($,R,e){var k=e(41940),A=e(22399),l=(0,e(44467).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});$.exports={visible:{valType:"boolean",editType:"plot"},buttons:l,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:k({editType:"plot"}),bgcolor:{valType:"color",dflt:A.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:A.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function($){$.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function($,R,e){var k=e(71828),A=e(7901),l=e(44467),T=e(85501),x=e(37113),d=e(89573);function s(t,o,r,n){var a=n.calendar;function i(h,f){return k.coerce(t,o,x.buttons,h,f)}if(i("visible")){var c=i("step");c!=="all"&&(!a||a==="gregorian"||c!=="month"&&c!=="year"?i("stepmode"):o.stepmode="backward",i("count")),i("label")}}$.exports=function(t,o,r,n,a){var i=t.rangeselector||{},c=l.newContainer(o,"rangeselector");function h(v,g){return k.coerce(i,c,x,v,g)}if(h("visible",T(i,c,{name:"buttons",handleItemDefaults:s,calendar:a}).length>0)){var f=function(v,g,y){for(var p=y.filter(function(S){return g[S].anchor===v._id}),m=0,w=0;w<p.length;w++){var u=g[p[w]].domain;u&&(m=Math.max(u[1],m))}return[v.domain[0],m+d.yPad]}(o,r,n);h("x",f[0]),h("y",f[1]),k.noneOrAll(t,o,["x","y"]),h("xanchor"),h("yanchor"),k.coerceFont(h,"font",r.font);var b=h("bgcolor");h("activecolor",A.contrast(b,d.lightAmount,d.darkAmount)),h("bordercolor"),h("borderwidth")}}},21598:function($,R,e){var k=e(39898),A=e(73972),l=e(74875),T=e(7901),x=e(91424),d=e(71828),s=d.strTranslate,t=e(63893),o=e(41675),r=e(18783),n=r.LINE_SPACING,a=r.FROM_TL,i=r.FROM_BR,c=e(89573),h=e(70565);function f(g){return g._id}function b(g,y,p){var m=d.ensureSingle(g,"rect","selector-rect",function(w){w.attr("shape-rendering","crispEdges")});m.attr({rx:c.rx,ry:c.ry}),m.call(T.stroke,y.bordercolor).call(T.fill,function(w,u){return u._isActive||u._isHovered?w.activecolor:w.bgcolor}(y,p)).style("stroke-width",y.borderwidth+"px")}function v(g,y,p,m){var w,u;d.ensureSingle(g,"text","selector-text",function(S){S.attr("text-anchor","middle")}).call(x.font,y.font).text((w=p,u=m._fullLayout._meta,w.label?u?d.templateString(w.label,u):w.label:w.step==="all"?"all":w.count+w.step.charAt(0))).call(function(S){t.convertToTspans(S,m)})}$.exports=function(g){var y=g._fullLayout._infolayer.selectAll(".rangeselector").data(function(p){for(var m=o.list(p,"x",!0),w=[],u=0;u<m.length;u++){var S=m[u];S.rangeselector&&S.rangeselector.visible&&w.push(S)}return w}(g),f);y.enter().append("g").classed("rangeselector",!0),y.exit().remove(),y.style({cursor:"pointer","pointer-events":"all"}),y.each(function(p){var m=k.select(this),w=p,u=w.rangeselector,S=m.selectAll("g.button").data(d.filterVisible(u.buttons));S.enter().append("g").classed("button",!0),S.exit().remove(),S.each(function(_){var E=k.select(this),L=h(w,_);_._isActive=function(C,P,I){if(P.step==="all")return C.autorange===!0;var U=Object.keys(I);return C.range[0]===I[U[0]]&&C.range[1]===I[U[1]]}(w,_,L),E.call(b,u,_),E.call(v,u,_,g),E.on("click",function(){g._dragged||A.call("_guiRelayout",g,L)}),E.on("mouseover",function(){_._isHovered=!0,E.call(b,u,_)}),E.on("mouseout",function(){_._isHovered=!1,E.call(b,u,_)})}),function(_,E,L,C,P){var I=0,U=0,z=L.borderwidth;E.each(function(){var K=k.select(this).select(".selector-text"),G=L.font.size*n,V=Math.max(G*t.lineCount(K),16)+3;U=Math.max(U,V)}),E.each(function(){var K=k.select(this),G=K.select(".selector-rect"),V=K.select(".selector-text"),W=V.node()&&x.bBox(V.node()).width,J=L.font.size*n,X=t.lineCount(V),ee=Math.max(W+10,c.minButtonWidth);K.attr("transform",s(z+I,z)),G.attr({x:0,y:0,width:ee,height:U}),t.positionText(V,ee/2,U/2-(X-1)*J/2+3),I+=ee+5});var H=_._fullLayout._size,F=H.l+H.w*L.x,N=H.t+H.h*(1-L.y),B="left";d.isRightAnchor(L)&&(F-=I,B="right"),d.isCenterAnchor(L)&&(F-=I/2,B="center");var j="top";d.isBottomAnchor(L)&&(N-=U,j="bottom"),d.isMiddleAnchor(L)&&(N-=U/2,j="middle"),I=Math.ceil(I),U=Math.ceil(U),F=Math.round(F),N=Math.round(N),l.autoMargin(_,C+"-range-selector",{x:L.x,y:L.y,l:I*a[B],r:I*i[B],b:U*i[j],t:U*a[j]}),P.attr("transform",s(F,N))}(g,S,u,w._name,m)})}},70565:function($,R,e){var k=e(81041),A=e(71828).titleCase;$.exports=function(l,T){var x=l._name,d={};if(T.step==="all")d[x+".autorange"]=!0;else{var s=function(t,o){var r,n=t.range,a=new Date(t.r2l(n[1])),i=o.step,c=k["utc"+A(i)],h=o.count;switch(o.stepmode){case"backward":r=t.l2r(+c.offset(a,-h));break;case"todate":var f=c.offset(a,-h);r=t.l2r(+c.ceil(f))}return[r,n[1]]}(l,T);d[x+".range[0]"]=s[0],d[x+".range[1]"]=s[1]}return d}},97218:function($,R,e){$.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(37113)}}},layoutAttributes:e(37113),handleDefaults:e(28674),draw:e(21598)}},75148:function($,R,e){var k=e(22399);$.exports={bgcolor:{valType:"color",dflt:k.background,editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},88443:function($,R,e){var k=e(41675).list,A=e(71739).getAutoRange,l=e(73251);$.exports=function(T){for(var x=k(T,"x",!0),d=0;d<x.length;d++){var s=x[d],t=s[l.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=A(T,s))}}},73251:function($){$.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function($,R,e){var k=e(71828),A=e(44467),l=e(41675),T=e(75148),x=e(47850);$.exports=function(d,s,t){var o=d[t],r=s[t];if(o.rangeslider||s._requestRangeslider[r._id]){k.isPlainObject(o.rangeslider)||(o.rangeslider={});var n,a,i=o.rangeslider,c=A.newContainer(r,"rangeslider");if(m("visible")){m("bgcolor",s.plot_bgcolor),m("bordercolor"),m("borderwidth"),m("thickness"),m("autorange",!r.isValidRange(i.range)),m("range");var h=s._subplots;if(h)for(var f=h.cartesian.filter(function(u){return u.substr(0,u.indexOf("y"))===l.name2id(t)}).map(function(u){return u.substr(u.indexOf("y"),u.length)}),b=k.simpleMap(f,l.id2name),v=0;v<b.length;v++){var g=b[v];n=i[g]||{},a=A.newContainer(c,g,"yaxis");var y,p=s[g];n.range&&p.isValidRange(n.range)&&(y="fixed"),w("rangemode",y)!=="match"&&w("range",p.range.slice())}c._input=i}}function m(u,S){return k.coerce(i,c,T,u,S)}function w(u,S){return k.coerce(n,a,x,u,S)}}},72413:function($,R,e){var k=e(39898),A=e(73972),l=e(74875),T=e(71828),x=T.strTranslate,d=e(91424),s=e(7901),t=e(92998),o=e(93612),r=e(41675),n=e(28569),a=e(6964),i=e(73251);function c(y,p,m,w){var u=T.ensureSingle(y,"rect",i.bgClassName,function(L){L.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),S=w.borderwidth%2==0?w.borderwidth:w.borderwidth-1,_=-w._offsetShift,E=d.crispRound(p,w.borderwidth);u.attr({width:w._width+S,height:w._height+S,transform:x(_,_),"stroke-width":E}).call(s.stroke,w.bordercolor).call(s.fill,w.bgcolor)}function h(y,p,m,w){var u=p._fullLayout;T.ensureSingleById(u._topdefs,"clipPath",w._clipId,function(S){S.append("rect").attr({x:0,y:0})}).select("rect").attr({width:w._width,height:w._height})}function f(y,p,m,w){var u,S=p.calcdata,_=y.selectAll("g."+i.rangePlotClassName).data(m._subplotsWith,T.identity);_.enter().append("g").attr("class",function(E){return i.rangePlotClassName+" "+E}).call(d.setClipUrl,w._clipId,p),_.order(),_.exit().remove(),_.each(function(E,L){var C=k.select(this),P=L===0,I=r.getFromId(p,E,"y"),U=I._name,z=w[U],H={data:[],layout:{xaxis:{type:m.type,domain:[0,1],range:w.range.slice(),calendar:m.calendar},width:w._width,height:w._height,margin:{t:0,b:0,l:0,r:0}},_context:p._context};m.rangebreaks&&(H.layout.xaxis.rangebreaks=m.rangebreaks),H.layout[U]={type:I.type,domain:[0,1],range:z.rangemode!=="match"?z.range.slice():I.range.slice(),calendar:I.calendar},I.rangebreaks&&(H.layout[U].rangebreaks=I.rangebreaks),l.supplyDefaults(H);var F=H._fullLayout.xaxis,N=H._fullLayout[U];F.clearCalc(),F.setScale(),N.clearCalc(),N.setScale();var B={id:E,plotgroup:C,xaxis:F,yaxis:N,isRangePlot:!0};P?u=B:(B.mainplot="xy",B.mainplotinfo=u),o.rangePlot(p,B,function(j,K){for(var G=[],V=0;V<j.length;V++){var W=j[V],J=W[0].trace;J.xaxis+J.yaxis===K&&G.push(W)}return G}(S,E))})}function b(y,p,m,w,u){T.ensureSingle(y,"rect",i.maskMinClassName,function(S){S.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(s.fill,i.maskColor),T.ensureSingle(y,"rect",i.maskMaxClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(s.fill,i.maskColor),u.rangemode!=="match"&&(T.ensureSingle(y,"rect",i.maskMinOppAxisClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).call(s.fill,i.maskOppAxisColor),T.ensureSingle(y,"rect",i.maskMaxOppAxisClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).style("border-top",i.maskOppBorder).call(s.fill,i.maskOppAxisColor))}function v(y,p,m,w){p._context.staticPlot||T.ensureSingle(y,"rect",i.slideBoxClassName,function(u){u.attr({y:0,cursor:i.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:w._height,fill:i.slideBoxFill})}function g(y,p,m,w){var u=T.ensureSingle(y,"g",i.grabberMinClassName),S=T.ensureSingle(y,"g",i.grabberMaxClassName),_={x:0,width:i.handleWidth,rx:i.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":i.handleStrokeWidth,"shape-rendering":"crispEdges"},E={y:Math.round(w._height/4),height:Math.round(w._height/2)};T.ensureSingle(u,"rect",i.handleMinClassName,function(C){C.attr(_)}).attr(E),T.ensureSingle(S,"rect",i.handleMaxClassName,function(C){C.attr(_)}).attr(E);var L={width:i.grabAreaWidth,x:0,y:0,fill:i.grabAreaFill,cursor:p._context.staticPlot?void 0:i.grabAreaCursor};T.ensureSingle(u,"rect",i.grabAreaMinClassName,function(C){C.attr(L)}).attr("height",w._height),T.ensureSingle(S,"rect",i.grabAreaMaxClassName,function(C){C.attr(L)}).attr("height",w._height)}$.exports=function(y){for(var p=y._fullLayout,m=p._rangeSliderData,w=0;w<m.length;w++){var u=m[w][i.name];u._clipId=u._id+"-"+p._uid}var S=p._infolayer.selectAll("g."+i.containerClassName).data(m,function(_){return _._name});S.exit().each(function(_){var E=_[i.name];p._topdefs.select("#"+E._clipId).remove()}).remove(),m.length!==0&&(S.enter().append("g").classed(i.containerClassName,!0).attr("pointer-events","all"),S.each(function(_){var E=k.select(this),L=_[i.name],C=p[r.id2name(_.anchor)],P=L[r.id2name(_.anchor)];if(L.range){var I,U=T.simpleMap(L.range,_.r2l),z=T.simpleMap(_.range,_.r2l);I=z[0]<z[1]?[Math.min(U[0],z[0]),Math.max(U[1],z[1])]:[Math.max(U[0],z[0]),Math.min(U[1],z[1])],L.range=L._input.range=T.simpleMap(I,_.l2r)}_.cleanRange("rangeslider.range");var H=p._size,F=_.domain;L._width=H.w*(F[1]-F[0]);var N=Math.round(H.l+H.w*F[0]),B=Math.round(H.t+H.h*(1-_._counterDomainMin)+(_.side==="bottom"?_._depth:0)+L._offsetShift+i.extraPad);E.attr("transform",x(N,B)),L._rl=T.simpleMap(L.range,_.r2l);var j=L._rl[0],K=L._rl[1],G=K-j;if(L.p2d=function(fe){return fe/L._width*G+j},L.d2p=function(fe){return(fe-j)/G*L._width},_.rangebreaks){var V=_.locateBreaks(j,K);if(V.length){var W,J,X=0;for(W=0;W<V.length;W++)X+=(J=V[W]).max-J.min;var ee=L._width/(K-j-X),re=[-ee*j];for(W=0;W<V.length;W++)J=V[W],re.push(re[re.length-1]-ee*(J.max-J.min));for(L.d2p=function(fe){for(var ye=re[0],ge=0;ge<V.length;ge++){var he=V[ge];if(fe>=he.max)ye=re[ge+1];else if(fe<he.min)break}return ye+ee*fe},W=0;W<V.length;W++)(J=V[W]).pmin=L.d2p(J.min),J.pmax=L.d2p(J.max);L.p2d=function(fe){for(var ye=re[0],ge=0;ge<V.length;ge++){var he=V[ge];if(fe>=he.pmax)ye=re[ge+1];else if(fe<he.pmin)break}return(fe-ye)/ee}}}if(P.rangemode!=="match"){var ie=C.r2l(P.range[0]),se=C.r2l(P.range[1])-ie;L.d2pOppAxis=function(fe){return(fe-ie)/se*L._height}}E.call(c,y,_,L).call(h,y,_,L).call(f,y,_,L).call(b,y,_,L,P).call(v,y,_,L).call(g,y,_,L),function(fe,ye,ge,he){if(!ye._context.staticPlot){var ve=fe.select("rect."+i.slideBoxClassName).node(),Oe=fe.select("rect."+i.grabAreaMinClassName).node(),xe=fe.select("rect."+i.grabAreaMaxClassName).node();fe.on("mousedown",ke),fe.on("touchstart",ke)}function ke(){var Me=k.event,Te=Me.target,Q=Me.clientX||Me.touches[0].clientX,oe=Q-fe.node().getBoundingClientRect().left,ce=he.d2p(ge._rl[0]),me=he.d2p(ge._rl[1]),Ae=n.coverSlip();function Ie(Re){var le,de,_e,Fe=+(Re.clientX||Re.touches[0].clientX)-Q;switch(Te){case ve:_e="ew-resize",le=ce+Fe,de=me+Fe;break;case Oe:_e="col-resize",le=ce+Fe,de=me;break;case xe:_e="col-resize",le=ce,de=me+Fe;break;default:_e="ew-resize",le=oe,de=oe+Fe}if(de<le){var Ve=de;de=le,le=Ve}he._pixelMin=le,he._pixelMax=de,a(k.select(Ae),_e),function(He,nt,tt,ot){function dt(wt){return tt.l2r(T.constrain(wt,ot._rl[0],ot._rl[1]))}var kt=dt(ot.p2d(ot._pixelMin)),mt=dt(ot.p2d(ot._pixelMax));window.requestAnimationFrame(function(){A.call("_guiRelayout",nt,tt._name+".range",[kt,mt])})}(0,ye,ge,he)}function Ce(){Ae.removeEventListener("mousemove",Ie),Ae.removeEventListener("mouseup",Ce),this.removeEventListener("touchmove",Ie),this.removeEventListener("touchend",Ce),T.removeElement(Ae)}this.addEventListener("touchmove",Ie),this.addEventListener("touchend",Ce),Ae.addEventListener("mousemove",Ie),Ae.addEventListener("mouseup",Ce)}}(E,y,_,L),function(fe,ye,ge,he,ve,Oe){var xe=i.handleWidth/2;function ke(Re){return T.constrain(Re,0,he._width)}function Me(Re){return T.constrain(Re,0,he._height)}function Te(Re){return T.constrain(Re,-xe,he._width+xe)}var Q=ke(he.d2p(ge._rl[0])),oe=ke(he.d2p(ge._rl[1]));if(fe.select("rect."+i.slideBoxClassName).attr("x",Q).attr("width",oe-Q),fe.select("rect."+i.maskMinClassName).attr("width",Q),fe.select("rect."+i.maskMaxClassName).attr("x",oe).attr("width",he._width-oe),Oe.rangemode!=="match"){var ce=he._height-Me(he.d2pOppAxis(ve._rl[1])),me=he._height-Me(he.d2pOppAxis(ve._rl[0]));fe.select("rect."+i.maskMinOppAxisClassName).attr("x",Q).attr("height",ce).attr("width",oe-Q),fe.select("rect."+i.maskMaxOppAxisClassName).attr("x",Q).attr("y",me).attr("height",he._height-me).attr("width",oe-Q),fe.select("rect."+i.slideBoxClassName).attr("y",ce).attr("height",me-ce)}var Ae=.5,Ie=Math.round(Te(Q-xe))-Ae,Ce=Math.round(Te(oe-xe))+Ae;fe.select("g."+i.grabberMinClassName).attr("transform",x(Ie,Ae)),fe.select("g."+i.grabberMaxClassName).attr("transform",x(Ce,Ae))}(E,0,_,L,C,P),_.side==="bottom"&&t.draw(y,_._id+"title",{propContainer:_,propName:_._name+".title",placeholder:p._dfltTitle.x,attributes:{x:_._offset+_._length/2,y:B+L._height+L._offsetShift+10+1.5*_.title.font.size,"text-anchor":"middle"}})}))}},549:function($,R,e){var k=e(41675),A=e(63893),l=e(73251),T=e(18783).LINE_SPACING,x=l.name;function d(s){var t=s&&s[x];return t&&t.visible}R.isVisible=d,R.makeData=function(s){var t=k.list({_fullLayout:s},"x",!0),o=s.margin,r=[];if(!s._has("gl2d"))for(var n=0;n<t.length;n++){var a=t[n];if(d(a)){r.push(a);var i=a[x];i._id=x+a._id,i._height=(s.height-o.b-o.t)*i.thickness,i._offsetShift=Math.floor(i.borderwidth/2)}}s._rangeSliderData=r},R.autoMarginOpts=function(s,t){var o=s._fullLayout,r=t[x],n=t._id.charAt(0),a=0,i=0;return t.side==="bottom"&&(a=t._depth,t.title.text!==o._dfltTitle[n]&&(i=1.5*t.title.font.size+10+r._offsetShift,i+=(t.title.text.match(A.BR_TAG_ALL)||[]).length*t.title.font.size*T)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:r._height+a+Math.max(o.margin.b,i),pad:l.extraPad+2*r._offsetShift}}},13137:function($,R,e){var k=e(71828),A=e(75148),l=e(47850),T=e(549);$.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:k.extendFlat({},A,{yaxis:l})}}},layoutAttributes:e(75148),handleDefaults:e(26377),calcAutorange:e(88443),draw:e(72413),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},47850:function($){$.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function($,R,e){var k=e(50215),A=e(82196).line,l=e(79952).P,T=e(1426).extendFlat,x=e(30962).overrideAll,d=e(44467).templatedArray;e(24695),$.exports=x(d("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},k.xref,{}),yref:T({},k.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:A.color,width:T({},A.width,{min:1,dflt:1}),dash:T({},l,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function($){$.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function($,R,e){var k=e(71828),A=e(89298),l=e(85501),T=e(8389),x=e(30477);function d(s,t,o){function r(E,L){return k.coerce(s,t,T,E,L)}var n=r("path"),a=r("type",n?"path":"rect")!=="path";a&&delete t.path,r("opacity"),r("line.color"),r("line.width"),r("line.dash");for(var i=["x","y"],c=0;c<2;c++){var h,f,b,v=i[c],g={_fullLayout:o},y=A.coerceRef(s,t,g,v);if((h=A.getFromId(g,y))._selectionIndices.push(t._index),b=x.rangeToShapePosition(h),f=x.shapePositionToRange(h),a){var p=v+"0",m=v+"1",w=s[p],u=s[m];s[p]=f(s[p],!0),s[m]=f(s[m],!0),A.coercePosition(t,g,r,y,p),A.coercePosition(t,g,r,y,m);var S=t[p],_=t[m];S!==void 0&&_!==void 0&&(t[p]=b(S),t[m]=b(_),s[p]=w,s[m]=u)}}a&&k.noneOrAll(s,t,["x0","x1","y0","y1"])}$.exports=function(s,t){l(s,t,{name:"selections",handleItemDefaults:d});for(var o=t.selections,r=0;r<o.length;r++){var n=o[r];n&&n.path===void 0&&(n.x0!==void 0&&n.x1!==void 0&&n.y0!==void 0&&n.y1!==void 0||(t.selections[r]=null))}}},32485:function($,R,e){var k=e(60165).readPaths,A=e(42359),l=e(51873).clearOutlineControllers,T=e(7901),x=e(91424),d=e(44467).arrayEditor,s=e(30477),t=s.getPathString;function o(c){var h=c._fullLayout;for(var f in l(c),h._selectionLayer.selectAll("path").remove(),h._plots){var b=h._plots[f].selectionLayer;b&&b.selectAll("path").remove()}for(var v=0;v<h.selections.length;v++)n(c,v)}function r(c){return c._context.editSelection}function n(c,h){c._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+h+'"]').remove();var f=s.makeSelectionsOptionsAndPlotinfo(c,h),b=f.options,v=f.plotinfo;b._input&&function(g){var y=t(c,b),p={"data-index":h,"fill-rule":"evenodd",d:y},m=b.opacity,w="rgba(0,0,0,0)",u=b.line.color||T.contrast(c._fullLayout.plot_bgcolor),S=b.line.width,_=b.line.dash;S||(S=5,_="solid");var E=r(c)&&c._fullLayout._activeSelectionIndex===h;E&&(w=c._fullLayout.activeselection.fillcolor,m=c._fullLayout.activeselection.opacity);for(var L=[],C=1;C>=0;C--){var P=g.append("path").attr(p).style("opacity",C?.1:m).call(T.stroke,u).call(T.fill,w).call(x.dashLine,C?"solid":_,C?4+S:S);if(a(P,c,b),E){var I=d(c.layout,"selections",b);P.style({cursor:"move"});var U={element:P.node(),plotinfo:v,gd:c,editHelpers:I,isActiveSelection:!0},z=k(y,c);A(z,P,U)}else P.style("pointer-events",C?"all":"none");L[C]=P}var H=L[0];L[1].node().addEventListener("click",function(){return function(F,N){if(r(F)){var B=+N.node().getAttribute("data-index");if(B>=0){if(B===F._fullLayout._activeSelectionIndex)return void i(F);F._fullLayout._activeSelectionIndex=B,F._fullLayout._deactivateSelection=i,o(F)}}}(c,H)})}(c._fullLayout._selectionLayer)}function a(c,h,f){var b=f.xref+f.yref;x.setClipUrl(c,"clip"+h._fullLayout._uid+b,h)}function i(c){r(c)&&c._fullLayout._activeSelectionIndex>=0&&(l(c),delete c._fullLayout._activeSelectionIndex,o(c))}$.exports={draw:o,drawOne:n,activateLastSelection:function(c){if(r(c)){var h=c._fullLayout.selections.length-1;c._fullLayout._activeSelectionIndex=h,c._fullLayout._deactivateSelection=i,o(c)}}}},53777:function($,R,e){var k=e(79952).P,A=e(1426).extendFlat;$.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:A({},k,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function($){$.exports=function(R,e,k){k("newselection.mode"),k("newselection.line.width")&&(k("newselection.line.color"),k("newselection.line.dash")),k("activeselection.fillcolor"),k("activeselection.opacity")}},35855:function($,R,e){var k=e(64505).selectMode,A=e(51873).clearOutline,l=e(60165),T=l.readPaths,x=l.writePaths,d=l.fixDatesForPaths;$.exports=function(s,t){if(s.length){var o=s[0][0];if(o){var r=o.getAttribute("d"),n=t.gd,a=n._fullLayout.newselection,i=t.plotinfo,c=i.xaxis,h=i.yaxis,f=t.isActiveSelection,b=t.dragmode,v=(n.layout||{}).selections||[];if(!k(b)&&f!==void 0){var g=n._fullLayout._activeSelectionIndex;if(g<v.length)switch(n._fullLayout.selections[g].type){case"rect":b="select";break;case"path":b="lasso"}}var y,p=T(r,n,i,f),m={xref:c._id,yref:h._id,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};p.length===1&&(y=p[0]),y&&y.length===5&&b==="select"?(m.type="rect",m.x0=y[0][1],m.y0=y[0][2],m.x1=y[2][1],m.y1=y[2][2]):(m.type="path",c&&h&&d(p,c,h),m.path=x(p),y=null),A(n);for(var w=t.editHelpers,u=(w||{}).modifyItem,S=[],_=0;_<v.length;_++){var E=n._fullLayout.selections[_];if(E){if(S[_]=E._input,f!==void 0&&_===n._fullLayout._activeSelectionIndex){var L=m;switch(E.type){case"rect":u("x0",L.x0),u("x1",L.x1),u("y0",L.y0),u("y1",L.y1);break;case"path":u("path",L.path)}}}else S[_]=E}return f===void 0?(S.push(m),S):w?w.getUpdateObj():{}}}}},75549:function($,R,e){var k=e(71828).strTranslate;function A(l,T){switch(l.type){case"log":return l.p2d(T);case"date":return l.p2r(T,0,l.calendar);default:return l.p2r(T)}}$.exports={p2r:A,r2p:function(l,T){switch(l.type){case"log":return l.d2p(T);case"date":return l.r2p(T,0,l.calendar);default:return l.r2p(T)}},axValue:function(l){var T=l._id.charAt(0)==="y"?1:0;return function(x){return A(l,x[T])}},getTransform:function(l){return k(l.xaxis._offset,l.yaxis._offset)}}},47322:function($,R,e){var k=e(32485),A=e(3937);$.exports={moduleType:"component",name:"selections",layoutAttributes:e(8389),supplyLayoutDefaults:e(59402),supplyDrawNewSelectionDefaults:e(90849),includeBasePlot:e(76325)("selections"),draw:k.draw,drawOne:k.drawOne,reselect:A.reselect,prepSelect:A.prepSelect,clearOutline:A.clearOutline,clearSelectionsCache:A.clearSelectionsCache,selectOnClick:A.selectOnClick}},3937:function($,R,e){var k=e(52142),A=e(38258),l=e(73972),T=e(91424).dashStyle,x=e(7901),d=e(30211),s=e(23469).makeEventData,t=e(64505),o=t.freeMode,r=t.rectMode,n=t.drawMode,a=t.openMode,i=t.selectMode,c=e(30477),h=e(21459),f=e(42359),b=e(51873).clearOutline,v=e(60165),g=v.handleEllipse,y=v.readPaths,p=e(90551),m=e(35855),w=e(32485).activateLastSelection,u=e(71828),S=u.sorterAsc,_=e(61082),E=e(79990),L=e(41675).getFromId,C=e(33306),P=e(61549).redrawReglTraces,I=e(34122),U=I.MINSELECT,z=_.filter,H=_.tester,F=e(75549),N=F.p2r,B=F.axValue,j=F.getTransform;function K(Ce){return Ce.subplot!==void 0}function G(Ce,Re,le,de,_e,Fe,Ve){var He,nt,tt,ot,dt,kt,mt,wt,Lt,Ct=Re._hoverdata,It=Re._fullLayout.clickmode.indexOf("event")>-1,Ut=[];if(function(Ye){return Ye&&Array.isArray(Ye)&&Ye[0].hoverOnBox!==!0}(Ct)){X(Ce,Re,Fe);var Rt=function(Ye,rt){var Se,ze,Ke=Ye[0],st=-1,ct=[];for(ze=0;ze<rt.length;ze++)if(Se=rt[ze],Ke.fullData._expandedIndex===Se.cd[0].trace._expandedIndex){if(Ke.hoverOnBox===!0)break;Ke.pointNumber!==void 0?st=Ke.pointNumber:Ke.binNumber!==void 0&&(st=Ke.binNumber,ct=Ke.pointNumbers);break}return{pointNumber:st,pointNumbers:ct,searchInfo:Se}}(Ct,He=ie(Re,le,de,_e));if(Rt.pointNumbers.length>0?function(Ye,rt){var Se,ze,Ke,st=[];for(Ke=0;Ke<Ye.length;Ke++)(Se=Ye[Ke]).cd[0].trace.selectedpoints&&Se.cd[0].trace.selectedpoints.length>0&&st.push(Se);if(st.length===1&&st[0]===rt.searchInfo&&(ze=rt.searchInfo.cd[0].trace).selectedpoints.length===rt.pointNumbers.length){for(Ke=0;Ke<rt.pointNumbers.length;Ke++)if(ze.selectedpoints.indexOf(rt.pointNumbers[Ke])<0)return!1;return!0}return!1}(He,Rt):function(Ye){var rt,Se,ze=0;for(Se=0;Se<Ye.length;Se++)if((rt=Ye[Se].cd[0].trace).selectedpoints&&(rt.selectedpoints.length>1||(ze+=rt.selectedpoints.length)>1))return!1;return ze===1}(He)&&(kt=fe(Rt))){for(Ve&&Ve.remove(),Lt=0;Lt<He.length;Lt++)(nt=He[Lt])._module.selectPoints(nt,!1);ye(Re,He),ee(Fe),It&&Ie(Re)}else{for(mt=Ce.shiftKey&&(kt!==void 0?kt:fe(Rt)),tt=function(Ye,rt,Se){return{pointNumber:Ye,searchInfo:rt,subtract:!!Se}}(Rt.pointNumber,Rt.searchInfo,mt),ot=J(Fe.selectionDefs.concat([tt])),Lt=0;Lt<He.length;Lt++)if(dt=he(He[Lt]._module.selectPoints(He[Lt],ot),He[Lt]),Ut.length)for(var Ge=0;Ge<dt.length;Ge++)Ut.push(dt[Ge]);else Ut=dt;if(ye(Re,He,wt={points:Ut}),tt&&Fe&&Fe.selectionDefs.push(tt),Ve){var We=Fe.mergedPolygons,Be=a(Fe.dragmode);f(ve(We,Be),Ve,Fe)}It&&Ae(Re,wt)}}}function V(Ce){return"pointNumber"in Ce&&"searchInfo"in Ce}function W(Ce){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Re,le,de,_e){var Fe=Ce.searchInfo.cd[0].trace._expandedIndex;return _e.cd[0].trace._expandedIndex===Fe&&de===Ce.pointNumber},isRect:!1,degenerate:!1,subtract:!!Ce.subtract}}function J(Ce){if(Ce.length){for(var Re=[],le=V(Ce[0])?0:Ce[0][0][0],de=le,_e=V(Ce[0])?0:Ce[0][0][1],Fe=_e,Ve=0;Ve<Ce.length;Ve++)if(V(Ce[Ve]))Re.push(W(Ce[Ve]));else{var He=H(Ce[Ve]);He.subtract=!!Ce[Ve].subtract,Re.push(He),le=Math.min(le,He.xmin),de=Math.max(de,He.xmax),_e=Math.min(_e,He.ymin),Fe=Math.max(Fe,He.ymax)}return{xmin:le,xmax:de,ymin:_e,ymax:Fe,pts:[],contains:function(nt,tt,ot,dt){for(var kt=!1,mt=0;mt<Re.length;mt++)Re[mt].contains(nt,tt,ot,dt)&&(kt=!Re[mt].subtract);return kt},isRect:!1,degenerate:!1}}}function X(Ce,Re,le){var de=Re._fullLayout,_e=le.plotinfo,Fe=le.dragmode,Ve=de._lastSelectedSubplot&&de._lastSelectedSubplot===_e.id,He=(Ce.shiftKey||Ce.altKey)&&!(n(Fe)&&a(Fe));Ve&&He&&_e.selection&&_e.selection.selectionDefs&&!le.selectionDefs?(le.selectionDefs=_e.selection.selectionDefs,le.mergedPolygons=_e.selection.mergedPolygons):He&&_e.selection||ee(le),Ve||(b(Re),de._lastSelectedSubplot=_e.id)}function ee(Ce,Re){var le=Ce.dragmode,de=Ce.plotinfo,_e=Ce.gd;(function(dt){return dt._fullLayout._activeShapeIndex>=0})(_e)&&_e._fullLayout._deactivateShape(_e),function(dt){return dt._fullLayout._activeSelectionIndex>=0}(_e)&&_e._fullLayout._deactivateSelection(_e);var Fe=_e._fullLayout._zoomlayer,Ve=n(le),He=i(le);if(Ve||He){var nt,tt,ot=Fe.selectAll(".select-outline-"+de.id);ot&&_e._fullLayout._outlining&&(Ve&&(nt=p(ot,Ce)),nt&&l.call("_guiRelayout",_e,{shapes:nt}),He&&!K(Ce)&&(tt=m(ot,Ce)),tt&&(_e._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",_e,{selections:tt}).then(function(){Re&&w(_e)})),_e._fullLayout._outlining=!1)}de.selection={},de.selection.selectionDefs=Ce.selectionDefs=[],de.selection.mergedPolygons=Ce.mergedPolygons=[]}function re(Ce){return Ce._id}function ie(Ce,Re,le,de){if(!Ce.calcdata)return[];var _e,Fe,Ve,He=[],nt=Re.map(re),tt=le.map(re);for(Ve=0;Ve<Ce.calcdata.length;Ve++)if((Fe=(_e=Ce.calcdata[Ve])[0].trace).visible===!0&&Fe._module&&Fe._module.selectPoints)if(!K({subplot:de})||Fe.subplot!==de&&Fe.geo!==de)if(Fe.type==="splom"){if(Fe._xaxes[nt[0]]&&Fe._yaxes[tt[0]]){var ot=se(Fe._module,_e,Re[0],le[0]);ot.scene=Ce._fullLayout._splomScenes[Fe.uid],He.push(ot)}}else if(Fe.type==="sankey"){var dt=se(Fe._module,_e,Re[0],le[0]);He.push(dt)}else{if(nt.indexOf(Fe.xaxis)===-1||tt.indexOf(Fe.yaxis)===-1)continue;He.push(se(Fe._module,_e,L(Ce,Fe.xaxis),L(Ce,Fe.yaxis)))}else He.push(se(Fe._module,_e,Re[0],le[0]));return He}function se(Ce,Re,le,de){return{_module:Ce,cd:Re,xaxis:le,yaxis:de}}function fe(Ce){var Re=Ce.searchInfo.cd[0].trace,le=Ce.pointNumber,de=Ce.pointNumbers,_e=de.length>0?de[0]:le;return!!Re.selectedpoints&&Re.selectedpoints.indexOf(_e)>-1}function ye(Ce,Re,le){var de,_e;for(de=0;de<Re.length;de++){var Fe=Re[de].cd[0].trace._fullInput,Ve=Ce._fullLayout._tracePreGUI[Fe.uid]||{};Ve.selectedpoints===void 0&&(Ve.selectedpoints=Fe._input.selectedpoints||null)}if(le){var He=le.points||[];for(de=0;de<Re.length;de++)(_e=Re[de].cd[0].trace)._input.selectedpoints=_e._fullInput.selectedpoints=[],_e._fullInput!==_e&&(_e.selectedpoints=[]);for(var nt=0;nt<He.length;nt++){var tt=He[nt],ot=tt.data,dt=tt.fullData,kt=tt.pointIndex,mt=tt.pointIndices;mt?([].push.apply(ot.selectedpoints,mt),_e._fullInput!==_e&&[].push.apply(dt.selectedpoints,mt)):(ot.selectedpoints.push(kt),_e._fullInput!==_e&&dt.selectedpoints.push(kt))}}else for(de=0;de<Re.length;de++)delete(_e=Re[de].cd[0].trace).selectedpoints,delete _e._input.selectedpoints,_e._fullInput!==_e&&delete _e._fullInput.selectedpoints;(function(wt,Lt){for(var Ct=!1,It=0;It<Lt.length;It++){var Ut=Lt[It],Rt=Ut.cd;l.traceIs(Rt[0].trace,"regl")&&(Ct=!0);var Ge=Ut._module,We=Ge.styleOnSelect||Ge.style;We&&(We(wt,Rt,Rt[0].node3),Rt[0].nodeRangePlot3&&We(wt,Rt,Rt[0].nodeRangePlot3))}Ct&&(C(wt),P(wt))})(Ce,Re)}function ge(Ce,Re,le){for(var de=(le?k.difference:k.union)({regions:Ce},{regions:[Re]}).regions.reverse(),_e=0;_e<de.length;_e++){var Fe=de[_e];Fe.subtract=Q(Fe,de.slice(0,_e))}return de}function he(Ce,Re){if(Array.isArray(Ce))for(var le=Re.cd,de=Re.cd[0].trace,_e=0;_e<Ce.length;_e++)Ce[_e]=s(Ce[_e],de,le);return Ce}function ve(Ce,Re){for(var le=[],de=0;de<Ce.length;de++){le[de]=[];for(var _e=0;_e<Ce[de].length;_e++){le[de][_e]=[],le[de][_e][0]=_e?"L":"M";for(var Fe=0;Fe<Ce[de][_e].length;Fe++)le[de][_e].push(Ce[de][_e][Fe])}Re||le[de].push(["Z",le[de][0][1],le[de][0][2]])}return le}function Oe(Ce,Re){for(var le,de,_e=[],Fe=[],Ve=0;Ve<Re.length;Ve++){var He=Re[Ve];de=He._module.selectPoints(He,Ce),Fe.push(de),le=he(de,He),_e=_e.concat(le)}return _e}function xe(Ce,Re,le,de,_e){var Fe,Ve,He,nt=!!de;_e&&(Fe=_e.plotinfo,Ve=_e.xaxes[0]._id,He=_e.yaxes[0]._id);var tt=[],ot=[],dt=Te(Ce),kt=Ce._fullLayout;if(Fe){var mt=kt._zoomlayer,wt=kt.dragmode,Lt=n(wt),Ct=i(wt);if(Lt||Ct){var It=L(Ce,Ve,"x"),Ut=L(Ce,He,"y");if(It&&Ut){var Rt=mt.selectAll(".select-outline-"+Fe.id);if(Rt&&Ce._fullLayout._outlining&&Rt.length){for(var Ge=Rt[0][0].getAttribute("d"),We=y(Ge,Ce,Fe),Be=[],Ye=0;Ye<We.length;Ye++){for(var rt=We[Ye],Se=[],ze=0;ze<rt.length;ze++)Se.push([oe(It,rt[ze][1]),oe(Ut,rt[ze][2])]);Se.xref=Ve,Se.yref=He,Se.subtract=Q(Se,Be),Be.push(Se)}dt=dt.concat(Be)}}}}var Ke=Ve&&He?[Ve+He]:kt._subplots.cartesian;(function(Rn){var Nn=Rn.calcdata;if(Nn)for(var Fn=0;Fn<Nn.length;Fn++){var rr=Nn[Fn][0].trace,$n=Rn._fullLayout._splomScenes;if($n){var mr=$n[rr.uid];mr&&(mr.selectBatch=[])}}})(Ce);for(var st={},ct=0;ct<Ke.length;ct++){var Tt=Ke[ct],Et=Tt.indexOf("y"),At=Tt.slice(0,Et),ht=Tt.slice(Et),pt=Ve&&He?le:void 0;if(pt=Me(dt,At,ht,pt)){var gt=de;if(!nt){var Pt=L(Ce,At,"x"),Ot=L(Ce,ht,"y");gt=ie(Ce,[Pt],[Ot],Tt);for(var Ht=0;Ht<gt.length;Ht++){var jt=gt[Ht],Nt=jt.cd[0],Gt=Nt.trace;if(jt._module.name==="scattergl"&&!Nt.t.xpx){var un=Gt.x,pn=Gt.y,Kt=Gt._length;Nt.t.xpx=[],Nt.t.ypx=[];for(var wn=0;wn<Kt;wn++)Nt.t.xpx[wn]=Pt.c2p(un[wn]),Nt.t.ypx[wn]=Ot.c2p(pn[wn])}jt._module.name==="splom"&&(st[Gt.uid]||(st[Gt.uid]=!0))}}var Bn=Oe(pt,gt);tt=tt.concat(Bn),ot=ot.concat(gt)}}var vn={points:tt};ye(Ce,ot,vn);var cn=kt.clickmode.indexOf("event")>-1&&Re;if(!Fe&&Re){var dn=Te(Ce,!0);if(dn.length){var sn=dn[0].xref,hn=dn[0].yref;if(sn&&hn){var En=ce(dn);me([L(Ce,sn,"x"),L(Ce,hn,"y")])(vn,En)}}Ce._fullLayout._noEmitSelectedAtStart?Ce._fullLayout._noEmitSelectedAtStart=!1:cn&&Ae(Ce,vn),kt._reselect=!1}if(!Fe&&kt._deselect){var Mn=kt._deselect;(function(Rn,Nn,Fn){for(var rr=0;rr<Fn.length;rr++){var $n=Fn[rr];if($n.xaxis&&$n.xaxis._id===Rn&&$n.yaxis&&$n.yaxis._id===Nn)return!0}return!1})(Ve=Mn.xref,He=Mn.yref,ot)||ke(Ce,Ve,He,de),cn&&(vn.points.length?Ae(Ce,vn):Ie(Ce)),kt._deselect=!1}return{eventData:vn,selectionTesters:le}}function ke(Ce,Re,le,de){de=ie(Ce,[L(Ce,Re,"x")],[L(Ce,le,"y")],Re+le);for(var _e=0;_e<de.length;_e++){var Fe=de[_e];Fe._module.selectPoints(Fe,!1)}ye(Ce,de)}function Me(Ce,Re,le,de){for(var _e,Fe=0;Fe<Ce.length;Fe++){var Ve=Ce[Fe];Re===Ve.xref&&le===Ve.yref&&(_e?de=J(_e=ge(_e,Ve,!!Ve.subtract)):(_e=[Ve],de=H(Ve)))}return de}function Te(Ce,Re){for(var le=[],de=Ce._fullLayout,_e=de.selections,Fe=_e.length,Ve=0;Ve<Fe;Ve++)if(!Re||Ve===de._activeSelectionIndex){var He=_e[Ve];if(He){var nt,tt,ot,dt,kt,mt=He.xref,wt=He.yref,Lt=L(Ce,mt,"x"),Ct=L(Ce,wt,"y");if(He.type==="rect"){kt=[];var It=oe(Lt,He.x0),Ut=oe(Lt,He.x1),Rt=oe(Ct,He.y0),Ge=oe(Ct,He.y1);kt=[[It,Rt],[It,Ge],[Ut,Ge],[Ut,Rt]],nt=Math.min(It,Ut),tt=Math.max(It,Ut),ot=Math.min(Rt,Ge),dt=Math.max(Rt,Ge),kt.xmin=nt,kt.xmax=tt,kt.ymin=ot,kt.ymax=dt,kt.xref=mt,kt.yref=wt,kt.subtract=!1,kt.isRect=!0,le.push(kt)}else if(He.type==="path")for(var We=He.path.split("Z"),Be=[],Ye=0;Ye<We.length;Ye++){var rt=We[Ye];if(rt){rt+="Z";var Se=c.extractPathCoords(rt,h.paramIsX,"raw"),ze=c.extractPathCoords(rt,h.paramIsY,"raw");nt=1/0,tt=-1/0,ot=1/0,dt=-1/0,kt=[];for(var Ke=0;Ke<Se.length;Ke++){var st=oe(Lt,Se[Ke]),ct=oe(Ct,ze[Ke]);kt.push([st,ct]),nt=Math.min(st,nt),tt=Math.max(st,tt),ot=Math.min(ct,ot),dt=Math.max(ct,dt)}kt.xmin=nt,kt.xmax=tt,kt.ymin=ot,kt.ymax=dt,kt.xref=mt,kt.yref=wt,kt.subtract=Q(kt,Be),Be.push(kt),le.push(kt)}}}}return le}function Q(Ce,Re){for(var le=!1,de=0;de<Re.length;de++)for(var _e=Re[de],Fe=0;Fe<Ce.length;Fe++)if(A(Ce[Fe],_e)){le=!le;break}return le}function oe(Ce,Re){return Ce.type==="date"&&(Re=Re.replace("_"," ")),Ce.type==="log"?Ce.c2p(Re):Ce.r2p(Re,null,Ce.calendar)}function ce(Ce){for(var Re=Ce.length,le=[],de=0;de<Re;de++){var _e=Ce[de];le=(le=le.concat(_e)).concat([_e[0]])}return(Fe=le).isRect=Fe.length===5&&Fe[0][0]===Fe[4][0]&&Fe[0][1]===Fe[4][1]&&Fe[0][0]===Fe[1][0]&&Fe[2][0]===Fe[3][0]&&Fe[0][1]===Fe[3][1]&&Fe[1][1]===Fe[2][1]||Fe[0][1]===Fe[1][1]&&Fe[2][1]===Fe[3][1]&&Fe[0][0]===Fe[3][0]&&Fe[1][0]===Fe[2][0],Fe.isRect&&(Fe.xmin=Math.min(Fe[0][0],Fe[2][0]),Fe.xmax=Math.max(Fe[0][0],Fe[2][0]),Fe.ymin=Math.min(Fe[0][1],Fe[2][1]),Fe.ymax=Math.max(Fe[0][1],Fe[2][1])),Fe;var Fe}function me(Ce){return function(Re,le){for(var de,_e,Fe=0;Fe<Ce.length;Fe++){var Ve=Ce[Fe],He=Ve._id,nt=He.charAt(0);if(le.isRect){de||(de={});var tt=le[nt+"min"],ot=le[nt+"max"];tt!==void 0&&ot!==void 0&&(de[He]=[N(Ve,tt),N(Ve,ot)].sort(S))}else _e||(_e={}),_e[He]=le.map(B(Ve))}de&&(Re.range=de),_e&&(Re.lassoPoints=_e)}}function Ae(Ce,Re){Re&&(Re.selections=(Ce.layout||{}).selections||[]),Ce.emit("plotly_selected",Re)}function Ie(Ce){Ce.emit("plotly_deselect",null)}$.exports={reselect:xe,prepSelect:function(Ce,Re,le,de,_e){var Fe=!K(de),Ve=o(_e),He=r(_e),nt=a(_e),tt=n(_e),ot=i(_e),dt=_e==="drawcircle",kt=_e==="drawline"||dt,mt=de.gd,wt=mt._fullLayout,Lt=ot&&wt.newselection.mode==="immediate"&&Fe,Ct=wt._zoomlayer,It=de.element.getBoundingClientRect(),Ut=de.plotinfo,Rt=j(Ut),Ge=Re-It.left,We=le-It.top;wt._calcInverseTransform(mt);var Be=u.apply3DTransform(wt._invTransform)(Ge,We);Ge=Be[0],We=Be[1];var Ye,rt,Se,ze,Ke,st,ct,Tt=wt._invScaleX,Et=wt._invScaleY,At=Ge,ht=We,pt="M"+Ge+","+We,gt=de.xaxes[0],Pt=de.yaxes[0],Ot=gt._length,Ht=Pt._length,jt=Ce.altKey&&!(n(_e)&&nt);X(Ce,mt,de),Ve&&(Ye=z([[Ge,We]],I.BENDPX));var Nt=Ct.selectAll("path.select-outline-"+Ut.id).data([1]),Gt=tt?wt.newshape:wt.newselection,un=tt&&!nt?Gt.fillcolor:"rgba(0,0,0,0)",pn=Gt.line.color||(Fe?x.contrast(mt._fullLayout.plot_bgcolor):"#7f7f7f");Nt.enter().append("path").attr("class","select-outline select-outline-"+Ut.id).style({opacity:tt?Gt.opacity/2:1,"stroke-dasharray":T(Gt.line.dash,Gt.line.width),"stroke-width":Gt.line.width+"px","shape-rendering":"crispEdges"}).call(x.stroke,pn).call(x.fill,un).attr("fill-rule","evenodd").classed("cursor-move",!!tt).attr("transform",Rt).attr("d",pt+"Z");var Kt=Ct.append("path").attr("class","zoombox-corners").style({fill:x.background,stroke:x.defaultLine,"stroke-width":1}).attr("transform",Rt).attr("d","M0,0Z"),wn=wt._uid+I.SELECTID,Bn=[],vn=ie(mt,de.xaxes,de.yaxes,de.subplot);Lt&&!Ce.shiftKey&&(de._clearSubplotSelections=function(){if(Fe){var dn=gt._id,sn=Pt._id;ke(mt,dn,sn,vn);for(var hn=(mt.layout||{}).selections||[],En=[],Mn=!1,Rn=0;Rn<hn.length;Rn++){var Nn=wt.selections[Rn];Nn.xref!==dn||Nn.yref!==sn?En.push(hn[Rn]):Mn=!0}Mn&&(mt._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",mt,{selections:En}))}});var cn=function(dn){return dn.plotinfo.fillRangeItems||me(dn.xaxes.concat(dn.yaxes))}(de);de.moveFn=function(dn,sn){de._clearSubplotSelections&&(de._clearSubplotSelections(),de._clearSubplotSelections=void 0),At=Math.max(0,Math.min(Ot,Tt*dn+Ge)),ht=Math.max(0,Math.min(Ht,Et*sn+We));var hn=Math.abs(At-Ge),En=Math.abs(ht-We);if(He){var Mn,Rn,Nn;if(ot){var Fn=wt.selectdirection;switch(Mn=Fn==="any"?En<Math.min(.6*hn,U)?"h":hn<Math.min(.6*En,U)?"v":"d":Fn){case"h":Rn=dt?Ht/2:0,Nn=Ht;break;case"v":Rn=dt?Ot/2:0,Nn=Ot}}if(tt)switch(wt.newshape.drawdirection){case"vertical":Mn="h",Rn=dt?Ht/2:0,Nn=Ht;break;case"horizontal":Mn="v",Rn=dt?Ot/2:0,Nn=Ot;break;case"ortho":hn<En?(Mn="h",Rn=We,Nn=ht):(Mn="v",Rn=Ge,Nn=At);break;default:Mn="d"}Mn==="h"?((ze=kt?g(dt,[At,Rn],[At,Nn]):[[Ge,Rn],[Ge,Nn],[At,Nn],[At,Rn]]).xmin=kt?At:Math.min(Ge,At),ze.xmax=kt?At:Math.max(Ge,At),ze.ymin=Math.min(Rn,Nn),ze.ymax=Math.max(Rn,Nn),Kt.attr("d","M"+ze.xmin+","+(We-U)+"h-4v"+2*U+"h4ZM"+(ze.xmax-1)+","+(We-U)+"h4v"+2*U+"h-4Z")):Mn==="v"?((ze=kt?g(dt,[Rn,ht],[Nn,ht]):[[Rn,We],[Rn,ht],[Nn,ht],[Nn,We]]).xmin=Math.min(Rn,Nn),ze.xmax=Math.max(Rn,Nn),ze.ymin=kt?ht:Math.min(We,ht),ze.ymax=kt?ht:Math.max(We,ht),Kt.attr("d","M"+(Ge-U)+","+ze.ymin+"v-4h"+2*U+"v4ZM"+(Ge-U)+","+(ze.ymax-1)+"v4h"+2*U+"v-4Z")):Mn==="d"&&((ze=kt?g(dt,[Ge,We],[At,ht]):[[Ge,We],[Ge,ht],[At,ht],[At,We]]).xmin=Math.min(Ge,At),ze.xmax=Math.max(Ge,At),ze.ymin=Math.min(We,ht),ze.ymax=Math.max(We,ht),Kt.attr("d","M0,0Z"))}else Ve&&(Ye.addPt([At,ht]),ze=Ye.filtered);if(de.selectionDefs&&de.selectionDefs.length?(Se=ge(de.mergedPolygons,ze,jt),ze.subtract=jt,rt=J(de.selectionDefs.concat([ze]))):(Se=[ze],rt=H(ze)),f(ve(Se,nt),Nt,de),ot){var rr,$n=xe(mt,!1),mr=$n.eventData?$n.eventData.points.slice():[];$n=xe(mt,!1,rt,vn,de),rt=$n.selectionTesters,ct=$n.eventData,rr=Ye?Ye.filtered:ce(Se),E.throttle(wn,I.SELECTDELAY,function(){for(var fr=(Bn=Oe(rt,vn)).slice(),Zn=0;Zn<mr.length;Zn++){for(var qn=mr[Zn],ur=!1,Zt=0;Zt<fr.length;Zt++)if(fr[Zt].curveNumber===qn.curveNumber&&fr[Zt].pointNumber===qn.pointNumber){ur=!0;break}ur||fr.push(qn)}fr.length&&(ct||(ct={}),ct.points=fr),cn(ct,rr),function(nn,zn){nn.emit("plotly_selecting",zn)}(mt,ct)})}},de.clickFn=function(dn,sn){if(Kt.remove(),mt._fullLayout._activeShapeIndex>=0)mt._fullLayout._deactivateShape(mt);else if(!tt){var hn=wt.clickmode;E.done(wn).then(function(){if(E.clear(wn),dn===2){for(Nt.remove(),Ke=0;Ke<vn.length;Ke++)(st=vn[Ke])._module.selectPoints(st,!1);if(ye(mt,vn),ee(de),Ie(mt),vn.length){var En=vn[0].xaxis,Mn=vn[0].yaxis;if(En&&Mn){for(var Rn=[],Nn=mt._fullLayout.selections,Fn=0;Fn<Nn.length;Fn++){var rr=Nn[Fn];rr&&(rr.xref===En._id&&rr.yref===Mn._id||Rn.push(rr))}Rn.length<Nn.length&&(mt._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",mt,{selections:Rn}))}}}else hn.indexOf("select")>-1&&G(sn,mt,de.xaxes,de.yaxes,de.subplot,de,Nt),hn==="event"&&Ae(mt,void 0);d.click(mt,sn)}).catch(u.error)}},de.doneFn=function(){Kt.remove(),E.done(wn).then(function(){E.clear(wn),!Lt&&ze&&de.selectionDefs&&(ze.subtract=jt,de.selectionDefs.push(ze),de.mergedPolygons.length=0,[].push.apply(de.mergedPolygons,Se)),(Lt||tt)&&ee(de,Lt),de.doneFnCompleted&&de.doneFnCompleted(Bn),ot&&Ae(mt,ct)}).catch(u.error)}},clearOutline:b,clearSelectionsCache:ee,selectOnClick:G}},89827:function($,R,e){var k=e(50215),A=e(82196).line,l=e(79952).P,T=e(1426).extendFlat,x=e(44467).templatedArray;e(24695),$.exports=x("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:T({},k.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:T({},k.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:T({},A.color,{editType:"arraydraw"}),width:T({},A.width,{editType:"calc+arraydraw"}),dash:T({},l,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},5627:function($,R,e){var k=e(71828),A=e(89298),l=e(21459),T=e(30477);function x(o){return s(o.line.width,o.xsizemode,o.x0,o.x1,o.path,!1)}function d(o){return s(o.line.width,o.ysizemode,o.y0,o.y1,o.path,!0)}function s(o,r,n,a,i,c){var h=o/2,f=c;if(r==="pixel"){var b=i?T.extractPathCoords(i,c?l.paramIsY:l.paramIsX):[n,a],v=k.aggNums(Math.max,null,b),g=k.aggNums(Math.min,null,b),y=g<0?Math.abs(g)+h:h,p=v>0?v+h:h;return{ppad:h,ppadplus:f?y:p,ppadminus:f?p:y}}return{ppad:h}}function t(o,r,n,a,i){var c=o.type==="category"||o.type==="multicategory"?o.r2c:o.d2c;if(r!==void 0)return[c(r),c(n)];if(a){var h,f,b,v,g=1/0,y=-1/0,p=a.match(l.segmentRE);for(o.type==="date"&&(c=T.decodeDate(c)),h=0;h<p.length;h++)(f=i[p[h].charAt(0)].drawn)!==void 0&&(!(b=p[h].substr(1).match(l.paramRE))||b.length<f||((v=c(b[f]))<g&&(g=v),v>y&&(y=v)));return y>=g?[g,y]:void 0}}$.exports=function(o){var r=o._fullLayout,n=k.filterVisible(r.shapes);if(n.length&&o._fullData.length)for(var a=0;a<n.length;a++){var i,c,h=n[a];h._extremes={};var f=A.getRefType(h.xref),b=A.getRefType(h.yref);if(h.xref!=="paper"&&f!=="domain"){var v=h.xsizemode==="pixel"?h.xanchor:h.x0,g=h.xsizemode==="pixel"?h.xanchor:h.x1;(c=t(i=A.getFromId(o,h.xref),v,g,h.path,l.paramIsX))&&(h._extremes[i._id]=A.findExtremes(i,c,x(h)))}if(h.yref!=="paper"&&b!=="domain"){var y=h.ysizemode==="pixel"?h.yanchor:h.y0,p=h.ysizemode==="pixel"?h.yanchor:h.y1;(c=t(i=A.getFromId(o,h.yref),y,p,h.path,l.paramIsY))&&(h._extremes[i._id]=A.findExtremes(i,c,d(h)))}}}},21459:function($){$.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function($,R,e){var k=e(71828),A=e(89298),l=e(85501),T=e(89827),x=e(30477);function d(s,t,o){function r(P,I){return k.coerce(s,t,T,P,I)}if(r("visible")){var n=r("path"),a=r("type",n?"path":"rect")!=="path";a&&delete t.path,r("editable"),r("layer"),r("opacity"),r("fillcolor"),r("fillrule"),r("line.width")&&(r("line.color"),r("line.dash"));for(var i=r("xsizemode"),c=r("ysizemode"),h=["x","y"],f=0;f<2;f++){var b,v,g,y=h[f],p=y+"anchor",m=y==="x"?i:c,w={_fullLayout:o},u=A.coerceRef(s,t,w,y,void 0,"paper");if(A.getRefType(u)==="range"?((b=A.getFromId(w,u))._shapeIndices.push(t._index),g=x.rangeToShapePosition(b),v=x.shapePositionToRange(b)):v=g=k.identity,a){var S=y+"0",_=y+"1",E=s[S],L=s[_];s[S]=v(s[S],!0),s[_]=v(s[_],!0),m==="pixel"?(r(S,0),r(_,10)):(A.coercePosition(t,w,r,u,S,.25),A.coercePosition(t,w,r,u,_,.75)),t[S]=g(t[S]),t[_]=g(t[_]),s[S]=E,s[_]=L}if(m==="pixel"){var C=s[p];s[p]=v(s[p],!0),A.coercePosition(t,w,r,u,p,.25),t[p]=g(t[p]),s[p]=C}}a&&k.noneOrAll(s,t,["x0","x1","y0","y1"])}}$.exports=function(s,t){l(s,t,{name:"shapes",handleItemDefaults:d})}},42359:function($,R,e){var k=e(71828).strTranslate,A=e(28569),l=e(64505),T=l.drawMode,x=l.selectMode,d=e(73972),s=e(7901),t=e(89995),o=t.i000,r=t.i090,n=t.i180,a=t.i270,i=e(51873).clearOutlineControllers,c=e(60165),h=c.pointsOnRectangle,f=c.pointsOnEllipse,b=c.writePaths,v=e(90551),g=e(35855);function y(p,m){var w,u,S,_=p[m][1],E=p[m][2],L=p.length;return u=p[w=(m+1)%L][1],S=p[w][2],u===_&&S===E&&(u=p[w=(m+2)%L][1],S=p[w][2]),[w,u,S]}$.exports=function p(m,w,u,S){S||(S=0);var _=u.gd;function E(){p(m,w,u,S++),f(m[0])&&L({redrawing:!0})}function L(re){var ie={};u.isActiveShape!==void 0&&(u.isActiveShape=!1,ie=v(w,u)),u.isActiveSelection!==void 0&&(u.isActiveSelection=!1,ie=g(w,u),_._fullLayout._reselect=!0),Object.keys(ie).length&&d.call((re||{}).redrawing?"relayout":"_guiRelayout",_,ie)}var C,P,I,U,z,H=_._fullLayout._zoomlayer,F=u.dragmode,N=T(F),B=x(F);function j(re){I=+re.srcElement.getAttribute("data-i"),U=+re.srcElement.getAttribute("data-j"),C[I][U].moveFn=K}function K(re,ie){if(m.length){var se=z[I][U][1],fe=z[I][U][2],ye=m[I],ge=ye.length;if(h(ye)){var he=re,ve=ie;u.isActiveSelection&&(y(ye,U)[1]===ye[U][1]?ve=0:he=0);for(var Oe=0;Oe<ge;Oe++)if(Oe!==U){var xe=ye[Oe];xe[1]===ye[U][1]&&(xe[1]=se+he),xe[2]===ye[U][2]&&(xe[2]=fe+ve)}if(ye[U][1]=se+he,ye[U][2]=fe+ve,!h(ye))for(var ke=0;ke<ge;ke++)for(var Me=0;Me<ye[ke].length;Me++)ye[ke][Me]=z[I][ke][Me]}else ye[U][1]=se+re,ye[U][2]=fe+ie;E()}}function G(){L()}function V(re,ie){if(re===2){I=+ie.srcElement.getAttribute("data-i"),U=+ie.srcElement.getAttribute("data-j");var se=m[I];h(se)||f(se)||function(){if(m.length&&m[I]&&m[I].length){for(var fe=[],ye=0;ye<m[I].length;ye++)ye!==U&&fe.push(m[I][ye]);fe.length>1&&(fe.length!==2||fe[1][0]!=="Z")&&(U===0&&(fe[0][0]="M"),m[I]=fe,E(),L())}}()}}function W(re,ie){(function(se,fe){if(m.length)for(var ye=0;ye<m.length;ye++)for(var ge=0;ge<m[ye].length;ge++)for(var he=0;he+2<m[ye][ge].length;he+=2)m[ye][ge][he+1]=z[ye][ge][he+1]+se,m[ye][ge][he+2]=z[ye][ge][he+2]+fe})(re,ie),E()}function J(re){(I=+re.srcElement.getAttribute("data-i"))||(I=0),P[I].moveFn=W}function X(){L()}function ee(re){re===2&&function(ie){if(x(ie._fullLayout.dragmode)){i(ie);var se=ie._fullLayout._activeSelectionIndex,fe=(ie.layout||{}).selections||[];if(se<fe.length){for(var ye=[],ge=0;ge<fe.length;ge++)ge!==se&&ye.push(fe[ge]);delete ie._fullLayout._activeSelectionIndex;var he=ie._fullLayout.selections[se];ie._fullLayout._deselect={xref:he.xref,yref:he.yref},d.call("_guiRelayout",ie,{selections:ye})}}}(_)}(N||B)&&(_._fullLayout._outlining=!0),i(_),w.attr("d",b(m)),S||!u.isActiveShape&&!u.isActiveSelection||(z=function(re,ie){for(var se=0;se<ie.length;se++){var fe=ie[se];re[se]=[];for(var ye=0;ye<fe.length;ye++){re[se][ye]=[];for(var ge=0;ge<fe[ye].length;ge++)re[se][ye][ge]=fe[ye][ge]}}return re}([],m),function(re){C=[];for(var ie=0;ie<m.length;ie++){var se=m[ie],fe=h(se),ye=!fe&&f(se);C[ie]=[];for(var ge=se.length,he=0;he<ge;he++)if(se[he][0]!=="Z"&&(!ye||he===o||he===r||he===n||he===a)){var ve,Oe=fe&&u.isActiveSelection;Oe&&(ve=y(se,he));var xe=se[he][1],ke=se[he][2],Me=re.append(Oe?"rect":"circle").attr("data-i",ie).attr("data-j",he).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Oe){var Te=ve[1]-xe,Q=ve[2]-ke,oe=Q?5:Math.max(Math.min(25,Math.abs(Te)-5),5),ce=Te?5:Math.max(Math.min(25,Math.abs(Q)-5),5);Me.classed(Q?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",oe).attr("height",ce).attr("x",xe-oe/2).attr("y",ke-ce/2).attr("transform",k(Te/2,Q/2))}else Me.classed("cursor-grab",!0).attr("r",5).attr("cx",xe).attr("cy",ke);C[ie][he]={element:Me.node(),gd:_,prepFn:j,doneFn:G,clickFn:V},A.init(C[ie][he])}}}(H.append("g").attr("class","outline-controllers")),function(){P=[],m.length&&(P[0]={element:w[0][0],gd:_,prepFn:J,doneFn:X,clickFn:ee},A.init(P[0]))}())}},34031:function($,R,e){var k=e(73972),A=e(71828),l=e(89298),T=e(60165).readPaths,x=e(42359),d=e(51873).clearOutlineControllers,s=e(7901),t=e(91424),o=e(44467).arrayEditor,r=e(28569),n=e(6964),a=e(21459),i=e(30477),c=i.getPathString;function h(m){var w=m._fullLayout;for(var u in w._shapeUpperLayer.selectAll("path").remove(),w._shapeLowerLayer.selectAll("path").remove(),w._plots){var S=w._plots[u].shapelayer;S&&S.selectAll("path").remove()}for(var _=0;_<w.shapes.length;_++)w.shapes[_].visible&&v(m,_)}function f(m){return!!m._fullLayout._outlining}function b(m){return!m._context.edits.shapePosition}function v(m,w){m._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+w+'"]').remove();var u=i.makeShapesOptionsAndPlotinfo(m,w),S=u.options,_=u.plotinfo;function E(L){var C=c(m,S),P={"data-index":w,"fill-rule":S.fillrule,d:C},I=S.opacity,U=S.fillcolor,z=S.line.width?S.line.color:"rgba(0,0,0,0)",H=S.line.width,F=S.line.dash;H||S.editable!==!0||(H=5,F="solid");var N=C[C.length-1]!=="Z",B=b(m)&&S.editable&&m._fullLayout._activeShapeIndex===w;B&&(U=N?"rgba(0,0,0,0)":m._fullLayout.activeshape.fillcolor,I=m._fullLayout.activeshape.opacity);var j,K=L.append("path").attr(P).style("opacity",I).call(s.stroke,z).call(s.fill,U).call(t.dashLine,F,H);if(g(K,m,S),(B||m._context.edits.shapePosition)&&(j=o(m.layout,"shapes",S)),B){K.style({cursor:"move"});var G={element:K.node(),plotinfo:_,gd:m,editHelpers:j,isActiveShape:!0},V=T(C,m);x(V,K,G)}else m._context.edits.shapePosition?function(W,J,X,ee,re,ie){var se,fe,ye,ge,he,ve,Oe,xe,ke,Me,Te,Q,oe,ce,me,Ae,Ie=X.xsizemode==="pixel",Ce=X.ysizemode==="pixel",Re=X.type==="line",le=X.type==="path",de=ie.modifyItem,_e=l.getFromId(W,X.xref),Fe=l.getRefType(X.xref),Ve=l.getFromId(W,X.yref),He=l.getRefType(X.yref),nt=i.getDataToPixel(W,_e,!1,Fe),tt=i.getDataToPixel(W,Ve,!0,He),ot=i.getPixelToData(W,_e,!1,Fe),dt=i.getPixelToData(W,Ve,!0,He),kt=Re?function(){var Rt=10,Ge=Math.max(X.line.width,Rt),We=re.append("g").attr("data-index",ee);We.append("path").attr("d",J.attr("d")).style({cursor:"move","stroke-width":Ge,"stroke-opacity":"0"});var Be={"fill-opacity":"0"},Ye=Math.max(Ge/2,Rt);return We.append("circle").attr({"data-line-point":"start-point",cx:Ie?nt(X.xanchor)+X.x0:nt(X.x0),cy:Ce?tt(X.yanchor)-X.y0:tt(X.y0),r:Ye}).style(Be).classed("cursor-grab",!0),We.append("circle").attr({"data-line-point":"end-point",cx:Ie?nt(X.xanchor)+X.x1:nt(X.x1),cy:Ce?tt(X.yanchor)-X.y1:tt(X.y1),r:Ye}).style(Be).classed("cursor-grab",!0),We}():J,mt={element:kt.node(),gd:W,prepFn:function(Rt){f(W)||(Ie&&(he=nt(X.xanchor)),Ce&&(ve=tt(X.yanchor)),X.type==="path"?me=X.path:(se=Ie?X.x0:nt(X.x0),fe=Ce?X.y0:tt(X.y0),ye=Ie?X.x1:nt(X.x1),ge=Ce?X.y1:tt(X.y1)),se<ye?(ke=se,oe="x0",Me=ye,ce="x1"):(ke=ye,oe="x1",Me=se,ce="x0"),!Ce&&fe<ge||Ce&&fe>ge?(Oe=fe,Te="y0",xe=ge,Q="y1"):(Oe=ge,Te="y1",xe=fe,Q="y0"),wt(Rt),It(re,X),function(Ge,We,Be){var Ye=We.xref,rt=We.yref,Se=l.getFromId(Be,Ye),ze=l.getFromId(Be,rt),Ke="";Ye==="paper"||Se.autorange||(Ke+=Ye),rt==="paper"||ze.autorange||(Ke+=rt),t.setClipUrl(Ge,Ke?"clip"+Be._fullLayout._uid+Ke:null,Be)}(J,X,W),mt.moveFn=Ae==="move"?Lt:Ct,mt.altKey=Rt.altKey)},doneFn:function(){f(W)||(n(J),Ut(re),g(J,W,X),k.call("_guiRelayout",W,ie.getUpdateObj()))},clickFn:function(){f(W)||Ut(re)}};function wt(Rt){if(f(W))Ae=null;else if(Re)Ae=Rt.target.tagName==="path"?"move":Rt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Ge=mt.element.getBoundingClientRect(),We=Ge.right-Ge.left,Be=Ge.bottom-Ge.top,Ye=Rt.clientX-Ge.left,rt=Rt.clientY-Ge.top,Se=!le&&We>10&&Be>10&&!Rt.shiftKey?r.getCursor(Ye/We,1-rt/Be):"move";n(J,Se),Ae=Se.split("-")[0]}}function Lt(Rt,Ge){if(X.type==="path"){var We=function(rt){return rt},Be=We,Ye=We;Ie?de("xanchor",X.xanchor=ot(he+Rt)):(Be=function(rt){return ot(nt(rt)+Rt)},_e&&_e.type==="date"&&(Be=i.encodeDate(Be))),Ce?de("yanchor",X.yanchor=dt(ve+Ge)):(Ye=function(rt){return dt(tt(rt)+Ge)},Ve&&Ve.type==="date"&&(Ye=i.encodeDate(Ye))),de("path",X.path=y(me,Be,Ye))}else Ie?de("xanchor",X.xanchor=ot(he+Rt)):(de("x0",X.x0=ot(se+Rt)),de("x1",X.x1=ot(ye+Rt))),Ce?de("yanchor",X.yanchor=dt(ve+Ge)):(de("y0",X.y0=dt(fe+Ge)),de("y1",X.y1=dt(ge+Ge)));J.attr("d",c(W,X)),It(re,X)}function Ct(Rt,Ge){if(le){var We=function(Ot){return Ot},Be=We,Ye=We;Ie?de("xanchor",X.xanchor=ot(he+Rt)):(Be=function(Ot){return ot(nt(Ot)+Rt)},_e&&_e.type==="date"&&(Be=i.encodeDate(Be))),Ce?de("yanchor",X.yanchor=dt(ve+Ge)):(Ye=function(Ot){return dt(tt(Ot)+Ge)},Ve&&Ve.type==="date"&&(Ye=i.encodeDate(Ye))),de("path",X.path=y(me,Be,Ye))}else if(Re){if(Ae==="resize-over-start-point"){var rt=se+Rt,Se=Ce?fe-Ge:fe+Ge;de("x0",X.x0=Ie?rt:ot(rt)),de("y0",X.y0=Ce?Se:dt(Se))}else if(Ae==="resize-over-end-point"){var ze=ye+Rt,Ke=Ce?ge-Ge:ge+Ge;de("x1",X.x1=Ie?ze:ot(ze)),de("y1",X.y1=Ce?Ke:dt(Ke))}}else{var st=function(Ot){return Ae.indexOf(Ot)!==-1},ct=st("n"),Tt=st("s"),Et=st("w"),At=st("e"),ht=ct?Oe+Ge:Oe,pt=Tt?xe+Ge:xe,gt=Et?ke+Rt:ke,Pt=At?Me+Rt:Me;Ce&&(ct&&(ht=Oe-Ge),Tt&&(pt=xe-Ge)),(!Ce&&pt-ht>10||Ce&&ht-pt>10)&&(de(Te,X[Te]=Ce?ht:dt(ht)),de(Q,X[Q]=Ce?pt:dt(pt))),Pt-gt>10&&(de(oe,X[oe]=Ie?gt:ot(gt)),de(ce,X[ce]=Ie?Pt:ot(Pt)))}J.attr("d",c(W,X)),It(re,X)}function It(Rt,Ge){(Ie||Ce)&&function(){var We=Ge.type!=="path",Be=Rt.selectAll(".visual-cue").data([0]);Be.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ye=nt(Ie?Ge.xanchor:A.midRange(We?[Ge.x0,Ge.x1]:i.extractPathCoords(Ge.path,a.paramIsX))),rt=tt(Ce?Ge.yanchor:A.midRange(We?[Ge.y0,Ge.y1]:i.extractPathCoords(Ge.path,a.paramIsY)));if(Ye=i.roundPositionForSharpStrokeRendering(Ye,1),rt=i.roundPositionForSharpStrokeRendering(rt,1),Ie&&Ce){var Se="M"+(Ye-1-1)+","+(rt-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Be.attr("d",Se)}else if(Ie){var ze="M"+(Ye-1-1)+","+(rt-9-1)+"v18 h2 v-18 Z";Be.attr("d",ze)}else{var Ke="M"+(Ye-9-1)+","+(rt-1-1)+"h18 v2 h-18 Z";Be.attr("d",Ke)}}()}function Ut(Rt){Rt.selectAll(".visual-cue").remove()}r.init(mt),kt.node().onmousemove=wt}(m,K,S,w,L,j):S.editable===!0&&K.style("pointer-events",N||s.opacity(U)*I<=.5?"stroke":"all");K.node().addEventListener("click",function(){return function(W,J){if(b(W)){var X=+J.node().getAttribute("data-index");if(X>=0){if(X===W._fullLayout._activeShapeIndex)return void p(W);W._fullLayout._activeShapeIndex=X,W._fullLayout._deactivateShape=p,h(W)}}}(m,K)})}S._input&&S.visible!==!1&&(S.layer!=="below"?E(m._fullLayout._shapeUpperLayer):S.xref==="paper"||S.yref==="paper"?E(m._fullLayout._shapeLowerLayer):_._hadPlotinfo?E((_.mainplotinfo||_).shapelayer):E(m._fullLayout._shapeLowerLayer))}function g(m,w,u){var S=(u.xref+u.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");t.setClipUrl(m,S?"clip"+w._fullLayout._uid+S:null,w)}function y(m,w,u){return m.replace(a.segmentRE,function(S){var _=0,E=S.charAt(0),L=a.paramIsX[E],C=a.paramIsY[E],P=a.numParams[E];return E+S.substr(1).replace(a.paramRE,function(I){return _>=P||(L[_]?I=w(I):C[_]&&(I=u(I)),_++),I})})}function p(m){b(m)&&m._fullLayout._activeShapeIndex>=0&&(d(m),delete m._fullLayout._activeShapeIndex,h(m))}$.exports={draw:h,drawOne:v,eraseActiveShape:function(m){if(b(m)){d(m);var w=m._fullLayout._activeShapeIndex,u=(m.layout||{}).shapes||[];if(w<u.length){for(var S=[],_=0;_<u.length;_++)_!==w&&S.push(u[_]);delete m._fullLayout._activeShapeIndex,k.call("_guiRelayout",m,{shapes:S})}}}}},29241:function($,R,e){var k=e(79952).P,A=e(1426).extendFlat;$.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:A({},k,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},89995:function($){$.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function($,R,e){var k=e(7901);$.exports=function(A,l,T){if(T("newshape.drawdirection"),T("newshape.layer"),T("newshape.fillcolor"),T("newshape.fillrule"),T("newshape.opacity"),T("newshape.line.width")){var x=(A||{}).plot_bgcolor||"#FFF";T("newshape.line.color",k.contrast(x)),T("newshape.line.dash")}T("activeshape.fillcolor"),T("activeshape.opacity")}},60165:function($,R,e){var k=e(95616),A=e(89995),l=A.CIRCLE_SIDES,T=A.SQRT2,x=e(75549),d=x.p2r,s=x.r2p,t=[0,3,4,5,6,1,2],o=[0,3,4,1,2];function r(a,i){return Math.abs(a-i)<=1e-6}function n(a,i){var c=i[1]-a[1],h=i[2]-a[2];return Math.sqrt(c*c+h*h)}R.writePaths=function(a){var i=a.length;if(!i)return"M0,0Z";for(var c="",h=0;h<i;h++)for(var f=a[h].length,b=0;b<f;b++){var v=a[h][b][0];if(v==="Z")c+="Z";else for(var g=a[h][b].length,y=0;y<g;y++){var p=y;v==="Q"||v==="S"?p=o[y]:v==="C"&&(p=t[y]),c+=a[h][b][p],y>0&&y<g-1&&(c+=",")}}return c},R.readPaths=function(a,i,c,h){var f,b,v,g=k(a),y=[],p=-1,m=0,w=0,u=function(){b=m,v=w};u();for(var S=0;S<g.length;S++){var _,E,L,C,P=[],I=g[S][0],U=I;switch(I){case"M":y[++p]=[],m=+g[S][1],w=+g[S][2],P.push([U,m,w]),u();break;case"Q":case"S":_=+g[S][1],L=+g[S][2],m=+g[S][3],w=+g[S][4],P.push([U,m,w,_,L]);break;case"C":_=+g[S][1],L=+g[S][2],E=+g[S][3],C=+g[S][4],m=+g[S][5],w=+g[S][6],P.push([U,m,w,_,L,E,C]);break;case"T":case"L":m=+g[S][1],w=+g[S][2],P.push([U,m,w]);break;case"H":U="L",m=+g[S][1],P.push([U,m,w]);break;case"V":U="L",w=+g[S][1],P.push([U,m,w]);break;case"A":U="L";var z=+g[S][1],H=+g[S][2];+g[S][4]||(z=-z,H=-H);var F=m-z,N=w;for(f=1;f<=l/2;f++){var B=2*Math.PI*f/l;P.push([U,F+z*Math.cos(B),N+H*Math.sin(B)])}break;case"Z":m===b&&w===v||(m=b,w=v,P.push([U,m,w]))}for(var j=(c||{}).domain,K=i._fullLayout._size,G=c&&c.xsizemode==="pixel",V=c&&c.ysizemode==="pixel",W=h===!1,J=0;J<P.length;J++){for(f=0;f+2<7;f+=2){var X=P[J][f+1],ee=P[J][f+2];X!==void 0&&ee!==void 0&&(m=X,w=ee,c&&(c.xaxis&&c.xaxis.p2r?(W&&(X-=c.xaxis._offset),X=G?s(c.xaxis,c.xanchor)+X:d(c.xaxis,X)):(W&&(X-=K.l),j?X=j.x[0]+X/K.w:X/=K.w),c.yaxis&&c.yaxis.p2r?(W&&(ee-=c.yaxis._offset),ee=V?s(c.yaxis,c.yanchor)-ee:d(c.yaxis,ee)):(W&&(ee-=K.t),ee=j?j.y[1]-ee/K.h:1-ee/K.h)),P[J][f+1]=X,P[J][f+2]=ee)}y[p].push(P[J].slice())}}return y},R.pointsOnRectangle=function(a){if(a.length!==5)return!1;for(var i=1;i<3;i++)if(!r(a[0][i]-a[1][i],a[3][i]-a[2][i])||!r(a[0][i]-a[3][i],a[1][i]-a[2][i]))return!1;return!(!r(a[0][1],a[1][1])&&!r(a[0][1],a[3][1])||!(n(a[0],a[1])*n(a[0],a[3])))},R.pointsOnEllipse=function(a){var i=a.length;if(i!==l+1)return!1;i=l;for(var c=0;c<i;c++){var h=(2*i-c)%i,f=(i/2+h)%i,b=(i/2+c)%i;if(!r(n(a[c],a[b]),n(a[h],a[f])))return!1}return!0},R.handleEllipse=function(a,i,c){if(!a)return[i,c];var h=R.ellipseOver({x0:i[0],y0:i[1],x1:c[0],y1:c[1]}),f=(h.x1+h.x0)/2,b=(h.y1+h.y0)/2,v=(h.x1-h.x0)/2,g=(h.y1-h.y0)/2;v||(v=g/=T),g||(g=v/=T);for(var y=[],p=0;p<l;p++){var m=2*p*Math.PI/l;y.push([f+v*Math.cos(m),b+g*Math.sin(m)])}return y},R.ellipseOver=function(a){var i=a.x0,c=a.y0,h=a.x1,f=a.y1,b=h-i,v=f-c,g=((i-=b)+h)/2,y=((c-=v)+f)/2;return{x0:g-(b*=T),y0:y-(v*=T),x1:g+b,y1:y+v}},R.fixDatesForPaths=function(a,i,c){var h=i.type==="date",f=c.type==="date";if(!h&&!f)return a;for(var b=0;b<a.length;b++)for(var v=0;v<a[b].length;v++)for(var g=0;g+2<a[b][v].length;g+=2)h&&(a[b][v][g+1]=a[b][v][g+1].replace(" ","_")),f&&(a[b][v][g+2]=a[b][v][g+2].replace(" ","_"));return a}},90551:function($,R,e){var k=e(64505),A=k.drawMode,l=k.openMode,T=e(89995),x=T.i000,d=T.i090,s=T.i180,t=T.i270,o=T.cos45,r=T.sin45,n=e(75549),a=n.p2r,i=n.r2p,c=e(51873).clearOutline,h=e(60165),f=h.readPaths,b=h.writePaths,v=h.ellipseOver,g=h.fixDatesForPaths;$.exports=function(y,p){if(y.length){var m=y[0][0];if(m){var w=m.getAttribute("d"),u=p.gd,S=u._fullLayout.newshape,_=p.plotinfo,E=_.xaxis,L=_.yaxis,C=!!_.domain||!_.xaxis,P=!!_.domain||!_.yaxis,I=p.isActiveShape,U=p.dragmode,z=(u.layout||{}).shapes||[];if(!A(U)&&I!==void 0){var H=u._fullLayout._activeShapeIndex;if(H<z.length)switch(u._fullLayout.shapes[H].type){case"rect":U="drawrect";break;case"circle":U="drawcircle";break;case"line":U="drawline";break;case"path":var F=z[H].path||"";U=F[F.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var N,B=l(U),j=f(w,u,_,I),K={editable:!0,xref:C?"paper":E._id,yref:P?"paper":L._id,layer:S.layer,opacity:S.opacity,line:{color:S.line.color,width:S.line.width,dash:S.line.dash}};if(B||(K.fillcolor=S.fillcolor,K.fillrule=S.fillrule),j.length===1&&(N=j[0]),N&&N.length===5&&U==="drawrect")K.type="rect",K.x0=N[0][1],K.y0=N[0][2],K.x1=N[2][1],K.y1=N[2][2];else if(N&&U==="drawline")K.type="line",K.x0=N[0][1],K.y0=N[0][2],K.x1=N[1][1],K.y1=N[1][2];else if(N&&U==="drawcircle"){K.type="circle";var G=N[x][1],V=N[d][1],W=N[s][1],J=N[t][1],X=N[x][2],ee=N[d][2],re=N[s][2],ie=N[t][2],se=_.xaxis&&(_.xaxis.type==="date"||_.xaxis.type==="log"),fe=_.yaxis&&(_.yaxis.type==="date"||_.yaxis.type==="log");se&&(G=i(_.xaxis,G),V=i(_.xaxis,V),W=i(_.xaxis,W),J=i(_.xaxis,J)),fe&&(X=i(_.yaxis,X),ee=i(_.yaxis,ee),re=i(_.yaxis,re),ie=i(_.yaxis,ie));var ye=(V+J)/2,ge=(X+re)/2,he=v({x0:ye,y0:ge,x1:ye+(J-V+W-G)/2*o,y1:ge+(ie-ee+re-X)/2*r});se&&(he.x0=a(_.xaxis,he.x0),he.x1=a(_.xaxis,he.x1)),fe&&(he.y0=a(_.yaxis,he.y0),he.y1=a(_.yaxis,he.y1)),K.x0=he.x0,K.y0=he.y0,K.x1=he.x1,K.y1=he.y1}else K.type="path",E&&L&&g(j,E,L),K.path=b(j),N=null;c(u);for(var ve=p.editHelpers,Oe=(ve||{}).modifyItem,xe=[],ke=0;ke<z.length;ke++){var Me=u._fullLayout.shapes[ke];if(xe[ke]=Me._input,I!==void 0&&ke===u._fullLayout._activeShapeIndex){var Te=K;switch(Me.type){case"line":case"rect":case"circle":Oe("x0",Te.x0),Oe("x1",Te.x1),Oe("y0",Te.y0),Oe("y1",Te.y1);break;case"path":Oe("path",Te.path)}}}return I===void 0?(xe.push(K),xe):ve?ve.getUpdateObj():{}}}}},51873:function($){$.exports={clearOutlineControllers:function(R){var e=R._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(R){var e=R._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),R._fullLayout._outlining=!1}}},30477:function($,R,e){var k=e(21459),A=e(71828),l=e(89298);R.rangeToShapePosition=function(T){return T.type==="log"?T.r2d:function(x){return x}},R.shapePositionToRange=function(T){return T.type==="log"?T.d2r:function(x){return x}},R.decodeDate=function(T){return function(x){return x.replace&&(x=x.replace("_"," ")),T(x)}},R.encodeDate=function(T){return function(x){return T(x).replace(" ","_")}},R.extractPathCoords=function(T,x,d){var s=[];return T.match(k.segmentRE).forEach(function(t){var o=x[t.charAt(0)].drawn;if(o!==void 0){var r=t.substr(1).match(k.paramRE);if(r&&!(r.length<o)){var n=r[o],a=d?n:A.cleanNumber(n);s.push(a)}}}),s},R.getDataToPixel=function(T,x,d,s){var t,o=T._fullLayout._size;if(x)if(s==="domain")t=function(n){return x._length*(d?1-n:n)+x._offset};else{var r=R.shapePositionToRange(x);t=function(n){return x._offset+x.r2p(r(n,!0))},x.type==="date"&&(t=R.decodeDate(t))}else t=d?function(n){return o.t+o.h*(1-n)}:function(n){return o.l+o.w*n};return t},R.getPixelToData=function(T,x,d,s){var t,o=T._fullLayout._size;if(x)if(s==="domain")t=function(n){var a=(n-x._offset)/x._length;return d?1-a:a};else{var r=R.rangeToShapePosition(x);t=function(n){return r(x.p2r(n-x._offset))}}else t=d?function(n){return 1-(n-o.t)/o.h}:function(n){return(n-o.l)/o.w};return t},R.roundPositionForSharpStrokeRendering=function(T,x){var d=Math.round(x%2)===1,s=Math.round(T);return d?s+.5:s},R.makeShapesOptionsAndPlotinfo=function(T,x){var d=T._fullLayout.shapes[x]||{},s=T._fullLayout._plots[d.xref+d.yref];return s?s._hadPlotinfo=!0:(s={},d.xref&&d.xref!=="paper"&&(s.xaxis=T._fullLayout[d.xref+"axis"]),d.yref&&d.yref!=="paper"&&(s.yaxis=T._fullLayout[d.yref+"axis"])),s.xsizemode=d.xsizemode,s.ysizemode=d.ysizemode,s.xanchor=d.xanchor,s.yanchor=d.yanchor,{options:d,plotinfo:s}},R.makeSelectionsOptionsAndPlotinfo=function(T,x){var d=T._fullLayout.selections[x]||{},s=T._fullLayout._plots[d.xref+d.yref];return s?s._hadPlotinfo=!0:(s={},d.xref&&(s.xaxis=T._fullLayout[d.xref+"axis"]),d.yref&&(s.yaxis=T._fullLayout[d.yref+"axis"])),{options:d,plotinfo:s}},R.getPathString=function(T,x){var d,s,t,o,r,n,a,i,c=x.type,h=l.getRefType(x.xref),f=l.getRefType(x.yref),b=l.getFromId(T,x.xref),v=l.getFromId(T,x.yref),g=T._fullLayout._size;if(b?h==="domain"?s=function(L){return b._offset+b._length*L}:(d=R.shapePositionToRange(b),s=function(L){return b._offset+b.r2p(d(L,!0))}):s=function(L){return g.l+g.w*L},v?f==="domain"?o=function(L){return v._offset+v._length*(1-L)}:(t=R.shapePositionToRange(v),o=function(L){return v._offset+v.r2p(t(L,!0))}):o=function(L){return g.t+g.h*(1-L)},c==="path")return b&&b.type==="date"&&(s=R.decodeDate(s)),v&&v.type==="date"&&(o=R.decodeDate(o)),function(L,C,P){var I=L.path,U=L.xsizemode,z=L.ysizemode,H=L.xanchor,F=L.yanchor;return I.replace(k.segmentRE,function(N){var B=0,j=N.charAt(0),K=k.paramIsX[j],G=k.paramIsY[j],V=k.numParams[j],W=N.substr(1).replace(k.paramRE,function(J){return K[B]?J=U==="pixel"?C(H)+Number(J):C(J):G[B]&&(J=z==="pixel"?P(F)-Number(J):P(J)),++B>V&&(J="X"),J});return B>V&&(W=W.replace(/[\s,]*X.*/,""),A.log("Ignoring extra params in segment "+N)),j+W})}(x,s,o);if(x.xsizemode==="pixel"){var y=s(x.xanchor);r=y+x.x0,n=y+x.x1}else r=s(x.x0),n=s(x.x1);if(x.ysizemode==="pixel"){var p=o(x.yanchor);a=p-x.y0,i=p-x.y1}else a=o(x.y0),i=o(x.y1);if(c==="line")return"M"+r+","+a+"L"+n+","+i;if(c==="rect")return"M"+r+","+a+"H"+n+"V"+i+"H"+r+"Z";var m=(r+n)/2,w=(a+i)/2,u=Math.abs(m-r),S=Math.abs(w-a),_="A"+u+","+S,E=m+u+","+w;return"M"+E+_+" 0 1,1 "+m+","+(w-S)+_+" 0 0,1 "+E+"Z"}},89853:function($,R,e){var k=e(34031);$.exports={moduleType:"component",name:"shapes",layoutAttributes:e(89827),supplyLayoutDefaults:e(84726),supplyDrawNewShapeDefaults:e(45547),includeBasePlot:e(76325)("shapes"),calcAutorange:e(5627),draw:k.draw,drawOne:k.drawOne}},75067:function($,R,e){var k=e(41940),A=e(35025),l=e(1426).extendDeepAll,T=e(30962).overrideAll,x=e(85594),d=e(44467).templatedArray,s=e(98292),t=d("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});$.exports=T(d("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:l(A({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:x.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:k({})},font:k({}),activebgcolor:{valType:"color",dflt:s.gripBgActiveColor},bgcolor:{valType:"color",dflt:s.railBgColor},bordercolor:{valType:"color",dflt:s.railBorderColor},borderwidth:{valType:"number",min:0,dflt:s.railBorderWidth},ticklen:{valType:"number",min:0,dflt:s.tickLength},tickcolor:{valType:"color",dflt:s.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:s.minorTickLength}}),"arraydraw","from-root")},98292:function($){$.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function($,R,e){var k=e(71828),A=e(85501),l=e(75067),T=e(98292).name,x=l.steps;function d(t,o,r){function n(f,b){return k.coerce(t,o,l,f,b)}for(var a=A(t,o,{name:"steps",handleItemDefaults:s}),i=0,c=0;c<a.length;c++)a[c].visible&&i++;if(i<2?o.visible=!1:n("visible")){o._stepCount=i;var h=o._visibleSteps=k.filterVisible(a);(a[n("active")]||{}).visible||(o.active=h[0]._index),n("x"),n("y"),k.noneOrAll(t,o,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),k.coerceFont(n,"font",r.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),k.coerceFont(n,"currentvalue.font",o.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen")}}function s(t,o){function r(a,i){return k.coerce(t,o,x,a,i)}if(t.method==="skip"||Array.isArray(t.args)?r("visible"):o.visible=!1){r("method"),r("args");var n=r("label","step-"+o._index);r("value",n),r("execute")}}$.exports=function(t,o){A(t,o,{name:T,handleItemDefaults:d})}},44504:function($,R,e){var k=e(39898),A=e(74875),l=e(7901),T=e(91424),x=e(71828),d=x.strTranslate,s=e(63893),t=e(44467).arrayEditor,o=e(98292),r=e(18783),n=r.LINE_SPACING,a=r.FROM_TL,i=r.FROM_BR;function c(P){return o.autoMarginIdRoot+P._index}function h(P){return P._index}function f(P,I){var U=T.tester.selectAll("g."+o.labelGroupClass).data(I._visibleSteps);U.enter().append("g").classed(o.labelGroupClass,!0);var z=0,H=0;U.each(function(J){var X=g(k.select(this),{step:J},I).node();if(X){var ee=T.bBox(X);H=Math.max(H,ee.height),z=Math.max(z,ee.width)}}),U.remove();var F=I._dims={};F.inputAreaWidth=Math.max(o.railWidth,o.gripHeight);var N=P._fullLayout._size;F.lx=N.l+N.w*I.x,F.ly=N.t+N.h*(1-I.y),I.lenmode==="fraction"?F.outerLength=Math.round(N.w*I.len):F.outerLength=I.len,F.inputAreaStart=0,F.inputAreaLength=Math.round(F.outerLength-I.pad.l-I.pad.r);var B=(F.inputAreaLength-2*o.stepInset)/(I._stepCount-1),j=z+o.labelPadding;if(F.labelStride=Math.max(1,Math.ceil(j/B)),F.labelHeight=H,F.currentValueMaxWidth=0,F.currentValueHeight=0,F.currentValueTotalHeight=0,F.currentValueMaxLines=1,I.currentvalue.visible){var K=T.tester.append("g");U.each(function(J){var X=b(K,I,J.label),ee=X.node()&&T.bBox(X.node())||{width:0,height:0},re=s.lineCount(X);F.currentValueMaxWidth=Math.max(F.currentValueMaxWidth,Math.ceil(ee.width)),F.currentValueHeight=Math.max(F.currentValueHeight,Math.ceil(ee.height)),F.currentValueMaxLines=Math.max(F.currentValueMaxLines,re)}),F.currentValueTotalHeight=F.currentValueHeight+I.currentvalue.offset,K.remove()}F.height=F.currentValueTotalHeight+o.tickOffset+I.ticklen+o.labelOffset+F.labelHeight+I.pad.t+I.pad.b;var G="left";x.isRightAnchor(I)&&(F.lx-=F.outerLength,G="right"),x.isCenterAnchor(I)&&(F.lx-=F.outerLength/2,G="center");var V="top";x.isBottomAnchor(I)&&(F.ly-=F.height,V="bottom"),x.isMiddleAnchor(I)&&(F.ly-=F.height/2,V="middle"),F.outerLength=Math.ceil(F.outerLength),F.height=Math.ceil(F.height),F.lx=Math.round(F.lx),F.ly=Math.round(F.ly);var W={y:I.y,b:F.height*i[V],t:F.height*a[V]};I.lenmode==="fraction"?(W.l=0,W.xl=I.x-I.len*a[G],W.r=0,W.xr=I.x+I.len*i[G]):(W.x=I.x,W.l=F.outerLength*a[G],W.r=F.outerLength*i[G]),A.autoMargin(P,c(I),W)}function b(P,I,U){if(I.currentvalue.visible){var z,H,F=I._dims;switch(I.currentvalue.xanchor){case"right":z=F.inputAreaLength-o.currentValueInset-F.currentValueMaxWidth,H="left";break;case"center":z=.5*F.inputAreaLength,H="middle";break;default:z=o.currentValueInset,H="left"}var N=x.ensureSingle(P,"text",o.labelClass,function(W){W.attr({"text-anchor":H,"data-notex":1})}),B=I.currentvalue.prefix?I.currentvalue.prefix:"";if(typeof U=="string")B+=U;else{var j=I.steps[I.active].label,K=I._gd._fullLayout._meta;K&&(j=x.templateString(j,K)),B+=j}I.currentvalue.suffix&&(B+=I.currentvalue.suffix),N.call(T.font,I.currentvalue.font).text(B).call(s.convertToTspans,I._gd);var G=s.lineCount(N),V=(F.currentValueMaxLines+1-G)*I.currentvalue.font.size*n;return s.positionText(N,z,V),N}}function v(P,I,U){x.ensureSingle(P,"rect",o.gripRectClass,function(z){z.call(w,I,P,U).style("pointer-events","all")}).attr({width:o.gripWidth,height:o.gripHeight,rx:o.gripRadius,ry:o.gripRadius}).call(l.stroke,U.bordercolor).call(l.fill,U.bgcolor).style("stroke-width",U.borderwidth+"px")}function g(P,I,U){var z=x.ensureSingle(P,"text",o.labelClass,function(N){N.attr({"text-anchor":"middle","data-notex":1})}),H=I.step.label,F=U._gd._fullLayout._meta;return F&&(H=x.templateString(H,F)),z.call(T.font,U.font).text(H).call(s.convertToTspans,U._gd),z}function y(P,I){var U=x.ensureSingle(P,"g",o.labelsClass),z=I._dims,H=U.selectAll("g."+o.labelGroupClass).data(z.labelSteps);H.enter().append("g").classed(o.labelGroupClass,!0),H.exit().remove(),H.each(function(F){var N=k.select(this);N.call(g,F,I),T.setTranslate(N,_(I,F.fraction),o.tickOffset+I.ticklen+I.font.size*n+o.labelOffset+z.currentValueTotalHeight)})}function p(P,I,U,z,H){var F=Math.round(z*(U._stepCount-1)),N=U._visibleSteps[F]._index;N!==U.active&&m(P,I,U,N,!0,H)}function m(P,I,U,z,H,F){var N=U.active;U.active=z,t(P.layout,o.name,U).applyUpdate("active",z);var B=U.steps[U.active];I.call(S,U,F),I.call(b,U),P.emit("plotly_sliderchange",{slider:U,step:U.steps[U.active],interaction:H,previousActive:N}),B&&B.method&&H&&(I._nextMethod?(I._nextMethod.step=B,I._nextMethod.doCallback=H,I._nextMethod.doTransition=F):(I._nextMethod={step:B,doCallback:H,doTransition:F},I._nextMethodRaf=window.requestAnimationFrame(function(){var j=I._nextMethod.step;j.method&&(j.execute&&A.executeAPICommand(P,j.method,j.args),I._nextMethod=null,I._nextMethodRaf=null)})))}function w(P,I,U){if(!I._context.staticPlot){var z=U.node(),H=k.select(I);P.on("mousedown",N),P.on("touchstart",N)}function F(){return U.data()[0]}function N(){var B=F();I.emit("plotly_sliderstart",{slider:B});var j=U.select("."+o.gripRectClass);k.event.stopPropagation(),k.event.preventDefault(),j.call(l.fill,B.activebgcolor);var K=E(B,k.mouse(z)[0]);function G(){var W=F(),J=E(W,k.mouse(z)[0]);p(I,U,W,J,!1)}function V(){var W=F();W._dragging=!1,j.call(l.fill,W.bgcolor),H.on("mouseup",null),H.on("mousemove",null),H.on("touchend",null),H.on("touchmove",null),I.emit("plotly_sliderend",{slider:W,step:W.steps[W.active]})}p(I,U,B,K,!0),B._dragging=!0,H.on("mousemove",G),H.on("touchmove",G),H.on("mouseup",V),H.on("touchend",V)}}function u(P,I){var U=P.selectAll("rect."+o.tickRectClass).data(I._visibleSteps),z=I._dims;U.enter().append("rect").classed(o.tickRectClass,!0),U.exit().remove(),U.attr({width:I.tickwidth+"px","shape-rendering":"crispEdges"}),U.each(function(H,F){var N=F%z.labelStride==0,B=k.select(this);B.attr({height:N?I.ticklen:I.minorticklen}).call(l.fill,I.tickcolor),T.setTranslate(B,_(I,F/(I._stepCount-1))-.5*I.tickwidth,(N?o.tickOffset:o.minorTickOffset)+z.currentValueTotalHeight)})}function S(P,I,U){for(var z=P.select("rect."+o.gripRectClass),H=0,F=0;F<I._stepCount;F++)if(I._visibleSteps[F]._index===I.active){H=F;break}var N=_(I,H/(I._stepCount-1));if(!I._invokingCommand){var B=z;U&&I.transition.duration>0&&(B=B.transition().duration(I.transition.duration).ease(I.transition.easing)),B.attr("transform",d(N-.5*o.gripWidth,I._dims.currentValueTotalHeight))}}function _(P,I){var U=P._dims;return U.inputAreaStart+o.stepInset+(U.inputAreaLength-2*o.stepInset)*Math.min(1,Math.max(0,I))}function E(P,I){var U=P._dims;return Math.min(1,Math.max(0,(I-o.stepInset-U.inputAreaStart)/(U.inputAreaLength-2*o.stepInset-2*U.inputAreaStart)))}function L(P,I,U){var z=U._dims,H=x.ensureSingle(P,"rect",o.railTouchRectClass,function(F){F.call(w,I,P,U).style("pointer-events","all")});H.attr({width:z.inputAreaLength,height:Math.max(z.inputAreaWidth,o.tickOffset+U.ticklen+z.labelHeight)}).call(l.fill,U.bgcolor).attr("opacity",0),T.setTranslate(H,0,z.currentValueTotalHeight)}function C(P,I){var U=I._dims,z=U.inputAreaLength-2*o.railInset,H=x.ensureSingle(P,"rect",o.railRectClass);H.attr({width:z,height:o.railWidth,rx:o.railRadius,ry:o.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,I.bordercolor).call(l.fill,I.bgcolor).style("stroke-width",I.borderwidth+"px"),T.setTranslate(H,o.railInset,.5*(U.inputAreaWidth-o.railWidth)+U.currentValueTotalHeight)}$.exports=function(P){var I=P._context.staticPlot,U=P._fullLayout,z=function(K,G){for(var V=K[o.name],W=[],J=0;J<V.length;J++){var X=V[J];X.visible&&(X._gd=G,W.push(X))}return W}(U,P),H=U._infolayer.selectAll("g."+o.containerClassName).data(z.length>0?[0]:[]);function F(K){K._commandObserver&&(K._commandObserver.remove(),delete K._commandObserver),A.autoMargin(P,c(K))}if(H.enter().append("g").classed(o.containerClassName,!0).style("cursor",I?null:"ew-resize"),H.exit().each(function(){k.select(this).selectAll("g."+o.groupClassName).each(F)}).remove(),z.length!==0){var N=H.selectAll("g."+o.groupClassName).data(z,h);N.enter().append("g").classed(o.groupClassName,!0),N.exit().each(F).remove();for(var B=0;B<z.length;B++){var j=z[B];f(P,j)}N.each(function(K){var G=k.select(this);(function(V){var W=V._dims;W.labelSteps=[];for(var J=V._stepCount,X=0;X<J;X+=W.labelStride)W.labelSteps.push({fraction:X/(J-1),step:V._visibleSteps[X]})})(K),A.manageCommandObserver(P,K,K._visibleSteps,function(V){var W=G.data()[0];W.active!==V.index&&(W._dragging||m(P,G,W,V.index,!1,!0))}),function(V,W,J){(J.steps[J.active]||{}).visible||(J.active=J._visibleSteps[0]._index),W.call(b,J).call(C,J).call(y,J).call(u,J).call(L,V,J).call(v,V,J);var X=J._dims;T.setTranslate(W,X.lx+J.pad.l,X.ly+J.pad.t),W.call(S,J,!1),W.call(b,J)}(P,k.select(this),K)})}}},23243:function($,R,e){var k=e(98292);$.exports={moduleType:"component",name:k.name,layoutAttributes:e(75067),supplyLayoutDefaults:e(12343),draw:e(44504)}},92998:function($,R,e){var k=e(39898),A=e(92770),l=e(74875),T=e(73972),x=e(71828),d=x.strTranslate,s=e(91424),t=e(7901),o=e(63893),r=e(37822),n=e(18783).OPPOSITE_SIDE,a=/ [XY][0-9]* /;$.exports={draw:function(i,c,h){var f,b=h.propContainer,v=h.propName,g=h.placeholder,y=h.traceIndex,p=h.avoid||{},m=h.attributes,w=h.transform,u=h.containerGroup,S=i._fullLayout,_=1,E=!1,L=b.title,C=(L&&L.text?L.text:"").trim(),P=L&&L.font?L.font:{},I=P.family,U=P.size,z=P.color;v==="title.text"?f="titleText":v.indexOf("axis")!==-1?f="axisTitleText":v.indexOf(!0)&&(f="colorbarTitleText");var H=i._context.edits[f];C===""?_=0:C.replace(a," % ")===g.replace(a," % ")&&(_=.2,E=!0,H||(C="")),h._meta?C=x.templateString(C,h._meta):S._meta&&(C=x.templateString(C,S._meta));var F,N=C||H;u||(u=x.ensureSingle(S._infolayer,"g","g-"+c),F=S._hColorbarMoveTitle);var B=u.selectAll("text").data(N?[0]:[]);if(B.enter().append("text"),B.text(C).attr("class",c),B.exit().remove(),!N)return u;function j(V){x.syncOrAsync([K,G],V)}function K(V){var W;return!w&&F&&(w={}),w?(W="",w.rotate&&(W+="rotate("+[w.rotate,m.x,m.y]+")"),(w.offset||F)&&(W+=d(0,(w.offset||0)-(F||0)))):W=null,V.attr("transform",W),V.style({"font-family":I,"font-size":k.round(U,2)+"px",fill:t.rgb(z),opacity:_*t.opacity(z),"font-weight":l.fontWeight}).attr(m).call(o.convertToTspans,i),l.previousPromises(i)}function G(V){var W=k.select(V.node().parentNode);if(p&&p.selection&&p.side&&C){W.attr("transform",null);var J=n[p.side],X=p.side==="left"||p.side==="top"?-1:1,ee=A(p.pad)?p.pad:2,re=s.bBox(W.node()),ie={left:0,top:0,right:S.width,bottom:S.height},se=p.maxShift||X*(ie[p.side]-re[p.side]),fe=0;if(se<0)fe=se;else{var ye=p.offsetLeft||0,ge=p.offsetTop||0;re.left-=ye,re.right-=ye,re.top-=ge,re.bottom-=ge,p.selection.each(function(){var ve=s.bBox(this);x.bBoxIntersect(re,ve,ee)&&(fe=Math.max(fe,X*(ve[p.side]-re[J])+ee))}),fe=Math.min(se,fe),b._titleScoot=Math.abs(fe)}if(fe>0||se<0){var he={left:[-fe,0],right:[fe,0],top:[0,-fe],bottom:[0,fe]}[p.side];W.attr("transform",d(he[0],he[1]))}}}return B.call(j),H&&(C?B.on(".opacity",null):(_=0,E=!0,B.text(g).on("mouseover.opacity",function(){k.select(this).transition().duration(r.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){k.select(this).transition().duration(r.HIDE_PLACEHOLDER).style("opacity",0)})),B.call(o.makeEditable,{gd:i}).on("edit",function(V){y!==void 0?T.call("_guiRestyle",i,v,V,y):T.call("_guiRelayout",i,v,V)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(j)}).on("input",function(V){this.text(V||" ").call(o.positionText,m.x,m.y)})),B.classed("js-placeholder",E),u}}},7163:function($,R,e){var k=e(41940),A=e(22399),l=e(1426).extendFlat,T=e(30962).overrideAll,x=e(35025),d=e(44467).templatedArray,s=d("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});$.exports=T(d("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:s,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:l(x({editType:"arraydraw"}),{}),font:k({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:A.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function($){$.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},64897:function($,R,e){var k=e(71828),A=e(85501),l=e(7163),T=e(75909).name,x=l.buttons;function d(t,o,r){function n(a,i){return k.coerce(t,o,l,a,i)}n("visible",A(t,o,{name:"buttons",handleItemDefaults:s}).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),k.noneOrAll(t,o,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),k.coerceFont(n,"font",r.font),n("bgcolor",r.paper_bgcolor),n("bordercolor"),n("borderwidth"))}function s(t,o){function r(n,a){return k.coerce(t,o,x,n,a)}r("visible",t.method==="skip"||Array.isArray(t.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}$.exports=function(t,o){A(t,o,{name:T,handleItemDefaults:d})}},13689:function($,R,e){var k=e(39898),A=e(74875),l=e(7901),T=e(91424),x=e(71828),d=e(63893),s=e(44467).arrayEditor,t=e(18783).LINE_SPACING,o=e(75909),r=e(25849);function n(_){return _._index}function a(_,E){return+_.attr(o.menuIndexAttrName)===E._index}function i(_,E,L,C,P,I,U,z){E.active=U,s(_.layout,o.name,E).applyUpdate("active",U),E.type==="buttons"?h(_,C,null,null,E):E.type==="dropdown"&&(P.attr(o.menuIndexAttrName,"-1"),c(_,C,P,I,E),z||h(_,C,P,I,E))}function c(_,E,L,C,P){var I=x.ensureSingle(E,"g",o.headerClassName,function(B){B.style("pointer-events","all")}),U=P._dims,z=P.active,H=P.buttons[z]||o.blankHeaderOpts,F={y:P.pad.t,yPad:0,x:P.pad.l,xPad:0,index:0},N={width:U.headerWidth,height:U.headerHeight};I.call(f,P,H,_).call(u,P,F,N),x.ensureSingle(E,"text",o.headerArrowClassName,function(B){B.attr("text-anchor","end").call(T.font,P.font).text(o.arrowSymbol[P.direction])}).attr({x:U.headerWidth-o.arrowOffsetX+P.pad.l,y:U.headerHeight/2+o.textOffsetY+P.pad.t}),I.on("click",function(){L.call(S,String(a(L,P)?-1:P._index)),h(_,E,L,C,P)}),I.on("mouseover",function(){I.call(y)}),I.on("mouseout",function(){I.call(p,P)}),T.setTranslate(E,U.lx,U.ly)}function h(_,E,L,C,P){L||(L=E).attr("pointer-events","all");var I=function(W){return+W.attr(o.menuIndexAttrName)==-1}(L)&&P.type!=="buttons"?[]:P.buttons,U=P.type==="dropdown"?o.dropdownButtonClassName:o.buttonClassName,z=L.selectAll("g."+U).data(x.filterVisible(I)),H=z.enter().append("g").classed(U,!0),F=z.exit();P.type==="dropdown"?(H.attr("opacity","0").transition().attr("opacity","1"),F.transition().attr("opacity","0").remove()):F.remove();var N=0,B=0,j=P._dims,K=["up","down"].indexOf(P.direction)!==-1;P.type==="dropdown"&&(K?B=j.headerHeight+o.gapButtonHeader:N=j.headerWidth+o.gapButtonHeader),P.type==="dropdown"&&P.direction==="up"&&(B=-o.gapButtonHeader+o.gapButton-j.openHeight),P.type==="dropdown"&&P.direction==="left"&&(N=-o.gapButtonHeader+o.gapButton-j.openWidth);var G={x:j.lx+N+P.pad.l,y:j.ly+B+P.pad.t,yPad:o.gapButton,xPad:o.gapButton,index:0},V={l:G.x+P.borderwidth,t:G.y+P.borderwidth};z.each(function(W,J){var X=k.select(this);X.call(f,P,W,_).call(u,P,G),X.on("click",function(){k.event.defaultPrevented||(W.execute&&(W.args2&&P.active===J?(i(_,P,0,E,L,C,-1),A.executeAPICommand(_,W.method,W.args2)):(i(_,P,0,E,L,C,J),A.executeAPICommand(_,W.method,W.args))),_.emit("plotly_buttonclicked",{menu:P,button:W,active:P.active}))}),X.on("mouseover",function(){X.call(y)}),X.on("mouseout",function(){X.call(p,P),z.call(g,P)})}),z.call(g,P),K?(V.w=Math.max(j.openWidth,j.headerWidth),V.h=G.y-V.t):(V.w=G.x-V.l,V.h=Math.max(j.openHeight,j.headerHeight)),V.direction=P.direction,C&&(z.size()?function(W,J,X,ee,re,ie){var se,fe,ye,ge=re.direction,he=ge==="up"||ge==="down",ve=re._dims,Oe=re.active;if(he)for(fe=0,ye=0;ye<Oe;ye++)fe+=ve.heights[ye]+o.gapButton;else for(se=0,ye=0;ye<Oe;ye++)se+=ve.widths[ye]+o.gapButton;ee.enable(ie,se,fe),ee.hbar&&ee.hbar.attr("opacity","0").transition().attr("opacity","1"),ee.vbar&&ee.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,C,P,V):function(W){var J=!!W.hbar,X=!!W.vbar;J&&W.hbar.transition().attr("opacity","0").each("end",function(){J=!1,X||W.disable()}),X&&W.vbar.transition().attr("opacity","0").each("end",function(){X=!1,J||W.disable()})}(C))}function f(_,E,L,C){_.call(b,E).call(v,E,L,C)}function b(_,E){x.ensureSingle(_,"rect",o.itemRectClassName,function(L){L.attr({rx:o.rx,ry:o.ry,"shape-rendering":"crispEdges"})}).call(l.stroke,E.bordercolor).call(l.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function v(_,E,L,C){var P=x.ensureSingle(_,"text",o.itemTextClassName,function(z){z.attr({"text-anchor":"start","data-notex":1})}),I=L.label,U=C._fullLayout._meta;U&&(I=x.templateString(I,U)),P.call(T.font,E.font).text(I).call(d.convertToTspans,C)}function g(_,E){var L=E.active;_.each(function(C,P){var I=k.select(this);P===L&&E.showactive&&I.select("rect."+o.itemRectClassName).call(l.fill,o.activeColor)})}function y(_){_.select("rect."+o.itemRectClassName).call(l.fill,o.hoverColor)}function p(_,E){_.select("rect."+o.itemRectClassName).call(l.fill,E.bgcolor)}function m(_,E){var L=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},C=T.tester.selectAll("g."+o.dropdownButtonClassName).data(x.filterVisible(E.buttons));C.enter().append("g").classed(o.dropdownButtonClassName,!0);var P=["up","down"].indexOf(E.direction)!==-1;C.each(function(N,B){var j=k.select(this);j.call(f,E,N,_);var K=j.select("."+o.itemTextClassName),G=K.node()&&T.bBox(K.node()).width,V=Math.max(G+o.textPadX,o.minWidth),W=E.font.size*t,J=d.lineCount(K),X=Math.max(W*J,o.minHeight)+o.textOffsetY;X=Math.ceil(X),V=Math.ceil(V),L.widths[B]=V,L.heights[B]=X,L.height1=Math.max(L.height1,X),L.width1=Math.max(L.width1,V),P?(L.totalWidth=Math.max(L.totalWidth,V),L.openWidth=L.totalWidth,L.totalHeight+=X+o.gapButton,L.openHeight+=X+o.gapButton):(L.totalWidth+=V+o.gapButton,L.openWidth+=V+o.gapButton,L.totalHeight=Math.max(L.totalHeight,X),L.openHeight=L.totalHeight)}),P?L.totalHeight-=o.gapButton:L.totalWidth-=o.gapButton,L.headerWidth=L.width1+o.arrowPadX,L.headerHeight=L.height1,E.type==="dropdown"&&(P?(L.width1+=o.arrowPadX,L.totalHeight=L.height1):L.totalWidth=L.width1,L.totalWidth+=o.arrowPadX),C.remove();var I=L.totalWidth+E.pad.l+E.pad.r,U=L.totalHeight+E.pad.t+E.pad.b,z=_._fullLayout._size;L.lx=z.l+z.w*E.x,L.ly=z.t+z.h*(1-E.y);var H="left";x.isRightAnchor(E)&&(L.lx-=I,H="right"),x.isCenterAnchor(E)&&(L.lx-=I/2,H="center");var F="top";x.isBottomAnchor(E)&&(L.ly-=U,F="bottom"),x.isMiddleAnchor(E)&&(L.ly-=U/2,F="middle"),L.totalWidth=Math.ceil(L.totalWidth),L.totalHeight=Math.ceil(L.totalHeight),L.lx=Math.round(L.lx),L.ly=Math.round(L.ly),A.autoMargin(_,w(E),{x:E.x,y:E.y,l:I*({right:1,center:.5}[H]||0),r:I*({left:1,center:.5}[H]||0),b:U*({top:1,middle:.5}[F]||0),t:U*({bottom:1,middle:.5}[F]||0)})}function w(_){return o.autoMarginIdRoot+_._index}function u(_,E,L,C){C=C||{};var P=_.select("."+o.itemRectClassName),I=_.select("."+o.itemTextClassName),U=E.borderwidth,z=L.index,H=E._dims;T.setTranslate(_,U+L.x,U+L.y);var F=["up","down"].indexOf(E.direction)!==-1,N=C.height||(F?H.heights[z]:H.height1);P.attr({x:0,y:0,width:C.width||(F?H.width1:H.widths[z]),height:N});var B=E.font.size*t,j=(d.lineCount(I)-1)*B/2;d.positionText(I,o.textOffsetX,N/2-j+o.textOffsetY),F?L.y+=H.heights[z]+L.yPad:L.x+=H.widths[z]+L.xPad,L.index++}function S(_,E){_.attr(o.menuIndexAttrName,E||"-1").selectAll("g."+o.dropdownButtonClassName).remove()}$.exports=function(_){var E=_._fullLayout,L=x.filterVisible(E[o.name]);function C(B){A.autoMargin(_,w(B))}var P=E._menulayer.selectAll("g."+o.containerClassName).data(L.length>0?[0]:[]);if(P.enter().append("g").classed(o.containerClassName,!0).style("cursor","pointer"),P.exit().each(function(){k.select(this).selectAll("g."+o.headerGroupClassName).each(C)}).remove(),L.length!==0){var I=P.selectAll("g."+o.headerGroupClassName).data(L,n);I.enter().append("g").classed(o.headerGroupClassName,!0);for(var U=x.ensureSingle(P,"g",o.dropdownButtonGroupClassName,function(B){B.style("pointer-events","all")}),z=0;z<L.length;z++){var H=L[z];m(_,H)}var F="updatemenus"+E._uid,N=new r(_,U,F);I.enter().size()&&(U.node().parentNode.appendChild(U.node()),U.call(S)),I.exit().each(function(B){U.call(S),C(B)}).remove(),I.each(function(B){var j=k.select(this),K=B.type==="dropdown"?U:null;A.manageCommandObserver(_,B,B.buttons,function(G){i(_,B,B.buttons[G.index],j,K,N,G.index,!0)}),B.type==="dropdown"?(c(_,j,U,N,B),a(U,B)&&h(_,j,U,N,B)):h(_,j,null,null,B)})}}},20763:function($,R,e){var k=e(75909);$.exports={moduleType:"component",name:k.name,layoutAttributes:e(7163),supplyLayoutDefaults:e(64897),draw:e(13689)}},25849:function($,R,e){$.exports=x;var k=e(39898),A=e(7901),l=e(91424),T=e(71828);function x(d,s,t){this.gd=d,this.container=s,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}x.barWidth=2,x.barLength=20,x.barRadius=2,x.barPad=1,x.barColor="#808BA4",x.prototype.enable=function(d,s,t){var o=this.gd._fullLayout,r=o.width,n=o.height;this.position=d;var a,i,c,h,f=this.position.l,b=this.position.w,v=this.position.t,g=this.position.h,y=this.position.direction,p=y==="down",m=y==="left",w=y==="up",u=b,S=g;p||m||y==="right"||w||(this.position.direction="down",p=!0),p||w?(i=(a=f)+u,p?(c=v,S=(h=Math.min(c+S,n))-c):S=(h=v+S)-(c=Math.max(h-S,0))):(h=(c=v)+S,m?u=(i=f+u)-(a=Math.max(i-u,0)):(a=f,u=(i=Math.min(a+u,r))-a)),this._box={l:a,t:c,w:u,h:S};var _=b>u,E=x.barLength+2*x.barPad,L=x.barWidth+2*x.barPad,C=f,P=v+g;P+L>n&&(P=n-L);var I=this.container.selectAll("rect.scrollbar-horizontal").data(_?[0]:[]);I.exit().on(".drag",null).remove(),I.enter().append("rect").classed("scrollbar-horizontal",!0).call(A.fill,x.barColor),_?(this.hbar=I.attr({rx:x.barRadius,ry:x.barRadius,x:C,y:P,width:E,height:L}),this._hbarXMin=C+E/2,this._hbarTranslateMax=u-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var U=g>S,z=x.barWidth+2*x.barPad,H=x.barLength+2*x.barPad,F=f+b,N=v;F+z>r&&(F=r-z);var B=this.container.selectAll("rect.scrollbar-vertical").data(U?[0]:[]);B.exit().on(".drag",null).remove(),B.enter().append("rect").classed("scrollbar-vertical",!0).call(A.fill,x.barColor),U?(this.vbar=B.attr({rx:x.barRadius,ry:x.barRadius,x:F,y:N,width:z,height:H}),this._vbarYMin=N+H/2,this._vbarTranslateMax=S-H):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var j=this.id,K=a-.5,G=U?i+z+.5:i+.5,V=c-.5,W=_?h+L+.5:h+.5,J=o._topdefs.selectAll("#"+j).data(_||U?[0]:[]);if(J.exit().remove(),J.enter().append("clipPath").attr("id",j).append("rect"),_||U?(this._clipRect=J.select("rect").attr({x:Math.floor(K),y:Math.floor(V),width:Math.ceil(G)-Math.floor(K),height:Math.ceil(W)-Math.floor(V)}),this.container.call(l.setClipUrl,j,this.gd),this.bg.attr({x:f,y:v,width:b,height:g})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),_||U){var X=k.behavior.drag().on("dragstart",function(){k.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(X);var ee=k.behavior.drag().on("dragstart",function(){k.event.sourceEvent.preventDefault(),k.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));_&&this.hbar.on(".drag",null).call(ee),U&&this.vbar.on(".drag",null).call(ee)}this.setTranslate(s,t)},x.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},x.prototype._onBoxDrag=function(){var d=this.translateX,s=this.translateY;this.hbar&&(d-=k.event.dx),this.vbar&&(s-=k.event.dy),this.setTranslate(d,s)},x.prototype._onBoxWheel=function(){var d=this.translateX,s=this.translateY;this.hbar&&(d+=k.event.deltaY),this.vbar&&(s+=k.event.deltaY),this.setTranslate(d,s)},x.prototype._onBarDrag=function(){var d=this.translateX,s=this.translateY;if(this.hbar){var t=d+this._hbarXMin,o=t+this._hbarTranslateMax;d=(T.constrain(k.event.x,t,o)-t)/(o-t)*(this.position.w-this._box.w)}if(this.vbar){var r=s+this._vbarYMin,n=r+this._vbarTranslateMax;s=(T.constrain(k.event.y,r,n)-r)/(n-r)*(this.position.h-this._box.h)}this.setTranslate(d,s)},x.prototype.setTranslate=function(d,s){var t=this.position.w-this._box.w,o=this.position.h-this._box.h;if(d=T.constrain(d||0,0,t),s=T.constrain(s||0,0,o),this.translateX=d,this.translateY=s,this.container.call(l.setTranslate,this._box.l-this.position.l-d,this._box.t-this.position.t-s),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+d-.5),y:Math.floor(this.position.t+s-.5)}),this.hbar){var r=d/t;this.hbar.call(l.setTranslate,d+r*this._hbarTranslateMax,s)}if(this.vbar){var n=s/o;this.vbar.call(l.setTranslate,d,s+n*this._vbarTranslateMax)}}},18783:function($){$.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function($){$.exports={axisRefDescription:function(R,e,k){return["If set to a",R,"axis id (e.g. *"+R+"* or","*"+R+"2*), the `"+R+"` position refers to a",R,"coordinate. If set to *paper*, the `"+R+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+k+"). If set to a",R,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+R+"2 domain* refers to the domain of the second",R," axis and a",R,"position of 0.5 refers to the","point between the",e,"and the",k,"of the domain of the","second",R,"axis."].join(" ")}}},22372:function($){$.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},31562:function($){$.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function($){$.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function($){$.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function($){$.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},37822:function($){$.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function($){$.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},77922:function($,R){R.xmlns="http://www.w3.org/2000/xmlns/",R.svg="http://www.w3.org/2000/svg",R.xlink="http://www.w3.org/1999/xlink",R.svgAttrs={xmlns:R.svg,"xmlns:xlink":R.xlink}},8729:function($,R,e){R.version=e(11506).version,e(7417),e(98847);for(var k=e(73972),A=R.register=k.register,l=e(10641),T=Object.keys(l),x=0;x<T.length;x++){var d=T[x];d.charAt(0)!=="_"&&(R[d]=l[d]),A({moduleType:"apiMethod",name:d,fn:l[d]})}A(e(67368)),A([e(2199),e(30211),e(32745),e(2468),e(47322),e(89853),e(68804),e(20763),e(23243),e(13137),e(97218),e(83312),e(37369),e(21081),e(12311),e(64168)]),A([e(92177),e(37815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(A(window.PlotlyLocales),delete window.PlotlyLocales),R.Icons=e(24255);var s=e(30211),t=e(74875);R.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},R.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},R.Snapshot=e(44511),R.PlotSchema=e(86281)},24255:function($){$.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},99863:function($,R){R.isLeftAnchor=function(e){return e.xanchor==="left"||e.xanchor==="auto"&&e.x<=.3333333333333333},R.isCenterAnchor=function(e){return e.xanchor==="center"||e.xanchor==="auto"&&e.x>.3333333333333333&&e.x<.6666666666666666},R.isRightAnchor=function(e){return e.xanchor==="right"||e.xanchor==="auto"&&e.x>=.6666666666666666},R.isTopAnchor=function(e){return e.yanchor==="top"||e.yanchor==="auto"&&e.y>=.6666666666666666},R.isMiddleAnchor=function(e){return e.yanchor==="middle"||e.yanchor==="auto"&&e.y>.3333333333333333&&e.y<.6666666666666666},R.isBottomAnchor=function(e){return e.yanchor==="bottom"||e.yanchor==="auto"&&e.y<=.3333333333333333}},26348:function($,R,e){var k=e(64872),A=k.mod,l=k.modHalf,T=Math.PI,x=2*T;function d(r){return Math.abs(r[1]-r[0])>x-1e-14}function s(r,n){return l(n-r,x)}function t(r,n){if(d(n))return!0;var a,i;n[0]<n[1]?(a=n[0],i=n[1]):(a=n[1],i=n[0]),(a=A(a,x))>(i=A(i,x))&&(i+=x);var c=A(r,x),h=c+x;return c>=a&&c<=i||h>=a&&h<=i}function o(r,n,a,i,c,h,f){c=c||0,h=h||0;var b,v,g,y,p,m=d([a,i]);function w(E,L){return[E*Math.cos(L)+c,h-E*Math.sin(L)]}m?(b=0,v=T,g=x):a<i?(b=a,g=i):(b=i,g=a),r<n?(y=r,p=n):(y=n,p=r);var u,S=Math.abs(g-b)<=T?0:1;function _(E,L,C){return"A"+[E,E]+" "+[0,S,C]+" "+w(E,L)}return m?u=y===null?"M"+w(p,b)+_(p,v,0)+_(p,g,0)+"Z":"M"+w(y,b)+_(y,v,0)+_(y,g,0)+"ZM"+w(p,b)+_(p,v,1)+_(p,g,1)+"Z":y===null?(u="M"+w(p,b)+_(p,g,0),f&&(u+="L0,0Z")):u="M"+w(y,b)+"L"+w(p,b)+_(p,g,0)+"L"+w(y,g)+_(y,b,1)+"Z",u}$.exports={deg2rad:function(r){return r/180*T},rad2deg:function(r){return r/T*180},angleDelta:s,angleDist:function(r,n){return Math.abs(s(r,n))},isFullCircle:d,isAngleInsideSector:t,isPtInsideSector:function(r,n,a,i){return!!t(n,i)&&(a[0]<a[1]?(c=a[0],h=a[1]):(c=a[1],h=a[0]),r>=c&&r<=h);var c,h},pathArc:function(r,n,a,i,c){return o(null,r,n,a,i,c,0)},pathSector:function(r,n,a,i,c){return o(null,r,n,a,i,c,1)},pathAnnulus:function(r,n,a,i,c,h){return o(r,n,a,i,c,h,1)}}},73627:function($,R){var e=Array.isArray,k=ArrayBuffer,A=DataView;function l(d){return k.isView(d)&&!(d instanceof A)}function T(d){return e(d)||l(d)}function x(d,s,t){if(T(d)){if(T(d[0])){for(var o=t,r=0;r<d.length;r++)o=s(o,d[r].length);return o}return d.length}return 0}R.isTypedArray=l,R.isArrayOrTypedArray=T,R.isArray1D=function(d){return!T(d[0])},R.ensureArray=function(d,s){return e(d)||(d=[]),d.length=s,d},R.concat=function(){var d,s,t,o,r,n,a,i,c=[],h=!0,f=0;for(t=0;t<arguments.length;t++)(n=(o=arguments[t]).length)&&(s?c.push(o):(s=o,r=n),e(o)?d=!1:(h=!1,f?d!==o.constructor&&(d=!1):d=o.constructor),f+=n);if(!f)return[];if(!c.length)return s;if(h)return s.concat.apply(s,c);if(d){for((a=new d(f)).set(s),t=0;t<c.length;t++)o=c[t],a.set(o,r),r+=o.length;return a}for(a=new Array(f),i=0;i<s.length;i++)a[i]=s[i];for(t=0;t<c.length;t++){for(o=c[t],i=0;i<o.length;i++)a[r+i]=o[i];r+=i}return a},R.maxRowLength=function(d){return x(d,Math.max,0)},R.minRowLength=function(d){return x(d,Math.min,1/0)}},95218:function($,R,e){var k=e(92770),A=e(50606).BADNUM,l=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;$.exports=function(T){return typeof T=="string"&&(T=T.replace(l,"")),k(T)?Number(T):A}},33306:function($){$.exports=function(R){var e=R._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(k){k.regl&&k.regl.clear({color:!0,depth:!0})})}},86367:function($){$.exports=function(R){R._responsiveChartHandler&&(window.removeEventListener("resize",R._responsiveChartHandler),delete R._responsiveChartHandler)}},96554:function($,R,e){var k=e(92770),A=e(84267),l=e(9012),T=e(63282),x=e(7901),d=e(37822).DESELECTDIM,s=e(65487),t=e(30587).counter,o=e(64872).modHalf,r=e(73627).isArrayOrTypedArray;function n(a,i){var c=R.valObjectMeta[i.valType];if(i.arrayOk&&r(a))return!0;if(c.validateFunction)return c.validateFunction(a,i);var h={},f=h,b={set:function(v){f=v}};return c.coerceFunction(a,b,h,i),f!==h}R.valObjectMeta={data_array:{coerceFunction:function(a,i,c){r(a)?i.set(a):c!==void 0&&i.set(c)}},enumerated:{coerceFunction:function(a,i,c,h){h.coerceNumber&&(a=+a),h.values.indexOf(a)===-1?i.set(c):i.set(a)},validateFunction:function(a,i){i.coerceNumber&&(a=+a);for(var c=i.values,h=0;h<c.length;h++){var f=String(c[h]);if(f.charAt(0)==="/"&&f.charAt(f.length-1)==="/"){if(new RegExp(f.substr(1,f.length-2)).test(a))return!0}else if(a===c[h])return!0}return!1}},boolean:{coerceFunction:function(a,i,c){a===!0||a===!1?i.set(a):i.set(c)}},number:{coerceFunction:function(a,i,c,h){!k(a)||h.min!==void 0&&a<h.min||h.max!==void 0&&a>h.max?i.set(c):i.set(+a)}},integer:{coerceFunction:function(a,i,c,h){a%1||!k(a)||h.min!==void 0&&a<h.min||h.max!==void 0&&a>h.max?i.set(c):i.set(+a)}},string:{coerceFunction:function(a,i,c,h){if(typeof a!="string"){var f=typeof a=="number";h.strict!==!0&&f?i.set(String(a)):i.set(c)}else h.noBlank&&!a?i.set(c):i.set(a)}},color:{coerceFunction:function(a,i,c){A(a).isValid()?i.set(a):i.set(c)}},colorlist:{coerceFunction:function(a,i,c){Array.isArray(a)&&a.length&&a.every(function(h){return A(h).isValid()})?i.set(a):i.set(c)}},colorscale:{coerceFunction:function(a,i,c){i.set(T.get(a,c))}},angle:{coerceFunction:function(a,i,c){a==="auto"?i.set("auto"):k(a)?i.set(o(+a,360)):i.set(c)}},subplotid:{coerceFunction:function(a,i,c,h){var f=h.regex||t(c);typeof a=="string"&&f.test(a)?i.set(a):i.set(c)},validateFunction:function(a,i){var c=i.dflt;return a===c||typeof a=="string"&&!!t(c).test(a)}},flaglist:{coerceFunction:function(a,i,c,h){if((h.extras||[]).indexOf(a)===-1)if(typeof a=="string"){for(var f=a.split("+"),b=0;b<f.length;){var v=f[b];h.flags.indexOf(v)===-1||f.indexOf(v)<b?f.splice(b,1):b++}f.length?i.set(f.join("+")):i.set(c)}else i.set(c);else i.set(a)}},any:{coerceFunction:function(a,i,c){a===void 0?i.set(c):i.set(a)}},info_array:{coerceFunction:function(a,i,c,h){function f(P,I,U){var z,H={set:function(F){z=F}};return U===void 0&&(U=I.dflt),R.valObjectMeta[I.valType].coerceFunction(P,H,U,I),z}var b=h.dimensions===2||h.dimensions==="1-2"&&Array.isArray(a)&&Array.isArray(a[0]);if(Array.isArray(a)){var v,g,y,p,m,w,u=h.items,S=[],_=Array.isArray(u),E=_&&b&&Array.isArray(u[0]),L=b&&_&&!E,C=_&&!L?u.length:a.length;if(c=Array.isArray(c)?c:[],b)for(v=0;v<C;v++)for(S[v]=[],y=Array.isArray(a[v])?a[v]:[],m=L?u.length:_?u[v].length:y.length,g=0;g<m;g++)p=L?u[g]:_?u[v][g]:u,(w=f(y[g],p,(c[v]||[])[g]))!==void 0&&(S[v][g]=w);else for(v=0;v<C;v++)(w=f(a[v],_?u[v]:u,c[v]))!==void 0&&(S[v]=w);i.set(S)}else i.set(c)},validateFunction:function(a,i){if(!Array.isArray(a))return!1;var c=i.items,h=Array.isArray(c),f=i.dimensions===2;if(!i.freeLength&&a.length!==c.length)return!1;for(var b=0;b<a.length;b++)if(f){if(!Array.isArray(a[b])||!i.freeLength&&a[b].length!==c[b].length)return!1;for(var v=0;v<a[b].length;v++)if(!n(a[b][v],h?c[b][v]:c))return!1}else if(!n(a[b],h?c[b]:c))return!1;return!0}}},R.coerce=function(a,i,c,h,f){var b=s(c,h).get(),v=s(a,h),g=s(i,h),y=v.get(),p=i._template;if(y===void 0&&p&&(y=s(p,h).get(),p=0),f===void 0&&(f=b.dflt),b.arrayOk&&r(y))return g.set(y),y;var m=R.valObjectMeta[b.valType].coerceFunction;m(y,g,f,b);var w=g.get();return p&&w===f&&!n(y,b)&&(m(y=s(p,h).get(),g,f,b),w=g.get()),w},R.coerce2=function(a,i,c,h,f){var b=s(a,h),v=R.coerce(a,i,c,h,f);return b.get()!=null&&v},R.coerceFont=function(a,i,c){var h={};return c=c||{},h.family=a(i+".family",c.family),h.size=a(i+".size",c.size),h.color=a(i+".color",c.color),h},R.coercePattern=function(a,i,c,h){if(a(i+".shape")){a(i+".solidity"),a(i+".size");var f=a(i+".fillmode")==="overlay";if(!h){var b=a(i+".bgcolor",f?c:void 0);a(i+".fgcolor",f?x.contrast(b):c)}a(i+".fgopacity",f?.5:1)}},R.coerceHoverinfo=function(a,i,c){var h,f=i._module.attributes,b=f.hoverinfo?f:l,v=b.hoverinfo;if(c._dataLength===1){var g=v.dflt==="all"?v.flags.slice():v.dflt.split("+");g.splice(g.indexOf("name"),1),h=g.join("+")}return R.coerce(a,i,b,"hoverinfo",h)},R.coerceSelectionMarkerOpacity=function(a,i){if(a.marker){var c,h,f=a.marker.opacity;f!==void 0&&(r(f)||a.selected||a.unselected||(c=f,h=d*f),i("selected.marker.opacity",c),i("unselected.marker.opacity",h))}},R.validate=n},41631:function($,R,e){var k,A,l=e(84096).i$,T=e(92770),x=e(47769),d=e(64872).mod,s=e(50606),t=s.BADNUM,o=s.ONEDAY,r=s.ONEHOUR,n=s.ONEMIN,a=s.ONESEC,i=s.EPOCHJD,c=e(73972),h=e(84096).g0,f=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,v=new Date().getFullYear()-70;function g(I){return I&&c.componentsRegistry.calendars&&typeof I=="string"&&I!=="gregorian"}function y(I,U){return String(I+Math.pow(10,U)).substr(1)}R.dateTick0=function(I,U){var z=function(F,N){return g(F)?N?c.getComponentMethod("calendars","CANONICAL_SUNDAY")[F]:c.getComponentMethod("calendars","CANONICAL_TICK")[F]:N?"2000-01-02":"2000-01-01"}(I,!!U);if(U<2)return z;var H=R.dateTime2ms(z,I);return H+=o*(U-1),R.ms2DateTime(H,0,I)},R.dfltRange=function(I){return g(I)?c.getComponentMethod("calendars","DFLTRANGE")[I]:["2000-01-01","2001-01-01"]},R.isJSDate=function(I){return typeof I=="object"&&I!==null&&typeof I.getTime=="function"},R.dateTime2ms=function(I,U){if(R.isJSDate(I)){var z=I.getTimezoneOffset()*n,H=(I.getUTCMinutes()-I.getMinutes())*n+(I.getUTCSeconds()-I.getSeconds())*a+(I.getUTCMilliseconds()-I.getMilliseconds());if(H){var F=3*n;z=z-F/2+d(H-z+F/2,F)}return(I=Number(I)-z)>=k&&I<=A?I:t}if(typeof I!="string"&&typeof I!="number")return t;I=String(I);var N=g(U),B=I.charAt(0);!N||B!=="G"&&B!=="g"||(I=I.substr(1),U="");var j=N&&U.substr(0,7)==="chinese",K=I.match(j?b:f);if(!K)return t;var G=K[1],V=K[3]||"1",W=Number(K[5]||1),J=Number(K[7]||0),X=Number(K[9]||0),ee=Number(K[11]||0);if(N){if(G.length===2)return t;var re;G=Number(G);try{var ie=c.getComponentMethod("calendars","getCal")(U);if(j){var se=V.charAt(V.length-1)==="i";V=parseInt(V,10),re=ie.newDate(G,ie.toMonthIndex(G,V,se),W)}else re=ie.newDate(G,Number(V),W)}catch{return t}return re?(re.toJD()-i)*o+J*r+X*n+ee*a:t}G=G.length===2?(Number(G)+2e3-v)%100+v:Number(G),V-=1;var fe=new Date(Date.UTC(2e3,V,W,J,X));return fe.setUTCFullYear(G),fe.getUTCMonth()!==V||fe.getUTCDate()!==W?t:fe.getTime()+ee*a},k=R.MIN_MS=R.dateTime2ms("-9999"),A=R.MAX_MS=R.dateTime2ms("9999-12-31 23:59:59.9999"),R.isDateTime=function(I,U){return R.dateTime2ms(I,U)!==t};var p=90*o,m=3*r,w=5*n;function u(I,U,z,H,F){if((U||z||H||F)&&(I+=" "+y(U,2)+":"+y(z,2),(H||F)&&(I+=":"+y(H,2),F))){for(var N=4;F%10==0;)N-=1,F/=10;I+="."+y(F,N)}return I}R.ms2DateTime=function(I,U,z){if(typeof I!="number"||!(I>=k&&I<=A))return t;U||(U=0);var H,F,N,B,j,K,G=Math.floor(10*d(I+.05,1)),V=Math.round(I-G/10);if(g(z)){var W=Math.floor(V/o)+i,J=Math.floor(d(I,o));try{H=c.getComponentMethod("calendars","getCal")(z).fromJD(W).formatDate("yyyy-mm-dd")}catch{H=h("G%Y-%m-%d")(new Date(V))}if(H.charAt(0)==="-")for(;H.length<11;)H="-0"+H.substr(1);else for(;H.length<10;)H="0"+H;F=U<p?Math.floor(J/r):0,N=U<p?Math.floor(J%r/n):0,B=U<m?Math.floor(J%n/a):0,j=U<w?J%a*10+G:0}else K=new Date(V),H=h("%Y-%m-%d")(K),F=U<p?K.getUTCHours():0,N=U<p?K.getUTCMinutes():0,B=U<m?K.getUTCSeconds():0,j=U<w?10*K.getUTCMilliseconds()+G:0;return u(H,F,N,B,j)},R.ms2DateTimeLocal=function(I){if(!(I>=k+o&&I<=A-o))return t;var U=Math.floor(10*d(I+.05,1)),z=new Date(Math.round(I-U/10));return u(l("%Y-%m-%d")(z),z.getHours(),z.getMinutes(),z.getSeconds(),10*z.getUTCMilliseconds()+U)},R.cleanDate=function(I,U,z){if(I===t)return U;if(R.isJSDate(I)||typeof I=="number"&&isFinite(I)){if(g(z))return x.error("JS Dates and milliseconds are incompatible with world calendars",I),U;if(!(I=R.ms2DateTimeLocal(+I))&&U!==void 0)return U}else if(!R.isDateTime(I,z))return x.error("unrecognized date",I),U;return I};var S=/%\d?f/g,_=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function L(I,U,z,H){I=I.replace(S,function(N){var B=Math.min(+N.charAt(1)||6,6);return(U/1e3%1+2).toFixed(B).substr(2).replace(/0+$/,"")||"0"});var F=new Date(Math.floor(U+.05));if(I=I.replace(_,function(){return E[z("%q")(F)]}),g(H))try{I=c.getComponentMethod("calendars","worldCalFmt")(I,U,H)}catch{return"Invalid"}return z(I)(F)}var C=[59,59.9,59.99,59.999,59.9999];R.formatDate=function(I,U,z,H,F,N){if(F=g(F)&&F,!U)if(z==="y")U=N.year;else if(z==="m")U=N.month;else{if(z!=="d")return function(B,j){var K=d(B+.05,o),G=y(Math.floor(K/r),2)+":"+y(d(Math.floor(K/n),60),2);if(j!=="M"){T(j)||(j=0);var V=(100+Math.min(d(B/a,60),C[j])).toFixed(j).substr(1);j>0&&(V=V.replace(/0+$/,"").replace(/[\.]$/,"")),G+=":"+V}return G}(I,z)+`
`+L(N.dayMonthYear,I,H,F);U=N.dayMonth+`
`+N.year}return L(U,I,H,F)};var P=3*o;R.incrementMonth=function(I,U,z){z=g(z)&&z;var H=d(I,o);if(I=Math.round(I-H),z)try{var F=Math.round(I/o)+i,N=c.getComponentMethod("calendars","getCal")(z),B=N.fromJD(F);return U%12?N.add(B,U,"m"):N.add(B,U/12,"y"),(B.toJD()-i)*o+H}catch{x.error("invalid ms "+I+" in calendar "+z)}var j=new Date(I+P);return j.setUTCMonth(j.getUTCMonth()+U)+H-P},R.findExactDates=function(I,U){for(var z,H,F=0,N=0,B=0,j=0,K=g(U)&&c.getComponentMethod("calendars","getCal")(U),G=0;G<I.length;G++)if(H=I[G],T(H)){if(!(H%o))if(K)try{(z=K.fromJD(H/o+i)).day()===1?z.month()===1?F++:N++:B++}catch{}else(z=new Date(H)).getUTCDate()===1?z.getUTCMonth()===0?F++:N++:B++}else j++;B+=N+=F;var V=I.length-j;return{exactYears:F/V,exactMonths:N/V,exactDays:B/V}}},24401:function($,R,e){var k=e(39898),A=e(47769),l=e(35657),T=e(79576);function x(r){var n=r&&r.parentNode;n&&n.removeChild(r)}function d(r,n,a){var i="plotly.js-style-"+r,c=document.getElementById(i);c||((c=document.createElement("style")).setAttribute("id",i),c.appendChild(document.createTextNode("")),document.head.appendChild(c));var h=c.sheet;h.insertRule?h.insertRule(n+"{"+a+"}",0):h.addRule?h.addRule(n,a,0):A.warn("addStyleRule failed")}function s(r){var n=window.getComputedStyle(r,null),a=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform");return a==="none"?null:a.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(i){return+i})}function t(r){for(var n=[];o(r);)n.push(r),r=r.parentNode;return n}function o(r){return r&&(r instanceof Element||r instanceof HTMLElement)}$.exports={getGraphDiv:function(r){var n;if(typeof r=="string"){if((n=document.getElementById(r))===null)throw new Error("No DOM element with id '"+r+"' exists on the page.");return n}if(r==null)throw new Error("DOM element provided is null or undefined");return r},isPlotDiv:function(r){var n=k.select(r);return n.node()instanceof HTMLElement&&n.size()&&n.classed("js-plotly-plot")},removeElement:x,addStyleRule:function(r,n){d("global",r,n)},addRelatedStyleRule:d,deleteRelatedStyleRule:function(r){var n="plotly.js-style-"+r,a=document.getElementById(n);a&&x(a)},getFullTransformMatrix:function(r){var n=t(r),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return n.forEach(function(i){var c=s(i);if(c){var h=l.convertCssMatrix(c);a=T.multiply(a,a,h)}}),a},getElementTransformMatrix:s,getElementAndAncestors:t,equalDomRects:function(r,n){return r&&n&&r.x===n.x&&r.y===n.y&&r.top===n.top&&r.left===n.left&&r.right===n.right&&r.bottom===n.bottom}}},11086:function($,R,e){var k=e(15398).EventEmitter,A={init:function(l){if(l._ev instanceof k)return l;var T=new k,x=new k;return l._ev=T,l._internalEv=x,l.on=T.on.bind(T),l.once=T.once.bind(T),l.removeListener=T.removeListener.bind(T),l.removeAllListeners=T.removeAllListeners.bind(T),l._internalOn=x.on.bind(x),l._internalOnce=x.once.bind(x),l._removeInternalListener=x.removeListener.bind(x),l._removeAllInternalListeners=x.removeAllListeners.bind(x),l.emit=function(d,s){typeof jQuery<"u"&&jQuery(l).trigger(d,s),T.emit(d,s),x.emit(d,s)},l},triggerHandler:function(l,T,x){var d,s;typeof jQuery<"u"&&(d=jQuery(l).triggerHandler(T,x));var t=l._ev;if(!t)return d;var o,r=t._events[T];if(!r)return d;function n(a){return a.listener?(t.removeListener(T,a.listener),a.fired?void 0:(a.fired=!0,a.listener.apply(t,[x]))):a.apply(t,[x])}for(r=Array.isArray(r)?r:[r],o=0;o<r.length-1;o++)n(r[o]);return s=n(r[o]),d!==void 0?d:s},purge:function(l){return delete l._ev,delete l.on,delete l.once,delete l.removeListener,delete l.removeAllListeners,delete l.emit,delete l._ev,delete l._internalEv,delete l._internalOn,delete l._internalOnce,delete l._removeInternalListener,delete l._removeAllInternalListeners,l}};$.exports=A},1426:function($,R,e){var k=e(41965),A=Array.isArray;function l(T,x,d,s){var t,o,r,n,a,i,c,h=T[0],f=T.length;if(f===2&&A(h)&&A(T[1])&&h.length===0){if(c=function(v,g){var y,p;for(y=0;y<v.length;y++){if((p=v[y])!==null&&typeof p=="object")return!1;p!==void 0&&(g[y]=p)}return!0}(T[1],h),c)return h;h.splice(0,h.length)}for(var b=1;b<f;b++)for(o in t=T[b])r=h[o],n=t[o],s&&A(n)?h[o]=n:x&&n&&(k(n)||(a=A(n)))?(a?(a=!1,i=r&&A(r)?r:[]):i=r&&k(r)?r:{},h[o]=l([i,n],x,d,s)):(n!==void 0||d)&&(h[o]=n);return h}R.extendFlat=function(){return l(arguments,!1,!1,!1)},R.extendDeep=function(){return l(arguments,!0,!1,!1)},R.extendDeepAll=function(){return l(arguments,!0,!0,!1)},R.extendDeepNoArrays=function(){return l(arguments,!0,!1,!0)}},75744:function($){$.exports=function(R){for(var e={},k=[],A=0,l=0;l<R.length;l++){var T=R[l];e[T]!==1&&(e[T]=1,k[A++]=T)}return k}},76756:function($){function R(k){return k.visible===!0}function e(k){var A=k[0].trace;return A.visible===!0&&A._length!==0}$.exports=function(k){for(var A,l=(A=k,Array.isArray(A)&&Array.isArray(A[0])&&A[0][0]&&A[0][0].trace?e:R),T=[],x=0;x<k.length;x++){var d=k[x];l(d)&&T.push(d)}return T}},41327:function($,R,e){var k=e(39898),A=e(24138),l=e(30774),T=e(29261),x=e(85268),d=e(23389),s=e(47769),t=e(41965),o=e(65487),r=e(61082),n=Object.keys(A),a={"ISO-3":d,"USA-states":d,"country names":function(c){for(var h=0;h<n.length;h++){var f=n[h];if(new RegExp(A[f]).test(c.trim().toLowerCase()))return f}return s.log("Unrecognized country name: "+c+"."),!1}};function i(c){var h=c.geojson,f=window.PlotlyGeoAssets||{},b=typeof h=="string"?f[h]:h;return t(b)?b:(s.error("Oops ... something went wrong when fetching "+h),!1)}$.exports={locationToFeature:function(c,h,f){if(!h||typeof h!="string")return!1;var b,v,g,y=a[c](h);if(y){if(c==="USA-states")for(b=[],g=0;g<f.length;g++)(v=f[g]).properties&&v.properties.gu&&v.properties.gu==="USA"&&b.push(v);else b=f;for(g=0;g<b.length;g++)if((v=b[g]).id===y)return v;s.log(["Location with id",y,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(c){var h,f,b,v,g=c.geometry,y=g.coordinates,p=c.id,m=[];function w(u){for(var S=0;S<u.length-1;S++)if(u[S][0]>0&&u[S+1][0]<0)return S;return null}switch(h=p==="RUS"||p==="FJI"?function(u){var S;if(w(u)===null)S=u;else for(S=new Array(u.length),v=0;v<u.length;v++)S[v]=[u[v][0]<0?u[v][0]+360:u[v][0],u[v][1]];m.push(r.tester(S))}:p==="ATA"?function(u){var S=w(u);if(S===null)return m.push(r.tester(u));var _=new Array(u.length+1),E=0;for(v=0;v<u.length;v++)v>S?_[E++]=[u[v][0]+360,u[v][1]]:v===S?(_[E++]=u[v],_[E++]=[u[v][0],-90]):_[E++]=u[v];var L=r.tester(_);L.pts.pop(),m.push(L)}:function(u){m.push(r.tester(u))},g.type){case"MultiPolygon":for(f=0;f<y.length;f++)for(b=0;b<y[f].length;b++)h(y[f][b]);break;case"Polygon":for(f=0;f<y.length;f++)h(y[f])}return m},getTraceGeojson:i,extractTraceFeature:function(c){var h=c[0].trace,f=i(h);if(!f)return!1;var b,v={},g=[];for(b=0;b<h._length;b++){var y=c[b];(y.loc||y.loc===0)&&(v[y.loc]=y)}function p(u){var S=o(u,h.featureidkey||"id").get(),_=v[S];if(_){var E=u.geometry;if(E.type==="Polygon"||E.type==="MultiPolygon"){var L={type:"Feature",id:S,geometry:E,properties:{}};L.properties.ct=function(C){var P,I=C.geometry;if(I.type==="MultiPolygon")for(var U=I.coordinates,z=0,H=0;H<U.length;H++){var F={type:"Polygon",coordinates:U[H]},N=l.default(F);N>z&&(z=N,P=F)}else P=I;return T.default(P).geometry.coordinates}(L),_.fIn=u,_.fOut=L,g.push(L)}else s.log(["Location",_.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete v[S]}switch(f.type){case"FeatureCollection":var m=f.features;for(b=0;b<m.length;b++)p(m[b]);break;case"Feature":p(f);break;default:return s.warn(["Invalid GeoJSON type",(f.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var w in v)s.log(["Location *"+w+"*","does not have a matching feature with id-key","*"+h.featureidkey+"*."].join(" "));return g},fetchTraceGeoData:function(c){var h=window.PlotlyGeoAssets||{},f=[];function b(p){return new Promise(function(m,w){k.json(p,function(u,S){if(u){delete h[p];var _=u.status===404?'GeoJSON at URL "'+p+'" does not exist.':"Unexpected error while fetching from "+p;return w(new Error(_))}return h[p]=S,m(S)})})}function v(p){return new Promise(function(m,w){var u=0,S=setInterval(function(){return h[p]&&h[p]!=="pending"?(clearInterval(S),m(h[p])):u>100?(clearInterval(S),w("Unexpected error while fetching from "+p)):void u++},50)})}for(var g=0;g<c.length;g++){var y=c[g][0].trace.geojson;typeof y=="string"&&(h[y]?h[y]==="pending"&&f.push(v(y)):(h[y]="pending",f.push(b(y))))}return f},computeBbox:function(c){return x.default(c)}}},18214:function($,R,e){var k=e(50606).BADNUM;R.calcTraceToLineCoords=function(A){for(var l=A[0].trace.connectgaps,T=[],x=[],d=0;d<A.length;d++){var s=A[d].lonlat;s[0]!==k?x.push(s):!l&&x.length>0&&(T.push(x),x=[])}return x.length>0&&T.push(x),T},R.makeLine=function(A){return A.length===1?{type:"LineString",coordinates:A[0]}:{type:"MultiLineString",coordinates:A}},R.makePolygon=function(A){if(A.length===1)return{type:"Polygon",coordinates:A};for(var l=new Array(A.length),T=0;T<A.length;T++)l[T]=[A[T]];return{type:"MultiPolygon",coordinates:l}},R.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function($,R,e){var k,A,l,T=e(64872).mod;function x(s,t,o,r,n,a,i,c){var h=o-s,f=n-s,b=i-n,v=r-t,g=a-t,y=c-a,p=h*y-b*v;if(p===0)return null;var m=(f*y-b*g)/p,w=(f*v-h*g)/p;return w<0||w>1||m<0||m>1?null:{x:s+h*m,y:t+v*m}}function d(s,t,o,r,n){var a=r*s+n*t;if(a<0)return r*r+n*n;if(a>o){var i=r-s,c=n-t;return i*i+c*c}var h=r*t-n*s;return h*h/o}R.segmentsIntersect=x,R.segmentDistance=function(s,t,o,r,n,a,i,c){if(x(s,t,o,r,n,a,i,c))return 0;var h=o-s,f=r-t,b=i-n,v=c-a,g=h*h+f*f,y=b*b+v*v,p=Math.min(d(h,f,g,n-s,a-t),d(h,f,g,i-s,c-t),d(b,v,y,s-n,t-a),d(b,v,y,o-n,r-a));return Math.sqrt(p)},R.getTextLocation=function(s,t,o,r){if(s===A&&r===l||(k={},A=s,l=r),k[o])return k[o];var n=s.getPointAtLength(T(o-r/2,t)),a=s.getPointAtLength(T(o+r/2,t)),i=Math.atan((a.y-n.y)/(a.x-n.x)),c=s.getPointAtLength(T(o,t)),h={x:(4*c.x+n.x+a.x)/6,y:(4*c.y+n.y+a.y)/6,theta:i};return k[o]=h,h},R.clearLocationCache=function(){A=null},R.getVisibleSegment=function(s,t,o){var r,n,a=t.left,i=t.right,c=t.top,h=t.bottom,f=0,b=s.getTotalLength(),v=b;function g(p){var m=s.getPointAtLength(p);p===0?r=m:p===b&&(n=m);var w=m.x<a?a-m.x:m.x>i?m.x-i:0,u=m.y<c?c-m.y:m.y>h?m.y-h:0;return Math.sqrt(w*w+u*u)}for(var y=g(f);y;){if((f+=y+o)>v)return;y=g(f)}for(y=g(v);y;){if(f>(v-=y+o))return;y=g(v)}return{min:f,max:v,len:v-f,total:b,isClosed:f===0&&v===b&&Math.abs(r.x-n.x)<.1&&Math.abs(r.y-n.y)<.1}},R.findPointOnPath=function(s,t,o,r){for(var n,a,i,c=(r=r||{}).pathLength||s.getTotalLength(),h=r.tolerance||.001,f=r.iterationLimit||30,b=s.getPointAtLength(0)[o]>s.getPointAtLength(c)[o]?-1:1,v=0,g=0,y=c;v<f;){if(n=(g+y)/2,i=(a=s.getPointAtLength(n))[o]-t,Math.abs(i)<h)return a;b*i>0?y=n:g=n,v++}return a}},81697:function($,R,e){var k=e(92770),A=e(84267),l=e(25075),T=e(21081),x=e(22399).defaultLine,d=e(73627).isArrayOrTypedArray,s=l(x);function t(n,a){var i=n;return i[3]*=a,i}function o(n){if(k(n))return s;var a=l(n);return a.length?a:s}function r(n){return k(n)?n:1}$.exports={formatColor:function(n,a,i){var c,h,f,b,v,g=n.color,y=d(g),p=d(a),m=T.extractOpts(n),w=[];if(c=m.colorscale!==void 0?T.makeColorScaleFuncFromTrace(n):o,h=y?function(S,_){return S[_]===void 0?s:l(c(S[_]))}:o,f=p?function(S,_){return S[_]===void 0?1:r(S[_])}:r,y||p)for(var u=0;u<i;u++)b=h(g,u),v=f(a,u),w[u]=t(b,v);else w=t(l(g),a);return w},parseColorScale:function(n){var a=T.extractOpts(n),i=a.colorscale;return a.reversescale&&(i=T.flipScale(a.colorscale)),i.map(function(c){var h=c[0],f=A(c[1]).toRgb();return{index:h,rgb:[f.r,f.g,f.b,f.a]}})}}},28984:function($,R,e){var k=e(23389);function A(l){return[l]}$.exports={keyFun:function(l){return l.key},repeat:A,descend:k,wrap:A,unwrap:function(l){return l[0]}}},23389:function($){$.exports=function(R){return R}},39240:function($){$.exports=function(R,e){if(!e)return R;var k=1/Math.abs(e),A=k>1?(k*R+k*e)/k:R+e,l=String(A).length;if(l>16){var T=String(e).length;if(l>=String(R).length+T){var x=parseFloat(A).toPrecision(12);x.indexOf("e+")===-1&&(A=+x)}}return A}},71828:function($,R,e){var k=e(39898),A=e(84096).g0,l=e(60721).WU,T=e(92770),x=e(50606),d=x.FP_SAFE,s=-d,t=x.BADNUM,o=$.exports={};o.adjustFormat=function(G){return!G||/^\d[.]\df/.test(G)||/[.]\d%/.test(G)?G:G==="0.f"?"~f":/^\d%/.test(G)?"~%":/^\ds/.test(G)?"~s":!/^[~,.0$]/.test(G)&&/[&fps]/.test(G)?"~"+G:G};var r={};o.warnBadFormat=function(G){var V=String(G);r[V]||(r[V]=1,o.warn('encountered bad format: "'+V+'"'))},o.noFormat=function(G){return String(G)},o.numberFormat=function(G){var V;try{V=l(o.adjustFormat(G))}catch{return o.warnBadFormat(G),o.noFormat}return V},o.nestedProperty=e(65487),o.keyedContainer=e(66636),o.relativeAttr=e(6962),o.isPlainObject=e(41965),o.toLogRange=e(58163),o.relinkPrivateKeys=e(51332);var n=e(73627);o.isTypedArray=n.isTypedArray,o.isArrayOrTypedArray=n.isArrayOrTypedArray,o.isArray1D=n.isArray1D,o.ensureArray=n.ensureArray,o.concat=n.concat,o.maxRowLength=n.maxRowLength,o.minRowLength=n.minRowLength;var a=e(64872);o.mod=a.mod,o.modHalf=a.modHalf;var i=e(96554);o.valObjectMeta=i.valObjectMeta,o.coerce=i.coerce,o.coerce2=i.coerce2,o.coerceFont=i.coerceFont,o.coercePattern=i.coercePattern,o.coerceHoverinfo=i.coerceHoverinfo,o.coerceSelectionMarkerOpacity=i.coerceSelectionMarkerOpacity,o.validate=i.validate;var c=e(41631);o.dateTime2ms=c.dateTime2ms,o.isDateTime=c.isDateTime,o.ms2DateTime=c.ms2DateTime,o.ms2DateTimeLocal=c.ms2DateTimeLocal,o.cleanDate=c.cleanDate,o.isJSDate=c.isJSDate,o.formatDate=c.formatDate,o.incrementMonth=c.incrementMonth,o.dateTick0=c.dateTick0,o.dfltRange=c.dfltRange,o.findExactDates=c.findExactDates,o.MIN_MS=c.MIN_MS,o.MAX_MS=c.MAX_MS;var h=e(65888);o.findBin=h.findBin,o.sorterAsc=h.sorterAsc,o.sorterDes=h.sorterDes,o.distinctVals=h.distinctVals,o.roundUp=h.roundUp,o.sort=h.sort,o.findIndexOfMin=h.findIndexOfMin,o.sortObjectKeys=e(78607);var f=e(80038);o.aggNums=f.aggNums,o.len=f.len,o.mean=f.mean,o.median=f.median,o.midRange=f.midRange,o.variance=f.variance,o.stdev=f.stdev,o.interp=f.interp;var b=e(35657);o.init2dArray=b.init2dArray,o.transposeRagged=b.transposeRagged,o.dot=b.dot,o.translationMatrix=b.translationMatrix,o.rotationMatrix=b.rotationMatrix,o.rotationXYMatrix=b.rotationXYMatrix,o.apply3DTransform=b.apply3DTransform,o.apply2DTransform=b.apply2DTransform,o.apply2DTransform2=b.apply2DTransform2,o.convertCssMatrix=b.convertCssMatrix,o.inverseTransformMatrix=b.inverseTransformMatrix;var v=e(26348);o.deg2rad=v.deg2rad,o.rad2deg=v.rad2deg,o.angleDelta=v.angleDelta,o.angleDist=v.angleDist,o.isFullCircle=v.isFullCircle,o.isAngleInsideSector=v.isAngleInsideSector,o.isPtInsideSector=v.isPtInsideSector,o.pathArc=v.pathArc,o.pathSector=v.pathSector,o.pathAnnulus=v.pathAnnulus;var g=e(99863);o.isLeftAnchor=g.isLeftAnchor,o.isCenterAnchor=g.isCenterAnchor,o.isRightAnchor=g.isRightAnchor,o.isTopAnchor=g.isTopAnchor,o.isMiddleAnchor=g.isMiddleAnchor,o.isBottomAnchor=g.isBottomAnchor;var y=e(87642);o.segmentsIntersect=y.segmentsIntersect,o.segmentDistance=y.segmentDistance,o.getTextLocation=y.getTextLocation,o.clearLocationCache=y.clearLocationCache,o.getVisibleSegment=y.getVisibleSegment,o.findPointOnPath=y.findPointOnPath;var p=e(1426);o.extendFlat=p.extendFlat,o.extendDeep=p.extendDeep,o.extendDeepAll=p.extendDeepAll,o.extendDeepNoArrays=p.extendDeepNoArrays;var m=e(47769);o.log=m.log,o.warn=m.warn,o.error=m.error;var w=e(30587);o.counterRegex=w.counter;var u=e(79990);o.throttle=u.throttle,o.throttleDone=u.done,o.clearThrottle=u.clear;var S=e(24401);function _(G){var V={};for(var W in G)for(var J=G[W],X=0;X<J.length;X++)V[J[X]]=+W;return V}o.getGraphDiv=S.getGraphDiv,o.isPlotDiv=S.isPlotDiv,o.removeElement=S.removeElement,o.addStyleRule=S.addStyleRule,o.addRelatedStyleRule=S.addRelatedStyleRule,o.deleteRelatedStyleRule=S.deleteRelatedStyleRule,o.getFullTransformMatrix=S.getFullTransformMatrix,o.getElementTransformMatrix=S.getElementTransformMatrix,o.getElementAndAncestors=S.getElementAndAncestors,o.equalDomRects=S.equalDomRects,o.clearResponsive=e(86367),o.preserveDrawingBuffer=e(45142),o.makeTraceGroups=e(77310),o._=e(15867),o.notifier=e(75046),o.filterUnique=e(75744),o.filterVisible=e(76756),o.pushUnique=e(75138),o.increment=e(39240),o.cleanNumber=e(95218),o.ensureNumber=function(G){return T(G)?(G=Number(G))>d||G<s?t:G:t},o.isIndex=function(G,V){return!(V!==void 0&&G>=V)&&T(G)&&G>=0&&G%1==0},o.noop=e(64213),o.identity=e(23389),o.repeat=function(G,V){for(var W=new Array(V),J=0;J<V;J++)W[J]=G;return W},o.swapAttrs=function(G,V,W,J){W||(W="x"),J||(J="y");for(var X=0;X<V.length;X++){var ee=V[X],re=o.nestedProperty(G,ee.replace("?",W)),ie=o.nestedProperty(G,ee.replace("?",J)),se=re.get();re.set(ie.get()),ie.set(se)}},o.raiseToTop=function(G){G.parentNode.appendChild(G)},o.cancelTransition=function(G){return G.transition().duration(0)},o.constrain=function(G,V,W){return V>W?Math.max(W,Math.min(V,G)):Math.max(V,Math.min(W,G))},o.bBoxIntersect=function(G,V,W){return W=W||0,G.left<=V.right+W&&V.left<=G.right+W&&G.top<=V.bottom+W&&V.top<=G.bottom+W},o.simpleMap=function(G,V,W,J,X){for(var ee=G.length,re=new Array(ee),ie=0;ie<ee;ie++)re[ie]=V(G[ie],W,J,X);return re},o.randstr=function G(V,W,J,X){if(J||(J=16),W===void 0&&(W=24),W<=0)return"0";var ee,re,ie=Math.log(Math.pow(2,W))/Math.log(J),se="";for(ee=2;ie===1/0;ee*=2)ie=Math.log(Math.pow(2,W/ee))/Math.log(J)*ee;var fe=ie-Math.floor(ie);for(ee=0;ee<Math.floor(ie);ee++)se=Math.floor(Math.random()*J).toString(J)+se;fe&&(re=Math.pow(J,fe),se=Math.floor(Math.random()*re).toString(J)+se);var ye=parseInt(se,J);return V&&V[se]||ye!==1/0&&ye>=Math.pow(2,W)?X>10?(o.warn("randstr failed uniqueness"),se):G(V,W,J,(X||0)+1):se},o.OptionControl=function(G,V){G||(G={}),V||(V="opt");var W={optionList:[],_newoption:function(J){J[V]=G,W[J.name]=J,W.optionList.push(J)}};return W["_"+V]=G,W},o.smooth=function(G,V){if((V=Math.round(V)||0)<2)return G;var W,J,X,ee,re=G.length,ie=2*re,se=2*V-1,fe=new Array(se),ye=new Array(re);for(W=0;W<se;W++)fe[W]=(1-Math.cos(Math.PI*(W+1)/V))/(2*V);for(W=0;W<re;W++){for(ee=0,J=0;J<se;J++)(X=W+J+1-V)<-re?X-=ie*Math.round(X/ie):X>=ie&&(X-=ie*Math.floor(X/ie)),X<0?X=-1-X:X>=re&&(X=ie-1-X),ee+=G[X]*fe[J];ye[W]=ee}return ye},o.syncOrAsync=function(G,V,W){var J;function X(){return o.syncOrAsync(G,V,W)}for(;G.length;)if((J=(0,G.splice(0,1)[0])(V))&&J.then)return J.then(X);return W&&W(V)},o.stripTrailingSlash=function(G){return G.substr(-1)==="/"?G.substr(0,G.length-1):G},o.noneOrAll=function(G,V,W){if(G){var J,X=!1,ee=!0;for(J=0;J<W.length;J++)G[W[J]]!=null?X=!0:ee=!1;if(X&&!ee)for(J=0;J<W.length;J++)G[W[J]]=V[W[J]]}},o.mergeArray=function(G,V,W,J){var X=typeof J=="function";if(o.isArrayOrTypedArray(G))for(var ee=Math.min(G.length,V.length),re=0;re<ee;re++){var ie=G[re];V[re][W]=X?J(ie):ie}},o.mergeArrayCastPositive=function(G,V,W){return o.mergeArray(G,V,W,function(J){var X=+J;return isFinite(X)&&X>0?X:0})},o.fillArray=function(G,V,W,J){if(J=J||o.identity,o.isArrayOrTypedArray(G))for(var X=0;X<V.length;X++)V[X][W]=J(G[X])},o.castOption=function(G,V,W,J){J=J||o.identity;var X=o.nestedProperty(G,W).get();return o.isArrayOrTypedArray(X)?Array.isArray(V)&&o.isArrayOrTypedArray(X[V[0]])?J(X[V[0]][V[1]]):J(X[V]):X},o.extractOption=function(G,V,W,J){if(W in G)return G[W];var X=o.nestedProperty(V,J).get();return Array.isArray(X)?void 0:X},o.tagSelected=function(G,V,W){var J,X,ee=V.selectedpoints,re=V._indexToPoints;re&&(J=_(re));for(var ie=0;ie<ee.length;ie++){var se=ee[ie];if(o.isIndex(se)||o.isArrayOrTypedArray(se)&&o.isIndex(se[0])&&o.isIndex(se[1])){var fe=J?J[se]:se,ye=W?W[fe]:fe;(X=ye)!==void 0&&X<G.length&&(G[ye].selected=1)}}},o.selIndices2selPoints=function(G){var V=G.selectedpoints,W=G._indexToPoints;if(W){for(var J=_(W),X=[],ee=0;ee<V.length;ee++){var re=V[ee];if(o.isIndex(re)){var ie=J[re];o.isIndex(ie)&&X.push(ie)}}return X}return V},o.getTargetArray=function(G,V){var W=V.target;if(typeof W=="string"&&W){var J=o.nestedProperty(G,W).get();return!!Array.isArray(J)&&J}return!!Array.isArray(W)&&W},o.minExtend=function(G,V){var W={};typeof V!="object"&&(V={});var J,X,ee,re=Object.keys(G);for(J=0;J<re.length;J++)ee=G[X=re[J]],X.charAt(0)!=="_"&&typeof ee!="function"&&(X==="module"?W[X]=ee:Array.isArray(ee)?W[X]=X==="colorscale"?ee.slice():ee.slice(0,3):o.isTypedArray(ee)?W[X]=ee.subarray(0,3):W[X]=ee&&typeof ee=="object"?o.minExtend(G[X],V[X]):ee);for(re=Object.keys(V),J=0;J<re.length;J++)typeof(ee=V[X=re[J]])=="object"&&X in W&&typeof W[X]=="object"||(W[X]=ee);return W},o.titleCase=function(G){return G.charAt(0).toUpperCase()+G.substr(1)},o.containsAny=function(G,V){for(var W=0;W<V.length;W++)if(G.indexOf(V[W])!==-1)return!0;return!1},o.isIE=function(){return window.navigator.msSaveBlob!==void 0};var E=/Version\/[\d\.]+.*Safari/;o.isSafari=function(){return E.test(window.navigator.userAgent)};var L=/iPad|iPhone|iPod/;o.isIOS=function(){return L.test(window.navigator.userAgent)};var C=/Firefox\/(\d+)\.\d+/;o.getFirefoxVersion=function(){var G=C.exec(window.navigator.userAgent);if(G&&G.length===2){var V=parseInt(G[1]);if(!isNaN(V))return V}return null},o.isD3Selection=function(G){return G instanceof k.selection},o.ensureSingle=function(G,V,W,J){var X=G.select(V+(W?"."+W:""));if(X.size())return X;var ee=G.append(V);return W&&ee.classed(W,!0),J&&ee.call(J),ee},o.ensureSingleById=function(G,V,W,J){var X=G.select(V+"#"+W);if(X.size())return X;var ee=G.append(V).attr("id",W);return J&&ee.call(J),ee},o.objectFromPath=function(G,V){for(var W,J=G.split("."),X=W={},ee=0;ee<J.length;ee++){var re=J[ee],ie=null,se=J[ee].match(/(.*)\[([0-9]+)\]/);se?(re=se[1],ie=se[2],W=W[re]=[],ee===J.length-1?W[ie]=V:W[ie]={},W=W[ie]):(ee===J.length-1?W[re]=V:W[re]={},W=W[re])}return X};var P=/^([^\[\.]+)\.(.+)?/,I=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;o.expandObjectPaths=function(G){var V,W,J,X,ee,re,ie;if(typeof G=="object"&&!Array.isArray(G))for(W in G)G.hasOwnProperty(W)&&((V=W.match(P))?(X=G[W],J=V[1],delete G[W],G[J]=o.extendDeepNoArrays(G[J]||{},o.objectFromPath(W,o.expandObjectPaths(X))[J])):(V=W.match(I))?(X=G[W],J=V[1],ee=parseInt(V[2]),delete G[W],G[J]=G[J]||[],V[3]==="."?(ie=V[4],re=G[J][ee]=G[J][ee]||{},o.extendDeepNoArrays(re,o.objectFromPath(ie,o.expandObjectPaths(X)))):G[J][ee]=o.expandObjectPaths(X)):G[W]=o.expandObjectPaths(G[W]));return G},o.numSeparate=function(G,V,W){if(W||(W=!1),typeof V!="string"||V.length===0)throw new Error("Separator string required for formatting!");typeof G=="number"&&(G=String(G));var J=/(\d+)(\d{3})/,X=V.charAt(0),ee=V.charAt(1),re=G.split("."),ie=re[0],se=re.length>1?X+re[1]:"";if(ee&&(re.length>1||ie.length>4||W))for(;J.test(ie);)ie=ie.replace(J,"$1"+ee+"$2");return ie+se},o.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var U=/^\w*$/;o.templateString=function(G,V){var W={};return G.replace(o.TEMPLATE_STRING_REGEX,function(J,X){var ee;return U.test(X)?ee=V[X]:(W[X]=W[X]||o.nestedProperty(V,X).get,ee=W[X]()),o.isValidTextValue(ee)?ee:""})};var z={max:10,count:0,name:"hovertemplate"};o.hovertemplateString=function(){return N.apply(z,arguments)};var H={max:10,count:0,name:"texttemplate"};o.texttemplateString=function(){return N.apply(H,arguments)};var F=/^[:|\|]/;function N(G,V,W){var J=this,X=arguments;V||(V={});var ee={};return G.replace(o.TEMPLATE_STRING_REGEX,function(re,ie,se){var fe,ye,ge,he=ie==="_xother"||ie==="_yother",ve=ie==="_xother_"||ie==="_yother_",Oe=ie==="xother_"||ie==="yother_",xe=ie==="xother"||ie==="yother"||he||Oe||ve,ke=ie;if((he||ve)&&(ke=ke.substring(1)),(Oe||ve)&&(ke=ke.substring(0,ke.length-1)),xe){if((fe=V[ke])===void 0)return""}else for(ge=3;ge<X.length;ge++)if(ye=X[ge]){if(ye.hasOwnProperty(ke)){fe=ye[ke];break}if(U.test(ke)||(fe=o.nestedProperty(ye,ke).get(),(fe=ee[ke]||o.nestedProperty(ye,ke).get())&&(ee[ke]=fe)),fe!==void 0)break}if(fe===void 0&&J)return J.count<J.max&&(o.warn("Variable '"+ke+"' in "+J.name+" could not be found!"),fe=re),J.count===J.max&&o.warn("Too many "+J.name+" warnings - additional warnings will be suppressed"),J.count++,re;if(se){var Me;if(se[0]===":"&&(fe=(Me=W?W.numberFormat:o.numberFormat)(se.replace(F,""))(fe)),se[0]==="|"){Me=W?W.timeFormat:A;var Te=o.dateTime2ms(fe);fe=o.formatDate(Te,se.replace(F,""),!1,Me)}}else{var Q=ke+"Label";V.hasOwnProperty(Q)&&(fe=V[Q])}return xe&&(fe="("+fe+")",(he||ve)&&(fe=" "+fe),(Oe||ve)&&(fe+=" ")),fe})}o.subplotSort=function(G,V){for(var W=Math.min(G.length,V.length)+1,J=0,X=0,ee=0;ee<W;ee++){var re=G.charCodeAt(ee)||0,ie=V.charCodeAt(ee)||0,se=re>=48&&re<=57,fe=ie>=48&&ie<=57;if(se&&(J=10*J+re-48),fe&&(X=10*X+ie-48),!se||!fe){if(J!==X)return J-X;if(re!==ie)return re-ie}}return X-J};var B=2e9;o.seedPseudoRandom=function(){B=2e9},o.pseudoRandom=function(){var G=B;return B=(69069*B+1)%4294967296,Math.abs(B-G)<429496729?o.pseudoRandom():B/4294967296},o.fillText=function(G,V,W){var J=Array.isArray(W)?function(re){W.push(re)}:function(re){W.text=re},X=o.extractOption(G,V,"htx","hovertext");if(o.isValidTextValue(X))return J(X);var ee=o.extractOption(G,V,"tx","text");return o.isValidTextValue(ee)?J(ee):void 0},o.isValidTextValue=function(G){return G||G===0},o.formatPercent=function(G,V){V=V||0;for(var W=(Math.round(100*G*Math.pow(10,V))*Math.pow(.1,V)).toFixed(V)+"%",J=0;J<V;J++)W.indexOf(".")!==-1&&(W=(W=W.replace("0%","%")).replace(".%","%"));return W},o.isHidden=function(G){var V=window.getComputedStyle(G).display;return!V||V==="none"},o.strTranslate=function(G,V){return G||V?"translate("+G+","+V+")":""},o.strRotate=function(G){return G?"rotate("+G+")":""},o.strScale=function(G){return G!==1?"scale("+G+")":""},o.getTextTransform=function(G){var V=G.noCenter,W=G.textX,J=G.textY,X=G.targetX,ee=G.targetY,re=G.anchorX||0,ie=G.anchorY||0,se=G.rotate,fe=G.scale;return fe?fe>1&&(fe=1):fe=0,o.strTranslate(X-fe*(W+re),ee-fe*(J+ie))+o.strScale(fe)+(se?"rotate("+se+(V?"":" "+W+" "+J)+")":"")},o.setTransormAndDisplay=function(G,V){G.attr("transform",o.getTextTransform(V)),G.style("display",V.scale?null:"none")},o.ensureUniformFontSize=function(G,V){var W=o.extendFlat({},V);return W.size=Math.max(V.size,G._fullLayout.uniformtext.minsize||0),W},o.join2=function(G,V,W){var J=G.length;return J>1?G.slice(0,-1).join(V)+W+G[J-1]:G.join(V)},o.bigFont=function(G){return Math.round(1.2*G)};var j=o.getFirefoxVersion(),K=j!==null&&j<86;o.getPositionFromD3Event=function(){return K?[k.event.layerX,k.event.layerY]:[k.event.offsetX,k.event.offsetY]}},41965:function($){$.exports=function(R){return window&&window.process&&window.process.versions?Object.prototype.toString.call(R)==="[object Object]":Object.prototype.toString.call(R)==="[object Object]"&&Object.getPrototypeOf(R).hasOwnProperty("hasOwnProperty")}},66636:function($,R,e){var k=e(65487),A=/^\w*$/;$.exports=function(l,T,x,d){var s,t,o;x=x||"name",d=d||"value";var r={};T&&T.length?(o=k(l,T),t=o.get()):t=l,T=T||"";var n={};if(t)for(s=0;s<t.length;s++)n[t[s][x]]=s;var a=A.test(d),i={set:function(c,h){var f=h===null?4:0;if(!t){if(!o||f===4)return;t=[],o.set(t)}var b=n[c];if(b===void 0){if(f===4)return;f|=3,b=t.length,n[c]=b}else h!==(a?t[b][d]:k(t[b],d).get())&&(f|=2);var v=t[b]=t[b]||{};return v[x]=c,a?v[d]=h:k(v,d).set(h),h!==null&&(f&=-5),r[b]=r[b]|f,i},get:function(c){if(t){var h=n[c];return h===void 0?void 0:a?t[h][d]:k(t[h],d).get()}},rename:function(c,h){var f=n[c];return f===void 0||(r[f]=1|r[f],n[h]=f,delete n[c],t[f][x]=h),i},remove:function(c){var h=n[c];if(h===void 0)return i;var f=t[h];if(Object.keys(f).length>2)return r[h]=2|r[h],i.set(c,null);if(a){for(s=h;s<t.length;s++)r[s]=3|r[s];for(s=h;s<t.length;s++)n[t[s][x]]--;t.splice(h,1),delete n[c]}else k(f,d).set(null),r[h]=6|r[h];return i},constructUpdate:function(){for(var c,h,f={},b=Object.keys(r),v=0;v<b.length;v++)h=b[v],c=T+"["+h+"]",t[h]?(1&r[h]&&(f[c+"."+x]=t[h][x]),2&r[h]&&(f[c+"."+d]=a?4&r[h]?null:t[h][d]:4&r[h]?null:k(t[h],d).get())):f[c]=null;return f}};return i}},15867:function($,R,e){var k=e(73972);$.exports=function(A,l){for(var T=A._context.locale,x=0;x<2;x++){for(var d=A._context.locales,s=0;s<2;s++){var t=(d[T]||{}).dictionary;if(t){var o=t[l];if(o)return o}d=k.localeRegistry}var r=T.split("-")[0];if(r===T)break;T=r}return l}},47769:function($,R,e){var k=e(72075).dfltConfig,A=e(75046),l=$.exports={};l.log=function(){var T;if(k.logging>1){var x=["LOG:"];for(T=0;T<arguments.length;T++)x.push(arguments[T]);console.trace.apply(console,x)}if(k.notifyOnLogging>1){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);A(d.join("<br>"),"long")}},l.warn=function(){var T;if(k.logging>0){var x=["WARN:"];for(T=0;T<arguments.length;T++)x.push(arguments[T]);console.trace.apply(console,x)}if(k.notifyOnLogging>0){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);A(d.join("<br>"),"stick")}},l.error=function(){var T;if(k.logging>0){var x=["ERROR:"];for(T=0;T<arguments.length;T++)x.push(arguments[T]);console.error.apply(console,x)}if(k.notifyOnLogging>0){var d=[];for(T=0;T<arguments.length;T++)d.push(arguments[T]);A(d.join("<br>"),"stick")}}},77310:function($,R,e){var k=e(39898);$.exports=function(A,l,T){var x=A.selectAll("g."+T.replace(/\s/g,".")).data(l,function(s){return s[0].trace.uid});x.exit().remove(),x.enter().append("g").attr("class",T),x.order();var d=A.classed("rangeplot")?"nodeRangePlot3":"node3";return x.each(function(s){s[0][d]=k.select(this)}),x}},35657:function($,R,e){var k=e(79576);R.init2dArray=function(A,l){for(var T=new Array(A),x=0;x<A;x++)T[x]=new Array(l);return T},R.transposeRagged=function(A){var l,T,x=0,d=A.length;for(l=0;l<d;l++)x=Math.max(x,A[l].length);var s=new Array(x);for(l=0;l<x;l++)for(s[l]=new Array(d),T=0;T<d;T++)s[l][T]=A[T][l];return s},R.dot=function(A,l){if(!A.length||!l.length||A.length!==l.length)return null;var T,x,d=A.length;if(A[0].length)for(T=new Array(d),x=0;x<d;x++)T[x]=R.dot(A[x],l);else if(l[0].length){var s=R.transposeRagged(l);for(T=new Array(s.length),x=0;x<s.length;x++)T[x]=R.dot(A,s[x])}else for(T=0,x=0;x<d;x++)T+=A[x]*l[x];return T},R.translationMatrix=function(A,l){return[[1,0,A],[0,1,l],[0,0,1]]},R.rotationMatrix=function(A){var l=A*Math.PI/180;return[[Math.cos(l),-Math.sin(l),0],[Math.sin(l),Math.cos(l),0],[0,0,1]]},R.rotationXYMatrix=function(A,l,T){return R.dot(R.dot(R.translationMatrix(l,T),R.rotationMatrix(A)),R.translationMatrix(-l,-T))},R.apply3DTransform=function(A){return function(){var l=arguments,T=arguments.length===1?l[0]:[l[0],l[1],l[2]||0];return R.dot(A,[T[0],T[1],T[2],1]).slice(0,3)}},R.apply2DTransform=function(A){return function(){var l=arguments;l.length===3&&(l=l[0]);var T=arguments.length===1?l[0]:[l[0],l[1]];return R.dot(A,[T[0],T[1],1]).slice(0,2)}},R.apply2DTransform2=function(A){var l=R.apply2DTransform(A);return function(T){return l(T.slice(0,2)).concat(l(T.slice(2,4)))}},R.convertCssMatrix=function(A){if(A){var l=A.length;if(l===16)return A;if(l===6)return[A[0],A[1],0,0,A[2],A[3],0,0,0,0,1,0,A[4],A[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},R.inverseTransformMatrix=function(A){var l=[];return k.invert(l,A),[[l[0],l[1],l[2],l[3]],[l[4],l[5],l[6],l[7]],[l[8],l[9],l[10],l[11]],[l[12],l[13],l[14],l[15]]]}},64872:function($){$.exports={mod:function(R,e){var k=R%e;return k<0?k+e:k},modHalf:function(R,e){return Math.abs(R)>e/2?R-Math.round(R/e)*e:R}}},65487:function($,R,e){var k=e(92770),A=e(73627).isArrayOrTypedArray;function l(r,n){return function(){var a,i,c,h,f,b=r;for(h=0;h<n.length-1;h++){if((a=n[h])===-1){for(i=!0,c=[],f=0;f<b.length;f++)c[f]=l(b[f],n.slice(h+1))(),c[f]!==c[0]&&(i=!1);return i?c[0]:c}if(typeof a=="number"&&!A(b)||typeof(b=b[a])!="object"||b===null)return}if(typeof b=="object"&&b!==null&&(c=b[n[h]])!==null)return c}}$.exports=function(r,n){if(k(n))n=String(n);else if(typeof n!="string"||n.substr(n.length-4)==="[-1]")throw"bad property string";for(var a,i,c,h=0,f=n.split(".");h<f.length;){if(a=String(f[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(a[1])f[h]=a[1];else{if(h!==0)throw"bad property string";f.splice(0,1)}for(i=a[2].substr(1,a[2].length-2).split("]["),c=0;c<i.length;c++)h++,f.splice(h,0,Number(i[c]))}h++}return typeof r!="object"?function(b,v,g){return{set:function(){throw"bad container"},get:function(){},astr:v,parts:g,obj:b}}(r,n,f):{set:d(r,f,n),get:l(r,f),astr:n,parts:f,obj:r}};var T=/(^|\.)args\[/;function x(r,n){return r===void 0||r===null&&!n.match(T)}function d(r,n,a){return function(i){var c,h,f=r,b="",v=x(i,a);for(h=0;h<n.length-1;h++){if(typeof(c=n[h])=="number"&&!A(f))throw"array index but container is not an array";if(c===-1){if(v=!t(f,n.slice(h+1),i,a))break;return}if(!o(f,c,n[h+1],v))break;if(typeof(f=f[c])!="object"||f===null)throw"container is not an object";b=s(b,c)}if(v){if(h===n.length-1&&(delete f[n[h]],Array.isArray(f)&&+n[h]==f.length-1))for(;f.length&&f[f.length-1]===void 0;)f.pop()}else f[n[h]]=i}}function s(r,n){var a=n;return k(n)?a="["+n+"]":r&&(a="."+n),r+a}function t(r,n,a,i){var c,h=A(a),f=!0,b=a,v=i.replace("-1",0),g=!h&&x(a,v),y=n[0];for(c=0;c<r.length;c++)v=i.replace("-1",c),h&&(g=x(b=a[c%a.length],v)),g&&(f=!1),o(r,c,y,g)&&d(r[c],n,i.replace("-1",c))(b);return f}function o(r,n,a,i){if(r[n]===void 0){if(i)return!1;r[n]=typeof a=="number"?[]:{}}return!0}},64213:function($){$.exports=function(){}},75046:function($,R,e){var k=e(39898),A=e(92770),l=[];$.exports=function(T,x){if(l.indexOf(T)===-1){l.push(T);var d=1e3;A(x)?d=x:x==="long"&&(d=3e3);var s=k.select("body").selectAll(".plotly-notifier").data([0]);s.enter().append("div").classed("plotly-notifier",!0),s.selectAll(".notifier-note").data(l).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(o){var r=k.select(this);r.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){r.transition().call(t)});for(var n=r.append("p"),a=o.split(/<br\s*\/?>/g),i=0;i<a.length;i++)i&&n.append("br"),n.append("span").text(a[i]);x==="stick"?r.transition().duration(350).style("opacity",1):r.transition().duration(700).style("opacity",1).transition().delay(d).call(t)})}function t(o){o.duration(700).style("opacity",0).each("end",function(r){var n=l.indexOf(r);n!==-1&&l.splice(n,1),k.select(this).remove()})}}},39918:function($,R,e){var k=e(6964),A="data-savedcursor";$.exports=function(l,T){var x=l.attr(A);if(T){if(!x){for(var d=(l.attr("class")||"").split(" "),s=0;s<d.length;s++){var t=d[s];t.indexOf("cursor-")===0&&l.attr(A,t.substr(7)).classed(t,!1)}l.attr(A)||l.attr(A,"!!")}k(l,T)}else x&&(l.attr(A,null),x==="!!"?k(l):k(l,x))}},61082:function($,R,e){var k=e(35657).dot,A=e(50606).BADNUM,l=$.exports={};l.tester=function(T){var x,d=T.slice(),s=d[0][0],t=s,o=d[0][1],r=o;for(d[d.length-1][0]===d[0][0]&&d[d.length-1][1]===d[0][1]||d.push(d[0]),x=1;x<d.length;x++)s=Math.min(s,d[x][0]),t=Math.max(t,d[x][0]),o=Math.min(o,d[x][1]),r=Math.max(r,d[x][1]);var n,a=!1;d.length===5&&(d[0][0]===d[1][0]?d[2][0]===d[3][0]&&d[0][1]===d[3][1]&&d[1][1]===d[2][1]&&(a=!0,n=function(h){return h[0]===d[0][0]}):d[0][1]===d[1][1]&&d[2][1]===d[3][1]&&d[0][0]===d[3][0]&&d[1][0]===d[2][0]&&(a=!0,n=function(h){return h[1]===d[0][1]}));var i=!0,c=d[0];for(x=1;x<d.length;x++)if(c[0]!==d[x][0]||c[1]!==d[x][1]){i=!1;break}return{xmin:s,xmax:t,ymin:o,ymax:r,pts:d,contains:a?function(h,f){var b=h[0],v=h[1];return!(b===A||b<s||b>t||v===A||v<o||v>r||f&&n(h))}:function(h,f){var b=h[0],v=h[1];if(b===A||b<s||b>t||v===A||v<o||v>r)return!1;var g,y,p,m,w,u=d.length,S=d[0][0],_=d[0][1],E=0;for(g=1;g<u;g++)if(y=S,p=_,S=d[g][0],_=d[g][1],!(b<(m=Math.min(y,S))||b>Math.max(y,S)||v>Math.max(p,_)))if(v<Math.min(p,_))b!==m&&E++;else{if(v===(w=S===y?v:p+(b-y)*(_-p)/(S-y)))return g!==1||!f;v<=w&&b!==m&&E++}return E%2==1},isRect:a,degenerate:i}},l.isSegmentBent=function(T,x,d,s){var t,o,r,n=T[x],a=[T[d][0]-n[0],T[d][1]-n[1]],i=k(a,a),c=Math.sqrt(i),h=[-a[1]/c,a[0]/c];for(t=x+1;t<d;t++)if(o=[T[t][0]-n[0],T[t][1]-n[1]],(r=k(o,a))<0||r>i||Math.abs(k(o,h))>s)return!0;return!1},l.filter=function(T,x){var d=[T[0]],s=0,t=0;function o(r){T.push(r);var n=d.length,a=s;d.splice(t+1);for(var i=a+1;i<T.length;i++)(i===T.length-1||l.isSegmentBent(T,a,i+1,x))&&(d.push(T[i]),d.length<n-2&&(s=i,t=d.length-1),a=i)}return T.length>1&&o(T.pop()),{addPt:o,raw:T,filtered:d}}},79749:function($,R,e){var k=e(58617),A=e(98580);$.exports=function(l,T,x){var d=l._fullLayout,s=!0;return d._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(x);else if(!t.pick||d._has("parcoords")){try{t.regl=A({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:l._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:T||[],cachedCode:x||{}})}catch{s=!1}t.regl||(s=!1),s&&this.addEventListener("webglcontextlost",function(o){l&&l.emit&&l.emit("plotly_webglcontextlost",{event:o,layer:t.key})},!1)}}),s||k({container:d._glcontainer.node()}),s}},45142:function($,R,e){var k=e(92770),A=e(35791);$.exports=function(l){var T;if(typeof(T=l&&l.hasOwnProperty("userAgent")?l.userAgent:function(){var n;return typeof navigator<"u"&&(n=navigator.userAgent),n&&n.headers&&typeof n.headers["user-agent"]=="string"&&(n=n.headers["user-agent"]),n}())!="string")return!0;var x=A({ua:{headers:{"user-agent":T}},tablet:!0,featureDetect:!1});if(!x){for(var d=T.split(" "),s=1;s<d.length;s++)if(d[s].indexOf("Safari")!==-1)for(var t=s-1;t>-1;t--){var o=d[t];if(o.substr(0,8)==="Version/"){var r=o.substr(8).split(".")[0];if(k(r)&&(r=+r),r>=13)return!0}}}return x}},75138:function($){$.exports=function(R,e){if(e instanceof RegExp){for(var k=e.toString(),A=0;A<R.length;A++)if(R[A]instanceof RegExp&&R[A].toString()===k)return R;R.push(e)}else!e&&e!==0||R.indexOf(e)!==-1||R.push(e);return R}},10847:function($,R,e){var k=e(71828),A=e(72075).dfltConfig,l={add:function(T,x,d,s,t){var o,r;T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},r=T.undoQueue.index,T.autoplay?T.undoQueue.inSequence||(T.autoplay=!1):(!T.undoQueue.sequence||T.undoQueue.beginSequence?(o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},T.undoQueue.queue.splice(r,T.undoQueue.queue.length-r,o),T.undoQueue.index+=1):o=T.undoQueue.queue[r-1],T.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(x),o.undo.args.unshift(d),o.redo.calls.push(s),o.redo.args.push(t)),T.undoQueue.queue.length>A.queueLength&&(T.undoQueue.queue.shift(),T.undoQueue.index--))},startSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!0,T.undoQueue.beginSequence=!0},stopSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!1,T.undoQueue.beginSequence=!1},undo:function(T){var x,d;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index<=0)){for(T.undoQueue.index--,x=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,d=0;d<x.undo.calls.length;d++)l.plotDo(T,x.undo.calls[d],x.undo.args[d]);T.undoQueue.inSequence=!1,T.autoplay=!1}},redo:function(T){var x,d;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index>=T.undoQueue.queue.length)){for(x=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,d=0;d<x.redo.calls.length;d++)l.plotDo(T,x.redo.calls[d],x.redo.args[d]);T.undoQueue.inSequence=!1,T.autoplay=!1,T.undoQueue.index++}},plotDo:function(T,x,d){T.autoplay=!0,d=function(s,t){for(var o,r=[],n=0;n<t.length;n++)o=t[n],r[n]=o===s?o:typeof o=="object"?Array.isArray(o)?k.extendDeep([],o):k.extendDeepAll({},o):o;return r}(T,d),x.apply(null,d)}};$.exports=l},30587:function($,R){R.counter=function(e,k,A,l){var T=(k||"")+(A?"":"$"),x=l===!1?"":"^";return e==="xy"?new RegExp(x+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+T):new RegExp(x+e+"([2-9]|[1-9][0-9]+)?"+T)}},6962:function($){var R=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;$.exports=function(k,A){for(;A;){var l=k.match(R);if(l)k=l[1];else{if(!k.match(e))throw new Error("bad relativeAttr call:"+[k,A]);k=""}if(A.charAt(0)!=="^")break;A=A.slice(1)}return k&&A.charAt(0)!=="["?k+"."+A:k+A}},51332:function($,R,e){var k=e(73627).isArrayOrTypedArray,A=e(41965);$.exports=function l(T,x){for(var d in x){var s=x[d],t=T[d];if(t!==s)if(d.charAt(0)==="_"||typeof s=="function"){if(d in T)continue;T[d]=s}else if(k(s)&&k(t)&&A(s[0])){if(d==="customdata"||d==="ids")continue;for(var o=Math.min(s.length,t.length),r=0;r<o;r++)t[r]!==s[r]&&A(s[r])&&A(t[r])&&l(t[r],s[r])}else A(s)&&A(t)&&(l(t,s),Object.keys(t).length||delete T[d])}}},65888:function($,R,e){var k=e(92770),A=e(47769),l=e(23389),T=e(50606).BADNUM,x=1e-9;function d(r,n){return r<n}function s(r,n){return r<=n}function t(r,n){return r>n}function o(r,n){return r>=n}R.findBin=function(r,n,a){if(k(n.start))return a?Math.ceil((r-n.start)/n.size-x)-1:Math.floor((r-n.start)/n.size+x);var i,c,h=0,f=n.length,b=0,v=f>1?(n[f-1]-n[0])/(f-1):1;for(c=v>=0?a?d:s:a?o:t,r+=v*x*(a?-1:1)*(v>=0?1:-1);h<f&&b++<100;)c(n[i=Math.floor((h+f)/2)],r)?h=i+1:f=i;return b>90&&A.log("Long binary search..."),h-1},R.sorterAsc=function(r,n){return r-n},R.sorterDes=function(r,n){return n-r},R.distinctVals=function(r){var n,a=r.slice();for(a.sort(R.sorterAsc),n=a.length-1;n>-1&&a[n]===T;n--);for(var i,c=a[n]-a[0]||1,h=c/(n||1)/1e4,f=[],b=0;b<=n;b++){var v=a[b],g=v-i;i===void 0?(f.push(v),i=v):g>h&&(c=Math.min(c,g),f.push(v),i=v)}return{vals:f,minDiff:c}},R.roundUp=function(r,n,a){for(var i,c=0,h=n.length-1,f=0,b=a?0:1,v=a?1:0,g=a?Math.ceil:Math.floor;c<h&&f++<100;)n[i=g((c+h)/2)]<=r?c=i+b:h=i-v;return n[c]},R.sort=function(r,n){for(var a=0,i=0,c=1;c<r.length;c++){var h=n(r[c],r[c-1]);if(h<0?a=1:h>0&&(i=1),a&&i)return r.sort(n)}return i?r:r.reverse()},R.findIndexOfMin=function(r,n){n=n||l;for(var a,i=1/0,c=0;c<r.length;c++){var h=n(r[c]);h<i&&(i=h,a=c)}return a}},6964:function($){$.exports=function(R,e){(R.attr("class")||"").split(" ").forEach(function(k){k.indexOf("cursor-")===0&&R.classed(k,!1)}),e&&R.classed("cursor-"+e,!0)}},58617:function($,R,e){var k=e(7901),A=function(){};$.exports=function(l){for(var T in l)typeof l[T]=="function"&&(l[T]=A);l.destroy=function(){l.container.parentNode.removeChild(l.container)};var x=document.createElement("div");x.className="no-webgl",x.style.cursor="pointer",x.style.fontSize="24px",x.style.color=k.defaults[0],x.style.position="absolute",x.style.left=x.style.top="0px",x.style.width=x.style.height="100%",x.style["background-color"]=k.lightLine,x.style["z-index"]=30;var d=document.createElement("p");return d.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",d.style.position="relative",d.style.top="50%",d.style.left="50%",d.style.height="30%",d.style.width="50%",d.style.margin="-15% 0 0 -25%",x.appendChild(d),l.container.appendChild(x),l.container.style.background="#FFFFFF",l.container.onclick=function(){window.open("https://get.webgl.org")},!1}},78607:function($){$.exports=function(R){return Object.keys(R).sort()}},80038:function($,R,e){var k=e(92770),A=e(73627).isArrayOrTypedArray;R.aggNums=function(l,T,x,d){var s,t;if((!d||d>x.length)&&(d=x.length),k(T)||(T=!1),A(x[0])){for(t=new Array(d),s=0;s<d;s++)t[s]=R.aggNums(l,T,x[s]);x=t}for(s=0;s<d;s++)k(T)?k(x[s])&&(T=l(+T,+x[s])):T=x[s];return T},R.len=function(l){return R.aggNums(function(T){return T+1},0,l)},R.mean=function(l,T){return T||(T=R.len(l)),R.aggNums(function(x,d){return x+d},0,l)/T},R.midRange=function(l){if(l!==void 0&&l.length!==0)return(R.aggNums(Math.max,null,l)+R.aggNums(Math.min,null,l))/2},R.variance=function(l,T,x){return T||(T=R.len(l)),k(x)||(x=R.mean(l,T)),R.aggNums(function(d,s){return d+Math.pow(s-x,2)},0,l)/T},R.stdev=function(l,T,x){return Math.sqrt(R.variance(l,T,x))},R.median=function(l){var T=l.slice().sort();return R.interp(T,.5)},R.interp=function(l,T){if(!k(T))throw"n should be a finite number";if((T=T*l.length-.5)<0)return l[0];if(T>l.length-1)return l[l.length-1];var x=T%1;return x*l[Math.ceil(T)]+(1-x)*l[Math.floor(T)]}},78614:function($,R,e){var k=e(25075);$.exports=function(A){return A?k(A):[0,0,0,1]}},63893:function($,R,e){var k=e(39898),A=e(71828),l=A.strTranslate,T=e(77922),x=e(18783).LINE_SPACING,d=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;R.convertToTspans=function(I,U,z){var H=I.text(),F=!I.attr("data-notex")&&U&&U._context.typesetMath&&typeof MathJax<"u"&&H.match(d),N=k.select(I.node().parentNode);if(!N.empty()){var B=I.attr("class")?I.attr("class").split(" ")[0]:"text";return B+="-math",N.selectAll("svg."+B).remove(),N.selectAll("g."+B+"-group").remove(),I.style("display",null).attr({"data-unformatted":H,"data-math":"N"}),F?(U&&U._promises||[]).push(new Promise(function(K){I.style("display","none");var G=parseInt(I.node().style.fontSize,10),V={fontSize:G};(function(W,J,X){var ee,re,ie,se,fe=parseInt((MathJax.version||"").split(".")[0]);if(fe===2||fe===3){var ye=function(){var he="math-output-"+A.randstr({},64),ve=(se=k.select("body").append("div").attr({id:he}).style({visibility:"hidden",position:"absolute","font-size":J.fontSize+"px"}).text(W.replace(s,"\\lt ").replace(t,"\\gt "))).node();return fe===2?MathJax.Hub.Typeset(ve):MathJax.typeset([ve])},ge=function(){var he=se.select(fe===2?".MathJax_SVG":".MathJax"),ve=!he.empty()&&se.select("svg").node();if(ve){var Oe,xe=ve.getBoundingClientRect();Oe=fe===2?k.select("body").select("#MathJax_SVG_glyphs"):he.select("defs"),X(he,Oe,xe)}else A.log("There was an error in the tex syntax.",W),X();se.remove()};fe===2?MathJax.Hub.Queue(function(){return re=A.extendDeepAll({},MathJax.Hub.config),ie=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:o},displayAlign:"left"})},function(){if((ee=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},ye,ge,function(){if(ee!=="SVG")return MathJax.Hub.setRenderer(ee)},function(){return ie!==void 0&&(MathJax.Hub.processSectionDelay=ie),MathJax.Hub.Config(re)}):fe===3&&(re=A.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=o,(ee=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ye(),ge(),ee!=="svg"&&(MathJax.config.startup.output=ee),MathJax.config=re}))}else A.warn("No MathJax version:",MathJax.version)})(F[2],V,function(W,J,X){N.selectAll("svg."+B).remove(),N.selectAll("g."+B+"-group").remove();var ee=W&&W.select("svg");if(!ee||!ee.node())return j(),void K();var re=N.append("g").classed(B+"-group",!0).attr({"pointer-events":"none","data-unformatted":H,"data-math":"Y"});re.node().appendChild(ee.node()),J&&J.node()&&ee.node().insertBefore(J.node().cloneNode(!0),ee.node().firstChild);var ie=X.width,se=X.height;ee.attr({class:B,height:se,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var fe=I.node().style.fill||"black",ye=ee.select("g");ye.attr({fill:fe,stroke:fe});var ge=ye.node().getBoundingClientRect(),he=ge.width,ve=ge.height;(he>ie||ve>se)&&(ee.style("overflow","hidden"),he=(ge=ee.node().getBoundingClientRect()).width,ve=ge.height);var Oe=+I.attr("x"),xe=+I.attr("y"),ke=-(G||I.node().getBoundingClientRect().height)/4;if(B[0]==="y")re.attr({transform:"rotate("+[-90,Oe,xe]+")"+l(-he/2,ke-ve/2)});else if(B[0]==="l")xe=ke-ve/2;else if(B[0]==="a"&&B.indexOf("atitle")!==0)Oe=0,xe=ke;else{var Me=I.attr("text-anchor");Oe-=he*(Me==="middle"?.5:Me==="end"?1:0),xe=xe+ke-ve/2}ee.attr({x:Oe,y:xe}),z&&z.call(I,re),K(re)})})):j(),I}function j(){N.empty()||(B=I.attr("class")+"-math",N.select("svg."+B).remove()),I.text("").style("white-space","pre");var K=function(G,V){V=V.replace(h," ");var W,J=!1,X=[],ee=-1;function re(){ee++;var ce=document.createElementNS(T.svg,"tspan");k.select(ce).attr({class:"line",dy:ee*x+"em"}),G.appendChild(ce),W=ce;var me=X;if(X=[{node:ce}],me.length>1)for(var Ae=1;Ae<me.length;Ae++)ie(me[Ae])}function ie(ce){var me,Ae=ce.type,Ie={};if(Ae==="a"){me="a";var Ce=ce.target,Re=ce.href,le=ce.popup;Re&&(Ie={"xlink:xlink:show":Ce==="_blank"||Ce.charAt(0)!=="_"?"new":"replace",target:Ce,"xlink:xlink:href":Re},le&&(Ie.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+le+'");return false;'))}else me="tspan";ce.style&&(Ie.style=ce.style);var de=document.createElementNS(T.svg,me);if(Ae==="sup"||Ae==="sub"){se(W,i),W.appendChild(de);var _e=document.createElementNS(T.svg,"tspan");se(_e,i),k.select(_e).attr("dy",a[Ae]),Ie.dy=n[Ae],W.appendChild(de),W.appendChild(_e)}else W.appendChild(de);k.select(de).attr(Ie),W=ce.node=de,X.push(ce)}function se(ce,me){ce.appendChild(document.createTextNode(me))}function fe(ce){if(X.length!==1){var me=X.pop();ce!==me.type&&A.log("Start tag <"+me.type+"> doesnt match end tag <"+ce+">. Pretending it did match.",V),W=X[X.length-1].node}else A.log("Ignoring unexpected end tag </"+ce+">.",V)}v.test(V)?re():(W=G,X=[{node:G}]);for(var ye=V.split(f),ge=0;ge<ye.length;ge++){var he=ye[ge],ve=he.match(b),Oe=ve&&ve[2].toLowerCase(),xe=r[Oe];if(Oe==="br")re();else if(xe===void 0)se(W,E(he));else if(ve[1])fe(Oe);else{var ke=ve[4],Me={type:Oe},Te=w(ke,g);if(Te?(Te=Te.replace(u,"$1 fill:"),xe&&(Te+=";"+xe)):xe&&(Te=xe),Te&&(Me.style=Te),Oe==="a"){J=!0;var Q=w(ke,y);if(Q){var oe=L(Q);oe&&(Me.href=oe,Me.target=w(ke,p)||"_blank",Me.popup=w(ke,m))}}ie(Me)}}return J}(I.node(),H);K&&I.style("pointer-events","all"),R.positionText(I),z&&z.call(I)}};var s=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,o=[["$","$"],["\\(","\\)"]],r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},n={sub:"0.3em",sup:"-0.6em"},a={sub:"-0.21em",sup:"0.42em"},i="",c=["http:","https:","mailto:","",void 0,":"],h=R.NEWLINES=/(\r\n?|\n)/g,f=/(<[^<>]*>)/,b=/<(\/?)([^ >]*)(\s+(.*))?>/i,v=/<br(\s+.*)?>/i;R.BR_TAG_ALL=/<br(\s+.*)?>/gi;var g=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,y=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,p=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,m=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function w(I,U){if(!I)return null;var z=I.match(U),H=z&&(z[3]||z[4]);return H&&E(H)}var u=/(^|;)\s*color:/;R.plainText=function(I,U){for(var z=(U=U||{}).len!==void 0&&U.len!==-1?U.len:1/0,H=U.allowedTags!==void 0?U.allowedTags:["br"],F=3,N=I.split(f),B=[],j="",K=0,G=0;G<N.length;G++){var V=N[G],W=V.match(b),J=W&&W[2].toLowerCase();if(J)H.indexOf(J)!==-1&&(B.push(V),j=J);else{var X=V.length;if(K+X<z)B.push(V),K+=X;else if(K<z){var ee=z-K;j&&(j!=="br"||ee<=F||X<=F)&&B.pop(),z>F?B.push(V.substr(0,ee-F)+"..."):B.push(V.substr(0,ee));break}j=""}}return B.join("")};var S={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},_=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(I){return I.replace(_,function(U,z){return(z.charAt(0)==="#"?function(H){if(!(H>1114111)){var F=String.fromCodePoint;if(F)return F(H);var N=String.fromCharCode;return H<=65535?N(H):N(55232+(H>>10),H%1024+56320)}}(z.charAt(1)==="x"?parseInt(z.substr(2),16):parseInt(z.substr(1),10)):S[z])||U})}function L(I){var U=encodeURI(decodeURI(I)),z=document.createElement("a"),H=document.createElement("a");z.href=I,H.href=U;var F=z.protocol,N=H.protocol;return c.indexOf(F)!==-1&&c.indexOf(N)!==-1?U:""}function C(I,U,z){var H,F,N,B=z.horizontalAlign,j=z.verticalAlign||"top",K=I.node().getBoundingClientRect(),G=U.node().getBoundingClientRect();return F=j==="bottom"?function(){return K.bottom-H.height}:j==="middle"?function(){return K.top+(K.height-H.height)/2}:function(){return K.top},N=B==="right"?function(){return K.right-H.width}:B==="center"?function(){return K.left+(K.width-H.width)/2}:function(){return K.left},function(){H=this.node().getBoundingClientRect();var V=N()-G.left,W=F()-G.top,J=z.gd||{};if(z.gd){J._fullLayout._calcInverseTransform(J);var X=A.apply3DTransform(J._fullLayout._invTransform)(V,W);V=X[0],W=X[1]}return this.style({top:W+"px",left:V+"px","z-index":1e3}),this}}R.convertEntities=E,R.sanitizeHTML=function(I){I=I.replace(h," ");for(var U=document.createElement("p"),z=U,H=[],F=I.split(f),N=0;N<F.length;N++){var B=F[N],j=B.match(b),K=j&&j[2].toLowerCase();if(K in r)if(j[1])H.length&&(z=H.pop());else{var G=j[4],V=w(G,g),W=V?{style:V}:{};if(K==="a"){var J=w(G,y);if(J){var X=L(J);if(X){W.href=X;var ee=w(G,p);ee&&(W.target=ee)}}}var re=document.createElement(K);z.appendChild(re),k.select(re).attr(W),z=re,H.push(re)}else z.appendChild(document.createTextNode(E(B)))}return U.innerHTML},R.lineCount=function(I){return I.selectAll("tspan.line").size()||1},R.positionText=function(I,U,z){return I.each(function(){var H=k.select(this);function F(j,K){return K===void 0?(K=H.attr(j))===null&&(H.attr(j,0),K=0):H.attr(j,K),K}var N=F("x",U),B=F("y",z);this.nodeName==="text"&&H.selectAll("tspan.line").attr({x:N,y:B})})};var P="1px ";R.makeTextShadow=function(I){return"1px 1px 1px "+I+", -1px -"+P+P+I+", 1px -"+P+P+I+", -"+P+P+P+I},R.makeEditable=function(I,U){var z=U.gd,H=U.delegate,F=k.dispatch("edit","input","cancel"),N=H||I;if(I.style({"pointer-events":H?"none":"all"}),I.size()!==1)throw new Error("boo");function B(){var K,G,V,W,J;K=k.select(z).select(".svg-container"),G=K.append("div"),V=I.node().style,W=parseFloat(V.fontSize||12),(J=U.text)===void 0&&(J=I.attr("data-unformatted")),G.classed("plugin-editable editable",!0).style({position:"absolute","font-family":V.fontFamily||"Arial","font-size":W,color:U.fill||V.fill||"black",opacity:1,"background-color":U.background||"transparent",outline:"#ffffff33 1px solid",margin:[-W/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(J).call(C(I,K,U)).on("blur",function(){z._editing=!1,I.text(this.textContent).style({opacity:1});var re,ie=k.select(this).attr("class");(re=ie?"."+ie.split(" ")[0]+"-math-group":"[class*=-math-group]")&&k.select(I.node().parentNode).select(re).style({opacity:0});var se=this.textContent;k.select(this).transition().duration(0).remove(),k.select(document).on("mouseup",null),F.edit.call(I,se)}).on("focus",function(){var re=this;z._editing=!0,k.select(document).on("mouseup",function(){if(k.event.target===re)return!1;document.activeElement===G.node()&&G.node().blur()})}).on("keyup",function(){k.event.which===27?(z._editing=!1,I.style({opacity:1}),k.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),F.cancel.call(I,this.textContent)):(F.input.call(I,this.textContent),k.select(this).call(C(I,K,U)))}).on("keydown",function(){k.event.which===13&&this.blur()}).call(j),I.style({opacity:0});var X,ee=N.attr("class");(X=ee?"."+ee.split(" ")[0]+"-math-group":"[class*=-math-group]")&&k.select(I.node().parentNode).select(X).style({opacity:0})}function j(K){var G=K.node(),V=document.createRange();V.selectNodeContents(G);var W=window.getSelection();W.removeAllRanges(),W.addRange(V),G.focus()}return U.immediate?B():N.on("click",B),k.rebind(I,F,"on")}},79990:function($,R){var e={};function k(A){A&&A.timer!==null&&(clearTimeout(A.timer),A.timer=null)}R.throttle=function(A,l,T){var x=e[A],d=Date.now();if(!x){for(var s in e)e[s].ts<d-6e4&&delete e[s];x=e[A]={ts:0,timer:null}}function t(){T(),x.ts=Date.now(),x.onDone&&(x.onDone(),x.onDone=null)}k(x),d>x.ts+l?t():x.timer=setTimeout(function(){t(),x.timer=null},l)},R.done=function(A){var l=e[A];return l&&l.timer?new Promise(function(T){var x=l.onDone;l.onDone=function(){x&&x(),T(),l.onDone=null}}):Promise.resolve()},R.clear=function(A){if(A)k(e[A]),delete e[A];else for(var l in e)R.clear(l)}},58163:function($,R,e){var k=e(92770);$.exports=function(A,l){if(A>0)return Math.log(A)/Math.LN10;var T=Math.log(Math.min(l[0],l[1]))/Math.LN10;return k(T)||(T=Math.log(Math.max(l[0],l[1]))/Math.LN10-6),T}},90973:function($,R,e){var k=$.exports={},A=e(78776).locationmodeToLayer,l=e(96892).zL;k.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},k.getTopojsonPath=function(T,x){return T+x+".json"},k.getTopojsonFeatures=function(T,x){var d=A[T.locationmode],s=x.objects[d];return l(x,s).features}},37815:function($){$.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function($){$.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function($,R,e){var k=e(73972);$.exports=function(A){for(var l,T,x=k.layoutArrayContainers,d=k.layoutArrayRegexes,s=A.split("[")[0],t=0;t<d.length;t++)if((T=A.match(d[t]))&&T.index===0){l=T[0];break}if(l||(l=x[x.indexOf(s)]),!l)return!1;var o=A.substr(l.length);return o?!!(T=o.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:l,index:Number(T[1]),property:T[3]||""}:{array:l,index:"",property:""}}},30962:function($,R,e){var k=e(71828),A=k.extendFlat,l=k.isPlainObject,T={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},x={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},d=T.flags.slice().concat(["fullReplot"]),s=x.flags.slice().concat("layoutReplot");function t(n){for(var a={},i=0;i<n.length;i++)a[n[i]]=!1;return a}function o(n,a,i){var c=A({},n);for(var h in c){var f=c[h];l(f)&&(c[h]=r(f,a,0,h))}return i==="from-root"&&(c.editType=a),c}function r(n,a,i,c){if(n.valType){var h=A({},n);if(h.editType=a,Array.isArray(n.items)){h.items=new Array(n.items.length);for(var f=0;f<n.items.length;f++)h.items[f]=r(n.items[f],a)}return h}return o(n,a,c.charAt(0)==="_"?"nested":"from-root")}$.exports={traces:T,layout:x,traceFlags:function(){return t(d)},layoutFlags:function(){return t(s)},update:function(n,a){var i=a.editType;if(i&&i!=="none")for(var c=i.split("+"),h=0;h<c.length;h++)n[c[h]]=!0},overrideAll:o}},58377:function($,R,e){var k=e(92770),A=e(27812),l=e(73972),T=e(71828),x=e(74875),d=e(41675),s=e(7901),t=d.cleanId,o=d.getFromTrace,r=l.traceIs;function n(y,p){var m=y[p],w=p.charAt(0);m&&m!=="paper"&&(y[p]=t(m,w,!0))}function a(y){function p(m,w){var u=y[m],S=y.title&&y.title[w];u&&!S&&(y.title||(y.title={}),y.title[w]=y[m],delete y[m])}y&&(typeof y.title!="string"&&typeof y.title!="number"||(y.title={text:y.title}),p("titlefont","font"),p("titleposition","position"),p("titleside","side"),p("titleoffset","offset"))}function i(y){if(!T.isPlainObject(y))return!1;var p=y.name;return delete y.name,delete y.showlegend,(typeof p=="string"||typeof p=="number")&&String(p)}function c(y,p,m,w){if(m&&!w)return y;if(w&&!m||!y.trim())return p;if(!p.trim())return y;var u,S=Math.min(y.length,p.length);for(u=0;u<S&&y.charAt(u)===p.charAt(u);u++);return y.substr(0,u).trim()}function h(y){var p="middle",m="center";return typeof y=="string"&&(y.indexOf("top")!==-1?p="top":y.indexOf("bottom")!==-1&&(p="bottom"),y.indexOf("left")!==-1?m="left":y.indexOf("right")!==-1&&(m="right")),p+" "+m}function f(y,p){return p in y&&typeof y[p]=="object"&&Object.keys(y[p]).length===0}R.clearPromiseQueue=function(y){Array.isArray(y._promises)&&y._promises.length>0&&T.log("Clearing previous rejected promises from queue."),y._promises=[]},R.cleanLayout=function(y){var p,m;y||(y={}),y.xaxis1&&(y.xaxis||(y.xaxis=y.xaxis1),delete y.xaxis1),y.yaxis1&&(y.yaxis||(y.yaxis=y.yaxis1),delete y.yaxis1),y.scene1&&(y.scene||(y.scene=y.scene1),delete y.scene1);var w=(x.subplotsRegistry.cartesian||{}).attrRegex,u=(x.subplotsRegistry.polar||{}).attrRegex,S=(x.subplotsRegistry.ternary||{}).attrRegex,_=(x.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(y);for(p=0;p<E.length;p++){var L=E[p];if(w&&w.test(L)){var C=y[L];C.anchor&&C.anchor!=="free"&&(C.anchor=t(C.anchor)),C.overlaying&&(C.overlaying=t(C.overlaying)),C.type||(C.isdate?C.type="date":C.islog?C.type="log":C.isdate===!1&&C.islog===!1&&(C.type="linear")),C.autorange!=="withzero"&&C.autorange!=="tozero"||(C.autorange=!0,C.rangemode="tozero"),delete C.islog,delete C.isdate,delete C.categories,f(C,"domain")&&delete C.domain,C.autotick!==void 0&&(C.tickmode===void 0&&(C.tickmode=C.autotick?"auto":"linear"),delete C.autotick),a(C)}else if(u&&u.test(L))a(y[L].radialaxis);else if(S&&S.test(L)){var P=y[L];a(P.aaxis),a(P.baxis),a(P.caxis)}else if(_&&_.test(L)){var I=y[L],U=I.cameraposition;if(Array.isArray(U)&&U[0].length===4){var z=U[0],H=U[1],F=U[2],N=A([],z),B=[];for(m=0;m<3;++m)B[m]=H[m]+F*N[2+4*m];I.camera={eye:{x:B[0],y:B[1],z:B[2]},center:{x:H[0],y:H[1],z:H[2]},up:{x:0,y:0,z:1}},delete I.cameraposition}a(I.xaxis),a(I.yaxis),a(I.zaxis)}}var j=Array.isArray(y.annotations)?y.annotations.length:0;for(p=0;p<j;p++){var K=y.annotations[p];T.isPlainObject(K)&&(K.ref&&(K.ref==="paper"?(K.xref="paper",K.yref="paper"):K.ref==="data"&&(K.xref="x",K.yref="y"),delete K.ref),n(K,"xref"),n(K,"yref"))}var G=Array.isArray(y.shapes)?y.shapes.length:0;for(p=0;p<G;p++){var V=y.shapes[p];T.isPlainObject(V)&&(n(V,"xref"),n(V,"yref"))}var W=Array.isArray(y.images)?y.images.length:0;for(p=0;p<W;p++){var J=y.images[p];T.isPlainObject(J)&&(n(J,"xref"),n(J,"yref"))}var X=y.legend;return X&&(X.x>3?(X.x=1.02,X.xanchor="left"):X.x<-2&&(X.x=-.02,X.xanchor="right"),X.y>3?(X.y=1.02,X.yanchor="bottom"):X.y<-2&&(X.y=-.02,X.yanchor="top")),a(y),y.dragmode==="rotate"&&(y.dragmode="orbit"),s.clean(y),y.template&&y.template.layout&&R.cleanLayout(y.template.layout),y},R.cleanData=function(y){for(var p=0;p<y.length;p++){var m,w=y[p];if(w.type==="histogramy"&&"xbins"in w&&!("ybins"in w)&&(w.ybins=w.xbins,delete w.xbins),w.error_y&&"opacity"in w.error_y){var u=s.defaults,S=w.error_y.color||(r(w,"bar")?s.defaultLine:u[p%u.length]);w.error_y.color=s.addOpacity(s.rgb(S),s.opacity(S)*w.error_y.opacity),delete w.error_y.opacity}if("bardir"in w&&(w.bardir!=="h"||!r(w,"bar")&&w.type.substr(0,9)!=="histogram"||(w.orientation="h",R.swapXYData(w)),delete w.bardir),w.type==="histogramy"&&R.swapXYData(w),w.type!=="histogramx"&&w.type!=="histogramy"||(w.type="histogram"),"scl"in w&&!("colorscale"in w)&&(w.colorscale=w.scl,delete w.scl),"reversescl"in w&&!("reversescale"in w)&&(w.reversescale=w.reversescl,delete w.reversescl),w.xaxis&&(w.xaxis=t(w.xaxis,"x")),w.yaxis&&(w.yaxis=t(w.yaxis,"y")),r(w,"gl3d")&&w.scene&&(w.scene=x.subplotsRegistry.gl3d.cleanId(w.scene)),!r(w,"pie-like")&&!r(w,"bar-like"))if(Array.isArray(w.textposition))for(m=0;m<w.textposition.length;m++)w.textposition[m]=h(w.textposition[m]);else w.textposition&&(w.textposition=h(w.textposition));var _=l.getModule(w);if(_&&_.colorbar){var E=_.colorbar.container,L=E?w[E]:w;L&&L.colorscale&&(L.colorscale==="YIGnBu"&&(L.colorscale="YlGnBu"),L.colorscale==="YIOrRd"&&(L.colorscale="YlOrRd"))}if(w.type==="surface"&&T.isPlainObject(w.contours)){var C=["x","y","z"];for(m=0;m<C.length;m++){var P=w.contours[C[m]];T.isPlainObject(P)&&(P.highlightColor&&(P.highlightcolor=P.highlightColor,delete P.highlightColor),P.highlightWidth&&(P.highlightwidth=P.highlightWidth,delete P.highlightWidth))}}if(w.type==="candlestick"||w.type==="ohlc"){var I=(w.increasing||{}).showlegend!==!1,U=(w.decreasing||{}).showlegend!==!1,z=i(w.increasing),H=i(w.decreasing);if(z!==!1&&H!==!1){var F=c(z,H,I,U);F&&(w.name=F)}else!z&&!H||w.name||(w.name=z||H)}if(Array.isArray(w.transforms)){var N=w.transforms;for(m=0;m<N.length;m++){var B=N[m];if(T.isPlainObject(B))switch(B.type){case"filter":B.filtersrc&&(B.target=B.filtersrc,delete B.filtersrc),B.calendar&&(B.valuecalendar||(B.valuecalendar=B.calendar),delete B.calendar);break;case"groupby":if(B.styles=B.styles||B.style,B.styles&&!Array.isArray(B.styles)){var j=B.styles,K=Object.keys(j);B.styles=[];for(var G=0;G<K.length;G++)B.styles.push({target:K[G],value:j[K[G]]})}}}}f(w,"line")&&delete w.line,"marker"in w&&(f(w.marker,"line")&&delete w.marker.line,f(w,"marker")&&delete w.marker),s.clean(w),w.autobinx&&(delete w.autobinx,delete w.xbins),w.autobiny&&(delete w.autobiny,delete w.ybins),a(w),w.colorbar&&a(w.colorbar),w.marker&&w.marker.colorbar&&a(w.marker.colorbar),w.line&&w.line.colorbar&&a(w.line.colorbar),w.aaxis&&a(w.aaxis),w.baxis&&a(w.baxis)}},R.swapXYData=function(y){var p;if(T.swapAttrs(y,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(y.z)&&Array.isArray(y.z[0])&&(y.transpose?delete y.transpose:y.transpose=!0),y.error_x&&y.error_y){var m=y.error_y,w="copy_ystyle"in m?m.copy_ystyle:!(m.color||m.thickness||m.width);T.swapAttrs(y,["error_?.copy_ystyle"]),w&&T.swapAttrs(y,["error_?.color","error_?.thickness","error_?.width"])}if(typeof y.hoverinfo=="string"){var u=y.hoverinfo.split("+");for(p=0;p<u.length;p++)u[p]==="x"?u[p]="y":u[p]==="y"&&(u[p]="x");y.hoverinfo=u.join("+")}},R.coerceTraceIndices=function(y,p){if(k(p))return[p];if(!Array.isArray(p)||!p.length)return y.data.map(function(u,S){return S});if(Array.isArray(p)){for(var m=[],w=0;w<p.length;w++)T.isIndex(p[w],y.data.length)?m.push(p[w]):T.warn("trace index (",p[w],") is not a number or is out of bounds");return m}return p},R.manageArrayContainers=function(y,p,m){var w=y.obj,u=y.parts,S=u.length,_=u[S-1],E=k(_);if(E&&p===null){var L=u.slice(0,S-1).join(".");T.nestedProperty(w,L).get().splice(_,1)}else E&&y.get()===void 0&&y.get()===void 0&&(m[y.astr]=null),y.set(p)};var b=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function v(y){var p=y.search(b);if(p>0)return y.substr(0,p)}R.hasParent=function(y,p){for(var m=v(p);m;){if(m in y)return!0;m=v(m)}return!1};var g=["x","y","z"];R.clearAxisTypes=function(y,p,m){for(var w=0;w<p.length;w++)for(var u=y._fullData[w],S=0;S<3;S++){var _=o(y,u,g[S]);if(_&&_.type!=="log"){var E=_._name,L=_._id.substr(1);if(L.substr(0,5)==="scene"){if(m[L]!==void 0)continue;E=L+"."+E}var C=E+".type";m[E]===void 0&&m[C]===void 0&&T.nestedProperty(y.layout,C).set(null)}}}},10641:function($,R,e){var k=e(72391);R._doPlot=k._doPlot,R.newPlot=k.newPlot,R.restyle=k.restyle,R.relayout=k.relayout,R.redraw=k.redraw,R.update=k.update,R._guiRestyle=k._guiRestyle,R._guiRelayout=k._guiRelayout,R._guiUpdate=k._guiUpdate,R._storeDirectGUIEdit=k._storeDirectGUIEdit,R.react=k.react,R.extendTraces=k.extendTraces,R.prependTraces=k.prependTraces,R.addTraces=k.addTraces,R.deleteTraces=k.deleteTraces,R.moveTraces=k.moveTraces,R.purge=k.purge,R.addFrames=k.addFrames,R.deleteFrames=k.deleteFrames,R.animate=k.animate,R.setPlotConfig=k.setPlotConfig,R.toImage=e(403),R.validate=e(84936),R.downloadImage=e(7239);var A=e(96318);R.makeTemplate=A.makeTemplate,R.validateTemplate=A.validateTemplate},6611:function($,R,e){var k=e(41965),A=e(64213),l=e(47769),T=e(65888).sorterAsc,x=e(73972);R.containerArrayMatch=e(14458);var d=R.isAddVal=function(t){return t==="add"||k(t)},s=R.isRemoveVal=function(t){return t===null||t==="remove"};R.applyContainerArrayChanges=function(t,o,r,n,a){var i=o.astr,c=x.getComponentMethod(i,"supplyLayoutDefaults"),h=x.getComponentMethod(i,"draw"),f=x.getComponentMethod(i,"drawOne"),b=n.replot||n.recalc||c===A||h===A,v=t.layout,g=t._fullLayout;if(r[""]){Object.keys(r).length>1&&l.warn("Full array edits are incompatible with other edits",i);var y=r[""][""];if(s(y))o.set(null);else{if(!Array.isArray(y))return l.warn("Unrecognized full array edit value",i,y),!0;o.set(y)}return!b&&(c(v,g),h(t),!0)}var p,m,w,u,S,_,E,L,C=Object.keys(r).map(Number).sort(T),P=o.get(),I=P||[],U=a(g,i).get(),z=[],H=-1,F=I.length;for(p=0;p<C.length;p++)if(u=r[w=C[p]],S=Object.keys(u),_=u[""],E=d(_),w<0||w>I.length-(E?0:1))l.warn("index out of range",i,w);else if(_!==void 0)S.length>1&&l.warn("Insertion & removal are incompatible with edits to the same index.",i,w),s(_)?z.push(w):E?(_==="add"&&(_={}),I.splice(w,0,_),U&&U.splice(w,0,{})):l.warn("Unrecognized full object edit value",i,w,_),H===-1&&(H=w);else for(m=0;m<S.length;m++)L=i+"["+w+"].",a(I[w],S[m],L).set(u[S[m]]);for(p=z.length-1;p>=0;p--)I.splice(z[p],1),U&&U.splice(z[p],1);if(I.length?P||o.set(I):o.set(null),b)return!1;if(c(v,g),f!==A){var N;if(H===-1)N=C;else{for(F=Math.max(I.length,F),N=[],p=0;p<C.length&&!((w=C[p])>=H);p++)N.push(w);for(p=H;p<F;p++)N.push(p)}for(p=0;p<N.length;p++)f(t,N[p])}else h(t);return!0}},72391:function($,R,e){var k=e(39898),A=e(92770),l=e(57035),T=e(71828),x=T.nestedProperty,d=e(11086),s=e(10847),t=e(73972),o=e(86281),r=e(74875),n=e(89298),a=e(91424),i=e(7901),c=e(4305).initInteractions,h=e(77922),f=e(47322).clearOutline,b=e(72075).dfltConfig,v=e(6611),g=e(58377),y=e(61549),p=e(30962),m=e(85555).AX_NAME_PATTERN,w=0;function u(Q){var oe=Q._fullLayout;oe._redrawFromAutoMarginCount?oe._redrawFromAutoMarginCount--:Q.emit("plotly_afterplot")}function S(Q,oe){try{Q._fullLayout._paper.style("background",oe)}catch(ce){T.error(ce)}}function _(Q,oe){S(Q,i.combine(oe,"white"))}function E(Q,oe){if(!Q._context){Q._context=T.extendDeep({},b);var ce=k.select("base");Q._context._baseUrl=ce.size()&&ce.attr("href")?window.location.href.split("#")[0]:""}var me,Ae,Ie,Ce=Q._context;if(oe){for(Ae=Object.keys(oe),me=0;me<Ae.length;me++)(Ie=Ae[me])!=="editable"&&Ie!=="edits"&&Ie in Ce&&(Ie==="setBackground"&&oe[Ie]==="opaque"?Ce[Ie]=_:Ce[Ie]=oe[Ie]);oe.plot3dPixelRatio&&!Ce.plotGlPixelRatio&&(Ce.plotGlPixelRatio=Ce.plot3dPixelRatio);var Re=oe.editable;if(Re!==void 0)for(Ce.editable=Re,Ae=Object.keys(Ce.edits),me=0;me<Ae.length;me++)Ce.edits[Ae[me]]=Re;if(oe.edits)for(Ae=Object.keys(oe.edits),me=0;me<Ae.length;me++)(Ie=Ae[me])in Ce.edits&&(Ce.edits[Ie]=oe.edits[Ie]);Ce._exportedPlot=oe._exportedPlot}Ce.staticPlot&&(Ce.editable=!1,Ce.edits={},Ce.autosizable=!1,Ce.scrollZoom=!1,Ce.doubleClick=!1,Ce.showTips=!1,Ce.showLink=!1,Ce.displayModeBar=!1),Ce.displayModeBar!=="hover"||l||(Ce.displayModeBar=!0),Ce.setBackground!=="transparent"&&typeof Ce.setBackground=="function"||(Ce.setBackground=S),Ce._hasZeroHeight=Ce._hasZeroHeight||Q.clientHeight===0,Ce._hasZeroWidth=Ce._hasZeroWidth||Q.clientWidth===0;var le=Ce.scrollZoom,de=Ce._scrollZoom={};if(le===!0)de.cartesian=1,de.gl3d=1,de.geo=1,de.mapbox=1;else if(typeof le=="string"){var _e=le.split("+");for(me=0;me<_e.length;me++)de[_e[me]]=1}else le!==!1&&(de.gl3d=1,de.geo=1,de.mapbox=1)}function L(Q,oe){var ce,me,Ae=oe+1,Ie=[];for(ce=0;ce<Q.length;ce++)(me=Q[ce])<0?Ie.push(Ae+me):Ie.push(me);return Ie}function C(Q,oe,ce){var me,Ae;for(me=0;me<oe.length;me++){if((Ae=oe[me])!==parseInt(Ae,10))throw new Error("all values in "+ce+" must be integers");if(Ae>=Q.data.length||Ae<-Q.data.length)throw new Error(ce+" must be valid indices for gd.data.");if(oe.indexOf(Ae,me+1)>-1||Ae>=0&&oe.indexOf(-Q.data.length+Ae)>-1||Ae<0&&oe.indexOf(Q.data.length+Ae)>-1)throw new Error("each index in "+ce+" must be unique.")}}function P(Q,oe,ce){if(!Array.isArray(Q.data))throw new Error("gd.data must be an array.");if(oe===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(oe)||(oe=[oe]),C(Q,oe,"currentIndices"),ce===void 0||Array.isArray(ce)||(ce=[ce]),ce!==void 0&&C(Q,ce,"newIndices"),ce!==void 0&&oe.length!==ce.length)throw new Error("current and new indices must be of equal length.")}function I(Q,oe,ce,me,Ae){(function(Ve,He,nt,tt){var ot=T.isPlainObject(tt);if(!Array.isArray(Ve.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(He))throw new Error("update must be a key:value object");if(nt===void 0)throw new Error("indices must be an integer or array of integers");for(var dt in C(Ve,nt,"indices"),He){if(!Array.isArray(He[dt])||He[dt].length!==nt.length)throw new Error("attribute "+dt+" must be an array of length equal to indices array length");if(ot&&(!(dt in tt)||!Array.isArray(tt[dt])||tt[dt].length!==He[dt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(Q,oe,ce,me);for(var Ie=function(Ve,He,nt,tt){var ot,dt,kt,mt,wt,Lt=T.isPlainObject(tt),Ct=[];for(var It in Array.isArray(nt)||(nt=[nt]),nt=L(nt,Ve.data.length-1),He)for(var Ut=0;Ut<nt.length;Ut++){if(ot=Ve.data[nt[Ut]],dt=(kt=x(ot,It)).get(),mt=He[It][Ut],!T.isArrayOrTypedArray(mt))throw new Error("attribute: "+It+" index: "+Ut+" must be an array");if(!T.isArrayOrTypedArray(dt))throw new Error("cannot extend missing or non-array attribute: "+It);if(dt.constructor!==mt.constructor)throw new Error("cannot extend array with an array of a different type: "+It);wt=Lt?tt[It][Ut]:tt,A(wt)||(wt=-1),Ct.push({prop:kt,target:dt,insert:mt,maxp:Math.floor(wt)})}return Ct}(Q,oe,ce,me),Ce={},Re={},le=0;le<Ie.length;le++){var de=Ie[le].prop,_e=Ie[le].maxp,Fe=Ae(Ie[le].target,Ie[le].insert,_e);de.set(Fe[0]),Array.isArray(Ce[de.astr])||(Ce[de.astr]=[]),Ce[de.astr].push(Fe[1]),Array.isArray(Re[de.astr])||(Re[de.astr]=[]),Re[de.astr].push(Ie[le].target.length)}return{update:Ce,maxPoints:Re}}function U(Q,oe){var ce=new Q.constructor(Q.length+oe.length);return ce.set(Q),ce.set(oe,Q.length),ce}function z(Q,oe,ce,me){Q=T.getGraphDiv(Q),g.clearPromiseQueue(Q);var Ae={};if(typeof oe=="string")Ae[oe]=ce;else{if(!T.isPlainObject(oe))return T.warn("Restyle fail.",oe,ce,me),Promise.reject();Ae=T.extendFlat({},oe),me===void 0&&(me=ce)}Object.keys(Ae).length&&(Q.changed=!0);var Ie=g.coerceTraceIndices(Q,me),Ce=B(Q,Ae,Ie),Re=Ce.flags;Re.calc&&(Q.calcdata=void 0),Re.clearAxisTypes&&g.clearAxisTypes(Q,Ie,{});var le=[];Re.fullReplot?le.push(R._doPlot):(le.push(r.previousPromises),r.supplyDefaults(Q),Re.markerSize&&(r.doCalcdata(Q),V(le)),Re.style&&le.push(y.doTraceStyle),Re.colorbars&&le.push(y.doColorBars),le.push(u)),le.push(r.rehover,r.redrag,r.reselect),s.add(Q,z,[Q,Ce.undoit,Ce.traces],z,[Q,Ce.redoit,Ce.traces]);var de=T.syncOrAsync(le,Q);return de&&de.then||(de=Promise.resolve()),de.then(function(){return Q.emit("plotly_restyle",Ce.eventData),Q})}function H(Q){return Q===void 0?null:Q}function F(Q,oe){return oe?function(ce,me,Ae){var Ie=x(ce,me),Ce=Ie.set;return Ie.set=function(Re){N((Ae||"")+me,Ie.get(),Re,Q),Ce(Re)},Ie}:x}function N(Q,oe,ce,me){if(Array.isArray(oe)||Array.isArray(ce))for(var Ae=Array.isArray(oe)?oe:[],Ie=Array.isArray(ce)?ce:[],Ce=Math.max(Ae.length,Ie.length),Re=0;Re<Ce;Re++)N(Q+"["+Re+"]",Ae[Re],Ie[Re],me);else if(T.isPlainObject(oe)||T.isPlainObject(ce)){var le=T.isPlainObject(oe)?oe:{},de=T.isPlainObject(ce)?ce:{},_e=T.extendFlat({},le,de);for(var Fe in _e)N(Q+"."+Fe,le[Fe],de[Fe],me)}else me[Q]===void 0&&(me[Q]=H(oe))}function B(Q,oe,ce){var me,Ae=Q._fullLayout,Ie=Q._fullData,Ce=Q.data,Re=Ae._guiEditing,le=F(Ae._preGUI,Re),de=T.extendDeepAll({},oe);j(oe);var _e,Fe=p.traceFlags(),Ve={},He={};function nt(){return ce.map(function(){})}function tt(Nt){var Gt=n.id2name(Nt);_e.indexOf(Gt)===-1&&_e.push(Gt)}function ot(Nt){return"LAYOUT"+Nt+".autorange"}function dt(Nt){return"LAYOUT"+Nt+".range"}function kt(Nt){for(var Gt=Nt;Gt<Ie.length;Gt++)if(Ie[Gt]._input===Ce[Nt])return Ie[Gt]}function mt(Nt,Gt,un){if(Array.isArray(Nt))Nt.forEach(function(wn){mt(wn,Gt,un)});else if(!(Nt in oe)&&!g.hasParent(oe,Nt)){var pn;if(Nt.substr(0,6)==="LAYOUT")pn=le(Q.layout,Nt.replace("LAYOUT",""));else{var Kt=ce[un];pn=F(Ae._tracePreGUI[kt(Kt)._fullInput.uid],Re)(Ce[Kt],Nt)}Nt in He||(He[Nt]=nt()),He[Nt][un]===void 0&&(He[Nt][un]=H(pn.get())),Gt!==void 0&&pn.set(Gt)}}function wt(Nt){return function(Gt){return Ie[Gt][Nt]}}function Lt(Nt){return function(Gt,un){return Gt===!1?Ie[ce[un]][Nt]:null}}for(var Ct in oe){if(g.hasParent(oe,Ct))throw new Error("cannot set "+Ct+" and a parent attribute simultaneously");var It,Ut,Rt,Ge,We,Be,Ye=oe[Ct];if(Ct!=="autobinx"&&Ct!=="autobiny"||(Ct=Ct.charAt(Ct.length-1)+"bins",Ye=Array.isArray(Ye)?Ye.map(Lt(Ct)):Ye===!1?ce.map(wt(Ct)):null),Ve[Ct]=Ye,Ct.substr(0,6)!=="LAYOUT"){for(He[Ct]=nt(),me=0;me<ce.length;me++)if(It=Ce[ce[me]],Ut=kt(ce[me]),Ge=(Rt=F(Ae._tracePreGUI[Ut._fullInput.uid],Re)(It,Ct)).get(),(We=Array.isArray(Ye)?Ye[me%Ye.length]:Ye)!==void 0){var rt=Rt.parts[Rt.parts.length-1],Se=Ct.substr(0,Ct.length-rt.length-1),ze=Se?Se+".":"",Ke=Se?x(Ut,Se).get():Ut;if((Be=o.getTraceValObject(Ut,Rt.parts))&&Be.impliedEdits&&We!==null)for(var st in Be.impliedEdits)mt(T.relativeAttr(Ct,st),Be.impliedEdits[st],me);else if(rt!=="thicknessmode"&&rt!=="lenmode"||Ge===We||We!=="fraction"&&We!=="pixels"||!Ke){if(Ct==="type"&&(We==="pie"!=(Ge==="pie")||We==="funnelarea"!=(Ge==="funnelarea"))){var ct="x",Tt="y";We!=="bar"&&Ge!=="bar"||It.orientation!=="h"||(ct="y",Tt="x"),T.swapAttrs(It,["?","?src"],"labels",ct),T.swapAttrs(It,["d?","?0"],"label",ct),T.swapAttrs(It,["?","?src"],"values",Tt),Ge==="pie"||Ge==="funnelarea"?(x(It,"marker.color").set(x(It,"marker.colors").get()),Ae._pielayer.selectAll("g.trace").remove()):t.traceIs(It,"cartesian")&&x(It,"marker.colors").set(x(It,"marker.color").get())}}else{var Et=Ae._size,At=Ke.orient,ht=At==="top"||At==="bottom";if(rt==="thicknessmode"){var pt=ht?Et.h:Et.w;mt(ze+"thickness",Ke.thickness*(We==="fraction"?1/pt:pt),me)}else{var gt=ht?Et.w:Et.h;mt(ze+"len",Ke.len*(We==="fraction"?1/gt:gt),me)}}if(He[Ct][me]=H(Ge),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Ct)!==-1){if(Ct==="orientation"){Rt.set(We);var Pt=It.x&&!It.y?"h":"v";if((Rt.get()||Pt)===Ut.orientation)continue}else Ct==="orientationaxes"&&(It.orientation={v:"h",h:"v"}[Ut.orientation]);g.swapXYData(It),Fe.calc=Fe.clearAxisTypes=!0}else r.dataArrayContainers.indexOf(Rt.parts[0])!==-1?(g.manageArrayContainers(Rt,We,He),Fe.calc=!0):(Be?Be.arrayOk&&!t.traceIs(Ut,"regl")&&(T.isArrayOrTypedArray(We)||T.isArrayOrTypedArray(Ge))?Fe.calc=!0:p.update(Fe,Be):Fe.calc=!0,Rt.set(We))}if(["swapxyaxes","orientationaxes"].indexOf(Ct)!==-1&&n.swap(Q,ce),Ct==="orientationaxes"){var Ot=x(Q.layout,"hovermode"),Ht=Ot.get();Ht==="x"?Ot.set("y"):Ht==="y"?Ot.set("x"):Ht==="x unified"?Ot.set("y unified"):Ht==="y unified"&&Ot.set("x unified")}if(["orientation","type"].indexOf(Ct)!==-1){for(_e=[],me=0;me<ce.length;me++){var jt=Ce[ce[me]];t.traceIs(jt,"cartesian")&&(tt(jt.xaxis||"x"),tt(jt.yaxis||"y"))}mt(_e.map(ot),!0,0),mt(_e.map(dt),[0,1],0)}}else Rt=le(Q.layout,Ct.replace("LAYOUT","")),He[Ct]=[H(Rt.get())],Rt.set(Array.isArray(Ye)?Ye[0]:Ye),Fe.calc=!0}return(Fe.calc||Fe.plot)&&(Fe.fullReplot=!0),{flags:Fe,undoit:He,redoit:Ve,traces:ce,eventData:T.extendDeepNoArrays([],[de,ce])}}function j(Q){var oe,ce,me,Ae=T.counterRegex("axis",".title",!1,!1),Ie=/colorbar\.title$/,Ce=Object.keys(Q);for(oe=0;oe<Ce.length;oe++)ce=Ce[oe],me=Q[ce],ce!=="title"&&!Ae.test(ce)&&!Ie.test(ce)||typeof me!="string"&&typeof me!="number"?ce.indexOf("titlefont")>-1&&ce.indexOf("grouptitlefont")===-1?Re(ce,ce.replace("titlefont","title.font")):ce.indexOf("titleposition")>-1?Re(ce,ce.replace("titleposition","title.position")):ce.indexOf("titleside")>-1?Re(ce,ce.replace("titleside","title.side")):ce.indexOf("titleoffset")>-1&&Re(ce,ce.replace("titleoffset","title.offset")):Re(ce,ce.replace("title","title.text"));function Re(le,de){Q[de]=Q[le],delete Q[le]}}function K(Q,oe,ce){Q=T.getGraphDiv(Q),g.clearPromiseQueue(Q);var me={};if(typeof oe=="string")me[oe]=ce;else{if(!T.isPlainObject(oe))return T.warn("Relayout fail.",oe,ce),Promise.reject();me=T.extendFlat({},oe)}Object.keys(me).length&&(Q.changed=!0);var Ae=ee(Q,me),Ie=Ae.flags;Ie.calc&&(Q.calcdata=void 0);var Ce=[r.previousPromises];Ie.layoutReplot?Ce.push(y.layoutReplot):Object.keys(me).length&&(G(Q,Ie,Ae)||r.supplyDefaults(Q),Ie.legend&&Ce.push(y.doLegend),Ie.layoutstyle&&Ce.push(y.layoutStyles),Ie.axrange&&V(Ce,Ae.rangesAltered),Ie.ticks&&Ce.push(y.doTicksRelayout),Ie.modebar&&Ce.push(y.doModeBar),Ie.camera&&Ce.push(y.doCamera),Ie.colorbars&&Ce.push(y.doColorBars),Ce.push(u)),Ce.push(r.rehover,r.redrag,r.reselect),s.add(Q,K,[Q,Ae.undoit],K,[Q,Ae.redoit]);var Re=T.syncOrAsync(Ce,Q);return Re&&Re.then||(Re=Promise.resolve(Q)),Re.then(function(){return Q.emit("plotly_relayout",Ae.eventData),Q})}function G(Q,oe,ce){var me=Q._fullLayout;if(!oe.axrange)return!1;for(var Ae in oe)if(Ae!=="axrange"&&oe[Ae])return!1;for(var Ie in ce.rangesAltered){var Ce=n.id2name(Ie),Re=Q.layout[Ce],le=me[Ce];if(le.autorange=Re.autorange,Re.range&&(le.range=Re.range.slice()),le.cleanRange(),le._matchGroup){for(var de in le._matchGroup)if(de!==Ie){var _e=me[n.id2name(de)];_e.autorange=le.autorange,_e.range=le.range.slice(),_e._input.range=le.range.slice()}}}return!0}function V(Q,oe){var ce=oe?function(me){var Ae=[];for(var Ie in oe){var Ce=n.getFromId(me,Ie);if(Ae.push(Ie),(Ce.ticklabelposition||"").indexOf("inside")!==-1&&Ce._anchorAxis&&Ae.push(Ce._anchorAxis._id),Ce._matchGroup)for(var Re in Ce._matchGroup)oe[Re]||Ae.push(Re)}return n.draw(me,Ae,{skipTitle:!0})}:function(me){return n.draw(me,"redraw")};Q.push(f,y.doAutoRangeAndConstraints,ce,y.drawData,y.finalDraw)}var W=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,J=/^[xyz]axis[0-9]*\.autorange$/,X=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ee(Q,oe){var ce,me,Ae,Ie=Q.layout,Ce=Q._fullLayout,Re=Ce._guiEditing,le=F(Ce._preGUI,Re),de=Object.keys(oe),_e=n.list(Q),Fe=T.extendDeepAll({},oe),Ve={};for(j(oe),de=Object.keys(oe),me=0;me<de.length;me++)if(de[me].indexOf("allaxes")===0){for(Ae=0;Ae<_e.length;Ae++){var He=_e[Ae]._id.substr(1),nt=He.indexOf("scene")!==-1?He+".":"",tt=de[me].replace("allaxes",nt+_e[Ae]._name);oe[tt]||(oe[tt]=oe[de[me]])}delete oe[de[me]]}var ot=p.layoutFlags(),dt={},kt={};function mt(Kt,wn){if(Array.isArray(Kt))Kt.forEach(function(vn){mt(vn,wn)});else if(!(Kt in oe)&&!g.hasParent(oe,Kt)){var Bn=le(Ie,Kt);Kt in kt||(kt[Kt]=H(Bn.get())),wn!==void 0&&Bn.set(wn)}}var wt,Lt={};function Ct(Kt){var wn=n.name2id(Kt.split(".")[0]);return Lt[wn]=1,wn}for(var It in oe){if(g.hasParent(oe,It))throw new Error("cannot set "+It+" and a parent attribute simultaneously");for(var Ut=le(Ie,It),Rt=oe[It],Ge=Ut.parts.length-1;Ge>0&&typeof Ut.parts[Ge]!="string";)Ge--;var We=Ut.parts[Ge],Be=Ut.parts[Ge-1]+"."+We,Ye=Ut.parts.slice(0,Ge).join("."),rt=x(Q.layout,Ye).get(),Se=x(Ce,Ye).get(),ze=Ut.get();if(Rt!==void 0){dt[It]=Rt,kt[It]=We==="reverse"?Rt:H(ze);var Ke=o.getLayoutValObject(Ce,Ut.parts);if(Ke&&Ke.impliedEdits&&Rt!==null)for(var st in Ke.impliedEdits)mt(T.relativeAttr(It,st),Ke.impliedEdits[st]);if(["width","height"].indexOf(It)!==-1)if(Rt){mt("autosize",null);var ct=It==="height"?"width":"height";mt(ct,Ce[ct])}else Ce[It]=Q._initialAutoSize[It];else if(It==="autosize")mt("width",Rt?null:Ce.width),mt("height",Rt?null:Ce.height);else if(Be.match(W))Ct(Be),x(Ce,Ye+"._inputRange").set(null);else if(Be.match(J)){Ct(Be),x(Ce,Ye+"._inputRange").set(null);var Tt=x(Ce,Ye).get();Tt._inputDomain&&(Tt._input.domain=Tt._inputDomain.slice())}else Be.match(X)&&x(Ce,Ye+"._inputDomain").set(null);if(We==="type"){wt=rt;var Et=Se.type==="linear"&&Rt==="log",At=Se.type==="log"&&Rt==="linear";if(Et||At){if(wt&&wt.range)if(Se.autorange)Et&&(wt.range=wt.range[1]>wt.range[0]?[1,2]:[2,1]);else{var ht=wt.range[0],pt=wt.range[1];Et?(ht<=0&&pt<=0&&mt(Ye+".autorange",!0),ht<=0?ht=pt/1e6:pt<=0&&(pt=ht/1e6),mt(Ye+".range[0]",Math.log(ht)/Math.LN10),mt(Ye+".range[1]",Math.log(pt)/Math.LN10)):(mt(Ye+".range[0]",Math.pow(10,ht)),mt(Ye+".range[1]",Math.pow(10,pt)))}else mt(Ye+".autorange",!0);Array.isArray(Ce._subplots.polar)&&Ce._subplots.polar.length&&Ce[Ut.parts[0]]&&Ut.parts[1]==="radialaxis"&&delete Ce[Ut.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")(Q,Se,Rt,mt),t.getComponentMethod("images","convertCoords")(Q,Se,Rt,mt)}else mt(Ye+".autorange",!0),mt(Ye+".range",null);x(Ce,Ye+"._inputRange").set(null)}else if(We.match(m)){var gt=x(Ce,It).get(),Pt=(Rt||{}).type;Pt&&Pt!=="-"||(Pt="linear"),t.getComponentMethod("annotations","convertCoords")(Q,gt,Pt,mt),t.getComponentMethod("images","convertCoords")(Q,gt,Pt,mt)}var Ot=v.containerArrayMatch(It);if(Ot){ce=Ot.array,me=Ot.index;var Ht=Ot.property,jt=Ke||{editType:"calc"};me!==""&&Ht===""&&(v.isAddVal(Rt)?kt[It]=null:v.isRemoveVal(Rt)?kt[It]=(x(Ie,ce).get()||[])[me]:T.warn("unrecognized full object value",oe)),p.update(ot,jt),Ve[ce]||(Ve[ce]={});var Nt=Ve[ce][me];Nt||(Nt=Ve[ce][me]={}),Nt[Ht]=Rt,delete oe[It]}else We==="reverse"?(rt.range?rt.range.reverse():(mt(Ye+".autorange",!0),rt.range=[1,0]),Se.autorange?ot.calc=!0:ot.plot=!0):(It==="dragmode"&&(Rt===!1&&ze!==!1||Rt!==!1&&ze===!1)||Ce._has("scatter-like")&&Ce._has("regl")&&It==="dragmode"&&(Rt==="lasso"||Rt==="select")&&ze!=="lasso"&&ze!=="select"||Ce._has("gl2d")?ot.plot=!0:Ke?p.update(ot,Ke):ot.calc=!0,Ut.set(Rt))}}for(ce in Ve)v.applyContainerArrayChanges(Q,le(Ie,ce),Ve[ce],ot,le)||(ot.plot=!0);for(var Gt in Lt){var un=(wt=n.getFromId(Q,Gt))&&wt._constraintGroup;if(un)for(var pn in ot.calc=!0,un)Lt[pn]||(n.getFromId(Q,pn)._constraintShrinkable=!0)}return(re(Q)||oe.height||oe.width)&&(ot.plot=!0),(ot.plot||ot.calc)&&(ot.layoutReplot=!0),{flags:ot,rangesAltered:Lt,undoit:kt,redoit:dt,eventData:Fe}}function re(Q){var oe=Q._fullLayout,ce=oe.width,me=oe.height;return Q.layout.autosize&&r.plotAutoSize(Q,Q.layout,oe),oe.width!==ce||oe.height!==me}function ie(Q,oe,ce,me){Q=T.getGraphDiv(Q),g.clearPromiseQueue(Q),T.isPlainObject(oe)||(oe={}),T.isPlainObject(ce)||(ce={}),Object.keys(oe).length&&(Q.changed=!0),Object.keys(ce).length&&(Q.changed=!0);var Ae=g.coerceTraceIndices(Q,me),Ie=B(Q,T.extendFlat({},oe),Ae),Ce=Ie.flags,Re=ee(Q,T.extendFlat({},ce)),le=Re.flags;(Ce.calc||le.calc)&&(Q.calcdata=void 0),Ce.clearAxisTypes&&g.clearAxisTypes(Q,Ae,ce);var de=[];le.layoutReplot?de.push(y.layoutReplot):Ce.fullReplot?de.push(R._doPlot):(de.push(r.previousPromises),G(Q,le,Re)||r.supplyDefaults(Q),Ce.style&&de.push(y.doTraceStyle),(Ce.colorbars||le.colorbars)&&de.push(y.doColorBars),le.legend&&de.push(y.doLegend),le.layoutstyle&&de.push(y.layoutStyles),le.axrange&&V(de,Re.rangesAltered),le.ticks&&de.push(y.doTicksRelayout),le.modebar&&de.push(y.doModeBar),le.camera&&de.push(y.doCamera),de.push(u)),de.push(r.rehover,r.redrag,r.reselect),s.add(Q,ie,[Q,Ie.undoit,Re.undoit,Ie.traces],ie,[Q,Ie.redoit,Re.redoit,Ie.traces]);var _e=T.syncOrAsync(de,Q);return _e&&_e.then||(_e=Promise.resolve(Q)),_e.then(function(){return Q.emit("plotly_update",{data:Ie.eventData,layout:Re.eventData}),Q})}function se(Q){return function(oe){oe._fullLayout._guiEditing=!0;var ce=Q.apply(null,arguments);return oe._fullLayout._guiEditing=!1,ce}}var fe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ye=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ge(Q,oe){for(var ce=0;ce<oe.length;ce++){var me=oe[ce],Ae=Q.match(me.pattern);if(Ae){var Ie=Ae[1]||"";return{head:Ie,tail:Q.substr(Ie.length+1),attr:me.attr}}}}function he(Q,oe){var ce=x(oe,Q).get();if(ce!==void 0)return ce;var me=Q.split(".");for(me.pop();me.length>1;)if(me.pop(),(ce=x(oe,me.join(".")+".uirevision").get())!==void 0)return ce;return oe.uirevision}function ve(Q,oe){for(var ce=0;ce<oe.length;ce++)if(oe[ce]._fullInput.uid===Q)return ce;return-1}function Oe(Q,oe,ce){for(var me=0;me<oe.length;me++)if(oe[me].uid===Q)return me;return!oe[ce]||oe[ce].uid?-1:ce}function xe(Q,oe){var ce=T.isPlainObject(Q),me=Array.isArray(Q);return ce||me?(ce&&T.isPlainObject(oe)||me&&Array.isArray(oe))&&JSON.stringify(Q)===JSON.stringify(oe):Q===oe}function ke(Q,oe,ce,me){var Ae,Ie,Ce,Re=me.getValObject,le=me.flags,de=me.immutable,_e=me.inArray,Fe=me.arrayIndex;function Ve(){var rt=Ae.editType;_e&&rt.indexOf("arraydraw")!==-1?T.pushUnique(le.arrays[_e],Fe):(p.update(le,Ae),rt!=="none"&&le.nChanges++,me.transition&&Ae.anim&&le.nChangesAnim++,(W.test(Ce)||J.test(Ce))&&(le.rangesAltered[ce[0]]=1),X.test(Ce)&&x(oe,"_inputDomain").set(null),Ie==="datarevision"&&(le.newDataRevision=1))}function He(rt){return rt.valType==="data_array"||rt.arrayOk}for(Ie in Q){if(le.calc&&!me.transition)return;var nt=Q[Ie],tt=oe[Ie],ot=ce.concat(Ie);if(Ce=ot.join("."),Ie.charAt(0)!=="_"&&typeof nt!="function"&&nt!==tt){if((Ie==="tick0"||Ie==="dtick")&&ce[0]!=="geo"){var dt=oe.tickmode;if(dt==="auto"||dt==="array"||!dt)continue}if((Ie!=="range"||!oe.autorange)&&(Ie!=="zmin"&&Ie!=="zmax"||oe.type!=="contourcarpet")&&(Ae=Re(ot))&&(!Ae._compareAsJSON||JSON.stringify(nt)!==JSON.stringify(tt))){var kt,mt=Ae.valType,wt=He(Ae),Lt=Array.isArray(nt),Ct=Array.isArray(tt);if(Lt&&Ct){var It="_input_"+Ie,Ut=Q[It],Rt=oe[It];if(Array.isArray(Ut)&&Ut===Rt)continue}if(tt===void 0)wt&&Lt?le.calc=!0:Ve();else if(Ae._isLinkedToArray){var Ge=[],We=!1;_e||(le.arrays[Ie]=Ge);var Be=Math.min(nt.length,tt.length),Ye=Math.max(nt.length,tt.length);if(Be!==Ye){if(Ae.editType!=="arraydraw"){Ve();continue}We=!0}for(kt=0;kt<Be;kt++)ke(nt[kt],tt[kt],ot.concat(kt),T.extendFlat({inArray:Ie,arrayIndex:kt},me));if(We)for(kt=Be;kt<Ye;kt++)Ge.push(kt)}else!mt&&T.isPlainObject(nt)?ke(nt,tt,ot,me):wt?Lt&&Ct?(de&&(le.calc=!0),(de||me.newDataRevision)&&Ve()):Lt!==Ct?le.calc=!0:Ve():Lt&&Ct&&nt.length===tt.length&&String(nt)===String(tt)||Ve()}}}for(Ie in oe)if(!(Ie in Q)&&Ie.charAt(0)!=="_"&&typeof oe[Ie]!="function"){if(He(Ae=Re(ce.concat(Ie)))&&Array.isArray(oe[Ie]))return void(le.calc=!0);Ve()}}function Me(Q,oe){var ce;for(ce in Q)if(ce.charAt(0)!=="_"){var me=Q[ce],Ae=oe[ce];if(me!==Ae)if(T.isPlainObject(me)&&T.isPlainObject(Ae)){if(Me(me,Ae))return!0}else{if(!Array.isArray(me)||!Array.isArray(Ae)||me.length!==Ae.length)return!0;for(var Ie=0;Ie<me.length;Ie++)if(me[Ie]!==Ae[Ie]&&(!T.isPlainObject(me[Ie])||!T.isPlainObject(Ae[Ie])||Me(me[Ie],Ae[Ie])))return!0}}}function Te(Q){var oe=Q._fullLayout,ce=Q.getBoundingClientRect();if(!T.equalDomRects(ce,oe._lastBBox)){var me=oe._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(Q));oe._invScaleX=Math.sqrt(me[0][0]*me[0][0]+me[0][1]*me[0][1]+me[0][2]*me[0][2]),oe._invScaleY=Math.sqrt(me[1][0]*me[1][0]+me[1][1]*me[1][1]+me[1][2]*me[1][2]),oe._lastBBox=ce}}R.animate=function(Q,oe,ce){if(Q=T.getGraphDiv(Q),!T.isPlotDiv(Q))throw new Error("This element is not a Plotly plot: "+Q+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var me=Q._transitionData;me._frameQueue||(me._frameQueue=[]);var Ae=(ce=r.supplyAnimationDefaults(ce)).transition,Ie=ce.frame;function Ce(de){return Array.isArray(Ae)?de>=Ae.length?Ae[0]:Ae[de]:Ae}function Re(de){return Array.isArray(Ie)?de>=Ie.length?Ie[0]:Ie[de]:Ie}function le(de,_e){var Fe=0;return function(){if(de&&++Fe===_e)return de()}}return me._frameWaitingCnt===void 0&&(me._frameWaitingCnt=0),new Promise(function(de,_e){function Fe(){Q.emit("plotly_animating"),me._lastFrameAt=-1/0,me._timeToNext=0,me._runningTransitions=0,me._currentFrame=null;var It=function(){me._animationRaf=window.requestAnimationFrame(It),Date.now()-me._lastFrameAt>me._timeToNext&&function(){me._currentFrame&&me._currentFrame.onComplete&&me._currentFrame.onComplete();var Ut=me._currentFrame=me._frameQueue.shift();if(Ut){var Rt=Ut.name?Ut.name.toString():null;Q._fullLayout._currentFrame=Rt,me._lastFrameAt=Date.now(),me._timeToNext=Ut.frameOpts.duration,r.transition(Q,Ut.frame.data,Ut.frame.layout,g.coerceTraceIndices(Q,Ut.frame.traces),Ut.frameOpts,Ut.transitionOpts).then(function(){Ut.onComplete&&Ut.onComplete()}),Q.emit("plotly_animatingframe",{name:Rt,frame:Ut.frame,animation:{frame:Ut.frameOpts,transition:Ut.transitionOpts}})}else Q.emit("plotly_animated"),window.cancelAnimationFrame(me._animationRaf),me._animationRaf=null}()};It()}var Ve,He,nt=0;function tt(It){return Array.isArray(Ae)?nt>=Ae.length?It.transitionOpts=Ae[nt]:It.transitionOpts=Ae[0]:It.transitionOpts=Ae,nt++,It}var ot=[],dt=oe==null,kt=Array.isArray(oe);if(dt||kt||!T.isPlainObject(oe)){if(dt||["string","number"].indexOf(typeof oe)!==-1)for(Ve=0;Ve<me._frames.length;Ve++)(He=me._frames[Ve])&&(dt||String(He.group)===String(oe))&&ot.push({type:"byname",name:String(He.name),data:tt({name:He.name})});else if(kt)for(Ve=0;Ve<oe.length;Ve++){var mt=oe[Ve];["number","string"].indexOf(typeof mt)!==-1?(mt=String(mt),ot.push({type:"byname",name:mt,data:tt({name:mt})})):T.isPlainObject(mt)&&ot.push({type:"object",data:tt(T.extendFlat({},mt))})}}else ot.push({type:"object",data:tt(T.extendFlat({},oe))});for(Ve=0;Ve<ot.length;Ve++)if((He=ot[Ve]).type==="byname"&&!me._frameHash[He.data.name])return T.warn('animate failure: frame not found: "'+He.data.name+'"'),void _e();["next","immediate"].indexOf(ce.mode)!==-1&&function(){if(me._frameQueue.length!==0){for(;me._frameQueue.length;){var It=me._frameQueue.pop();It.onInterrupt&&It.onInterrupt()}Q.emit("plotly_animationinterrupted",[])}}(),ce.direction==="reverse"&&ot.reverse();var wt=Q._fullLayout._currentFrame;if(wt&&ce.fromcurrent){var Lt=-1;for(Ve=0;Ve<ot.length;Ve++)if((He=ot[Ve]).type==="byname"&&He.name===wt){Lt=Ve;break}if(Lt>0&&Lt<ot.length-1){var Ct=[];for(Ve=0;Ve<ot.length;Ve++)He=ot[Ve],(ot[Ve].type!=="byname"||Ve>Lt)&&Ct.push(He);ot=Ct}}ot.length>0?function(It){if(It.length!==0){for(var Ut=0;Ut<It.length;Ut++){var Rt;Rt=It[Ut].type==="byname"?r.computeFrame(Q,It[Ut].name):It[Ut].data;var Ge=Re(Ut),We=Ce(Ut);We.duration=Math.min(We.duration,Ge.duration);var Be={frame:Rt,name:It[Ut].name,frameOpts:Ge,transitionOpts:We};Ut===It.length-1&&(Be.onComplete=le(de,2),Be.onInterrupt=_e),me._frameQueue.push(Be)}ce.mode==="immediate"&&(me._lastFrameAt=-1/0),me._animationRaf||Fe()}}(ot):(Q.emit("plotly_animated"),de())})},R.addFrames=function(Q,oe,ce){if(Q=T.getGraphDiv(Q),oe==null)return Promise.resolve();if(!T.isPlotDiv(Q))throw new Error("This element is not a Plotly plot: "+Q+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var me,Ae,Ie,Ce,Re=Q._transitionData._frames,le=Q._transitionData._frameHash;if(!Array.isArray(oe))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+oe);var de=Re.length+2*oe.length,_e=[],Fe={};for(me=oe.length-1;me>=0;me--)if(T.isPlainObject(oe[me])){var Ve=oe[me].name,He=(le[Ve]||Fe[Ve]||{}).name,nt=oe[me].name,tt=le[He]||Fe[He];He&&nt&&typeof nt=="number"&&tt&&w<5&&(w++,T.warn('addFrames: overwriting frame "'+(le[He]||Fe[He]).name+'" with a frame whose name of type "number" also equates to "'+He+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),w===5&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Fe[Ve]={name:Ve},_e.push({frame:r.supplyFrameDefaults(oe[me]),index:ce&&ce[me]!==void 0&&ce[me]!==null?ce[me]:de+me})}_e.sort(function(It,Ut){return It.index>Ut.index?-1:It.index<Ut.index?1:0});var ot=[],dt=[],kt=Re.length;for(me=_e.length-1;me>=0;me--){if(typeof(Ae=_e[me].frame).name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Ae.name)for(;le[Ae.name="frame "+Q._transitionData._counter++];);if(le[Ae.name]){for(Ie=0;Ie<Re.length&&(Re[Ie]||{}).name!==Ae.name;Ie++);ot.push({type:"replace",index:Ie,value:Ae}),dt.unshift({type:"replace",index:Ie,value:Re[Ie]})}else Ce=Math.max(0,Math.min(_e[me].index,kt)),ot.push({type:"insert",index:Ce,value:Ae}),dt.unshift({type:"delete",index:Ce}),kt++}var mt=r.modifyFrames,wt=r.modifyFrames,Lt=[Q,dt],Ct=[Q,ot];return s&&s.add(Q,mt,Lt,wt,Ct),r.modifyFrames(Q,ot)},R.deleteFrames=function(Q,oe){if(Q=T.getGraphDiv(Q),!T.isPlotDiv(Q))throw new Error("This element is not a Plotly plot: "+Q);var ce,me,Ae=Q._transitionData._frames,Ie=[],Ce=[];if(!oe)for(oe=[],ce=0;ce<Ae.length;ce++)oe.push(ce);for((oe=oe.slice()).sort(),ce=oe.length-1;ce>=0;ce--)me=oe[ce],Ie.push({type:"delete",index:me}),Ce.unshift({type:"insert",index:me,value:Ae[me]});var Re=r.modifyFrames,le=r.modifyFrames,de=[Q,Ce],_e=[Q,Ie];return s&&s.add(Q,Re,de,le,_e),r.modifyFrames(Q,Ie)},R.addTraces=function Q(oe,ce,me){oe=T.getGraphDiv(oe);var Ae,Ie,Ce=[],Re=R.deleteTraces,le=Q,de=[oe,Ce],_e=[oe,ce];for(function(Fe,Ve,He){var nt,tt;if(!Array.isArray(Fe.data))throw new Error("gd.data must be an array.");if(Ve===void 0)throw new Error("traces must be defined.");for(Array.isArray(Ve)||(Ve=[Ve]),nt=0;nt<Ve.length;nt++)if(typeof(tt=Ve[nt])!="object"||Array.isArray(tt)||tt===null)throw new Error("all values in traces array must be non-array objects");if(He===void 0||Array.isArray(He)||(He=[He]),He!==void 0&&He.length!==Ve.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(oe,ce,me),Array.isArray(ce)||(ce=[ce]),ce=ce.map(function(Fe){return T.extendFlat({},Fe)}),g.cleanData(ce),Ae=0;Ae<ce.length;Ae++)oe.data.push(ce[Ae]);for(Ae=0;Ae<ce.length;Ae++)Ce.push(-ce.length+Ae);if(me===void 0)return Ie=R.redraw(oe),s.add(oe,Re,de,le,_e),Ie;Array.isArray(me)||(me=[me]);try{P(oe,Ce,me)}catch(Fe){throw oe.data.splice(oe.data.length-ce.length,ce.length),Fe}return s.startSequence(oe),s.add(oe,Re,de,le,_e),Ie=R.moveTraces(oe,Ce,me),s.stopSequence(oe),Ie},R.deleteTraces=function Q(oe,ce){oe=T.getGraphDiv(oe);var me,Ae,Ie=[],Ce=R.addTraces,Re=Q,le=[oe,Ie,ce],de=[oe,ce];if(ce===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(ce)||(ce=[ce]),C(oe,ce,"indices"),(ce=L(ce,oe.data.length-1)).sort(T.sorterDes),me=0;me<ce.length;me+=1)Ae=oe.data.splice(ce[me],1)[0],Ie.push(Ae);var _e=R.redraw(oe);return s.add(oe,Ce,le,Re,de),_e},R.extendTraces=function Q(oe,ce,me,Ae){function Ie(de,_e,Fe){var Ve,He;if(T.isTypedArray(de))if(Fe<0){var nt=new de.constructor(0),tt=U(de,_e);Fe<0?(Ve=tt,He=nt):(Ve=nt,He=tt)}else if(Ve=new de.constructor(Fe),He=new de.constructor(de.length+_e.length-Fe),Fe===_e.length)Ve.set(_e),He.set(de);else if(Fe<_e.length){var ot=_e.length-Fe;Ve.set(_e.subarray(ot)),He.set(de),He.set(_e.subarray(0,ot),de.length)}else{var dt=Fe-_e.length,kt=de.length-dt;Ve.set(de.subarray(kt)),Ve.set(_e,dt),He.set(de.subarray(0,kt))}else Ve=de.concat(_e),He=Fe>=0&&Fe<Ve.length?Ve.splice(0,Ve.length-Fe):[];return[Ve,He]}var Ce=I(oe=T.getGraphDiv(oe),ce,me,Ae,Ie),Re=R.redraw(oe),le=[oe,Ce.update,me,Ce.maxPoints];return s.add(oe,R.prependTraces,le,Q,arguments),Re},R.moveTraces=function Q(oe,ce,me){var Ae,Ie=[],Ce=[],Re=Q,le=Q,de=[oe=T.getGraphDiv(oe),me,ce],_e=[oe,ce,me];if(P(oe,ce,me),ce=Array.isArray(ce)?ce:[ce],me===void 0)for(me=[],Ae=0;Ae<ce.length;Ae++)me.push(-ce.length+Ae);for(me=Array.isArray(me)?me:[me],ce=L(ce,oe.data.length-1),me=L(me,oe.data.length-1),Ae=0;Ae<oe.data.length;Ae++)ce.indexOf(Ae)===-1&&Ie.push(oe.data[Ae]);for(Ae=0;Ae<ce.length;Ae++)Ce.push({newIndex:me[Ae],trace:oe.data[ce[Ae]]});for(Ce.sort(function(Ve,He){return Ve.newIndex-He.newIndex}),Ae=0;Ae<Ce.length;Ae+=1)Ie.splice(Ce[Ae].newIndex,0,Ce[Ae].trace);oe.data=Ie;var Fe=R.redraw(oe);return s.add(oe,Re,de,le,_e),Fe},R.prependTraces=function Q(oe,ce,me,Ae){function Ie(de,_e,Fe){var Ve,He;if(T.isTypedArray(de))if(Fe<=0){var nt=new de.constructor(0),tt=U(_e,de);Fe<0?(Ve=tt,He=nt):(Ve=nt,He=tt)}else if(Ve=new de.constructor(Fe),He=new de.constructor(de.length+_e.length-Fe),Fe===_e.length)Ve.set(_e),He.set(de);else if(Fe<_e.length){var ot=_e.length-Fe;Ve.set(_e.subarray(0,ot)),He.set(_e.subarray(ot)),He.set(de,ot)}else{var dt=Fe-_e.length;Ve.set(_e),Ve.set(de.subarray(0,dt),_e.length),He.set(de.subarray(dt))}else Ve=_e.concat(de),He=Fe>=0&&Fe<Ve.length?Ve.splice(Fe,Ve.length):[];return[Ve,He]}var Ce=I(oe=T.getGraphDiv(oe),ce,me,Ae,Ie),Re=R.redraw(oe),le=[oe,Ce.update,me,Ce.maxPoints];return s.add(oe,R.extendTraces,le,Q,arguments),Re},R.newPlot=function(Q,oe,ce,me){return Q=T.getGraphDiv(Q),r.cleanPlot([],{},Q._fullData||[],Q._fullLayout||{}),r.purge(Q),R._doPlot(Q,oe,ce,me)},R._doPlot=function(Q,oe,ce,me){var Ae;if(Q=T.getGraphDiv(Q),d.init(Q),T.isPlainObject(oe)){var Ie=oe;oe=Ie.data,ce=Ie.layout,me=Ie.config,Ae=Ie.frames}if(d.triggerHandler(Q,"plotly_beforeplot",[oe,ce,me])===!1)return Promise.reject();oe||ce||T.isPlotDiv(Q)||T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Q),E(Q,me),ce||(ce={}),k.select(Q).classed("js-plotly-plot",!0),a.makeTester(),Array.isArray(Q._promises)||(Q._promises=[]);var Ce=(Q.data||[]).length===0&&Array.isArray(oe);Array.isArray(oe)&&(g.cleanData(oe),Ce?Q.data=oe:Q.data.push.apply(Q.data,oe),Q.empty=!1),Q.layout&&!Ce||(Q.layout=g.cleanLayout(ce)),r.supplyDefaults(Q);var Re=Q._fullLayout,le=Re._has("cartesian");Re._replotting=!0,(Ce||Re._shouldCreateBgLayer)&&(function(dt){var kt=k.select(dt),mt=dt._fullLayout;if(mt._calcInverseTransform=Te,mt._calcInverseTransform(dt),mt._container=kt.selectAll(".plot-container").data([0]),mt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),mt._paperdiv=mt._container.selectAll(".svg-container").data([0]),mt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),mt._glcontainer=mt._paperdiv.selectAll(".gl-container").data([{}]),mt._glcontainer.enter().append("div").classed("gl-container",!0),mt._paperdiv.selectAll(".main-svg").remove(),mt._paperdiv.select(".modebar-container").remove(),mt._paper=mt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),mt._toppaper=mt._paperdiv.append("svg").classed("main-svg",!0),mt._modebardiv=mt._paperdiv.append("div"),delete mt._modeBar,mt._hoverpaper=mt._paperdiv.append("svg").classed("main-svg",!0),!mt._uid){var wt={};k.selectAll("defs").each(function(){this.id&&(wt[this.id.split("-")[1]]=1)}),mt._uid=T.randstr(wt)}mt._paperdiv.selectAll(".main-svg").attr(h.svgAttrs),mt._defs=mt._paper.append("defs").attr("id","defs-"+mt._uid),mt._clips=mt._defs.append("g").classed("clips",!0),mt._topdefs=mt._toppaper.append("defs").attr("id","topdefs-"+mt._uid),mt._topclips=mt._topdefs.append("g").classed("clips",!0),mt._bgLayer=mt._paper.append("g").classed("bglayer",!0),mt._draggers=mt._paper.append("g").classed("draglayer",!0);var Lt=mt._paper.append("g").classed("layer-below",!0);mt._imageLowerLayer=Lt.append("g").classed("imagelayer",!0),mt._shapeLowerLayer=Lt.append("g").classed("shapelayer",!0),mt._cartesianlayer=mt._paper.append("g").classed("cartesianlayer",!0),mt._polarlayer=mt._paper.append("g").classed("polarlayer",!0),mt._smithlayer=mt._paper.append("g").classed("smithlayer",!0),mt._ternarylayer=mt._paper.append("g").classed("ternarylayer",!0),mt._geolayer=mt._paper.append("g").classed("geolayer",!0),mt._funnelarealayer=mt._paper.append("g").classed("funnelarealayer",!0),mt._pielayer=mt._paper.append("g").classed("pielayer",!0),mt._iciclelayer=mt._paper.append("g").classed("iciclelayer",!0),mt._treemaplayer=mt._paper.append("g").classed("treemaplayer",!0),mt._sunburstlayer=mt._paper.append("g").classed("sunburstlayer",!0),mt._indicatorlayer=mt._toppaper.append("g").classed("indicatorlayer",!0),mt._glimages=mt._paper.append("g").classed("glimages",!0);var Ct=mt._toppaper.append("g").classed("layer-above",!0);mt._imageUpperLayer=Ct.append("g").classed("imagelayer",!0),mt._shapeUpperLayer=Ct.append("g").classed("shapelayer",!0),mt._selectionLayer=mt._toppaper.append("g").classed("selectionlayer",!0),mt._infolayer=mt._toppaper.append("g").classed("infolayer",!0),mt._menulayer=mt._toppaper.append("g").classed("menulayer",!0),mt._zoomlayer=mt._toppaper.append("g").classed("zoomlayer",!0),mt._hoverlayer=mt._hoverpaper.append("g").classed("hoverlayer",!0),mt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),dt.emit("plotly_framework")}(Q),Re._shouldCreateBgLayer&&delete Re._shouldCreateBgLayer),a.initGradients(Q),a.initPatterns(Q),Ce&&n.saveShowSpikeInitial(Q);var de=!Q.calcdata||Q.calcdata.length!==(Q._fullData||[]).length;de&&r.doCalcdata(Q);for(var _e=0;_e<Q.calcdata.length;_e++)Q.calcdata[_e][0].trace=Q._fullData[_e];Q._context.responsive?Q._responsiveChartHandler||(Q._responsiveChartHandler=function(){T.isHidden(Q)||r.resize(Q)},window.addEventListener("resize",Q._responsiveChartHandler)):T.clearResponsive(Q);var Fe=T.extendFlat({},Re._size),Ve=0;function He(){if(r.clearAutoMarginIds(Q),y.drawMarginPushers(Q),n.allowAutoMargin(Q),Re._has("pie"))for(var dt=Q._fullData,kt=0;kt<dt.length;kt++){var mt=dt[kt];mt.type==="pie"&&mt.automargin&&r.allowAutoMargin(Q,"pie."+mt.uid+".automargin")}return r.doAutoMargin(Q),r.previousPromises(Q)}function nt(){Q._transitioning||(y.doAutoRangeAndConstraints(Q),Ce&&n.saveRangeInitial(Q),t.getComponentMethod("rangeslider","calcAutorange")(Q))}var tt=[r.previousPromises,function(){if(Ae)return R.addFrames(Q,Ae)},function dt(){for(var kt=Re._basePlotModules,mt=0;mt<kt.length;mt++)kt[mt].drawFramework&&kt[mt].drawFramework(Q);!Re._glcanvas&&Re._has("gl")&&(Re._glcanvas=Re._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(It){return It.key}),Re._glcanvas.enter().append("canvas").attr("class",function(It){return"gl-canvas gl-canvas-"+It.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var wt=Q._context.plotGlPixelRatio;if(Re._glcanvas){Re._glcanvas.attr("width",Re.width*wt).attr("height",Re.height*wt).style("width",Re.width+"px").style("height",Re.height+"px");var Lt=Re._glcanvas.data()[0].regl;if(Lt&&(Math.floor(Re.width*wt)!==Lt._gl.drawingBufferWidth||Math.floor(Re.height*wt)!==Lt._gl.drawingBufferHeight)){var Ct="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Ve)return T.log(Ct+" Clearing graph and plotting again."),r.cleanPlot([],{},Q._fullData,Re),r.supplyDefaults(Q),Re=Q._fullLayout,r.doCalcdata(Q),Ve++,dt();T.error(Ct)}}return Re.modebar.orientation==="h"?Re._modebardiv.style("height",null).style("width","100%"):Re._modebardiv.style("width",null).style("height",Re.height+"px"),r.previousPromises(Q)},He,function(){if(r.didMarginChange(Fe,Re._size))return T.syncOrAsync([He,y.layoutStyles],Q)}];le&&tt.push(function(){if(de)return T.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),nt],Q);nt()}),tt.push(y.layoutStyles),le&&tt.push(function(){return n.draw(Q,Ce?"":"redraw")},function(dt){dt._fullLayout._insideTickLabelsAutorange&&K(dt,dt._fullLayout._insideTickLabelsAutorange).then(function(){dt._fullLayout._insideTickLabelsAutorange=void 0})}),tt.push(y.drawData,y.finalDraw,c,r.addLinks,r.rehover,r.redrag,r.reselect,r.doAutoMargin,function(dt){dt._fullLayout._insideTickLabelsAutorange&&Ce&&n.saveRangeInitial(dt,!0)},r.previousPromises);var ot=T.syncOrAsync(tt,Q);return ot&&ot.then||(ot=Promise.resolve()),ot.then(function(){return u(Q),Q})},R.purge=function(Q){var oe=(Q=T.getGraphDiv(Q))._fullLayout||{},ce=Q._fullData||[];return r.cleanPlot([],{},ce,oe),r.purge(Q),d.purge(Q),oe._container&&oe._container.remove(),delete Q._context,Q},R.react=function(Q,oe,ce,me){var Ae,Ie;Q=T.getGraphDiv(Q),g.clearPromiseQueue(Q);var Ce=Q._fullData,Re=Q._fullLayout;if(T.isPlotDiv(Q)&&Ce&&Re){if(T.isPlainObject(oe)){var le=oe;oe=le.data,ce=le.layout,me=le.config,Ae=le.frames}var de=!1;if(me){var _e=T.extendDeep({},Q._context);Q._context=void 0,E(Q,me),de=Me(_e,Q._context)}Q.data=oe||[],g.cleanData(Q.data),Q.layout=ce||{},g.cleanLayout(Q.layout),function(Ye,rt,Se,ze){var Ke,st,ct,Tt,Et,At,ht,pt,gt,Pt,Ot=ze._preGUI,Ht=[],jt={},Nt={};for(Ke in Ot){if(Et=ge(Ke,fe)){if(gt=Et.head,Pt=Et.tail,st=Et.attr||gt+".uirevision",(Tt=(ct=x(ze,st).get())&&he(st,rt))&&Tt===ct){if((At=Ot[Ke])===null&&(At=void 0),xe(pt=(ht=x(rt,Ke)).get(),At)){pt===void 0&&Pt==="autorange"&&Ht.push(gt),ht.set(H(x(ze,Ke).get()));continue}if(Pt==="autorange"||Pt.substr(0,6)==="range["){var Gt=Ot[gt+".range[0]"],un=Ot[gt+".range[1]"],pn=Ot[gt+".autorange"];if(pn||pn===null&&Gt===null&&un===null){if(!(gt in jt)){var Kt=x(rt,gt).get();jt[gt]=Kt&&(Kt.autorange||Kt.autorange!==!1&&(!Kt.range||Kt.range.length!==2))}if(jt[gt]){ht.set(H(x(ze,Ke).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+Ke);delete Ot[Ke],Et&&Et.tail.substr(0,6)==="range["&&(Nt[Et.head]=1)}for(var wn=0;wn<Ht.length;wn++){var Bn=Ht[wn];if(Nt[Bn]){var vn=x(rt,Bn).get();vn&&delete vn.autorange}}var cn=ze._tracePreGUI;for(var dn in cn){var sn,hn=cn[dn],En=null;for(Ke in hn){if(!En){var Mn=ve(dn,Se);if(Mn<0){delete cn[dn];break}var Rn=Oe(dn,Ye,(sn=Se[Mn]._fullInput).index);if(Rn<0){delete cn[dn];break}En=Ye[Rn]}if(Et=ge(Ke,ye)){if(Et.attr?Tt=(ct=x(ze,Et.attr).get())&&he(Et.attr,rt):(ct=sn.uirevision,(Tt=En.uirevision)===void 0&&(Tt=rt.uirevision)),Tt&&Tt===ct&&((At=hn[Ke])===null&&(At=void 0),xe(pt=(ht=x(En,Ke)).get(),At))){ht.set(H(x(sn,Ke).get()));continue}}else T.warn("unrecognized GUI edit: "+Ke+" in trace uid "+dn);delete hn[Ke]}}}(Q.data,Q.layout,Ce,Re),r.supplyDefaults(Q,{skipUpdateCalc:!0});var Fe=Q._fullData,Ve=Q._fullLayout,He=Ve.datarevision===void 0,nt=Ve.transition,tt=function(Ye,rt,Se,ze,Ke){var st=p.layoutFlags();return st.arrays={},st.rangesAltered={},st.nChanges=0,st.nChangesAnim=0,ke(rt,Se,[],{getValObject:function(ct){return o.getLayoutValObject(Se,ct)},flags:st,immutable:ze,transition:Ke,gd:Ye}),(st.plot||st.calc)&&(st.layoutReplot=!0),Ke&&st.nChanges&&st.nChangesAnim&&(st.anim=st.nChanges===st.nChangesAnim?"all":"some"),st}(Q,Re,Ve,He,nt),ot=tt.newDataRevision,dt=function(Ye,rt,Se,ze,Ke,st){var ct=rt.length===Se.length;if(!Ke&&!ct)return{fullReplot:!0,calc:!0};var Tt,Et,At=p.traceFlags();At.arrays={},At.nChanges=0,At.nChangesAnim=0;var ht={getValObject:function(gt){var Pt=o.getTraceValObject(Et,gt);return!Et._module.animatable&&Pt.anim&&(Pt.anim=!1),Pt},flags:At,immutable:ze,transition:Ke,newDataRevision:st,gd:Ye},pt={};for(Tt=0;Tt<rt.length;Tt++)if(Se[Tt]){if(Et=Se[Tt]._fullInput,r.hasMakesDataTransform(Et)&&(Et=Se[Tt]),pt[Et.uid])continue;pt[Et.uid]=1,ke(rt[Tt]._fullInput,Et,[],ht)}return(At.calc||At.plot)&&(At.fullReplot=!0),Ke&&At.nChanges&&At.nChangesAnim&&(At.anim=At.nChanges===At.nChangesAnim&&ct?"all":"some"),At}(Q,Ce,Fe,He,nt,ot);if(re(Q)&&(tt.layoutReplot=!0),dt.calc||tt.calc){Q.calcdata=void 0;for(var kt=Object.getOwnPropertyNames(Ve),mt=0;mt<kt.length;mt++){var wt=kt[mt],Lt=wt.substring(0,5);if(Lt==="xaxis"||Lt==="yaxis"){var Ct=Ve[wt]._emptyCategories;Ct&&Ct()}}}else r.supplyDefaultsUpdateCalc(Q.calcdata,Fe);var It=[];if(Ae&&(Q._transitionData={},r.createTransitionData(Q),It.push(function(){return R.addFrames(Q,Ae)})),Ve.transition&&!de&&(dt.anim||tt.anim))tt.ticks&&It.push(y.doTicksRelayout),r.doCalcdata(Q),y.doAutoRangeAndConstraints(Q),It.push(function(){return r.transitionFromReact(Q,dt,tt,Re)});else if(dt.fullReplot||tt.layoutReplot||de)Q._fullLayout._skipDefaults=!0,It.push(R._doPlot);else{for(var Ut in tt.arrays){var Rt=tt.arrays[Ut];if(Rt.length){var Ge=t.getComponentMethod(Ut,"drawOne");if(Ge!==T.noop)for(var We=0;We<Rt.length;We++)Ge(Q,Rt[We]);else{var Be=t.getComponentMethod(Ut,"draw");if(Be===T.noop)throw new Error("cannot draw components: "+Ut);Be(Q)}}}It.push(r.previousPromises),dt.style&&It.push(y.doTraceStyle),(dt.colorbars||tt.colorbars)&&It.push(y.doColorBars),tt.legend&&It.push(y.doLegend),tt.layoutstyle&&It.push(y.layoutStyles),tt.axrange&&V(It),tt.ticks&&It.push(y.doTicksRelayout),tt.modebar&&It.push(y.doModeBar),tt.camera&&It.push(y.doCamera),It.push(u)}It.push(r.rehover,r.redrag,r.reselect),(Ie=T.syncOrAsync(It,Q))&&Ie.then||(Ie=Promise.resolve(Q))}else Ie=R.newPlot(Q,oe,ce,me);return Ie.then(function(){return Q.emit("plotly_react",{data:oe,layout:ce}),Q})},R.redraw=function(Q){if(Q=T.getGraphDiv(Q),!T.isPlotDiv(Q))throw new Error("This element is not a Plotly plot: "+Q);return g.cleanData(Q.data),g.cleanLayout(Q.layout),Q.calcdata=void 0,R._doPlot(Q).then(function(){return Q.emit("plotly_redraw"),Q})},R.relayout=K,R.restyle=z,R.setPlotConfig=function(Q){return T.extendFlat(b,Q)},R.update=ie,R._guiRelayout=se(K),R._guiRestyle=se(z),R._guiUpdate=se(ie),R._storeDirectGUIEdit=function(Q,oe,ce){for(var me in ce)N(me,x(Q,me).get(),ce[me],oe)}},72075:function($){var R={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function k(A,l){for(var T in A){var x=A[T];x.valType?l[T]=x.dflt:(l[T]||(l[T]={}),k(x,l[T]))}})(R,e),$.exports={configAttributes:R,dfltConfig:e}},86281:function($,R,e){var k=e(73972),A=e(71828),l=e(9012),T=e(10820),x=e(31391),d=e(85594),s=e(72075).configAttributes,t=e(30962),o=A.extendDeepAll,r=A.isPlainObject,n=A.isArrayOrTypedArray,a=A.nestedProperty,i=A.valObjectMeta,c="_isSubplotObj",h="_isLinkedToArray",f="_deprecated",b=[c,h,"_arrayAttrRegexps",f];function v(u,S,_){if(!u)return!1;if(u._isLinkedToArray){if(g(S[_]))_++;else if(_<S.length)return!1}for(;_<S.length;_++){var E=u[S[_]];if(!r(E)||(u=E,_===S.length-1))break;if(u._isLinkedToArray){if(!g(S[++_]))return!1}else if(u.valType==="info_array"){var L=S[++_];if(!g(L))return!1;var C=u.items;if(Array.isArray(C)){if(L>=C.length)return!1;if(u.dimensions===2){if(_++,S.length===_)return u;var P=S[_];if(!g(P))return!1;u=C[L][P]}else u=C[L]}else u=C}}return u}function g(u){return u===Math.round(u)&&u>=0}function y(){var u,S,_={};for(u in o(_,T),k.subplotsRegistry)if((S=k.subplotsRegistry[u]).layoutAttributes)if(Array.isArray(S.attr))for(var E=0;E<S.attr.length;E++)m(_,S,S.attr[E]);else m(_,S,S.attr==="subplot"?S.name:S.attr);for(u in k.componentsRegistry){var L=(S=k.componentsRegistry[u]).schema;if(L&&(L.subplots||L.layout)){var C=L.subplots;if(C&&C.xaxis&&!C.yaxis)for(var P in C.xaxis)delete _.yaxis[P];delete _.xaxis.shift,delete _.xaxis.autoshift}else S.name==="colorscale"?o(_,S.layoutAttributes):S.layoutAttributes&&w(_,S.layoutAttributes,S.name)}return{layoutAttributes:p(_)}}function p(u){return function(S){R.crawl(S,function(_,E,L){R.isValObject(_)?_.arrayOk!==!0&&_.valType!=="data_array"||(L[E+"src"]={valType:"string",editType:"none"}):r(_)&&(_.role="object")})}(u),function(S){R.crawl(S,function(_,E,L){if(_){var C=_._isLinkedToArray;C&&(delete _._isLinkedToArray,L[E]={items:{}},L[E].items[C]=_,L[E].role="object")}})}(u),function(S){(function _(E){for(var L in E)if(r(E[L]))_(E[L]);else if(Array.isArray(E[L]))for(var C=0;C<E[L].length;C++)_(E[L][C]);else E[L]instanceof RegExp&&(E[L]=E[L].toString())})(S)}(u),u}function m(u,S,_){var E=a(u,_),L=o({},S.layoutAttributes);L._isSubplotObj=!0,E.set(L)}function w(u,S,_){var E=a(u,_);E.set(o(E.get()||{},S))}R.IS_SUBPLOT_OBJ=c,R.IS_LINKED_TO_ARRAY=h,R.DEPRECATED=f,R.UNDERSCORE_ATTRS=b,R.get=function(){var u={};k.allTypes.forEach(function(E){u[E]=function(L){var C,P;P=(C=k.modules[L]._module).basePlotModule;var I={type:null},U=o({},l),z=o({},C.attributes);R.crawl(z,function(N,B,j,K,G){a(U,G).set(void 0),N===void 0&&a(z,G).set(void 0)}),o(I,U),k.traceIs(L,"noOpacity")&&delete I.opacity,k.traceIs(L,"showLegend")||(delete I.showlegend,delete I.legendgroup),k.traceIs(L,"noHover")&&(delete I.hoverinfo,delete I.hoverlabel),C.selectPoints||delete I.selectedpoints,o(I,z),P.attributes&&o(I,P.attributes),I.type=L;var H={meta:C.meta||{},categories:C.categories||{},animatable:Boolean(C.animatable),type:L,attributes:p(I)};if(C.layoutAttributes){var F={};o(F,C.layoutAttributes),H.layoutAttributes=p(F)}return C.animatable||R.crawl(H,function(N){R.isValObject(N)&&"anim"in N&&delete N.anim}),H}(E)});var S,_={};return Object.keys(k.transformsRegistry).forEach(function(E){_[E]=function(L){var C=k.transformsRegistry[L],P=o({},C.attributes);return Object.keys(k.componentsRegistry).forEach(function(I){var U=k.componentsRegistry[I];U.schema&&U.schema.transforms&&U.schema.transforms[L]&&Object.keys(U.schema.transforms[L]).forEach(function(z){w(P,U.schema.transforms[L][z],z)})}),{attributes:p(P)}}(E)}),{defs:{valObjects:i,metaKeys:b.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:u,layout:y(),transforms:_,frames:(S={frames:o({},x)},p(S),S.frames),animation:p(d),config:p(s)}},R.crawl=function(u,S,_,E){var L=_||0;E=E||"",Object.keys(u).forEach(function(C){var P=u[C];if(b.indexOf(C)===-1){var I=(E?E+".":"")+C;S(P,C,u,L,I),R.isValObject(P)||r(P)&&C!=="impliedEdits"&&R.crawl(P,S,L+1,I)}})},R.isValObject=function(u){return u&&u.valType!==void 0},R.findArrayAttributes=function(u){var S,_,E=[],L=[],C=[];function P(N,B,j,K){L=L.slice(0,K).concat([B]),C=C.slice(0,K).concat([N&&N._isLinkedToArray]),N&&(N.valType==="data_array"||N.arrayOk===!0)&&(L[K-1]!=="colorbar"||B!=="ticktext"&&B!=="tickvals")&&I(S,0,"")}function I(N,B,j){var K=N[L[B]],G=j+L[B];if(B===L.length-1)n(K)&&E.push(_+G);else if(C[B]){if(Array.isArray(K))for(var V=0;V<K.length;V++)r(K[V])&&I(K[V],B+1,G+"["+V+"].")}else r(K)&&I(K,B+1,G+".")}S=u,_="",R.crawl(l,P),u._module&&u._module.attributes&&R.crawl(u._module.attributes,P);var U=u.transforms;if(U)for(var z=0;z<U.length;z++){var H=U[z],F=H._module;F&&(_="transforms["+z+"].",S=H,R.crawl(F.attributes,P))}return E},R.getTraceValObject=function(u,S){var _,E,L=S[0],C=1;if(L==="transforms"){if(S.length===1)return l.transforms;var P=u.transforms;if(!Array.isArray(P)||!P.length)return!1;var I=S[1];if(!g(I)||I>=P.length)return!1;E=(_=(k.transformsRegistry[P[I].type]||{}).attributes)&&_[S[2]],C=3}else{var U=u._module;if(U||(U=(k.modules[u.type||l.type.dflt]||{})._module),!U)return!1;if(!(E=(_=U.attributes)&&_[L])){var z=U.basePlotModule;z&&z.attributes&&(E=z.attributes[L])}E||(E=l[L])}return v(E,S,C)},R.getLayoutValObject=function(u,S){var _=function(E,L){var C,P,I,U,z=E._basePlotModules;if(z){var H;for(C=0;C<z.length;C++){if((I=z[C]).attrRegex&&I.attrRegex.test(L)){if(I.layoutAttrOverrides)return I.layoutAttrOverrides;!H&&I.layoutAttributes&&(H=I.layoutAttributes)}var F=I.baseLayoutAttrOverrides;if(F&&L in F)return F[L]}if(H)return H}var N=E._modules;if(N){for(C=0;C<N.length;C++)if((U=N[C].layoutAttributes)&&L in U)return U[L]}for(P in k.componentsRegistry){if((I=k.componentsRegistry[P]).name==="colorscale"&&L.indexOf("coloraxis")===0)return I.layoutAttributes[L];if(!I.schema&&L===I.name)return I.layoutAttributes}return L in T&&T[L]}(u,S[0]);return v(_,S,1)}},44467:function($,R,e){var k=e(71828),A=e(9012),l={name:{valType:"string",editType:"none"}};function T(d){return d&&typeof d=="string"}function x(d){var s=d.length-1;return d.charAt(s)!=="s"&&k.warn("bad argument to arrayDefaultKey: "+d),d.substr(0,d.length-1)+"defaults"}l.templateitemname={valType:"string",editType:"calc"},R.templatedArray=function(d,s){return s._isLinkedToArray=d,s.name=l.name,s.templateitemname=l.templateitemname,s},R.traceTemplater=function(d){var s,t,o={};for(s in d)t=d[s],Array.isArray(t)&&t.length&&(o[s]=0);return{newTrace:function(r){var n={type:s=k.coerce(r,{},A,"type"),_template:null};if(s in o){t=d[s];var a=o[s]%t.length;o[s]++,n._template=t[a]}return n}}},R.newContainer=function(d,s,t){var o=d._template,r=o&&(o[s]||t&&o[t]);return k.isPlainObject(r)||(r=null),d[s]={_template:r}},R.arrayTemplater=function(d,s,t){var o=d._template,r=o&&o[x(s)],n=o&&o[s];Array.isArray(n)&&n.length||(n=[]);var a={};return{newItem:function(i){var c={name:i.name,_input:i},h=c.templateitemname=i.templateitemname;if(!T(h))return c._template=r,c;for(var f=0;f<n.length;f++){var b=n[f];if(b.name===h)return a[h]=1,c._template=b,c}return c[t]=i[t]||!1,c._template=!1,c},defaultItems:function(){for(var i=[],c=0;c<n.length;c++){var h=n[c],f=h.name;if(T(f)&&!a[f]){var b={_template:h,name:f,_input:{_templateitemname:f}};b.templateitemname=h.templateitemname,i.push(b),a[f]=1}}return i}}},R.arrayDefaultKey=x,R.arrayEditor=function(d,s,t){var o=(k.nestedProperty(d,s).get()||[]).length,r=t._index,n=r>=o&&(t._input||{})._templateitemname;n&&(r=o);var a,i=s+"["+r+"]";function c(){a={},n&&(a[i]={},a[i].templateitemname=n)}function h(b,v){n?k.nestedProperty(a[i],b).set(v):a[i+"."+b]=v}function f(){var b=a;return c(),b}return c(),{modifyBase:function(b,v){a[b]=v},modifyItem:h,getUpdateObj:f,applyUpdate:function(b,v){b&&h(b,v);var g=f();for(var y in g)k.nestedProperty(d,y).set(g[y])}}}},61549:function($,R,e){var k=e(39898),A=e(73972),l=e(74875),T=e(71828),x=e(33306),d=e(7901),s=e(91424),t=e(92998),o=e(64168),r=e(89298),n=e(18783),a=e(99082),i=a.enforce,c=a.clean,h=e(71739).doAutoRange,f="start";function b(u,S,_){for(var E=0;E<_.length;E++){var L=_[E][0],C=_[E][1];if(!(L[0]>=u[1]||L[1]<=u[0])&&C[0]<S[1]&&C[1]>S[0])return!0}return!1}function v(u){var S,_,E,L,C,P,I=u._fullLayout,U=I._size,z=U.p,H=r.list(u,"",!0);if(I._paperdiv.style({width:u._context.responsive&&I.autosize&&!u._context._hasZeroWidth&&!u.layout.width?"100%":I.width+"px",height:u._context.responsive&&I.autosize&&!u._context._hasZeroHeight&&!u.layout.height?"100%":I.height+"px"}).selectAll(".main-svg").call(s.setSize,I.width,I.height),u._context.setBackground(u,I.paper_bgcolor),R.drawMainTitle(u),o.manage(u),!I._has("cartesian"))return l.previousPromises(u);function F(Ve,He,nt){var tt=Ve._lw/2;return Ve._id.charAt(0)==="x"?He?nt==="top"?He._offset-z-tt:He._offset+He._length+z+tt:U.t+U.h*(1-(Ve.position||0))+tt%1:He?nt==="right"?He._offset+He._length+z+tt:He._offset-z-tt:U.l+U.w*(Ve.position||0)+tt%1}for(S=0;S<H.length;S++){var N=(L=H[S])._anchorAxis;L._linepositions={},L._lw=s.crispRound(u,L.linewidth,1),L._mainLinePosition=F(L,N,L.side),L._mainMirrorPosition=L.mirror&&N?F(L,N,n.OPPOSITE_SIDE[L.side]):null}var B=[],j=[],K=[],G=d.opacity(I.paper_bgcolor)===1&&d.opacity(I.plot_bgcolor)===1&&I.paper_bgcolor===I.plot_bgcolor;for(_ in I._plots)if((E=I._plots[_]).mainplot)E.bg&&E.bg.remove(),E.bg=void 0;else{var V=E.xaxis.domain,W=E.yaxis.domain,J=E.plotgroup;if(b(V,W,K)){var X=J.node(),ee=E.bg=T.ensureSingle(J,"rect","bg");X.insertBefore(ee.node(),X.childNodes[0]),j.push(_)}else J.select("rect.bg").remove(),K.push([V,W]),G||(B.push(_),j.push(_))}var re,ie,se,fe,ye,ge,he,ve,Oe,xe,ke,Me,Te,Q=I._bgLayer.selectAll(".bg").data(B);for(Q.enter().append("rect").classed("bg",!0),Q.exit().remove(),Q.each(function(Ve){I._plots[Ve].bg=k.select(this)}),S=0;S<j.length;S++)E=I._plots[j[S]],C=E.xaxis,P=E.yaxis,E.bg&&C._offset!==void 0&&P._offset!==void 0&&E.bg.call(s.setRect,C._offset-z,P._offset-z,C._length+2*z,P._length+2*z).call(d.fill,I.plot_bgcolor).style("stroke-width",0);if(!I._hasOnlyLargeSploms)for(_ in I._plots){E=I._plots[_],C=E.xaxis,P=E.yaxis;var oe,ce,me=E.clipId="clip"+I._uid+_+"plot",Ae=T.ensureSingleById(I._clips,"clipPath",me,function(Ve){Ve.classed("plotclip",!0).append("rect")});E.clipRect=Ae.select("rect").attr({width:C._length,height:P._length}),s.setTranslate(E.plot,C._offset,P._offset),E._hasClipOnAxisFalse?(oe=null,ce=me):(oe=me,ce=null),s.setClipUrl(E.plot,oe,u),E.layerClipId=ce}function Ie(Ve){return"M"+re+","+Ve+"H"+ie}function Ce(Ve){return"M"+C._offset+","+Ve+"h"+C._length}function Re(Ve){return"M"+Ve+","+ve+"V"+he}function le(Ve){return P._shift!==void 0&&(Ve+=P._shift),"M"+Ve+","+P._offset+"v"+P._length}function de(Ve,He,nt){if(!Ve.showline||_!==Ve._mainSubplot)return"";if(!Ve._anchorAxis)return nt(Ve._mainLinePosition);var tt=He(Ve._mainLinePosition);return Ve.mirror&&(tt+=He(Ve._mainMirrorPosition)),tt}for(_ in I._plots){E=I._plots[_],C=E.xaxis,P=E.yaxis;var _e="M0,0";g(C,_)&&(ye=p(C,"left",P,H),re=C._offset-(ye?z+ye:0),ge=p(C,"right",P,H),ie=C._offset+C._length+(ge?z+ge:0),se=F(C,P,"bottom"),fe=F(C,P,"top"),!(Te=!C._anchorAxis||_!==C._mainSubplot)||C.mirror!=="allticks"&&C.mirror!=="all"||(C._linepositions[_]=[se,fe]),_e=de(C,Ie,Ce),Te&&C.showline&&(C.mirror==="all"||C.mirror==="allticks")&&(_e+=Ie(se)+Ie(fe)),E.xlines.style("stroke-width",C._lw+"px").call(d.stroke,C.showline?C.linecolor:"rgba(0,0,0,0)")),E.xlines.attr("d",_e);var Fe="M0,0";g(P,_)&&(ke=p(P,"bottom",C,H),he=P._offset+P._length+(ke?z:0),Me=p(P,"top",C,H),ve=P._offset-(Me?z:0),Oe=F(P,C,"left"),xe=F(P,C,"right"),!(Te=!P._anchorAxis||_!==P._mainSubplot)||P.mirror!=="allticks"&&P.mirror!=="all"||(P._linepositions[_]=[Oe,xe]),Fe=de(P,Re,le),Te&&P.showline&&(P.mirror==="all"||P.mirror==="allticks")&&(Fe+=Re(Oe)+Re(xe)),E.ylines.style("stroke-width",P._lw+"px").call(d.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),E.ylines.attr("d",Fe)}return r.makeClipPaths(u),l.previousPromises(u)}function g(u,S){return(u.ticks||u.showline)&&(S===u._mainSubplot||u.mirror==="all"||u.mirror==="allticks")}function y(u,S,_){if(!_.showline||!_._lw)return!1;if(_.mirror==="all"||_.mirror==="allticks")return!0;var E=_._anchorAxis;if(!E)return!1;var L=n.FROM_BL[S];return _.side===S?E.domain[L]===u.domain[L]:_.mirror&&E.domain[1-L]===u.domain[1-L]}function p(u,S,_,E){if(y(u,S,_))return _._lw;for(var L=0;L<E.length;L++){var C=E[L];if(C._mainAxis===_._mainAxis&&y(u,S,C))return C._lw}return 0}function m(u,S){var _=u.title,E=u._size,L=0;return S===f?L=_.pad.l:S==="end"&&(L=-_.pad.r),_.xref==="paper"?E.l+E.w*_.x+L:u.width*_.x+L}function w(u,S){var _=u.title,E=u._size,L=0;return S!=="0em"&&S?S===n.CAP_SHIFT+"em"&&(L=_.pad.t):L=-_.pad.b,_.y==="auto"?E.t/2:_.yref==="paper"?E.t+E.h-E.h*_.y+L:u.height-u.height*_.y+L}R.layoutStyles=function(u){return T.syncOrAsync([l.doAutoMargin,v],u)},R.drawMainTitle=function(u){var S=u._fullLayout,_=function(L){var C=L.title,P="middle";return T.isRightAnchor(C)?P="end":T.isLeftAnchor(C)&&(P=f),P}(S),E=function(L){var C=L.title,P="0em";return T.isTopAnchor(C)?P=n.CAP_SHIFT+"em":T.isMiddleAnchor(C)&&(P=n.MID_SHIFT+"em"),P}(S);t.draw(u,"gtitle",{propContainer:S,propName:"title.text",placeholder:S._dfltTitle.plot,attributes:{x:m(S,_),y:w(S,E),"text-anchor":_,dy:E}})},R.doTraceStyle=function(u){var S,_=u.calcdata,E=[];for(S=0;S<_.length;S++){var L=_[S],C=L[0]||{},P=C.trace||{},I=P._module||{},U=I.arraysToCalcdata;U&&U(L,P);var z=I.editStyle;z&&E.push({fn:z,cd0:C})}if(E.length){for(S=0;S<E.length;S++){var H=E[S];H.fn(u,H.cd0)}x(u),R.redrawReglTraces(u)}return l.style(u),A.getComponentMethod("legend","draw")(u),l.previousPromises(u)},R.doColorBars=function(u){return A.getComponentMethod("colorbar","draw")(u),l.previousPromises(u)},R.layoutReplot=function(u){var S=u.layout;return u.layout=void 0,A.call("_doPlot",u,"",S)},R.doLegend=function(u){return A.getComponentMethod("legend","draw")(u),l.previousPromises(u)},R.doTicksRelayout=function(u){return r.draw(u,"redraw"),u._fullLayout._hasOnlyLargeSploms&&(A.subplotsRegistry.splom.updateGrid(u),x(u),R.redrawReglTraces(u)),R.drawMainTitle(u),l.previousPromises(u)},R.doModeBar=function(u){var S=u._fullLayout;o.manage(u);for(var _=0;_<S._basePlotModules.length;_++){var E=S._basePlotModules[_].updateFx;E&&E(u)}return l.previousPromises(u)},R.doCamera=function(u){for(var S=u._fullLayout,_=S._subplots.gl3d,E=0;E<_.length;E++){var L=S[_[E]];L._scene.setViewport(L)}},R.drawData=function(u){var S=u._fullLayout;x(u);for(var _=S._basePlotModules,E=0;E<_.length;E++)_[E].plot(u);return R.redrawReglTraces(u),l.style(u),A.getComponentMethod("selections","draw")(u),A.getComponentMethod("shapes","draw")(u),A.getComponentMethod("annotations","draw")(u),A.getComponentMethod("images","draw")(u),S._replotting=!1,l.previousPromises(u)},R.redrawReglTraces=function(u){var S=u._fullLayout;if(S._has("regl")){var _,E,L=u._fullData,C=[],P=[];for(S._hasOnlyLargeSploms&&S._splomGrid.draw(),_=0;_<L.length;_++){var I=L[_];I.visible===!0&&I._length!==0&&(I.type==="splom"?S._splomScenes[I.uid].draw():I.type==="scattergl"?T.pushUnique(C,I.xaxis+I.yaxis):I.type==="scatterpolargl"&&T.pushUnique(P,I.subplot))}for(_=0;_<C.length;_++)(E=S._plots[C[_]])._scene&&E._scene.draw();for(_=0;_<P.length;_++)(E=S[P[_]]._subplot)._scene&&E._scene.draw()}},R.doAutoRangeAndConstraints=function(u){for(var S,_=r.list(u,"",!0),E={},L=0;L<_.length;L++)if(!E[(S=_[L])._id]){E[S._id]=1,c(u,S),h(u,S);var C=S._matchGroup;if(C)for(var P in C){var I=r.getFromId(u,P);h(u,I,S.range),E[P]=1}}i(u)},R.finalDraw=function(u){A.getComponentMethod("rangeslider","draw")(u),A.getComponentMethod("rangeselector","draw")(u)},R.drawMarginPushers=function(u){A.getComponentMethod("legend","draw")(u),A.getComponentMethod("rangeselector","draw")(u),A.getComponentMethod("sliders","draw")(u),A.getComponentMethod("updatemenus","draw")(u),A.getComponentMethod("colorbar","draw")(u)}},96318:function($,R,e){var k=e(71828),A=k.isPlainObject,l=e(86281),T=e(74875),x=e(9012),d=e(44467),s=e(72075).dfltConfig;function t(f,b){f=k.extendDeep({},f);var v,g,y=Object.keys(f).sort();function p(_,E,L){if(A(E)&&A(_))t(_,E);else if(Array.isArray(E)&&Array.isArray(_)){var C=d.arrayTemplater({_template:f},L);for(g=0;g<E.length;g++){var P=E[g],I=C.newItem(P)._template;I&&t(I,P)}var U=C.defaultItems();for(g=0;g<U.length;g++)E.push(U[g]._template);for(g=0;g<E.length;g++)delete E[g].templateitemname}}for(v=0;v<y.length;v++){var m=y[v],w=f[m];if(m in b?p(w,b[m],m):b[m]=w,o(m)===m)for(var u in b){var S=o(u);u===S||S!==m||u in f||p(w,b[u],m)}}}function o(f){return f.replace(/[0-9]+$/,"")}function r(f,b,v,g,y){var p=y&&v(y);for(var m in f){var w=f[m],u=i(f,m,g),S=i(f,m,y),_=v(S);if(!_){var E=o(m);E!==m&&(_=v(S=i(f,E,y)))}if(!(p&&p===_||!_||_._noTemplating||_.valType==="data_array"||_.arrayOk&&Array.isArray(w)))if(!_.valType&&A(w))r(w,b,v,u,S);else if(_._isLinkedToArray&&Array.isArray(w))for(var L=!1,C=0,P={},I=0;I<w.length;I++){var U=w[I];if(A(U)){var z=U.name;if(z)P[z]||(r(U,b,v,i(w,C,u),i(w,C,S)),C++,P[z]=1);else if(!L){var H=i(f,d.arrayDefaultKey(m),g),F=i(w,C,u);r(U,b,v,F,i(w,C,S));var N=k.nestedProperty(b,F);k.nestedProperty(b,H).set(N.get()),N.set(null),L=!0}}}else k.nestedProperty(b,u).set(w)}}function n(f,b){return l.getLayoutValObject(f,k.nestedProperty({},b).parts)}function a(f,b){return l.getTraceValObject(f,k.nestedProperty({},b).parts)}function i(f,b,v){return v?Array.isArray(f)?v+"["+b+"]":v+"."+b:b}function c(f){for(var b=0;b<f.length;b++)if(A(f[b]))return!0}function h(f){var b;switch(f.code){case"data":b="The template has no key data.";break;case"layout":b="The template has no key layout.";break;case"missing":b=f.path?"There are no templates for item "+f.path+" with name "+f.templateitemname:"There are no templates for trace "+f.index+", of type "+f.traceType+".";break;case"unused":b=f.path?"The template item at "+f.path+" was not used in constructing the plot.":f.dataCount?"Some of the templates of type "+f.traceType+" were not used. The template has "+f.templateCount+" traces, the data only has "+f.dataCount+" of this type.":"The template has "+f.templateCount+" traces of type "+f.traceType+" but there are none in the data.";break;case"reused":b="Some of the templates of type "+f.traceType+" were used more than once. The template has "+f.templateCount+" traces, the data has "+f.dataCount+" of this type."}return f.msg=b,f}R.makeTemplate=function(f){f=k.isPlainObject(f)?f:k.getGraphDiv(f),f=k.extendDeep({_context:s},{data:f.data,layout:f.layout}),T.supplyDefaults(f);var b=f.data||[],v=f.layout||{};v._basePlotModules=f._fullLayout._basePlotModules,v._modules=f._fullLayout._modules;var g={data:{},layout:{}};b.forEach(function(C){var P={};r(C,P,a.bind(null,C));var I=k.coerce(C,{},x,"type"),U=g.data[I];U||(U=g.data[I]=[]),U.push(P)}),r(v,g.layout,n.bind(null,v)),delete g.layout.template;var y=v.template;if(A(y)){var p,m,w,u,S,_,E=y.layout;A(E)&&t(E,g.layout);var L=y.data;if(A(L)){for(m in g.data)if(w=L[m],Array.isArray(w)){for(_=(S=g.data[m]).length,u=w.length,p=0;p<_;p++)t(w[p%u],S[p]);for(p=_;p<u;p++)S.push(k.extendDeep({},w[p]))}for(m in L)m in g.data||(g.data[m]=k.extendDeep([],L[m]))}}return g},R.validateTemplate=function(f,b){var v=k.extendDeep({},{_context:s,data:f.data,layout:f.layout}),g=v.layout||{};A(b)||(b=g.template||{});var y=b.layout,p=b.data,m=[];v.layout=g,v.layout.template=b,T.supplyDefaults(v);var w=v._fullLayout,u=v._fullData,S={};if(A(y)?(function U(z,H){for(var F in z)if(F.charAt(0)!=="_"&&A(z[F])){var N,B=o(F),j=[];for(N=0;N<H.length;N++)j.push(i(z,F,H[N])),B!==F&&j.push(i(z,B,H[N]));for(N=0;N<j.length;N++)S[j[N]]=1;U(z[F],j)}}(w,["layout"]),function U(z,H){for(var F in z)if(F.indexOf("defaults")===-1&&A(z[F])){var N=i(z,F,H);S[N]?U(z[F],N):m.push({code:"unused",path:N})}}(y,"layout")):m.push({code:"layout"}),A(p)){for(var _,E={},L=0;L<u.length;L++){var C=u[L];E[_=C.type]=(E[_]||0)+1,C._fullInput._template||m.push({code:"missing",index:C._fullInput.index,traceType:_})}for(_ in p){var P=p[_].length,I=E[_]||0;P>I?m.push({code:"unused",traceType:_,templateCount:P,dataCount:I}):I>P&&m.push({code:"reused",traceType:_,templateCount:P,dataCount:I})}}else m.push({code:"data"});if(function U(z,H){for(var F in z)if(F.charAt(0)!=="_"){var N=z[F],B=i(z,F,H);A(N)?(Array.isArray(z)&&N._template===!1&&N.templateitemname&&m.push({code:"missing",path:B,templateitemname:N.templateitemname}),U(N,B)):Array.isArray(N)&&c(N)&&U(N,B)}}({data:u,layout:w},""),m.length)return m.map(h)}},403:function($,R,e){var k=e(92770),A=e(72391),l=e(74875),T=e(71828),x=e(25095),d=e(5900),s=e(70942),t=e(11506).version,o={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};$.exports=function(r,n){var a,i,c,h;function f(I){return!(I in n)||T.validate(n[I],o[I])}if(n=n||{},T.isPlainObject(r)?(a=r.data||[],i=r.layout||{},c=r.config||{},h={}):(r=T.getGraphDiv(r),a=T.extendDeep([],r.data),i=T.extendDeep({},r.layout),c=r._context,h=r._fullLayout||{}),!f("width")&&n.width!==null||!f("height")&&n.height!==null)throw new Error("Height and width should be pixel values.");if(!f("format"))throw new Error("Export format is not "+T.join2(o.format.values,", "," or ")+".");var b={};function v(I,U){return T.coerce(n,b,o,I,U)}var g=v("format"),y=v("width"),p=v("height"),m=v("scale"),w=v("setBackground"),u=v("imageDataOnly"),S=document.createElement("div");S.style.position="absolute",S.style.left="-5000px",document.body.appendChild(S);var _=T.extendFlat({},i);y?_.width=y:n.width===null&&k(h.width)&&(_.width=h.width),p?_.height=p:n.height===null&&k(h.height)&&(_.height=h.height);var E=T.extendFlat({},c,{_exportedPlot:!0,staticPlot:!0,setBackground:w}),L=x.getRedrawFunc(S);function C(){return new Promise(function(I){setTimeout(I,x.getDelay(S._fullLayout))})}function P(){return new Promise(function(I,U){var z=d(S,g,m),H=S._fullLayout.width,F=S._fullLayout.height;function N(){A.purge(S),document.body.removeChild(S)}if(g==="full-json"){var B=l.graphJson(S,!1,"keepdata","object",!0,!0);return B.version=t,B=JSON.stringify(B),N(),I(u?B:x.encodeJSON(B))}if(N(),g==="svg")return I(u?z:x.encodeSVG(z));var j=document.createElement("canvas");j.id=T.randstr(),s({format:g,width:H,height:F,scale:m,canvas:j,svg:z,promise:!0}).then(I).catch(U)})}return new Promise(function(I,U){A.newPlot(S,a,_,E).then(L).then(C).then(P).then(function(z){I(function(H){return u?H.replace(x.IMAGE_URL_PREFIX,""):H}(z))}).catch(function(z){U(z)})})}},84936:function($,R,e){var k=e(71828),A=e(74875),l=e(86281),T=e(72075).dfltConfig,x=k.isPlainObject,d=Array.isArray,s=k.isArrayOrTypedArray;function t(b,v,g,y,p,m){m=m||[];for(var w=Object.keys(b),u=0;u<w.length;u++){var S=w[u];if(S!=="transforms"){var _=m.slice();_.push(S);var E=b[S],L=v[S],C=c(g,S),P=(C||{}).valType,I=P==="info_array",U=P==="colorscale",z=(C||{}).items;if(i(g,S))if(x(E)&&x(L)&&P!=="any")t(E,L,C,y,p,_);else if(I&&d(E)){E.length>L.length&&y.push(a("unused",p,_.concat(L.length)));var H,F,N,B,j,K=L.length,G=Array.isArray(z);if(G&&(K=Math.min(K,z.length)),C.dimensions===2)for(F=0;F<K;F++)if(d(E[F])){E[F].length>L[F].length&&y.push(a("unused",p,_.concat(F,L[F].length)));var V=L[F].length;for(H=0;H<(G?Math.min(V,z[F].length):V);H++)N=G?z[F][H]:z,B=E[F][H],j=L[F][H],k.validate(B,N)?j!==B&&j!==+B&&y.push(a("dynamic",p,_.concat(F,H),B,j)):y.push(a("value",p,_.concat(F,H),B))}else y.push(a("array",p,_.concat(F),E[F]));else for(F=0;F<K;F++)N=G?z[F]:z,B=E[F],j=L[F],k.validate(B,N)?j!==B&&j!==+B&&y.push(a("dynamic",p,_.concat(F),B,j)):y.push(a("value",p,_.concat(F),B))}else if(C.items&&!I&&d(E)){var W,J,X=z[Object.keys(z)[0]],ee=[];for(W=0;W<L.length;W++){var re=L[W]._index||W;if((J=_.slice()).push(re),x(E[re])&&x(L[W])){ee.push(re);var ie=E[re],se=L[W];x(ie)&&ie.visible!==!1&&se.visible===!1?y.push(a("invisible",p,J)):t(ie,se,X,y,p,J)}}for(W=0;W<E.length;W++)(J=_.slice()).push(W),x(E[W])?ee.indexOf(W)===-1&&y.push(a("unused",p,J)):y.push(a("object",p,J,E[W]))}else!x(E)&&x(L)?y.push(a("object",p,_,E)):s(E)||!s(L)||I||U?S in v?k.validate(E,C)?C.valType==="enumerated"&&(C.coerceNumber&&E!==+L||E!==L)&&y.push(a("dynamic",p,_,E,L)):y.push(a("value",p,_,E)):y.push(a("unused",p,_,E)):y.push(a("array",p,_,E));else y.push(a("schema",p,_))}}return y}function o(b,v){for(var g=b.layout.layoutAttributes,y=0;y<v.length;y++){var p=v[y],m=b.traces[p.type],w=m.layoutAttributes;w&&(p.subplot?k.extendFlat(g[m.attributes.subplot.dflt],w):k.extendFlat(g,w))}return g}$.exports=function(b,v){b===void 0&&(b=[]),v===void 0&&(v={});var g,y,p=l.get(),m=[],w={_context:k.extendFlat({},T)};d(b)?(w.data=k.extendDeep([],b),g=b):(w.data=[],g=[],m.push(a("array","data"))),x(v)?(w.layout=k.extendDeep({},v),y=v):(w.layout={},y={},arguments.length>1&&m.push(a("object","layout"))),A.supplyDefaults(w);for(var u=w._fullData,S=g.length,_=0;_<S;_++){var E=g[_],L=["data",_];if(x(E)){var C=u[_],P=C.type,I=p.traces[P].attributes;I.type={valType:"enumerated",values:[P]},C.visible===!1&&E.visible!==!1&&m.push(a("invisible",L)),t(E,C,I,m,L);var U=E.transforms,z=C.transforms;if(U){d(U)||m.push(a("array",L,["transforms"])),L.push("transforms");for(var H=0;H<U.length;H++){var F=["transforms",H],N=U[H].type;if(x(U[H])){var B=p.transforms[N]?p.transforms[N].attributes:{};B.type={valType:"enumerated",values:Object.keys(p.transforms)},t(U[H],z[H],B,m,L,F)}else m.push(a("object",L,F))}}}else m.push(a("object",L))}var j=w._fullLayout,K=o(p,u);return t(y,j,K,m,"layout"),m.length===0?void 0:m};var r={object:function(b,v){return(b==="layout"&&v===""?"The layout argument":b[0]==="data"&&v===""?"Trace "+b[1]+" in the data argument":n(b)+"key "+v)+" must be linked to an object container"},array:function(b,v){return(b==="data"?"The data argument":n(b)+"key "+v)+" must be linked to an array container"},schema:function(b,v){return n(b)+"key "+v+" is not part of the schema"},unused:function(b,v,g){var y=x(g)?"container":"key";return n(b)+y+" "+v+" did not get coerced"},dynamic:function(b,v,g,y){return[n(b)+"key",v,"(set to '"+g+"')","got reset to","'"+y+"'","during defaults."].join(" ")},invisible:function(b,v){return(v?n(b)+"item "+v:"Trace "+b[1])+" got defaulted to be not visible"},value:function(b,v,g){return[n(b)+"key "+v,"is set to an invalid value ("+g+")"].join(" ")}};function n(b){return d(b)?"In data trace "+b[1]+", ":"In "+b+", "}function a(b,v,g,y,p){var m,w;g=g||"",d(v)?(m=v[0],w=v[1]):(m=v,w=null);var u=function(_){if(!d(_))return String(_);for(var E="",L=0;L<_.length;L++){var C=_[L];typeof C=="number"?E=E.substr(0,E.length-1)+"["+C+"]":E+=C,L<_.length-1&&(E+=".")}return E}(g),S=r[b](v,u,y,p);return k.log(S),{code:b,container:m,trace:w,path:g,astr:u,msg:S}}function i(b,v){var g=f(v),y=g.keyMinusId,p=g.id;return!!(y in b&&b[y]._isSubplotObj&&p)||v in b}function c(b,v){return v in b?b[v]:b[f(v).keyMinusId]}var h=k.counterRegex("([a-z]+)");function f(b){var v=b.match(h);return{keyMinusId:v&&v[1],id:v&&v[2]}}},85594:function($){$.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function($,R,e){var k=e(71828),A=e(44467);$.exports=function(l,T,x){var d,s,t=x.name,o=x.inclusionAttr||"visible",r=T[t],n=k.isArrayOrTypedArray(l[t])?l[t]:[],a=T[t]=[],i=A.arrayTemplater(T,t,o);for(d=0;d<n.length;d++){var c=n[d];k.isPlainObject(c)?s=i.newItem(c):(s=i.newItem({}))[o]=!1,s._index=d,s[o]!==!1&&x.handleItemDefaults(c,s,T,x),a.push(s)}var h=i.defaultItems();for(d=0;d<h.length;d++)(s=h[d])._index=a.length,x.handleItemDefaults({},s,T,x,{}),a.push(s);if(k.isArrayOrTypedArray(r)){var f=Math.min(r.length,a.length);for(d=0;d<f;d++)k.relinkPrivateKeys(a[d],r[d])}return a}},9012:function($,R,e){var k=e(41940),A=e(77914);$.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:k({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:A.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function($,R,e){var k=e(92770),A=e(71828),l=A.dateTime2ms,T=A.incrementMonth,x=e(50606).ONEAVGMONTH;$.exports=function(d,s,t,o){if(s.type!=="date")return{vals:o};var r=d[t+"periodalignment"];if(!r)return{vals:o};var n,a=d[t+"period"];if(k(a)){if((a=+a)<=0)return{vals:o}}else if(typeof a=="string"&&a.charAt(0)==="M"){var i=+a.substring(1);if(!(i>0&&Math.round(i)===i))return{vals:o};n=i}for(var c=s.calendar,h=r==="start",f=r==="end",b=d[t+"period0"],v=l(b,c)||0,g=[],y=[],p=[],m=o.length,w=0;w<m;w++){var u,S,_,E=o[w];if(n){for(u=Math.round((E-v)/(n*x)),_=T(v,n*u,c);_>E;)_=T(_,-n,c);for(;_<=E;)_=T(_,n,c);S=T(_,-n,c)}else{for(_=v+(u=Math.round((E-v)/a))*a;_>E;)_-=a;for(;_<=E;)_+=a;S=_-a}g[w]=h?S:f?_:(S+_)/2,y[w]=S,p[w]=_}return{vals:g,starts:y,ends:p}}},89502:function($){$.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function($,R,e){var k=e(39898),A=e(92770),l=e(71828),T=e(50606).FP_SAFE,x=e(73972),d=e(91424),s=e(41675),t=s.getFromId,o=s.isLinked;function r(y,p){var m,w,u=[],S=y._fullLayout,_=a(S,p,0),E=a(S,p,1),L=i(y,p),C=L.min,P=L.max;if(C.length===0||P.length===0)return l.simpleMap(p.range,p.r2l);var I=C[0].val,U=P[0].val;for(m=1;m<C.length&&I===U;m++)I=Math.min(I,C[m].val);for(m=1;m<P.length&&I===U;m++)U=Math.max(U,P[m].val);var z=!1;if(p.range){var H=l.simpleMap(p.range,p.r2l);z=H[1]<H[0]}p.autorange==="reversed"&&(z=!0,p.autorange=!0);var F,N,B,j,K,G,V=p.rangemode,W=V==="tozero",J=V==="nonnegative",X=p._length,ee=X/10,re=0;for(m=0;m<C.length;m++)for(F=C[m],w=0;w<P.length;w++)(G=(N=P[w]).val-F.val-n(p,F.val,N.val))>0&&((K=X-_(F)-E(N))>ee?G/K>re&&(B=F,j=N,re=G/K):G/X>re&&(B={val:F.val,nopad:1},j={val:N.val,nopad:1},re=G/X));if(I===U){var ie=I-1,se=I+1;if(W)if(I===0)u=[0,1];else{var fe=(I>0?P:C).reduce(function(ge,he){return Math.max(ge,E(he))},0),ye=I/(1-Math.min(.5,fe/X));u=I>0?[0,ye]:[ye,0]}else u=J?[Math.max(0,ie),Math.max(1,se)]:[ie,se]}else W?(B.val>=0&&(B={val:0,nopad:1}),j.val<=0&&(j={val:0,nopad:1})):J&&(B.val-re*_(B)<0&&(B={val:0,nopad:1}),j.val<=0&&(j={val:1,nopad:1})),re=(j.val-B.val-n(p,F.val,N.val))/(X-_(B)-E(j)),u=[B.val-re*_(B),j.val+re*E(j)];return z&&u.reverse(),l.simpleMap(u,p.l2r||Number)}function n(y,p,m){var w=0;if(y.rangebreaks)for(var u=y.locateBreaks(p,m),S=0;S<u.length;S++){var _=u[S];w+=_.max-_.min}return w}function a(y,p,m){var w=.05*p._length,u=p._anchorAxis||{};if((p.ticklabelposition||"").indexOf("inside")!==-1||(u.ticklabelposition||"").indexOf("inside")!==-1){var S=p.autorange==="reversed";if(!S){var _=l.simpleMap(p.range,p.r2l);S=_[1]<_[0]}S&&(m=!m)}var E=0;return o(y,p._id)||(E=function(L,C,P){var I=0,U=C._id.charAt(0)==="x";for(var z in L._plots){var H=L._plots[z];if(C._id===H.xaxis._id||C._id===H.yaxis._id){var F=(U?H.yaxis:H.xaxis)||{};if((F.ticklabelposition||"").indexOf("inside")!==-1&&(!P&&(F.side==="left"||F.side==="bottom")||P&&(F.side==="top"||F.side==="right"))){if(F._vals){var N=l.deg2rad(F._tickAngles[F._id+"tick"]||0),B=Math.abs(Math.cos(N)),j=Math.abs(Math.sin(N));if(!F._vals[0].bb){var K=F._id+"tick";F._selections[K].each(function(X){var ee=k.select(this);ee.select(".text-math-group").empty()&&(X.bb=d.bBox(ee.node()))})}for(var G=0;G<F._vals.length;G++){var V=F._vals[G].bb;if(V){var W=6+V.width,J=6+V.height;I=Math.max(I,U?Math.max(W*B,J*j):Math.max(J*B,W*j))}}}F.ticks==="inside"&&F.ticklabelposition==="inside"&&(I+=F.ticklen||0)}}}return I}(y,p,m)),w=Math.max(E,w),p.constrain==="domain"&&p._inputDomain&&(w*=(p._inputDomain[1]-p._inputDomain[0])/(p.domain[1]-p.domain[0])),function(L){return L.nopad?0:L.pad+(L.extrapad?w:E)}}function i(y,p,m){var w,u,S,_=p._id,E=y._fullData,L=y._fullLayout,C=[],P=[];function I(N,B){for(w=0;w<B.length;w++){var j=N[B[w]],K=(j._extremes||{})[_];if(j.visible===!0&&K){for(u=0;u<K.min.length;u++)S=K.min[u],c(C,S.val,S.pad,{extrapad:S.extrapad});for(u=0;u<K.max.length;u++)S=K.max[u],h(P,S.val,S.pad,{extrapad:S.extrapad})}}}if(I(E,p._traceIndices),I(L.annotations||[],p._annIndices||[]),I(L.shapes||[],p._shapeIndices||[]),p._matchGroup&&!m){for(var U in p._matchGroup)if(U!==p._id){var z=t(y,U),H=i(y,z,!0),F=p._length/z._length;for(u=0;u<H.min.length;u++)S=H.min[u],c(C,S.val,S.pad*F,{extrapad:S.extrapad});for(u=0;u<H.max.length;u++)S=H.max[u],h(P,S.val,S.pad*F,{extrapad:S.extrapad})}}return{min:C,max:P}}function c(y,p,m,w){f(y,p,m,w,v)}function h(y,p,m,w){f(y,p,m,w,g)}function f(y,p,m,w,u){for(var S=w.tozero,_=w.extrapad,E=!0,L=0;L<y.length&&E;L++){var C=y[L];if(u(C.val,p)&&C.pad>=m&&(C.extrapad||!_)){E=!1;break}u(p,C.val)&&C.pad<=m&&(_||!C.extrapad)&&(y.splice(L,1),L--)}if(E){var P=S&&p===0;y.push({val:p,pad:P?0:m,extrapad:!P&&_})}}function b(y){return A(y)&&Math.abs(y)<T}function v(y,p){return y<=p}function g(y,p){return y>=p}$.exports={getAutoRange:r,makePadFn:a,doAutoRange:function(y,p,m){if(p.setScale(),p.autorange){p.range=m?m.slice():r(y,p),p._r=p.range.slice(),p._rl=l.simpleMap(p._r,p.r2l);var w=p._input,u={};u[p._attr+".range"]=p.range,u[p._attr+".autorange"]=p.autorange,x.call("_storeDirectGUIEdit",y.layout,y._fullLayout._preGUI,u),w.range=p.range.slice(),w.autorange=p.autorange}var S=p._anchorAxis;if(S&&S.rangeslider){var _=S.rangeslider[p._name];_&&_.rangemode==="auto"&&(_.range=r(y,p)),S._input.rangeslider[p._name]=l.extendFlat({},_)}},findExtremes:function(y,p,m){m||(m={}),y._m||y.setScale();var w,u,S,_,E,L,C,P,I,U=[],z=[],H=p.length,F=m.padded||!1,N=m.tozero&&(y.type==="linear"||y.type==="-"),B=y.type==="log",j=!1,K=m.vpadLinearized||!1;function G(se){if(Array.isArray(se))return j=!0,function(ye){return Math.max(Number(se[ye]||0),0)};var fe=Math.max(Number(se||0),0);return function(){return fe}}var V=G((y._m>0?m.ppadplus:m.ppadminus)||m.ppad||0),W=G((y._m>0?m.ppadminus:m.ppadplus)||m.ppad||0),J=G(m.vpadplus||m.vpad),X=G(m.vpadminus||m.vpad);if(!j){if(P=1/0,I=-1/0,B)for(w=0;w<H;w++)(u=p[w])<P&&u>0&&(P=u),u>I&&u<T&&(I=u);else for(w=0;w<H;w++)(u=p[w])<P&&u>-T&&(P=u),u>I&&u<T&&(I=u);p=[P,I],H=2}var ee={tozero:N,extrapad:F};function re(se){S=p[se],A(S)&&(L=V(se),C=W(se),K?(_=y.c2l(S)-X(se),E=y.c2l(S)+J(se)):(P=S-X(se),I=S+J(se),B&&P<I/10&&(P=I/10),_=y.c2l(P),E=y.c2l(I)),N&&(_=Math.min(0,_),E=Math.max(0,E)),b(_)&&c(U,_,C,ee),b(E)&&h(z,E,L,ee))}var ie=Math.min(6,H);for(w=0;w<ie;w++)re(w);for(w=H-1;w>=ie;w--)re(w);return{min:U,max:z,opts:m}},concatExtremes:i}},89298:function($,R,e){var k=e(39898),A=e(92770),l=e(74875),T=e(73972),x=e(71828),d=x.strTranslate,s=e(63893),t=e(92998),o=e(7901),r=e(91424),n=e(13838),a=e(66287),i=e(50606),c=i.ONEMAXYEAR,h=i.ONEAVGYEAR,f=i.ONEMINYEAR,b=i.ONEMAXQUARTER,v=i.ONEAVGQUARTER,g=i.ONEMINQUARTER,y=i.ONEMAXMONTH,p=i.ONEAVGMONTH,m=i.ONEMINMONTH,w=i.ONEWEEK,u=i.ONEDAY,S=u/2,_=i.ONEHOUR,E=i.ONEMIN,L=i.ONESEC,C=i.MINUS_SIGN,P=i.BADNUM,I={K:"zeroline"},U={K:"gridline",L:"path"},z={K:"minor-gridline",L:"path"},H={K:"tick",L:"path"},F={K:"tick",L:"text"},N={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},B=e(18783),j=B.MID_SHIFT,K=B.CAP_SHIFT,G=B.LINE_SPACING,V=B.OPPOSITE_SIDE,W=$.exports={};W.setConvert=e(21994);var J=e(4322),X=e(41675),ee=X.idSort,re=X.isLinked;W.id2name=X.id2name,W.name2id=X.name2id,W.cleanId=X.cleanId,W.list=X.list,W.listIds=X.listIds,W.getFromId=X.getFromId,W.getFromTrace=X.getFromTrace;var ie=e(71739);function se(Se){var ze=1e-4*(Se[1]-Se[0]);return[Se[0]-ze,Se[1]+ze]}W.getAutoRange=ie.getAutoRange,W.findExtremes=ie.findExtremes,W.coerceRef=function(Se,ze,Ke,st,ct,Tt){var Et=st.charAt(st.length-1),At=Ke._fullLayout._subplots[Et+"axis"],ht=st+"ref",pt={};return ct||(ct=At[0]||(typeof Tt=="string"?Tt:Tt[0])),Tt||(Tt=ct),At=At.concat(At.map(function(gt){return gt+" domain"})),pt[ht]={valType:"enumerated",values:At.concat(Tt?typeof Tt=="string"?[Tt]:Tt:[]),dflt:ct},x.coerce(Se,ze,pt,ht)},W.getRefType=function(Se){return Se===void 0?Se:Se==="paper"?"paper":Se==="pixel"?"pixel":/( domain)$/.test(Se)?"domain":"range"},W.coercePosition=function(Se,ze,Ke,st,ct,Tt){var Et,At;if(W.getRefType(st)!=="range")Et=x.ensureNumber,At=Ke(ct,Tt);else{var ht=W.getFromId(ze,st);At=Ke(ct,Tt=ht.fraction2r(Tt)),Et=ht.cleanPos}Se[ct]=Et(At)},W.cleanPosition=function(Se,ze,Ke){return(Ke==="paper"||Ke==="pixel"?x.ensureNumber:W.getFromId(ze,Ke).cleanPos)(Se)},W.redrawComponents=function(Se,ze){ze=ze||W.listIds(Se);var Ke=Se._fullLayout;function st(ct,Tt,Et,At){for(var ht=T.getComponentMethod(ct,Tt),pt={},gt=0;gt<ze.length;gt++)for(var Pt=Ke[W.id2name(ze[gt])][Et],Ot=0;Ot<Pt.length;Ot++){var Ht=Pt[Ot];if(!pt[Ht]&&(ht(Se,Ht),pt[Ht]=1,At))return}}st("annotations","drawOne","_annIndices"),st("shapes","drawOne","_shapeIndices"),st("images","draw","_imgIndices",!0),st("selections","drawOne","_selectionIndices")};var fe=W.getDataConversions=function(Se,ze,Ke,st){var ct,Tt=Ke==="x"||Ke==="y"||Ke==="z"?Ke:st;if(Array.isArray(Tt)){if(ct={type:J(st,void 0,{autotypenumbers:Se._fullLayout.autotypenumbers}),_categories:[]},W.setConvert(ct),ct.type==="category")for(var Et=0;Et<st.length;Et++)ct.d2c(st[Et])}else ct=W.getFromTrace(Se,ze,Tt);return ct?{d2c:ct.d2c,c2d:ct.c2d}:Tt==="ids"?{d2c:ge,c2d:ge}:{d2c:ye,c2d:ye}};function ye(Se){return+Se}function ge(Se){return String(Se)}function he(Se,ze){return Math.abs((Se/ze+.5)%1-.5)<.001}function ve(Se,ze){return Math.abs(Se/ze-1)<.001}function Oe(Se){return+Se.substring(1)}function xe(Se,ze){return Se.rangebreaks&&(ze=ze.filter(function(Ke){return Se.maskBreaks(Ke.x)!==P})),ze}function ke(Se){var ze=Se._mainAxis,Ke=[];if(ze._vals){for(var st=0;st<ze._vals.length;st++)if(!ze._vals[st].noTick){var ct=ze.l2p(ze._vals[st].x),Tt=Se.p2l(ct),Et=W.tickText(Se,Tt);ze._vals[st].minor&&(Et.minor=!0,Et.text=""),Ke.push(Et)}}return xe(Se,Ke)}function Me(Se){var ze=se(x.simpleMap(Se.range,Se.r2l)),Ke=Math.min(ze[0],ze[1]),st=Math.max(ze[0],ze[1]),ct=Se.type==="category"?Se.d2l_noadd:Se.d2l;Se.type==="log"&&String(Se.dtick).charAt(0)!=="L"&&(Se.dtick="L"+Math.pow(10,Math.floor(Math.min(Se.range[0],Se.range[1]))-1));for(var Tt=[],Et=0;Et<=1;Et++)if(!Et||Se.minor){var At=Et?Se.minor.tickvals:Se.tickvals,ht=Et?[]:Se.ticktext;if(At){Array.isArray(ht)||(ht=[]);for(var pt=0;pt<At.length;pt++){var gt=ct(At[pt]);if(gt>Ke&&gt<st){var Pt=ht[pt]===void 0?W.tickText(Se,gt):le(Se,gt,String(ht[pt]));Et&&(Pt.minor=!0,Pt.text=""),Tt.push(Pt)}}}}return xe(Se,Tt)}W.getDataToCoordFunc=function(Se,ze,Ke,st){return fe(Se,ze,Ke,st).d2c},W.counterLetter=function(Se){var ze=Se.charAt(0);return ze==="x"?"y":ze==="y"?"x":void 0},W.minDtick=function(Se,ze,Ke,st){["log","category","multicategory"].indexOf(Se.type)===-1&&st?Se._minDtick===void 0?(Se._minDtick=ze,Se._forceTick0=Ke):Se._minDtick&&((Se._minDtick/ze+1e-6)%1<2e-6&&((Ke-Se._forceTick0)/ze%1+1.000001)%1<2e-6?(Se._minDtick=ze,Se._forceTick0=Ke):((ze/Se._minDtick+1e-6)%1>2e-6||((Ke-Se._forceTick0)/Se._minDtick%1+1.000001)%1>2e-6)&&(Se._minDtick=0)):Se._minDtick=0},W.saveRangeInitial=function(Se,ze){for(var Ke=W.list(Se,"",!0),st=!1,ct=0;ct<Ke.length;ct++){var Tt=Ke[ct],Et=Tt._rangeInitial===void 0,At=Et||!(Tt.range[0]===Tt._rangeInitial[0]&&Tt.range[1]===Tt._rangeInitial[1]);(Et&&Tt.autorange===!1||ze&&At)&&(Tt._rangeInitial=Tt.range.slice(),st=!0)}return st},W.saveShowSpikeInitial=function(Se,ze){for(var Ke=W.list(Se,"",!0),st=!1,ct="on",Tt=0;Tt<Ke.length;Tt++){var Et=Ke[Tt],At=Et._showSpikeInitial===void 0,ht=At||Et.showspikes!==Et._showspikes;(At||ze&&ht)&&(Et._showSpikeInitial=Et.showspikes,st=!0),ct!=="on"||Et.showspikes||(ct="off")}return Se._fullLayout._cartesianSpikesEnabled=ct,st},W.autoBin=function(Se,ze,Ke,st,ct,Tt){var Et,At=x.aggNums(Math.min,null,Se),ht=x.aggNums(Math.max,null,Se);if(ze.type==="category"||ze.type==="multicategory")return{start:At-.5,end:ht+.5,size:Math.max(1,Math.round(Tt)||1),_dataSpan:ht-At};if(ct||(ct=ze.calendar),Et=ze.type==="log"?{type:"linear",range:[At,ht]}:{type:ze.type,range:x.simpleMap([At,ht],ze.c2r,0,ct),calendar:ct},W.setConvert(Et),Tt=Tt&&a.dtick(Tt,Et.type))Et.dtick=Tt,Et.tick0=a.tick0(void 0,Et.type,ct);else{var pt;if(Ke)pt=(ht-At)/Ke;else{var gt=x.distinctVals(Se),Pt=Math.pow(10,Math.floor(Math.log(gt.minDiff)/Math.LN10)),Ot=Pt*x.roundUp(gt.minDiff/Pt,[.9,1.9,4.9,9.9],!0);pt=Math.max(Ot,2*x.stdev(Se)/Math.pow(Se.length,st?.25:.4)),A(pt)||(pt=1)}W.autoTicks(Et,pt)}var Ht,jt=Et.dtick,Nt=W.tickIncrement(W.tickFirst(Et),jt,"reverse",ct);if(typeof jt=="number")Nt=function(Gt,un,pn,Kt,wn){var Bn=0,vn=0,cn=0,dn=0;function sn(Rn){return(1+100*(Rn-Gt)/pn.dtick)%100<2}for(var hn=0;hn<un.length;hn++)un[hn]%1==0?cn++:A(un[hn])||dn++,sn(un[hn])&&Bn++,sn(un[hn]+pn.dtick/2)&&vn++;var En=un.length-dn;if(cn===En&&pn.type!=="date")pn.dtick<1?Gt=Kt-.5*pn.dtick:(Gt-=.5)+pn.dtick<Kt&&(Gt+=pn.dtick);else if(vn<.1*En&&(Bn>.3*En||sn(Kt)||sn(wn))){var Mn=pn.dtick/2;Gt+=Gt+Mn<Kt?Mn:-Mn}return Gt}(Nt,Se,Et,At,ht),Ht=Nt+(1+Math.floor((ht-Nt)/jt))*jt;else for(Et.dtick.charAt(0)==="M"&&(Nt=function(Gt,un,pn,Kt,wn){var Bn=x.findExactDates(un,wn);if(Bn.exactDays>.8){var vn=Number(pn.substr(1));Bn.exactYears>.8&&vn%12==0?Gt=W.tickIncrement(Gt,"M6","reverse")+1.5*u:Bn.exactMonths>.8?Gt=W.tickIncrement(Gt,"M1","reverse")+15.5*u:Gt-=S;var cn=W.tickIncrement(Gt,pn);if(cn<=Kt)return cn}return Gt}(Nt,Se,jt,At,ct)),Ht=Nt;Ht<=ht;)Ht=W.tickIncrement(Ht,jt,!1,ct);return{start:ze.c2r(Nt,0,ct),end:ze.c2r(Ht,0,ct),size:jt,_dataSpan:ht-At}},W.prepMinorTicks=function(Se,ze,Ke){if(!ze.minor.dtick){delete Se.dtick;var st,ct=ze.dtick&&A(ze._tmin);if(ct){var Tt=W.tickIncrement(ze._tmin,ze.dtick,!0);st=[ze._tmin,.99*Tt+.01*ze._tmin]}else{var Et=x.simpleMap(ze.range,ze.r2l);st=[Et[0],.8*Et[0]+.2*Et[1]]}if(Se.range=x.simpleMap(st,ze.l2r),Se._isMinor=!0,W.prepTicks(Se,Ke),ct){var At=A(ze.dtick),ht=A(Se.dtick),pt=At?ze.dtick:+ze.dtick.substring(1),gt=ht?Se.dtick:+Se.dtick.substring(1);At&&ht?he(pt,gt)?pt===2*w&&gt===2*u&&(Se.dtick=w):pt===2*w&&gt===3*u?Se.dtick=w:pt!==w||(ze._input.minor||{}).nticks?ve(pt/gt,2.5)?Se.dtick=pt/2:Se.dtick=pt:Se.dtick=u:String(ze.dtick).charAt(0)==="M"?ht?Se.dtick="M1":he(pt,gt)?pt>=12&&gt===2&&(Se.dtick="M3"):Se.dtick=ze.dtick:String(Se.dtick).charAt(0)==="L"?String(ze.dtick).charAt(0)==="L"?he(pt,gt)||(Se.dtick=ve(pt/gt,2.5)?ze.dtick/2:ze.dtick):Se.dtick="D1":Se.dtick==="D2"&&+ze.dtick>1&&(Se.dtick=1)}Se.range=ze.range}ze.minor._tick0Init===void 0&&(Se.tick0=ze.tick0)},W.prepTicks=function(Se,ze){var Ke=x.simpleMap(Se.range,Se.r2l,void 0,void 0,ze);if(Se.tickmode==="auto"||!Se.dtick){var st,ct=Se.nticks;ct||(Se.type==="category"||Se.type==="multicategory"?(st=Se.tickfont?x.bigFont(Se.tickfont.size||12):15,ct=Se._length/st):(st=Se._id.charAt(0)==="y"?40:80,ct=x.constrain(Se._length/st,4,9)+1),Se._name==="radialaxis"&&(ct*=2)),Se.minor&&Se.minor.tickmode!=="array"||Se.tickmode==="array"&&(ct*=100),Se._roughDTick=Math.abs(Ke[1]-Ke[0])/ct,W.autoTicks(Se,Se._roughDTick),Se._minDtick>0&&Se.dtick<2*Se._minDtick&&(Se.dtick=Se._minDtick,Se.tick0=Se.l2r(Se._forceTick0))}Se.ticklabelmode==="period"&&function(Tt){var Et;function At(){return!(A(Tt.dtick)||Tt.dtick.charAt(0)!=="M")}var ht=At(),pt=W.getTickFormat(Tt);if(pt){var gt=Tt._dtickInit!==Tt.dtick;/%[fLQsSMX]/.test(pt)||(/%[HI]/.test(pt)?(Et=_,gt&&!ht&&Tt.dtick<_&&(Tt.dtick=_)):/%p/.test(pt)?(Et=S,gt&&!ht&&Tt.dtick<S&&(Tt.dtick=S)):/%[Aadejuwx]/.test(pt)?(Et=u,gt&&!ht&&Tt.dtick<u&&(Tt.dtick=u)):/%[UVW]/.test(pt)?(Et=w,gt&&!ht&&Tt.dtick<w&&(Tt.dtick=w)):/%[Bbm]/.test(pt)?(Et=p,gt&&(ht?Oe(Tt.dtick)<1:Tt.dtick<m)&&(Tt.dtick="M1")):/%[q]/.test(pt)?(Et=v,gt&&(ht?Oe(Tt.dtick)<3:Tt.dtick<g)&&(Tt.dtick="M3")):/%[Yy]/.test(pt)&&(Et=h,gt&&(ht?Oe(Tt.dtick)<12:Tt.dtick<f)&&(Tt.dtick="M12")))}(ht=At())&&Tt.tick0===Tt._dowTick0&&(Tt.tick0=Tt._rawTick0),Tt._definedDelta=Et}(Se),Se.tick0||(Se.tick0=Se.type==="date"?"2000-01-01":0),Se.type==="date"&&Se.dtick<.1&&(Se.dtick=.1),Re(Se)},W.calcTicks=function(Se,ze){for(var Ke,st,ct=Se.type,Tt=Se.calendar,Et=Se.ticklabelstep,At=Se.ticklabelmode==="period",ht=x.simpleMap(Se.range,Se.r2l,void 0,void 0,ze),pt=ht[1]<ht[0],gt=Math.min(ht[0],ht[1]),Pt=Math.max(ht[0],ht[1]),Ot=Math.max(1e3,Se._length||0),Ht=[],jt=[],Nt=[],Gt=[],un=Se.minor&&(Se.minor.ticks||Se.minor.showgrid),pn=1;pn>=(un?0:1);pn--){var Kt=!pn;pn?(Se._dtickInit=Se.dtick,Se._tick0Init=Se.tick0):(Se.minor._dtickInit=Se.minor.dtick,Se.minor._tick0Init=Se.minor.tick0);var wn=pn?Se:x.extendFlat({},Se,Se.minor);if(Kt?W.prepMinorTicks(wn,Se,ze):W.prepTicks(wn,ze),wn.tickmode!=="array")if(wn.tickmode!=="sync"){var Bn=se(ht),vn=Bn[0],cn=Bn[1],dn=A(wn.dtick),sn=ct==="log"&&!(dn||wn.dtick.charAt(0)==="L"),hn=W.tickFirst(wn,ze);if(pn){if(Se._tmin=hn,hn<vn!==pt)break;ct!=="category"&&ct!=="multicategory"||(cn=pt?Math.max(-.5,cn):Math.min(Se._categories.length-.5,cn))}var En,Mn,Rn=null,Nn=hn;pn&&(dn?Mn=Se.dtick:ct==="date"?typeof Se.dtick=="string"&&Se.dtick.charAt(0)==="M"&&(Mn=p*Se.dtick.substring(1)):Mn=Se._roughDTick,En=Math.round((Se.r2l(Nn)-Se.r2l(Se.tick0))/Mn)-1);var Fn=wn.dtick;for(wn.rangebreaks&&wn._tick0Init!==wn.tick0&&(Nn=We(Nn,Se),pt||(Nn=W.tickIncrement(Nn,Fn,!pt,Tt))),pn&&At&&(Nn=W.tickIncrement(Nn,Fn,!pt,Tt),En--);pt?Nn>=cn:Nn<=cn;Nn=W.tickIncrement(Nn,Fn,pt,Tt)){if(pn&&En++,wn.rangebreaks&&!pt){if(Nn<vn)continue;if(wn.maskBreaks(Nn)===P&&We(Nn,wn)>=Pt)break}if(Nt.length>Ot||Nn===Rn)break;Rn=Nn;var rr={value:Nn};pn?(sn&&Nn!==(0|Nn)&&(rr.simpleLabel=!0),Et>1&&En%Et&&(rr.skipLabel=!0),Nt.push(rr)):(rr.minor=!0,Gt.push(rr))}}else Nt=[],Ht=ke(Se);else pn?(Nt=[],Ht=Me(Se)):(Gt=[],jt=Me(Se))}if(un&&!(Se.minor.ticks==="inside"&&Se.ticks==="outside"||Se.minor.ticks==="outside"&&Se.ticks==="inside")){for(var $n=Nt.map(function(kn){return kn.value}),mr=[],fr=0;fr<Gt.length;fr++){var Zn=Gt[fr],qn=Zn.value;if($n.indexOf(qn)===-1){for(var ur=!1,Zt=0;!ur&&Zt<Nt.length;Zt++)1e7+Nt[Zt].value===1e7+qn&&(ur=!0);ur||mr.push(Zn)}}Gt=mr}if(At&&function(kn,zt,Wt){for(var tn=0;tn<kn.length;tn++){var Sn=kn[tn].value,An=tn,Tn=tn+1;tn<kn.length-1?(An=tn,Tn=tn+1):tn>0?(An=tn-1,Tn=tn):(An=tn,Tn=tn);var an,mn=kn[An].value,on=kn[Tn].value,fn=Math.abs(on-mn),yn=Wt||fn,Ln=0;yn>=f?Ln=fn>=f&&fn<=c?fn:h:Wt===v&&yn>=g?Ln=fn>=g&&fn<=b?fn:v:yn>=m?Ln=fn>=m&&fn<=y?fn:p:Wt===w&&yn>=w?Ln=w:yn>=u?Ln=u:Wt===S&&yn>=S?Ln=S:Wt===_&&yn>=_&&(Ln=_),Ln>=fn&&(Ln=fn,an=!0);var Hn=Sn+Ln;if(zt.rangebreaks&&Ln>0){for(var Wn=0,Kn=0;Kn<84;Kn++){var nr=(Kn+.5)/84;zt.maskBreaks(Sn*(1-nr)+nr*Hn)!==P&&Wn++}(Ln*=Wn/84)||(kn[tn].drop=!0),an&&fn>w&&(Ln=fn)}(Ln>0||tn===0)&&(kn[tn].periodX=Sn+Ln/2)}}(Nt,Se,Se._definedDelta),Se.rangebreaks){var nn=Se._id.charAt(0)==="y",zn=1;Se.tickmode==="auto"&&(zn=Se.tickfont?Se.tickfont.size:12);var _n=NaN;for(Ke=Nt.length-1;Ke>-1;Ke--)if(Nt[Ke].drop)Nt.splice(Ke,1);else{Nt[Ke].value=We(Nt[Ke].value,Se);var Cn=Se.c2p(Nt[Ke].value);(nn?_n>Cn-zn:_n<Cn+zn)?Nt.splice(pt?Ke+1:Ke,1):_n=Cn}}Ge(Se)&&Math.abs(ht[1]-ht[0])===360&&Nt.pop(),Se._tmax=(Nt[Nt.length-1]||{}).value,Se._prevDateHead="",Se._inCalcTicks=!0;var Un,Gn,ar=function(kn){kn.text="",Se._prevDateHead=st};for(Nt=Nt.concat(Gt),Ke=0;Ke<Nt.length;Ke++){var yr=Nt[Ke].minor,$t=Nt[Ke].value;yr?jt.push({x:$t,minor:!0}):(st=Se._prevDateHead,Un=W.tickText(Se,$t,!1,Nt[Ke].simpleLabel),(Gn=Nt[Ke].periodX)!==void 0&&(Un.periodX=Gn,(Gn>Pt||Gn<gt)&&(Gn>Pt&&(Un.periodX=Pt),Gn<gt&&(Un.periodX=gt),ar(Un))),Nt[Ke].skipLabel&&ar(Un),Ht.push(Un))}return Ht=Ht.concat(jt),Se._inCalcTicks=!1,At&&Ht.length&&(Ht[0].noTick=!0),Ht};var Te=[2,5,10],Q=[1,2,3,6,12],oe=[1,2,5,10,15,30],ce=[1,2,3,7,14],me=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ae=[-.301,0,.301,.699,1],Ie=[15,30,45,90,180];function Ce(Se,ze,Ke){return ze*x.roundUp(Se/ze,Ke)}function Re(Se){var ze=Se.dtick;if(Se._tickexponent=0,A(ze)||typeof ze=="string"||(ze=1),Se.type!=="category"&&Se.type!=="multicategory"||(Se._tickround=null),Se.type==="date"){var Ke=Se.r2l(Se.tick0),st=Se.l2r(Ke).replace(/(^-|i)/g,""),ct=st.length;if(String(ze).charAt(0)==="M")ct>10||st.substr(5)!=="01-01"?Se._tickround="d":Se._tickround=+ze.substr(1)%12==0?"y":"m";else if(ze>=u&&ct<=10||ze>=15*u)Se._tickround="d";else if(ze>=E&&ct<=16||ze>=_)Se._tickround="M";else if(ze>=L&&ct<=19||ze>=E)Se._tickround="S";else{var Tt=Se.l2r(Ke+ze).replace(/^-/,"").length;Se._tickround=Math.max(ct,Tt)-20,Se._tickround<0&&(Se._tickround=4)}}else if(A(ze)||ze.charAt(0)==="L"){var Et=Se.range.map(Se.r2d||Number);A(ze)||(ze=Number(ze.substr(1))),Se._tickround=2-Math.floor(Math.log(ze)/Math.LN10+.01);var At=Math.max(Math.abs(Et[0]),Math.abs(Et[1])),ht=Math.floor(Math.log(At)/Math.LN10+.01),pt=Se.minexponent===void 0?3:Se.minexponent;Math.abs(ht)>pt&&(_e(Se.exponentformat)&&!Fe(ht)?Se._tickexponent=3*Math.round((ht-1)/3):Se._tickexponent=ht)}else Se._tickround=null}function le(Se,ze,Ke){var st=Se.tickfont||{};return{x:ze,dx:0,dy:0,text:Ke||"",fontSize:st.size,font:st.family,fontColor:st.color}}W.autoTicks=function(Se,ze,Ke){var st;function ct(Pt){return Math.pow(Pt,Math.floor(Math.log(ze)/Math.LN10))}if(Se.type==="date"){Se.tick0=x.dateTick0(Se.calendar,0);var Tt=2*ze;if(Tt>h)ze/=h,st=ct(10),Se.dtick="M"+12*Ce(ze,st,Te);else if(Tt>p)ze/=p,Se.dtick="M"+Ce(ze,1,Q);else if(Tt>u){if(Se.dtick=Ce(ze,u,Se._hasDayOfWeekBreaks?[1,2,7,14]:ce),!Ke){var Et=W.getTickFormat(Se),At=Se.ticklabelmode==="period";At&&(Se._rawTick0=Se.tick0),/%[uVW]/.test(Et)?Se.tick0=x.dateTick0(Se.calendar,2):Se.tick0=x.dateTick0(Se.calendar,1),At&&(Se._dowTick0=Se.tick0)}}else Tt>_?Se.dtick=Ce(ze,_,Q):Tt>E?Se.dtick=Ce(ze,E,oe):Tt>L?Se.dtick=Ce(ze,L,oe):(st=ct(10),Se.dtick=Ce(ze,st,Te))}else if(Se.type==="log"){Se.tick0=0;var ht=x.simpleMap(Se.range,Se.r2l);if(Se._isMinor&&(ze*=1.5),ze>.7)Se.dtick=Math.ceil(ze);else if(Math.abs(ht[1]-ht[0])<1){var pt=1.5*Math.abs((ht[1]-ht[0])/ze);ze=Math.abs(Math.pow(10,ht[1])-Math.pow(10,ht[0]))/pt,st=ct(10),Se.dtick="L"+Ce(ze,st,Te)}else Se.dtick=ze>.3?"D2":"D1"}else Se.type==="category"||Se.type==="multicategory"?(Se.tick0=0,Se.dtick=Math.ceil(Math.max(ze,1))):Ge(Se)?(Se.tick0=0,st=1,Se.dtick=Ce(ze,st,Ie)):(Se.tick0=0,st=ct(10),Se.dtick=Ce(ze,st,Te));if(Se.dtick===0&&(Se.dtick=1),!A(Se.dtick)&&typeof Se.dtick!="string"){var gt=Se.dtick;throw Se.dtick=1,"ax.dtick error: "+String(gt)}},W.tickIncrement=function(Se,ze,Ke,st){var ct=Ke?-1:1;if(A(ze))return x.increment(Se,ct*ze);var Tt=ze.charAt(0),Et=ct*Number(ze.substr(1));if(Tt==="M")return x.incrementMonth(Se,Et,st);if(Tt==="L")return Math.log(Math.pow(10,Se)+Et)/Math.LN10;if(Tt==="D"){var At=ze==="D2"?Ae:me,ht=Se+.01*ct,pt=x.roundUp(x.mod(ht,1),At,Ke);return Math.floor(ht)+Math.log(k.round(Math.pow(10,pt),1))/Math.LN10}throw"unrecognized dtick "+String(ze)},W.tickFirst=function(Se,ze){var Ke=Se.r2l||Number,st=x.simpleMap(Se.range,Ke,void 0,void 0,ze),ct=st[1]<st[0],Tt=ct?Math.floor:Math.ceil,Et=se(st)[0],At=Se.dtick,ht=Ke(Se.tick0);if(A(At)){var pt=Tt((Et-ht)/At)*At+ht;return Se.type!=="category"&&Se.type!=="multicategory"||(pt=x.constrain(pt,0,Se._categories.length-1)),pt}var gt=At.charAt(0),Pt=Number(At.substr(1));if(gt==="M"){for(var Ot,Ht,jt,Nt=0,Gt=ht;Nt<10;){if(((Ot=W.tickIncrement(Gt,At,ct,Se.calendar))-Et)*(Gt-Et)<=0)return ct?Math.min(Gt,Ot):Math.max(Gt,Ot);Ht=(Et-(Gt+Ot)/2)/(Ot-Gt),jt=gt+(Math.abs(Math.round(Ht))||1)*Pt,Gt=W.tickIncrement(Gt,jt,Ht<0?!ct:ct,Se.calendar),Nt++}return x.error("tickFirst did not converge",Se),Gt}if(gt==="L")return Math.log(Tt((Math.pow(10,Et)-ht)/Pt)*Pt+ht)/Math.LN10;if(gt==="D"){var un=At==="D2"?Ae:me,pn=x.roundUp(x.mod(Et,1),un,ct);return Math.floor(Et)+Math.log(k.round(Math.pow(10,pn),1))/Math.LN10}throw"unrecognized dtick "+String(At)},W.tickText=function(Se,ze,Ke,st){var ct,Tt=le(Se,ze),Et=Se.tickmode==="array",At=Ke||Et,ht=Se.type,pt=ht==="category"?Se.d2l_noadd:Se.d2l;if(Et&&Array.isArray(Se.ticktext)){var gt=x.simpleMap(Se.range,Se.r2l),Pt=(Math.abs(gt[1]-gt[0])-(Se._lBreaks||0))/1e4;for(ct=0;ct<Se.ticktext.length&&!(Math.abs(ze-pt(Se.tickvals[ct]))<Pt);ct++);if(ct<Se.ticktext.length)return Tt.text=String(Se.ticktext[ct]),Tt}function Ot(Nt){if(Nt===void 0)return!0;if(Ke)return Nt==="none";var Gt={first:Se._tmin,last:Se._tmax}[Nt];return Nt!=="all"&&ze!==Gt}var Ht=Ke?"never":Se.exponentformat!=="none"&&Ot(Se.showexponent)?"hide":"";if(ht==="date"?function(Nt,Gt,un,pn){var Kt=Nt._tickround,wn=un&&Nt.hoverformat||W.getTickFormat(Nt);pn&&(Kt=A(Kt)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Kt]);var Bn,vn=x.formatDate(Gt.x,wn,Kt,Nt._dateFormat,Nt.calendar,Nt._extraFormat),cn=vn.indexOf(`
`);if(cn!==-1&&(Bn=vn.substr(cn+1),vn=vn.substr(0,cn)),pn&&(vn==="00:00:00"||vn==="00:00"?(vn=Bn,Bn=""):vn.length===8&&(vn=vn.replace(/:00$/,""))),Bn)if(un)Kt==="d"?vn+=", "+Bn:vn=Bn+(vn?", "+vn:"");else if(Nt._inCalcTicks&&Nt._prevDateHead===Bn){var dn=Be(Nt),sn=Nt._trueSide||Nt.side;(!dn&&sn==="top"||dn&&sn==="bottom")&&(vn+="<br> ")}else Nt._prevDateHead=Bn,vn+="<br>"+Bn;Gt.text=vn}(Se,Tt,Ke,At):ht==="log"?function(Nt,Gt,un,pn,Kt){var wn=Nt.dtick,Bn=Gt.x,vn=Nt.tickformat,cn=typeof wn=="string"&&wn.charAt(0);if(Kt==="never"&&(Kt=""),pn&&cn!=="L"&&(wn="L3",cn="L"),vn||cn==="L")Gt.text=Ve(Math.pow(10,Bn),Nt,Kt,pn);else if(A(wn)||cn==="D"&&x.mod(Bn+.01,1)<.1){var dn=Math.round(Bn),sn=Math.abs(dn),hn=Nt.exponentformat;hn==="power"||_e(hn)&&Fe(dn)?(Gt.text=dn===0?1:dn===1?"10":"10<sup>"+(dn>1?"":C)+sn+"</sup>",Gt.fontSize*=1.25):(hn==="e"||hn==="E")&&sn>2?Gt.text="1"+hn+(dn>0?"+":C)+sn:(Gt.text=Ve(Math.pow(10,Bn),Nt,"","fakehover"),wn==="D1"&&Nt._id.charAt(0)==="y"&&(Gt.dy-=Gt.fontSize/6))}else{if(cn!=="D")throw"unrecognized dtick "+String(wn);Gt.text=String(Math.round(Math.pow(10,x.mod(Bn,1)))),Gt.fontSize*=.75}if(Nt.dtick==="D1"){var En=String(Gt.text).charAt(0);En!=="0"&&En!=="1"||(Nt._id.charAt(0)==="y"?Gt.dx-=Gt.fontSize/4:(Gt.dy+=Gt.fontSize/2,Gt.dx+=(Nt.range[1]>Nt.range[0]?1:-1)*Gt.fontSize*(Bn<0?.5:.25)))}}(Se,Tt,0,At,Ht):ht==="category"?function(Nt,Gt){var un=Nt._categories[Math.round(Gt.x)];un===void 0&&(un=""),Gt.text=String(un)}(Se,Tt):ht==="multicategory"?function(Nt,Gt,un){var pn=Math.round(Gt.x),Kt=Nt._categories[pn]||[],wn=Kt[1]===void 0?"":String(Kt[1]),Bn=Kt[0]===void 0?"":String(Kt[0]);un?Gt.text=Bn+" - "+wn:(Gt.text=wn,Gt.text2=Bn)}(Se,Tt,Ke):Ge(Se)?function(Nt,Gt,un,pn,Kt){if(Nt.thetaunit!=="radians"||un)Gt.text=Ve(Gt.x,Nt,Kt,pn);else{var wn=Gt.x/180;if(wn===0)Gt.text="0";else{var Bn=function(cn){function dn(Mn,Rn){return Math.abs(Mn-Rn)<=1e-6}var sn=function(Mn){for(var Rn=1;!dn(Math.round(Mn*Rn)/Rn,Mn);)Rn*=10;return Rn}(cn),hn=cn*sn,En=Math.abs(function Mn(Rn,Nn){return dn(Nn,0)?Rn:Mn(Nn,Rn%Nn)}(hn,sn));return[Math.round(hn/En),Math.round(sn/En)]}(wn);if(Bn[1]>=100)Gt.text=Ve(x.deg2rad(Gt.x),Nt,Kt,pn);else{var vn=Gt.x<0;Bn[1]===1?Bn[0]===1?Gt.text="":Gt.text=Bn[0]+"":Gt.text=["<sup>",Bn[0],"</sup>","","<sub>",Bn[1],"</sub>",""].join(""),vn&&(Gt.text=C+Gt.text)}}}}(Se,Tt,Ke,At,Ht):function(Nt,Gt,un,pn,Kt){Kt==="never"?Kt="":Nt.showexponent==="all"&&Math.abs(Gt.x/Nt.dtick)<1e-6&&(Kt="hide"),Gt.text=Ve(Gt.x,Nt,Kt,pn)}(Se,Tt,0,At,Ht),st||(Se.tickprefix&&!Ot(Se.showtickprefix)&&(Tt.text=Se.tickprefix+Tt.text),Se.ticksuffix&&!Ot(Se.showticksuffix)&&(Tt.text+=Se.ticksuffix)),Se.tickson==="boundaries"||Se.showdividers){var jt=function(Nt){var Gt=Se.l2p(Nt);return Gt>=0&&Gt<=Se._length?Nt:null};Tt.xbnd=[jt(Tt.x-.5),jt(Tt.x+Se.dtick-.5)]}return Tt},W.hoverLabelText=function(Se,ze,Ke){Ke&&(Se=x.extendFlat({},Se,{hoverformat:Ke}));var st=Array.isArray(ze)?ze[0]:ze,ct=Array.isArray(ze)?ze[1]:void 0;if(ct!==void 0&&ct!==st)return W.hoverLabelText(Se,st,Ke)+" - "+W.hoverLabelText(Se,ct,Ke);var Tt=Se.type==="log"&&st<=0,Et=W.tickText(Se,Se.c2l(Tt?-st:st),"hover").text;return Tt?st===0?"0":C+Et:Et};var de=["f","p","n","","m","","k","M","G","T"];function _e(Se){return Se==="SI"||Se==="B"}function Fe(Se){return Se>14||Se<-15}function Ve(Se,ze,Ke,st){var ct=Se<0,Tt=ze._tickround,Et=Ke||ze.exponentformat||"B",At=ze._tickexponent,ht=W.getTickFormat(ze),pt=ze.separatethousands;if(st){var gt={exponentformat:Et,minexponent:ze.minexponent,dtick:ze.showexponent==="none"?ze.dtick:A(Se)&&Math.abs(Se)||1,range:ze.showexponent==="none"?ze.range.map(ze.r2d):[0,Se||1]};Re(gt),Tt=(Number(gt._tickround)||0)+4,At=gt._tickexponent,ze.hoverformat&&(ht=ze.hoverformat)}if(ht)return ze._numFormat(ht)(Se).replace(/-/g,C);var Pt,Ot=Math.pow(10,-Tt)/2;if(Et==="none"&&(At=0),(Se=Math.abs(Se))<Ot)Se="0",ct=!1;else{if(Se+=Ot,At&&(Se*=Math.pow(10,-At),Tt+=At),Tt===0)Se=String(Math.floor(Se));else if(Tt<0){Se=(Se=String(Math.round(Se))).substr(0,Se.length+Tt);for(var Ht=Tt;Ht<0;Ht++)Se+="0"}else{var jt=(Se=String(Se)).indexOf(".")+1;jt&&(Se=Se.substr(0,jt+Tt).replace(/\.?0+$/,""))}Se=x.numSeparate(Se,ze._separators,pt)}return At&&Et!=="hide"&&(_e(Et)&&Fe(At)&&(Et="power"),Pt=At<0?C+-At:Et!=="power"?"+"+At:String(At),Et==="e"||Et==="E"?Se+=Et+Pt:Et==="power"?Se+="10<sup>"+Pt+"</sup>":Et==="B"&&At===9?Se+="B":_e(Et)&&(Se+=de[At/3+5])),ct?C+Se:Se}function He(Se,ze){if(Se){var Ke=Object.keys(N).reduce(function(st,ct){return ze.indexOf(ct)!==-1&&N[ct].forEach(function(Tt){st[Tt]=1}),st},{});Object.keys(Se).forEach(function(st){Ke[st]||(st.length===1?Se[st]=0:delete Se[st])})}}function nt(Se,ze){for(var Ke=[],st={},ct=0;ct<ze.length;ct++){var Tt=ze[ct];st[Tt.text2]?st[Tt.text2].push(Tt.x):st[Tt.text2]=[Tt.x]}for(var Et in st)Ke.push(le(Se,x.interp(st[Et],.5),Et));return Ke}function tt(Se){return Se.periodX!==void 0?Se.periodX:Se.x}function ot(Se){return[Se.text,Se.x,Se.axInfo,Se.font,Se.fontSize,Se.fontColor].join("_")}function dt(Se){var ze=Se.title.font.size,Ke=(Se.title.text.match(s.BR_TAG_ALL)||[]).length;return Se.title.hasOwnProperty("standoff")?Ke?ze*(K+Ke*G):ze*K:Ke?ze*(Ke+1)*G:ze}function kt(Se,ze){var Ke=Se.l2p(ze);return Ke>1&&Ke<Se._length-1}function mt(Se){var ze=k.select(Se),Ke=ze.select(".text-math-group");return Ke.empty()?ze.select("text"):Ke}function wt(Se){return Se._id+".automargin"}function Lt(Se){return wt(Se)+".mirror"}function Ct(Se){return Se._id+".rangeslider"}function It(Se,ze){for(var Ke=0;Ke<ze.length;Ke++)Se.indexOf(ze[Ke])===-1&&Se.push(ze[Ke])}function Ut(Se,ze,Ke){var st,ct,Tt=[],Et=[],At=Se.layout;for(st=0;st<ze.length;st++)Tt.push(W.getFromId(Se,ze[st]));for(st=0;st<Ke.length;st++)Et.push(W.getFromId(Se,Ke[st]));var ht=Object.keys(n),pt=["anchor","domain","overlaying","position","side","tickangle","editType"],gt=["linear","log"];for(st=0;st<ht.length;st++){var Pt=ht[st],Ot=Tt[0][Pt],Ht=Et[0][Pt],jt=!0,Nt=!1,Gt=!1;if(Pt.charAt(0)!=="_"&&typeof Ot!="function"&&pt.indexOf(Pt)===-1){for(ct=1;ct<Tt.length&&jt;ct++){var un=Tt[ct][Pt];Pt==="type"&&gt.indexOf(Ot)!==-1&&gt.indexOf(un)!==-1&&Ot!==un?Nt=!0:un!==Ot&&(jt=!1)}for(ct=1;ct<Et.length&&jt;ct++){var pn=Et[ct][Pt];Pt==="type"&&gt.indexOf(Ht)!==-1&&gt.indexOf(pn)!==-1&&Ht!==pn?Gt=!0:Et[ct][Pt]!==Ht&&(jt=!1)}jt&&(Nt&&(At[Tt[0]._name].type="linear"),Gt&&(At[Et[0]._name].type="linear"),Rt(At,Pt,Tt,Et,Se._fullLayout._dfltTitle))}}for(st=0;st<Se._fullLayout.annotations.length;st++){var Kt=Se._fullLayout.annotations[st];ze.indexOf(Kt.xref)!==-1&&Ke.indexOf(Kt.yref)!==-1&&x.swapAttrs(At.annotations[st],["?"])}}function Rt(Se,ze,Ke,st,ct){var Tt,Et=x.nestedProperty,At=Et(Se[Ke[0]._name],ze).get(),ht=Et(Se[st[0]._name],ze).get();for(ze==="title"&&(At&&At.text===ct.x&&(At.text=ct.y),ht&&ht.text===ct.y&&(ht.text=ct.x)),Tt=0;Tt<Ke.length;Tt++)Et(Se,Ke[Tt]._name+"."+ze).set(ht);for(Tt=0;Tt<st.length;Tt++)Et(Se,st[Tt]._name+"."+ze).set(At)}function Ge(Se){return Se._id==="angularaxis"}function We(Se,ze){for(var Ke=ze._rangebreaks.length,st=0;st<Ke;st++){var ct=ze._rangebreaks[st];if(Se>=ct.min&&Se<ct.max)return ct.max}return Se}function Be(Se){return(Se.ticklabelposition||"").indexOf("inside")!==-1}function Ye(Se,ze){Be(Se._anchorAxis||{})&&Se._hideCounterAxisInsideTickLabels&&Se._hideCounterAxisInsideTickLabels(ze)}function rt(Se,ze,Ke,st){var ct,Tt=Se.anchor==="free"||Se.overlaying!==void 0&&Se.overlaying!==!1?Se.overlaying:Se._id;ct=st?Se.side==="right"?ze:-ze:ze,Tt in Ke||(Ke[Tt]={}),Se.side in Ke[Tt]||(Ke[Tt][Se.side]=0),Ke[Tt][Se.side]+=ct}W.getTickFormat=function(Se){var ze,Ke,st,ct,Tt,Et,At,ht;function pt(Ot){return typeof Ot!="string"?Ot:Number(Ot.replace("M",""))*p}function gt(Ot,Ht){var jt=["L","D"];if(typeof Ot==typeof Ht){if(typeof Ot=="number")return Ot-Ht;var Nt=jt.indexOf(Ot.charAt(0)),Gt=jt.indexOf(Ht.charAt(0));return Nt===Gt?Number(Ot.replace(/(L|D)/g,""))-Number(Ht.replace(/(L|D)/g,"")):Nt-Gt}return typeof Ot=="number"?1:-1}function Pt(Ot,Ht){var jt=Ht[0]===null,Nt=Ht[1]===null,Gt=gt(Ot,Ht[0])>=0,un=gt(Ot,Ht[1])<=0;return(jt||Gt)&&(Nt||un)}if(Se.tickformatstops&&Se.tickformatstops.length>0)switch(Se.type){case"date":case"linear":for(ze=0;ze<Se.tickformatstops.length;ze++)if((st=Se.tickformatstops[ze]).enabled&&(ct=Se.dtick,Tt=st.dtickrange,Et=void 0,At=void 0,ht=void 0,Et=pt||function(Ot){return Ot},At=Tt[0],ht=Tt[1],(!At&&typeof At!="number"||Et(At)<=Et(ct))&&(!ht&&typeof ht!="number"||Et(ht)>=Et(ct)))){Ke=st;break}break;case"log":for(ze=0;ze<Se.tickformatstops.length;ze++)if((st=Se.tickformatstops[ze]).enabled&&Pt(Se.dtick,st.dtickrange)){Ke=st;break}}return Ke?Ke.value:Se.tickformat},W.getSubplots=function(Se,ze){var Ke=Se._fullLayout._subplots,st=Ke.cartesian.concat(Ke.gl2d||[]),ct=ze?W.findSubplotsWithAxis(st,ze):st;return ct.sort(function(Tt,Et){var At=Tt.substr(1).split("y"),ht=Et.substr(1).split("y");return At[0]===ht[0]?+At[1]-+ht[1]:+At[0]-+ht[0]}),ct},W.findSubplotsWithAxis=function(Se,ze){for(var Ke=new RegExp(ze._id.charAt(0)==="x"?"^"+ze._id+"y":ze._id+"$"),st=[],ct=0;ct<Se.length;ct++){var Tt=Se[ct];Ke.test(Tt)&&st.push(Tt)}return st},W.makeClipPaths=function(Se){var ze=Se._fullLayout;if(!ze._hasOnlyLargeSploms){var Ke,st,ct={_offset:0,_length:ze.width,_id:""},Tt={_offset:0,_length:ze.height,_id:""},Et=W.list(Se,"x",!0),At=W.list(Se,"y",!0),ht=[];for(Ke=0;Ke<Et.length;Ke++)for(ht.push({x:Et[Ke],y:Tt}),st=0;st<At.length;st++)Ke===0&&ht.push({x:ct,y:At[st]}),ht.push({x:Et[Ke],y:At[st]});var pt=ze._clips.selectAll(".axesclip").data(ht,function(gt){return gt.x._id+gt.y._id});pt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(gt){return"clip"+ze._uid+gt.x._id+gt.y._id}).append("rect"),pt.exit().remove(),pt.each(function(gt){k.select(this).select("rect").attr({x:gt.x._offset||0,y:gt.y._offset||0,width:gt.x._length||1,height:gt.y._length||1})})}},W.draw=function(Se,ze,Ke){var st=Se._fullLayout;ze==="redraw"&&st._paper.selectAll("g.subplot").each(function(At){var ht=At[0],pt=st._plots[ht];if(pt){var gt=pt.xaxis,Pt=pt.yaxis;pt.xaxislayer.selectAll("."+gt._id+"tick").remove(),pt.yaxislayer.selectAll("."+Pt._id+"tick").remove(),pt.xaxislayer.selectAll("."+gt._id+"tick2").remove(),pt.yaxislayer.selectAll("."+Pt._id+"tick2").remove(),pt.xaxislayer.selectAll("."+gt._id+"divider").remove(),pt.yaxislayer.selectAll("."+Pt._id+"divider").remove(),pt.minorGridlayer&&pt.minorGridlayer.selectAll("path").remove(),pt.gridlayer&&pt.gridlayer.selectAll("path").remove(),pt.zerolinelayer&&pt.zerolinelayer.selectAll("path").remove(),st._infolayer.select(".g-"+gt._id+"title").remove(),st._infolayer.select(".g-"+Pt._id+"title").remove()}});var ct=ze&&ze!=="redraw"?ze:W.listIds(Se),Tt=W.list(Se).filter(function(At){return At.autoshift}).map(function(At){return At.overlaying});ct.map(function(At){var ht=W.getFromId(Se,At);if(ht.tickmode==="sync"&&ht.overlaying){var pt=ct.findIndex(function(gt){return gt===ht.overlaying});pt>=0&&ct.unshift(ct.splice(pt,1).shift())}});var Et={false:{left:0,right:0}};return x.syncOrAsync(ct.map(function(At){return function(){if(At){var ht=W.getFromId(Se,At);Ke||(Ke={}),Ke.axShifts=Et,Ke.overlayingShiftedAx=Tt;var pt=W.drawOne(Se,ht,Ke);return ht._shiftPusher&&rt(ht,ht._fullDepth||0,Et,!0),ht._r=ht.range.slice(),ht._rl=x.simpleMap(ht._r,ht.r2l),pt}}}))},W.drawOne=function(Se,ze,Ke){var st,ct,Tt,Et=(Ke=Ke||{}).axShifts||{},At=Ke.overlayingShiftedAx||[];ze.setScale();var ht=Se._fullLayout,pt=ze._id,gt=pt.charAt(0),Pt=W.counterLetter(pt),Ot=ht._plots[ze._mainSubplot];if(Ot){if(ze._shiftPusher=ze.autoshift||At.indexOf(ze._id)!==-1||At.indexOf(ze.overlaying)!==-1,ze._shiftPusher&ze.anchor==="free"){var Ht=ze.linewidth/2||0;ze.ticks==="inside"&&(Ht+=ze.ticklen),rt(ze,Ht,Et,!0),rt(ze,ze.shift||0,Et,!1)}Ke.skipTitle===!0&&ze._shift!==void 0||(ze._shift=function(Tn,an){return Tn.autoshift?an[Tn.overlaying][Tn.side]:Tn.shift||0}(ze,Et));var jt=Ot[gt+"axislayer"],Nt=ze._mainLinePosition,Gt=Nt+=ze._shift,un=ze._mainMirrorPosition,pn=ze._vals=W.calcTicks(ze),Kt=[ze.mirror,Gt,un].join("_");for(st=0;st<pn.length;st++)pn[st].axInfo=Kt;ze._selections={},ze._tickAngles&&(ze._prevTickAngles=ze._tickAngles),ze._tickAngles={},ze._depth=null;var wn={};if(ze.visible){var Bn,vn,cn=W.makeTransTickFn(ze),dn=W.makeTransTickLabelFn(ze),sn=ze.ticks==="inside",hn=ze.ticks==="outside";if(ze.tickson==="boundaries"){var En=function(Tn,an){var mn,on=[],fn=function(yn,Ln){var Hn=yn.xbnd[Ln];Hn!==null&&on.push(x.extendFlat({},yn,{x:Hn}))};if(an.length){for(mn=0;mn<an.length;mn++)fn(an[mn],0);fn(an[mn-1],1)}return on}(0,pn);vn=W.clipEnds(ze,En),Bn=sn?vn:En}else vn=W.clipEnds(ze,pn),Bn=sn&&ze.ticklabelmode!=="period"?vn:pn;var Mn,Rn=ze._gridVals=vn,Nn=function(Tn,an){var mn,on,fn=[],yn=an.length&&an[an.length-1].x<an[0].x,Ln=function(Wn,Kn){var nr=Wn.xbnd[Kn];nr!==null&&fn.push(x.extendFlat({},Wn,{x:nr}))};if(Tn.showdividers&&an.length){for(mn=0;mn<an.length;mn++){var Hn=an[mn];Hn.text2!==on&&Ln(Hn,yn?1:0),on=Hn.text2}Ln(an[mn-1],yn?0:1)}return fn}(ze,pn);if(!ht._hasOnlyLargeSploms){var Fn=ze._subplotsWith,rr={};for(st=0;st<Fn.length;st++){ct=Fn[st];var $n=(Tt=ht._plots[ct])[Pt+"axis"],mr=$n._mainAxis._id;if(!rr[mr]){rr[mr]=1;var fr=gt==="x"?"M0,"+$n._offset+"v"+$n._length:"M"+$n._offset+",0h"+$n._length;W.drawGrid(Se,ze,{vals:Rn,counterAxis:$n,layer:Tt.gridlayer.select("."+pt),minorLayer:Tt.minorGridlayer.select("."+pt),path:fr,transFn:cn}),W.drawZeroLine(Se,ze,{counterAxis:$n,layer:Tt.zerolinelayer,path:fr,transFn:cn})}}}var Zn=W.getTickSigns(ze),qn=W.getTickSigns(ze,"minor");if(ze.ticks||ze.minor&&ze.minor.ticks){var ur,Zt,nn,zn,_n=W.makeTickPath(ze,Gt,Zn[2]),Cn=W.makeTickPath(ze,Gt,qn[2],{minor:!0});if(ze._anchorAxis&&ze.mirror&&ze.mirror!==!0?(ur=W.makeTickPath(ze,un,Zn[3]),Zt=W.makeTickPath(ze,un,qn[3],{minor:!0}),nn=_n+ur,zn=Cn+Zt):(ur="",Zt="",nn=_n,zn=Cn),ze.showdividers&&hn&&ze.tickson==="boundaries"){var Un={};for(st=0;st<Nn.length;st++)Un[Nn[st].x]=1;Mn=function(Tn){return Un[Tn.x]?ur:nn}}else Mn=function(Tn){return Tn.minor?zn:nn}}if(W.drawTicks(Se,ze,{vals:Bn,layer:jt,path:Mn,transFn:cn}),ze.mirror==="allticks"){var Gn=Object.keys(ze._linepositions||{});for(st=0;st<Gn.length;st++){ct=Gn[st],Tt=ht._plots[ct];var ar=ze._linepositions[ct]||[],yr=ar[0],$t=ar[1],kn=ar[2],zt=W.makeTickPath(ze,yr,kn?Zn[0]:qn[0],{minor:kn})+W.makeTickPath(ze,$t,kn?Zn[1]:qn[1],{minor:kn});W.drawTicks(Se,ze,{vals:Bn,layer:Tt[gt+"axislayer"],path:zt,transFn:cn})}}var Wt=[];if(Wt.push(function(){return W.drawLabels(Se,ze,{vals:pn,layer:jt,plotinfo:Tt,transFn:dn,labelFns:W.makeLabelFns(ze,Gt)})}),ze.type==="multicategory"){var tn={x:2,y:10}[gt];Wt.push(function(){var Tn={x:"height",y:"width"}[gt],an=An()[Tn]+tn+(ze._tickAngles[pt+"tick"]?ze.tickfont.size*G:0);return W.drawLabels(Se,ze,{vals:nt(ze,pn),layer:jt,cls:pt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:cn,labelFns:W.makeLabelFns(ze,Gt+an*Zn[4])})}),Wt.push(function(){return ze._depth=Zn[4]*(An("tick2")[ze.side]-Gt),function(Tn,an,mn){var on=an._id+"divider",fn=mn.vals,yn=mn.layer.selectAll("path."+on).data(fn,ot);yn.exit().remove(),yn.enter().insert("path",":first-child").classed(on,1).classed("crisp",1).call(o.stroke,an.dividercolor).style("stroke-width",r.crispRound(Tn,an.dividerwidth,1)+"px"),yn.attr("transform",mn.transFn).attr("d",mn.path)}(Se,ze,{vals:Nn,layer:jt,path:W.makeTickPath(ze,Gt,Zn[4],{len:ze._depth}),transFn:cn})})}else ze.title.hasOwnProperty("standoff")&&Wt.push(function(){ze._depth=Zn[4]*(An()[ze.side]-Gt)});var Sn=T.getComponentMethod("rangeslider","isVisible")(ze);return Ke.skipTitle||Sn&&ze.side==="bottom"||Wt.push(function(){return function(Tn,an){var mn,on=Tn._fullLayout,fn=an._id,yn=fn.charAt(0),Ln=an.title.font.size;if(an.title.hasOwnProperty("standoff"))mn=an._depth+an.title.standoff+dt(an);else{var Hn=Be(an);if(an.type==="multicategory")mn=an._depth;else{var Wn=1.5*Ln;Hn&&(Wn=.5*Ln,an.ticks==="outside"&&(Wn+=an.ticklen)),mn=10+Wn+(an.linewidth?an.linewidth-1:0)}Hn||(mn+=yn==="x"?an.side==="top"?Ln*(an.showticklabels?1:0):Ln*(an.showticklabels?1.5:.5):an.side==="right"?Ln*(an.showticklabels?1:.5):Ln*(an.showticklabels?.5:0))}var Kn,nr,er,or,ir=W.getPxPosition(Tn,an);if(yn==="x"?(nr=an._offset+an._length/2,er=an.side==="top"?ir-mn:ir+mn):(er=an._offset+an._length/2,nr=an.side==="right"?ir+mn:ir-mn,Kn={rotate:"-90",offset:0}),an.type!=="multicategory"){var lr=an._selections[an._id+"tick"];if(or={selection:lr,side:an.side},lr&&lr.node()&&lr.node().parentNode){var br=r.getTranslate(lr.node().parentNode);or.offsetLeft=br.x,or.offsetTop=br.y}an.title.hasOwnProperty("standoff")&&(or.pad=0)}return an._titleStandoff=mn,t.draw(Tn,fn+"title",{propContainer:an,propName:an._name+".title.text",placeholder:on._dfltTitle[yn],avoid:or,transform:Kn,attributes:{x:nr,y:er,"text-anchor":"middle"}})}(Se,ze)}),Wt.push(function(){var Tn,an,mn,on,fn=ze.side.charAt(0),yn=V[ze.side].charAt(0),Ln=W.getPxPosition(Se,ze),Hn=hn?ze.ticklen:0;(ze.automargin||Sn||ze._shiftPusher)&&(ze.type==="multicategory"?Tn=An("tick2"):(Tn=An(),gt==="x"&&fn==="b"&&(ze._depth=Math.max(Tn.width>0?Tn.bottom-Ln:0,Hn))));var Wn=0,Kn=0;if(ze._shiftPusher&&(Wn=Math.max(Hn,Tn.height>0?fn==="l"?Ln-Tn.left:Tn.right-Ln:0),ze.title.text!==ht._dfltTitle[gt]&&(Kn=(ze._titleStandoff||0)+(ze._titleScoot||0),fn==="l"&&(Kn+=dt(ze))),ze._fullDepth=Math.max(Wn,Kn)),ze.automargin){an={x:0,y:0,r:0,l:0,t:0,b:0};var nr=[0,1],er=typeof ze._shift=="number"?ze._shift:0;if(gt==="x"){if(fn==="b"?an[fn]=ze._depth:(an[fn]=ze._depth=Math.max(Tn.width>0?Ln-Tn.top:0,Hn),nr.reverse()),Tn.width>0){var or=Tn.right-(ze._offset+ze._length);or>0&&(an.xr=1,an.r=or);var ir=ze._offset-Tn.left;ir>0&&(an.xl=0,an.l=ir)}}else if(fn==="l"?(ze._depth=Math.max(Tn.height>0?Ln-Tn.left:0,Hn),an[fn]=ze._depth-er):(ze._depth=Math.max(Tn.height>0?Tn.right-Ln:0,Hn),an[fn]=ze._depth+er,nr.reverse()),Tn.height>0){var lr=Tn.bottom-(ze._offset+ze._length);lr>0&&(an.yb=0,an.b=lr);var br=ze._offset-Tn.top;br>0&&(an.yt=1,an.t=br)}an[Pt]=ze.anchor==="free"?ze.position:ze._anchorAxis.domain[nr[0]],ze.title.text!==ht._dfltTitle[gt]&&(an[fn]+=dt(ze)+(ze.title.standoff||0)),ze.mirror&&ze.anchor!=="free"&&((mn={x:0,y:0,r:0,l:0,t:0,b:0})[yn]=ze.linewidth,ze.mirror&&ze.mirror!==!0&&(mn[yn]+=Hn),ze.mirror===!0||ze.mirror==="ticks"?mn[Pt]=ze._anchorAxis.domain[nr[1]]:ze.mirror!=="all"&&ze.mirror!=="allticks"||(mn[Pt]=[ze._counterDomainMin,ze._counterDomainMax][nr[1]]))}Sn&&(on=T.getComponentMethod("rangeslider","autoMarginOpts")(Se,ze)),typeof ze.automargin=="string"&&(He(an,ze.automargin),He(mn,ze.automargin)),l.autoMargin(Se,wt(ze),an),l.autoMargin(Se,Lt(ze),mn),l.autoMargin(Se,Ct(ze),on)}),x.syncOrAsync(Wt)}}function An(Tn){var an=pt+(Tn||"tick");return wn[an]||(wn[an]=function(mn,on){var fn,yn,Ln,Hn;return mn._selections[on].size()?(fn=1/0,yn=-1/0,Ln=1/0,Hn=-1/0,mn._selections[on].each(function(){var Wn=mt(this),Kn=r.bBox(Wn.node().parentNode);fn=Math.min(fn,Kn.top),yn=Math.max(yn,Kn.bottom),Ln=Math.min(Ln,Kn.left),Hn=Math.max(Hn,Kn.right)})):(fn=0,yn=0,Ln=0,Hn=0),{top:fn,bottom:yn,left:Ln,right:Hn,height:yn-fn,width:Hn-Ln}}(ze,an)),wn[an]}},W.getTickSigns=function(Se,ze){var Ke=Se._id.charAt(0),st={x:"top",y:"right"}[Ke],ct=Se.side===st?1:-1,Tt=[-1,1,ct,-ct];return(ze?(Se.minor||{}).ticks:Se.ticks)!=="inside"==(Ke==="x")&&(Tt=Tt.map(function(Et){return-Et})),Se.side&&Tt.push({l:-1,t:-1,r:1,b:1}[Se.side.charAt(0)]),Tt},W.makeTransTickFn=function(Se){return Se._id.charAt(0)==="x"?function(ze){return d(Se._offset+Se.l2p(ze.x),0)}:function(ze){return d(0,Se._offset+Se.l2p(ze.x))}},W.makeTransTickLabelFn=function(Se){var ze=function(ct){var Tt=ct.ticklabelposition||"",Et=function(un){return Tt.indexOf(un)!==-1},At=Et("top"),ht=Et("left"),pt=Et("right"),gt=Et("bottom"),Pt=Et("inside"),Ot=gt||ht||At||pt;if(!Ot&&!Pt)return[0,0];var Ht=ct.side,jt=Ot?(ct.tickwidth||0)/2:0,Nt=3,Gt=ct.tickfont?ct.tickfont.size:12;return(gt||At)&&(jt+=Gt*K,Nt+=(ct.linewidth||0)/2),(ht||pt)&&(jt+=(ct.linewidth||0)/2,Nt+=3),Pt&&Ht==="top"&&(Nt-=Gt*(1-K)),(ht||At)&&(jt=-jt),Ht!=="bottom"&&Ht!=="right"||(Nt=-Nt),[Ot?jt:0,Pt?Nt:0]}(Se),Ke=ze[0],st=ze[1];return Se._id.charAt(0)==="x"?function(ct){return d(Ke+Se._offset+Se.l2p(tt(ct)),st)}:function(ct){return d(st,Ke+Se._offset+Se.l2p(tt(ct)))}},W.makeTickPath=function(Se,ze,Ke,st){st||(st={});var ct=st.minor;if(ct&&!Se.minor)return"";var Tt=st.len!==void 0?st.len:ct?Se.minor.ticklen:Se.ticklen,Et=Se._id.charAt(0),At=(Se.linewidth||1)/2;return Et==="x"?"M0,"+(ze+At*Ke)+"v"+Tt*Ke:"M"+(ze+At*Ke)+",0h"+Tt*Ke},W.makeLabelFns=function(Se,ze,Ke){var st=Se.ticklabelposition||"",ct=function(En){return st.indexOf(En)!==-1},Tt=ct("top"),Et=ct("left"),At=ct("right"),ht=ct("bottom")||Et||Tt||At,pt=ct("inside"),gt=st==="inside"&&Se.ticks==="inside"||!pt&&Se.ticks==="outside"&&Se.tickson!=="boundaries",Pt=0,Ot=0,Ht=gt?Se.ticklen:0;if(pt?Ht*=-1:ht&&(Ht=0),gt&&(Pt+=Ht,Ke)){var jt=x.deg2rad(Ke);Pt=Ht*Math.cos(jt)+1,Ot=Ht*Math.sin(jt)}Se.showticklabels&&(gt||Se.showline)&&(Pt+=.2*Se.tickfont.size);var Nt,Gt,un,pn,Kt,wn={labelStandoff:Pt+=(Se.linewidth||1)/2*(pt?-1:1),labelShift:Ot},Bn=0,vn=Se.side,cn=Se._id.charAt(0),dn=Se.tickangle;if(cn==="x")pn=(Kt=!pt&&vn==="bottom"||pt&&vn==="top")?1:-1,pt&&(pn*=-1),Nt=Ot*pn,Gt=ze+Pt*pn,un=Kt?1:-.2,Math.abs(dn)===90&&(pt?un+=j:un=dn===-90&&vn==="bottom"?K:dn===90&&vn==="top"?j:.5,Bn=j/2*(dn/90)),wn.xFn=function(En){return En.dx+Nt+Bn*En.fontSize},wn.yFn=function(En){return En.dy+Gt+En.fontSize*un},wn.anchorFn=function(En,Mn){if(ht){if(Et)return"end";if(At)return"start"}return A(Mn)&&Mn!==0&&Mn!==180?Mn*pn<0!==pt?"end":"start":"middle"},wn.heightFn=function(En,Mn,Rn){return Mn<-60||Mn>60?-.5*Rn:Se.side==="top"!==pt?-Rn:0};else if(cn==="y"){if(pn=(Kt=!pt&&vn==="left"||pt&&vn==="right")?1:-1,pt&&(pn*=-1),Nt=Pt,Gt=Ot*pn,un=0,pt||Math.abs(dn)!==90||(un=dn===-90&&vn==="left"||dn===90&&vn==="right"?K:.5),pt){var sn=A(dn)?+dn:0;if(sn!==0){var hn=x.deg2rad(sn);Bn=Math.abs(Math.sin(hn))*K*pn,un=0}}wn.xFn=function(En){return En.dx+ze-(Nt+En.fontSize*un)*pn+Bn*En.fontSize},wn.yFn=function(En){return En.dy+Gt+En.fontSize*j},wn.anchorFn=function(En,Mn){return A(Mn)&&Math.abs(Mn)===90?"middle":Kt?"end":"start"},wn.heightFn=function(En,Mn,Rn){return Se.side==="right"&&(Mn*=-1),Mn<-30?-Rn:Mn<30?-.5*Rn:0}}return wn},W.drawTicks=function(Se,ze,Ke){Ke=Ke||{};var st=ze._id+"tick",ct=[].concat(ze.minor&&ze.minor.ticks?Ke.vals.filter(function(Et){return Et.minor&&!Et.noTick}):[]).concat(ze.ticks?Ke.vals.filter(function(Et){return!Et.minor&&!Et.noTick}):[]),Tt=Ke.layer.selectAll("path."+st).data(ct,ot);Tt.exit().remove(),Tt.enter().append("path").classed(st,1).classed("ticks",1).classed("crisp",Ke.crisp!==!1).each(function(Et){return o.stroke(k.select(this),Et.minor?ze.minor.tickcolor:ze.tickcolor)}).style("stroke-width",function(Et){return r.crispRound(Se,Et.minor?ze.minor.tickwidth:ze.tickwidth,1)+"px"}).attr("d",Ke.path).style("display",null),Ye(ze,[H]),Tt.attr("transform",Ke.transFn)},W.drawGrid=function(Se,ze,Ke){if(Ke=Ke||{},ze.tickmode!=="sync"){var st=ze._id+"grid",ct=ze.minor&&ze.minor.showgrid,Tt=ct?Ke.vals.filter(function(un){return un.minor}):[],Et=ze.showgrid?Ke.vals.filter(function(un){return!un.minor}):[],At=Ke.counterAxis;if(At&&W.shouldShowZeroLine(Se,ze,At))for(var ht=ze.tickmode==="array",pt=0;pt<Et.length;pt++){var gt=Et[pt].x;if(ht?!gt:Math.abs(gt)<ze.dtick/100){if(Et=Et.slice(0,pt).concat(Et.slice(pt+1)),!ht)break;pt--}}ze._gw=r.crispRound(Se,ze.gridwidth,1);for(var Pt=ct?r.crispRound(Se,ze.minor.gridwidth,1):0,Ot=Ke.layer,Ht=Ke.minorLayer,jt=1;jt>=0;jt--){var Nt=jt?Ot:Ht;if(Nt){var Gt=Nt.selectAll("path."+st).data(jt?Et:Tt,ot);Gt.exit().remove(),Gt.enter().append("path").classed(st,1).classed("crisp",Ke.crisp!==!1),Gt.attr("transform",Ke.transFn).attr("d",Ke.path).each(function(un){return o.stroke(k.select(this),un.minor?ze.minor.gridcolor:ze.gridcolor||"#ddd")}).style("stroke-dasharray",function(un){return r.dashStyle(un.minor?ze.minor.griddash:ze.griddash,un.minor?ze.minor.gridwidth:ze.gridwidth)}).style("stroke-width",function(un){return(un.minor?Pt:ze._gw)+"px"}).style("display",null),typeof Ke.path=="function"&&Gt.attr("d",Ke.path)}}Ye(ze,[U,z])}},W.drawZeroLine=function(Se,ze,Ke){Ke=Ke||Ke;var st=ze._id+"zl",ct=W.shouldShowZeroLine(Se,ze,Ke.counterAxis),Tt=Ke.layer.selectAll("path."+st).data(ct?[{x:0,id:ze._id}]:[]);Tt.exit().remove(),Tt.enter().append("path").classed(st,1).classed("zl",1).classed("crisp",Ke.crisp!==!1).each(function(){Ke.layer.selectAll("path").sort(function(Et,At){return ee(Et.id,At.id)})}),Tt.attr("transform",Ke.transFn).attr("d",Ke.path).call(o.stroke,ze.zerolinecolor||o.defaultLine).style("stroke-width",r.crispRound(Se,ze.zerolinewidth,ze._gw||1)+"px").style("display",null),Ye(ze,[I])},W.drawLabels=function(Se,ze,Ke){Ke=Ke||{};var st=Se._fullLayout,ct=ze._id,Tt=ct.charAt(0),Et=Ke.cls||ct+"tick",At=Ke.vals.filter(function(pn){return pn.text}),ht=Ke.labelFns,pt=Ke.secondary?0:ze.tickangle,gt=(ze._prevTickAngles||{})[Et],Pt=Ke.layer.selectAll("g."+Et).data(ze.showticklabels?At:[],ot),Ot=[];function Ht(pn,Kt){pn.each(function(wn){var Bn=k.select(this),vn=Bn.select(".text-math-group"),cn=ht.anchorFn(wn,Kt),dn=Ke.transFn.call(Bn.node(),wn)+(A(Kt)&&+Kt!=0?" rotate("+Kt+","+ht.xFn(wn)+","+(ht.yFn(wn)-wn.fontSize/2)+")":""),sn=s.lineCount(Bn),hn=G*wn.fontSize,En=ht.heightFn(wn,A(Kt)?+Kt:0,(sn-1)*hn);if(En&&(dn+=d(0,En)),vn.empty()){var Mn=Bn.select("text");Mn.attr({transform:dn,"text-anchor":cn}),Mn.style("opacity",1),ze._adjustTickLabelsOverflow&&ze._adjustTickLabelsOverflow()}else{var Rn=r.bBox(vn.node()).width*{end:-.5,start:.5}[cn];vn.attr("transform",dn+d(Rn,0))}})}Pt.enter().append("g").classed(Et,1).append("text").attr("text-anchor","middle").each(function(pn){var Kt=k.select(this),wn=Se._promises.length;Kt.call(s.positionText,ht.xFn(pn),ht.yFn(pn)).call(r.font,pn.font,pn.fontSize,pn.fontColor).text(pn.text).call(s.convertToTspans,Se),Se._promises[wn]?Ot.push(Se._promises.pop().then(function(){Ht(Kt,pt)})):Ht(Kt,pt)}),Ye(ze,[F]),Pt.exit().remove(),Ke.repositionOnUpdate&&Pt.each(function(pn){k.select(this).select("text").call(s.positionText,ht.xFn(pn),ht.yFn(pn))}),ze._adjustTickLabelsOverflow=function(){var pn=ze.ticklabeloverflow;if(pn&&pn!=="allow"){var Kt=pn.indexOf("hide")!==-1,wn=ze._id.charAt(0)==="x",Bn=0,vn=wn?Se._fullLayout.width:Se._fullLayout.height;if(pn.indexOf("domain")!==-1){var cn=x.simpleMap(ze.range,ze.r2l);Bn=ze.l2p(cn[0])+ze._offset,vn=ze.l2p(cn[1])+ze._offset}var dn=Math.min(Bn,vn),sn=Math.max(Bn,vn),hn=ze.side,En=1/0,Mn=-1/0;for(var Rn in Pt.each(function(rr){var $n=k.select(this);if($n.select(".text-math-group").empty()){var mr=r.bBox($n.node()),fr=0;wn?(mr.right>sn||mr.left<dn)&&(fr=1):(mr.bottom>sn||mr.top+(ze.tickangle?0:rr.fontSize/4)<dn)&&(fr=1);var Zn=$n.select("text");fr?Kt&&Zn.style("opacity",0):(Zn.style("opacity",1),En=hn==="bottom"||hn==="right"?Math.min(En,wn?mr.top:mr.left):-1/0,Mn=hn==="top"||hn==="left"?Math.max(Mn,wn?mr.bottom:mr.right):1/0)}}),st._plots){var Nn=st._plots[Rn];if(ze._id===Nn.xaxis._id||ze._id===Nn.yaxis._id){var Fn=wn?Nn.yaxis:Nn.xaxis;Fn&&(Fn["_visibleLabelMin_"+ze._id]=En,Fn["_visibleLabelMax_"+ze._id]=Mn)}}}},ze._hideCounterAxisInsideTickLabels=function(pn){var Kt=ze._id.charAt(0)==="x",wn=[];for(var Bn in st._plots){var vn=st._plots[Bn];ze._id!==vn.xaxis._id&&ze._id!==vn.yaxis._id||wn.push(Kt?vn.yaxis:vn.xaxis)}wn.forEach(function(cn,dn){cn&&Be(cn)&&(pn||[I,z,U,H,F]).forEach(function(sn){var hn=sn.K==="tick"&&sn.L==="text"&&ze.ticklabelmode==="period",En=st._plots[ze._mainSubplot];(sn.K===I.K?En.zerolinelayer.selectAll("."+ze._id+"zl"):sn.K===z.K?En.minorGridlayer.selectAll("."+ze._id):sn.K===U.K?En.gridlayer.selectAll("."+ze._id):En[ze._id.charAt(0)+"axislayer"]).each(function(){var Mn=k.select(this);sn.L&&(Mn=Mn.selectAll(sn.L)),Mn.each(function(Rn){var Nn=ze.l2p(hn?tt(Rn):Rn.x)+ze._offset,Fn=k.select(this);Nn<ze["_visibleLabelMax_"+cn._id]&&Nn>ze["_visibleLabelMin_"+cn._id]?Fn.style("display","none"):sn.K!=="tick"||dn||Fn.style("display",null)})})})})},Ht(Pt,gt+1?gt:pt);var jt=null;ze._selections&&(ze._selections[Et]=Pt);var Nt=[function(){return Ot.length&&Promise.all(Ot)}];ze.automargin&&st._redrawFromAutoMarginCount&&gt===90?(jt=90,Nt.push(function(){Ht(Pt,gt)})):Nt.push(function(){if(Ht(Pt,pt),At.length&&Tt==="x"&&!A(pt)&&(ze.type!=="log"||String(ze.dtick).charAt(0)!=="D")){jt=0;var pn,Kt=0,wn=[];if(Pt.each(function($n){Kt=Math.max(Kt,$n.fontSize);var mr=ze.l2p($n.x),fr=mt(this),Zn=r.bBox(fr.node());wn.push({top:0,bottom:10,height:10,left:mr-Zn.width/2,right:mr+Zn.width/2+2,width:Zn.width+2})}),ze.tickson!=="boundaries"&&!ze.showdividers||Ke.secondary){var Bn=At.length,vn=Math.abs((At[Bn-1].x-At[0].x)*ze._m)/(Bn-1),cn=ze.ticklabelposition||"",dn=function($n){return cn.indexOf($n)!==-1},sn=dn("top"),hn=dn("left"),En=dn("right"),Mn=dn("bottom")||hn||sn||En?(ze.tickwidth||0)+6:0,Rn=vn<2.5*Kt||ze.type==="multicategory"||ze._name==="realaxis";for(pn=0;pn<wn.length-1;pn++)if(x.bBoxIntersect(wn[pn],wn[pn+1],Mn)){jt=Rn?90:30;break}}else{var Nn=2;for(ze.ticks&&(Nn+=ze.tickwidth/2),pn=0;pn<wn.length;pn++){var Fn=At[pn].xbnd,rr=wn[pn];if(Fn[0]!==null&&rr.left-ze.l2p(Fn[0])<Nn||Fn[1]!==null&&ze.l2p(Fn[1])-rr.right<Nn){jt=90;break}}}jt&&Ht(Pt,jt)}}),ze._tickAngles&&Nt.push(function(){ze._tickAngles[Et]=jt===null?A(pt)?pt:0:jt});var Gt=ze._anchorAxis;Gt&&Gt.autorange&&Be(ze)&&!re(st,ze._id)&&(st._insideTickLabelsAutorange||(st._insideTickLabelsAutorange={}),st._insideTickLabelsAutorange[Gt._name+".autorange"]=Gt.autorange,Nt.push(function(){Pt.each(function(pn,Kt){var wn=mt(this);wn.select(".text-math-group").empty()&&(ze._vals[Kt].bb=r.bBox(wn.node()))})}));var un=x.syncOrAsync(Nt);return un&&un.then&&Se._promises.push(un),un},W.getPxPosition=function(Se,ze){var Ke,st=Se._fullLayout._size,ct=ze._id.charAt(0),Tt=ze.side;return ze.anchor!=="free"?Ke=ze._anchorAxis:ct==="x"?Ke={_offset:st.t+(1-(ze.position||0))*st.h,_length:0}:ct==="y"&&(Ke={_offset:st.l+(ze.position||0)*st.w+ze._shift,_length:0}),Tt==="top"||Tt==="left"?Ke._offset:Tt==="bottom"||Tt==="right"?Ke._offset+Ke._length:void 0},W.shouldShowZeroLine=function(Se,ze,Ke){var st=x.simpleMap(ze.range,ze.r2l);return st[0]*st[1]<=0&&ze.zeroline&&(ze.type==="linear"||ze.type==="-")&&!(ze.rangebreaks&&ze.maskBreaks(0)===P)&&(kt(ze,0)||!function(ct,Tt,Et,At){var ht=Et._mainAxis;if(ht){var pt=ct._fullLayout,gt=Tt._id.charAt(0),Pt=W.counterLetter(Tt._id),Ot=Tt._offset+(Math.abs(At[0])<Math.abs(At[1])==(gt==="x")?0:Tt._length),Ht=pt._plots[Et._mainSubplot];if(!(Ht.mainplotinfo||Ht).overlays.length)return un(Et);for(var jt=W.list(ct,Pt),Nt=0;Nt<jt.length;Nt++){var Gt=jt[Nt];if(Gt._mainAxis===ht&&un(Gt))return!0}}function un(pn){if(!pn.showline||!pn.linewidth)return!1;var Kt=Math.max((pn.linewidth+Tt.zerolinewidth)/2,1);function wn(cn){return typeof cn=="number"&&Math.abs(cn-Ot)<Kt}if(wn(pn._mainLinePosition)||wn(pn._mainMirrorPosition))return!0;var Bn=pn._linepositions||{};for(var vn in Bn)if(wn(Bn[vn][0])||wn(Bn[vn][1]))return!0}}(Se,ze,Ke,st)||function(ct,Tt){for(var Et=ct._fullData,At=Tt._mainSubplot,ht=Tt._id.charAt(0),pt=0;pt<Et.length;pt++){var gt=Et[pt];if(gt.visible===!0&&gt.xaxis+gt.yaxis===At&&(T.traceIs(gt,"bar-like")&&gt.orientation==={x:"h",y:"v"}[ht]||gt.fill&&gt.fill.charAt(gt.fill.length-1)===ht))return!0}return!1}(Se,ze))},W.clipEnds=function(Se,ze){return ze.filter(function(Ke){return kt(Se,Ke.x)})},W.allowAutoMargin=function(Se){for(var ze=W.list(Se,"",!0),Ke=0;Ke<ze.length;Ke++){var st=ze[Ke];st.automargin&&(l.allowAutoMargin(Se,wt(st)),st.mirror&&l.allowAutoMargin(Se,Lt(st))),T.getComponentMethod("rangeslider","isVisible")(st)&&l.allowAutoMargin(Se,Ct(st))}},W.swap=function(Se,ze){for(var Ke=function(ct,Tt){var Et,At,ht=[];for(Et=0;Et<Tt.length;Et++){var pt=[],gt=ct._fullData[Tt[Et]].xaxis,Pt=ct._fullData[Tt[Et]].yaxis;if(gt&&Pt){for(At=0;At<ht.length;At++)ht[At].x.indexOf(gt)===-1&&ht[At].y.indexOf(Pt)===-1||pt.push(At);if(pt.length){var Ot,Ht=ht[pt[0]];if(pt.length>1)for(At=1;At<pt.length;At++)Ot=ht[pt[At]],It(Ht.x,Ot.x),It(Ht.y,Ot.y);It(Ht.x,[gt]),It(Ht.y,[Pt])}else ht.push({x:[gt],y:[Pt]})}}return ht}(Se,ze),st=0;st<Ke.length;st++)Ut(Se,Ke[st].x,Ke[st].y)}},4322:function($,R,e){var k=e(92770),A=e(71828),l=e(50606).BADNUM,T=A.isArrayOrTypedArray,x=A.isDateTime,d=A.cleanNumber,s=Math.round;function t(r,n){return n?k(r):typeof r=="number"}function o(r){return Math.max(1,(r-1)/1e3)}$.exports=function(r,n,a){var i=r,c=a.noMultiCategory;if(T(i)&&!i.length)return"-";if(!c&&function(g){return T(g[0])&&T(g[1])}(i))return"multicategory";if(c&&Array.isArray(i[0])){for(var h=[],f=0;f<i.length;f++)if(T(i[f]))for(var b=0;b<i[f].length;b++)h.push(i[f][b]);i=h}if(function(g,y){for(var p=g.length,m=o(p),w=0,u=0,S={},_=0;_<p;_+=m){var E=g[s(_)],L=String(E);S[L]||(S[L]=1,x(E,y)&&w++,k(E)&&u++)}return w>2*u}(i,n))return"date";var v=a.autotypenumbers!=="strict";return function(g,y){for(var p=g.length,m=o(p),w=0,u=0,S={},_=0;_<p;_+=m){var E=g[s(_)],L=String(E);if(!S[L]){S[L]=1;var C=typeof E;C==="boolean"?u++:(y?d(E)!==l:C==="number")?w++:C==="string"&&u++}}return u>2*w}(i,v)?"category":function(g,y){for(var p=g.length,m=0;m<p;m++)if(t(g[m],y))return!0;return!1}(i,v)?"linear":"-"}},71453:function($,R,e){var k=e(92770),A=e(73972),l=e(71828),T=e(44467),x=e(85501),d=e(13838),s=e(26218),t=e(38701),o=e(96115),r=e(89426),n=e(15258),a=e(92128),i=e(21994),c=e(85555).WEEKDAY_PATTERN,h=e(85555).HOUR_PATTERN;function f(g,y,p){function m(P,I){return l.coerce(g,y,d.rangebreaks,P,I)}if(m("enabled")){var w=m("bounds");if(w&&w.length>=2){var u,S,_="";if(w.length===2){for(u=0;u<2;u++)if(S=v(w[u])){_=c;break}}var E=m("pattern",_);if(E===c)for(u=0;u<2;u++)(S=v(w[u]))&&(y.bounds[u]=w[u]=S-1);if(E)for(u=0;u<2;u++)switch(S=w[u],E){case c:if(!k(S)||(S=+S)!==Math.floor(S)||S<0||S>=7)return void(y.enabled=!1);y.bounds[u]=w[u]=S;break;case h:if(!k(S)||(S=+S)<0||S>24)return void(y.enabled=!1);y.bounds[u]=w[u]=S}if(p.autorange===!1){var L=p.range;if(L[0]<L[1]){if(w[0]<L[0]&&w[1]>L[1])return void(y.enabled=!1)}else if(w[0]>L[0]&&w[1]<L[1])return void(y.enabled=!1)}}else{var C=m("values");if(!C||!C.length)return void(y.enabled=!1);m("dvalue")}}}$.exports=function(g,y,p,m,w){var u,S=m.letter,_=m.font||{},E=m.splomStash||{},L=p("visible",!m.visibleDflt),C=y._template||{},P=y.type||C.type||"-";P==="date"&&(A.getComponentMethod("calendars","handleDefaults")(g,y,"calendar",m.calendar),m.noTicklabelmode||(u=p("ticklabelmode")));var I="";m.noTicklabelposition&&P!=="multicategory"||(I=l.coerce(g,y,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:u==="period"?["outside","inside"]:S==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),m.noTicklabeloverflow||p("ticklabeloverflow",I.indexOf("inside")!==-1?"hide past domain":P==="category"||P==="multicategory"?"allow":"hide past div"),i(y,w);var U=!y.isValidRange(g.range);U&&m.reverseDflt&&(U="reversed"),!p("autorange",U)||P!=="linear"&&P!=="-"||p("rangemode"),p("range"),y.cleanRange(),n(g,y,p,m),P==="category"||m.noHover||p("hoverformat");var z=p("color"),H=z!==d.color.dflt?z:_.color,F=E.label||w._dfltTitle[S];if(r(g,y,p,P,m),!L)return y;p("title.text",F),l.coerceFont(p,"title.font",{family:_.family,size:l.bigFont(_.size),color:H}),s(g,y,p,P);var N=m.hasMinor;if(N&&(T.newContainer(y,"minor"),s(g,y,p,P,{isMinor:!0})),o(g,y,p,P,m),t(g,y,p,m),N){var B=m.isMinor;m.isMinor=!0,t(g,y,p,m),m.isMinor=B}a(g,y,p,{dfltColor:z,bgColor:m.bgColor,showGrid:m.showGrid,hasMinor:N,attributes:d}),!N||y.minor.ticks||y.minor.showgrid||delete y.minor,(y.showline||y.ticks)&&p("mirror");var j,K=P==="multicategory";if(m.noTickson||P!=="category"&&!K||!y.ticks&&!y.showgrid||(K&&(j="boundaries"),p("tickson",j)==="boundaries"&&delete y.ticklabelposition),K&&p("showdividers")&&(p("dividercolor"),p("dividerwidth")),P==="date")if(x(g,y,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:f}),y.rangebreaks.length){for(var G=0;G<y.rangebreaks.length;G++)if(y.rangebreaks[G].pattern===c){y._hasDayOfWeekBreaks=!0;break}if(i(y,w),w._has("scattergl")||w._has("splom"))for(var V=0;V<m.data.length;V++){var W=m.data[V];W.type!=="scattergl"&&W.type!=="splom"||(W.visible=!1,l.warn(W.type+" traces do not work on axes with rangebreaks. Setting trace "+W.index+" to `visible: false`."))}}else delete y.rangebreaks;return y};var b={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function v(g){if(typeof g=="string")return b[g.substr(0,3).toLowerCase()]}},12663:function($,R,e){var k=e(31562),A=k.FORMAT_LINK,l=k.DATE_FORMAT_LINK;function T(d,s){return["Sets the "+d+" formatting rule"+(s?"for `"+s+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+A+"."].join(" ")}function x(d,s){return T(d,s)+[" And for dates see: "+l+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}$.exports={axisHoverFormat:function(d,s){return{valType:"string",dflt:"",editType:"none",description:(s?T:x)("hover text",d)+["By default the values are formatted using "+(s?"generic number format":"`"+d+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:T,descriptionWithDates:x}},41675:function($,R,e){var k=e(73972),A=e(85555);function l(T,x){if(x&&x.length){for(var d=0;d<x.length;d++)if(x[d][T])return!0}return!1}R.id2name=function(T){if(typeof T=="string"&&T.match(A.AX_ID_PATTERN)){var x=T.split(" ")[0].substr(1);return x==="1"&&(x=""),T.charAt(0)+"axis"+x}},R.name2id=function(T){if(T.match(A.AX_NAME_PATTERN)){var x=T.substr(5);return x==="1"&&(x=""),T.charAt(0)+x}},R.cleanId=function(T,x,d){var s=/( domain)$/.test(T);if(typeof T=="string"&&T.match(A.AX_ID_PATTERN)&&(!x||T.charAt(0)===x)&&(!s||d)){var t=T.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),T.charAt(0)+t+(s&&d?" domain":"")}},R.list=function(T,x,d){var s=T._fullLayout;if(!s)return[];var t,o=R.listIds(T,x),r=new Array(o.length);for(t=0;t<o.length;t++){var n=o[t];r[t]=s[n.charAt(0)+"axis"+n.substr(1)]}if(!d){var a=s._subplots.gl3d||[];for(t=0;t<a.length;t++){var i=s[a[t]];x?r.push(i[x+"axis"]):r.push(i.xaxis,i.yaxis,i.zaxis)}}return r},R.listIds=function(T,x){var d=T._fullLayout;if(!d)return[];var s=d._subplots;return x?s[x+"axis"]:s.xaxis.concat(s.yaxis)},R.getFromId=function(T,x,d){var s=T._fullLayout;return x=x===void 0||typeof x!="string"?x:x.replace(" domain",""),d==="x"?x=x.replace(/y[0-9]*/,""):d==="y"&&(x=x.replace(/x[0-9]*/,"")),s[R.id2name(x)]},R.getFromTrace=function(T,x,d){var s=T._fullLayout,t=null;if(k.traceIs(x,"gl3d")){var o=x.scene;o.substr(0,5)==="scene"&&(t=s[o][d+"axis"])}else t=R.getFromId(T,x[d+"axis"]||d);return t},R.idSort=function(T,x){var d=T.charAt(0),s=x.charAt(0);return d!==s?d>s?1:-1:+(T.substr(1)||1)-+(x.substr(1)||1)},R.ref2id=function(T){return!!/^[xyz]/.test(T)&&T.split(" ")[0]},R.isLinked=function(T,x){return l(x,T._axisMatchGroups)||l(x,T._axisConstraintGroups)}},15258:function($){$.exports=function(R,e,k,A){if(e.type==="category"){var l,T=R.categoryarray,x=Array.isArray(T)&&T.length>0;x&&(l="array");var d,s=k("categoryorder",l);s==="array"&&(d=k("categoryarray")),x||s!=="array"||(s=e.categoryorder="trace"),s==="trace"?e._initialCategories=[]:s==="array"?e._initialCategories=d.slice():(d=function(t,o){var r,n,a,i=o.dataAttr||t._id.charAt(0),c={};if(o.axData)r=o.axData;else for(r=[],n=0;n<o.data.length;n++){var h=o.data[n];h[i+"axis"]===t._id&&r.push(h)}for(n=0;n<r.length;n++){var f=r[n][i];for(a=0;a<f.length;a++){var b=f[a];b!=null&&(c[b]=1)}}return Object.keys(c)}(e,A).sort(),s==="category ascending"?e._initialCategories=d:s==="category descending"&&(e._initialCategories=d.reverse()))}}},66287:function($,R,e){var k=e(92770),A=e(71828),l=e(50606),T=l.ONEDAY,x=l.ONEWEEK;R.dtick=function(d,s){var t=s==="log",o=s==="date",r=s==="category",n=o?T:1;if(!d)return n;if(k(d))return(d=Number(d))<=0?n:r?Math.max(1,Math.round(d)):o?Math.max(.1,d):d;if(typeof d!="string"||!o&&!t)return n;var a=d.charAt(0),i=d.substr(1);return(i=k(i)?Number(i):0)<=0||!(o&&a==="M"&&i===Math.round(i)||t&&a==="L"||t&&a==="D"&&(i===1||i===2))?n:d},R.tick0=function(d,s,t,o){return s==="date"?A.cleanDate(d,A.dateTick0(t,o%x==0?1:0)):o!=="D1"&&o!=="D2"?k(d)?Number(d):0:void 0}},85555:function($,R,e){var k=e(30587).counter;$.exports={idRegex:{x:k("x","( domain)?"),y:k("y","( domain)?")},attrRegex:k("[xy]axis"),xAxisMatch:k("xaxis"),yAxisMatch:k("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function($,R,e){var k=e(71828),A=e(71739),l=e(41675).id2name,T=e(13838),x=e(42449),d=e(21994),s=e(50606).ALMOST_EQUAL,t=e(18783).FROM_BL;function o(f,b,v){var g=v.axIds,y=v.layoutOut,p=v.hasImage,m=y._axisConstraintGroups,w=y._axisMatchGroups,u=b._id,S=u.charAt(0),_=((y._splomAxes||{})[S]||{})[u]||{},E=b._id,L=E.charAt(0)==="x";function C(J,X){return k.coerce(f,b,T,J,X)}b._matchGroup=null,b._constraintGroup=null,C("constrain",p?"domain":"range"),k.coerce(f,b,{constraintoward:{valType:"enumerated",values:L?["left","center","right"]:["bottom","middle","top"],dflt:L?"center":"middle"}},"constraintoward");var P,I,U=b.type,z=[];for(P=0;P<g.length;P++)(I=g[P])!==E&&y[l(I)].type===U&&z.push(I);var H=n(m,E);if(H){var F=[];for(P=0;P<z.length;P++)H[I=z[P]]||F.push(I);z=F}var N,B,j=z.length;j&&(f.matches||_.matches)&&(N=k.coerce(f,b,{matches:{valType:"enumerated",values:z,dflt:z.indexOf(_.matches)!==-1?_.matches:void 0}},"matches"));var K=p&&!L?b.anchor:void 0;if(j&&!N&&(f.scaleanchor||K)&&(B=k.coerce(f,b,{scaleanchor:{valType:"enumerated",values:z}},"scaleanchor",K)),N){b._matchGroup=a(w,E,N,1);var G=y[l(N)],V=r(y,b)/r(y,G);L!==(N.charAt(0)==="x")&&(V=(L?"x":"y")+V),a(m,E,N,V)}else f.matches&&g.indexOf(f.matches)!==-1&&k.warn("ignored "+b._name+'.matches: "'+f.matches+'" to avoid an infinite loop');if(B){var W=C("scaleratio");W||(W=b.scaleratio=1),a(m,E,B,W)}else f.scaleanchor&&g.indexOf(f.scaleanchor)!==-1&&k.warn("ignored "+b._name+'.scaleanchor: "'+f.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function r(f,b){var v=b.domain;return v||(v=f[l(b.overlaying)].domain),v[1]-v[0]}function n(f,b){for(var v=0;v<f.length;v++)if(f[v][b])return f[v];return null}function a(f,b,v,g){var y,p,m,w,u,S=n(f,b);S===null?((S={})[b]=1,u=f.length,f.push(S)):u=f.indexOf(S);var _=Object.keys(S);for(y=0;y<f.length;y++)if(m=f[y],y!==u&&m[v]){var E=m[v];for(p=0;p<_.length;p++)m[w=_[p]]=i(E,i(g,S[w]));return void f.splice(u,1)}if(g!==1)for(p=0;p<_.length;p++){var L=_[p];S[L]=i(g,S[L])}S[v]=1}function i(f,b){var v,g,y="",p="";typeof f=="string"&&(v=(y=f.match(/^[xy]*/)[0]).length,f=+f.substr(v)),typeof b=="string"&&(g=(p=b.match(/^[xy]*/)[0]).length,b=+b.substr(g));var m=f*b;return v||g?v&&g&&y.charAt(0)!==p.charAt(0)?v===g?m:(v>g?y.substr(g):p.substr(v))+m:y+p+f*b:m}function c(f,b){for(var v=b._size,g=v.h/v.w,y={},p=Object.keys(f),m=0;m<p.length;m++){var w=p[m],u=f[w];if(typeof u=="string"){var S=u.match(/^[xy]*/)[0],_=S.length;u=+u.substr(_);for(var E=S.charAt(0)==="y"?g:1/g,L=0;L<_;L++)u*=E}y[w]=u}return y}function h(f,b){var v=f._inputDomain,g=t[f.constraintoward],y=v[0]+(v[1]-v[0])*g;f.domain=f._input.domain=[y+(v[0]-y)/b,y+(v[1]-y)/b],f.setScale()}R.handleDefaults=function(f,b,v){var g,y,p,m,w,u,S,_,E=v.axIds,L=v.axHasImage,C=b._axisConstraintGroups=[],P=b._axisMatchGroups=[];for(g=0;g<E.length;g++)o(w=f[m=l(E[g])],u=b[m],{axIds:E,layoutOut:b,hasImage:L[m]});function I(G,V){for(g=0;g<G.length;g++)for(p in y=G[g])b[l(p)][V]=y}for(I(P,"_matchGroup"),g=0;g<C.length;g++)for(p in y=C[g])if((u=b[l(p)]).fixedrange){for(var U in y){var z=l(U);(f[z]||{}).fixedrange===!1&&k.warn("fixedrange was specified as false for axis "+z+" but was overridden because another axis in its constraint group has fixedrange true"),b[z].fixedrange=!0}break}for(g=0;g<C.length;){for(p in y=C[g]){(u=b[l(p)])._matchGroup&&Object.keys(u._matchGroup).length===Object.keys(y).length&&(C.splice(g,1),g--);break}g++}I(C,"_constraintGroup");var H=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],F=!1,N=!1;function B(){_=u[S],S==="rangebreaks"&&(N=u._hasDayOfWeekBreaks)}for(g=0;g<P.length;g++){y=P[g];for(var j=0;j<H.length;j++){var K;for(p in S=H[j],_=null,y)if(w=f[m=l(p)],u=b[m],S in u){if(!u.matches&&(K=u,S in w)){B();break}_===null&&S in w&&B()}if(S==="range"&&_&&(F=!0),S==="autorange"&&_===null&&F&&(_=!1),_===null&&S in K&&(_=K[S]),_!==null)for(p in y)(u=b[l(p)])[S]=S==="range"?_.slice():_,S==="rangebreaks"&&(u._hasDayOfWeekBreaks=N,d(u,b))}}},R.enforce=function(f){var b,v,g,y,p,m,w,u,S=f._fullLayout,_=S._axisConstraintGroups||[];for(b=0;b<_.length;b++){g=c(_[b],S);var E=Object.keys(g),L=1/0,C=0,P=1/0,I={},U={},z=!1;for(v=0;v<E.length;v++)U[y=E[v]]=p=S[l(y)],p._inputDomain?p.domain=p._inputDomain.slice():p._inputDomain=p.domain.slice(),p._inputRange||(p._inputRange=p.range.slice()),p.setScale(),I[y]=m=Math.abs(p._m)/g[y],L=Math.min(L,m),p.constrain!=="domain"&&p._constraintShrinkable||(P=Math.min(P,m)),delete p._constraintShrinkable,C=Math.max(C,m),p.constrain==="domain"&&(z=!0);if(!(L>s*C)||z){for(v=0;v<E.length;v++)if(m=I[y=E[v]],w=(p=U[y]).constrain,m!==P||w==="domain")if(u=m/P,w==="range")x(p,u);else{var H=p._inputDomain,F=(p.domain[1]-p.domain[0])/(H[1]-H[0]),N=(p.r2l(p.range[1])-p.r2l(p.range[0]))/(p.r2l(p._inputRange[1])-p.r2l(p._inputRange[0]));if((u/=F)*N<1){p.domain=p._input.domain=H.slice(),x(p,u);continue}if(N<1&&(p.range=p._input.range=p._inputRange.slice(),u*=N),p.autorange){var B=p.r2l(p.range[0]),j=p.r2l(p.range[1]),K=(B+j)/2,G=K,V=K,W=Math.abs(j-K),J=K-W*u*1.0001,X=K+W*u*1.0001,ee=A.makePadFn(S,p,0),re=A.makePadFn(S,p,1);h(p,u);var ie,se,fe=Math.abs(p._m),ye=A.concatExtremes(f,p),ge=ye.min,he=ye.max;for(se=0;se<ge.length;se++)(ie=ge[se].val-ee(ge[se])/fe)>J&&ie<G&&(G=ie);for(se=0;se<he.length;se++)(ie=he[se].val+re(he[se])/fe)<X&&ie>V&&(V=ie);u/=(V-G)/(2*W),G=p.l2r(G),V=p.l2r(V),p.range=p._input.range=B<j?[G,V]:[V,G]}h(p,u)}}}},R.getAxisGroup=function(f,b){for(var v=f._axisMatchGroups,g=0;g<v.length;g++)if(v[g][b])return"g"+g;return b},R.clean=function(f,b){if(b._inputDomain){for(var v=!1,g=b._id,y=f._fullLayout._axisConstraintGroups,p=0;p<y.length;p++)if(y[p][g]){v=!0;break}v&&b.constrain==="domain"||(b._input.domain=b.domain=b._inputDomain,delete b._inputDomain)}}},29323:function($,R,e){var k=e(39898),A=e(71828),l=A.numberFormat,T=e(84267),x=e(38520),d=e(73972),s=A.strTranslate,t=e(63893),o=e(7901),r=e(91424),n=e(30211),a=e(89298),i=e(6964),c=e(28569),h=e(64505),f=h.selectingOrDrawing,b=h.freeMode,v=e(18783).FROM_TL,g=e(33306),y=e(61549).redrawReglTraces,p=e(74875),m=e(41675).getFromId,w=e(47322).prepSelect,u=e(47322).clearOutline,S=e(47322).selectOnClick,_=e(42449),E=e(85555),L=E.MINDRAG,C=E.MINZOOM,P=!0;function I(ie,se,fe,ye){var ge=A.ensureSingle(ie.draglayer,se,fe,function(he){he.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ie.id)});return ge.call(i,ye),ge.node()}function U(ie,se,fe,ye,ge,he,ve){var Oe=I(ie,"rect",se,fe);return k.select(Oe).call(r.setRect,ye,ge,he,ve),Oe}function z(ie,se){for(var fe=0;fe<ie.length;fe++)if(!ie[fe].fixedrange)return se;return""}function H(ie,se,fe,ye,ge){for(var he=0;he<ie.length;he++){var ve=ie[he];if(!ve.fixedrange)if(ve.rangebreaks){var Oe=ve._id.charAt(0)==="y",xe=Oe?1-se:se,ke=Oe?1-fe:fe;ye[ve._name+".range[0]"]=ve.l2r(ve.p2l(xe*ve._length)),ye[ve._name+".range[1]"]=ve.l2r(ve.p2l(ke*ve._length))}else{var Me=ve._rl[0],Te=ve._rl[1]-Me;ye[ve._name+".range[0]"]=ve.l2r(Me+Te*se),ye[ve._name+".range[1]"]=ve.l2r(Me+Te*fe)}}if(ge&&ge.length){var Q=(se+(1-fe))/2;H(ge,Q,1-Q,ye,[])}}function F(ie,se){for(var fe=0;fe<ie.length;fe++){var ye=ie[fe];if(!ye.fixedrange)if(ye.rangebreaks){var ge=ye._length,he=(ye.p2l(0+se)-ye.p2l(0)+(ye.p2l(ge+se)-ye.p2l(ge)))/2;ye.range=[ye.l2r(ye._rl[0]-he),ye.l2r(ye._rl[1]-he)]}else ye.range=[ye.l2r(ye._rl[0]-se/ye._m),ye.l2r(ye._rl[1]-se/ye._m)]}}function N(ie){return 1-(ie>=0?Math.min(ie,.9):1/(1/Math.max(ie,-.3)+3.222))}function B(ie,se,fe,ye,ge){return ie.append("path").attr("class","zoombox").style({fill:se>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",s(fe,ye)).attr("d",ge+"Z")}function j(ie,se,fe){return ie.append("path").attr("class","zoombox-corners").style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,opacity:0}).attr("transform",s(se,fe)).attr("d","M0,0Z")}function K(ie,se,fe,ye,ge,he){ie.attr("d",ye+"M"+fe.l+","+fe.t+"v"+fe.h+"h"+fe.w+"v-"+fe.h+"h-"+fe.w+"Z"),G(ie,se,ge,he)}function G(ie,se,fe,ye){fe||(ie.transition().style("fill",ye>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),se.transition().style("opacity",1).duration(200))}function V(ie){k.select(ie).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function W(ie){P&&ie.data&&ie._context.showTips&&(A.notifier(A._(ie,"Double-click to zoom back out"),"long"),P=!1)}function J(ie){var se=Math.floor(Math.min(ie.b-ie.t,ie.r-ie.l,C)/2);return"M"+(ie.l-3.5)+","+(ie.t-.5+se)+"h3v"+-se+"h"+se+"v-3h-"+(se+3)+"ZM"+(ie.r+3.5)+","+(ie.t-.5+se)+"h-3v"+-se+"h"+-se+"v-3h"+(se+3)+"ZM"+(ie.r+3.5)+","+(ie.b+.5-se)+"h-3v"+se+"h"+-se+"v3h"+(se+3)+"ZM"+(ie.l-3.5)+","+(ie.b+.5-se)+"h3v"+se+"h"+se+"v3h-"+(se+3)+"Z"}function X(ie,se,fe,ye,ge){for(var he,ve,Oe,xe,ke=!1,Me={},Te={},Q=(ge||{}).xaHash,oe=(ge||{}).yaHash,ce=0;ce<se.length;ce++){var me=se[ce];for(he in fe)if(me[he]){for(Oe in me)ge&&(Q[Oe]||oe[Oe])||(Oe.charAt(0)==="x"?fe:ye)[Oe]||(Me[Oe]=he);for(ve in ye)ge&&(Q[ve]||oe[ve])||!me[ve]||(ke=!0)}for(ve in ye)if(me[ve])for(xe in me)ge&&(Q[xe]||oe[xe])||(xe.charAt(0)==="x"?fe:ye)[xe]||(Te[xe]=ve)}ke&&(A.extendFlat(Me,Te),Te={});var Ae={},Ie=[];for(Oe in Me){var Ce=m(ie,Oe);Ie.push(Ce),Ae[Ce._id]=Ce}var Re={},le=[];for(xe in Te){var de=m(ie,xe);le.push(de),Re[de._id]=de}return{xaHash:Ae,yaHash:Re,xaxes:Ie,yaxes:le,xLinks:Me,yLinks:Te,isSubplotConstrained:ke}}function ee(ie,se){if(x){var fe=ie.onwheel!==void 0?"wheel":"mousewheel";ie._onwheel&&ie.removeEventListener(fe,ie._onwheel),ie._onwheel=se,ie.addEventListener(fe,se,{passive:!1})}else ie.onwheel!==void 0?ie.onwheel=se:ie.onmousewheel!==void 0?ie.onmousewheel=se:ie.isAddedWheelEvent||(ie.isAddedWheelEvent=!0,ie.addEventListener("wheel",se,{passive:!1}))}function re(ie){var se=[];for(var fe in ie)se.push(ie[fe]);return se}$.exports={makeDragBox:function(ie,se,fe,ye,ge,he,ve,Oe){var xe,ke,Me,Te,Q,oe,ce,me,Ae,Ie,Ce,Re,le,de,_e,Fe,Ve,He,nt,tt,ot,dt,kt,mt=ie._fullLayout._zoomlayer,wt=ve+Oe==="nsew",Lt=(ve+Oe).length===1;function Ct(){if(xe=se.xaxis,ke=se.yaxis,Ae=xe._length,Ie=ke._length,ce=xe._offset,me=ke._offset,(Me={})[xe._id]=xe,(Te={})[ke._id]=ke,ve&&Oe)for(var cn=se.overlays,dn=0;dn<cn.length;dn++){var sn=cn[dn].xaxis;Me[sn._id]=sn;var hn=cn[dn].yaxis;Te[hn._id]=hn}Q=re(Me),oe=re(Te),le=z(Q,Oe),de=z(oe,ve),_e=!de&&!le,Re=X(ie,ie._fullLayout._axisMatchGroups,Me,Te);var En=(Ce=X(ie,ie._fullLayout._axisConstraintGroups,Me,Te,Re)).isSubplotConstrained||Re.isSubplotConstrained;Fe=Oe||En,Ve=ve||En;var Mn=ie._fullLayout;He=Mn._has("scattergl"),nt=Mn._has("splom"),tt=Mn._has("svg")}fe+=se.yaxis._shift,Ct();var It=function(cn,dn,sn){return cn?cn==="nsew"?sn?"":dn==="pan"?"move":"crosshair":cn.toLowerCase()+"-resize":"pointer"}(de+le,ie._fullLayout.dragmode,wt),Ut=U(se,ve+Oe+"drag",It,fe,ye,ge,he);if(_e&&!wt)return Ut.onmousedown=null,Ut.style.pointerEvents="none",Ut;var Rt,Ge,We,Be,Ye,rt,Se,ze,Ke,st,ct={element:Ut,gd:ie,plotinfo:se};function Tt(){ct.plotinfo.selection=!1,u(ie)}function Et(cn,dn){var sn=ct.gd;if(sn._fullLayout._activeShapeIndex>=0)sn._fullLayout._deactivateShape(sn);else{var hn=sn._fullLayout.clickmode;if(V(sn),cn!==2||Lt||un(),wt)hn.indexOf("select")>-1&&S(dn,sn,Q,oe,se.id,ct),hn.indexOf("event")>-1&&n.click(sn,dn,se.id);else if(cn===1&&Lt){var En=ve?ke:xe,Mn=ve==="s"||Oe==="w"?0:1,Rn=En._name+".range["+Mn+"]",Nn=function($n,mr){var fr,Zn=$n.range[mr],qn=Math.abs(Zn-$n.range[1-mr]);return $n.type==="date"?Zn:$n.type==="log"?(fr=Math.ceil(Math.max(0,-Math.log(qn)/Math.LN10))+3,l("."+fr+"g")(Math.pow(10,Zn))):(fr=Math.floor(Math.log(Math.abs(Zn))/Math.LN10)-Math.floor(Math.log(qn)/Math.LN10)+4,l("."+String(fr)+"g")(Zn))}(En,Mn),Fn="left",rr="middle";if(En.fixedrange)return;ve?(rr=ve==="n"?"top":"bottom",En.side==="right"&&(Fn="right")):Oe==="e"&&(Fn="right"),sn._context.showAxisRangeEntryBoxes&&k.select(Ut).call(t.makeEditable,{gd:sn,immediate:!0,background:sn._fullLayout.paper_bgcolor,text:String(Nn),fill:En.tickfont?En.tickfont.color:"#444",horizontalAlign:Fn,verticalAlign:rr}).on("edit",function($n){var mr=En.d2r($n);mr!==void 0&&d.call("_guiRelayout",sn,Rn,mr)})}}}function At(cn,dn){if(ie._transitioningWithDuration)return!1;var sn=Math.max(0,Math.min(Ae,dt*cn+Rt)),hn=Math.max(0,Math.min(Ie,kt*dn+Ge)),En=Math.abs(sn-Rt),Mn=Math.abs(hn-Ge);function Rn(){Se="",We.r=We.l,We.t=We.b,Ke.attr("d","M0,0Z")}if(We.l=Math.min(Rt,sn),We.r=Math.max(Rt,sn),We.t=Math.min(Ge,hn),We.b=Math.max(Ge,hn),Ce.isSubplotConstrained)En>C||Mn>C?(Se="xy",En/Ae>Mn/Ie?(Mn=En*Ie/Ae,Ge>hn?We.t=Ge-Mn:We.b=Ge+Mn):(En=Mn*Ae/Ie,Rt>sn?We.l=Rt-En:We.r=Rt+En),Ke.attr("d",J(We))):Rn();else if(Re.isSubplotConstrained)if(En>C||Mn>C){Se="xy";var Nn=Math.min(We.l/Ae,(Ie-We.b)/Ie),Fn=Math.max(We.r/Ae,(Ie-We.t)/Ie);We.l=Nn*Ae,We.r=Fn*Ae,We.b=(1-Nn)*Ie,We.t=(1-Fn)*Ie,Ke.attr("d",J(We))}else Rn();else!de||Mn<Math.min(Math.max(.6*En,L),C)?En<L||!le?Rn():(We.t=0,We.b=Ie,Se="x",Ke.attr("d",function(rr,$n){return"M"+(rr.l-.5)+","+($n-C-.5)+"h-3v"+(2*C+1)+"h3ZM"+(rr.r+.5)+","+($n-C-.5)+"h3v"+(2*C+1)+"h-3Z"}(We,Ge))):!le||En<Math.min(.6*Mn,C)?(We.l=0,We.r=Ae,Se="y",Ke.attr("d",function(rr,$n){return"M"+($n-C-.5)+","+(rr.t-.5)+"v-3h"+(2*C+1)+"v3ZM"+($n-C-.5)+","+(rr.b+.5)+"v3h"+(2*C+1)+"v-3Z"}(We,Rt))):(Se="xy",Ke.attr("d",J(We)));We.w=We.r-We.l,We.h=We.b-We.t,Se&&(st=!0),ie._dragged=st,K(ze,Ke,We,Ye,rt,Be),ht(),ie.emit("plotly_relayouting",ot),rt=!0}function ht(){ot={},Se!=="xy"&&Se!=="x"||(H(Q,We.l/Ae,We.r/Ae,ot,Ce.xaxes),Nt("x",ot)),Se!=="xy"&&Se!=="y"||(H(oe,(Ie-We.b)/Ie,(Ie-We.t)/Ie,ot,Ce.yaxes),Nt("y",ot))}function pt(){ht(),V(ie),pn(),W(ie)}ct.prepFn=function(cn,dn,sn){var hn=ct.dragmode,En=ie._fullLayout.dragmode;En!==hn&&(ct.dragmode=En),Ct(),dt=ie._fullLayout._invScaleX,kt=ie._fullLayout._invScaleY,_e||(wt?cn.shiftKey?En==="pan"?En="zoom":f(En)||(En="pan"):cn.ctrlKey&&(En="pan"):En="pan"),b(En)?ct.minDrag=1:ct.minDrag=void 0,f(En)?(ct.xaxes=Q,ct.yaxes=oe,w(cn,dn,sn,ct,En)):(ct.clickFn=Et,f(hn)&&Tt(),_e||(En==="zoom"?(ct.moveFn=At,ct.doneFn=pt,ct.minDrag=1,function(Mn,Rn,Nn){var Fn=Ut.getBoundingClientRect();Rt=Rn-Fn.left,Ge=Nn-Fn.top,ie._fullLayout._calcInverseTransform(ie);var rr=A.apply3DTransform(ie._fullLayout._invTransform)(Rt,Ge);Rt=rr[0],Ge=rr[1],We={l:Rt,r:Rt,w:0,t:Ge,b:Ge,h:0},Be=ie._hmpixcount?ie._hmlumcount/ie._hmpixcount:T(ie._fullLayout.plot_bgcolor).getLuminance(),rt=!1,Se="xy",st=!1,ze=B(mt,Be,ce,me,Ye="M0,0H"+Ae+"V"+Ie+"H0V0"),Ke=j(mt,ce,me)}(0,dn,sn)):En==="pan"&&(ct.moveFn=jt,ct.doneFn=pn))),ie._fullLayout._redrag=function(){var Mn=ie._dragdata;if(Mn&&Mn.element===Ut){var Rn=ie._fullLayout.dragmode;f(Rn)||(Ct(),Kt([0,0,Ae,Ie]),ct.moveFn(Mn.dx,Mn.dy))}}},c.init(ct);var gt=[0,0,Ae,Ie],Pt=null,Ot=E.REDRAWDELAY,Ht=se.mainplot?ie._fullLayout._plots[se.mainplot]:se;function jt(cn,dn){if(cn*=dt,dn*=kt,!ie._transitioningWithDuration){if(ie._fullLayout._replotting=!0,le==="ew"||de==="ns"){var sn=le?-cn:0,hn=de?-dn:0;if(Re.isSubplotConstrained){if(le&&de){var En=(cn/Ae-dn/Ie)/2;sn=-(cn=En*Ae),hn=-(dn=-En*Ie)}de?sn=-hn*Ae/Ie:hn=-sn*Ie/Ae}return le&&(F(Q,cn),Nt("x")),de&&(F(oe,dn),Nt("y")),Kt([sn,hn,Ae,Ie]),Gt(),void ie.emit("plotly_relayouting",ot)}var Mn,Rn,Nn=le==="w"==(de==="n")?1:-1;if(le&&de&&(Ce.isSubplotConstrained||Re.isSubplotConstrained)){var Fn=(cn/Ae+Nn*dn/Ie)/2;cn=Fn*Ae,dn=Nn*Fn*Ie}if(le==="w"?cn=fr(Q,0,cn):le==="e"?cn=fr(Q,1,-cn):le||(cn=0),de==="n"?dn=fr(oe,1,dn):de==="s"?dn=fr(oe,0,-dn):de||(dn=0),Mn=le==="w"?cn:0,Rn=de==="n"?dn:0,Ce.isSubplotConstrained&&!Re.isSubplotConstrained||Re.isSubplotConstrained&&le&&de&&Nn>0){var rr;if(Re.isSubplotConstrained||!le&&de.length===1){for(rr=0;rr<Q.length;rr++)Q[rr].range=Q[rr]._r.slice(),_(Q[rr],1-dn/Ie);Mn=(cn=dn*Ae/Ie)/2}if(Re.isSubplotConstrained||!de&&le.length===1){for(rr=0;rr<oe.length;rr++)oe[rr].range=oe[rr]._r.slice(),_(oe[rr],1-cn/Ae);Rn=(dn=cn*Ie/Ae)/2}}Re.isSubplotConstrained&&de||Nt("x"),Re.isSubplotConstrained&&le||Nt("y");var $n=Ae-cn,mr=Ie-dn;!Re.isSubplotConstrained||le&&de||(le?(Rn=Mn?0:cn*Ie/Ae,mr=$n*Ie/Ae):(Mn=Rn?0:dn*Ae/Ie,$n=mr*Ae/Ie)),Kt([Mn,Rn,$n,mr]),Gt(),ie.emit("plotly_relayouting",ot)}function fr(Zn,qn,ur){for(var Zt,nn,zn=1-qn,_n=0;_n<Zn.length;_n++){var Cn=Zn[_n];if(!Cn.fixedrange){Zt=Cn,nn=Cn._rl[zn]+(Cn._rl[qn]-Cn._rl[zn])/N(ur/Cn._length);var Un=Cn.l2r(nn);Un!==!1&&Un!==void 0&&(Cn.range[qn]=Un)}}return Zt._length*(Zt._rl[qn]-nn)/(Zt._rl[qn]-Zt._rl[zn])}}function Nt(cn,dn){for(var sn=Re.isSubplotConstrained?{x:oe,y:Q}[cn]:Re[cn+"axes"],hn=Re.isSubplotConstrained?{x:Q,y:oe}[cn]:[],En=0;En<sn.length;En++){var Mn=sn[En],Rn=Mn._id,Nn=Re.xLinks[Rn]||Re.yLinks[Rn],Fn=hn[0]||Me[Nn]||Te[Nn];Fn&&(dn?(dn[Mn._name+".range[0]"]=dn[Fn._name+".range[0]"],dn[Mn._name+".range[1]"]=dn[Fn._name+".range[1]"]):Mn.range=Fn.range.slice())}}function Gt(){var cn,dn=[];function sn(Rn){for(cn=0;cn<Rn.length;cn++)Rn[cn].fixedrange||dn.push(Rn[cn]._id)}function hn(Rn,Nn){for(cn=0;cn<Rn.length;cn++){var Fn=Rn[cn],rr=Fn[Nn];Fn.fixedrange||rr.tickmode!=="sync"||dn.push(rr._id)}}for(Fe&&(sn(Q),sn(Ce.xaxes),sn(Re.xaxes),hn(se.overlays,"xaxis")),Ve&&(sn(oe),sn(Ce.yaxes),sn(Re.yaxes),hn(se.overlays,"yaxis")),ot={},cn=0;cn<dn.length;cn++){var En=dn[cn],Mn=m(ie,En);a.drawOne(ie,Mn,{skipTitle:!0}),ot[Mn._name+".range[0]"]=Mn.range[0],ot[Mn._name+".range[1]"]=Mn.range[1]}a.redrawComponents(ie,dn)}function un(){if(!ie._transitioningWithDuration){var cn=ie._context.doubleClick,dn=[];le&&(dn=dn.concat(Q)),de&&(dn=dn.concat(oe)),Re.xaxes&&(dn=dn.concat(Re.xaxes)),Re.yaxes&&(dn=dn.concat(Re.yaxes));var sn,hn,En,Mn={};if(cn==="reset+autosize"){for(cn="autosize",hn=0;hn<dn.length;hn++)if((sn=dn[hn])._rangeInitial&&(sn.range[0]!==sn._rangeInitial[0]||sn.range[1]!==sn._rangeInitial[1])||!sn._rangeInitial&&!sn.autorange){cn="reset";break}}if(cn==="autosize")for(hn=0;hn<dn.length;hn++)(sn=dn[hn]).fixedrange||(Mn[sn._name+".autorange"]=!0);else if(cn==="reset")for((le||Ce.isSubplotConstrained)&&(dn=dn.concat(Ce.xaxes)),de&&!Ce.isSubplotConstrained&&(dn=dn.concat(Ce.yaxes)),Ce.isSubplotConstrained&&(le?de||(dn=dn.concat(oe)):dn=dn.concat(Q)),hn=0;hn<dn.length;hn++)(sn=dn[hn]).fixedrange||(sn._rangeInitial?(En=sn._rangeInitial,Mn[sn._name+".range[0]"]=En[0],Mn[sn._name+".range[1]"]=En[1]):Mn[sn._name+".autorange"]=!0);ie.emit("plotly_doubleclick",null),d.call("_guiRelayout",ie,Mn)}}function pn(){Kt([0,0,Ae,Ie]),A.syncOrAsync([p.previousPromises,function(){ie._fullLayout._replotting=!1,d.call("_guiRelayout",ie,ot)}],ie)}function Kt(cn){var dn,sn,hn,En,Mn=ie._fullLayout,Rn=Mn._plots,Nn=Mn._subplots.cartesian;if(nt&&d.subplotsRegistry.splom.drag(ie),He){for(dn=0;dn<Nn.length;dn++)if(hn=(sn=Rn[Nn[dn]]).xaxis,En=sn.yaxis,sn._scene){var Fn=A.simpleMap(hn.range,hn.r2l),rr=A.simpleMap(En.range,En.r2l);sn._scene.update({range:[Fn[0],rr[0],Fn[1],rr[1]]})}}if((nt||He)&&(g(ie),y(ie)),tt){var $n=cn[2]/xe._length,mr=cn[3]/ke._length;for(dn=0;dn<Nn.length;dn++){hn=(sn=Rn[Nn[dn]]).xaxis,En=sn.yaxis;var fr,Zn,qn,ur,Zt=(Fe||Re.isSubplotConstrained)&&!hn.fixedrange&&Me[hn._id],nn=(Ve||Re.isSubplotConstrained)&&!En.fixedrange&&Te[En._id];if(Zt?(fr=$n,qn=Oe||Re.isSubplotConstrained?cn[0]:vn(hn,fr)):Re.xaHash[hn._id]?(fr=$n,qn=cn[0]*hn._length/xe._length):Re.yaHash[hn._id]?(fr=mr,qn=de==="ns"?-cn[1]*hn._length/ke._length:vn(hn,fr,{n:"top",s:"bottom"}[de])):qn=Bn(hn,fr=wn(hn,$n,mr)),nn?(Zn=mr,ur=ve||Re.isSubplotConstrained?cn[1]:vn(En,Zn)):Re.yaHash[En._id]?(Zn=mr,ur=cn[1]*En._length/ke._length):Re.xaHash[En._id]?(Zn=$n,ur=le==="ew"?-cn[0]*En._length/xe._length:vn(En,Zn,{e:"right",w:"left"}[le])):ur=Bn(En,Zn=wn(En,$n,mr)),fr||Zn){fr||(fr=1),Zn||(Zn=1);var zn=hn._offset-qn/fr,_n=En._offset-ur/Zn;sn.clipRect.call(r.setTranslate,qn,ur).call(r.setScale,fr,Zn),sn.plot.call(r.setTranslate,zn,_n).call(r.setScale,1/fr,1/Zn),fr===sn.xScaleFactor&&Zn===sn.yScaleFactor||(r.setPointGroupScale(sn.zoomScalePts,fr,Zn),r.setTextPointsScale(sn.zoomScaleTxt,fr,Zn)),r.hideOutsideRangePoints(sn.clipOnAxisFalseTraces,sn),sn.xScaleFactor=fr,sn.yScaleFactor=Zn}}}}function wn(cn,dn,sn){return cn.fixedrange?0:Fe&&Ce.xaHash[cn._id]?dn:Ve&&(Ce.isSubplotConstrained?Ce.xaHash:Ce.yaHash)[cn._id]?sn:0}function Bn(cn,dn){return dn?(cn.range=cn._r.slice(),_(cn,dn),vn(cn,dn)):0}function vn(cn,dn,sn){return cn._length*(1-dn)*v[sn||cn.constraintoward||"middle"]}return ve.length*Oe.length!=1&&ee(Ut,function(cn){if(ie._context._scrollZoom.cartesian||ie._fullLayout._enablescrollzoom){if(Tt(),ie._transitioningWithDuration)return cn.preventDefault(),void cn.stopPropagation();Ct(),clearTimeout(Pt);var dn=-cn.deltaY;if(isFinite(dn)||(dn=cn.wheelDelta/10),isFinite(dn)){var sn,hn=Math.exp(-Math.min(Math.max(dn,-20),20)/200),En=Ht.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Mn=(cn.clientX-En.left)/En.width,Rn=(En.bottom-cn.clientY)/En.height;if(Fe){for(Oe||(Mn=.5),sn=0;sn<Q.length;sn++)Nn(Q[sn],Mn,hn);Nt("x"),gt[2]*=hn,gt[0]+=gt[2]*Mn*(1/hn-1)}if(Ve){for(ve||(Rn=.5),sn=0;sn<oe.length;sn++)Nn(oe[sn],Rn,hn);Nt("y"),gt[3]*=hn,gt[1]+=gt[3]*(1-Rn)*(1/hn-1)}Kt(gt),Gt(),ie.emit("plotly_relayouting",ot),Pt=setTimeout(function(){ie._fullLayout&&(gt=[0,0,Ae,Ie],pn())},Ot),cn.preventDefault()}else A.log("Did not find wheel motion attributes: ",cn)}function Nn(Fn,rr,$n){if(!Fn.fixedrange){var mr=A.simpleMap(Fn.range,Fn.r2l),fr=mr[0]+(mr[1]-mr[0])*rr;Fn.range=mr.map(function(Zn){return Fn.l2r(fr+(Zn-fr)*$n)})}}}),Ut},makeDragger:I,makeRectDragger:U,makeZoombox:B,makeCorners:j,updateZoombox:K,xyCorners:J,transitionZoombox:G,removeZoombox:V,showDoubleClickNotifier:W,attachWheelEventHandler:ee}},4305:function($,R,e){var k=e(39898),A=e(30211),l=e(28569),T=e(6964),x=e(29323).makeDragBox,d=e(85555).DRAGGERSIZE;R.initInteractions=function(s){var t=s._fullLayout;if(s._context.staticPlot)k.select(s).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(r,n){if((t._plots[r].mainplot&&!0)===(t._plots[n].mainplot&&!0)){var a=r.split("y"),i=n.split("y");return a[0]===i[0]?Number(a[1]||1)-Number(i[1]||1):Number(a[0]||1)-Number(i[0]||1)}return t._plots[r].mainplot?1:-1}).forEach(function(r){var n=t._plots[r],a=n.xaxis,i=n.yaxis;if(!n.mainplot){var c=x(s,n,a._offset,i._offset,a._length,i._length,"ns","ew");c.onmousemove=function(b){s._fullLayout._rehover=function(){s._fullLayout._hoversubplot===r&&s._fullLayout._plots[r]&&A.hover(s,b,r)},A.hover(s,b,r),s._fullLayout._lasthover=c,s._fullLayout._hoversubplot=r},c.onmouseout=function(b){s._dragging||(s._fullLayout._hoversubplot=null,l.unhover(s,b))},s._context.showAxisDragHandles&&(x(s,n,a._offset-d,i._offset-d,d,d,"n","w"),x(s,n,a._offset+a._length,i._offset-d,d,d,"n","e"),x(s,n,a._offset-d,i._offset+i._length,d,d,"s","w"),x(s,n,a._offset+a._length,i._offset+i._length,d,d,"s","e"))}if(s._context.showAxisDragHandles){if(r===a._mainSubplot){var h=a._mainLinePosition;a.side==="top"&&(h-=d),x(s,n,a._offset+.1*a._length,h,.8*a._length,d,"","ew"),x(s,n,a._offset,h,.1*a._length,d,"","w"),x(s,n,a._offset+.9*a._length,h,.1*a._length,d,"","e")}if(r===i._mainSubplot){var f=i._mainLinePosition;i.side!=="right"&&(f-=d),x(s,n,f,i._offset+.1*i._length,d,.8*i._length,"ns",""),x(s,n,f,i._offset+.9*i._length,d,.1*i._length,"s",""),x(s,n,f,i._offset,d,.1*i._length,"n","")}}});var o=t._hoverlayer.node();o.onmousemove=function(r){r.target=s._fullLayout._lasthover,A.hover(s,r,t._hoversubplot)},o.onclick=function(r){r.target=s._fullLayout._lasthover,A.click(s,r)},o.onmousedown=function(r){s._fullLayout._lasthover.onmousedown(r)},R.updateFx(s)}},R.updateFx=function(s){var t=s._fullLayout,o=t.dragmode==="pan"?"move":"crosshair";T(t._draggers,o)}},76325:function($,R,e){var k=e(73972),A=e(71828),l=e(41675);$.exports=function(T){return function(x,d){var s=x[T];if(Array.isArray(s))for(var t=k.subplotsRegistry.cartesian,o=t.idRegex,r=d._subplots,n=r.xaxis,a=r.yaxis,i=r.cartesian,c=d._has("cartesian")||d._has("gl2d"),h=0;h<s.length;h++){var f=s[h];if(A.isPlainObject(f)){var b=l.cleanId(f.xref,"x",!1),v=l.cleanId(f.yref,"y",!1),g=o.x.test(b),y=o.y.test(v);if(g||y){c||A.pushUnique(d._basePlotModules,t);var p=!1;g&&n.indexOf(b)===-1&&(n.push(b),p=!0),y&&a.indexOf(v)===-1&&(a.push(v),p=!0),p&&g&&y&&i.push(b+v)}}}}}},93612:function($,R,e){var k=e(39898),A=e(73972),l=e(71828),T=e(74875),x=e(91424),d=e(27659).a0,s=e(41675),t=e(85555),o=e(77922),r=l.ensureSingle;function n(f,b,v){return l.ensureSingle(f,b,v,function(g){g.datum(v)})}function a(f,b,v,g,y){for(var p,m,w,u=t.traceLayerClasses,S=f._fullLayout,_=S._modules,E=[],L=[],C=0;C<_.length;C++){var P=(p=_[C]).name,I=A.modules[P].categories;if(I.svg){var U=p.layerName||P+"layer",z=p.plot;w=(m=d(v,z))[0],v=m[1],w.length&&E.push({i:u.indexOf(U),className:U,plotMethod:z,cdModule:w}),I.zoomScale&&L.push("."+U)}}E.sort(function(N,B){return N.i-B.i});var H=b.plot.selectAll("g.mlayer").data(E,function(N){return N.className});if(H.enter().append("g").attr("class",function(N){return N.className}).classed("mlayer",!0).classed("rangeplot",b.isRangePlot),H.exit().remove(),H.order(),H.each(function(N){var B=k.select(this),j=N.className;N.plotMethod(f,b,N.cdModule,B,g,y),t.clipOnAxisFalseQuery.indexOf("."+j)===-1&&x.setClipUrl(B,b.layerClipId,f)}),S._has("scattergl")&&(p=A.getModule("scattergl"),w=d(v,p)[0],p.plot(f,b,w)),!f._context.staticPlot&&(b._hasClipOnAxisFalse&&(b.clipOnAxisFalseTraces=b.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),L.length)){var F=b.plot.selectAll(L.join(",")).selectAll(".trace");b.zoomScalePts=F.selectAll("path.point"),b.zoomScaleTxt=F.selectAll(".textpoint")}}function i(f,b){var v=b.plotgroup,g=b.id,y=t.layerValue2layerClass[b.xaxis.layer],p=t.layerValue2layerClass[b.yaxis.layer],m=f._fullLayout._hasOnlyLargeSploms;if(b.mainplot){var w=b.mainplotinfo,u=w.plotgroup,S=g+"-x",_=g+"-y";b.minorGridlayer=w.minorGridlayer,b.gridlayer=w.gridlayer,b.zerolinelayer=w.zerolinelayer,r(w.overlinesBelow,"path",S),r(w.overlinesBelow,"path",_),r(w.overaxesBelow,"g",S),r(w.overaxesBelow,"g",_),b.plot=r(w.overplot,"g",g),r(w.overlinesAbove,"path",S),r(w.overlinesAbove,"path",_),r(w.overaxesAbove,"g",S),r(w.overaxesAbove,"g",_),b.xlines=u.select(".overlines-"+y).select("."+S),b.ylines=u.select(".overlines-"+p).select("."+_),b.xaxislayer=u.select(".overaxes-"+y).select("."+S),b.yaxislayer=u.select(".overaxes-"+p).select("."+_)}else if(m)b.xlines=r(v,"path","xlines-above"),b.ylines=r(v,"path","ylines-above"),b.xaxislayer=r(v,"g","xaxislayer-above"),b.yaxislayer=r(v,"g","yaxislayer-above");else{var E=r(v,"g","layer-subplot");b.shapelayer=r(E,"g","shapelayer"),b.imagelayer=r(E,"g","imagelayer"),b.minorGridlayer=r(v,"g","minor-gridlayer"),b.gridlayer=r(v,"g","gridlayer"),b.zerolinelayer=r(v,"g","zerolinelayer"),r(v,"path","xlines-below"),r(v,"path","ylines-below"),b.overlinesBelow=r(v,"g","overlines-below"),r(v,"g","xaxislayer-below"),r(v,"g","yaxislayer-below"),b.overaxesBelow=r(v,"g","overaxes-below"),b.plot=r(v,"g","plot"),b.overplot=r(v,"g","overplot"),b.xlines=r(v,"path","xlines-above"),b.ylines=r(v,"path","ylines-above"),b.overlinesAbove=r(v,"g","overlines-above"),r(v,"g","xaxislayer-above"),r(v,"g","yaxislayer-above"),b.overaxesAbove=r(v,"g","overaxes-above"),b.xlines=v.select(".xlines-"+y),b.ylines=v.select(".ylines-"+p),b.xaxislayer=v.select(".xaxislayer-"+y),b.yaxislayer=v.select(".yaxislayer-"+p)}m||(n(b.minorGridlayer,"g",b.xaxis._id),n(b.minorGridlayer,"g",b.yaxis._id),b.minorGridlayer.selectAll("g").map(function(L){return L[0]}).sort(s.idSort),n(b.gridlayer,"g",b.xaxis._id),n(b.gridlayer,"g",b.yaxis._id),b.gridlayer.selectAll("g").map(function(L){return L[0]}).sort(s.idSort)),b.xlines.style("fill","none").classed("crisp",!0),b.ylines.style("fill","none").classed("crisp",!0)}function c(f,b){if(f){var v={};for(var g in f.each(function(w){var u=w[0];k.select(this).remove(),h(u,b),v[u]=!0}),b._plots)for(var y=b._plots[g].overlays||[],p=0;p<y.length;p++){var m=y[p];v[m.id]&&m.plot.selectAll(".trace").remove()}}}function h(f,b){b._draggers.selectAll("g."+f).remove(),b._defs.select("#clip"+b._uid+f+"plot").remove()}R.name="cartesian",R.attr=["xaxis","yaxis"],R.idRoot=["x","y"],R.idRegex=t.idRegex,R.attrRegex=t.attrRegex,R.attributes=e(89502),R.layoutAttributes=e(13838),R.supplyLayoutDefaults=e(86763),R.transitionAxes=e(66847),R.finalizeSubplots=function(f,b){var v,g,y,p=b._subplots,m=p.xaxis,w=p.yaxis,u=p.cartesian,S=u.concat(p.gl2d||[]),_={},E={};for(v=0;v<S.length;v++){var L=S[v].split("y");_[L[0]]=1,E["y"+L[1]]=1}for(v=0;v<m.length;v++)_[g=m[v]]||(y=(f[s.id2name(g)]||{}).anchor,t.idRegex.y.test(y)||(y="y"),u.push(g+y),S.push(g+y),E[y]||(E[y]=1,l.pushUnique(w,y)));for(v=0;v<w.length;v++)E[y=w[v]]||(g=(f[s.id2name(y)]||{}).anchor,t.idRegex.x.test(g)||(g="x"),u.push(g+y),S.push(g+y),_[g]||(_[g]=1,l.pushUnique(m,g)));if(!S.length){for(var C in g="",y="",f)t.attrRegex.test(C)&&(C.charAt(0)==="x"?(!g||+C.substr(5)<+g.substr(5))&&(g=C):(!y||+C.substr(5)<+y.substr(5))&&(y=C));g=g?s.name2id(g):"x",y=y?s.name2id(y):"y",m.push(g),w.push(y),u.push(g+y)}},R.plot=function(f,b,v,g){var y,p=f._fullLayout,m=p._subplots.cartesian,w=f.calcdata;if(!Array.isArray(b))for(b=[],y=0;y<w.length;y++)b.push(y);for(y=0;y<m.length;y++){for(var u,S=m[y],_=p._plots[S],E=[],L=0;L<w.length;L++){var C=w[L],P=C[0].trace;P.xaxis+P.yaxis===S&&((b.indexOf(P.index)!==-1||P.carpet)&&(u&&u[0].trace.xaxis+u[0].trace.yaxis===S&&["tonextx","tonexty","tonext"].indexOf(P.fill)!==-1&&E.indexOf(u)===-1&&E.push(u),E.push(C)),u=C)}a(f,_,E,v,g)}},R.clean=function(f,b,v,g){var y,p,m,w=g._plots||{},u=b._plots||{},S=g._subplots||{};if(g._hasOnlyLargeSploms&&!b._hasOnlyLargeSploms)for(m in w)(y=w[m]).plotgroup&&y.plotgroup.remove();var _=g._has&&g._has("gl"),E=b._has&&b._has("gl");if(_&&!E)for(m in w)(y=w[m])._scene&&y._scene.destroy();if(S.xaxis&&S.yaxis){var L=s.listIds({_fullLayout:g});for(p=0;p<L.length;p++){var C=L[p];b[s.id2name(C)]||g._infolayer.selectAll(".g-"+C+"title").remove()}}var P=g._has&&g._has("cartesian"),I=b._has&&b._has("cartesian");if(P&&!I)c(g._cartesianlayer.selectAll(".subplot"),g),g._defs.selectAll(".axesclip").remove(),delete g._axisConstraintGroups,delete g._axisMatchGroups;else if(S.cartesian)for(p=0;p<S.cartesian.length;p++){var U=S.cartesian[p];if(!u[U]){var z="."+U+",."+U+"-x,."+U+"-y";g._cartesianlayer.selectAll(z).remove(),h(U,g)}}},R.drawFramework=function(f){var b=f._fullLayout,v=function(y){var p,m,w,u,S,_,E=y._fullLayout,L=E._subplots.cartesian,C=L.length,P=[],I=[];for(p=0;p<C;p++){w=L[p],S=(u=E._plots[w]).xaxis,_=u.yaxis;var U=S._mainAxis,z=_._mainAxis,H=U._id+z._id,F=E._plots[H];u.overlays=[],H!==w&&F?(u.mainplot=H,u.mainplotinfo=F,I.push(w)):(u.mainplot=void 0,u.mainplotinfo=void 0,P.push(w))}for(p=0;p<I.length;p++)w=I[p],(u=E._plots[w]).mainplotinfo.overlays.push(u);var N=P.concat(I),B=new Array(C);for(p=0;p<C;p++){w=N[p],S=(u=E._plots[w]).xaxis,_=u.yaxis;var j=[w,S.layer,_.layer,S.overlaying||"",_.overlaying||""];for(m=0;m<u.overlays.length;m++)j.push(u.overlays[m].id);B[p]=j}return B}(f),g=b._cartesianlayer.selectAll(".subplot").data(v,String);g.enter().append("g").attr("class",function(y){return"subplot "+y[0]}),g.order(),g.exit().call(c,b),g.each(function(y){var p=y[0],m=b._plots[p];m.plotgroup=k.select(this),i(f,m),m.draglayer=r(b._draggers,"g",p)})},R.rangePlot=function(f,b,v){i(f,b),a(f,b,v),T.style(f)},R.toSVG=function(f){var b=f._fullLayout._glimages,v=k.select(f).selectAll(".svg-container");v.filter(function(g,y){return y===v.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var g=this,y=g.toDataURL("image/png");b.append("svg:image").attr({xmlns:o.svg,"xlink:href":y,preserveAspectRatio:"none",x:0,y:0,width:g.style.width,height:g.style.height})})},R.updateFx=e(4305).updateFx},13838:function($,R,e){var k=e(41940),A=e(22399),l=e(79952).P,T=e(1426).extendFlat,x=e(44467).templatedArray,d=e(12663).descriptionWithDates,s=e(50606).ONEDAY,t=e(85555),o=t.HOUR_PATTERN,r=t.WEEKDAY_PATTERN,n={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},a=T({},n,{values:n.values.slice().concat(["sync"])});function i(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks"}}var c={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},h={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},f={valType:"data_array",editType:"ticks"},b={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function v(S){var _={valType:"number",min:0,editType:"ticks"};return S||(_.dflt=5),_}function g(S){var _={valType:"number",min:0,editType:"ticks"};return S||(_.dflt=1),_}var y={valType:"color",dflt:A.defaultLine,editType:"ticks"},p={valType:"color",dflt:A.lightLine,editType:"ticks"};function m(S){var _={valType:"number",min:0,editType:"ticks"};return S||(_.dflt=1),_}var w=T({},l,{editType:"ticks"}),u={valType:"boolean",editType:"ticks"};$.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:A.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:k({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:x("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[r,o,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:s},editType:"calc"}),tickmode:a,nticks:i(),tick0:c,dtick:h,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:f,ticktext:{valType:"data_array",editType:"ticks"},ticks:b,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:v(),tickwidth:g(),tickcolor:y,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},l,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:k({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:d("tick label")},tickformatstops:x("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:d("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:A.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:u,gridcolor:p,gridwidth:m(),griddash:w,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:A.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:A.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:n,nticks:i("minor"),tick0:c,dtick:h,tickvals:f,ticks:b,ticklen:v("minor"),tickwidth:g("minor"),tickcolor:y,gridcolor:p,gridwidth:m("minor"),griddash:w,showgrid:u,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:k({editType:"ticks"})}}},86763:function($,R,e){var k=e(71828),A=e(7901),l=e(23469).isUnifiedHover,T=e(98212),x=e(44467),d=e(10820),s=e(13838),t=e(951),o=e(71453),r=e(99082),n=e(52830),a=e(41675),i=a.id2name,c=a.name2id,h=e(85555).AX_ID_PATTERN,f=e(73972),b=f.traceIs,v=f.getComponentMethod;function g(y,p,m){Array.isArray(y[p])?y[p].push(m):y[p]=[m]}$.exports=function(y,p,m){var w,u,S=p.autotypenumbers,_={},E={},L={},C={},P={},I={},U={},z={},H={},F={};for(w=0;w<m.length;w++){var N=m[w];if(b(N,"cartesian")||b(N,"gl2d")){var B,j;if(N.xaxis)B=i(N.xaxis),g(_,B,N);else if(N.xaxes)for(u=0;u<N.xaxes.length;u++)g(_,i(N.xaxes[u]),N);if(N.yaxis)j=i(N.yaxis),g(_,j,N);else if(N.yaxes)for(u=0;u<N.yaxes.length;u++)g(_,i(N.yaxes[u]),N);N.type==="funnel"?N.orientation==="h"?(B&&(E[B]=!0),j&&(U[j]=!0)):j&&(L[j]=!0):N.type==="image"?(j&&(z[j]=!0),B&&(z[B]=!0)):(j&&(P[j]=!0,I[j]=!0),b(N,"carpet")&&(N.type!=="carpet"||N._cheater)||B&&(C[B]=!0)),N.type==="carpet"&&N._cheater&&B&&(E[B]=!0),b(N,"2dMap")&&(H[B]=!0,H[j]=!0),b(N,"oriented")&&(F[N.orientation==="h"?j:B]=!0)}}var K=p._subplots,G=K.xaxis,V=K.yaxis,W=k.simpleMap(G,i),J=k.simpleMap(V,i),X=W.concat(J),ee=A.background;G.length&&V.length&&(ee=k.coerce(y,p,d,"plot_bgcolor"));var re,ie,se,fe,ye,ge=A.combine(ee,p.paper_bgcolor);function he(){var Lt=_[re]||[];ye._traceIndices=Lt.map(function(Ct){return Ct._expandedIndex}),ye._annIndices=[],ye._shapeIndices=[],ye._selectionIndices=[],ye._imgIndices=[],ye._subplotsWith=[],ye._counterAxes=[],ye._name=ye._attr=re,ye._id=ie}function ve(Lt,Ct){return k.coerce(fe,ye,s,Lt,Ct)}function Oe(Lt,Ct){return k.coerce2(fe,ye,s,Lt,Ct)}function xe(Lt){return Lt==="x"?V:G}function ke(Lt,Ct){for(var It=Lt==="x"?W:J,Ut=[],Rt=0;Rt<It.length;Rt++){var Ge=It[Rt];Ge===Ct||(y[Ge]||{}).overlaying||Ut.push(c(Ge))}return Ut}var Me={x:xe("x"),y:xe("y")},Te=Me.x.concat(Me.y),Q={},oe=[];function ce(){var Lt=fe.matches;h.test(Lt)&&Te.indexOf(Lt)===-1&&(Q[Lt]=fe.type,oe=Object.keys(Q))}var me=T(y,p),Ae=l(me);for(w=0;w<X.length;w++){re=X[w],ie=c(re),se=re.charAt(0),k.isPlainObject(y[re])||(y[re]={}),fe=y[re],ye=x.newContainer(p,re,se+"axis"),he();var Ie=se==="x"&&!C[re]&&E[re]||se==="y"&&!P[re]&&L[re],Ce=se==="y"&&(!I[re]&&U[re]||z[re]),Re={hasMinor:!0,letter:se,font:p.font,outerTicks:H[re],showGrid:!F[re],data:_[re]||[],bgColor:ge,calendar:p.calendar,automargin:!0,visibleDflt:Ie,reverseDflt:Ce,autotypenumbersDflt:S,splomStash:((p._splomAxes||{})[se]||{})[ie]};ve("uirevision",p.uirevision),t(fe,ye,ve,Re),o(fe,ye,ve,Re,p);var le=Ae&&se===me.charAt(0),de=Oe("spikecolor",Ae?ye.color:void 0),_e=Oe("spikethickness",Ae?1.5:void 0),Fe=Oe("spikedash",Ae?"dot":void 0),Ve=Oe("spikemode",Ae?"across":void 0),He=Oe("spikesnap");ve("showspikes",!!(le||de||_e||Fe||Ve||He))||(delete ye.spikecolor,delete ye.spikethickness,delete ye.spikedash,delete ye.spikemode,delete ye.spikesnap);var nt=i(fe.overlaying),tt=[0,1];if(p[nt]!==void 0){var ot=i(p[nt].anchor);p[ot]!==void 0&&(tt=p[ot].domain)}n(fe,ye,ve,{letter:se,counterAxes:Me[se],overlayableAxes:ke(se,re),grid:p.grid,overlayingDomain:tt}),ve("title.standoff"),ce(),ye._input=fe}for(w=0;w<oe.length;){ie=oe[w++],se=(re=i(ie)).charAt(0),k.isPlainObject(y[re])||(y[re]={}),fe=y[re],ye=x.newContainer(p,re,se+"axis"),he();var dt={letter:se,font:p.font,outerTicks:H[re],showGrid:!F[re],data:[],bgColor:ge,calendar:p.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:S,splomStash:((p._splomAxes||{})[se]||{})[ie]};ve("uirevision",p.uirevision),ye.type=Q[ie]||"linear",o(fe,ye,ve,dt,p),n(fe,ye,ve,{letter:se,counterAxes:Me[se],overlayableAxes:ke(se,re),grid:p.grid}),ve("fixedrange"),ce(),ye._input=fe}var kt=v("rangeslider","handleDefaults"),mt=v("rangeselector","handleDefaults");for(w=0;w<W.length;w++)re=W[w],fe=y[re],ye=p[re],kt(y,p,re),ye.type==="date"&&mt(fe,ye,p,J,ye.calendar),ve("fixedrange");for(w=0;w<J.length;w++){re=J[w],fe=y[re],ye=p[re];var wt=p[i(ye.anchor)];ve("fixedrange",v("rangeslider","isVisible")(wt))}r.handleDefaults(y,p,{axIds:Te.concat(oe).sort(a.idSort),axHasImage:z})}},92128:function($,R,e){var k=e(84267).mix,A=e(22399),l=e(71828);$.exports=function(T,x,d,s){var t=(s=s||{}).dfltColor;function o(y,p){return l.coerce2(T,x,s.attributes,y,p)}var r=o("linecolor",t),n=o("linewidth");d("showline",s.showLine||!!r||!!n)||(delete x.linecolor,delete x.linewidth);var a=o("gridcolor",k(t,s.bgColor,s.blend||A.lightFraction).toRgbString()),i=o("gridwidth"),c=o("griddash");if(d("showgrid",s.showGrid||!!a||!!i||!!c)||(delete x.gridcolor,delete x.gridwidth,delete x.griddash),s.hasMinor){var h=o("minor.gridcolor",k(x.gridcolor,s.bgColor,67).toRgbString()),f=o("minor.gridwidth",x.gridwidth||1),b=o("minor.griddash",x.griddash||"solid");d("minor.showgrid",!!h||!!f||!!b)||(delete x.minor.gridcolor,delete x.minor.gridwidth,delete x.minor.griddash)}if(!s.noZeroLine){var v=o("zerolinecolor",t),g=o("zerolinewidth");d("zeroline",s.showGrid||!!v||!!g)||(delete x.zerolinecolor,delete x.zerolinewidth)}}},52830:function($,R,e){var k=e(92770),A=e(71828);$.exports=function(l,T,x,d){var s,t,o,r,n,a,i=d.counterAxes||[],c=d.overlayableAxes||[],h=d.letter,f=d.grid,b=d.overlayingDomain;f&&(t=f._domains[h][f._axisMap[T._id]],s=f._anchors[T._id],t&&(o=f[h+"side"].split(" ")[0],r=f.domain[h][o==="right"||o==="top"?1:0])),t=t||[0,1],s=s||(k(l.position)?"free":i[0]||"free"),o=o||(h==="x"?"bottom":"left"),r=r||0,n=0,a=!1;var v=A.coerce(l,T,{anchor:{valType:"enumerated",values:["free"].concat(i),dflt:s}},"anchor"),g=A.coerce(l,T,{side:{valType:"enumerated",values:h==="x"?["bottom","top"]:["left","right"],dflt:o}},"side");v==="free"&&(h==="y"&&(x("autoshift")&&(r=g==="left"?b[0]:b[1],a=!T.automargin||T.automargin,n=g==="left"?-3:3),x("shift",n)),x("position",r)),x("automargin",a);var y=!1;if(c.length&&(y=A.coerce(l,T,{overlaying:{valType:"enumerated",values:[!1].concat(c),dflt:!1}},"overlaying")),!y){var p=x("domain",t);p[0]>p[1]-.000244140625&&(T.domain=t),A.noneOrAll(l.domain,T.domain,t),T.tickmode==="sync"&&(T.tickmode="auto")}return x("layer"),T}},89426:function($,R,e){var k=e(59652);$.exports=function(A,l,T,x,d){d||(d={});var s=d.tickSuffixDflt,t=k(A);T("tickprefix")&&T("showtickprefix",t),T("ticksuffix",s)&&T("showticksuffix",t)}},42449:function($,R,e){var k=e(18783).FROM_BL;$.exports=function(A,l,T){T===void 0&&(T=k[A.constraintoward||"center"]);var x=[A.r2l(A.range[0]),A.r2l(A.range[1])],d=x[0]+(x[1]-x[0])*T;A.range=A._input.range=[A.l2r(d+(x[0]-d)*l),A.l2r(d+(x[1]-d)*l)],A.setScale()}},21994:function($,R,e){var k=e(39898),A=e(84096).g0,l=e(71828),T=l.numberFormat,x=e(92770),d=l.cleanNumber,s=l.ms2DateTime,t=l.dateTime2ms,o=l.ensureNumber,r=l.isArrayOrTypedArray,n=e(50606),a=n.FP_SAFE,i=n.BADNUM,c=n.LOG_CLIP,h=n.ONEWEEK,f=n.ONEDAY,b=n.ONEHOUR,v=n.ONEMIN,g=n.ONESEC,y=e(41675),p=e(85555),m=p.HOUR_PATTERN,w=p.WEEKDAY_PATTERN;function u(_){return Math.pow(10,_)}function S(_){return _!=null}$.exports=function(_,E){E=E||{};var L=_._id||"x",C=L.charAt(0);function P(X,ee){if(X>0)return Math.log(X)/Math.LN10;if(X<=0&&ee&&_.range&&_.range.length===2){var re=_.range[0],ie=_.range[1];return .5*(re+ie-2*c*Math.abs(re-ie))}return i}function I(X,ee,re,ie){if((ie||{}).msUTC&&x(X))return+X;var se=t(X,re||_.calendar);if(se===i){if(!x(X))return i;X=+X;var fe=Math.floor(10*l.mod(X+.05,1)),ye=Math.round(X-fe/10);se=t(new Date(ye))+fe/10}return se}function U(X,ee,re){return s(X,ee,re||_.calendar)}function z(X){return _._categories[Math.round(X)]}function H(X){if(S(X)){if(_._categoriesMap===void 0&&(_._categoriesMap={}),_._categoriesMap[X]!==void 0)return _._categoriesMap[X];_._categories.push(typeof X=="number"?String(X):X);var ee=_._categories.length-1;return _._categoriesMap[X]=ee,ee}return i}function F(X){if(_._categoriesMap)return _._categoriesMap[X]}function N(X){var ee=F(X);return ee!==void 0?ee:x(X)?+X:void 0}function B(X){return x(X)?+X:F(X)}function j(X,ee,re){return k.round(re+ee*X,2)}function K(X,ee,re){return(X-re)/ee}var G=function(X){return x(X)?j(X,_._m,_._b):i},V=function(X){return K(X,_._m,_._b)};if(_.rangebreaks){var W=C==="y";G=function(X){if(!x(X))return i;var ee=_._rangebreaks.length;if(!ee)return j(X,_._m,_._b);var re=W;_.range[0]>_.range[1]&&(re=!re);for(var ie=re?-1:1,se=ie*X,fe=0,ye=0;ye<ee;ye++){var ge=ie*_._rangebreaks[ye].min,he=ie*_._rangebreaks[ye].max;if(se<ge)break;if(!(se>he)){fe=se<(ge+he)/2?ye:ye+1;break}fe=ye+1}var ve=_._B[fe]||0;return isFinite(ve)?j(X,_._m2,ve):0},V=function(X){var ee=_._rangebreaks.length;if(!ee)return K(X,_._m,_._b);for(var re=0,ie=0;ie<ee&&!(X<_._rangebreaks[ie].pmin);ie++)X>_._rangebreaks[ie].pmax&&(re=ie+1);return K(X,_._m2,_._B[re])}}_.c2l=_.type==="log"?P:o,_.l2c=_.type==="log"?u:o,_.l2p=G,_.p2l=V,_.c2p=_.type==="log"?function(X,ee){return G(P(X,ee))}:G,_.p2c=_.type==="log"?function(X){return u(V(X))}:V,["linear","-"].indexOf(_.type)!==-1?(_.d2r=_.r2d=_.d2c=_.r2c=_.d2l=_.r2l=d,_.c2d=_.c2r=_.l2d=_.l2r=o,_.d2p=_.r2p=function(X){return _.l2p(d(X))},_.p2d=_.p2r=V,_.cleanPos=o):_.type==="log"?(_.d2r=_.d2l=function(X,ee){return P(d(X),ee)},_.r2d=_.r2c=function(X){return u(d(X))},_.d2c=_.r2l=d,_.c2d=_.l2r=o,_.c2r=P,_.l2d=u,_.d2p=function(X,ee){return _.l2p(_.d2r(X,ee))},_.p2d=function(X){return u(V(X))},_.r2p=function(X){return _.l2p(d(X))},_.p2r=V,_.cleanPos=o):_.type==="date"?(_.d2r=_.r2d=l.identity,_.d2c=_.r2c=_.d2l=_.r2l=I,_.c2d=_.c2r=_.l2d=_.l2r=U,_.d2p=_.r2p=function(X,ee,re){return _.l2p(I(X,0,re))},_.p2d=_.p2r=function(X,ee,re){return U(V(X),ee,re)},_.cleanPos=function(X){return l.cleanDate(X,i,_.calendar)}):_.type==="category"?(_.d2c=_.d2l=H,_.r2d=_.c2d=_.l2d=z,_.d2r=_.d2l_noadd=N,_.r2c=function(X){var ee=B(X);return ee!==void 0?ee:_.fraction2r(.5)},_.l2r=_.c2r=o,_.r2l=B,_.d2p=function(X){return _.l2p(_.r2c(X))},_.p2d=function(X){return z(V(X))},_.r2p=_.d2p,_.p2r=V,_.cleanPos=function(X){return typeof X=="string"&&X!==""?X:o(X)}):_.type==="multicategory"&&(_.r2d=_.c2d=_.l2d=z,_.d2r=_.d2l_noadd=N,_.r2c=function(X){var ee=N(X);return ee!==void 0?ee:_.fraction2r(.5)},_.r2c_just_indices=F,_.l2r=_.c2r=o,_.r2l=N,_.d2p=function(X){return _.l2p(_.r2c(X))},_.p2d=function(X){return z(V(X))},_.r2p=_.d2p,_.p2r=V,_.cleanPos=function(X){return Array.isArray(X)||typeof X=="string"&&X!==""?X:o(X)},_.setupMultiCategory=function(X){var ee,re,ie=_._traceIndices,se=_._matchGroup;if(se&&_._categories.length===0){for(var fe in se)if(fe!==L){var ye=E[y.id2name(fe)];ie=ie.concat(ye._traceIndices)}}var ge=[[0,{}],[0,{}]],he=[];for(ee=0;ee<ie.length;ee++){var ve=X[ie[ee]];if(C in ve){var Oe=ve[C],xe=ve._length||l.minRowLength(Oe);if(r(Oe[0])&&r(Oe[1]))for(re=0;re<xe;re++){var ke=Oe[0][re],Me=Oe[1][re];S(ke)&&S(Me)&&(he.push([ke,Me]),ke in ge[0][1]||(ge[0][1][ke]=ge[0][0]++),Me in ge[1][1]||(ge[1][1][Me]=ge[1][0]++))}}}for(he.sort(function(Te,Q){var oe=ge[0][1],ce=oe[Te[0]]-oe[Q[0]];if(ce)return ce;var me=ge[1][1];return me[Te[1]]-me[Q[1]]}),ee=0;ee<he.length;ee++)H(he[ee])}),_.fraction2r=function(X){var ee=_.r2l(_.range[0]),re=_.r2l(_.range[1]);return _.l2r(ee+X*(re-ee))},_.r2fraction=function(X){var ee=_.r2l(_.range[0]),re=_.r2l(_.range[1]);return(_.r2l(X)-ee)/(re-ee)},_.cleanRange=function(X,ee){ee||(ee={}),X||(X="range");var re,ie,se=l.nestedProperty(_,X).get();if(ie=(ie=_.type==="date"?l.dfltRange(_.calendar):C==="y"?p.DFLTRANGEY:_._name==="realaxis"?[0,1]:ee.dfltRange||p.DFLTRANGEX).slice(),_.rangemode!=="tozero"&&_.rangemode!=="nonnegative"||(ie[0]=0),se&&se.length===2)for(_.type!=="date"||_.autorange||(se[0]=l.cleanDate(se[0],i,_.calendar),se[1]=l.cleanDate(se[1],i,_.calendar)),re=0;re<2;re++)if(_.type==="date"){if(!l.isDateTime(se[re],_.calendar)){_[X]=ie;break}if(_.r2l(se[0])===_.r2l(se[1])){var fe=l.constrain(_.r2l(se[0]),l.MIN_MS+1e3,l.MAX_MS-1e3);se[0]=_.l2r(fe-1e3),se[1]=_.l2r(fe+1e3);break}}else{if(!x(se[re])){if(!x(se[1-re])){_[X]=ie;break}se[re]=se[1-re]*(re?10:.1)}if(se[re]<-a?se[re]=-a:se[re]>a&&(se[re]=a),se[0]===se[1]){var ye=Math.max(1,Math.abs(1e-6*se[0]));se[0]-=ye,se[1]+=ye}}else l.nestedProperty(_,X).set(ie)},_.setScale=function(X){var ee=E._size;if(_.overlaying){var re=y.getFromId({_fullLayout:E},_.overlaying);_.domain=re.domain}var ie=X&&_._r?"_r":"range",se=_.calendar;_.cleanRange(ie);var fe,ye,ge=_.r2l(_[ie][0],se),he=_.r2l(_[ie][1],se),ve=C==="y";if(ve?(_._offset=ee.t+(1-_.domain[1])*ee.h,_._length=ee.h*(_.domain[1]-_.domain[0]),_._m=_._length/(ge-he),_._b=-_._m*he):(_._offset=ee.l+_.domain[0]*ee.w,_._length=ee.w*(_.domain[1]-_.domain[0]),_._m=_._length/(he-ge),_._b=-_._m*ge),_._rangebreaks=[],_._lBreaks=0,_._m2=0,_._B=[],_.rangebreaks&&(_._rangebreaks=_.locateBreaks(Math.min(ge,he),Math.max(ge,he)),_._rangebreaks.length)){for(fe=0;fe<_._rangebreaks.length;fe++)ye=_._rangebreaks[fe],_._lBreaks+=Math.abs(ye.max-ye.min);var Oe=ve;ge>he&&(Oe=!Oe),Oe&&_._rangebreaks.reverse();var xe=Oe?-1:1;for(_._m2=xe*_._length/(Math.abs(he-ge)-_._lBreaks),_._B.push(-_._m2*(ve?he:ge)),fe=0;fe<_._rangebreaks.length;fe++)ye=_._rangebreaks[fe],_._B.push(_._B[_._B.length-1]-xe*_._m2*(ye.max-ye.min));for(fe=0;fe<_._rangebreaks.length;fe++)(ye=_._rangebreaks[fe]).pmin=G(ye.min),ye.pmax=G(ye.max)}if(!isFinite(_._m)||!isFinite(_._b)||_._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},_.maskBreaks=function(X){var ee,re,ie,se,fe,ye=_.rangebreaks||[];ye._cachedPatterns||(ye._cachedPatterns=ye.map(function(ke){return ke.enabled&&ke.bounds?l.simpleMap(ke.bounds,ke.pattern?d:_.d2c):null})),ye._cachedValues||(ye._cachedValues=ye.map(function(ke){return ke.enabled&&ke.values?l.simpleMap(ke.values,_.d2c).sort(l.sorterAsc):null}));for(var ge=0;ge<ye.length;ge++){var he=ye[ge];if(he.enabled){if(he.bounds){var ve=he.pattern;switch(re=(ee=ye._cachedPatterns[ge])[0],ie=ee[1],ve){case w:se=(fe=new Date(X)).getUTCDay(),re>ie&&(ie+=7,se<re&&(se+=7));break;case m:se=(fe=new Date(X)).getUTCHours()+(fe.getUTCMinutes()/60+fe.getUTCSeconds()/3600+fe.getUTCMilliseconds()/36e5),re>ie&&(ie+=24,se<re&&(se+=24));break;case"":se=X}if(se>=re&&se<ie)return i}else for(var Oe=ye._cachedValues[ge],xe=0;xe<Oe.length;xe++)if(ie=(re=Oe[xe])+he.dvalue,X>=re&&X<ie)return i}}return X},_.locateBreaks=function(X,ee){var re,ie,se,fe,ye=[];if(!_.rangebreaks)return ye;var ge=_.rangebreaks.slice().sort(function(me,Ae){return me.pattern===w&&Ae.pattern===m?-1:Ae.pattern===w&&me.pattern===m?1:0}),he=function(me,Ae){if((me=l.constrain(me,X,ee))!==(Ae=l.constrain(Ae,X,ee))){for(var Ie=!0,Ce=0;Ce<ye.length;Ce++){var Re=ye[Ce];me<Re.max&&Ae>=Re.min&&(me<Re.min&&(Re.min=me),Ae>Re.max&&(Re.max=Ae),Ie=!1)}Ie&&ye.push({min:me,max:Ae})}};for(re=0;re<ge.length;re++){var ve=ge[re];if(ve.enabled)if(ve.bounds){var Oe=X,xe=ee;ve.pattern&&(Oe=Math.floor(Oe)),se=(ie=l.simpleMap(ve.bounds,ve.pattern?d:_.r2l))[0],fe=ie[1];var ke,Me,Te=new Date(Oe);switch(ve.pattern){case w:Me=h,ke=(fe-se+(fe<se?7:0))*f,Oe+=se*f-(Te.getUTCDay()*f+Te.getUTCHours()*b+Te.getUTCMinutes()*v+Te.getUTCSeconds()*g+Te.getUTCMilliseconds());break;case m:Me=f,ke=(fe-se+(fe<se?24:0))*b,Oe+=se*b-(Te.getUTCHours()*b+Te.getUTCMinutes()*v+Te.getUTCSeconds()*g+Te.getUTCMilliseconds());break;default:Oe=Math.min(ie[0],ie[1]),ke=Me=(xe=Math.max(ie[0],ie[1]))-Oe}for(var Q=Oe;Q<xe;Q+=Me)he(Q,Q+ke)}else for(var oe=l.simpleMap(ve.values,_.d2c),ce=0;ce<oe.length;ce++)he(se=oe[ce],fe=se+ve.dvalue)}return ye.sort(function(me,Ae){return me.min-Ae.min}),ye},_.makeCalcdata=function(X,ee,re){var ie,se,fe,ye,ge=_.type,he=ge==="date"&&X[ee+"calendar"];if(ee in X){if(ie=X[ee],ye=X._length||l.minRowLength(ie),l.isTypedArray(ie)&&(ge==="linear"||ge==="log")){if(ye===ie.length)return ie;if(ie.subarray)return ie.subarray(0,ye)}if(ge==="multicategory")return function(xe,ke){for(var Me=new Array(ke),Te=0;Te<ke;Te++){var Q=(xe[0]||[])[Te],oe=(xe[1]||[])[Te];Me[Te]=F([Q,oe])}return Me}(ie,ye);for(se=new Array(ye),fe=0;fe<ye;fe++)se[fe]=_.d2c(ie[fe],0,he,re)}else{var ve=ee+"0"in X?_.d2c(X[ee+"0"],0,he):0,Oe=X["d"+ee]?Number(X["d"+ee]):1;for(ie=X[{x:"y",y:"x"}[ee]],ye=X._length||ie.length,se=new Array(ye),fe=0;fe<ye;fe++)se[fe]=ve+fe*Oe}if(_.rangebreaks)for(fe=0;fe<ye;fe++)se[fe]=_.maskBreaks(se[fe]);return se},_.isValidRange=function(X){return Array.isArray(X)&&X.length===2&&x(_.r2l(X[0]))&&x(_.r2l(X[1]))},_.isPtWithinRange=function(X,ee){var re=_.c2l(X[C],null,ee),ie=_.r2l(_.range[0]),se=_.r2l(_.range[1]);return ie<se?ie<=re&&re<=se:se<=re&&re<=ie},_._emptyCategories=function(){_._categories=[],_._categoriesMap={}},_.clearCalc=function(){var X=_._matchGroup;if(X){var ee=null,re=null;for(var ie in X){var se=E[y.id2name(ie)];if(se._categories){ee=se._categories,re=se._categoriesMap;break}}ee&&re?(_._categories=ee,_._categoriesMap=re):_._emptyCategories()}else _._emptyCategories();if(_._initialCategories)for(var fe=0;fe<_._initialCategories.length;fe++)H(_._initialCategories[fe])},_.sortByInitialCategories=function(){var X=[];if(_._emptyCategories(),_._initialCategories)for(var ee=0;ee<_._initialCategories.length;ee++)H(_._initialCategories[ee]);X=X.concat(_._traceIndices);var re=_._matchGroup;for(var ie in re)if(L!==ie){var se=E[y.id2name(ie)];se._categories=_._categories,se._categoriesMap=_._categoriesMap,X=X.concat(se._traceIndices)}return X};var J=E._d3locale;_.type==="date"&&(_._dateFormat=J?J.timeFormat:A,_._extraFormat=E._extraFormat),_._separators=E.separators,_._numFormat=J?J.numberFormat:T,delete _._minDtick,delete _._forceTick0}},59652:function($){$.exports=function(R){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(k){return R[k]!==void 0});if(e.every(function(k){return R[k]===R[e[0]]})||e.length===1)return R[e[0]]}},96115:function($,R,e){var k=e(71828),A=e(7901).contrast,l=e(13838),T=e(59652),x=e(85501);function d(s,t){function o(r,n){return k.coerce(s,t,l.tickformatstops,r,n)}o("enabled")&&(o("dtickrange"),o("value"))}$.exports=function(s,t,o,r,n){n||(n={});var a=T(s);if(o("showticklabels")){var i=n.font||{},c=t.color,h=(t.ticklabelposition||"").indexOf("inside")!==-1?A(n.bgColor):c&&c!==l.color.dflt?c:i.color;if(k.coerceFont(o,"tickfont",{family:i.family,size:i.size,color:h}),n.noTicklabelstep||r==="multicategory"||r==="log"||o("ticklabelstep"),n.noAng||o("tickangle"),r!=="category"){var f=o("tickformat");x(s,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:d}),t.tickformatstops.length||delete t.tickformatstops,n.noExp||f||r==="date"||(o("showexponent",a),o("exponentformat"),o("minexponent"),o("separatethousands"))}}}},38701:function($,R,e){var k=e(71828),A=e(13838);$.exports=function(l,T,x,d){var s=d.isMinor,t=s?l.minor||{}:l,o=s?T.minor:T,r=s?A.minor:A,n=s?"minor.":"",a=k.coerce2(t,o,r,"ticklen",s?.6*(T.ticklen||5):void 0),i=k.coerce2(t,o,r,"tickwidth",s?T.tickwidth||1:void 0),c=k.coerce2(t,o,r,"tickcolor",(s?T.tickcolor:void 0)||o.color);x(n+"ticks",!s&&d.outerTicks||a||i||c?"outside":"")||(delete o.ticklen,delete o.tickwidth,delete o.tickcolor)}},26218:function($,R,e){var k=e(66287),A=e(71828).isArrayOrTypedArray;$.exports=function(l,T,x,d,s){s||(s={});var t=s.isMinor,o=t?l.minor||{}:l,r=t?T.minor:T,n=t?"minor.":"";function a(v){var g=o[v];return g!==void 0?g:(r._template||{})[v]}var i=a("tick0"),c=a("dtick"),h=a("tickvals"),f=x(n+"tickmode",A(h)?"array":c?"linear":"auto");if(f==="auto"||f==="sync")x(n+"nticks");else if(f==="linear"){var b=r.dtick=k.dtick(c,d);r.tick0=k.tick0(i,d,T.calendar,b)}else d!=="multicategory"&&(x(n+"tickvals")===void 0?r.tickmode="auto":t||x("ticktext"))}},66847:function($,R,e){var k=e(39898),A=e(73972),l=e(71828),T=e(91424),x=e(89298);$.exports=function(d,s,t,o){var r=d._fullLayout;if(s.length!==0){var n,a,i,c;o&&(n=o());var h=k.ease(t.easing);return d._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var v={},g=0;g<s.length;g++){var y=s[g],p=y.plotinfo.xaxis,m=y.plotinfo.yaxis;y.xr0&&(v[p._name+".range"]=y.xr0.slice()),y.yr0&&(v[m._name+".range"]=y.yr0.slice())}return A.call("relayout",d,v).then(function(){for(var w=0;w<s.length;w++)f(s[w].plotinfo)})}()}),a=Date.now(),c=window.requestAnimationFrame(function v(){i=Date.now();for(var g=Math.min(1,(i-a)/t.duration),y=h(g),p=0;p<s.length;p++)b(s[p],y);i-a>t.duration?(function(){for(var m={},w=0;w<s.length;w++){var u=s[w],S=u.plotinfo.xaxis,_=u.plotinfo.yaxis;u.xr1&&(m[S._name+".range"]=u.xr1.slice()),u.yr1&&(m[_._name+".range"]=u.yr1.slice())}n&&n(),A.call("relayout",d,m).then(function(){for(var E=0;E<s.length;E++)f(s[E].plotinfo)})}(),c=window.cancelAnimationFrame(v)):c=window.requestAnimationFrame(v)}),Promise.resolve()}function f(v){var g=v.xaxis,y=v.yaxis;r._defs.select("#"+v.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),v.plot.call(T.setTranslate,g._offset,y._offset).call(T.setScale,1,1);var p=v.plot.selectAll(".scatterlayer .trace");p.selectAll(".point").call(T.setPointGroupScale,1,1),p.selectAll(".textpoint").call(T.setTextPointsScale,1,1),p.call(T.hideOutsideRangePoints,v)}function b(v,g){var y=v.plotinfo,p=y.xaxis,m=y.yaxis,w=p._length,u=m._length,S=!!v.xr1,_=!!v.yr1,E=[];if(S){var L=l.simpleMap(v.xr0,p.r2l),C=l.simpleMap(v.xr1,p.r2l),P=L[1]-L[0],I=C[1]-C[0];E[0]=(L[0]*(1-g)+g*C[0]-L[0])/(L[1]-L[0])*w,E[2]=w*(1-g+g*I/P),p.range[0]=p.l2r(L[0]*(1-g)+g*C[0]),p.range[1]=p.l2r(L[1]*(1-g)+g*C[1])}else E[0]=0,E[2]=w;if(_){var U=l.simpleMap(v.yr0,m.r2l),z=l.simpleMap(v.yr1,m.r2l),H=U[1]-U[0],F=z[1]-z[0];E[1]=(U[1]*(1-g)+g*z[1]-U[1])/(U[0]-U[1])*u,E[3]=u*(1-g+g*F/H),m.range[0]=p.l2r(U[0]*(1-g)+g*z[0]),m.range[1]=m.l2r(U[1]*(1-g)+g*z[1])}else E[1]=0,E[3]=u;x.drawOne(d,p,{skipTitle:!0}),x.drawOne(d,m,{skipTitle:!0}),x.redrawComponents(d,[p._id,m._id]);var N=S?w/E[2]:1,B=_?u/E[3]:1,j=S?E[0]:0,K=_?E[1]:0,G=S?E[0]/E[2]*w:0,V=_?E[1]/E[3]*u:0,W=p._offset-G,J=m._offset-V;y.clipRect.call(T.setTranslate,j,K).call(T.setScale,1/N,1/B),y.plot.call(T.setTranslate,W,J).call(T.setScale,N,B),T.setPointGroupScale(y.zoomScalePts,1/N,1/B),T.setTextPointsScale(y.zoomScaleTxt,1/N,1/B)}x.redrawComponents(d)}},951:function($,R,e){var k=e(73972).traceIs,A=e(4322);function l(x){return{v:"x",h:"y"}[x.orientation||"v"]}function T(x,d){var s=l(x),t=k(x,"box-violin"),o=k(x._fullInput||{},"candlestick");return t&&!o&&d===s&&x[s]===void 0&&x[s+"0"]===void 0}$.exports=function(x,d,s,t){s("autotypenumbers",t.autotypenumbersDflt),s("type",(t.splomStash||{}).type)==="-"&&(function(o,r){if(o.type==="-"){var n,a=o._id,i=a.charAt(0);a.indexOf("scene")!==-1&&(a=i);var c=function(m,w,u){for(var S=0;S<m.length;S++){var _=m[S];if(_.type==="splom"&&_._length>0&&(_["_"+u+"axes"]||{})[w]||(_[u+"axis"]||u)===w&&(T(_,u)||(_[u]||[]).length||_[u+"0"]))return _}}(r,a,i);if(c)if(c.type!=="histogram"||i!=={v:"y",h:"x"}[c.orientation||"v"]){var h=i+"calendar",f=c[h],b={noMultiCategory:!k(c,"cartesian")||k(c,"noMultiCategory")};if(c.type==="box"&&c._hasPreCompStats&&i==={h:"x",v:"y"}[c.orientation||"v"]&&(b.noMultiCategory=!0),b.autotypenumbers=o.autotypenumbers,T(c,i)){var v=l(c),g=[];for(n=0;n<r.length;n++){var y=r[n];k(y,"box-violin")&&(y[i+"axis"]||i)===a&&(y[v]!==void 0?g.push(y[v][0]):y.name!==void 0?g.push(y.name):g.push("text"),y[h]!==f&&(f=void 0))}o.type=A(g,f,b)}else if(c.type==="splom"){var p=c.dimensions[c._axesDim[a]];p.visible&&(o.type=A(p.values,f,b))}else o.type=A(c[i]||[c[i+"0"]],f,b)}else o.type="linear"}}(d,t.data),d.type==="-"?d.type="linear":x.type=d.type)}},31137:function($,R,e){var k=e(73972),A=e(71828);function l(s,t,o){var r,n,a,i=!1;if(t.type==="data")r=s._fullData[t.traces!==null?t.traces[0]:0];else{if(t.type!=="layout")return!1;r=s._fullLayout}return n=A.nestedProperty(r,t.prop).get(),(a=o[t.type]=o[t.type]||{}).hasOwnProperty(t.prop)&&a[t.prop]!==n&&(i=!0),a[t.prop]=n,{changed:i,value:n}}function T(s,t){var o=[],r=t[0],n={};if(typeof r=="string")n[r]=t[1];else{if(!A.isPlainObject(r))return o;n=r}return d(n,function(a,i,c){o.push({type:"layout",prop:a,value:c})},"",0),o}function x(s,t){var o,r,n,a,i=[];if(r=t[0],n=t[1],o=t[2],a={},typeof r=="string")a[r]=n;else{if(!A.isPlainObject(r))return i;a=r,o===void 0&&(o=n)}return o===void 0&&(o=null),d(a,function(c,h,f){var b,v;if(Array.isArray(f)){v=f.slice();var g=Math.min(v.length,s.data.length);o&&(g=Math.min(g,o.length)),b=[];for(var y=0;y<g;y++)b[y]=o?o[y]:y}else v=f,b=o?o.slice():null;if(b===null)Array.isArray(v)&&(v=v[0]);else if(Array.isArray(b)){if(!Array.isArray(v)){var p=v;v=[];for(var m=0;m<b.length;m++)v[m]=p}v.length=Math.min(b.length,v.length)}i.push({type:"data",prop:c,traces:b,value:v})},"",0),i}function d(s,t,o,r){Object.keys(s).forEach(function(n){var a=s[n];if(n[0]!=="_"){var i=o+(r>0?".":"")+n;A.isPlainObject(a)?d(a,t,i,r+1):t(i,n,a)}})}R.manageCommandObserver=function(s,t,o,r){var n={},a=!0;t&&t._commandObserver&&(n=t._commandObserver),n.cache||(n.cache={}),n.lookupTable={};var i=R.hasSimpleAPICommandBindings(s,o,n.lookupTable);if(t&&t._commandObserver){if(i)return n;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,n}if(i){l(s,i,n.cache),n.check=function(){if(a){var f=l(s,i,n.cache);return f.changed&&r&&n.lookupTable[f.value]!==void 0&&(n.disable(),Promise.resolve(r({value:f.value,type:i.type,prop:i.prop,traces:i.traces,index:n.lookupTable[f.value]})).then(n.enable,n.enable)),f.changed}};for(var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<c.length;h++)s._internalOn(c[h],n.check);n.remove=function(){for(var f=0;f<c.length;f++)s._removeInternalListener(c[f],n.check)}}else A.log("Unable to automatically bind plot updates to API command"),n.lookupTable={},n.remove=function(){};return n.disable=function(){a=!1},n.enable=function(){a=!0},t&&(t._commandObserver=n),n},R.hasSimpleAPICommandBindings=function(s,t,o){var r,n,a=t.length;for(r=0;r<a;r++){var i,c=t[r],h=c.method,f=c.args;if(Array.isArray(f)||(f=[]),!h)return!1;var b=R.computeAPICommandBindings(s,h,f);if(b.length!==1)return!1;if(n){if((i=b[0]).type!==n.type||i.prop!==n.prop)return!1;if(Array.isArray(n.traces)){if(!Array.isArray(i.traces))return!1;i.traces.sort();for(var v=0;v<n.traces.length;v++)if(n.traces[v]!==i.traces[v])return!1}else if(i.prop!==n.prop)return!1}else n=b[0],Array.isArray(n.traces)&&n.traces.sort();var g=(i=b[0]).value;if(Array.isArray(g)){if(g.length!==1)return!1;g=g[0]}o&&(o[g]=r)}return n},R.executeAPICommand=function(s,t,o){if(t==="skip")return Promise.resolve();var r=k.apiMethodRegistry[t],n=[s];Array.isArray(o)||(o=[]);for(var a=0;a<o.length;a++)n.push(o[a]);return r.apply(null,n).catch(function(i){return A.warn("API call to Plotly."+t+" rejected.",i),Promise.reject(i)})},R.computeAPICommandBindings=function(s,t,o){var r;switch(Array.isArray(o)||(o=[]),t){case"restyle":r=x(s,o);break;case"relayout":r=T(0,o);break;case"update":r=x(s,[o[0],o[2]]).concat(T(0,[o[1]]));break;case"animate":r=function(n,a){return Array.isArray(a[0])&&a[0].length===1&&["string","number"].indexOf(typeof a[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[]}(0,o);break;default:r=[]}return r}},27670:function($,R,e){var k=e(1426).extendFlat;R.Y=function(A,l){l=l||{};var T={valType:"info_array",editType:(A=A||{}).editType,items:[{valType:"number",min:0,max:1,editType:A.editType},{valType:"number",min:0,max:1,editType:A.editType}],dflt:[0,1]},x=(A.name&&A.name,A.trace,l.description&&l.description,{x:k({},T,{}),y:k({},T,{}),editType:A.editType});return A.noGridCell||(x.row={valType:"integer",min:0,dflt:0,editType:A.editType},x.column={valType:"integer",min:0,dflt:0,editType:A.editType}),x},R.c=function(A,l,T,x){var d=x&&x.x||[0,1],s=x&&x.y||[0,1],t=l.grid;if(t){var o=T("domain.column");o!==void 0&&(o<t.columns?d=t._domains.x[o]:delete A.domain.column);var r=T("domain.row");r!==void 0&&(r<t.rows?s=t._domains.y[r]:delete A.domain.row)}var n=T("domain.x",d),a=T("domain.y",s);n[0]<n[1]||(A.domain.x=d.slice()),a[0]<a[1]||(A.domain.y=s.slice())}},41940:function($){$.exports=function(R){var e=R.editType,k=R.colorEditType;k===void 0&&(k=e);var A={family:{valType:"string",noBlank:!0,strict:!0,editType:e},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:k},editType:e};return R.autoSize&&(A.size.dflt="auto"),R.autoColor&&(A.color.dflt="auto"),R.arrayOk&&(A.family.arrayOk=!0,A.size.arrayOk=!0,A.color.arrayOk=!0),A}},31391:function($){$.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function($,R){R.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},R.axesNames=["lonaxis","lataxis"],R.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},R.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},R.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},R.clipPad=.001,R.precision=.1,R.landColor="#F0DC82",R.waterColor="#3399FF",R.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},R.sphereSVG={type:"Sphere"},R.fillLayers={ocean:1,land:1,lakes:1},R.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},R.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],R.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],R.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function($,R,e){var k=e(39898),A=e(27362),l=A.geoPath,T=A.geoDistance,x=e(65704),d=e(73972),s=e(71828),t=s.strTranslate,o=e(7901),r=e(91424),n=e(30211),a=e(74875),i=e(89298),c=e(71739).getAutoRange,h=e(28569),f=e(47322).prepSelect,b=e(47322).clearOutline,v=e(47322).selectOnClick,g=e(74455),y=e(78776),p=e(41327),m=e(90973),w=e(96892).zL;function u(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=u.prototype;function _(E,L){var C=y.clipPad,P=E[0]+C,I=E[1]-C,U=L[0]+C,z=L[1]-C;P>0&&I<0&&(I+=360);var H=(I-P)/4;return{type:"Polygon",coordinates:[[[P,U],[P,z],[P+H,z],[P+2*H,z],[P+3*H,z],[I,z],[I,U],[I-H,U],[I-2*H,U],[I-3*H,U],[P,U]]]}}$.exports=function(E){return new u(E)},S.plot=function(E,L,C,P){var I=this;if(P)return I.update(E,L,!0);I._geoCalcData=E,I._fullLayout=L;var U=L[this.id],z=[],H=!1;for(var F in y.layerNameToAdjective)if(F!=="frame"&&U["show"+F]){H=!0;break}for(var N=!1,B=0;B<E.length;B++){var j=E[0][0].trace;j._geo=I,j.locationmode&&(H=!0);var K=j.marker;if(K){var G=K.angle,V=K.angleref;(G||V==="north"||V==="previous")&&(N=!0)}}if(this._hasMarkerAngles=N,H){var W=m.getTopojsonName(U);I.topojson!==null&&W===I.topojsonName||(I.topojsonName=W,PlotlyGeoAssets.topojson[I.topojsonName]===void 0&&z.push(I.fetchTopojson()))}z=z.concat(p.fetchTraceGeoData(E)),C.push(new Promise(function(J,X){Promise.all(z).then(function(){I.topojson=PlotlyGeoAssets.topojson[I.topojsonName],I.update(E,L),J()}).catch(X)}))},S.fetchTopojson=function(){var E=this,L=m.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(C,P){k.json(L,function(I,U){if(I)return I.status===404?P(new Error(["plotly.js could not find topojson file at",L+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):P(new Error(["unexpected error while fetching topojson file at",L].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=U,C()})})},S.update=function(E,L,C){var P=L[this.id];this.hasChoropleth=!1;for(var I=0;I<E.length;I++){var U=E[I],z=U[0].trace;z.type==="choropleth"&&(this.hasChoropleth=!0),z.visible===!0&&z._length>0&&z._module.calcGeoJSON(U,L)}if(!C){if(this.updateProjection(E,L))return;this.viewInitial&&this.scope===P.scope||this.saveViewInitial(P)}this.scope=P.scope,this.updateBaseLayers(L,P),this.updateDims(L,P),this.updateFx(L,P),a.generalUpdatePerTraceModule(this.graphDiv,this,E,P);var H=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=H.selectAll(".point"),this.dataPoints.text=H.selectAll("text"),this.dataPaths.line=H.selectAll(".js-line");var F=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=F.selectAll("path"),this._render()},S.updateProjection=function(E,L){var C=this.graphDiv,P=L[this.id],I=L._size,U=P.domain,z=P.projection,H=P.lonaxis,F=P.lataxis,N=H._ax,B=F._ax,j=this.projection=function(Te){var Q=Te.projection,oe=Q.type,ce=y.projNames[oe];ce="geo"+s.titleCase(ce);for(var me=(A[ce]||x[ce])(),Ae=Te._isSatellite?180*Math.acos(1/Q.distance)/Math.PI:Te._isClipped?y.lonaxisSpan[oe]/2:null,Ie=["center","rotate","parallels","clipExtent"],Ce=function(de){return de?me:[]},Re=0;Re<Ie.length;Re++){var le=Ie[Re];typeof me[le]!="function"&&(me[le]=Ce)}return me.isLonLatOverEdges=function(de){if(me(de)===null)return!0;if(Ae){var _e=me.rotate();return T(de,[-_e[0],-_e[1]])>Ae*Math.PI/180}return!1},me.getPath=function(){return l().projection(me)},me.getBounds=function(de){return me.getPath().bounds(de)},me.precision(y.precision),Te._isSatellite&&me.tilt(Q.tilt).distance(Q.distance),Ae&&me.clipAngle(Ae-y.clipPad),me}(P),K=[[I.l+I.w*U.x[0],I.t+I.h*(1-U.y[1])],[I.l+I.w*U.x[1],I.t+I.h*(1-U.y[0])]],G=P.center||{},V=z.rotation||{},W=H.range||[],J=F.range||[];if(P.fitbounds){N._length=K[1][0]-K[0][0],B._length=K[1][1]-K[0][1],N.range=c(C,N),B.range=c(C,B);var X=(N.range[0]+N.range[1])/2,ee=(B.range[0]+B.range[1])/2;if(P._isScoped)G={lon:X,lat:ee};else if(P._isClipped){G={lon:X,lat:ee},V={lon:X,lat:ee,roll:V.roll};var re=z.type,ie=y.lonaxisSpan[re]/2||180,se=y.lataxisSpan[re]/2||90;W=[X-ie,X+ie],J=[ee-se,ee+se]}else G={lon:X,lat:ee},V={lon:X,lat:V.lat,roll:V.roll}}j.center([G.lon-V.lon,G.lat-V.lat]).rotate([-V.lon,-V.lat,V.roll]).parallels(z.parallels);var fe=_(W,J);j.fitExtent(K,fe);var ye=this.bounds=j.getBounds(fe),ge=this.fitScale=j.scale(),he=j.translate();if(P.fitbounds){var ve=j.getBounds(_(N.range,B.range)),Oe=Math.min((ye[1][0]-ye[0][0])/(ve[1][0]-ve[0][0]),(ye[1][1]-ye[0][1])/(ve[1][1]-ve[0][1]));isFinite(Oe)?j.scale(Oe*ge):s.warn("Something went wrong during"+this.id+"fitbounds computations.")}else j.scale(z.scale*ge);var xe=this.midPt=[(ye[0][0]+ye[1][0])/2,(ye[0][1]+ye[1][1])/2];if(j.translate([he[0]+(xe[0]-he[0]),he[1]+(xe[1]-he[1])]).clipExtent(ye),P._isAlbersUsa){var ke=j([G.lon,G.lat]),Me=j.translate();j.translate([Me[0]-(ke[0]-Me[0]),Me[1]-(ke[1]-Me[1])])}},S.updateBaseLayers=function(E,L){var C=this,P=C.topojson,I=C.layers,U=C.basePaths;function z(j){return j==="lonaxis"||j==="lataxis"}function H(j){return Boolean(y.lineLayers[j])}function F(j){return Boolean(y.fillLayers[j])}var N=(this.hasChoropleth?y.layersForChoropleth:y.layers).filter(function(j){return H(j)||F(j)?L["show"+j]:!z(j)||L[j].showgrid}),B=C.framework.selectAll(".layer").data(N,String);B.exit().each(function(j){delete I[j],delete U[j],k.select(this).remove()}),B.enter().append("g").attr("class",function(j){return"layer "+j}).each(function(j){var K=I[j]=k.select(this);j==="bg"?C.bgRect=K.append("rect").style("pointer-events","all"):z(j)?U[j]=K.append("path").style("fill","none"):j==="backplot"?K.append("g").classed("choroplethlayer",!0):j==="frontplot"?K.append("g").classed("scatterlayer",!0):H(j)?U[j]=K.append("path").style("fill","none").style("stroke-miterlimit",2):F(j)&&(U[j]=K.append("path").style("stroke","none"))}),B.order(),B.each(function(j){var K=U[j],G=y.layerNameToAdjective[j];j==="frame"?K.datum(y.sphereSVG):H(j)||F(j)?K.datum(w(P,P.objects[j])):z(j)&&K.datum(function(V,W,J){var X,ee,re,ie=W[V],se=y.scopeDefaults[W.scope];V==="lonaxis"?(X=se.lonaxisRange,ee=se.lataxisRange,re=function(Me,Te){return[Me,Te]}):V==="lataxis"&&(X=se.lataxisRange,ee=se.lonaxisRange,re=function(Me,Te){return[Te,Me]});var fe={type:"linear",range:[X[0],X[1]-1e-6],tick0:ie.tick0,dtick:ie.dtick};i.setConvert(fe,J);var ye=i.calcTicks(fe);W.isScoped||V!=="lonaxis"||ye.pop();for(var ge=ye.length,he=new Array(ge),ve=0;ve<ge;ve++)for(var Oe=ye[ve].x,xe=he[ve]=[],ke=ee[0];ke<ee[1]+2.5;ke+=2.5)xe.push(re(Oe,ke));return{type:"MultiLineString",coordinates:he}}(j,L,E)).call(o.stroke,L[j].gridcolor).call(r.dashLine,L[j].griddash,L[j].gridwidth),H(j)?K.call(o.stroke,L[G+"color"]).call(r.dashLine,"",L[G+"width"]):F(j)&&K.call(o.fill,L[G+"color"])})},S.updateDims=function(E,L){var C=this.bounds,P=(L.framewidth||0)/2,I=C[0][0]-P,U=C[0][1]-P,z=C[1][0]-I+P,H=C[1][1]-U+P;r.setRect(this.clipRect,I,U,z,H),this.bgRect.call(r.setRect,I,U,z,H).call(o.fill,L.bgcolor),this.xaxis._offset=I,this.xaxis._length=z,this.yaxis._offset=U,this.yaxis._length=H},S.updateFx=function(E,L){var C=this,P=C.graphDiv,I=C.bgRect,U=E.dragmode,z=E.clickmode;if(!C.isStatic){var H={element:C.bgRect.node(),gd:P,plotinfo:{id:C.id,xaxis:C.xaxis,yaxis:C.yaxis,fillRangeItems:function(N,B){B.isRect?(N.range={})[C.id]=[F([B.xmin,B.ymin]),F([B.xmax,B.ymax])]:(N.lassoPoints={})[C.id]=B.map(F)}},xaxes:[C.xaxis],yaxes:[C.yaxis],subplot:C.id,clickFn:function(N){N===2&&b(P)}};U==="pan"?(I.node().onmousedown=null,I.call(g(C,L)),I.on("dblclick.zoom",function(){var N=C.viewInitial,B={};for(var j in N)B[C.id+"."+j]=N[j];d.call("_guiRelayout",P,B),P.emit("plotly_doubleclick",null)}),P._context._scrollZoom.geo||I.on("wheel.zoom",null)):U!=="select"&&U!=="lasso"||(I.on(".zoom",null),H.prepFn=function(N,B,j){f(N,B,j,H,U)},h.init(H)),I.on("mousemove",function(){var N=C.projection.invert(s.getPositionFromD3Event());if(!N)return h.unhover(P,k.event);C.xaxis.p2c=function(){return N[0]},C.yaxis.p2c=function(){return N[1]},n.hover(P,k.event,C.id)}),I.on("mouseout",function(){P._dragging||h.unhover(P,k.event)}),I.on("click",function(){U!=="select"&&U!=="lasso"&&(z.indexOf("select")>-1&&v(k.event,P,[C.xaxis],[C.yaxis],C.id,H),z.indexOf("event")>-1&&n.click(P,k.event))})}function F(N){return C.projection.invert([N[0]+C.xaxis._offset,N[1]+C.yaxis._offset])}},S.makeFramework=function(){var E=this,L=E.graphDiv,C=L._fullLayout,P="clip"+C._uid+E.id;E.clipDef=C._clips.append("clipPath").attr("id",P),E.clipRect=E.clipDef.append("rect"),E.framework=k.select(E.container).append("g").attr("class","geo "+E.id).call(r.setClipUrl,P,L),E.project=function(I){var U=E.projection(I);return U?[U[0]-E.xaxis._offset,U[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(I){return E.project(I)[0]}},E.yaxis={_id:"y",c2p:function(I){return E.project(I)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},i.setConvert(E.mockAxis,C)},S.saveViewInitial=function(E){var L,C=E.center||{},P=E.projection,I=P.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":P.scale},L=E._isScoped?{"center.lon":C.lon,"center.lat":C.lat}:E._isClipped?{"projection.rotation.lon":I.lon,"projection.rotation.lat":I.lat}:{"center.lon":C.lon,"center.lat":C.lat,"projection.rotation.lon":I.lon},s.extendFlat(this.viewInitial,L)},S.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var E,L=this.projection,C=L.getPath();function P(U){var z=L(U.lonlat);return z?t(z[0],z[1]):null}function I(U){return L.isLonLatOverEdges(U.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",C);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(U){return C(U.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",I).attr("transform",P)}},44622:function($,R,e){var k=e(27659).AU,A=e(71828).counterRegex,l=e(69082),T="geo",x=A(T),d={};d.geo={valType:"subplotid",dflt:T,editType:"calc"},$.exports={attr:T,name:T,idRoot:T,idRegex:x,attrRegex:x,attributes:d,layoutAttributes:e(77519),supplyLayoutDefaults:e(82161),plot:function(s){for(var t=s._fullLayout,o=s.calcdata,r=t._subplots.geo,n=0;n<r.length;n++){var a=r[n],i=k(o,T,a),c=t[a]._subplot;c||(c=l({id:a,graphDiv:s,container:t._geolayer.node(),topojsonURL:s._context.topojsonURL,staticPlot:s._context.staticPlot}),t[a]._subplot=c),c.plot(i,t,s._promises)}},updateFx:function(s){for(var t=s._fullLayout,o=t._subplots.geo,r=0;r<o.length;r++){var n=t[o[r]];n._subplot.updateFx(t,n)}},clean:function(s,t,o,r){for(var n=r._subplots.geo||[],a=0;a<n.length;a++){var i=n[a],c=r[i]._subplot;!t[i]&&c&&(c.framework.remove(),c.clipDef.remove())}}}},77519:function($,R,e){var k=e(22399),A=e(27670).Y,l=e(79952).P,T=e(78776),x=e(30962).overrideAll,d=e(78607),s={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:k.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:l};($.exports=x({domain:A({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:d(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:d(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:k.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:k.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:k.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:k.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:k.background},lonaxis:s,lataxis:s},"plot","from-root")).uirevision={valType:"any",editType:"none"}},82161:function($,R,e){var k=e(71828),A=e(49119),l=e(27659).NG,T=e(78776),x=e(77519),d=T.axesNames;function s(t,o,r,n){var a=l(n.fullData,"geo",n.id).map(function(V){return V._expandedIndex}),i=r("resolution"),c=r("scope"),h=T.scopeDefaults[c],f=r("projection.type",h.projType),b=o._isAlbersUsa=f==="albers usa";b&&(c=o.scope="usa");var v=o._isScoped=c!=="world",g=o._isSatellite=f==="satellite",y=o._isConic=f.indexOf("conic")!==-1||f==="albers",p=o._isClipped=!!T.lonaxisSpan[f];if(t.visible===!1){var m=k.extendDeep({},o._template);m.showcoastlines=!1,m.showcountries=!1,m.showframe=!1,m.showlakes=!1,m.showland=!1,m.showocean=!1,m.showrivers=!1,m.showsubunits=!1,m.lonaxis&&(m.lonaxis.showgrid=!1),m.lataxis&&(m.lataxis.showgrid=!1),o._template=m}for(var w=r("visible"),u=0;u<d.length;u++){var S,_=d[u],E=[30,10][u];if(v)S=h[_+"Range"];else{var L=T[_+"Span"],C=(L[f]||L["*"])/2,P=r("projection.rotation."+_.substr(0,3),h.projRotate[u]);S=[P-C,P+C]}var I=r(_+".range",S);r(_+".tick0"),r(_+".dtick",E),r(_+".showgrid",!!w&&void 0)&&(r(_+".gridcolor"),r(_+".gridwidth"),r(_+".griddash")),o[_]._ax={type:"linear",_id:_.slice(0,3),_traceIndices:a,setScale:k.identity,c2l:k.identity,r2l:k.identity,autorange:!0,range:I.slice(),_m:1,_input:{}}}var U=o.lonaxis.range,z=o.lataxis.range,H=U[0],F=U[1];H>0&&F<0&&(F+=360);var N,B,j,K=(H+F)/2;if(!b){var G=v?h.projRotate:[K,0,0];N=r("projection.rotation.lon",G[0]),r("projection.rotation.lat",G[1]),r("projection.rotation.roll",G[2]),r("showcoastlines",!v&&w)&&(r("coastlinecolor"),r("coastlinewidth")),r("showocean",!!w&&void 0)&&r("oceancolor")}b?(B=-96.6,j=38.7):(B=v?K:N,j=(z[0]+z[1])/2),r("center.lon",B),r("center.lat",j),g&&(r("projection.tilt"),r("projection.distance")),y&&r("projection.parallels",h.projParallels||[0,60]),r("projection.scale"),r("showland",!!w&&void 0)&&r("landcolor"),r("showlakes",!!w&&void 0)&&r("lakecolor"),r("showrivers",!!w&&void 0)&&(r("rivercolor"),r("riverwidth")),r("showcountries",v&&c!=="usa"&&w)&&(r("countrycolor"),r("countrywidth")),(c==="usa"||c==="north america"&&i===50)&&(r("showsubunits",w),r("subunitcolor"),r("subunitwidth")),v||r("showframe",w)&&(r("framecolor"),r("framewidth")),r("bgcolor"),r("fitbounds")&&(delete o.projection.scale,v?(delete o.center.lon,delete o.center.lat):p?(delete o.center.lon,delete o.center.lat,delete o.projection.rotation.lon,delete o.projection.rotation.lat,delete o.lonaxis.range,delete o.lataxis.range):(delete o.center.lon,delete o.center.lat,delete o.projection.rotation.lon))}$.exports=function(t,o,r){A(t,o,r,{type:"geo",attributes:x,handleDefaults:s,fullData:r,partition:"y"})}},74455:function($,R,e){var k=e(39898),A=e(71828),l=e(73972),T=Math.PI/180,x=180/Math.PI,d={cursor:"pointer"},s={cursor:"auto"};function t(w,u){return k.behavior.zoom().translate(u.translate()).scale(u.scale())}function o(w,u,S){var _=w.id,E=w.graphDiv,L=E.layout,C=L[_],P=E._fullLayout,I=P[_],U={},z={};function H(F,N){U[_+"."+F]=A.nestedProperty(C,F).get(),l.call("_storeDirectGUIEdit",L,P._preGUI,U);var B=A.nestedProperty(I,F);B.get()!==N&&(B.set(N),A.nestedProperty(C,F).set(N),z[_+"."+F]=N)}S(H),H("projection.scale",u.scale()/w.fitScale),H("fitbounds",!1),E.emit("plotly_relayout",z)}function r(w,u){var S=t(0,u);function _(E){var L=u.invert(w.midPt);E("center.lon",L[0]),E("center.lat",L[1])}return S.on("zoomstart",function(){k.select(this).style(d)}).on("zoom",function(){u.scale(k.event.scale).translate(k.event.translate),w.render(!0);var E=u.invert(w.midPt);w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":u.scale()/w.fitScale,"geo.center.lon":E[0],"geo.center.lat":E[1]})}).on("zoomend",function(){k.select(this).style(s),o(w,u,_)}),S}function n(w,u){var S,_,E,L,C,P,I,U,z,H=t(0,u);function F(B){return u.invert(B)}function N(B){var j=u.rotate(),K=u.invert(w.midPt);B("projection.rotation.lon",-j[0]),B("center.lon",K[0]),B("center.lat",K[1])}return H.on("zoomstart",function(){k.select(this).style(d),S=k.mouse(this),_=u.rotate(),E=u.translate(),L=_,C=F(S)}).on("zoom",function(){if(P=k.mouse(this),function(K){var G=F(K);if(!G)return!0;var V=u(G);return Math.abs(V[0]-K[0])>2||Math.abs(V[1]-K[1])>2}(S))return H.scale(u.scale()),void H.translate(u.translate());u.scale(k.event.scale),u.translate([E[0],k.event.translate[1]]),C?F(P)&&(U=F(P),I=[L[0]+(U[0]-C[0]),_[1],_[2]],u.rotate(I),L=I):C=F(S=P),z=!0,w.render(!0);var B=u.rotate(),j=u.invert(w.midPt);w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":u.scale()/w.fitScale,"geo.center.lon":j[0],"geo.center.lat":j[1],"geo.projection.rotation.lon":-B[0]})}).on("zoomend",function(){k.select(this).style(s),z&&o(w,u,N)}),H}function a(w,u){var S;u.rotate(),u.scale();var _=t(0,u),E=function(H){for(var F=0,N=arguments.length,B=[];++F<N;)B.push(arguments[F]);var j=k.dispatch.apply(null,B);return j.of=function(K,G){return function(V){var W;try{W=V.sourceEvent=k.event,V.target=H,k.event=V,j[V.type].apply(K,G)}finally{k.event=W}}},j}(_,"zoomstart","zoom","zoomend"),L=0,C=_.on;function P(H){L++||H({type:"zoomstart"})}function I(H){H({type:"zoom"})}function U(H){--L||H({type:"zoomend"})}function z(H){var F=u.rotate();H("projection.rotation.lon",-F[0]),H("projection.rotation.lat",-F[1])}return _.on("zoomstart",function(){k.select(this).style(d);var H=k.mouse(this),F=u.rotate(),N=F,B=u.translate(),j=c(F);S=i(u,H),C.call(_,"zoom",function(){var K=k.mouse(this);if(u.scale(k.event.scale),S){if(i(u,K)){u.rotate(F).translate(B);var G=i(u,K),V=f(S,G),W=p(h(j,V)),J=b(W,S,N);isFinite(J[0])&&isFinite(J[1])&&isFinite(J[2])||(J=N),u.rotate(J),N=J}}else S=i(u,H=K);I(E.of(this,arguments))}),P(E.of(this,arguments))}).on("zoomend",function(){k.select(this).style(s),C.call(_,"zoom",null),U(E.of(this,arguments)),o(w,u,z)}).on("zoom.redraw",function(){w.render(!0);var H=u.rotate();w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":u.scale()/w.fitScale,"geo.projection.rotation.lon":-H[0],"geo.projection.rotation.lat":-H[1]})}),k.rebind(_,E,"on")}function i(w,u){var S=w.invert(u);return S&&isFinite(S[0])&&isFinite(S[1])&&function(_){var E=_[0]*T,L=_[1]*T,C=Math.cos(L);return[C*Math.cos(E),C*Math.sin(E),Math.sin(L)]}(S)}function c(w){var u=.5*w[0]*T,S=.5*w[1]*T,_=.5*w[2]*T,E=Math.sin(u),L=Math.cos(u),C=Math.sin(S),P=Math.cos(S),I=Math.sin(_),U=Math.cos(_);return[L*P*U+E*C*I,E*P*U-L*C*I,L*C*U+E*P*I,L*P*I-E*C*U]}function h(w,u){var S=w[0],_=w[1],E=w[2],L=w[3],C=u[0],P=u[1],I=u[2],U=u[3];return[S*C-_*P-E*I-L*U,S*P+_*C+E*U-L*I,S*I-_*U+E*C+L*P,S*U+_*I-E*P+L*C]}function f(w,u){if(w&&u){var S=function(C,P){return[C[1]*P[2]-C[2]*P[1],C[2]*P[0]-C[0]*P[2],C[0]*P[1]-C[1]*P[0]]}(w,u),_=Math.sqrt(m(S,S)),E=.5*Math.acos(Math.max(-1,Math.min(1,m(w,u)))),L=Math.sin(E)/_;return _&&[Math.cos(E),S[2]*L,-S[1]*L,S[0]*L]}}function b(w,u,S){var _=y(u,2,w[0]);_=y(_,1,w[1]),_=y(_,0,w[2]-S[2]);var E,L,C=u[0],P=u[1],I=u[2],U=_[0],z=_[1],H=_[2],F=Math.atan2(P,C)*x,N=Math.sqrt(C*C+P*P);Math.abs(z)>N?(L=(z>0?90:-90)-F,E=0):(L=Math.asin(z/N)*x-F,E=Math.sqrt(N*N-z*z));var B=180-L-2*F,j=(Math.atan2(H,U)-Math.atan2(I,E))*x,K=(Math.atan2(H,U)-Math.atan2(I,-E))*x;return v(S[0],S[1],L,j)<=v(S[0],S[1],B,K)?[L,j,S[2]]:[B,K,S[2]]}function v(w,u,S,_){var E=g(S-w),L=g(_-u);return Math.sqrt(E*E+L*L)}function g(w){return(w%360+540)%360-180}function y(w,u,S){var _=S*T,E=w.slice(),L=u===0?1:0,C=u===2?1:2,P=Math.cos(_),I=Math.sin(_);return E[L]=w[L]*P-w[C]*I,E[C]=w[C]*P+w[L]*I,E}function p(w){return[Math.atan2(2*(w[0]*w[1]+w[2]*w[3]),1-2*(w[1]*w[1]+w[2]*w[2]))*x,Math.asin(Math.max(-1,Math.min(1,2*(w[0]*w[2]-w[3]*w[1]))))*x,Math.atan2(2*(w[0]*w[3]+w[1]*w[2]),1-2*(w[2]*w[2]+w[3]*w[3]))*x]}function m(w,u){for(var S=0,_=0,E=w.length;_<E;++_)S+=w[_]*u[_];return S}$.exports=function(w,u){var S=w.projection;return(u._isScoped?r:u._isClipped?a:n)(w,S)}},27659:function($,R,e){var k=e(73972),A=e(85555).SUBPLOT_PATTERN;R.AU=function(l,T,x){var d=k.subplotsRegistry[T];if(!d)return[];for(var s=d.attr,t=[],o=0;o<l.length;o++){var r=l[o];r[0].trace[s]===x&&t.push(r)}return t},R.a0=function(l,T){var x,d=[],s=[];if(!(x=typeof T=="string"?k.getModule(T).plot:typeof T=="function"?T:T.plot))return[d,l];for(var t=0;t<l.length;t++){var o=l[t],r=o[0].trace;r.visible===!0&&r._length!==0&&(r._module.plot===x?d.push(o):s.push(o))}return[d,s]},R.NG=function(l,T,x){if(!k.subplotsRegistry[T])return[];var d,s,t,o=k.subplotsRegistry[T].attr,r=[];if(T==="gl2d"){var n=x.match(A);s="x"+n[1],t="y"+n[2]}for(var a=0;a<l.length;a++)d=l[a],T==="gl2d"&&k.traceIs(d,"gl2d")?d[o[0]]===s&&d[o[1]]===t&&r.push(d):d[o]===x&&r.push(d);return r}},75071:function($,R,e){var k=e(16825),A=e(1195),l=e(48956),T=e(85555),x=e(38520);function d(s,t){this.element=s,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}$.exports=function(s){var t=s.mouseContainer,o=s.glplot,r=new d(t,o);function n(){s.xaxis.autorange=!1,s.yaxis.autorange=!1}function a(i,c,h){var f,b,v=s.calcDataBox(),g=o.viewBox,y=r.lastPos[0],p=r.lastPos[1],m=T.MINDRAG*o.pixelRatio,w=T.MINZOOM*o.pixelRatio;function u(P,I,U){var z=Math.min(I,U),H=Math.max(I,U);z!==H?(v[P]=z,v[P+2]=H,r.dataBox=v,s.setRanges(v)):(s.selectBox.selectBox=[0,0,1,1],s.glplot.setDirty())}switch(c*=o.pixelRatio,h*=o.pixelRatio,h=g[3]-g[1]-h,s.fullLayout.dragmode){case"zoom":if(i){var S=c/(g[2]-g[0])*(v[2]-v[0])+v[0],_=h/(g[3]-g[1])*(v[3]-v[1])+v[1];r.boxInited||(r.boxStart[0]=S,r.boxStart[1]=_,r.dragStart[0]=c,r.dragStart[1]=h),r.boxEnd[0]=S,r.boxEnd[1]=_,r.boxInited=!0,r.boxEnabled||r.boxStart[0]===r.boxEnd[0]&&r.boxStart[1]===r.boxEnd[1]||(r.boxEnabled=!0);var E=Math.abs(r.dragStart[0]-c)<w,L=Math.abs(r.dragStart[1]-h)<w;if(!function(){for(var P=s.graphDiv._fullLayout._axisConstraintGroups,I=s.xaxis._id,U=s.yaxis._id,z=0;z<P.length;z++)if(P[z][I]!==-1){if(P[z][U]!==-1)return!0;break}return!1}()||E&&L)E&&(r.boxEnd[0]=r.boxStart[0]),L&&(r.boxEnd[1]=r.boxStart[1]);else{f=r.boxEnd[0]-r.boxStart[0],b=r.boxEnd[1]-r.boxStart[1];var C=(v[3]-v[1])/(v[2]-v[0]);Math.abs(f*C)>Math.abs(b)?(r.boxEnd[1]=r.boxStart[1]+Math.abs(f)*C*(b>=0?1:-1),r.boxEnd[1]<v[1]?(r.boxEnd[1]=v[1],r.boxEnd[0]=r.boxStart[0]+(v[1]-r.boxStart[1])/Math.abs(C)):r.boxEnd[1]>v[3]&&(r.boxEnd[1]=v[3],r.boxEnd[0]=r.boxStart[0]+(v[3]-r.boxStart[1])/Math.abs(C))):(r.boxEnd[0]=r.boxStart[0]+Math.abs(b)/C*(f>=0?1:-1),r.boxEnd[0]<v[0]?(r.boxEnd[0]=v[0],r.boxEnd[1]=r.boxStart[1]+(v[0]-r.boxStart[0])*Math.abs(C)):r.boxEnd[0]>v[2]&&(r.boxEnd[0]=v[2],r.boxEnd[1]=r.boxStart[1]+(v[2]-r.boxStart[0])*Math.abs(C)))}}else r.boxEnabled?(f=r.boxStart[0]!==r.boxEnd[0],b=r.boxStart[1]!==r.boxEnd[1],f||b?(f&&(u(0,r.boxStart[0],r.boxEnd[0]),s.xaxis.autorange=!1),b&&(u(1,r.boxStart[1],r.boxEnd[1]),s.yaxis.autorange=!1),s.relayoutCallback()):s.glplot.setDirty(),r.boxEnabled=!1,r.boxInited=!1):r.boxInited&&(r.boxInited=!1);break;case"pan":r.boxEnabled=!1,r.boxInited=!1,i?(r.panning||(r.dragStart[0]=c,r.dragStart[1]=h),Math.abs(r.dragStart[0]-c)<m&&(c=r.dragStart[0]),Math.abs(r.dragStart[1]-h)<m&&(h=r.dragStart[1]),f=(y-c)*(v[2]-v[0])/(o.viewBox[2]-o.viewBox[0]),b=(p-h)*(v[3]-v[1])/(o.viewBox[3]-o.viewBox[1]),v[0]+=f,v[2]+=f,v[1]+=b,v[3]+=b,s.setRanges(v),r.panning=!0,r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations()):r.panning&&(r.panning=!1,s.relayoutCallback())}r.lastPos[0]=c,r.lastPos[1]=h}return r.mouseListener=k(t,a),t.addEventListener("touchstart",function(i){var c=l(i.changedTouches[0],t);a(0,c[0],c[1]),a(1,c[0],c[1]),i.preventDefault()},!!x&&{passive:!1}),t.addEventListener("touchmove",function(i){i.preventDefault();var c=l(i.changedTouches[0],t);a(1,c[0],c[1]),i.preventDefault()},!!x&&{passive:!1}),t.addEventListener("touchend",function(i){a(0,r.lastPos[0],r.lastPos[1]),i.preventDefault()},!!x&&{passive:!1}),r.wheelListener=A(t,function(i,c){if(!s.scrollZoom)return!1;var h=s.calcDataBox(),f=o.viewBox,b=r.lastPos[0],v=r.lastPos[1],g=Math.exp(5*c/(f[3]-f[1])),y=b/(f[2]-f[0])*(h[2]-h[0])+h[0],p=v/(f[3]-f[1])*(h[3]-h[1])+h[1];return h[0]=(h[0]-y)*g+y,h[2]=(h[2]-y)*g+y,h[1]=(h[1]-p)*g+p,h[3]=(h[3]-p)*g+p,s.setRanges(h),r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations(),s.relayoutCallback(),!0},!0),r}},82961:function($,R,e){var k=e(89298),A=e(78614);function l(d){this.scene=d,this.gl=d.gl,this.pixelRatio=d.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=l.prototype,x=["xaxis","yaxis"];T.merge=function(d){var s,t,o,r,n,a,i,c,h,f,b;for(this.titleEnable=!1,this.backgroundColor=A(d.plot_bgcolor),f=0;f<2;++f){var v=(s=x[f]).charAt(0);for(o=(t=d[this.scene[s]._name]).title.text===this.scene.fullLayout._dfltTitle[v]?"":t.title.text,b=0;b<=2;b+=2)this.labelEnable[f+b]=!1,this.labels[f+b]=o,this.labelColor[f+b]=A(t.title.font.color),this.labelFont[f+b]=t.title.font.family,this.labelSize[f+b]=t.title.font.size,this.labelPad[f+b]=this.getLabelPad(s,t),this.tickEnable[f+b]=!1,this.tickColor[f+b]=A((t.tickfont||{}).color),this.tickAngle[f+b]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[f+b]=this.getTickPad(t),this.tickMarkLength[f+b]=0,this.tickMarkWidth[f+b]=t.tickwidth||0,this.tickMarkColor[f+b]=A(t.tickcolor),this.borderLineEnable[f+b]=!1,this.borderLineColor[f+b]=A(t.linecolor),this.borderLineWidth[f+b]=t.linewidth||0;i=this.hasSharedAxis(t),n=this.hasAxisInDfltPos(s,t)&&!i,a=this.hasAxisInAltrPos(s,t)&&!i,r=t.mirror||!1,c=i?String(r).indexOf("all")!==-1:!!r,h=i?r==="allticks":String(r).indexOf("ticks")!==-1,n?this.labelEnable[f]=!0:a&&(this.labelEnable[f+2]=!0),n?this.tickEnable[f]=t.showticklabels:a&&(this.tickEnable[f+2]=t.showticklabels),(n||c)&&(this.borderLineEnable[f]=t.showline),(a||c)&&(this.borderLineEnable[f+2]=t.showline),(n||h)&&(this.tickMarkLength[f]=this.getTickMarkLength(t)),(a||h)&&(this.tickMarkLength[f+2]=this.getTickMarkLength(t)),this.gridLineEnable[f]=t.showgrid,this.gridLineColor[f]=A(t.gridcolor),this.gridLineWidth[f]=t.gridwidth,this.zeroLineEnable[f]=t.zeroline,this.zeroLineColor[f]=A(t.zerolinecolor),this.zeroLineWidth[f]=t.zerolinewidth}},T.hasSharedAxis=function(d){var s=this.scene,t=s.fullLayout._subplots.gl2d;return k.findSubplotsWithAxis(t,d).indexOf(s.id)!==0},T.hasAxisInDfltPos=function(d,s){var t=s.side;return d==="xaxis"?t==="bottom":d==="yaxis"?t==="left":void 0},T.hasAxisInAltrPos=function(d,s){var t=s.side;return d==="xaxis"?t==="top":d==="yaxis"?t==="right":void 0},T.getLabelPad=function(d,s){var t=1.5,o=s.title.font.size,r=s.showticklabels;return d==="xaxis"?s.side==="top"?o*(t+(r?1:0))-10:o*(t+(r?.5:0))-10:d==="yaxis"?s.side==="right"?10+o*(t+(r?1:.5)):10+o*(t+(r?.5:0)):void 0},T.getTickPad=function(d){return d.ticks==="outside"?10+d.ticklen:15},T.getTickMarkLength=function(d){if(!d.ticks)return 0;var s=d.ticklen;return d.ticks==="inside"?-s:s},$.exports=function(d){return new l(d)}},4796:function($,R,e){var k=e(30962).overrideAll,A=e(92918),l=e(10820),T=e(77922),x=e(85555),d=e(93612),s=e(528),t=e(27659).NG;R.name="gl2d",R.attr=["xaxis","yaxis"],R.idRoot=["x","y"],R.idRegex=x.idRegex,R.attrRegex=x.attrRegex,R.attributes=e(89502),R.supplyLayoutDefaults=function(o,r,n){r._has("cartesian")||d.supplyLayoutDefaults(o,r,n)},R.layoutAttrOverrides=k(d.layoutAttributes,"plot","from-root"),R.baseLayoutAttrOverrides=k({plot_bgcolor:l.plot_bgcolor,hoverlabel:s.hoverlabel},"plot","nested"),R.plot=function(o){for(var r=o._fullLayout,n=o._fullData,a=r._subplots.gl2d,i=0;i<a.length;i++){var c=a[i],h=r._plots[c],f=t(n,"gl2d",c),b=h._scene2d;b===void 0&&(b=new A({id:c,graphDiv:o,container:o.querySelector(".gl-container"),staticPlot:o._context.staticPlot,plotGlPixelRatio:o._context.plotGlPixelRatio},r),h._scene2d=b),b.plot(f,o.calcdata,r,o.layout)}},R.clean=function(o,r,n,a){for(var i=a._subplots.gl2d||[],c=0;c<i.length;c++){var h=i[c],f=a._plots[h];if(f._scene2d){var b=t(o,"gl2d",h);b.length===0&&(f._scene2d.destroy(),delete a._plots[h])}}d.clean.apply(this,arguments)},R.drawFramework=function(o){o._context.staticPlot||d.drawFramework(o)},R.toSVG=function(o){for(var r=o._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++){var i=r._plots[n[a]]._scene2d,c=i.toImage("png");r._glimages.append("svg:image").attr({xmlns:T.svg,"xlink:href":c,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),i.destroy()}},R.updateFx=function(o){for(var r=o._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++)r._plots[n[a]]._scene2d.updateFx(r.dragmode)}},92918:function($,R,e){var k,A,l=e(73972),T=e(89298),x=e(30211),d=e(9330).gl_plot2d,s=e(9330).gl_spikes2d,t=e(9330).gl_select_box,o=e(40372),r=e(82961),n=e(75071),a=e(58617),i=e(99082),c=i.enforce,h=i.clean,f=e(71739).doAutoRange,b=e(64505),v=b.drawMode,g=b.selectMode,y=["xaxis","yaxis"],p=e(85555).SUBPLOT_PATTERN;function m(u,S){this.container=u.container,this.graphDiv=u.graphDiv,this.pixelRatio=u.plotGlPixelRatio||window.devicePixelRatio,this.id=u.id,this.staticPlot=!!u.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(S),this.makeFramework(),this.stopped||(this.glplotOptions=r(this),this.glplotOptions.merge(S),this.glplot=d(this.glplotOptions),this.camera=n(this),this.traces={},this.spikes=s(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}$.exports=m;var w=m.prototype;w.makeFramework=function(){if(this.staticPlot){if(!(A||(k=document.createElement("canvas"),A=o({canvas:k,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=k,this.gl=A}else{var u=this.container.querySelector(".gl-canvas-focus"),S=o({canvas:u,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!S)return a(this),void(this.stopped=!0);this.canvas=u,this.gl=S}var _=this.canvas;_.style.width="100%",_.style.height="100%",_.style.position="absolute",_.style.top="0px",_.style.left="0px",_.style["pointer-events"]="none",this.updateSize(_);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var L=this.mouseContainer=document.createElement("div");L.style.position="absolute",L.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var C=this.container;C.appendChild(E),C.appendChild(L);var P=this;L.addEventListener("mouseout",function(){P.isMouseOver=!1,P.unhover()}),L.addEventListener("mouseover",function(){P.isMouseOver=!0})},w.toImage=function(u){u||(u="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(k),this.updateSize(this.canvas);var S=this.glplot.gl,_=S.drawingBufferWidth,E=S.drawingBufferHeight;S.clearColor(1,1,1,0),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),S.bindFramebuffer(S.FRAMEBUFFER,null);var L=new Uint8Array(_*E*4);S.readPixels(0,0,_,E,S.RGBA,S.UNSIGNED_BYTE,L);for(var C=0,P=E-1;C<P;++C,--P)for(var I=0;I<_;++I)for(var U=0;U<4;++U){var z=L[4*(_*C+I)+U];L[4*(_*C+I)+U]=L[4*(_*P+I)+U],L[4*(_*P+I)+U]=z}var H=document.createElement("canvas");H.width=_,H.height=E;var F,N=H.getContext("2d",{willReadFrequently:!0}),B=N.createImageData(_,E);switch(B.data.set(L),N.putImageData(B,0,0),u){case"jpeg":F=H.toDataURL("image/jpeg");break;case"webp":F=H.toDataURL("image/webp");break;default:F=H.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(k),F},w.updateSize=function(u){u||(u=this.canvas);var S=this.pixelRatio,_=this.fullLayout,E=_.width,L=_.height,C=0|Math.ceil(S*E),P=0|Math.ceil(S*L);return u.width===C&&u.height===P||(u.width=C,u.height=P),u},w.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var u=[T.calcTicks(this.xaxis),T.calcTicks(this.yaxis)],S=0;S<2;++S)for(var _=0;_<u[S].length;++_)u[S][_].text=u[S][_].text+"";return u},w.updateRefs=function(u){this.fullLayout=u;var S=this.id.match(p),_="xaxis"+S[1],E="yaxis"+S[2];this.xaxis=this.fullLayout[_],this.yaxis=this.fullLayout[E]},w.relayoutCallback=function(){var u=this.graphDiv,S=this.xaxis,_=this.yaxis,E=u.layout,L={},C=L[S._name+".range"]=S.range.slice(),P=L[_._name+".range"]=_.range.slice();L[S._name+".autorange"]=S.autorange,L[_._name+".autorange"]=_.autorange,l.call("_storeDirectGUIEdit",u.layout,u._fullLayout._preGUI,L);var I=E[S._name];I.range=C,I.autorange=S.autorange;var U=E[_._name];U.range=P,U.autorange=_.autorange,L.lastInputTime=this.camera.lastInputTime,u.emit("plotly_relayout",L)},w.cameraChanged=function(){var u=this.camera;this.glplot.setDataBox(this.calcDataBox());var S=this.computeTickMarks();(function(_,E){for(var L=0;L<2;++L){var C=_[L],P=E[L];if(C.length!==P.length)return!0;for(var I=0;I<C.length;++I)if(C[I].x!==P[I].x)return!0}return!1})(S,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=S,this.glplotOptions.dataBox=u.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},w.handleAnnotations=function(){for(var u=this.graphDiv,S=this.fullLayout.annotations,_=0;_<S.length;_++){var E=S[_];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&l.getComponentMethod("annotations","drawOne")(u,_)}},w.destroy=function(){if(this.glplot){var u=this.traces;u&&Object.keys(u).map(function(S){u[S].dispose(),delete u[S]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},w.plot=function(u,S,_){var E=this.glplot;this.updateRefs(_),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(u,S),this.updateFx(_.dragmode);var L=_.width,C=_.height;this.updateSize(this.canvas);var P=this.glplotOptions;P.merge(_),P.screenBox=[0,0,L,C];var I={_fullLayout:{_axisConstraintGroups:_._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:_._size}};h(I,this.xaxis),h(I,this.yaxis);var U,z,H=_._size,F=this.xaxis.domain,N=this.yaxis.domain;for(P.viewBox=[H.l+F[0]*H.w,H.b+N[0]*H.h,L-H.r-(1-F[1])*H.w,C-H.t-(1-N[1])*H.h],this.mouseContainer.style.width=H.w*(F[1]-F[0])+"px",this.mouseContainer.style.height=H.h*(N[1]-N[0])+"px",this.mouseContainer.height=H.h*(N[1]-N[0]),this.mouseContainer.style.left=H.l+F[0]*H.w+"px",this.mouseContainer.style.top=H.t+(1-N[1])*H.h+"px",z=0;z<2;++z)(U=this[y[z]])._length=P.viewBox[z+2]-P.viewBox[z],f(this.graphDiv,U),U.setScale();c(I),P.ticks=this.computeTickMarks(),P.dataBox=this.calcDataBox(),P.merge(_),E.update(P),this.glplot.draw()},w.calcDataBox=function(){var u=this.xaxis,S=this.yaxis,_=u.range,E=S.range,L=u.r2l,C=S.r2l;return[L(_[0]),C(E[0]),L(_[1]),C(E[1])]},w.setRanges=function(u){var S=this.xaxis,_=this.yaxis,E=S.l2r,L=_.l2r;S.range=[E(u[0]),E(u[2])],_.range=[L(u[1]),L(u[3])]},w.updateTraces=function(u,S){var _,E,L,C=Object.keys(this.traces);this.fullData=u;e:for(_=0;_<C.length;_++){var P=C[_],I=this.traces[P];for(E=0;E<u.length;E++)if((L=u[E]).uid===P&&L.type===I.type)continue e;I.dispose(),delete this.traces[P]}for(_=0;_<u.length;_++){L=u[_];var U=S[_],z=this.traces[L.uid];z?z.update(L,U):(z=L._module.plot(this,L,U),this.traces[L.uid]=z)}this.glplot.objects.sort(function(H,F){return H._trace.index-F._trace.index})},w.updateFx=function(u){g(u)||v(u)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=u==="pan"?"move":u==="zoom"?"crosshair":null},w.emitPointAction=function(u,S){for(var _,E=u.trace.uid,L=u.pointIndex,C=0;C<this.fullData.length;C++)this.fullData[C].uid===E&&(_=this.fullData[C]);var P={x:u.traceCoord[0],y:u.traceCoord[1],curveNumber:_.index,pointNumber:L,data:_._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};x.appendArrayPointValue(P,_,L),this.graphDiv.emit(S,{points:[P]})},w.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var u=this.glplot,S=this.camera,_=S.mouseListener,E=this.lastButtonState===1&&_.buttons===0,L=this.fullLayout;this.lastButtonState=_.buttons,this.cameraChanged();var C,P=_.x*u.pixelRatio,I=this.canvas.height-u.pixelRatio*_.y;if(S.boxEnabled&&L.dragmode==="zoom"){this.selectBox.enabled=!0;for(var U=this.selectBox.selectBox=[Math.min(S.boxStart[0],S.boxEnd[0]),Math.min(S.boxStart[1],S.boxEnd[1]),Math.max(S.boxStart[0],S.boxEnd[0]),Math.max(S.boxStart[1],S.boxEnd[1])],z=0;z<2;z++)S.boxStart[z]===S.boxEnd[z]&&(U[z]=u.dataBox[z],U[z+2]=u.dataBox[z+2]);u.setDirty()}else if(!S.panning&&this.isMouseOver){this.selectBox.enabled=!1;var H=L._size,F=this.xaxis.domain,N=this.yaxis.domain,B=(C=u.pick(P/u.pixelRatio+H.l+F[0]*H.w,I/u.pixelRatio-(H.t+(1-N[1])*H.h)))&&C.object._trace.handlePick(C);if(B&&E&&this.emitPointAction(B,"plotly_click"),C&&C.object._trace.hoverinfo!=="skip"&&L.hovermode&&B&&(!this.lastPickResult||this.lastPickResult.traceUid!==B.trace.uid||this.lastPickResult.dataCoord[0]!==B.dataCoord[0]||this.lastPickResult.dataCoord[1]!==B.dataCoord[1])){var j=B;this.lastPickResult={traceUid:B.trace?B.trace.uid:null,dataCoord:B.dataCoord.slice()},this.spikes.update({center:C.dataCoord}),j.screenCoord=[((u.viewBox[2]-u.viewBox[0])*(C.dataCoord[0]-u.dataBox[0])/(u.dataBox[2]-u.dataBox[0])+u.viewBox[0])/u.pixelRatio,(this.canvas.height-(u.viewBox[3]-u.viewBox[1])*(C.dataCoord[1]-u.dataBox[1])/(u.dataBox[3]-u.dataBox[1])-u.viewBox[1])/u.pixelRatio],this.emitPointAction(B,"plotly_hover");var K=this.fullData[j.trace.index]||{},G=j.pointIndex,V=x.castHoverinfo(K,L,G);if(V&&V!=="all"){var W=V.split("+");W.indexOf("x")===-1&&(j.traceCoord[0]=void 0),W.indexOf("y")===-1&&(j.traceCoord[1]=void 0),W.indexOf("z")===-1&&(j.traceCoord[2]=void 0),W.indexOf("text")===-1&&(j.textLabel=void 0),W.indexOf("name")===-1&&(j.name=void 0)}x.loneHover({x:j.screenCoord[0],y:j.screenCoord[1],xLabel:this.hoverFormatter("xaxis",j.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",j.traceCoord[1]),zLabel:j.traceCoord[2],text:j.textLabel,name:j.name,color:x.castHoverOption(K,G,"bgcolor")||j.color,borderColor:x.castHoverOption(K,G,"bordercolor"),fontFamily:x.castHoverOption(K,G,"font.family"),fontSize:x.castHoverOption(K,G,"font.size"),fontColor:x.castHoverOption(K,G,"font.color"),nameLength:x.castHoverOption(K,G,"namelength"),textAlign:x.castHoverOption(K,G,"align")},{container:this.svgContainer,gd:this.graphDiv})}}C||this.unhover(),u.draw()}},w.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),x.loneUnhover(this.svgContainer))},w.hoverFormatter=function(u,S){if(S!==void 0){var _=this[u];return T.tickText(_,_.c2l(S),"hover").text}}},58547:function($,R,e){var k=e(30962).overrideAll,A=e(528),l=e(33539),T=e(27659).NG,x=e(71828),d=e(77922),s="gl3d",t="scene";R.name=s,R.attr=t,R.idRoot=t,R.idRegex=R.attrRegex=x.counterRegex("scene"),R.attributes=e(59084),R.layoutAttributes=e(65500),R.baseLayoutAttrOverrides=k({hoverlabel:A.hoverlabel},"plot","nested"),R.supplyLayoutDefaults=e(24682),R.plot=function(o){for(var r=o._fullLayout,n=o._fullData,a=r._subplots.gl3d,i=0;i<a.length;i++){var c=a[i],h=T(n,s,c),f=r[c],b=f.camera,v=f._scene;v||(v=new l({id:c,graphDiv:o,container:o.querySelector(".gl-container"),staticPlot:o._context.staticPlot,plotGlPixelRatio:o._context.plotGlPixelRatio,camera:b},r),f._scene=v),v.viewInitial||(v.viewInitial={up:{x:b.up.x,y:b.up.y,z:b.up.z},eye:{x:b.eye.x,y:b.eye.y,z:b.eye.z},center:{x:b.center.x,y:b.center.y,z:b.center.z}}),v.plot(h,r,o.layout)}},R.clean=function(o,r,n,a){for(var i=a._subplots.gl3d||[],c=0;c<i.length;c++){var h=i[c];!r[h]&&a[h]._scene&&(a[h]._scene.destroy(),a._infolayer&&a._infolayer.selectAll(".annotation-"+h).remove())}},R.toSVG=function(o){for(var r=o._fullLayout,n=r._subplots.gl3d,a=r._size,i=0;i<n.length;i++){var c=r[n[i]],h=c.domain,f=c._scene,b=f.toImage("png");r._glimages.append("svg:image").attr({xmlns:d.svg,"xlink:href":b,x:a.l+a.w*h.x[0],y:a.t+a.h*(1-h.y[1]),width:a.w*(h.x[1]-h.x[0]),height:a.h*(h.y[1]-h.y[0]),preserveAspectRatio:"none"}),f.destroy()}},R.cleanId=function(o){if(o.match(/^scene[0-9]*$/)){var r=o.substr(5);return r==="1"&&(r=""),t+r}},R.updateFx=function(o){for(var r=o._fullLayout,n=r._subplots.gl3d,a=0;a<n.length;a++)r[n[a]]._scene.updateFx(r.dragmode,r.hovermode)}},59084:function($){$.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function($,R,e){var k=e(7901),A=e(13838),l=e(1426).extendFlat,T=e(30962).overrideAll;$.exports=T({visible:A.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:k.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:A.color,categoryorder:A.categoryorder,categoryarray:A.categoryarray,title:{text:A.title.text,font:A.title.font},type:l({},A.type,{values:["-","linear","log","date","category"]}),autotypenumbers:A.autotypenumbers,autorange:A.autorange,rangemode:A.rangemode,range:l({},A.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:A.minor.tickmode,nticks:A.nticks,tick0:A.tick0,dtick:A.dtick,tickvals:A.tickvals,ticktext:A.ticktext,ticks:A.ticks,mirror:A.mirror,ticklen:A.ticklen,tickwidth:A.tickwidth,tickcolor:A.tickcolor,showticklabels:A.showticklabels,tickfont:A.tickfont,tickangle:A.tickangle,tickprefix:A.tickprefix,showtickprefix:A.showtickprefix,ticksuffix:A.ticksuffix,showticksuffix:A.showticksuffix,showexponent:A.showexponent,exponentformat:A.exponentformat,minexponent:A.minexponent,separatethousands:A.separatethousands,tickformat:A.tickformat,tickformatstops:A.tickformatstops,hoverformat:A.hoverformat,showline:A.showline,linecolor:A.linecolor,linewidth:A.linewidth,showgrid:A.showgrid,gridcolor:l({},A.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:A.gridwidth,zeroline:A.zeroline,zerolinecolor:A.zerolinecolor,zerolinewidth:A.zerolinewidth,_deprecated:{title:A._deprecated.title,titlefont:A._deprecated.titlefont}},"plot","from-root")},3277:function($,R,e){var k=e(84267).mix,A=e(71828),l=e(44467),T=e(77894),x=e(951),d=e(71453),s=["xaxis","yaxis","zaxis"];$.exports=function(t,o,r){var n,a;function i(f,b){return A.coerce(n,a,T,f,b)}for(var c=0;c<s.length;c++){var h=s[c];n=t[h]||{},(a=l.newContainer(o,h))._id=h[0]+r.scene,a._name=h,x(n,a,i,r),d(n,a,i,{font:r.font,letter:h[0],data:r.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),i("gridcolor",k(a.color,r.bgColor,72.72727272727273).toRgbString()),i("title.text",h[0]),a.setScale=A.noop,i("showspikes")&&(i("spikesides"),i("spikethickness"),i("spikecolor",a.color)),i("showaxeslabels"),i("showbackground")&&i("backgroundcolor")}}},30422:function($,R,e){var k=e(78614),A=e(71828),l=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}T.prototype.merge=function(x,d){for(var s=this,t=0;t<3;++t){var o=d[l[t]];o.visible?(s.labels[t]=x._meta?A.templateString(o.title.text,x._meta):o.title.text,"font"in o.title&&(o.title.font.color&&(s.labelColor[t]=k(o.title.font.color)),o.title.font.family&&(s.labelFont[t]=o.title.font.family),o.title.font.size&&(s.labelSize[t]=o.title.font.size)),"showline"in o&&(s.lineEnable[t]=o.showline),"linecolor"in o&&(s.lineColor[t]=k(o.linecolor)),"linewidth"in o&&(s.lineWidth[t]=o.linewidth),"showgrid"in o&&(s.gridEnable[t]=o.showgrid),"gridcolor"in o&&(s.gridColor[t]=k(o.gridcolor)),"gridwidth"in o&&(s.gridWidth[t]=o.gridwidth),o.type==="log"?s.zeroEnable[t]=!1:"zeroline"in o&&(s.zeroEnable[t]=o.zeroline),"zerolinecolor"in o&&(s.zeroLineColor[t]=k(o.zerolinecolor)),"zerolinewidth"in o&&(s.zeroLineWidth[t]=o.zerolinewidth),"ticks"in o&&o.ticks?s.lineTickEnable[t]=!0:s.lineTickEnable[t]=!1,"ticklen"in o&&(s.lineTickLength[t]=s._defaultLineTickLength[t]=o.ticklen),"tickcolor"in o&&(s.lineTickColor[t]=k(o.tickcolor)),"tickwidth"in o&&(s.lineTickWidth[t]=o.tickwidth),"tickangle"in o&&(s.tickAngle[t]=o.tickangle==="auto"?-3600:Math.PI*-o.tickangle/180),"showticklabels"in o&&(s.tickEnable[t]=o.showticklabels),"tickfont"in o&&(o.tickfont.color&&(s.tickColor[t]=k(o.tickfont.color)),o.tickfont.family&&(s.tickFont[t]=o.tickfont.family),o.tickfont.size&&(s.tickSize[t]=o.tickfont.size)),"mirror"in o?["ticks","all","allticks"].indexOf(o.mirror)!==-1?(s.lineTickMirror[t]=!0,s.lineMirror[t]=!0):o.mirror===!0?(s.lineTickMirror[t]=!1,s.lineMirror[t]=!0):(s.lineTickMirror[t]=!1,s.lineMirror[t]=!1):s.lineMirror[t]=!1,"showbackground"in o&&o.showbackground!==!1?(s.backgroundEnable[t]=!0,s.backgroundColor[t]=k(o.backgroundcolor)):s.backgroundEnable[t]=!1):(s.tickEnable[t]=!1,s.labelEnable[t]=!1,s.lineEnable[t]=!1,s.lineTickEnable[t]=!1,s.gridEnable[t]=!1,s.zeroEnable[t]=!1,s.backgroundEnable[t]=!1)}},$.exports=function(x,d){var s=new T;return s.merge(x,d),s}},24682:function($,R,e){var k=e(71828),A=e(7901),l=e(73972),T=e(49119),x=e(3277),d=e(65500),s=e(27659).NG,t="gl3d";function o(r,n,a,i){for(var c=a("bgcolor"),h=A.combine(c,i.paper_bgcolor),f=["up","center","eye"],b=0;b<f.length;b++)a("camera."+f[b]+".x"),a("camera."+f[b]+".y"),a("camera."+f[b]+".z");a("camera.projection.type");var v=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),g=a("aspectmode",v?"manual":"auto");v||(r.aspectratio=n.aspectratio={x:1,y:1,z:1},g==="manual"&&(n.aspectmode="auto"),r.aspectmode=n.aspectmode);var y=s(i.fullData,t,i.id);x(r,n,{font:i.font,scene:i.id,data:y,bgColor:h,calendar:i.calendar,autotypenumbersDflt:i.autotypenumbersDflt,fullLayout:i.fullLayout}),l.getComponentMethod("annotations3d","handleDefaults")(r,n,i);var p=i.getDfltFromLayout("dragmode");if(p!==!1&&!p)if(p="orbit",r.camera&&r.camera.up){var m=r.camera.up.x,w=r.camera.up.y,u=r.camera.up.z;u!==0&&(m&&w&&u?u/Math.sqrt(m*m+w*w+u*u)>.999&&(p="turntable"):p="turntable")}else p="turntable";a("dragmode",p),a("hovermode",i.getDfltFromLayout("hovermode"))}$.exports=function(r,n,a){var i=n._basePlotModules.length>1;T(r,n,a,{type:t,attributes:d,handleDefaults:o,fullLayout:n,font:n.font,fullData:a,getDfltFromLayout:function(c){if(!i)return k.validate(r[c],d[c])?r[c]:void 0},autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,calendar:n.calendar})}},65500:function($,R,e){var k=e(77894),A=e(27670).Y,l=e(1426).extendFlat,T=e(71828).counterRegex;function x(d,s,t){return{x:{valType:"number",dflt:d,editType:"camera"},y:{valType:"number",dflt:s,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}$.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:l(x(0,0,1),{}),center:l(x(0,0,0),{}),eye:l(x(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:A({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:k,yaxis:k,zaxis:k,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function($,R,e){var k=e(78614),A=["xaxis","yaxis","zaxis"];function l(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}l.prototype.merge=function(T){for(var x=0;x<3;++x){var d=T[A[x]];d.visible?(this.enabled[x]=d.showspikes,this.colors[x]=k(d.spikecolor),this.drawSides[x]=d.spikesides,this.lineWidth[x]=d.spikethickness):(this.enabled[x]=!1,this.drawSides[x]=!1)}},$.exports=function(T){var x=new l;return x.merge(T),x}},96085:function($,R,e){$.exports=function(x){for(var d=x.axesOptions,s=x.glplot.axesPixels,t=x.fullSceneLayout,o=[[],[],[]],r=0;r<3;++r){var n=t[l[r]];if(n._length=(s[r].hi-s[r].lo)*s[r].pixelsPerDataUnit/x.dataScale[r],Math.abs(n._length)===1/0||isNaN(n._length))o[r]=[];else{n._input_range=n.range.slice(),n.range[0]=s[r].lo/x.dataScale[r],n.range[1]=s[r].hi/x.dataScale[r],n._m=1/(x.dataScale[r]*s[r].pixelsPerDataUnit),n.range[0]===n.range[1]&&(n.range[0]-=1,n.range[1]+=1);var a=n.tickmode;if(n.tickmode==="auto"){n.tickmode="linear";var i=n.nticks||A.constrain(n._length/40,4,9);k.autoTicks(n,Math.abs(n.range[1]-n.range[0])/i)}for(var c=k.calcTicks(n,{msUTC:!0}),h=0;h<c.length;++h)c[h].x=c[h].x*x.dataScale[r],n.type==="date"&&(c[h].text=c[h].text.replace(/\<br\>/g," "));o[r]=c,n.tickmode=a}}for(d.ticks=o,r=0;r<3;++r)for(T[r]=.5*(x.glplot.bounds[0][r]+x.glplot.bounds[1][r]),h=0;h<2;++h)d.bounds[h][r]=x.glplot.bounds[h][r];x.contourLevels=function(f){for(var b=new Array(3),v=0;v<3;++v){for(var g=f[v],y=new Array(g.length),p=0;p<g.length;++p)y[p]=g[p].x;b[v]=y}return b}(o)};var k=e(89298),A=e(71828),l=["xaxis","yaxis","zaxis"],T=[0,0,0]},63538:function($){function R(e,k){var A,l,T=[0,0,0,0];for(A=0;A<4;++A)for(l=0;l<4;++l)T[l]+=e[4*A+l]*k[A];return T}$.exports=function(e,k){return R(e.projection,R(e.view,R(e.model,[k[0],k[1],k[2],1])))}},33539:function($,R,e){var k,A,l=e(9330).gl_plot3d,T=l.createCamera,x=l.createScene,d=e(40372),s=e(38520),t=e(73972),o=e(71828),r=o.preserveDrawingBuffer(),n=e(89298),a=e(30211),i=e(78614),c=e(58617),h=e(63538),f=e(30422),b=e(13133),v=e(96085);function g(u,S){var _=document.createElement("div"),E=u.container;this.graphDiv=u.graphDiv;var L=document.createElementNS("http://www.w3.org/2000/svg","svg");L.style.position="absolute",L.style.top=L.style.left="0px",L.style.width=L.style.height="100%",L.style["z-index"]=20,L.style["pointer-events"]="none",_.appendChild(L),this.svgContainer=L,_.id=u.id,_.style.position="absolute",_.style.top=_.style.left="0px",_.style.width=_.style.height="100%",E.appendChild(_),this.fullLayout=S,this.id=u.id||"scene",this.fullSceneLayout=S[this.id],this.plotArgs=[[],{},{}],this.axesOptions=f(S,S[this.id]),this.spikeOptions=b(S[this.id]),this.container=_,this.staticMode=!!u.staticPlot,this.pixelRatio=this.pixelRatio||u.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var y=g.prototype;y.prepareOptions=function(){var u=this,S={canvas:u.canvas,gl:u.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:u.container,axes:u.axesOptions,spikes:u.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:u.camera,pixelRatio:u.pixelRatio};if(u.staticMode){if(!(A||(k=document.createElement("canvas"),A=d({canvas:k,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");S.gl=A,S.canvas=k}return S};var p=!0;y.tryCreatePlot=function(){var u=this,S=u.prepareOptions(),_=!0;try{u.glplot=x(S)}catch{if(u.staticMode||!p||r)_=!1;else{o.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=S.glOptions.preserveDrawingBuffer=!0,u.glplot=x(S)}catch{r=S.glOptions.preserveDrawingBuffer=!1,_=!1}}}return p=!1,_},y.initializeGLCamera=function(){var u=this,S=u.fullSceneLayout.camera,_=S.projection.type==="orthographic";u.camera=T(u.container,{center:[S.center.x,S.center.y,S.center.z],eye:[S.eye.x,S.eye.y,S.eye.z],up:[S.up.x,S.up.y,S.up.z],_ortho:_,zoomMin:.01,zoomMax:100,mode:"orbit"})},y.initializeGLPlot=function(){var u=this;if(u.initializeGLCamera(),!u.tryCreatePlot())return c(u);u.traces={},u.make4thDimension();var S=u.graphDiv,_=S.layout,E=function(){var C={};return u.isCameraChanged(_)&&(C[u.id+".camera"]=u.getCamera()),u.isAspectChanged(_)&&(C[u.id+".aspectratio"]=u.glplot.getAspectratio(),_[u.id].aspectmode!=="manual"&&(u.fullSceneLayout.aspectmode=_[u.id].aspectmode=C[u.id+".aspectmode"]="manual")),C},L=function(C){if(C.fullSceneLayout.dragmode!==!1){var P=E();C.saveLayout(_),C.graphDiv.emit("plotly_relayout",P)}};return u.glplot.canvas&&(u.glplot.canvas.addEventListener("mouseup",function(){L(u)}),u.glplot.canvas.addEventListener("wheel",function(C){if(S._context._scrollZoom.gl3d){if(u.camera._ortho){var P=C.deltaX>C.deltaY?1.1:.9090909090909091,I=u.glplot.getAspectratio();u.glplot.setAspectratio({x:P*I.x,y:P*I.y,z:P*I.z})}L(u)}},!!s&&{passive:!1}),u.glplot.canvas.addEventListener("mousemove",function(){if(u.fullSceneLayout.dragmode!==!1&&u.camera.mouseListener.buttons!==0){var C=E();u.graphDiv.emit("plotly_relayouting",C)}}),u.staticMode||u.glplot.canvas.addEventListener("webglcontextlost",function(C){S&&S.emit&&S.emit("plotly_webglcontextlost",{event:C,layer:u.id})},!1)),u.glplot.oncontextloss=function(){u.recoverContext()},u.glplot.onrender=function(){u.render()},!0},y.render=function(){var u,S=this,_=S.graphDiv,E=S.svgContainer,L=S.container.getBoundingClientRect();_._fullLayout._calcInverseTransform(_);var C=_._fullLayout._invScaleX,P=_._fullLayout._invScaleY,I=L.width*C,U=L.height*P;E.setAttributeNS(null,"viewBox","0 0 "+I+" "+U),E.setAttributeNS(null,"width",I),E.setAttributeNS(null,"height",U),v(S),S.glplot.axes.update(S.axesOptions);for(var z=Object.keys(S.traces),H=null,F=S.glplot.selection,N=0;N<z.length;++N)(u=S.traces[z[N]]).data.hoverinfo!=="skip"&&u.handlePick(F)&&(H=u),u.setContourLevels&&u.setContourLevels();function B(ye,ge,he){var ve=S.fullSceneLayout[ye+"axis"];return ve.type!=="log"&&(ge=ve.d2l(ge)),n.hoverLabelText(ve,ge,he)}if(H!==null){var j=h(S.glplot.cameraParams,F.dataCoordinate);u=H.data;var K,G=_._fullData[u.index],V=F.index,W={xLabel:B("x",F.traceCoordinate[0],u.xhoverformat),yLabel:B("y",F.traceCoordinate[1],u.yhoverformat),zLabel:B("z",F.traceCoordinate[2],u.zhoverformat)},J=a.castHoverinfo(G,S.fullLayout,V),X=(J||"").split("+"),ee=J&&J==="all";G.hovertemplate||ee||(X.indexOf("x")===-1&&(W.xLabel=void 0),X.indexOf("y")===-1&&(W.yLabel=void 0),X.indexOf("z")===-1&&(W.zLabel=void 0),X.indexOf("text")===-1&&(F.textLabel=void 0),X.indexOf("name")===-1&&(H.name=void 0));var re=[];u.type==="cone"||u.type==="streamtube"?(W.uLabel=B("x",F.traceCoordinate[3],u.uhoverformat),(ee||X.indexOf("u")!==-1)&&re.push("u: "+W.uLabel),W.vLabel=B("y",F.traceCoordinate[4],u.vhoverformat),(ee||X.indexOf("v")!==-1)&&re.push("v: "+W.vLabel),W.wLabel=B("z",F.traceCoordinate[5],u.whoverformat),(ee||X.indexOf("w")!==-1)&&re.push("w: "+W.wLabel),W.normLabel=F.traceCoordinate[6].toPrecision(3),(ee||X.indexOf("norm")!==-1)&&re.push("norm: "+W.normLabel),u.type==="streamtube"&&(W.divergenceLabel=F.traceCoordinate[7].toPrecision(3),(ee||X.indexOf("divergence")!==-1)&&re.push("divergence: "+W.divergenceLabel)),F.textLabel&&re.push(F.textLabel),K=re.join("<br>")):u.type==="isosurface"||u.type==="volume"?(W.valueLabel=n.hoverLabelText(S._mockAxis,S._mockAxis.d2l(F.traceCoordinate[3]),u.valuehoverformat),re.push("value: "+W.valueLabel),F.textLabel&&re.push(F.textLabel),K=re.join("<br>")):K=F.textLabel;var ie={x:F.traceCoordinate[0],y:F.traceCoordinate[1],z:F.traceCoordinate[2],data:G._input,fullData:G,curveNumber:G.index,pointNumber:V};a.appendArrayPointValue(ie,G,V),u._module.eventData&&(ie=G._module.eventData(ie,F,G,{},V));var se={points:[ie]};if(S.fullSceneLayout.hovermode){var fe=[];a.loneHover({trace:G,x:(.5+.5*j[0]/j[3])*I,y:(.5-.5*j[1]/j[3])*U,xLabel:W.xLabel,yLabel:W.yLabel,zLabel:W.zLabel,text:K,name:H.name,color:a.castHoverOption(G,V,"bgcolor")||H.color,borderColor:a.castHoverOption(G,V,"bordercolor"),fontFamily:a.castHoverOption(G,V,"font.family"),fontSize:a.castHoverOption(G,V,"font.size"),fontColor:a.castHoverOption(G,V,"font.color"),nameLength:a.castHoverOption(G,V,"namelength"),textAlign:a.castHoverOption(G,V,"align"),hovertemplate:o.castOption(G,V,"hovertemplate"),hovertemplateLabels:o.extendFlat({},ie,W),eventData:[ie]},{container:E,gd:_,inOut_bbox:fe}),ie.bbox=fe[0]}F.buttons&&F.distance<5?_.emit("plotly_click",se):_.emit("plotly_hover",se),this.oldEventData=se}else a.loneUnhover(E),this.oldEventData&&_.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;S.drawAnnotations(S)},y.recoverContext=function(){var u=this;u.glplot.dispose();var S=function(){u.glplot.gl.isContextLost()?requestAnimationFrame(S):u.initializeGLPlot()?u.plot.apply(u,u.plotArgs):o.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(S)};var m=["xaxis","yaxis","zaxis"];function w(u,S,_){for(var E=u.fullSceneLayout,L=0;L<3;L++){var C=m[L],P=C.charAt(0),I=E[C],U=S[P],z=S[P+"calendar"],H=S["_"+P+"length"];if(o.isArrayOrTypedArray(U))for(var F,N=0;N<(H||U.length);N++)if(o.isArrayOrTypedArray(U[N]))for(var B=0;B<U[N].length;++B)F=I.d2l(U[N][B],0,z),!isNaN(F)&&isFinite(F)&&(_[0][L]=Math.min(_[0][L],F),_[1][L]=Math.max(_[1][L],F));else F=I.d2l(U[N],0,z),!isNaN(F)&&isFinite(F)&&(_[0][L]=Math.min(_[0][L],F),_[1][L]=Math.max(_[1][L],F));else _[0][L]=Math.min(_[0][L],0),_[1][L]=Math.max(_[1][L],H-1)}}y.plot=function(u,S,_){var E=this;if(E.plotArgs=[u,S,_],!E.glplot.contextLost){var L,C,P,I,U,z,H=S[E.id],F=_[E.id];E.fullLayout=S,E.fullSceneLayout=H,E.axesOptions.merge(S,H),E.spikeOptions.merge(H),E.setViewport(H),E.updateFx(H.dragmode,H.hovermode),E.camera.enableWheel=E.graphDiv._context._scrollZoom.gl3d,E.glplot.setClearColor(i(H.bgcolor)),E.setConvert(U),u?Array.isArray(u)||(u=[u]):u=[];var N=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(P=0;P<u.length;++P)(L=u[P]).visible===!0&&L._length!==0&&w(this,L,N);(function(ce,me){for(var Ae=ce.fullSceneLayout,Ie=Ae.annotations||[],Ce=0;Ce<3;Ce++)for(var Re=m[Ce],le=Re.charAt(0),de=Ae[Re],_e=0;_e<Ie.length;_e++){var Fe=Ie[_e];if(Fe.visible){var Ve=de.r2l(Fe[le]);!isNaN(Ve)&&isFinite(Ve)&&(me[0][Ce]=Math.min(me[0][Ce],Ve),me[1][Ce]=Math.max(me[1][Ce],Ve))}}})(this,N);var B=[1,1,1];for(I=0;I<3;++I)N[1][I]===N[0][I]?B[I]=1:B[I]=1/(N[1][I]-N[0][I]);for(E.dataScale=B,E.convertAnnotations(this),P=0;P<u.length;++P)(L=u[P]).visible===!0&&L._length!==0&&((C=E.traces[L.uid])?C.data.type===L.type?C.update(L):(C.dispose(),C=L._module.plot(this,L),E.traces[L.uid]=C):(C=L._module.plot(this,L),E.traces[L.uid]=C),C.name=L.name);var j=Object.keys(E.traces);e:for(P=0;P<j.length;++P){for(I=0;I<u.length;++I)if(u[I].uid===j[P]&&u[I].visible===!0&&u[I]._length!==0)continue e;(C=E.traces[j[P]]).dispose(),delete E.traces[j[P]]}E.glplot.objects.sort(function(ce,me){return ce._trace.data.index-me._trace.data.index});var K,G=[[0,0,0],[0,0,0]],V=[],W={};for(P=0;P<3;++P){if((z=(U=H[m[P]]).type)in W?(W[z].acc*=B[P],W[z].count+=1):W[z]={acc:B[P],count:1},U.autorange){G[0][P]=1/0,G[1][P]=-1/0;var J=E.glplot.objects,X=E.fullSceneLayout.annotations||[],ee=U._name.charAt(0);for(I=0;I<J.length;I++){var re=J[I],ie=re.bounds,se=re._trace.data._pad||0;re.constructor.name==="ErrorBars"&&U._lowerLogErrorBound?G[0][P]=Math.min(G[0][P],U._lowerLogErrorBound):G[0][P]=Math.min(G[0][P],ie[0][P]/B[P]-se),G[1][P]=Math.max(G[1][P],ie[1][P]/B[P]+se)}for(I=0;I<X.length;I++){var fe=X[I];if(fe.visible){var ye=U.r2l(fe[ee]);G[0][P]=Math.min(G[0][P],ye),G[1][P]=Math.max(G[1][P],ye)}}if("rangemode"in U&&U.rangemode==="tozero"&&(G[0][P]=Math.min(G[0][P],0),G[1][P]=Math.max(G[1][P],0)),G[0][P]>G[1][P])G[0][P]=-1,G[1][P]=1;else{var ge=G[1][P]-G[0][P];G[0][P]-=ge/32,G[1][P]+=ge/32}if(U.autorange==="reversed"){var he=G[0][P];G[0][P]=G[1][P],G[1][P]=he}}else{var ve=U.range;G[0][P]=U.r2l(ve[0]),G[1][P]=U.r2l(ve[1])}G[0][P]===G[1][P]&&(G[0][P]-=1,G[1][P]+=1),V[P]=G[1][P]-G[0][P],E.glplot.setBounds(P,{min:G[0][P]*B[P],max:G[1][P]*B[P]})}var Oe=H.aspectmode;if(Oe==="cube")K=[1,1,1];else if(Oe==="manual"){var xe=H.aspectratio;K=[xe.x,xe.y,xe.z]}else{if(Oe!=="auto"&&Oe!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var ke=[1,1,1];for(P=0;P<3;++P){var Me=W[z=(U=H[m[P]]).type];ke[P]=Math.pow(Me.acc,1/Me.count)/B[P]}K=Oe==="data"||Math.max.apply(null,ke)/Math.min.apply(null,ke)<=4?ke:[1,1,1]}H.aspectratio.x=F.aspectratio.x=K[0],H.aspectratio.y=F.aspectratio.y=K[1],H.aspectratio.z=F.aspectratio.z=K[2],E.glplot.setAspectratio(H.aspectratio),E.viewInitial.aspectratio||(E.viewInitial.aspectratio={x:H.aspectratio.x,y:H.aspectratio.y,z:H.aspectratio.z}),E.viewInitial.aspectmode||(E.viewInitial.aspectmode=H.aspectmode);var Te=H.domain||null,Q=S._size||null;if(Te&&Q){var oe=E.container.style;oe.position="absolute",oe.left=Q.l+Te.x[0]*Q.w+"px",oe.top=Q.t+(1-Te.y[1])*Q.h+"px",oe.width=Q.w*(Te.x[1]-Te.x[0])+"px",oe.height=Q.h*(Te.y[1]-Te.y[0])+"px"}E.glplot.redraw()}},y.destroy=function(){var u=this;u.glplot&&(u.camera.mouseListener.enabled=!1,u.container.removeEventListener("wheel",u.camera.wheelListener),u.camera=null,u.glplot.dispose(),u.container.parentNode.removeChild(u.container),u.glplot=null)},y.getCamera=function(){var u,S=this;return S.camera.view.recalcMatrix(S.camera.view.lastT()),{up:{x:(u=S.camera).up[0],y:u.up[1],z:u.up[2]},center:{x:u.center[0],y:u.center[1],z:u.center[2]},eye:{x:u.eye[0],y:u.eye[1],z:u.eye[2]},projection:{type:u._ortho===!0?"orthographic":"perspective"}}},y.setViewport=function(u){var S,_=this,E=u.camera;_.camera.lookAt.apply(this,[[(S=E).eye.x,S.eye.y,S.eye.z],[S.center.x,S.center.y,S.center.z],[S.up.x,S.up.y,S.up.z]]),_.glplot.setAspectratio(u.aspectratio),E.projection.type==="orthographic"!==_.camera._ortho&&(_.glplot.redraw(),_.glplot.clearRGBA(),_.glplot.dispose(),_.initializeGLPlot())},y.isCameraChanged=function(u){var S=this.getCamera(),_=o.nestedProperty(u,this.id+".camera").get();function E(I,U,z,H){var F=["up","center","eye"],N=["x","y","z"];return U[F[z]]&&I[F[z]][N[H]]===U[F[z]][N[H]]}var L=!1;if(_===void 0)L=!0;else{for(var C=0;C<3;C++)for(var P=0;P<3;P++)if(!E(S,_,C,P)){L=!0;break}(!_.projection||S.projection&&S.projection.type!==_.projection.type)&&(L=!0)}return L},y.isAspectChanged=function(u){var S=this.glplot.getAspectratio(),_=o.nestedProperty(u,this.id+".aspectratio").get();return _===void 0||_.x!==S.x||_.y!==S.y||_.z!==S.z},y.saveLayout=function(u){var S,_,E,L,C,P,I=this,U=I.fullLayout,z=I.isCameraChanged(u),H=I.isAspectChanged(u),F=z||H;if(F){var N={};z&&(S=I.getCamera(),E=(_=o.nestedProperty(u,I.id+".camera")).get(),N[I.id+".camera"]=E),H&&(L=I.glplot.getAspectratio(),P=(C=o.nestedProperty(u,I.id+".aspectratio")).get(),N[I.id+".aspectratio"]=P),t.call("_storeDirectGUIEdit",u,U._preGUI,N),z&&(_.set(S),o.nestedProperty(U,I.id+".camera").set(S)),H&&(C.set(L),o.nestedProperty(U,I.id+".aspectratio").set(L),I.glplot.redraw())}return F},y.updateFx=function(u,S){var _=this,E=_.camera;if(E)if(u==="orbit")E.mode="orbit",E.keyBindingMode="rotate";else if(u==="turntable"){E.up=[0,0,1],E.mode="turntable",E.keyBindingMode="rotate";var L=_.graphDiv,C=L._fullLayout,P=_.fullSceneLayout.camera,I=P.up.x,U=P.up.y,z=P.up.z;if(z/Math.sqrt(I*I+U*U+z*z)<.999){var H=_.id+".camera.up",F={x:0,y:0,z:1},N={};N[H]=F;var B=L.layout;t.call("_storeDirectGUIEdit",B,C._preGUI,N),P.up=F,o.nestedProperty(B,H).set(F)}}else E.keyBindingMode=u;_.fullSceneLayout.hovermode=S},y.toImage=function(u){var S=this;u||(u="png"),S.staticMode&&S.container.appendChild(k),S.glplot.redraw();var _=S.glplot.gl,E=_.drawingBufferWidth,L=_.drawingBufferHeight;_.bindFramebuffer(_.FRAMEBUFFER,null);var C=new Uint8Array(E*L*4);_.readPixels(0,0,E,L,_.RGBA,_.UNSIGNED_BYTE,C),function(H,F,N){for(var B=0,j=N-1;B<j;++B,--j)for(var K=0;K<F;++K)for(var G=0;G<4;++G){var V=4*(F*B+K)+G,W=4*(F*j+K)+G,J=H[V];H[V]=H[W],H[W]=J}}(C,E,L),function(H,F,N){for(var B=0;B<N;++B)for(var j=0;j<F;++j){var K=4*(F*B+j),G=H[K+3];if(G>0)for(var V=255/G,W=0;W<3;++W)H[K+W]=Math.min(V*H[K+W],255)}}(C,E,L);var P=document.createElement("canvas");P.width=E,P.height=L;var I,U=P.getContext("2d",{willReadFrequently:!0}),z=U.createImageData(E,L);switch(z.data.set(C),U.putImageData(z,0,0),u){case"jpeg":I=P.toDataURL("image/jpeg");break;case"webp":I=P.toDataURL("image/webp");break;default:I=P.toDataURL("image/png")}return S.staticMode&&S.container.removeChild(k),I},y.setConvert=function(){for(var u=0;u<3;u++){var S=this.fullSceneLayout[m[u]];n.setConvert(S,this.fullLayout),S.setScale=o.noop}},y.make4thDimension=function(){var u=this,S=u.graphDiv._fullLayout;u._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},n.setConvert(u._mockAxis,S)},$.exports=g},90060:function($){$.exports=function(R,e,k,A){A=A||R.length;for(var l=new Array(A),T=0;T<A;T++)l[T]=[R[T],e[T],k[T]];return l}},10820:function($,R,e){var k=e(41940),A=e(85594),l=e(22399),T=e(29241),x=e(53777),d=e(35025),s=e(1426).extendFlat,t=k({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=l.defaultLine,$.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:k({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s(d({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:l.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:l.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:l.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:x.newselection,activeselection:x.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s({},A.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:k({editType:"layoutstyle"})}}},77734:function($,R,e){var k=e(78607),A=' <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',l=[' <a target="_blank" href="https://carto.com/">Carto</a>',A].join(" "),T=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),x={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:A,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:l,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:l,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:T,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:T,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},d=k(x);$.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:x,styleValuesNonMapbox:d,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",d.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},13056:function($,R,e){var k=e(71828);$.exports=function(A,l){var T=A.split(" "),x=T[0],d=T[1],s=k.isArrayOrTypedArray(l)?k.mean(l):l,t=.5+s/100,o=1.5+s/100,r=["",""],n=[0,0];switch(x){case"top":r[0]="top",n[1]=-o;break;case"bottom":r[0]="bottom",n[1]=o}switch(d){case"left":r[1]="right",n[0]=-t;break;case"right":r[1]="left",n[0]=t}return{anchor:r[0]&&r[1]?r.join("-"):r[0]?r[0]:r[1]?r[1]:"center",offset:n}}},50101:function($,R,e){var k=e(44517),A=e(71828),l=A.strTranslate,T=A.strScale,x=e(27659).AU,d=e(77922),s=e(39898),t=e(91424),o=e(63893),r=e(10481),n="mapbox",a=R.constants=e(77734);function i(c){return typeof c=="string"&&(a.styleValuesMapbox.indexOf(c)!==-1||c.indexOf("mapbox://")===0)}R.name=n,R.attr="subplot",R.idRoot=n,R.idRegex=R.attrRegex=A.counterRegex(n),R.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},R.layoutAttributes=e(23585),R.supplyLayoutDefaults=e(77882),R.plot=function(c){var h=c._fullLayout,f=c.calcdata,b=h._subplots.mapbox;if(k.version!==a.requiredVersion)throw new Error(a.wrongVersionErrorMsg);var v=function(u,S){var _=u._fullLayout;if(u._context.mapboxAccessToken==="")return"";for(var E=[],L=[],C=!1,P=!1,I=0;I<S.length;I++){var U=_[S[I]],z=U.accesstoken;i(U.style)&&(z?A.pushUnique(E,z):(i(U._input.style)&&(A.error("Uses Mapbox map style, but did not set an access token."),C=!0),P=!0)),z&&A.pushUnique(L,z)}if(P){var H=C?a.noAccessTokenErrorMsg:a.missingStyleErrorMsg;throw A.error(H),new Error(H)}return E.length?(E.length>1&&A.warn(a.multipleTokensErrorMsg),E[0]):(L.length&&A.log(["Listed mapbox access token(s)",L.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(c,b);k.accessToken=v;for(var g=0;g<b.length;g++){var y=b[g],p=x(f,n,y),m=h[y],w=m._subplot;w||(w=new r(c,y),h[y]._subplot=w),w.viewInitial||(w.viewInitial={center:A.extendFlat({},m.center),zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),w.plot(p,h,c._promises)}},R.clean=function(c,h,f,b){for(var v=b._subplots.mapbox||[],g=0;g<v.length;g++){var y=v[g];!h[y]&&b[y]._subplot&&b[y]._subplot.destroy()}},R.toSVG=function(c){for(var h=c._fullLayout,f=h._subplots.mapbox,b=h._size,v=0;v<f.length;v++){var g=h[f[v]],y=g.domain,p=g._subplot.toImage("png");h._glimages.append("svg:image").attr({xmlns:d.svg,"xlink:href":p,x:b.l+b.w*y.x[0],y:b.t+b.h*(1-y.y[1]),width:b.w*(y.x[1]-y.x[0]),height:b.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"});var m=s.select(g._subplot.div);if(m.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var w=h._glimages.append("g");w.attr("transform",l(b.l+b.w*y.x[0]+10,b.t+b.h*(1-y.y[0])-31)),w.append("path").attr("d",a.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),w.append("path").attr("d",a.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),w.append("path").attr("d",a.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),w.append("polygon").attr("points",a.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var u=m.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),S=h._glimages.append("g"),_=S.append("text");_.text(u).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":u});var E=t.bBox(_.node()),L=b.w*(y.x[1]-y.x[0]);if(E.width>L/2){var C=u.split("|").join("<br>");_.text(C).attr("data-unformatted",C).call(o.convertToTspans,c),E=t.bBox(_.node())}_.attr("transform",l(-3,8-E.height)),S.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var P=1;E.width+6>L&&(P=L/(E.width+6));var I=[b.l+b.w*y.x[1],b.t+b.h*(1-y.y[0])];S.attr("transform",l(I[0],I[1])+T(P))}},R.updateFx=function(c){for(var h=c._fullLayout,f=h._subplots.mapbox,b=0;b<f.length;b++)h[f[b]]._subplot.updateFx(h)}},67911:function($,R,e){var k=e(71828),A=e(63893).sanitizeHTML,l=e(13056),T=e(77734);function x(o,r){this.subplot=o,this.uid=o.uid+"-"+r,this.index=r,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var d=x.prototype;function s(o){if(!o.visible)return!1;var r=o.source;if(Array.isArray(r)&&r.length>0){for(var n=0;n<r.length;n++)if(typeof r[n]!="string"||r[n].length===0)return!1;return!0}return k.isPlainObject(r)||typeof r=="string"&&r.length>0}function t(o){var r={},n={};switch(o.type){case"circle":k.extendFlat(n,{"circle-radius":o.circle.radius,"circle-color":o.color,"circle-opacity":o.opacity});break;case"line":k.extendFlat(n,{"line-width":o.line.width,"line-color":o.color,"line-opacity":o.opacity,"line-dasharray":o.line.dash});break;case"fill":k.extendFlat(n,{"fill-color":o.color,"fill-outline-color":o.fill.outlinecolor,"fill-opacity":o.opacity});break;case"symbol":var a=o.symbol,i=l(a.textposition,a.iconsize);k.extendFlat(r,{"icon-image":a.icon+"-15","icon-size":a.iconsize/10,"text-field":a.text,"text-size":a.textfont.size,"text-anchor":i.anchor,"text-offset":i.offset,"symbol-placement":a.placement}),k.extendFlat(n,{"icon-color":o.color,"text-color":a.textfont.color,"text-opacity":o.opacity});break;case"raster":k.extendFlat(n,{"raster-fade-duration":0,"raster-opacity":o.opacity})}return{layout:r,paint:n}}d.update=function(o){this.visible?this.needsNewImage(o)?this.updateImage(o):this.needsNewSource(o)?(this.removeLayer(),this.updateSource(o),this.updateLayer(o)):this.needsNewLayer(o)?this.updateLayer(o):this.updateStyle(o):(this.updateSource(o),this.updateLayer(o)),this.visible=s(o)},d.needsNewImage=function(o){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&o.sourcetype==="image"&&(this.source!==o.source||JSON.stringify(this.coordinates)!==JSON.stringify(o.coordinates))},d.needsNewSource=function(o){return this.sourceType!==o.sourcetype||JSON.stringify(this.source)!==JSON.stringify(o.source)||this.layerType!==o.type},d.needsNewLayer=function(o){return this.layerType!==o.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},d.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},d.updateImage=function(o){this.subplot.map.getSource(this.idSource).updateImage({url:o.source,coordinates:o.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());r!==null&&this.subplot.map.moveLayer(this.idLayer,r)},d.updateSource=function(o){var r=this.subplot.map;if(r.getSource(this.idSource)&&r.removeSource(this.idSource),this.sourceType=o.sourcetype,this.source=o.source,s(o)){var n=function(a){var i,c=a.sourcetype,h=a.source,f={type:c};return c==="geojson"?i="data":c==="vector"?i=typeof h=="string"?"url":"tiles":c==="raster"?(i="tiles",f.tileSize=256):c==="image"&&(i="url",f.coordinates=a.coordinates),f[i]=h,a.sourceattribution&&(f.attribution=A(a.sourceattribution)),f}(o);r.addSource(this.idSource,n)}},d.findFollowingMapboxLayerId=function(o){if(o==="traces")for(var r=this.subplot.getMapLayers(),n=0;n<r.length;n++){var a=r[n].id;if(typeof a=="string"&&a.indexOf(T.traceLayerPrefix)===0){o=a;break}}return o},d.updateLayer=function(o){var r=this.subplot,n=t(o),a=this.lookupBelow(),i=this.findFollowingMapboxLayerId(a);this.removeLayer(),s(o)&&r.addLayer({id:this.idLayer,source:this.idSource,"source-layer":o.sourcelayer||"",type:o.type,minzoom:o.minzoom,maxzoom:o.maxzoom,layout:n.layout,paint:n.paint},i),this.layerType=o.type,this.below=a},d.updateStyle=function(o){if(s(o)){var r=t(o);this.subplot.setOptions(this.idLayer,"setLayoutProperty",r.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",r.paint)}},d.removeLayer=function(){var o=this.subplot.map;o.getLayer(this.idLayer)&&o.removeLayer(this.idLayer)},d.dispose=function(){var o=this.subplot.map;o.getLayer(this.idLayer)&&o.removeLayer(this.idLayer),o.getSource(this.idSource)&&o.removeSource(this.idSource)},$.exports=function(o,r,n){var a=new x(o,r);return a.update(n),a}},23585:function($,R,e){var k=e(71828),A=e(7901).defaultLine,l=e(27670).Y,T=e(41940),x=e(82196).textposition,d=e(30962).overrideAll,s=e(44467).templatedArray,t=e(77734),o=T({});o.family.dflt="Open Sans Regular, Arial Unicode MS Regular",($.exports=d({_arrayAttrRegexps:[k.counterRegex("mapbox",".layers",!0)],domain:l({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:s("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:A},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:A}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:o,textposition:k.extendFlat({},x,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},77882:function($,R,e){var k=e(71828),A=e(49119),l=e(85501),T=e(23585);function x(s,t,o,r){o("accesstoken",r.accessToken),o("style"),o("center.lon"),o("center.lat"),o("zoom"),o("bearing"),o("pitch");var n=o("bounds.west"),a=o("bounds.east"),i=o("bounds.south"),c=o("bounds.north");n!==void 0&&a!==void 0&&i!==void 0&&c!==void 0||delete t.bounds,l(s,t,{name:"layers",handleItemDefaults:d}),t._input=s}function d(s,t){function o(c,h){return k.coerce(s,t,T.layers,c,h)}if(o("visible")){var r,n=o("sourcetype"),a=n==="raster"||n==="image";o("source"),o("sourceattribution"),n==="vector"&&o("sourcelayer"),n==="image"&&o("coordinates"),a&&(r="raster");var i=o("type",r);a&&i!=="raster"&&(i=t.type="raster",k.log("Source types *raster* and *image* must drawn *raster* layer type.")),o("below"),o("color"),o("opacity"),o("minzoom"),o("maxzoom"),i==="circle"&&o("circle.radius"),i==="line"&&(o("line.width"),o("line.dash")),i==="fill"&&o("fill.outlinecolor"),i==="symbol"&&(o("symbol.icon"),o("symbol.iconsize"),o("symbol.text"),k.coerceFont(o,"symbol.textfont"),o("symbol.textposition"),o("symbol.placement"))}}$.exports=function(s,t,o){A(s,t,o,{type:"mapbox",attributes:T,handleDefaults:x,partition:"y",accessToken:t._mapboxAccessToken})}},10481:function($,R,e){var k=e(44517),A=e(71828),l=e(41327),T=e(73972),x=e(89298),d=e(28569),s=e(30211),t=e(64505),o=t.drawMode,r=t.selectMode,n=e(47322).prepSelect,a=e(47322).clearOutline,i=e(47322).clearSelectionsCache,c=e(47322).selectOnClick,h=e(77734),f=e(67911);function b(w,u){this.id=u,this.gd=w;var S=w._fullLayout,_=w._context;this.container=S._glcontainer.node(),this.isStatic=_.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var v=b.prototype;v.plot=function(w,u,S){var _,E=this,L=u[E.id];E.map&&L.accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),_=E.map?new Promise(function(C,P){E.updateMap(w,u,C,P)}):new Promise(function(C,P){E.createMap(w,u,C,P)}),S.push(_)},v.createMap=function(w,u,S,_){var E=this,L=u[E.id],C=E.styleObj=y(L.style);E.accessToken=L.accesstoken;var P=L.bounds,I=P?[[P.west,P.south],[P.east,P.north]]:null,U=E.map=new k.Map({container:E.div,style:C.style,center:m(L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch,maxBounds:I,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new k.AttributionControl({compact:!0}));U._canvas.style.left="0px",U._canvas.style.top="0px",E.rejectOnError(_),E.isStatic||E.initFx(w,u);var z=[];z.push(new Promise(function(H){U.once("load",H)})),z=z.concat(l.fetchTraceGeoData(w)),Promise.all(z).then(function(){E.fillBelowLookup(w,u),E.updateData(w),E.updateLayout(u),E.resolveOnRender(S)}).catch(_)},v.updateMap=function(w,u,S,_){var E=this,L=E.map,C=u[this.id];E.rejectOnError(_);var P=[],I=y(C.style);JSON.stringify(E.styleObj)!==JSON.stringify(I)&&(E.styleObj=I,L.setStyle(I.style),E.traceHash={},P.push(new Promise(function(U){L.once("styledata",U)}))),P=P.concat(l.fetchTraceGeoData(w)),Promise.all(P).then(function(){E.fillBelowLookup(w,u),E.updateData(w),E.updateLayout(u),E.resolveOnRender(S)}).catch(_)},v.fillBelowLookup=function(w,u){var S,_,E=u[this.id].layers,L=this.belowLookup={},C=!1;for(S=0;S<w.length;S++){var P=w[S][0].trace,I=P._module;typeof P.below=="string"?_=P.below:I.getBelow&&(_=I.getBelow(P,this)),_===""&&(C=!0),L["trace-"+P.uid]=_||""}for(S=0;S<E.length;S++){var U=E[S];_=typeof U.below=="string"?U.below:C?"traces":"",L["layout-"+S]=_}var z,H,F={};for(z in L)F[_=L[z]]?F[_].push(z):F[_]=[z];for(_ in F){var N=F[_];if(N.length>1)for(S=0;S<N.length;S++)(z=N[S]).indexOf("trace-")===0?(H=z.split("trace-")[1],this.traceHash[H]&&(this.traceHash[H].below=null)):z.indexOf("layout-")===0&&(H=z.split("layout-")[1],this.layerList[H]&&(this.layerList[H].below=null))}};var g={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function y(w){var u={};return A.isPlainObject(w)?(u.id=w.id,u.style=w):typeof w=="string"?(u.id=w,h.styleValuesMapbox.indexOf(w)!==-1?u.style=p(w):h.stylesNonMapbox[w]?u.style=h.stylesNonMapbox[w]:u.style=w):(u.id=h.styleValueDflt,u.style=p(h.styleValueDflt)),u.transition={duration:0,delay:0},u}function p(w){return h.styleUrlPrefix+w+"-"+h.styleUrlSuffix}function m(w){return[w.lon,w.lat]}v.updateData=function(w){var u,S,_,E,L=this.traceHash,C=w.slice().sort(function(H,F){return g[H[0].trace.type]-g[F[0].trace.type]});for(_=0;_<C.length;_++){var P=C[_],I=!1;(u=L[(S=P[0].trace).uid])&&(u.type===S.type?(u.update(P),I=!0):u.dispose()),!I&&S._module&&(L[S.uid]=S._module.plot(this,P))}var U=Object.keys(L);e:for(_=0;_<U.length;_++){var z=U[_];for(E=0;E<w.length;E++)if(z===(S=w[E][0].trace).uid)continue e;(u=L[z]).dispose(),delete L[z]}},v.updateLayout=function(w){var u=this.map,S=w[this.id];this.dragging||this.wheeling||(u.setCenter(m(S.center)),u.setZoom(S.zoom),u.setBearing(S.bearing),u.setPitch(S.pitch)),this.updateLayers(w),this.updateFramework(w),this.updateFx(w),this.map.resize(),this.gd._context._scrollZoom.mapbox?u.scrollZoom.enable():u.scrollZoom.disable()},v.resolveOnRender=function(w){var u=this.map;u.on("render",function S(){u.loaded()&&(u.off("render",S),setTimeout(w,10))})},v.rejectOnError=function(w){var u=this.map;function S(){w(new Error(h.mapOnErrorMsg))}u.once("error",S),u.once("style.error",S),u.once("source.error",S),u.once("tile.error",S),u.once("layer.error",S)},v.createFramework=function(w){var u=this,S=u.div=document.createElement("div");S.id=u.uid,S.style.position="absolute",u.container.appendChild(S),u.xaxis={_id:"x",c2p:function(_){return u.project(_).x}},u.yaxis={_id:"y",c2p:function(_){return u.project(_).y}},u.updateFramework(w),u.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},x.setConvert(u.mockAxis,w)},v.initFx=function(w,u){var S=this,_=S.gd,E=S.map;function L(){s.loneUnhover(u._hoverlayer)}function C(){var P=S.getView();_.emit("plotly_relayouting",S.getViewEditsWithDerived(P))}E.on("moveend",function(P){if(S.map){var I=_._fullLayout;if(P.originalEvent||S.wheeling){var U=I[S.id];T.call("_storeDirectGUIEdit",_.layout,I._preGUI,S.getViewEdits(U));var z=S.getView();U._input.center=U.center=z.center,U._input.zoom=U.zoom=z.zoom,U._input.bearing=U.bearing=z.bearing,U._input.pitch=U.pitch=z.pitch,_.emit("plotly_relayout",S.getViewEditsWithDerived(z))}P.originalEvent&&P.originalEvent.type==="mouseup"?S.dragging=!1:S.wheeling&&(S.wheeling=!1),I._rehover&&I._rehover()}}),E.on("wheel",function(){S.wheeling=!0}),E.on("mousemove",function(P){var I=S.div.getBoundingClientRect(),U=[P.originalEvent.offsetX,P.originalEvent.offsetY];P.target.getBoundingClientRect=function(){return I},S.xaxis.p2c=function(){return E.unproject(U).lng},S.yaxis.p2c=function(){return E.unproject(U).lat},_._fullLayout._rehover=function(){_._fullLayout._hoversubplot===S.id&&_._fullLayout[S.id]&&s.hover(_,P,S.id)},s.hover(_,P,S.id),_._fullLayout._hoversubplot=S.id}),E.on("dragstart",function(){S.dragging=!0,L()}),E.on("zoomstart",L),E.on("mouseout",function(){_._fullLayout._hoversubplot=null}),E.on("drag",C),E.on("zoom",C),E.on("dblclick",function(){var P=_._fullLayout[S.id];T.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,S.getViewEdits(P));var I=S.viewInitial;E.setCenter(m(I.center)),E.setZoom(I.zoom),E.setBearing(I.bearing),E.setPitch(I.pitch);var U=S.getView();P._input.center=P.center=U.center,P._input.zoom=P.zoom=U.zoom,P._input.bearing=P.bearing=U.bearing,P._input.pitch=P.pitch=U.pitch,_.emit("plotly_doubleclick",null),_.emit("plotly_relayout",S.getViewEditsWithDerived(U))}),S.clearOutline=function(){i(S.dragOptions),a(S.dragOptions.gd)},S.onClickInPanFn=function(P){return function(I){var U=_._fullLayout.clickmode;U.indexOf("select")>-1&&c(I.originalEvent,_,[S.xaxis],[S.yaxis],S.id,P),U.indexOf("event")>-1&&s.click(_,I.originalEvent)}}},v.updateFx=function(w){var u=this,S=u.map,_=u.gd;if(!u.isStatic){var E,L=w.dragmode;E=function(I,U){U.isRect?(I.range={})[u.id]=[P([U.xmin,U.ymin]),P([U.xmax,U.ymax])]:(I.lassoPoints={})[u.id]=U.map(P)};var C=u.dragOptions;u.dragOptions=A.extendDeep(C||{},{dragmode:w.dragmode,element:u.div,gd:_,plotinfo:{id:u.id,domain:w[u.id].domain,xaxis:u.xaxis,yaxis:u.yaxis,fillRangeItems:E},xaxes:[u.xaxis],yaxes:[u.yaxis],subplot:u.id}),S.off("click",u.onClickInPanHandler),r(L)||o(L)?(S.dragPan.disable(),S.on("zoomstart",u.clearOutline),u.dragOptions.prepFn=function(I,U,z){n(I,U,z,u.dragOptions,L)},d.init(u.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",u.clearOutline),u.div.onmousedown=null,u.div.ontouchstart=null,u.div.removeEventListener("touchstart",u.div._ontouchstart),u.onClickInPanHandler=u.onClickInPanFn(u.dragOptions),S.on("click",u.onClickInPanHandler))}function P(I){var U=u.map.unproject(I);return[U.lng,U.lat]}},v.updateFramework=function(w){var u=w[this.id].domain,S=w._size,_=this.div.style;_.width=S.w*(u.x[1]-u.x[0])+"px",_.height=S.h*(u.y[1]-u.y[0])+"px",_.left=S.l+u.x[0]*S.w+"px",_.top=S.t+(1-u.y[1])*S.h+"px",this.xaxis._offset=S.l+u.x[0]*S.w,this.xaxis._length=S.w*(u.x[1]-u.x[0]),this.yaxis._offset=S.t+(1-u.y[1])*S.h,this.yaxis._length=S.h*(u.y[1]-u.y[0])},v.updateLayers=function(w){var u,S=w[this.id].layers,_=this.layerList;if(S.length!==_.length){for(u=0;u<_.length;u++)_[u].dispose();for(_=this.layerList=[],u=0;u<S.length;u++)_.push(f(this,u,S[u]))}else for(u=0;u<S.length;u++)_[u].update(S[u])},v.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},v.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},v.setOptions=function(w,u,S){for(var _ in S)this.map[u](w,_,S[_])},v.getMapLayers=function(){return this.map.getStyle().layers},v.addLayer=function(w,u){var S=this.map;if(typeof u=="string"){if(u==="")return void S.addLayer(w,u);for(var _=this.getMapLayers(),E=0;E<_.length;E++)if(u===_[E].id)return void S.addLayer(w,u);A.warn(["Trying to add layer with *below* value",u,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(w)},v.project=function(w){return this.map.project(new k.LngLat(w[0],w[1]))},v.getView=function(){var w=this.map,u=w.getCenter(),S={lon:u.lng,lat:u.lat},_=w.getCanvas(),E=parseInt(_.style.width),L=parseInt(_.style.height);return{center:S,zoom:w.getZoom(),bearing:w.getBearing(),pitch:w.getPitch(),_derived:{coordinates:[w.unproject([0,0]).toArray(),w.unproject([E,0]).toArray(),w.unproject([E,L]).toArray(),w.unproject([0,L]).toArray()]}}},v.getViewEdits=function(w){for(var u=this.id,S=["center","zoom","bearing","pitch"],_={},E=0;E<S.length;E++){var L=S[E];_[u+"."+L]=w[L]}return _},v.getViewEditsWithDerived=function(w){var u=this.id,S=this.getViewEdits(w);return S[u+"._derived"]=w._derived,S},$.exports=b},35025:function($){$.exports=function(R){var e=R.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},74875:function($,R,e){var k=e(39898),A=e(84096).Dq,l=e(60721).FF,T=e(92770),x=e(73972),d=e(86281),s=e(44467),t=e(71828),o=e(7901),r=e(50606).BADNUM,n=e(41675),a=e(51873).clearOutline,i=e(21479),c=e(85594),h=e(31391),f=e(27659).a0,b=t.relinkPrivateKeys,v=t._,g=$.exports={};t.extendFlat(g,x),g.attributes=e(9012),g.attributes.type.values=g.allTypes,g.fontAttrs=e(41940),g.layoutAttributes=e(10820),g.fontWeight="normal";var y=g.transformsRegistry,p=e(31137);g.executeAPICommand=p.executeAPICommand,g.computeAPICommandBindings=p.computeAPICommandBindings,g.manageCommandObserver=p.manageCommandObserver,g.hasSimpleAPICommandBindings=p.hasSimpleAPICommandBindings,g.redrawText=function(F){return F=t.getGraphDiv(F),new Promise(function(N){setTimeout(function(){F._fullLayout&&(x.getComponentMethod("annotations","draw")(F),x.getComponentMethod("legend","draw")(F),x.getComponentMethod("colorbar","draw")(F),N(g.previousPromises(F)))},300)})},g.resize=function(F){var N;F=t.getGraphDiv(F);var B=new Promise(function(j,K){F&&!t.isHidden(F)||K(new Error("Resize must be passed a displayed plot div element.")),F._redrawTimer&&clearTimeout(F._redrawTimer),F._resolveResize&&(N=F._resolveResize),F._resolveResize=j,F._redrawTimer=setTimeout(function(){if(!F.layout||F.layout.width&&F.layout.height||t.isHidden(F))j(F);else{delete F.layout.width,delete F.layout.height;var G=F.changed;F.autoplay=!0,x.call("relayout",F,{autosize:!0}).then(function(){F.changed=G,F._resolveResize===j&&(delete F._resolveResize,j(F))})}},100)});return N&&N(B),B},g.previousPromises=function(F){if((F._promises||[]).length)return Promise.all(F._promises).then(function(){F._promises=[]})},g.addLinks=function(F){if(F._context.showLink||F._context.showSources){var N=F._fullLayout,B=t.ensureSingle(N._paper,"text","js-plot-link-container",function(J){J.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:o.defaultLine,"pointer-events":"all"}).each(function(){var X=k.select(this);X.append("tspan").classed("js-link-to-tool",!0),X.append("tspan").classed("js-link-spacer",!0),X.append("tspan").classed("js-sourcelinks",!0)})}),j=B.node(),K={y:N._paper.attr("height")-9};document.body.contains(j)&&j.getComputedTextLength()>=N.width-20?(K["text-anchor"]="start",K.x=5):(K["text-anchor"]="end",K.x=N._paper.attr("width")-7),B.attr(K);var G=B.select(".js-link-to-tool"),V=B.select(".js-link-spacer"),W=B.select(".js-sourcelinks");F._context.showSources&&F._context.showSources(F),F._context.showLink&&function(J,X){X.text("");var ee=X.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(J._context.linkText+" "+String.fromCharCode(187));if(J._context.sendData)ee.on("click",function(){g.sendDataToCloud(J)});else{var re=window.location.pathname.split("/"),ie=window.location.search;ee.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+re[2].split(".")[0]+"/"+re[1]+ie})}}(F,G),V.text(G.text()&&W.text()?" - ":"")}},g.sendDataToCloud=function(F){var N=(window.PLOTLYENV||{}).BASE_URL||F._context.plotlyServerURL;if(N){F.emit("plotly_beforeexport");var B=k.select(F).append("div").attr("id","hiddenform").style("display","none"),j=B.append("form").attr({action:N+"/external",method:"post",target:"_blank"});return j.append("input").attr({type:"text",name:"data"}).node().value=g.graphJson(F,!1,"keepdata"),j.node().submit(),B.remove(),F.emit("plotly_afterexport"),!1}};var m=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],w=["year","month","dayMonth","dayMonthYear"];function u(F,N){var B=F._context.locale;B||(B="en-US");var j=!1,K={};function G(re){for(var ie=!0,se=0;se<N.length;se++){var fe=N[se];K[fe]||(re[fe]?K[fe]=re[fe]:ie=!1)}ie&&(j=!0)}for(var V=0;V<2;V++){for(var W=F._context.locales,J=0;J<2;J++){var X=(W[B]||{}).format;if(X&&(G(X),j))break;W=x.localeRegistry}var ee=B.split("-")[0];if(j||ee===B)break;B=ee}return j||G(x.localeRegistry.en.format),K}function S(F,N){var B={_fullLayout:N},j=F._id.charAt(0)==="x",K=F._mainAxis._anchorAxis,G="",V="",W="";if(K&&(W=K._mainAxis._id,G=j?F._id+W:W+F._id),!G||!N._plots[G]){G="";for(var J=F._counterAxes,X=0;X<J.length;X++){var ee=J[X],re=j?F._id+ee:ee+F._id;V||(V=re);var ie=n.getFromId(B,ee);if(W&&ie.overlaying===W){G=re;break}}}return G||V}function _(F){var N=F.transforms;if(Array.isArray(N)&&N.length)for(var B=0;B<N.length;B++){var j=N[B],K=j._module||y[j.type];if(K&&K.makesData)return!0}return!1}function E(F,N,B,j){for(var K=F.transforms,G=[F],V=0;V<K.length;V++){var W=K[V],J=y[W.type];J&&J.transform&&(G=J.transform(G,{transform:W,fullTrace:F,fullData:N,layout:B,fullLayout:j,transformIndex:V}))}return G}function L(F){return typeof F=="string"&&F.substr(F.length-2)==="px"&&parseFloat(F)}function C(F){var N=F.margin;if(!F._size){var B=F._size={l:Math.round(N.l),r:Math.round(N.r),t:Math.round(N.t),b:Math.round(N.b),p:Math.round(N.pad)};B.w=Math.round(F.width)-B.l-B.r,B.h=Math.round(F.height)-B.t-B.b}F._pushmargin||(F._pushmargin={}),F._pushmarginIds||(F._pushmarginIds={})}g.supplyDefaults=function(F,N){var B=N&&N.skipUpdateCalc,j=F._fullLayout||{};if(j._skipDefaults)delete j._skipDefaults;else{var K,G=F._fullLayout={},V=F.layout||{},W=F._fullData||[],J=F._fullData=[],X=F.data||[],ee=F.calcdata||[],re=F._context||{};F._transitionData||g.createTransitionData(F),G._dfltTitle={plot:v(F,"Click to enter Plot title"),x:v(F,"Click to enter X axis title"),y:v(F,"Click to enter Y axis title"),colorbar:v(F,"Click to enter Colorscale title"),annotation:v(F,"new text")},G._traceWord=v(F,"trace");var ie=u(F,m);if(G._mapboxAccessToken=re.mapboxAccessToken,j._initialAutoSizeIsDone){var se=j.width,fe=j.height;g.supplyLayoutGlobalDefaults(V,G,ie),V.width||(G.width=se),V.height||(G.height=fe),g.sanitizeMargins(G)}else{g.supplyLayoutGlobalDefaults(V,G,ie);var ye=!V.width||!V.height,ge=G.autosize,he=re.autosizable;ye&&(ge||he)?g.plotAutoSize(F,V,G):ye&&g.sanitizeMargins(G),!ge&&ye&&(V.width=G.width,V.height=G.height)}G._d3locale=function(_e,Fe){return _e.decimal=Fe.charAt(0),_e.thousands=Fe.charAt(1),{numberFormat:function(Ve){try{Ve=l(_e).format(t.adjustFormat(Ve))}catch{return t.warnBadFormat(Ve),t.noFormat}return Ve},timeFormat:A(_e).utcFormat}}(ie,G.separators),G._extraFormat=u(F,w),G._initialAutoSizeIsDone=!0,G._dataLength=X.length,G._modules=[],G._visibleModules=[],G._basePlotModules=[];var ve=G._subplots=function(){var _e,Fe,Ve=x.collectableSubplotTypes,He={};if(!Ve){Ve=[];var nt=x.subplotsRegistry;for(var tt in nt){var ot=nt[tt].attr;if(ot&&(Ve.push(tt),Array.isArray(ot)))for(Fe=0;Fe<ot.length;Fe++)t.pushUnique(Ve,ot[Fe])}}for(_e=0;_e<Ve.length;_e++)He[Ve[_e]]=[];return He}(),Oe=G._splomAxes={x:{},y:{}},xe=G._splomSubplots={};G._splomGridDflt={},G._scatterStackOpts={},G._firstScatter={},G._alignmentOpts={},G._colorAxes={},G._requestRangeslider={},G._traceUids=function(_e,Fe){var Ve,He,nt=Fe.length,tt=[];for(Ve=0;Ve<_e.length;Ve++){var ot=_e[Ve]._fullInput;ot!==He&&tt.push(ot),He=ot}var dt=tt.length,kt=new Array(nt),mt={};function wt(It,Ut){kt[Ut]=It,mt[It]=1}function Lt(It,Ut){if(It&&typeof It=="string"&&!mt[It])return wt(It,Ut),!0}for(Ve=0;Ve<nt;Ve++){var Ct=Fe[Ve].uid;typeof Ct=="number"&&(Ct=String(Ct)),Lt(Ct,Ve)||Ve<dt&&Lt(tt[Ve].uid,Ve)||wt(t.randstr(mt),Ve)}return kt}(W,X),G._globalTransforms=(F._context||{}).globalTransforms,g.supplyDataDefaults(X,J,V,G);var ke=Object.keys(Oe.x),Me=Object.keys(Oe.y);if(ke.length>1&&Me.length>1){for(x.getComponentMethod("grid","sizeDefaults")(V,G),K=0;K<ke.length;K++)t.pushUnique(ve.xaxis,ke[K]);for(K=0;K<Me.length;K++)t.pushUnique(ve.yaxis,Me[K]);for(var Te in xe)t.pushUnique(ve.cartesian,Te)}if(G._has=g._hasPlotType.bind(G),W.length===J.length)for(K=0;K<J.length;K++)b(J[K],W[K]);g.supplyLayoutModuleDefaults(V,G,J,F._transitionData);var Q=G._visibleModules,oe=[];for(K=0;K<Q.length;K++){var ce=Q[K].crossTraceDefaults;ce&&t.pushUnique(oe,ce)}for(K=0;K<oe.length;K++)oe[K](J,G);G._hasOnlyLargeSploms=G._basePlotModules.length===1&&G._basePlotModules[0].name==="splom"&&ke.length>15&&Me.length>15&&G.shapes.length===0&&G.images.length===0,g.linkSubplots(J,G,W,j),g.cleanPlot(J,G,W,j);var me=!(!j._has||!j._has("gl2d")),Ae=!(!G._has||!G._has("gl2d")),Ie=!(!j._has||!j._has("cartesian"))||me,Ce=!(!G._has||!G._has("cartesian"))||Ae;Ie&&!Ce?j._bgLayer.remove():Ce&&!Ie&&(G._shouldCreateBgLayer=!0),j._zoomlayer&&!F._dragging&&a({_fullLayout:j}),function(_e,Fe){var Ve,He=[];Fe.meta&&(Ve=Fe._meta={meta:Fe.meta,layout:{meta:Fe.meta}});for(var nt=0;nt<_e.length;nt++){var tt=_e[nt];tt.meta?He[tt.index]=tt._meta={meta:tt.meta}:Fe.meta&&(tt._meta={meta:Fe.meta}),Fe.meta&&(tt._meta.layout={meta:Fe.meta})}He.length&&(Ve||(Ve=Fe._meta={}),Ve.data=He)}(J,G),b(G,j),x.getComponentMethod("colorscale","crossTraceDefaults")(J,G),G._preGUI||(G._preGUI={}),G._tracePreGUI||(G._tracePreGUI={});var Re,le=G._tracePreGUI,de={};for(Re in le)de[Re]="old";for(K=0;K<J.length;K++)de[Re=J[K]._fullInput.uid]||(le[Re]={}),de[Re]="new";for(Re in de)de[Re]==="old"&&delete le[Re];C(G),x.getComponentMethod("rangeslider","makeData")(G),B||ee.length!==J.length||g.supplyDefaultsUpdateCalc(ee,J)}},g.supplyDefaultsUpdateCalc=function(F,N){for(var B=0;B<N.length;B++){var j=N[B],K=(F[B]||[])[0];if(K&&K.trace){var G=K.trace;if(G._hasCalcTransform){var V,W,J,X=G._arrayAttrs;for(V=0;V<X.length;V++)W=X[V],J=t.nestedProperty(G,W).get().slice(),t.nestedProperty(j,W).set(J)}K.trace=j}}},g.createTransitionData=function(F){F._transitionData||(F._transitionData={}),F._transitionData._frames||(F._transitionData._frames=[]),F._transitionData._frameHash||(F._transitionData._frameHash={}),F._transitionData._counter||(F._transitionData._counter=0),F._transitionData._interruptCallbacks||(F._transitionData._interruptCallbacks=[])},g._hasPlotType=function(F){var N,B=this._basePlotModules||[];for(N=0;N<B.length;N++)if(B[N].name===F)return!0;var j=this._modules||[];for(N=0;N<j.length;N++){var K=j[N].name;if(K===F)return!0;var G=x.modules[K];if(G&&G.categories[F])return!0}return!1},g.cleanPlot=function(F,N,B,j){var K,G,V=j._basePlotModules||[];for(K=0;K<V.length;K++){var W=V[K];W.clean&&W.clean(F,N,B,j)}var J=j._has&&j._has("gl"),X=N._has&&N._has("gl");J&&!X&&j._glcontainer!==void 0&&(j._glcontainer.selectAll(".gl-canvas").remove(),j._glcontainer.selectAll(".no-webgl").remove(),j._glcanvas=null);var ee=!!j._infolayer;e:for(K=0;K<B.length;K++){var re=B[K].uid;for(G=0;G<F.length;G++)if(re===F[G].uid)continue e;ee&&j._infolayer.select(".cb"+re).remove()}},g.linkSubplots=function(F,N,B,j){var K,G,V=j._plots||{},W=N._plots={},J=N._subplots,X={_fullData:F,_fullLayout:N},ee=J.cartesian.concat(J.gl2d||[]);for(K=0;K<ee.length;K++){var re,ie=ee[K],se=V[ie],fe=n.getFromId(X,ie,"x"),ye=n.getFromId(X,ie,"y");for(se?re=W[ie]=se:(re=W[ie]={}).id=ie,fe._counterAxes.push(ye._id),ye._counterAxes.push(fe._id),fe._subplotsWith.push(ie),ye._subplotsWith.push(ie),re.xaxis=fe,re.yaxis=ye,re._hasClipOnAxisFalse=!1,G=0;G<F.length;G++){var ge=F[G];if(ge.xaxis===re.xaxis._id&&ge.yaxis===re.yaxis._id&&ge.cliponaxis===!1){re._hasClipOnAxisFalse=!0;break}}}var he,ve=n.list(X,null,!0);for(K=0;K<ve.length;K++){var Oe=null;(he=ve[K]).overlaying&&(Oe=n.getFromId(X,he.overlaying))&&Oe.overlaying&&(he.overlaying=!1,Oe=null),he._mainAxis=Oe||he,Oe&&(he.domain=Oe.domain.slice()),he._anchorAxis=he.anchor==="free"?null:n.getFromId(X,he.anchor)}for(K=0;K<ve.length;K++)if((he=ve[K])._counterAxes.sort(n.idSort),he._subplotsWith.sort(t.subplotSort),he._mainSubplot=S(he,N),he._counterAxes.length&&(he.spikemode&&he.spikemode.indexOf("across")!==-1||he.automargin&&he.mirror&&he.anchor!=="free"||x.getComponentMethod("rangeslider","isVisible")(he))){var xe=1,ke=0;for(G=0;G<he._counterAxes.length;G++){var Me=n.getFromId(X,he._counterAxes[G]);xe=Math.min(xe,Me.domain[0]),ke=Math.max(ke,Me.domain[1])}xe<ke&&(he._counterDomainMin=xe,he._counterDomainMax=ke)}},g.clearExpandedTraceDefaultColors=function(F){var N,B,j;for(B=[],(N=F._module._colorAttrs)||(F._module._colorAttrs=N=[],d.crawl(F._module.attributes,function(K,G,V,W){B[W]=G,B.length=W+1,K.valType==="color"&&K.dflt===void 0&&N.push(B.join("."))})),j=0;j<N.length;j++)t.nestedProperty(F,"_input."+N[j]).get()||t.nestedProperty(F,N[j]).set(null)},g.supplyDataDefaults=function(F,N,B,j){var K,G,V,W=j._modules,J=j._visibleModules,X=j._basePlotModules,ee=0,re=0;function ie(Te){N.push(Te);var Q=Te._module;Q&&(t.pushUnique(W,Q),Te.visible===!0&&t.pushUnique(J,Q),t.pushUnique(X,Te._module.basePlotModule),ee++,Te._input.visible!==!1&&re++)}j._transformModules=[];var se={},fe=[],ye=(B.template||{}).data||{},ge=s.traceTemplater(ye);for(K=0;K<F.length;K++){if(V=F[K],(G=ge.newTrace(V)).uid=j._traceUids[K],g.supplyTraceDefaults(V,G,re,j,K),G.index=K,G._input=V,G._expandedIndex=ee,G.transforms&&G.transforms.length)for(var he=V.visible!==!1&&G.visible===!1,ve=E(G,N,B,j),Oe=0;Oe<ve.length;Oe++){var xe=ve[Oe],ke={_template:G._template,type:G.type,uid:G.uid+Oe};he&&xe.visible===!1&&delete xe.visible,g.supplyTraceDefaults(xe,ke,ee,j,K),b(ke,xe),ke.index=K,ke._input=V,ke._fullInput=G,ke._expandedIndex=ee,ke._expandedInput=xe,ie(ke)}else G._fullInput=G,G._expandedInput=G,ie(G);x.traceIs(G,"carpetAxis")&&(se[G.carpet]=G),x.traceIs(G,"carpetDependent")&&fe.push(K)}for(K=0;K<fe.length;K++)if((G=N[fe[K]]).visible){var Me=se[G.carpet];G._carpet=Me,Me&&Me.visible?(G.xaxis=Me.xaxis,G.yaxis=Me.yaxis):G.visible=!1}},g.supplyAnimationDefaults=function(F){var N;F=F||{};var B={};function j(K,G){return t.coerce(F||{},B,c,K,G)}if(j("mode"),j("direction"),j("fromcurrent"),Array.isArray(F.frame))for(B.frame=[],N=0;N<F.frame.length;N++)B.frame[N]=g.supplyAnimationFrameDefaults(F.frame[N]||{});else B.frame=g.supplyAnimationFrameDefaults(F.frame||{});if(Array.isArray(F.transition))for(B.transition=[],N=0;N<F.transition.length;N++)B.transition[N]=g.supplyAnimationTransitionDefaults(F.transition[N]||{});else B.transition=g.supplyAnimationTransitionDefaults(F.transition||{});return B},g.supplyAnimationFrameDefaults=function(F){var N={};function B(j,K){return t.coerce(F||{},N,c.frame,j,K)}return B("duration"),B("redraw"),N},g.supplyAnimationTransitionDefaults=function(F){var N={};function B(j,K){return t.coerce(F||{},N,c.transition,j,K)}return B("duration"),B("easing"),N},g.supplyFrameDefaults=function(F){var N={};function B(j,K){return t.coerce(F,N,h,j,K)}return B("group"),B("name"),B("traces"),B("baseframe"),B("data"),B("layout"),N},g.supplyTraceDefaults=function(F,N,B,j,K){var G,V=j.colorway||o.defaults,W=V[B%V.length];function J(ve,Oe){return t.coerce(F,N,g.attributes,ve,Oe)}var X=J("visible");J("type"),J("name",j._traceWord+" "+K),J("uirevision",j.uirevision);var ee=g.getModule(N);if(N._module=ee,ee){var re=ee.basePlotModule,ie=re.attr,se=re.attributes;if(ie&&se){var fe=j._subplots,ye="";if(X||re.name!=="gl2d"){if(Array.isArray(ie))for(G=0;G<ie.length;G++){var ge=ie[G],he=t.coerce(F,N,se,ge);fe[ge]&&t.pushUnique(fe[ge],he),ye+=he}else ye=t.coerce(F,N,se,ie);fe[re.name]&&t.pushUnique(fe[re.name],ye)}}}return X&&(J("customdata"),J("ids"),J("meta"),x.traceIs(N,"showLegend")?(t.coerce(F,N,ee.attributes.showlegend?ee.attributes:g.attributes,"showlegend"),J("legendwidth"),J("legendgroup"),J("legendgrouptitle.text"),J("legendrank"),N._dfltShowLegend=!0):N._dfltShowLegend=!1,ee&&ee.supplyDefaults(F,N,W,j),x.traceIs(N,"noOpacity")||J("opacity"),x.traceIs(N,"notLegendIsolatable")&&(N.visible=!!N.visible),x.traceIs(N,"noHover")||(N.hovertemplate||t.coerceHoverinfo(F,N,j),N.type!=="parcats"&&x.getComponentMethod("fx","supplyDefaults")(F,N,W,j)),ee&&ee.selectPoints&&J("selectedpoints"),g.supplyTransformDefaults(F,N,j)),N},g.hasMakesDataTransform=_,g.supplyTransformDefaults=function(F,N,B){if(N._length||_(F)){var j=B._globalTransforms||[],K=B._transformModules||[];if(Array.isArray(F.transforms)||j.length!==0)for(var G=F.transforms||[],V=j.concat(G),W=N.transforms=[],J=0;J<V.length;J++){var X,ee=V[J],re=ee.type,ie=y[re],se=!(ee._module&&ee._module===ie),fe=ie&&typeof ie.transform=="function";ie||t.warn("Unrecognized transform type "+re+"."),ie&&ie.supplyDefaults&&(se||fe)?((X=ie.supplyDefaults(ee,N,B,F)).type=re,X._module=ie,t.pushUnique(K,ie)):X=t.extendFlat({},ee),W.push(X)}}},g.supplyLayoutGlobalDefaults=function(F,N,B){function j(J,X){return t.coerce(F,N,g.layoutAttributes,J,X)}var K=F.template;t.isPlainObject(K)&&(N.template=K,N._template=K.layout,N._dataTemplate=K.data),j("autotypenumbers");var G=t.coerceFont(j,"font"),V=G.size;t.coerceFont(j,"title.font",t.extendFlat({},G,{size:Math.round(1.4*V)})),j("title.text",N._dfltTitle.plot),j("title.xref"),j("title.yref"),j("title.x"),j("title.y"),j("title.xanchor"),j("title.yanchor"),j("title.pad.t"),j("title.pad.r"),j("title.pad.b"),j("title.pad.l"),j("uniformtext.mode")&&j("uniformtext.minsize"),j("autosize",!(F.width&&F.height)),j("width"),j("height"),j("minreducedwidth"),j("minreducedheight"),j("margin.l"),j("margin.r"),j("margin.t"),j("margin.b"),j("margin.pad"),j("margin.autoexpand"),F.width&&F.height&&g.sanitizeMargins(N),x.getComponentMethod("grid","sizeDefaults")(F,N),j("paper_bgcolor"),j("separators",B.decimal+B.thousands),j("hidesources"),j("colorway"),j("datarevision");var W=j("uirevision");j("editrevision",W),j("selectionrevision",W),x.getComponentMethod("modebar","supplyLayoutDefaults")(F,N),x.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(F,N,j),x.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(F,N,j),j("meta"),t.isPlainObject(F.transition)&&(j("transition.duration"),j("transition.easing"),j("transition.ordering")),x.getComponentMethod("calendars","handleDefaults")(F,N,"calendar"),x.getComponentMethod("fx","supplyLayoutGlobalDefaults")(F,N,j),t.coerce(F,N,i,"scattermode")},g.plotAutoSize=function(F,N,B){var j,K,G=F._context||{},V=G.frameMargins,W=t.isPlotDiv(F);if(W&&F.emit("plotly_autosize"),G.fillFrame)j=window.innerWidth,K=window.innerHeight,document.body.style.overflow="hidden";else{var J=W?window.getComputedStyle(F):{};if(j=L(J.width)||L(J.maxWidth)||B.width,K=L(J.height)||L(J.maxHeight)||B.height,T(V)&&V>0){var X=1-2*V;j=Math.round(X*j),K=Math.round(X*K)}}var ee=g.layoutAttributes.width.min,re=g.layoutAttributes.height.min;j<ee&&(j=ee),K<re&&(K=re);var ie=!N.width&&Math.abs(B.width-j)>1,se=!N.height&&Math.abs(B.height-K)>1;(se||ie)&&(ie&&(B.width=j),se&&(B.height=K)),F._initialAutoSize||(F._initialAutoSize={width:j,height:K}),g.sanitizeMargins(B)},g.supplyLayoutModuleDefaults=function(F,N,B,j){var K,G,V,W=x.componentsRegistry,J=N._basePlotModules,X=x.subplotsRegistry.cartesian;for(K in W)(V=W[K]).includeBasePlot&&V.includeBasePlot(F,N);for(var ee in J.length||J.push(X),N._has("cartesian")&&(x.getComponentMethod("grid","contentDefaults")(F,N),X.finalizeSubplots(F,N)),N._subplots)N._subplots[ee].sort(t.subplotSort);for(G=0;G<J.length;G++)(V=J[G]).supplyLayoutDefaults&&V.supplyLayoutDefaults(F,N,B);var re=N._modules;for(G=0;G<re.length;G++)(V=re[G]).supplyLayoutDefaults&&V.supplyLayoutDefaults(F,N,B);var ie=N._transformModules;for(G=0;G<ie.length;G++)(V=ie[G]).supplyLayoutDefaults&&V.supplyLayoutDefaults(F,N,B,j);for(K in W)(V=W[K]).supplyLayoutDefaults&&V.supplyLayoutDefaults(F,N,B)},g.purge=function(F){var N=F._fullLayout||{};N._glcontainer!==void 0&&(N._glcontainer.selectAll(".gl-canvas").remove(),N._glcontainer.remove(),N._glcanvas=null),N._modeBar&&N._modeBar.destroy(),F._transitionData&&(F._transitionData._interruptCallbacks&&(F._transitionData._interruptCallbacks.length=0),F._transitionData._animationRaf&&window.cancelAnimationFrame(F._transitionData._animationRaf)),t.clearThrottle(),t.clearResponsive(F),delete F.data,delete F.layout,delete F._fullData,delete F._fullLayout,delete F.calcdata,delete F.empty,delete F.fid,delete F.undoqueue,delete F.undonum,delete F.autoplay,delete F.changed,delete F._promises,delete F._redrawTimer,delete F._hmlumcount,delete F._hmpixcount,delete F._transitionData,delete F._transitioning,delete F._initialAutoSize,delete F._transitioningWithDuration,delete F._dragging,delete F._dragged,delete F._dragdata,delete F._hoverdata,delete F._snapshotInProgress,delete F._editing,delete F._mouseDownTime,delete F._legendMouseDownTime,F.removeAllListeners&&F.removeAllListeners()},g.style=function(F){var N,B=F._fullLayout._visibleModules,j=[];for(N=0;N<B.length;N++){var K=B[N];K.style&&t.pushUnique(j,K.style)}for(N=0;N<j.length;N++)j[N](F)},g.sanitizeMargins=function(F){if(F&&F.margin){var N,B=F.width,j=F.height,K=F.margin,G=B-(K.l+K.r),V=j-(K.t+K.b);G<0&&(N=(B-1)/(K.l+K.r),K.l=Math.floor(N*K.l),K.r=Math.floor(N*K.r)),V<0&&(N=(j-1)/(K.t+K.b),K.t=Math.floor(N*K.t),K.b=Math.floor(N*K.b))}},g.clearAutoMarginIds=function(F){F._fullLayout._pushmarginIds={}},g.allowAutoMargin=function(F,N){F._fullLayout._pushmarginIds[N]=1},g.autoMargin=function(F,N,B){var j=F._fullLayout,K=j.width,G=j.height,V=j.margin,W=j.minreducedwidth,J=j.minreducedheight,X=t.constrain(K-V.l-V.r,2,W),ee=t.constrain(G-V.t-V.b,2,J),re=Math.max(0,K-X),ie=Math.max(0,G-ee),se=j._pushmargin,fe=j._pushmarginIds;if(V.autoexpand!==!1){if(B){var ye=B.pad;if(ye===void 0&&(ye=Math.min(12,V.l,V.r,V.t,V.b)),re){var ge=(B.l+B.r)/re;ge>1&&(B.l/=ge,B.r/=ge)}if(ie){var he=(B.t+B.b)/ie;he>1&&(B.t/=he,B.b/=he)}var ve=B.xl!==void 0?B.xl:B.x,Oe=B.xr!==void 0?B.xr:B.x,xe=B.yt!==void 0?B.yt:B.y,ke=B.yb!==void 0?B.yb:B.y;se[N]={l:{val:ve,size:B.l+ye},r:{val:Oe,size:B.r+ye},b:{val:ke,size:B.b+ye},t:{val:xe,size:B.t+ye}},fe[N]=1}else delete se[N],delete fe[N];if(!j._replotting)return g.doAutoMargin(F)}},g.doAutoMargin=function(F){var N=F._fullLayout,B=N.width,j=N.height;N._size||(N._size={}),C(N);var K=N._size,G=N.margin,V=t.extendFlat({},K),W=G.l,J=G.r,X=G.t,ee=G.b,re=N._pushmargin,ie=N._pushmarginIds,se=N.minreducedwidth,fe=N.minreducedheight;if(N.margin.autoexpand!==!1){for(var ye in re)ie[ye]||delete re[ye];for(var ge in re.base={l:{val:0,size:W},r:{val:1,size:J},t:{val:1,size:X},b:{val:0,size:ee}},re){var he=re[ge].l||{},ve=re[ge].b||{},Oe=he.val,xe=he.size,ke=ve.val,Me=ve.size;for(var Te in re){if(T(xe)&&re[Te].r){var Q=re[Te].r.val,oe=re[Te].r.size;if(Q>Oe){var ce=(xe*Q+(oe-B)*Oe)/(Q-Oe),me=(oe*(1-Oe)+(xe-B)*(1-Q))/(Q-Oe);ce+me>W+J&&(W=ce,J=me)}}if(T(Me)&&re[Te].t){var Ae=re[Te].t.val,Ie=re[Te].t.size;if(Ae>ke){var Ce=(Me*Ae+(Ie-j)*ke)/(Ae-ke),Re=(Ie*(1-ke)+(Me-j)*(1-Ae))/(Ae-ke);Ce+Re>ee+X&&(ee=Ce,X=Re)}}}}}var le=t.constrain(B-G.l-G.r,2,se),de=t.constrain(j-G.t-G.b,2,fe),_e=Math.max(0,B-le),Fe=Math.max(0,j-de);if(_e){var Ve=(W+J)/_e;Ve>1&&(W/=Ve,J/=Ve)}if(Fe){var He=(ee+X)/Fe;He>1&&(ee/=He,X/=He)}if(K.l=Math.round(W),K.r=Math.round(J),K.t=Math.round(X),K.b=Math.round(ee),K.p=Math.round(G.pad),K.w=Math.round(B)-K.l-K.r,K.h=Math.round(j)-K.t-K.b,!N._replotting&&(g.didMarginChange(V,K)||function(tt){if("_redrawFromAutoMarginCount"in tt._fullLayout)return!1;var ot=n.list(tt,"",!0);for(var dt in ot)if(ot[dt].autoshift||ot[dt].shift)return!0;return!1}(F))){"_redrawFromAutoMarginCount"in N?N._redrawFromAutoMarginCount++:N._redrawFromAutoMarginCount=1;var nt=3*(1+Object.keys(ie).length);if(N._redrawFromAutoMarginCount<nt)return x.call("_doPlot",F);N._size=V,t.warn("Too many auto-margin redraws.")}(function(tt){var ot=n.list(tt,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(dt){for(var kt=0;kt<ot.length;kt++){var mt=ot[kt][dt];mt&&mt()}})})(F)};var P=["l","r","t","b","p","w","h"];function I(F,N,B){var j=!1,K=[g.previousPromises,function(){if(F._transitionData)return F._transitioning=!1,function(V){var W=Promise.resolve();if(!V)return W;for(;V.length;)W=W.then(V.shift());return W}(F._transitionData._interruptCallbacks)},B.prepareFn,g.rehover,g.reselect,function(){return F.emit("plotly_transitioning",[]),new Promise(function(V){F._transitioning=!0,N.duration>0&&(F._transitioningWithDuration=!0),F._transitionData._interruptCallbacks.push(function(){j=!0}),B.redraw&&F._transitionData._interruptCallbacks.push(function(){return x.call("redraw",F)}),F._transitionData._interruptCallbacks.push(function(){F.emit("plotly_transitioninterrupted",[])});var W=0,J=0;function X(){return W++,function(){var ee;J++,j||J!==W||(ee=V,F._transitionData&&(function(re){if(re)for(;re.length;)re.shift()}(F._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(B.redraw)return x.call("redraw",F)}).then(function(){F._transitioning=!1,F._transitioningWithDuration=!1,F.emit("plotly_transitioned",[])}).then(ee)))}}B.runFn(X),setTimeout(X())})}],G=t.syncOrAsync(K,F);return G&&G.then||(G=Promise.resolve()),G.then(function(){return F})}g.didMarginChange=function(F,N){for(var B=0;B<P.length;B++){var j=P[B],K=F[j],G=N[j];if(!T(K)||Math.abs(G-K)>1)return!0}return!1},g.graphJson=function(F,N,B,j,K,G){(K&&N&&!F._fullData||K&&!N&&!F._fullLayout)&&g.supplyDefaults(F);var V=K?F._fullData:F.data,W=K?F._fullLayout:F.layout,J=(F._transitionData||{})._frames;function X(ie,se){if(typeof ie=="function")return se?"_function_":null;if(t.isPlainObject(ie)){var fe,ye={};return Object.keys(ie).sort().forEach(function(ge){if(["_","["].indexOf(ge.charAt(0))===-1)if(typeof ie[ge]!="function"){if(B==="keepdata"){if(ge.substr(ge.length-3)==="src")return}else if(B==="keepstream"){if(typeof(fe=ie[ge+"src"])=="string"&&fe.indexOf(":")>0&&!t.isPlainObject(ie.stream))return}else if(B!=="keepall"&&typeof(fe=ie[ge+"src"])=="string"&&fe.indexOf(":")>0)return;ye[ge]=X(ie[ge],se)}else se&&(ye[ge]="_function")}),ye}return Array.isArray(ie)?ie.map(function(ge){return X(ge,se)}):t.isTypedArray(ie)?t.simpleMap(ie,t.identity):t.isJSDate(ie)?t.ms2DateTimeLocal(+ie):ie}var ee={data:(V||[]).map(function(ie){var se=X(ie);return N&&delete se.fit,se})};if(!N&&(ee.layout=X(W),K)){var re=W._size;ee.layout.computed={margin:{b:re.b,l:re.l,r:re.r,t:re.t}}}return J&&(ee.frames=X(J)),G&&(ee.config=X(F._context,!0)),j==="object"?ee:JSON.stringify(ee)},g.modifyFrames=function(F,N){var B,j,K,G=F._transitionData._frames,V=F._transitionData._frameHash;for(B=0;B<N.length;B++)switch((j=N[B]).type){case"replace":K=j.value;var W=(G[j.index]||{}).name,J=K.name;G[j.index]=V[J]=K,J!==W&&(delete V[W],V[J]=K);break;case"insert":V[(K=j.value).name]=K,G.splice(j.index,0,K);break;case"delete":delete V[(K=G[j.index]).name],G.splice(j.index,1)}return Promise.resolve()},g.computeFrame=function(F,N){var B,j,K,G,V=F._transitionData._frameHash;if(!N)throw new Error("computeFrame must be given a string frame name");var W=V[N.toString()];if(!W)return!1;for(var J=[W],X=[W.name];W.baseframe&&(W=V[W.baseframe.toString()])&&X.indexOf(W.name)===-1;)J.push(W),X.push(W.name);for(var ee={};W=J.pop();)if(W.layout&&(ee.layout=g.extendLayout(ee.layout,W.layout)),W.data){if(ee.data||(ee.data=[]),!(j=W.traces))for(j=[],B=0;B<W.data.length;B++)j[B]=B;for(ee.traces||(ee.traces=[]),B=0;B<W.data.length;B++)(K=j[B])!=null&&((G=ee.traces.indexOf(K))===-1&&(G=ee.data.length,ee.traces[G]=K),ee.data[G]=g.extendTrace(ee.data[G],W.data[B]))}return ee},g.recomputeFrameHash=function(F){for(var N=F._transitionData._frameHash={},B=F._transitionData._frames,j=0;j<B.length;j++){var K=B[j];K&&K.name&&(N[K.name]=K)}},g.extendObjectWithContainers=function(F,N,B){var j,K,G,V,W,J,X,ee=t.extendDeepNoArrays({},N||{}),re=t.expandObjectPaths(ee),ie={};if(B&&B.length)for(G=0;G<B.length;G++)(K=(j=t.nestedProperty(re,B[G])).get())===void 0?t.nestedProperty(ie,B[G]).set(null):(j.set(null),t.nestedProperty(ie,B[G]).set(K));if(F=t.extendDeepNoArrays(F||{},re),B&&B.length){for(G=0;G<B.length;G++)if(J=t.nestedProperty(ie,B[G]).get()){for(X=(W=t.nestedProperty(F,B[G])).get(),Array.isArray(X)||(X=[],W.set(X)),V=0;V<J.length;V++){var se=J[V];X[V]=se===null?null:g.extendObjectWithContainers(X[V],se)}W.set(X)}}return F},g.dataArrayContainers=["transforms","dimensions"],g.layoutArrayContainers=x.layoutArrayContainers,g.extendTrace=function(F,N){return g.extendObjectWithContainers(F,N,g.dataArrayContainers)},g.extendLayout=function(F,N){return g.extendObjectWithContainers(F,N,g.layoutArrayContainers)},g.transition=function(F,N,B,j,K,G){var V={redraw:K.redraw},W={},J=[];return V.prepareFn=function(){for(var X=Array.isArray(N)?N.length:0,ee=j.slice(0,X),re=0;re<ee.length;re++){var ie=ee[re],se=F._fullData[ie]._module;if(se){if(se.animatable){var fe=se.basePlotModule.name;W[fe]||(W[fe]=[]),W[fe].push(ie)}F.data[ee[re]]=g.extendTrace(F.data[ee[re]],N[re])}}var ye=t.expandObjectPaths(t.extendDeepNoArrays({},B)),ge=/^[xy]axis[0-9]*$/;for(var he in ye)ge.test(he)&&delete ye[he].range;g.extendLayout(F.layout,ye),delete F.calcdata,g.supplyDefaults(F),g.doCalcdata(F);var ve=t.expandObjectPaths(B);if(ve){var Oe=F._fullLayout._plots;for(var xe in Oe){var ke=Oe[xe],Me=ke.xaxis,Te=ke.yaxis,Q=Me.range.slice(),oe=Te.range.slice(),ce=null,me=null,Ae=null,Ie=null;Array.isArray(ve[Me._name+".range"])?ce=ve[Me._name+".range"].slice():Array.isArray((ve[Me._name]||{}).range)&&(ce=ve[Me._name].range.slice()),Array.isArray(ve[Te._name+".range"])?me=ve[Te._name+".range"].slice():Array.isArray((ve[Te._name]||{}).range)&&(me=ve[Te._name].range.slice()),Q&&ce&&(Me.r2l(Q[0])!==Me.r2l(ce[0])||Me.r2l(Q[1])!==Me.r2l(ce[1]))&&(Ae={xr0:Q,xr1:ce}),oe&&me&&(Te.r2l(oe[0])!==Te.r2l(me[0])||Te.r2l(oe[1])!==Te.r2l(me[1]))&&(Ie={yr0:oe,yr1:me}),(Ae||Ie)&&J.push(t.extendFlat({plotinfo:ke},Ae,Ie))}}return Promise.resolve()},V.runFn=function(X){var ee,re,ie=F._fullLayout._basePlotModules,se=J.length;if(B)for(re=0;re<ie.length;re++)ie[re].transitionAxes&&ie[re].transitionAxes(F,J,G,X);for(var fe in se?((ee=t.extendFlat({},G)).duration=0,delete W.cartesian):ee=G,W){var ye=W[fe];F._fullData[ye[0]]._module.basePlotModule.plot(F,ye,ee,X)}},I(F,G,V)},g.transitionFromReact=function(F,N,B,j){var K=F._fullLayout,G=K.transition,V={},W=[];return V.prepareFn=function(){var J=K._plots;for(var X in V.redraw=!1,N.anim==="some"&&(V.redraw=!0),B.anim==="some"&&(V.redraw=!0),J){var ee=J[X],re=ee.xaxis,ie=ee.yaxis,se=j[re._name].range.slice(),fe=j[ie._name].range.slice(),ye=re.range.slice(),ge=ie.range.slice();re.setScale(),ie.setScale();var he=null,ve=null;re.r2l(se[0])===re.r2l(ye[0])&&re.r2l(se[1])===re.r2l(ye[1])||(he={xr0:se,xr1:ye}),ie.r2l(fe[0])===ie.r2l(ge[0])&&ie.r2l(fe[1])===ie.r2l(ge[1])||(ve={yr0:fe,yr1:ge}),(he||ve)&&W.push(t.extendFlat({plotinfo:ee},he,ve))}return Promise.resolve()},V.runFn=function(J){for(var X,ee,re,ie=F._fullData,se=F._fullLayout._basePlotModules,fe=[],ye=0;ye<ie.length;ye++)fe.push(ye);function ge(){if(F._fullLayout)for(var ve=0;ve<se.length;ve++)se[ve].transitionAxes&&se[ve].transitionAxes(F,W,X,J)}function he(){if(F._fullLayout)for(var ve=0;ve<se.length;ve++)se[ve].plot(F,re,ee,J)}W.length&&N.anim?G.ordering==="traces first"?(X=t.extendFlat({},G,{duration:0}),re=fe,ee=G,setTimeout(ge,G.duration),he()):(X=G,re=null,ee=t.extendFlat({},G,{duration:0}),setTimeout(he,X.duration),ge()):W.length?(X=G,ge()):N.anim&&(re=fe,ee=G,he())},I(F,G,V)},g.doCalcdata=function(F,N){var B,j,K,G,V=n.list(F),W=F._fullData,J=F._fullLayout,X=new Array(W.length),ee=(F.calcdata||[]).slice();for(F.calcdata=X,J._numBoxes=0,J._numViolins=0,J._violinScaleGroupStats={},F._hmpixcount=0,F._hmlumcount=0,J._piecolormap={},J._sunburstcolormap={},J._treemapcolormap={},J._iciclecolormap={},J._funnelareacolormap={},K=0;K<W.length;K++)Array.isArray(N)&&N.indexOf(K)===-1&&(X[K]=ee[K]);for(K=0;K<W.length;K++)(B=W[K])._arrayAttrs=d.findArrayAttributes(B),B._extremes={};var re=J._subplots.polar||[];for(K=0;K<re.length;K++)V.push(J[re[K]].radialaxis,J[re[K]].angularaxis);for(var ie in J._colorAxes){var se=J[ie];se.cauto!==!1&&(delete se.cmin,delete se.cmax)}var fe=!1;function ye(ve){if(B=W[ve],j=B._module,B.visible===!0&&B.transforms){if(j&&j.calc){var Oe=j.calc(F,B);Oe[0]&&Oe[0].t&&Oe[0].t._scene&&delete Oe[0].t._scene.dirty}for(G=0;G<B.transforms.length;G++){var xe=B.transforms[G];(j=y[xe.type])&&j.calcTransform&&(B._hasCalcTransform=!0,fe=!0,j.calcTransform(F,B,xe))}}}function ge(ve,Oe){if(B=W[ve],!!(j=B._module).isContainer===Oe){var xe=[];if(B.visible===!0&&B._length!==0){delete B._indexToPoints;var ke=B.transforms||[];for(G=ke.length-1;G>=0;G--)if(ke[G].enabled){B._indexToPoints=ke[G]._indexToPoints;break}j&&j.calc&&(xe=j.calc(F,B))}Array.isArray(xe)&&xe[0]||(xe=[{x:r,y:r}]),xe[0].t||(xe[0].t={}),xe[0].trace=B,X[ve]=xe}}for(z(V,W,J),K=0;K<W.length;K++)ge(K,!0);for(K=0;K<W.length;K++)ye(K);for(fe&&z(V,W,J),K=0;K<W.length;K++)ge(K,!0);for(K=0;K<W.length;K++)ge(K,!1);H(F);var he=function(ve,Oe){var xe,ke,Me,Te,Q,oe=[];function ce(Ge,We,Be){var Ye=We._id.charAt(0);if(Ge==="histogram2dcontour"){var rt=We._counterAxes[0],Se=n.getFromId(Oe,rt),ze=Ye==="x"||rt==="x"&&Se.type==="category",Ke=Ye==="y"||rt==="y"&&Se.type==="category";return function(st,ct){return st===0||ct===0||ze&&st===Be[ct].length-1||Ke&&ct===Be.length-1?-1:(Ye==="y"?ct:st)-1}}return function(st,ct){return Ye==="y"?ct:st}}var me={min:function(Ge){return t.aggNums(Math.min,null,Ge)},max:function(Ge){return t.aggNums(Math.max,null,Ge)},sum:function(Ge){return t.aggNums(function(We,Be){return We+Be},null,Ge)},total:function(Ge){return t.aggNums(function(We,Be){return We+Be},null,Ge)},mean:function(Ge){return t.mean(Ge)},median:function(Ge){return t.median(Ge)}};for(xe=0;xe<ve.length;xe++){var Ae=ve[xe];if(Ae.type==="category"){var Ie=Ae.categoryorder.match(U);if(Ie){var Ce=Ie[1],Re=Ie[2],le=Ae._id.charAt(0),de=le==="x",_e=[];for(ke=0;ke<Ae._categories.length;ke++)_e.push([Ae._categories[ke],[]]);for(ke=0;ke<Ae._traceIndices.length;ke++){var Fe=Ae._traceIndices[ke],Ve=Oe._fullData[Fe];if(Ve.visible===!0){var He=Ve.type;x.traceIs(Ve,"histogram")&&(delete Ve._xautoBinFinished,delete Ve._yautoBinFinished);var nt=He==="splom",tt=He==="scattergl",ot=Oe.calcdata[Fe];for(Me=0;Me<ot.length;Me++){var dt,kt,mt=ot[Me];if(nt){var wt=Ve._axesDim[Ae._id];if(!de){var Lt=Ve._diag[wt][0];Lt&&(Ae=Oe._fullLayout[n.id2name(Lt)])}var Ct=mt.trace.dimensions[wt].values;for(Te=0;Te<Ct.length;Te++)for(dt=Ae._categoriesMap[Ct[Te]],Q=0;Q<mt.trace.dimensions.length;Q++)if(Q!==wt){var It=mt.trace.dimensions[Q];_e[dt][1].push(It.values[Te])}}else if(tt){for(Te=0;Te<mt.t.x.length;Te++)de?(dt=mt.t.x[Te],kt=mt.t.y[Te]):(dt=mt.t.y[Te],kt=mt.t.x[Te]),_e[dt][1].push(kt);mt.t&&mt.t._scene&&delete mt.t._scene.dirty}else if(mt.hasOwnProperty("z")){kt=mt.z;var Ut=ce(Ve.type,Ae,kt);for(Te=0;Te<kt.length;Te++)for(Q=0;Q<kt[Te].length;Q++)(dt=Ut(Q,Te))+1&&_e[dt][1].push(kt[Te][Q])}else for((dt=mt.p)===void 0&&(dt=mt[le]),(kt=mt.s)===void 0&&(kt=mt.v),kt===void 0&&(kt=de?mt.y:mt.x),Array.isArray(kt)||(kt=kt===void 0?[]:[kt]),Te=0;Te<kt.length;Te++)_e[dt][1].push(kt[Te])}}}Ae._categoriesValue=_e;var Rt=[];for(ke=0;ke<_e.length;ke++)Rt.push([_e[ke][0],me[Ce](_e[ke][1])]);Rt.sort(function(Ge,We){return Ge[1]-We[1]}),Ae._categoriesAggregatedValue=Rt,Ae._initialCategories=Rt.map(function(Ge){return Ge[0]}),Re==="descending"&&Ae._initialCategories.reverse(),oe=oe.concat(Ae.sortByInitialCategories())}}}return oe}(V,F);if(he.length){for(J._numBoxes=0,J._numViolins=0,K=0;K<he.length;K++)ge(he[K],!0);for(K=0;K<he.length;K++)ge(he[K],!1);H(F)}x.getComponentMethod("fx","calc")(F),x.getComponentMethod("errorbars","calc")(F)};var U=/(total|sum|min|max|mean|median) (ascending|descending)/;function z(F,N,B){var j={};function K(J){J.clearCalc(),J.type==="multicategory"&&J.setupMultiCategory(N),j[J._id]=1}t.simpleMap(F,K);for(var G=B._axisMatchGroups||[],V=0;V<G.length;V++)for(var W in G[V])j[W]||K(B[n.id2name(W)])}function H(F){var N,B,j,K=F._fullLayout,G=K._visibleModules,V={};for(B=0;B<G.length;B++){var W=G[B],J=W.crossTraceCalc;if(J){var X=W.basePlotModule.name;V[X]?t.pushUnique(V[X],J):V[X]=[J]}}for(j in V){var ee=V[j],re=K._subplots[j];if(Array.isArray(re))for(N=0;N<re.length;N++){var ie=re[N],se=j==="cartesian"?K._plots[ie]:K[ie];for(B=0;B<ee.length;B++)ee[B](F,se,ie)}else for(B=0;B<ee.length;B++)ee[B](F)}}g.rehover=function(F){F._fullLayout._rehover&&F._fullLayout._rehover()},g.redrag=function(F){F._fullLayout._redrag&&F._fullLayout._redrag()},g.reselect=function(F){var N=F._fullLayout,B=(F.layout||{}).selections,j=N._previousSelections;N._previousSelections=B;var K=N._reselect||JSON.stringify(B)!==JSON.stringify(j);x.getComponentMethod("selections","reselect")(F,K)},g.generalUpdatePerTraceModule=function(F,N,B,j){var K,G=N.traceHash,V={};for(K=0;K<B.length;K++){var W=B[K],J=W[0].trace;J.visible&&(V[J.type]=V[J.type]||[],V[J.type].push(W))}for(var X in G)if(!V[X]){var ee=G[X][0];ee[0].trace.visible=!1,V[X]=[ee]}for(var re in V){var ie=V[re];ie[0][0].trace._module.plot(F,N,t.filterVisible(ie),j)}N.traceHash=V},g.plotBasePlot=function(F,N,B,j,K){var G=x.getModule(F),V=f(N.calcdata,G)[0];G.plot(N,V,j,K)},g.cleanBasePlot=function(F,N,B,j,K){var G=K._has&&K._has(F),V=B._has&&B._has(F);G&&!V&&K["_"+F+"layer"].selectAll("g.trace").remove()}},9813:function($){$.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function($,R,e){var k=e(71828),A=e(61082).tester,l=k.findIndexOfMin,T=k.isAngleInsideSector,x=k.angleDelta,d=k.angleDist;function s(n,a,i,c){var h,f,b=c[0],v=c[1],g=o(Math.sin(a)-Math.sin(n)),y=o(Math.cos(a)-Math.cos(n)),p=Math.tan(i),m=o(1/p),w=g/y,u=v-w*b;return m?g&&y?f=p*(h=u/(p-w)):y?(h=v*m,f=v):(h=b,f=b*p):g&&y?(h=0,f=u):y?(h=0,f=v):h=f=NaN,[h,f]}function t(n,a,i,c){return k.isFullCircle([a,i])?function(h,f){var b,v=f.length,g=new Array(v+1);for(b=0;b<v;b++){var y=f[b];g[b]=[h*Math.cos(y),h*Math.sin(y)]}return g[b]=g[0].slice(),g}(n,c):function(h,f,b,v){var g,y,p=v.length,m=[];function w(U){return[h*Math.cos(U),h*Math.sin(U)]}function u(U,z,H){return s(U,z,H,w(U))}function S(U){return k.mod(U,p)}function _(U){return T(U,[f,b])}var E=l(v,function(U){return _(U)?d(U,f):1/0}),L=u(v[E],v[S(E-1)],f);for(m.push(L),g=E,y=0;y<p;g++,y++){var C=v[S(g)];if(!_(C))break;m.push(w(C))}var P=l(v,function(U){return _(U)?d(U,b):1/0}),I=u(v[P],v[S(P+1)],b);return m.push(I),m.push([0,0]),m.push(m[0].slice()),m}(n,a,i,c)}function o(n){return Math.abs(n)>1e-10?n:0}function r(n,a,i){a=a||0,i=i||0;for(var c=n.length,h=new Array(c),f=0;f<c;f++){var b=n[f];h[f]=[a+b[0],i-b[1]]}return h}$.exports={isPtInsidePolygon:function(n,a,i,c,h){if(!T(a,c))return!1;var f,b;i[0]<i[1]?(f=i[0],b=i[1]):(f=i[1],b=i[0]);var v=A(t(f,c[0],c[1],h)),g=A(t(b,c[0],c[1],h)),y=[n*Math.cos(a),n*Math.sin(a)];return g.contains(y)&&!v.contains(y)},findPolygonOffset:function(n,a,i,c){for(var h=1/0,f=1/0,b=t(n,a,i,c),v=0;v<b.length;v++){var g=b[v];h=Math.min(h,g[0]),f=Math.min(f,-g[1])}return[h,f]},findEnclosingVertexAngles:function(n,a){var i=l(a,function(h){var f=x(h,n);return f>0?f:1/0}),c=k.mod(i+1,a.length);return[a[i],a[c]]},findIntersectionXY:s,findXYatLength:function(n,a,i,c){var h=-a*i,f=a*a+1,b=2*(a*h-i),v=h*h+i*i-n*n,g=Math.sqrt(b*b-4*f*v),y=(-b+g)/(2*f),p=(-b-g)/(2*f);return[[y,a*y+h+c],[p,a*p+h+c]]},clampTiny:o,pathPolygon:function(n,a,i,c,h,f){return"M"+r(t(n,a,i,c),h,f).join("L")},pathPolygonAnnulus:function(n,a,i,c,h,f,b){var v,g;n<a?(v=n,g=a):(v=a,g=n);var y=r(t(v,i,c,h),f,b);return"M"+r(t(g,i,c,h),f,b).reverse().join("L")+"M"+y.join("L")}}},23580:function($,R,e){var k=e(27659).AU,A=e(71828).counterRegex,l=e(77997),T=e(9813),x=T.attr,d=T.name,s=A(d),t={};t[x]={valType:"subplotid",dflt:d,editType:"calc"},$.exports={attr:x,name:d,idRoot:d,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(73812),supplyLayoutDefaults:e(68993),plot:function(o){for(var r=o._fullLayout,n=o.calcdata,a=r._subplots[d],i=0;i<a.length;i++){var c=a[i],h=k(n,d,c),f=r[c]._subplot;f||(f=l(o,c),r[c]._subplot=f),f.plot(h,r,o._promises)}},clean:function(o,r,n,a){for(var i=a._subplots[d]||[],c=a._has&&a._has("gl"),h=r._has&&r._has("gl"),f=c&&!h,b=0;b<i.length;b++){var v=i[b],g=a[v]._subplot;if(!r[v]&&g)for(var y in g.framework.remove(),g.layers["radial-axis-title"].remove(),g.clipPaths)g.clipPaths[y].remove();f&&g._scene&&(g._scene.destroy(),g._scene=null)}},toSVG:e(93612).toSVG}},73812:function($,R,e){var k=e(22399),A=e(13838),l=e(27670).Y,T=e(71828).extendFlat,x=e(30962).overrideAll,d=x({color:A.color,showline:T({},A.showline,{dflt:!0}),linecolor:A.linecolor,linewidth:A.linewidth,showgrid:T({},A.showgrid,{dflt:!0}),gridcolor:A.gridcolor,gridwidth:A.gridwidth,griddash:A.griddash},"plot","from-root"),s=x({tickmode:A.minor.tickmode,nticks:A.nticks,tick0:A.tick0,dtick:A.dtick,tickvals:A.tickvals,ticktext:A.ticktext,ticks:A.ticks,ticklen:A.ticklen,tickwidth:A.tickwidth,tickcolor:A.tickcolor,ticklabelstep:A.ticklabelstep,showticklabels:A.showticklabels,showtickprefix:A.showtickprefix,tickprefix:A.tickprefix,showticksuffix:A.showticksuffix,ticksuffix:A.ticksuffix,showexponent:A.showexponent,exponentformat:A.exponentformat,minexponent:A.minexponent,separatethousands:A.separatethousands,tickfont:A.tickfont,tickangle:A.tickangle,tickformat:A.tickformat,tickformatstops:A.tickformatstops,layer:A.layer},"plot","from-root"),t={visible:T({},A.visible,{dflt:!0}),type:T({},A.type,{values:["-","linear","log","date","category"]}),autotypenumbers:A.autotypenumbers,autorange:T({},A.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:T({},A.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:A.categoryorder,categoryarray:A.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},A.title.text,{editType:"plot",dflt:""}),font:T({},A.title.font,{editType:"plot"}),editType:"plot"},hoverformat:A.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:A._deprecated.title,titlefont:A._deprecated.titlefont}};T(t,d,s);var o={visible:T({},A.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:A.autotypenumbers,categoryorder:A.categoryorder,categoryarray:A.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:A.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(o,d,s),$.exports={domain:l({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:k.background},radialaxis:t,angularaxis:o,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function($,R,e){var k=e(71828),A=e(7901),l=e(44467),T=e(49119),x=e(27659).NG,d=e(26218),s=e(38701),t=e(96115),o=e(89426),r=e(15258),n=e(92128),a=e(4322),i=e(73812),c=e(12101),h=e(9813),f=h.axisNames;function b(g,y,p,m){var w=p("bgcolor");m.bgColor=A.combine(w,m.paper_bgcolor);var u=p("sector");p("hole");var S,_=x(m.fullData,h.name,m.id),E=m.layoutOut;function L(J,X){return p(S+"."+J,X)}for(var C=0;C<f.length;C++){S=f[C],k.isPlainObject(g[S])||(g[S]={});var P=g[S],I=l.newContainer(y,S);I._id=I._name=S,I._attr=m.id+"."+S,I._traceIndices=_.map(function(J){return J._expandedIndex});var U=h.axisName2dataArray[S],z=v(P,I,L,_,U,m);r(P,I,L,{axData:_,dataAttr:U});var H=L("visible");switch(c(I,y,E),L("uirevision",y.uirevision),I._m=1,S){case"radialaxis":var F=L("autorange",!I.isValidRange(P.range));P.autorange=F,!F||z!=="linear"&&z!=="-"||L("rangemode"),F==="reversed"&&(I._m=-1),L("range"),I.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(z==="date"){k.log("Polar plots do not support date angular axes yet.");for(var N=0;N<_.length;N++)_[N].visible=!1;z=P.type=I.type="linear"}L(z==="linear"?"thetaunit":"period");var B=L("direction");L("rotation",{counterclockwise:0,clockwise:90}[B])}if(o(P,I,L,I.type,{tickSuffixDflt:I.thetaunit==="degrees"?"":void 0}),H){var j,K,G,V,W=m.font||{};K=(j=L("color"))===P.color?j:W.color,G=W.size,V=W.family,d(P,I,L,I.type),t(P,I,L,I.type,{font:{color:K,size:G,family:V}}),s(P,I,L,{outerTicks:!0}),n(P,I,L,{dfltColor:j,bgColor:m.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:i[S]}),L("layer"),S==="radialaxis"&&(L("side"),L("angle",u[0]),L("title.text"),k.coerceFont(L,"title.font",{color:K,size:k.bigFont(G),family:V}))}z!=="category"&&L("hoverformat"),I._input=P}y.angularaxis.type==="category"&&p("gridshape")}function v(g,y,p,m,w,u){var S=p("autotypenumbers",u.autotypenumbersDflt);if(p("type")==="-"){for(var _,E=0;E<m.length;E++)if(m[E].visible){_=m[E];break}_&&_[w]&&(y.type=a(_[w],"gregorian",{noMultiCategory:!0,autotypenumbers:S})),y.type==="-"?y.type="linear":g.type=y.type}return y.type}$.exports=function(g,y,p){T(g,y,p,{type:h.name,attributes:i,handleDefaults:b,font:y.font,autotypenumbersDflt:y.autotypenumbers,paper_bgcolor:y.paper_bgcolor,fullData:p,layoutOut:y})}},77997:function($,R,e){var k=e(39898),A=e(84267),l=e(73972),T=e(71828),x=T.strRotate,d=T.strTranslate,s=e(7901),t=e(91424),o=e(74875),r=e(89298),n=e(21994),a=e(12101),i=e(71739).doAutoRange,c=e(29323),h=e(28569),f=e(30211),b=e(92998),v=e(47322).prepSelect,g=e(47322).selectOnClick,y=e(47322).clearOutline,p=e(6964),m=e(33306),w=e(61549).redrawReglTraces,u=e(18783).MID_SHIFT,S=e(9813),_=e(10869),E=e(23893),L=E.smith,C=E.reactanceArc,P=E.resistanceArc,I=E.smithTransform,U=T._,z=T.mod,H=T.deg2rad,F=T.rad2deg;function N(V,W,J){this.isSmith=J||!1,this.id=W,this.gd=V,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var X=V._fullLayout,ee="clip"+X._uid+W;this.clipIds.forTraces=ee+"-for-traces",this.clipPaths.forTraces=X._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=X["_"+(J?"smith":"polar")+"layer"].append("g").attr("class",W),this.getHole=function(re){return this.isSmith?0:re.hole},this.getSector=function(re){return this.isSmith?[0,360]:re.sector},this.getRadial=function(re){return this.isSmith?re.realaxis:re.radialaxis},this.getAngular=function(re){return this.isSmith?re.imaginaryaxis:re.angularaxis},J||(this.radialTickLayout=null,this.angularTickLayout=null)}var B=N.prototype;function j(V){var W=V.ticks+String(V.ticklen)+String(V.showticklabels);return"side"in V&&(W+=V.side),W}function K(V,W){return W[T.findIndexOfMin(W,function(J){return T.angleDist(V,J)})]}function G(V,W,J){return W?(V.attr("display",null),V.attr(J)):V&&V.attr("display","none"),V}$.exports=function(V,W,J){return new N(V,W,J)},B.plot=function(V,W){for(var J=this,X=W[J.id],ee=!1,re=0;re<V.length;re++)if(V[re][0].trace.cliponaxis===!1){ee=!0;break}J._hasClipOnAxisFalse=ee,J.updateLayers(W,X),J.updateLayout(W,X),o.generalUpdatePerTraceModule(J.gd,J,V,X),J.updateFx(W,X),J.isSmith&&(delete X.realaxis.range,delete X.imaginaryaxis.range)},B.updateLayers=function(V,W){var J=this,X=J.isSmith,ee=J.layers,re=J.getRadial(W),ie=J.getAngular(W),se=S.layerNames,fe=se.indexOf("frontplot"),ye=se.slice(0,fe),ge=ie.layer==="below traces",he=re.layer==="below traces";ge&&ye.push("angular-line"),he&&ye.push("radial-line"),ge&&ye.push("angular-axis"),he&&ye.push("radial-axis"),ye.push("frontplot"),ge||ye.push("angular-line"),he||ye.push("radial-line"),ge||ye.push("angular-axis"),he||ye.push("radial-axis");var ve=(X?"smith":"polar")+"sublayer",Oe=J.framework.selectAll("."+ve).data(ye,String);Oe.enter().append("g").attr("class",function(xe){return ve+" "+xe}).each(function(xe){var ke=ee[xe]=k.select(this);switch(xe){case"frontplot":X||ke.append("g").classed("barlayer",!0),ke.append("g").classed("scatterlayer",!0);break;case"backplot":ke.append("g").classed("maplayer",!0);break;case"plotbg":ee.bg=ke.append("path");break;case"radial-grid":case"angular-grid":ke.style("fill","none");break;case"radial-line":ke.append("line").style("fill","none");break;case"angular-line":ke.append("path").style("fill","none")}}),Oe.order()},B.updateLayout=function(V,W){var J=this,X=J.layers,ee=V._size,re=J.getRadial(W),ie=J.getAngular(W),se=W.domain.x,fe=W.domain.y;J.xOffset=ee.l+ee.w*se[0],J.yOffset=ee.t+ee.h*(1-fe[1]);var ye=J.xLength=ee.w*(se[1]-se[0]),ge=J.yLength=ee.h*(fe[1]-fe[0]),he=J.getSector(W);J.sectorInRad=he.map(H);var ve,Oe,xe,ke,Me,Te=J.sectorBBox=function(tt){var ot,dt=tt[0],kt=tt[1]-dt,mt=z(dt,360),wt=mt+kt,Lt=Math.cos(H(mt)),Ct=Math.sin(H(mt)),It=Math.cos(H(wt)),Ut=Math.sin(H(wt));return ot=mt<=90&&wt>=90||mt>90&&wt>=450?1:Ct<=0&&Ut<=0?0:Math.max(Ct,Ut),[mt<=180&&wt>=180||mt>180&&wt>=540?-1:Lt>=0&&It>=0?0:Math.min(Lt,It),mt<=270&&wt>=270||mt>270&&wt>=630?-1:Ct>=0&&Ut>=0?0:Math.min(Ct,Ut),wt>=360?1:Lt<=0&&It<=0?0:Math.max(Lt,It),ot]}(he),Q=Te[2]-Te[0],oe=Te[3]-Te[1],ce=ge/ye,me=Math.abs(oe/Q);ce>me?(ve=ye,Me=(ge-(Oe=ye*me))/ee.h/2,xe=[se[0],se[1]],ke=[fe[0]+Me,fe[1]-Me]):(Oe=ge,Me=(ye-(ve=ge/me))/ee.w/2,xe=[se[0]+Me,se[1]-Me],ke=[fe[0],fe[1]]),J.xLength2=ve,J.yLength2=Oe,J.xDomain2=xe,J.yDomain2=ke;var Ae,Ie=J.xOffset2=ee.l+ee.w*xe[0],Ce=J.yOffset2=ee.t+ee.h*(1-ke[1]),Re=J.radius=ve/Q,le=J.innerRadius=J.getHole(W)*Re,de=J.cx=Ie-Re*Te[0],_e=J.cy=Ce+Re*Te[3],Fe=J.cxx=de-Ie,Ve=J.cyy=_e-Ce,He=re.side;He==="counterclockwise"?(Ae=He,He="top"):He==="clockwise"&&(Ae=He,He="bottom"),J.radialAxis=J.mockAxis(V,W,re,{_id:"x",side:He,_trueSide:Ae,domain:[le/ee.w,Re/ee.w]}),J.angularAxis=J.mockAxis(V,W,ie,{side:"right",domain:[0,Math.PI],autorange:!1}),J.doAutoRange(V,W),J.updateAngularAxis(V,W),J.updateRadialAxis(V,W),J.updateRadialAxisTitle(V,W),J.xaxis=J.mockCartesianAxis(V,W,{_id:"x",domain:xe}),J.yaxis=J.mockCartesianAxis(V,W,{_id:"y",domain:ke});var nt=J.pathSubplot();J.clipPaths.forTraces.select("path").attr("d",nt).attr("transform",d(Fe,Ve)),X.frontplot.attr("transform",d(Ie,Ce)).call(t.setClipUrl,J._hasClipOnAxisFalse?null:J.clipIds.forTraces,J.gd),X.bg.attr("d",nt).attr("transform",d(de,_e)).call(s.fill,W.bgcolor)},B.mockAxis=function(V,W,J,X){var ee=T.extendFlat({},J,X);return a(ee,W,V),ee},B.mockCartesianAxis=function(V,W,J){var X=this,ee=X.isSmith,re=J._id,ie=T.extendFlat({type:"linear"},J);n(ie,V);var se={x:[0,2],y:[1,3]};return ie.setRange=function(){var fe=X.sectorBBox,ye=se[re],ge=X.radialAxis._rl,he=(ge[1]-ge[0])/(1-X.getHole(W));ie.range=[fe[ye[0]]*he,fe[ye[1]]*he]},ie.isPtWithinRange=re!=="x"||ee?function(){return!0}:function(fe){return X.isPtInside(fe)},ie.setRange(),ie.setScale(),ie},B.doAutoRange=function(V,W){var J=this,X=J.gd,ee=J.radialAxis,re=J.getRadial(W);i(X,ee);var ie=ee.range;re.range=ie.slice(),re._input.range=ie.slice(),ee._rl=[ee.r2l(ie[0],null,"gregorian"),ee.r2l(ie[1],null,"gregorian")]},B.updateRadialAxis=function(V,W){var J=this,X=J.gd,ee=J.layers,re=J.radius,ie=J.innerRadius,se=J.cx,fe=J.cy,ye=J.getRadial(W),ge=z(J.getSector(W)[0],360),he=J.radialAxis,ve=ie<re,Oe=J.isSmith;Oe||(J.fillViewInitialKey("radialaxis.angle",ye.angle),J.fillViewInitialKey("radialaxis.range",he.range.slice()),he.setGeometry()),he.tickangle==="auto"&&ge>90&&ge<=270&&(he.tickangle=180);var xe=Oe?function(Ce){var Re=I(J,L([Ce.x,0]));return d(Re[0]-se,Re[1]-fe)}:function(Ce){return d(he.l2p(Ce.x)+ie,0)},ke=Oe?function(Ce){return P(J,Ce.x,-1/0,1/0)}:function(Ce){return J.pathArc(he.r2p(Ce.x)+ie)},Me=j(ye);if(J.radialTickLayout!==Me&&(ee["radial-axis"].selectAll(".xtick").remove(),J.radialTickLayout=Me),ve){he.setScale();var Te=0,Q=Oe?(he.tickvals||[]).filter(function(Ce){return Ce>=0}).map(function(Ce){return r.tickText(he,Ce,!0,!1)}):r.calcTicks(he),oe=Oe?Q:r.clipEnds(he,Q),ce=r.getTickSigns(he)[2];Oe&&((he.ticks==="top"&&he.side==="bottom"||he.ticks==="bottom"&&he.side==="top")&&(ce=-ce),he.ticks==="top"&&he.side==="top"&&(Te=-he.ticklen),he.ticks==="bottom"&&he.side==="bottom"&&(Te=he.ticklen)),r.drawTicks(X,he,{vals:Q,layer:ee["radial-axis"],path:r.makeTickPath(he,0,ce),transFn:xe,crisp:!1}),r.drawGrid(X,he,{vals:oe,layer:ee["radial-grid"],path:ke,transFn:T.noop,crisp:!1}),r.drawLabels(X,he,{vals:Q,layer:ee["radial-axis"],transFn:xe,labelFns:r.makeLabelFns(he,Te)})}var me=J.radialAxisAngle=J.vangles?F(K(H(ye.angle),J.vangles)):ye.angle,Ae=d(se,fe),Ie=Ae+x(-me);G(ee["radial-axis"],ve&&(ye.showticklabels||ye.ticks),{transform:Ie}),G(ee["radial-grid"],ve&&ye.showgrid,{transform:Oe?"":Ae}),G(ee["radial-line"].select("line"),ve&&ye.showline,{x1:Oe?-re:ie,y1:0,x2:re,y2:0,transform:Ie}).attr("stroke-width",ye.linewidth).call(s.stroke,ye.linecolor)},B.updateRadialAxisTitle=function(V,W,J){if(!this.isSmith){var X=this,ee=X.gd,re=X.radius,ie=X.cx,se=X.cy,fe=X.getRadial(W),ye=X.id+"title",ge=0;if(fe.title){var he=t.bBox(X.layers["radial-axis"].node()).height,ve=fe.title.font.size,Oe=fe.side;ge=Oe==="top"?ve:Oe==="counterclockwise"?-(he+.4*ve):he+.8*ve}var xe=J!==void 0?J:X.radialAxisAngle,ke=H(xe),Me=Math.cos(ke),Te=Math.sin(ke),Q=ie+re/2*Me+ge*Te,oe=se-re/2*Te+ge*Me;X.layers["radial-axis-title"]=b.draw(ee,ye,{propContainer:fe,propName:X.id+".radialaxis.title",placeholder:U(ee,"Click to enter radial axis title"),attributes:{x:Q,y:oe,"text-anchor":"middle"},transform:{rotate:-xe}})}},B.updateAngularAxis=function(V,W){var J=this,X=J.gd,ee=J.layers,re=J.radius,ie=J.innerRadius,se=J.cx,fe=J.cy,ye=J.getAngular(W),ge=J.angularAxis,he=J.isSmith;he||(J.fillViewInitialKey("angularaxis.rotation",ye.rotation),ge.setGeometry(),ge.setScale());var ve=he?function(Ce){var Re=I(J,L([0,Ce.x]));return Math.atan2(Re[0]-se,Re[1]-fe)-Math.PI/2}:function(Ce){return ge.t2g(Ce.x)};ge.type==="linear"&&ge.thetaunit==="radians"&&(ge.tick0=F(ge.tick0),ge.dtick=F(ge.dtick));var Oe=function(Ce){return d(se+re*Math.cos(Ce),fe-re*Math.sin(Ce))},xe=he?function(Ce){var Re=I(J,L([0,Ce.x]));return d(Re[0],Re[1])}:function(Ce){return Oe(ve(Ce))},ke=he?function(Ce){var Re=I(J,L([0,Ce.x])),le=Math.atan2(Re[0]-se,Re[1]-fe)-Math.PI/2;return d(Re[0],Re[1])+x(-F(le))}:function(Ce){var Re=ve(Ce);return Oe(Re)+x(-F(Re))},Me=he?function(Ce){return C(J,Ce.x,0,1/0)}:function(Ce){var Re=ve(Ce),le=Math.cos(Re),de=Math.sin(Re);return"M"+[se+ie*le,fe-ie*de]+"L"+[se+re*le,fe-re*de]},Te=r.makeLabelFns(ge,0).labelStandoff,Q={xFn:function(Ce){var Re=ve(Ce);return Math.cos(Re)*Te},yFn:function(Ce){var Re=ve(Ce),le=Math.sin(Re)>0?.2:1;return-Math.sin(Re)*(Te+Ce.fontSize*le)+Math.abs(Math.cos(Re))*(Ce.fontSize*u)},anchorFn:function(Ce){var Re=ve(Ce),le=Math.cos(Re);return Math.abs(le)<.1?"middle":le>0?"start":"end"},heightFn:function(Ce,Re,le){var de=ve(Ce);return-.5*(1+Math.sin(de))*le}},oe=j(ye);J.angularTickLayout!==oe&&(ee["angular-axis"].selectAll("."+ge._id+"tick").remove(),J.angularTickLayout=oe);var ce,me=he?[1/0].concat(ge.tickvals||[]).map(function(Ce){return r.tickText(ge,Ce,!0,!1)}):r.calcTicks(ge);if(he&&(me[0].text="",me[0].fontSize*=1.75),W.gridshape==="linear"?(ce=me.map(ve),T.angleDelta(ce[0],ce[1])<0&&(ce=ce.slice().reverse())):ce=null,J.vangles=ce,ge.type==="category"&&(me=me.filter(function(Ce){return T.isAngleInsideSector(ve(Ce),J.sectorInRad)})),ge.visible){var Ae=ge.ticks==="inside"?-1:1,Ie=(ge.linewidth||1)/2;r.drawTicks(X,ge,{vals:me,layer:ee["angular-axis"],path:"M"+Ae*Ie+",0h"+Ae*ge.ticklen,transFn:ke,crisp:!1}),r.drawGrid(X,ge,{vals:me,layer:ee["angular-grid"],path:Me,transFn:T.noop,crisp:!1}),r.drawLabels(X,ge,{vals:me,layer:ee["angular-axis"],repositionOnUpdate:!0,transFn:xe,labelFns:Q})}G(ee["angular-line"].select("path"),ye.showline,{d:J.pathSubplot(),transform:d(se,fe)}).attr("stroke-width",ye.linewidth).call(s.stroke,ye.linecolor)},B.updateFx=function(V,W){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(V),this.updateRadialDrag(V,W,0),this.updateRadialDrag(V,W,1)),this.updateHoverAndMainDrag(V))},B.updateHoverAndMainDrag=function(V){var W,J,X=this,ee=X.isSmith,re=X.gd,ie=X.layers,se=V._zoomlayer,fe=S.MINZOOM,ye=S.OFFEDGE,ge=X.radius,he=X.innerRadius,ve=X.cx,Oe=X.cy,xe=X.cxx,ke=X.cyy,Me=X.sectorInRad,Te=X.vangles,Q=X.radialAxis,oe=_.clampTiny,ce=_.findXYatLength,me=_.findEnclosingVertexAngles,Ae=S.cornerHalfWidth,Ie=S.cornerLen/2,Ce=c.makeDragger(ie,"path","maindrag",V.dragmode===!1?"none":"crosshair");k.select(Ce).attr("d",X.pathSubplot()).attr("transform",d(ve,Oe)),Ce.onmousemove=function(Se){f.hover(re,Se,X.id),re._fullLayout._lasthover=Ce,re._fullLayout._hoversubplot=X.id},Ce.onmouseout=function(Se){re._dragging||h.unhover(re,Se)};var Re,le,de,_e,Fe,Ve,He,nt,tt,ot={element:Ce,gd:re,subplot:X.id,plotinfo:{id:X.id,xaxis:X.xaxis,yaxis:X.yaxis},xaxes:[X.xaxis],yaxes:[X.yaxis]};function dt(Se,ze){return Math.sqrt(Se*Se+ze*ze)}function kt(Se,ze){return dt(Se-xe,ze-ke)}function mt(Se,ze){return Math.atan2(ke-ze,Se-xe)}function wt(Se,ze){return[Se*Math.cos(ze),Se*Math.sin(-ze)]}function Lt(Se,ze){if(Se===0)return X.pathSector(2*Ae);var Ke=Ie/Se,st=ze-Ke,ct=ze+Ke,Tt=Math.max(0,Math.min(Se,ge)),Et=Tt-Ae,At=Tt+Ae;return"M"+wt(Et,st)+"A"+[Et,Et]+" 0,0,0 "+wt(Et,ct)+"L"+wt(At,ct)+"A"+[At,At]+" 0,0,1 "+wt(At,st)+"Z"}function Ct(Se,ze,Ke){if(Se===0)return X.pathSector(2*Ae);var st,ct,Tt=wt(Se,ze),Et=wt(Se,Ke),At=oe((Tt[0]+Et[0])/2),ht=oe((Tt[1]+Et[1])/2);if(At&&ht){var pt=ht/At,gt=-1/pt,Pt=ce(Ae,pt,At,ht);st=ce(Ie,gt,Pt[0][0],Pt[0][1]),ct=ce(Ie,gt,Pt[1][0],Pt[1][1])}else{var Ot,Ht;ht?(Ot=Ie,Ht=Ae):(Ot=Ae,Ht=Ie),st=[[At-Ot,ht-Ht],[At+Ot,ht-Ht]],ct=[[At-Ot,ht+Ht],[At+Ot,ht+Ht]]}return"M"+st.join("L")+"L"+ct.reverse().join("L")+"Z"}function It(Se,ze){return ze=Math.max(Math.min(ze,ge),he),Se<ye?Se=0:ge-Se<ye?Se=ge:ze<ye?ze=0:ge-ze<ye&&(ze=ge),Math.abs(ze-Se)>fe?(Se<ze?(de=Se,_e=ze):(de=ze,_e=Se),!0):(de=null,_e=null,!1)}function Ut(Se,ze){Se=Se||Fe,ze=ze||"M0,0Z",nt.attr("d",Se),tt.attr("d",ze),c.transitionZoombox(nt,tt,Ve,He),Ve=!0;var Ke={};Ye(Ke),re.emit("plotly_relayouting",Ke)}function Rt(Se,ze){var Ke,st,ct=Re+(Se*=W),Tt=le+(ze*=J),Et=kt(Re,le),At=Math.min(kt(ct,Tt),ge),ht=mt(Re,le);It(Et,At)&&(Ke=Fe+X.pathSector(_e),de&&(Ke+=X.pathSector(de)),st=Lt(de,ht)+Lt(_e,ht)),Ut(Ke,st)}function Ge(Se,ze,Ke,st){var ct=_.findIntersectionXY(Ke,st,Ke,[Se-xe,ke-ze]);return dt(ct[0],ct[1])}function We(Se,ze){var Ke,st,ct=Re+Se,Tt=le+ze,Et=mt(Re,le),At=mt(ct,Tt),ht=me(Et,Te),pt=me(At,Te);It(Ge(Re,le,ht[0],ht[1]),Math.min(Ge(ct,Tt,pt[0],pt[1]),ge))&&(Ke=Fe+X.pathSector(_e),de&&(Ke+=X.pathSector(de)),st=[Ct(de,ht[0],ht[1]),Ct(_e,ht[0],ht[1])].join(" ")),Ut(Ke,st)}function Be(){if(c.removeZoombox(re),de!==null&&_e!==null){var Se={};Ye(Se),c.showDoubleClickNotifier(re),l.call("_guiRelayout",re,Se)}}function Ye(Se){var ze=Q._rl,Ke=(ze[1]-ze[0])/(1-he/ge)/ge,st=[ze[0]+(de-he)*Ke,ze[0]+(_e-he)*Ke];Se[X.id+".radialaxis.range"]=st}function rt(Se,ze){var Ke=re._fullLayout.clickmode;if(c.removeZoombox(re),Se===2){var st={};for(var ct in X.viewInitial)st[X.id+"."+ct]=X.viewInitial[ct];re.emit("plotly_doubleclick",null),l.call("_guiRelayout",re,st)}Ke.indexOf("select")>-1&&Se===1&&g(ze,re,[X.xaxis],[X.yaxis],X.id,ot),Ke.indexOf("event")>-1&&f.click(re,ze,X.id)}ot.prepFn=function(Se,ze,Ke){var st=re._fullLayout.dragmode,ct=Ce.getBoundingClientRect();re._fullLayout._calcInverseTransform(re);var Tt=re._fullLayout._invTransform;W=re._fullLayout._invScaleX,J=re._fullLayout._invScaleY;var Et=T.apply3DTransform(Tt)(ze-ct.left,Ke-ct.top);if(Re=Et[0],le=Et[1],Te){var At=_.findPolygonOffset(ge,Me[0],Me[1],Te);Re+=xe+At[0],le+=ke+At[1]}switch(st){case"zoom":ot.clickFn=rt,ee||(ot.moveFn=Te?We:Rt,ot.doneFn=Be,function(){de=null,_e=null,Fe=X.pathSubplot(),Ve=!1;var ht=re._fullLayout[X.id];He=A(ht.bgcolor).getLuminance(),(nt=c.makeZoombox(se,He,ve,Oe,Fe)).attr("fill-rule","evenodd"),tt=c.makeCorners(se,ve,Oe),y(re)}());break;case"select":case"lasso":v(Se,ze,Ke,ot,st)}},h.init(ot)},B.updateRadialDrag=function(V,W,J){var X=this,ee=X.gd,re=X.layers,ie=X.radius,se=X.innerRadius,fe=X.cx,ye=X.cy,ge=X.radialAxis,he=S.radialDragBoxSize,ve=he/2;if(ge.visible){var Oe,xe,ke,Me=H(X.radialAxisAngle),Te=ge._rl,Q=Te[0],oe=Te[1],ce=Te[J],me=.75*(Te[1]-Te[0])/(1-X.getHole(W))/ie;J?(Oe=fe+(ie+ve)*Math.cos(Me),xe=ye-(ie+ve)*Math.sin(Me),ke="radialdrag"):(Oe=fe+(se-ve)*Math.cos(Me),xe=ye-(se-ve)*Math.sin(Me),ke="radialdrag-inner");var Ae,Ie,Ce,Re=c.makeRectDragger(re,ke,"crosshair",-ve,-ve,he,he),le={element:Re,gd:ee};V.dragmode===!1&&(le.dragmode=!1),G(k.select(Re),ge.visible&&se<ie,{transform:d(Oe,xe)}),le.prepFn=function(){Ae=null,Ie=null,Ce=null,le.moveFn=de,le.doneFn=_e,y(ee)},le.clampFn=function(He,nt){return Math.sqrt(He*He+nt*nt)<S.MINDRAG&&(He=0,nt=0),[He,nt]},h.init(le)}function de(He,nt){if(Ae)Ae(He,nt);else{var tt=[He,-nt],ot=[Math.cos(Me),Math.sin(Me)],dt=Math.abs(T.dot(tt,ot)/Math.sqrt(T.dot(tt,tt)));isNaN(dt)||(Ae=dt<.5?Fe:Ve)}var kt={};(function(mt){Ie!==null?mt[X.id+".radialaxis.angle"]=Ie:Ce!==null&&(mt[X.id+".radialaxis.range["+J+"]"]=Ce)})(kt),ee.emit("plotly_relayouting",kt)}function _e(){Ie!==null?l.call("_guiRelayout",ee,X.id+".radialaxis.angle",Ie):Ce!==null&&l.call("_guiRelayout",ee,X.id+".radialaxis.range["+J+"]",Ce)}function Fe(He,nt){if(J!==0){var tt=Oe+He,ot=xe+nt;Ie=Math.atan2(ye-ot,tt-fe),X.vangles&&(Ie=K(Ie,X.vangles)),Ie=F(Ie);var dt=d(fe,ye)+x(-Ie);re["radial-axis"].attr("transform",dt),re["radial-line"].select("line").attr("transform",dt);var kt=X.gd._fullLayout,mt=kt[X.id];X.updateRadialAxisTitle(kt,mt,Ie)}}function Ve(He,nt){var tt=T.dot([He,-nt],[Math.cos(Me),Math.sin(Me)]);if(Ce=ce-me*tt,me>0==(J?Ce>Q:Ce<oe)){var ot=ee._fullLayout,dt=ot[X.id];ge.range[J]=Ce,ge._rl[J]=Ce,X.updateRadialAxis(ot,dt),X.xaxis.setRange(),X.xaxis.setScale(),X.yaxis.setRange(),X.yaxis.setScale();var kt=!1;for(var mt in X.traceHash){var wt=X.traceHash[mt],Lt=T.filterVisible(wt);wt[0][0].trace._module.plot(ee,X,Lt,dt),l.traceIs(mt,"gl")&&Lt.length&&(kt=!0)}kt&&(m(ee),w(ee))}else Ce=null}},B.updateAngularDrag=function(V){var W=this,J=W.gd,X=W.layers,ee=W.radius,re=W.angularAxis,ie=W.cx,se=W.cy,fe=W.cxx,ye=W.cyy,ge=S.angularDragBoxSize,he=c.makeDragger(X,"path","angulardrag",V.dragmode===!1?"none":"move"),ve={element:he,gd:J};function Oe(le,de){return Math.atan2(ye+ge-de,le-fe-ge)}V.dragmode===!1?ve.dragmode=!1:k.select(he).attr("d",W.pathAnnulus(ee,ee+ge)).attr("transform",d(ie,se)).call(p,"move");var xe,ke,Me,Te,Q,oe,ce=X.frontplot.select(".scatterlayer").selectAll(".trace"),me=ce.selectAll(".point"),Ae=ce.selectAll(".textpoint");function Ie(le,de){var _e=W.gd._fullLayout,Fe=_e[W.id],Ve=Oe(xe+le*V._invScaleX,ke+de*V._invScaleY),He=F(Ve-oe);if(Te=Me+He,X.frontplot.attr("transform",d(W.xOffset2,W.yOffset2)+x([-He,fe,ye])),W.vangles){Q=W.radialAxisAngle+He;var nt=d(ie,se)+x(-He),tt=d(ie,se)+x(-Q);X.bg.attr("transform",nt),X["radial-grid"].attr("transform",nt),X["radial-axis"].attr("transform",tt),X["radial-line"].select("line").attr("transform",tt),W.updateRadialAxisTitle(_e,Fe,Q)}else W.clipPaths.forTraces.select("path").attr("transform",d(fe,ye)+x(He));me.each(function(){var Lt=k.select(this),Ct=t.getTranslate(Lt);Lt.attr("transform",d(Ct.x,Ct.y)+x([He]))}),Ae.each(function(){var Lt=k.select(this),Ct=Lt.select("text"),It=t.getTranslate(Lt);Lt.attr("transform",x([He,Ct.attr("x"),Ct.attr("y")])+d(It.x,It.y))}),re.rotation=T.modHalf(Te,360),W.updateAngularAxis(_e,Fe),W._hasClipOnAxisFalse&&!T.isFullCircle(W.sectorInRad)&&ce.call(t.hideOutsideRangePoints,W);var ot=!1;for(var dt in W.traceHash)if(l.traceIs(dt,"gl")){var kt=W.traceHash[dt],mt=T.filterVisible(kt);kt[0][0].trace._module.plot(J,W,mt,Fe),mt.length&&(ot=!0)}ot&&(m(J),w(J));var wt={};Ce(wt),J.emit("plotly_relayouting",wt)}function Ce(le){le[W.id+".angularaxis.rotation"]=Te,W.vangles&&(le[W.id+".radialaxis.angle"]=Q)}function Re(){Ae.select("text").attr("transform",null);var le={};Ce(le),l.call("_guiRelayout",J,le)}ve.prepFn=function(le,de,_e){var Fe=V[W.id];Me=Fe.angularaxis.rotation;var Ve=he.getBoundingClientRect();xe=de-Ve.left,ke=_e-Ve.top,J._fullLayout._calcInverseTransform(J);var He=T.apply3DTransform(V._invTransform)(xe,ke);xe=He[0],ke=He[1],oe=Oe(xe,ke),ve.moveFn=Ie,ve.doneFn=Re,y(J)},W.vangles&&!T.isFullCircle(W.sectorInRad)&&(ve.prepFn=T.noop,p(k.select(he),null)),h.init(ve)},B.isPtInside=function(V){if(this.isSmith)return!0;var W=this.sectorInRad,J=this.vangles,X=this.angularAxis.c2g(V.theta),ee=this.radialAxis,re=ee.c2l(V.r),ie=ee._rl;return(J?_.isPtInsidePolygon:T.isPtInsideSector)(re,X,ie,W,J)},B.pathArc=function(V){var W=this.sectorInRad,J=this.vangles;return(J?_.pathPolygon:T.pathArc)(V,W[0],W[1],J)},B.pathSector=function(V){var W=this.sectorInRad,J=this.vangles;return(J?_.pathPolygon:T.pathSector)(V,W[0],W[1],J)},B.pathAnnulus=function(V,W){var J=this.sectorInRad,X=this.vangles;return(X?_.pathPolygonAnnulus:T.pathAnnulus)(V,W,J[0],J[1],X)},B.pathSubplot=function(){var V=this.innerRadius,W=this.radius;return V?this.pathAnnulus(V,W):this.pathSector(W)},B.fillViewInitialKey=function(V,W){V in this.viewInitial||(this.viewInitial[V]=W)}},12101:function($,R,e){var k=e(71828),A=e(21994),l=k.deg2rad,T=k.rad2deg;$.exports=function(x,d,s){switch(A(x,s),x._id){case"x":case"radialaxis":(function(t,o){var r=o._subplot;t.setGeometry=function(){var n=t._rl[0],a=t._rl[1],i=r.innerRadius,c=(r.radius-i)/(a-n),h=i/c,f=n>a?function(b){return b<=0}:function(b){return b>=0};t.c2g=function(b){var v=t.c2l(b)-n;return(f(v)?v:0)+h},t.g2c=function(b){return t.l2c(b+n-h)},t.g2p=function(b){return b*c},t.c2p=function(b){return t.g2p(t.c2g(b))}}})(x,d);break;case"angularaxis":(function(t,o){var r=t.type;if(r==="linear"){var n=t.d2c,a=t.c2d;t.d2c=function(i,c){return function(h,f){return f==="degrees"?l(h):h}(n(i),c)},t.c2d=function(i,c){return a(function(h,f){return f==="degrees"?T(h):h}(i,c))}}t.makeCalcdata=function(i,c){var h,f,b=i[c],v=i._length,g=function(u){return t.d2c(u,i.thetaunit)};if(b){if(k.isTypedArray(b)&&r==="linear"){if(v===b.length)return b;if(b.subarray)return b.subarray(0,v)}for(h=new Array(v),f=0;f<v;f++)h[f]=g(b[f])}else{var y=c+"0",p="d"+c,m=y in i?g(i[y]):0,w=i[p]?g(i[p]):(t.period||2*Math.PI)/v;for(h=new Array(v),f=0;f<v;f++)h[f]=m+f*w}return h},t.setGeometry=function(){var i,c,h,f,b=o.sector,v=b.map(l),g={clockwise:-1,counterclockwise:1}[t.direction],y=l(t.rotation),p=function(S){return g*S+y},m=function(S){return(S-y)/g};switch(r){case"linear":c=i=k.identity,f=l,h=T,t.range=k.isFullCircle(v)?[b[0],b[0]+360]:v.map(m).map(T);break;case"category":var w=t._categories.length,u=t.period?Math.max(t.period,w):w;u===0&&(u=1),c=f=function(S){return 2*S*Math.PI/u},i=h=function(S){return S*u/Math.PI/2},t.range=[0,u]}t.c2g=function(S){return p(c(S))},t.g2c=function(S){return i(m(S))},t.t2g=function(S){return p(f(S))},t.g2t=function(S){return h(m(S))}}})(x,d)}}},39779:function($){$.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function($){function R(l){return l<0?-1:l>0?1:0}function e(l){var T=l[0],x=l[1];if(!isFinite(T)||!isFinite(x))return[1,0];var d=(T+1)*(T+1)+x*x;return[(T*T+x*x-1)/d,2*x/d]}function k(l,T){var x=T[0],d=T[1];return[x*l.radius+l.cx,-d*l.radius+l.cy]}function A(l,T){return T*l.radius}$.exports={smith:e,reactanceArc:function(l,T,x,d){var s=k(l,e([x,T])),t=s[0],o=s[1],r=k(l,e([d,T])),n=r[0],a=r[1];if(T===0)return["M"+t+","+o,"L"+n+","+a].join(" ");var i=A(l,1/Math.abs(T));return["M"+t+","+o,"A"+i+","+i+" 0 0,"+(T<0?1:0)+" "+n+","+a].join(" ")},resistanceArc:function(l,T,x,d){var s=A(l,1/(T+1)),t=k(l,e([T,x])),o=t[0],r=t[1],n=k(l,e([T,d])),a=n[0],i=n[1];if(R(x)!==R(d)){var c=k(l,e([T,0]));return["M"+o+","+r,"A"+s+","+s+" 0 0,"+(0<x?0:1)+" "+c[0]+","+c[1],"A"+s+","+s+" 0 0,"+(d<0?0:1)+a+","+i].join(" ")}return["M"+o+","+r,"A"+s+","+s+" 0 0,"+(d<x?0:1)+" "+a+","+i].join(" ")},smithTransform:k}},7504:function($,R,e){var k=e(27659).AU,A=e(71828).counterRegex,l=e(77997),T=e(39779),x=T.attr,d=T.name,s=A(d),t={};t[x]={valType:"subplotid",dflt:d,editType:"calc"},$.exports={attr:x,name:d,idRoot:d,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(33419),supplyLayoutDefaults:e(9558),plot:function(o){for(var r=o._fullLayout,n=o.calcdata,a=r._subplots[d],i=0;i<a.length;i++){var c=a[i],h=k(n,d,c),f=r[c]._subplot;f||(f=l(o,c,!0),r[c]._subplot=f),f.plot(h,r,o._promises)}},clean:function(o,r,n,a){for(var i=a._subplots[d]||[],c=0;c<i.length;c++){var h=i[c],f=a[h]._subplot;if(!r[h]&&f)for(var b in f.framework.remove(),f.clipPaths)f.clipPaths[b].remove()}},toSVG:e(93612).toSVG}},33419:function($,R,e){var k=e(22399),A=e(13838),l=e(27670).Y,T=e(71828).extendFlat,x=e(30962).overrideAll,d=x({color:A.color,showline:T({},A.showline,{dflt:!0}),linecolor:A.linecolor,linewidth:A.linewidth,showgrid:T({},A.showgrid,{dflt:!0}),gridcolor:A.gridcolor,gridwidth:A.gridwidth,griddash:A.griddash},"plot","from-root"),s=x({ticklen:A.ticklen,tickwidth:T({},A.tickwidth,{dflt:2}),tickcolor:A.tickcolor,showticklabels:A.showticklabels,showtickprefix:A.showtickprefix,tickprefix:A.tickprefix,showticksuffix:A.showticksuffix,ticksuffix:A.ticksuffix,tickfont:A.tickfont,tickformat:A.tickformat,hoverformat:A.hoverformat,layer:A.layer},"plot","from-root"),t=T({visible:T({},A.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},A.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},d,s),o=T({visible:T({},A.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:A.ticks,editType:"calc"},d,s);$.exports={domain:l({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:k.background},realaxis:t,imaginaryaxis:o,editType:"calc"}},9558:function($,R,e){var k,A,l,T=e(71828),x=e(7901),d=e(44467),s=e(49119),t=e(27659).NG,o=e(89426),r=e(96115),n=e(92128),a=e(21994),i=e(33419),c=e(39779),h=c.axisNames,f=(k=function(v){return v.slice().reverse().map(function(g){return-g}).concat([0]).concat(v)},A=String,l={},function(v){var g=A?A(v):v;if(g in l)return l[g];var y=k(v);return l[g]=y,y});function b(v,g,y,p){var m=y("bgcolor");p.bgColor=x.combine(m,p.paper_bgcolor);var w,u=t(p.fullData,c.name,p.id),S=p.layoutOut;function _(B,j){return y(w+"."+B,j)}for(var E=0;E<h.length;E++){w=h[E],T.isPlainObject(v[w])||(v[w]={});var L=v[w],C=d.newContainer(g,w);C._id=C._name=w,C._attr=p.id+"."+w,C._traceIndices=u.map(function(B){return B._expandedIndex});var P=_("visible");if(C.type="linear",a(C,S),o(L,C,_,C.type),P){var I,U,z,H,F=w==="realaxis";F&&_("side"),F?_("tickvals"):_("tickvals",f(g.realaxis.tickvals||i.realaxis.tickvals.dflt));var N=p.font||{};P&&(U=(I=_("color"))===L.color?I:N.color,z=N.size,H=N.family),r(L,C,_,C.type,{noTicklabelstep:!0,noAng:!F,noExp:!0,font:{color:U,size:z,family:H}}),T.coerce2(v,g,i,w+".ticklen"),T.coerce2(v,g,i,w+".tickwidth"),T.coerce2(v,g,i,w+".tickcolor",g.color),_("ticks")||(delete g[w].ticklen,delete g[w].tickwidth,delete g[w].tickcolor),n(L,C,_,{dfltColor:I,bgColor:p.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:i[w]}),_("layer")}_("hoverformat"),delete C.type,C._input=L}}$.exports=function(v,g,y){s(v,g,y,{noUirevision:!0,type:c.name,attributes:i,handleDefaults:b,font:g.font,paper_bgcolor:g.paper_bgcolor,fullData:y,layoutOut:g})}},49119:function($,R,e){var k=e(71828),A=e(44467),l=e(27670).c;$.exports=function(T,x,d,s){var t,o,r=s.type,n=s.attributes,a=s.handleDefaults,i=s.partition||"x",c=x._subplots[r],h=c.length,f=h&&c[0].replace(/\d+$/,"");function b(p,m){return k.coerce(t,o,n,p,m)}for(var v=0;v<h;v++){var g=c[v];t=T[g]?T[g]:T[g]={},o=A.newContainer(x,g,f),s.noUirevision||b("uirevision",x.uirevision);var y={};y[i]=[v/h,(v+1)/h],l(o,x,b,y),s.id=g,a(t,o,b,s)}}},5386:function($,R,e){var k=e(31562);function A(l){var T=l.description?" "+l.description:"",x=l.keys||[];if(x.length>0){for(var d=[],s=0;s<x.length;s++)d[s]="`"+x[s]+"`";T+="Finally, the template string has access to ",T=x.length===1?"variable "+d[0]:"variables "+d.slice(0,-1).join(", ")+" and "+d.slice(-1)+"."}return T}k.FORMAT_LINK,k.DATE_FORMAT_LINK,R.f=function(l,T){l=l||{},A(T=T||{});var x={valType:"string",dflt:"",editType:l.editType||"none"};return l.arrayOk!==!1&&(x.arrayOk=!0),x},R.s=function(l,T){l=l||{},A(T=T||{});var x={valType:"string",dflt:"",editType:l.editType||"calc"};return l.arrayOk!==!1&&(x.arrayOk=!0),x}},61639:function($,R,e){var k=e(64380),A=e(27659).AU,l=e(71828).counterRegex,T="ternary";R.name=T;var x=R.attr="subplot";R.idRoot=T,R.idRegex=R.attrRegex=l(T),(R.attributes={})[x]={valType:"subplotid",dflt:"ternary",editType:"calc"},R.layoutAttributes=e(81367),R.supplyLayoutDefaults=e(25369),R.plot=function(d){for(var s=d._fullLayout,t=d.calcdata,o=s._subplots.ternary,r=0;r<o.length;r++){var n=o[r],a=A(t,T,n),i=s[n]._subplot;i||(i=new k({id:n,graphDiv:d,container:s._ternarylayer.node()},s),s[n]._subplot=i),i.plot(a,s,d._promises)}},R.clean=function(d,s,t,o){for(var r=o._subplots.ternary||[],n=0;n<r.length;n++){var a=r[n],i=o[a]._subplot;!s[a]&&i&&(i.plotContainer.remove(),i.clipDef.remove(),i.clipDefRelative.remove(),i.layers["a-title"].remove(),i.layers["b-title"].remove(),i.layers["c-title"].remove())}}},81367:function($,R,e){var k=e(22399),A=e(27670).Y,l=e(13838),T=e(30962).overrideAll,x=e(1426).extendFlat,d={title:{text:l.title.text,font:l.title.font},color:l.color,tickmode:l.minor.tickmode,nticks:x({},l.nticks,{dflt:6,min:1}),tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:l.ticks,ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,ticklabelstep:l.ticklabelstep,showticklabels:l.showticklabels,showtickprefix:l.showtickprefix,tickprefix:l.tickprefix,showticksuffix:l.showticksuffix,ticksuffix:l.ticksuffix,showexponent:l.showexponent,exponentformat:l.exponentformat,minexponent:l.minexponent,separatethousands:l.separatethousands,tickfont:l.tickfont,tickangle:l.tickangle,tickformat:l.tickformat,tickformatstops:l.tickformatstops,hoverformat:l.hoverformat,showline:x({},l.showline,{dflt:!0}),linecolor:l.linecolor,linewidth:l.linewidth,showgrid:x({},l.showgrid,{dflt:!0}),gridcolor:l.gridcolor,gridwidth:l.gridwidth,griddash:l.griddash,layer:l.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:l._deprecated.title,titlefont:l._deprecated.titlefont}},s=$.exports=T({domain:A({name:"ternary"}),bgcolor:{valType:"color",dflt:k.background},sum:{valType:"number",dflt:1,min:0},aaxis:d,baxis:d,caxis:d},"plot","from-root");s.uirevision={valType:"any",editType:"none"},s.aaxis.uirevision=s.baxis.uirevision=s.caxis.uirevision={valType:"any",editType:"none"}},25369:function($,R,e){var k=e(7901),A=e(44467),l=e(71828),T=e(49119),x=e(96115),d=e(89426),s=e(38701),t=e(26218),o=e(92128),r=e(81367),n=["aaxis","baxis","caxis"];function a(c,h,f,b){var v,g,y,p=f("bgcolor"),m=f("sum");b.bgColor=k.combine(p,b.paper_bgcolor);for(var w=0;w<n.length;w++)g=c[v=n[w]]||{},(y=A.newContainer(h,v))._name=v,i(g,y,b,h);var u=h.aaxis,S=h.baxis,_=h.caxis;u.min+S.min+_.min>=m&&(u.min=0,S.min=0,_.min=0,c.aaxis&&delete c.aaxis.min,c.baxis&&delete c.baxis.min,c.caxis&&delete c.caxis.min)}function i(c,h,f,b){var v=r[h._name];function g(S,_){return l.coerce(c,h,v,S,_)}g("uirevision",b.uirevision),h.type="linear";var y=g("color"),p=y!==v.color.dflt?y:f.font.color,m=h._name.charAt(0).toUpperCase(),w="Component "+m,u=g("title.text",w);h._hovertitle=u===w?u:m,l.coerceFont(g,"title.font",{family:f.font.family,size:l.bigFont(f.font.size),color:p}),g("min"),t(c,h,g,"linear"),d(c,h,g,"linear"),x(c,h,g,"linear"),s(c,h,g,{outerTicks:!0}),g("showticklabels")&&(l.coerceFont(g,"tickfont",{family:f.font.family,size:f.font.size,color:p}),g("tickangle"),g("tickformat")),o(c,h,g,{dfltColor:y,bgColor:f.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:v}),g("hoverformat"),g("layer")}$.exports=function(c,h,f){T(c,h,f,{type:"ternary",attributes:r,handleDefaults:a,font:h.font,paper_bgcolor:h.paper_bgcolor})}},64380:function($,R,e){var k=e(39898),A=e(84267),l=e(73972),T=e(71828),x=T.strTranslate,d=T._,s=e(7901),t=e(91424),o=e(21994),r=e(1426).extendFlat,n=e(74875),a=e(89298),i=e(28569),c=e(30211),h=e(64505),f=h.freeMode,b=h.rectMode,v=e(92998),g=e(47322).prepSelect,y=e(47322).selectOnClick,p=e(47322).clearOutline,m=e(47322).clearSelectionsCache,w=e(85555);function u(z,H){this.id=z.id,this.graphDiv=z.graphDiv,this.init(H),this.makeFramework(H),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}$.exports=u;var S=u.prototype;S.init=function(z){this.container=z._ternarylayer,this.defs=z._defs,this.layoutId=z._uid,this.traceHash={},this.layers={}},S.plot=function(z,H){var F=this,N=H[F.id],B=H._size;F._hasClipOnAxisFalse=!1;for(var j=0;j<z.length;j++)if(z[j][0].trace.cliponaxis===!1){F._hasClipOnAxisFalse=!0;break}F.updateLayers(N),F.adjustLayout(N,B),n.generalUpdatePerTraceModule(F.graphDiv,F,z,N),F.layers.plotbg.select("path").call(s.fill,N.bgcolor)},S.makeFramework=function(z){var H=this,F=H.graphDiv,N=z[H.id],B=H.clipId="clip"+H.layoutId+H.id,j=H.clipIdRelative="clip-relative"+H.layoutId+H.id;H.clipDef=T.ensureSingleById(z._clips,"clipPath",B,function(K){K.append("path").attr("d","M0,0Z")}),H.clipDefRelative=T.ensureSingleById(z._clips,"clipPath",j,function(K){K.append("path").attr("d","M0,0Z")}),H.plotContainer=T.ensureSingle(H.container,"g",H.id),H.updateLayers(N),t.setClipUrl(H.layers.backplot,B,F),t.setClipUrl(H.layers.grids,B,F)},S.updateLayers=function(z){var H=this.layers,F=["draglayer","plotbg","backplot","grids"];z.aaxis.layer==="below traces"&&F.push("aaxis","aline"),z.baxis.layer==="below traces"&&F.push("baxis","bline"),z.caxis.layer==="below traces"&&F.push("caxis","cline"),F.push("frontplot"),z.aaxis.layer==="above traces"&&F.push("aaxis","aline"),z.baxis.layer==="above traces"&&F.push("baxis","bline"),z.caxis.layer==="above traces"&&F.push("caxis","cline");var N=this.plotContainer.selectAll("g.toplevel").data(F,String),B=["agrid","bgrid","cgrid"];N.enter().append("g").attr("class",function(j){return"toplevel "+j}).each(function(j){var K=k.select(this);H[j]=K,j==="frontplot"?K.append("g").classed("scatterlayer",!0):j==="backplot"?K.append("g").classed("maplayer",!0):j==="plotbg"?K.append("path").attr("d","M0,0Z"):j==="aline"||j==="bline"||j==="cline"?K.append("path"):j==="grids"&&B.forEach(function(G){H[G]=K.append("g").classed("grid "+G,!0)})}),N.order()};var _=Math.sqrt(4/3);S.adjustLayout=function(z,H){var F,N,B,j,K,G,V=this,W=z.domain,J=(W.x[0]+W.x[1])/2,X=(W.y[0]+W.y[1])/2,ee=W.x[1]-W.x[0],re=W.y[1]-W.y[0],ie=ee*H.w,se=re*H.h,fe=z.sum,ye=z.aaxis.min,ge=z.baxis.min,he=z.caxis.min;ie>_*se?B=(j=se)*_:j=(B=ie)/_,K=ee*B/ie,G=re*j/se,F=H.l+H.w*J-B/2,N=H.t+H.h*(1-X)-j/2,V.x0=F,V.y0=N,V.w=B,V.h=j,V.sum=fe,V.xaxis={type:"linear",range:[ye+2*he-fe,fe-ye-2*ge],domain:[J-K/2,J+K/2],_id:"x"},o(V.xaxis,V.graphDiv._fullLayout),V.xaxis.setScale(),V.xaxis.isPtWithinRange=function(Ae){return Ae.a>=V.aaxis.range[0]&&Ae.a<=V.aaxis.range[1]&&Ae.b>=V.baxis.range[1]&&Ae.b<=V.baxis.range[0]&&Ae.c>=V.caxis.range[1]&&Ae.c<=V.caxis.range[0]},V.yaxis={type:"linear",range:[ye,fe-ge-he],domain:[X-G/2,X+G/2],_id:"y"},o(V.yaxis,V.graphDiv._fullLayout),V.yaxis.setScale(),V.yaxis.isPtWithinRange=function(){return!0};var ve=V.yaxis.domain[0],Oe=V.aaxis=r({},z.aaxis,{range:[ye,fe-ge-he],side:"left",tickangle:(+z.aaxis.tickangle||0)-30,domain:[ve,ve+G*_],anchor:"free",position:0,_id:"y",_length:B});o(Oe,V.graphDiv._fullLayout),Oe.setScale();var xe=V.baxis=r({},z.baxis,{range:[fe-ye-he,ge],side:"bottom",domain:V.xaxis.domain,anchor:"free",position:0,_id:"x",_length:B});o(xe,V.graphDiv._fullLayout),xe.setScale();var ke=V.caxis=r({},z.caxis,{range:[fe-ye-ge,he],side:"right",tickangle:(+z.caxis.tickangle||0)+30,domain:[ve,ve+G*_],anchor:"free",position:0,_id:"y",_length:B});o(ke,V.graphDiv._fullLayout),ke.setScale();var Me="M"+F+","+(N+j)+"h"+B+"l-"+B/2+",-"+j+"Z";V.clipDef.select("path").attr("d",Me),V.layers.plotbg.select("path").attr("d",Me);var Te="M0,"+j+"h"+B+"l-"+B/2+",-"+j+"Z";V.clipDefRelative.select("path").attr("d",Te);var Q=x(F,N);V.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Q),V.clipDefRelative.select("path").attr("transform",null);var oe=x(F-xe._offset,N+j);V.layers.baxis.attr("transform",oe),V.layers.bgrid.attr("transform",oe);var ce=x(F+B/2,N)+"rotate(30)"+x(0,-Oe._offset);V.layers.aaxis.attr("transform",ce),V.layers.agrid.attr("transform",ce);var me=x(F+B/2,N)+"rotate(-30)"+x(0,-ke._offset);V.layers.caxis.attr("transform",me),V.layers.cgrid.attr("transform",me),V.drawAxes(!0),V.layers.aline.select("path").attr("d",Oe.showline?"M"+F+","+(N+j)+"l"+B/2+",-"+j:"M0,0").call(s.stroke,Oe.linecolor||"#000").style("stroke-width",(Oe.linewidth||0)+"px"),V.layers.bline.select("path").attr("d",xe.showline?"M"+F+","+(N+j)+"h"+B:"M0,0").call(s.stroke,xe.linecolor||"#000").style("stroke-width",(xe.linewidth||0)+"px"),V.layers.cline.select("path").attr("d",ke.showline?"M"+(F+B/2)+","+N+"l"+B/2+","+j:"M0,0").call(s.stroke,ke.linecolor||"#000").style("stroke-width",(ke.linewidth||0)+"px"),V.graphDiv._context.staticPlot||V.initInteractions(),t.setClipUrl(V.layers.frontplot,V._hasClipOnAxisFalse?null:V.clipId,V.graphDiv)},S.drawAxes=function(z){var H=this,F=H.graphDiv,N=H.id.substr(7)+"title",B=H.layers,j=H.aaxis,K=H.baxis,G=H.caxis;if(H.drawAx(j),H.drawAx(K),H.drawAx(G),z){var V=Math.max(j.showticklabels?j.tickfont.size/2:0,(G.showticklabels?.75*G.tickfont.size:0)+(G.ticks==="outside"?.87*G.ticklen:0)),W=(K.showticklabels?K.tickfont.size:0)+(K.ticks==="outside"?K.ticklen:0)+3;B["a-title"]=v.draw(F,"a"+N,{propContainer:j,propName:H.id+".aaxis.title",placeholder:d(F,"Click to enter Component A title"),attributes:{x:H.x0+H.w/2,y:H.y0-j.title.font.size/3-V,"text-anchor":"middle"}}),B["b-title"]=v.draw(F,"b"+N,{propContainer:K,propName:H.id+".baxis.title",placeholder:d(F,"Click to enter Component B title"),attributes:{x:H.x0-W,y:H.y0+H.h+.83*K.title.font.size+W,"text-anchor":"middle"}}),B["c-title"]=v.draw(F,"c"+N,{propContainer:G,propName:H.id+".caxis.title",placeholder:d(F,"Click to enter Component C title"),attributes:{x:H.x0+H.w+W,y:H.y0+H.h+.83*G.title.font.size+W,"text-anchor":"middle"}})}},S.drawAx=function(z){var H,F=this,N=F.graphDiv,B=z._name,j=B.charAt(0),K=z._id,G=F.layers[B],V=j+"tickLayout",W=(H=z).ticks+String(H.ticklen)+String(H.showticklabels);F[V]!==W&&(G.selectAll("."+K+"tick").remove(),F[V]=W),z.setScale();var J=a.calcTicks(z),X=a.clipEnds(z,J),ee=a.makeTransTickFn(z),re=a.getTickSigns(z)[2],ie=T.deg2rad(30),se=re*(z.linewidth||1)/2,fe=re*z.ticklen,ye=F.w,ge=F.h,he=j==="b"?"M0,"+se+"l"+Math.sin(ie)*fe+","+Math.cos(ie)*fe:"M"+se+",0l"+Math.cos(ie)*fe+","+-Math.sin(ie)*fe,ve={a:"M0,0l"+ge+",-"+ye/2,b:"M0,0l-"+ye/2+",-"+ge,c:"M0,0l-"+ge+","+ye/2}[j];a.drawTicks(N,z,{vals:z.ticks==="inside"?X:J,layer:G,path:he,transFn:ee,crisp:!1}),a.drawGrid(N,z,{vals:X,layer:F.layers[j+"grid"],path:ve,transFn:ee,crisp:!1}),a.drawLabels(N,z,{vals:J,layer:G,transFn:ee,labelFns:a.makeLabelFns(z,0,30)})};var E=w.MINZOOM/2+.87,L="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",C="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",P="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",I=!0;function U(z){k.select(z).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){m(this.dragOptions),p(this.dragOptions.gd)},S.initInteractions=function(){var z,H,F,N,B,j,K,G,V,W,J,X,ee=this,re=ee.layers.plotbg.select("path").node(),ie=ee.graphDiv,se=ie._fullLayout._zoomlayer;function fe(Te){var Q={};return Q[ee.id+".aaxis.min"]=Te.a,Q[ee.id+".baxis.min"]=Te.b,Q[ee.id+".caxis.min"]=Te.c,Q}function ye(Te,Q){var oe=ie._fullLayout.clickmode;U(ie),Te===2&&(ie.emit("plotly_doubleclick",null),l.call("_guiRelayout",ie,fe({a:0,b:0,c:0}))),oe.indexOf("select")>-1&&Te===1&&y(Q,ie,[ee.xaxis],[ee.yaxis],ee.id,ee.dragOptions),oe.indexOf("event")>-1&&c.click(ie,Q,ee.id)}function ge(Te,Q){return 1-Q/ee.h}function he(Te,Q){return 1-(Te+(ee.h-Q)/Math.sqrt(3))/ee.w}function ve(Te,Q){return(Te-(ee.h-Q)/Math.sqrt(3))/ee.w}function Oe(Te,Q){var oe=F+Te*z,ce=N+Q*H,me=Math.max(0,Math.min(1,ge(0,N),ge(0,ce))),Ae=Math.max(0,Math.min(1,he(F,N),he(oe,ce))),Ie=Math.max(0,Math.min(1,ve(F,N),ve(oe,ce))),Ce=(me/2+Ie)*ee.w,Re=(1-me/2-Ae)*ee.w,le=(Ce+Re)/2,de=Re-Ce,_e=(1-me)*ee.h,Fe=_e-de/_;de<w.MINZOOM?(K=B,J.attr("d",V),X.attr("d","M0,0Z")):(K={a:B.a+me*j,b:B.b+Ae*j,c:B.c+Ie*j},J.attr("d",V+"M"+Ce+","+_e+"H"+Re+"L"+le+","+Fe+"L"+Ce+","+_e+"Z"),X.attr("d","M"+F+","+N+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Ce+","+_e+L+"M"+Re+","+_e+C+"M"+le+","+Fe+P)),W||(J.transition().style("fill",G>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),X.transition().style("opacity",1).duration(200),W=!0),ie.emit("plotly_relayouting",fe(K))}function xe(){U(ie),K!==B&&(l.call("_guiRelayout",ie,fe(K)),I&&ie.data&&ie._context.showTips&&(T.notifier(d(ie,"Double-click to zoom back out"),"long"),I=!1))}function ke(Te,Q){var oe=Te/ee.xaxis._m,ce=Q/ee.yaxis._m,me=[(K={a:B.a-ce,b:B.b+(oe+ce)/2,c:B.c-(oe-ce)/2}).a,K.b,K.c].sort(T.sorterAsc),Ae=me.indexOf(K.a),Ie=me.indexOf(K.b),Ce=me.indexOf(K.c);me[0]<0&&(me[1]+me[0]/2<0?(me[2]+=me[0]+me[1],me[0]=me[1]=0):(me[2]+=me[0]/2,me[1]+=me[0]/2,me[0]=0),K={a:me[Ae],b:me[Ie],c:me[Ce]},Q=(B.a-K.a)*ee.yaxis._m,Te=(B.c-K.c-B.b+K.b)*ee.xaxis._m);var Re=x(ee.x0+Te,ee.y0+Q);ee.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Re);var le=x(-Te,-Q);ee.clipDefRelative.select("path").attr("transform",le),ee.aaxis.range=[K.a,ee.sum-K.b-K.c],ee.baxis.range=[ee.sum-K.a-K.c,K.b],ee.caxis.range=[ee.sum-K.a-K.b,K.c],ee.drawAxes(!1),ee._hasClipOnAxisFalse&&ee.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,ee),ie.emit("plotly_relayouting",fe(K))}function Me(){l.call("_guiRelayout",ie,fe(K))}this.dragOptions={element:re,gd:ie,plotinfo:{id:ee.id,domain:ie._fullLayout[ee.id].domain,xaxis:ee.xaxis,yaxis:ee.yaxis},subplot:ee.id,prepFn:function(Te,Q,oe){ee.dragOptions.xaxes=[ee.xaxis],ee.dragOptions.yaxes=[ee.yaxis],z=ie._fullLayout._invScaleX,H=ie._fullLayout._invScaleY;var ce=ee.dragOptions.dragmode=ie._fullLayout.dragmode;f(ce)?ee.dragOptions.minDrag=1:ee.dragOptions.minDrag=void 0,ce==="zoom"?(ee.dragOptions.moveFn=Oe,ee.dragOptions.clickFn=ye,ee.dragOptions.doneFn=xe,function(me,Ae,Ie){var Ce=re.getBoundingClientRect();F=Ae-Ce.left,N=Ie-Ce.top,ie._fullLayout._calcInverseTransform(ie);var Re=ie._fullLayout._invTransform,le=T.apply3DTransform(Re)(F,N);F=le[0],N=le[1],B={a:ee.aaxis.range[0],b:ee.baxis.range[1],c:ee.caxis.range[1]},K=B,j=ee.aaxis.range[1]-B.a,G=A(ee.graphDiv._fullLayout[ee.id].bgcolor).getLuminance(),V="M0,"+ee.h+"L"+ee.w/2+", 0L"+ee.w+","+ee.h+"Z",W=!1,J=se.append("path").attr("class","zoombox").attr("transform",x(ee.x0,ee.y0)).style({fill:G>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",V),X=se.append("path").attr("class","zoombox-corners").attr("transform",x(ee.x0,ee.y0)).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ee.clearOutline(ie)}(0,Q,oe)):ce==="pan"?(ee.dragOptions.moveFn=ke,ee.dragOptions.clickFn=ye,ee.dragOptions.doneFn=Me,B={a:ee.aaxis.range[0],b:ee.baxis.range[1],c:ee.caxis.range[1]},K=B,ee.clearOutline(ie)):(b(ce)||f(ce))&&g(Te,Q,oe,ee.dragOptions,ce)}},re.onmousemove=function(Te){c.hover(ie,Te,ee.id),ie._fullLayout._lasthover=re,ie._fullLayout._hoversubplot=ee.id},re.onmouseout=function(Te){ie._dragging||i.unhover(ie,Te)},i.init(this.dragOptions)}},73972:function($,R,e){var k=e(47769),A=e(64213),l=e(75138),T=e(41965),x=e(24401).addStyleRule,d=e(1426),s=e(9012),t=e(10820),o=d.extendFlat,r=d.extendDeepAll;function n(y){var p=y.name,m=y.categories,w=y.meta;if(R.modules[p])k.log("Type "+p+" already registered");else{R.subplotsRegistry[y.basePlotModule.name]||function(I){var U=I.name;if(R.subplotsRegistry[U])k.log("Plot type "+U+" already registered.");else for(var z in h(I),R.subplotsRegistry[U]=I,R.componentsRegistry)v(z,I.name)}(y.basePlotModule);for(var u={},S=0;S<m.length;S++)u[m[S]]=!0,R.allCategories[m[S]]=!0;for(var _ in R.modules[p]={_module:y,categories:u},w&&Object.keys(w).length&&(R.modules[p].meta=w),R.allTypes.push(p),R.componentsRegistry)f(_,p);y.layoutAttributes&&o(R.traceLayoutAttributes,y.layoutAttributes);var E=y.basePlotModule,L=E.name;if(L==="mapbox"){var C=E.constants.styleRules;for(var P in C)x(".js-plotly-plot .plotly .mapboxgl-"+P,C[P])}L!=="geo"&&L!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function a(y){if(typeof y.name!="string")throw new Error("Component module *name* must be a string.");var p=y.name;for(var m in R.componentsRegistry[p]=y,y.layoutAttributes&&(y.layoutAttributes._isLinkedToArray&&l(R.layoutArrayContainers,p),h(y)),R.modules)f(p,m);for(var w in R.subplotsRegistry)v(p,w);for(var u in R.transformsRegistry)b(p,u);y.schema&&y.schema.layout&&r(t,y.schema.layout)}function i(y){if(typeof y.name!="string")throw new Error("Transform module *name* must be a string.");var p="Transform module "+y.name,m=typeof y.transform=="function",w=typeof y.calcTransform=="function";if(!m&&!w)throw new Error(p+" is missing a *transform* or *calcTransform* method.");for(var u in m&&w&&k.log([p+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(y.attributes)||k.log(p+" registered without an *attributes* object."),typeof y.supplyDefaults!="function"&&k.log(p+" registered without a *supplyDefaults* method."),R.transformsRegistry[y.name]=y,R.componentsRegistry)b(u,y.name)}function c(y){var p=y.name,m=p.split("-")[0],w=y.dictionary,u=y.format,S=w&&Object.keys(w).length,_=u&&Object.keys(u).length,E=R.localeRegistry,L=E[p];if(L||(E[p]=L={}),m!==p){var C=E[m];C||(E[m]=C={}),S&&C.dictionary===L.dictionary&&(C.dictionary=w),_&&C.format===L.format&&(C.format=u)}S&&(L.dictionary=w),_&&(L.format=u)}function h(y){if(y.layoutAttributes){var p=y.layoutAttributes._arrayAttrRegexps;if(p)for(var m=0;m<p.length;m++)l(R.layoutArrayRegexes,p[m])}}function f(y,p){var m=R.componentsRegistry[y].schema;if(m&&m.traces){var w=m.traces[p];w&&r(R.modules[p]._module.attributes,w)}}function b(y,p){var m=R.componentsRegistry[y].schema;if(m&&m.transforms){var w=m.transforms[p];w&&r(R.transformsRegistry[p].attributes,w)}}function v(y,p){var m=R.componentsRegistry[y].schema;if(m&&m.subplots){var w=R.subplotsRegistry[p],u=w.layoutAttributes,S=w.attr==="subplot"?w.name:w.attr;Array.isArray(S)&&(S=S[0]);var _=m.subplots[S];u&&_&&r(u,_)}}function g(y){return typeof y=="object"&&(y=y.type),y}R.modules={},R.allCategories={},R.allTypes=[],R.subplotsRegistry={},R.transformsRegistry={},R.componentsRegistry={},R.layoutArrayContainers=[],R.layoutArrayRegexes=[],R.traceLayoutAttributes={},R.localeRegistry={},R.apiMethodRegistry={},R.collectableSubplotTypes=null,R.register=function(y){if(R.collectableSubplotTypes=null,!y)throw new Error("No argument passed to Plotly.register.");y&&!Array.isArray(y)&&(y=[y]);for(var p=0;p<y.length;p++){var m=y[p];if(!m)throw new Error("Invalid module was attempted to be registered!");switch(m.moduleType){case"trace":n(m);break;case"transform":i(m);break;case"component":a(m);break;case"locale":c(m);break;case"apiMethod":var w=m.name;R.apiMethodRegistry[w]=m.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},R.getModule=function(y){var p=R.modules[g(y)];return!!p&&p._module},R.traceIs=function(y,p){if((y=g(y))==="various")return!1;var m=R.modules[y];return m||(y&&k.log("Unrecognized trace type "+y+"."),m=R.modules[s.type.dflt]),!!m.categories[p]},R.getTransformIndices=function(y,p){for(var m=[],w=y.transforms||[],u=0;u<w.length;u++)w[u].type===p&&m.push(u);return m},R.hasTransform=function(y,p){for(var m=y.transforms||[],w=0;w<m.length;w++)if(m[w].type===p)return!0;return!1},R.getComponentMethod=function(y,p){var m=R.componentsRegistry[y];return m&&m[p]||A},R.call=function(){var y=arguments[0],p=[].slice.call(arguments,1);return R.apiMethodRegistry[y].apply(null,p)}},61914:function($,R,e){var k=e(73972),A=e(71828),l=A.extendFlat,T=A.extendDeep;function x(d){var s;switch(d){case"themes__thumb":s={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":s={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:s={}}return s}$.exports=function(d,s){var t,o,r=d.data,n=d.layout,a=T([],r),i=T({},n,x(s.tileClass)),c=d._context||{};if(s.width&&(i.width=s.width),s.height&&(i.height=s.height),s.tileClass==="thumbnail"||s.tileClass==="themes__thumb"){i.annotations=[];var h=Object.keys(i);for(t=0;t<h.length;t++)o=h[t],["xaxis","yaxis","zaxis"].indexOf(o.slice(0,5))>-1&&(i[h[t]].title={text:""});for(t=0;t<a.length;t++){var f=a[t];f.showscale=!1,f.marker&&(f.marker.showscale=!1),k.traceIs(f,"pie-like")&&(f.textposition="none")}}if(Array.isArray(s.annotations))for(t=0;t<s.annotations.length;t++)i.annotations.push(s.annotations[t]);var b=Object.keys(i).filter(function(m){return m.match(/^scene\d*$/)});if(b.length){var v={};for(s.tileClass==="thumbnail"&&(v={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<b.length;t++){var g=i[b[t]];g.xaxis||(g.xaxis={}),g.yaxis||(g.yaxis={}),g.zaxis||(g.zaxis={}),l(g.xaxis,v),l(g.yaxis,v),l(g.zaxis,v),g._scene=null}}var y=document.createElement("div");s.tileClass&&(y.className=s.tileClass);var p={gd:y,td:y,layout:i,data:a,config:{staticPlot:s.staticPlot===void 0||s.staticPlot,plotGlPixelRatio:s.plotGlPixelRatio===void 0?2:s.plotGlPixelRatio,displaylogo:s.displaylogo||!1,showLink:s.showLink||!1,showTips:s.showTips||!1,mapboxAccessToken:c.mapboxAccessToken}};return s.setBackground!=="transparent"&&(p.config.setBackground=s.setBackground||"opaque"),p.gd.defaultLayout=x(s.tileClass),p}},7239:function($,R,e){var k=e(71828),A=e(403),l=e(22435),T=e(25095);$.exports=function(x,d){var s;return k.isPlainObject(x)||(s=k.getGraphDiv(x)),(d=d||{}).format=d.format||"png",d.width=d.width||null,d.height=d.height||null,d.imageDataOnly=!0,new Promise(function(t,o){s&&s._snapshotInProgress&&o(new Error("Snapshotting already in progress.")),k.isIE()&&d.format!=="svg"&&o(new Error(T.MSG_IE_BAD_FORMAT)),s&&(s._snapshotInProgress=!0);var r=A(x,d),n=d.filename||x.fn||"newplot";n+="."+d.format.replace("-","."),r.then(function(a){return s&&(s._snapshotInProgress=!1),l(a,n,d.format)}).then(function(a){t(a)}).catch(function(a){s&&(s._snapshotInProgress=!1),o(a)})})}},22435:function($,R,e){var k=e(71828),A=e(25095);$.exports=function(l,T,x){var d=document.createElement("a"),s="download"in d;return new Promise(function(t,o){var r,n;if(k.isIE())return r=A.createBlob(l,"svg"),window.navigator.msSaveBlob(r,T),r=null,t(T);if(s)return r=A.createBlob(l,x),n=A.createObjectURL(r),d.href=n,d.download=T,document.body.appendChild(d),d.click(),document.body.removeChild(d),A.revokeObjectURL(n),r=null,t(T);if(k.isSafari()){var a=x==="svg"?",":";base64,";return A.octetStream(a+encodeURIComponent(l)),t(T)}o(new Error("download error"))})}},25095:function($,R,e){var k=e(73972);R.getDelay=function(l){return l._has&&(l._has("gl3d")||l._has("gl2d")||l._has("mapbox"))?500:0},R.getRedrawFunc=function(l){return function(){k.getComponentMethod("colorbar","draw")(l)}},R.encodeSVG=function(l){return"data:image/svg+xml,"+encodeURIComponent(l)},R.encodeJSON=function(l){return"data:application/json,"+encodeURIComponent(l)};var A=window.URL||window.webkitURL;R.createObjectURL=function(l){return A.createObjectURL(l)},R.revokeObjectURL=function(l){return A.revokeObjectURL(l)},R.createBlob=function(l,T){if(T==="svg")return new window.Blob([l],{type:"image/svg+xml;charset=utf-8"});if(T==="full-json")return new window.Blob([l],{type:"application/json;charset=utf-8"});var x=function(d){for(var s=d.length,t=new ArrayBuffer(s),o=new Uint8Array(t),r=0;r<s;r++)o[r]=d.charCodeAt(r);return t}(window.atob(l));return new window.Blob([x],{type:"image/"+T})},R.octetStream=function(l){document.location.href="data:application/octet-stream"+l},R.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,R.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function($,R,e){var k=e(25095),A={getDelay:k.getDelay,getRedrawFunc:k.getRedrawFunc,clone:e(61914),toSVG:e(5900),svgToImg:e(70942),toImage:e(56395),downloadImage:e(7239)};$.exports=A},70942:function($,R,e){var k=e(71828),A=e(15398).EventEmitter,l=e(25095);$.exports=function(T){var x=T.emitter||new A,d=new Promise(function(s,t){var o=window.Image,r=T.svg,n=T.format||"png";if(k.isIE()&&n!=="svg"){var a=new Error(l.MSG_IE_BAD_FORMAT);return t(a),T.promise?d:x.emit("error",a)}var i,c,h=T.canvas,f=T.scale||1,b=T.width||300,v=T.height||150,g=f*b,y=f*v,p=h.getContext("2d",{willReadFrequently:!0}),m=new o;n==="svg"||k.isSafari()?c=l.encodeSVG(r):(i=l.createBlob(r,"svg"),c=l.createObjectURL(i)),h.width=g,h.height=y,m.onload=function(){var w;switch(i=null,l.revokeObjectURL(c),n!=="svg"&&p.drawImage(m,0,0,g,y),n){case"jpeg":w=h.toDataURL("image/jpeg");break;case"png":w=h.toDataURL("image/png");break;case"webp":w=h.toDataURL("image/webp");break;case"svg":w=c;break;default:var u="Image format is not jpeg, png, svg or webp.";if(t(new Error(u)),!T.promise)return x.emit("error",u)}s(w),T.promise||x.emit("success",w)},m.onerror=function(w){if(i=null,l.revokeObjectURL(c),t(w),!T.promise)return x.emit("error",w)},m.src=c});return T.promise?d:x}},56395:function($,R,e){var k=e(15398).EventEmitter,A=e(73972),l=e(71828),T=e(25095),x=e(61914),d=e(5900),s=e(70942);$.exports=function(t,o){var r=new k,n=x(t,{format:"png"}),a=n.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var i=T.getRedrawFunc(a);return A.call("_doPlot",a,n.data,n.layout,n.config).then(i).then(function(){var c=T.getDelay(a._fullLayout);setTimeout(function(){var h=d(a),f=document.createElement("canvas");f.id=l.randstr(),(r=s({format:o.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:f,emitter:r,svg:h})).clean=function(){a&&document.body.removeChild(a)}},c)}).catch(function(c){r.emit("error",c)}),r}},5900:function($,R,e){var k=e(39898),A=e(71828),l=e(91424),T=e(7901),x=e(77922),d=/"/g,s="TOBESTRIPPED",t=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");$.exports=function(o,r,n){var a,i=o._fullLayout,c=i._paper,h=i._toppaper,f=i.width,b=i.height;c.insert("rect",":first-child").call(l.setRect,0,0,f,b).call(T.fill,i.paper_bgcolor);var v=i._basePlotModules||[];for(a=0;a<v.length;a++){var g=v[a];g.toSVG&&g.toSVG(o)}if(h){var y=h.node().childNodes,p=Array.prototype.slice.call(y);for(a=0;a<p.length;a++){var m=p[a];m.childNodes.length&&c.node().appendChild(m)}}i._draggers&&i._draggers.remove(),c.node().style.background="",c.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var u=k.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){u.style({visibility:null,display:null});var S=this.style.fontFamily;S&&S.indexOf('"')!==-1&&u.style("font-family",S.replace(d,s))}else u.remove()}),c.selectAll(".gradient_filled,.pattern_filled").each(function(){var u=k.select(this),S=this.style.fill;S&&S.indexOf("url(")!==-1&&u.style("fill",S.replace(d,s));var _=this.style.stroke;_&&_.indexOf("url(")!==-1&&u.style("stroke",_.replace(d,s))}),r!=="pdf"&&r!=="eps"||c.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),c.node().setAttributeNS(x.xmlns,"xmlns",x.svg),c.node().setAttributeNS(x.xmlns,"xmlns:xlink",x.xlink),r==="svg"&&n&&(c.attr("width",n*f),c.attr("height",n*b),c.attr("viewBox","0 0 "+f+" "+b));var w=new window.XMLSerializer().serializeToString(c.node());return w=(w=(w=function(u){var S=k.select("body").append("div").style({display:"none"}).html(""),_=u.replace(/(&[^;]*;)/gi,function(E){return E==="&lt;"?"&#60;":E==="&rt;"?"&#62;":E.indexOf("<")!==-1||E.indexOf(">")!==-1?"":S.html(E).text()});return S.remove(),_}(w)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),A.isIE()&&(w=(w=(w=w.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),w}},75341:function($,R,e){var k=e(71828);$.exports=function(A,l){for(var T=0;T<A.length;T++)A[T].i=T;k.mergeArray(l.text,A,"tx"),k.mergeArray(l.hovertext,A,"htx");var x=l.marker;if(x){k.mergeArray(x.opacity,A,"mo",!0),k.mergeArray(x.color,A,"mc");var d=x.line;d&&(k.mergeArray(d.color,A,"mlc"),k.mergeArrayCastPositive(d.width,A,"mlw"))}}},1486:function($,R,e){var k=e(82196),A=e(12663).axisHoverFormat,l=e(5386).f,T=e(5386).s,x=e(50693),d=e(41940),s=e(97313),t=e(79952).u,o=e(1426).extendFlat,r=d({editType:"calc",arrayOk:!0,colorEditType:"style"}),n=o({},k.marker.line.width,{dflt:0}),a=o({width:n,editType:"calc"},x("marker.line")),i=o({line:a,editType:"calc"},x("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t});$.exports={x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:A("x"),yhoverformat:A("y"),text:k.text,texttemplate:T({editType:"plot"},{keys:s.eventDataKeys}),hovertext:k.hovertext,hovertemplate:l({},{keys:s.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:o({},r,{}),insidetextfont:o({},r,{}),outsidetextfont:o({},r,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:o({},k.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:i,offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,selected:{marker:{opacity:k.selected.marker.opacity,color:k.selected.marker.color,editType:"style"},textfont:k.selected.textfont,editType:"style"},unselected:{marker:{opacity:k.unselected.marker.opacity,color:k.unselected.marker.color,editType:"style"},textfont:k.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function($,R,e){var k=e(89298),A=e(42973),l=e(52075).hasColorscale,T=e(78803),x=e(75341),d=e(66279);$.exports=function(s,t){var o,r,n,a,i,c,h=k.getFromId(s,t.xaxis||"x"),f=k.getFromId(s,t.yaxis||"y"),b={msUTC:!(!t.base&&t.base!==0)};t.orientation==="h"?(o=h.makeCalcdata(t,"x",b),n=f.makeCalcdata(t,"y"),a=A(t,f,"y",n),i=!!t.yperiodalignment,c="y"):(o=f.makeCalcdata(t,"y",b),n=h.makeCalcdata(t,"x"),a=A(t,h,"x",n),i=!!t.xperiodalignment,c="x"),r=a.vals;for(var v=Math.min(r.length,o.length),g=new Array(v),y=0;y<v;y++)g[y]={p:r[y],s:o[y]},i&&(g[y].orig_p=n[y],g[y][c+"End"]=a.ends[y],g[y][c+"Start"]=a.starts[y]),t.ids&&(g[y].id=String(t.ids[y]));return l(t,"marker")&&T(s,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),l(t,"marker.line")&&T(s,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),x(g,t),d(g,t),g}},97313:function($){$.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function($,R,e){var k=e(92770),A=e(71828).isArrayOrTypedArray,l=e(50606).BADNUM,T=e(73972),x=e(89298),d=e(99082).getAxisGroup,s=e(61546);function t(v,g,y,p,m){if(p.length){var w,u,S,_;switch(function(E,L){var C,P;for(C=0;C<L.length;C++){var I,U=L[C],z=U[0].trace,H=z.type==="funnel"?z._base:z.base,F=z.orientation==="h"?z.xcalendar:z.ycalendar,N=E.type==="category"||E.type==="multicategory"?function(){return null}:E.d2c;if(A(H)){for(P=0;P<Math.min(H.length,U.length);P++)I=N(H[P],0,F),k(I)?(U[P].b=+I,U[P].hasB=1):U[P].b=0;for(;P<U.length;P++)U[P].b=0}else{I=N(H,0,F);var B=k(I);for(I=B?I:0,P=0;P<U.length;P++)U[P].b=I,B&&(U[P].hasB=1)}}}(y,p),m.mode){case"overlay":o(g,y,p,m);break;case"group":for(w=[],u=[],S=0;S<p.length;S++)(_=p[S])[0].trace.offset===void 0?u.push(_):w.push(_);u.length&&function(E,L,C,P,I){var U=new s(P,{posAxis:L,sepNegVal:!1,overlapNoMerge:!I.norm});(function(z,H,F,N){for(var B=z._fullLayout,j=F.positions,K=F.distinctPositions,G=F.minDiff,V=F.traces,W=V.length,J=j.length!==K.length,X=G*(1-N.gap),ee=d(B,H._id)+V[0][0].trace.orientation,re=B._alignmentOpts[ee]||{},ie=0;ie<W;ie++){var se,fe,ye=V[ie],ge=ye[0].trace,he=re[ge.alignmentgroup]||{},ve=Object.keys(he.offsetGroups||{}).length,Oe=(se=ve?X/ve:J?X/W:X)*(1-(N.groupgap||0));fe=ve?((2*ge._offsetIndex+1-ve)*se-Oe)/2:J?((2*ie+1-W)*se-Oe)/2:-Oe/2;var xe=ye[0].t;xe.barwidth=Oe,xe.poffset=fe,xe.bargroupwidth=X,xe.bardelta=G}F.binWidth=V[0][0].t.barwidth/100,n(F),a(H,F),i(H,F,J)})(E,L,U,I),function(z,H){for(var F=z.traces,N=0;N<F.length;N++){var B=F[N];if(B[0].trace.base===void 0)for(var j=new s([B],{posAxis:H,sepNegVal:!0,overlapNoMerge:!0}),K=0;K<B.length;K++){var G=B[K];if(G.p!==l){var V=j.put(G.p,G.b+G.s);V&&(G.b=V)}}}}(U,L),I.norm?(h(U),f(C,U,I)):c(C,U)}(v,g,y,u,m),w.length&&o(g,y,w,m);break;case"stack":case"relative":for(w=[],u=[],S=0;S<p.length;S++)(_=p[S])[0].trace.base===void 0?u.push(_):w.push(_);u.length&&function(E,L,C,P,I){var U=new s(P,{posAxis:L,sepNegVal:I.mode==="relative",overlapNoMerge:!(I.norm||I.mode==="stack"||I.mode==="relative")});r(L,U,I),function(B,j,K){var G,V,W,J,X,ee,re=b(B),ie=j.traces;for(J=0;J<ie.length;J++)if((V=(G=ie[J])[0].trace).type==="funnel")for(X=0;X<G.length;X++)(ee=G[X]).s!==l&&j.put(ee.p,-.5*ee.s);for(J=0;J<ie.length;J++){W=(V=(G=ie[J])[0].trace).type==="funnel";var se=[];for(X=0;X<G.length;X++)if((ee=G[X]).s!==l){var fe;fe=W?ee.s:ee.s+ee.b;var ye=j.put(ee.p,fe),ge=ye+fe;ee.b=ye,ee[re]=ge,K.norm||(se.push(ge),ee.hasB&&se.push(ye))}K.norm||(V._extremes[B._id]=x.findExtremes(B,se,{tozero:!0,padded:!0}))}}(C,U,I);for(var z=0;z<P.length;z++)for(var H=P[z],F=0;F<H.length;F++){var N=H[F];N.s!==l&&N.b+N.s===U.get(N.p,N.s)&&(N._outmost=!0)}I.norm&&f(C,U,I)}(0,g,y,u,m),w.length&&o(g,y,w,m)}(function(E,L){var C,P,I,U=b(L),z={},H=1/0,F=-1/0;for(C=0;C<E.length;C++)for(I=E[C],P=0;P<I.length;P++){var N=I[P].p;k(N)&&(H=Math.min(H,N),F=Math.max(F,N))}var B=1e4/(F-H),j=z.round=function(ee){return String(Math.round(B*(ee-H)))};for(C=0;C<E.length;C++){(I=E[C])[0].t.extents=z;var K=I[0].t.poffset,G=Array.isArray(K);for(P=0;P<I.length;P++){var V=I[P],W=V[U]-V.w/2;if(k(W)){var J=V[U]+V.w/2,X=j(V.p);z[X]?z[X]=[Math.min(W,z[X][0]),Math.max(J,z[X][1])]:z[X]=[W,J]}V.p0=V.p+(G?K[P]:K),V.p1=V.p0+V.w,V.s0=V.b,V.s1=V.s0+V.s}}})(p,g)}}function o(v,g,y,p){for(var m=0;m<y.length;m++){var w=y[m],u=new s([w],{posAxis:v,sepNegVal:!1,overlapNoMerge:!p.norm});r(v,u,p),p.norm?(h(u),f(g,u,p)):c(g,u)}}function r(v,g,y){for(var p=g.minDiff,m=g.traces,w=p*(1-y.gap),u=w*(1-(y.groupgap||0)),S=-u/2,_=0;_<m.length;_++){var E=m[_][0].t;E.barwidth=u,E.poffset=S,E.bargroupwidth=w,E.bardelta=p}g.binWidth=m[0][0].t.barwidth/100,n(g),a(v,g),i(v,g)}function n(v){var g,y,p=v.traces;for(g=0;g<p.length;g++){var m,w=p[g],u=w[0],S=u.trace,_=u.t,E=S._offset||S.offset,L=_.poffset;if(A(E)){for(m=Array.prototype.slice.call(E,0,w.length),y=0;y<m.length;y++)k(m[y])||(m[y]=L);for(y=m.length;y<w.length;y++)m.push(L);_.poffset=m}else E!==void 0&&(_.poffset=E);var C=S._width||S.width,P=_.barwidth;if(A(C)){var I=Array.prototype.slice.call(C,0,w.length);for(y=0;y<I.length;y++)k(I[y])||(I[y]=P);for(y=I.length;y<w.length;y++)I.push(P);if(_.barwidth=I,E===void 0){for(m=[],y=0;y<w.length;y++)m.push(L+(P-I[y])/2);_.poffset=m}}else C!==void 0&&(_.barwidth=C,E===void 0&&(_.poffset=L+(P-C)/2))}}function a(v,g){for(var y=g.traces,p=b(v),m=0;m<y.length;m++)for(var w=y[m],u=w[0].t,S=u.poffset,_=Array.isArray(S),E=u.barwidth,L=Array.isArray(E),C=0;C<w.length;C++){var P=w[C],I=P.w=L?E[C]:E;P.p===void 0&&(P.p=P[p],P["orig_"+p]=P[p]);var U=(_?S[C]:S)+I/2;P[p]=P.p+U}}function i(v,g,y){var p=g.traces,m=g.minDiff/2;x.minDtick(v,g.minDiff,g.distinctPositions[0],y);for(var w=0;w<p.length;w++){var u,S,_,E,L=p[w],C=L[0],P=C.trace,I=[];for(E=0;E<L.length;E++)S=(u=L[E]).p-m,_=u.p+m,I.push(S,_);if(P.width||P.offset){var U=C.t,z=U.poffset,H=U.barwidth,F=Array.isArray(z),N=Array.isArray(H);for(E=0;E<L.length;E++){u=L[E];var B=F?z[E]:z,j=N?H[E]:H;_=(S=u.p+B)+j,I.push(S,_)}}P._extremes[v._id]=x.findExtremes(v,I,{padded:!1})}}function c(v,g){for(var y=g.traces,p=b(v),m=0;m<y.length;m++){for(var w=y[m],u=w[0].trace,S=u.type==="scatter",_=u.orientation==="v",E=[],L=!1,C=0;C<w.length;C++){var P=w[C],I=S?0:P.b,U=S?_?P.y:P.x:I+P.s;P[p]=U,E.push(U),P.hasB&&E.push(I),P.hasB&&P.b||(L=!0)}u._extremes[v._id]=x.findExtremes(v,E,{tozero:L,padded:!0})}}function h(v){for(var g=v.traces,y=0;y<g.length;y++)for(var p=g[y],m=0;m<p.length;m++){var w=p[m];w.s!==l&&v.put(w.p,w.b+w.s)}}function f(v,g,y){var p=g.traces,m=b(v),w=y.norm==="fraction"?1:100,u=w/1e9,S=v.l2c(v.c2l(0)),_=y.mode==="stack"?w:S;function E(K){return k(v.c2l(K))&&(K<S-u||K>_+u||!k(S))}for(var L=0;L<p.length;L++){for(var C=p[L],P=C[0].trace,I=[],U=!1,z=!1,H=0;H<C.length;H++){var F=C[H];if(F.s!==l){var N=Math.abs(w/g.get(F.p,F.s));F.b*=N,F.s*=N;var B=F.b,j=B+F.s;F[m]=j,I.push(j),z=z||E(j),F.hasB&&(I.push(B),z=z||E(B)),F.hasB&&F.b||(U=!0)}}P._extremes[v._id]=x.findExtremes(v,I,{tozero:U,padded:z})}}function b(v){return v._id.charAt(0)}$.exports={crossTraceCalc:function(v,g){for(var y=g.xaxis,p=g.yaxis,m=v._fullLayout,w=v._fullData,u=v.calcdata,S=[],_=[],E=0;E<w.length;E++){var L=w[E];if(L.visible===!0&&T.traceIs(L,"bar")&&L.xaxis===y._id&&L.yaxis===p._id&&(L.orientation==="h"?S.push(u[E]):_.push(u[E]),L._computePh))for(var C=v.calcdata[E],P=0;P<C.length;P++)typeof C[P].ph0=="function"&&(C[P].ph0=C[P].ph0()),typeof C[P].ph1=="function"&&(C[P].ph1=C[P].ph1())}var I={xCat:y.type==="category"||y.type==="multicategory",yCat:p.type==="category"||p.type==="multicategory",mode:m.barmode,norm:m.barnorm,gap:m.bargap,groupgap:m.bargroupgap};t(v,y,p,_,I),t(v,p,y,S,I)},setGroupPositions:t}},90769:function($,R,e){var k=e(71828),A=e(7901),l=e(73972),T=e(67513),x=e(73927),d=e(98340),s=e(26125),t=e(1486),o=k.coerceFont;function r(n,a,i,c,h,f){var b=(f=f||{}).moduleHasSelected!==!1,v=f.moduleHasUnselected!==!1,g=f.moduleHasConstrain!==!1,y=f.moduleHasCliponaxis!==!1,p=f.moduleHasTextangle!==!1,m=f.moduleHasInsideanchor!==!1,w=!!f.hasPathbar,u=Array.isArray(h)||h==="auto",S=u||h==="inside",_=u||h==="outside";if(S||_){var E=o(c,"textfont",i.font),L=k.extendFlat({},E),C=!(n.textfont&&n.textfont.color);if(C&&delete L.color,o(c,"insidetextfont",L),w){var P=k.extendFlat({},E);C&&delete P.color,o(c,"pathbar.textfont",P)}_&&o(c,"outsidetextfont",E),b&&c("selected.textfont.color"),v&&c("unselected.textfont.color"),g&&c("constraintext"),y&&c("cliponaxis"),p&&c("textangle"),c("texttemplate")}S&&m&&c("insidetextanchor")}$.exports={supplyDefaults:function(n,a,i,c){function h(g,y){return k.coerce(n,a,t,g,y)}if(T(n,a,c,h)){x(n,a,c,h),h("xhoverformat"),h("yhoverformat"),h("orientation",a.x&&!a.y?"h":"v"),h("base"),h("offset"),h("width"),h("text"),h("hovertext"),h("hovertemplate");var f=h("textposition");r(n,0,c,h,f,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),d(n,a,h,i,c);var b=(a.marker.line||{}).color,v=l.getComponentMethod("errorbars","supplyDefaults");v(n,a,b||A.defaultLine,{axis:"y"}),v(n,a,b||A.defaultLine,{axis:"x",inherit:"y"}),k.coerceSelectionMarkerOpacity(a,h)}else a.visible=!1},crossTraceDefaults:function(n,a){var i,c;function h(b){return k.coerce(c._input,c,t,b)}if(a.barmode==="group")for(var f=0;f<n.length;f++)(c=n[f]).type==="bar"&&(i=c._input,s(i,c,a,h))},handleText:r}},58065:function($){$.exports=function(R,e,k){return R.x="xVal"in e?e.xVal:e.x,R.y="yVal"in e?e.yVal:e.y,e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),k.orientation==="h"?(R.label=R.y,R.value=R.x):(R.label=R.x,R.value=R.y),R}},69383:function($,R,e){var k=e(92770),A=e(84267),l=e(71828).isArrayOrTypedArray;R.coerceString=function(T,x,d){if(typeof x=="string"){if(x||!T.noBlank)return x}else if((typeof x=="number"||x===!0)&&!T.strict)return String(x);return d!==void 0?d:T.dflt},R.coerceNumber=function(T,x,d){if(k(x)){x=+x;var s=T.min,t=T.max;if(!(s!==void 0&&x<s||t!==void 0&&x>t))return x}return d!==void 0?d:T.dflt},R.coerceColor=function(T,x,d){return A(x).isValid()?x:d!==void 0?d:T.dflt},R.coerceEnumerated=function(T,x,d){return T.coerceNumber&&(x=+x),T.values.indexOf(x)!==-1?x:d!==void 0?d:T.dflt},R.getValue=function(T,x){var d;return Array.isArray(T)?x<T.length&&(d=T[x]):d=T,d},R.getLineWidth=function(T,x){return 0<x.mlw?x.mlw:l(T.marker.line.width)?0:T.marker.line.width}},95423:function($,R,e){var k=e(30211),A=e(73972),l=e(7901),T=e(71828).fillText,x=e(69383).getLineWidth,d=e(89298).hoverLabelText,s=e(50606).BADNUM;function t(r,n,a,i,c){var h,f,b,v,g,y,p,m=r.cd,w=m[0].trace,u=m[0].t,S=i==="closest",_=w.type==="waterfall",E=r.maxHoverDistance,L=r.maxSpikeDistance;w.orientation==="h"?(h=a,f=n,b="y",v="x",g=G,y=j):(h=n,f=a,b="x",v="y",y=G,g=j);var C=w[b+"period"],P=S||C;function I(se){return z(se,-1)}function U(se){return z(se,1)}function z(se,fe){var ye=se.w;return se[b]+fe*ye/2}function H(se){return se[b+"End"]-se[b+"Start"]}var F=S?I:C?function(se){return se.p-H(se)/2}:function(se){return Math.min(I(se),se.p-u.bardelta/2)},N=S?U:C?function(se){return se.p+H(se)/2}:function(se){return Math.max(U(se),se.p+u.bardelta/2)};function B(se,fe,ye){return c.finiteRange&&(ye=0),k.inbox(se-h,fe-h,ye+Math.min(1,Math.abs(fe-se)/p)-1)}function j(se){return B(F(se),N(se),E)}function K(se){var fe=se[v];if(_){var ye=Math.abs(se.rawS)||0;f>0?fe+=ye:f<0&&(fe-=ye)}return fe}function G(se){var fe=f,ye=se.b,ge=K(se);return k.inbox(ye-fe,ge-fe,E+(ge-fe)/(ge-ye)-1)}var V=r[b+"a"],W=r[v+"a"];p=Math.abs(V.r2c(V.range[1])-V.r2c(V.range[0]));var J=k.getDistanceFunction(i,g,y,function(se){return(g(se)+y(se))/2});if(k.getClosest(m,J,r),r.index!==!1&&m[r.index].p!==s){P||(F=function(se){return Math.min(I(se),se.p-u.bargroupwidth/2)},N=function(se){return Math.max(U(se),se.p+u.bargroupwidth/2)});var X=m[r.index],ee=w.base?X.b+X.s:X.s;r[v+"0"]=r[v+"1"]=W.c2p(X[v],!0),r[v+"LabelVal"]=ee;var re=u.extents[u.extents.round(X.p)];r[b+"0"]=V.c2p(S?F(X):re[0],!0),r[b+"1"]=V.c2p(S?N(X):re[1],!0);var ie=X.orig_p!==void 0;return r[b+"LabelVal"]=ie?X.orig_p:X.p,r.labelLabel=d(V,r[b+"LabelVal"],w[b+"hoverformat"]),r.valueLabel=d(W,r[v+"LabelVal"],w[v+"hoverformat"]),r.baseLabel=d(W,X.b,w[v+"hoverformat"]),r.spikeDistance=(function(se){var fe=f,ye=se.b,ge=K(se);return k.inbox(ye-fe,ge-fe,L+(ge-fe)/(ge-ye)-1)}(X)+function(se){return B(I(se),U(se),L)}(X))/2,r[b+"Spike"]=V.c2p(X.p,!0),T(X,w,r),r.hovertemplate=w.hovertemplate,r}}function o(r,n){var a=n.mcc||r.marker.color,i=n.mlcc||r.marker.line.color,c=x(r,n);return l.opacity(a)?a:l.opacity(i)&&c?i:void 0}$.exports={hoverPoints:function(r,n,a,i,c){var h=t(r,n,a,i,c);if(h){var f=h.cd,b=f[0].trace,v=f[h.index];return h.color=o(b,v),A.getComponentMethod("errorbars","hoverInfo")(v,b,h),[h]}},hoverOnBars:t,getTraceColor:o}},60822:function($,R,e){$.exports={attributes:e(1486),layoutAttributes:e(43641),supplyDefaults:e(90769).supplyDefaults,crossTraceDefaults:e(90769).crossTraceDefaults,supplyLayoutDefaults:e(13957),calc:e(92290),crossTraceCalc:e(11661).crossTraceCalc,colorbar:e(4898),arraysToCalcdata:e(75341),plot:e(17295).plot,style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,hoverPoints:e(95423).hoverPoints,eventData:e(58065),selectPoints:e(81974),moduleType:"trace",name:"bar",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},43641:function($){$.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function($,R,e){var k=e(73972),A=e(89298),l=e(71828),T=e(43641);$.exports=function(x,d,s){function t(b,v){return l.coerce(x,d,T,b,v)}for(var o=!1,r=!1,n=!1,a={},i=t("barmode"),c=0;c<s.length;c++){var h=s[c];if(k.traceIs(h,"bar")&&h.visible){if(o=!0,i==="group"){var f=h.xaxis+h.yaxis;a[f]&&(n=!0),a[f]=!0}h.visible&&h.type==="histogram"&&A.getFromId({_fullLayout:d},h[h.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(r=!0)}}o?(i!=="overlay"&&t("barnorm"),t("bargap",r&&!n?0:.2),t("bargroupgap")):delete d.barmode}},17295:function($,R,e){var k=e(39898),A=e(92770),l=e(71828),T=e(63893),x=e(7901),d=e(91424),s=e(73972),t=e(89298).tickText,o=e(72597),r=o.recordMinTextSize,n=o.clearMinTextSize,a=e(16688),i=e(69383),c=e(97313),h=e(1486),f=h.text,b=h.textposition,v=e(23469).appendArrayPointValue,g=c.TEXTPAD;function y(L){return L.id}function p(L){if(L.ids)return y}function m(L,C){return L<C?1:-1}function w(L,C,P,I){var U;return!C.uniformtext.mode&&u(P)?(I&&(U=I()),L.transition().duration(P.duration).ease(P.easing).each("end",function(){U&&U()}).each("interrupt",function(){U&&U()})):L}function u(L){return L&&L.duration>0}function S(L){return L==="auto"?0:L}function _(L,C){var P=Math.PI/180*C,I=Math.abs(Math.sin(P)),U=Math.abs(Math.cos(P));return{x:L.width*U+L.height*I,y:L.width*I+L.height*U}}function E(L,C,P,I,U,z){var H=!!z.isHorizontal,F=!!z.constrained,N=z.angle||0,B=z.anchor||"end",j=B==="end",K=B==="start",G=((z.leftToRight||0)+1)/2,V=1-G,W=U.width,J=U.height,X=Math.abs(C-L),ee=Math.abs(I-P),re=X>2*g&&ee>2*g?g:0;X-=2*re,ee-=2*re;var ie=S(N);N!=="auto"||W<=X&&J<=ee||!(W>X||J>ee)||(W>ee||J>X)&&W<J==X<ee||(ie+=90);var se=_(U,ie),fe=1;F&&(fe=Math.min(1,X/se.x,ee/se.y));var ye=U.left*V+U.right*G,ge=(U.top+U.bottom)/2,he=(L+g)*V+(C-g)*G,ve=(P+I)/2,Oe=0,xe=0;if(K||j){var ke=(H?se.x:se.y)/2,Me=H?m(L,C):m(P,I);H?K?(he=L+Me*re,Oe=-Me*ke):(he=C-Me*re,Oe=Me*ke):K?(ve=P+Me*re,xe=-Me*ke):(ve=I-Me*re,xe=Me*ke)}return{textX:ye,textY:ge,targetX:he,targetY:ve,anchorX:Oe,anchorY:xe,scale:fe,rotate:ie}}$.exports={plot:function(L,C,P,I,U,z){var H=C.xaxis,F=C.yaxis,N=L._fullLayout;U||(U={mode:N.barmode,norm:N.barmode,gap:N.bargap,groupgap:N.bargroupgap},n("bar",N));var B=l.makeTraceGroups(I,P,"trace bars").each(function(j){var K=k.select(this),G=j[0].trace,V=G.type==="waterfall",W=G.type==="funnel",J=G.type==="bar"||W,X=0;V&&G.connector.visible&&G.connector.mode==="between"&&(X=G.connector.line.width/2);var ee=G.orientation==="h",re=u(U),ie=l.ensureSingle(K,"g","points"),se=p(G),fe=ie.selectAll("g.point").data(l.identity,se);fe.enter().append("g").classed("point",!0),fe.exit().remove(),fe.each(function(ge,he){var ve,Oe,xe=k.select(this),ke=function(le,de,_e,Fe){var Ve=[],He=[],nt=Fe?de:_e,tt=Fe?_e:de;return Ve[0]=nt.c2p(le.s0,!0),He[0]=tt.c2p(le.p0,!0),Ve[1]=nt.c2p(le.s1,!0),He[1]=tt.c2p(le.p1,!0),Fe?[Ve,He]:[He,Ve]}(ge,H,F,ee),Me=ke[0][0],Te=ke[0][1],Q=ke[1][0],oe=ke[1][1],ce=(ee?Te-Me:oe-Q)==0;if(ce&&J&&i.getLineWidth(G,ge)&&(ce=!1),ce||(ce=!(A(Me)&&A(Te)&&A(Q)&&A(oe))),ge.isBlank=ce,ce&&(ee?Te=Me:oe=Q),X&&!ce&&(ee?(Me-=m(Me,Te)*X,Te+=m(Me,Te)*X):(Q-=m(Q,oe)*X,oe+=m(Q,oe)*X)),G.type==="waterfall"){if(!ce){var me=G[ge.dir].marker;ve=me.line.width,Oe=me.color}}else ve=i.getLineWidth(G,ge),Oe=ge.mc||G.marker.color;function Ae(le){var de=k.round(ve/2%1,2);return U.gap===0&&U.groupgap===0?k.round(Math.round(le)-de,2):le}if(!L._context.staticPlot){var Ie=x.opacity(Oe)<1||ve>.01?Ae:function(le,de,_e){return _e&&le===de?le:Math.abs(le-de)>=2?Ae(le):le>de?Math.ceil(le):Math.floor(le)};Me=Ie(Me,Te,ee),Te=Ie(Te,Me,ee),Q=Ie(Q,oe,!ee),oe=Ie(oe,Q,!ee)}var Ce=w(l.ensureSingle(xe,"path"),N,U,z);if(Ce.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Te-Me)*(oe-Q))||ce&&L._context.staticPlot?"M0,0Z":"M"+Me+","+Q+"V"+oe+"H"+Te+"V"+Q+"Z").call(d.setClipUrl,C.layerClipId,L),!N.uniformtext.mode&&re){var Re=d.makePointStyleFns(G);d.singlePointStyle(ge,Ce,G,Re,L)}(function(le,de,_e,Fe,Ve,He,nt,tt,ot,dt,kt){var mt,wt=de.xaxis,Lt=de.yaxis,Ct=le._fullLayout;function It(Nt,Gt,un){return l.ensureSingle(Nt,"text").text(Gt).attr({class:"bartext bartext-"+mt,"text-anchor":"middle","data-notex":1}).call(d.font,un).call(T.convertToTspans,le)}var Ut=Fe[0].trace,Rt=Ut.orientation==="h",Ge=function(Nt,Gt,un,pn,Kt){var wn,Bn=Gt[0].trace;return wn=Bn.texttemplate?function(vn,cn,dn,sn,hn){var En=cn[0].trace,Mn=l.castOption(En,dn,"texttemplate");if(!Mn)return"";var Rn,Nn,Fn,rr,$n=En.type==="histogram",mr=En.type==="waterfall",fr=En.type==="funnel",Zn=En.orientation==="h";function qn(Un){return t(rr,rr.c2l(Un),!0).text}Zn?(Rn="y",Nn=hn,Fn="x",rr=sn):(Rn="x",Nn=sn,Fn="y",rr=hn);var ur,Zt=cn[dn],nn={};nn.label=Zt.p,nn.labelLabel=nn[Rn+"Label"]=(ur=Zt.p,t(Nn,Nn.c2l(ur),!0).text);var zn=l.castOption(En,Zt.i,"text");(zn===0||zn)&&(nn.text=zn),nn.value=Zt.s,nn.valueLabel=nn[Fn+"Label"]=qn(Zt.s);var _n={};v(_n,En,Zt.i),($n||_n.x===void 0)&&(_n.x=Zn?nn.value:nn.label),($n||_n.y===void 0)&&(_n.y=Zn?nn.label:nn.value),($n||_n.xLabel===void 0)&&(_n.xLabel=Zn?nn.valueLabel:nn.labelLabel),($n||_n.yLabel===void 0)&&(_n.yLabel=Zn?nn.labelLabel:nn.valueLabel),mr&&(nn.delta=+Zt.rawS||Zt.s,nn.deltaLabel=qn(nn.delta),nn.final=Zt.v,nn.finalLabel=qn(nn.final),nn.initial=nn.final-nn.delta,nn.initialLabel=qn(nn.initial)),fr&&(nn.value=Zt.s,nn.valueLabel=qn(nn.value),nn.percentInitial=Zt.begR,nn.percentInitialLabel=l.formatPercent(Zt.begR),nn.percentPrevious=Zt.difR,nn.percentPreviousLabel=l.formatPercent(Zt.difR),nn.percentTotal=Zt.sumR,nn.percenTotalLabel=l.formatPercent(Zt.sumR));var Cn=l.castOption(En,Zt.i,"customdata");return Cn&&(nn.customdata=Cn),l.texttemplateString(Mn,nn,vn._d3locale,_n,nn,En._meta||{})}(Nt,Gt,un,pn,Kt):Bn.textinfo?function(vn,cn,dn,sn){var hn=vn[0].trace,En=hn.orientation==="h",Mn=hn.type==="waterfall",Rn=hn.type==="funnel";function Nn(Cn){return t(En?dn:sn,+Cn,!0).text}var Fn,rr,$n=hn.textinfo,mr=vn[cn],fr=$n.split("+"),Zn=[],qn=function(Cn){return fr.indexOf(Cn)!==-1};if(qn("label")&&Zn.push((rr=vn[cn].p,t(En?sn:dn,rr,!0).text)),qn("text")&&((Fn=l.castOption(hn,mr.i,"text"))===0||Fn)&&Zn.push(Fn),Mn){var ur=+mr.rawS||mr.s,Zt=mr.v,nn=Zt-ur;qn("initial")&&Zn.push(Nn(nn)),qn("delta")&&Zn.push(Nn(ur)),qn("final")&&Zn.push(Nn(Zt))}if(Rn){qn("value")&&Zn.push(Nn(mr.s));var zn=0;qn("percent initial")&&zn++,qn("percent previous")&&zn++,qn("percent total")&&zn++;var _n=zn>1;qn("percent initial")&&(Fn=l.formatPercent(mr.begR),_n&&(Fn+=" of initial"),Zn.push(Fn)),qn("percent previous")&&(Fn=l.formatPercent(mr.difR),_n&&(Fn+=" of previous"),Zn.push(Fn)),qn("percent total")&&(Fn=l.formatPercent(mr.sumR),_n&&(Fn+=" of total"),Zn.push(Fn))}return Zn.join("<br>")}(Gt,un,pn,Kt):i.getValue(Bn.text,un),i.coerceString(f,wn)}(Ct,Fe,Ve,wt,Lt);mt=function(Nt,Gt){var un=i.getValue(Nt.textposition,Gt);return i.coerceEnumerated(b,un)}(Ut,Ve);var We=dt.mode==="stack"||dt.mode==="relative",Be=Fe[Ve],Ye=!We||Be._outmost;if(Ge&&mt!=="none"&&(!Be.isBlank&&He!==nt&&tt!==ot||mt!=="auto"&&mt!=="inside")){var rt=Ct.font,Se=a.getBarColor(Fe[Ve],Ut),ze=a.getInsideTextFont(Ut,Ve,rt,Se),Ke=a.getOutsideTextFont(Ut,Ve,rt),st=_e.datum();Rt?wt.type==="log"&&st.s0<=0&&(He=wt.range[0]<wt.range[1]?0:wt._length):Lt.type==="log"&&st.s0<=0&&(tt=Lt.range[0]<Lt.range[1]?Lt._length:0);var ct,Tt,Et,At,ht,pt=Math.abs(nt-He)-2*g,gt=Math.abs(ot-tt)-2*g;if(mt==="outside"&&(Ye||Be.hasB||(mt="inside")),mt==="auto"&&(Ye?(mt="inside",ct=It(_e,Ge,ht=l.ensureUniformFontSize(le,ze)),Et=(Tt=d.bBox(ct.node())).width,At=Tt.height,Et>0&&At>0&&(Et<=pt&&At<=gt||Et<=gt&&At<=pt||(Rt?pt>=Et*(gt/At):gt>=At*(pt/Et)))?mt="inside":(mt="outside",ct.remove(),ct=null)):mt="inside"),!ct){var Pt=(ct=It(_e,Ge,ht=l.ensureUniformFontSize(le,mt==="outside"?Ke:ze))).attr("transform");if(ct.attr("transform",""),Et=(Tt=d.bBox(ct.node())).width,At=Tt.height,ct.attr("transform",Pt),Et<=0||At<=0)return void ct.remove()}var Ot,Ht=Ut.textangle;Ot=mt==="outside"?function(Nt,Gt,un,pn,Kt,wn){var Bn,vn=!!wn.isHorizontal,cn=!!wn.constrained,dn=wn.angle||0,sn=Kt.width,hn=Kt.height,En=Math.abs(Gt-Nt),Mn=Math.abs(pn-un);Bn=vn?Mn>2*g?g:0:En>2*g?g:0;var Rn=1;cn&&(Rn=vn?Math.min(1,Mn/hn):Math.min(1,En/sn));var Nn=S(dn),Fn=_(Kt,Nn),rr=(vn?Fn.x:Fn.y)/2,$n=(Kt.left+Kt.right)/2,mr=(Kt.top+Kt.bottom)/2,fr=(Nt+Gt)/2,Zn=(un+pn)/2,qn=0,ur=0,Zt=vn?m(Gt,Nt):m(un,pn);return vn?(fr=Gt-Zt*Bn,qn=Zt*rr):(Zn=pn+Zt*Bn,ur=-Zt*rr),{textX:$n,textY:mr,targetX:fr,targetY:Zn,anchorX:qn,anchorY:ur,scale:Rn,rotate:Nn}}(He,nt,tt,ot,Tt,{isHorizontal:Rt,constrained:Ut.constraintext==="both"||Ut.constraintext==="outside",angle:Ht}):E(He,nt,tt,ot,Tt,{isHorizontal:Rt,constrained:Ut.constraintext==="both"||Ut.constraintext==="inside",angle:Ht,anchor:Ut.insidetextanchor}),Ot.fontSize=ht.size,r(Ut.type==="histogram"?"bar":Ut.type,Ot,Ct),Be.transform=Ot;var jt=w(ct,Ct,dt,kt);l.setTransormAndDisplay(jt,Ot)}else _e.select("text").remove()})(L,C,xe,j,he,Me,Te,Q,oe,U,z),C.layerClipId&&d.hideOutsideRangePoint(ge,xe.select("text"),H,F,G.xcalendar,G.ycalendar)});var ye=G.cliponaxis===!1;d.setClipUrl(K,ye?null:C.layerClipId,L)});s.getComponentMethod("errorbars","plot")(L,B,C,U)},toMoveInsideBar:E}},81974:function($){function R(e,k,A,l,T){var x=k.c2p(l?e.s0:e.p0,!0),d=k.c2p(l?e.s1:e.p1,!0),s=A.c2p(l?e.p0:e.s0,!0),t=A.c2p(l?e.p1:e.s1,!0);return T?[(x+d)/2,(s+t)/2]:l?[d,(s+t)/2]:[(x+d)/2,t]}$.exports=function(e,k){var A,l=e.cd,T=e.xaxis,x=e.yaxis,d=l[0].trace,s=d.type==="funnel",t=d.orientation==="h",o=[];if(k===!1)for(A=0;A<l.length;A++)l[A].selected=0;else for(A=0;A<l.length;A++){var r=l[A],n="ct"in r?r.ct:R(r,T,x,t,s);k.contains(n,!1,A,e)?(o.push({pointNumber:A,x:T.c2d(r.x),y:x.c2d(r.y)}),r.selected=1):r.selected=0}return o}},61546:function($,R,e){$.exports=A;var k=e(71828).distinctVals;function A(l,T){this.traces=l,this.sepNegVal=T.sepNegVal,this.overlapNoMerge=T.overlapNoMerge;for(var x=1/0,d=T.posAxis._id.charAt(0),s=[],t=0;t<l.length;t++){for(var o=l[t],r=0;r<o.length;r++){var n=o[r],a=n.p;a===void 0&&(a=n[d]),a!==void 0&&s.push(a)}o[0]&&o[0].width1&&(x=Math.min(o[0].width1,x))}this.positions=s;var i=k(s);this.distinctPositions=i.vals,i.vals.length===1&&x!==1/0?this.minDiff=x:this.minDiff=Math.min(i.minDiff,x);var c=(T.posAxis||{}).type;c!=="category"&&c!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}A.prototype.put=function(l,T){var x=this.getLabel(l,T),d=this.bins[x]||0;return this.bins[x]=d+T,d},A.prototype.get=function(l,T){var x=this.getLabel(l,T);return this.bins[x]||0},A.prototype.getLabel=function(l,T){return(T<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?l:Math.round(l/this.binWidth))}},16688:function($,R,e){var k=e(39898),A=e(7901),l=e(91424),T=e(71828),x=e(73972),d=e(72597).resizeText,s=e(1486),t=s.textfont,o=s.insidetextfont,r=s.outsidetextfont,n=e(69383);function a(y,p,m){l.pointStyle(y.selectAll("path"),p,m),i(y,p,m)}function i(y,p,m){y.selectAll("text").each(function(w){var u=k.select(this),S=T.ensureUniformFontSize(m,c(u,w,p,m));l.font(u,S)})}function c(y,p,m,w){var u=w._fullLayout.font,S=m.textfont;if(y.classed("bartext-inside")){var _=g(p,m);S=f(m,p.i,u,_)}else y.classed("bartext-outside")&&(S=b(m,p.i,u));return S}function h(y,p,m){return v(t,y.textfont,p,m)}function f(y,p,m,w){var u=h(y,p,m);return(y._input.textfont===void 0||y._input.textfont.color===void 0||Array.isArray(y.textfont.color)&&y.textfont.color[p]===void 0)&&(u={color:A.contrast(w),family:u.family,size:u.size}),v(o,y.insidetextfont,p,u)}function b(y,p,m){var w=h(y,p,m);return v(r,y.outsidetextfont,p,w)}function v(y,p,m,w){p=p||{};var u=n.getValue(p.family,m),S=n.getValue(p.size,m),_=n.getValue(p.color,m);return{family:n.coerceString(y.family,u,w.family),size:n.coerceNumber(y.size,S,w.size),color:n.coerceColor(y.color,_,w.color)}}function g(y,p){return p.type==="waterfall"?p[y.dir].marker.color:y.mcc||y.mc||p.marker.color}$.exports={style:function(y){var p=k.select(y).selectAll("g.barlayer").selectAll("g.trace");d(y,p,"bar");var m=p.size(),w=y._fullLayout;p.style("opacity",function(u){return u[0].trace.opacity}).each(function(u){(w.barmode==="stack"&&m>1||w.bargap===0&&w.bargroupgap===0&&!u[0].trace.marker.line.width)&&k.select(this).attr("shape-rendering","crispEdges")}),p.selectAll("g.points").each(function(u){a(k.select(this),u[0].trace,y)}),x.getComponentMethod("errorbars","style")(p)},styleTextPoints:i,styleOnSelect:function(y,p,m){var w=p[0].trace;w.selectedpoints?function(u,S,_){l.selectedPointStyle(u.selectAll("path"),S),function(E,L,C){E.each(function(P){var I,U=k.select(this);if(P.selected){I=T.ensureUniformFontSize(C,c(U,P,L,C));var z=L.selected.textfont&&L.selected.textfont.color;z&&(I.color=z),l.font(U,I)}else l.selectedTextStyle(U,L)})}(u.selectAll("text"),S,_)}(m,w,y):(a(m,w,y),x.getComponentMethod("errorbars","style")(m))},getInsideTextFont:f,getOutsideTextFont:b,getBarColor:g,resizeText:d}},98340:function($,R,e){var k=e(7901),A=e(52075).hasColorscale,l=e(1586),T=e(71828).coercePattern;$.exports=function(x,d,s,t,o){var r=s("marker.color",t),n=A(x,"marker");n&&l(x,d,o,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",k.defaultLine),A(x,"marker.line")&&l(x,d,o,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width"),s("marker.opacity"),T(s,"marker.pattern",r,n),s("selected.marker.color"),s("unselected.marker.color")}},72597:function($,R,e){var k=e(39898),A=e(71828);function l(T){return"_"+T+"Text_minsize"}$.exports={recordMinTextSize:function(T,x,d){if(d.uniformtext.mode){var s=l(T),t=d.uniformtext.minsize,o=x.scale*x.fontSize;x.hide=o<t,d[s]=d[s]||1/0,x.hide||(d[s]=Math.min(d[s],Math.max(o,t)))}},clearMinTextSize:function(T,x){x[l(T)]=void 0},resizeText:function(T,x,d){var s=T._fullLayout,t=s["_"+d+"Text_minsize"];if(t){var o,r=s.uniformtext.mode==="hide";switch(d){case"funnelarea":case"pie":case"sunburst":o="g.slice";break;case"treemap":case"icicle":o="g.slice, g.pathbar";break;default:o="g.points > g.point"}x.selectAll(o).each(function(n){var a=n.transform;if(a){a.scale=r&&a.hide?0:t/a.fontSize;var i=k.select(this).select("text");A.setTransormAndDisplay(i,a)}})}}}},55023:function($,R,e){var k=e(5386).f,A=e(1426).extendFlat,l=e(81245),T=e(1486);$.exports={r:l.r,theta:l.theta,r0:l.r0,dr:l.dr,theta0:l.theta0,dtheta:l.dtheta,thetaunit:l.thetaunit,base:A({},T.base,{}),offset:A({},T.offset,{}),width:A({},T.width,{}),text:A({},T.text,{}),hovertext:A({},T.hovertext,{}),marker:T.marker,hoverinfo:l.hoverinfo,hovertemplate:k(),selected:T.selected,unselected:T.unselected}},74692:function($,R,e){var k=e(52075).hasColorscale,A=e(78803),l=e(75341),T=e(11661).setGroupPositions,x=e(66279),d=e(73972).traceIs,s=e(71828).extendFlat;$.exports={calc:function(t,o){for(var r=t._fullLayout,n=o.subplot,a=r[n].radialaxis,i=r[n].angularaxis,c=a.makeCalcdata(o,"r"),h=i.makeCalcdata(o,"theta"),f=o._length,b=new Array(f),v=c,g=h,y=0;y<f;y++)b[y]={p:g[y],s:v[y]};function p(m){var w=o[m];w!==void 0&&(o["_"+m]=Array.isArray(w)?i.makeCalcdata(o,m):i.d2c(w,o.thetaunit))}return i.type==="linear"&&(p("width"),p("offset")),k(o,"marker")&&A(t,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),k(o,"marker.line")&&A(t,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}),l(b,o),x(b,o),b},crossTraceCalc:function(t,o,r){for(var n=t.calcdata,a=[],i=0;i<n.length;i++){var c=n[i],h=c[0].trace;h.visible===!0&&d(h,"bar")&&h.subplot===r&&a.push(c)}var f=s({},o.radialaxis,{_id:"x"}),b=o.angularaxis;T(t,b,f,a,{mode:o.barmode,norm:o.barnorm,gap:o.bargap,groupgap:o.bargroupgap})}}},6135:function($,R,e){var k=e(71828),A=e(22184).handleRThetaDefaults,l=e(98340),T=e(55023);$.exports=function(x,d,s,t){function o(r,n){return k.coerce(x,d,T,r,n)}A(x,d,t,o)?(o("thetaunit"),o("base"),o("offset"),o("width"),o("text"),o("hovertext"),o("hovertemplate"),l(x,d,o,s,t),k.coerceSelectionMarkerOpacity(d,o)):d.visible=!1}},27379:function($,R,e){var k=e(30211),A=e(71828),l=e(95423).getTraceColor,T=A.fillText,x=e(59150).makeHoverPointText,d=e(10869).isPtInsidePolygon;$.exports=function(s,t,o){var r=s.cd,n=r[0].trace,a=s.subplot,i=a.radialAxis,c=a.angularAxis,h=a.vangles,f=h?d:A.isPtInsideSector,b=s.maxHoverDistance,v=c._period||2*Math.PI,g=Math.abs(i.g2p(Math.sqrt(t*t+o*o))),y=Math.atan2(o,t);if(i.range[0]>i.range[1]&&(y+=Math.PI),k.getClosest(r,function(w){return f(g,y,[w.rp0,w.rp1],[w.thetag0,w.thetag1],h)?b+Math.min(1,Math.abs(w.thetag1-w.thetag0)/v)-1+(w.rp1-g)/(w.rp1-w.rp0)-1:1/0},s),s.index!==!1){var p=r[s.index];s.x0=s.x1=p.ct[0],s.y0=s.y1=p.ct[1];var m=A.extendFlat({},p,{r:p.s,theta:p.p});return T(p,n,s),x(m,n,a,s),s.hovertemplate=n.hovertemplate,s.color=l(n,p),s.xLabelVal=s.yLabelVal=void 0,p.s<0&&(s.idealAlign="left"),[s]}}},23381:function($,R,e){$.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(23580),categories:["polar","bar","showLegend"],attributes:e(55023),layoutAttributes:e(40151),supplyDefaults:e(6135),supplyLayoutDefaults:e(19860),calc:e(74692).calc,crossTraceCalc:e(74692).crossTraceCalc,plot:e(60173),colorbar:e(4898),formatLabels:e(98608),style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,hoverPoints:e(27379),selectPoints:e(81974),meta:{}}},40151:function($){$.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function($,R,e){var k=e(71828),A=e(40151);$.exports=function(l,T,x){var d,s={};function t(n,a){return k.coerce(l[d]||{},T[d],A,n,a)}for(var o=0;o<x.length;o++){var r=x[o];r.type==="barpolar"&&r.visible===!0&&(s[d=r.subplot]||(t("barmode"),t("bargap"),s[d]=1))}}},60173:function($,R,e){var k=e(39898),A=e(92770),l=e(71828),T=e(91424),x=e(10869);$.exports=function(d,s,t){var o=s.xaxis,r=s.yaxis,n=s.radialAxis,a=s.angularAxis,i=function(h){var f=h.cxx,b=h.cyy;return h.vangles?function(v,g,y,p){var m,w;l.angleDelta(y,p)>0?(m=y,w=p):(m=p,w=y);var u=[x.findEnclosingVertexAngles(m,h.vangles)[0],(m+w)/2,x.findEnclosingVertexAngles(w,h.vangles)[1]];return x.pathPolygonAnnulus(v,g,m,w,u,f,b)}:function(v,g,y,p){return l.pathAnnulus(v,g,y,p,f,b)}}(s),c=s.layers.frontplot.select("g.barlayer");l.makeTraceGroups(c,t,"trace bars").each(function(){var h=k.select(this),f=l.ensureSingle(h,"g","points").selectAll("g.point").data(l.identity);f.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),f.exit().remove(),f.each(function(b){var v,g=k.select(this),y=b.rp0=n.c2p(b.s0),p=b.rp1=n.c2p(b.s1),m=b.thetag0=a.c2g(b.p0),w=b.thetag1=a.c2g(b.p1);if(A(y)&&A(p)&&A(m)&&A(w)&&y!==p&&m!==w){var u=n.c2g(b.s1),S=(m+w)/2;b.ct=[o.c2p(u*Math.cos(S)),r.c2p(u*Math.sin(S))],v=i(y,p,m,w)}else v="M0,0Z";l.ensureSingle(g,"path").attr("d",v)}),T.setClipUrl(h,s._hasClipOnAxisFalse?s.clipIds.forTraces:null,d)})}},53522:function($,R,e){var k=e(82196),A=e(1486),l=e(22399),T=e(12663).axisHoverFormat,x=e(5386).f,d=e(1426).extendFlat,s=k.marker,t=s.line;$.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:d({},s.symbol,{arrayOk:!1,editType:"plot"}),opacity:d({},s.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:d({},s.angle,{arrayOk:!1,editType:"calc"}),size:d({},s.size,{arrayOk:!1,editType:"calc"}),color:d({},s.color,{arrayOk:!1,editType:"style"}),line:{color:d({},t.color,{arrayOk:!1,dflt:l.defaultLine,editType:"style"}),width:d({},t.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:k.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup,selected:{marker:k.selected.marker,editType:"style"},unselected:{marker:k.unselected.marker,editType:"style"},text:d({},k.text,{}),hovertext:d({},k.hovertext,{}),hovertemplate:x({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function($,R,e){var k=e(92770),A=e(89298),l=e(42973),T=e(71828),x=e(50606).BADNUM,d=T._;$.exports=function(f,b){var v,g,y,p,m,w,u,S=f._fullLayout,_=A.getFromId(f,b.xaxis||"x"),E=A.getFromId(f,b.yaxis||"y"),L=[],C=b.type==="violin"?"_numViolins":"_numBoxes";b.orientation==="h"?(y=_,p="x",m=E,w="y",u=!!b.yperiodalignment):(y=E,p="y",m=_,w="x",u=!!b.xperiodalignment);var P,I,U,z,H,F,N=function(_e,Fe,Ve,He){var nt,tt=Fe+"0"in _e;if(Fe in _e||tt&&"d"+Fe in _e){var ot=Ve.makeCalcdata(_e,Fe);return[l(_e,Ve,Fe,ot).vals,ot]}nt=tt?_e[Fe+"0"]:"name"in _e&&(Ve.type==="category"||k(_e.name)&&["linear","log"].indexOf(Ve.type)!==-1||T.isDateTime(_e.name)&&Ve.type==="date")?_e.name:He;for(var dt=Ve.type==="multicategory"?Ve.r2c_just_indices(nt):Ve.d2c(nt,0,_e[Fe+"calendar"]),kt=_e._length,mt=new Array(kt),wt=0;wt<kt;wt++)mt[wt]=dt;return[mt]}(b,w,m,S[C]),B=N[0],j=N[1],K=T.distinctVals(B,m),G=K.vals,V=K.minDiff/2,W=(b.boxpoints||b.points)==="all"?T.identity:function(_e){return _e.v<P.lf||_e.v>P.uf};if(b._hasPreCompStats){var J=b[p],X=function(_e){return y.d2c((b[_e]||[])[v])},ee=1/0,re=-1/0;for(v=0;v<b._length;v++){var ie=B[v];if(k(ie)){if((P={}).pos=P[w]=ie,u&&j&&(P.orig_p=j[v]),P.q1=X("q1"),P.med=X("median"),P.q3=X("q3"),I=[],J&&T.isArrayOrTypedArray(J[v]))for(g=0;g<J[v].length;g++)(F=y.d2c(J[v][g]))!==x&&(t(H={v:F,i:[v,g]},b,[v,g]),I.push(H));if(P.pts=I.sort(o),z=(U=P[p]=I.map(r)).length,P.med!==x&&P.q1!==x&&P.q3!==x&&P.med>=P.q1&&P.q3>=P.med){var se=X("lowerfence");P.lf=se!==x&&se<=P.q1?se:n(P,U,z);var fe=X("upperfence");P.uf=fe!==x&&fe>=P.q3?fe:a(P,U,z);var ye=X("mean");P.mean=ye!==x?ye:z?T.mean(U,z):(P.q1+P.q3)/2;var ge=X("sd");P.sd=ye!==x&&ge>=0?ge:z?T.stdev(U,z,P.mean):P.q3-P.q1,P.lo=i(P),P.uo=c(P);var he=X("notchspan");he=he!==x&&he>0?he:h(P,z),P.ln=P.med-he,P.un=P.med+he;var ve=P.lf,Oe=P.uf;b.boxpoints&&U.length&&(ve=Math.min(ve,U[0]),Oe=Math.max(Oe,U[z-1])),b.notched&&(ve=Math.min(ve,P.ln),Oe=Math.max(Oe,P.un)),P.min=ve,P.max=Oe}else{var xe;T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+P.q1,"median = "+P.med,"q3 = "+P.q3].join(`
`)),xe=P.med!==x?P.med:P.q1!==x?P.q3!==x?(P.q1+P.q3)/2:P.q1:P.q3!==x?P.q3:0,P.med=xe,P.q1=P.q3=xe,P.lf=P.uf=xe,P.mean=P.sd=xe,P.ln=P.un=xe,P.min=P.max=xe}ee=Math.min(ee,P.min),re=Math.max(re,P.max),P.pts2=I.filter(W),L.push(P)}}b._extremes[y._id]=A.findExtremes(y,[ee,re],{padded:!0})}else{var ke=y.makeCalcdata(b,p),Me=function(_e,Fe){for(var Ve=_e.length,He=new Array(Ve+1),nt=0;nt<Ve;nt++)He[nt]=_e[nt]-Fe;return He[Ve]=_e[Ve-1]+Fe,He}(G,V),Te=G.length,Q=function(_e){for(var Fe=new Array(_e),Ve=0;Ve<_e;Ve++)Fe[Ve]=[];return Fe}(Te);for(v=0;v<b._length;v++)if(F=ke[v],k(F)){var oe=T.findBin(B[v],Me);oe>=0&&oe<Te&&(t(H={v:F,i:v},b,v),Q[oe].push(H))}var ce=1/0,me=-1/0,Ae=b.quartilemethod,Ie=Ae==="exclusive",Ce=Ae==="inclusive";for(v=0;v<Te;v++)if(Q[v].length>0){var Re,le;(P={}).pos=P[w]=G[v],I=P.pts=Q[v].sort(o),z=(U=P[p]=I.map(r)).length,P.min=U[0],P.max=U[z-1],P.mean=T.mean(U,z),P.sd=T.stdev(U,z,P.mean),P.med=T.interp(U,.5),z%2&&(Ie||Ce)?(Ie?(Re=U.slice(0,z/2),le=U.slice(z/2+1)):Ce&&(Re=U.slice(0,z/2+1),le=U.slice(z/2)),P.q1=T.interp(Re,.5),P.q3=T.interp(le,.5)):(P.q1=T.interp(U,.25),P.q3=T.interp(U,.75)),P.lf=n(P,U,z),P.uf=a(P,U,z),P.lo=i(P),P.uo=c(P);var de=h(P,z);P.ln=P.med-de,P.un=P.med+de,ce=Math.min(ce,P.ln),me=Math.max(me,P.un),P.pts2=I.filter(W),L.push(P)}b._extremes[y._id]=A.findExtremes(y,b.notched?ke.concat([ce,me]):ke,{padded:!0})}return function(_e,Fe){if(T.isArrayOrTypedArray(Fe.selectedpoints))for(var Ve=0;Ve<_e.length;Ve++){for(var He=_e[Ve].pts||[],nt={},tt=0;tt<He.length;tt++)nt[He[tt].i]=tt;T.tagSelected(He,Fe,nt)}}(L,b),L.length>0?(L[0].t={num:S[C],dPos:V,posLetter:w,valLetter:p,labels:{med:d(f,"median:"),min:d(f,"min:"),q1:d(f,"q1:"),q3:d(f,"q3:"),max:d(f,"max:"),mean:b.boxmean==="sd"?d(f,"mean  :"):d(f,"mean:"),lf:d(f,"lower fence:"),uf:d(f,"upper fence:")}},S[C]++,L):[{t:{empty:!0}}]};var s={text:"tx",hovertext:"htx"};function t(f,b,v){for(var g in s)T.isArrayOrTypedArray(b[g])&&(Array.isArray(v)?T.isArrayOrTypedArray(b[g][v[0]])&&(f[s[g]]=b[g][v[0]][v[1]]):f[s[g]]=b[g][v])}function o(f,b){return f.v-b.v}function r(f){return f.v}function n(f,b,v){return v===0?f.q1:Math.min(f.q1,b[Math.min(T.findBin(2.5*f.q1-1.5*f.q3,b,!0)+1,v-1)])}function a(f,b,v){return v===0?f.q3:Math.max(f.q3,b[Math.max(T.findBin(2.5*f.q3-1.5*f.q1,b),0)])}function i(f){return 4*f.q1-3*f.q3}function c(f){return 4*f.q3-3*f.q1}function h(f,b){return b===0?0:1.57*(f.q3-f.q1)/Math.sqrt(b)}},37188:function($,R,e){var k=e(89298),A=e(71828),l=e(99082).getAxisGroup,T=["v","h"];function x(d,s,t,o){var r,n,a,i=s.calcdata,c=s._fullLayout,h=o._id,f=h.charAt(0),b=[],v=0;for(r=0;r<t.length;r++)for(a=i[t[r]],n=0;n<a.length;n++)b.push(o.c2l(a[n].pos,!0)),v+=(a[n].pts2||[]).length;if(b.length){var g=A.distinctVals(b);o.type!=="category"&&o.type!=="multicategory"||(g.minDiff=1);var y=g.minDiff/2;k.minDtick(o,g.minDiff,g.vals[0],!0);var p=c[d==="violin"?"_numViolins":"_numBoxes"],m=c[d+"mode"]==="group"&&p>1,w=1-c[d+"gap"],u=1-c[d+"groupgap"];for(r=0;r<t.length;r++){var S,_,E,L,C,P,I=(a=i[t[r]])[0].trace,U=a[0].t,z=I.width,H=I.side;if(z)S=_=L=z/2,E=0;else if(S=y,m){var F=l(c,o._id)+I.orientation,N=(c._alignmentOpts[F]||{})[I.alignmentgroup]||{},B=Object.keys(N.offsetGroups||{}).length,j=B||p;_=S*w*u/j,E=2*S*(((B?I._offsetIndex:U.num)+.5)/j-.5)*w,L=S*w/j}else _=S*w*u,E=0,L=S;U.dPos=S,U.bPos=E,U.bdPos=_,U.wHover=L;var K,G,V,W,J,X,ee=E+_,re=Boolean(z);if(H==="positive"?(C=S*(z?1:.5),K=ee,P=K=E):H==="negative"?(C=K=E,P=S*(z?1:.5),G=ee):(C=P=S,K=G=ee),(I.boxpoints||I.points)&&v>0){var ie=I.pointpos,se=I.jitter,fe=I.marker.size/2,ye=0;ie+se>=0&&((ye=ee*(ie+se))>C?(re=!0,J=fe,V=ye):ye>K&&(J=fe,V=C)),ye<=C&&(V=C);var ge=0;ie-se<=0&&((ge=-ee*(ie-se))>P?(re=!0,X=fe,W=ge):ge>G&&(X=fe,W=P)),ge<=P&&(W=P)}else V=C,W=P;var he=new Array(a.length);for(n=0;n<a.length;n++)he[n]=a[n].pos;I._extremes[h]=k.findExtremes(o,he,{padded:re,vpadminus:W,vpadplus:V,vpadLinearized:!0,ppadminus:{x:X,y:J}[f],ppadplus:{x:J,y:X}[f]})}}}$.exports={crossTraceCalc:function(d,s){for(var t=d.calcdata,o=s.xaxis,r=s.yaxis,n=0;n<T.length;n++){for(var a=T[n],i=a==="h"?r:o,c=[],h=0;h<t.length;h++){var f=t[h],b=f[0].t,v=f[0].trace;v.visible!==!0||v.type!=="box"&&v.type!=="candlestick"||b.empty||(v.orientation||"v")!==a||v.xaxis!==o._id||v.yaxis!==r._id||c.push(h)}x("box",d,c,i)}},setPositionOffset:x}},36411:function($,R,e){var k=e(71828),A=e(73972),l=e(7901),T=e(73927),x=e(26125),d=e(4322),s=e(53522);function t(r,n,a,i){function c(H){var F=0;return H&&H.length&&(F+=1,k.isArrayOrTypedArray(H[0])&&H[0].length&&(F+=1)),F}function h(H){return k.validate(r[H],s[H])}var f,b=a("y"),v=a("x");if(n.type==="box"){var g=a("q1"),y=a("median"),p=a("q3");n._hasPreCompStats=g&&g.length&&y&&y.length&&p&&p.length,f=Math.min(k.minRowLength(g),k.minRowLength(y),k.minRowLength(p))}var m,w,u=c(b),S=c(v),_=u&&k.minRowLength(b),E=S&&k.minRowLength(v),L=i.calendar,C={autotypenumbers:i.autotypenumbers};if(n._hasPreCompStats)switch(String(S)+String(u)){case"00":var P=h("x0")||h("dx");m=!h("y0")&&!h("dy")||P?"v":"h",w=f;break;case"10":m="v",w=Math.min(f,E);break;case"20":m="h",w=Math.min(f,v.length);break;case"01":m="h",w=Math.min(f,_);break;case"02":m="v",w=Math.min(f,b.length);break;case"12":m="v",w=Math.min(f,E,b.length);break;case"21":m="h",w=Math.min(f,v.length,_);break;case"11":w=0;break;case"22":var I,U=!1;for(I=0;I<v.length;I++)if(d(v[I],L,C)==="category"){U=!0;break}if(U)m="v",w=Math.min(f,E,b.length);else{for(I=0;I<b.length;I++)if(d(b[I],L,C)==="category"){U=!0;break}U?(m="h",w=Math.min(f,v.length,_)):(m="v",w=Math.min(f,E,b.length))}}else u>0?(m="v",w=S>0?Math.min(E,_):Math.min(_)):S>0?(m="h",w=Math.min(E)):w=0;if(w){n._length=w;var z=a("orientation",m);n._hasPreCompStats?z==="v"&&S===0?(a("x0",0),a("dx",1)):z==="h"&&u===0&&(a("y0",0),a("dy",1)):z==="v"&&S===0?a("x0"):z==="h"&&u===0&&a("y0"),A.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],i)}else n.visible=!1}function o(r,n,a,i){var c=i.prefix,h=k.coerce2(r,n,s,"marker.outliercolor"),f=a("marker.line.outliercolor"),b="outliers";n._hasPreCompStats?b="all":(h||f)&&(b="suspectedoutliers");var v=a(c+"points",b);v?(a("jitter",v==="all"?.3:0),a("pointpos",v==="all"?-1.5:0),a("marker.symbol"),a("marker.opacity"),a("marker.size"),a("marker.angle"),a("marker.color",n.line.color),a("marker.line.color"),a("marker.line.width"),v==="suspectedoutliers"&&(a("marker.line.outliercolor",n.marker.color),a("marker.line.outlierwidth")),a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size"),a("text"),a("hovertext")):delete n.marker;var g=a("hoveron");g!=="all"&&g.indexOf("points")===-1||a("hovertemplate"),k.coerceSelectionMarkerOpacity(n,a)}$.exports={supplyDefaults:function(r,n,a,i){function c(p,m){return k.coerce(r,n,s,p,m)}if(t(r,n,c,i),n.visible!==!1){T(r,n,i,c),c("xhoverformat"),c("yhoverformat");var h=n._hasPreCompStats;h&&(c("lowerfence"),c("upperfence")),c("line.color",(r.marker||{}).color||a),c("line.width"),c("fillcolor",l.addOpacity(n.line.color,.5));var f=!1;if(h){var b=c("mean"),v=c("sd");b&&b.length&&(f=!0,v&&v.length&&(f="sd"))}c("boxmean",f),c("whiskerwidth"),c("width"),c("quartilemethod");var g=!1;if(h){var y=c("notchspan");y&&y.length&&(g=!0)}else k.validate(r.notchwidth,s.notchwidth)&&(g=!0);c("notched",g)&&c("notchwidth"),o(r,n,c,{prefix:"box"})}},crossTraceDefaults:function(r,n){var a,i;function c(b){return k.coerce(i._input,i,s,b)}for(var h=0;h<r.length;h++){var f=(i=r[h]).type;f!=="box"&&f!=="violin"||(a=i._input,n[f+"mode"]==="group"&&x(a,i,n,c))}},handleSampleDefaults:t,handlePointsDefaults:o}},74907:function($){$.exports=function(R,e){return e.hoverOnBox&&(R.hoverOnBox=e.hoverOnBox),"xVal"in e&&(R.x=e.xVal),"yVal"in e&&(R.y=e.yVal),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),R}},41868:function($,R,e){var k=e(89298),A=e(71828),l=e(30211),T=e(7901),x=A.fillText;function d(t,o,r,n){var a,i,c,h,f,b,v,g,y,p,m,w,u,S,_=t.cd,E=t.xa,L=t.ya,C=_[0].trace,P=_[0].t,I=C.type==="violin",U=P.bdPos,z=P.wHover,H=function(xe){return c.c2l(xe.pos)+P.bPos-c.c2l(b)};I&&C.side!=="both"?(C.side==="positive"&&(y=function(xe){var ke=H(xe);return l.inbox(ke,ke+z,p)},w=U,u=0),C.side==="negative"&&(y=function(xe){var ke=H(xe);return l.inbox(ke-z,ke,p)},w=0,u=U)):(y=function(xe){var ke=H(xe);return l.inbox(ke-z,ke+z,p)},w=u=U),S=I?function(xe){return l.inbox(xe.span[0]-f,xe.span[1]-f,p)}:function(xe){return l.inbox(xe.min-f,xe.max-f,p)},C.orientation==="h"?(f=o,b=r,v=S,g=y,a="y",c=L,i="x",h=E):(f=r,b=o,v=y,g=S,a="x",c=E,i="y",h=L);var F=Math.min(1,U/Math.abs(c.r2c(c.range[1])-c.r2c(c.range[0])));function N(xe){return(v(xe)+g(xe))/2}p=t.maxHoverDistance-F,m=t.maxSpikeDistance-F;var B=l.getDistanceFunction(n,v,g,N);if(l.getClosest(_,B,t),t.index===!1)return[];var j=_[t.index],K=C.line.color,G=(C.marker||{}).color;T.opacity(K)&&C.line.width?t.color=K:T.opacity(G)&&C.boxpoints?t.color=G:t.color=C.fillcolor,t[a+"0"]=c.c2p(j.pos+P.bPos-u,!0),t[a+"1"]=c.c2p(j.pos+P.bPos+w,!0),t[a+"LabelVal"]=j.orig_p!==void 0?j.orig_p:j.pos;var V=a+"Spike";t.spikeDistance=N(j)*m/p,t[V]=c.c2p(j.pos,!0);var W=C.boxmean||(C.meanline||{}).visible,J=C.boxpoints||C.points,X=J&&W?["max","uf","q3","med","mean","q1","lf","min"]:J&&!W?["max","uf","q3","med","q1","lf","min"]:!J&&W?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],ee=h.range[1]<h.range[0];C.orientation===(ee?"v":"h")&&X.reverse();for(var re=t.spikeDistance,ie=t[V],se=[],fe=0;fe<X.length;fe++){var ye=X[fe];if(ye in j){var ge=j[ye],he=h.c2p(ge,!0),ve=A.extendFlat({},t);ve.attr=ye,ve[i+"0"]=ve[i+"1"]=he,ve[i+"LabelVal"]=ge,ve[i+"Label"]=(P.labels?P.labels[ye]+" ":"")+k.hoverLabelText(h,ge,C[i+"hoverformat"]),ve.hoverOnBox=!0,ye==="mean"&&"sd"in j&&C.boxmean==="sd"&&(ve[i+"err"]=j.sd),ve.hovertemplate=!1,se.push(ve)}}t.name="",t.spikeDistance=void 0,t[V]=void 0;for(var Oe=0;Oe<se.length;Oe++)se[Oe].attr!=="med"?(se[Oe].name="",se[Oe].spikeDistance=void 0,se[Oe][V]=void 0):(se[Oe].spikeDistance=re,se[Oe][V]=ie);return se}function s(t,o,r){for(var n,a,i,c=t.cd,h=t.xa,f=t.ya,b=c[0].trace,v=h.c2p(o),g=f.c2p(r),y=l.quadrature(function(I){var U=Math.max(3,I.mrc||0);return Math.max(Math.abs(h.c2p(I.x)-v)-U,1-3/U)},function(I){var U=Math.max(3,I.mrc||0);return Math.max(Math.abs(f.c2p(I.y)-g)-U,1-3/U)}),p=!1,m=0;m<c.length;m++){a=c[m];for(var w=0;w<(a.pts||[]).length;w++){var u=y(i=a.pts[w]);u<=t.distance&&(t.distance=u,p=[m,w])}}if(!p)return!1;i=(a=c[p[0]]).pts[p[1]];var S=h.c2p(i.x,!0),_=f.c2p(i.y,!0),E=i.mrc||1;n=A.extendFlat({},t,{index:i.i,color:(b.marker||{}).color,name:b.name,x0:S-E,x1:S+E,y0:_-E,y1:_+E,spikeDistance:t.distance,hovertemplate:b.hovertemplate});var L,C=a.orig_p,P=C!==void 0?C:a.pos;return b.orientation==="h"?(L=f,n.xLabelVal=i.x,n.yLabelVal=P):(L=h,n.xLabelVal=P,n.yLabelVal=i.y),n[L._id.charAt(0)+"Spike"]=L.c2p(a.pos,!0),x(i,b,n),n}$.exports={hoverPoints:function(t,o,r,n){var a,i=t.cd[0].trace.hoveron,c=[];return i.indexOf("boxes")!==-1&&(c=c.concat(d(t,o,r,n))),i.indexOf("points")!==-1&&(a=s(t,o,r)),n==="closest"?a?[a]:c:(a&&c.push(a),c)},hoverOnBoxes:d,hoverOnPoints:s}},83832:function($,R,e){$.exports={attributes:e(53522),layoutAttributes:e(40094),supplyDefaults:e(36411).supplyDefaults,crossTraceDefaults:e(36411).crossTraceDefaults,supplyLayoutDefaults:e(4199).supplyLayoutDefaults,calc:e(48518),crossTraceCalc:e(37188).crossTraceCalc,plot:e(86047).plot,style:e(58063).style,styleOnSelect:e(58063).styleOnSelect,hoverPoints:e(41868).hoverPoints,eventData:e(74907),selectPoints:e(24626),moduleType:"trace",name:"box",basePlotModule:e(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function($){$.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function($,R,e){var k=e(73972),A=e(71828),l=e(40094);function T(x,d,s,t,o){for(var r=o+"Layout",n=!1,a=0;a<s.length;a++){var i=s[a];if(k.traceIs(i,r)){n=!0;break}}n&&(t(o+"mode"),t(o+"gap"),t(o+"groupgap"))}$.exports={supplyLayoutDefaults:function(x,d,s){T(0,0,s,function(t,o){return A.coerce(x,d,l,t,o)},"box")},_supply:T}},86047:function($,R,e){var k=e(39898),A=e(71828),l=e(91424);function T(s,t,o,r){var n,a,i=o.orientation==="h",c=t.val,h=t.pos,f=!!h.rangebreaks,b=r.bPos,v=r.wdPos||0,g=r.bPosPxOffset||0,y=o.whiskerwidth||0,p=o.notched||!1,m=p?1-2*o.notchwidth:1;Array.isArray(r.bdPos)?(n=r.bdPos[0],a=r.bdPos[1]):(n=r.bdPos,a=r.bdPos);var w=s.selectAll("path.box").data(o.type!=="violin"||o.box.visible?A.identity:[]);w.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),w.exit().remove(),w.each(function(u){if(u.empty)return"M0,0Z";var S=h.c2l(u.pos+b,!0),_=h.l2p(S-n)+g,E=h.l2p(S+a)+g,L=f?(_+E)/2:h.l2p(S)+g,C=o.whiskerwidth,P=f?_*C+(1-C)*L:h.l2p(S-v)+g,I=f?E*C+(1-C)*L:h.l2p(S+v)+g,U=h.l2p(S-n*m)+g,z=h.l2p(S+a*m)+g,H=c.c2p(u.q1,!0),F=c.c2p(u.q3,!0),N=A.constrain(c.c2p(u.med,!0),Math.min(H,F)+1,Math.max(H,F)-1),B=u.lf===void 0||o.boxpoints===!1,j=c.c2p(B?u.min:u.lf,!0),K=c.c2p(B?u.max:u.uf,!0),G=c.c2p(u.ln,!0),V=c.c2p(u.un,!0);i?k.select(this).attr("d","M"+N+","+U+"V"+z+"M"+H+","+_+"V"+E+(p?"H"+G+"L"+N+","+z+"L"+V+","+E:"")+"H"+F+"V"+_+(p?"H"+V+"L"+N+","+U+"L"+G+","+_:"")+"ZM"+H+","+L+"H"+j+"M"+F+","+L+"H"+K+(y===0?"":"M"+j+","+P+"V"+I+"M"+K+","+P+"V"+I)):k.select(this).attr("d","M"+U+","+N+"H"+z+"M"+_+","+H+"H"+E+(p?"V"+G+"L"+z+","+N+"L"+E+","+V:"")+"V"+F+"H"+_+(p?"V"+V+"L"+U+","+N+"L"+_+","+G:"")+"ZM"+L+","+H+"V"+j+"M"+L+","+F+"V"+K+(y===0?"":"M"+P+","+j+"H"+I+"M"+P+","+K+"H"+I))})}function x(s,t,o,r){var n=t.x,a=t.y,i=r.bdPos,c=r.bPos,h=o.boxpoints||o.points;A.seedPseudoRandom();var f=s.selectAll("g.points").data(h?function(v){return v.forEach(function(g){g.t=r,g.trace=o}),v}:[]);f.enter().append("g").attr("class","points"),f.exit().remove();var b=f.selectAll("path").data(function(v){var g,y,p=v.pts2,m=Math.max((v.max-v.min)/10,v.q3-v.q1),w=1e-9*m,u=.01*m,S=[],_=0;if(o.jitter){if(m===0)for(_=1,S=new Array(p.length),g=0;g<p.length;g++)S[g]=1;else for(g=0;g<p.length;g++){var E=Math.max(0,g-5),L=p[E].v,C=Math.min(p.length-1,g+5),P=p[C].v;h!=="all"&&(p[g].v<v.lf?P=Math.min(P,v.lf):L=Math.max(L,v.uf));var I=Math.sqrt(u*(C-E)/(P-L+w))||0;I=A.constrain(Math.abs(I),0,1),S.push(I),_=Math.max(I,_)}y=2*o.jitter/(_||1)}for(g=0;g<p.length;g++){var U=p[g],z=U.v,H=o.jitter?y*S[g]*(A.pseudoRandom()-.5):0,F=v.pos+c+i*(o.pointpos+H);o.orientation==="h"?(U.y=F,U.x=z):(U.x=F,U.y=z),h==="suspectedoutliers"&&z<v.uo&&z>v.lo&&(U.so=!0)}return p});b.enter().append("path").classed("point",!0),b.exit().remove(),b.call(l.translatePoints,n,a)}function d(s,t,o,r){var n,a,i=t.val,c=t.pos,h=!!c.rangebreaks,f=r.bPos,b=r.bPosPxOffset||0,v=o.boxmean||(o.meanline||{}).visible;Array.isArray(r.bdPos)?(n=r.bdPos[0],a=r.bdPos[1]):(n=r.bdPos,a=r.bdPos);var g=s.selectAll("path.mean").data(o.type==="box"&&o.boxmean||o.type==="violin"&&o.box.visible&&o.meanline.visible?A.identity:[]);g.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),g.exit().remove(),g.each(function(y){var p=c.c2l(y.pos+f,!0),m=c.l2p(p-n)+b,w=c.l2p(p+a)+b,u=h?(m+w)/2:c.l2p(p)+b,S=i.c2p(y.mean,!0),_=i.c2p(y.mean-y.sd,!0),E=i.c2p(y.mean+y.sd,!0);o.orientation==="h"?k.select(this).attr("d","M"+S+","+m+"V"+w+(v==="sd"?"m0,0L"+_+","+u+"L"+S+","+m+"L"+E+","+u+"Z":"")):k.select(this).attr("d","M"+m+","+S+"H"+w+(v==="sd"?"m0,0L"+u+","+_+"L"+m+","+S+"L"+u+","+E+"Z":""))})}$.exports={plot:function(s,t,o,r){var n=t.xaxis,a=t.yaxis;A.makeTraceGroups(r,o,"trace boxes").each(function(i){var c,h,f=k.select(this),b=i[0],v=b.t,g=b.trace;v.wdPos=v.bdPos*g.whiskerwidth,g.visible!==!0||v.empty?f.remove():(g.orientation==="h"?(c=a,h=n):(c=n,h=a),T(f,{pos:c,val:h},g,v),x(f,{x:n,y:a},g,v),d(f,{pos:c,val:h},g,v))})},plotBoxAndWhiskers:T,plotPoints:x,plotBoxMean:d}},24626:function($){$.exports=function(R,e){var k,A,l=R.cd,T=R.xaxis,x=R.yaxis,d=[];if(e===!1)for(k=0;k<l.length;k++)for(A=0;A<(l[k].pts||[]).length;A++)l[k].pts[A].selected=0;else for(k=0;k<l.length;k++)for(A=0;A<(l[k].pts||[]).length;A++){var s=l[k].pts[A],t=T.c2p(s.x),o=x.c2p(s.y);e.contains([t,o],null,s.i,R)?(d.push({pointNumber:s.i,x:T.c2d(s.x),y:x.c2d(s.y)}),s.selected=1):s.selected=0}return d}},58063:function($,R,e){var k=e(39898),A=e(7901),l=e(91424);$.exports={style:function(T,x,d){var s=d||k.select(T).selectAll("g.trace.boxes");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var o=k.select(this),r=t[0].trace,n=r.line.width;function a(h,f,b,v){h.style("stroke-width",f+"px").call(A.stroke,b).call(A.fill,v)}var i=o.selectAll("path.box");if(r.type==="candlestick")i.each(function(h){if(!h.empty){var f=k.select(this),b=r[h.dir];a(f,b.line.width,b.line.color,b.fillcolor),f.style("opacity",r.selectedpoints&&!h.selected?.3:1)}});else{a(i,n,r.line.color,r.fillcolor),o.selectAll("path.mean").style({"stroke-width":n,"stroke-dasharray":2*n+"px,"+n+"px"}).call(A.stroke,r.line.color);var c=o.selectAll("path.point");l.pointStyle(c,r,T)}})},styleOnSelect:function(T,x,d){var s=x[0].trace,t=d.selectAll("path.point");s.selectedpoints?l.selectedPointStyle(t,s):l.pointStyle(t,s,T)}}},75343:function($,R,e){var k=e(71828).extendFlat,A=e(12663).axisHoverFormat,l=e(2522),T=e(53522);function x(d){return{line:{color:k({},T.line.color,{dflt:d}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}$.exports={xperiod:l.xperiod,xperiod0:l.xperiod0,xperiodalignment:l.xperiodalignment,xhoverformat:A("x"),yhoverformat:A("y"),x:l.x,open:l.open,high:l.high,low:l.low,close:l.close,line:{width:k({},T.line.width,{}),editType:"style"},increasing:x(l.increasing.line.color.dflt),decreasing:x(l.decreasing.line.color.dflt),text:l.text,hovertext:l.hovertext,whiskerwidth:k({},T.whiskerwidth,{dflt:0}),hoverlabel:l.hoverlabel}},41197:function($,R,e){var k=e(71828),A=e(89298),l=e(42973),T=e(3485).calcCommon;function x(d,s,t,o){return{min:t,q1:Math.min(d,o),med:o,q3:Math.max(d,o),max:s}}$.exports=function(d,s){var t=d._fullLayout,o=A.getFromId(d,s.xaxis),r=A.getFromId(d,s.yaxis),n=o.makeCalcdata(s,"x"),a=l(s,o,"x",n).vals,i=T(d,s,n,a,r,x);return i.length?(k.extendFlat(i[0].t,{num:t._numBoxes,dPos:k.distinctVals(a).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,i):[{t:{empty:!0}}]}},1026:function($,R,e){var k=e(71828),A=e(7901),l=e(14555),T=e(73927),x=e(75343);function d(s,t,o,r){var n=o(r+".line.color");o(r+".line.width",t.line.width),o(r+".fillcolor",A.addOpacity(n,.5))}$.exports=function(s,t,o,r){function n(a,i){return k.coerce(s,t,x,a,i)}l(s,t,n,r)?(T(s,t,r,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),d(0,t,n,"increasing"),d(0,t,n,"decreasing"),n("text"),n("hovertext"),n("whiskerwidth"),r._requestRangeslider[t.xaxis]=!0):t.visible=!1}},91815:function($,R,e){$.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(75343),layoutAttributes:e(40094),supplyLayoutDefaults:e(4199).supplyLayoutDefaults,crossTraceCalc:e(37188).crossTraceCalc,supplyDefaults:e(1026),calc:e(41197),plot:e(86047).plot,layerName:"boxlayer",style:e(58063).style,hoverPoints:e(66449).hoverPoints,selectPoints:e(67324)}},13145:function($,R,e){var k=e(11500),A=e(44467);$.exports=function(l,T,x,d,s){d("a")||(d("da"),d("a0")),d("b")||(d("db"),d("b0")),function(t,o,r,n){["aaxis","baxis"].forEach(function(a){var i=a.charAt(0),c=t[a]||{},h=A.newContainer(o,a),f={noTicklabelstep:!0,tickfont:"x",id:i+"axis",letter:i,font:o.font,name:a,data:t[i],calendar:o.calendar,dfltColor:n,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r};k(c,h,f),h._categories=h._categories||[],t[a]||c.type==="-"||(t[a]={type:c.type})})}(l,T,x,s)}},402:function($,R,e){var k=e(71828).isArrayOrTypedArray;function A(l,T){if(!k(l)||T>=10)return null;for(var x=1/0,d=-1/0,s=l.length,t=0;t<s;t++){var o=l[t];if(k(o)){var r=A(o,T+1);r&&(x=Math.min(r[0],x),d=Math.max(r[1],d))}else x=Math.min(o,x),d=Math.max(o,d)}return[x,d]}$.exports=function(l){return A(l,0)}},99798:function($,R,e){var k=e(41940),A=e(1928),l=e(22399),T=k({editType:"calc"});T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=l.defaultLine,$.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:A,baxis:A,font:T,color:{valType:"color",dflt:l.defaultLine,editType:"plot"},transforms:void 0}},4536:function($,R,e){var k=e(71828).isArrayOrTypedArray;$.exports=function(A,l,T,x){var d,s,t,o,r,n,a,i,c,h,f,b,v,g=k(T)?"a":"b",y=(g==="a"?A.aaxis:A.baxis).smoothing,p=g==="a"?A.a2i:A.b2j,m=g==="a"?T:x,w=g==="a"?x:T,u=g==="a"?l.a.length:l.b.length,S=g==="a"?l.b.length:l.a.length,_=Math.floor(g==="a"?A.b2j(w):A.a2i(w)),E=g==="a"?function(K){return A.evalxy([],K,_)}:function(K){return A.evalxy([],_,K)};y&&(t=Math.max(0,Math.min(S-2,_)),o=_-t,s=g==="a"?function(K,G){return A.dxydi([],K,t,G,o)}:function(K,G){return A.dxydj([],t,K,o,G)});var L=p(m[0]),C=p(m[1]),P=L<C?1:-1,I=1e-8*(C-L),U=P>0?Math.floor:Math.ceil,z=P>0?Math.ceil:Math.floor,H=P>0?Math.min:Math.max,F=P>0?Math.max:Math.min,N=U(L+I),B=z(C-I),j=[[a=E(L)]];for(d=N;d*P<B*P;d+=P)r=[],f=F(L,d),v=(b=H(C,d+P))-f,n=Math.max(0,Math.min(u-2,Math.floor(.5*(f+b)))),i=E(b),y&&(c=s(n,f-n),h=s(n,b-n),r.push([a[0]+c[0]/3*v,a[1]+c[1]/3*v]),r.push([i[0]-h[0]/3*v,i[1]-h[1]/3*v])),r.push(i),j.push(r),a=i;return j}},1928:function($,R,e){var k=e(41940),A=e(22399),l=e(13838),T=e(12663).descriptionWithDates,x=e(30962).overrideAll,d=e(79952).P,s=e(1426).extendFlat;$.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:k({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:l.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:k({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:x(l.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:A.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:s({},d,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:s({},d,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:A.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:k({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function($,R,e){var k=e(99798),A=e(7901).addOpacity,l=e(73972),T=e(71828),x=e(26218),d=e(96115),s=e(89426),t=e(15258),o=e(21994),r=e(4322);$.exports=function(n,a,i){var c=i.letter,h=i.font||{},f=k[c+"axis"];function b(P,I){return T.coerce(n,a,f,P,I)}function v(P,I){return T.coerce2(n,a,f,P,I)}i.name&&(a._name=i.name,a._id=i.name),b("autotypenumbers",i.autotypenumbersDflt);var g=b("type");g==="-"&&(i.data&&function(P,I){if(P.type==="-"){var U=P._id.charAt(0),z=P[U+"calendar"];P.type=r(I,z,{autotypenumbers:P.autotypenumbers})}}(a,i.data),a.type==="-"?a.type="linear":g=n.type=a.type),b("smoothing"),b("cheatertype"),b("showticklabels"),b("labelprefix",c+" = "),b("labelsuffix"),b("showtickprefix"),b("showticksuffix"),b("separatethousands"),b("tickformat"),b("exponentformat"),b("minexponent"),b("showexponent"),b("categoryorder"),b("tickmode"),b("tickvals"),b("ticktext"),b("tick0"),b("dtick"),a.tickmode==="array"&&(b("arraytick0"),b("arraydtick")),b("labelpadding"),a._hovertitle=c,g==="date"&&l.getComponentMethod("calendars","handleDefaults")(n,a,"calendar",i.calendar),o(a,i.fullLayout),a.c2p=T.identity;var y=b("color",i.dfltColor),p=y===n.color?y:h.color;b("title.text")&&(T.coerceFont(b,"title.font",{family:h.family,size:T.bigFont(h.size),color:p}),b("title.offset")),b("tickangle"),b("autorange",!a.isValidRange(n.range))&&b("rangemode"),b("range"),a.cleanRange(),b("fixedrange"),x(n,a,b,g),s(n,a,b,g,i),d(n,a,b,g,i),t(n,a,b,{data:i.data,dataAttr:c});var m=v("gridcolor",A(y,.3)),w=v("gridwidth"),u=v("griddash"),S=b("showgrid");S||(delete a.gridcolor,delete a.gridwidth,delete a.griddash);var _=v("startlinecolor",y),E=v("startlinewidth",w);b("startline",a.showgrid||!!_||!!E)||(delete a.startlinecolor,delete a.startlinewidth);var L=v("endlinecolor",y),C=v("endlinewidth",w);return b("endline",a.showgrid||!!L||!!C)||(delete a.endlinecolor,delete a.endlinewidth),S?(b("minorgridcount"),b("minorgridwidth",w),b("minorgriddash",u),b("minorgridcolor",A(m,.06)),a.minorgridcount||(delete a.minorgridwidth,delete a.minorgriddash,delete a.minorgridcolor)):(delete a.gridcolor,delete a.gridwidth,delete a.griddash),a.showticklabels==="none"&&(delete a.tickfont,delete a.tickangle,delete a.showexponent,delete a.exponentformat,delete a.minexponent,delete a.tickformat,delete a.showticksuffix,delete a.showtickprefix),a.showticksuffix||delete a.ticksuffix,a.showtickprefix||delete a.tickprefix,b("tickmode"),a}},25281:function($,R,e){var k=e(89298),A=e(71828).isArray1D,l=e(53824),T=e(402),x=e(20347),d=e(83311),s=e(44807),t=e(4742),o=e(72505),r=e(68296),n=e(11435);$.exports=function(a,i){var c=k.getFromId(a,i.xaxis),h=k.getFromId(a,i.yaxis),f=i.aaxis,b=i.baxis,v=i.x,g=i.y,y=[];v&&A(v)&&y.push("x"),g&&A(g)&&y.push("y"),y.length&&r(i,f,b,"a","b",y);var p=i._a=i._a||i.a,m=i._b=i._b||i.b;v=i._x||i.x,g=i._y||i.y;var w={};if(i._cheater){var u=f.cheatertype==="index"?p.length:p,S=b.cheatertype==="index"?m.length:m;v=l(u,S,i.cheaterslope)}i._x=v=t(v),i._y=g=t(g),o(v,p,m),o(g,p,m),n(i),i.setScale();var _=T(v),E=T(g),L=.5*(_[1]-_[0]),C=.5*(_[1]+_[0]),P=.5*(E[1]-E[0]),I=.5*(E[1]+E[0]),U=1.3;return _=[C-L*U,C+L*U],E=[I-P*U,I+P*U],i._extremes[c._id]=k.findExtremes(c,_,{padded:!0}),i._extremes[h._id]=k.findExtremes(h,E,{padded:!0}),x(i,"a","b"),x(i,"b","a"),d(i,f),d(i,b),w.clipsegments=s(i._xctrl,i._yctrl,f,b),w.x=v,w.y=g,w.a=p,w.b=m,[w]}},44807:function($){$.exports=function(R,e,k,A){var l,T,x,d=[],s=!!k.smoothing,t=!!A.smoothing,o=R[0].length-1,r=R.length-1;for(l=0,T=[],x=[];l<=o;l++)T[l]=R[0][l],x[l]=e[0][l];for(d.push({x:T,y:x,bicubic:s}),l=0,T=[],x=[];l<=r;l++)T[l]=R[l][o],x[l]=e[l][o];for(d.push({x:T,y:x,bicubic:t}),l=o,T=[],x=[];l>=0;l--)T[o-l]=R[r][l],x[o-l]=e[r][l];for(d.push({x:T,y:x,bicubic:s}),l=r,T=[],x=[];l>=0;l--)T[r-l]=R[l][0],x[r-l]=e[l][0];return d.push({x:T,y:x,bicubic:t}),d}},20347:function($,R,e){var k=e(89298),A=e(1426).extendFlat;$.exports=function(l,T,x){var d,s,t,o,r,n,a,i,c,h,f,b,v,g,y=l["_"+T],p=l[T+"axis"],m=p._gridlines=[],w=p._minorgridlines=[],u=p._boundarylines=[],S=l["_"+x],_=l[x+"axis"];p.tickmode==="array"&&(p.tickvals=y.slice());var E=l._xctrl,L=l._yctrl,C=E[0].length,P=E.length,I=l._a.length,U=l._b.length;k.prepTicks(p),p.tickmode==="array"&&delete p.tickvals;var z=p.smoothing?3:1;function H(N){var B,j,K,G,V,W,J,X,ee,re,ie,se,fe=[],ye=[],ge={};if(T==="b")for(j=l.b2j(N),K=Math.floor(Math.max(0,Math.min(U-2,j))),G=j-K,ge.length=U,ge.crossLength=I,ge.xy=function(he){return l.evalxy([],he,j)},ge.dxy=function(he,ve){return l.dxydi([],he,K,ve,G)},B=0;B<I;B++)W=Math.min(I-2,B),J=B-W,X=l.evalxy([],B,j),_.smoothing&&B>0&&(ee=l.dxydi([],B-1,K,0,G),fe.push(V[0]+ee[0]/3),ye.push(V[1]+ee[1]/3),re=l.dxydi([],B-1,K,1,G),fe.push(X[0]-re[0]/3),ye.push(X[1]-re[1]/3)),fe.push(X[0]),ye.push(X[1]),V=X;else for(B=l.a2i(N),W=Math.floor(Math.max(0,Math.min(I-2,B))),J=B-W,ge.length=I,ge.crossLength=U,ge.xy=function(he){return l.evalxy([],B,he)},ge.dxy=function(he,ve){return l.dxydj([],W,he,J,ve)},j=0;j<U;j++)K=Math.min(U-2,j),G=j-K,X=l.evalxy([],B,j),_.smoothing&&j>0&&(ie=l.dxydj([],W,j-1,J,0),fe.push(V[0]+ie[0]/3),ye.push(V[1]+ie[1]/3),se=l.dxydj([],W,j-1,J,1),fe.push(X[0]-se[0]/3),ye.push(X[1]-se[1]/3)),fe.push(X[0]),ye.push(X[1]),V=X;return ge.axisLetter=T,ge.axis=p,ge.crossAxis=_,ge.value=N,ge.constvar=x,ge.index=i,ge.x=fe,ge.y=ye,ge.smoothing=_.smoothing,ge}function F(N){var B,j,K,G,V,W=[],J=[],X={};if(X.length=y.length,X.crossLength=S.length,T==="b")for(K=Math.max(0,Math.min(U-2,N)),V=Math.min(1,Math.max(0,N-K)),X.xy=function(ee){return l.evalxy([],ee,N)},X.dxy=function(ee,re){return l.dxydi([],ee,K,re,V)},B=0;B<C;B++)W[B]=E[N*z][B],J[B]=L[N*z][B];else for(j=Math.max(0,Math.min(I-2,N)),G=Math.min(1,Math.max(0,N-j)),X.xy=function(ee){return l.evalxy([],N,ee)},X.dxy=function(ee,re){return l.dxydj([],j,ee,G,re)},B=0;B<P;B++)W[B]=E[B][N*z],J[B]=L[B][N*z];return X.axisLetter=T,X.axis=p,X.crossAxis=_,X.value=y[N],X.constvar=x,X.index=N,X.x=W,X.y=J,X.smoothing=_.smoothing,X}if(p.tickmode==="array"){for(o=5e-15,n=(r=[Math.floor((y.length-1-p.arraytick0)/p.arraydtick*(1+o)),Math.ceil(-p.arraytick0/p.arraydtick/(1+o))].sort(function(N,B){return N-B}))[0]-1,a=r[1]+1,i=n;i<a;i++)(s=p.arraytick0+p.arraydtick*i)<0||s>y.length-1||m.push(A(F(s),{color:p.gridcolor,width:p.gridwidth,dash:p.griddash}));for(i=n;i<a;i++)if(t=p.arraytick0+p.arraydtick*i,f=Math.min(t+p.arraydtick,y.length-1),!(t<0||t>y.length-1||f<0||f>y.length-1))for(b=y[t],v=y[f],d=0;d<p.minorgridcount;d++)(g=f-t)<=0||(h=b+(v-b)*(d+1)/(p.minorgridcount+1)*(p.arraydtick/g))<y[0]||h>y[y.length-1]||w.push(A(H(h),{color:p.minorgridcolor,width:p.minorgridwidth,dash:p.minorgriddash}));p.startline&&u.push(A(F(0),{color:p.startlinecolor,width:p.startlinewidth})),p.endline&&u.push(A(F(y.length-1),{color:p.endlinecolor,width:p.endlinewidth}))}else{for(o=5e-15,n=(r=[Math.floor((y[y.length-1]-p.tick0)/p.dtick*(1+o)),Math.ceil((y[0]-p.tick0)/p.dtick/(1+o))].sort(function(N,B){return N-B}))[0],a=r[1],i=n;i<=a;i++)c=p.tick0+p.dtick*i,m.push(A(H(c),{color:p.gridcolor,width:p.gridwidth,dash:p.griddash}));for(i=n-1;i<a+1;i++)for(c=p.tick0+p.dtick*i,d=0;d<p.minorgridcount;d++)(h=c+p.dtick*(d+1)/(p.minorgridcount+1))<y[0]||h>y[y.length-1]||w.push(A(H(h),{color:p.minorgridcolor,width:p.minorgridwidth,dash:p.minorgriddash}));p.startline&&u.push(A(H(y[0]),{color:p.startlinecolor,width:p.startlinewidth})),p.endline&&u.push(A(H(y[y.length-1]),{color:p.endlinecolor,width:p.endlinewidth}))}}},83311:function($,R,e){var k=e(89298),A=e(1426).extendFlat;$.exports=function(l,T){var x,d,s,t=T._labels=[],o=T._gridlines;for(x=0;x<o.length;x++)s=o[x],["start","both"].indexOf(T.showticklabels)!==-1&&(d=k.tickText(T,s.value),A(d,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:x===0,isLast:x===o.length-1}),t.push(d)),["end","both"].indexOf(T.showticklabels)!==-1&&(d=k.tickText(T,s.value),A(d,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:x===0,isLast:x===o.length-1}),t.push(d))}},42048:function($){$.exports=function(R,e,k,A){var l=R[0]-e[0],T=R[1]-e[1],x=k[0]-e[0],d=k[1]-e[1],s=Math.pow(l*l+T*T,.25),t=Math.pow(x*x+d*d,.25),o=(t*t*l-s*s*x)*A,r=(t*t*T-s*s*d)*A,n=t*(s+t)*3,a=s*(s+t)*3;return[[e[0]+(n&&o/n),e[1]+(n&&r/n)],[e[0]-(a&&o/a),e[1]-(a&&r/a)]]}},53824:function($,R,e){var k=e(71828).isArrayOrTypedArray;$.exports=function(A,l,T){var x,d,s,t,o,r,n=[],a=k(A)?A.length:A,i=k(l)?l.length:l,c=k(A)?A:null,h=k(l)?l:null;c&&(s=(c.length-1)/(c[c.length-1]-c[0])/(a-1)),h&&(t=(h.length-1)/(h[h.length-1]-h[0])/(i-1));var f=1/0,b=-1/0;for(d=0;d<i;d++)for(n[d]=[],o=h?(h[d]-h[0])*t:d/(i-1),x=0;x<a;x++)r=(c?(c[x]-c[0])*s:x/(a-1))-o*T,f=Math.min(r,f),b=Math.max(r,b),n[d][x]=r;var v=1/(b-f),g=-f*v;for(d=0;d<i;d++)for(x=0;x<a;x++)n[d][x]=v*n[d][x]+g;return n}},45664:function($,R,e){var k=e(42048),A=e(71828).ensureArray;function l(T,x,d){var s=-.5*d[0]+1.5*x[0],t=-.5*d[1]+1.5*x[1];return[(2*s+T[0])/3,(2*t+T[1])/3]}$.exports=function(T,x,d,s,t,o){var r,n,a,i,c,h,f,b,v,g,y=d[0].length,p=d.length,m=t?3*y-2:y,w=o?3*p-2:p;for(T=A(T,w),x=A(x,w),a=0;a<w;a++)T[a]=A(T[a],m),x[a]=A(x[a],m);for(n=0,i=0;n<p;n++,i+=o?3:1)for(c=T[i],h=x[i],f=d[n],b=s[n],r=0,a=0;r<y;r++,a+=t?3:1)c[a]=f[r],h[a]=b[r];if(t)for(n=0,i=0;n<p;n++,i+=o?3:1){for(r=1,a=3;r<y-1;r++,a+=3)v=k([d[n][r-1],s[n][r-1]],[d[n][r],s[n][r]],[d[n][r+1],s[n][r+1]],t),T[i][a-1]=v[0][0],x[i][a-1]=v[0][1],T[i][a+1]=v[1][0],x[i][a+1]=v[1][1];g=l([T[i][0],x[i][0]],[T[i][2],x[i][2]],[T[i][3],x[i][3]]),T[i][1]=g[0],x[i][1]=g[1],g=l([T[i][m-1],x[i][m-1]],[T[i][m-3],x[i][m-3]],[T[i][m-4],x[i][m-4]]),T[i][m-2]=g[0],x[i][m-2]=g[1]}if(o)for(a=0;a<m;a++){for(i=3;i<w-3;i+=3)v=k([T[i-3][a],x[i-3][a]],[T[i][a],x[i][a]],[T[i+3][a],x[i+3][a]],o),T[i-1][a]=v[0][0],x[i-1][a]=v[0][1],T[i+1][a]=v[1][0],x[i+1][a]=v[1][1];g=l([T[0][a],x[0][a]],[T[2][a],x[2][a]],[T[3][a],x[3][a]]),T[1][a]=g[0],x[1][a]=g[1],g=l([T[w-1][a],x[w-1][a]],[T[w-3][a],x[w-3][a]],[T[w-4][a],x[w-4][a]]),T[w-2][a]=g[0],x[w-2][a]=g[1]}if(t&&o)for(i=1;i<w;i+=(i+1)%3==0?2:1){for(a=3;a<m-3;a+=3)v=k([T[i][a-3],x[i][a-3]],[T[i][a],x[i][a]],[T[i][a+3],x[i][a+3]],t),T[i][a-1]=.5*(T[i][a-1]+v[0][0]),x[i][a-1]=.5*(x[i][a-1]+v[0][1]),T[i][a+1]=.5*(T[i][a+1]+v[1][0]),x[i][a+1]=.5*(x[i][a+1]+v[1][1]);g=l([T[i][0],x[i][0]],[T[i][2],x[i][2]],[T[i][3],x[i][3]]),T[i][1]=.5*(T[i][1]+g[0]),x[i][1]=.5*(x[i][1]+g[1]),g=l([T[i][m-1],x[i][m-1]],[T[i][m-3],x[i][m-3]],[T[i][m-4],x[i][m-4]]),T[i][m-2]=.5*(T[i][m-2]+g[0]),x[i][m-2]=.5*(x[i][m-2]+g[1])}return[T,x]}},35509:function($){$.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function($){$.exports=function(R,e,k){return e&&k?function(A,l,T,x,d){var s,t,o,r,n,a;A||(A=[]),l*=3,T*=3;var i=x*x,c=1-x,h=c*c,f=c*x*2,b=-3*h,v=3*(h-f),g=3*(f-i),y=3*i,p=d*d,m=p*d,w=1-d,u=w*w,S=u*w;for(a=0;a<R.length;a++)s=b*(n=R[a])[T][l]+v*n[T][l+1]+g*n[T][l+2]+y*n[T][l+3],t=b*n[T+1][l]+v*n[T+1][l+1]+g*n[T+1][l+2]+y*n[T+1][l+3],o=b*n[T+2][l]+v*n[T+2][l+1]+g*n[T+2][l+2]+y*n[T+2][l+3],r=b*n[T+3][l]+v*n[T+3][l+1]+g*n[T+3][l+2]+y*n[T+3][l+3],A[a]=S*s+3*(u*d*t+w*p*o)+m*r;return A}:e?function(A,l,T,x,d){var s,t,o,r;A||(A=[]),l*=3;var n=x*x,a=1-x,i=a*a,c=a*x*2,h=-3*i,f=3*(i-c),b=3*(c-n),v=3*n,g=1-d;for(o=0;o<R.length;o++)s=h*(r=R[o])[T][l]+f*r[T][l+1]+b*r[T][l+2]+v*r[T][l+3],t=h*r[T+1][l]+f*r[T+1][l+1]+b*r[T+1][l+2]+v*r[T+1][l+3],A[o]=g*s+d*t;return A}:k?function(A,l,T,x,d){var s,t,o,r,n,a;A||(A=[]),T*=3;var i=d*d,c=i*d,h=1-d,f=h*h,b=f*h;for(n=0;n<R.length;n++)s=(a=R[n])[T][l+1]-a[T][l],t=a[T+1][l+1]-a[T+1][l],o=a[T+2][l+1]-a[T+2][l],r=a[T+3][l+1]-a[T+3][l],A[n]=b*s+3*(f*d*t+h*i*o)+c*r;return A}:function(A,l,T,x,d){var s,t,o,r;A||(A=[]);var n=1-d;for(o=0;o<R.length;o++)s=(r=R[o])[T][l+1]-r[T][l],t=r[T+1][l+1]-r[T+1][l],A[o]=n*s+d*t;return A}}},73057:function($){$.exports=function(R,e,k){return e&&k?function(A,l,T,x,d){var s,t,o,r,n,a;A||(A=[]),l*=3,T*=3;var i=x*x,c=i*x,h=1-x,f=h*h,b=f*h,v=d*d,g=1-d,y=g*g,p=g*d*2,m=-3*y,w=3*(y-p),u=3*(p-v),S=3*v;for(a=0;a<R.length;a++)s=m*(n=R[a])[T][l]+w*n[T+1][l]+u*n[T+2][l]+S*n[T+3][l],t=m*n[T][l+1]+w*n[T+1][l+1]+u*n[T+2][l+1]+S*n[T+3][l+1],o=m*n[T][l+2]+w*n[T+1][l+2]+u*n[T+2][l+2]+S*n[T+3][l+2],r=m*n[T][l+3]+w*n[T+1][l+3]+u*n[T+2][l+3]+S*n[T+3][l+3],A[a]=b*s+3*(f*x*t+h*i*o)+c*r;return A}:e?function(A,l,T,x,d){var s,t,o,r,n,a;A||(A=[]),l*=3;var i=d*d,c=i*d,h=1-d,f=h*h,b=f*h;for(n=0;n<R.length;n++)s=(a=R[n])[T+1][l]-a[T][l],t=a[T+1][l+1]-a[T][l+1],o=a[T+1][l+2]-a[T][l+2],r=a[T+1][l+3]-a[T][l+3],A[n]=b*s+3*(f*d*t+h*i*o)+c*r;return A}:k?function(A,l,T,x,d){var s,t,o,r;A||(A=[]),T*=3;var n=1-x,a=d*d,i=1-d,c=i*i,h=i*d*2,f=-3*c,b=3*(c-h),v=3*(h-a),g=3*a;for(o=0;o<R.length;o++)s=f*(r=R[o])[T][l]+b*r[T+1][l]+v*r[T+2][l]+g*r[T+3][l],t=f*r[T][l+1]+b*r[T+1][l+1]+v*r[T+2][l+1]+g*r[T+3][l+1],A[o]=n*s+x*t;return A}:function(A,l,T,x,d){var s,t,o,r;A||(A=[]);var n=1-x;for(o=0;o<R.length;o++)s=(r=R[o])[T+1][l]-r[T][l],t=r[T+1][l+1]-r[T][l+1],A[o]=n*s+x*t;return A}}},20349:function($){$.exports=function(R,e,k,A,l){var T=e-2,x=k-2;return A&&l?function(d,s,t){var o,r,n,a,i,c;d||(d=[]);var h=Math.max(0,Math.min(Math.floor(s),T)),f=Math.max(0,Math.min(Math.floor(t),x)),b=Math.max(0,Math.min(1,s-h)),v=Math.max(0,Math.min(1,t-f));h*=3,f*=3;var g=b*b,y=g*b,p=1-b,m=p*p,w=m*p,u=v*v,S=u*v,_=1-v,E=_*_,L=E*_;for(c=0;c<R.length;c++)o=w*(i=R[c])[f][h]+3*(m*b*i[f][h+1]+p*g*i[f][h+2])+y*i[f][h+3],r=w*i[f+1][h]+3*(m*b*i[f+1][h+1]+p*g*i[f+1][h+2])+y*i[f+1][h+3],n=w*i[f+2][h]+3*(m*b*i[f+2][h+1]+p*g*i[f+2][h+2])+y*i[f+2][h+3],a=w*i[f+3][h]+3*(m*b*i[f+3][h+1]+p*g*i[f+3][h+2])+y*i[f+3][h+3],d[c]=L*o+3*(E*v*r+_*u*n)+S*a;return d}:A?function(d,s,t){d||(d=[]);var o,r,n,a,i,c,h=Math.max(0,Math.min(Math.floor(s),T)),f=Math.max(0,Math.min(Math.floor(t),x)),b=Math.max(0,Math.min(1,s-h)),v=Math.max(0,Math.min(1,t-f));h*=3;var g=b*b,y=g*b,p=1-b,m=p*p,w=m*p,u=1-v;for(i=0;i<R.length;i++)o=u*(c=R[i])[f][h]+v*c[f+1][h],r=u*c[f][h+1]+v*c[f+1][h+1],n=u*c[f][h+2]+v*c[f+1][h+1],a=u*c[f][h+3]+v*c[f+1][h+1],d[i]=w*o+3*(m*b*r+p*g*n)+y*a;return d}:l?function(d,s,t){d||(d=[]);var o,r,n,a,i,c,h=Math.max(0,Math.min(Math.floor(s),T)),f=Math.max(0,Math.min(Math.floor(t),x)),b=Math.max(0,Math.min(1,s-h)),v=Math.max(0,Math.min(1,t-f));f*=3;var g=v*v,y=g*v,p=1-v,m=p*p,w=m*p,u=1-b;for(i=0;i<R.length;i++)o=u*(c=R[i])[f][h]+b*c[f][h+1],r=u*c[f+1][h]+b*c[f+1][h+1],n=u*c[f+2][h]+b*c[f+2][h+1],a=u*c[f+3][h]+b*c[f+3][h+1],d[i]=w*o+3*(m*v*r+p*g*n)+y*a;return d}:function(d,s,t){d||(d=[]);var o,r,n,a,i=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),x)),h=Math.max(0,Math.min(1,s-i)),f=Math.max(0,Math.min(1,t-c)),b=1-f,v=1-h;for(n=0;n<R.length;n++)o=v*(a=R[n])[c][i]+h*a[c][i+1],r=v*a[c+1][i]+h*a[c+1][i+1],d[n]=b*o+f*r;return d}}},92087:function($,R,e){var k=e(71828),A=e(19237),l=e(13145),T=e(99798),x=e(22399);$.exports=function(d,s,t,o){function r(a,i){return k.coerce(d,s,T,a,i)}s._clipPathId="clip"+s.uid+"carpet";var n=r("color",x.defaultLine);k.coerceFont(r,"font"),r("carpet"),l(d,s,o,r,n),s.a&&s.b?(s.a.length<3&&(s.aaxis.smoothing=0),s.b.length<3&&(s.baxis.smoothing=0),A(d,s,r)||(s.visible=!1),s._cheater&&r("cheaterslope")):s.visible=!1}},21462:function($,R,e){$.exports={attributes:e(99798),supplyDefaults:e(92087),plot:e(89740),calc:e(25281),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function($){$.exports=function(R,e){for(var k,A=R._fullData.length,l=0;l<A;l++){var T=R._fullData[l];if(T.index!==e.index&&T.type==="carpet"&&(k||(k=T),T.carpet===e.carpet))return T}return k}},67961:function($){$.exports=function(R,e,k){if(R.length===0)return"";var A,l=[],T=k?3:1;for(A=0;A<R.length;A+=T)l.push(R[A]+","+e[A]),k&&A<R.length-T&&(l.push("C"),l.push([R[A+1]+","+e[A+1],R[A+2]+","+e[A+2]+" "].join(" ")));return l.join(k?"":"L")}},27669:function($,R,e){var k=e(71828).isArrayOrTypedArray;$.exports=function(A,l,T){var x;for(k(A)?A.length>l.length&&(A=A.slice(0,l.length)):A=[],x=0;x<l.length;x++)A[x]=T(l[x]);return A}},11651:function($){$.exports=function(R,e,k,A,l,T){var x=l[0]*R.dpdx(e),d=l[1]*R.dpdy(k),s=1,t=1;if(T){var o=Math.sqrt(l[0]*l[0]+l[1]*l[1]),r=Math.sqrt(T[0]*T[0]+T[1]*T[1]),n=(l[0]*T[0]+l[1]*T[1])/o/r;t=Math.max(0,n)}var a=180*Math.atan2(d,x)/Math.PI;return a<-90?(a+=180,s=-s):a>90&&(a-=180,s=-s),{angle:a,flip:s,p:R.c2p(A,e,k),offsetMultplier:t}}},89740:function($,R,e){var k=e(39898),A=e(91424),l=e(27669),T=e(67961),x=e(11651),d=e(63893),s=e(71828),t=s.strRotate,o=s.strTranslate,r=e(18783);function n(f,b,v,g,y,p){var m="const-"+y+"-lines",w=v.selectAll("."+m).data(p);w.enter().append("path").classed(m,!0).style("vector-effect","non-scaling-stroke"),w.each(function(u){var S=u,_=S.x,E=S.y,L=l([],_,f.c2p),C=l([],E,b.c2p),P="M"+T(L,C,S.smoothing);k.select(this).attr("d",P).style("stroke-width",S.width).style("stroke",S.color).style("stroke-dasharray",A.dashStyle(S.dash,S.width)).style("fill","none")}),w.exit().remove()}function a(f,b,v,g,y,p,m,w){var u=p.selectAll("text."+w).data(m);u.enter().append("text").classed(w,!0);var S=0,_={};return u.each(function(E,L){var C;if(E.axis.tickangle==="auto")C=x(g,b,v,E.xy,E.dxy);else{var P=(E.axis.tickangle+180)*Math.PI/180;C=x(g,b,v,E.xy,[Math.cos(P),Math.sin(P)])}L||(_={angle:C.angle,flip:C.flip});var I=(E.endAnchor?-1:1)*C.flip,U=k.select(this).attr({"text-anchor":I>0?"start":"end","data-notex":1}).call(A.font,E.font).text(E.text).call(d.convertToTspans,f),z=A.bBox(this);U.attr("transform",o(C.p[0],C.p[1])+t(C.angle)+o(E.axis.labelpadding*I,.3*z.height)),S=Math.max(S,z.width+E.axis.labelpadding)}),u.exit().remove(),_.maxExtent=S,_}$.exports=function(f,b,v,g){var y=b.xaxis,p=b.yaxis,m=f._fullLayout._clips;s.makeTraceGroups(g,v,"trace").each(function(w){var u=k.select(this),S=w[0],_=S.trace,E=_.aaxis,L=_.baxis,C=s.ensureSingle(u,"g","minorlayer"),P=s.ensureSingle(u,"g","majorlayer"),I=s.ensureSingle(u,"g","boundarylayer"),U=s.ensureSingle(u,"g","labellayer");u.style("opacity",_.opacity),n(y,p,P,0,"a",E._gridlines),n(y,p,P,0,"b",L._gridlines),n(y,p,C,0,"a",E._minorgridlines),n(y,p,C,0,"b",L._minorgridlines),n(y,p,I,0,"a-boundary",E._boundarylines),n(y,p,I,0,"b-boundary",L._boundarylines);var z=a(f,y,p,_,0,U,E._labels,"a-label"),H=a(f,y,p,_,0,U,L._labels,"b-label");(function(F,N,B,j,K,G,V,W){var J,X,ee,re,ie=s.aggNums(Math.min,null,B.a),se=s.aggNums(Math.max,null,B.a),fe=s.aggNums(Math.min,null,B.b),ye=s.aggNums(Math.max,null,B.b);J=.5*(ie+se),X=fe,ee=B.ab2xy(J,X,!0),re=B.dxyda_rough(J,X),V.angle===void 0&&s.extendFlat(V,x(B,K,G,ee,B.dxydb_rough(J,X))),h(F,N,B,0,ee,re,B.aaxis,K,G,V,"a-title"),J=ie,X=.5*(fe+ye),ee=B.ab2xy(J,X,!0),re=B.dxydb_rough(J,X),W.angle===void 0&&s.extendFlat(W,x(B,K,G,ee,B.dxyda_rough(J,X))),h(F,N,B,0,ee,re,B.baxis,K,G,W,"b-title")})(f,U,_,0,y,p,z,H),function(F,N,B,j,K){var G,V,W,J,X=B.select("#"+F._clipPathId);X.size()||(X=B.append("clipPath").classed("carpetclip",!0));var ee=s.ensureSingle(X,"path","carpetboundary"),re=N.clipsegments,ie=[];for(J=0;J<re.length;J++)G=re[J],V=l([],G.x,j.c2p),W=l([],G.y,K.c2p),ie.push(T(V,W,G.bicubic));var se="M"+ie.join("L")+"Z";X.attr("id",F._clipPathId),ee.attr("d",se)}(_,S,m,y,p)})};var i=r.LINE_SPACING,c=(1-r.MID_SHIFT)/i+1;function h(f,b,v,g,y,p,m,w,u,S,_){var E=[];m.title.text&&E.push(m.title.text);var L=b.selectAll("text."+_).data(E),C=S.maxExtent;L.enter().append("text").classed(_,!0),L.each(function(){var P=x(v,w,u,y,p);["start","both"].indexOf(m.showticklabels)===-1&&(C=0);var I=m.title.font.size;C+=I+m.title.offset;var U=(S.angle+(S.flip<0?180:0)-P.angle+450)%360,z=U>90&&U<270,H=k.select(this);H.text(m.title.text).call(d.convertToTspans,f),z&&(C=(-d.lineCount(H)+c)*i*I-C),H.attr("transform",o(P.p[0],P.p[1])+t(P.angle)+o(0,C)).attr("text-anchor","middle").call(A.font,m.title.font)}),L.exit().remove()}},11435:function($,R,e){var k=e(35509),A=e(65888).findBin,l=e(45664),T=e(20349),x=e(54495),d=e(73057);$.exports=function(s){var t=s._a,o=s._b,r=t.length,n=o.length,a=s.aaxis,i=s.baxis,c=t[0],h=t[r-1],f=o[0],b=o[n-1],v=t[t.length-1]-t[0],g=o[o.length-1]-o[0],y=v*k.RELATIVE_CULL_TOLERANCE,p=g*k.RELATIVE_CULL_TOLERANCE;c-=y,h+=y,f-=p,b+=p,s.isVisible=function(m,w){return m>c&&m<h&&w>f&&w<b},s.isOccluded=function(m,w){return m<c||m>h||w<f||w>b},s.setScale=function(){var m=s._x,w=s._y,u=l(s._xctrl,s._yctrl,m,w,a.smoothing,i.smoothing);s._xctrl=u[0],s._yctrl=u[1],s.evalxy=T([s._xctrl,s._yctrl],r,n,a.smoothing,i.smoothing),s.dxydi=x([s._xctrl,s._yctrl],a.smoothing,i.smoothing),s.dxydj=d([s._xctrl,s._yctrl],a.smoothing,i.smoothing)},s.i2a=function(m){var w=Math.max(0,Math.floor(m[0]),r-2),u=m[0]-w;return(1-u)*t[w]+u*t[w+1]},s.j2b=function(m){var w=Math.max(0,Math.floor(m[1]),r-2),u=m[1]-w;return(1-u)*o[w]+u*o[w+1]},s.ij2ab=function(m){return[s.i2a(m[0]),s.j2b(m[1])]},s.a2i=function(m){var w=Math.max(0,Math.min(A(m,t),r-2)),u=t[w],S=t[w+1];return Math.max(0,Math.min(r-1,w+(m-u)/(S-u)))},s.b2j=function(m){var w=Math.max(0,Math.min(A(m,o),n-2)),u=o[w],S=o[w+1];return Math.max(0,Math.min(n-1,w+(m-u)/(S-u)))},s.ab2ij=function(m){return[s.a2i(m[0]),s.b2j(m[1])]},s.i2c=function(m,w){return s.evalxy([],m,w)},s.ab2xy=function(m,w,u){if(!u&&(m<t[0]||m>t[r-1]|w<o[0]||w>o[n-1]))return[!1,!1];var S=s.a2i(m),_=s.b2j(w),E=s.evalxy([],S,_);if(u){var L,C,P,I,U=0,z=0,H=[];m<t[0]?(L=0,C=0,U=(m-t[0])/(t[1]-t[0])):m>t[r-1]?(L=r-2,C=1,U=(m-t[r-1])/(t[r-1]-t[r-2])):C=S-(L=Math.max(0,Math.min(r-2,Math.floor(S)))),w<o[0]?(P=0,I=0,z=(w-o[0])/(o[1]-o[0])):w>o[n-1]?(P=n-2,I=1,z=(w-o[n-1])/(o[n-1]-o[n-2])):I=_-(P=Math.max(0,Math.min(n-2,Math.floor(_)))),U&&(s.dxydi(H,L,P,C,I),E[0]+=H[0]*U,E[1]+=H[1]*U),z&&(s.dxydj(H,L,P,C,I),E[0]+=H[0]*z,E[1]+=H[1]*z)}return E},s.c2p=function(m,w,u){return[w.c2p(m[0]),u.c2p(m[1])]},s.p2x=function(m,w,u){return[w.p2c(m[0]),u.p2c(m[1])]},s.dadi=function(m){var w=Math.max(0,Math.min(t.length-2,m));return t[w+1]-t[w]},s.dbdj=function(m){var w=Math.max(0,Math.min(o.length-2,m));return o[w+1]-o[w]},s.dxyda=function(m,w,u,S){var _=s.dxydi(null,m,w,u,S),E=s.dadi(m,u);return[_[0]/E,_[1]/E]},s.dxydb=function(m,w,u,S){var _=s.dxydj(null,m,w,u,S),E=s.dbdj(w,S);return[_[0]/E,_[1]/E]},s.dxyda_rough=function(m,w,u){var S=v*(u||.1),_=s.ab2xy(m+S,w,!0),E=s.ab2xy(m-S,w,!0);return[.5*(_[0]-E[0])/S,.5*(_[1]-E[1])/S]},s.dxydb_rough=function(m,w,u){var S=g*(u||.1),_=s.ab2xy(m,w+S,!0),E=s.ab2xy(m,w-S,!0);return[.5*(_[0]-E[0])/S,.5*(_[1]-E[1])/S]},s.dpdx=function(m){return m._m},s.dpdy=function(m){return m._m}}},72505:function($,R,e){var k=e(71828);$.exports=function(A,l,T){var x,d,s,t=[],o=[],r=A[0].length,n=A.length;function a(N,B){var j,K=0,G=0;return N>0&&(j=A[B][N-1])!==void 0&&(G++,K+=j),N<r-1&&(j=A[B][N+1])!==void 0&&(G++,K+=j),B>0&&(j=A[B-1][N])!==void 0&&(G++,K+=j),B<n-1&&(j=A[B+1][N])!==void 0&&(G++,K+=j),K/Math.max(1,G)}var i,c,h,f,b,v,g,y,p,m,w,u=0;for(x=0;x<r;x++)for(d=0;d<n;d++)A[d][x]===void 0&&(t.push(x),o.push(d),A[d][x]=a(x,d)),u=Math.max(u,Math.abs(A[d][x]));if(!t.length)return A;var S=0,_=0,E=t.length;do{for(S=0,s=0;s<E;s++){x=t[s],d=o[s];var L,C,P,I,U,z,H=0,F=0;x===0?(P=l[U=Math.min(r-1,2)],I=l[1],L=A[d][U],F+=(C=A[d][1])+(C-L)*(l[0]-I)/(I-P),H++):x===r-1&&(P=l[U=Math.max(0,r-3)],I=l[r-2],L=A[d][U],F+=(C=A[d][r-2])+(C-L)*(l[r-1]-I)/(I-P),H++),(x===0||x===r-1)&&d>0&&d<n-1&&(i=T[d+1]-T[d],F+=((c=T[d]-T[d-1])*A[d+1][x]+i*A[d-1][x])/(c+i),H++),d===0?(P=T[z=Math.min(n-1,2)],I=T[1],L=A[z][x],F+=(C=A[1][x])+(C-L)*(T[0]-I)/(I-P),H++):d===n-1&&(P=T[z=Math.max(0,n-3)],I=T[n-2],L=A[z][x],F+=(C=A[n-2][x])+(C-L)*(T[n-1]-I)/(I-P),H++),(d===0||d===n-1)&&x>0&&x<r-1&&(i=l[x+1]-l[x],F+=((c=l[x]-l[x-1])*A[d][x+1]+i*A[d][x-1])/(c+i),H++),H?F/=H:(h=l[x+1]-l[x],f=l[x]-l[x-1],y=(b=T[d+1]-T[d])*(v=T[d]-T[d-1])*(b+v),F=((g=h*f*(h+f))*(v*A[d+1][x]+b*A[d-1][x])+y*(f*A[d][x+1]+h*A[d][x-1]))/(y*(f+h)+g*(v+b))),S+=(m=(p=F-A[d][x])/u)*m,w=H?0:.85,A[d][x]+=p*(1+w)}S=Math.sqrt(S)}while(_++<100&&S>1e-5);return k.log("Smoother converged to",S,"after",_,"iterations"),A}},19237:function($,R,e){var k=e(71828).isArray1D;$.exports=function(A,l,T){var x=T("x"),d=x&&x.length,s=T("y"),t=s&&s.length;if(!d&&!t)return!1;if(l._cheater=!x,d&&!k(x)||t&&!k(s))l._length=null;else{var o=d?x.length:1/0;t&&(o=Math.min(o,s.length)),l.a&&l.a.length&&(o=Math.min(o,l.a.length)),l.b&&l.b.length&&(o=Math.min(o,l.b.length)),l._length=o}return!0}},69568:function($,R,e){var k=e(5386).f,A=e(19316),l=e(50693),T=e(9012),x=e(22399).defaultLine,d=e(1426).extendFlat,s=A.marker.line;$.exports=d({locations:{valType:"data_array",editType:"calc"},locationmode:A.locationmode,z:{valType:"data_array",editType:"calc"},geojson:d({},A.geojson,{}),featureidkey:A.featureidkey,text:d({},A.text,{}),hovertext:d({},A.hovertext,{}),marker:{line:{color:d({},s.color,{dflt:x}),width:d({},s.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:A.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:A.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:d({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:k(),showlegend:d({},T.showlegend,{dflt:!1})},l("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function($,R,e){var k=e(92770),A=e(50606).BADNUM,l=e(78803),T=e(75225),x=e(66279);function d(s){return s&&typeof s=="string"}$.exports=function(s,t){var o,r=t._length,n=new Array(r);o=t.geojson?function(f){return d(f)||k(f)}:d;for(var a=0;a<r;a++){var i=n[a]={},c=t.locations[a],h=t.z[a];o(c)&&k(h)?(i.loc=c,i.z=h):(i.loc=null,i.z=A),i.index=a}return T(n,t),l(s,t,{vals:t.z,containerStr:"",cLetter:"z"}),x(n,t),n}},61869:function($,R,e){var k=e(71828),A=e(1586),l=e(69568);$.exports=function(T,x,d,s){function t(i,c){return k.coerce(T,x,l,i,c)}var o=t("locations"),r=t("z");if(o&&o.length&&k.isArrayOrTypedArray(r)&&r.length){x._length=Math.min(o.length,r.length);var n,a=t("geojson");(typeof a=="string"&&a!==""||k.isPlainObject(a))&&(n="geojson-id"),t("locationmode",n)==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),A(T,x,s,t,{prefix:"",cLetter:"z"}),k.coerceSelectionMarkerOpacity(x,t)}else x.visible=!1}},92069:function($){$.exports=function(R,e,k,A,l){R.location=e.location,R.z=e.z;var T=A[l];return T.fIn&&T.fIn.properties&&(R.properties=T.fIn.properties),R.ct=T.ct,R}},42300:function($,R,e){var k=e(89298),A=e(69568),l=e(71828).fillText;$.exports=function(T,x,d){var s,t,o,r,n=T.cd,a=n[0].trace,i=T.subplot,c=[x,d],h=[x+360,d];for(t=0;t<n.length;t++)if(r=!1,(s=n[t])._polygons){for(o=0;o<s._polygons.length;o++)s._polygons[o].contains(c)&&(r=!r),s._polygons[o].contains(h)&&(r=!r);if(r)break}if(r&&s)return T.x0=T.x1=T.xa.c2p(s.ct),T.y0=T.y1=T.ya.c2p(s.ct),T.index=s.index,T.location=s.loc,T.z=s.z,T.zLabel=k.tickText(i.mockAxis,i.mockAxis.c2l(s.z),"hover").text,T.hovertemplate=s.hovertemplate,function(f,b,v){if(!b.hovertemplate){var g=v.hi||b.hoverinfo,y=String(v.loc),p=g==="all"?A.hoverinfo.flags:g.split("+"),m=p.indexOf("name")!==-1,w=p.indexOf("location")!==-1,u=p.indexOf("z")!==-1,S=p.indexOf("text")!==-1,_=[];!m&&w?f.nameOverride=y:(m&&(f.nameOverride=b.name),w&&_.push(y)),u&&_.push(f.zLabel),S&&l(v,b,_),f.extraText=_.join("<br>")}}(T,a,s),[T]}},51319:function($,R,e){$.exports={attributes:e(69568),supplyDefaults:e(61869),colorbar:e(61243),calc:e(38675),calcGeoJSON:e(99841).calcGeoJSON,plot:e(99841).plot,style:e(99636).style,styleOnSelect:e(99636).styleOnSelect,hoverPoints:e(42300),eventData:e(92069),selectPoints:e(81253),moduleType:"trace",name:"choropleth",basePlotModule:e(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function($,R,e){var k=e(39898),A=e(71828),l=e(41327),T=e(90973).getTopojsonFeatures,x=e(71739).findExtremes,d=e(99636).style;$.exports={calcGeoJSON:function(s,t){for(var o=s[0].trace,r=t[o.geo],n=r._subplot,a=o.locationmode,i=o._length,c=a==="geojson-id"?l.extractTraceFeature(s):T(o,n.topojson),h=[],f=[],b=0;b<i;b++){var v=s[b],g=a==="geojson-id"?v.fOut:l.locationToFeature(a,v.loc,c);if(g){v.geojson=g,v.ct=g.properties.ct,v._polygons=l.feature2polygons(g);var y=l.computeBbox(g);h.push(y[0],y[2]),f.push(y[1],y[3])}else v.geojson=null}if(r.fitbounds==="geojson"&&a==="geojson-id"){var p=l.computeBbox(l.getTraceGeojson(o));h=[p[0],p[2]],f=[p[1],p[3]]}var m={padded:!0};o._extremes.lon=x(r.lonaxis._ax,h,m),o._extremes.lat=x(r.lataxis._ax,f,m)},plot:function(s,t,o){var r=t.layers.backplot.select(".choroplethlayer");A.makeTraceGroups(r,o,"trace choropleth").each(function(n){var a=k.select(this).selectAll("path.choroplethlocation").data(A.identity);a.enter().append("path").classed("choroplethlocation",!0),a.exit().remove(),d(s,n)})}}},81253:function($){$.exports=function(R,e){var k,A,l,T,x,d=R.cd,s=R.xaxis,t=R.yaxis,o=[];if(e===!1)for(k=0;k<d.length;k++)d[k].selected=0;else for(k=0;k<d.length;k++)(l=(A=d[k]).ct)&&(T=s.c2p(l),x=t.c2p(l),e.contains([T,x],null,k,R)?(o.push({pointNumber:k,lon:l[0],lat:l[1]}),A.selected=1):A.selected=0);return o}},99636:function($,R,e){var k=e(39898),A=e(7901),l=e(91424),T=e(21081);function x(d,s){var t=s[0].trace,o=s[0].node3.selectAll(".choroplethlocation"),r=t.marker||{},n=r.line||{},a=T.makeColorScaleFuncFromTrace(t);o.each(function(i){k.select(this).attr("fill",a(i.z)).call(A.stroke,i.mlc||n.color).call(l.dashLine,"",i.mlw||n.width||0).style("opacity",r.opacity)}),l.selectedPointStyle(o,t)}$.exports={style:function(d,s){s&&x(0,s)},styleOnSelect:function(d,s){var t=s[0].node3,o=s[0].trace;o.selectedpoints?l.selectedPointStyle(t.selectAll(".choroplethlocation"),o):x(0,s)}}},64496:function($,R,e){var k=e(69568),A=e(50693),l=e(5386).f,T=e(9012),x=e(1426).extendFlat;$.exports=x({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:x({},k.featureidkey,{}),below:{valType:"string",editType:"plot"},text:k.text,hovertext:k.hovertext,marker:{line:{color:x({},k.marker.line.color,{editType:"plot"}),width:x({},k.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:x({},k.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:x({},k.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:x({},k.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:k.hoverinfo,hovertemplate:l({},{keys:["properties"]}),showlegend:x({},T.showlegend,{dflt:!1})},A("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function($,R,e){var k=e(92770),A=e(71828),l=e(21081),T=e(91424),x=e(18214).makeBlank,d=e(41327);function s(t){var o,r=t[0].trace,n=r._opts;if(r.selectedpoints){for(var a=T.makeSelectedPointStyleFns(r),i=0;i<t.length;i++){var c=t[i];c.fOut&&(c.fOut.properties.mo2=a.selectedOpacityFn(c))}o={type:"identity",property:"mo2"}}else o=A.isArrayOrTypedArray(r.marker.opacity)?{type:"identity",property:"mo"}:r.marker.opacity;return A.extendFlat(n.fill.paint,{"fill-opacity":o}),A.extendFlat(n.line.paint,{"line-opacity":o}),n}$.exports={convert:function(t){var o=t[0].trace,r=o.visible===!0&&o._length!==0,n={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},i=o._opts={fill:n,line:a,geojson:x()};if(!r)return i;var c=d.extractTraceFeature(t);if(!c)return i;var h,f,b,v=l.makeColorScaleFuncFromTrace(o),g=o.marker,y=g.line||{};A.isArrayOrTypedArray(g.opacity)&&(h=function(_){var E=_.mo;return k(E)?+A.constrain(E,0,1):0}),A.isArrayOrTypedArray(y.color)&&(f=function(_){return _.mlc}),A.isArrayOrTypedArray(y.width)&&(b=function(_){return _.mlw});for(var p=0;p<t.length;p++){var m=t[p],w=m.fOut;if(w){var u=w.properties;u.fc=v(m.z),h&&(u.mo=h(m)),f&&(u.mlc=f(m)),b&&(u.mlw=b(m)),m.ct=u.ct,m._polygons=d.feature2polygons(w)}}var S=h?{type:"identity",property:"mo"}:g.opacity;return A.extendFlat(n.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":S}),A.extendFlat(a.paint,{"line-color":f?{type:"identity",property:"mlc"}:y.color,"line-width":b?{type:"identity",property:"mlw"}:y.width,"line-opacity":S}),n.layout.visibility="visible",a.layout.visibility="visible",i.geojson={type:"FeatureCollection",features:c},s(t),i},convertOnSelect:s}},22654:function($,R,e){var k=e(71828),A=e(1586),l=e(64496);$.exports=function(T,x,d,s){function t(a,i){return k.coerce(T,x,l,a,i)}var o=t("locations"),r=t("z"),n=t("geojson");k.isArrayOrTypedArray(o)&&o.length&&k.isArrayOrTypedArray(r)&&r.length&&(typeof n=="string"&&n!==""||k.isPlainObject(n))?(t("featureidkey"),x._length=Math.min(o.length,r.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),A(T,x,s,t,{prefix:"",cLetter:"z"}),k.coerceSelectionMarkerOpacity(x,t)):x.visible=!1}},57516:function($,R,e){$.exports={attributes:e(64496),supplyDefaults:e(22654),colorbar:e(61243),calc:e(38675),plot:e(7852),hoverPoints:e(42300),eventData:e(92069),selectPoints:e(81253),styleOnSelect:function(k,A){A&&A[0].trace._glTrace.updateOnSelect(A)},getBelow:function(k,A){for(var l=A.getMapLayers(),T=l.length-2;T>=0;T--){var x=l[T].id;if(typeof x=="string"&&x.indexOf("water")===0){for(var d=T+1;d<l.length;d++)if(typeof(x=l[d].id)=="string"&&x.indexOf("plotly-")===-1)return x}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function($,R,e){var k=e(82004).convert,A=e(82004).convertOnSelect,l=e(77734).traceLayerPrefix;function T(d,s){this.type="choroplethmapbox",this.subplot=d,this.uid=s,this.sourceId="source-"+s,this.layerList=[["fill",l+s+"-fill"],["line",l+s+"-line"]],this.below=null}var x=T.prototype;x.update=function(d){this._update(k(d)),d[0].trace._glTrace=this},x.updateOnSelect=function(d){this._update(A(d))},x._update=function(d){var s=this.subplot,t=this.layerList,o=s.belowLookup["trace-"+this.uid];s.map.getSource(this.sourceId).setData(d.geojson),o!==this.below&&(this._removeLayers(),this._addLayers(d,o),this.below=o);for(var r=0;r<t.length;r++){var n=t[r],a=n[0],i=n[1],c=d[a];s.setOptions(i,"setLayoutProperty",c.layout),c.layout.visibility==="visible"&&s.setOptions(i,"setPaintProperty",c.paint)}},x._addLayers=function(d,s){for(var t=this.subplot,o=this.layerList,r=this.sourceId,n=0;n<o.length;n++){var a=o[n],i=a[0],c=d[i];t.addLayer({type:i,id:a[1],source:r,layout:c.layout,paint:c.paint},s)}},x._removeLayers=function(){for(var d=this.subplot.map,s=this.layerList,t=s.length-1;t>=0;t--)d.removeLayer(s[t][1])},x.dispose=function(){var d=this.subplot.map;this._removeLayers(),d.removeSource(this.sourceId)},$.exports=function(d,s){var t=s[0].trace,o=new T(d,t.uid),r=o.sourceId,n=k(s),a=o.below=d.belowLookup["trace-"+t.uid];return d.map.addSource(r,{type:"geojson",data:n.geojson}),o._addLayers(n,a),s[0].trace._glTrace=o,o}},12674:function($,R,e){var k=e(50693),A=e(12663).axisHoverFormat,l=e(5386).f,T=e(2418),x=e(9012),d=e(1426).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:l({editType:"calc"},{keys:["norm"]}),uhoverformat:A("u",1),vhoverformat:A("v",1),whoverformat:A("w",1),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),showlegend:d({},x.showlegend,{dflt:!1})};d(s,k("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=d({},x.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,$.exports=s},31371:function($,R,e){var k=e(78803);$.exports=function(A,l){for(var T=l.u,x=l.v,d=l.w,s=Math.min(l.x.length,l.y.length,l.z.length,T.length,x.length,d.length),t=-1/0,o=1/0,r=0;r<s;r++){var n=T[r],a=x[r],i=d[r],c=Math.sqrt(n*n+a*a+i*i);t=Math.max(t,c),o=Math.min(o,c)}l._len=s,l._normMax=t,k(A,l,{vals:[o,t],containerStr:"",cLetter:"c"})}},5453:function($,R,e){var k=e(9330).gl_cone3d,A=e(9330).gl_cone3d.createConeMesh,l=e(71828).simpleMap,T=e(81697).parseColorScale,x=e(21081).extractOpts,d=e(90060);function s(i,c){this.scene=i,this.uid=c,this.mesh=null,this.data=null}var t=s.prototype;t.handlePick=function(i){if(i.object===this.mesh){var c=i.index=i.data.index,h=this.data.x[c],f=this.data.y[c],b=this.data.z[c],v=this.data.u[c],g=this.data.v[c],y=this.data.w[c];i.traceCoordinate=[h,f,b,v,g,y,Math.sqrt(v*v+g*g+y*y)];var p=this.data.hovertext||this.data.text;return Array.isArray(p)&&p[c]!==void 0?i.textLabel=p[c]:p&&(i.textLabel=p),!0}};var o={xaxis:0,yaxis:1,zaxis:2},r={tip:1,tail:0,cm:.25,center:.5},n={tip:1,tail:1,cm:.75,center:.5};function a(i,c){var h=i.fullSceneLayout,f=i.dataScale,b={};function v(m,w){var u=h[w],S=f[o[w]];return l(m,function(_){return u.d2l(_)*S})}b.vectors=d(v(c.u,"xaxis"),v(c.v,"yaxis"),v(c.w,"zaxis"),c._len),b.positions=d(v(c.x,"xaxis"),v(c.y,"yaxis"),v(c.z,"zaxis"),c._len);var g=x(c);b.colormap=T(c),b.vertexIntensityBounds=[g.min/c._normMax,g.max/c._normMax],b.coneOffset=r[c.anchor],c.sizemode==="scaled"?b.coneSize=c.sizeref||.5:b.coneSize=c.sizeref&&c._normMax?c.sizeref/c._normMax:.5;var y=k(b),p=c.lightposition;return y.lightPosition=[p.x,p.y,p.z],y.ambient=c.lighting.ambient,y.diffuse=c.lighting.diffuse,y.specular=c.lighting.specular,y.roughness=c.lighting.roughness,y.fresnel=c.lighting.fresnel,y.opacity=c.opacity,c._pad=n[c.anchor]*y.vectorScale*y.coneScale*c._normMax,y}t.update=function(i){this.data=i;var c=a(this.scene,i);this.mesh.update(c)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(i,c){var h=i.glplot.gl,f=a(i,c),b=A(h,f),v=new s(i,c.uid);return v.mesh=b,v.data=c,b._trace=v,i.glplot.add(b),v}},91750:function($,R,e){var k=e(71828),A=e(1586),l=e(12674);$.exports=function(T,x,d,s){function t(h,f){return k.coerce(T,x,l,h,f)}var o=t("u"),r=t("v"),n=t("w"),a=t("x"),i=t("y"),c=t("z");o&&o.length&&r&&r.length&&n&&n.length&&a&&a.length&&i&&i.length&&c&&c.length?(t("sizeref"),t("sizemode"),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),A(T,x,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),x._length=null):x.visible=!1}},98128:function($,R,e){$.exports={moduleType:"trace",name:"cone",basePlotModule:e(58547),categories:["gl3d","showLegend"],attributes:e(12674),supplyDefaults:e(91750),colorbar:{min:"cmin",max:"cmax"},calc:e(31371),plot:e(5453),eventData:function(k,A){return k.norm=A.traceCoordinate[6],k},meta:{}}},70600:function($,R,e){var k=e(21606),A=e(82196),l=e(12663),T=l.axisHoverFormat,x=l.descriptionOnlyNumbers,d=e(50693),s=e(79952).P,t=e(41940),o=e(1426).extendFlat,r=e(74808),n=r.COMPARISON_OPS2,a=r.INTERVAL_OPS,i=A.line;$.exports=o({z:k.z,x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,text:k.text,hovertext:k.hovertext,transpose:k.transpose,xtype:k.xtype,ytype:k.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:k.hovertemplate,texttemplate:o({},k.texttemplate,{}),textfont:o({},k.textfont,{}),hoverongaps:k.hoverongaps,connectgaps:o({},k.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:x("contour label")},operation:{valType:"enumerated",values:[].concat(n).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:o({},i.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:s,smoothing:o({},i.smoothing,{}),editType:"plot"}},d("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},27529:function($,R,e){var k=e(21081),A=e(90757),l=e(18670),T=e(53572);$.exports=function(x,d){var s=A(x,d),t=s[0].z;l(d,t);var o,r=d.contours,n=k.extractOpts(d);if(r.coloring==="heatmap"&&n.auto&&d.autocontour===!1){var a=r.start,i=T(r),c=r.size||1,h=Math.floor((i-a)/c)+1;isFinite(c)||(c=1,h=1);var f=a-c/2;o=[f,f+h*c]}else o=t;return k.calc(x,d,{vals:o,cLetter:"z"}),s}},20083:function($){$.exports=function(R,e){var k,A=R[0],l=A.z;switch(e.type){case"levels":var T=Math.min(l[0][0],l[0][1]);for(k=0;k<R.length;k++){var x=R[k];x.prefixBoundary=!x.edgepaths.length&&(T>x.level||x.starts.length&&T===x.level)}break;case"constraint":if(A.prefixBoundary=!1,A.edgepaths.length)return;var d=A.x.length,s=A.y.length,t=-1/0,o=1/0;for(k=0;k<s;k++)o=Math.min(o,l[k][0]),o=Math.min(o,l[k][d-1]),t=Math.max(t,l[k][0]),t=Math.max(t,l[k][d-1]);for(k=1;k<d-1;k++)o=Math.min(o,l[0][k]),o=Math.min(o,l[s-1][k]),t=Math.max(t,l[0][k]),t=Math.max(t,l[s-1][k]);var r,n,a=e.value;switch(e._operation){case">":a>t&&(A.prefixBoundary=!0);break;case"<":(a<o||A.starts.length&&a===o)&&(A.prefixBoundary=!0);break;case"[]":r=Math.min(a[0],a[1]),((n=Math.max(a[0],a[1]))<o||r>t||A.starts.length&&n===o)&&(A.prefixBoundary=!0);break;case"][":r=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]),r<o&&n>t&&(A.prefixBoundary=!0)}}}},90654:function($,R,e){var k=e(21081),A=e(86068),l=e(53572);$.exports={min:"zmin",max:"zmax",calc:function(T,x,d){var s=x.contours,t=x.line,o=s.size||1,r=s.coloring,n=A(x,{isColorbar:!0});if(r==="heatmap"){var a=k.extractOpts(x);d._fillgradient=a.reversescale?k.flipScale(a.colorscale):a.colorscale,d._zrange=[a.min,a.max]}else r==="fill"&&(d._fillcolor=n);d._line={color:r==="lines"?n:t.color,width:s.showlines!==!1?t.width:0,dash:t.dash},d._levels={start:s.start,end:l(s),size:o}}}},36914:function($){$.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function($,R,e){var k=e(92770),A=e(14523),l=e(7901),T=l.addOpacity,x=l.opacity,d=e(74808),s=d.CONSTRAINT_REDUCTION,t=d.COMPARISON_OPS2;$.exports=function(o,r,n,a,i,c){var h,f,b,v=r.contours,g=n("contours.operation");v._operation=s[g],function(y,p){var m;t.indexOf(p.operation)===-1?(y("contours.value",[0,1]),Array.isArray(p.value)?p.value.length>2?p.value=p.value.slice(2):p.length===0?p.value=[0,1]:p.length<2?(m=parseFloat(p.value[0]),p.value=[m,m+1]):p.value=[parseFloat(p.value[0]),parseFloat(p.value[1])]:k(p.value)&&(m=parseFloat(p.value),p.value=[m,m+1])):(y("contours.value",0),k(p.value)||(Array.isArray(p.value)?p.value=parseFloat(p.value[0]):p.value=0))}(n,v),g==="="?h=v.showlines=!0:(h=n("contours.showlines"),b=n("fillcolor",T((o.line||{}).color||i,.5))),h&&(f=n("line.color",b&&x(b)?T(r.fillcolor,1):i),n("line.width",2),n("line.dash")),n("line.smoothing"),A(n,a,f,c)}},64237:function($,R,e){var k=e(74808),A=e(92770);function l(d,s){var t,o=Array.isArray(s);function r(n){return A(n)?+n:null}return k.COMPARISON_OPS2.indexOf(d)!==-1?t=r(o?s[0]:s):k.INTERVAL_OPS.indexOf(d)!==-1?t=o?[r(s[0]),r(s[1])]:[r(s),r(s)]:k.SET_OPS.indexOf(d)!==-1&&(t=o?s.map(r):[r(s)]),t}function T(d){return function(s){s=l(d,s);var t=Math.min(s[0],s[1]),o=Math.max(s[0],s[1]);return{start:t,end:o,size:o-t}}}function x(d){return function(s){return{start:s=l(d,s),end:1/0,size:1/0}}}$.exports={"[]":T("[]"),"][":T("]["),">":x(">"),"<":x("<"),"=":x("=")}},67217:function($){$.exports=function(R,e,k,A){var l=A("contours.start"),T=A("contours.end"),x=l===!1||T===!1,d=k("contours.size");!(x?e.autocontour=!0:k("autocontour",!1))&&d||k("ncontours")}},84857:function($,R,e){var k=e(71828);function A(l){return k.extendFlat({},l,{edgepaths:k.extendDeep([],l.edgepaths),paths:k.extendDeep([],l.paths),starts:k.extendDeep([],l.starts)})}$.exports=function(l,T){var x,d,s,t=function(n){return n.reverse()},o=function(n){return n};switch(T){case"=":case"<":return l;case">":for(l.length!==1&&k.warn("Contour data invalid for the specified inequality operation."),d=l[0],x=0;x<d.edgepaths.length;x++)d.edgepaths[x]=t(d.edgepaths[x]);for(x=0;x<d.paths.length;x++)d.paths[x]=t(d.paths[x]);for(x=0;x<d.starts.length;x++)d.starts[x]=t(d.starts[x]);return l;case"][":var r=t;t=o,o=r;case"[]":for(l.length!==2&&k.warn("Contour data invalid for the specified inequality range operation."),d=A(l[0]),s=A(l[1]),x=0;x<d.edgepaths.length;x++)d.edgepaths[x]=t(d.edgepaths[x]);for(x=0;x<d.paths.length;x++)d.paths[x]=t(d.paths[x]);for(x=0;x<d.starts.length;x++)d.starts[x]=t(d.starts[x]);for(;s.edgepaths.length;)d.edgepaths.push(o(s.edgepaths.shift()));for(;s.paths.length;)d.paths.push(o(s.paths.shift()));for(;s.starts.length;)d.starts.push(o(s.starts.shift()));return[d]}}},13031:function($,R,e){var k=e(71828),A=e(67684),l=e(73927),T=e(83179),x=e(67217),d=e(8724),s=e(58623),t=e(70600);$.exports=function(o,r,n,a){function i(h,f){return k.coerce(o,r,t,h,f)}if(A(o,r,i,a)){l(o,r,a,i),i("xhoverformat"),i("yhoverformat"),i("text"),i("hovertext"),i("hoverongaps"),i("hovertemplate");var c=i("contours.type")==="constraint";i("connectgaps",k.isArray1D(r.z)),c?T(o,r,i,a,n):(x(o,r,i,function(h){return k.coerce2(o,r,t,h)}),d(o,r,i,a)),r.contours&&r.contours.coloring==="heatmap"&&s(i,a)}else r.visible=!1}},87558:function($,R,e){var k=e(71828),A=e(64237),l=e(53572);$.exports=function(T,x,d){for(var s=T.type==="constraint"?A[T._operation](T.value):T,t=s.size,o=[],r=l(s),n=d.trace._carpetTrace,a=n?{xaxis:n.aaxis,yaxis:n.baxis,x:d.a,y:d.b}:{xaxis:x.xaxis,yaxis:x.yaxis,x:d.x,y:d.y},i=s.start;i<r;i+=t)if(o.push(k.extendFlat({level:i,crossings:{},starts:[],edgepaths:[],paths:[],z:d.z,smoothing:d.trace.line.smoothing},a)),o.length>1e3){k.warn("Too many contours, clipping at 1000",T);break}return o}},53572:function($){$.exports=function(R){return R.end+R.size/1e6}},81696:function($,R,e){var k=e(71828),A=e(36914);function l(d,s,t,o){return Math.abs(d[0]-s[0])<t&&Math.abs(d[1]-s[1])<o}function T(d,s,t,o,r){var n,a=s.join(","),i=d.crossings[a],c=function(ee,re,ie){var se=0,fe=0;return ee>20&&re?ee===208||ee===1114?se=ie[0]===0?1:-1:fe=ie[1]===0?1:-1:A.BOTTOMSTART.indexOf(ee)!==-1?fe=1:A.LEFTSTART.indexOf(ee)!==-1?se=1:A.TOPSTART.indexOf(ee)!==-1?fe=-1:se=-1,[se,fe]}(i,t,s),h=[x(d,s,[-c[0],-c[1]])],f=d.z.length,b=d.z[0].length,v=s.slice(),g=c.slice();for(n=0;n<1e4;n++){if(i>20?(i=A.CHOOSESADDLE[i][(c[0]||c[1])<0?0:1],d.crossings[a]=A.SADDLEREMAINDER[i]):delete d.crossings[a],!(c=A.NEWDELTA[i])){k.log("Found bad marching index:",i,s,d.level);break}h.push(x(d,s,c)),s[0]+=c[0],s[1]+=c[1],a=s.join(","),l(h[h.length-1],h[h.length-2],o,r)&&h.pop();var y=c[0]&&(s[0]<0||s[0]>b-2)||c[1]&&(s[1]<0||s[1]>f-2);if(s[0]===v[0]&&s[1]===v[1]&&c[0]===g[0]&&c[1]===g[1]||t&&y)break;i=d.crossings[a]}n===1e4&&k.log("Infinite loop in contour?");var p,m,w,u,S,_,E,L,C,P,I,U,z,H,F,N=l(h[0],h[h.length-1],o,r),B=0,j=.2*d.smoothing,K=[],G=0;for(n=1;n<h.length;n++)U=h[n],z=h[n-1],H=U[2]-z[2],F=U[3]-z[3],B+=E=Math.sqrt(H*H+F*F),K.push(E);var V=B/K.length*j;function W(ee){return h[ee%h.length]}for(n=h.length-2;n>=G;n--)if((p=K[n])<V){for(w=0,m=n-1;m>=G&&p+K[m]<V;m--)p+=K[m];if(N&&n===h.length-2)for(w=0;w<m&&p+K[w]<V;w++)p+=K[w];S=n-m+w+1,_=Math.floor((n+m+w+2)/2),u=N||n!==h.length-2?N||m!==-1?S%2?W(_):[(W(_)[0]+W(_+1)[0])/2,(W(_)[1]+W(_+1)[1])/2]:h[0]:h[h.length-1],h.splice(m+1,n-m+1,u),n=m+1,w&&(G=w),N&&(n===h.length-2?h[w]=h[h.length-1]:n===0&&(h[h.length-1]=h[0]))}for(h.splice(0,G),n=0;n<h.length;n++)h[n].length=2;if(!(h.length<2))if(N)h.pop(),d.paths.push(h);else{t||k.log("Unclosed interior contour?",d.level,v.join(","),h.join("L"));var J=!1;for(L=0;L<d.edgepaths.length;L++)if(P=d.edgepaths[L],!J&&l(P[0],h[h.length-1],o,r)){h.pop(),J=!0;var X=!1;for(C=0;C<d.edgepaths.length;C++)if(l((I=d.edgepaths[C])[I.length-1],h[0],o,r)){X=!0,h.shift(),d.edgepaths.splice(L,1),C===L?d.paths.push(h.concat(I)):(C>L&&C--,d.edgepaths[C]=I.concat(h,P));break}X||(d.edgepaths[L]=h.concat(P))}for(L=0;L<d.edgepaths.length&&!J;L++)l((P=d.edgepaths[L])[P.length-1],h[0],o,r)&&(h.shift(),d.edgepaths[L]=P.concat(h),J=!0);J||d.edgepaths.push(h)}}function x(d,s,t){var o=s[0]+Math.max(t[0],0),r=s[1]+Math.max(t[1],0),n=d.z[r][o],a=d.xaxis,i=d.yaxis;if(t[1]){var c=(d.level-n)/(d.z[r][o+1]-n),h=(c!==1?(1-c)*a.c2l(d.x[o]):0)+(c!==0?c*a.c2l(d.x[o+1]):0);return[a.c2p(a.l2c(h),!0),i.c2p(d.y[r],!0),o+c,r]}var f=(d.level-n)/(d.z[r+1][o]-n),b=(f!==1?(1-f)*i.c2l(d.y[r]):0)+(f!==0?f*i.c2l(d.y[r+1]):0);return[a.c2p(d.x[o],!0),i.c2p(i.l2c(b),!0),o,r+f]}$.exports=function(d,s,t){var o,r,n,a;for(s=s||.01,t=t||.01,r=0;r<d.length;r++){for(n=d[r],a=0;a<n.starts.length;a++)T(n,n.starts[a],"edge",s,t);for(o=0;Object.keys(n.crossings).length&&o<1e4;)o++,T(n,Object.keys(n.crossings)[0].split(",").map(Number),void 0,s,t);o===1e4&&k.log("Infinite loop in contour?")}}},52421:function($,R,e){var k=e(7901),A=e(46248);$.exports=function(l,T,x,d,s){s||(s={}),s.isContour=!0;var t=A(l,T,x,d,s);return t&&t.forEach(function(o){var r=o.trace;r.contours.type==="constraint"&&(r.fillcolor&&k.opacity(r.fillcolor)?o.color=k.addOpacity(r.fillcolor,1):r.contours.showlines&&k.opacity(r.line.color)&&(o.color=k.addOpacity(r.line.color,1)))}),t}},99442:function($,R,e){$.exports={attributes:e(70600),supplyDefaults:e(13031),calc:e(27529),plot:e(29854).plot,style:e(84426),colorbar:e(90654),hoverPoints:e(52421),moduleType:"trace",name:"contour",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function($,R,e){var k=e(71828);$.exports=function(A,l,T,x){if(x||(x={}),A("contours.showlabels")){var d=l.font;k.coerceFont(A,"contours.labelfont",{family:d.family,size:d.size,color:T}),A("contours.labelformat")}x.hasHover!==!1&&A("zhoverformat")}},86068:function($,R,e){var k=e(39898),A=e(21081),l=e(53572);$.exports=function(T){var x=T.contours,d=x.start,s=l(x),t=x.size||1,o=Math.floor((s-d)/t)+1,r=x.coloring==="lines"?0:1,n=A.extractOpts(T);isFinite(t)||(t=1,o=1);var a,i,c=n.reversescale?A.flipScale(n.colorscale):n.colorscale,h=c.length,f=new Array(h),b=new Array(h);if(x.coloring==="heatmap"){var v=n.min,g=n.max;for(i=0;i<h;i++)a=c[i],f[i]=a[0]*(g-v)+v,b[i]=a[1];var y=k.extent([v,g,x.start,x.start+t*(o-1)]),p=y[v<g?0:1],m=y[v<g?1:0];p!==v&&(f.splice(0,0,p),b.splice(0,0,b[0])),m!==g&&(f.push(m),b.push(b[b.length-1]))}else for(i=0;i<h;i++)a=c[i],f[i]=(a[0]*(o+r-1)-r/2)*t+d,b[i]=a[1];return A.makeColorScaleFunc({domain:f,range:b},{noNumericCheck:!0})}},87678:function($,R,e){var k=e(36914);function A(l,T){var x=(T[0][0]>l?0:1)+(T[0][1]>l?0:2)+(T[1][1]>l?0:4)+(T[1][0]>l?0:8);return x===5||x===10?l>(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4?x===5?713:1114:x===5?104:208:x===15?0:x}$.exports=function(l){var T,x,d,s,t,o,r,n,a,i=l[0].z,c=i.length,h=i[0].length,f=c===2||h===2;for(x=0;x<c-1;x++)for(s=[],x===0&&(s=s.concat(k.BOTTOMSTART)),x===c-2&&(s=s.concat(k.TOPSTART)),T=0;T<h-1;T++)for(d=s.slice(),T===0&&(d=d.concat(k.LEFTSTART)),T===h-2&&(d=d.concat(k.RIGHTSTART)),t=T+","+x,o=[[i[x][T],i[x][T+1]],[i[x+1][T],i[x+1][T+1]]],a=0;a<l.length;a++)(r=A((n=l[a]).level,o))&&(n.crossings[t]=r,d.indexOf(r)!==-1&&(n.starts.push([T,x]),f&&d.indexOf(r,d.indexOf(r)+1)!==-1&&n.starts.push([T,x])))}},29854:function($,R,e){var k=e(39898),A=e(71828),l=e(91424),T=e(21081),x=e(63893),d=e(89298),s=e(21994),t=e(50347),o=e(87678),r=e(81696),n=e(87558),a=e(84857),i=e(20083),c=e(36914),h=c.LABELOPTIMIZER;function f(g,y){var p,m,w,u,S,_,E,L="",C=0,P=g.edgepaths.map(function(N,B){return B}),I=!0;function U(N){return Math.abs(N[1]-y[2][1])<.01}function z(N){return Math.abs(N[0]-y[0][0])<.01}function H(N){return Math.abs(N[0]-y[2][0])<.01}for(;P.length;){for(_=l.smoothopen(g.edgepaths[C],g.smoothing),L+=I?_:_.replace(/^M/,"L"),P.splice(P.indexOf(C),1),p=g.edgepaths[C][g.edgepaths[C].length-1],u=-1,w=0;w<4;w++){if(!p){A.log("Missing end?",C,g);break}for(E=p,Math.abs(E[1]-y[0][1])<.01&&!H(p)?m=y[1]:z(p)?m=y[0]:U(p)?m=y[3]:H(p)&&(m=y[2]),S=0;S<g.edgepaths.length;S++){var F=g.edgepaths[S][0];Math.abs(p[0]-m[0])<.01?Math.abs(p[0]-F[0])<.01&&(F[1]-p[1])*(m[1]-F[1])>=0&&(m=F,u=S):Math.abs(p[1]-m[1])<.01?Math.abs(p[1]-F[1])<.01&&(F[0]-p[0])*(m[0]-F[0])>=0&&(m=F,u=S):A.log("endpt to newendpt is not vert. or horz.",p,m,F)}if(p=m,u>=0)break;L+="L"+m}if(u===g.edgepaths.length){A.log("unclosed perimeter path");break}C=u,(I=P.indexOf(C)===-1)&&(C=P[0],L+="Z")}for(C=0;C<g.paths.length;C++)L+=l.smoothclosed(g.paths[C],g.smoothing);return L}function b(g,y,p,m){var w=y.width/2,u=y.height/2,S=g.x,_=g.y,E=g.theta,L=Math.cos(E)*w,C=Math.sin(E)*w,P=(S>m.center?m.right-S:S-m.left)/(L+Math.abs(Math.sin(E)*u)),I=(_>m.middle?m.bottom-_:_-m.top)/(Math.abs(C)+Math.cos(E)*u);if(P<1||I<1)return 1/0;var U=h.EDGECOST*(1/(P-1)+1/(I-1));U+=h.ANGLECOST*E*E;for(var z=S-L,H=_-C,F=S+L,N=_+C,B=0;B<p.length;B++){var j=p[B],K=Math.cos(j.theta)*j.width/2,G=Math.sin(j.theta)*j.width/2,V=2*A.segmentDistance(z,H,F,N,j.x-K,j.y-G,j.x+K,j.y+G)/(y.height+j.height),W=j.level===y.level,J=W?h.SAMELEVELDISTANCE:1;if(V<=J)return 1/0;U+=h.NEIGHBORCOST*(W?h.SAMELEVELFACTOR:1)/(V-J)}return U}function v(g){var y,p,m=g.trace._emptypoints,w=[],u=g.z.length,S=g.z[0].length,_=[];for(y=0;y<S;y++)_.push(1);for(y=0;y<u;y++)w.push(_.slice());for(y=0;y<m.length;y++)w[(p=m[y])[0]][p[1]]=0;return g.zmask=w,w}R.plot=function(g,y,p,m){var w=y.xaxis,u=y.yaxis;A.makeTraceGroups(m,p,"contour").each(function(S){var _=k.select(this),E=S[0],L=E.trace,C=E.x,P=E.y,I=L.contours,U=n(I,y,E),z=A.ensureSingle(_,"g","heatmapcoloring"),H=[];I.coloring==="heatmap"&&(H=[S]),t(g,y,H,z),o(U),r(U);var F=w.c2p(C[0],!0),N=w.c2p(C[C.length-1],!0),B=u.c2p(P[0],!0),j=u.c2p(P[P.length-1],!0),K=[[F,j],[N,j],[N,B],[F,B]],G=U;I.type==="constraint"&&(G=a(U,I._operation)),function(V,W,J){var X=A.ensureSingle(V,"g","contourbg").selectAll("path").data(J.coloring==="fill"?[0]:[]);X.enter().append("path"),X.exit().remove(),X.attr("d","M"+W.join("L")+"Z").style("stroke","none")}(_,K,I),function(V,W,J,X){var ee=X.coloring==="fill"||X.type==="constraint"&&X._operation!=="=",re="M"+J.join("L")+"Z";ee&&i(W,X);var ie=A.ensureSingle(V,"g","contourfill").selectAll("path").data(ee?W:[]);ie.enter().append("path"),ie.exit().remove(),ie.each(function(se){var fe=(se.prefixBoundary?re:"")+f(se,J);fe?k.select(this).attr("d",fe).style("stroke","none"):k.select(this).remove()})}(_,G,K,I),function(V,W,J,X,ee){var re=A.ensureSingle(V,"g","contourlines"),ie=ee.showlines!==!1,se=ee.showlabels,fe=ie&&se,ye=R.createLines(re,ie||se,W),ge=R.createLineClip(re,fe,J,X.trace.uid),he=V.selectAll("g.contourlabels").data(se?[0]:[]);if(he.exit().remove(),he.enter().append("g").classed("contourlabels",!0),se){var ve=[],Oe=[];A.clearLocationCache();var xe=R.labelFormatter(J,X),ke=l.tester.append("text").attr("data-notex",1).call(l.font,ee.labelfont),Me=W[0].xaxis,Te=W[0].yaxis,Q=Me._length,oe=Te._length,ce=Me.range,me=Te.range,Ae=A.aggNums(Math.min,null,X.x),Ie=A.aggNums(Math.max,null,X.x),Ce=A.aggNums(Math.min,null,X.y),Re=A.aggNums(Math.max,null,X.y),le=Math.max(Me.c2p(Ae,!0),0),de=Math.min(Me.c2p(Ie,!0),Q),_e=Math.max(Te.c2p(Re,!0),0),Fe=Math.min(Te.c2p(Ce,!0),oe),Ve={};ce[0]<ce[1]?(Ve.left=le,Ve.right=de):(Ve.left=de,Ve.right=le),me[0]<me[1]?(Ve.top=_e,Ve.bottom=Fe):(Ve.top=Fe,Ve.bottom=_e),Ve.middle=(Ve.top+Ve.bottom)/2,Ve.center=(Ve.left+Ve.right)/2,ve.push([[Ve.left,Ve.top],[Ve.right,Ve.top],[Ve.right,Ve.bottom],[Ve.left,Ve.bottom]]);var He=Math.sqrt(Q*Q+oe*oe),nt=c.LABELDISTANCE*He/Math.max(1,W.length/c.LABELINCREASE);ye.each(function(tt){var ot=R.calcTextOpts(tt.level,xe,ke,J);k.select(this).selectAll("path").each(function(){var dt=A.getVisibleSegment(this,Ve,ot.height/2);if(dt&&!(dt.len<(ot.width+ot.height)*c.LABELMIN))for(var kt=Math.min(Math.ceil(dt.len/nt),c.LABELMAX),mt=0;mt<kt;mt++){var wt=R.findBestTextLocation(this,dt,ot,Oe,Ve);if(!wt)break;R.addLabelData(wt,ot,Oe,ve)}})}),ke.remove(),R.drawLabels(he,Oe,J,ge,fe?ve:null)}se&&!ie&&ye.remove()}(_,U,g,E,I),function(V,W,J,X,ee){var re=X.trace,ie=J._fullLayout._clips,se="clip"+re.uid,fe=ie.selectAll("#"+se).data(re.connectgaps?[]:[0]);if(fe.enter().append("clipPath").classed("contourclip",!0).attr("id",se),fe.exit().remove(),re.connectgaps===!1){var ye={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:W.xaxis,yaxis:W.yaxis,x:X.x,y:X.y,z:v(X),smoothing:0};o([ye]),r([ye]),i([ye],{type:"levels"}),A.ensureSingle(fe,"path","").attr("d",(ye.prefixBoundary?"M"+ee.join("L")+"Z":"")+f(ye,ee))}else se=null;l.setClipUrl(V,se,J)}(_,y,g,E,K)})},R.createLines=function(g,y,p){var m=p[0].smoothing,w=g.selectAll("g.contourlevel").data(y?p:[]);if(w.exit().remove(),w.enter().append("g").classed("contourlevel",!0),y){var u=w.selectAll("path.openline").data(function(_){return _.pedgepaths||_.edgepaths});u.exit().remove(),u.enter().append("path").classed("openline",!0),u.attr("d",function(_){return l.smoothopen(_,m)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var S=w.selectAll("path.closedline").data(function(_){return _.ppaths||_.paths});S.exit().remove(),S.enter().append("path").classed("closedline",!0),S.attr("d",function(_){return l.smoothclosed(_,m)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return w},R.createLineClip=function(g,y,p,m){var w=y?"clipline"+m:null,u=p._fullLayout._clips.selectAll("#"+w).data(y?[0]:[]);return u.exit().remove(),u.enter().append("clipPath").classed("contourlineclip",!0).attr("id",w),l.setClipUrl(g,w,p),u},R.labelFormatter=function(g,y){var p=g._fullLayout,m=y.trace,w=m.contours,u={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(w.labelformat)u.tickformat=w.labelformat,s(u,p);else{var S=T.extractOpts(m);if(S&&S.colorbar&&S.colorbar._axis)u=S.colorbar._axis;else{if(w.type==="constraint"){var _=w.value;Array.isArray(_)?u.range=[_[0],_[_.length-1]]:u.range=[_,_]}else u.range=[w.start,w.end],u.nticks=(w.end-w.start)/w.size;u.range[0]===u.range[1]&&(u.range[1]+=u.range[0]||1),u.nticks||(u.nticks=1e3),s(u,p),d.prepTicks(u),u._tmin=null,u._tmax=null}}return function(E){return d.tickText(u,E).text}},R.calcTextOpts=function(g,y,p,m){var w=y(g);p.text(w).call(x.convertToTspans,m);var u=p.node(),S=l.bBox(u,!0);return{text:w,width:S.width,height:S.height,fontSize:+u.style["font-size"].replace("px",""),level:g,dy:(S.top+S.bottom)/2}},R.findBestTextLocation=function(g,y,p,m,w){var u,S,_,E,L,C=p.width;y.isClosed?(S=y.len/h.INITIALSEARCHPOINTS,u=y.min+S/2,_=y.max):(S=(y.len-C)/(h.INITIALSEARCHPOINTS+1),u=y.min+S+C/2,_=y.max-(S+C)/2);for(var P=1/0,I=0;I<h.ITERATIONS;I++){for(var U=u;U<_;U+=S){var z=A.getTextLocation(g,y.total,U,C),H=b(z,p,m,w);H<P&&(P=H,L=z,E=U)}if(P>2*h.MAXCOST)break;I&&(S/=2),_=(u=E-S/2)+1.5*S}if(P<=h.MAXCOST)return L},R.addLabelData=function(g,y,p,m){var w=y.fontSize,u=y.width+w/3,S=Math.max(0,y.height-w/3),_=g.x,E=g.y,L=g.theta,C=Math.sin(L),P=Math.cos(L),I=function(z,H){return[_+z*P-H*C,E+z*C+H*P]},U=[I(-u/2,-S/2),I(-u/2,S/2),I(u/2,S/2),I(u/2,-S/2)];p.push({text:y.text,x:_,y:E,dy:y.dy,theta:L,level:y.level,width:u,height:S}),m.push(U)},R.drawLabels=function(g,y,p,m,w){var u=g.selectAll("text").data(y,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(u.exit().remove(),u.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var L=E.x+Math.sin(E.theta)*E.dy,C=E.y-Math.cos(E.theta)*E.dy;k.select(this).text(E.text).attr({x:L,y:C,transform:"rotate("+180*E.theta/Math.PI+" "+L+" "+C+")"}).call(x.convertToTspans,p)}),w){for(var S="",_=0;_<w.length;_++)S+="M"+w[_].join("L")+"Z";A.ensureSingle(m,"path","").attr("d",S)}}},18670:function($,R,e){var k=e(89298),A=e(71828);function l(T,x,d){var s={type:"linear",range:[T,x]};return k.autoTicks(s,(x-T)/(d||15)),s}$.exports=function(T,x){var d=T.contours;if(T.autocontour){var s=T.zmin,t=T.zmax;(T.zauto||s===void 0)&&(s=A.aggNums(Math.min,null,x)),(T.zauto||t===void 0)&&(t=A.aggNums(Math.max,null,x));var o=l(s,t,T.ncontours);d.size=o.dtick,d.start=k.tickFirst(o),o.range.reverse(),d.end=k.tickFirst(o),d.start===s&&(d.start+=d.size),d.end===t&&(d.end-=d.size),d.start>d.end&&(d.start=d.end=(d.start+d.end)/2),T._input.contours||(T._input.contours={}),A.extendFlat(T._input.contours,{start:d.start,end:d.end,size:d.size}),T._input.autocontour=!0}else if(d.type!=="constraint"){var r,n=d.start,a=d.end,i=T._input.contours;n>a&&(d.start=i.start=a,a=d.end=i.end=n,n=d.start),d.size>0||(r=n===a?1:l(n,a,T.ncontours).dtick,i.size=d.size=r)}}},84426:function($,R,e){var k=e(39898),A=e(91424),l=e(70035),T=e(86068);$.exports=function(x){var d=k.select(x).selectAll("g.contour");d.style("opacity",function(s){return s[0].trace.opacity}),d.each(function(s){var t=k.select(this),o=s[0].trace,r=o.contours,n=o.line,a=r.size||1,i=r.start,c=r.type==="constraint",h=!c&&r.coloring==="lines",f=!c&&r.coloring==="fill",b=h||f?T(o):null;t.selectAll("g.contourlevel").each(function(y){k.select(this).selectAll("path").call(A.lineGroupStyle,n.width,h?b(y.level):n.color,n.dash)});var v=r.labelfont;if(t.selectAll("g.contourlabels text").each(function(y){A.font(k.select(this),{family:v.family,size:v.size,color:v.color||(h?b(y.level):n.color)})}),c)t.selectAll("g.contourfill path").style("fill",o.fillcolor);else if(f){var g;t.selectAll("g.contourfill path").style("fill",function(y){return g===void 0&&(g=y.level),b(y.level+.5*a)}),g===void 0&&(g=i),t.selectAll("g.contourbg path").style("fill",b(g-.5*a))}}),l(x)}},8724:function($,R,e){var k=e(1586),A=e(14523);$.exports=function(l,T,x,d,s){var t,o=x("contours.coloring"),r="";o==="fill"&&(t=x("contours.showlines")),t!==!1&&(o!=="lines"&&(r=x("line.color","#000")),x("line.width",.5),x("line.dash")),o!=="none"&&(l.showlegend!==!0&&(T.showlegend=!1),T._dfltShowLegend=!1,k(l,T,d,x,{prefix:"",cLetter:"z"})),x("line.smoothing"),A(x,d,r,s)}},88085:function($,R,e){var k=e(21606),A=e(70600),l=e(50693),T=e(1426).extendFlat,x=A.contours;$.exports=T({carpet:{valType:"string",editType:"calc"},z:k.z,a:k.x,a0:k.x0,da:k.dx,b:k.y,b0:k.y0,db:k.dy,text:k.text,hovertext:k.hovertext,transpose:k.transpose,atype:k.xtype,btype:k.ytype,fillcolor:A.fillcolor,autocontour:A.autocontour,ncontours:A.ncontours,contours:{type:x.type,start:x.start,end:x.end,size:x.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:x.showlines,showlabels:x.showlabels,labelfont:x.labelfont,labelformat:x.labelformat,operation:x.operation,value:x.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:A.line.color,width:A.line.width,dash:A.line.dash,smoothing:A.line.smoothing,editType:"plot"},transforms:void 0},l("",{cLetter:"z",autoColorDflt:!1}))},59885:function($,R,e){var k=e(78803),A=e(71828),l=e(68296),T=e(4742),x=e(824),d=e(43907),s=e(70769),t=e(75005),o=e(22882),r=e(18670);$.exports=function(n,a){var i=a._carpetTrace=o(n,a);if(i&&i.visible&&i.visible!=="legendonly"){if(!a.a||!a.b){var c=n.data[i.index],h=n.data[a.index];h.a||(h.a=c.a),h.b||(h.b=c.b),t(h,a,a._defaultColor,n._fullLayout)}var f=function(b,v){var g,y,p,m,w,u,S,_=v._carpetTrace,E=_.aaxis,L=_.baxis;E._minDtick=0,L._minDtick=0,A.isArray1D(v.z)&&l(v,E,L,"a","b",["z"]),g=v._a=v._a||v.a,m=v._b=v._b||v.b,g=g?E.makeCalcdata(v,"_a"):[],m=m?L.makeCalcdata(v,"_b"):[],y=v.a0||0,p=v.da||1,w=v.b0||0,u=v.db||1,S=v._z=T(v._z||v.z,v.transpose),v._emptypoints=d(S),x(S,v._emptypoints);var C=A.maxRowLength(S),P=v.xtype==="scaled"?"":g,I=s(v,P,y,p,C,E),U=v.ytype==="scaled"?"":m,z={a:I,b:s(v,U,w,u,S.length,L),z:S};return v.contours.type==="levels"&&v.contours.coloring!=="none"&&k(b,v,{vals:S,containerStr:"",cLetter:"z"}),[z]}(n,a);return r(a,a._z),f}}},75005:function($,R,e){var k=e(71828),A=e(67684),l=e(88085),T=e(83179),x=e(67217),d=e(8724);$.exports=function(s,t,o,r){function n(a,i){return k.coerce(s,t,l,a,i)}if(n("carpet"),s.a&&s.b){if(!A(s,t,n,r,"a","b"))return void(t.visible=!1);n("text"),n("contours.type")==="constraint"?T(s,t,n,r,o,{hasHover:!1}):(x(s,t,n,function(a){return k.coerce2(s,t,l,a)}),d(s,t,n,r,{hasHover:!1}))}else t._defaultColor=o,t._length=null}},93740:function($,R,e){$.exports={attributes:e(88085),supplyDefaults:e(75005),colorbar:e(90654),calc:e(59885),plot:e(51048),style:e(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:e(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function($,R,e){var k=e(39898),A=e(27669),l=e(67961),T=e(91424),x=e(71828),d=e(87678),s=e(81696),t=e(29854),o=e(36914),r=e(84857),n=e(87558),a=e(20083),i=e(22882),c=e(4536);function h(v,g,y){var p=v.getPointAtLength(g),m=v.getPointAtLength(y),w=m.x-p.x,u=m.y-p.y,S=Math.sqrt(w*w+u*u);return[w/S,u/S]}function f(v){var g=Math.sqrt(v[0]*v[0]+v[1]*v[1]);return[v[0]/g,v[1]/g]}function b(v,g){var y=Math.abs(v[0]*g[0]+v[1]*g[1]);return Math.sqrt(1-y*y)/y}$.exports=function(v,g,y,p){var m=g.xaxis,w=g.yaxis;x.makeTraceGroups(p,y,"contour").each(function(u){var S=k.select(this),_=u[0],E=_.trace,L=E._carpetTrace=i(v,E),C=v.calcdata[L.index][0];if(L.visible&&L.visible!=="legendonly"){var P=_.a,I=_.b,U=E.contours,z=n(U,g,_),H=U.type==="constraint",F=U._operation,N=H?F==="="?"lines":"fill":U.coloring,B=[[P[0],I[I.length-1]],[P[P.length-1],I[I.length-1]],[P[P.length-1],I[0]],[P[0],I[0]]];d(z);var j=1e-8*(P[P.length-1]-P[0]),K=1e-8*(I[I.length-1]-I[0]);s(z,j,K);var G,V,W,J,X=z;U.type==="constraint"&&(X=r(z,F)),function(se,fe){var ye,ge,he,ve,Oe,xe,ke,Me,Te;for(ye=0;ye<se.length;ye++){for(Oe=(ve=se[ye]).pedgepaths=[],xe=ve.ppaths=[],ge=0;ge<ve.edgepaths.length;ge++){for(Te=ve.edgepaths[ge],ke=[],he=0;he<Te.length;he++)ke[he]=fe(Te[he]);Oe.push(ke)}for(ge=0;ge<ve.paths.length;ge++){for(Te=ve.paths[ge],Me=[],he=0;he<Te.length;he++)Me[he]=fe(Te[he]);xe.push(Me)}}}(z,ie);var ee=[];for(J=C.clipsegments.length-1;J>=0;J--)G=C.clipsegments[J],V=A([],G.x,m.c2p),W=A([],G.y,w.c2p),V.reverse(),W.reverse(),ee.push(l(V,W,G.bicubic));var re="M"+ee.join("L")+"Z";(function(se,fe,ye,ge,he,ve){var Oe,xe,ke,Me,Te=x.ensureSingle(se,"g","contourbg").selectAll("path").data(ve!=="fill"||he?[]:[0]);Te.enter().append("path"),Te.exit().remove();var Q=[];for(Me=0;Me<fe.length;Me++)Oe=fe[Me],xe=A([],Oe.x,ye.c2p),ke=A([],Oe.y,ge.c2p),Q.push(l(xe,ke,Oe.bicubic));Te.attr("d","M"+Q.join("L")+"Z").style("stroke","none")})(S,C.clipsegments,m,w,H,N),function(se,fe,ye,ge,he,ve,Oe,xe,ke,Me,Te){var Q=Me==="fill";Q&&a(he,se.contours);var oe=x.ensureSingle(fe,"g","contourfill").selectAll("path").data(Q?he:[]);oe.enter().append("path"),oe.exit().remove(),oe.each(function(ce){var me=(ce.prefixBoundary?Te:"")+function(Ae,Ie,Ce,Re,le,de,_e,Fe){var Ve,He,nt,tt,ot,dt,kt,mt="",wt=Ie.edgepaths.map(function(Se,ze){return ze}),Lt=!0,Ct=1e-4*Math.abs(Ce[0][0]-Ce[2][0]),It=1e-4*Math.abs(Ce[0][1]-Ce[2][1]);function Ut(Se){return Math.abs(Se[1]-Ce[0][1])<It}function Rt(Se){return Math.abs(Se[1]-Ce[2][1])<It}function Ge(Se){return Math.abs(Se[0]-Ce[0][0])<Ct}function We(Se){return Math.abs(Se[0]-Ce[2][0])<Ct}function Be(Se,ze){var Ke,st,ct,Tt,Et="";for(Ut(Se)&&!We(Se)||Rt(Se)&&!Ge(Se)?(Tt=le.aaxis,ct=c(le,de,[Se[0],ze[0]],.5*(Se[1]+ze[1]))):(Tt=le.baxis,ct=c(le,de,.5*(Se[0]+ze[0]),[Se[1],ze[1]])),Ke=1;Ke<ct.length;Ke++)for(Et+=Tt.smoothing?"C":"L",st=0;st<ct[Ke].length;st++){var At=ct[Ke][st];Et+=[_e.c2p(At[0]),Fe.c2p(At[1])]+" "}return Et}for(Ve=0,He=null;wt.length;){var Ye=Ie.edgepaths[Ve][0];for(He&&(mt+=Be(He,Ye)),kt=T.smoothopen(Ie.edgepaths[Ve].map(Re),Ie.smoothing),mt+=Lt?kt:kt.replace(/^M/,"L"),wt.splice(wt.indexOf(Ve),1),He=Ie.edgepaths[Ve][Ie.edgepaths[Ve].length-1],ot=-1,tt=0;tt<4;tt++){if(!He){x.log("Missing end?",Ve,Ie);break}for(Ut(He)&&!We(He)?nt=Ce[1]:Ge(He)?nt=Ce[0]:Rt(He)?nt=Ce[3]:We(He)&&(nt=Ce[2]),dt=0;dt<Ie.edgepaths.length;dt++){var rt=Ie.edgepaths[dt][0];Math.abs(He[0]-nt[0])<Ct?Math.abs(He[0]-rt[0])<Ct&&(rt[1]-He[1])*(nt[1]-rt[1])>=0&&(nt=rt,ot=dt):Math.abs(He[1]-nt[1])<It?Math.abs(He[1]-rt[1])<It&&(rt[0]-He[0])*(nt[0]-rt[0])>=0&&(nt=rt,ot=dt):x.log("endpt to newendpt is not vert. or horz.",He,nt,rt)}if(ot>=0)break;mt+=Be(He,nt),He=nt}if(ot===Ie.edgepaths.length){x.log("unclosed perimeter path");break}Ve=ot,(Lt=wt.indexOf(Ve)===-1)&&(Ve=wt[0],mt+=Be(He,nt)+"Z",He=null)}for(Ve=0;Ve<Ie.paths.length;Ve++)mt+=T.smoothclosed(Ie.paths[Ve].map(Re),Ie.smoothing);return mt}(0,ce,ve,Oe,xe,ke,ye,ge);me?k.select(this).attr("d",me).style("stroke","none"):k.select(this).remove()})}(E,S,m,w,X,B,ie,L,C,N,re),function(se,fe,ye,ge,he,ve,Oe){var xe=x.ensureSingle(se,"g","contourlines"),ke=he.showlines!==!1,Me=he.showlabels,Te=ke&&Me,Q=t.createLines(xe,ke||Me,fe),oe=t.createLineClip(xe,Te,ye,ge.trace.uid),ce=se.selectAll("g.contourlabels").data(Me?[0]:[]);if(ce.exit().remove(),ce.enter().append("g").classed("contourlabels",!0),Me){var me=ve.xaxis,Ae=ve.yaxis,Ie=me._length,Ce=Ae._length,Re=[[[0,0],[Ie,0],[Ie,Ce],[0,Ce]]],le=[];x.clearLocationCache();var de=t.labelFormatter(ye,ge),_e=T.tester.append("text").attr("data-notex",1).call(T.font,he.labelfont),Fe={left:0,right:Ie,center:Ie/2,top:0,bottom:Ce,middle:Ce/2},Ve=Math.sqrt(Ie*Ie+Ce*Ce),He=o.LABELDISTANCE*Ve/Math.max(1,fe.length/o.LABELINCREASE);Q.each(function(nt){var tt=t.calcTextOpts(nt.level,de,_e,ye);k.select(this).selectAll("path").each(function(ot){var dt=this,kt=x.getVisibleSegment(dt,Fe,tt.height/2);if(kt&&(function(Ct,It,Ut,Rt,Ge,We){for(var Be,Ye=0;Ye<Ut.pedgepaths.length;Ye++)It===Ut.pedgepaths[Ye]&&(Be=Ut.edgepaths[Ye]);if(Be){var rt=Ge.a[0],Se=Ge.a[Ge.a.length-1],ze=Ge.b[0],Ke=Ge.b[Ge.b.length-1],st=h(Ct,0,1),ct=h(Ct,Rt.total,Rt.total-1),Tt=At(Be[0],st),Et=Rt.total-At(Be[Be.length-1],ct);Rt.min<Tt&&(Rt.min=Tt),Rt.max>Et&&(Rt.max=Et),Rt.len=Rt.max-Rt.min}function At(ht,pt){var gt,Pt=0,Ot=.1;return(Math.abs(ht[0]-rt)<Ot||Math.abs(ht[0]-Se)<Ot)&&(gt=f(Ge.dxydb_rough(ht[0],ht[1],Ot)),Pt=Math.max(Pt,We*b(pt,gt)/2)),(Math.abs(ht[1]-ze)<Ot||Math.abs(ht[1]-Ke)<Ot)&&(gt=f(Ge.dxyda_rough(ht[0],ht[1],Ot)),Pt=Math.max(Pt,We*b(pt,gt)/2)),Pt}}(dt,ot,nt,kt,Oe,tt.height),!(kt.len<(tt.width+tt.height)*o.LABELMIN)))for(var mt=Math.min(Math.ceil(kt.len/He),o.LABELMAX),wt=0;wt<mt;wt++){var Lt=t.findBestTextLocation(dt,kt,tt,le,Fe);if(!Lt)break;t.addLabelData(Lt,tt,le,Re)}})}),_e.remove(),t.drawLabels(ce,le,ye,oe,Te?Re:null)}Me&&!ke&&Q.remove()}(S,z,v,_,U,g,L),T.setClipUrl(S,L._clipPathId,v)}function ie(se){var fe=L.ab2xy(se[0],se[1],!0);return[m.c2p(fe[0]),w.c2p(fe[1])]}})}},64096:function($,R,e){var k=e(50693),A=e(5386).f,l=e(9012),T=e(99181),x=e(1426).extendFlat;$.exports=x({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:x({},l.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:A(),showlegend:x({},l.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function($,R,e){var k=e(92770),A=e(71828).isArrayOrTypedArray,l=e(50606).BADNUM,T=e(78803),x=e(71828)._;$.exports=function(d,s){for(var t=s._length,o=new Array(t),r=s.z,n=A(r)&&r.length,a=0;a<t;a++){var i=o[a]={},c=s.lon[a],h=s.lat[a];if(i.lonlat=k(c)&&k(h)?[+c,+h]:[l,l],n){var f=r[a];i.z=k(f)?f:l}}return T(d,s,{vals:n?r:[0,1],containerStr:"",cLetter:"z"}),t&&(o[0].t={labels:{lat:x(d,"lat:")+" ",lon:x(d,"lon:")+" "}}),o}},52414:function($,R,e){var k=e(92770),A=e(71828),l=e(7901),T=e(21081),x=e(50606).BADNUM,d=e(18214).makeBlank;$.exports=function(s){var t=s[0].trace,o=t.visible===!0&&t._length!==0,r=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:d()};if(!o)return r;var n,a=[],i=t.z,c=t.radius,h=A.isArrayOrTypedArray(i)&&i.length,f=A.isArrayOrTypedArray(c);for(n=0;n<s.length;n++){var b=s[n],v=b.lonlat;if(v[0]!==x){var g={};if(h){var y=b.z;g.z=y!==x?y:0}f&&(g.r=k(c[n])&&c[n]>0?+c[n]:0),a.push({type:"Feature",geometry:{type:"Point",coordinates:v},properties:g})}}var p=T.extractOpts(t),m=p.reversescale?T.flipScale(p.colorscale):p.colorscale,w=m[0][1],u=["interpolate",["linear"],["heatmap-density"],0,l.opacity(w)<1?w:l.addOpacity(w,0)];for(n=1;n<m.length;n++)u.push(m[n][0],m[n][1]);var S=["interpolate",["linear"],["get","z"],p.min,0,p.max,1];return A.extendFlat(r.heatmap.paint,{"heatmap-weight":h?S:1/(p.max-p.min),"heatmap-color":u,"heatmap-radius":f?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),r.geojson={type:"FeatureCollection",features:a},r.heatmap.layout.visibility="visible",r}},79429:function($,R,e){var k=e(71828),A=e(1586),l=e(64096);$.exports=function(T,x,d,s){function t(a,i){return k.coerce(T,x,l,a,i)}var o=t("lon")||[],r=t("lat")||[],n=Math.min(o.length,r.length);n?(x._length=n,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),A(T,x,s,t,{prefix:"",cLetter:"z"})):x.visible=!1}},62474:function($){$.exports=function(R,e){return R.lon=e.lon,R.lat=e.lat,R.z=e.z,R}},84684:function($,R,e){var k=e(89298),A=e(28178).hoverPoints,l=e(28178).getExtraText;$.exports=function(T,x,d){var s=A(T,x,d);if(s){var t=s[0],o=t.cd,r=o[0].trace,n=o[t.index];if(delete t.color,"z"in n){var a=t.subplot.mockAxis;t.z=n.z,t.zLabel=k.tickText(a,a.c2l(n.z),"hover").text}return t.extraText=l(r,n,o[0].t.labels),[t]}}},93814:function($,R,e){$.exports={attributes:e(64096),supplyDefaults:e(79429),colorbar:e(61243),formatLabels:e(15636),calc:e(85070),plot:e(7336),hoverPoints:e(84684),eventData:e(62474),getBelow:function(k,A){for(var l=A.getMapLayers(),T=0;T<l.length;T++){var x=l[T],d=x.id;if(x.type==="symbol"&&typeof d=="string"&&d.indexOf("plotly-")===-1)return d}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function($,R,e){var k=e(52414),A=e(77734).traceLayerPrefix;function l(x,d){this.type="densitymapbox",this.subplot=x,this.uid=d,this.sourceId="source-"+d,this.layerList=[["heatmap",A+d+"-heatmap"]],this.below=null}var T=l.prototype;T.update=function(x){var d=this.subplot,s=this.layerList,t=k(x),o=d.belowLookup["trace-"+this.uid];d.map.getSource(this.sourceId).setData(t.geojson),o!==this.below&&(this._removeLayers(),this._addLayers(t,o),this.below=o);for(var r=0;r<s.length;r++){var n=s[r],a=n[0],i=n[1],c=t[a];d.setOptions(i,"setLayoutProperty",c.layout),c.layout.visibility==="visible"&&d.setOptions(i,"setPaintProperty",c.paint)}},T._addLayers=function(x,d){for(var s=this.subplot,t=this.layerList,o=this.sourceId,r=0;r<t.length;r++){var n=t[r],a=n[0],i=x[a];s.addLayer({type:a,id:n[1],source:o,layout:i.layout,paint:i.paint},d)}},T._removeLayers=function(){for(var x=this.subplot.map,d=this.layerList,s=d.length-1;s>=0;s--)x.removeLayer(d[s][1])},T.dispose=function(){var x=this.subplot.map;this._removeLayers(),x.removeSource(this.sourceId)},$.exports=function(x,d){var s=d[0].trace,t=new l(x,s.uid),o=t.sourceId,r=k(d),n=t.below=x.belowLookup["trace-"+s.uid];return x.map.addSource(o,{type:"geojson",data:r.geojson}),t._addLayers(r,n),t}},49789:function($,R,e){var k=e(71828);$.exports=function(A,l){for(var T=0;T<A.length;T++)A[T].i=T;k.mergeArray(l.text,A,"tx"),k.mergeArray(l.hovertext,A,"htx");var x=l.marker;if(x){k.mergeArray(x.opacity,A,"mo"),k.mergeArray(x.color,A,"mc");var d=x.line;d&&(k.mergeArray(d.color,A,"mlc"),k.mergeArrayCastPositive(d.width,A,"mlw"))}}},1285:function($,R,e){var k,A=e(1486),l=e(82196).line,T=e(9012),x=e(12663).axisHoverFormat,d=e(5386).f,s=e(5386).s,t=e(18517),o=e(1426).extendFlat,r=e(7901);$.exports={x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),hovertext:A.hovertext,hovertemplate:d({},{keys:t.eventDataKeys}),hoverinfo:o({},T.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:s({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:A.text,textposition:A.textposition,insidetextanchor:o({},A.insidetextanchor,{dflt:"middle"}),textangle:o({},A.textangle,{dflt:0}),textfont:A.textfont,insidetextfont:A.insidetextfont,outsidetextfont:A.outsidetextfont,constraintext:A.constraintext,cliponaxis:A.cliponaxis,orientation:o({},A.orientation,{}),offset:o({},A.offset,{arrayOk:!1}),width:o({},A.width,{arrayOk:!1}),marker:(k=o({},A.marker),delete k.pattern,k),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:o({},l.color,{dflt:r.defaultLine}),width:o({},l.width,{dflt:0,editType:"plot"}),dash:l.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup}},9532:function($,R,e){var k=e(89298),A=e(42973),l=e(49789),T=e(66279),x=e(50606).BADNUM;function d(s){return s===x?0:s}$.exports=function(s,t){var o,r,n,a,i,c,h,f,b=k.getFromId(s,t.xaxis||"x"),v=k.getFromId(s,t.yaxis||"y");t.orientation==="h"?(o=b.makeCalcdata(t,"x"),n=v.makeCalcdata(t,"y"),a=A(t,v,"y",n),i=!!t.yperiodalignment,c="y"):(o=v.makeCalcdata(t,"y"),n=b.makeCalcdata(t,"x"),a=A(t,b,"x",n),i=!!t.xperiodalignment,c="x"),r=a.vals;var g,y=Math.min(r.length,o.length),p=new Array(y);for(t._base=[],h=0;h<y;h++){o[h]<0&&(o[h]=x);var m=!1;o[h]!==x&&h+1<y&&o[h+1]!==x&&(m=!0),f=p[h]={p:r[h],s:o[h],cNext:m},t._base[h]=-.5*f.s,i&&(p[h].orig_p=n[h],p[h][c+"End"]=a.ends[h],p[h][c+"Start"]=a.starts[h]),t.ids&&(f.id=String(t.ids[h])),h===0&&(p[0].vTotal=0),p[0].vTotal+=d(f.s),f.begR=d(f.s)/d(p[0].s)}for(h=0;h<y;h++)(f=p[h]).s!==x&&(f.sumR=f.s/p[0].vTotal,f.difR=g!==void 0?f.s/g:1,g=f.s);return l(p,t),T(p,t),p}},18517:function($){$.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function($,R,e){var k=e(11661).setGroupPositions;$.exports=function(A,l){var T,x,d=A._fullLayout,s=A._fullData,t=A.calcdata,o=l.xaxis,r=l.yaxis,n=[],a=[],i=[];for(x=0;x<s.length;x++){var c=s[x],h=c.orientation==="h";c.visible===!0&&c.xaxis===o._id&&c.yaxis===r._id&&c.type==="funnel"&&(T=t[x],h?i.push(T):a.push(T),n.push(T))}var f={mode:d.funnelmode,norm:d.funnelnorm,gap:d.funnelgap,groupgap:d.funnelgroupgap};for(k(A,o,r,a,f),k(A,r,o,i,f),x=0;x<n.length;x++){T=n[x];for(var b=0;b<T.length;b++)b+1<T.length&&(T[b].nextP0=T[b+1].p0,T[b].nextS0=T[b+1].s0,T[b].nextP1=T[b+1].p1,T[b].nextS1=T[b+1].s1)}}},26199:function($,R,e){var k=e(71828),A=e(26125),l=e(90769).handleText,T=e(67513),x=e(73927),d=e(1285),s=e(7901);$.exports={supplyDefaults:function(t,o,r,n){function a(f,b){return k.coerce(t,o,d,f,b)}if(T(t,o,n,a)){x(t,o,n,a),a("xhoverformat"),a("yhoverformat"),a("orientation",o.y&&!o.x?"v":"h"),a("offset"),a("width");var i=a("text");a("hovertext"),a("hovertemplate");var c=a("textposition");l(t,o,n,a,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o.textposition==="none"||o.texttemplate||a("textinfo",Array.isArray(i)?"text+value":"value");var h=a("marker.color",r);a("marker.line.color",s.defaultLine),a("marker.line.width"),a("connector.visible")&&(a("connector.fillcolor",function(f){var b=k.isArrayOrTypedArray(f)?"#000":f;return s.addOpacity(b,.5*s.opacity(b))}(h)),a("connector.line.width")&&(a("connector.line.color"),a("connector.line.dash")))}else o.visible=!1},crossTraceDefaults:function(t,o){var r,n;function a(c){return k.coerce(n._input,n,d,c)}if(o.funnelmode==="group")for(var i=0;i<t.length;i++)r=(n=t[i])._input,A(r,n,o,a)}}},34598:function($){$.exports=function(R,e){return R.x="xVal"in e?e.xVal:e.x,R.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(R.percentInitial=e.percentInitial),"percentPrevious"in e&&(R.percentPrevious=e.percentPrevious),"percentTotal"in e&&(R.percentTotal=e.percentTotal),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),R}},63341:function($,R,e){var k=e(7901).opacity,A=e(95423).hoverOnBars,l=e(71828).formatPercent;$.exports=function(T,x,d,s,t){var o=A(T,x,d,s,t);if(o){var r=o.cd,n=r[0].trace,a=n.orientation==="h",i=r[o.index];o[(a?"x":"y")+"LabelVal"]=i.s,o.percentInitial=i.begR,o.percentInitialLabel=l(i.begR,1),o.percentPrevious=i.difR,o.percentPreviousLabel=l(i.difR,1),o.percentTotal=i.sumR,o.percentTotalLabel=l(i.sumR,1);var c=i.hi||n.hoverinfo,h=[];if(c&&c!=="none"&&c!=="skip"){var f=c==="all",b=c.split("+"),v=function(g){return f||b.indexOf(g)!==-1};v("percent initial")&&h.push(o.percentInitialLabel+" of initial"),v("percent previous")&&h.push(o.percentPreviousLabel+" of previous"),v("percent total")&&h.push(o.percentTotalLabel+" of total")}return o.extraText=h.join("<br>"),o.color=function(g,y){var p=g.marker,m=y.mc||p.color,w=y.mlc||p.line.color,u=y.mlw||p.line.width;return k(m)?m:k(w)&&u?w:void 0}(n,i),[o]}}},51759:function($,R,e){$.exports={attributes:e(1285),layoutAttributes:e(10440),supplyDefaults:e(26199).supplyDefaults,crossTraceDefaults:e(26199).crossTraceDefaults,supplyLayoutDefaults:e(93138),calc:e(9532),crossTraceCalc:e(8984),plot:e(80461),style:e(68266).style,hoverPoints:e(63341),eventData:e(34598),selectPoints:e(81974),moduleType:"trace",name:"funnel",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function($){$.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function($,R,e){var k=e(71828),A=e(10440);$.exports=function(l,T,x){var d=!1;function s(r,n){return k.coerce(l,T,A,r,n)}for(var t=0;t<x.length;t++){var o=x[t];if(o.visible&&o.type==="funnel"){d=!0;break}}d&&(s("funnelmode"),s("funnelgap",.2),s("funnelgroupgap"))}},80461:function($,R,e){var k=e(39898),A=e(71828),l=e(91424),T=e(50606).BADNUM,x=e(17295),d=e(72597).clearMinTextSize;function s(t,o,r,n){var a=[],i=[],c=n?o:r,h=n?r:o;return a[0]=c.c2p(t.s0,!0),i[0]=h.c2p(t.p0,!0),a[1]=c.c2p(t.s1,!0),i[1]=h.c2p(t.p1,!0),a[2]=c.c2p(t.nextS0,!0),i[2]=h.c2p(t.nextP0,!0),a[3]=c.c2p(t.nextS1,!0),i[3]=h.c2p(t.nextP1,!0),n?[a,i]:[i,a]}$.exports=function(t,o,r,n){var a=t._fullLayout;d("funnel",a),function(i,c,h,f){var b=c.xaxis,v=c.yaxis;A.makeTraceGroups(f,h,"trace bars").each(function(g){var y=k.select(this),p=g[0].trace,m=A.ensureSingle(y,"g","regions");if(p.connector&&p.connector.visible){var w=p.orientation==="h",u=m.selectAll("g.region").data(A.identity);u.enter().append("g").classed("region",!0),u.exit().remove();var S=u.size();u.each(function(_,E){if(E===S-1||_.cNext){var L=s(_,b,v,w),C=L[0],P=L[1],I="";C[0]!==T&&P[0]!==T&&C[1]!==T&&P[1]!==T&&C[2]!==T&&P[2]!==T&&C[3]!==T&&P[3]!==T&&(I+=w?"M"+C[0]+","+P[1]+"L"+C[2]+","+P[2]+"H"+C[3]+"L"+C[1]+","+P[1]+"Z":"M"+C[1]+","+P[1]+"L"+C[2]+","+P[3]+"V"+P[2]+"L"+C[1]+","+P[0]+"Z"),I===""&&(I="M0,0Z"),A.ensureSingle(k.select(this),"path").attr("d",I).call(l.setClipUrl,c.layerClipId,i)}})}else m.remove()})}(t,o,r,n),function(i,c,h,f){var b=c.xaxis,v=c.yaxis;A.makeTraceGroups(f,h,"trace bars").each(function(g){var y=k.select(this),p=g[0].trace,m=A.ensureSingle(y,"g","lines");if(p.connector&&p.connector.visible&&p.connector.line.width){var w=p.orientation==="h",u=m.selectAll("g.line").data(A.identity);u.enter().append("g").classed("line",!0),u.exit().remove();var S=u.size();u.each(function(_,E){if(E===S-1||_.cNext){var L=s(_,b,v,w),C=L[0],P=L[1],I="";C[3]!==void 0&&P[3]!==void 0&&(w?(I+="M"+C[0]+","+P[1]+"L"+C[2]+","+P[2],I+="M"+C[1]+","+P[1]+"L"+C[3]+","+P[2]):(I+="M"+C[1]+","+P[1]+"L"+C[2]+","+P[3],I+="M"+C[1]+","+P[0]+"L"+C[2]+","+P[2])),I===""&&(I="M0,0Z"),A.ensureSingle(k.select(this),"path").attr("d",I).call(l.setClipUrl,c.layerClipId,i)}})}else m.remove()})}(t,o,r,n),x.plot(t,o,r,n,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})}},68266:function($,R,e){var k=e(39898),A=e(91424),l=e(7901),T=e(37822).DESELECTDIM,x=e(16688),d=e(72597).resizeText,s=x.styleTextPoints;$.exports={style:function(t,o,r){var n=r||k.select(t).selectAll("g.funnellayer").selectAll("g.trace");d(t,n,"funnel"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var i=k.select(this),c=a[0].trace;i.selectAll(".point > path").each(function(h){if(!h.isBlank){var f=c.marker;k.select(this).call(l.fill,h.mc||f.color).call(l.stroke,h.mlc||f.line.color).call(A.dashLine,f.line.dash,h.mlw||f.line.width).style("opacity",c.selectedpoints&&!h.selected?T:1)}}),s(i,c,t),i.selectAll(".regions").each(function(){k.select(this).selectAll("path").style("stroke-width",0).call(l.fill,c.connector.fillcolor)}),i.selectAll(".lines").each(function(){var h=c.connector.line;A.lineGroupStyle(k.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},86807:function($,R,e){var k=e(34e3),A=e(9012),l=e(27670).Y,T=e(5386).f,x=e(5386).s,d=e(1426).extendFlat;$.exports={labels:k.labels,label0:k.label0,dlabel:k.dlabel,values:k.values,marker:{colors:k.marker.colors,line:{color:d({},k.marker.line.color,{dflt:null}),width:d({},k.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:k.text,hovertext:k.hovertext,scalegroup:d({},k.scalegroup,{}),textinfo:d({},k.textinfo,{flags:["label","text","value","percent"]}),texttemplate:x({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:d({},A.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:d({},k.textposition,{values:["inside","none"],dflt:"inside"}),textfont:k.textfont,insidetextfont:k.insidetextfont,title:{text:k.title.text,font:k.title.font,position:d({},k.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:l({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function($,R,e){var k=e(74875);R.name="funnelarea",R.plot=function(A,l,T,x){k.plotBasePlot(R.name,A,l,T,x)},R.clean=function(A,l,T,x){k.cleanBasePlot(R.name,A,l,T,x)}},89574:function($,R,e){var k=e(32354);$.exports={calc:function(A,l){return k.calc(A,l)},crossTraceCalc:function(A){k.crossTraceCalc(A,{type:"funnelarea"})}}},86282:function($,R,e){var k=e(71828),A=e(86807),l=e(27670).c,T=e(90769).handleText,x=e(37434).handleLabelsAndValues;$.exports=function(d,s,t,o){function r(g,y){return k.coerce(d,s,A,g,y)}var n=r("labels"),a=r("values"),i=x(n,a),c=i.len;if(s._hasLabels=i.hasLabels,s._hasValues=i.hasValues,!s._hasLabels&&s._hasValues&&(r("label0"),r("dlabel")),c){s._length=c,r("marker.line.width")&&r("marker.line.color",o.paper_bgcolor),r("marker.colors"),r("scalegroup");var h,f=r("text"),b=r("texttemplate");if(b||(h=r("textinfo",Array.isArray(f)?"text+percent":"percent")),r("hovertext"),r("hovertemplate"),b||h&&h!=="none"){var v=r("textposition");T(d,s,o,r,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}l(s,o,r),r("title.text")&&(r("title.position"),k.coerceFont(r,"title.font",o.font)),r("aspectratio"),r("baseratio")}else s.visible=!1}},10421:function($,R,e){$.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(6452),categories:["pie-like","funnelarea","showLegend"],attributes:e(86807),layoutAttributes:e(80097),supplyDefaults:e(86282),supplyLayoutDefaults:e(57402),calc:e(89574).calc,crossTraceCalc:e(89574).crossTraceCalc,plot:e(79187),style:e(71858),styleOne:e(63463),meta:{}}},80097:function($,R,e){var k=e(92774).hiddenlabels;$.exports={hiddenlabels:k,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57402:function($,R,e){var k=e(71828),A=e(80097);$.exports=function(l,T){function x(d,s){return k.coerce(l,T,A,d,s)}x("hiddenlabels"),x("funnelareacolorway",T.colorway),x("extendfunnelareacolors")}},79187:function($,R,e){var k=e(39898),A=e(91424),l=e(71828),T=l.strScale,x=l.strTranslate,d=e(63893),s=e(17295).toMoveInsideBar,t=e(72597),o=t.recordMinTextSize,r=t.clearMinTextSize,n=e(53581),a=e(14575),i=a.attachFxHandlers,c=a.determineInsideTextFont,h=a.layoutAreas,f=a.prerenderTitles,b=a.positionTitleOutside,v=a.formatSliceLabel;function g(y,p){return"l"+(p[0]-y[0])+","+(p[1]-y[1])}$.exports=function(y,p){var m=y._context.staticPlot,w=y._fullLayout;r("funnelarea",w),f(p,y),h(p,w._size),l.makeTraceGroups(w._funnelarealayer,p,"trace").each(function(u){var S=k.select(this),_=u[0],E=_.trace;(function(L){if(L.length){var C=L[0],P=C.trace,I=P.aspectratio,U=P.baseratio;U>.999&&(U=.999);var z,H,F,N=Math.pow(U,2),B=C.vTotal,j=B,K=B*N/(1-N)/B,G=[];for(G.push(ke()),H=L.length-1;H>-1;H--)if(!(F=L[H]).hidden){var V=F.v/j;K+=V,G.push(ke())}var W=1/0,J=-1/0;for(H=0;H<G.length;H++)z=G[H],W=Math.min(W,z[1]),J=Math.max(J,z[1]);for(H=0;H<G.length;H++)G[H][1]-=(J+W)/2;var X=G[G.length-1][0],ee=C.r,re=(J-W)/2,ie=ee/X,se=ee/re*I;for(C.r=se*re,H=0;H<G.length;H++)G[H][0]*=ie,G[H][1]*=se;var fe,ye,ge=[-(z=G[0])[0],z[1]],he=[z[0],z[1]],ve=0;for(H=L.length-1;H>-1;H--)if(!(F=L[H]).hidden){var Oe=G[ve+=1][0],xe=G[ve][1];F.TL=[-Oe,xe],F.TR=[Oe,xe],F.BL=ge,F.BR=he,F.pxmid=(fe=F.TR,ye=F.BR,[.5*(fe[0]+ye[0]),.5*(fe[1]+ye[1])]),ge=F.TL,he=F.TR}}function ke(){var Me,Te={x:Me=Math.sqrt(K),y:-Me};return[Te.x,Te.y]}})(u),S.each(function(){var L=k.select(this).selectAll("g.slice").data(u);L.enter().append("g").classed("slice",!0),L.exit().remove(),L.each(function(P,I){if(P.hidden)k.select(this).selectAll("path,g").remove();else{P.pointNumber=P.i,P.curveNumber=E.index;var U=_.cx,z=_.cy,H=k.select(this),F=H.selectAll("path.surface").data([P]);F.enter().append("path").classed("surface",!0).style({"pointer-events":m?"none":"all"}),H.call(i,y,u);var N="M"+(U+P.TR[0])+","+(z+P.TR[1])+g(P.TR,P.BR)+g(P.BR,P.BL)+g(P.BL,P.TL)+"Z";F.attr("d",N),v(y,P,_);var B=n.castOption(E.textposition,P.pts),j=H.selectAll("g.slicetext").data(P.text&&B!=="none"?[0]:[]);j.enter().append("g").classed("slicetext",!0),j.exit().remove(),j.each(function(){var K=l.ensureSingle(k.select(this),"text","",function(ie){ie.attr("data-notex",1)}),G=l.ensureUniformFontSize(y,c(E,P,w.font));K.text(P.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(A.font,G).call(d.convertToTspans,y);var V,W,J,X=A.bBox(K.node()),ee=Math.min(P.BL[1],P.BR[1])+z,re=Math.max(P.TL[1],P.TR[1])+z;W=Math.max(P.TL[0],P.BL[0])+U,J=Math.min(P.TR[0],P.BR[0])+U,(V=s(W,J,ee,re,X,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=G.size,o(E.type,V,w),u[I].transform=V,l.setTransormAndDisplay(K,V)})}});var C=k.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);C.enter().append("g").classed("titletext",!0),C.exit().remove(),C.each(function(){var P=l.ensureSingle(k.select(this),"text","",function(z){z.attr("data-notex",1)}),I=E.title.text;E._meta&&(I=l.templateString(I,E._meta)),P.text(I).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(A.font,E.title.font).call(d.convertToTspans,y);var U=b(_,w._size);P.attr("transform",x(U.x,U.y)+T(Math.min(1,U.scale))+x(U.tx,U.ty))})})})}},71858:function($,R,e){var k=e(39898),A=e(63463),l=e(72597).resizeText;$.exports=function(T){var x=T._fullLayout._funnelarealayer.selectAll(".trace");l(T,x,"funnelarea"),x.each(function(d){var s=d[0].trace,t=k.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(o){k.select(this).call(A,o,s)})})}},21606:function($,R,e){var k=e(82196),A=e(9012),l=e(41940),T=e(12663).axisHoverFormat,x=e(5386).f,d=e(5386).s,s=e(50693),t=e(1426).extendFlat;$.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},k.x,{impliedEdits:{xtype:"array"}}),x0:t({},k.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},k.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},k.y,{impliedEdits:{ytype:"array"}}),y0:t({},k.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},k.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},k.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},k.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},k.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},k.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},k.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},k.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:x(),texttemplate:d({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:l({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},A.showlegend,{dflt:!1})},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},90757:function($,R,e){var k=e(73972),A=e(71828),l=e(89298),T=e(42973),x=e(17562),d=e(78803),s=e(68296),t=e(4742),o=e(824),r=e(43907),n=e(70769),a=e(50606).BADNUM;function i(c){for(var h=[],f=c.length,b=0;b<f;b++){var v=c[b];v!==a&&h.push(v)}return h}$.exports=function(c,h){var f,b,v,g,y,p,m,w,u,S,_,E=l.getFromId(c,h.xaxis||"x"),L=l.getFromId(c,h.yaxis||"y"),C=k.traceIs(h,"contour"),P=k.traceIs(h,"histogram"),I=k.traceIs(h,"gl2d"),U=C?"best":h.zsmooth;if(E._minDtick=0,L._minDtick=0,P)g=(_=x(c,h)).orig_x,f=_.x,b=_.x0,v=_.dx,w=_.orig_y,y=_.y,p=_.y0,m=_.dy,u=_.z;else{var z=h.z;A.isArray1D(z)?(s(h,E,L,"x","y",["z"]),f=h._x,y=h._y,z=h._z):(g=h.x?E.makeCalcdata(h,"x"):[],w=h.y?L.makeCalcdata(h,"y"):[],f=T(h,E,"x",g).vals,y=T(h,L,"y",w).vals,h._x=f,h._y=y),b=h.x0,v=h.dx,p=h.y0,m=h.dy,u=t(z,h,E,L)}function H(re){U=h._input.zsmooth=h.zsmooth=!1,A.warn('cannot use zsmooth: "fast": '+re)}if((E.rangebreaks||L.rangebreaks)&&(u=function(re,ie,se){for(var fe=[],ye=-1,ge=0;ge<se.length;ge++)if(ie[ge]!==a){fe[++ye]=[];for(var he=0;he<se[ge].length;he++)re[he]!==a&&fe[ye].push(se[ge][he])}return fe}(f,y,u),P||(f=i(f),y=i(y),h._x=f,h._y=y)),P||!C&&!h.connectgaps||(h._emptypoints=r(u),o(u,h._emptypoints)),U==="fast"){if(E.type==="log"||L.type==="log")H("log axis found");else if(!P){if(f.length){var F=(f[f.length-1]-f[0])/(f.length-1),N=Math.abs(F/100);for(S=0;S<f.length-1;S++)if(Math.abs(f[S+1]-f[S]-F)>N){H("x scale is not linear");break}}if(y.length&&U==="fast"){var B=(y[y.length-1]-y[0])/(y.length-1),j=Math.abs(B/100);for(S=0;S<y.length-1;S++)if(Math.abs(y[S+1]-y[S]-B)>j){H("y scale is not linear");break}}}}var K=A.maxRowLength(u),G=h.xtype==="scaled"?"":f,V=n(h,G,b,v,K,E),W=h.ytype==="scaled"?"":y,J=n(h,W,p,m,u.length,L);I||(h._extremes[E._id]=l.findExtremes(E,V),h._extremes[L._id]=l.findExtremes(L,J));var X={x:V,y:J,z:u,text:h._text||h.text,hovertext:h._hovertext||h.hovertext};if(h.xperiodalignment&&g&&(X.orig_x=g),h.yperiodalignment&&w&&(X.orig_y=w),G&&G.length===V.length-1&&(X.xCenter=G),W&&W.length===J.length-1&&(X.yCenter=W),P&&(X.xRanges=_.xRanges,X.yRanges=_.yRanges,X.pts=_.pts),C||d(c,h,{vals:u,cLetter:"z"}),C&&h.contours&&h.contours.coloring==="heatmap"){var ee={type:h.type==="contour"?"heatmap":"histogram2d",xcalendar:h.xcalendar,ycalendar:h.ycalendar};X.xfill=n(ee,G,b,v,K,E),X.yfill=n(ee,W,p,m,u.length,L)}return[X]}},4742:function($,R,e){var k=e(92770),A=e(71828),l=e(50606).BADNUM;$.exports=function(T,x,d,s){var t,o,r,n,a,i;function c(y){if(k(y))return+y}if(x&&x.transpose){for(t=0,a=0;a<T.length;a++)t=Math.max(t,T[a].length);if(t===0)return!1;r=function(y){return y.length},n=function(y,p,m){return(y[m]||[])[p]}}else t=T.length,r=function(y,p){return y[p].length},n=function(y,p,m){return(y[p]||[])[m]};var h=function(y,p,m){return p===l||m===l?l:n(y,p,m)};function f(y){if(x&&x.type!=="carpet"&&x.type!=="contourcarpet"&&y&&y.type==="category"&&x["_"+y._id.charAt(0)].length){var p=y._id.charAt(0),m={},w=x["_"+p+"CategoryMap"]||x[p];for(a=0;a<w.length;a++)m[w[a]]=a;return function(u){var S=m[y._categories[u]];return S+1?S:l}}return A.identity}var b=f(d),v=f(s);s&&s.type==="category"&&(t=s._categories.length);var g=new Array(t);for(a=0;a<t;a++)for(o=d&&d.type==="category"?d._categories.length:r(T,a),g[a]=new Array(o),i=0;i<o;i++)g[a][i]=c(h(T,v(a),b(i)));return g}},61243:function($){$.exports={min:"zmin",max:"zmax"}},68296:function($,R,e){var k=e(71828),A=e(50606).BADNUM,l=e(42973);$.exports=function(T,x,d,s,t,o){var r=T._length,n=x.makeCalcdata(T,s),a=d.makeCalcdata(T,t);n=l(T,x,s,n).vals,a=l(T,d,t,a).vals;var i,c,h,f,b=T.text,v=b!==void 0&&k.isArray1D(b),g=T.hovertext,y=g!==void 0&&k.isArray1D(g),p=k.distinctVals(n),m=p.vals,w=k.distinctVals(a),u=w.vals,S=[],_=u.length,E=m.length;for(i=0;i<o.length;i++)S[i]=k.init2dArray(_,E);v&&(h=k.init2dArray(_,E)),y&&(f=k.init2dArray(_,E));var L=k.init2dArray(_,E);for(i=0;i<r;i++)if(n[i]!==A&&a[i]!==A){var C=k.findBin(n[i]+p.minDiff/2,m),P=k.findBin(a[i]+w.minDiff/2,u);for(c=0;c<o.length;c++){var I=T[o[c]];S[c][P][C]=I[i],L[P][C]=i}v&&(h[P][C]=b[i]),y&&(f[P][C]=g[i])}for(T["_"+s]=m,T["_"+t]=u,c=0;c<o.length;c++)T["_"+o[c]]=S[c];v&&(T._text=h),y&&(T._hovertext=f),x&&x.type==="category"&&(T["_"+s+"CategoryMap"]=m.map(function(U){return x._categories[U]})),d&&d.type==="category"&&(T["_"+t+"CategoryMap"]=u.map(function(U){return d._categories[U]})),T._after2before=L}},76382:function($,R,e){var k=e(71828),A=e(67684),l=e(58623),T=e(73927),x=e(49901),d=e(1586),s=e(21606);$.exports=function(t,o,r,n){function a(i,c){return k.coerce(t,o,s,i,c)}A(t,o,a,n)?(T(t,o,n,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),l(a,n),x(t,o,a,n),a("hoverongaps"),a("connectgaps",k.isArray1D(o.z)&&o.zsmooth!==!1),d(t,o,n,a,{prefix:"",cLetter:"z"})):o.visible=!1}},43907:function($,R,e){var k=e(71828).maxRowLength;$.exports=function(A){var l,T,x,d,s,t,o,r,n=[],a={},i=[],c=A[0],h=[],f=[0,0,0],b=k(A);for(T=0;T<A.length;T++)for(l=h,h=c,c=A[T+1]||[],x=0;x<b;x++)h[x]===void 0&&((t=(h[x-1]!==void 0?1:0)+(h[x+1]!==void 0?1:0)+(l[x]!==void 0?1:0)+(c[x]!==void 0?1:0))?(T===0&&t++,x===0&&t++,T===A.length-1&&t++,x===h.length-1&&t++,t<4&&(a[[T,x]]=[T,x,t]),n.push([T,x,t])):i.push([T,x]));for(;i.length;){for(o={},r=!1,s=i.length-1;s>=0;s--)(t=((a[[(T=(d=i[s])[0])-1,x=d[1]]]||f)[2]+(a[[T+1,x]]||f)[2]+(a[[T,x-1]]||f)[2]+(a[[T,x+1]]||f)[2])/20)&&(o[d]=[T,x,t],i.splice(s,1),r=!0);if(!r)throw"findEmpties iterated with no new neighbors";for(d in o)a[d]=o[d],n.push(o[d])}return n.sort(function(v,g){return g[2]-v[2]})}},46248:function($,R,e){var k=e(30211),A=e(71828),l=e(89298),T=e(21081).extractOpts;$.exports=function(x,d,s,t,o){o||(o={});var r,n,a,i,c=o.isContour,h=x.cd[0],f=h.trace,b=x.xa,v=x.ya,g=h.x,y=h.y,p=h.z,m=h.xCenter,w=h.yCenter,u=h.zmask,S=f.zhoverformat,_=g,E=y;if(x.index!==!1){try{a=Math.round(x.index[1]),i=Math.round(x.index[0])}catch{return void A.error("Error hovering on heatmap, pointNumber must be [row,col], found:",x.index)}if(a<0||a>=p[0].length||i<0||i>p.length)return}else{if(k.inbox(d-g[0],d-g[g.length-1],0)>0||k.inbox(s-y[0],s-y[y.length-1],0)>0)return;if(c){var L;for(_=[2*g[0]-g[1]],L=1;L<g.length;L++)_.push((g[L]+g[L-1])/2);for(_.push([2*g[g.length-1]-g[g.length-2]]),E=[2*y[0]-y[1]],L=1;L<y.length;L++)E.push((y[L]+y[L-1])/2);E.push([2*y[y.length-1]-y[y.length-2]])}a=Math.max(0,Math.min(_.length-2,A.findBin(d,_))),i=Math.max(0,Math.min(E.length-2,A.findBin(s,E)))}var C,P,I=b.c2p(g[a]),U=b.c2p(g[a+1]),z=v.c2p(y[i]),H=v.c2p(y[i+1]);c?(C=h.orig_x||g,P=h.orig_y||y,U=I,r=C[a],H=z,n=P[i]):(C=h.orig_x||m||g,P=h.orig_y||w||y,r=m?C[a]:(C[a]+C[a+1])/2,n=w?P[i]:(P[i]+P[i+1])/2,b&&b.type==="category"&&(r=g[a]),v&&v.type==="category"&&(n=y[i]),f.zsmooth&&(I=U=b.c2p(r),z=H=v.c2p(n)));var F=p[i][a];if(u&&!u[i][a]&&(F=void 0),F!==void 0||f.hoverongaps){var N;Array.isArray(h.hovertext)&&Array.isArray(h.hovertext[i])?N=h.hovertext[i][a]:Array.isArray(h.text)&&Array.isArray(h.text[i])&&(N=h.text[i][a]);var B=T(f),j={type:"linear",range:[B.min,B.max],hoverformat:S,_separators:b._separators,_numFormat:b._numFormat},K=l.tickText(j,F,"hover").text;return[A.extendFlat(x,{index:f._after2before?f._after2before[i][a]:[i,a],distance:x.maxHoverDistance,spikeDistance:x.maxSpikeDistance,x0:I,x1:U,y0:z,y1:H,xLabelVal:r,yLabelVal:n,zLabelVal:F,zLabel:K,text:N})]}}},92165:function($,R,e){$.exports={attributes:e(21606),supplyDefaults:e(76382),calc:e(90757),plot:e(50347),colorbar:e(61243),style:e(70035),hoverPoints:e(46248),moduleType:"trace",name:"heatmap",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function($,R,e){var k=e(71828),A=[[-1,0],[1,0],[0,-1],[0,1]];function l(x){return .5-.25*Math.min(1,.5*x)}function T(x,d,s){var t,o,r,n,a,i,c,h,f,b,v,g,y,p=0;for(n=0;n<d.length;n++){for(o=(t=d[n])[0],r=t[1],v=x[o][r],b=0,f=0,a=0;a<4;a++)(c=x[o+(i=A[a])[0]])&&(h=c[r+i[1]])!==void 0&&(b===0?g=y=h:(g=Math.min(g,h),y=Math.max(y,h)),f++,b+=h);if(f===0)throw"iterateInterp2d order is wrong: no defined neighbors";x[o][r]=b/f,v===void 0?f<4&&(p=1):(x[o][r]=(1+s)*x[o][r]-s*v,y>g&&(p=Math.max(p,Math.abs(x[o][r]-v)/(y-g))))}return p}$.exports=function(x,d){var s,t=1;for(T(x,d),s=0;s<d.length&&!(d[s][2]<4);s++);for(d=d.slice(s),s=0;s<100&&t>.01;s++)t=T(x,d,l(t));return t>.01&&k.log("interp2d didn't converge quickly",t),x}},58623:function($,R,e){var k=e(71828);$.exports=function(A,l){A("texttemplate");var T=k.extendFlat({},l.font,{color:"auto",size:"auto"});k.coerceFont(A,"textfont",T)}},70769:function($,R,e){var k=e(73972),A=e(71828).isArrayOrTypedArray;$.exports=function(l,T,x,d,s,t){var o,r,n,a=[],i=k.traceIs(l,"contour"),c=k.traceIs(l,"histogram"),h=k.traceIs(l,"gl2d");if(A(T)&&T.length>1&&!c&&t.type!=="category"){var f=T.length;if(!(f<=s))return i?T.slice(0,s):T.slice(0,s+1);if(i||h)a=T.slice(0,s);else if(s===1)a=[T[0]-.5,T[0]+.5];else{for(a=[1.5*T[0]-.5*T[1]],n=1;n<f;n++)a.push(.5*(T[n-1]+T[n]));a.push(1.5*T[f-1]-.5*T[f-2])}if(f<s){var b=a[a.length-1],v=b-a[a.length-2];for(n=f;n<s;n++)b+=v,a.push(b)}}else{var g=l[t._id.charAt(0)+"calendar"];for(o=c?t.r2c(x,0,g):A(T)&&T.length===1?T[0]:x===void 0?0:(t.type==="log"?t.d2c:t.r2c)(x,0,g),r=d||1,n=i||h?0:-.5;n<s;n++)a.push(o+r*n)}return a}},50347:function($,R,e){var k=e(39898),A=e(84267),l=e(73972),T=e(91424),x=e(89298),d=e(71828),s=e(63893),t=e(8225),o=e(7901),r=e(21081).extractOpts,n=e(21081).makeColorScaleFuncFromTrace,a=e(77922),i=e(18783).LINE_SPACING,c="heatmap-label";function h(y){return y.selectAll("g."+c)}function f(y){h(y).remove()}function b(y,p){var m=p.length-2,w=d.constrain(d.findBin(y,p),0,m),u=p[w],S=p[w+1],_=d.constrain(w+(y-u)/(S-u)-.5,0,m),E=Math.round(_),L=Math.abs(_-E);return _&&_!==m&&L?{bin0:E,frac:L,bin1:Math.round(E+L/(_-E))}:{bin0:E,bin1:E,frac:0}}function v(y,p){var m=p.length-1,w=d.constrain(d.findBin(y,p),0,m),u=p[w],S=(y-u)/(p[w+1]-u)||0;return S<=0?{bin0:w,bin1:w,frac:0}:S<.5?{bin0:w,bin1:w+1,frac:S}:{bin0:w+1,bin1:w,frac:1-S}}function g(y,p,m){y[p]=m[0],y[p+1]=m[1],y[p+2]=m[2],y[p+3]=Math.round(255*m[3])}$.exports=function(y,p,m,w){var u=p.xaxis,S=p.yaxis;d.makeTraceGroups(w,m,"hm").each(function(_){var E,L,C,P,I,U,z,H,F=k.select(this),N=_[0],B=N.trace,j=B.xgap||0,K=B.ygap||0,G=N.z,V=N.x,W=N.y,J=N.xCenter,X=N.yCenter,ee=l.traceIs(B,"contour"),re=ee?"best":B.zsmooth,ie=G.length,se=d.maxRowLength(G),fe=!1,ye=!1;for(U=0;E===void 0&&U<V.length-1;)E=u.c2p(V[U]),U++;for(U=V.length-1;L===void 0&&U>0;)L=u.c2p(V[U]),U--;for(L<E&&(C=L,L=E,E=C,fe=!0),U=0;P===void 0&&U<W.length-1;)P=S.c2p(W[U]),U++;for(U=W.length-1;I===void 0&&U>0;)I=S.c2p(W[U]),U--;if(I<P&&(C=P,P=I,I=C,ye=!0),ee&&(J=V,X=W,V=N.xfill,W=N.yfill),re!=="fast"){var ge=re==="best"?0:.5;E=Math.max(-ge*u._length,E),L=Math.min((1+ge)*u._length,L),P=Math.max(-ge*S._length,P),I=Math.min((1+ge)*S._length,I)}var he,ve,Oe=Math.round(L-E),xe=Math.round(I-P);if(Oe<=0||xe<=0)return F.selectAll("image").data([]).exit().remove(),void f(F);re==="fast"?(he=se,ve=ie):(he=Oe,ve=xe);var ke=document.createElement("canvas");ke.width=he,ke.height=ve;var Me,Te,Q=ke.getContext("2d"),oe=n(B,{noNumericCheck:!0,returnArray:!0});re==="fast"?(Me=fe?function(Zn){return se-1-Zn}:d.identity,Te=ye?function(Zn){return ie-1-Zn}:d.identity):(Me=function(Zn){return d.constrain(Math.round(u.c2p(V[Zn])-E),0,Oe)},Te=function(Zn){return d.constrain(Math.round(S.c2p(W[Zn])-P),0,xe)});var ce,me,Ae,Ie,Ce=Te(0),Re=[Ce,Ce],le=fe?0:1,de=ye?0:1,_e=0,Fe=0,Ve=0,He=0;function nt(Zn,qn){if(Zn!==void 0){var ur=oe(Zn);return ur[0]=Math.round(ur[0]),ur[1]=Math.round(ur[1]),ur[2]=Math.round(ur[2]),_e+=qn,Fe+=ur[0]*qn,Ve+=ur[1]*qn,He+=ur[2]*qn,ur}return[0,0,0,0]}function tt(Zn,qn,ur,Zt){var nn=Zn[ur.bin0];if(nn===void 0)return nt(void 0,1);var zn,_n=Zn[ur.bin1],Cn=qn[ur.bin0],Un=qn[ur.bin1],Gn=_n-nn||0,ar=Cn-nn||0;return zn=_n===void 0?Un===void 0?0:Cn===void 0?2*(Un-nn):2*(2*Un-Cn-nn)/3:Un===void 0?Cn===void 0?0:2*(2*nn-_n-Cn)/3:Cn===void 0?2*(2*Un-_n-nn)/3:Un+nn-_n-Cn,nt(nn+ur.frac*Gn+Zt.frac*(ar+ur.frac*zn))}if(re){var ot,dt=0;try{ot=new Uint8Array(Oe*xe*4)}catch{ot=new Array(Oe*xe*4)}if(re==="best"){var kt,mt,wt,Lt=J||V,Ct=X||W,It=new Array(Lt.length),Ut=new Array(Ct.length),Rt=new Array(Oe),Ge=J?v:b,We=X?v:b;for(U=0;U<Lt.length;U++)It[U]=Math.round(u.c2p(Lt[U])-E);for(U=0;U<Ct.length;U++)Ut[U]=Math.round(S.c2p(Ct[U])-P);for(U=0;U<Oe;U++)Rt[U]=Ge(U,It);for(z=0;z<xe;z++)for(mt=G[(kt=We(z,Ut)).bin0],wt=G[kt.bin1],U=0;U<Oe;U++,dt+=4)g(ot,dt,Ie=tt(mt,wt,Rt[U],kt))}else for(z=0;z<ie;z++)for(Ae=G[z],Re=Te(z),U=0;U<Oe;U++)Ie=nt(Ae[U],1),g(ot,dt=4*(Re*Oe+Me(U)),Ie);var Be=Q.createImageData(Oe,xe);try{Be.data.set(ot)}catch{var Ye=Be.data,rt=Ye.length;for(z=0;z<rt;z++)Ye[z]=ot[z]}Q.putImageData(Be,0,0)}else{var Se=Math.floor(j/2),ze=Math.floor(K/2);for(z=0;z<ie;z++)if(Ae=G[z],Re.reverse(),Re[de]=Te(z+1),Re[0]!==Re[1]&&Re[0]!==void 0&&Re[1]!==void 0)for(ce=[me=Me(0),me],U=0;U<se;U++)ce.reverse(),ce[le]=Me(U+1),ce[0]!==ce[1]&&ce[0]!==void 0&&ce[1]!==void 0&&(Ie=nt(Ae[U],(ce[1]-ce[0])*(Re[1]-Re[0])),Q.fillStyle="rgba("+Ie.join(",")+")",Q.fillRect(ce[0]+Se,Re[0]+ze,ce[1]-ce[0]-j,Re[1]-Re[0]-K))}Fe=Math.round(Fe/_e),Ve=Math.round(Ve/_e),He=Math.round(He/_e);var Ke=A("rgb("+Fe+","+Ve+","+He+")");y._hmpixcount=(y._hmpixcount||0)+_e,y._hmlumcount=(y._hmlumcount||0)+_e*Ke.getLuminance();var st=F.selectAll("image").data(_);st.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),st.attr({height:xe,width:Oe,x:E,y:P,"xlink:href":ke.toDataURL("image/png")}),f(F);var ct=B.texttemplate;if(ct){var Tt=r(B),Et={type:"linear",range:[Tt.min,Tt.max],_separators:u._separators,_numFormat:u._numFormat},At=B.type==="histogram2dcontour",ht=B.type==="contour",pt=ht?ie-1:ie,gt=ht?1:0,Pt=ht?se-1:se,Ot=[];for(U=ht?1:0;U<pt;U++){var Ht;if(ht)Ht=N.y[U];else if(At){if(U===0||U===ie-1)continue;Ht=N.y[U]}else if(N.yCenter)Ht=N.yCenter[U];else{if(U+1===ie&&N.y[U+1]===void 0)continue;Ht=(N.y[U]+N.y[U+1])/2}var jt=Math.round(S.c2p(Ht));if(!(0>jt||jt>S._length))for(z=gt;z<Pt;z++){var Nt;if(ht)Nt=N.x[z];else if(At){if(z===0||z===se-1)continue;Nt=N.x[z]}else if(N.xCenter)Nt=N.xCenter[z];else{if(z+1===se&&N.x[z+1]===void 0)continue;Nt=(N.x[z]+N.x[z+1])/2}var Gt=Math.round(u.c2p(Nt));if(!(0>Gt||Gt>u._length)){var un=t({x:Nt,y:Ht},B,y._fullLayout);un.x=Nt,un.y=Ht;var pn=N.z[U][z];pn===void 0?(un.z="",un.zLabel=""):(un.z=pn,un.zLabel=x.tickText(Et,pn,"hover").text);var Kt=N.text&&N.text[U]&&N.text[U][z];Kt!==void 0&&Kt!==!1||(Kt=""),un.text=Kt;var wn=d.texttemplateString(ct,un,y._fullLayout._d3locale,un,B._meta||{});if(wn){var Bn=wn.split("<br>"),vn=Bn.length,cn=0;for(H=0;H<vn;H++)cn=Math.max(cn,Bn[H].length);Ot.push({l:vn,c:cn,t:wn,x:Gt,y:jt,z:pn})}}}}var dn=B.textfont,sn=dn.family,hn=dn.size,En=y._fullLayout.font.size;if(!hn||hn==="auto"){var Mn=1/0,Rn=1/0,Nn=0,Fn=0;for(H=0;H<Ot.length;H++){var rr=Ot[H];if(Nn=Math.max(Nn,rr.l),Fn=Math.max(Fn,rr.c),H<Ot.length-1){var $n=Ot[H+1],mr=Math.abs($n.x-rr.x),fr=Math.abs($n.y-rr.y);mr&&(Mn=Math.min(Mn,mr)),fr&&(Rn=Math.min(Rn,fr))}}isFinite(Mn)&&isFinite(Rn)?(Mn-=j,Rn-=K,Mn/=Fn,Rn/=Nn,Mn/=i/2,Rn/=i,hn=Math.min(Math.floor(Mn),Math.floor(Rn),En)):hn=En}if(hn<=0||!isFinite(hn))return;h(F).data(Ot).enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each(function(Zn){var qn=k.select(this),ur=dn.color;ur&&ur!=="auto"||(ur=o.contrast("rgba("+oe(Zn.z).join()+")")),qn.attr("data-notex",1).call(s.positionText,function(Zt){return Zt.x}(Zn),function(Zt){return Zt.y-hn*(Zt.l*i/2-1)}(Zn)).call(T.font,sn,hn,ur).text(Zn.t).call(s.convertToTspans,y)})}})}},70035:function($,R,e){var k=e(39898);$.exports=function(A){k.select(A).selectAll(".hm image").style("opacity",function(l){return l.trace.opacity})}},49901:function($){$.exports=function(R,e,k){k("zsmooth")===!1&&(k("xgap"),k("ygap")),k("zhoverformat")}},67684:function($,R,e){var k=e(92770),A=e(71828),l=e(73972);function T(x,d){var s=d(x);return(s?d(x+"type","array"):"scaled")==="scaled"&&(d(x+"0"),d("d"+x)),s}$.exports=function(x,d,s,t,o,r){var n,a,i=s("z");if(o=o||"x",r=r||"y",i===void 0||!i.length)return 0;if(A.isArray1D(x.z)){n=s(o),a=s(r);var c=A.minRowLength(n),h=A.minRowLength(a);if(c===0||h===0)return 0;d._length=Math.min(c,h,i.length)}else{if(n=T(o,s),a=T(r,s),!function(f){for(var b,v=!0,g=!1,y=!1,p=0;p<f.length;p++){if(b=f[p],!A.isArrayOrTypedArray(b)){v=!1;break}b.length>0&&(g=!0);for(var m=0;m<b.length;m++)if(k(b[m])){y=!0;break}}return v&&g&&y}(i))return 0;s("transpose"),d._length=null}return x.type==="heatmapgl"||l.getComponentMethod("calendars","handleTraceDefaults")(x,d,[o,r],t),!0}},16063:function($,R,e){for(var k=e(21606),A=e(50693),l=e(1426).extendFlat,T=e(30962).overrideAll,x=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],d={},s=0;s<x.length;s++){var t=x[s];d[t]=k[t]}d.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},l(d,A("",{cLetter:"z",autoColorDflt:!1})),$.exports=T(d,"calc","nested")},59560:function($,R,e){var k=e(9330).gl_heatmap2d,A=e(89298),l=e(78614);function T(d,s){this.scene=d,this.uid=s,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=k(d.glplot,this.options),this.heatmap._trace=this}var x=T.prototype;x.handlePick=function(d){var s=this.options,t=s.shape,o=d.pointId,r=o%t[0],n=Math.floor(o/t[0]),a=o;return{trace:this,dataCoord:d.dataCoord,traceCoord:[s.x[r],s.y[n],s.z[a]],textLabel:this.textLabels[o],name:this.name,pointIndex:[n,r],hoverinfo:this.hoverinfo}},x.update=function(d,s){var t=s[0];this.index=d.index,this.name=d.name,this.hoverinfo=d.hoverinfo;var o=t.z;this.options.z=[].concat.apply([],o);var r=o[0].length,n=o.length;this.options.shape=[r,n],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=d.zsmooth;var a=function(b){for(var v=b.colorscale,g=b.zmin,y=b.zmax,p=v.length,m=new Array(p),w=new Array(4*p),u=0;u<p;u++){var S=v[u],_=l(S[1]);m[u]=g+S[0]*(y-g);for(var E=0;E<4;E++)w[4*u+E]=_[E]}return{colorLevels:m,colorValues:w}}(d);this.options.colorLevels=a.colorLevels,this.options.colorValues=a.colorValues,this.textLabels=[].concat.apply([],d.text),this.heatmap.update(this.options);var i,c,h=this.scene.xaxis,f=this.scene.yaxis;d.zsmooth===!1&&(i={ppad:t.x[1]-t.x[0]},c={ppad:t.y[1]-t.y[0]}),d._extremes[h._id]=A.findExtremes(h,t.x,i),d._extremes[f._id]=A.findExtremes(f,t.y,c)},x.dispose=function(){this.heatmap.dispose()},$.exports=function(d,s,t){var o=new T(d,s.uid);return o.update(s,t),o}},19600:function($,R,e){var k=e(71828),A=e(67684),l=e(1586),T=e(16063);$.exports=function(x,d,s,t){function o(r,n){return k.coerce(x,d,T,r,n)}A(x,d,o,t)?(o("text"),o("zsmooth"),l(x,d,t,o,{prefix:"",cLetter:"z"})):d.visible=!1}},3325:function($,R,e){$.exports={attributes:e(16063),supplyDefaults:e(19600),colorbar:e(61243),calc:e(90757),plot:e(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:e(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function($,R,e){var k=e(1486),A=e(12663).axisHoverFormat,l=e(5386).f,T=e(5386).s,x=e(41940),d=e(17656),s=e(72406),t=e(1426).extendFlat;$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:A("x"),yhoverformat:A("y"),text:t({},k.text,{}),hovertext:t({},k.hovertext,{}),orientation:k.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:d("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:d("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:l({},{keys:s.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},k.textposition,{arrayOk:!1}),textfont:x({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:x({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:x({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:k.insidetextanchor,textangle:k.textangle,cliponaxis:k.cliponaxis,constraintext:k.constraintext,marker:k.marker,offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,selected:k.selected,unselected:k.unselected,_deprecated:{bardir:k._deprecated.bardir}}},42174:function($){$.exports=function(R,e){for(var k=R.length,A=0,l=0;l<k;l++)e[l]?(R[l]/=e[l],A+=R[l]):R[l]=null;return A}},17656:function($){$.exports=function(R,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function($,R,e){var k=e(92770);$.exports={count:function(A,l,T){return T[A]++,1},sum:function(A,l,T,x){var d=x[l];return k(d)?(d=Number(d),T[A]+=d,d):0},avg:function(A,l,T,x,d){var s=x[l];return k(s)&&(s=Number(s),T[A]+=s,d[A]++),0},min:function(A,l,T,x){var d=x[l];if(k(d)){if(d=Number(d),!k(T[A]))return T[A]=d,d;if(T[A]>d){var s=d-T[A];return T[A]=d,s}}return 0},max:function(A,l,T,x){var d=x[l];if(k(d)){if(d=Number(d),!k(T[A]))return T[A]=d,d;if(T[A]<d){var s=d-T[A];return T[A]=d,s}}return 0}}},40965:function($,R,e){var k=e(50606),A=k.ONEAVGYEAR,l=k.ONEAVGMONTH,T=k.ONEDAY,x=k.ONEHOUR,d=k.ONEMIN,s=k.ONESEC,t=e(89298).tickIncrement;function o(i,c,h,f){if(i*c<=0)return 1/0;for(var b=Math.abs(c-i),v=h.type==="date",g=r(b,v),y=0;y<10;y++){var p=r(80*g,v);if(g===p||!n(p,i,c,v,h,f))break;g=p}return g}function r(i,c){return c&&i>s?i>T?i>1.1*A?A:i>1.1*l?l:T:i>x?x:i>d?d:s:Math.pow(10,Math.floor(Math.log(i)/Math.LN10))}function n(i,c,h,f,b,v){if(f&&i>T){var g=a(c,b,v),y=a(h,b,v),p=i===A?0:1;return g[p]!==y[p]}return Math.floor(h/i)-Math.floor(c/i)>.1}function a(i,c,h){var f=c.c2d(i,A,h).split("-");return f[0]===""&&(f.unshift(),f[0]="-"+f[0]),f}$.exports=function(i,c,h,f,b){var v,g,y=-1.1*c,p=-.1*c,m=i-p,w=h[0],u=h[1],S=Math.min(o(w+p,w+m,f,b),o(u+p,u+m,f,b)),_=Math.min(o(w+y,w+p,f,b),o(u+y,u+p,f,b));if(S>_&&_<Math.abs(u-w)/4e3?(v=S,g=!1):(v=Math.min(S,_),g=!0),f.type==="date"&&v>T){var E=v===A?1:6,L=v===A?"M12":"M1";return function(C,P){var I=f.c2d(C,A,b),U=I.indexOf("-",E);U>0&&(I=I.substr(0,U));var z=f.d2c(I,0,b);if(z<C){var H=t(z,L,!1,b);(z+H)/2<C+i&&(z=H)}return P&&g?t(z,L,!0,b):z}}return function(C,P){var I=v*Math.round(C/v);return I+v/10<C&&I+.9*v<C+i&&(I+=v),P&&g&&(I-=v),I}}},72138:function($,R,e){var k=e(92770),A=e(71828),l=e(73972),T=e(89298),x=e(75341),d=e(59575),s=e(36362),t=e(42174),o=e(40965);function r(n,a,i,c,h){var f,b,v,g,y,p,m,w=c+"bins",u=n._fullLayout,S=a["_"+c+"bingroup"],_=u._histogramBinOpts[S],E=u.barmode==="overlay",L=function(he){return i.r2c(he,0,g)},C=function(he){return i.c2r(he,0,g)},P=i.type==="date"?function(he){return he||he===0?A.cleanDate(he,null,g):null}:function(he){return k(he)?Number(he):null};function I(he,ve,Oe){ve[he+"Found"]?(ve[he]=P(ve[he]),ve[he]===null&&(ve[he]=Oe[he])):(p[he]=ve[he]=Oe[he],A.nestedProperty(b[0],w+"."+he).set(Oe[he]))}if(a["_"+c+"autoBinFinished"])delete a["_"+c+"autoBinFinished"];else{b=_.traces;var U=[],z=!0,H=!1,F=!1;for(f=0;f<b.length;f++)if((v=b[f]).visible){var N=_.dirs[f];y=v["_"+N+"pos0"]=i.makeCalcdata(v,N),U=A.concat(U,y),delete v["_"+c+"autoBinFinished"],a.visible===!0&&(z?z=!1:(delete v._autoBin,v["_"+c+"autoBinFinished"]=1),l.traceIs(v,"2dMap")&&(H=!0),v.type==="histogram2dcontour"&&(F=!0))}g=b[0][c+"calendar"];var B=T.autoBin(U,i,_.nbins,H,g,_.sizeFound&&_.size),j=b[0]._autoBin={};if(p=j[_.dirs[0]]={},F&&(_.size||(B.start=C(T.tickIncrement(L(B.start),B.size,!0,g))),_.end===void 0&&(B.end=C(T.tickIncrement(L(B.end),B.size,!1,g)))),E&&!l.traceIs(a,"2dMap")&&B._dataSpan===0&&i.type!=="category"&&i.type!=="multicategory"){if(h)return[B,y,!0];B=function(he,ve,Oe,xe,ke){var Me,Te,Q,oe=he._fullLayout,ce=function(nt,tt){for(var ot=tt.xaxis,dt=tt.yaxis,kt=tt.orientation,mt=[],wt=nt._fullData,Lt=0;Lt<wt.length;Lt++){var Ct=wt[Lt];Ct.type==="histogram"&&Ct.visible===!0&&Ct.orientation===kt&&Ct.xaxis===ot&&Ct.yaxis===dt&&mt.push(Ct)}return mt}(he,ve),me=!1,Ae=1/0,Ie=[ve];for(Me=0;Me<ce.length;Me++)if((Te=ce[Me])===ve)me=!0;else if(me){var Ce=r(he,Te,Oe,xe,!0),Re=Ce[0],le=Ce[2];Te["_"+xe+"autoBinFinished"]=1,Te["_"+xe+"pos0"]=Ce[1],le?Ie.push(Te):Ae=Math.min(Ae,Re.size)}else Q=oe._histogramBinOpts[Te["_"+xe+"bingroup"]],Ae=Math.min(Ae,Q.size||Te[ke].size);var de=new Array(Ie.length);for(Me=0;Me<Ie.length;Me++)for(var _e=Ie[Me]["_"+xe+"pos0"],Fe=0;Fe<_e.length;Fe++)if(_e[Fe]!==void 0){de[Me]=_e[Fe];break}for(isFinite(Ae)||(Ae=A.distinctVals(de).minDiff),Me=0;Me<Ie.length;Me++){var Ve=(Te=Ie[Me])[xe+"calendar"],He={start:Oe.c2r(de[Me]-Ae/2,0,Ve),end:Oe.c2r(de[Me]+Ae/2,0,Ve),size:Ae};Te._input[ke]=Te[ke]=He,(Q=oe._histogramBinOpts[Te["_"+xe+"bingroup"]])&&A.extendFlat(Q,He)}return ve[ke]}(n,a,i,c,w)}(m=v.cumulative||{}).enabled&&m.currentbin!=="include"&&(m.direction==="decreasing"?B.start=C(T.tickIncrement(L(B.start),B.size,!0,g)):B.end=C(T.tickIncrement(L(B.end),B.size,!1,g))),_.size=B.size,_.sizeFound||(p.size=B.size,A.nestedProperty(b[0],w+".size").set(B.size)),I("start",_,B),I("end",_,B)}y=a["_"+c+"pos0"],delete a["_"+c+"pos0"];var K=a._input[w]||{},G=A.extendFlat({},_),V=_.start,W=i.r2l(K.start),J=W!==void 0;if((_.startFound||J)&&W!==i.r2l(V)){var X=J?W:A.aggNums(Math.min,null,y),ee={type:i.type==="category"||i.type==="multicategory"?"linear":i.type,r2l:i.r2l,dtick:_.size,tick0:V,calendar:g,range:[X,T.tickIncrement(X,_.size,!1,g)].map(i.l2r)},re=T.tickFirst(ee);re>i.r2l(X)&&(re=T.tickIncrement(re,_.size,!0,g)),G.start=i.l2r(re),J||A.nestedProperty(a,w+".start").set(G.start)}var ie=_.end,se=i.r2l(K.end),fe=se!==void 0;if((_.endFound||fe)&&se!==i.r2l(ie)){var ye=fe?se:A.aggNums(Math.max,null,y);G.end=i.l2r(ye),fe||A.nestedProperty(a,w+".start").set(G.end)}var ge="autobin"+c;return a._input[ge]===!1&&(a._input[w]=A.extendFlat({},a[w]||{}),delete a._input[ge],delete a[ge]),[G,y]}$.exports={calc:function(n,a){var i,c,h,f,b=[],v=[],g=a.orientation==="h",y=T.getFromId(n,g?a.yaxis:a.xaxis),p=g?"y":"x",m={x:"y",y:"x"}[p],w=a[p+"calendar"],u=a.cumulative,S=r(n,a,y,p),_=S[0],E=S[1],L=typeof _.size=="string",C=[],P=L?C:_,I=[],U=[],z=[],H=0,F=a.histnorm,N=a.histfunc,B=F.indexOf("density")!==-1;u.enabled&&B&&(F=F.replace(/ ?density$/,""),B=!1);var j,K=N==="max"||N==="min"?null:0,G=d.count,V=s[F],W=!1,J=function(Te){return y.r2c(Te,0,w)};for(A.isArrayOrTypedArray(a[m])&&N!=="count"&&(j=a[m],W=N==="avg",G=d[N]),i=J(_.start),h=J(_.end)+(i-T.tickIncrement(i,_.size,!1,w))/1e6;i<h&&b.length<1e6&&(c=T.tickIncrement(i,_.size,!1,w),b.push((i+c)/2),v.push(K),z.push([]),C.push(i),B&&I.push(1/(c-i)),W&&U.push(0),!(c<=i));)i=c;C.push(i),L||y.type!=="date"||(P={start:J(P.start),end:J(P.end),size:P.size}),n._fullLayout._roundFnOpts||(n._fullLayout._roundFnOpts={});var X=a["_"+p+"bingroup"],ee={leftGap:1/0,rightGap:1/0};X&&(n._fullLayout._roundFnOpts[X]||(n._fullLayout._roundFnOpts[X]=ee),ee=n._fullLayout._roundFnOpts[X]);var re,ie=v.length,se=!0,fe=ee.leftGap,ye=ee.rightGap,ge={};for(i=0;i<E.length;i++){var he=E[i];(f=A.findBin(he,P))>=0&&f<ie&&(H+=G(f,i,v,j,U),se&&z[f].length&&he!==E[z[f][0]]&&(se=!1),z[f].push(i),ge[i]=f,fe=Math.min(fe,he-C[f]),ye=Math.min(ye,C[f+1]-he))}ee.leftGap=fe,ee.rightGap=ye,se||(re=function(Te,Q){return function(){var oe=n._fullLayout._roundFnOpts[X];return o(oe.leftGap,oe.rightGap,C,y,w)(Te,Q)}}),W&&(H=t(v,U)),V&&V(v,H,I),u.enabled&&function(Te,Q,oe){var ce,me,Ae;function Ie(Re){Ae=Te[Re],Te[Re]/=2}function Ce(Re){me=Te[Re],Te[Re]=Ae+me/2,Ae+=me}if(oe==="half")if(Q==="increasing")for(Ie(0),ce=1;ce<Te.length;ce++)Ce(ce);else for(Ie(Te.length-1),ce=Te.length-2;ce>=0;ce--)Ce(ce);else if(Q==="increasing"){for(ce=1;ce<Te.length;ce++)Te[ce]+=Te[ce-1];oe==="exclude"&&(Te.unshift(0),Te.pop())}else{for(ce=Te.length-2;ce>=0;ce--)Te[ce]+=Te[ce+1];oe==="exclude"&&(Te.push(0),Te.shift())}}(v,u.direction,u.currentbin);var ve=Math.min(b.length,v.length),Oe=[],xe=0,ke=ve-1;for(i=0;i<ve;i++)if(v[i]){xe=i;break}for(i=ve-1;i>=xe;i--)if(v[i]){ke=i;break}for(i=xe;i<=ke;i++)if(k(b[i])&&k(v[i])){var Me={p:b[i],s:v[i],b:0};u.enabled||(Me.pts=z[i],se?Me.ph0=Me.ph1=z[i].length?E[z[i][0]]:b[i]:(a._computePh=!0,Me.ph0=re(C[i]),Me.ph1=re(C[i+1],!0))),Oe.push(Me)}return Oe.length===1&&(Oe[0].width1=T.tickIncrement(Oe[0].p,_.size,!1,w)-Oe[0].p),x(Oe,a),A.isArrayOrTypedArray(a.selectedpoints)&&A.tagSelected(Oe,a,ge),Oe},calcAllAutoBins:r}},72406:function($){$.exports={eventDataKeys:["binNumber"]}},82222:function($,R,e){var k=e(71828),A=e(41675),l=e(73972).traceIs,T=e(26125),x=k.nestedProperty,d=e(99082).getAxisGroup,s=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],t=["x","y"];$.exports=function(o,r){var n,a,i,c,h,f,b,v=r._histogramBinOpts={},g=[],y={},p=[];function m(B,j){return k.coerce(n._input,n,n._module.attributes,B,j)}function w(B){return B.orientation==="v"?"x":"y"}function u(B,j,K){var G=B.uid+"__"+K;j||(j=G);var V=function(ee,re){return A.getFromTrace({_fullLayout:r},ee,re).type}(B,K),W=B[K+"calendar"]||"",J=v[j],X=!0;J&&(V===J.axType&&W===J.calendar?(X=!1,J.traces.push(B),J.dirs.push(K)):(j=G,V!==J.axType&&k.warn(["Attempted to group the bins of trace",B.index,"set on a","type:"+V,"axis","with bins on","type:"+J.axType,"axis."].join(" ")),W!==J.calendar&&k.warn(["Attempted to group the bins of trace",B.index,"set with a",W,"calendar","with bins",J.calendar?"on a "+J.calendar+" calendar":"w/o a set calendar"].join(" ")))),X&&(v[j]={traces:[B],dirs:[K],axType:V,calendar:B[K+"calendar"]||""}),B["_"+K+"bingroup"]=j}for(h=0;h<o.length;h++)n=o[h],l(n,"histogram")&&(g.push(n),delete n._xautoBinFinished,delete n._yautoBinFinished,l(n,"2dMap")||T(n._input,n,r,m));var S=r._alignmentOpts||{};for(h=0;h<g.length;h++){if(n=g[h],i="",!l(n,"2dMap")){if(c=w(n),r.barmode==="group"&&n.alignmentgroup){var _=n[c+"axis"],E=d(r,_)+n.orientation;(S[E]||{})[n.alignmentgroup]&&(i=E)}i||r.barmode==="overlay"||(i=d(r,n.xaxis)+d(r,n.yaxis)+w(n))}i?(y[i]||(y[i]=[]),y[i].push(n)):p.push(n)}for(i in y)if((a=y[i]).length!==1){var L=!1;for(a.length&&(n=a[0],L=m("bingroup")),i=L||i,h=0;h<a.length;h++){var C=(n=a[h])._input.bingroup;C&&C!==i&&k.warn(["Trace",n.index,"must match","within bingroup",i+".","Ignoring its bingroup:",C,"setting."].join(" ")),n.bingroup=i,u(n,i,w(n))}}else p.push(a[0]);for(h=0;h<p.length;h++){n=p[h];var P=m("bingroup");if(l(n,"2dMap"))for(b=0;b<2;b++){var I=m((c=t[b])+"bingroup",P?P+"__"+c:null);u(n,I,c)}else u(n,P,w(n))}for(i in v){var U=v[i];for(a=U.traces,f=0;f<s.length;f++){var z,H,F=s[f],N=F.name;if(N!=="nbins"||!U.sizeFound){for(h=0;h<a.length;h++){if(n=a[h],c=U.dirs[h],z=F.aStr[c],x(n._input,z).get()!==void 0){U[N]=m(z),U[N+"Found"]=!0;break}(H=(n._autoBin||{})[c]||{})[N]&&x(n,z).set(H[N])}if(N==="start"||N==="end")for(;h<a.length;h++)(n=a[h])["_"+c+"bingroup"]&&m(z,(H=(n._autoBin||{})[c]||{})[N]);N!=="nbins"||U.sizeFound||U.nbinsFound||(n=a[0],U[N]=m(z))}}}}},11385:function($,R,e){var k=e(73972),A=e(71828),l=e(7901),T=e(90769).handleText,x=e(98340),d=e(7745);$.exports=function(s,t,o,r){function n(p,m){return A.coerce(s,t,d,p,m)}var a=n("x"),i=n("y");n("cumulative.enabled")&&(n("cumulative.direction"),n("cumulative.currentbin")),n("text");var c=n("textposition");T(s,t,r,n,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat");var h=n("orientation",i&&!a?"h":"v"),f=h==="v"?"x":"y",b=h==="v"?"y":"x",v=a&&i?Math.min(A.minRowLength(a)&&A.minRowLength(i)):A.minRowLength(t[f]||[]);if(v){t._length=v,k.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y"],r),t[b]&&n("histfunc"),n("histnorm"),n("autobin"+f),x(s,t,n,o,r),A.coerceSelectionMarkerOpacity(t,n);var g=(t.marker.line||{}).color,y=k.getComponentMethod("errorbars","supplyDefaults");y(s,t,g||l.defaultLine,{axis:"y"}),y(s,t,g||l.defaultLine,{axis:"x",inherit:"y"})}else t.visible=!1}},84402:function($){$.exports=function(R,e,k,A,l){if(R.x="xVal"in e?e.xVal:e.x,R.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(R.z=e.zLabelVal),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),!(k.cumulative||{}).enabled){var T,x=Array.isArray(l)?A[0].pts[l[0]][l[1]]:A[l].pts;if(R.pointNumbers=x,R.binNumber=R.pointNumber,delete R.pointNumber,delete R.pointIndex,k._indexToPoints){T=[];for(var d=0;d<x.length;d++)T=T.concat(k._indexToPoints[x[d]])}else T=x;R.pointIndices=T}return R}},76440:function($,R,e){var k=e(95423).hoverPoints,A=e(89298).hoverLabelText;$.exports=function(l,T,x,d,s){var t=k(l,T,x,d,s);if(t){var o=(l=t[0]).cd[l.index],r=l.cd[0].trace;if(!r.cumulative.enabled){var n=r.orientation==="h"?"y":"x";l[n+"Label"]=A(l[n+"a"],[o.ph0,o.ph1],r[n+"hoverformat"])}return t}}},36071:function($,R,e){$.exports={attributes:e(7745),layoutAttributes:e(43641),supplyDefaults:e(11385),crossTraceDefaults:e(82222),supplyLayoutDefaults:e(13957),calc:e(72138).calc,crossTraceCalc:e(11661).crossTraceCalc,plot:e(17295).plot,layerName:"barlayer",style:e(16688).style,styleOnSelect:e(16688).styleOnSelect,colorbar:e(4898),hoverPoints:e(76440),selectPoints:e(81974),eventData:e(84402),moduleType:"trace",name:"histogram",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function($){$.exports={percent:function(R,e){for(var k=R.length,A=100/e,l=0;l<k;l++)R[l]*=A},probability:function(R,e){for(var k=R.length,A=0;A<k;A++)R[A]/=e},density:function(R,e,k,A){var l=R.length;A=A||1;for(var T=0;T<l;T++)R[T]*=k[T]*A},"probability density":function(R,e,k,A){var l=R.length;A&&(e/=A);for(var T=0;T<l;T++)R[T]*=k[T]/e}}},35361:function($,R,e){var k=e(7745),A=e(17656),l=e(21606),T=e(9012),x=e(12663).axisHoverFormat,d=e(5386).f,s=e(5386).s,t=e(50693),o=e(1426).extendFlat;$.exports=o({x:k.x,y:k.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:k.histnorm,histfunc:k.histfunc,nbinsx:k.nbinsx,xbins:A("x"),nbinsy:k.nbinsy,ybins:A("y"),autobinx:k.autobinx,autobiny:k.autobiny,bingroup:o({},k.bingroup,{}),xbingroup:o({},k.bingroup,{}),ybingroup:o({},k.bingroup,{}),xgap:l.xgap,ygap:l.ygap,zsmooth:l.zsmooth,xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:d({},{keys:"z"}),texttemplate:s({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:l.textfont,showlegend:o({},T.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},17562:function($,R,e){var k=e(71828),A=e(89298),l=e(59575),T=e(36362),x=e(42174),d=e(40965),s=e(72138).calcAllAutoBins;function t(n,a,i,c){var h,f=new Array(n);if(c)for(h=0;h<n;h++)f[h]=1/(a[h+1]-a[h]);else{var b=1/i;for(h=0;h<n;h++)f[h]=b}return f}function o(n,a){return{start:n(a.start),end:n(a.end),size:a.size}}function r(n,a,i,c,h,f){var b,v=n.length-1,g=new Array(v),y=d(i,c,n,h,f);for(b=0;b<v;b++){var p=(a||[])[b];g[b]=p===void 0?[y(n[b]),y(n[b+1],!0)]:[p,p]}return g}$.exports=function(n,a){var i,c,h,f,b=A.getFromId(n,a.xaxis),v=A.getFromId(n,a.yaxis),g=a.xcalendar,y=a.ycalendar,p=function(dt){return b.r2c(dt,0,g)},m=function(dt){return v.r2c(dt,0,y)},w=s(n,a,b,"x"),u=w[0],S=w[1],_=s(n,a,v,"y"),E=_[0],L=_[1],C=a._length;S.length>C&&S.splice(C,S.length-C),L.length>C&&L.splice(C,L.length-C);var P=[],I=[],U=[],z=typeof u.size=="string",H=typeof E.size=="string",F=[],N=[],B=z?F:u,j=H?N:E,K=0,G=[],V=[],W=a.histnorm,J=a.histfunc,X=W.indexOf("density")!==-1,ee=J==="max"||J==="min"?null:0,re=l.count,ie=T[W],se=!1,fe=[],ye=[],ge="z"in a?a.z:"marker"in a&&Array.isArray(a.marker.color)?a.marker.color:"";ge&&J!=="count"&&(se=J==="avg",re=l[J]);var he=u.size,ve=p(u.start),Oe=p(u.end)+(ve-A.tickIncrement(ve,he,!1,g))/1e6;for(i=ve;i<Oe;i=A.tickIncrement(i,he,!1,g))I.push(ee),F.push(i),se&&U.push(0);F.push(i);var xe,ke=I.length,Me=(i-ve)/ke,Te=(xe=ve+Me/2,b.c2r(xe,0,g)),Q=E.size,oe=m(E.start),ce=m(E.end)+(oe-A.tickIncrement(oe,Q,!1,y))/1e6;for(i=oe;i<ce;i=A.tickIncrement(i,Q,!1,y)){P.push(I.slice()),N.push(i);var me=new Array(ke);for(c=0;c<ke;c++)me[c]=[];V.push(me),se&&G.push(U.slice())}N.push(i);var Ae=P.length,Ie=(i-oe)/Ae,Ce=function(dt){return v.c2r(dt,0,y)}(oe+Ie/2);X&&(fe=t(I.length,B,Me,z),ye=t(P.length,j,Ie,H)),z||b.type!=="date"||(B=o(p,B)),H||v.type!=="date"||(j=o(m,j));var Re=!0,le=!0,de=new Array(ke),_e=new Array(Ae),Fe=1/0,Ve=1/0,He=1/0,nt=1/0;for(i=0;i<C;i++){var tt=S[i],ot=L[i];h=k.findBin(tt,B),f=k.findBin(ot,j),h>=0&&h<ke&&f>=0&&f<Ae&&(K+=re(h,i,P[f],ge,G[f]),V[f][h].push(i),Re&&(de[h]===void 0?de[h]=tt:de[h]!==tt&&(Re=!1)),le&&(_e[f]===void 0?_e[f]=ot:_e[f]!==ot&&(le=!1)),Fe=Math.min(Fe,tt-F[h]),Ve=Math.min(Ve,F[h+1]-tt),He=Math.min(He,ot-N[f]),nt=Math.min(nt,N[f+1]-ot))}if(se)for(f=0;f<Ae;f++)K+=x(P[f],G[f]);if(ie)for(f=0;f<Ae;f++)ie(P[f],K,fe,ye[f]);return{x:S,xRanges:r(F,Re&&de,Fe,Ve,b,g),x0:Te,dx:Me,y:L,yRanges:r(N,le&&_e,He,nt,v,y),y0:Ce,dy:Ie,z:P,pts:V}}},93888:function($,R,e){var k=e(71828),A=e(75238),l=e(49901),T=e(1586),x=e(58623),d=e(35361);$.exports=function(s,t,o,r){function n(a,i){return k.coerce(s,t,d,a,i)}A(s,t,n,r),t.visible!==!1&&(l(s,t,n,r),T(s,t,r,n,{prefix:"",cLetter:"z"}),n("hovertemplate"),x(n,r),n("xhoverformat"),n("yhoverformat"))}},76128:function($,R,e){var k=e(46248),A=e(89298).hoverLabelText;$.exports=function(l,T,x,d,s){var t=k(l,T,x,d,s);if(t){var o=(l=t[0]).index,r=o[0],n=o[1],a=l.cd[0],i=a.trace,c=a.xRanges[n],h=a.yRanges[r];return l.xLabel=A(l.xa,[c[0],c[1]],i.xhoverformat),l.yLabel=A(l.ya,[h[0],h[1]],i.yhoverformat),t}}},43905:function($,R,e){$.exports={attributes:e(35361),supplyDefaults:e(93888),crossTraceDefaults:e(82222),calc:e(90757),plot:e(50347),layerName:"heatmaplayer",colorbar:e(61243),style:e(70035),hoverPoints:e(76128),eventData:e(84402),moduleType:"trace",name:"histogram2d",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function($,R,e){var k=e(73972),A=e(71828);$.exports=function(l,T,x,d){var s=x("x"),t=x("y"),o=A.minRowLength(s),r=A.minRowLength(t);o&&r?(T._length=Math.min(o,r),k.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x","y"],d),(x("z")||x("marker.color"))&&x("histfunc"),x("histnorm"),x("autobinx"),x("autobiny")):T.visible=!1}},99066:function($,R,e){var k=e(35361),A=e(70600),l=e(50693),T=e(12663).axisHoverFormat,x=e(1426).extendFlat;$.exports=x({x:k.x,y:k.y,z:k.z,marker:k.marker,histnorm:k.histnorm,histfunc:k.histfunc,nbinsx:k.nbinsx,xbins:k.xbins,nbinsy:k.nbinsy,ybins:k.ybins,autobinx:k.autobinx,autobiny:k.autobiny,bingroup:k.bingroup,xbingroup:k.xbingroup,ybingroup:k.ybingroup,autocontour:A.autocontour,ncontours:A.ncontours,contours:A.contours,line:{color:A.line.color,width:x({},A.line.width,{dflt:.5}),dash:A.line.dash,smoothing:A.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:k.hovertemplate,texttemplate:A.texttemplate,textfont:A.textfont},l("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function($,R,e){var k=e(71828),A=e(75238),l=e(67217),T=e(8724),x=e(58623),d=e(99066);$.exports=function(s,t,o,r){function n(a,i){return k.coerce(s,t,d,a,i)}A(s,t,n,r),t.visible!==!1&&(l(s,t,n,function(a){return k.coerce2(s,t,d,a)}),T(s,t,n,r),n("xhoverformat"),n("yhoverformat"),n("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&x(n,r))}},35902:function($,R,e){$.exports={attributes:e(99066),supplyDefaults:e(62654),crossTraceDefaults:e(82222),calc:e(27529),plot:e(29854).plot,layerName:"contourlayer",style:e(84426),colorbar:e(90654),hoverPoints:e(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function($,R,e){var k=e(5386).f,A=e(5386).s,l=e(50693),T=e(27670).Y,x=e(34e3),d=e(57564),s=e(45802),t=e(43473),o=e(1426).extendFlat;$.exports={labels:d.labels,parents:d.parents,values:d.values,branchvalues:d.branchvalues,count:d.count,level:d.level,maxdepth:d.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:s.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:o({colors:d.marker.colors,line:d.marker.line,editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),leaf:d.leaf,pathbar:s.pathbar,text:x.text,textinfo:d.textinfo,texttemplate:A({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:x.hovertext,hoverinfo:d.hoverinfo,hovertemplate:k({},{keys:t.eventDataKeys}),textfont:x.textfont,insidetextfont:x.insidetextfont,outsidetextfont:s.outsidetextfont,textposition:s.textposition,sort:x.sort,root:d.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},96346:function($,R,e){var k=e(74875);R.name="icicle",R.plot=function(A,l,T,x){k.plotBasePlot(R.name,A,l,T,x)},R.clean=function(A,l,T,x){k.cleanBasePlot(R.name,A,l,T,x)}},46584:function($,R,e){var k=e(52147);R.y=function(A,l){return k.calc(A,l)},R.T=function(A){return k._runCrossTraceCalc("icicle",A)}},56524:function($,R,e){var k=e(71828),A=e(46291),l=e(7901),T=e(27670).c,x=e(90769).handleText,d=e(97313).TEXTPAD,s=e(21081),t=s.hasColorscale,o=s.handleDefaults;$.exports=function(r,n,a,i){function c(p,m){return k.coerce(r,n,A,p,m)}var h=c("labels"),f=c("parents");if(h&&h.length&&f&&f.length){var b=c("values");b&&b.length?c("branchvalues"):c("count"),c("level"),c("maxdepth"),c("tiling.orientation"),c("tiling.flip"),c("tiling.pad");var v=c("text");c("texttemplate"),n.texttemplate||c("textinfo",Array.isArray(v)?"text+label":"label"),c("hovertext"),c("hovertemplate");var g=c("pathbar.visible");x(r,n,i,c,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("textposition"),c("marker.line.width")&&c("marker.line.color",i.paper_bgcolor),c("marker.colors");var y=n._hasColorscale=t(r,"marker","colors")||(r.marker||{}).coloraxis;y&&o(r,n,i,c,{prefix:"marker.",cLetter:"c"}),c("leaf.opacity",y?1:.7),n._hovered={marker:{line:{width:2,color:l.contrast(i.paper_bgcolor)}}},g&&(c("pathbar.thickness",n.pathbar.textfont.size+2*d),c("pathbar.side"),c("pathbar.edgeshape")),c("sort"),c("root.color"),T(n,i,c),n._length=null}else n.visible=!1}},90666:function($,R,e){var k=e(39898),A=e(71828),l=e(91424),T=e(63893),x=e(21538),d=e(82454).styleOne,s=e(43473),t=e(2791),o=e(83523),r=e(24714).formatSliceLabel,n=!1;$.exports=function(a,i,c,h,f){var b=f.width,v=f.height,g=f.viewX,y=f.viewY,p=f.pathSlice,m=f.toMoveInsideSlice,w=f.strTransform,u=f.hasTransition,S=f.handleSlicesExit,_=f.makeUpdateSliceInterpolator,E=f.makeUpdateTextInterpolator,L=f.prevEntry,C=a._context.staticPlot,P=a._fullLayout,I=i[0].trace,U=I.textposition.indexOf("left")!==-1,z=I.textposition.indexOf("right")!==-1,H=I.textposition.indexOf("bottom")!==-1,F=x(c,[b,v],{flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1,orientation:I.tiling.orientation,pad:{inner:I.tiling.pad},maxDepth:I._maxDepth}).descendants(),N=1/0,B=-1/0;F.forEach(function(W){var J=W.depth;J>=I._maxDepth?(W.x0=W.x1=(W.x0+W.x1)/2,W.y0=W.y1=(W.y0+W.y1)/2):(N=Math.min(N,J),B=Math.max(B,J))}),h=h.data(F,t.getPtId),I._maxVisibleLayers=isFinite(B)?B-N+1:0,h.enter().append("g").classed("slice",!0),S(h,n,{},[b,v],p),h.order();var j=null;if(u&&L){var K=t.getPtId(L);h.each(function(W){j===null&&t.getPtId(W)===K&&(j={x0:W.x0,x1:W.x1,y0:W.y0,y1:W.y1})})}var G=function(){return j||{x0:0,x1:b,y0:0,y1:v}},V=h;return u&&(V=V.transition().each("end",function(){var W=k.select(this);t.setSliceCursor(W,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(W){W._x0=g(W.x0),W._x1=g(W.x1),W._y0=y(W.y0),W._y1=y(W.y1),W._hoverX=g(W.x1-I.tiling.pad),W._hoverY=y(H?W.y1-I.tiling.pad/2:W.y0+I.tiling.pad/2);var J=k.select(this),X=A.ensureSingle(J,"path","surface",function(se){se.style("pointer-events",C?"none":"all")});u?X.transition().attrTween("d",function(se){var fe=_(se,n,G(),[b,v],{orientation:I.tiling.orientation,flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1});return function(ye){return p(fe(ye))}}):X.attr("d",p),J.call(o,c,a,i,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),X.call(d,W,I,{hovered:!1}),W.x0===W.x1||W.y0===W.y1?W._text="":W._text=r(W,c,I,i,P)||"";var ee=A.ensureSingle(J,"g","slicetext"),re=A.ensureSingle(ee,"text","",function(se){se.attr("data-notex",1)}),ie=A.ensureUniformFontSize(a,t.determineTextFont(I,W,P.font));re.text(W._text||" ").classed("slicetext",!0).attr("text-anchor",z?"end":U?"start":"middle").call(l.font,ie).call(T.convertToTspans,a),W.textBB=l.bBox(re.node()),W.transform=m(W,{fontSize:ie.size}),W.transform.fontSize=ie.size,u?re.transition().attrTween("transform",function(se){var fe=E(se,n,G(),[b,v]);return function(ye){return w(fe(ye))}}):re.attr("transform",w(W))}),j}},69816:function($,R,e){$.exports={moduleType:"trace",name:"icicle",basePlotModule:e(96346),categories:[],animatable:!0,attributes:e(46291),layoutAttributes:e(92894),supplyDefaults:e(56524),supplyLayoutDefaults:e(21070),calc:e(46584).y,crossTraceCalc:e(46584).T,plot:e(85596),style:e(82454).style,colorbar:e(4898),meta:{}}},92894:function($){$.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},21070:function($,R,e){var k=e(71828),A=e(92894);$.exports=function(l,T){function x(d,s){return k.coerce(l,T,A,d,s)}x("iciclecolorway",T.colorway),x("extendiciclecolors")}},21538:function($,R,e){var k=e(674),A=e(14102);$.exports=function(l,T,x){var d=x.flipX,s=x.flipY,t=x.orientation==="h",o=x.maxDepth,r=T[0],n=T[1];o&&(r=(l.height+1)*T[0]/Math.min(l.height+1,o),n=(l.height+1)*T[1]/Math.min(l.height+1,o));var a=k.partition().padding(x.pad.inner).size(t?[T[1],r]:[T[0],n])(l);return(t||d||s)&&A(a,T,{swapXY:t,flipX:d,flipY:s}),a}},85596:function($,R,e){var k=e(80694),A=e(90666);$.exports=function(l,T,x,d){return k(l,T,x,d,{type:"icicle",drawDescendants:A})}},82454:function($,R,e){var k=e(39898),A=e(7901),l=e(71828),T=e(72597).resizeText;function x(d,s,t){var o=s.data.data,r=!s.children,n=o.i,a=l.castOption(t,n,"marker.line.color")||A.defaultLine,i=l.castOption(t,n,"marker.line.width")||0;d.style("stroke-width",i).call(A.fill,o.color).call(A.stroke,a).style("opacity",r?t.leaf.opacity:null)}$.exports={style:function(d){var s=d._fullLayout._iciclelayer.selectAll(".trace");T(d,s,"icicle"),s.each(function(t){var o=k.select(this),r=t[0].trace;o.style("opacity",r.opacity),o.selectAll("path.surface").each(function(n){k.select(this).call(x,n,r)})})},styleOne:x}},17230:function($,R,e){for(var k=e(9012),A=e(5386).f,l=e(1426).extendFlat,T=e(51877).colormodel,x=["rgb","rgba","rgba256","hsl","hsla"],d=[],s=[],t=0;t<x.length;t++){var o=T[x[t]];d.push("For the `"+x[t]+"` colormodel, it is ["+(o.zminDflt||o.min).join(", ")+"]."),s.push("For the `"+x[t]+"` colormodel, it is ["+(o.zmaxDflt||o.max).join(", ")+"].")}$.exports=l({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:x,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:l({},k.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:A({},{keys:["z","color","colormodel"]}),transforms:void 0})},71113:function($,R,e){var k=e(71828),A=e(51877),l=e(92770),T=e(89298),x=e(71828).maxRowLength,d=e(67395).A;function s(o,r,n,a){return function(i){return k.constrain((i-o)*r,n,a)}}function t(o,r){return function(n){return k.constrain(n,o,r)}}$.exports=function(o,r){var n,a;if(r._hasZ)n=r.z.length,a=x(r.z);else if(r._hasSource){var i=d(r.source);n=i.height,a=i.width}var c,h=T.getFromId(o,r.xaxis||"x"),f=T.getFromId(o,r.yaxis||"y"),b=h.d2c(r.x0)-r.dx/2,v=f.d2c(r.y0)-r.dy/2,g=[b,b+a*r.dx],y=[v,v+n*r.dy];if(h&&h.type==="log")for(c=0;c<a;c++)g.push(b+c*r.dx);if(f&&f.type==="log")for(c=0;c<n;c++)y.push(v+c*r.dy);return r._extremes[h._id]=T.findExtremes(h,g),r._extremes[f._id]=T.findExtremes(f,y),r._scaler=function(p){var m=A.colormodel[p.colormodel],w=(m.colormodel||p.colormodel).length;p._sArray=[];for(var u=0;u<w;u++)m.min[u]!==p.zmin[u]||m.max[u]!==p.zmax[u]?p._sArray.push(s(p.zmin[u],(m.max[u]-m.min[u])/(p.zmax[u]-p.zmin[u]),m.min[u],m.max[u])):p._sArray.push(t(m.min[u],m.max[u]));return function(S){for(var _=S.slice(0,w),E=0;E<w;E++){var L=_[E];if(!l(L))return!1;_[E]=p._sArray[E](L)}return _}}(r),[{x0:b,y0:v,z:r.z,w:a,h:n}]}},51877:function($){$.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(R){return R.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(R){return R.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(R){return R.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(R){var e=R.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(R){var e=R.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},13245:function($,R,e){var k=e(71828),A=e(17230),l=e(51877),T=e(25095).IMAGE_URL_PREFIX;$.exports=function(x,d){function s(r,n){return k.coerce(x,d,A,r,n)}s("source"),d.source&&!d.source.match(T)&&delete d.source,d._hasSource=!!d.source;var t,o=s("z");d._hasZ=!(o===void 0||!o.length||!o[0]||!o[0].length),d._hasZ||d._hasSource?(s("x0"),s("y0"),s("dx"),s("dy"),d._hasZ?(s("colormodel","rgb"),s("zmin",(t=l.colormodel[d.colormodel]).zminDflt||t.min),s("zmax",t.zmaxDflt||t.max)):d._hasSource&&(d.colormodel="rgba256",t=l.colormodel[d.colormodel],d.zmin=t.zminDflt,d.zmax=t.zmaxDflt),s("zsmooth"),s("text"),s("hovertext"),s("hovertemplate"),d._length=null):d.visible=!1}},30835:function($){$.exports=function(R,e){return"xVal"in e&&(R.x=e.xVal),"yVal"in e&&(R.y=e.yVal),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),R.color=e.color,R.colormodel=e.trace.colormodel,R.z||(R.z=e.color),R}},67395:function($,R,e){var k=e(33575),A=e(25095).IMAGE_URL_PREFIX,l=e(12856).Buffer;R.A=function(T){var x=T.replace(A,""),d=new l(x,"base64");return k(d)}},28749:function($,R,e){var k=e(30211),A=e(71828),l=e(51877);$.exports=function(T,x,d){var s=T.cd[0],t=s.trace,o=T.xa,r=T.ya;if(!(k.inbox(x-s.x0,x-(s.x0+s.w*t.dx),0)>0||k.inbox(d-s.y0,d-(s.y0+s.h*t.dy),0)>0)){var n,a=Math.floor((x-s.x0)/t.dx),i=Math.floor(Math.abs(d-s.y0)/t.dy);if(t._hasZ?n=s.z[i][a]:t._hasSource&&(n=t._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(a,i,1,1).data),n){var c,h=s.hi||t.hoverinfo;if(h){var f=h.split("+");f.indexOf("all")!==-1&&(f=["color"]),f.indexOf("color")!==-1&&(c=!0)}var b,v=l.colormodel[t.colormodel],g=v.colormodel||t.colormodel,y=g.length,p=t._scaler(n),m=v.suffix,w=[];(t.hovertemplate||c)&&(w.push("["+[p[0]+m[0],p[1]+m[1],p[2]+m[2]].join(", ")),y===4&&w.push(", "+p[3]+m[3]),w.push("]"),w=w.join(""),T.extraText=g.toUpperCase()+": "+w),Array.isArray(t.hovertext)&&Array.isArray(t.hovertext[i])?b=t.hovertext[i][a]:Array.isArray(t.text)&&Array.isArray(t.text[i])&&(b=t.text[i][a]);var u=r.c2p(s.y0+(i+.5)*t.dy),S=s.x0+(a+.5)*t.dx,_=s.y0+(i+.5)*t.dy,E="["+n.slice(0,t.colormodel.length).join(", ")+"]";return[A.extendFlat(T,{index:[i,a],x0:o.c2p(s.x0+a*t.dx),x1:o.c2p(s.x0+(a+1)*t.dx),y0:u,y1:u,color:p,xVal:S,xLabelVal:S,yVal:_,yLabelVal:_,zLabelVal:E,text:b,hovertemplateLabels:{zLabel:E,colorLabel:w,"color[0]Label":p[0]+m[0],"color[1]Label":p[1]+m[1],"color[2]Label":p[2]+m[2],"color[3]Label":p[3]+m[3]}})]}}}},94507:function($,R,e){$.exports={attributes:e(17230),supplyDefaults:e(13245),calc:e(71113),plot:e(60775),style:e(12826),hoverPoints:e(28749),eventData:e(30835),moduleType:"trace",name:"image",basePlotModule:e(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},60775:function($,R,e){var k=e(39898),A=e(71828),l=A.strTranslate,T=e(77922),x=e(51877),d=A.isIOS()||A.isSafari()||A.isIE();$.exports=function(s,t,o,r){var n=t.xaxis,a=t.yaxis,i=!(d||s._context._exportedPlot);A.makeTraceGroups(r,o,"im").each(function(c){var h=k.select(this),f=c[0],b=f.trace,v=(b.zsmooth==="fast"||b.zsmooth===!1&&i)&&!b._hasZ&&b._hasSource&&n.type==="linear"&&a.type==="linear";b._realImage=v;var g,y,p,m,w,u,S=f.z,_=f.x0,E=f.y0,L=f.w,C=f.h,P=b.dx,I=b.dy;for(u=0;g===void 0&&u<L;)g=n.c2p(_+u*P),u++;for(u=L;y===void 0&&u>0;)y=n.c2p(_+u*P),u--;for(u=0;m===void 0&&u<C;)m=a.c2p(E+u*I),u++;for(u=C;w===void 0&&u>0;)w=a.c2p(E+u*I),u--;y<g&&(p=y,y=g,g=p),w<m&&(p=m,m=w,w=p),v||(g=Math.max(-.5*n._length,g),y=Math.min(1.5*n._length,y),m=Math.max(-.5*a._length,m),w=Math.min(1.5*a._length,w));var U=Math.round(y-g),z=Math.round(w-m);if(U<=0||z<=0)h.selectAll("image").data([]).exit().remove();else{var H=h.selectAll("image").data([c]);H.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),H.exit().remove();var F=b.zsmooth===!1?x.pixelatedStyle:"";if(v){var N=A.simpleMap(n.range,n.r2l),B=A.simpleMap(a.range,a.r2l),j=N[1]<N[0],K=B[1]>B[0];if(j||K){var G=g+U/2,V=m+z/2;F+="transform:"+l(G+"px",V+"px")+"scale("+(j?-1:1)+","+(K?-1:1)+")"+l(-G+"px",-V+"px")+";"}}H.attr("style",F);var W=new Promise(function(X){if(b._hasZ)X();else if(b._hasSource)if(b._canvas&&b._canvas.el.width===L&&b._canvas.el.height===C&&b._canvas.source===b.source)X();else{var ee=document.createElement("canvas");ee.width=L,ee.height=C;var re=ee.getContext("2d",{willReadFrequently:!0});b._image=b._image||new Image;var ie=b._image;ie.onload=function(){re.drawImage(ie,0,0),b._canvas={el:ee,source:b.source},X()},ie.setAttribute("src",b.source)}}).then(function(){var X,ee;if(b._hasZ)ee=J(function(ie,se){return S[se][ie]}),X=ee.toDataURL("image/png");else if(b._hasSource)if(v)X=b.source;else{var re=b._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,L,C).data;ee=J(function(ie,se){var fe=4*(se*L+ie);return[re[fe],re[fe+1],re[fe+2],re[fe+3]]}),X=ee.toDataURL("image/png")}H.attr({"xlink:href":X,height:z,width:U,x:g,y:m})});s._promises.push(W)}function J(X){var ee=document.createElement("canvas");ee.width=U,ee.height=z;var re,ie=ee.getContext("2d",{willReadFrequently:!0}),se=function(Te){return A.constrain(Math.round(n.c2p(_+Te*P)-g),0,U)},fe=function(Te){return A.constrain(Math.round(a.c2p(E+Te*I)-m),0,z)},ye=x.colormodel[b.colormodel],ge=ye.colormodel||b.colormodel,he=ye.fmt;for(u=0;u<f.w;u++){var ve=se(u),Oe=se(u+1);if(Oe!==ve&&!isNaN(Oe)&&!isNaN(ve))for(var xe=0;xe<f.h;xe++){var ke=fe(xe),Me=fe(xe+1);Me===ke||isNaN(Me)||isNaN(ke)||!X(u,xe)||(re=b._scaler(X(u,xe)),ie.fillStyle=re?ge+"("+he(re).join(",")+")":"rgba(0,0,0,0)",ie.fillRect(ve,ke,Oe-ve,Me-ke))}}return ee}})}},12826:function($,R,e){var k=e(39898);$.exports=function(A){k.select(A).selectAll(".im image").style("opacity",function(l){return l[0].trace.opacity})}},54846:function($,R,e){var k=e(1426).extendFlat,A=e(1426).extendDeep,l=e(30962).overrideAll,T=e(41940),x=e(22399),d=e(27670).Y,s=e(13838),t=e(44467).templatedArray,o=e(22372),r=e(12663).descriptionOnlyNumbers,n=T({editType:"plot",colorEditType:"plot"}),a={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:x.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},i={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},c=t("step",A({},a,{range:i}));$.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:d({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:k({},n,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:r("value")},font:k({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:r("value")},increasing:{symbol:{valType:"string",dflt:o.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:o.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:o.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:o.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:k({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:A({},a,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:x.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:l({range:i,visible:k({},s.visible,{dflt:!0}),tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:k({},s.ticks,{dflt:"outside"}),ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,tickfont:T({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,editType:"plot"},"plot"),steps:c,threshold:{line:{color:k({},a.line.color,{}),width:k({},a.line.width,{dflt:1}),editType:"plot"},thickness:k({},a.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},15970:function($,R,e){var k=e(74875);R.name="indicator",R.plot=function(A,l,T,x){k.plotBasePlot(R.name,A,l,T,x)},R.clean=function(A,l,T,x){k.cleanBasePlot(R.name,A,l,T,x)}},24667:function($){$.exports={calc:function(R,e){var k=[],A=e.value;typeof e._lastValue!="number"&&(e._lastValue=e.value);var l=e._lastValue,T=l;return e._hasDelta&&typeof e.delta.reference=="number"&&(T=e.delta.reference),k[0]={y:A,lastY:l,delta:A-T,relativeDelta:(A-T)/T},k}}},84577:function($){$.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function($,R,e){var k=e(71828),A=e(54846),l=e(27670).c,T=e(44467),x=e(85501),d=e(84577),s=e(26218),t=e(38701),o=e(96115),r=e(89426);function n(a,i){function c(h,f){return k.coerce(a,i,A.gauge.steps,h,f)}c("color"),c("line.color"),c("line.width"),c("range"),c("thickness")}$.exports={supplyDefaults:function(a,i,c,h){function f(L,C){return k.coerce(a,i,A,L,C)}l(i,h,f),f("mode"),i._hasNumber=i.mode.indexOf("number")!==-1,i._hasDelta=i.mode.indexOf("delta")!==-1,i._hasGauge=i.mode.indexOf("gauge")!==-1;var b=f("value");i._range=[0,typeof b=="number"?1.5*b:1];var v,g,y,p,m,w,u=new Array(2);function S(L,C){return k.coerce(y,p,A.gauge,L,C)}function _(L,C){return k.coerce(m,w,A.gauge.axis,L,C)}if(i._hasNumber&&(f("number.valueformat"),f("number.font.color",h.font.color),f("number.font.family",h.font.family),f("number.font.size"),i.number.font.size===void 0&&(i.number.font.size=d.defaultNumberFontSize,u[0]=!0),f("number.prefix"),f("number.suffix"),v=i.number.font.size),i._hasDelta&&(f("delta.font.color",h.font.color),f("delta.font.family",h.font.family),f("delta.font.size"),i.delta.font.size===void 0&&(i.delta.font.size=(i._hasNumber?.5:1)*(v||d.defaultNumberFontSize),u[1]=!0),f("delta.reference",i.value),f("delta.relative"),f("delta.valueformat",i.delta.relative?"2%":""),f("delta.increasing.symbol"),f("delta.increasing.color"),f("delta.decreasing.symbol"),f("delta.decreasing.color"),f("delta.position"),f("delta.prefix"),f("delta.suffix"),g=i.delta.font.size),i._scaleNumbers=(!i._hasNumber||u[0])&&(!i._hasDelta||u[1])||!1,f("title.font.color",h.font.color),f("title.font.family",h.font.family),f("title.font.size",.25*(v||g||d.defaultNumberFontSize)),f("title.text"),i._hasGauge){(y=a.gauge)||(y={}),p=T.newContainer(i,"gauge"),S("shape"),(i._isBullet=i.gauge.shape==="bullet")||f("title.align","center"),(i._isAngular=i.gauge.shape==="angular")||f("align","center"),S("bgcolor",h.paper_bgcolor),S("borderwidth"),S("bordercolor"),S("bar.color"),S("bar.line.color"),S("bar.line.width"),S("bar.thickness",d.valueThickness*(i.gauge.shape==="bullet"?.5:1)),x(y,p,{name:"steps",handleItemDefaults:n}),S("threshold.value"),S("threshold.thickness"),S("threshold.line.width"),S("threshold.line.color"),m={},y&&(m=y.axis||{}),w=T.newContainer(p,"axis"),_("visible"),i._range=_("range",i._range);var E={outerTicks:!0};s(m,w,_,"linear"),r(m,w,_,"linear",E),o(m,w,_,"linear",E),t(m,w,_,E)}else f("title.align","center"),f("align","center"),i._isAngular=i._isBullet=!1;i._length=null}}},15154:function($,R,e){$.exports={moduleType:"trace",name:"indicator",basePlotModule:e(15970),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(54846),supplyDefaults:e(94425).supplyDefaults,calc:e(24667).calc,plot:e(75634),meta:{}}},75634:function($,R,e){var k=e(39898),A=e(29502).sX,l=e(29502).k4,T=e(71828),x=T.strScale,d=T.strTranslate,s=T.rad2deg,t=e(18783).MID_SHIFT,o=e(91424),r=e(84577),n=e(63893),a=e(89298),i=e(71453),c=e(52830),h=e(13838),f=e(7901),b={left:"start",center:"middle",right:"end"},v={left:0,center:.5,right:1},g=/[yzafpnmkMGTPEZY]/;function y(_){return _&&_.duration>0}function p(_){_.each(function(E){f.stroke(k.select(this),E.line.color)}).each(function(E){f.fill(k.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function m(_,E,L){var C=_._fullLayout,P=T.extendFlat({type:"linear",ticks:"outside",range:L,showline:!0},E),I={type:"linear",_id:"x"+E._id},U={letter:"x",font:C.font,noHover:!0,noTickson:!0};function z(H,F){return T.coerce(P,I,h,H,F)}return i(P,I,z,U,C),c(P,I,z,U),I}function w(_,E,L){return[Math.min(E/_.width,L/_.height),_,E+"x"+L]}function u(_,E,L,C){var P=document.createElementNS("http://www.w3.org/2000/svg","text"),I=k.select(P);return I.text(_).attr("x",0).attr("y",0).attr("text-anchor",L).attr("data-unformatted",_).call(n.convertToTspans,C).call(o.font,E),o.bBox(I.node())}function S(_,E,L,C,P,I){var U="_cache"+E;_[U]&&_[U].key===P||(_[U]={key:P,value:L});var z=T.aggNums(I,null,[_[U].value,C],2);return _[U].value=z,z}$.exports=function(_,E,L,C){var P,I=_._fullLayout;y(L)&&C&&(P=C()),T.makeTraceGroups(I._indicatorlayer,E,"trace").each(function(U){var z,H,F,N,B,j=U[0].trace,K=k.select(this),G=j._hasGauge,V=j._isAngular,W=j._isBullet,J=j.domain,X={w:I._size.w*(J.x[1]-J.x[0]),h:I._size.h*(J.y[1]-J.y[0]),l:I._size.l+I._size.w*J.x[0],r:I._size.r+I._size.w*(1-J.x[1]),t:I._size.t+I._size.h*(1-J.y[1]),b:I._size.b+I._size.h*J.y[0]},ee=X.l+X.w/2,re=X.t+X.h/2,ie=Math.min(X.w/2,X.h),se=r.innerRadius*ie,fe=j.align||"center";if(H=re,G){if(V&&(z=ee,H=re+ie/2,F=function(Me){return function(Te,Q){return[Q/Math.sqrt(Te.width/2*(Te.width/2)+Te.height*Te.height),Te,Q]}(Me,.9*se)}),W){var ye=r.bulletPadding,ge=1-r.bulletNumberDomainSize+ye;z=X.l+(ge+(1-ge)*v[fe])*X.w,F=function(Me){return w(Me,(r.bulletNumberDomainSize-ye)*X.w,X.h)}}}else z=X.l+v[fe]*X.w,F=function(Me){return w(Me,X.w,X.h)};(function(Me,Te,Q,oe){var ce,me,Ae,Ie=Q[0].trace,Ce=oe.numbersX,Re=oe.numbersY,le=Ie.align||"center",de=b[le],_e=oe.transitionOpts,Fe=oe.onComplete,Ve=T.ensureSingle(Te,"g","numbers"),He=[];Ie._hasNumber&&He.push("number"),Ie._hasDelta&&(He.push("delta"),Ie.delta.position==="left"&&He.reverse());var nt=Ve.selectAll("text").data(He);function tt(It,Ut,Rt,Ge){if(!It.match("s")||Rt>=0==Ge>=0||Ut(Rt).slice(-1).match(g)||Ut(Ge).slice(-1).match(g))return Ut;var We=It.slice().replace("s","f").replace(/\d+/,function(Ye){return parseInt(Ye)-1}),Be=m(Me,{tickformat:We});return function(Ye){return Math.abs(Ye)<1?a.tickText(Be,Ye).text:Ut(Ye)}}nt.enter().append("text"),nt.attr("text-anchor",function(){return de}).attr("class",function(It){return It}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),nt.exit().remove();var ot,dt=Ie.mode+Ie.align;if(Ie._hasDelta&&(ot=function(){var It=m(Me,{tickformat:Ie.delta.valueformat},Ie._range);It.setScale(),a.prepTicks(It);var Ut=function(ze){return a.tickText(It,ze).text},Rt=Ie.delta.suffix,Ge=Ie.delta.prefix,We=function(ze){return Ie.delta.relative?ze.relativeDelta:ze.delta},Be=function(ze,Ke){return ze===0||typeof ze!="number"||isNaN(ze)?"-":(ze>0?Ie.delta.increasing.symbol:Ie.delta.decreasing.symbol)+Ge+Ke(ze)+Rt},Ye=function(ze){return ze.delta>=0?Ie.delta.increasing.color:Ie.delta.decreasing.color};Ie._deltaLastValue===void 0&&(Ie._deltaLastValue=We(Q[0]));var rt=Ve.select("text.delta");function Se(){rt.text(Be(We(Q[0]),Ut)).call(f.fill,Ye(Q[0])).call(n.convertToTspans,Me)}return rt.call(o.font,Ie.delta.font).call(f.fill,Ye({delta:Ie._deltaLastValue})),y(_e)?rt.transition().duration(_e.duration).ease(_e.easing).tween("text",function(){var ze=k.select(this),Ke=We(Q[0]),st=Ie._deltaLastValue,ct=tt(Ie.delta.valueformat,Ut,st,Ke),Tt=l(st,Ke);return Ie._deltaLastValue=Ke,function(Et){ze.text(Be(Tt(Et),ct)),ze.call(f.fill,Ye({delta:Tt(Et)}))}}).each("end",function(){Se(),Fe&&Fe()}).each("interrupt",function(){Se(),Fe&&Fe()}):Se(),me=u(Be(We(Q[0]),Ut),Ie.delta.font,de,Me),rt}(),dt+=Ie.delta.position+Ie.delta.font.size+Ie.delta.font.family+Ie.delta.valueformat,dt+=Ie.delta.increasing.symbol+Ie.delta.decreasing.symbol,Ae=me),Ie._hasNumber&&(function(){var It=m(Me,{tickformat:Ie.number.valueformat},Ie._range);It.setScale(),a.prepTicks(It);var Ut=function(Ye){return a.tickText(It,Ye).text},Rt=Ie.number.suffix,Ge=Ie.number.prefix,We=Ve.select("text.number");function Be(){var Ye=typeof Q[0].y=="number"?Ge+Ut(Q[0].y)+Rt:"-";We.text(Ye).call(o.font,Ie.number.font).call(n.convertToTspans,Me)}y(_e)?We.transition().duration(_e.duration).ease(_e.easing).each("end",function(){Be(),Fe&&Fe()}).each("interrupt",function(){Be(),Fe&&Fe()}).attrTween("text",function(){var Ye=k.select(this),rt=l(Q[0].lastY,Q[0].y);Ie._lastValue=Q[0].y;var Se=tt(Ie.number.valueformat,Ut,Q[0].lastY,Q[0].y);return function(ze){Ye.text(Ge+Se(rt(ze))+Rt)}}):Be(),ce=u(Ge+Ut(Q[0].y)+Rt,Ie.number.font,de,Me)}(),dt+=Ie.number.font.size+Ie.number.font.family+Ie.number.valueformat+Ie.number.suffix+Ie.number.prefix,Ae=ce),Ie._hasDelta&&Ie._hasNumber){var kt,mt,wt=[(ce.left+ce.right)/2,(ce.top+ce.bottom)/2],Lt=[(me.left+me.right)/2,(me.top+me.bottom)/2],Ct=.75*Ie.delta.font.size;Ie.delta.position==="left"&&(kt=S(Ie,"deltaPos",0,-1*(ce.width*v[Ie.align]+me.width*(1-v[Ie.align])+Ct),dt,Math.min),mt=wt[1]-Lt[1],Ae={width:ce.width+me.width+Ct,height:Math.max(ce.height,me.height),left:me.left+kt,right:ce.right,top:Math.min(ce.top,me.top+mt),bottom:Math.max(ce.bottom,me.bottom+mt)}),Ie.delta.position==="right"&&(kt=S(Ie,"deltaPos",0,ce.width*(1-v[Ie.align])+me.width*v[Ie.align]+Ct,dt,Math.max),mt=wt[1]-Lt[1],Ae={width:ce.width+me.width+Ct,height:Math.max(ce.height,me.height),left:ce.left,right:me.right+kt,top:Math.min(ce.top,me.top+mt),bottom:Math.max(ce.bottom,me.bottom+mt)}),Ie.delta.position==="bottom"&&(kt=null,mt=me.height,Ae={width:Math.max(ce.width,me.width),height:ce.height+me.height,left:Math.min(ce.left,me.left),right:Math.max(ce.right,me.right),top:ce.bottom-ce.height,bottom:ce.bottom+me.height}),Ie.delta.position==="top"&&(kt=null,mt=ce.top,Ae={width:Math.max(ce.width,me.width),height:ce.height+me.height,left:Math.min(ce.left,me.left),right:Math.max(ce.right,me.right),top:ce.bottom-ce.height-me.height,bottom:ce.bottom}),ot.attr({dx:kt,dy:mt})}(Ie._hasNumber||Ie._hasDelta)&&Ve.attr("transform",function(){var It=oe.numbersScaler(Ae);dt+=It[2];var Ut,Rt=S(Ie,"numbersScale",1,It[0],dt,Math.min);Ie._scaleNumbers||(Rt=1),Ut=Ie._isAngular?Re-Rt*Ae.bottom:Re-Rt*(Ae.top+Ae.bottom)/2,Ie._numbersTop=Rt*Ae.top+Ut;var Ge=Ae[le];le==="center"&&(Ge=(Ae.left+Ae.right)/2);var We=Ce-Rt*Ge;return We=S(Ie,"numbersTranslate",0,We,dt,Math.max),d(We,Ut)+x(Rt)})})(_,K,U,{numbersX:z,numbersY:H,numbersScaler:F,transitionOpts:L,onComplete:P}),G&&(N={range:j.gauge.axis.range,color:j.gauge.bgcolor,line:{color:j.gauge.bordercolor,width:0},thickness:1},B={range:j.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:j.gauge.bordercolor,width:j.gauge.borderwidth},thickness:1});var he=K.selectAll("g.angular").data(V?U:[]);he.exit().remove();var ve=K.selectAll("g.angularaxis").data(V?U:[]);ve.exit().remove(),V&&function(Me,Te,Q,oe){var ce,me,Ae,Ie,Ce=Q[0].trace,Re=oe.size,le=oe.radius,de=oe.innerRadius,_e=oe.gaugeBg,Fe=oe.gaugeOutline,Ve=[Re.l+Re.w/2,Re.t+Re.h/2+le/2],He=oe.gauge,nt=oe.layer,tt=oe.transitionOpts,ot=oe.onComplete,dt=Math.PI/2;function kt(Et){var At=Ce.gauge.axis.range[0],ht=(Et-At)/(Ce.gauge.axis.range[1]-At)*Math.PI-dt;return ht<-dt?-dt:ht>dt?dt:ht}function mt(Et){return k.svg.arc().innerRadius((de+le)/2-Et/2*(le-de)).outerRadius((de+le)/2+Et/2*(le-de)).startAngle(-dt)}function wt(Et){Et.attr("d",function(At){return mt(At.thickness).startAngle(kt(At.range[0])).endAngle(kt(At.range[1]))()})}He.enter().append("g").classed("angular",!0),He.attr("transform",d(Ve[0],Ve[1])),nt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),nt.selectAll("g.xangularaxistick,path,text").remove(),(ce=m(Me,Ce.gauge.axis)).type="linear",ce.range=Ce.gauge.axis.range,ce._id="xangularaxis",ce.ticklabeloverflow="allow",ce.setScale();var Lt=function(Et){return(ce.range[0]-Et.x)/(ce.range[1]-ce.range[0])*Math.PI+Math.PI},Ct={},It=a.makeLabelFns(ce,0).labelStandoff;Ct.xFn=function(Et){var At=Lt(Et);return Math.cos(At)*It},Ct.yFn=function(Et){var At=Lt(Et),ht=Math.sin(At)>0?.2:1;return-Math.sin(At)*(It+Et.fontSize*ht)+Math.abs(Math.cos(At))*(Et.fontSize*t)},Ct.anchorFn=function(Et){var At=Lt(Et),ht=Math.cos(At);return Math.abs(ht)<.1?"middle":ht>0?"start":"end"},Ct.heightFn=function(Et,At,ht){var pt=Lt(Et);return-.5*(1+Math.sin(pt))*ht};var Ut=function(Et){return d(Ve[0]+le*Math.cos(Et),Ve[1]-le*Math.sin(Et))};if(Ae=function(Et){return Ut(Lt(Et))},me=a.calcTicks(ce),Ie=a.getTickSigns(ce)[2],ce.visible){Ie=ce.ticks==="inside"?-1:1;var Rt=(ce.linewidth||1)/2;a.drawTicks(Me,ce,{vals:me,layer:nt,path:"M"+Ie*Rt+",0h"+Ie*ce.ticklen,transFn:function(Et){var At=Lt(Et);return Ut(At)+"rotate("+-s(At)+")"}}),a.drawLabels(Me,ce,{vals:me,layer:nt,transFn:Ae,labelFns:Ct})}var Ge=[_e].concat(Ce.gauge.steps),We=He.selectAll("g.bg-arc").data(Ge);We.enter().append("g").classed("bg-arc",!0).append("path"),We.select("path").call(wt).call(p),We.exit().remove();var Be=mt(Ce.gauge.bar.thickness),Ye=He.selectAll("g.value-arc").data([Ce.gauge.bar]);Ye.enter().append("g").classed("value-arc",!0).append("path");var rt,Se,ze,Ke=Ye.select("path");y(tt)?(Ke.transition().duration(tt.duration).ease(tt.easing).each("end",function(){ot&&ot()}).each("interrupt",function(){ot&&ot()}).attrTween("d",(rt=Be,Se=kt(Q[0].lastY),ze=kt(Q[0].y),function(){var Et=A(Se,ze);return function(At){return rt.endAngle(Et(At))()}})),Ce._lastValue=Q[0].y):Ke.attr("d",typeof Q[0].y=="number"?Be.endAngle(kt(Q[0].y)):"M0,0Z"),Ke.call(p),Ye.exit().remove(),Ge=[];var st=Ce.gauge.threshold.value;(st||st===0)&&Ge.push({range:[st,st],color:Ce.gauge.threshold.color,line:{color:Ce.gauge.threshold.line.color,width:Ce.gauge.threshold.line.width},thickness:Ce.gauge.threshold.thickness});var ct=He.selectAll("g.threshold-arc").data(Ge);ct.enter().append("g").classed("threshold-arc",!0).append("path"),ct.select("path").call(wt).call(p),ct.exit().remove();var Tt=He.selectAll("g.gauge-outline").data([Fe]);Tt.enter().append("g").classed("gauge-outline",!0).append("path"),Tt.select("path").call(wt).call(p),Tt.exit().remove()}(_,0,U,{radius:ie,innerRadius:se,gauge:he,layer:ve,size:X,gaugeBg:N,gaugeOutline:B,transitionOpts:L,onComplete:P});var Oe=K.selectAll("g.bullet").data(W?U:[]);Oe.exit().remove();var xe=K.selectAll("g.bulletaxis").data(W?U:[]);xe.exit().remove(),W&&function(Me,Te,Q,oe){var ce,me,Ae,Ie,Ce,Re=Q[0].trace,le=oe.gauge,de=oe.layer,_e=oe.gaugeBg,Fe=oe.gaugeOutline,Ve=oe.size,He=Re.domain,nt=oe.transitionOpts,tt=oe.onComplete;le.enter().append("g").classed("bullet",!0),le.attr("transform",d(Ve.l,Ve.t)),de.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),de.selectAll("g.xbulletaxistick,path,text").remove();var ot=Ve.h,dt=Re.gauge.bar.thickness*ot,kt=He.x[0],mt=He.x[0]+(He.x[1]-He.x[0])*(Re._hasNumber||Re._hasDelta?1-r.bulletNumberDomainSize:1);function wt(We){We.attr("width",function(Be){return Math.max(0,ce.c2p(Be.range[1])-ce.c2p(Be.range[0]))}).attr("x",function(Be){return ce.c2p(Be.range[0])}).attr("y",function(Be){return .5*(1-Be.thickness)*ot}).attr("height",function(Be){return Be.thickness*ot})}(ce=m(Me,Re.gauge.axis))._id="xbulletaxis",ce.domain=[kt,mt],ce.setScale(),me=a.calcTicks(ce),Ae=a.makeTransTickFn(ce),Ie=a.getTickSigns(ce)[2],Ce=Ve.t+Ve.h,ce.visible&&(a.drawTicks(Me,ce,{vals:ce.ticks==="inside"?a.clipEnds(ce,me):me,layer:de,path:a.makeTickPath(ce,Ce,Ie),transFn:Ae}),a.drawLabels(Me,ce,{vals:me,layer:de,transFn:Ae,labelFns:a.makeLabelFns(ce,Ce)}));var Lt=[_e].concat(Re.gauge.steps),Ct=le.selectAll("g.bg-bullet").data(Lt);Ct.enter().append("g").classed("bg-bullet",!0).append("rect"),Ct.select("rect").call(wt).call(p),Ct.exit().remove();var It=le.selectAll("g.value-bullet").data([Re.gauge.bar]);It.enter().append("g").classed("value-bullet",!0).append("rect"),It.select("rect").attr("height",dt).attr("y",(ot-dt)/2).call(p),y(nt)?It.select("rect").transition().duration(nt.duration).ease(nt.easing).each("end",function(){tt&&tt()}).each("interrupt",function(){tt&&tt()}).attr("width",Math.max(0,ce.c2p(Math.min(Re.gauge.axis.range[1],Q[0].y)))):It.select("rect").attr("width",typeof Q[0].y=="number"?Math.max(0,ce.c2p(Math.min(Re.gauge.axis.range[1],Q[0].y))):0),It.exit().remove();var Ut=Q.filter(function(){return Re.gauge.threshold.value||Re.gauge.threshold.value===0}),Rt=le.selectAll("g.threshold-bullet").data(Ut);Rt.enter().append("g").classed("threshold-bullet",!0).append("line"),Rt.select("line").attr("x1",ce.c2p(Re.gauge.threshold.value)).attr("x2",ce.c2p(Re.gauge.threshold.value)).attr("y1",(1-Re.gauge.threshold.thickness)/2*ot).attr("y2",(1-(1-Re.gauge.threshold.thickness)/2)*ot).call(f.stroke,Re.gauge.threshold.line.color).style("stroke-width",Re.gauge.threshold.line.width),Rt.exit().remove();var Ge=le.selectAll("g.gauge-outline").data([Fe]);Ge.enter().append("g").classed("gauge-outline",!0).append("rect"),Ge.select("rect").call(wt).call(p),Ge.exit().remove()}(_,0,U,{gauge:Oe,layer:xe,size:X,gaugeBg:N,gaugeOutline:B,transitionOpts:L,onComplete:P});var ke=K.selectAll("text.title").data(U);ke.exit().remove(),ke.enter().append("text").classed("title",!0),ke.attr("text-anchor",function(){return W?b.right:b[j.title.align]}).text(j.title.text).call(o.font,j.title.font).call(n.convertToTspans,_),ke.attr("transform",function(){var Me,Te=X.l+X.w*v[j.title.align],Q=r.titlePadding,oe=o.bBox(ke.node());return G?(V&&(Me=j.gauge.axis.visible?o.bBox(ve.node()).top-Q-oe.bottom:X.t+X.h/2-ie/2-oe.bottom-Q),W&&(Me=H-(oe.top+oe.bottom)/2,Te=X.l-r.bulletPadding*X.w)):Me=j._numbersTop-Q-oe.bottom,d(Te,Me)})})}},16249:function($,R,e){var k=e(50693),A=e(12663).axisHoverFormat,l=e(5386).f,T=e(2418),x=e(9012),d=e(1426).extendFlat,s=e(30962).overrideAll,t=$.exports=s(d({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:l(),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),valuehoverformat:A("value",1),showlegend:d({},x.showlegend,{dflt:!1})},k("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:d({},x.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},56959:function($,R,e){var k=e(78803),A=e(88489).processGrid,l=e(88489).filter;$.exports=function(T,x){x._len=Math.min(x.x.length,x.y.length,x.z.length,x.value.length),x._x=l(x.x,x._len),x._y=l(x.y,x._len),x._z=l(x.z,x._len),x._value=l(x.value,x._len);var d=A(x);x._gridFill=d.fill,x._Xs=d.Xs,x._Ys=d.Ys,x._Zs=d.Zs,x._len=d.len;for(var s=1/0,t=-1/0,o=0;o<x._len;o++){var r=x._value[o];s=Math.min(s,r),t=Math.max(t,r)}x._minValues=s,x._maxValues=t,x._vMin=x.isomin===void 0||x.isomin===null?s:x.isomin,x._vMax=x.isomax===void 0||x.isomin===null?t:x.isomax,k(T,x,{vals:[x._vMin,x._vMax],containerStr:"",cLetter:"c"})}},22674:function($,R,e){var k=e(9330).gl_mesh3d,A=e(81697).parseColorScale,l=e(78614),T=e(21081).extractOpts,x=e(90060),d=function(n,a){for(var i=a.length-1;i>0;i--){var c=Math.min(a[i],a[i-1]),h=Math.max(a[i],a[i-1]);if(h>c&&c<n&&n<=h)return{id:i,distRatio:(h-n)/(h-c)}}return{id:0,distRatio:0}};function s(n,a,i){this.scene=n,this.uid=i,this.mesh=a,this.name="",this.data=null,this.showContour=!1}var t=s.prototype;t.handlePick=function(n){if(n.object===this.mesh){var a=n.data.index,i=this.data._meshX[a],c=this.data._meshY[a],h=this.data._meshZ[a],f=this.data._Ys.length,b=this.data._Zs.length,v=d(i,this.data._Xs).id,g=d(c,this.data._Ys).id,y=d(h,this.data._Zs).id,p=n.index=y+b*g+b*f*v;n.traceCoordinate=[this.data._meshX[p],this.data._meshY[p],this.data._meshZ[p],this.data._value[p]];var m=this.data.hovertext||this.data.text;return Array.isArray(m)&&m[p]!==void 0?n.textLabel=m[p]:m&&(n.textLabel=m),!0}},t.update=function(n){var a=this.scene,i=a.fullSceneLayout;function c(b,v,g,y){return v.map(function(p){return b.d2l(p,0,y)*g})}this.data=r(n);var h={positions:x(c(i.xaxis,n._meshX,a.dataScale[0],n.xcalendar),c(i.yaxis,n._meshY,a.dataScale[1],n.ycalendar),c(i.zaxis,n._meshZ,a.dataScale[2],n.zcalendar)),cells:x(n._meshI,n._meshJ,n._meshK),lightPosition:[n.lightposition.x,n.lightposition.y,n.lightposition.z],ambient:n.lighting.ambient,diffuse:n.lighting.diffuse,specular:n.lighting.specular,roughness:n.lighting.roughness,fresnel:n.lighting.fresnel,vertexNormalsEpsilon:n.lighting.vertexnormalsepsilon,faceNormalsEpsilon:n.lighting.facenormalsepsilon,opacity:n.opacity,contourEnable:n.contour.show,contourColor:l(n.contour.color).slice(0,3),contourWidth:n.contour.width,useFacetNormals:n.flatshading},f=T(n);h.vertexIntensity=n._meshIntensity,h.vertexIntensityBounds=[f.min,f.max],h.colormap=A(n),this.mesh.update(h)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var o=["xyz","xzy","yxz","yzx","zxy","zyx"];function r(n){n._meshI=[],n._meshJ=[],n._meshK=[];var a,i,c,h,f,b,v,g=n.surface.show,y=n.spaceframe.show,p=n.surface.fill,m=n.spaceframe.fill,w=!1,u=!1,S=0,_=n._Xs,E=n._Ys,L=n._Zs,C=_.length,P=E.length,I=L.length,U=o.indexOf(n._gridFill.replace(/-/g,"").replace(/\+/g,"")),z=function(Re,le,de){switch(U){case 5:return de+I*le+I*P*Re;case 4:return de+I*Re+I*C*le;case 3:return le+P*de+P*I*Re;case 2:return le+P*Re+P*C*de;case 1:return Re+C*de+C*I*le;default:return Re+C*le+C*P*de}},H=n._minValues,F=n._maxValues,N=n._vMin,B=n._vMax;function j(Re,le,de){for(var _e=b.length,Fe=i;Fe<_e;Fe++)if(Re===c[Fe]&&le===h[Fe]&&de===f[Fe])return Fe;return-1}function K(){i=a}function G(){c=[],h=[],f=[],b=[],a=0,K()}function V(Re,le,de,_e){return c.push(Re),h.push(le),f.push(de),b.push(_e),++a-1}function W(Re,le,de){for(var _e=[],Fe=0;Fe<Re.length;Fe++)_e[Fe]=Re[Fe]*(1-de)+de*le[Fe];return _e}function J(Re){v=Re}function X(Re,le){return Re==="all"||Re===null||Re.indexOf(le)>-1}function ee(Re,le){return Re===null?le:Re}function re(Re,le,de){K();var _e,Fe,Ve,He=[le],nt=[de];if(v>=1)He=[le],nt=[de];else if(v>0){var tt=function(Ut,Rt){var Ge=Ut[0],We=Ut[1],Be=Ut[2],Ye=function(Et,At,ht){for(var pt=[],gt=0;gt<Et.length;gt++)pt[gt]=(Et[gt]+At[gt]+ht[gt])/3;return pt}(Ge,We,Be),rt=Math.sqrt(1-v),Se=W(Ye,Ge,rt),ze=W(Ye,We,rt),Ke=W(Ye,Be,rt),st=Rt[0],ct=Rt[1],Tt=Rt[2];return{xyzv:[[Ge,We,ze],[ze,Se,Ge],[We,Be,Ke],[Ke,ze,We],[Be,Ge,Se],[Se,Ke,Be]],abc:[[st,ct,-1],[-1,-1,st],[ct,Tt,-1],[-1,-1,ct],[Tt,st,-1],[-1,-1,Tt]]}}(le,de);He=tt.xyzv,nt=tt.abc}for(var ot=0;ot<He.length;ot++){le=He[ot],de=nt[ot];for(var dt=[],kt=0;kt<3;kt++){var mt=le[kt][0],wt=le[kt][1],Lt=le[kt][2],Ct=le[kt][3],It=de[kt]>-1?de[kt]:j(mt,wt,Lt);dt[kt]=It>-1?It:V(mt,wt,Lt,ee(Re,Ct))}_e=dt[0],Fe=dt[1],Ve=dt[2],n._meshI.push(_e),n._meshJ.push(Fe),n._meshK.push(Ve),++S}}function ie(Re,le,de,_e){var Fe=Re[3];Fe<de&&(Fe=de),Fe>_e&&(Fe=_e);for(var Ve=(Re[3]-Fe)/(Re[3]-le[3]+1e-9),He=[],nt=0;nt<4;nt++)He[nt]=(1-Ve)*Re[nt]+Ve*le[nt];return He}function se(Re,le,de){return Re>=le&&Re<=de}function fe(Re){var le=.001*(B-N);return Re>=N-le&&Re<=B+le}function ye(Re){for(var le=[],de=0;de<4;de++){var _e=Re[de];le.push([n._x[_e],n._y[_e],n._z[_e],n._value[_e]])}return le}function ge(Re,le,de,_e,Fe,Ve){Ve||(Ve=1),de=[-1,-1,-1];var He=!1,nt=[se(le[0][3],_e,Fe),se(le[1][3],_e,Fe),se(le[2][3],_e,Fe)];if(!nt[0]&&!nt[1]&&!nt[2])return!1;var tt=function(dt,kt,mt){return fe(kt[0][3])&&fe(kt[1][3])&&fe(kt[2][3])?(re(dt,kt,mt),!0):Ve<3&&ge(dt,kt,mt,N,B,++Ve)};if(nt[0]&&nt[1]&&nt[2])return tt(Re,le,de)||He;var ot=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(dt){if(nt[dt[0]]&&nt[dt[1]]&&!nt[dt[2]]){var kt=le[dt[0]],mt=le[dt[1]],wt=le[dt[2]],Lt=ie(wt,kt,_e,Fe),Ct=ie(wt,mt,_e,Fe);He=tt(Re,[Ct,Lt,kt],[-1,-1,de[dt[0]]])||He,He=tt(Re,[kt,mt,Ct],[de[dt[0]],de[dt[1]],-1])||He,ot=!0}}),ot||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(dt){if(nt[dt[0]]&&!nt[dt[1]]&&!nt[dt[2]]){var kt=le[dt[0]],mt=le[dt[1]],wt=le[dt[2]],Lt=ie(mt,kt,_e,Fe),Ct=ie(wt,kt,_e,Fe);He=tt(Re,[Ct,Lt,kt],[-1,-1,de[dt[0]]])||He,ot=!0}}),He}function he(Re,le,de,_e){var Fe=!1,Ve=ye(le),He=[se(Ve[0][3],de,_e),se(Ve[1][3],de,_e),se(Ve[2][3],de,_e),se(Ve[3][3],de,_e)];if(!(He[0]||He[1]||He[2]||He[3]))return Fe;if(He[0]&&He[1]&&He[2]&&He[3])return u&&(Fe=function(tt,ot,dt){var kt=function(mt,wt,Lt){re(tt,[ot[mt],ot[wt],ot[Lt]],[dt[mt],dt[wt],dt[Lt]])};kt(0,1,2),kt(3,0,1),kt(2,3,0),kt(1,2,3)}(Re,Ve,le)||Fe),Fe;var nt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(tt){if(He[tt[0]]&&He[tt[1]]&&He[tt[2]]&&!He[tt[3]]){var ot=Ve[tt[0]],dt=Ve[tt[1]],kt=Ve[tt[2]],mt=Ve[tt[3]];if(u)Fe=re(Re,[ot,dt,kt],[le[tt[0]],le[tt[1]],le[tt[2]]])||Fe;else{var wt=ie(mt,ot,de,_e),Lt=ie(mt,dt,de,_e),Ct=ie(mt,kt,de,_e);Fe=re(null,[wt,Lt,Ct],[-1,-1,-1])||Fe}nt=!0}}),nt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(tt){if(He[tt[0]]&&He[tt[1]]&&!He[tt[2]]&&!He[tt[3]]){var ot=Ve[tt[0]],dt=Ve[tt[1]],kt=Ve[tt[2]],mt=Ve[tt[3]],wt=ie(kt,ot,de,_e),Lt=ie(kt,dt,de,_e),Ct=ie(mt,dt,de,_e),It=ie(mt,ot,de,_e);u?(Fe=re(Re,[ot,It,wt],[le[tt[0]],-1,-1])||Fe,Fe=re(Re,[dt,Lt,Ct],[le[tt[1]],-1,-1])||Fe):Fe=function(Ut,Rt,Ge){var We=function(Be,Ye,rt){re(null,[Rt[Be],Rt[Ye],Rt[rt]],[Ge[Be],Ge[Ye],Ge[rt]])};We(0,1,2),We(2,3,0)}(0,[wt,Lt,Ct,It],[-1,-1,-1,-1])||Fe,nt=!0}}),nt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(tt){if(He[tt[0]]&&!He[tt[1]]&&!He[tt[2]]&&!He[tt[3]]){var ot=Ve[tt[0]],dt=Ve[tt[1]],kt=Ve[tt[2]],mt=Ve[tt[3]],wt=ie(dt,ot,de,_e),Lt=ie(kt,ot,de,_e),Ct=ie(mt,ot,de,_e);u?(Fe=re(Re,[ot,wt,Lt],[le[tt[0]],-1,-1])||Fe,Fe=re(Re,[ot,Lt,Ct],[le[tt[0]],-1,-1])||Fe,Fe=re(Re,[ot,Ct,wt],[le[tt[0]],-1,-1])||Fe):Fe=re(null,[wt,Lt,Ct],[-1,-1,-1])||Fe,nt=!0}})),Fe}function ve(Re,le,de,_e,Fe,Ve,He,nt,tt,ot,dt){var kt=!1;return w&&(X(Re,"A")&&(kt=he(null,[le,de,_e,Ve],ot,dt)||kt),X(Re,"B")&&(kt=he(null,[de,_e,Fe,tt],ot,dt)||kt),X(Re,"C")&&(kt=he(null,[de,Ve,He,tt],ot,dt)||kt),X(Re,"D")&&(kt=he(null,[_e,Ve,nt,tt],ot,dt)||kt),X(Re,"E")&&(kt=he(null,[de,_e,Ve,tt],ot,dt)||kt)),u&&(kt=he(Re,[de,_e,Ve,tt],ot,dt)||kt),kt}function Oe(Re,le,de,_e,Fe,Ve,He,nt){return[nt[0]===!0||ge(Re,ye([le,de,_e]),[le,de,_e],Ve,He),nt[1]===!0||ge(Re,ye([_e,Fe,le]),[_e,Fe,le],Ve,He)]}function xe(Re,le,de,_e,Fe,Ve,He,nt,tt){return nt?Oe(Re,le,de,Fe,_e,Ve,He,tt):Oe(Re,de,Fe,_e,le,Ve,He,tt)}function ke(Re,le,de,_e,Fe,Ve,He){var nt,tt,ot,dt,kt=!1,mt=function(){kt=ge(Re,[nt,tt,ot],[-1,-1,-1],Fe,Ve)||kt,kt=ge(Re,[ot,dt,nt],[-1,-1,-1],Fe,Ve)||kt},wt=He[0],Lt=He[1],Ct=He[2];return wt&&(nt=W(ye([z(le,de-0,_e-0)])[0],ye([z(le-1,de-0,_e-0)])[0],wt),tt=W(ye([z(le,de-0,_e-1)])[0],ye([z(le-1,de-0,_e-1)])[0],wt),ot=W(ye([z(le,de-1,_e-1)])[0],ye([z(le-1,de-1,_e-1)])[0],wt),dt=W(ye([z(le,de-1,_e-0)])[0],ye([z(le-1,de-1,_e-0)])[0],wt),mt()),Lt&&(nt=W(ye([z(le-0,de,_e-0)])[0],ye([z(le-0,de-1,_e-0)])[0],Lt),tt=W(ye([z(le-0,de,_e-1)])[0],ye([z(le-0,de-1,_e-1)])[0],Lt),ot=W(ye([z(le-1,de,_e-1)])[0],ye([z(le-1,de-1,_e-1)])[0],Lt),dt=W(ye([z(le-1,de,_e-0)])[0],ye([z(le-1,de-1,_e-0)])[0],Lt),mt()),Ct&&(nt=W(ye([z(le-0,de-0,_e)])[0],ye([z(le-0,de-0,_e-1)])[0],Ct),tt=W(ye([z(le-0,de-1,_e)])[0],ye([z(le-0,de-1,_e-1)])[0],Ct),ot=W(ye([z(le-1,de-1,_e)])[0],ye([z(le-1,de-1,_e-1)])[0],Ct),dt=W(ye([z(le-1,de-0,_e)])[0],ye([z(le-1,de-0,_e-1)])[0],Ct),mt()),kt}function Me(Re,le,de,_e,Fe,Ve,He,nt,tt,ot,dt,kt){var mt=Re;return kt?(w&&Re==="even"&&(mt=null),ve(mt,le,de,_e,Fe,Ve,He,nt,tt,ot,dt)):(w&&Re==="odd"&&(mt=null),ve(mt,tt,nt,He,Ve,Fe,_e,de,le,ot,dt))}function Te(Re,le,de,_e,Fe){for(var Ve=[],He=0,nt=0;nt<le.length;nt++)for(var tt=le[nt],ot=1;ot<I;ot++)for(var dt=1;dt<P;dt++)Ve.push(xe(Re,z(tt,dt-1,ot-1),z(tt,dt-1,ot),z(tt,dt,ot-1),z(tt,dt,ot),de,_e,(tt+dt+ot)%2,Fe&&Fe[He]?Fe[He]:[])),He++;return Ve}function Q(Re,le,de,_e,Fe){for(var Ve=[],He=0,nt=0;nt<le.length;nt++)for(var tt=le[nt],ot=1;ot<C;ot++)for(var dt=1;dt<I;dt++)Ve.push(xe(Re,z(ot-1,tt,dt-1),z(ot,tt,dt-1),z(ot-1,tt,dt),z(ot,tt,dt),de,_e,(ot+tt+dt)%2,Fe&&Fe[He]?Fe[He]:[])),He++;return Ve}function oe(Re,le,de,_e,Fe){for(var Ve=[],He=0,nt=0;nt<le.length;nt++)for(var tt=le[nt],ot=1;ot<P;ot++)for(var dt=1;dt<C;dt++)Ve.push(xe(Re,z(dt-1,ot-1,tt),z(dt-1,ot,tt),z(dt,ot-1,tt),z(dt,ot,tt),de,_e,(dt+ot+tt)%2,Fe&&Fe[He]?Fe[He]:[])),He++;return Ve}function ce(Re,le,de){for(var _e=1;_e<I;_e++)for(var Fe=1;Fe<P;Fe++)for(var Ve=1;Ve<C;Ve++)Me(Re,z(Ve-1,Fe-1,_e-1),z(Ve-1,Fe-1,_e),z(Ve-1,Fe,_e-1),z(Ve-1,Fe,_e),z(Ve,Fe-1,_e-1),z(Ve,Fe-1,_e),z(Ve,Fe,_e-1),z(Ve,Fe,_e),le,de,(Ve+Fe+_e)%2)}function me(Re,le,de,_e,Fe,Ve){for(var He=[],nt=0,tt=0;tt<le.length;tt++)for(var ot=le[tt],dt=1;dt<I;dt++)for(var kt=1;kt<P;kt++)He.push(ke(Re,ot,kt,dt,de,_e,Fe[tt],Ve&&Ve[nt]&&Ve[nt])),nt++;return He}function Ae(Re,le,de,_e,Fe,Ve){for(var He=[],nt=0,tt=0;tt<le.length;tt++)for(var ot=le[tt],dt=1;dt<C;dt++)for(var kt=1;kt<I;kt++)He.push(ke(Re,dt,ot,kt,de,_e,Fe[tt],Ve&&Ve[nt]&&Ve[nt])),nt++;return He}function Ie(Re,le,de,_e,Fe,Ve){for(var He=[],nt=0,tt=0;tt<le.length;tt++)for(var ot=le[tt],dt=1;dt<P;dt++)for(var kt=1;kt<C;kt++)He.push(ke(Re,kt,dt,ot,de,_e,Fe[tt],Ve&&Ve[nt]&&Ve[nt])),nt++;return He}function Ce(Re,le){for(var de=[],_e=Re;_e<le;_e++)de.push(_e);return de}return function(){G(),function(){for(var tt=0;tt<C;tt++)for(var ot=0;ot<P;ot++)for(var dt=0;dt<I;dt++){var kt=z(tt,ot,dt);V(n._x[kt],n._y[kt],n._z[kt],n._value[kt])}}();var Re=null;if(y&&m&&(J(m),u=!0,ce(Re,N,B),u=!1),g&&p){J(p);for(var le=n.surface.pattern,de=n.surface.count,_e=0;_e<de;_e++){var Fe=de===1?.5:_e/(de-1),Ve=(1-Fe)*N+Fe*B,He=Math.abs(Ve-H)>Math.abs(Ve-F)?[H,Ve]:[Ve,F];w=!0,ce(le,He[0],He[1]),w=!1}}var nt=[[Math.min(N,F),Math.max(N,F)],[Math.min(H,B),Math.max(H,B)]];["x","y","z"].forEach(function(tt){for(var ot=[],dt=0;dt<nt.length;dt++){var kt=0,mt=nt[dt][0],wt=nt[dt][1],Lt=n.slices[tt];if(Lt.show&&Lt.fill){J(Lt.fill);var Ct=[],It=[],Ut=[];if(Lt.locations.length)for(var Rt=0;Rt<Lt.locations.length;Rt++){var Ge=d(Lt.locations[Rt],tt==="x"?_:tt==="y"?E:L);Ge.distRatio===0?Ct.push(Ge.id):Ge.id>0&&(It.push(Ge.id),tt==="x"?Ut.push([Ge.distRatio,0,0]):tt==="y"?Ut.push([0,Ge.distRatio,0]):Ut.push([0,0,Ge.distRatio]))}else Ct=Ce(1,tt==="x"?C-1:tt==="y"?P-1:I-1);It.length>0&&(ot[kt]=tt==="x"?me(Re,It,mt,wt,Ut,ot[kt]):tt==="y"?Ae(Re,It,mt,wt,Ut,ot[kt]):Ie(Re,It,mt,wt,Ut,ot[kt]),kt++),Ct.length>0&&(ot[kt]=tt==="x"?Te(Re,Ct,mt,wt,ot[kt]):tt==="y"?Q(Re,Ct,mt,wt,ot[kt]):oe(Re,Ct,mt,wt,ot[kt]),kt++)}var We=n.caps[tt];We.show&&We.fill&&(J(We.fill),ot[kt]=tt==="x"?Te(Re,[0,C-1],mt,wt,ot[kt]):tt==="y"?Q(Re,[0,P-1],mt,wt,ot[kt]):oe(Re,[0,I-1],mt,wt,ot[kt]),kt++)}}),S===0&&G(),n._meshX=c,n._meshY=h,n._meshZ=f,n._meshIntensity=b,n._Xs=_,n._Ys=E,n._Zs=L}(),n}$.exports={findNearestOnAxis:d,generateIsoMeshes:r,createIsosurfaceTrace:function(n,a){var i=n.glplot.gl,c=k({gl:i}),h=new s(n,c,a.uid);return c._trace=h,h.update(a),n.glplot.add(c),h}}},82738:function($,R,e){var k=e(71828),A=e(73972),l=e(16249),T=e(1586);function x(d,s,t,o,r){var n=r("isomin"),a=r("isomax");a!=null&&n!=null&&n>a&&(s.isomin=null,s.isomax=null);var i=r("x"),c=r("y"),h=r("z"),f=r("value");i&&i.length&&c&&c.length&&h&&h.length&&f&&f.length?(A.getComponentMethod("calendars","handleTraceDefaults")(d,s,["x","y","z"],o),r("valuehoverformat"),["x","y","z"].forEach(function(b){r(b+"hoverformat");var v="caps."+b;r(v+".show")&&r(v+".fill");var g="slices."+b;r(g+".show")&&(r(g+".fill"),r(g+".locations"))}),r("spaceframe.show")&&r("spaceframe.fill"),r("surface.show")&&(r("surface.count"),r("surface.fill"),r("surface.pattern")),r("contour.show")&&(r("contour.color"),r("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(b){r(b)}),T(d,s,o,r,{prefix:"",cLetter:"c"}),s._length=null):s.visible=!1}$.exports={supplyDefaults:function(d,s,t,o){x(d,s,0,o,function(r,n){return k.coerce(d,s,l,r,n)})},supplyIsoDefaults:x}},64943:function($,R,e){$.exports={attributes:e(16249),supplyDefaults:e(82738).supplyDefaults,calc:e(56959),colorbar:{min:"cmin",max:"cmax"},plot:e(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function($,R,e){var k=e(50693),A=e(12663).axisHoverFormat,l=e(5386).f,T=e(54532),x=e(9012),d=e(1426).extendFlat;$.exports=d({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:l({editType:"calc"}),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},k("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:d({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:d({},T.lightposition.x,{dflt:1e5}),y:d({},T.lightposition.y,{dflt:1e5}),z:d({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:d({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:d({},x.hoverinfo,{editType:"calc"}),showlegend:d({},x.showlegend,{dflt:!1})})},82932:function($,R,e){var k=e(78803);$.exports=function(A,l){l.intensity&&k(A,l,{vals:l.intensity,containerStr:"",cLetter:"c"})}},91134:function($,R,e){var k=e(9330).gl_mesh3d,A=e(9330).delaunay_triangulate,l=e(9330).alpha_shape,T=e(9330).convex_hull,x=e(81697).parseColorScale,d=e(78614),s=e(21081).extractOpts,t=e(90060);function o(h,f,b){this.scene=h,this.uid=b,this.mesh=f,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var r=o.prototype;function n(h){for(var f=[],b=h.length,v=0;v<b;v++)f[v]=d(h[v]);return f}function a(h,f,b,v){for(var g=[],y=f.length,p=0;p<y;p++)g[p]=h.d2l(f[p],0,v)*b;return g}function i(h){for(var f=[],b=h.length,v=0;v<b;v++)f[v]=Math.round(h[v]);return f}function c(h,f){for(var b=h.length,v=0;v<b;v++)if(h[v]<=-.5||h[v]>=f-.5)return!1;return!0}r.handlePick=function(h){if(h.object===this.mesh){var f=h.index=h.data.index;h.data._cellCenter?h.traceCoordinate=h.data.dataCoordinate:h.traceCoordinate=[this.data.x[f],this.data.y[f],this.data.z[f]];var b=this.data.hovertext||this.data.text;return Array.isArray(b)&&b[f]!==void 0?h.textLabel=b[f]:b&&(h.textLabel=b),!0}},r.update=function(h){var f=this.scene,b=f.fullSceneLayout;this.data=h;var v,g=h.x.length,y=t(a(b.xaxis,h.x,f.dataScale[0],h.xcalendar),a(b.yaxis,h.y,f.dataScale[1],h.ycalendar),a(b.zaxis,h.z,f.dataScale[2],h.zcalendar));if(h.i&&h.j&&h.k){if(h.i.length!==h.j.length||h.j.length!==h.k.length||!c(h.i,g)||!c(h.j,g)||!c(h.k,g))return;v=t(i(h.i),i(h.j),i(h.k))}else v=h.alphahull===0?T(y):h.alphahull>0?l(h.alphahull,y):function(u,S){for(var _=["x","y","z"].indexOf(u),E=[],L=S.length,C=0;C<L;C++)E[C]=[S[C][(_+1)%3],S[C][(_+2)%3]];return A(E)}(h.delaunayaxis,y);var p={positions:y,cells:v,lightPosition:[h.lightposition.x,h.lightposition.y,h.lightposition.z],ambient:h.lighting.ambient,diffuse:h.lighting.diffuse,specular:h.lighting.specular,roughness:h.lighting.roughness,fresnel:h.lighting.fresnel,vertexNormalsEpsilon:h.lighting.vertexnormalsepsilon,faceNormalsEpsilon:h.lighting.facenormalsepsilon,opacity:h.opacity,contourEnable:h.contour.show,contourColor:d(h.contour.color).slice(0,3),contourWidth:h.contour.width,useFacetNormals:h.flatshading};if(h.intensity){var m=s(h);this.color="#fff";var w=h.intensitymode;p[w+"Intensity"]=h.intensity,p[w+"IntensityBounds"]=[m.min,m.max],p.colormap=x(h)}else h.vertexcolor?(this.color=h.vertexcolor[0],p.vertexColors=n(h.vertexcolor)):h.facecolor?(this.color=h.facecolor[0],p.cellColors=n(h.facecolor)):(this.color=h.color,p.meshColor=d(h.color));this.mesh.update(p)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(h,f){var b=h.glplot.gl,v=k({gl:b}),g=new o(h,v,f.uid);return v._trace=g,g.update(f),h.glplot.add(v),g}},58669:function($,R,e){var k=e(73972),A=e(71828),l=e(1586),T=e(2418);$.exports=function(x,d,s,t){function o(n,a){return A.coerce(x,d,T,n,a)}function r(n){var a=n.map(function(i){var c=o(i);return c&&A.isArrayOrTypedArray(c)?c:null});return a.every(function(i){return i&&i.length===a[0].length})&&a}r(["x","y","z"])?(r(["i","j","k"]),(!d.i||d.j&&d.k)&&(!d.j||d.k&&d.i)&&(!d.k||d.i&&d.j)?(k.getComponentMethod("calendars","handleTraceDefaults")(x,d,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(n){o(n)}),o("contour.show")&&(o("contour.color"),o("contour.width")),"intensity"in x?(o("intensity"),o("intensitymode"),l(x,d,t,o,{prefix:"",cLetter:"c"})):(d.showscale=!1,"facecolor"in x?o("facecolor"):"vertexcolor"in x?o("vertexcolor"):o("color",s)),o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),d._length=null):d.visible=!1):d.visible=!1}},21164:function($,R,e){$.exports={attributes:e(2418),supplyDefaults:e(58669),calc:e(82932),colorbar:{min:"cmin",max:"cmax"},plot:e(91134),moduleType:"trace",name:"mesh3d",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function($,R,e){var k=e(71828).extendFlat,A=e(82196),l=e(12663).axisHoverFormat,T=e(79952).P,x=e(77914),d=e(22372),s=d.INCREASING.COLOR,t=d.DECREASING.COLOR,o=A.line;function r(n){return{line:{color:k({},o.color,{dflt:n}),width:o.width,dash:T,editType:"style"},editType:"style"}}$.exports={xperiod:A.xperiod,xperiod0:A.xperiod0,xperiodalignment:A.xperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:k({},o.width,{}),dash:k({},T,{}),editType:"style"},increasing:r(s),decreasing:r(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:k({},x.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},3485:function($,R,e){var k=e(71828),A=k._,l=e(89298),T=e(42973),x=e(50606).BADNUM;function d(t,o,r,n){return{o:t,h:o,l:r,c:n}}function s(t,o,r,n,a,i){for(var c=a.makeCalcdata(o,"open"),h=a.makeCalcdata(o,"high"),f=a.makeCalcdata(o,"low"),b=a.makeCalcdata(o,"close"),v=Array.isArray(o.text),g=Array.isArray(o.hovertext),y=!0,p=null,m=!!o.xperiodalignment,w=[],u=0;u<n.length;u++){var S=n[u],_=c[u],E=h[u],L=f[u],C=b[u];if(S!==x&&_!==x&&E!==x&&L!==x&&C!==x){C===_?p!==null&&C!==p&&(y=C>p):y=C>_,p=C;var P=i(_,E,L,C);P.pos=S,P.yc=(_+C)/2,P.i=u,P.dir=y?"increasing":"decreasing",P.x=P.pos,P.y=[L,E],m&&(P.orig_p=r[u]),v&&(P.tx=o.text[u]),g&&(P.htx=o.hovertext[u]),w.push(P)}else w.push({pos:S,empty:!0})}return o._extremes[a._id]=l.findExtremes(a,k.concat(f,h),{padded:!0}),w.length&&(w[0].t={labels:{open:A(t,"open:")+" ",high:A(t,"high:")+" ",low:A(t,"low:")+" ",close:A(t,"close:")+" "}}),w}$.exports={calc:function(t,o){var r=l.getFromId(t,o.xaxis),n=l.getFromId(t,o.yaxis),a=function(b,v,g){var y=g._minDiff;if(!y){var p,m=b._fullData,w=[];for(y=1/0,p=0;p<m.length;p++){var u=m[p];if(u.type==="ohlc"&&u.visible===!0&&u.xaxis===v._id){w.push(u);var S=v.makeCalcdata(u,"x");u._origX=S;var _=T(g,v,"x",S).vals;u._xcalc=_;var E=k.distinctVals(_).minDiff;E&&isFinite(E)&&(y=Math.min(y,E))}}for(y===1/0&&(y=1),p=0;p<w.length;p++)w[p]._minDiff=y}return y*g.tickwidth}(t,r,o),i=o._minDiff;o._minDiff=null;var c=o._origX;o._origX=null;var h=o._xcalc;o._xcalc=null;var f=s(t,o,c,h,n,d);return o._extremes[r._id]=l.findExtremes(r,h,{vpad:i/2}),f.length?(k.extendFlat(f[0].t,{wHover:i/2,tickLen:a}),f):[{t:{empty:!0}}]},calcCommon:s}},16169:function($,R,e){var k=e(71828),A=e(14555),l=e(73927),T=e(2522);function x(d,s,t,o){t(o+".line.color"),t(o+".line.width",s.line.width),t(o+".line.dash",s.line.dash)}$.exports=function(d,s,t,o){function r(n,a){return k.coerce(d,s,T,n,a)}A(d,s,r,o)?(l(d,s,o,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),r("line.dash"),x(0,s,r,"increasing"),x(0,s,r,"decreasing"),r("text"),r("hovertext"),r("tickwidth"),o._requestRangeslider[s.xaxis]=!0):s.visible=!1}},66449:function($,R,e){var k=e(89298),A=e(71828),l=e(30211),T=e(7901),x=e(71828).fillText,d=e(22372),s={increasing:d.INCREASING.SYMBOL,decreasing:d.DECREASING.SYMBOL};function t(n,a,i,c){var h,f,b=n.cd,v=n.xa,g=b[0].trace,y=b[0].t,p=g.type,m=p==="ohlc"?"l":"min",w=p==="ohlc"?"h":"max",u=y.bPos||0,S=y.bdPos||y.tickLen,_=y.wHover,E=Math.min(1,S/Math.abs(v.r2c(v.range[1])-v.r2c(v.range[0])));function L(F){var N=function(B){return B.pos+u-a}(F);return l.inbox(N-_,N+_,h)}function C(F){var N=F[m],B=F[w];return N===B||l.inbox(N-i,B-i,h)}function P(F){return(L(F)+C(F))/2}h=n.maxHoverDistance-E,f=n.maxSpikeDistance-E;var I=l.getDistanceFunction(c,L,C,P);if(l.getClosest(b,I,n),n.index===!1)return null;var U=b[n.index];if(U.empty)return null;var z=g[U.dir],H=z.line.color;return T.opacity(H)&&z.line.width?n.color=H:n.color=z.fillcolor,n.x0=v.c2p(U.pos+u-S,!0),n.x1=v.c2p(U.pos+u+S,!0),n.xLabelVal=U.orig_p!==void 0?U.orig_p:U.pos,n.spikeDistance=P(U)*f/h,n.xSpike=v.c2p(U.pos,!0),n}function o(n,a,i,c){var h=n.cd,f=n.ya,b=h[0].trace,v=h[0].t,g=[],y=t(n,a,i,c);if(!y)return[];var p=h[y.index].hi||b.hoverinfo,m=p.split("+");if(p!=="all"&&m.indexOf("y")===-1)return[];for(var w=["high","open","close","low"],u={},S=0;S<w.length;S++){var _,E=w[S],L=b[E][y.index],C=f.c2p(L,!0);L in u?(_=u[L]).yLabel+="<br>"+v.labels[E]+k.hoverLabelText(f,L,b.yhoverformat):((_=A.extendFlat({},y)).y0=_.y1=C,_.yLabelVal=L,_.yLabel=v.labels[E]+k.hoverLabelText(f,L,b.yhoverformat),_.name="",g.push(_),u[L]=_)}return g}function r(n,a,i,c){var h=n.cd,f=n.ya,b=h[0].trace,v=h[0].t,g=t(n,a,i,c);if(!g)return[];var y=h[g.index],p=g.index=y.i,m=y.dir;function w(P){return v.labels[P]+k.hoverLabelText(f,b[P][p],b.yhoverformat)}var u=y.hi||b.hoverinfo,S=u.split("+"),_=u==="all",E=_||S.indexOf("y")!==-1,L=_||S.indexOf("text")!==-1,C=E?[w("open"),w("high"),w("low"),w("close")+"  "+s[m]]:[];return L&&x(y,b,C),g.extraText=C.join("<br>"),g.y0=g.y1=f.c2p(y.yc,!0),[g]}$.exports={hoverPoints:function(n,a,i,c){return n.cd[0].trace.hoverlabel.split?o(n,a,i,c):r(n,a,i,c)},hoverSplit:o,hoverOnPoints:r}},54186:function($,R,e){$.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(2522),supplyDefaults:e(16169),calc:e(3485).calc,plot:e(72314),style:e(53101),hoverPoints:e(66449).hoverPoints,selectPoints:e(67324)}},14555:function($,R,e){var k=e(73972),A=e(71828);$.exports=function(l,T,x,d){var s=x("x"),t=x("open"),o=x("high"),r=x("low"),n=x("close");if(x("hoverlabel.split"),k.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x"],d),t&&o&&r&&n){var a=Math.min(t.length,o.length,r.length,n.length);return s&&(a=Math.min(a,A.minRowLength(s))),T._length=a,a}}},72314:function($,R,e){var k=e(39898),A=e(71828);$.exports=function(l,T,x,d){var s=T.yaxis,t=T.xaxis,o=!!t.rangebreaks;A.makeTraceGroups(d,x,"trace ohlc").each(function(r){var n=k.select(this),a=r[0],i=a.t;if(a.trace.visible!==!0||i.empty)n.remove();else{var c=i.tickLen,h=n.selectAll("path").data(A.identity);h.enter().append("path"),h.exit().remove(),h.attr("d",function(f){if(f.empty)return"M0,0Z";var b=t.c2p(f.pos-c,!0),v=t.c2p(f.pos+c,!0),g=o?(b+v)/2:t.c2p(f.pos,!0);return"M"+b+","+s.c2p(f.o,!0)+"H"+g+"M"+g+","+s.c2p(f.h,!0)+"V"+s.c2p(f.l,!0)+"M"+v+","+s.c2p(f.c,!0)+"H"+g})}})}},67324:function($){$.exports=function(R,e){var k,A=R.cd,l=R.xaxis,T=R.yaxis,x=[],d=A[0].t.bPos||0;if(e===!1)for(k=0;k<A.length;k++)A[k].selected=0;else for(k=0;k<A.length;k++){var s=A[k];e.contains([l.c2p(s.pos+d),T.c2p(s.yc)],null,s.i,R)?(x.push({pointNumber:s.i,x:l.c2d(s.pos),y:T.c2d(s.yc)}),s.selected=1):s.selected=0}return x}},53101:function($,R,e){var k=e(39898),A=e(91424),l=e(7901);$.exports=function(T,x,d){var s=d||k.select(T).selectAll("g.ohlclayer").selectAll("g.trace");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var o=t[0].trace;k.select(this).selectAll("path").each(function(r){if(!r.empty){var n=o[r.dir].line;k.select(this).style("fill","none").call(l.stroke,n.color).call(A.dashLine,n.dash,n.width).style("opacity",o.selectedpoints&&!r.selected?.3:1)}})})}},99506:function($,R,e){var k=e(1426).extendFlat,A=e(9012),l=e(41940),T=e(50693),x=e(5386).f,d=e(27670).Y,s=k({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:x({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});$.exports={domain:d({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:k({},A.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:x({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:l({editType:"calc"}),tickfont:l({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:s,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},27677:function($,R,e){var k=e(27659).a0,A=e(45784),l="parcats";R.name=l,R.plot=function(T,x,d,s){var t=k(T.calcdata,l);if(t.length){var o=t[0];A(T,o,d,s)}},R.clean=function(T,x,d,s){var t=s._has&&s._has("parcats"),o=x._has&&x._has("parcats");t&&!o&&s._paperdiv.selectAll(".parcats").remove()}},28699:function($,R,e){var k=e(28984).wrap,A=e(52075).hasColorscale,l=e(78803),T=e(75744),x=e(91424),d=e(71828),s=e(92770);function t(n,a,i){n.valueInds.push(a),n.count+=i}function o(n,a,i){return{categoryInds:n,color:a,rawColor:i,valueInds:[],count:0}}function r(n,a,i){n.valueInds.push(a),n.count+=i}$.exports=function(n,a){var i=d.filterVisible(a.dimensions);if(i.length===0)return[];var c,h,f,b=i.map(function(j){var K;if(j.categoryorder==="trace")K=null;else if(j.categoryorder==="array")K=j.categoryarray;else{K=T(j.values);for(var G=!0,V=0;V<K.length;V++)if(!s(K[V])){G=!1;break}K.sort(G?d.sorterAsc:void 0),j.categoryorder==="category descending"&&(K=K.reverse())}return function(W,J){J=J==null?[]:J.map(function(ge){return ge});var X={},ee={},re=[];J.forEach(function(ge,he){X[ge]=0,ee[ge]=he});for(var ie=0;ie<W.length;ie++){var se,fe=W[ie];X[fe]===void 0?(X[fe]=1,se=J.push(fe)-1,ee[fe]=se):(X[fe]++,se=ee[fe]),re.push(se)}var ye=J.map(function(ge){return X[ge]});return{uniqueValues:J,uniqueCounts:ye,inds:re}}(j.values,K)});c=d.isArrayOrTypedArray(a.counts)?a.counts:[a.counts],function(j){var K,G=j.map(function(V){return V.displayindex});if(function(V){for(var W=new Array(V.length),J=0;J<V.length;J++){if(V[J]<0||V[J]>=V.length||W[V[J]]!==void 0)return!1;W[V[J]]=!0}return!0}(G))for(K=0;K<j.length;K++)j[K]._displayindex=j[K].displayindex;else for(K=0;K<j.length;K++)j[K]._displayindex=K}(i),i.forEach(function(j,K){(function(G,V){G._categoryarray=V.uniqueValues,G.ticktext===null||G.ticktext===void 0?G._ticktext=[]:G._ticktext=G.ticktext.slice();for(var W=G._ticktext.length;W<V.uniqueValues.length;W++)G._ticktext.push(V.uniqueValues[W])})(j,b[K])});var v,g=a.line;g?(A(a,"line")&&l(n,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),v=x.tryColorscale(g)):v=d.identity;var y,p,m,w,u,S=i[0].values.length,_={},E=b.map(function(j){return j.inds});for(f=0,y=0;y<S;y++){var L=[];for(p=0;p<E.length;p++)L.push(E[p][y]);h=c[y%c.length],f+=h;var C=(m=y,w=void 0,u=void 0,d.isArrayOrTypedArray(g.color)?u=w=g.color[m%g.color.length]:w=g.color,{color:v(w),rawColor:u}),P=L+"-"+C.rawColor;_[P]===void 0&&(_[P]=o(L,C.color,C.rawColor)),r(_[P],y,h)}var I,U=i.map(function(j,K){return function(G,V,W,J,X){return{dimensionInd:G,containerInd:V,displayInd:W,dimensionLabel:J,count:X,categories:[],dragX:null}}(K,j._index,j._displayindex,j.label,f)});for(y=0;y<S;y++)for(h=c[y%c.length],p=0;p<U.length;p++){var z=U[p].containerInd,H=b[p].inds[y],F=U[p].categories;if(F[H]===void 0){var N=a.dimensions[z]._categoryarray[H],B=a.dimensions[z]._ticktext[H];F[H]={dimensionInd:p,categoryInd:I=H,categoryValue:N,displayInd:I,categoryLabel:B,valueInds:[],count:0,dragY:null}}t(F[H],y,h)}return k(function(j,K,G){var V=j.map(function(W){return W.categories.length}).reduce(function(W,J){return Math.max(W,J)});return{dimensions:j,paths:K,trace:void 0,maxCats:V,count:G}}(U,_,f))}},14647:function($,R,e){var k=e(71828),A=e(52075).hasColorscale,l=e(1586),T=e(27670).c,x=e(85501),d=e(99506),s=e(94397);function t(o,r){function n(v,g){return k.coerce(o,r,d.dimensions,v,g)}var a=n("values"),i=n("visible");if(a&&a.length||(i=r.visible=!1),i){n("label"),n("displayindex",r._index);var c,h=o.categoryarray,f=Array.isArray(h)&&h.length>0;f&&(c="array");var b=n("categoryorder",c);b==="array"?(n("categoryarray"),n("ticktext")):(delete o.categoryarray,delete o.ticktext),f||b!=="array"||(r.categoryorder="trace")}}$.exports=function(o,r,n,a){function i(v,g){return k.coerce(o,r,d,v,g)}var c=x(o,r,{name:"dimensions",handleItemDefaults:t}),h=function(v,g,y,p,m){m("line.shape"),m("line.hovertemplate");var w=m("line.color",p.colorway[0]);if(A(v,"line")&&k.isArrayOrTypedArray(w)){if(w.length)return m("line.colorscale"),l(v,g,p,m,{prefix:"line.",cLetter:"c"}),w.length;g.line.color=y}return 1/0}(o,r,n,a,i);T(r,a,i),Array.isArray(c)&&c.length||(r.visible=!1),s(r,c,"values",h),i("hoveron"),i("hovertemplate"),i("arrangement"),i("bundlecolors"),i("sortpaths"),i("counts");var f={family:a.font.family,size:Math.round(a.font.size),color:a.font.color};k.coerceFont(i,"labelfont",f);var b={family:a.font.family,size:Math.round(a.font.size/1.2),color:a.font.color};k.coerceFont(i,"tickfont",b)}},94873:function($,R,e){$.exports={attributes:e(99506),supplyDefaults:e(14647),calc:e(28699),plot:e(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(27677),categories:["noOpacity"],meta:{}}},45460:function($,R,e){var k=e(39898),A=e(29502).k4,l=e(72391),T=e(30211),x=e(71828),d=x.strTranslate,s=e(91424),t=e(84267),o=e(63893);function r(G,V,W,J){var X=V._context.staticPlot,ee=G.map(F.bind(0,V,W)),re=J.selectAll("g.parcatslayer").data([null]);re.enter().append("g").attr("class","parcatslayer").style("pointer-events",X?"none":"all");var ie=re.selectAll("g.trace.parcats").data(ee,n),se=ie.enter().append("g").attr("class","trace parcats");ie.attr("transform",function(Me){return d(Me.x,Me.y)}),se.append("g").attr("class","paths");var fe=ie.select("g.paths").selectAll("path.path").data(function(Me){return Me.paths},n);fe.attr("fill",function(Me){return Me.model.color});var ye=fe.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Me){return Me.model.color}).attr("fill-opacity",0);g(ye),fe.attr("d",function(Me){return Me.svgD}),ye.empty()||fe.sort(i),fe.exit().remove(),fe.on("mouseover",c).on("mouseout",h).on("click",v),se.append("g").attr("class","dimensions");var ge=ie.select("g.dimensions").selectAll("g.dimension").data(function(Me){return Me.dimensions},n);ge.enter().append("g").attr("class","dimension"),ge.attr("transform",function(Me){return d(Me.x,0)}),ge.exit().remove();var he=ge.selectAll("g.category").data(function(Me){return Me.categories},n),ve=he.enter().append("g").attr("class","category");he.attr("transform",function(Me){return d(0,Me.y)}),ve.append("rect").attr("class","catrect").attr("pointer-events","none"),he.select("rect.catrect").attr("fill","none").attr("width",function(Me){return Me.width}).attr("height",function(Me){return Me.height}),p(ve);var Oe=he.selectAll("rect.bandrect").data(function(Me){return Me.bands},n);Oe.each(function(){x.raiseToTop(this)}),Oe.attr("fill",function(Me){return Me.color});var xe=Oe.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Me){return Me.color}).attr("fill-opacity",0);Oe.attr("fill",function(Me){return Me.color}).attr("width",function(Me){return Me.width}).attr("height",function(Me){return Me.height}).attr("y",function(Me){return Me.y}).attr("cursor",function(Me){return Me.parcatsViewModel.arrangement==="fixed"?"default":Me.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),m(xe),Oe.exit().remove(),ve.append("text").attr("class","catlabel").attr("pointer-events","none");var ke=V._fullLayout.paper_bgcolor;he.select("text.catlabel").attr("text-anchor",function(Me){return a(Me)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",o.makeTextShadow(ke)).style("fill","rgb(0, 0, 0)").attr("x",function(Me){return a(Me)?Me.width+5:-5}).attr("y",function(Me){return Me.height/2}).text(function(Me){return Me.model.categoryLabel}).each(function(Me){s.font(k.select(this),Me.parcatsViewModel.categorylabelfont),o.convertToTspans(k.select(this),V)}),ve.append("text").attr("class","dimlabel"),he.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Me){return Me.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(Me){return Me.width/2}).attr("y",-5).text(function(Me,Te){return Te===0?Me.parcatsViewModel.model.dimensions[Me.model.dimensionInd].dimensionLabel:null}).each(function(Me){s.font(k.select(this),Me.parcatsViewModel.labelfont)}),he.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",L),he.exit().remove(),ge.call(k.behavior.drag().origin(function(Me){return{x:Me.x,y:0}}).on("dragstart",C).on("drag",P).on("dragend",I)),ie.each(function(Me){Me.traceSelection=k.select(this),Me.pathSelection=k.select(this).selectAll("g.paths").selectAll("path.path"),Me.dimensionSelection=k.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ie.exit().remove()}function n(G){return G.key}function a(G){var V=G.parcatsViewModel.dimensions.length,W=G.parcatsViewModel.dimensions[V-1].model.dimensionInd;return G.model.dimensionInd===W}function i(G,V){return G.model.rawColor>V.model.rawColor?1:G.model.rawColor<V.model.rawColor?-1:0}function c(G){if(!G.parcatsViewModel.dragDimension&&G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){x.raiseToTop(this),y(k.select(this));var V=f(G),W=b(G);if(G.parcatsViewModel.graphDiv.emit("plotly_hover",{points:V,event:k.event,constraints:W}),G.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var J,X,ee,re=k.mouse(this)[0],ie=G.parcatsViewModel.graphDiv,se=G.parcatsViewModel.trace,fe=ie._fullLayout,ye=fe._paperdiv.node().getBoundingClientRect(),ge=G.parcatsViewModel.graphDiv.getBoundingClientRect();for(ee=0;ee<G.leftXs.length-1;ee++)if(G.leftXs[ee]+G.dimWidths[ee]-2<=re&&re<=G.leftXs[ee+1]+2){var he=G.parcatsViewModel.dimensions[ee],ve=G.parcatsViewModel.dimensions[ee+1];J=(he.x+he.width+ve.x)/2,X=(G.topYs[ee]+G.topYs[ee+1]+G.height)/2;break}var Oe=G.parcatsViewModel.x+J,xe=G.parcatsViewModel.y+X,ke=t.mostReadable(G.model.color,["black","white"]),Me=G.model.count,Te=Me/G.parcatsViewModel.model.count,Q={countLabel:Me,probabilityLabel:Te.toFixed(3)},oe=[];G.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&oe.push(["Count:",Q.countLabel].join(" ")),G.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&oe.push(["P:",Q.probabilityLabel].join(" "));var ce=oe.join("<br>"),me=k.mouse(ie)[0];T.loneHover({trace:se,x:Oe-ye.left+ge.left,y:xe-ye.top+ge.top,text:ce,color:G.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:ke,idealAlign:me<Oe?"right":"left",hovertemplate:(se.line||{}).hovertemplate,hovertemplateLabels:Q,eventData:[{data:se._input,fullData:se,count:Me,probability:Te}]},{container:fe._hoverlayer.node(),outerContainer:fe._paper.node(),gd:ie})}}}function h(G){if(!G.parcatsViewModel.dragDimension&&(g(k.select(this)),T.loneUnhover(G.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),G.parcatsViewModel.pathSelection.sort(i),G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var V=f(G),W=b(G);G.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:V,event:k.event,constraints:W})}}function f(G){for(var V=[],W=U(G.parcatsViewModel),J=0;J<G.model.valueInds.length;J++){var X=G.model.valueInds[J];V.push({curveNumber:W,pointNumber:X})}return V}function b(G){for(var V={},W=G.parcatsViewModel.model.dimensions,J=0;J<W.length;J++){var X=W[J],ee=X.categories[G.model.categoryInds[J]];V[X.containerInd]=ee.categoryValue}return G.model.rawColor!==void 0&&(V.color=G.model.rawColor),V}function v(G){if(G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var V=f(G),W=b(G);G.parcatsViewModel.graphDiv.emit("plotly_click",{points:V,event:k.event,constraints:W})}}function g(G){G.attr("fill",function(V){return V.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function y(G){G.attr("fill-opacity",.8).attr("stroke",function(V){return t.mostReadable(V.model.color,["black","white"])}).attr("stroke-width",.3)}function p(G){G.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function m(G){G.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function w(G){var V=G.parcatsViewModel.pathSelection,W=G.categoryViewModel.model.dimensionInd,J=G.categoryViewModel.model.categoryInd;return V.filter(function(X){return X.model.categoryInds[W]===J&&X.model.color===G.color})}function u(G,V,W){var J=k.select(G).datum(),X=J.categoryViewModel.model,ee=J.parcatsViewModel.graphDiv,re=k.select(G.parentNode).selectAll("rect.bandrect"),ie=[];re.each(function(fe){w(fe).each(function(ye){Array.prototype.push.apply(ie,f(ye))})});var se={};se[X.dimensionInd]=X.categoryValue,ee.emit(V,{points:ie,event:W,constraints:se})}function S(G,V,W){var J=k.select(G).datum(),X=J.categoryViewModel.model,ee=J.parcatsViewModel.graphDiv,re=w(J),ie=[];re.each(function(fe){Array.prototype.push.apply(ie,f(fe))});var se={};se[X.dimensionInd]=X.categoryValue,J.rawColor!==void 0&&(se.color=J.rawColor),ee.emit(V,{points:ie,event:W,constraints:se})}function _(G,V,W){G._fullLayout._calcInverseTransform(G);var J,X,ee=G._fullLayout._invScaleX,re=G._fullLayout._invScaleY,ie=k.select(W.parentNode).select("rect.catrect"),se=ie.node().getBoundingClientRect(),fe=ie.datum(),ye=fe.parcatsViewModel,ge=ye.model.dimensions[fe.model.dimensionInd],he=ye.trace,ve=se.top+se.height/2;ye.dimensions.length>1&&ge.displayInd===ye.dimensions.length-1?(J=se.left,X="left"):(J=se.left+se.width,X="right");var Oe=fe.model.count,xe=fe.model.categoryLabel,ke=Oe/fe.parcatsViewModel.model.count,Me={countLabel:Oe,categoryLabel:xe,probabilityLabel:ke.toFixed(3)},Te=[];fe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Te.push(["Count:",Me.countLabel].join(" ")),fe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Te.push(["P("+Me.categoryLabel+"):",Me.probabilityLabel].join(" "));var Q=Te.join("<br>");return{trace:he,x:ee*(J-V.left),y:re*(ve-V.top),text:Q,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:X,hovertemplate:he.hovertemplate,hovertemplateLabels:Me,eventData:[{data:he._input,fullData:he,count:Oe,category:xe,probability:ke}]}}function E(G){if(!G.parcatsViewModel.dragDimension&&G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(k.mouse(this)[1]<-1)return;var V,W=G.parcatsViewModel.graphDiv,J=W._fullLayout,X=J._paperdiv.node().getBoundingClientRect(),ee=G.parcatsViewModel.hoveron,re=this;ee==="color"?(function(ie){var se=k.select(ie).datum(),fe=w(se);y(fe),fe.each(function(){x.raiseToTop(this)}),k.select(ie.parentNode).selectAll("rect.bandrect").filter(function(ye){return ye.color===se.color}).each(function(){x.raiseToTop(this),k.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(re),S(re,"plotly_hover",k.event)):(function(ie){k.select(ie.parentNode).selectAll("rect.bandrect").each(function(se){var fe=w(se);y(fe),fe.each(function(){x.raiseToTop(this)})}),k.select(ie.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(re),u(re,"plotly_hover",k.event)),G.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(ee==="category"?V=_(W,X,re):ee==="color"?V=function(ie,se,fe){ie._fullLayout._calcInverseTransform(ie);var ye,ge,he=ie._fullLayout._invScaleX,ve=ie._fullLayout._invScaleY,Oe=fe.getBoundingClientRect(),xe=k.select(fe).datum(),ke=xe.categoryViewModel,Me=ke.parcatsViewModel,Te=Me.model.dimensions[ke.model.dimensionInd],Q=Me.trace,oe=Oe.y+Oe.height/2;Me.dimensions.length>1&&Te.displayInd===Me.dimensions.length-1?(ye=Oe.left,ge="left"):(ye=Oe.left+Oe.width,ge="right");var ce=ke.model.categoryLabel,me=xe.parcatsViewModel.model.count,Ae=0;xe.categoryViewModel.bands.forEach(function(nt){nt.color===xe.color&&(Ae+=nt.count)});var Ie=ke.model.count,Ce=0;Me.pathSelection.each(function(nt){nt.model.color===xe.color&&(Ce+=nt.model.count)});var Re=Ae/me,le=Ae/Ce,de=Ae/Ie,_e={countLabel:me,categoryLabel:ce,probabilityLabel:Re.toFixed(3)},Fe=[];ke.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Fe.push(["Count:",_e.countLabel].join(" ")),ke.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Fe.push("P(color  "+ce+"): "+_e.probabilityLabel),Fe.push("P("+ce+" | color): "+le.toFixed(3)),Fe.push("P(color | "+ce+"): "+de.toFixed(3)));var Ve=Fe.join("<br>"),He=t.mostReadable(xe.color,["black","white"]);return{trace:Q,x:he*(ye-se.left),y:ve*(oe-se.top),text:Ve,color:xe.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:He,fontSize:10,idealAlign:ge,hovertemplate:Q.hovertemplate,hovertemplateLabels:_e,eventData:[{data:Q._input,fullData:Q,category:ce,count:me,probability:Re,categorycount:Ie,colorcount:Ce,bandcolorcount:Ae}]}}(W,X,re):ee==="dimension"&&(V=function(ie,se,fe){var ye=[];return k.select(fe.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){ye.push(_(ie,se,this))}),ye}(W,X,re)),V&&T.loneHover(V,{container:J._hoverlayer.node(),outerContainer:J._paper.node(),gd:W}))}}function L(G){var V=G.parcatsViewModel;V.dragDimension||(g(V.pathSelection),p(V.dimensionSelection.selectAll("g.category")),m(V.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(V.graphDiv._fullLayout._hoverlayer.node()),V.pathSelection.sort(i),V.hoverinfoItems.indexOf("skip")!==-1)||(G.parcatsViewModel.hoveron==="color"?S(this,"plotly_unhover",k.event):u(this,"plotly_unhover",k.event))}function C(G){G.parcatsViewModel.arrangement!=="fixed"&&(G.dragDimensionDisplayInd=G.model.displayInd,G.initialDragDimensionDisplayInds=G.parcatsViewModel.model.dimensions.map(function(V){return V.displayInd}),G.dragHasMoved=!1,G.dragCategoryDisplayInd=null,k.select(this).selectAll("g.category").select("rect.catrect").each(function(V){var W=k.mouse(this)[0],J=k.mouse(this)[1];-2<=W&&W<=V.width+2&&-2<=J&&J<=V.height+2&&(G.dragCategoryDisplayInd=V.model.displayInd,G.initialDragCategoryDisplayInds=G.model.categories.map(function(X){return X.displayInd}),V.model.dragY=V.y,x.raiseToTop(this.parentNode),k.select(this.parentNode).selectAll("rect.bandrect").each(function(X){X.y<J&&J<=X.y+X.height&&(G.potentialClickBand=this)}))}),G.parcatsViewModel.dragDimension=G,T.loneUnhover(G.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function P(G){if(G.parcatsViewModel.arrangement!=="fixed"&&(G.dragHasMoved=!0,G.dragDimensionDisplayInd!==null)){var V=G.dragDimensionDisplayInd,W=V-1,J=V+1,X=G.parcatsViewModel.dimensions[V];if(G.dragCategoryDisplayInd!==null){var ee=X.categories[G.dragCategoryDisplayInd];ee.model.dragY+=k.event.dy;var re=ee.model.dragY,ie=ee.model.displayInd,se=X.categories,fe=se[ie-1],ye=se[ie+1];fe!==void 0&&re<fe.y+fe.height/2&&(ee.model.displayInd=fe.model.displayInd,fe.model.displayInd=ie),ye!==void 0&&re+ee.height>ye.y+ye.height/2&&(ee.model.displayInd=ye.model.displayInd,ye.model.displayInd=ie),G.dragCategoryDisplayInd=ee.model.displayInd}if(G.dragCategoryDisplayInd===null||G.parcatsViewModel.arrangement==="freeform"){X.model.dragX=k.event.x;var ge=G.parcatsViewModel.dimensions[W],he=G.parcatsViewModel.dimensions[J];ge!==void 0&&X.model.dragX<ge.x+ge.width&&(X.model.displayInd=ge.model.displayInd,ge.model.displayInd=V),he!==void 0&&X.model.dragX+X.width>he.x&&(X.model.displayInd=he.model.displayInd,he.model.displayInd=G.dragDimensionDisplayInd),G.dragDimensionDisplayInd=X.model.displayInd}j(G.parcatsViewModel),B(G.parcatsViewModel),H(G.parcatsViewModel),z(G.parcatsViewModel)}}function I(G){if(G.parcatsViewModel.arrangement!=="fixed"&&G.dragDimensionDisplayInd!==null){k.select(this).selectAll("text").attr("font-weight","normal");var V={},W=U(G.parcatsViewModel),J=G.parcatsViewModel.model.dimensions.map(function(ye){return ye.displayInd}),X=G.initialDragDimensionDisplayInds.some(function(ye,ge){return ye!==J[ge]});X&&J.forEach(function(ye,ge){var he=G.parcatsViewModel.model.dimensions[ge].containerInd;V["dimensions["+he+"].displayindex"]=ye});var ee=!1;if(G.dragCategoryDisplayInd!==null){var re=G.model.categories.map(function(ye){return ye.displayInd});if(ee=G.initialDragCategoryDisplayInds.some(function(ye,ge){return ye!==re[ge]})){var ie=G.model.categories.slice().sort(function(ye,ge){return ye.displayInd-ge.displayInd}),se=ie.map(function(ye){return ye.categoryValue}),fe=ie.map(function(ye){return ye.categoryLabel});V["dimensions["+G.model.containerInd+"].categoryarray"]=[se],V["dimensions["+G.model.containerInd+"].ticktext"]=[fe],V["dimensions["+G.model.containerInd+"].categoryorder"]="array"}}G.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!G.dragHasMoved&&G.potentialClickBand&&(G.parcatsViewModel.hoveron==="color"?S(G.potentialClickBand,"plotly_click",k.event.sourceEvent):u(G.potentialClickBand,"plotly_click",k.event.sourceEvent)),G.model.dragX=null,G.dragCategoryDisplayInd!==null&&(G.parcatsViewModel.dimensions[G.dragDimensionDisplayInd].categories[G.dragCategoryDisplayInd].model.dragY=null,G.dragCategoryDisplayInd=null),G.dragDimensionDisplayInd=null,G.parcatsViewModel.dragDimension=null,G.dragHasMoved=null,G.potentialClickBand=null,j(G.parcatsViewModel),B(G.parcatsViewModel),k.transition().duration(300).ease("cubic-in-out").each(function(){H(G.parcatsViewModel,!0),z(G.parcatsViewModel,!0)}).each("end",function(){(X||ee)&&l.restyle(G.parcatsViewModel.graphDiv,V,[W])})}}function U(G){for(var V,W=G.graphDiv._fullData,J=0;J<W.length;J++)if(G.key===W[J].uid){V=J;break}return V}function z(G,V){var W;V===void 0&&(V=!1),G.pathSelection.data(function(J){return J.paths},n),(W=G.pathSelection,V?W.transition():W).attr("d",function(J){return J.svgD})}function H(G,V){function W(re){return V?re.transition():re}V===void 0&&(V=!1),G.dimensionSelection.data(function(re){return re.dimensions},n);var J=G.dimensionSelection.selectAll("g.category").data(function(re){return re.categories},n);W(G.dimensionSelection).attr("transform",function(re){return d(re.x,0)}),W(J).attr("transform",function(re){return d(0,re.y)}),J.select(".dimlabel").text(function(re,ie){return ie===0?re.parcatsViewModel.model.dimensions[re.model.dimensionInd].dimensionLabel:null}),J.select(".catlabel").attr("text-anchor",function(re){return a(re)?"start":"end"}).attr("x",function(re){return a(re)?re.width+5:-5}).each(function(re){var ie,se;a(re)?(ie=re.width+5,se="start"):(ie=-5,se="end"),k.select(this).selectAll("tspan").attr("x",ie).attr("text-anchor",se)});var X=J.selectAll("rect.bandrect").data(function(re){return re.bands},n),ee=X.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(re){return re.color}).attr("fill-opacity",0);X.attr("fill",function(re){return re.color}).attr("width",function(re){return re.width}).attr("height",function(re){return re.height}).attr("y",function(re){return re.y}),m(ee),X.each(function(){x.raiseToTop(this)}),X.exit().remove()}function F(G,V,W){var J,X=W[0],ee=V.margin||{l:80,r:80,t:100,b:80},re=X.trace,ie=re.domain,se=V.width,fe=V.height,ye=Math.floor(se*(ie.x[1]-ie.x[0])),ge=Math.floor(fe*(ie.y[1]-ie.y[0])),he=ie.x[0]*se+ee.l,ve=V.height-ie.y[1]*V.height+ee.t,Oe=re.line.shape;J=re.hoverinfo==="all"?["count","probability"]:(re.hoverinfo||"").split("+");var xe={trace:re,key:re.uid,model:X,x:he,y:ve,width:ye,height:ge,hoveron:re.hoveron,hoverinfoItems:J,arrangement:re.arrangement,bundlecolors:re.bundlecolors,sortpaths:re.sortpaths,labelfont:re.labelfont,categorylabelfont:re.tickfont,pathShape:Oe,dragDimension:null,margin:ee,paths:[],dimensions:[],graphDiv:G,traceSelection:null,pathSelection:null,dimensionSelection:null};return X.dimensions&&(j(xe),B(xe)),xe}function N(G,V,W,J,X){var ee,re,ie=[],se=[];for(re=0;re<W.length-1;re++)ee=A(W[re]+G[re],G[re+1]),ie.push(ee(X)),se.push(ee(1-X));var fe="M "+G[0]+","+V[0];for(fe+="l"+W[0]+",0 ",re=1;re<W.length;re++)fe+="C"+ie[re-1]+","+V[re-1]+" "+se[re-1]+","+V[re]+" "+G[re]+","+V[re],fe+="l"+W[re]+",0 ";for(fe+="l0,"+J+" ",fe+="l -"+W[W.length-1]+",0 ",re=W.length-2;re>=0;re--)fe+="C"+se[re]+","+(V[re+1]+J)+" "+ie[re]+","+(V[re]+J)+" "+(G[re]+W[re])+","+(V[re]+J),fe+="l-"+W[re]+",0 ";return fe+"Z"}function B(G){var V=G.dimensions,W=G.model,J=V.map(function(_e){return _e.categories.map(function(Fe){return Fe.y})}),X=G.model.dimensions.map(function(_e){return _e.categories.map(function(Fe){return Fe.displayInd})}),ee=G.model.dimensions.map(function(_e){return _e.displayInd}),re=G.dimensions.map(function(_e){return _e.model.dimensionInd}),ie=V.map(function(_e){return _e.x}),se=V.map(function(_e){return _e.width}),fe=[];for(var ye in W.paths)W.paths.hasOwnProperty(ye)&&fe.push(W.paths[ye]);function ge(_e){var Fe=_e.categoryInds.map(function(Ve,He){return X[He][Ve]});return re.map(function(Ve){return Fe[Ve]})}fe.sort(function(_e,Fe){var Ve=ge(_e),He=ge(Fe);return G.sortpaths==="backward"&&(Ve.reverse(),He.reverse()),Ve.push(_e.valueInds[0]),He.push(Fe.valueInds[0]),G.bundlecolors&&(Ve.unshift(_e.rawColor),He.unshift(Fe.rawColor)),Ve<He?-1:Ve>He?1:0});for(var he=new Array(fe.length),ve=V[0].model.count,Oe=V[0].categories.map(function(_e){return _e.height}).reduce(function(_e,Fe){return _e+Fe}),xe=0;xe<fe.length;xe++){var ke,Me=fe[xe];ke=ve>0?Oe*(Me.count/ve):0;for(var Te,Q=new Array(J.length),oe=0;oe<Me.categoryInds.length;oe++){var ce=Me.categoryInds[oe],me=X[oe][ce],Ae=ee[oe];Q[Ae]=J[Ae][me],J[Ae][me]+=ke;var Ie=G.dimensions[Ae].categories[me],Ce=Ie.bands.length,Re=Ie.bands[Ce-1];if(Re===void 0||Me.rawColor!==Re.rawColor){var le=Re===void 0?0:Re.y+Re.height;Ie.bands.push({key:le,color:Me.color,rawColor:Me.rawColor,height:ke,width:Ie.width,count:Me.count,y:le,categoryViewModel:Ie,parcatsViewModel:G})}else{var de=Ie.bands[Ce-1];de.height+=ke,de.count+=Me.count}}Te=G.pathShape==="hspline"?N(ie,Q,se,ke,.5):N(ie,Q,se,ke,0),he[xe]={key:Me.valueInds[0],model:Me,height:ke,leftXs:ie,topYs:Q,dimWidths:se,svgD:Te,parcatsViewModel:G}}G.paths=he}function j(G){var V=G.model.dimensions.map(function(re){return{displayInd:re.displayInd,dimensionInd:re.dimensionInd}});V.sort(function(re,ie){return re.displayInd-ie.displayInd});var W=[];for(var J in V){var X=V[J].dimensionInd,ee=G.model.dimensions[X];W.push(K(G,ee))}G.dimensions=W}function K(G,V){var W,J=G.model.dimensions.length,X=V.displayInd;W=40+(J>1?(G.width-80-16)/(J-1):0)*X;var ee,re,ie,se,fe,ye=[],ge=G.model.maxCats,he=V.categories.length,ve=V.count,Oe=G.height-8*(ge-1),xe=8*(ge-he)/2,ke=V.categories.map(function(Me){return{displayInd:Me.displayInd,categoryInd:Me.categoryInd}});for(ke.sort(function(Me,Te){return Me.displayInd-Te.displayInd}),fe=0;fe<he;fe++)se=ke[fe].categoryInd,re=V.categories[se],ee=ve>0?re.count/ve*Oe:0,ie={key:re.valueInds[0],model:re,width:16,height:ee,y:re.dragY!==null?re.dragY:xe,bands:[],parcatsViewModel:G},xe=xe+ee+8,ye.push(ie);return{key:V.dimensionInd,x:V.dragX!==null?V.dragX:W,y:0,width:16,model:V,categories:ye,parcatsViewModel:G,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}$.exports=function(G,V,W,J){r(W,G,J,V)}},45784:function($,R,e){var k=e(45460);$.exports=function(A,l,T,x){var d=A._fullLayout,s=d._paper,t=d._size;k(A,s,l,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},T,x)}},73362:function($,R,e){var k=e(50693),A=e(13838),l=e(41940),T=e(27670).Y,x=e(1426).extendFlat,d=e(44467).templatedArray;$.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:l({editType:"plot"}),tickfont:l({editType:"plot"}),rangefont:l({editType:"plot"}),dimensions:d("dimension",{label:{valType:"string",editType:"plot"},tickvals:x({},A.tickvals,{editType:"plot"}),ticktext:x({},A.ticktext,{editType:"plot"}),tickformat:x({},A.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:x({editType:"calc"},k("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function($,R,e){var k=e(25706),A=e(39898),l=e(28984).keyFun,T=e(28984).repeat,x=e(71828).sorterAsc,d=e(71828).strTranslate,s=k.bar.snapRatio;function t(_,E){return _*(1-s)+E*s}var o=k.bar.snapClose;function r(_,E){return _*(1-o)+E*o}function n(_,E,L,C){if(function(K,G){for(var V=0;V<G.length;V++)if(K>=G[V][0]&&K<=G[V][1])return!0;return!1}(L,C))return L;var P=_?-1:1,I=0,U=E.length-1;if(P<0){var z=I;I=U,U=z}for(var H=E[I],F=H,N=I;P*N<P*U;N+=P){var B=N+P,j=E[B];if(P*L<P*r(H,j))return t(H,F);if(P*L<P*j||B===U)return t(j,H);F=H,H=j}}function a(_){_.attr("x",-k.bar.captureWidth/2).attr("width",k.bar.captureWidth)}function i(_){_.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function c(_){if(!_.brush.filterSpecified)return"0,"+_.height;for(var E,L,C,P=h(_.brush.filter.getConsolidated(),_.height),I=[0],U=P.length?P[0][0]:null,z=0;z<P.length;z++)L=(E=P[z])[1]-E[0],I.push(U),I.push(L),(C=z+1)<P.length&&(U=P[C][0]-E[1]);return I.push(_.height),I}function h(_,E){return _.map(function(L){return L.map(function(C){return Math.max(0,C*E)}).sort(x)})}function f(){A.select(document.body).style("cursor",null)}function b(_){_.attr("stroke-dasharray",c)}function v(_,E){var L=A.select(_).selectAll(".highlight, .highlight-shadow");b(E?L.transition().duration(k.bar.snapDuration).each("end",E):L)}function g(_,E){var L,C=_.brush,P=NaN,I={};if(C.filterSpecified){var U=_.height,z=C.filter.getConsolidated(),H=h(z,U),F=NaN,N=NaN,B=NaN;for(L=0;L<=H.length;L++){var j=H[L];if(j&&j[0]<=E&&E<=j[1]){F=L;break}if(N=L?L-1:NaN,j&&j[0]>E){B=L;break}}if(P=F,isNaN(P)&&(P=isNaN(N)||isNaN(B)?isNaN(N)?B:N:E-H[N][1]<H[B][0]-E?N:B),!isNaN(P)){var K=H[P],G=function(X,ee){var re=k.bar.handleHeight;if(!(ee>X[1]+re||ee<X[0]-re))return ee>=.9*X[1]+.1*X[0]?"n":ee<=.9*X[0]+.1*X[1]?"s":"ns"}(K,E);G&&(I.interval=z[P],I.intervalPix=K,I.region=G)}}if(_.ordinal&&!I.region){var V=_.unitTickvals,W=_.unitToPaddedPx.invert(E);for(L=0;L<V.length;L++){var J=[.25*V[Math.max(L-1,0)]+.75*V[L],.25*V[Math.min(L+1,V.length-1)]+.75*V[L]];if(W>=J[0]&&W<=J[1]){I.clickableOrdinalRange=J;break}}}return I}function y(_,E){A.event.sourceEvent.stopPropagation();var L=E.height-A.mouse(_)[1]-2*k.verticalPadding,C=E.brush.svgBrush;C.wasDragged=!0,C._dragging=!0,C.grabbingBar?C.newExtent=[L-C.grabPoint,L+C.barLength-C.grabPoint].map(E.unitToPaddedPx.invert):C.newExtent=[C.startExtent,E.unitToPaddedPx.invert(L)].sort(x),E.brush.filterSpecified=!0,C.extent=C.stayingIntervals.concat([C.newExtent]),C.brushCallback(E),v(_.parentNode)}function p(_,E){var L=g(E,E.height-A.mouse(_)[1]-2*k.verticalPadding),C="crosshair";L.clickableOrdinalRange?C="pointer":L.region&&(C=L.region+"-resize"),A.select(document.body).style("cursor",C)}function m(_){_.on("mousemove",function(E){A.event.preventDefault(),E.parent.inBrushDrag||p(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||f()}).call(A.behavior.drag().on("dragstart",function(E){(function(L,C){A.event.sourceEvent.stopPropagation();var P=C.height-A.mouse(L)[1]-2*k.verticalPadding,I=C.unitToPaddedPx.invert(P),U=C.brush,z=g(C,P),H=z.interval,F=U.svgBrush;if(F.wasDragged=!1,F.grabbingBar=z.region==="ns",F.grabbingBar){var N=H.map(C.unitToPaddedPx);F.grabPoint=P-N[0]-k.verticalPadding,F.barLength=N[1]-N[0]}F.clickableOrdinalRange=z.clickableOrdinalRange,F.stayingIntervals=C.multiselect&&U.filterSpecified?U.filter.getConsolidated():[],H&&(F.stayingIntervals=F.stayingIntervals.filter(function(B){return B[0]!==H[0]&&B[1]!==H[1]})),F.startExtent=z.region?H[z.region==="s"?1:0]:I,C.parent.inBrushDrag=!0,F.brushStartCallback()})(this,E)}).on("drag",function(E){y(this,E)}).on("dragend",function(E){(function(L,C){var P=C.brush,I=P.filter,U=P.svgBrush;U._dragging||(p(L,C),y(L,C),C.brush.svgBrush.wasDragged=!1),U._dragging=!1,A.event.sourceEvent.stopPropagation();var z=U.grabbingBar;if(U.grabbingBar=!1,U.grabLocation=void 0,C.parent.inBrushDrag=!1,f(),!U.wasDragged)return U.wasDragged=void 0,U.clickableOrdinalRange?P.filterSpecified&&C.multiselect?U.extent.push(U.clickableOrdinalRange):(U.extent=[U.clickableOrdinalRange],P.filterSpecified=!0):z?(U.extent=U.stayingIntervals,U.extent.length===0&&u(P)):u(P),U.brushCallback(C),v(L.parentNode),void U.brushEndCallback(P.filterSpecified?I.getConsolidated():[]);var H=function(){I.set(I.getConsolidated())};if(C.ordinal){var F=C.unitTickvals;F[F.length-1]<F[0]&&F.reverse(),U.newExtent=[n(0,F,U.newExtent[0],U.stayingIntervals),n(1,F,U.newExtent[1],U.stayingIntervals)];var N=U.newExtent[1]>U.newExtent[0];U.extent=U.stayingIntervals.concat(N?[U.newExtent]:[]),U.extent.length||u(P),U.brushCallback(C),N?v(L.parentNode,H):(H(),v(L.parentNode))}else H();U.brushEndCallback(P.filterSpecified?I.getConsolidated():[])})(this,E)}))}function w(_,E){return _[0]-E[0]}function u(_){_.filterSpecified=!1,_.svgBrush.extent=[[-1/0,1/0]]}function S(_){for(var E,L=_.slice(),C=[],P=L.shift();P;){for(E=P.slice();(P=L.shift())&&P[0]<=E[1];)E[1]=Math.max(E[1],P[1]);C.push(E)}return C.length===1&&C[0][0]>C[0][1]&&(C=[]),C}$.exports={makeBrush:function(_,E,L,C,P,I){var U,z=function(){var H,F,N=[];return{set:function(B){(N=B.map(function(j){return j.slice().sort(x)}).sort(w)).length===1&&N[0][0]===-1/0&&N[0][1]===1/0&&(N=[[0,-1]]),H=S(N),F=N.reduce(function(j,K){return[Math.min(j[0],K[0]),Math.max(j[1],K[1])]},[1/0,-1/0])},get:function(){return N.slice()},getConsolidated:function(){return H},getBounds:function(){return F}}}();return z.set(L),{filter:z,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:C,brushCallback:(U=P,function(H){var F=H.brush,N=function(j){return j.svgBrush.extent.map(function(K){return K.slice()})}(F),B=N.slice();F.filter.set(B),U()}),brushEndCallback:I}}},ensureAxisBrush:function(_,E,L){var C=_.selectAll("."+k.cn.axisBrush).data(T,l);C.enter().append("g").classed(k.cn.axisBrush,!0),function(P,I,U){var z=U._context.staticPlot,H=P.selectAll(".background").data(T);H.enter().append("rect").classed("background",!0).call(a).call(i).style("pointer-events",z?"none":"auto").attr("transform",d(0,k.verticalPadding)),H.call(m).attr("height",function(B){return B.height-k.verticalPadding});var F=P.selectAll(".highlight-shadow").data(T);F.enter().append("line").classed("highlight-shadow",!0).attr("x",-k.bar.width/2).attr("stroke-width",k.bar.width+k.bar.strokeWidth).attr("stroke",I).attr("opacity",k.bar.strokeOpacity).attr("stroke-linecap","butt"),F.attr("y1",function(B){return B.height}).call(b);var N=P.selectAll(".highlight").data(T);N.enter().append("line").classed("highlight",!0).attr("x",-k.bar.width/2).attr("stroke-width",k.bar.width-k.bar.strokeWidth).attr("stroke",k.bar.fillColor).attr("opacity",k.bar.fillOpacity).attr("stroke-linecap","butt"),N.attr("y1",function(B){return B.height}).call(b)}(C,E,L)},cleanRanges:function(_,E){if(Array.isArray(_[0])?(_=_.map(function(C){return C.sort(x)}),_=E.multiselect?S(_.sort(w)):[_[0]]):_=[_.sort(x)],E.tickvals){var L=E.tickvals.slice().sort(x);if(!(_=_.map(function(C){var P=[n(0,L,C[0],[]),n(1,L,C[1],[])];if(P[1]>P[0])return P}).filter(function(C){return C})).length)return}return _.length>1?_:_[0]}}},71791:function($,R,e){$.exports={attributes:e(73362),supplyDefaults:e(3633),calc:e(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function($,R,e){var k=e(39898),A=e(27659).a0,l=e(21341),T=e(77922);R.name="parcoords",R.plot=function(x){var d=A(x.calcdata,"parcoords")[0];d.length&&l(x,d)},R.clean=function(x,d,s,t){var o=t._has&&t._has("parcoords"),r=d._has&&d._has("parcoords");o&&!r&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},R.toSVG=function(x){var d=x._fullLayout._glimages,s=k.select(x).selectAll(".svg-container");s.filter(function(t,o){return o===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,o=t.toDataURL("image/png");d.append("svg:image").attr({xmlns:T.svg,"xlink:href":o,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){k.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},24639:function($,R,e){var k=e(71828).isArrayOrTypedArray,A=e(21081),l=e(28984).wrap;$.exports=function(T,x){var d,s;return A.hasColorscale(x,"line")&&k(x.line.color)?(d=x.line.color,s=A.extractOpts(x.line).colorscale,A.calc(T,x,{vals:d,containerStr:"line",cLetter:"c"})):(d=function(t){for(var o=new Array(t),r=0;r<t;r++)o[r]=.5;return o}(x._length),s=[[0,x.line.color],[1,x.line.color]]),l({lineColor:d,cscale:s})}},25706:function($){$.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function($,R,e){var k=e(71828),A=e(52075).hasColorscale,l=e(1586),T=e(27670).c,x=e(85501),d=e(89298),s=e(73362),t=e(57920),o=e(25706).maxDimensionCount,r=e(94397);function n(a,i,c,h){function f(p,m){return k.coerce(a,i,s.dimensions,p,m)}var b=f("values"),v=f("visible");if(b&&b.length||(v=i.visible=!1),v){f("label"),f("tickvals"),f("ticktext"),f("tickformat");var g=f("range");i._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:g},d.setConvert(i._ax,h.layout),f("multiselect");var y=f("constraintrange");y&&(i.constraintrange=t.cleanRanges(y,i))}}$.exports=function(a,i,c,h){function f(p,m){return k.coerce(a,i,s,p,m)}var b=a.dimensions;Array.isArray(b)&&b.length>o&&(k.log("parcoords traces support up to "+o+" dimensions at the moment"),b.splice(o));var v=x(a,i,{name:"dimensions",layout:h,handleItemDefaults:n}),g=function(p,m,w,u,S){var _=S("line.color",w);if(A(p,"line")&&k.isArrayOrTypedArray(_)){if(_.length)return S("line.colorscale"),l(p,m,u,S,{prefix:"line.",cLetter:"c"}),_.length;m.line.color=w}return 1/0}(a,i,c,h,f);T(i,h,f),Array.isArray(v)&&v.length||(i.visible=!1),r(i,v,"values",g);var y={family:h.font.family,size:Math.round(h.font.size/1.2),color:h.font.color};k.coerceFont(f,"labelfont",y),k.coerceFont(f,"tickfont",y),k.coerceFont(f,"rangefont",y),f("labelangle"),f("labelside"),f("unselected.line.color"),f("unselected.line.opacity")}},1602:function($,R,e){var k=e(71828).isTypedArray;R.convertTypedArray=function(A){return k(A)?Array.prototype.slice.call(A):A},R.isOrdinal=function(A){return!!A.tickvals},R.isVisible=function(A){return A.visible||!("visible"in A)}},67618:function($,R,e){var k=e(71791);k.plot=e(21341),$.exports=k},83398:function($,R,e){var k=e(56068),A=k([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),l=k([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),T=e(25706).maxDimensionCount,x=e(71828),d=new Uint8Array(4),s=new Uint8Array(4),t={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function o(v,g,y,p,m){var w=v._gl;w.enable(w.SCISSOR_TEST),w.scissor(g,y,p,m),v.clear({color:[0,0,0,0],depth:1})}function r(v,g,y,p,m,w){var u=w.key;y.drawCompleted||(function(S){S.read({x:0,y:0,width:1,height:1,data:d})}(v),y.drawCompleted=!0),function S(_){var E=Math.min(p,m-_*p);_===0&&(window.cancelAnimationFrame(y.currentRafs[u]),delete y.currentRafs[u],o(v,w.scissorX,w.scissorY,w.scissorWidth,w.viewBoxSize[1])),y.clearOnly||(w.count=2*E,w.offset=2*_*p,g(w),_*p+E<m&&(y.currentRafs[u]=window.requestAnimationFrame(function(){S(_+1)})),y.drawCompleted=!1)}(0)}function n(v,g){for(var y=new Array(256),p=0;p<256;p++)y[p]=v(p/255).concat(g);return y}function a(v,g){return(v>>>8*g)%256/255}function i(v,g,y){for(var p=new Array(8*g),m=0,w=0;w<g;w++)for(var u=0;u<2;u++)for(var S=0;S<4;S++){var _=4*v+S,E=y[64*w+_];_===63&&u===0&&(E*=-1),p[m++]=E}return p}function c(v){var g="0"+v;return g.substr(g.length-2)}function h(v){return v<T?"p"+c(v+1)+"_"+c(v+4):"colors"}function f(v,g,y,p,m,w,u,S,_,E,L,C,P,I){for(var U=[[],[]],z=0;z<64;z++)U[0][z]=z===m?1:0,U[1][z]=z===w?1:0;u*=I,S*=I,_*=I,E*=I;var H=v.lines.canvasOverdrag*I,F=v.domain,N=v.canvasWidth*I,B=v.canvasHeight*I,j=v.pad.l*I,K=v.pad.b*I,G=v.layoutHeight*I,V=v.layoutWidth*I,W=v.deselectedLines.color,J=v.deselectedLines.opacity;return x.extendFlat({key:L,resolution:[N,B],viewBoxPos:[u+H,S],viewBoxSize:[_,E],i0:m,i1:w,dim0A:U[0].slice(0,16),dim0B:U[0].slice(16,32),dim0C:U[0].slice(32,48),dim0D:U[0].slice(48,64),dim1A:U[1].slice(0,16),dim1B:U[1].slice(16,32),dim1C:U[1].slice(32,48),dim1D:U[1].slice(48,64),drwLayer:C,contextColor:[W[0]/255,W[1]/255,W[2]/255,J!=="auto"?W[3]*J:Math.max(.00392156862745098,Math.pow(1/v.lines.color.length,.3333333333333333))],scissorX:(p===g?0:u+H)+(j-H)+V*F.x[0],scissorWidth:(p===y?N-u+H:_+.5)+(p===g?u+H:0),scissorY:S+K+G*F.y[0],scissorHeight:E,viewportX:j-H+V*F.x[0],viewportY:K+G*F.y[0],viewportWidth:N,viewportHeight:B},P)}function b(v){var g=2047,y=Math.max(0,Math.floor(v[0]*g),0),p=Math.min(g,Math.ceil(v[1]*g),g);return[Math.min(y,p),Math.max(y,p)]}$.exports=function(v,g){var y,p,m,w,u,S=g.context,_=g.pick,E=g.regl,L=E._gl,C=L.getParameter(L.ALIASED_LINE_WIDTH_RANGE),P=Math.max(C[0],Math.min(C[1],g.viewModel.plotGlPixelRatio)),I={currentRafs:{},drawCompleted:!0,clearOnly:!1},U=function(B){for(var j={},K=0;K<=T;K+=4)j[h(K)]=B.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return j}(E),z=E.texture(t),H=[];N(g);var F=E({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:E.prop("scissorX"),y:E.prop("scissorY"),width:E.prop("scissorWidth"),height:E.prop("scissorHeight")}},viewport:{x:E.prop("viewportX"),y:E.prop("viewportY"),width:E.prop("viewportWidth"),height:E.prop("viewportHeight")},dither:!1,vert:A,frag:l,primitive:"lines",lineWidth:P,attributes:U,uniforms:{resolution:E.prop("resolution"),viewBoxPos:E.prop("viewBoxPos"),viewBoxSize:E.prop("viewBoxSize"),dim0A:E.prop("dim0A"),dim1A:E.prop("dim1A"),dim0B:E.prop("dim0B"),dim1B:E.prop("dim1B"),dim0C:E.prop("dim0C"),dim1C:E.prop("dim1C"),dim0D:E.prop("dim0D"),dim1D:E.prop("dim1D"),loA:E.prop("loA"),hiA:E.prop("hiA"),loB:E.prop("loB"),hiB:E.prop("hiB"),loC:E.prop("loC"),hiC:E.prop("hiC"),loD:E.prop("loD"),hiD:E.prop("hiD"),palette:z,contextColor:E.prop("contextColor"),maskTexture:E.prop("maskTexture"),drwLayer:E.prop("drwLayer"),maskHeight:E.prop("maskHeight")},offset:E.prop("offset"),count:E.prop("count")});function N(B){y=B.model,p=B.viewModel,m=p.dimensions.slice(),w=m[0]?m[0].values.length:0;var j=y.lines,K=_?j.color.map(function(V,W){return W/j.color.length}):j.color,G=function(V,W,J){for(var X,ee=new Array(V*(T+4)),re=0,ie=0;ie<V;ie++){for(var se=0;se<T;se++)ee[re++]=se<W.length?W[se].paddedUnitValues[ie]:.5;ee[re++]=a(ie,2),ee[re++]=a(ie,1),ee[re++]=a(ie,0),ee[re++]=(X=J[ie],Math.max(1e-6,Math.min(.999999,X)))}return ee}(w,m,K);(function(V,W,J){for(var X=0;X<=T;X+=4)V[h(X)](i(X/4,W,J))})(U,w,G),S||_||(z=E.texture(x.extendFlat({data:n(y.unitToColor,255)},t)))}return{render:function(B,j,K){var G,V,W,J=B.length,X=1/0,ee=-1/0;for(G=0;G<J;G++)B[G].dim0.canvasX<X&&(X=B[G].dim0.canvasX,V=G),B[G].dim1.canvasX>ee&&(ee=B[G].dim1.canvasX,W=G);J===0&&o(E,0,0,y.canvasWidth,y.canvasHeight);var re=function(ke){var Me,Te,Q,oe=[[],[]];for(Q=0;Q<64;Q++){var ce=!ke&&Q<m.length?m[Q].brush.filter.getBounds():[-1/0,1/0];oe[0][Q]=ce[0],oe[1][Q]=ce[1]}var me=new Array(16384);for(Me=0;Me<16384;Me++)me[Me]=255;if(!ke)for(Me=0;Me<m.length;Me++){var Ae=Me%8,Ie=(Me-Ae)/8,Ce=Math.pow(2,Ae),Re=m[Me].brush.filter.get();if(!(Re.length<2)){var le=b(Re[0])[1];for(Te=1;Te<Re.length;Te++){var de=b(Re[Te]);for(Q=le+1;Q<de[0];Q++)me[8*Q+Ie]&=~Ce;le=Math.max(le,de[1])}}}var _e={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:me};return u?u(_e):u=E.texture(_e),{maskTexture:u,maskHeight:2048,loA:oe[0].slice(0,16),loB:oe[0].slice(16,32),loC:oe[0].slice(32,48),loD:oe[0].slice(48,64),hiA:oe[1].slice(0,16),hiB:oe[1].slice(16,32),hiC:oe[1].slice(32,48),hiD:oe[1].slice(48,64)}}(S);for(G=0;G<J;G++){var ie=B[G],se=ie.dim0.crossfilterDimensionIndex,fe=ie.dim1.crossfilterDimensionIndex,ye=ie.canvasX,ge=ie.canvasY,he=ye+ie.panelSizeX,ve=ie.plotGlPixelRatio;if(j||!H[se]||H[se][0]!==ye||H[se][1]!==he){H[se]=[ye,he];var Oe=f(y,V,W,G,se,fe,ye,ge,ie.panelSizeX,ie.panelSizeY,ie.dim0.crossfilterDimensionIndex,S?0:_?2:1,re,ve);I.clearOnly=K;var xe=j?y.lines.blockLineCount:w;r(E,F,I,xe,w,Oe)}}},readPixel:function(B,j){return E.read({x:B,y:j,width:1,height:1,data:s}),s},readPixels:function(B,j,K,G){var V=new Uint8Array(4*K*G);return E.read({x:B,y:j,width:K,height:G,data:V}),V},destroy:function(){for(var B in v.style["pointer-events"]="none",z.destroy(),u&&u.destroy(),U)U[B].destroy()},update:N}}},94397:function($){$.exports=function(R,e,k,A){var l,T;for(A||(A=1/0),l=0;l<e.length;l++)(T=e[l]).visible&&(A=Math.min(A,T[k].length));for(A===1/0&&(A=0),R._length=A,l=0;l<e.length;l++)(T=e[l]).visible&&(T._length=A);return A}},17171:function($,R,e){var k=e(39898),A=e(71828),l=A.numberFormat,T=e(36652),x=e(89298),d=A.strRotate,s=A.strTranslate,t=e(63893),o=e(91424),r=e(21081),n=e(28984),a=n.keyFun,i=n.repeat,c=n.unwrap,h=e(1602),f=e(25706),b=e(57920),v=e(83398);function g(H,F,N){return A.aggNums(H,null,F,N)}function y(H,F){return m(g(Math.min,H,F),g(Math.max,H,F))}function p(H){var F=H.range;return F?m(F[0],F[1]):y(H.values,H._length)}function m(H,F){return!isNaN(H)&&isFinite(H)||(H=0),!isNaN(F)&&isFinite(F)||(F=0),H===F&&(H===0?(H-=1,F+=1):(H*=.9,F*=1.1)),[H,F]}function w(H,F,N,B,j){var K,G,V=p(N);return B?k.scale.ordinal().domain(B.map((K=l(N.tickformat),G=j,G?function(W,J){var X=G[J];return X??K(W)}:K))).range(B.map(function(W){var J=(W-V[0])/(V[1]-V[0]);return H-F+J*(2*F-H)})):k.scale.linear().domain(V).range([H-F,F])}function u(H){if(H.tickvals){var F=p(H);return k.scale.ordinal().domain(H.tickvals).range(H.tickvals.map(function(N){return(N-F[0])/(F[1]-F[0])}))}}function S(H){var F=H.map(function(j){return j[0]}),N=H.map(function(j){var K=T(j[1]);return k.rgb("rgb("+K[0]+","+K[1]+","+K[2]+")")}),B="rgb".split("").map(function(j){return k.scale.linear().clamp(!0).domain(F).range(N.map((K=j,function(G){return G[K]})));var K});return function(j){return B.map(function(K){return K(j)})}}function _(H){return H.dimensions.some(function(F){return F.brush.filterSpecified})}function E(H,F,N){var B=c(F),j=B.trace,K=h.convertTypedArray(B.lineColor),G=j.line,V={color:T(j.unselected.line.color),opacity:j.unselected.line.opacity},W=r.extractOpts(G),J=W.reversescale?r.flipScale(B.cscale):B.cscale,X=j.domain,ee=j.dimensions,re=H.width,ie=j.labelangle,se=j.labelside,fe=j.labelfont,ye=j.tickfont,ge=j.rangefont,he=A.extendDeepNoArrays({},G,{color:K.map(k.scale.linear().domain(p({values:K,range:[W.min,W.max],_length:j._length}))),blockLineCount:f.blockLineCount,canvasOverdrag:f.overdrag*f.canvasPixelRatio}),ve=Math.floor(re*(X.x[1]-X.x[0])),Oe=Math.floor(H.height*(X.y[1]-X.y[0])),xe=H.margin||{l:80,r:80,t:100,b:80},ke=ve,Me=Oe;return{key:N,colCount:ee.filter(h.isVisible).length,dimensions:ee,tickDistance:f.tickDistance,unitToColor:S(J),lines:he,deselectedLines:V,labelAngle:ie,labelSide:se,labelFont:fe,tickFont:ye,rangeFont:ge,layoutWidth:re,layoutHeight:H.height,domain:X,translateX:X.x[0]*re,translateY:H.height-X.y[1]*H.height,pad:xe,canvasWidth:ke*f.canvasPixelRatio+2*he.canvasOverdrag,canvasHeight:Me*f.canvasPixelRatio,width:ke,height:Me,canvasPixelRatio:f.canvasPixelRatio}}function L(H,F,N){var B=N.width,j=N.height,K=N.dimensions,G=N.canvasPixelRatio,V=function(re){return B*re/Math.max(1,N.colCount-1)},W=f.verticalPadding/j,J=function(re,ie){return k.scale.linear().range([ie,re-ie])}(j,f.verticalPadding),X={key:N.key,xScale:V,model:N,inBrushDrag:!1},ee={};return X.dimensions=K.filter(h.isVisible).map(function(re,ie){var se=function(me,Ae){return k.scale.linear().domain(p(me)).range([Ae,1-Ae])}(re,W),fe=ee[re.label];ee[re.label]=(fe||0)+1;var ye=re.label+(fe?"__"+fe:""),ge=re.constraintrange,he=ge&&ge.length;he&&!Array.isArray(ge[0])&&(ge=[ge]);var ve=he?ge.map(function(me){return me.map(se)}):[[-1/0,1/0]],Oe=re.values;Oe.length>re._length&&(Oe=Oe.slice(0,re._length));var xe,ke=re.tickvals;function Me(me,Ae){return{val:me,text:xe[Ae]}}function Te(me,Ae){return me.val-Ae.val}if(Array.isArray(ke)&&ke.length){xe=re.ticktext,Array.isArray(xe)&&xe.length?xe.length>ke.length?xe=xe.slice(0,ke.length):ke.length>xe.length&&(ke=ke.slice(0,xe.length)):xe=ke.map(l(re.tickformat));for(var Q=1;Q<ke.length;Q++)if(ke[Q]<ke[Q-1]){for(var oe=ke.map(Me).sort(Te),ce=0;ce<ke.length;ce++)ke[ce]=oe[ce].val,xe[ce]=oe[ce].text;break}}else ke=void 0;return Oe=h.convertTypedArray(Oe),{key:ye,label:re.label,tickFormat:re.tickformat,tickvals:ke,ticktext:xe,ordinal:h.isOrdinal(re),multiselect:re.multiselect,xIndex:ie,crossfilterDimensionIndex:ie,visibleIndex:re._index,height:j,values:Oe,paddedUnitValues:Oe.map(se),unitTickvals:ke&&ke.map(se),xScale:V,x:V(ie),canvasX:V(ie)*G,unitToPaddedPx:J,domainScale:w(j,f.verticalPadding,re,ke,xe),ordinalScale:u(re),parent:X,model:N,brush:b.makeBrush(H,he,ve,function(){H.linePickActive(!1)},function(){var me=X;me.focusLayer&&me.focusLayer.render(me.panels,!0);var Ae=_(me);!H.contextShown()&&Ae?(me.contextLayer&&me.contextLayer.render(me.panels,!0),H.contextShown(!0)):H.contextShown()&&!Ae&&(me.contextLayer&&me.contextLayer.render(me.panels,!0,!0),H.contextShown(!1))},function(me){if(X.focusLayer.render(X.panels,!0),X.pickLayer&&X.pickLayer.render(X.panels,!0),H.linePickActive(!0),F&&F.filterChanged){var Ae=se.invert,Ie=me.map(function(Ce){return Ce.map(Ae).sort(A.sorterAsc)}).sort(function(Ce,Re){return Ce[0]-Re[0]});F.filterChanged(X.key,re._index,Ie)}})}}),X}function C(H){H.classed(f.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function P(H,F){var N=F==="top"?1:-1,B=H*Math.PI/180;return{dir:N,dx:Math.sin(B),dy:Math.cos(B),degrees:H}}function I(H,F,N){for(var B=F.panels||(F.panels=[]),j=H.data(),K=0;K<j.length-1;K++){var G=B[K]||(B[K]={}),V=j[K],W=j[K+1];G.dim0=V,G.dim1=W,G.canvasX=V.canvasX,G.panelSizeX=W.canvasX-V.canvasX,G.panelSizeY=F.model.canvasHeight,G.y=0,G.canvasY=0,G.plotGlPixelRatio=N}}function U(H,F){return x.tickText(H._ax,F,!1).text}function z(H,F){if(H.ordinal)return"";var N=H.domainScale.domain(),B=N[F?N.length-1:0];return U(H.model.dimensions[H.visibleIndex],B)}$.exports=function(H,F,N,B){var j=H._context.staticPlot,K=H._fullLayout,G=K._toppaper,V=K._glcontainer,W=H._context.plotGlPixelRatio,J=H._fullLayout.paper_bgcolor;(function(me){for(var Ae=0;Ae<me.length;Ae++)for(var Ie=0;Ie<me[Ae].length;Ie++)for(var Ce=me[Ae][Ie].trace,Re=Ce.dimensions,le=0;le<Re.length;le++){var de=Re[le].values,_e=Re[le]._ax;_e&&(_e.range?_e.range=m(_e.range[0],_e.range[1]):_e.range=y(de,Ce._length),_e.dtick||(_e.dtick=.01*(Math.abs(_e.range[1]-_e.range[0])||1)),_e.tickformat=Re[le].tickformat,x.calcTicks(_e),_e.cleanRange())}})(F);var X,ee,re=(X=!0,ee=!1,{linePickActive:function(me){return arguments.length?X=!!me:X},contextShown:function(me){return arguments.length?ee=!!me:ee}}),ie=F.filter(function(me){return c(me).trace.visible}).map(E.bind(0,N)).map(L.bind(0,re,B));V.each(function(me,Ae){return A.extendFlat(me,ie[Ae])});var se=V.selectAll(".gl-canvas").each(function(me){me.viewModel=ie[0],me.viewModel.plotGlPixelRatio=W,me.viewModel.paperColor=J,me.model=me.viewModel?me.viewModel.model:null}),fe=null;se.filter(function(me){return me.pick}).style("pointer-events",j?"none":"auto").on("mousemove",function(me){if(re.linePickActive()&&me.lineLayer&&B&&B.hover){var Ae=k.event,Ie=this.width,Ce=this.height,Re=k.mouse(this),le=Re[0],de=Re[1];if(le<0||de<0||le>=Ie||de>=Ce)return;var _e=me.lineLayer.readPixel(le,Ce-1-de),Fe=_e[3]!==0,Ve=Fe?_e[2]+256*(_e[1]+256*_e[0]):null,He={x:le,y:de,clientX:Ae.clientX,clientY:Ae.clientY,dataIndex:me.model.key,curveNumber:Ve};Ve!==fe&&(Fe?B.hover(He):B.unhover&&B.unhover(He),fe=Ve)}}),se.style("opacity",function(me){return me.pick?0:1}),G.style("background","rgba(255, 255, 255, 0)");var ye=G.selectAll("."+f.cn.parcoords).data(ie,a);ye.exit().remove(),ye.enter().append("g").classed(f.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ye.attr("transform",function(me){return s(me.model.translateX,me.model.translateY)});var ge=ye.selectAll("."+f.cn.parcoordsControlView).data(i,a);ge.enter().append("g").classed(f.cn.parcoordsControlView,!0),ge.attr("transform",function(me){return s(me.model.pad.l,me.model.pad.t)});var he=ge.selectAll("."+f.cn.yAxis).data(function(me){return me.dimensions},a);he.enter().append("g").classed(f.cn.yAxis,!0),ge.each(function(me){I(he,me,W)}),se.each(function(me){if(me.viewModel){!me.lineLayer||B?me.lineLayer=v(this,me):me.lineLayer.update(me),(me.key||me.key===0)&&(me.viewModel[me.key]=me.lineLayer);var Ae=!me.context||B;me.lineLayer.render(me.viewModel.panels,Ae)}}),he.attr("transform",function(me){return s(me.xScale(me.xIndex),0)}),he.call(k.behavior.drag().origin(function(me){return me}).on("drag",function(me){var Ae=me.parent;re.linePickActive(!1),me.x=Math.max(-f.overdrag,Math.min(me.model.width+f.overdrag,k.event.x)),me.canvasX=me.x*me.model.canvasPixelRatio,he.sort(function(Ie,Ce){return Ie.x-Ce.x}).each(function(Ie,Ce){Ie.xIndex=Ce,Ie.x=me===Ie?Ie.x:Ie.xScale(Ie.xIndex),Ie.canvasX=Ie.x*Ie.model.canvasPixelRatio}),I(he,Ae,W),he.filter(function(Ie){return Math.abs(me.xIndex-Ie.xIndex)!==0}).attr("transform",function(Ie){return s(Ie.xScale(Ie.xIndex),0)}),k.select(this).attr("transform",s(me.x,0)),he.each(function(Ie,Ce,Re){Re===me.parent.key&&(Ae.dimensions[Ce]=Ie)}),Ae.contextLayer&&Ae.contextLayer.render(Ae.panels,!1,!_(Ae)),Ae.focusLayer.render&&Ae.focusLayer.render(Ae.panels)}).on("dragend",function(me){var Ae=me.parent;me.x=me.xScale(me.xIndex),me.canvasX=me.x*me.model.canvasPixelRatio,I(he,Ae,W),k.select(this).attr("transform",function(Ie){return s(Ie.x,0)}),Ae.contextLayer&&Ae.contextLayer.render(Ae.panels,!1,!_(Ae)),Ae.focusLayer&&Ae.focusLayer.render(Ae.panels),Ae.pickLayer&&Ae.pickLayer.render(Ae.panels,!0),re.linePickActive(!0),B&&B.axesMoved&&B.axesMoved(Ae.key,Ae.dimensions.map(function(Ie){return Ie.crossfilterDimensionIndex}))})),he.exit().remove();var ve=he.selectAll("."+f.cn.axisOverlays).data(i,a);ve.enter().append("g").classed(f.cn.axisOverlays,!0),ve.selectAll("."+f.cn.axis).remove();var Oe=ve.selectAll("."+f.cn.axis).data(i,a);Oe.enter().append("g").classed(f.cn.axis,!0),Oe.each(function(me){var Ae=me.model.height/me.model.tickDistance,Ie=me.domainScale,Ce=Ie.domain();k.select(this).call(k.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Ae,me.tickFormat).tickValues(me.ordinal?Ce:null).tickFormat(function(Re){return h.isOrdinal(me)?Re:U(me.model.dimensions[me.visibleIndex],Re)}).scale(Ie)),o.font(Oe.selectAll("text"),me.model.tickFont)}),Oe.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Oe.selectAll("text").style("text-shadow",t.makeTextShadow(J)).style("cursor","default");var xe=ve.selectAll("."+f.cn.axisHeading).data(i,a);xe.enter().append("g").classed(f.cn.axisHeading,!0);var ke=xe.selectAll("."+f.cn.axisTitle).data(i,a);ke.enter().append("text").classed(f.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",j?"none":"auto"),ke.text(function(me){return me.label}).each(function(me){var Ae=k.select(this);o.font(Ae,me.model.labelFont),t.convertToTspans(Ae,H)}).attr("transform",function(me){var Ae=P(me.model.labelAngle,me.model.labelSide),Ie=f.axisTitleOffset;return(Ae.dir>0?"":s(0,2*Ie+me.model.height))+d(Ae.degrees)+s(-Ie*Ae.dx,-Ie*Ae.dy)}).attr("text-anchor",function(me){var Ae=P(me.model.labelAngle,me.model.labelSide);return 2*Math.abs(Ae.dx)>Math.abs(Ae.dy)?Ae.dir*Ae.dx<0?"start":"end":"middle"});var Me=ve.selectAll("."+f.cn.axisExtent).data(i,a);Me.enter().append("g").classed(f.cn.axisExtent,!0);var Te=Me.selectAll("."+f.cn.axisExtentTop).data(i,a);Te.enter().append("g").classed(f.cn.axisExtentTop,!0),Te.attr("transform",s(0,-f.axisExtentOffset));var Q=Te.selectAll("."+f.cn.axisExtentTopText).data(i,a);Q.enter().append("text").classed(f.cn.axisExtentTopText,!0).call(C),Q.text(function(me){return z(me,!0)}).each(function(me){o.font(k.select(this),me.model.rangeFont)});var oe=Me.selectAll("."+f.cn.axisExtentBottom).data(i,a);oe.enter().append("g").classed(f.cn.axisExtentBottom,!0),oe.attr("transform",function(me){return s(0,me.model.height+f.axisExtentOffset)});var ce=oe.selectAll("."+f.cn.axisExtentBottomText).data(i,a);ce.enter().append("text").classed(f.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(C),ce.text(function(me){return z(me,!1)}).each(function(me){o.font(k.select(this),me.model.rangeFont)}),b.ensureAxisBrush(ve,J,H)}},21341:function($,R,e){var k=e(17171),A=e(79749),l=e(1602).isVisible,T={};function x(d,s,t){var o=s.indexOf(t),r=d.indexOf(o);return r===-1&&(r+=s.length),r}($.exports=function(d,s){var t=d._fullLayout;if(A(d,[],T)){var o={},r={},n={},a={},i=t._size;s.forEach(function(c,h){var f=c[0].trace;n[h]=f.index;var b=a[h]=f._fullInput.index;o[h]=d.data[b].dimensions,r[h]=d.data[b].dimensions.slice()}),k(d,s,{width:i.w,height:i.h,margin:{t:i.t,r:i.r,b:i.b,l:i.l}},{filterChanged:function(c,h,f){var b=r[c][h],v=f.map(function(u){return u.slice()}),g="dimensions["+h+"].constraintrange",y=t._tracePreGUI[d._fullData[n[c]]._fullInput.uid];if(y[g]===void 0){var p=b.constraintrange;y[g]=p||null}var m=d._fullData[n[c]].dimensions[h];v.length?(v.length===1&&(v=v[0]),b.constraintrange=v,m.constraintrange=v.slice(),v=[v]):(delete b.constraintrange,delete m.constraintrange,v=null);var w={};w[g]=v,d.emit("plotly_restyle",[w,[a[c]]])},hover:function(c){d.emit("plotly_hover",c)},unhover:function(c){d.emit("plotly_unhover",c)},axesMoved:function(c,h){var f=function(b,v){return function(g,y){return x(b,v,g)-x(b,v,y)}}(h,r[c].filter(l));o[c].sort(f),r[c].filter(function(b){return!l(b)}).sort(function(b){return r[c].indexOf(b)}).forEach(function(b){o[c].splice(o[c].indexOf(b),1),o[c].splice(r[c].indexOf(b),0,b)}),d.emit("plotly_restyle",[{dimensions:[o[c]]},[a[c]]])}})}}).reglPrecompiled=T},34e3:function($,R,e){var k=e(9012),A=e(27670).Y,l=e(41940),T=e(22399),x=e(5386).f,d=e(5386).s,s=e(1426).extendFlat,t=l({editType:"plot",arrayOk:!0,colorEditType:"plot"});$.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:x({},{keys:["label","color","value","percent","text"]}),texttemplate:d({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:s({},t,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:s({},t,{}),outsidetextfont:s({},t,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:s({},t,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:A({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:s({},t,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function($,R,e){var k=e(74875);R.name="pie",R.plot=function(A,l,T,x){k.plotBasePlot(R.name,A,l,T,x)},R.clean=function(A,l,T,x){k.cleanBasePlot(R.name,A,l,T,x)}},32354:function($,R,e){var k=e(92770),A=e(84267),l=e(7901),T={};function x(s){return function(t,o){return!!t&&!!(t=A(t)).isValid()&&(t=l.addOpacity(t,t.getAlpha()),s[o]||(s[o]=t),t)}}function d(s,t){var o,r=JSON.stringify(s),n=t[r];if(!n){for(n=s.slice(),o=0;o<s.length;o++)n.push(A(s[o]).lighten(20).toHexString());for(o=0;o<s.length;o++)n.push(A(s[o]).darken(20).toHexString());t[r]=n}return n}$.exports={calc:function(s,t){var o,r,n=[],a=s._fullLayout,i=a.hiddenlabels||[],c=t.labels,h=t.marker.colors||[],f=t.values,b=t._length,v=t._hasValues&&b;if(t.dlabel)for(c=new Array(b),o=0;o<b;o++)c[o]=String(t.label0+o*t.dlabel);var g={},y=x(a["_"+t.type+"colormap"]),p=0,m=!1;for(o=0;o<b;o++){var w,u,S;if(v){if(w=f[o],!k(w))continue;w=+w}else w=1;(u=c[o])!==void 0&&u!==""||(u=o);var _=g[u=String(u)];_===void 0?(g[u]=n.length,(S=i.indexOf(u)!==-1)||(p+=w),n.push({v:w,label:u,color:y(h[o],u),i:o,pts:[o],hidden:S})):(m=!0,(r=n[_]).v+=w,r.pts.push(o),r.hidden||(p+=w),r.color===!1&&h[o]&&(r.color=y(h[o],u)))}return n=n.filter(function(E){return E.v>=0}),(t.type==="funnelarea"?m:t.sort)&&n.sort(function(E,L){return L.v-E.v}),n[0]&&(n[0].vTotal=p),n},crossTraceCalc:function(s,t){var o=(t||{}).type;o||(o="pie");var r=s._fullLayout,n=s.calcdata,a=r[o+"colorway"],i=r["_"+o+"colormap"];r["extend"+o+"colors"]&&(a=d(a,T));for(var c=0,h=0;h<n.length;h++){var f=n[h];if(f[0].trace.type===o)for(var b=0;b<f.length;b++){var v=f[b];v.color===!1&&(i[v.label]?v.color=i[v.label]:(i[v.label]=v.color=a[c%a.length],c++))}}},makePullColorFn:x,generateExtendedColors:d}},37434:function($,R,e){var k=e(92770),A=e(71828),l=e(34e3),T=e(27670).c,x=e(90769).handleText;function d(s,t){var o=Array.isArray(s),r=A.isArrayOrTypedArray(t),n=Math.min(o?s.length:1/0,r?t.length:1/0);if(isFinite(n)||(n=0),n&&r){for(var a,i=0;i<n;i++){var c=t[i];if(k(c)&&c>0){a=!0;break}}a||(n=0)}return{hasLabels:o,hasValues:r,len:n}}$.exports={handleLabelsAndValues:d,supplyDefaults:function(s,t,o,r){function n(y,p){return A.coerce(s,t,l,y,p)}var a=d(n("labels"),n("values")),i=a.len;if(t._hasLabels=a.hasLabels,t._hasValues=a.hasValues,!t._hasLabels&&t._hasValues&&(n("label0"),n("dlabel")),i){t._length=i,n("marker.line.width")&&n("marker.line.color"),n("marker.colors"),n("scalegroup");var c,h=n("text"),f=n("texttemplate");if(f||(c=n("textinfo",Array.isArray(h)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),f||c&&c!=="none"){var b=n("textposition");x(s,t,r,n,b,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(b)||b==="auto"||b==="outside")&&n("automargin"),(b==="inside"||b==="auto"||Array.isArray(b))&&n("insidetextorientation")}T(t,r,n);var v=n("hole");if(n("title.text")){var g=n("title.position",v?"middle center":"top center");v||g!=="middle center"||(t.title.position="top center"),A.coerceFont(n,"title.font",r.font)}n("sort"),n("direction"),n("rotation"),n("pull")}else t.visible=!1}}},20007:function($,R,e){var k=e(23469).appendArrayMultiPointValues;$.exports=function(A,l){var T={curveNumber:l.index,pointNumbers:A.pts,data:l._input,fullData:l,label:A.label,color:A.color,value:A.v,percent:A.percent,text:A.text,bbox:A.bbox,v:A.v};return A.pts.length===1&&(T.pointNumber=T.i=A.pts[0]),k(T,l,A.pts),l.type==="funnelarea"&&(delete T.v,delete T.i),T}},53581:function($,R,e){var k=e(71828);function A(l){return l.indexOf("e")!==-1?l.replace(/[.]?0+e/,"e"):l.indexOf(".")!==-1?l.replace(/[.]?0+$/,""):l}R.formatPiePercent=function(l,T){var x=A((100*l).toPrecision(3));return k.numSeparate(x,T)+"%"},R.formatPieValue=function(l,T){var x=A(l.toPrecision(10));return k.numSeparate(x,T)},R.getFirstFilled=function(l,T){if(Array.isArray(l))for(var x=0;x<T.length;x++){var d=l[T[x]];if(d||d===0||d==="")return d}},R.castOption=function(l,T){return Array.isArray(l)?R.getFirstFilled(l,T):l||void 0},R.getRotationAngle=function(l){return(l==="auto"?0:l)*Math.PI/180}},58810:function($,R,e){$.exports={attributes:e(34e3),supplyDefaults:e(37434).supplyDefaults,supplyLayoutDefaults:e(92097),layoutAttributes:e(92774),calc:e(32354).calc,crossTraceCalc:e(32354).crossTraceCalc,plot:e(14575).plot,style:e(68357),styleOne:e(63463),moduleType:"trace",name:"pie",basePlotModule:e(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function($){$.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},92097:function($,R,e){var k=e(71828),A=e(92774);$.exports=function(l,T){function x(d,s){return k.coerce(l,T,A,d,s)}x("hiddenlabels"),x("piecolorway",T.colorway),x("extendpiecolors")}},14575:function($,R,e){var k=e(39898),A=e(74875),l=e(30211),T=e(7901),x=e(91424),d=e(71828),s=d.strScale,t=d.strTranslate,o=e(63893),r=e(72597),n=r.recordMinTextSize,a=r.clearMinTextSize,i=e(97313).TEXTPAD,c=e(53581),h=e(20007),f=e(71828).isValidTextValue;function b(F,N,B){var j=B[0],K=j.cx,G=j.cy,V=j.trace,W=V.type==="funnelarea";"_hasHoverLabel"in V||(V._hasHoverLabel=!1),"_hasHoverEvent"in V||(V._hasHoverEvent=!1),F.on("mouseover",function(J){var X=N._fullLayout,ee=N._fullData[V.index];if(!N._dragging&&X.hovermode!==!1){var re=ee.hoverinfo;if(Array.isArray(re)&&(re=l.castHoverinfo({hoverinfo:[c.castOption(re,J.pts)],_module:V._module},X,0)),re==="all"&&(re="label+text+value+percent+name"),ee.hovertemplate||re!=="none"&&re!=="skip"&&re){var ie=J.rInscribed||0,se=K+J.pxmid[0]*(1-ie),fe=G+J.pxmid[1]*(1-ie),ye=X.separators,ge=[];if(re&&re.indexOf("label")!==-1&&ge.push(J.label),J.text=c.castOption(ee.hovertext||ee.text,J.pts),re&&re.indexOf("text")!==-1){var he=J.text;d.isValidTextValue(he)&&ge.push(he)}J.value=J.v,J.valueLabel=c.formatPieValue(J.v,ye),re&&re.indexOf("value")!==-1&&ge.push(J.valueLabel),J.percent=J.v/j.vTotal,J.percentLabel=c.formatPiePercent(J.percent,ye),re&&re.indexOf("percent")!==-1&&ge.push(J.percentLabel);var ve=ee.hoverlabel,Oe=ve.font,xe=[];l.loneHover({trace:V,x0:se-ie*j.r,x1:se+ie*j.r,y:fe,_x0:W?K+J.TL[0]:se-ie*j.r,_x1:W?K+J.TR[0]:se+ie*j.r,_y0:W?G+J.TL[1]:fe-ie*j.r,_y1:W?G+J.BL[1]:fe+ie*j.r,text:ge.join("<br>"),name:ee.hovertemplate||re.indexOf("name")!==-1?ee.name:void 0,idealAlign:J.pxmid[0]<0?"left":"right",color:c.castOption(ve.bgcolor,J.pts)||J.color,borderColor:c.castOption(ve.bordercolor,J.pts),fontFamily:c.castOption(Oe.family,J.pts),fontSize:c.castOption(Oe.size,J.pts),fontColor:c.castOption(Oe.color,J.pts),nameLength:c.castOption(ve.namelength,J.pts),textAlign:c.castOption(ve.align,J.pts),hovertemplate:c.castOption(ee.hovertemplate,J.pts),hovertemplateLabels:J,eventData:[h(J,ee)]},{container:X._hoverlayer.node(),outerContainer:X._paper.node(),gd:N,inOut_bbox:xe}),J.bbox=xe[0],V._hasHoverLabel=!0}V._hasHoverEvent=!0,N.emit("plotly_hover",{points:[h(J,ee)],event:k.event})}}),F.on("mouseout",function(J){var X=N._fullLayout,ee=N._fullData[V.index],re=k.select(this).datum();V._hasHoverEvent&&(J.originalEvent=k.event,N.emit("plotly_unhover",{points:[h(re,ee)],event:k.event}),V._hasHoverEvent=!1),V._hasHoverLabel&&(l.loneUnhover(X._hoverlayer.node()),V._hasHoverLabel=!1)}),F.on("click",function(J){var X=N._fullLayout,ee=N._fullData[V.index];N._dragging||X.hovermode===!1||(N._hoverdata=[h(J,ee)],l.click(N,k.event))})}function v(F,N,B){var j=c.castOption(F.insidetextfont.color,N.pts);!j&&F._input.textfont&&(j=c.castOption(F._input.textfont.color,N.pts));var K=c.castOption(F.insidetextfont.family,N.pts)||c.castOption(F.textfont.family,N.pts)||B.family,G=c.castOption(F.insidetextfont.size,N.pts)||c.castOption(F.textfont.size,N.pts)||B.size;return{color:j||T.contrast(N.color),family:K,size:G}}function g(F,N){for(var B,j,K=0;K<F.length;K++)if((j=(B=F[K][0]).trace).title.text){var G=j.title.text;j._meta&&(G=d.templateString(G,j._meta));var V=x.tester.append("text").attr("data-notex",1).text(G).call(x.font,j.title.font).call(o.convertToTspans,N),W=x.bBox(V.node(),!0);B.titleBox={width:W.width,height:W.height},V.remove()}}function y(F,N,B){var j=B.r||N.rpx1,K=N.rInscribed;if(N.startangle===N.stopangle)return{rCenter:1-K,scale:0,rotate:0,textPosAngle:0};var G,V=N.ring,W=V===1&&Math.abs(N.startangle-N.stopangle)===2*Math.PI,J=N.halfangle,X=N.midangle,ee=B.trace.insidetextorientation,re=ee==="horizontal",ie=ee==="tangential",se=ee==="radial",fe=ee==="auto",ye=[];if(!fe){var ge,he=function(Te,Q){if(function(Ae,Ie){var Ce=Ae.startangle,Re=Ae.stopangle;return Ce>Ie&&Ie>Re||Ce<Ie&&Ie<Re}(N,Te)){var oe=Math.abs(Te-N.startangle),ce=Math.abs(Te-N.stopangle),me=oe<ce?oe:ce;(G=Q==="tan"?m(F,j,V,me,0):p(F,j,V,me,Math.PI/2)).textPosAngle=Te,ye.push(G)}};if(re||ie){for(ge=4;ge>=-4;ge-=2)he(Math.PI*ge,"tan");for(ge=4;ge>=-4;ge-=2)he(Math.PI*(ge+1),"tan")}if(re||se){for(ge=4;ge>=-4;ge-=2)he(Math.PI*(ge+1.5),"rad");for(ge=4;ge>=-4;ge-=2)he(Math.PI*(ge+.5),"rad")}}if(W||fe||re){var ve=Math.sqrt(F.width*F.width+F.height*F.height);if((G={scale:K*j*2/ve,rCenter:1-K,rotate:0}).textPosAngle=(N.startangle+N.stopangle)/2,G.scale>=1)return G;ye.push(G)}(fe||se)&&((G=p(F,j,V,J,X)).textPosAngle=(N.startangle+N.stopangle)/2,ye.push(G)),(fe||ie)&&((G=m(F,j,V,J,X)).textPosAngle=(N.startangle+N.stopangle)/2,ye.push(G));for(var Oe=0,xe=0,ke=0;ke<ye.length;ke++){var Me=ye[ke].scale;if(xe<Me&&(xe=Me,Oe=ke),!fe&&xe>=1)break}return ye[Oe]}function p(F,N,B,j,K){N=Math.max(0,N-2*i);var G=F.width/F.height,V=S(G,j,N,B);return{scale:2*V/F.height,rCenter:w(G,V/N),rotate:u(K)}}function m(F,N,B,j,K){N=Math.max(0,N-2*i);var G=F.height/F.width,V=S(G,j,N,B);return{scale:2*V/F.width,rCenter:w(G,V/N),rotate:u(K+Math.PI/2)}}function w(F,N){return Math.cos(N)-F*N}function u(F){return(180/Math.PI*F+720)%180-90}function S(F,N,B,j){var K=F+1/(2*Math.tan(N));return B*Math.min(1/(Math.sqrt(K*K+.5)+K),j/(Math.sqrt(F*F+j/2)+F))}function _(F,N){return F.v!==N.vTotal||N.trace.hole?Math.min(1/(1+1/Math.sin(F.halfangle)),F.ring/2):1}function E(F,N){var B=N.pxmid[0],j=N.pxmid[1],K=F.width/2,G=F.height/2;return B<0&&(K*=-1),j<0&&(G*=-1),{scale:1,rCenter:1,rotate:0,x:K+Math.abs(G)*(K>0?1:-1)/2,y:G/(1+B*B/(j*j)),outside:!0}}function L(F,N){var B,j,K,G=F.trace,V={x:F.cx,y:F.cy},W={tx:0,ty:0};W.ty+=G.title.font.size,K=P(G),G.title.position.indexOf("top")!==-1?(V.y-=(1+K)*F.r,W.ty-=F.titleBox.height):G.title.position.indexOf("bottom")!==-1&&(V.y+=(1+K)*F.r);var J,X=F.r/((J=F.trace.aspectratio)===void 0?1:J),ee=N.w*(G.domain.x[1]-G.domain.x[0])/2;return G.title.position.indexOf("left")!==-1?(ee+=X,V.x-=(1+K)*X,W.tx+=F.titleBox.width/2):G.title.position.indexOf("center")!==-1?ee*=2:G.title.position.indexOf("right")!==-1&&(ee+=X,V.x+=(1+K)*X,W.tx-=F.titleBox.width/2),B=ee/F.titleBox.width,j=C(F,N)/F.titleBox.height,{x:V.x,y:V.y,scale:Math.min(B,j),tx:W.tx,ty:W.ty}}function C(F,N){var B=F.trace,j=N.h*(B.domain.y[1]-B.domain.y[0]);return Math.min(F.titleBox.height,j/2)}function P(F){var N,B=F.pull;if(!B)return 0;if(Array.isArray(B))for(B=0,N=0;N<F.pull.length;N++)F.pull[N]>B&&(B=F.pull[N]);return B}function I(F,N){for(var B=[],j=0;j<F.length;j++){var K=F[j][0],G=K.trace,V=G.domain,W=N.w*(V.x[1]-V.x[0]),J=N.h*(V.y[1]-V.y[0]);G.title.text&&G.title.position!=="middle center"&&(J-=C(K,N));var X=W/2,ee=J/2;G.type!=="funnelarea"||G.scalegroup||(ee/=G.aspectratio),K.r=Math.min(X,ee)/(1+P(G)),K.cx=N.l+N.w*(G.domain.x[1]+G.domain.x[0])/2,K.cy=N.t+N.h*(1-G.domain.y[0])-J/2,G.title.text&&G.title.position.indexOf("bottom")!==-1&&(K.cy-=C(K,N)),G.scalegroup&&B.indexOf(G.scalegroup)===-1&&B.push(G.scalegroup)}(function(re,ie){for(var se,fe,ye,ge=0;ge<ie.length;ge++){var he=1/0,ve=ie[ge];for(fe=0;fe<re.length;fe++)if((ye=(se=re[fe][0]).trace).scalegroup===ve){var Oe;if(ye.type==="pie")Oe=se.r*se.r;else if(ye.type==="funnelarea"){var xe,ke;ye.aspectratio>1?ke=(xe=se.r)/ye.aspectratio:xe=(ke=se.r)*ye.aspectratio,Oe=(xe*=(1+ye.baseratio)/2)*ke}he=Math.min(he,Oe/se.vTotal)}for(fe=0;fe<re.length;fe++)if((ye=(se=re[fe][0]).trace).scalegroup===ve){var Me=he*se.vTotal;ye.type==="funnelarea"&&(Me/=(1+ye.baseratio)/2,Me/=ye.aspectratio),se.r=Math.sqrt(Me)}}})(F,B)}function U(F,N){return[F*Math.sin(N),-F*Math.cos(N)]}function z(F,N,B){var j=F._fullLayout,K=B.trace,G=K.texttemplate,V=K.textinfo;if(!G&&V&&V!=="none"){var W,J=V.split("+"),X=function(Oe){return J.indexOf(Oe)!==-1},ee=X("label"),re=X("text"),ie=X("value"),se=X("percent"),fe=j.separators;if(W=ee?[N.label]:[],re){var ye=c.getFirstFilled(K.text,N.pts);f(ye)&&W.push(ye)}ie&&W.push(c.formatPieValue(N.v,fe)),se&&W.push(c.formatPiePercent(N.v/B.vTotal,fe)),N.text=W.join("<br>")}if(G){var ge=d.castOption(K,N.i,"texttemplate");if(ge){var he=function(Oe){return{label:Oe.label,value:Oe.v,valueLabel:c.formatPieValue(Oe.v,j.separators),percent:Oe.v/B.vTotal,percentLabel:c.formatPiePercent(Oe.v/B.vTotal,j.separators),color:Oe.color,text:Oe.text,customdata:d.castOption(K,Oe.i,"customdata")}}(N),ve=c.getFirstFilled(K.text,N.pts);(f(ve)||ve==="")&&(he.text=ve),N.text=d.texttemplateString(ge,he,F._fullLayout._d3locale,he,K._meta||{})}else N.text=""}}function H(F,N){var B=F.rotate*Math.PI/180,j=Math.cos(B),K=Math.sin(B),G=(N.left+N.right)/2,V=(N.top+N.bottom)/2;F.textX=G*j-V*K,F.textY=G*K+V*j,F.noCenter=!0}$.exports={plot:function(F,N){var B=F._context.staticPlot,j=F._fullLayout,K=j._size;a("pie",j),g(N,F),I(N,K);var G=d.makeTraceGroups(j._pielayer,N,"trace").each(function(V){var W=k.select(this),J=V[0],X=J.trace;(function(ee){var re,ie,se,fe=ee[0],ye=fe.r,ge=fe.trace,he=c.getRotationAngle(ge.rotation),ve=2*Math.PI/fe.vTotal,Oe="px0",xe="px1";if(ge.direction==="counterclockwise"){for(re=0;re<ee.length&&ee[re].hidden;re++);if(re===ee.length)return;he+=ve*ee[re].v,ve*=-1,Oe="px1",xe="px0"}for(se=U(ye,he),re=0;re<ee.length;re++)(ie=ee[re]).hidden||(ie[Oe]=se,ie.startangle=he,he+=ve*ie.v/2,ie.pxmid=U(ye,he),ie.midangle=he,se=U(ye,he+=ve*ie.v/2),ie.stopangle=he,ie[xe]=se,ie.largeArc=ie.v>fe.vTotal/2?1:0,ie.halfangle=Math.PI*Math.min(ie.v/fe.vTotal,.5),ie.ring=1-ge.hole,ie.rInscribed=_(ie,fe))})(V),W.attr("stroke-linejoin","round"),W.each(function(){var ee=k.select(this).selectAll("g.slice").data(V);ee.enter().append("g").classed("slice",!0),ee.exit().remove();var re=[[[],[]],[[],[]]],ie=!1;ee.each(function(xe,ke){if(xe.hidden)k.select(this).selectAll("path,g").remove();else{xe.pointNumber=xe.i,xe.curveNumber=X.index,re[xe.pxmid[1]<0?0:1][xe.pxmid[0]<0?0:1].push(xe);var Me=J.cx,Te=J.cy,Q=k.select(this),oe=Q.selectAll("path.surface").data([xe]);if(oe.enter().append("path").classed("surface",!0).style({"pointer-events":B?"none":"all"}),Q.call(b,F,V),X.pull){var ce=+c.castOption(X.pull,xe.pts)||0;ce>0&&(Me+=ce*xe.pxmid[0],Te+=ce*xe.pxmid[1])}xe.cxFinal=Me,xe.cyFinal=Te;var me=X.hole;if(xe.v===J.vTotal){var Ae="M"+(Me+xe.px0[0])+","+(Te+xe.px0[1])+de(xe.px0,xe.pxmid,!0,1)+de(xe.pxmid,xe.px0,!0,1)+"Z";me?oe.attr("d","M"+(Me+me*xe.px0[0])+","+(Te+me*xe.px0[1])+de(xe.px0,xe.pxmid,!1,me)+de(xe.pxmid,xe.px0,!1,me)+"Z"+Ae):oe.attr("d",Ae)}else{var Ie=de(xe.px0,xe.px1,!0,1);if(me){var Ce=1-me;oe.attr("d","M"+(Me+me*xe.px1[0])+","+(Te+me*xe.px1[1])+de(xe.px1,xe.px0,!1,me)+"l"+Ce*xe.px0[0]+","+Ce*xe.px0[1]+Ie+"Z")}else oe.attr("d","M"+Me+","+Te+"l"+xe.px0[0]+","+xe.px0[1]+Ie+"Z")}z(F,xe,J);var Re=c.castOption(X.textposition,xe.pts),le=Q.selectAll("g.slicetext").data(xe.text&&Re!=="none"?[0]:[]);le.enter().append("g").classed("slicetext",!0),le.exit().remove(),le.each(function(){var _e=d.ensureSingle(k.select(this),"text","",function(kt){kt.attr("data-notex",1)}),Fe=d.ensureUniformFontSize(F,Re==="outside"?function(kt,mt,wt){return{color:c.castOption(kt.outsidetextfont.color,mt.pts)||c.castOption(kt.textfont.color,mt.pts)||wt.color,family:c.castOption(kt.outsidetextfont.family,mt.pts)||c.castOption(kt.textfont.family,mt.pts)||wt.family,size:c.castOption(kt.outsidetextfont.size,mt.pts)||c.castOption(kt.textfont.size,mt.pts)||wt.size}}(X,xe,j.font):v(X,xe,j.font));_e.text(xe.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(x.font,Fe).call(o.convertToTspans,F);var Ve,He=x.bBox(_e.node());if(Re==="outside")Ve=E(He,xe);else if(Ve=y(He,xe,J),Re==="auto"&&Ve.scale<1){var nt=d.ensureUniformFontSize(F,X.outsidetextfont);_e.call(x.font,nt),Ve=E(He=x.bBox(_e.node()),xe)}var tt=Ve.textPosAngle,ot=tt===void 0?xe.pxmid:U(J.r,tt);if(Ve.targetX=Me+ot[0]*Ve.rCenter+(Ve.x||0),Ve.targetY=Te+ot[1]*Ve.rCenter+(Ve.y||0),H(Ve,He),Ve.outside){var dt=Ve.targetY;xe.yLabelMin=dt-He.height/2,xe.yLabelMid=dt,xe.yLabelMax=dt+He.height/2,xe.labelExtraX=0,xe.labelExtraY=0,ie=!0}Ve.fontSize=Fe.size,n(X.type,Ve,j),V[ke].transform=Ve,d.setTransormAndDisplay(_e,Ve)})}function de(_e,Fe,Ve,He){var nt=He*(Fe[0]-_e[0]),tt=He*(Fe[1]-_e[1]);return"a"+He*J.r+","+He*J.r+" 0 "+xe.largeArc+(Ve?" 1 ":" 0 ")+nt+","+tt}});var se=k.select(this).selectAll("g.titletext").data(X.title.text?[0]:[]);if(se.enter().append("g").classed("titletext",!0),se.exit().remove(),se.each(function(){var xe,ke=d.ensureSingle(k.select(this),"text","",function(Te){Te.attr("data-notex",1)}),Me=X.title.text;X._meta&&(Me=d.templateString(Me,X._meta)),ke.text(Me).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(x.font,X.title.font).call(o.convertToTspans,F),xe=X.title.position==="middle center"?function(Te){var Q=Math.sqrt(Te.titleBox.width*Te.titleBox.width+Te.titleBox.height*Te.titleBox.height);return{x:Te.cx,y:Te.cy,scale:Te.trace.hole*Te.r*2/Q,tx:0,ty:-Te.titleBox.height/2+Te.trace.title.font.size}}(J):L(J,K),ke.attr("transform",t(xe.x,xe.y)+s(Math.min(1,xe.scale))+t(xe.tx,xe.ty))}),ie&&function(xe,ke){var Me,Te,Q,oe,ce,me,Ae,Ie,Ce,Re,le,de,_e;function Fe(tt,ot){return tt.pxmid[1]-ot.pxmid[1]}function Ve(tt,ot){return ot.pxmid[1]-tt.pxmid[1]}function He(tt,ot){ot||(ot={});var dt,kt,mt,wt,Lt=ot.labelExtraY+(Te?ot.yLabelMax:ot.yLabelMin),Ct=Te?tt.yLabelMin:tt.yLabelMax,It=Te?tt.yLabelMax:tt.yLabelMin,Ut=tt.cyFinal+ce(tt.px0[1],tt.px1[1]),Rt=Lt-Ct;if(Rt*Ae>0&&(tt.labelExtraY=Rt),Array.isArray(ke.pull))for(kt=0;kt<Re.length;kt++)(mt=Re[kt])===tt||(c.castOption(ke.pull,tt.pts)||0)>=(c.castOption(ke.pull,mt.pts)||0)||((tt.pxmid[1]-mt.pxmid[1])*Ae>0?(Rt=mt.cyFinal+ce(mt.px0[1],mt.px1[1])-Ct-tt.labelExtraY)*Ae>0&&(tt.labelExtraY+=Rt):(It+tt.labelExtraY-Ut)*Ae>0&&(dt=3*me*Math.abs(kt-Re.indexOf(tt)),(wt=mt.cxFinal+oe(mt.px0[0],mt.px1[0])+dt-(tt.cxFinal+tt.pxmid[0])-tt.labelExtraX)*me>0&&(tt.labelExtraX+=wt)))}for(Te=0;Te<2;Te++)for(Q=Te?Fe:Ve,ce=Te?Math.max:Math.min,Ae=Te?1:-1,Me=0;Me<2;Me++){for(oe=Me?Math.max:Math.min,me=Me?1:-1,(Ie=xe[Te][Me]).sort(Q),Ce=xe[1-Te][Me],Re=Ce.concat(Ie),de=[],le=0;le<Ie.length;le++)Ie[le].yLabelMid!==void 0&&de.push(Ie[le]);for(_e=!1,le=0;Te&&le<Ce.length;le++)if(Ce[le].yLabelMid!==void 0){_e=Ce[le];break}for(le=0;le<de.length;le++){var nt=le&&de[le-1];_e&&!le&&(nt=_e),He(de[le],nt)}}}(re,X),function(xe,ke){xe.each(function(Me){var Te=k.select(this);if(Me.labelExtraX||Me.labelExtraY){var Q=Te.select("g.slicetext text");Me.transform.targetX+=Me.labelExtraX,Me.transform.targetY+=Me.labelExtraY,d.setTransormAndDisplay(Q,Me.transform);var oe=Me.cxFinal+Me.pxmid[0],ce="M"+oe+","+(Me.cyFinal+Me.pxmid[1]),me=(Me.yLabelMax-Me.yLabelMin)*(Me.pxmid[0]<0?-1:1)/4;if(Me.labelExtraX){var Ae=Me.labelExtraX*Me.pxmid[1]/Me.pxmid[0],Ie=Me.yLabelMid+Me.labelExtraY-(Me.cyFinal+Me.pxmid[1]);Math.abs(Ae)>Math.abs(Ie)?ce+="l"+Ie*Me.pxmid[0]/Me.pxmid[1]+","+Ie+"H"+(oe+Me.labelExtraX+me):ce+="l"+Me.labelExtraX+","+Ae+"v"+(Ie-Ae)+"h"+me}else ce+="V"+(Me.yLabelMid+Me.labelExtraY)+"h"+me;d.ensureSingle(Te,"path","textline").call(T.stroke,ke.outsidetextfont.color).attr({"stroke-width":Math.min(2,ke.outsidetextfont.size/8),d:ce,fill:"none"})}else Te.select("path.textline").remove()})}(ee,X),ie&&X.automargin){var fe=x.bBox(W.node()),ye=X.domain,ge=K.w*(ye.x[1]-ye.x[0]),he=K.h*(ye.y[1]-ye.y[0]),ve=(.5*ge-J.r)/K.w,Oe=(.5*he-J.r)/K.h;A.autoMargin(F,"pie."+X.uid+".automargin",{xl:ye.x[0]-ve,xr:ye.x[1]+ve,yb:ye.y[0]-Oe,yt:ye.y[1]+Oe,l:Math.max(J.cx-J.r-fe.left,0),r:Math.max(fe.right-(J.cx+J.r),0),b:Math.max(fe.bottom-(J.cy+J.r),0),t:Math.max(J.cy-J.r-fe.top,0),pad:5})}})});setTimeout(function(){G.selectAll("tspan").each(function(){var V=k.select(this);V.attr("dy")&&V.attr("dy",V.attr("dy"))})},0)},formatSliceLabel:z,transformInsideText:y,determineInsideTextFont:v,positionTitleOutside:L,prerenderTitles:g,layoutAreas:I,attachFxHandlers:b,computeTransform:H}},68357:function($,R,e){var k=e(39898),A=e(63463),l=e(72597).resizeText;$.exports=function(T){var x=T._fullLayout._pielayer.selectAll(".trace");l(T,x,"pie"),x.each(function(d){var s=d[0].trace,t=k.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(o){k.select(this).call(A,o,s)})})}},63463:function($,R,e){var k=e(7901),A=e(53581).castOption;$.exports=function(l,T,x){var d=x.marker.line,s=A(d.color,T.pts)||k.defaultLine,t=A(d.width,T.pts)||0;l.style("stroke-width",t).call(k.fill,T.color).call(k.stroke,s)}},10959:function($,R,e){var k=e(82196);$.exports={x:k.x,y:k.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:k.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},42743:function($,R,e){var k=e(9330).gl_pointcloud2d,A=e(78614),l=e(71739).findExtremes,T=e(34603);function x(s,t){this.scene=s,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=k(s.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var d=x.prototype;d.handlePick=function(s){var t=this.idToIndex[s.pointId];return{trace:this,dataCoord:s.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*t],this.pickXYData[2*t+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}},d.update=function(s){this.index=s.index,this.textLabels=s.text,this.name=s.name,this.hoverinfo=s.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(s),this.color=T(s,{})},d.updateFast=function(s){var t,o,r,n,a,i,c=this.xData=this.pickXData=s.x,h=this.yData=this.pickYData=s.y,f=this.pickXYData=s.xy,b=s.xbounds&&s.ybounds,v=s.indices,g=this.bounds;if(f){if(r=f,t=f.length>>>1,b)g[0]=s.xbounds[0],g[2]=s.xbounds[1],g[1]=s.ybounds[0],g[3]=s.ybounds[1];else for(i=0;i<t;i++)n=r[2*i],a=r[2*i+1],n<g[0]&&(g[0]=n),n>g[2]&&(g[2]=n),a<g[1]&&(g[1]=a),a>g[3]&&(g[3]=a);if(v)o=v;else for(o=new Int32Array(t),i=0;i<t;i++)o[i]=i}else for(t=c.length,r=new Float32Array(2*t),o=new Int32Array(t),i=0;i<t;i++)n=c[i],a=h[i],o[i]=i,r[2*i]=n,r[2*i+1]=a,n<g[0]&&(g[0]=n),n>g[2]&&(g[2]=n),a<g[1]&&(g[1]=a),a>g[3]&&(g[3]=a);this.idToIndex=o,this.pointcloudOptions.idToIndex=o,this.pointcloudOptions.positions=r;var y=A(s.marker.color),p=A(s.marker.border.color),m=s.opacity*s.marker.opacity;y[3]*=m,this.pointcloudOptions.color=y;var w=s.marker.blend;w===null&&(w=c.length<100||h.length<100),this.pointcloudOptions.blend=w,p[3]*=m,this.pointcloudOptions.borderColor=p;var u=s.marker.sizemin,S=Math.max(s.marker.sizemax,s.marker.sizemin);this.pointcloudOptions.sizeMin=u,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=s.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var _=this.scene.xaxis,E=this.scene.yaxis,L=S/2||.5;s._extremes[_._id]=l(_,[g[0],g[2]],{ppad:L}),s._extremes[E._id]=l(E,[g[1],g[3]],{ppad:L})},d.dispose=function(){this.pointcloud.dispose()},$.exports=function(s,t){var o=new x(s,t.uid);return o.update(t),o}},33876:function($,R,e){var k=e(71828),A=e(10959);$.exports=function(l,T,x){function d(s,t){return k.coerce(l,T,A,s,t)}d("x"),d("y"),d("xbounds"),d("ybounds"),l.xy&&l.xy instanceof Float32Array&&(T.xy=l.xy),l.indices&&l.indices instanceof Int32Array&&(T.indices=l.indices),d("text"),d("marker.color",x),d("marker.opacity"),d("marker.blend"),d("marker.sizemin"),d("marker.sizemax"),d("marker.border.color",x),d("marker.border.arearatio"),T._length=null}},20593:function($,R,e){$.exports={attributes:e(10959),supplyDefaults:e(33876),calc:e(36563),plot:e(42743),moduleType:"trace",name:"pointcloud",basePlotModule:e(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function($,R,e){var k=e(41940),A=e(9012),l=e(22399),T=e(77914),x=e(27670).Y,d=e(5386).f,s=e(50693),t=e(44467).templatedArray,o=e(12663).descriptionOnlyNumbers,r=e(1426).extendFlat,n=e(30962).overrideAll;($.exports=n({hoverinfo:r({},A.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:x({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:o("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:k({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:d({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:d({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:r(s().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},75536:function($,R,e){var k=e(30962).overrideAll,A=e(27659).a0,l=e(60436),T=e(528),x=e(6964),d=e(28569),s=e(47322).prepSelect,t=e(71828),o=e(73972),r="sankey";function n(a,i){var c=a._fullData[i],h=a._fullLayout,f=h.dragmode,b=h.dragmode==="pan"?"move":"crosshair",v=c._bgRect;if(v&&f!=="pan"&&f!=="zoom"){x(v,b);var g={_id:"x",c2p:t.identity,_offset:c._sankey.translateX,_length:c._sankey.width},y={_id:"y",c2p:t.identity,_offset:c._sankey.translateY,_length:c._sankey.height},p={gd:a,element:v.node(),plotinfo:{id:i,xaxis:g,yaxis:y,fillRangeItems:t.noop},subplot:i,xaxes:[g],yaxes:[y],doneFnCompleted:function(m){var w,u=a._fullData[i],S=u.node.groups.slice(),_=[];function E(I){for(var U=u._sankey.graph.nodes,z=0;z<U.length;z++)if(U[z].pointNumber===I)return U[z]}for(var L=0;L<m.length;L++){var C=E(m[L].pointNumber);if(C)if(C.group){for(var P=0;P<C.childrenNodes.length;P++)_.push(C.childrenNodes[P].pointNumber);S[C.pointNumber-u.node._count]=!1}else _.push(C.pointNumber)}w=S.filter(Boolean).concat([_]),o.call("_guiRestyle",a,{"node.groups":[w]},i)},prepFn:function(m,w,u){s(m,w,u,p,f)}};d.init(p)}}R.name=r,R.baseLayoutAttrOverrides=k({hoverlabel:T.hoverlabel},"plot","nested"),R.plot=function(a){var i=A(a.calcdata,r)[0];l(a,i),R.updateFx(a)},R.clean=function(a,i,c,h){var f=h._has&&h._has(r),b=i._has&&i._has(r);f&&!b&&(h._paperdiv.selectAll(".sankey").remove(),h._paperdiv.selectAll(".bgsankey").remove())},R.updateFx=function(a){for(var i=0;i<a._fullData.length;i++)n(a,i)}},92930:function($,R,e){var k=e(68664),A=e(71828),l=e(28984).wrap,T=A.isArrayOrTypedArray,x=A.isIndex,d=e(21081);$.exports=function(s,t){var o=function(r){var n,a=r.node,i=r.link,c=[],h=T(i.color),f=T(i.customdata),b={},v={},g=i.colorscales.length;for(n=0;n<g;n++){var y=i.colorscales[n],p=d.extractScale(y,{cLetter:"c"}),m=d.makeColorScaleFunc(p);v[y.label]=m}var w=0;for(n=0;n<i.value.length;n++)i.source[n]>w&&(w=i.source[n]),i.target[n]>w&&(w=i.target[n]);var u,S=w+1;r.node._count=S;var _=r.node.groups,E={};for(n=0;n<_.length;n++){var L=_[n];for(u=0;u<L.length;u++){var C=L[u],P=S+n;E.hasOwnProperty(C)?A.warn("Node "+C+" is already part of a group."):E[C]=P}}var I={source:[],target:[]};for(n=0;n<i.value.length;n++){var U=i.value[n],z=i.source[n],H=i.target[n];if(U>0&&x(z,S)&&x(H,S)&&(!E.hasOwnProperty(z)||!E.hasOwnProperty(H)||E[z]!==E[H])){E.hasOwnProperty(H)&&(H=E[H]),E.hasOwnProperty(z)&&(z=E[z]),H=+H,b[z=+z]=b[H]=!0;var F="";i.label&&i.label[n]&&(F=i.label[n]);var N=null;F&&v.hasOwnProperty(F)&&(N=v[F]),c.push({pointNumber:n,label:F,color:h?i.color[n]:i.color,customdata:f?i.customdata[n]:i.customdata,concentrationscale:N,source:z,target:H,value:+U}),I.source.push(z),I.target.push(H)}}var B=S+_.length,j=T(a.color),K=T(a.customdata),G=[];for(n=0;n<B;n++)if(b[n]){var V=a.label[n];G.push({group:n>S-1,childrenNodes:[],pointNumber:n,label:V,color:j?a.color[n]:a.color,customdata:K?a.customdata[n]:a.customdata})}var W=!1;return function(J,X,ee){for(var re=A.init2dArray(J,0),ie=0;ie<Math.min(X.length,ee.length);ie++)if(A.isIndex(X[ie],J)&&A.isIndex(ee[ie],J)){if(X[ie]===ee[ie])return!0;re[X[ie]].push(ee[ie])}return k(re).components.some(function(se){return se.length>1})}(B,I.source,I.target)&&(W=!0),{circular:W,links:c,nodes:G,groups:_,groupLookup:E}}(t);return l({circular:o.circular,_nodes:o.nodes,_links:o.links,_groups:o.groups,_groupLookup:o.groupLookup})}},85247:function($){$.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function($,R,e){var k=e(71828),A=e(39953),l=e(7901),T=e(84267),x=e(27670).c,d=e(38048),s=e(44467),t=e(85501);function o(r,n){function a(i,c){return k.coerce(r,n,A.link.colorscales,i,c)}a("label"),a("cmin"),a("cmax"),a("colorscale")}$.exports=function(r,n,a,i){function c(S,_){return k.coerce(r,n,A,S,_)}var h=k.extendDeep(i.hoverlabel,r.hoverlabel),f=r.node,b=s.newContainer(n,"node");function v(S,_){return k.coerce(f,b,A.node,S,_)}v("label"),v("groups"),v("x"),v("y"),v("pad"),v("thickness"),v("line.color"),v("line.width"),v("hoverinfo",r.hoverinfo),d(f,b,v,h),v("hovertemplate");var g=i.colorway;v("color",b.label.map(function(S,_){return l.addOpacity(function(E){return g[E%g.length]}(_),.8)})),v("customdata");var y=r.link||{},p=s.newContainer(n,"link");function m(S,_){return k.coerce(y,p,A.link,S,_)}m("label"),m("arrowlen"),m("source"),m("target"),m("value"),m("line.color"),m("line.width"),m("hoverinfo",r.hoverinfo),d(y,p,m,h),m("hovertemplate");var w,u=T(i.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";m("color",k.repeat(u,p.value.length)),m("customdata"),t(y,p,{name:"colorscales",handleItemDefaults:o}),x(n,i,c),c("orientation"),c("valueformat"),c("valuesuffix"),b.x.length&&b.y.length&&(w="freeform"),c("arrangement",w),k.coerceFont(c,"textfont",k.extendFlat({},i.font)),n._length=null}},29396:function($,R,e){$.exports={attributes:e(39953),supplyDefaults:e(26857),calc:e(92930),plot:e(60436),moduleType:"trace",name:"sankey",basePlotModule:e(75536),selectPoints:e(84564),categories:["noOpacity"],meta:{}}},60436:function($,R,e){var k=e(39898),A=e(71828),l=A.numberFormat,T=e(3393),x=e(30211),d=e(7901),s=e(85247).cn,t=A._;function o(y){return y!==""}function r(y,p){return y.filter(function(m){return m.key===p.traceId})}function n(y,p){k.select(y).select("path").style("fill-opacity",p),k.select(y).select("rect").style("fill-opacity",p)}function a(y){k.select(y).select("text.name").style("fill","black")}function i(y){return function(p){return y.node.sourceLinks.indexOf(p.link)!==-1||y.node.targetLinks.indexOf(p.link)!==-1}}function c(y){return function(p){return p.node.sourceLinks.indexOf(y.link)!==-1||p.node.targetLinks.indexOf(y.link)!==-1}}function h(y,p,m){p&&m&&r(m,p).selectAll("."+s.sankeyLink).filter(i(p)).call(b.bind(0,p,m,!1))}function f(y,p,m){p&&m&&r(m,p).selectAll("."+s.sankeyLink).filter(i(p)).call(v.bind(0,p,m,!1))}function b(y,p,m,w){var u=w.datum().link.label;w.style("fill-opacity",function(S){if(!S.link.concentrationscale)return .4}),u&&r(p,y).selectAll("."+s.sankeyLink).filter(function(S){return S.link.label===u}).style("fill-opacity",function(S){if(!S.link.concentrationscale)return .4}),m&&r(p,y).selectAll("."+s.sankeyNode).filter(c(y)).call(h)}function v(y,p,m,w){var u=w.datum().link.label;w.style("fill-opacity",function(S){return S.tinyColorAlpha}),u&&r(p,y).selectAll("."+s.sankeyLink).filter(function(S){return S.link.label===u}).style("fill-opacity",function(S){return S.tinyColorAlpha}),m&&r(p,y).selectAll(s.sankeyNode).filter(c(y)).call(f)}function g(y,p){var m=y.hoverlabel||{},w=A.nestedProperty(m,p).get();return!Array.isArray(w)&&w}$.exports=function(y,p){for(var m=y._fullLayout,w=m._paper,u=m._size,S=0;S<y._fullData.length;S++)if(y._fullData[S].visible&&y._fullData[S].type===s.sankey&&!y._fullData[S]._viewInitial){var _=y._fullData[S].node;y._fullData[S]._viewInitial={node:{groups:_.groups.slice(),x:_.x.slice(),y:_.y.slice()}}}var E=t(y,"source:")+" ",L=t(y,"target:")+" ",C=t(y,"concentration:")+" ",P=t(y,"incoming flow count:")+" ",I=t(y,"outgoing flow count:")+" ";T(y,w,p,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{linkEvents:{hover:function(U,z,H){y._fullLayout.hovermode!==!1&&(k.select(U).call(b.bind(0,z,H,!0)),z.link.trace.link.hoverinfo!=="skip"&&(z.link.fullData=z.link.trace,y.emit("plotly_hover",{event:k.event,points:[z.link]})))},follow:function(U,z){if(y._fullLayout.hovermode!==!1){var H=z.link.trace.link;if(H.hoverinfo!=="none"&&H.hoverinfo!=="skip"){for(var F=[],N=0,B=0;B<z.flow.links.length;B++){var j=z.flow.links[B];if(y._fullLayout.hovermode!=="closest"||z.link.pointNumber===j.pointNumber){z.link.pointNumber===j.pointNumber&&(N=B),j.fullData=j.trace,H=z.link.trace.link;var K=V(j),G={valueLabel:l(z.valueFormat)(j.value)+z.valueSuffix};F.push({x:K[0],y:K[1],name:G.valueLabel,text:[j.label||"",E+j.source.label,L+j.target.label,j.concentrationscale?C+l("%0.2f")(j.flow.labelConcentration):""].filter(o).join("<br>"),color:g(H,"bgcolor")||d.addOpacity(j.color,1),borderColor:g(H,"bordercolor"),fontFamily:g(H,"font.family"),fontSize:g(H,"font.size"),fontColor:g(H,"font.color"),nameLength:g(H,"namelength"),textAlign:g(H,"align"),idealAlign:k.event.x<K[0]?"right":"left",hovertemplate:H.hovertemplate,hovertemplateLabels:G,eventData:[j]})}}x.loneHover(F,{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:y,anchorIndex:N}).each(function(){z.link.concentrationscale||n(this,.65),a(this)})}}function V(W){var J,X;W.circular?(J=(W.circularPathData.leftInnerExtent+W.circularPathData.rightInnerExtent)/2,X=W.circularPathData.verticalFullExtent):(J=(W.source.x1+W.target.x0)/2,X=(W.y0+W.y1)/2);var ee=[J,X];return W.trace.orientation==="v"&&ee.reverse(),ee[0]+=z.parent.translateX,ee[1]+=z.parent.translateY,ee}},unhover:function(U,z,H){y._fullLayout.hovermode!==!1&&(k.select(U).call(v.bind(0,z,H,!0)),z.link.trace.link.hoverinfo!=="skip"&&(z.link.fullData=z.link.trace,y.emit("plotly_unhover",{event:k.event,points:[z.link]})),x.loneUnhover(m._hoverlayer.node()))},select:function(U,z){var H=z.link;H.originalEvent=k.event,y._hoverdata=[H],x.click(y,{target:!0})}},nodeEvents:{hover:function(U,z,H){y._fullLayout.hovermode!==!1&&(k.select(U).call(h,z,H),z.node.trace.node.hoverinfo!=="skip"&&(z.node.fullData=z.node.trace,y.emit("plotly_hover",{event:k.event,points:[z.node]})))},follow:function(U,z){if(y._fullLayout.hovermode!==!1){var H=z.node.trace.node;if(H.hoverinfo!=="none"&&H.hoverinfo!=="skip"){var F=k.select(U).select("."+s.nodeRect),N=y._fullLayout._paperdiv.node().getBoundingClientRect(),B=F.node().getBoundingClientRect(),j=B.left-2-N.left,K=B.right+2-N.left,G=B.top+B.height/4-N.top,V={valueLabel:l(z.valueFormat)(z.node.value)+z.valueSuffix};z.node.fullData=z.node.trace,y._fullLayout._calcInverseTransform(y);var W=y._fullLayout._invScaleX,J=y._fullLayout._invScaleY,X=x.loneHover({x0:W*j,x1:W*K,y:J*G,name:l(z.valueFormat)(z.node.value)+z.valueSuffix,text:[z.node.label,P+z.node.targetLinks.length,I+z.node.sourceLinks.length].filter(o).join("<br>"),color:g(H,"bgcolor")||z.tinyColorHue,borderColor:g(H,"bordercolor"),fontFamily:g(H,"font.family"),fontSize:g(H,"font.size"),fontColor:g(H,"font.color"),nameLength:g(H,"namelength"),textAlign:g(H,"align"),idealAlign:"left",hovertemplate:H.hovertemplate,hovertemplateLabels:V,eventData:[z.node]},{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:y});n(X,.85),a(X)}}},unhover:function(U,z,H){y._fullLayout.hovermode!==!1&&(k.select(U).call(f,z,H),z.node.trace.node.hoverinfo!=="skip"&&(z.node.fullData=z.node.trace,y.emit("plotly_unhover",{event:k.event,points:[z.node]})),x.loneUnhover(m._hoverlayer.node()))},select:function(U,z,H){var F=z.node;F.originalEvent=k.event,y._hoverdata=[F],k.select(U).call(f,z,H),x.click(y,{target:!0})}}})}},3393:function($,R,e){var k=e(49887),A=e(29502).k4,l=e(39898),T=e(30838),x=e(86781),d=e(85247),s=e(84267),t=e(7901),o=e(91424),r=e(71828),n=r.strTranslate,a=r.strRotate,i=e(28984),c=i.keyFun,h=i.repeat,f=i.unwrap,b=e(63893),v=e(73972),g=e(18783),y=g.CAP_SHIFT,p=g.LINE_SPACING;function m(B,j,K){var G,V=f(j),W=V.trace,J=W.domain,X=W.orientation==="h",ee=W.node.pad,re=W.node.thickness,ie=B.width*(J.x[1]-J.x[0]),se=B.height*(J.y[1]-J.y[0]),fe=V._nodes,ye=V._links,ge=V.circular;(G=ge?x.sankeyCircular().circularLinkGap(0):T.sankey()).iterations(d.sankeyIterations).size(X?[ie,se]:[se,ie]).nodeWidth(re).nodePadding(ee).nodeId(function(me){return me.pointNumber}).nodes(fe).links(ye);var he,ve,Oe,xe=G();for(var ke in G.nodePadding()<ee&&r.warn("node.pad was reduced to ",G.nodePadding()," to fit within the figure."),V._groupLookup){var Me,Te=parseInt(V._groupLookup[ke]);for(he=0;he<xe.nodes.length;he++)if(xe.nodes[he].pointNumber===Te){Me=xe.nodes[he];break}if(Me){var Q={pointNumber:parseInt(ke),x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};xe.nodes.unshift(Q),Me.childrenNodes.unshift(Q)}}if(function(){for(he=0;he<xe.nodes.length;he++){var me,Ae,Ie=xe.nodes[he],Ce={};for(ve=0;ve<Ie.targetLinks.length;ve++)me=(Ae=Ie.targetLinks[ve]).source.pointNumber+":"+Ae.target.pointNumber,Ce.hasOwnProperty(me)||(Ce[me]=[]),Ce[me].push(Ae);var Re=Object.keys(Ce);for(ve=0;ve<Re.length;ve++){var le=Ce[me=Re[ve]],de=0,_e={};for(Oe=0;Oe<le.length;Oe++)_e[(Ae=le[Oe]).label]||(_e[Ae.label]=0),_e[Ae.label]+=Ae.value,de+=Ae.value;for(Oe=0;Oe<le.length;Oe++)(Ae=le[Oe]).flow={value:de,labelConcentration:_e[Ae.label]/de,concentration:Ae.value/de,links:le},Ae.concentrationscale&&(Ae.color=s(Ae.concentrationscale(Ae.flow.labelConcentration)))}var Fe=0;for(ve=0;ve<Ie.sourceLinks.length;ve++)Fe+=Ie.sourceLinks[ve].value;for(ve=0;ve<Ie.sourceLinks.length;ve++)(Ae=Ie.sourceLinks[ve]).concentrationOut=Ae.value/Fe;var Ve=0;for(ve=0;ve<Ie.targetLinks.length;ve++)Ve+=Ie.targetLinks[ve].value;for(ve=0;ve<Ie.targetLinks.length;ve++)(Ae=Ie.targetLinks[ve]).concenrationIn=Ae.value/Ve}}(),W.node.x.length&&W.node.y.length){for(he=0;he<Math.min(W.node.x.length,W.node.y.length,xe.nodes.length);he++)if(W.node.x[he]&&W.node.y[he]){var oe=[W.node.x[he]*ie,W.node.y[he]*se];xe.nodes[he].x0=oe[0]-re/2,xe.nodes[he].x1=oe[0]+re/2;var ce=xe.nodes[he].y1-xe.nodes[he].y0;xe.nodes[he].y0=oe[1]-ce/2,xe.nodes[he].y1=oe[1]+ce/2}W.arrangement==="snap"&&function(me){var Ae,Ie,Ce=me.map(function(Fe,Ve){return{x0:Fe.x0,index:Ve}}).sort(function(Fe,Ve){return Fe.x0-Ve.x0}),Re=[],le=-1,de=-1/0;for(he=0;he<Ce.length;he++){var _e=me[Ce[he].index];_e.x0>de+re&&(le+=1,Ae=_e.x0),de=_e.x0,Re[le]||(Re[le]=[]),Re[le].push(_e),Ie=Ae-_e.x0,_e.x0+=Ie,_e.x1+=Ie}return Re}(fe=xe.nodes).forEach(function(me){var Ae,Ie,Ce,Re=0,le=me.length;for(me.sort(function(de,_e){return de.y0-_e.y0}),Ce=0;Ce<le;++Ce)(Ae=me[Ce]).y0>=Re||(Ie=Re-Ae.y0)>1e-6&&(Ae.y0+=Ie,Ae.y1+=Ie),Re=Ae.y1+ee}),G.update(xe)}return{circular:ge,key:K,trace:W,guid:r.randstr(),horizontal:X,width:ie,height:se,nodePad:W.node.pad,nodeLineColor:W.node.line.color,nodeLineWidth:W.node.line.width,linkLineColor:W.link.line.color,linkLineWidth:W.link.line.width,linkArrowLength:W.link.arrowlen,valueFormat:W.valueformat,valueSuffix:W.valuesuffix,textFont:W.textfont,translateX:J.x[0]*B.width+B.margin.l,translateY:B.height-J.y[1]*B.height+B.margin.t,dragParallel:X?se:ie,dragPerpendicular:X?ie:se,arrangement:W.arrangement,sankey:G,graph:xe,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function w(B,j,K){var G=s(j.color),V=j.source.label+"|"+j.target.label+"__"+K;return j.trace=B.trace,j.curveNumber=B.trace.index,{circular:B.circular,key:V,traceId:B.key,pointNumber:j.pointNumber,link:j,tinyColorHue:t.tinyRGB(G),tinyColorAlpha:G.getAlpha(),linkPath:u,linkLineColor:B.linkLineColor,linkLineWidth:B.linkLineWidth,linkArrowLength:B.linkArrowLength,valueFormat:B.valueFormat,valueSuffix:B.valueSuffix,sankey:B.sankey,parent:B,interactionState:B.interactionState,flow:j.flow}}function u(){return function(B){var j=B.linkArrowLength;if(B.link.circular)return function(ve,Oe){var xe=ve.width/2,ke=ve.circularPathData;return ve.circularLinkType==="top"?"M "+(ke.targetX-Oe)+" "+(ke.targetY+xe)+" L"+(ke.rightInnerExtent-Oe)+" "+(ke.targetY+xe)+"A"+(ke.rightLargeArcRadius+xe)+" "+(ke.rightSmallArcRadius+xe)+" 0 0 1 "+(ke.rightFullExtent-xe-Oe)+" "+(ke.targetY-ke.rightSmallArcRadius)+"L"+(ke.rightFullExtent-xe-Oe)+" "+ke.verticalRightInnerExtent+"A"+(ke.rightLargeArcRadius+xe)+" "+(ke.rightLargeArcRadius+xe)+" 0 0 1 "+(ke.rightInnerExtent-Oe)+" "+(ke.verticalFullExtent-xe)+"L"+ke.leftInnerExtent+" "+(ke.verticalFullExtent-xe)+"A"+(ke.leftLargeArcRadius+xe)+" "+(ke.leftLargeArcRadius+xe)+" 0 0 1 "+(ke.leftFullExtent+xe)+" "+ke.verticalLeftInnerExtent+"L"+(ke.leftFullExtent+xe)+" "+(ke.sourceY-ke.leftSmallArcRadius)+"A"+(ke.leftLargeArcRadius+xe)+" "+(ke.leftSmallArcRadius+xe)+" 0 0 1 "+ke.leftInnerExtent+" "+(ke.sourceY+xe)+"L"+ke.sourceX+" "+(ke.sourceY+xe)+"L"+ke.sourceX+" "+(ke.sourceY-xe)+"L"+ke.leftInnerExtent+" "+(ke.sourceY-xe)+"A"+(ke.leftLargeArcRadius-xe)+" "+(ke.leftSmallArcRadius-xe)+" 0 0 0 "+(ke.leftFullExtent-xe)+" "+(ke.sourceY-ke.leftSmallArcRadius)+"L"+(ke.leftFullExtent-xe)+" "+ke.verticalLeftInnerExtent+"A"+(ke.leftLargeArcRadius-xe)+" "+(ke.leftLargeArcRadius-xe)+" 0 0 0 "+ke.leftInnerExtent+" "+(ke.verticalFullExtent+xe)+"L"+(ke.rightInnerExtent-Oe)+" "+(ke.verticalFullExtent+xe)+"A"+(ke.rightLargeArcRadius-xe)+" "+(ke.rightLargeArcRadius-xe)+" 0 0 0 "+(ke.rightFullExtent+xe-Oe)+" "+ke.verticalRightInnerExtent+"L"+(ke.rightFullExtent+xe-Oe)+" "+(ke.targetY-ke.rightSmallArcRadius)+"A"+(ke.rightLargeArcRadius-xe)+" "+(ke.rightSmallArcRadius-xe)+" 0 0 0 "+(ke.rightInnerExtent-Oe)+" "+(ke.targetY-xe)+"L"+(ke.targetX-Oe)+" "+(ke.targetY-xe)+(Oe>0?"L"+ke.targetX+" "+ke.targetY:"")+"Z":"M "+(ke.targetX-Oe)+" "+(ke.targetY-xe)+" L"+(ke.rightInnerExtent-Oe)+" "+(ke.targetY-xe)+"A"+(ke.rightLargeArcRadius+xe)+" "+(ke.rightSmallArcRadius+xe)+" 0 0 0 "+(ke.rightFullExtent-xe-Oe)+" "+(ke.targetY+ke.rightSmallArcRadius)+"L"+(ke.rightFullExtent-xe-Oe)+" "+ke.verticalRightInnerExtent+"A"+(ke.rightLargeArcRadius+xe)+" "+(ke.rightLargeArcRadius+xe)+" 0 0 0 "+(ke.rightInnerExtent-Oe)+" "+(ke.verticalFullExtent+xe)+"L"+ke.leftInnerExtent+" "+(ke.verticalFullExtent+xe)+"A"+(ke.leftLargeArcRadius+xe)+" "+(ke.leftLargeArcRadius+xe)+" 0 0 0 "+(ke.leftFullExtent+xe)+" "+ke.verticalLeftInnerExtent+"L"+(ke.leftFullExtent+xe)+" "+(ke.sourceY+ke.leftSmallArcRadius)+"A"+(ke.leftLargeArcRadius+xe)+" "+(ke.leftSmallArcRadius+xe)+" 0 0 0 "+ke.leftInnerExtent+" "+(ke.sourceY-xe)+"L"+ke.sourceX+" "+(ke.sourceY-xe)+"L"+ke.sourceX+" "+(ke.sourceY+xe)+"L"+ke.leftInnerExtent+" "+(ke.sourceY+xe)+"A"+(ke.leftLargeArcRadius-xe)+" "+(ke.leftSmallArcRadius-xe)+" 0 0 1 "+(ke.leftFullExtent-xe)+" "+(ke.sourceY+ke.leftSmallArcRadius)+"L"+(ke.leftFullExtent-xe)+" "+ke.verticalLeftInnerExtent+"A"+(ke.leftLargeArcRadius-xe)+" "+(ke.leftLargeArcRadius-xe)+" 0 0 1 "+ke.leftInnerExtent+" "+(ke.verticalFullExtent-xe)+"L"+(ke.rightInnerExtent-Oe)+" "+(ke.verticalFullExtent-xe)+"A"+(ke.rightLargeArcRadius-xe)+" "+(ke.rightLargeArcRadius-xe)+" 0 0 1 "+(ke.rightFullExtent+xe-Oe)+" "+ke.verticalRightInnerExtent+"L"+(ke.rightFullExtent+xe-Oe)+" "+(ke.targetY+ke.rightSmallArcRadius)+"A"+(ke.rightLargeArcRadius-xe)+" "+(ke.rightSmallArcRadius-xe)+" 0 0 1 "+(ke.rightInnerExtent-Oe)+" "+(ke.targetY+xe)+"L"+(ke.targetX-Oe)+" "+(ke.targetY+xe)+(Oe>0?"L"+ke.targetX+" "+ke.targetY:"")+"Z"}(B.link,j);var K=Math.abs((B.link.target.x0-B.link.source.x1)/2);j>K&&(j=K);var G=B.link.source.x1,V=B.link.target.x0-j,W=A(G,V),J=W(.5),X=W(.5),ee=B.link.y0-B.link.width/2,re=B.link.y0+B.link.width/2,ie=B.link.y1-B.link.width/2,se=B.link.y1+B.link.width/2,fe="M"+G+","+ee,ye="C"+J+","+ee+" "+X+","+ie+" "+V+","+ie,ge="C"+X+","+se+" "+J+","+re+" "+G+","+re,he=j>0?"L"+(V+j)+","+(ie+B.link.width/2):"";return fe+ye+(he+="L"+V+","+se)+ge+"Z"}}function S(B,j){var K=s(j.color),G=d.nodePadAcross,V=B.nodePad/2;j.dx=j.x1-j.x0,j.dy=j.y1-j.y0;var W=j.dx,J=Math.max(.5,j.dy),X="node_"+j.pointNumber;return j.group&&(X=r.randstr()),j.trace=B.trace,j.curveNumber=B.trace.index,{index:j.pointNumber,key:X,partOfGroup:j.partOfGroup||!1,group:j.group,traceId:B.key,trace:B.trace,node:j,nodePad:B.nodePad,nodeLineColor:B.nodeLineColor,nodeLineWidth:B.nodeLineWidth,textFont:B.textFont,size:B.horizontal?B.height:B.width,visibleWidth:Math.ceil(W),visibleHeight:J,zoneX:-G,zoneY:-V,zoneWidth:W+2*G,zoneHeight:J+2*V,labelY:B.horizontal?j.dy/2+1:j.dx/2+1,left:j.originalLayer===1,sizeAcross:B.width,forceLayouts:B.forceLayouts,horizontal:B.horizontal,darkBackground:K.getBrightness()<=128,tinyColorHue:t.tinyRGB(K),tinyColorAlpha:K.getAlpha(),valueFormat:B.valueFormat,valueSuffix:B.valueSuffix,sankey:B.sankey,graph:B.graph,arrangement:B.arrangement,uniqueNodeLabelPathId:[B.guid,B.key,X].join("_"),interactionState:B.interactionState,figure:B}}function _(B){B.attr("transform",function(j){return n(j.node.x0.toFixed(3),j.node.y0.toFixed(3))})}function E(B){B.call(_)}function L(B,j){B.call(E),j.attr("d",u())}function C(B){B.attr("width",function(j){return j.node.x1-j.node.x0}).attr("height",function(j){return j.visibleHeight})}function P(B){return B.link.width>1||B.linkLineWidth>0}function I(B){return n(B.translateX,B.translateY)+(B.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function U(B,j,K){B.on(".basic",null).on("mouseover.basic",function(G){G.interactionState.dragInProgress||G.partOfGroup||(K.hover(this,G,j),G.interactionState.hovered=[this,G])}).on("mousemove.basic",function(G){G.interactionState.dragInProgress||G.partOfGroup||(K.follow(this,G),G.interactionState.hovered=[this,G])}).on("mouseout.basic",function(G){G.interactionState.dragInProgress||G.partOfGroup||(K.unhover(this,G,j),G.interactionState.hovered=!1)}).on("click.basic",function(G){G.interactionState.hovered&&(K.unhover(this,G,j),G.interactionState.hovered=!1),G.interactionState.dragInProgress||G.partOfGroup||K.select(this,G,j)})}function z(B,j,K,G){var V=l.behavior.drag().origin(function(W){return{x:W.node.x0+W.visibleWidth/2,y:W.node.y0+W.visibleHeight/2}}).on("dragstart",function(W){if(W.arrangement!=="fixed"&&(r.ensureSingle(G._fullLayout._infolayer,"g","dragcover",function(X){G._fullLayout._dragCover=X}),r.raiseToTop(this),W.interactionState.dragInProgress=W.node,F(W.node),W.interactionState.hovered&&(K.nodeEvents.unhover.apply(0,W.interactionState.hovered),W.interactionState.hovered=!1),W.arrangement==="snap")){var J=W.traceId+"|"+W.key;W.forceLayouts[J]?W.forceLayouts[J].alpha(1):function(X,ee,re,ie){(function(fe){for(var ye=0;ye<fe.length;ye++)fe[ye].y=(fe[ye].y0+fe[ye].y1)/2,fe[ye].x=(fe[ye].x0+fe[ye].x1)/2})(re.graph.nodes);var se=re.graph.nodes.filter(function(fe){return fe.originalX===re.node.originalX}).filter(function(fe){return!fe.partOfGroup});re.forceLayouts[ee]=k.forceSimulation(se).alphaDecay(0).force("collide",k.forceCollide().radius(function(fe){return fe.dy/2+re.nodePad/2}).strength(1).iterations(d.forceIterations)).force("constrain",function(fe,ye,ge,he){return function(){for(var ve=0,Oe=0;Oe<ge.length;Oe++){var xe=ge[Oe];xe===he.interactionState.dragInProgress?(xe.x=xe.lastDraggedX,xe.y=xe.lastDraggedY):(xe.vx=(xe.originalX-xe.x)/d.forceTicksPerFrame,xe.y=Math.min(he.size-xe.dy/2,Math.max(xe.dy/2,xe.y))),ve=Math.max(ve,Math.abs(xe.vx),Math.abs(xe.vy))}!he.interactionState.dragInProgress&&ve<.1&&he.forceLayouts[ye].alpha()>0&&he.forceLayouts[ye].alpha(0)}}(0,ee,se,re)).stop()}(0,J,W),function(X,ee,re,ie,se){window.requestAnimationFrame(function fe(){var ye;for(ye=0;ye<d.forceTicksPerFrame;ye++)re.forceLayouts[ie].tick();if(function(he){for(var ve=0;ve<he.length;ve++)he[ve].y0=he[ve].y-he[ve].dy/2,he[ve].y1=he[ve].y0+he[ve].dy,he[ve].x0=he[ve].x-he[ve].dx/2,he[ve].x1=he[ve].x0+he[ve].dx}(re.graph.nodes),re.sankey.update(re.graph),L(X.filter(N(re)),ee),re.forceLayouts[ie].alpha()>0)window.requestAnimationFrame(fe);else{var ge=re.node.originalX;re.node.x0=ge-re.visibleWidth/2,re.node.x1=ge+re.visibleWidth/2,H(re,se)}})}(B,j,W,J,G)}}).on("drag",function(W){if(W.arrangement!=="fixed"){var J=l.event.x,X=l.event.y;W.arrangement==="snap"?(W.node.x0=J-W.visibleWidth/2,W.node.x1=J+W.visibleWidth/2,W.node.y0=X-W.visibleHeight/2,W.node.y1=X+W.visibleHeight/2):(W.arrangement==="freeform"&&(W.node.x0=J-W.visibleWidth/2,W.node.x1=J+W.visibleWidth/2),X=Math.max(0,Math.min(W.size-W.visibleHeight/2,X)),W.node.y0=X-W.visibleHeight/2,W.node.y1=X+W.visibleHeight/2),F(W.node),W.arrangement!=="snap"&&(W.sankey.update(W.graph),L(B.filter(N(W)),j))}}).on("dragend",function(W){if(W.arrangement!=="fixed"){W.interactionState.dragInProgress=!1;for(var J=0;J<W.node.childrenNodes.length;J++)W.node.childrenNodes[J].x=W.node.x,W.node.childrenNodes[J].y=W.node.y;W.arrangement!=="snap"&&H(W,G)}});B.on(".drag",null).call(V)}function H(B,j){for(var K=[],G=[],V=0;V<B.graph.nodes.length;V++){var W=(B.graph.nodes[V].x0+B.graph.nodes[V].x1)/2,J=(B.graph.nodes[V].y0+B.graph.nodes[V].y1)/2;K.push(W/B.figure.width),G.push(J/B.figure.height)}v.call("_guiRestyle",j,{"node.x":[K],"node.y":[G]},B.trace.index).then(function(){j._fullLayout._dragCover&&j._fullLayout._dragCover.remove()})}function F(B){B.lastDraggedX=B.x0+B.dx/2,B.lastDraggedY=B.y0+B.dy/2}function N(B){return function(j){return j.node.originalX===B.node.originalX}}$.exports=function(B,j,K,G,V){var W=B._context.staticPlot,J=!1;r.ensureSingle(B._fullLayout._infolayer,"g","first-render",function(){J=!0});var X=B._fullLayout._dragCover,ee=K.filter(function(ve){return f(ve).trace.visible}).map(m.bind(null,G)),re=j.selectAll("."+d.cn.sankey).data(ee,c);re.exit().remove(),re.enter().append("g").classed(d.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",W?"none":"auto").attr("transform",I),re.each(function(ve,Oe){B._fullData[Oe]._sankey=ve;var xe="bgsankey-"+ve.trace.uid+"-"+Oe;r.ensureSingle(B._fullLayout._draggers,"rect",xe),B._fullData[Oe]._bgRect=l.select("."+xe),B._fullData[Oe]._bgRect.style("pointer-events",W?"none":"all").attr("width",ve.width).attr("height",ve.height).attr("x",ve.translateX).attr("y",ve.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),re.transition().ease(d.ease).duration(d.duration).attr("transform",I);var ie=re.selectAll("."+d.cn.sankeyLinks).data(h,c);ie.enter().append("g").classed(d.cn.sankeyLinks,!0).style("fill","none");var se=ie.selectAll("."+d.cn.sankeyLink).data(function(ve){return ve.graph.links.filter(function(Oe){return Oe.value}).map(w.bind(null,ve))},c);se.enter().append("path").classed(d.cn.sankeyLink,!0).call(U,re,V.linkEvents),se.style("stroke",function(ve){return P(ve)?t.tinyRGB(s(ve.linkLineColor)):ve.tinyColorHue}).style("stroke-opacity",function(ve){return P(ve)?t.opacity(ve.linkLineColor):ve.tinyColorAlpha}).style("fill",function(ve){return ve.tinyColorHue}).style("fill-opacity",function(ve){return ve.tinyColorAlpha}).style("stroke-width",function(ve){return P(ve)?ve.linkLineWidth:1}).attr("d",u()),se.style("opacity",function(){return B._context.staticPlot||J||X?1:0}).transition().ease(d.ease).duration(d.duration).style("opacity",1),se.exit().transition().ease(d.ease).duration(d.duration).style("opacity",0).remove();var fe=re.selectAll("."+d.cn.sankeyNodeSet).data(h,c);fe.enter().append("g").classed(d.cn.sankeyNodeSet,!0),fe.style("cursor",function(ve){switch(ve.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ye=fe.selectAll("."+d.cn.sankeyNode).data(function(ve){var Oe=ve.graph.nodes;return function(xe){var ke,Me=[];for(ke=0;ke<xe.length;ke++)xe[ke].originalX=(xe[ke].x0+xe[ke].x1)/2,xe[ke].originalY=(xe[ke].y0+xe[ke].y1)/2,Me.indexOf(xe[ke].originalX)===-1&&Me.push(xe[ke].originalX);for(Me.sort(function(Te,Q){return Te-Q}),ke=0;ke<xe.length;ke++)xe[ke].originalLayerIndex=Me.indexOf(xe[ke].originalX),xe[ke].originalLayer=xe[ke].originalLayerIndex/(Me.length-1)}(Oe),Oe.map(S.bind(null,ve))},c);ye.enter().append("g").classed(d.cn.sankeyNode,!0).call(_).style("opacity",function(ve){return!B._context.staticPlot&&!J||ve.partOfGroup?0:1}),ye.call(U,re,V.nodeEvents).call(z,se,V,B),ye.transition().ease(d.ease).duration(d.duration).call(_).style("opacity",function(ve){return ve.partOfGroup?0:1}),ye.exit().transition().ease(d.ease).duration(d.duration).style("opacity",0).remove();var ge=ye.selectAll("."+d.cn.nodeRect).data(h);ge.enter().append("rect").classed(d.cn.nodeRect,!0).call(C),ge.style("stroke-width",function(ve){return ve.nodeLineWidth}).style("stroke",function(ve){return t.tinyRGB(s(ve.nodeLineColor))}).style("stroke-opacity",function(ve){return t.opacity(ve.nodeLineColor)}).style("fill",function(ve){return ve.tinyColorHue}).style("fill-opacity",function(ve){return ve.tinyColorAlpha}),ge.transition().ease(d.ease).duration(d.duration).call(C);var he=ye.selectAll("."+d.cn.nodeLabel).data(h);he.enter().append("text").classed(d.cn.nodeLabel,!0).style("cursor","default"),he.attr("data-notex",1).text(function(ve){return ve.node.label}).each(function(ve){var Oe=l.select(this);o.font(Oe,ve.textFont),b.convertToTspans(Oe,B)}).style("text-shadow",b.makeTextShadow(B._fullLayout.paper_bgcolor)).attr("text-anchor",function(ve){return ve.horizontal&&ve.left?"end":"start"}).attr("transform",function(ve){var Oe=l.select(this),xe=b.lineCount(Oe),ke=ve.textFont.size*((xe-1)*p-y),Me=ve.nodeLineWidth/2+3,Te=((ve.horizontal?ve.visibleHeight:ve.visibleWidth)-ke)/2;ve.horizontal&&(ve.left?Me=-Me:Me+=ve.visibleWidth);var Q=ve.horizontal?"":"scale(-1,1)"+a(90);return n(ve.horizontal?Me:Te,ve.horizontal?Te:Me)+Q}),he.transition().ease(d.ease).duration(d.duration)}},84564:function($){$.exports=function(R,e){for(var k=[],A=R.cd[0].trace,l=A._sankey.graph.nodes,T=0;T<l.length;T++){var x=l[T];if(!x.partOfGroup){var d=[(x.x0+x.x1)/2,(x.y0+x.y1)/2];A.orientation==="v"&&d.reverse(),e&&e.contains(d,!1,T,R)&&k.push({pointNumber:x.pointNumber})}}return k}},75225:function($,R,e){var k=e(71828);$.exports=function(A,l){for(var T=0;T<A.length;T++)A[T].i=T;k.mergeArray(l.text,A,"tx"),k.mergeArray(l.texttemplate,A,"txt"),k.mergeArray(l.hovertext,A,"htx"),k.mergeArray(l.customdata,A,"data"),k.mergeArray(l.textposition,A,"tp"),l.textfont&&(k.mergeArrayCastPositive(l.textfont.size,A,"ts"),k.mergeArray(l.textfont.color,A,"tc"),k.mergeArray(l.textfont.family,A,"tf"));var x=l.marker;if(x){k.mergeArrayCastPositive(x.size,A,"ms"),k.mergeArrayCastPositive(x.opacity,A,"mo"),k.mergeArray(x.symbol,A,"mx"),k.mergeArray(x.angle,A,"ma"),k.mergeArray(x.standoff,A,"mf"),k.mergeArray(x.color,A,"mc");var d=x.line;x.line&&(k.mergeArray(d.color,A,"mlc"),k.mergeArrayCastPositive(d.width,A,"mlw"));var s=x.gradient;s&&s.type!=="none"&&(k.mergeArray(s.type,A,"mgt"),k.mergeArray(s.color,A,"mgc"))}}},82196:function($,R,e){var k=e(12663).axisHoverFormat,A=e(5386).s,l=e(5386).f,T=e(50693),x=e(41940),d=e(79952).P,s=e(79952).u,t=e(91424),o=e(47581),r=e(1426).extendFlat;$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:k("x"),yhoverformat:k("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:A({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:l({},{keys:o.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},d,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:s,marker:r({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:x({editType:"calc",colorEditType:"style",arrayOk:!0})}},47761:function($,R,e){var k=e(92770),A=e(71828),l=e(89298),T=e(42973),x=e(50606).BADNUM,d=e(34098),s=e(36922),t=e(75225),o=e(66279);function r(h,f,b,v,g,y,p){var m=f._length,w=h._fullLayout,u=b._id,S=v._id,_=w._firstScatter[i(f)]===f.uid,E=(c(f,w,b,v)||{}).orientation,L=f.fill;b._minDtick=0,v._minDtick=0;var C={padded:!0},P={padded:!0};p&&(C.ppad=P.ppad=p);var I=m<2||g[0]!==g[m-1]||y[0]!==y[m-1];I&&(L==="tozerox"||L==="tonextx"&&(_||E==="h"))?C.tozero=!0:(f.error_y||{}).visible||L!=="tonexty"&&L!=="tozeroy"&&(d.hasMarkers(f)||d.hasText(f))||(C.padded=!1,C.ppad=0),I&&(L==="tozeroy"||L==="tonexty"&&(_||E==="v"))?P.tozero=!0:L!=="tonextx"&&L!=="tozerox"||(P.padded=!1),u&&(f._extremes[u]=l.findExtremes(b,g,C)),S&&(f._extremes[S]=l.findExtremes(v,y,P))}function n(h,f){if(d.hasMarkers(h)){var b,v=h.marker,g=1.6*(h.marker.sizeref||1);if(b=h.marker.sizemode==="area"?function(u){return Math.max(Math.sqrt((u||0)/g),3)}:function(u){return Math.max((u||0)/g,3)},A.isArrayOrTypedArray(v.size)){var y={type:"linear"};l.setConvert(y);for(var p=y.makeCalcdata(h.marker,"size"),m=new Array(f),w=0;w<f;w++)m[w]=b(p[w]);return m}return b(v.size)}}function a(h,f){var b=i(f),v=h._firstScatter;v[b]||(v[b]=f.uid)}function i(h){var f=h.stackgroup;return h.xaxis+h.yaxis+h.type+(f?"-"+f:"")}function c(h,f,b,v){var g=h.stackgroup;if(g){var y=f._scatterStackOpts[b._id+v._id][g],p=y.orientation==="v"?v:b;return p.type==="linear"||p.type==="log"?y:void 0}}$.exports={calc:function(h,f){var b,v,g,y,p,m,w=h._fullLayout,u=f._xA=l.getFromId(h,f.xaxis||"x","x"),S=f._yA=l.getFromId(h,f.yaxis||"y","y"),_=u.makeCalcdata(f,"x"),E=S.makeCalcdata(f,"y"),L=T(f,u,"x",_),C=T(f,S,"y",E),P=L.vals,I=C.vals,U=f._length,z=new Array(U),H=f.ids,F=c(f,w,u,S),N=!1;a(w,f);var B,j="x",K="y";F?(A.pushUnique(F.traceIndices,f._expandedIndex),(b=F.orientation==="v")?(K="s",B="x"):(j="s",B="y"),p=F.stackgaps==="interpolate"):r(h,f,u,S,P,I,n(f,U));var G=!!f.xperiodalignment,V=!!f.yperiodalignment;for(v=0;v<U;v++){var W=z[v]={},J=k(P[v]),X=k(I[v]);J&&X?(W[j]=P[v],W[K]=I[v],G&&(W.orig_x=_[v],W.xEnd=L.ends[v],W.xStart=L.starts[v]),V&&(W.orig_y=E[v],W.yEnd=C.ends[v],W.yStart=C.starts[v])):F&&(b?J:X)?(W[B]=b?P[v]:I[v],W.gap=!0,p?(W.s=x,N=!0):W.s=0):W[j]=W[K]=x,H&&(W.id=String(H[v]))}if(t(z,f),s(h,f),o(z,f),F){for(v=0;v<z.length;)z[v][B]===x?z.splice(v,1):v++;if(A.sort(z,function(se,fe){return se[B]-fe[B]||se.i-fe.i}),N){for(v=0;v<z.length-1&&z[v].gap;)v++;for((m=z[v].s)||(m=z[v].s=0),g=0;g<v;g++)z[g].s=m;for(y=z.length-1;y>v&&z[y].gap;)y--;for(m=z[y].s,g=z.length-1;g>y;g--)z[g].s=m;for(;v<y;)if(z[++v].gap){for(g=v+1;z[g].gap;)g++;for(var ee=z[v-1][B],re=z[v-1].s,ie=(z[g].s-re)/(z[g][B]-ee);v<g;)z[v].s=re+(z[v][B]-ee)*ie,v++}}}return z},calcMarkerSize:n,calcAxisExpansion:r,setFirstScatter:a,getStackOpts:c}},66279:function($,R,e){var k=e(71828);$.exports=function(A,l){k.isArrayOrTypedArray(l.selectedpoints)&&k.tagSelected(A,l)}},36922:function($,R,e){var k=e(52075).hasColorscale,A=e(78803),l=e(34098);$.exports=function(T,x){l.hasLines(x)&&k(x,"line")&&A(T,x,{vals:x.line.color,containerStr:"line",cLetter:"c"}),l.hasMarkers(x)&&(k(x,"marker")&&A(T,x,{vals:x.marker.color,containerStr:"marker",cLetter:"c"}),k(x,"marker.line")&&A(T,x,{vals:x.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47581:function($){$.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function($,R,e){var k=e(47761),A=e(11661).setGroupPositions;function l(T,x,d,s,t,o,r){t[s]=!0;var n={i:null,gap:!0,s:0};if(n[r]=d,T.splice(x,0,n),x&&d===T[x-1][r]){var a=T[x-1];n.s=a.s,n.i=a.i,n.gap=a.gap}else o&&(n.s=function(i,c,h,f){var b=i[c-1],v=i[c+1];return v?b?b.s+(v.s-b.s)*(h-b[f])/(v[f]-b[f]):v.s:b.s}(T,x,d,r));x||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}$.exports=function(T,x){T._fullLayout.scattermode==="group"&&function(B,j){for(var K=j.xaxis,G=j.yaxis,V=B._fullLayout,W=B._fullData,J=B.calcdata,X=[],ee=[],re=0;re<W.length;re++){var ie=W[re];ie.visible===!0&&ie.type==="scatter"&&ie.xaxis===K._id&&ie.yaxis===G._id&&(ie.orientation==="h"?X.push(J[re]):ie.orientation==="v"&&ee.push(J[re]))}var se={mode:V.scattermode,gap:V.scattergap};A(B,K,G,ee,se),A(B,G,K,X,se)}(T,x);var d=x.xaxis,s=x.yaxis,t=d._id+s._id,o=T._fullLayout._scatterStackOpts[t];if(o){var r,n,a,i,c,h,f,b,v,g,y,p,m,w,u,S=T.calcdata;for(var _ in o){var E=(g=o[_]).traceIndices;if(E.length){for(y=g.stackgaps==="interpolate",p=g.groupnorm,g.orientation==="v"?(m="x",w="y"):(m="y",w="x"),u=new Array(E.length),r=0;r<u.length;r++)u[r]=!1;h=S[E[0]];var L=new Array(h.length);for(r=0;r<h.length;r++)L[r]=h[r][m];for(r=1;r<E.length;r++){for(c=S[E[r]],n=a=0;n<c.length;n++){for(f=c[n][m];f>L[a]&&a<L.length;a++)l(c,n,L[a],r,u,y,m),n++;if(f!==L[a]){for(i=0;i<r;i++)l(S[E[i]],a,f,i,u,y,m);L.splice(a,0,f)}a++}for(;a<L.length;a++)l(c,n,L[a],r,u,y,m),n++}var C=L.length;for(n=0;n<h.length;n++){for(b=h[n][w]=h[n].s,r=1;r<E.length;r++)(c=S[E[r]])[0].trace._rawLength=c[0].trace._length,c[0].trace._length=C,b+=c[n].s,c[n][w]=b;if(p)for(v=(p==="fraction"?b:b/100)||1,r=0;r<E.length;r++){var P=S[E[r]][n];P[w]/=v,P.sNorm=P.s/v}}for(r=0;r<E.length;r++){var I=(c=S[E[r]])[0].trace,U=k.calcMarkerSize(I,I._rawLength),z=Array.isArray(U);if(U&&u[r]||z){var H=U;for(U=new Array(C),n=0;n<C;n++)U[n]=c[n].gap?0:z?H[c[n].i]:H}var F=new Array(C),N=new Array(C);for(n=0;n<C;n++)F[n]=c[n].x,N[n]=c[n].y;k.calcAxisExpansion(T,I,d,s,F,N,U),c[0].t.orientation=g.orientation}}}}}},34936:function($,R,e){var k=e(71828),A=e(26125),l=e(82196);$.exports=function(T,x){var d,s,t;function o(c){return k.coerce(s._input,s,l,c)}if(x.scattermode==="group")for(t=0;t<T.length;t++)(s=T[t]).type==="scatter"&&(d=s._input,A(d,s,x,o));for(t=0;t<T.length;t++){var r=T[t];if(r.type==="scatter"){var n=r.fill;if(n!=="none"&&n!=="toself"&&(r.opacity=void 0,n==="tonexty"||n==="tonextx"))for(var a=t-1;a>=0;a--){var i=T[a];if(i.type==="scatter"&&i.xaxis===r.xaxis&&i.yaxis===r.yaxis){i.opacity=void 0;break}}}}}},17438:function($,R,e){var k=e(71828),A=e(73972),l=e(82196),T=e(47581),x=e(34098),d=e(67513),s=e(73927),t=e(565),o=e(49508),r=e(11058),n=e(94039),a=e(82410),i=e(28908),c=e(71828).coercePattern;$.exports=function(h,f,b,v){function g(E,L){return k.coerce(h,f,l,E,L)}var y=d(h,f,v,g);if(y||(f.visible=!1),f.visible){s(h,f,v,g),g("xhoverformat"),g("yhoverformat");var p=t(h,f,v,g);v.scattermode==="group"&&f.orientation===void 0&&g("orientation","v");var m=!p&&y<T.PTS_LINESONLY?"lines+markers":"lines";g("text"),g("hovertext"),g("mode",m),x.hasLines(f)&&(r(h,f,b,v,g,{backoff:!0}),n(h,f,g),g("connectgaps"),g("line.simplify")),x.hasMarkers(f)&&o(h,f,b,v,g,{gradient:!0}),x.hasText(f)&&(g("texttemplate"),a(h,f,v,g));var w=[];(x.hasMarkers(f)||x.hasText(f))&&(g("cliponaxis"),g("marker.maxdisplayed"),w.push("points")),g("fill",p?p.fillDflt:"none"),f.fill!=="none"&&(i(h,f,b,g),x.hasLines(f)||n(h,f,g),c(g,"fillpattern",f.fillcolor,!1));var u=(f.line||{}).color,S=(f.marker||{}).color;f.fill!=="tonext"&&f.fill!=="toself"||w.push("fills"),g("hoveron",w.join("+")||"points"),f.hoveron!=="fills"&&g("hovertemplate");var _=A.getComponentMethod("errorbars","supplyDefaults");_(h,f,u||S||b,{axis:"y"}),_(h,f,u||S||b,{axis:"x",inherit:"y"}),k.coerceSelectionMarkerOpacity(f,g)}}},28908:function($,R,e){var k=e(7901),A=e(71828).isArrayOrTypedArray;$.exports=function(l,T,x,d){var s=!1;if(T.marker){var t=T.marker.color,o=(T.marker.line||{}).color;t&&!A(t)?s=t:o&&!A(o)&&(s=o)}d("fillcolor",k.addOpacity((T.line||{}).color||s||x,.5))}},8225:function($,R,e){var k=e(89298);$.exports=function(A,l,T){var x={},d={_fullLayout:T},s=k.getFromTrace(d,l,"x"),t=k.getFromTrace(d,l,"y"),o=A.orig_x;o===void 0&&(o=A.x);var r=A.orig_y;return r===void 0&&(r=A.y),x.xLabel=k.tickText(s,s.c2l(o),!0).text,x.yLabel=k.tickText(t,t.c2l(r),!0).text,x}},34603:function($,R,e){var k=e(7901),A=e(34098);$.exports=function(l,T){var x,d;if(l.mode==="lines")return(x=l.line.color)&&k.opacity(x)?x:l.fillcolor;if(l.mode==="none")return l.fill?l.fillcolor:"";var s=T.mcc||(l.marker||{}).color,t=T.mlcc||((l.marker||{}).line||{}).color;return(d=s&&k.opacity(s)?s:t&&k.opacity(t)&&(T.mlw||((l.marker||{}).line||{}).width)?t:"")?k.opacity(d)<.3?k.addOpacity(d,.3):d:(x=(l.line||{}).color)&&k.opacity(x)&&A.hasLines(l)&&l.line.width?x:l.fillcolor}},26125:function($,R,e){var k=e(99082).getAxisGroup;$.exports=function(A,l,T,x){var d=l.orientation,s=l[{v:"x",h:"y"}[d]+"axis"],t=k(T,s)+d,o=T._alignmentOpts||{},r=x("alignmentgroup"),n=o[t];n||(n=o[t]={});var a=n[r];a?a.traces.push(l):a=n[r]={traces:[l],alignmentIndex:Object.keys(n).length,offsetGroups:{}};var i=x("offsetgroup"),c=a.offsetGroups,h=c[i];i&&(h||(h=c[i]={offsetIndex:Object.keys(c).length}),l._offsetIndex=h.offsetIndex)}},33720:function($,R,e){var k=e(71828),A=e(30211),l=e(73972),T=e(34603),x=e(7901),d=k.fillText;$.exports=function(s,t,o,r){var n=s.cd,a=n[0].trace,i=s.xa,c=s.ya,h=i.c2p(t),f=c.c2p(o),b=[h,f],v=a.hoveron||"",g=a.mode.indexOf("markers")!==-1?3:.5,y=!!a.xperiodalignment,p=!!a.yperiodalignment;if(v.indexOf("points")!==-1){var m=function(ye){var ge=Math.max(g,ye.mrc||0),he=i.c2p(ye.x)-h,ve=c.c2p(ye.y)-f;return Math.max(Math.sqrt(he*he+ve*ve)-ge,1-g/ge)},w=A.getDistanceFunction(r,function(ye){if(y){var ge=i.c2p(ye.xStart),he=i.c2p(ye.xEnd);return h>=Math.min(ge,he)&&h<=Math.max(ge,he)?0:1/0}var ve=Math.max(3,ye.mrc||0),Oe=1-1/ve,xe=Math.abs(i.c2p(ye.x)-h);return xe<ve?Oe*xe/ve:xe-ve+Oe},function(ye){if(p){var ge=c.c2p(ye.yStart),he=c.c2p(ye.yEnd);return f>=Math.min(ge,he)&&f<=Math.max(ge,he)?0:1/0}var ve=Math.max(3,ye.mrc||0),Oe=1-1/ve,xe=Math.abs(c.c2p(ye.y)-f);return xe<ve?Oe*xe/ve:xe-ve+Oe},m);if(A.getClosest(n,w,s),s.index!==!1){var u=n[s.index],S=i.c2p(u.x,!0),_=c.c2p(u.y,!0),E=u.mrc||1;s.index=u.i;var L=n[0].t.orientation,C=L&&(u.sNorm||u.s),P=L==="h"?C:u.orig_x!==void 0?u.orig_x:u.x,I=L==="v"?C:u.orig_y!==void 0?u.orig_y:u.y;return k.extendFlat(s,{color:T(a,u),x0:S-E,x1:S+E,xLabelVal:P,y0:_-E,y1:_+E,yLabelVal:I,spikeDistance:m(u),hovertemplate:a.hovertemplate}),d(u,a,s),l.getComponentMethod("errorbars","hoverInfo")(u,a,s),[s]}}if(v.indexOf("fills")!==-1&&a._polygons){var U,z,H,F,N,B,j,K,G,V=a._polygons,W=[],J=!1,X=1/0,ee=-1/0,re=1/0,ie=-1/0;for(U=0;U<V.length;U++)(H=V[U]).contains(b)&&(J=!J,W.push(H),re=Math.min(re,H.ymin),ie=Math.max(ie,H.ymax));if(J){var se=((re=Math.max(re,0))+(ie=Math.min(ie,c._length)))/2;for(U=0;U<W.length;U++)for(F=W[U].pts,z=1;z<F.length;z++)(K=F[z-1][1])>se!=(G=F[z][1])>=se&&(B=F[z-1][0],j=F[z][0],G-K&&(N=B+(j-B)*(se-K)/(G-K),X=Math.min(X,N),ee=Math.max(ee,N)));X=Math.max(X,0),ee=Math.min(ee,i._length);var fe=x.defaultLine;return x.opacity(a.fillcolor)?fe=a.fillcolor:x.opacity((a.line||{}).color)&&(fe=a.line.color),k.extendFlat(s,{distance:s.maxHoverDistance,x0:X,x1:ee,y0:se,y1:se,color:fe,hovertemplate:!1}),delete s.index,a.text&&!Array.isArray(a.text)?s.text=String(a.text):s.text=a.name,[s]}}}},67368:function($,R,e){var k=e(34098);$.exports={hasLines:k.hasLines,hasMarkers:k.hasMarkers,hasText:k.hasText,isBubble:k.isBubble,attributes:e(82196),layoutAttributes:e(21479),supplyDefaults:e(17438),crossTraceDefaults:e(34936),supplyLayoutDefaults:e(79334),calc:e(47761).calc,crossTraceCalc:e(72626),arraysToCalcdata:e(75225),plot:e(32663),colorbar:e(4898),formatLabels:e(8225),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(33720),selectPoints:e(98002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function($){$.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function($,R,e){var k=e(71828),A=e(21479);$.exports=function(l,T){var x,d=T.barmode==="group";T.scattermode==="group"&&(x=d?T.bargap:.2,k.coerce(l,T,A,"scattergap",x))}},11058:function($,R,e){var k=e(71828).isArrayOrTypedArray,A=e(52075).hasColorscale,l=e(1586);$.exports=function(T,x,d,s,t,o){o||(o={});var r=(T.marker||{}).color;t("line.color",d),A(T,"line")?l(T,x,s,t,{prefix:"line.",cLetter:"c"}):t("line.color",!k(r)&&r||d),t("line.width"),o.noDash||t("line.dash"),o.backoff&&t("line.backoff")}},34621:function($,R,e){var k=e(91424),A=e(50606),l=A.BADNUM,T=A.LOG_CLIP,x=T+.5,d=T-.5,s=e(71828),t=s.segmentsIntersect,o=s.constrain,r=e(47581);$.exports=function(n,a){var i,c,h,f,b,v,g,y,p,m,w,u,S,_,E,L,C,P,I=a.trace||{},U=a.xaxis,z=a.yaxis,H=U.type==="log",F=z.type==="log",N=U._length,B=z._length,j=a.backoff,K=I.marker,G=a.connectGaps,V=a.baseTolerance,W=a.shape,J=W==="linear",X=I.fill&&I.fill!=="none",ee=[],re=r.minTolerance,ie=n.length,se=new Array(ie),fe=0;function ye(Rt){var Ge=n[Rt];if(!Ge)return!1;var We=a.linearized?U.l2p(Ge.x):U.c2p(Ge.x),Be=a.linearized?z.l2p(Ge.y):z.c2p(Ge.y);if(We===l){if(H&&(We=U.c2p(Ge.x,!0)),We===l)return!1;F&&Be===l&&(We*=Math.abs(U._m*B*(U._m>0?x:d)/(z._m*N*(z._m>0?x:d)))),We*=1e3}if(Be===l){if(F&&(Be=z.c2p(Ge.y,!0)),Be===l)return!1;Be*=1e3}return[We,Be]}function ge(Rt,Ge,We,Be){var Ye=We-Rt,rt=Be-Ge,Se=.5-Rt,ze=.5-Ge,Ke=Ye*Ye+rt*rt,st=Ye*Se+rt*ze;if(st>0&&st<Ke){var ct=Se*rt-ze*Ye;if(ct*ct<Ke)return!0}}function he(Rt,Ge){var We=Rt[0]/N,Be=Rt[1]/B,Ye=Math.max(0,-We,We-1,-Be,Be-1);return Ye&&C!==void 0&&ge(We,Be,C,P)&&(Ye=0),Ye&&Ge&&ge(We,Be,Ge[0]/N,Ge[1]/B)&&(Ye=0),(1+r.toleranceGrowth*Ye)*V}function ve(Rt,Ge){var We=Rt[0]-Ge[0],Be=Rt[1]-Ge[1];return Math.sqrt(We*We+Be*Be)}var Oe,xe,ke,Me,Te,Q,oe,ce=r.maxScreensAway,me=-N*ce,Ae=N*(1+ce),Ie=-B*ce,Ce=B*(1+ce),Re=[[me,Ie,Ae,Ie],[Ae,Ie,Ae,Ce],[Ae,Ce,me,Ce],[me,Ce,me,Ie]];function le(Rt){if(Rt[0]<me||Rt[0]>Ae||Rt[1]<Ie||Rt[1]>Ce)return[o(Rt[0],me,Ae),o(Rt[1],Ie,Ce)]}function de(Rt,Ge){return Rt[0]===Ge[0]&&(Rt[0]===me||Rt[0]===Ae)||Rt[1]===Ge[1]&&(Rt[1]===Ie||Rt[1]===Ce)||void 0}function _e(Rt,Ge,We){return function(Be,Ye){var rt=le(Be),Se=le(Ye),ze=[];if(rt&&Se&&de(rt,Se))return ze;rt&&ze.push(rt),Se&&ze.push(Se);var Ke=2*s.constrain((Be[Rt]+Ye[Rt])/2,Ge,We)-((rt||Be)[Rt]+(Se||Ye)[Rt]);return Ke&&((rt&&Se?Ke>0==rt[Rt]>Se[Rt]?rt:Se:rt||Se)[Rt]+=Ke),ze}}function Fe(Rt){var Ge=Rt[0],We=Rt[1],Be=Ge===se[fe-1][0],Ye=We===se[fe-1][1];if(!Be||!Ye)if(fe>1){var rt=Ge===se[fe-2][0],Se=We===se[fe-2][1];Be&&(Ge===me||Ge===Ae)&&rt?Se?fe--:se[fe-1]=Rt:Ye&&(We===Ie||We===Ce)&&Se?rt?fe--:se[fe-1]=Rt:se[fe++]=Rt}else se[fe++]=Rt}function Ve(Rt){se[fe-1][0]!==Rt[0]&&se[fe-1][1]!==Rt[1]&&Fe([ke,Me]),Fe(Rt),Te=null,ke=Me=0}W==="linear"||W==="spline"?oe=function(Rt,Ge){for(var We=[],Be=0,Ye=0;Ye<4;Ye++){var rt=Re[Ye],Se=t(Rt[0],Rt[1],Ge[0],Ge[1],rt[0],rt[1],rt[2],rt[3]);Se&&(!Be||Math.abs(Se.x-We[0][0])>1||Math.abs(Se.y-We[0][1])>1)&&(Se=[Se.x,Se.y],Be&&ve(Se,Rt)<ve(We[0],Rt)?We.unshift(Se):We.push(Se),Be++)}return We}:W==="hv"||W==="vh"?oe=function(Rt,Ge){var We=[],Be=le(Rt),Ye=le(Ge);return Be&&Ye&&de(Be,Ye)||(Be&&We.push(Be),Ye&&We.push(Ye)),We}:W==="hvh"?oe=_e(0,me,Ae):W==="vhv"&&(oe=_e(1,Ie,Ce));var He=s.isArrayOrTypedArray(K);function nt(Rt){if(Rt&&j&&(Rt.i=i,Rt.d=n,Rt.trace=I,Rt.marker=He?K[Rt.i]:K,Rt.backoff=j),C=Rt[0]/N,P=Rt[1]/B,Oe=Rt[0]<me?me:Rt[0]>Ae?Ae:0,xe=Rt[1]<Ie?Ie:Rt[1]>Ce?Ce:0,Oe||xe){if(fe)if(Te){var Ge=oe(Te,Rt);Ge.length>1&&(Ve(Ge[0]),se[fe++]=Ge[1])}else Q=oe(se[fe-1],Rt)[0],se[fe++]=Q;else se[fe++]=[Oe||Rt[0],xe||Rt[1]];var We=se[fe-1];Oe&&xe&&(We[0]!==Oe||We[1]!==xe)?(Te&&(ke!==Oe&&Me!==xe?Fe(ke&&Me?(Be=Te,rt=(Ye=Rt)[0]-Be[0],Se=(Ye[1]-Be[1])/rt,(Be[1]*Ye[0]-Ye[1]*Be[0])/rt>0?[Se>0?me:Ae,Ce]:[Se>0?Ae:me,Ie]):[ke||Oe,Me||xe]):ke&&Me&&Fe([ke,Me])),Fe([Oe,xe])):ke-Oe&&Me-xe&&Fe([Oe||ke,xe||Me]),Te=Rt,ke=Oe,Me=xe}else Te&&Ve(oe(Te,Rt)[0]),se[fe++]=Rt;var Be,Ye,rt,Se}for(i=0;i<ie;i++)if(c=ye(i)){for(fe=0,Te=null,nt(c),i++;i<ie;i++){if(!(f=ye(i))){if(G)continue;break}if(J&&a.simplify){var tt=ye(i+1);if(m=ve(f,c),X&&(fe===0||fe===ie-1)||!(m<he(f,tt)*re)){for(y=[(f[0]-c[0])/m,(f[1]-c[1])/m],b=c,w=m,u=_=E=0,g=!1,h=f,i++;i<n.length;i++){if(v=tt,tt=ye(i+1),!v){if(G)continue;break}if(L=(p=[v[0]-c[0],v[1]-c[1]])[0]*y[1]-p[1]*y[0],_=Math.min(_,L),(E=Math.max(E,L))-_>he(v,tt))break;h=v,(S=p[0]*y[0]+p[1]*y[1])>w?(w=S,f=v,g=!1):S<u&&(u=S,b=v,g=!0)}if(g?(nt(f),h!==b&&nt(b)):(b!==c&&nt(b),h!==f&&nt(f)),nt(h),i>=n.length||!v)break;nt(v),c=v}}else nt(f)}Te&&Fe([ke||Te[0],Me||Te[1]]),ee.push(se.slice(0,fe))}var ot=W.slice(W.length-1);if(j&&ot!=="h"&&ot!=="v"){for(var dt=!1,kt=-1,mt=[],wt=0;wt<ee.length;wt++)for(var Lt=0;Lt<ee[wt].length-1;Lt++){var Ct=ee[wt][Lt],It=ee[wt][Lt+1],Ut=k.applyBackoff(It,Ct);Ut[0]===It[0]&&Ut[1]===It[1]||(dt=!0),mt[kt+1]||(mt[++kt]=[Ct,[Ut[0],Ut[1]]])}return dt?mt:ee}return ee}},94039:function($){$.exports=function(R,e,k){k("line.shape")==="spline"&&k("line.smoothing")}},68687:function($){var R={tonextx:1,tonexty:1,tonext:1};$.exports=function(e,k,A){var l,T,x,d,s,t={},o=!1,r=-1,n=0,a=-1;for(T=0;T<A.length;T++)(x=(l=A[T][0].trace).stackgroup||"")?x in t?s=t[x]:(s=t[x]=n,n++):l.fill in R&&a>=0?s=a:(s=a=n,n++),s<r&&(o=!0),l._groupIndex=r=s;var i=A.slice();o&&i.sort(function(h,f){var b=h[0].trace,v=f[0].trace;return b._groupIndex-v._groupIndex||b.index-v.index});var c={};for(T=0;T<i.length;T++)x=(l=i[T][0].trace).stackgroup||"",l.visible===!0?(l._nexttrace=null,l.fill in R&&(d=c[x],l._prevtrace=d||null,d&&(d._nexttrace=l)),l._ownfill=l.fill&&(l.fill.substr(0,6)==="tozero"||l.fill==="toself"||l.fill.substr(0,2)==="to"&&!l._prevtrace),c[x]=l):l._prevtrace=l._nexttrace=l._ownfill=null;return i}},39984:function($,R,e){var k=e(92770);$.exports=function(A,l){l||(l=2);var T=A.marker,x=T.sizeref||1,d=T.sizemin||0,s=T.sizemode==="area"?function(t){return Math.sqrt(t/x)}:function(t){return t/x};return function(t){var o=s(t/l);return k(o)&&o>0?Math.max(o,d):0}}},4898:function($){$.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function($,R,e){var k=e(7901),A=e(52075).hasColorscale,l=e(1586),T=e(34098);$.exports=function(x,d,s,t,o,r){var n=T.isBubble(x),a=(x.line||{}).color;r=r||{},a&&(s=a),o("marker.symbol"),o("marker.opacity",n?.7:1),o("marker.size"),r.noAngle||(o("marker.angle"),r.noAngleRef||o("marker.angleref"),r.noStandOff||o("marker.standoff")),o("marker.color",s),A(x,"marker")&&l(x,d,t,o,{prefix:"marker.",cLetter:"c"}),r.noSelect||(o("selected.marker.color"),o("unselected.marker.color"),o("selected.marker.size"),o("unselected.marker.size")),r.noLine||(o("marker.line.color",a&&!Array.isArray(a)&&d.marker.color!==a?a:n?k.background:k.defaultLine),A(x,"marker.line")&&l(x,d,t,o,{prefix:"marker.line.",cLetter:"c"}),o("marker.line.width",n?1:0)),n&&(o("marker.sizeref"),o("marker.sizemin"),o("marker.sizemode")),r.gradient&&o("marker.gradient.type")!=="none"&&o("marker.gradient.color")}},73927:function($,R,e){var k=e(71828).dateTick0,A=e(50606).ONEWEEK;function l(T,x){return k(x,T%A==0?1:0)}$.exports=function(T,x,d,s,t){if(t||(t={x:!0,y:!0}),t.x){var o=s("xperiod");o&&(s("xperiod0",l(o,x.xcalendar)),s("xperiodalignment"))}if(t.y){var r=s("yperiod");r&&(s("yperiod0",l(r,x.ycalendar)),s("yperiodalignment"))}}},32663:function($,R,e){var k=e(39898),A=e(73972),l=e(71828),T=l.ensureSingle,x=l.identity,d=e(91424),s=e(34098),t=e(34621),o=e(68687),r=e(61082).tester;function n(a,i,c,h,f,b,v){var g;(function(Q,oe,ce,me,Ae){var Ie=ce.xaxis,Ce=ce.yaxis,Re=k.extent(l.simpleMap(Ie.range,Ie.r2c)),le=k.extent(l.simpleMap(Ce.range,Ce.r2c)),de=me[0].trace;if(s.hasMarkers(de)){var _e=de.marker.maxdisplayed;if(_e!==0){var Fe=me.filter(function(tt){return tt.x>=Re[0]&&tt.x<=Re[1]&&tt.y>=le[0]&&tt.y<=le[1]}),Ve=Math.ceil(Fe.length/_e),He=0;Ae.forEach(function(tt,ot){var dt=tt[0].trace;s.hasMarkers(dt)&&dt.marker.maxdisplayed>0&&ot<oe&&He++});var nt=Math.round(He*Ve/3+Math.floor(He/3)*Ve/7.1);me.forEach(function(tt){delete tt.vis}),Fe.forEach(function(tt,ot){Math.round((ot+nt)%Ve)===0&&(tt.vis=!0)})}}})(0,i,c,h,f);var y=!!v&&v.duration>0;function p(Q){return y?Q.transition():Q}var m=c.xaxis,w=c.yaxis,u=h[0].trace,S=u.line,_=k.select(b),E=T(_,"g","errorbars"),L=T(_,"g","lines"),C=T(_,"g","points"),P=T(_,"g","text");if(A.getComponentMethod("errorbars","plot")(a,E,c,v),u.visible===!0){var I,U;p(_).style("opacity",u.opacity);var z=u.fill.charAt(u.fill.length-1);z!=="x"&&z!=="y"&&(z=""),h[0][c.isRangePlot?"nodeRangePlot3":"node3"]=_;var H,F,N="",B=[],j=u._prevtrace;j&&(N=j._prevRevpath||"",U=j._nextFill,B=j._polygons);var K,G,V,W,J,X,ee,re="",ie="",se=[],fe=l.noop;if(I=u._ownFill,s.hasLines(u)||u.fill!=="none"){for(U&&U.datum(h),["hv","vh","hvh","vhv"].indexOf(S.shape)!==-1?(K=d.steps(S.shape),G=d.steps(S.shape.split("").reverse().join(""))):K=G=S.shape==="spline"?function(Q){var oe=Q[Q.length-1];return Q.length>1&&Q[0][0]===oe[0]&&Q[0][1]===oe[1]?d.smoothclosed(Q.slice(1),S.smoothing):d.smoothopen(Q,S.smoothing)}:function(Q){return"M"+Q.join("L")},V=function(Q){return G(Q.reverse())},se=t(h,{xaxis:m,yaxis:w,trace:u,connectGaps:u.connectgaps,baseTolerance:Math.max(S.width||1,3)/4,shape:S.shape,backoff:S.backoff,simplify:S.simplify,fill:u.fill}),ee=u._polygons=new Array(se.length),g=0;g<se.length;g++)u._polygons[g]=r(se[g]);se.length&&(W=se[0][0],X=(J=se[se.length-1])[J.length-1]),fe=function(Q){return function(oe){if(H=K(oe),F=V(oe),re?z?(re+="L"+H.substr(1),ie=F+"L"+ie.substr(1)):(re+="Z"+H,ie=F+"Z"+ie):(re=H,ie=F),s.hasLines(u)){var ce=k.select(this);if(ce.datum(h),Q)p(ce.style("opacity",0).attr("d",H).call(d.lineGroupStyle)).style("opacity",1);else{var me=p(ce);me.attr("d",H),d.singleLineStyle(h,me)}}}}}var ye=L.selectAll(".js-line").data(se);p(ye.exit()).style("opacity",0).remove(),ye.each(fe(!1)),ye.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(d.lineGroupStyle).each(fe(!0)),d.setClipUrl(ye,c.layerClipId,a),se.length?(I?(I.datum(h),W&&X&&(z?(z==="y"?W[1]=X[1]=w.c2p(0,!0):z==="x"&&(W[0]=X[0]=m.c2p(0,!0)),p(I).attr("d","M"+X+"L"+W+"L"+re.substr(1)).call(d.singleFillStyle,a)):p(I).attr("d",re+"Z").call(d.singleFillStyle,a))):U&&(u.fill.substr(0,6)==="tonext"&&re&&N?(u.fill==="tonext"?p(U).attr("d",re+"Z"+N+"Z").call(d.singleFillStyle,a):p(U).attr("d",re+"L"+N.substr(1)+"Z").call(d.singleFillStyle,a),u._polygons=u._polygons.concat(B)):(he(U),u._polygons=null)),u._prevRevpath=ie,u._prevPolygons=ee):(I?he(I):U&&he(U),u._polygons=u._prevRevpath=u._prevPolygons=null),C.datum(h),P.datum(h),function(Q,oe,ce){var me,Ae=ce[0].trace,Ie=s.hasMarkers(Ae),Ce=s.hasText(Ae),Re=Me(Ae),le=Te,de=Te;if(Ie||Ce){var _e=x,Fe=Ae.stackgroup,Ve=Fe&&a._fullLayout._scatterStackOpts[m._id+w._id][Fe].stackgaps==="infer zero";Ae.marker.maxdisplayed||Ae._needsCull?_e=Ve?Oe:ve:Fe&&!Ve&&(_e=xe),Ie&&(le=_e),Ce&&(de=_e)}var He,nt=(me=Q.selectAll("path.point").data(le,Re)).enter().append("path").classed("point",!0);y&&nt.call(d.pointStyle,Ae,a).call(d.translatePoints,m,w).style("opacity",0).transition().style("opacity",1),me.order(),Ie&&(He=d.makePointStyleFns(Ae)),me.each(function(tt){var ot=k.select(this),dt=p(ot);d.translatePoint(tt,dt,m,w)?(d.singlePointStyle(tt,dt,Ae,He,a),c.layerClipId&&d.hideOutsideRangePoint(tt,dt,m,w,Ae.xcalendar,Ae.ycalendar),Ae.customdata&&ot.classed("plotly-customdata",tt.data!==null&&tt.data!==void 0)):dt.remove()}),y?me.exit().transition().style("opacity",0).remove():me.exit().remove(),(me=oe.selectAll("g").data(de,Re)).enter().append("g").classed("textpoint",!0).append("text"),me.order(),me.each(function(tt){var ot=k.select(this),dt=p(ot.select("text"));d.translatePoint(tt,dt,m,w)?c.layerClipId&&d.hideOutsideRangePoint(tt,ot,m,w,Ae.xcalendar,Ae.ycalendar):ot.remove()}),me.selectAll("text").call(d.textPointStyle,Ae,a).each(function(tt){var ot=m.c2p(tt.x),dt=w.c2p(tt.y);k.select(this).selectAll("tspan.line").each(function(){p(k.select(this)).attr({x:ot,y:dt})})}),me.exit().remove()}(C,P,h);var ge=u.cliponaxis===!1?null:c.layerClipId;d.setClipUrl(C,ge,a),d.setClipUrl(P,ge,a)}function he(Q){p(Q).attr("d","M0,0Z")}function ve(Q){return Q.filter(function(oe){return!oe.gap&&oe.vis})}function Oe(Q){return Q.filter(function(oe){return oe.vis})}function xe(Q){return Q.filter(function(oe){return!oe.gap})}function ke(Q){return Q.id}function Me(Q){if(Q.ids)return ke}function Te(){return!1}}$.exports=function(a,i,c,h,f,b){var v,g,y=!f,p=!!f&&f.duration>0,m=o(a,i,c);(v=h.selectAll("g.trace").data(m,function(w){return w[0].trace.uid})).enter().append("g").attr("class",function(w){return"trace scatter trace"+w[0].trace.uid}).style("stroke-miterlimit",2),v.order(),function(w,u,S){u.each(function(_){var E=T(k.select(this),"g","fills");d.setClipUrl(E,S.layerClipId,w);var L=_[0].trace,C=[];L._ownfill&&C.push("_ownFill"),L._nexttrace&&C.push("_nextFill");var P=E.selectAll("g").data(C,x);P.enter().append("g"),P.exit().each(function(I){L[I]=null}).remove(),P.order().each(function(I){L[I]=T(k.select(this),"path","js-fill")})})}(a,v,i),p?(b&&(g=b()),k.transition().duration(f.duration).ease(f.easing).each("end",function(){g&&g()}).each("interrupt",function(){g&&g()}).each(function(){h.selectAll("g.trace").each(function(w,u){n(a,u,i,w,m,this,f)})})):v.each(function(w,u){n(a,u,i,w,m,this,f)}),y&&v.exit().remove(),h.selectAll("path:not([d])").remove()}},98002:function($,R,e){var k=e(34098);$.exports=function(A,l){var T,x,d,s,t=A.cd,o=A.xaxis,r=A.yaxis,n=[],a=t[0].trace;if(!k.hasMarkers(a)&&!k.hasText(a))return[];if(l===!1)for(T=0;T<t.length;T++)t[T].selected=0;else for(T=0;T<t.length;T++)x=t[T],d=o.c2p(x.x),s=r.c2p(x.y),x.i!==null&&l.contains([d,s],!1,T,A)?(n.push({pointNumber:x.i,x:o.c2d(x.x),y:r.c2d(x.y)}),x.selected=1):x.selected=0;return n}},565:function($){var R=["orientation","groupnorm","stackgaps"];$.exports=function(e,k,A,l){var T=A._scatterStackOpts,x=l("stackgroup");if(x){var d=k.xaxis+k.yaxis,s=T[d];s||(s=T[d]={});var t=s[x],o=!1;t?t.traces.push(k):(t=s[x]={traceIndices:[],traces:[k]},o=!0);for(var r={orientation:k.x&&!k.y?"h":"v"},n=0;n<R.length;n++){var a=R[n],i=a+"Found";if(!t[i]){var c=e[a]!==void 0,h=a==="orientation";if((c||o)&&(t[a]=l(a,r[a]),h&&(t.fillDflt=t[a]==="h"?"tonextx":"tonexty"),c&&(t[i]=!0,!o&&(delete t.traces[0][a],h))))for(var f=0;f<t.traces.length-1;f++){var b=t.traces[f];b._input.fill!==b.fill&&(b.fill=t.fillDflt)}}}return t}}},16296:function($,R,e){var k=e(39898),A=e(91424),l=e(73972);function T(d,s,t){A.pointStyle(d.selectAll("path.point"),s,t)}function x(d,s,t){A.textPointStyle(d.selectAll("text"),s,t)}$.exports={style:function(d){var s=k.select(d).selectAll("g.trace.scatter");s.style("opacity",function(t){return t[0].trace.opacity}),s.selectAll("g.points").each(function(t){T(k.select(this),t.trace||t[0].trace,d)}),s.selectAll("g.text").each(function(t){x(k.select(this),t.trace||t[0].trace,d)}),s.selectAll("g.trace path.js-line").call(A.lineGroupStyle),s.selectAll("g.trace path.js-fill").call(A.fillGroupStyle,d),l.getComponentMethod("errorbars","style")(s)},stylePoints:T,styleText:x,styleOnSelect:function(d,s,t){var o=s[0].trace;o.selectedpoints?(A.selectedPointStyle(t.selectAll("path.point"),o),A.selectedTextStyle(t.selectAll("text"),o)):(T(t,o,d),x(t,o,d))}}},34098:function($,R,e){var k=e(71828);$.exports={hasLines:function(A){return A.visible&&A.mode&&A.mode.indexOf("lines")!==-1},hasMarkers:function(A){return A.visible&&(A.mode&&A.mode.indexOf("markers")!==-1||A.type==="splom")},hasText:function(A){return A.visible&&A.mode&&A.mode.indexOf("text")!==-1},isBubble:function(A){return k.isPlainObject(A.marker)&&k.isArrayOrTypedArray(A.marker.size)}}},82410:function($,R,e){var k=e(71828);$.exports=function(A,l,T,x,d){d=d||{},x("textposition"),k.coerceFont(x,"textfont",T.font),d.noSelect||(x("selected.textfont.color"),x("unselected.textfont.color"))}},67513:function($,R,e){var k=e(71828),A=e(73972);$.exports=function(l,T,x,d){var s,t=d("x"),o=d("y");if(A.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x","y"],x),t){var r=k.minRowLength(t);o?s=Math.min(r,k.minRowLength(o)):(s=r,d("y0"),d("dy"))}else{if(!o)return 0;s=k.minRowLength(o),d("x0"),d("dx")}return T._length=s,s}},44542:function($,R,e){var k=e(82196),A=e(50693),l=e(12663).axisHoverFormat,T=e(5386).f,x=e(5386).s,d=e(9012),s=e(29659),t=e(87381),o=e(1426).extendFlat,r=e(30962).overrideAll,n=e(78607),a=k.line,i=k.marker,c=i.line,h=o({width:a.width,dash:{valType:"enumerated",values:n(s),dflt:"solid"}},A("line")),f=$.exports=r({x:k.x,y:k.y,z:{valType:"data_array"},text:o({},k.text,{}),texttemplate:x({},{}),hovertext:o({},k.hovertext,{}),hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),mode:o({},k.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:k.connectgaps,line:h,marker:o({symbol:{valType:"enumerated",values:n(t),dflt:"circle",arrayOk:!0},size:o({},i.size,{dflt:8}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:o({},i.opacity,{arrayOk:!1}),colorbar:i.colorbar,line:o({width:o({},c.width,{arrayOk:!1})},A("marker.line"))},A("marker")),textposition:o({},k.textposition,{dflt:"top center"}),textfont:{color:k.textfont.color,size:k.textfont.size,family:o({},k.textfont.family,{arrayOk:!1})},opacity:d.opacity,hoverinfo:o({},d.hoverinfo)},"calc","nested");f.x.editType=f.y.editType=f.z.editType="calc+clearAxisTypes"},36563:function($,R,e){var k=e(75225),A=e(36922);$.exports=function(l,T){var x=[{x:!1,y:!1,trace:T,t:{}}];return k(x,T),A(l,T),x}},67336:function($,R,e){var k=e(73972);function A(l,T,x,d){if(!T||!T.visible)return null;for(var s=k.getComponentMethod("errorbars","makeComputeError")(T),t=new Array(l.length),o=0;o<l.length;o++){var r=s(+l[o],o);if(d.type==="log"){var n=d.c2l(l[o]),a=l[o]-r[0],i=l[o]+r[1];if(t[o]=[(d.c2l(a,!0)-n)*x,(d.c2l(i,!0)-n)*x],a>0){var c=d.c2l(a);d._lowerLogErrorBound||(d._lowerLogErrorBound=c),d._lowerErrorBound=Math.min(d._lowerLogErrorBound,c)}}else t[o]=[-r[0]*x,r[1]*x]}return t}$.exports=function(l,T,x){var d=[A(l.x,l.error_x,T[0],x.xaxis),A(l.y,l.error_y,T[1],x.yaxis),A(l.z,l.error_z,T[2],x.zaxis)],s=function(i){for(var c=0;c<i.length;c++)if(i[c])return i[c].length;return 0}(d);if(s===0)return null;for(var t=new Array(s),o=0;o<s;o++){for(var r=[[0,0,0],[0,0,0]],n=0;n<3;n++)if(d[n])for(var a=0;a<2;a++)r[a][n]=d[n][o][a];t[o]=r}return t}},58925:function($,R,e){var k=e(9330).gl_line3d,A=e(9330).gl_scatter3d,l=e(9330).gl_error3d,T=e(9330).gl_mesh3d,x=e(9330).delaunay_triangulate,d=e(71828),s=e(78614),t=e(81697).formatColor,o=e(39984),r=e(29659),n=e(87381),a=e(89298),i=e(23469).appendArrayPointValue,c=e(67336);function h(u,S){this.scene=u,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var f=h.prototype;function b(u){return u==null?0:u.indexOf("left")>-1?-1:u.indexOf("right")>-1?1:0}function v(u){return u==null?0:u.indexOf("top")>-1?-1:u.indexOf("bottom")>-1?1:0}function g(u,S){return S(4*u)}function y(u){return n[u]}function p(u,S,_,E,L){var C=null;if(d.isArrayOrTypedArray(u)){C=[];for(var P=0;P<S;P++)u[P]===void 0?C[P]=E:C[P]=_(u[P],L)}else C=_(u,d.identity);return C}function m(u){if(d.isArrayOrTypedArray(u)){var S=u[0];return d.isArrayOrTypedArray(S)&&(u=S),"rgb("+u.slice(0,3).map(function(_){return Math.round(255*_)})+")"}return null}function w(u){return d.isArrayOrTypedArray(u)?u.length===4&&typeof u[0]=="number"?m(u):u.map(m):null}f.handlePick=function(u){if(u.object&&(u.object===this.linePlot||u.object===this.delaunayMesh||u.object===this.textMarkers||u.object===this.scatterPlot)){var S=u.index=u.data.index;return u.object.highlight&&u.object.highlight(null),this.scatterPlot&&(u.object=this.scatterPlot,this.scatterPlot.highlight(u.data)),u.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[S]||this.textLabels[S]===0)&&(u.textLabel=this.textLabels[S]):u.textLabel=this.textLabels),u.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},f.update=function(u){var S,_,E,L,C=this.scene.glplot.gl,P=r.solid;this.data=u;var I=function(H,F){var N,B,j,K,G,V,W=[],J=H.fullSceneLayout,X=H.dataScale,ee=J.xaxis,re=J.yaxis,ie=J.zaxis,se=F.marker,fe=F.line,ye=F.x||[],ge=F.y||[],he=F.z||[],ve=ye.length,Oe=F.xcalendar,xe=F.ycalendar,ke=F.zcalendar;for(G=0;G<ve;G++)N=ee.d2l(ye[G],0,Oe)*X[0],B=re.d2l(ge[G],0,xe)*X[1],j=ie.d2l(he[G],0,ke)*X[2],W[G]=[N,B,j];if(Array.isArray(F.text))V=F.text;else if(F.text!==void 0)for(V=new Array(ve),G=0;G<ve;G++)V[G]=F.text;function Me(Ve,He){var nt=J[Ve];return a.tickText(nt,nt.d2l(He),!0).text}var Te=F.texttemplate;if(Te){var Q=H.fullLayout._d3locale,oe=Array.isArray(Te),ce=oe?Math.min(Te.length,ve):ve,me=oe?function(Ve){return Te[Ve]}:function(){return Te};for(V=new Array(ce),G=0;G<ce;G++){var Ae={x:ye[G],y:ge[G],z:he[G]},Ie={xLabel:Me("xaxis",ye[G]),yLabel:Me("yaxis",ge[G]),zLabel:Me("zaxis",he[G])},Ce={};i(Ce,F,G);var Re=F._meta||{};V[G]=d.texttemplateString(me(G),Ie,Q,Ce,Ae,Re)}}if(K={position:W,mode:F.mode,text:V},"line"in F&&(K.lineColor=t(fe,1,ve),K.lineWidth=fe.width,K.lineDashes=fe.dash),"marker"in F){var le=o(F);K.scatterColor=t(se,1,ve),K.scatterSize=p(se.size,ve,g,20,le),K.scatterMarker=p(se.symbol,ve,y,""),K.scatterLineWidth=se.line.width,K.scatterLineColor=t(se.line,1,ve),K.scatterAngle=0}"textposition"in F&&(K.textOffset=function(Ve){var He=[0,0];if(Array.isArray(Ve))for(var nt=0;nt<Ve.length;nt++)He[nt]=[0,0],Ve[nt]&&(He[nt][0]=b(Ve[nt]),He[nt][1]=v(Ve[nt]));else He[0]=b(Ve),He[1]=v(Ve);return He}(F.textposition),K.textColor=t(F.textfont,1,ve),K.textSize=p(F.textfont.size,ve,d.identity,12),K.textFont=F.textfont.family,K.textAngle=0);var de=["x","y","z"];for(K.project=[!1,!1,!1],K.projectScale=[1,1,1],K.projectOpacity=[1,1,1],G=0;G<3;++G){var _e=F.projection[de[G]];(K.project[G]=_e.show)&&(K.projectOpacity[G]=_e.opacity,K.projectScale[G]=_e.scale)}K.errorBounds=c(F,X,J);var Fe=function(Ve){for(var He=[0,0,0],nt=[[0,0,0],[0,0,0],[0,0,0]],tt=[1,1,1],ot=0;ot<3;ot++){var dt=Ve[ot];dt&&dt.copy_zstyle!==!1&&Ve[2].visible!==!1&&(dt=Ve[2]),dt&&dt.visible&&(He[ot]=dt.width/2,nt[ot]=s(dt.color),tt[ot]=dt.thickness)}return{capSize:He,color:nt,lineWidth:tt}}([F.error_x,F.error_y,F.error_z]);return K.errorColor=Fe.color,K.errorLineWidth=Fe.lineWidth,K.errorCapSize=Fe.capSize,K.delaunayAxis=F.surfaceaxis,K.delaunayColor=s(F.surfacecolor),K}(this.scene,u);"mode"in I&&(this.mode=I.mode),"lineDashes"in I&&I.lineDashes in r&&(P=r[I.lineDashes]),this.color=w(I.scatterColor)||w(I.lineColor),this.dataPoints=I.position,S={gl:this.scene.glplot.gl,position:I.position,color:I.lineColor,lineWidth:I.lineWidth||1,dashes:P[0],dashScale:P[1],opacity:u.opacity,connectGaps:u.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(S):(this.linePlot=k(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var U=u.opacity;if(u.marker&&u.marker.opacity&&(U*=u.marker.opacity),_={gl:this.scene.glplot.gl,position:I.position,color:I.scatterColor,size:I.scatterSize,glyph:I.scatterMarker,opacity:U,orthographic:!0,lineWidth:I.scatterLineWidth,lineColor:I.scatterLineColor,project:I.project,projectScale:I.projectScale,projectOpacity:I.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(_):(this.scatterPlot=A(_),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),L={gl:this.scene.glplot.gl,position:I.position,glyph:I.text,color:I.textColor,size:I.textSize,angle:I.textAngle,alignment:I.textOffset,font:I.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:u.opacity},this.textLabels=u.hovertext||u.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(L):(this.textMarkers=A(L),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:I.position,color:I.errorColor,error:I.errorBounds,lineWidth:I.errorLineWidth,capSize:I.errorCapSize,opacity:u.opacity},this.errorBars?I.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):I.errorBounds&&(this.errorBars=l(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),I.delaunayAxis>=0){var z=function(H,F,N){var B,j=(N+1)%3,K=(N+2)%3,G=[],V=[];for(B=0;B<H.length;++B){var W=H[B];!isNaN(W[j])&&isFinite(W[j])&&!isNaN(W[K])&&isFinite(W[K])&&(G.push([W[j],W[K]]),V.push(B))}var J=x(G);for(B=0;B<J.length;++B)for(var X=J[B],ee=0;ee<X.length;++ee)X[ee]=V[X[ee]];return{positions:H,cells:J,meshColor:F}}(I.position,I.delaunayColor,I.delaunayAxis);z.opacity=u.opacity,this.delaunayMesh?this.delaunayMesh.update(z):(z.gl=C,this.delaunayMesh=T(z),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},f.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},$.exports=function(u,S){var _=new h(u,S.uid);return _.update(S),_}},21428:function($,R,e){var k=e(73972),A=e(71828),l=e(34098),T=e(49508),x=e(11058),d=e(82410),s=e(44542);$.exports=function(t,o,r,n){function a(y,p){return A.coerce(t,o,s,y,p)}var i=function(y,p,m,w){var u=0,S=m("x"),_=m("y"),E=m("z");return k.getComponentMethod("calendars","handleTraceDefaults")(y,p,["x","y","z"],w),S&&_&&E&&(u=Math.min(S.length,_.length,E.length),p._length=p._xlength=p._ylength=p._zlength=u),u}(t,o,a,n);if(i){a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),l.hasLines(o)&&(a("connectgaps"),x(t,o,r,n,a)),l.hasMarkers(o)&&T(t,o,r,n,a,{noSelect:!0,noAngle:!0}),l.hasText(o)&&(a("texttemplate"),d(t,o,n,a,{noSelect:!0}));var c=(o.line||{}).color,h=(o.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",c||h);for(var f=["x","y","z"],b=0;b<3;++b){var v="projection."+f[b];a(v+".show")&&(a(v+".opacity"),a(v+".scale"))}var g=k.getComponentMethod("errorbars","supplyDefaults");g(t,o,c||h||r,{axis:"z"}),g(t,o,c||h||r,{axis:"y",inherit:"z"}),g(t,o,c||h||r,{axis:"x",inherit:"z"})}else o.visible=!1}},13551:function($,R,e){$.exports={plot:e(58925),attributes:e(44542),markerSymbols:e(87381),supplyDefaults:e(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(36563),moduleType:"trace",name:"scatter3d",basePlotModule:e(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function($,R,e){var k=e(82196),A=e(9012),l=e(5386).f,T=e(5386).s,x=e(50693),d=e(1426).extendFlat,s=k.marker,t=k.line,o=s.line;$.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:d({},k.mode,{dflt:"markers"}),text:d({},k.text,{}),texttemplate:T({editType:"plot"},{keys:["a","b","text"]}),hovertext:d({},k.hovertext,{}),line:{color:t.color,width:t.width,dash:t.dash,backoff:t.backoff,shape:d({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:k.connectgaps,fill:d({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:k.fillcolor,marker:d({symbol:s.symbol,opacity:s.opacity,maxdisplayed:s.maxdisplayed,angle:s.angle,angleref:s.angleref,standoff:s.standoff,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,line:d({width:o.width,editType:"calc"},x("marker.line")),gradient:s.gradient,editType:"calc"},x("marker")),textfont:k.textfont,textposition:k.textposition,selected:k.selected,unselected:k.unselected,hoverinfo:d({},A.hoverinfo,{flags:["a","b","text","name"]}),hoveron:k.hoveron,hovertemplate:l()}},34618:function($,R,e){var k=e(92770),A=e(36922),l=e(75225),T=e(66279),x=e(47761).calcMarkerSize,d=e(22882);$.exports=function(s,t){var o=t._carpetTrace=d(s,t);if(o&&o.visible&&o.visible!=="legendonly"){var r;t.xaxis=o.xaxis,t.yaxis=o.yaxis;var n,a,i=t._length,c=new Array(i),h=!1;for(r=0;r<i;r++)if(n=t.a[r],a=t.b[r],k(n)&&k(a)){var f=o.ab2xy(+n,+a,!0),b=o.isVisible(+n,+a);b||(h=!0),c[r]={x:f[0],y:f[1],a:n,b:a,vis:b}}else c[r]={x:!1,y:!1};return t._needsCull=h,c[0].carpet=o,c[0].trace=t,x(t,i),A(s,t),l(c,t),T(c,t),c}}},98965:function($,R,e){var k=e(71828),A=e(47581),l=e(34098),T=e(49508),x=e(11058),d=e(94039),s=e(82410),t=e(28908),o=e(97001);$.exports=function(r,n,a,i){function c(g,y){return k.coerce(r,n,o,g,y)}c("carpet"),n.xaxis="x",n.yaxis="y";var h=c("a"),f=c("b"),b=Math.min(h.length,f.length);if(b){n._length=b,c("text"),c("texttemplate"),c("hovertext"),c("mode",b<A.PTS_LINESONLY?"lines+markers":"lines"),l.hasLines(n)&&(x(r,n,a,i,c,{backoff:!0}),d(r,n,c),c("connectgaps")),l.hasMarkers(n)&&T(r,n,a,i,c,{gradient:!0}),l.hasText(n)&&s(r,n,i,c);var v=[];(l.hasMarkers(n)||l.hasText(n))&&(c("marker.maxdisplayed"),v.push("points")),c("fill"),n.fill!=="none"&&(t(r,n,a,c),l.hasLines(n)||d(r,n,c)),n.fill!=="tonext"&&n.fill!=="toself"||v.push("fills"),c("hoveron",v.join("+")||"points")!=="fills"&&c("hovertemplate"),k.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},16165:function($){$.exports=function(R,e,k,A,l){var T=A[l];return R.a=T.a,R.b=T.b,R.y=T.y,R}},48953:function($){$.exports=function(R,e){var k={},A=e._carpet,l=A.ab2ij([R.a,R.b]),T=Math.floor(l[0]),x=l[0]-T,d=Math.floor(l[1]),s=l[1]-d,t=A.evalxy([],T,d,x,s);return k.yLabel=t[1].toFixed(3),k}},22931:function($,R,e){var k=e(33720),A=e(71828).fillText;$.exports=function(l,T,x,d){var s=k(l,T,x,d);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0){var o=1-t.y0/l.ya._length,r=l.xa._length,n=r*o/2,a=r-n;return t.x0=Math.max(Math.min(t.x0,a),n),t.x1=Math.max(Math.min(t.x1,a),n),s}var i=t.cd[t.index];t.a=i.a,t.b=i.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var c=t.trace,h=c._carpet,f=c._module.formatLabels(i,c);t.yLabel=f.yLabel,delete t.text;var b=[];if(!c.hovertemplate){var v=(i.hi||c.hoverinfo).split("+");v.indexOf("all")!==-1&&(v=["a","b","text"]),v.indexOf("a")!==-1&&g(h.aaxis,i.a),v.indexOf("b")!==-1&&g(h.baxis,i.b),b.push("y: "+t.yLabel),v.indexOf("text")!==-1&&A(i,c,b),t.extraText=b.join("<br>")}return s}function g(y,p){var m;m=y.labelprefix&&y.labelprefix.length>0?y.labelprefix.replace(/ = $/,""):y._hovertitle,b.push(m+": "+p.toFixed(3)+y.labelsuffix)}}},46858:function($,R,e){$.exports={attributes:e(97001),supplyDefaults:e(98965),colorbar:e(4898),formatLabels:e(48953),calc:e(34618),plot:e(1913),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(22931),selectPoints:e(98002),eventData:e(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:e(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function($,R,e){var k=e(32663),A=e(89298),l=e(91424);$.exports=function(T,x,d,s){var t,o,r,n=d[0][0].carpet,a=A.getFromId(T,n.xaxis||"x"),i=A.getFromId(T,n.yaxis||"y"),c={xaxis:a,yaxis:i,plot:x.plot};for(t=0;t<d.length;t++)(o=d[t][0].trace)._xA=a,o._yA=i;for(k(T,c,d,s),t=0;t<d.length;t++)o=d[t][0].trace,r=s.selectAll("g.trace"+o.uid+" .js-line"),l.setClipUrl(r,d[t][0].carpet._clipPathId,T)}},19316:function($,R,e){var k=e(5386).f,A=e(5386).s,l=e(82196),T=e(9012),x=e(50693),d=e(79952).P,s=e(1426).extendFlat,t=e(30962).overrideAll,o=l.marker,r=l.line,n=o.line;$.exports=t({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:s({},l.mode,{dflt:"markers"}),text:s({},l.text,{}),texttemplate:A({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:s({},l.hovertext,{}),textfont:l.textfont,textposition:l.textposition,line:{color:r.color,width:r.width,dash:d},connectgaps:l.connectgaps,marker:s({symbol:o.symbol,opacity:o.opacity,angle:o.angle,angleref:s({},o.angleref,{values:["previous","up","north"]}),standoff:o.standoff,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,colorbar:o.colorbar,line:s({width:n.width},x("marker.line")),gradient:o.gradient},x("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:l.fillcolor,selected:l.selected,unselected:l.unselected,hoverinfo:s({},T.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:k()},"calc","nested")},84622:function($,R,e){var k=e(92770),A=e(50606).BADNUM,l=e(36922),T=e(75225),x=e(66279),d=e(71828)._;function s(t){return t&&typeof t=="string"}$.exports=function(t,o){var r,n=Array.isArray(o.locations),a=n?o.locations.length:o._length,i=new Array(a);r=o.geojson?function(g){return s(g)||k(g)}:s;for(var c=0;c<a;c++){var h=i[c]={};if(n){var f=o.locations[c];h.loc=r(f)?f:null}else{var b=o.lon[c],v=o.lat[c];k(b)&&k(v)?h.lonlat=[+b,+v]:h.lonlat=[A,A]}}return T(i,o),l(t,o),x(i,o),a&&(i[0].t={labels:{lat:d(t,"lat:")+" ",lon:d(t,"lon:")+" "}}),i}},10659:function($,R,e){var k=e(71828),A=e(34098),l=e(49508),T=e(11058),x=e(82410),d=e(28908),s=e(19316);$.exports=function(t,o,r,n){function a(g,y){return k.coerce(t,o,s,g,y)}var i,c=a("locations");if(c&&c.length){var h,f=a("geojson");(typeof f=="string"&&f!==""||k.isPlainObject(f))&&(h="geojson-id"),a("locationmode",h)==="geojson-id"&&a("featureidkey"),i=c.length}else{var b=a("lon")||[],v=a("lat")||[];i=Math.min(b.length,v.length)}i?(o._length=i,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),A.hasLines(o)&&(T(t,o,r,n,a),a("connectgaps")),A.hasMarkers(o)&&l(t,o,r,n,a,{gradient:!0}),A.hasText(o)&&(a("texttemplate"),x(t,o,n,a)),a("fill"),o.fill!=="none"&&d(t,o,r,a),k.coerceSelectionMarkerOpacity(o,a)):o.visible=!1}},84084:function($){$.exports=function(R,e,k,A,l){R.lon=e.lon,R.lat=e.lat,R.location=e.loc?e.loc:null;var T=A[l];return T.fIn&&T.fIn.properties&&(R.properties=T.fIn.properties),R}},82719:function($,R,e){var k=e(89298);$.exports=function(A,l,T){var x={},d=T[l.geo]._subplot.mockAxis,s=A.lonlat;return x.lonLabel=k.tickText(d,d.c2l(s[0]),!0).text,x.latLabel=k.tickText(d,d.c2l(s[1]),!0).text,x}},14977:function($,R,e){var k=e(30211),A=e(50606).BADNUM,l=e(34603),T=e(71828).fillText,x=e(19316);$.exports=function(d,s,t){var o=d.cd,r=o[0].trace,n=d.xa,a=d.ya,i=d.subplot,c=i.projection.isLonLatOverEdges,h=i.project;if(k.getClosest(o,function(m){var w=m.lonlat;if(w[0]===A||c(w))return 1/0;var u=h(w),S=h([s,t]),_=Math.abs(u[0]-S[0]),E=Math.abs(u[1]-S[1]),L=Math.max(3,m.mrc||0);return Math.max(Math.sqrt(_*_+E*E)-L,1-3/L)},d),d.index!==!1){var f=o[d.index],b=f.lonlat,v=[n.c2p(b),a.c2p(b)],g=f.mrc||1;d.x0=v[0]-g,d.x1=v[0]+g,d.y0=v[1]-g,d.y1=v[1]+g,d.loc=f.loc,d.lon=b[0],d.lat=b[1];var y={};y[r.geo]={_subplot:i};var p=r._module.formatLabels(f,r,y);return d.lonLabel=p.lonLabel,d.latLabel=p.latLabel,d.color=l(r,f),d.extraText=function(m,w,u,S){if(!m.hovertemplate){var _=w.hi||m.hoverinfo,E=_==="all"?x.hoverinfo.flags:_.split("+"),L=E.indexOf("location")!==-1&&Array.isArray(m.locations),C=E.indexOf("lon")!==-1,P=E.indexOf("lat")!==-1,I=E.indexOf("text")!==-1,U=[];return L?U.push(w.loc):C&&P?U.push("("+z(u.latLabel)+", "+z(u.lonLabel)+")"):C?U.push(S.lon+z(u.lonLabel)):P&&U.push(S.lat+z(u.latLabel)),I&&T(w,m,U),U.join("<br>")}function z(H){return H+""}}(r,f,d,o[0].t.labels),d.hovertemplate=r.hovertemplate,[d]}}},17988:function($,R,e){$.exports={attributes:e(19316),supplyDefaults:e(10659),colorbar:e(4898),formatLabels:e(82719),calc:e(84622),calcGeoJSON:e(89171).calcGeoJSON,plot:e(89171).plot,style:e(33095),styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(14977),eventData:e(84084),selectPoints:e(20548),moduleType:"trace",name:"scattergeo",basePlotModule:e(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function($,R,e){var k=e(39898),A=e(71828),l=e(90973).getTopojsonFeatures,T=e(18214),x=e(41327),d=e(71739).findExtremes,s=e(50606).BADNUM,t=e(47761).calcMarkerSize,o=e(34098),r=e(33095);$.exports={calcGeoJSON:function(n,a){var i,c,h=n[0].trace,f=a[h.geo],b=f._subplot,v=h._length;if(Array.isArray(h.locations)){var g=h.locationmode,y=g==="geojson-id"?x.extractTraceFeature(n):l(h,b.topojson);for(i=0;i<v;i++){c=n[i];var p=g==="geojson-id"?c.fOut:x.locationToFeature(g,c.loc,y);c.lonlat=p?p.properties.ct:[s,s]}}var m,w,u={padded:!0};if(f.fitbounds==="geojson"&&h.locationmode==="geojson-id"){var S=x.computeBbox(x.getTraceGeojson(h));m=[S[0],S[2]],w=[S[1],S[3]]}else{for(m=new Array(v),w=new Array(v),i=0;i<v;i++)c=n[i],m[i]=c.lonlat[0],w[i]=c.lonlat[1];u.ppad=t(h,v)}h._extremes.lon=d(f.lonaxis._ax,m,u),h._extremes.lat=d(f.lataxis._ax,w,u)},plot:function(n,a,i){var c=a.layers.frontplot.select(".scatterlayer"),h=A.makeTraceGroups(c,i,"trace scattergeo");function f(b,v){b.lonlat[0]===s&&k.select(v).remove()}h.selectAll("*").remove(),h.each(function(b){var v=k.select(this),g=b[0].trace;if(o.hasLines(g)||g.fill!=="none"){var y=T.calcTraceToLineCoords(b),p=g.fill!=="none"?T.makePolygon(y):T.makeLine(y);v.selectAll("path.js-line").data([{geojson:p,trace:g}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}o.hasMarkers(g)&&v.selectAll("path.point").data(A.identity).enter().append("path").classed("point",!0).each(function(m){f(m,this)}),o.hasText(g)&&v.selectAll("g").data(A.identity).enter().append("g").append("text").each(function(m){f(m,this)}),r(n,b)})}}},20548:function($,R,e){var k=e(34098),A=e(50606).BADNUM;$.exports=function(l,T){var x,d,s,t,o,r=l.cd,n=l.xaxis,a=l.yaxis,i=[],c=r[0].trace;if(!k.hasMarkers(c)&&!k.hasText(c))return[];if(T===!1)for(o=0;o<r.length;o++)r[o].selected=0;else for(o=0;o<r.length;o++)(d=(x=r[o]).lonlat)[0]!==A&&(s=n.c2p(d),t=a.c2p(d),T.contains([s,t],null,o,l)?(i.push({pointNumber:o,lon:d[0],lat:d[1]}),x.selected=1):x.selected=0);return i}},33095:function($,R,e){var k=e(39898),A=e(91424),l=e(7901),T=e(16296),x=T.stylePoints,d=T.styleText;$.exports=function(s,t){t&&function(o,r){var n=r[0].trace,a=r[0].node3;a.style("opacity",r[0].trace.opacity),x(a,n,o),d(a,n,o),a.selectAll("path.js-line").style("fill","none").each(function(i){var c=k.select(this),h=i.trace,f=h.line||{};c.call(l.stroke,f.color).call(A.dashLine,f.dash||"",f.width||0),h.fill!=="none"&&c.call(l.fill,h.fillcolor)})}(s,t)}},42341:function($,R,e){var k=e(9012),A=e(82196),l=e(12663).axisHoverFormat,T=e(50693),x=e(78607),d=e(1426).extendFlat,s=e(30962).overrideAll,t=e(78232).DASHES,o=A.line,r=A.marker,n=r.line,a=$.exports=s({x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),text:A.text,hovertext:A.hovertext,textposition:A.textposition,textfont:A.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:o.color,width:o.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:x(t),dflt:"solid"}},marker:d({},T("marker"),{symbol:r.symbol,angle:r.angle,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:d({},T("marker.line"),{width:n.width})}),connectgaps:A.connectgaps,fill:d({},A.fill,{dflt:"none"}),fillcolor:A.fillcolor,selected:{marker:A.selected.marker,textfont:A.selected.textfont},unselected:{marker:A.unselected.marker,textfont:A.unselected.textfont},opacity:k.opacity},"calc","nested");a.x.editType=a.y.editType=a.x0.editType=a.y0.editType="calc+clearAxisTypes",a.hovertemplate=A.hovertemplate,a.texttemplate=A.texttemplate},72156:function($,R,e){var k=e(20794);$.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(42341),supplyDefaults:e(47148),crossTraceDefaults:e(34936),colorbar:e(4898),formatLabels:e(68101),calc:e(45032),hoverPoints:k.hoverPoints,selectPoints:e(58147),meta:{}}},45032:function($,R,e){var k=e(88294),A=e(71828),l=e(41675),T=e(71739).findExtremes,x=e(42973),d=e(47761),s=d.calcMarkerSize,t=d.calcAxisExpansion,o=d.setFirstScatter,r=e(36922),n=e(19635),a=e(38967),i=e(50606).BADNUM,c=e(78232).TOO_MANY_POINTS;function h(f,b,v){var g=f._extremes[b._id],y=T(b,v._bnds,{padded:!0});g.min=g.min.concat(y.min),g.max=g.max.concat(y.max)}$.exports=function(f,b){var v,g=f._fullLayout,y=b._xA=l.getFromId(f,b.xaxis,"x"),p=b._yA=l.getFromId(f,b.yaxis,"y"),m=g._plots[b.xaxis+b.yaxis],w=b._length,u=w>=c,S=2*w,_={},E=y.makeCalcdata(b,"x"),L=p.makeCalcdata(b,"y"),C=x(b,y,"x",E),P=x(b,p,"y",L),I=C.vals,U=P.vals;b._x=I,b._y=U,b.xperiodalignment&&(b._origX=E,b._xStarts=C.starts,b._xEnds=C.ends),b.yperiodalignment&&(b._origY=L,b._yStarts=P.starts,b._yEnds=P.ends);var z=new Array(S),H=new Array(w);for(v=0;v<w;v++)z[2*v]=I[v]===i?NaN:I[v],z[2*v+1]=U[v]===i?NaN:U[v],H[v]=v;if(y.type==="log")for(v=0;v<S;v+=2)z[v]=y.c2l(z[v]);if(p.type==="log")for(v=1;v<S;v+=2)z[v]=p.c2l(z[v]);u&&y.type!=="log"&&p.type!=="log"?_.tree=k(z):_.ids=H,r(f,b);var F,N=function(j,K,G,V,W,J){var X=n.style(j,G);if(X.marker&&(X.marker.positions=V),X.line&&V.length>1&&A.extendFlat(X.line,n.linePositions(j,G,V)),X.errorX||X.errorY){var ee=n.errorBarPositions(j,G,V,W,J);X.errorX&&A.extendFlat(X.errorX,ee.x),X.errorY&&A.extendFlat(X.errorY,ee.y)}return X.text&&(A.extendFlat(X.text,{positions:V},n.textPosition(j,G,X.text,X.marker)),A.extendFlat(X.textSel,{positions:V},n.textPosition(j,G,X.text,X.markerSel)),A.extendFlat(X.textUnsel,{positions:V},n.textPosition(j,G,X.text,X.markerUnsel))),X}(f,0,b,z,I,U),B=a(f,m);return o(g,b),u?N.marker&&(F=N.marker.sizeAvg||Math.max(N.marker.size,3)):F=s(b,w),t(f,b,y,p,I,U,F),N.errorX&&h(b,y,N.errorX),N.errorY&&h(b,p,N.errorY),N.fill&&!B.fill2d&&(B.fill2d=!0),N.marker&&!B.scatter2d&&(B.scatter2d=!0),N.line&&!B.line2d&&(B.line2d=!0),!N.errorX&&!N.errorY||B.error2d||(B.error2d=!0),N.text&&!B.glText&&(B.glText=!0),N.marker&&(N.marker.snap=w),B.lineOptions.push(N.line),B.errorXOptions.push(N.errorX),B.errorYOptions.push(N.errorY),B.fillOptions.push(N.fill),B.markerOptions.push(N.marker),B.markerSelectedOptions.push(N.markerSel),B.markerUnselectedOptions.push(N.markerUnsel),B.textOptions.push(N.text),B.textSelectedOptions.push(N.textSel),B.textUnselectedOptions.push(N.textUnsel),B.selectBatch.push([]),B.unselectBatch.push([]),_._scene=B,_.index=B.count,_.x=I,_.y=U,_.positions=z,B.count++,[{x:!1,y:!1,t:_,trace:b}]}},78232:function($){$.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function($,R,e){var k=e(92770),A=e(82019),l=e(25075),T=e(73972),x=e(71828),d=e(91424),s=e(41675),t=e(81697).formatColor,o=e(34098),r=e(39984),n=e(68645),a=e(78232),i=e(37822).DESELECTDIM,c={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},h=e(23469).appendArrayPointValue;function f(E,L){var C,P=E._fullLayout,I=L._length,U=L.textfont,z=L.textposition,H=Array.isArray(z)?z:[z],F=U.color,N=U.size,B=U.family,j={},K=E._context.plotGlPixelRatio,G=L.texttemplate;if(G){j.text=[];var V=P._d3locale,W=Array.isArray(G),J=W?Math.min(G.length,I):I,X=W?function(ge){return G[ge]}:function(){return G};for(C=0;C<J;C++){var ee={i:C},re=L._module.formatLabels(ee,L,P),ie={};h(ie,L,C);var se=L._meta||{};j.text.push(x.texttemplateString(X(C),re,V,ie,ee,se))}}else Array.isArray(L.text)&&L.text.length<I?j.text=L.text.slice():j.text=L.text;if(Array.isArray(j.text))for(C=j.text.length;C<I;C++)j.text[C]="";for(j.opacity=L.opacity,j.font={},j.align=[],j.baseline=[],C=0;C<H.length;C++){var fe=H[C].split(/\s+/);switch(fe[1]){case"left":j.align.push("right");break;case"right":j.align.push("left");break;default:j.align.push(fe[1])}switch(fe[0]){case"top":j.baseline.push("bottom");break;case"bottom":j.baseline.push("top");break;default:j.baseline.push(fe[0])}}if(Array.isArray(F))for(j.color=new Array(I),C=0;C<I;C++)j.color[C]=F[C];else j.color=F;if(x.isArrayOrTypedArray(N)||Array.isArray(B))for(j.font=new Array(I),C=0;C<I;C++){var ye=j.font[C]={};ye.size=(x.isTypedArray(N)?N[C]:Array.isArray(N)?k(N[C])?N[C]:0:N)*K,ye.family=Array.isArray(B)?B[C]:B}else j.font={size:N*K,family:B};return j}function b(E,L){var C,P,I=L._length,U=L.marker,z={},H=x.isArrayOrTypedArray(U.symbol),F=x.isArrayOrTypedArray(U.angle),N=x.isArrayOrTypedArray(U.color),B=x.isArrayOrTypedArray(U.line.color),j=x.isArrayOrTypedArray(U.opacity),K=x.isArrayOrTypedArray(U.size),G=x.isArrayOrTypedArray(U.line.width);if(H||(P=n.isOpenSymbol(U.symbol)),H||N||B||j||F){z.symbols=new Array(I),z.angles=new Array(I),z.colors=new Array(I),z.borderColors=new Array(I);var V=U.symbol,W=U.angle,J=t(U,U.opacity,I),X=t(U.line,U.opacity,I);if(!Array.isArray(X[0])){var ee=X;for(X=Array(I),C=0;C<I;C++)X[C]=ee}if(!Array.isArray(J[0])){var re=J;for(J=Array(I),C=0;C<I;C++)J[C]=re}if(!Array.isArray(V)){var ie=V;for(V=Array(I),C=0;C<I;C++)V[C]=ie}if(!Array.isArray(W)){var se=W;for(W=Array(I),C=0;C<I;C++)W[C]=se}for(z.symbols=V,z.angles=W,z.colors=J,z.borderColors=X,C=0;C<I;C++)H&&(P=n.isOpenSymbol(U.symbol[C])),P&&(X[C]=J[C].slice(),J[C]=J[C].slice(),J[C][3]=0);for(z.opacity=L.opacity,z.markers=new Array(I),C=0;C<I;C++)z.markers[C]=_({mx:z.symbols[C],ma:z.angles[C]},L)}else P?(z.color=l(U.color,"uint8"),z.color[3]=0,z.borderColor=l(U.color,"uint8")):(z.color=l(U.color,"uint8"),z.borderColor=l(U.line.color,"uint8")),z.opacity=L.opacity*U.opacity,z.marker=_({mx:U.symbol,ma:U.angle},L);var fe,ye=r(L,1);if(K||G){var ge,he=z.sizes=new Array(I),ve=z.borderSizes=new Array(I),Oe=0;if(K){for(C=0;C<I;C++)he[C]=ye(U.size[C]),Oe+=he[C];ge=Oe/I}else for(fe=ye(U.size),C=0;C<I;C++)he[C]=fe;if(G)for(C=0;C<I;C++)ve[C]=U.line.width[C];else for(fe=U.line.width,C=0;C<I;C++)ve[C]=fe;z.sizeAvg=ge}else z.size=ye(U&&U.size||10),z.borderSizes=ye(U.line.width);return z}function v(E,L,C){var P=L.marker,I={};return C&&(C.marker&&C.marker.symbol?I=b(0,x.extendFlat({},P,C.marker)):C.marker&&(C.marker.size&&(I.size=C.marker.size),C.marker.color&&(I.colors=C.marker.color),C.marker.opacity!==void 0&&(I.opacity=C.marker.opacity))),I}function g(E,L,C){var P={};if(!C)return P;if(C.textfont){var I={opacity:1,text:L.text,texttemplate:L.texttemplate,textposition:L.textposition,textfont:x.extendFlat({},L.textfont)};C.textfont&&x.extendFlat(I.textfont,C.textfont),P=f(E,I)}return P}function y(E,L,C){var P={capSize:2*L.width*C,lineWidth:L.thickness*C,color:L.color};return L.copy_ystyle&&(P=E.error_y),P}var p=a.SYMBOL_SDF_SIZE,m=a.SYMBOL_SIZE,w=a.SYMBOL_STROKE,u={},S=d.symbolFuncs[0](.05*m);function _(E,L){var C,P,I=E.mx;if(I==="circle")return null;var U=d.symbolNumber(I),z=d.symbolFuncs[U%100],H=!!d.symbolNoDot[U%100],F=!!d.symbolNoFill[U%100],N=n.isDotSymbol(I);if(E.ma&&(I+="_"+E.ma),u[I])return u[I];var B=d.getMarkerAngle(E,L);return C=N&&!H?z(1.1*m,B)+S:z(m,B),P=A(C,{w:p,h:p,viewBox:[-m,-m,m,m],stroke:F?w:-w}),u[I]=P,P||null}$.exports={style:function(E,L){var C,P={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},I=E._context.plotGlPixelRatio;if(L.visible!==!0)return P;if(o.hasText(L)&&(P.text=f(E,L),P.textSel=g(E,L,L.selected),P.textUnsel=g(E,L,L.unselected)),o.hasMarkers(L)&&(P.marker=b(0,L),P.markerSel=v(0,L,L.selected),P.markerUnsel=v(0,L,L.unselected),!L.unselected&&x.isArrayOrTypedArray(L.marker.opacity))){var U=L.marker.opacity;for(P.markerUnsel.opacity=new Array(U.length),C=0;C<U.length;C++)P.markerUnsel.opacity[C]=i*U[C]}if(o.hasLines(L)){P.line={overlay:!0,thickness:L.line.width*I,color:L.line.color,opacity:L.opacity};var z=(a.DASHES[L.line.dash]||[1]).slice();for(C=0;C<z.length;++C)z[C]*=L.line.width*I;P.line.dashes=z}return L.error_x&&L.error_x.visible&&(P.errorX=y(L,L.error_x,I)),L.error_y&&L.error_y.visible&&(P.errorY=y(L,L.error_y,I)),L.fill&&L.fill!=="none"&&(P.fill={closed:!0,fill:L.fillcolor,thickness:0}),P},markerStyle:b,markerSelection:v,linePositions:function(E,L,C){var P,I,U=C.length,z=U/2;if(o.hasLines(L)&&z)if(L.line.shape==="hv"){for(P=[],I=0;I<z-1;I++)isNaN(C[2*I])||isNaN(C[2*I+1])?P.push(NaN,NaN,NaN,NaN):(P.push(C[2*I],C[2*I+1]),isNaN(C[2*I+2])||isNaN(C[2*I+3])?P.push(NaN,NaN):P.push(C[2*I+2],C[2*I+1]));P.push(C[U-2],C[U-1])}else if(L.line.shape==="hvh"){for(P=[],I=0;I<z-1;I++)if(isNaN(C[2*I])||isNaN(C[2*I+1])||isNaN(C[2*I+2])||isNaN(C[2*I+3]))isNaN(C[2*I])||isNaN(C[2*I+1])?P.push(NaN,NaN):P.push(C[2*I],C[2*I+1]),P.push(NaN,NaN);else{var H=(C[2*I]+C[2*I+2])/2;P.push(C[2*I],C[2*I+1],H,C[2*I+1],H,C[2*I+3])}P.push(C[U-2],C[U-1])}else if(L.line.shape==="vhv"){for(P=[],I=0;I<z-1;I++)if(isNaN(C[2*I])||isNaN(C[2*I+1])||isNaN(C[2*I+2])||isNaN(C[2*I+3]))isNaN(C[2*I])||isNaN(C[2*I+1])?P.push(NaN,NaN):P.push(C[2*I],C[2*I+1]),P.push(NaN,NaN);else{var F=(C[2*I+1]+C[2*I+3])/2;P.push(C[2*I],C[2*I+1],C[2*I],F,C[2*I+2],F)}P.push(C[U-2],C[U-1])}else if(L.line.shape==="vh"){for(P=[],I=0;I<z-1;I++)isNaN(C[2*I])||isNaN(C[2*I+1])?P.push(NaN,NaN,NaN,NaN):(P.push(C[2*I],C[2*I+1]),isNaN(C[2*I+2])||isNaN(C[2*I+3])?P.push(NaN,NaN):P.push(C[2*I],C[2*I+3]));P.push(C[U-2],C[U-1])}else P=C;var N=!1;for(I=0;I<P.length;I++)if(isNaN(P[I])){N=!0;break}var B=N||P.length>a.TOO_MANY_POINTS||o.hasMarkers(L)?"rect":"round";if(N&&L.connectgaps){var j=P[0],K=P[1];for(I=0;I<P.length;I+=2)isNaN(P[I])||isNaN(P[I+1])?(P[I]=j,P[I+1]=K):(j=P[I],K=P[I+1])}return{join:B,positions:P}},errorBarPositions:function(E,L,C,P,I){var U=T.getComponentMethod("errorbars","makeComputeError"),z=s.getFromId(E,L.xaxis,"x"),H=s.getFromId(E,L.yaxis,"y"),F=C.length/2,N={};function B(j,K){var G=K._id.charAt(0),V=L["error_"+G];if(V&&V.visible&&(K.type==="linear"||K.type==="log")){for(var W=U(V),J={x:0,y:1}[G],X={x:[0,1,2,3],y:[2,3,0,1]}[G],ee=new Float64Array(4*F),re=1/0,ie=-1/0,se=0,fe=0;se<F;se++,fe+=4){var ye=j[se];if(k(ye)){var ge=C[2*se+J],he=W(ye,se),ve=he[0],Oe=he[1];if(k(ve)&&k(Oe)){var xe=ye-ve,ke=ye+Oe;ee[fe+X[0]]=ge-K.c2l(xe),ee[fe+X[1]]=K.c2l(ke)-ge,ee[fe+X[2]]=0,ee[fe+X[3]]=0,re=Math.min(re,ye-ve),ie=Math.max(ie,ye+Oe)}}}N[G]={positions:C,errors:ee,_bnds:[re,ie]}}}return B(P,z),B(I,H),N},textPosition:function(E,L,C,P){var I,U=L._length,z={};if(o.hasMarkers(L)){var H=C.font,F=C.align,N=C.baseline;for(z.offset=new Array(U),I=0;I<U;I++){var B=P.sizes?P.sizes[I]:P.size,j=Array.isArray(H)?H[I].size:H.size,K=Array.isArray(F)?F.length>1?F[I]:F[0]:F,G=Array.isArray(N)?N.length>1?N[I]:N[0]:N,V=c[K],W=c[G],J=B?B/.8+1:0,X=-W*J-.5*W;z.offset[I]=[V*J/j,X/j]}}return z}}},47148:function($,R,e){var k=e(71828),A=e(73972),l=e(68645),T=e(42341),x=e(47581),d=e(34098),s=e(67513),t=e(73927),o=e(49508),r=e(11058),n=e(28908),a=e(82410);$.exports=function(i,c,h,f){function b(S,_){return k.coerce(i,c,T,S,_)}var v=!!i.marker&&l.isOpenSymbol(i.marker.symbol),g=d.isBubble(i),y=s(i,c,f,b);if(y){t(i,c,f,b),b("xhoverformat"),b("yhoverformat");var p=y<x.PTS_LINESONLY?"lines+markers":"lines";b("text"),b("hovertext"),b("hovertemplate"),b("mode",p),d.hasLines(c)&&(b("connectgaps"),r(i,c,h,f,b),b("line.shape")),d.hasMarkers(c)&&(o(i,c,h,f,b,{noAngleRef:!0,noStandOff:!0}),b("marker.line.width",v||g?1:0)),d.hasText(c)&&(b("texttemplate"),a(i,c,f,b));var m=(c.line||{}).color,w=(c.marker||{}).color;b("fill"),c.fill!=="none"&&n(i,c,h,b);var u=A.getComponentMethod("errorbars","supplyDefaults");u(i,c,m||w||h,{axis:"y"}),u(i,c,m||w||h,{axis:"x",inherit:"y"}),k.coerceSelectionMarkerOpacity(c,b)}else c.visible=!1}},5345:function($,R,e){var k=e(71828),A=e(7901),l=e(37822).DESELECTDIM;$.exports={styleTextSelection:function(T){var x,d,s=T[0],t=s.trace,o=s.t,r=o._scene,n=o.index,a=r.selectBatch[n],i=r.unselectBatch[n],c=r.textOptions[n],h=r.textSelectedOptions[n]||{},f=r.textUnselectedOptions[n]||{},b=k.extendFlat({},c);if(a.length||i.length){var v=h.color,g=f.color,y=c.color,p=Array.isArray(y);for(b.color=new Array(t._length),x=0;x<a.length;x++)d=a[x],b.color[d]=v||(p?y[d]:y);for(x=0;x<i.length;x++){d=i[x];var m=p?y[d]:y;b.color[d]=g||(v?m:A.addOpacity(m,l))}}r.glText[n].update(b)}}},68101:function($,R,e){var k=e(8225);$.exports=function(A,l,T){var x=A.i;return"x"in A||(A.x=l._x[x]),"y"in A||(A.y=l._y[x]),k(A,l,T)}},68645:function($,R,e){var k=e(78232);R.isOpenSymbol=function(A){return typeof A=="string"?k.OPEN_RE.test(A):A%200>100},R.isDotSymbol=function(A){return typeof A=="string"?k.DOT_RE.test(A):A>200}},20794:function($,R,e){var k=e(73972),A=e(71828),l=e(34603);function T(x,d,s,t){var o=x.xa,r=x.ya,n=x.distance,a=x.dxy,i=x.index,c={pointNumber:i,x:d[i],y:s[i]};c.tx=Array.isArray(t.text)?t.text[i]:t.text,c.htx=Array.isArray(t.hovertext)?t.hovertext[i]:t.hovertext,c.data=Array.isArray(t.customdata)?t.customdata[i]:t.customdata,c.tp=Array.isArray(t.textposition)?t.textposition[i]:t.textposition;var h=t.textfont;h&&(c.ts=A.isArrayOrTypedArray(h.size)?h.size[i]:h.size,c.tc=Array.isArray(h.color)?h.color[i]:h.color,c.tf=Array.isArray(h.family)?h.family[i]:h.family);var f=t.marker;f&&(c.ms=A.isArrayOrTypedArray(f.size)?f.size[i]:f.size,c.mo=A.isArrayOrTypedArray(f.opacity)?f.opacity[i]:f.opacity,c.mx=A.isArrayOrTypedArray(f.symbol)?f.symbol[i]:f.symbol,c.ma=A.isArrayOrTypedArray(f.angle)?f.angle[i]:f.angle,c.mc=A.isArrayOrTypedArray(f.color)?f.color[i]:f.color);var b=f&&f.line;b&&(c.mlc=Array.isArray(b.color)?b.color[i]:b.color,c.mlw=A.isArrayOrTypedArray(b.width)?b.width[i]:b.width);var v=f&&f.gradient;v&&v.type!=="none"&&(c.mgt=Array.isArray(v.type)?v.type[i]:v.type,c.mgc=Array.isArray(v.color)?v.color[i]:v.color);var g=o.c2p(c.x,!0),y=r.c2p(c.y,!0),p=c.mrc||1,m=t.hoverlabel;m&&(c.hbg=Array.isArray(m.bgcolor)?m.bgcolor[i]:m.bgcolor,c.hbc=Array.isArray(m.bordercolor)?m.bordercolor[i]:m.bordercolor,c.hts=A.isArrayOrTypedArray(m.font.size)?m.font.size[i]:m.font.size,c.htc=Array.isArray(m.font.color)?m.font.color[i]:m.font.color,c.htf=Array.isArray(m.font.family)?m.font.family[i]:m.font.family,c.hnl=A.isArrayOrTypedArray(m.namelength)?m.namelength[i]:m.namelength);var w=t.hoverinfo;w&&(c.hi=Array.isArray(w)?w[i]:w);var u=t.hovertemplate;u&&(c.ht=Array.isArray(u)?u[i]:u);var S={};S[x.index]=c;var _=t._origX,E=t._origY,L=A.extendFlat({},x,{color:l(t,c),x0:g-p,x1:g+p,xLabelVal:_?_[i]:c.x,y0:y-p,y1:y+p,yLabelVal:E?E[i]:c.y,cd:S,distance:n,spikeDistance:a,hovertemplate:c.ht});return c.htx?L.text=c.htx:c.tx?L.text=c.tx:t.text&&(L.text=t.text),A.fillText(c,t,L),k.getComponentMethod("errorbars","hoverInfo")(c,t,L),L}$.exports={hoverPoints:function(x,d,s,t){var o,r,n,a,i,c,h,f,b,v,g=x.cd,y=g[0].t,p=g[0].trace,m=x.xa,w=x.ya,u=y.x,S=y.y,_=m.c2p(d),E=w.c2p(s),L=x.distance;if(y.tree){var C=m.p2c(_-L),P=m.p2c(_+L),I=w.p2c(E-L),U=w.p2c(E+L);o=t==="x"?y.tree.range(Math.min(C,P),Math.min(w._rl[0],w._rl[1]),Math.max(C,P),Math.max(w._rl[0],w._rl[1])):y.tree.range(Math.min(C,P),Math.min(I,U),Math.max(C,P),Math.max(I,U))}else o=y.ids;var z=L;if(t==="x"){var H=!!p.xperiodalignment,F=!!p.yperiodalignment;for(c=0;c<o.length;c++){if(a=u[r=o[c]],h=Math.abs(m.c2p(a)-_),H){var N=m.c2p(p._xStarts[r]),B=m.c2p(p._xEnds[r]);h=_>=Math.min(N,B)&&_<=Math.max(N,B)?0:1/0}if(h<z){if(z=h,i=S[r],f=w.c2p(i)-E,F){var j=w.c2p(p._yStarts[r]),K=w.c2p(p._yEnds[r]);f=E>=Math.min(j,K)&&E<=Math.max(j,K)?0:1/0}v=Math.sqrt(h*h+f*f),n=o[c]}}}else for(c=o.length-1;c>-1;c--)a=u[r=o[c]],i=S[r],h=m.c2p(a)-_,f=w.c2p(i)-E,(b=Math.sqrt(h*h+f*f))<z&&(z=v=b,n=r);return x.index=n,x.distance=z,x.dxy=v,n===void 0?[x]:[T(x,u,S,p)]},calcHover:T}},68868:function($,R,e){var k=e(72156);k.plot=e(26787),$.exports=k},26787:function($,R,e){var k=e(11870),A=e(46075),l=e(3593),T=e(42505),x=e(71828),d=e(64505).selectMode,s=e(79749),t=e(34098),o=e(68687),r=e(5345).styleTextSelection,n={};function a(i,c,h,f){var b=i._size,v=i.width*f,g=i.height*f,y=b.l*f,p=b.b*f,m=b.r*f,w=b.t*f,u=b.w*f,S=b.h*f;return[y+c.domain[0]*u,p+h.domain[0]*S,v-m-(1-c.domain[1])*u,g-w-(1-h.domain[1])*S]}($.exports=function(i,c,h){if(h.length){var f,b,v=i._fullLayout,g=c._scene,y=c.xaxis,p=c.yaxis;if(g)if(s(i,["ANGLE_instanced_arrays","OES_element_index_uint"],n)){var m=g.count,w=v._glcanvas.data()[0].regl;if(o(i,c,h),g.dirty){if(g.error2d===!0&&(g.error2d=l(w)),g.line2d===!0&&(g.line2d=A(w)),g.scatter2d===!0&&(g.scatter2d=k(w)),g.fill2d===!0&&(g.fill2d=A(w)),g.glText===!0)for(g.glText=new Array(m),f=0;f<m;f++)g.glText[f]=new T(w);if(g.glText){if(m>g.glText.length){var u=m-g.glText.length;for(f=0;f<u;f++)g.glText.push(new T(w))}else if(m<g.glText.length){var S=g.glText.length-m;g.glText.splice(m,S).forEach(function(ee){ee.destroy()})}for(f=0;f<m;f++)g.glText[f].update(g.textOptions[f])}if(g.line2d&&(g.line2d.update(g.lineOptions),g.lineOptions=g.lineOptions.map(function(ee){if(ee&&ee.positions){for(var re=ee.positions,ie=0;ie<re.length&&(isNaN(re[ie])||isNaN(re[ie+1]));)ie+=2;for(var se=re.length-2;se>ie&&(isNaN(re[se])||isNaN(re[se+1]));)se-=2;ee.positions=re.slice(ie,se+2)}return ee}),g.line2d.update(g.lineOptions)),g.error2d){var _=(g.errorXOptions||[]).concat(g.errorYOptions||[]);g.error2d.update(_)}g.scatter2d&&g.scatter2d.update(g.markerOptions),g.fillOrder=x.repeat(null,m),g.fill2d&&(g.fillOptions=g.fillOptions.map(function(ee,re){var ie=h[re];if(ee&&ie&&ie[0]&&ie[0].trace){var se,fe,ye=ie[0],ge=ye.trace,he=ye.t,ve=g.lineOptions[re],Oe=[];ge._ownfill&&Oe.push(re),ge._nexttrace&&Oe.push(re+1),Oe.length&&(g.fillOrder[re]=Oe);var xe,ke,Me=[],Te=ve&&ve.positions||he.positions;if(ge.fill==="tozeroy"){for(xe=0;xe<Te.length&&isNaN(Te[xe+1]);)xe+=2;for(ke=Te.length-2;ke>xe&&isNaN(Te[ke+1]);)ke-=2;Te[xe+1]!==0&&(Me=[Te[xe],0]),Me=Me.concat(Te.slice(xe,ke+2)),Te[ke+1]!==0&&(Me=Me.concat([Te[ke],0]))}else if(ge.fill==="tozerox"){for(xe=0;xe<Te.length&&isNaN(Te[xe]);)xe+=2;for(ke=Te.length-2;ke>xe&&isNaN(Te[ke]);)ke-=2;Te[xe]!==0&&(Me=[0,Te[xe+1]]),Me=Me.concat(Te.slice(xe,ke+2)),Te[ke]!==0&&(Me=Me.concat([0,Te[ke+1]]))}else if(ge.fill==="toself"||ge.fill==="tonext"){for(Me=[],se=0,ee.splitNull=!0,fe=0;fe<Te.length;fe+=2)(isNaN(Te[fe])||isNaN(Te[fe+1]))&&((Me=Me.concat(Te.slice(se,fe))).push(Te[se],Te[se+1]),Me.push(null,null),se=fe+2);Me=Me.concat(Te.slice(se)),se&&Me.push(Te[se],Te[se+1])}else{var Q=ge._nexttrace;if(Q){var oe=g.lineOptions[re+1];if(oe){var ce=oe.positions;if(ge.fill==="tonexty"){for(Me=Te.slice(),re=Math.floor(ce.length/2);re--;){var me=ce[2*re],Ae=ce[2*re+1];isNaN(me)||isNaN(Ae)||Me.push(me,Ae)}ee.fill=Q.fillcolor}}}}if(ge._prevtrace&&ge._prevtrace.fill==="tonext"){var Ie=g.lineOptions[re-1].positions,Ce=Me.length/2,Re=[se=Ce];for(fe=0;fe<Ie.length;fe+=2)(isNaN(Ie[fe])||isNaN(Ie[fe+1]))&&(Re.push(fe/2+Ce+1),se=fe+2);Me=Me.concat(Ie),ee.hole=Re}return ee.fillmode=ge.fill,ee.opacity=ge.opacity,ee.positions=Me,ee}}),g.fill2d.update(g.fillOptions))}var E=v.dragmode,L=d(E),C=v.clickmode.indexOf("select")>-1;for(f=0;f<m;f++){var P=h[f][0],I=P.trace,U=P.t,z=U.index,H=I._length,F=U.x,N=U.y;if(I.selectedpoints||L||C){if(L||(L=!0),I.selectedpoints){var B=g.selectBatch[z]=x.selIndices2selPoints(I),j={};for(b=0;b<B.length;b++)j[B[b]]=1;var K=[];for(b=0;b<H;b++)j[b]||K.push(b);g.unselectBatch[z]=K}var G=U.xpx=new Array(H),V=U.ypx=new Array(H);for(b=0;b<H;b++)G[b]=y.c2p(F[b]),V[b]=p.c2p(N[b])}else U.xpx=U.ypx=null}if(L){if(g.select2d||(g.select2d=k(v._glcanvas.data()[1].regl)),g.scatter2d){var W=new Array(m);for(f=0;f<m;f++)W[f]=g.selectBatch[f].length||g.unselectBatch[f].length?g.markerUnselectedOptions[f]:{};g.scatter2d.update(W)}g.select2d&&(g.select2d.update(g.markerOptions),g.select2d.update(g.markerSelectedOptions)),g.glText&&h.forEach(function(ee){var re=((ee||[])[0]||{}).trace||{};t.hasText(re)&&r(ee)})}else g.scatter2d&&g.scatter2d.update(g.markerOptions);var J={viewport:a(v,y,p,i._context.plotGlPixelRatio),range:[(y._rl||y.range)[0],(p._rl||p.range)[0],(y._rl||y.range)[1],(p._rl||p.range)[1]]},X=x.repeat(J,g.count);g.fill2d&&g.fill2d.update(X),g.line2d&&g.line2d.update(X),g.error2d&&g.error2d.update(X.concat(X)),g.scatter2d&&g.scatter2d.update(X),g.select2d&&g.select2d.update(X),g.glText&&g.glText.forEach(function(ee){ee.update(J)})}else g.init()}}).reglPrecompiled=n},38967:function($,R,e){var k=e(71828);$.exports=function(A,l){var T=l._scene,x={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},d={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return l._scene||((T=l._scene={}).init=function(){k.extendFlat(T,d,x)},T.init(),T.update=function(s){var t=k.repeat(s,T.count);if(T.fill2d&&T.fill2d.update(t),T.scatter2d&&T.scatter2d.update(t),T.line2d&&T.line2d.update(t),T.error2d&&T.error2d.update(t.concat(t)),T.select2d&&T.select2d.update(t),T.glText)for(var o=0;o<T.count;o++)T.glText[o].update(s)},T.draw=function(){for(var s=T.count,t=T.fill2d,o=T.error2d,r=T.line2d,n=T.scatter2d,a=T.glText,i=T.select2d,c=T.selectBatch,h=T.unselectBatch,f=0;f<s;f++){if(t&&T.fillOrder[f]&&t.draw(T.fillOrder[f]),r&&T.lineOptions[f]&&r.draw(f),o&&(T.errorXOptions[f]&&o.draw(f),T.errorYOptions[f]&&o.draw(f+s)),n&&T.markerOptions[f])if(h[f].length){var b=k.repeat([],T.count);b[f]=h[f],n.draw(b)}else c[f].length||n.draw(f);a[f]&&T.textOptions[f]&&a[f].render()}i&&i.draw(c),T.dirty=!1},T.destroy=function(){T.fill2d&&T.fill2d.destroy&&T.fill2d.destroy(),T.scatter2d&&T.scatter2d.destroy&&T.scatter2d.destroy(),T.error2d&&T.error2d.destroy&&T.error2d.destroy(),T.line2d&&T.line2d.destroy&&T.line2d.destroy(),T.select2d&&T.select2d.destroy&&T.select2d.destroy(),T.glText&&T.glText.forEach(function(s){s.destroy&&s.destroy()}),T.lineOptions=null,T.fillOptions=null,T.markerOptions=null,T.markerSelectedOptions=null,T.markerUnselectedOptions=null,T.errorXOptions=null,T.errorYOptions=null,T.textOptions=null,T.textSelectedOptions=null,T.textUnselectedOptions=null,T.selectBatch=null,T.unselectBatch=null,l._scene=null}),T.dirty||k.extendFlat(T,x),T}},58147:function($,R,e){var k=e(34098),A=e(5345).styleTextSelection;$.exports=function(l,T){var x=l.cd,d=l.xaxis,s=l.yaxis,t=[],o=x[0].trace,r=x[0].t,n=o._length,a=r.x,i=r.y,c=r._scene,h=r.index;if(!c)return t;var f=k.hasText(o),b=k.hasMarkers(o),v=!b&&!f;if(o.visible!==!0||v)return t;var g=[],y=[];if(T!==!1&&!T.degenerate)for(var p=0;p<n;p++)T.contains([r.xpx[p],r.ypx[p]],!1,p,l)?(g.push(p),t.push({pointNumber:p,x:d.c2d(a[p]),y:s.c2d(i[p])})):y.push(p);if(b){var m=c.scatter2d;if(g.length||y.length){if(!c.selectBatch[h].length&&!c.unselectBatch[h].length){var w=new Array(c.count);w[h]=c.markerUnselectedOptions[h],m.update.apply(m,w)}}else{var u=new Array(c.count);u[h]=c.markerOptions[h],m.update.apply(m,u)}}return c.selectBatch[h]=g,c.unselectBatch[h]=y,f&&A(x),t}},99181:function($,R,e){var k=e(5386).f,A=e(5386).s,l=e(19316),T=e(82196),x=e(23585),d=e(9012),s=e(50693),t=e(1426).extendFlat,o=e(30962).overrideAll,r=e(23585),n=l.line,a=l.marker;$.exports=o({lon:l.lon,lat:l.lat,cluster:{enabled:{valType:"boolean"},maxzoom:t({},r.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:t({},a.opacity,{dflt:1})},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:A({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:t({},T.hovertext,{}),line:{color:n.color,width:n.width},connectgaps:T.connectgaps,marker:t({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:a.opacity,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode},s("marker")),fill:l.fill,fillcolor:T.fillcolor,textfont:x.layers.symbol.textfont,textposition:x.layers.symbol.textposition,below:{valType:"string"},selected:{marker:T.selected.marker},unselected:{marker:T.unselected.marker},hoverinfo:t({},d.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:k()},"calc","nested")},15790:function($,R,e){var k=e(92770),A=e(71828),l=e(50606).BADNUM,T=e(18214),x=e(21081),d=e(91424),s=e(39984),t=e(34098),o=e(13056),r=e(23469).appendArrayPointValue,n=e(63893).NEWLINES,a=e(63893).BR_TAG_ALL;function i(v){return{type:v,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function c(v,g){return A.isArrayOrTypedArray(v)?g?function(y){return k(v[y])?+v[y]:0}:function(y){return v[y]}:v?function(){return v}:h}function h(){return""}function f(v){return v[0]===l}function b(v,g){var y;if(A.isArrayOrTypedArray(v)&&A.isArrayOrTypedArray(g)){y=["step",["get","point_count"],v[0]];for(var p=1;p<v.length;p++)y.push(g[p-1],v[p])}else y=v;return y}$.exports=function(v,g){var y,p=g[0].trace,m=p.visible===!0&&p._length!==0,w=p.fill!=="none",u=t.hasLines(p),S=t.hasMarkers(p),_=t.hasText(p),E=S&&p.marker.symbol==="circle",L=S&&p.marker.symbol!=="circle",C=p.cluster&&p.cluster.enabled,P=i("fill"),I=i("line"),U=i("circle"),z=i("symbol"),H={fill:P,line:I,circle:U,symbol:z};if(!m)return H;if((w||u)&&(y=T.calcTraceToLineCoords(g)),w&&(P.geojson=T.makePolygon(y),P.layout.visibility="visible",A.extendFlat(P.paint,{"fill-color":p.fillcolor})),u&&(I.geojson=T.makeLine(y),I.layout.visibility="visible",A.extendFlat(I.paint,{"line-width":p.line.width,"line-color":p.line.color,"line-opacity":p.opacity})),E){var F=function(j){var K,G,V,W,J=j[0].trace,X=J.marker,ee=J.selectedpoints,re=A.isArrayOrTypedArray(X.color),ie=A.isArrayOrTypedArray(X.size),se=A.isArrayOrTypedArray(X.opacity);function fe(Me){return J.opacity*Me}re&&(G=x.hasColorscale(J,"marker")?x.makeColorScaleFuncFromTrace(X):A.identity),ie&&(V=s(J)),se&&(W=function(Me){return fe(k(Me)?+A.constrain(Me,0,1):0)});var ye,ge,he=[];for(K=0;K<j.length;K++){var ve=j[K],Oe=ve.lonlat;if(!f(Oe)){var xe={};G&&(xe.mcc=ve.mcc=G(ve.mc)),V&&(xe.mrc=ve.mrc=V(ve.ms)),W&&(xe.mo=W(ve.mo)),ee&&(xe.selected=ve.selected||0),he.push({type:"Feature",id:K+1,geometry:{type:"Point",coordinates:Oe},properties:xe})}}if(ee)for(ye=d.makeSelectedPointStyleFns(J),K=0;K<he.length;K++){var ke=he[K].properties;ye.selectedOpacityFn&&(ke.mo=fe(ye.selectedOpacityFn(ke))),ye.selectedColorFn&&(ke.mcc=ye.selectedColorFn(ke)),ye.selectedSizeFn&&(ke.mrc=ye.selectedSizeFn(ke))}return{geojson:{type:"FeatureCollection",features:he},mcc:re||ye&&ye.selectedColorFn?{type:"identity",property:"mcc"}:X.color,mrc:ie||ye&&ye.selectedSizeFn?{type:"identity",property:"mrc"}:(ge=X.size,ge/2),mo:se||ye&&ye.selectedOpacityFn?{type:"identity",property:"mo"}:fe(X.opacity)}}(g);U.geojson=F.geojson,U.layout.visibility="visible",C&&(U.filter=["!",["has","point_count"]],H.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":b(p.cluster.color,p.cluster.step),"circle-radius":b(p.cluster.size,p.cluster.step),"circle-opacity":b(p.cluster.opacity,p.cluster.step)}},H.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),A.extendFlat(U.paint,{"circle-color":F.mcc,"circle-radius":F.mrc,"circle-opacity":F.mo})}if(E&&C&&(U.filter=["!",["has","point_count"]]),(L||_)&&(z.geojson=function(j,K){for(var G=K._fullLayout,V=j[0].trace,W=V.marker||{},J=W.symbol,X=W.angle,ee=J!=="circle"?c(J):h,re=X!=="auto"?c(X,!0):h,ie=t.hasText(V)?c(V.text):h,se=[],fe=0;fe<j.length;fe++){var ye=j[fe];if(!f(ye.lonlat)){var ge,he=V.texttemplate;if(he){var ve=Array.isArray(he)?he[fe]||"":he,Oe=V._module.formatLabels(ye,V,G),xe={};r(xe,V,ye.i);var ke=V._meta||{};ge=A.texttemplateString(ve,Oe,G._d3locale,xe,ye,ke)}else ge=ie(fe);ge&&(ge=ge.replace(n,"").replace(a,`
`)),se.push({type:"Feature",geometry:{type:"Point",coordinates:ye.lonlat},properties:{symbol:ee(fe),angle:re(fe),text:ge}})}}return{type:"FeatureCollection",features:se}}(g,v),A.extendFlat(z.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),L&&(A.extendFlat(z.layout,{"icon-size":p.marker.size/10}),"angle"in p.marker&&p.marker.angle!=="auto"&&A.extendFlat(z.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),z.layout["icon-allow-overlap"]=p.marker.allowoverlap,A.extendFlat(z.paint,{"icon-opacity":p.opacity*p.marker.opacity,"icon-color":p.marker.color})),_)){var N=(p.marker||{}).size,B=o(p.textposition,N);A.extendFlat(z.layout,{"text-size":p.textfont.size,"text-anchor":B.anchor,"text-offset":B.offset}),A.extendFlat(z.paint,{"text-color":p.textfont.color,"text-opacity":p.opacity})}return H}},76645:function($,R,e){var k=e(71828),A=e(34098),l=e(49508),T=e(11058),x=e(82410),d=e(28908),s=e(99181);$.exports=function(t,o,r,n){function a(p,m){return k.coerce(t,o,s,p,m)}function i(p,m){return k.coerce2(t,o,s,p,m)}var c=function(p,m,w){var u=w("lon")||[],S=w("lat")||[],_=Math.min(u.length,S.length);return m._length=_,_}(0,o,a);if(c){if(a("text"),a("texttemplate"),a("hovertext"),a("hovertemplate"),a("mode"),a("below"),A.hasLines(o)&&(T(t,o,r,n,a,{noDash:!0}),a("connectgaps")),A.hasMarkers(o)){l(t,o,r,n,a,{noLine:!0,noAngle:!0}),a("marker.allowoverlap"),a("marker.angle");var h=o.marker;h.symbol!=="circle"&&(k.isArrayOrTypedArray(h.size)&&(h.size=h.size[0]),k.isArrayOrTypedArray(h.color)&&(h.color=h.color[0]))}var f=i("cluster.maxzoom"),b=i("cluster.step"),v=i("cluster.color",o.marker&&o.marker.color||r),g=i("cluster.size"),y=i("cluster.opacity");a("cluster.enabled",f!==!1||b!==!1||v!==!1||g!==!1||y!==!1),A.hasText(o)&&x(t,o,n,a,{noSelect:!0}),a("fill"),o.fill!=="none"&&d(t,o,r,a),k.coerceSelectionMarkerOpacity(o,a)}else o.visible=!1}},53353:function($){$.exports=function(R,e){return R.lon=e.lon,R.lat=e.lat,R}},15636:function($,R,e){var k=e(89298);$.exports=function(A,l,T){var x={},d=T[l.subplot]._subplot.mockAxis,s=A.lonlat;return x.lonLabel=k.tickText(d,d.c2l(s[0]),!0).text,x.latLabel=k.tickText(d,d.c2l(s[1]),!0).text,x}},28178:function($,R,e){var k=e(30211),A=e(71828),l=e(34603),T=A.fillText,x=e(50606).BADNUM,d=e(77734).traceLayerPrefix;function s(t,o,r){if(!t.hovertemplate){var n=(o.hi||t.hoverinfo).split("+"),a=n.indexOf("all")!==-1,i=n.indexOf("lon")!==-1,c=n.indexOf("lat")!==-1,h=o.lonlat,f=[];return a||i&&c?f.push("("+b(h[1])+", "+b(h[0])+")"):i?f.push(r.lon+b(h[0])):c&&f.push(r.lat+b(h[1])),(a||n.indexOf("text")!==-1)&&T(o,t,f),f.join("<br>")}function b(v){return v+""}}$.exports={hoverPoints:function(t,o,r){var n=t.cd,a=n[0].trace,i=t.xa,c=t.ya,h=t.subplot,f=[],b=d+a.uid+"-circle",v=a.cluster&&a.cluster.enabled;if(v){var g=h.map.queryRenderedFeatures(null,{layers:[b]});f=g.map(function(P){return P.id})}var y=360*(o>=0?Math.floor((o+180)/360):Math.ceil((o-180)/360)),p=o-y;if(k.getClosest(n,function(P){var I=P.lonlat;if(I[0]===x||v&&f.indexOf(P.i+1)===-1)return 1/0;var U=A.modHalf(I[0],360),z=I[1],H=h.project([U,z]),F=H.x-i.c2p([p,z]),N=H.y-c.c2p([U,r]),B=Math.max(3,P.mrc||0);return Math.max(Math.sqrt(F*F+N*N)-B,1-3/B)},t),t.index!==!1){var m=n[t.index],w=m.lonlat,u=[A.modHalf(w[0],360)+y,w[1]],S=i.c2p(u),_=c.c2p(u),E=m.mrc||1;t.x0=S-E,t.x1=S+E,t.y0=_-E,t.y1=_+E;var L={};L[a.subplot]={_subplot:h};var C=a._module.formatLabels(m,a,L);return t.lonLabel=C.lonLabel,t.latLabel=C.latLabel,t.color=l(a,m),t.extraText=s(a,m,n[0].t.labels),t.hovertemplate=a.hovertemplate,[t]}},getExtraText:s}},20467:function($,R,e){$.exports={attributes:e(99181),supplyDefaults:e(76645),colorbar:e(4898),formatLabels:e(15636),calc:e(84622),plot:e(86951),hoverPoints:e(28178).hoverPoints,eventData:e(53353),selectPoints:e(86387),styleOnSelect:function(k,A){A&&A[0].trace._glTrace.update(A)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function($,R,e){var k=e(71828),A=e(15790),l=e(77734).traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function x(s,t,o,r){this.type="scattermapbox",this.subplot=s,this.uid=t,this.clusterEnabled=o,this.isHidden=r,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:l+t+"-fill",line:l+t+"-line",circle:l+t+"-circle",symbol:l+t+"-symbol",cluster:l+t+"-cluster",clusterCount:l+t+"-cluster-count"},this.below=null}var d=x.prototype;d.addSource=function(s,t,o){var r={type:"geojson",data:t.geojson};o&&o.enabled&&k.extendFlat(r,{cluster:!0,clusterMaxZoom:o.maxzoom}),this.subplot.map.addSource(this.sourceIds[s],r)},d.setSourceData=function(s,t){this.subplot.map.getSource(this.sourceIds[s]).setData(t.geojson)},d.addLayer=function(s,t,o){var r={type:t.type,id:this.layerIds[s],source:this.sourceIds[s],layout:t.layout,paint:t.paint};t.filter&&(r.filter=t.filter),this.subplot.addLayer(r,o)},d.update=function(s){var t=s[0].trace,o=this.subplot,r=o.map,n=A(o.gd,s),a=o.belowLookup["trace-"+this.uid],i=!(!t.cluster||!t.cluster.enabled),c=!!this.clusterEnabled,h=this;function f(p){c?function(m){for(var w=T.cluster,u=w.length-1;u>=0;u--){var S=w[u];r.removeLayer(h.layerIds[S])}m||r.removeSource(h.sourceIds.circle)}(p):function(m){for(var w=T.nonCluster,u=w.length-1;u>=0;u--){var S=w[u];r.removeLayer(h.layerIds[S]),m||r.removeSource(h.sourceIds[S])}}(p)}function b(p){i?function(m){m||h.addSource("circle",n.circle,t.cluster);for(var w=T.cluster,u=0;u<w.length;u++){var S=w[u],_=n[S];h.addLayer(S,_,a)}}(p):function(m){for(var w=T.nonCluster,u=0;u<w.length;u++){var S=w[u],_=n[S];m||h.addSource(S,_),h.addLayer(S,_,a)}}(p)}function v(){for(var p=i?T.cluster:T.nonCluster,m=0;m<p.length;m++){var w=p[m],u=n[w];u&&(o.setOptions(h.layerIds[w],"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&(w!=="cluster"&&h.setSourceData(w,u),o.setOptions(h.layerIds[w],"setPaintProperty",u.paint)))}}var g=this.isHidden,y=t.visible!==!0;y?g||f():g?y||b():c!==i?(f(),b()):(this.below!==a&&(f(!0),b(!0)),v()),this.clusterEnabled=i,this.isHidden=y,this.below=a,s[0].trace._glTrace=this},d.dispose=function(){for(var s=this.subplot.map,t=this.clusterEnabled?T.cluster:T.nonCluster,o=t.length-1;o>=0;o--){var r=t[o];s.removeLayer(this.layerIds[r]),s.removeSource(this.sourceIds[r])}},$.exports=function(s,t){var o,r,n,a=t[0].trace,i=a.cluster&&a.cluster.enabled,c=a.visible!==!0,h=new x(s,a.uid,i,c),f=A(s.gd,t),b=h.below=s.belowLookup["trace-"+a.uid];if(i)for(h.addSource("circle",f.circle,a.cluster),o=0;o<T.cluster.length;o++)n=f[r=T.cluster[o]],h.addLayer(r,n,b);else for(o=0;o<T.nonCluster.length;o++)n=f[r=T.nonCluster[o]],h.addSource(r,n,a.cluster),h.addLayer(r,n,b);return t[0].trace._glTrace=h,h}},86387:function($,R,e){var k=e(71828),A=e(34098),l=e(50606).BADNUM;$.exports=function(T,x){var d,s=T.cd,t=T.xaxis,o=T.yaxis,r=[],n=s[0].trace;if(!A.hasMarkers(n))return[];if(x===!1)for(d=0;d<s.length;d++)s[d].selected=0;else for(d=0;d<s.length;d++){var a=s[d],i=a.lonlat;if(i[0]!==l){var c=[k.modHalf(i[0],360),i[1]],h=[t.c2p(c),o.c2p(c)];x.contains(h,null,d,T)?(r.push({pointNumber:d,lon:i[0],lat:i[1]}),a.selected=1):a.selected=0}}return r}},81245:function($,R,e){var k=e(5386).f,A=e(5386).s,l=e(1426).extendFlat,T=e(82196),x=e(9012),d=T.line;$.exports={mode:T.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:A({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,line:{color:d.color,width:d.width,dash:d.dash,backoff:d.backoff,shape:l({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:l({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:l({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:l({},x.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:T.hoveron,hovertemplate:k(),selected:T.selected,unselected:T.unselected}},26442:function($,R,e){var k=e(92770),A=e(50606).BADNUM,l=e(89298),T=e(36922),x=e(75225),d=e(66279),s=e(47761).calcMarkerSize;$.exports=function(t,o){for(var r=t._fullLayout,n=o.subplot,a=r[n].radialaxis,i=r[n].angularaxis,c=a.makeCalcdata(o,"r"),h=i.makeCalcdata(o,"theta"),f=o._length,b=new Array(f),v=0;v<f;v++){var g=c[v],y=h[v],p=b[v]={};k(g)&&k(y)?(p.r=g,p.theta=y):p.r=A}var m=s(o,f);return o._extremes.x=l.findExtremes(a,c,{ppad:m}),T(t,o),x(b,o),d(b,o),b}},22184:function($,R,e){var k=e(71828),A=e(34098),l=e(49508),T=e(11058),x=e(94039),d=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,o=e(81245);function r(n,a,i,c){var h,f=c("r"),b=c("theta");if(f)b?h=Math.min(f.length,b.length):(h=f.length,c("theta0"),c("dtheta"));else{if(!b)return 0;h=a.theta.length,c("r0"),c("dr")}return a._length=h,h}$.exports={handleRThetaDefaults:r,supplyDefaults:function(n,a,i,c){function h(v,g){return k.coerce(n,a,o,v,g)}var f=r(0,a,0,h);if(f){h("thetaunit"),h("mode",f<t?"lines+markers":"lines"),h("text"),h("hovertext"),a.hoveron!=="fills"&&h("hovertemplate"),A.hasLines(a)&&(T(n,a,i,c,h,{backoff:!0}),x(n,a,h),h("connectgaps")),A.hasMarkers(a)&&l(n,a,i,c,h,{gradient:!0}),A.hasText(a)&&(h("texttemplate"),d(n,a,c,h));var b=[];(A.hasMarkers(a)||A.hasText(a))&&(h("cliponaxis"),h("marker.maxdisplayed"),b.push("points")),h("fill"),a.fill!=="none"&&(s(n,a,i,h),A.hasLines(a)||x(n,a,h)),a.fill!=="tonext"&&a.fill!=="toself"||b.push("fills"),h("hoveron",b.join("+")||"points"),k.coerceSelectionMarkerOpacity(a,h)}else a.visible=!1}}},98608:function($,R,e){var k=e(71828),A=e(89298);$.exports=function(l,T,x){var d,s,t={},o=x[T.subplot]._subplot;o?(d=o.radialAxis,s=o.angularAxis):(d=(o=x[T.subplot]).radialaxis,s=o.angularaxis);var r=d.c2l(l.r);t.rLabel=A.tickText(d,r,!0).text;var n=s.thetaunit==="degrees"?k.rad2deg(l.theta):l.theta;return t.thetaLabel=A.tickText(s,n,!0).text,t}},59150:function($,R,e){var k=e(33720);function A(l,T,x,d){var s=x.radialAxis,t=x.angularAxis;s._hovertitle="r",t._hovertitle="";var o={};o[T.subplot]={_subplot:x};var r=T._module.formatLabels(l,T,o);d.rLabel=r.rLabel,d.thetaLabel=r.thetaLabel;var n=l.hi||T.hoverinfo,a=[];function i(h,f){a.push(h._hovertitle+": "+f)}if(!T.hovertemplate){var c=n.split("+");c.indexOf("all")!==-1&&(c=["r","theta","text"]),c.indexOf("r")!==-1&&i(s,d.rLabel),c.indexOf("theta")!==-1&&i(t,d.thetaLabel),c.indexOf("text")!==-1&&d.text&&(a.push(d.text),delete d.text),d.extraText=a.join("<br>")}}$.exports={hoverPoints:function(l,T,x,d){var s=k(l,T,x,d);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var o=l.subplot,r=t.cd[t.index],n=t.trace;if(o.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,A(r,n,o,t),t.hovertemplate=n.hovertemplate,s}},makeHoverPointText:A}},91271:function($,R,e){$.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(81245),supplyDefaults:e(22184).supplyDefaults,colorbar:e(4898),formatLabels:e(98608),calc:e(26442),plot:e(45162),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(59150).hoverPoints,selectPoints:e(98002),meta:{}}},45162:function($,R,e){var k=e(32663),A=e(50606).BADNUM;$.exports=function(l,T,x){for(var d=T.layers.frontplot.select("g.scatterlayer"),s=T.xaxis,t=T.yaxis,o={xaxis:s,yaxis:t,plot:T.framework,layerClipId:T._hasClipOnAxisFalse?T.clipIds.forTraces:null},r=T.radialAxis,n=T.angularAxis,a=0;a<x.length;a++)for(var i=x[a],c=0;c<i.length;c++){c===0&&(i[0].trace._xA=s,i[0].trace._yA=t);var h=i[c],f=h.r;if(f===A)h.x=h.y=A;else{var b=r.c2g(f),v=n.c2g(h.theta);h.x=b*Math.cos(v),h.y=b*Math.sin(v)}}k(l,o,x,d)}},53286:function($,R,e){var k=e(81245),A=e(42341),l=e(5386).s;$.exports={mode:k.mode,r:k.r,theta:k.theta,r0:k.r0,dr:k.dr,theta0:k.theta0,dtheta:k.dtheta,thetaunit:k.thetaunit,text:k.text,texttemplate:l({editType:"plot"},{keys:["r","theta","text"]}),hovertext:k.hovertext,hovertemplate:k.hovertemplate,line:A.line,connectgaps:A.connectgaps,marker:A.marker,fill:A.fill,fillcolor:A.fillcolor,textposition:A.textposition,textfont:A.textfont,hoverinfo:k.hoverinfo,selected:k.selected,unselected:k.unselected}},65746:function($,R,e){$.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(53286),supplyDefaults:e(75485),colorbar:e(4898),formatLabels:e(46255),calc:e(37499),hoverPoints:e(29347).hoverPoints,selectPoints:e(58147),meta:{}}},37499:function($,R,e){var k=e(36922),A=e(47761).calcMarkerSize,l=e(19635),T=e(89298),x=e(78232).TOO_MANY_POINTS;$.exports=function(d,s){var t=d._fullLayout,o=s.subplot,r=t[o].radialaxis,n=t[o].angularaxis,a=s._r=r.makeCalcdata(s,"r"),i=s._theta=n.makeCalcdata(s,"theta"),c=s._length,h={};c<a.length&&(a=a.slice(0,c)),c<i.length&&(i=i.slice(0,c)),h.r=a,h.theta=i,k(d,s);var f,b=h.opts=l.style(d,s);return c<x?f=A(s,c):b.marker&&(f=2*(b.marker.sizeAvg||Math.max(b.marker.size,3))),s._extremes.x=T.findExtremes(r,a,{ppad:f}),[{x:!1,y:!1,t:h,trace:s}]}},75485:function($,R,e){var k=e(71828),A=e(34098),l=e(22184).handleRThetaDefaults,T=e(49508),x=e(11058),d=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,o=e(53286);$.exports=function(r,n,a,i){function c(f,b){return k.coerce(r,n,o,f,b)}var h=l(r,n,i,c);h?(c("thetaunit"),c("mode",h<t?"lines+markers":"lines"),c("text"),c("hovertext"),n.hoveron!=="fills"&&c("hovertemplate"),A.hasLines(n)&&(x(r,n,a,i,c),c("connectgaps")),A.hasMarkers(n)&&T(r,n,a,i,c,{noAngleRef:!0,noStandOff:!0}),A.hasText(n)&&(c("texttemplate"),d(r,n,i,c)),c("fill"),n.fill!=="none"&&s(r,n,a,c),k.coerceSelectionMarkerOpacity(n,c)):n.visible=!1}},46255:function($,R,e){var k=e(98608);$.exports=function(A,l,T){var x=A.i;return"r"in A||(A.r=l._r[x]),"theta"in A||(A.theta=l._theta[x]),k(A,l,T)}},29347:function($,R,e){var k=e(20794),A=e(59150).makeHoverPointText;$.exports={hoverPoints:function(l,T,x,d){var s=l.cd[0].t,t=s.r,o=s.theta,r=k.hoverPoints(l,T,x,d);if(r&&r[0].index!==!1){var n=r[0];if(n.index===void 0)return r;var a=l.subplot,i=n.cd[n.index],c=n.trace;if(i.r=t[n.index],i.theta=o[n.index],a.isPtInside(i))return n.xLabelVal=void 0,n.yLabelVal=void 0,A(i,c,a,n),r}}}},21461:function($,R,e){var k=e(65746);k.plot=e(49741),$.exports=k},49741:function($,R,e){var k=e(88294),A=e(92770),l=e(26787),T=e(38967),x=e(19635),d=e(71828),s=e(78232).TOO_MANY_POINTS;$.exports=function(t,o,r){if(r.length){var n=o.radialAxis,a=o.angularAxis,i=T(t,o);return r.forEach(function(c){if(c&&c[0]&&c[0].trace){var h,f=c[0],b=f.trace,v=f.t,g=b._length,y=v.r,p=v.theta,m=v.opts,w=y.slice(),u=p.slice();for(h=0;h<y.length;h++)o.isPtInside({r:y[h],theta:p[h]})||(w[h]=NaN,u[h]=NaN);var S=new Array(2*g),_=Array(g),E=Array(g);for(h=0;h<g;h++){var L,C,P=w[h];if(A(P)){var I=n.c2g(P),U=a.c2g(u[h],b.thetaunit);L=I*Math.cos(U),C=I*Math.sin(U)}else L=C=NaN;_[h]=S[2*h]=L,E[h]=S[2*h+1]=C}v.tree=k(S),m.marker&&g>=s&&(m.marker.cluster=v.tree),m.marker&&(m.markerSel.positions=m.markerUnsel.positions=m.marker.positions=S),m.line&&S.length>1&&d.extendFlat(m.line,x.linePositions(t,b,S)),m.text&&(d.extendFlat(m.text,{positions:S},x.textPosition(t,b,m.text,m.marker)),d.extendFlat(m.textSel,{positions:S},x.textPosition(t,b,m.text,m.markerSel)),d.extendFlat(m.textUnsel,{positions:S},x.textPosition(t,b,m.text,m.markerUnsel))),m.fill&&!i.fill2d&&(i.fill2d=!0),m.marker&&!i.scatter2d&&(i.scatter2d=!0),m.line&&!i.line2d&&(i.line2d=!0),m.text&&!i.glText&&(i.glText=!0),i.lineOptions.push(m.line),i.fillOptions.push(m.fill),i.markerOptions.push(m.marker),i.markerSelectedOptions.push(m.markerSel),i.markerUnselectedOptions.push(m.markerUnsel),i.textOptions.push(m.text),i.textSelectedOptions.push(m.textSel),i.textUnselectedOptions.push(m.textUnsel),i.selectBatch.push([]),i.unselectBatch.push([]),v.x=_,v.y=E,v.rawx=_,v.rawy=E,v.r=y,v.theta=p,v.positions=S,v._scene=i,v.index=i.count,i.count++}}),l(t,o,r)}},$.exports.reglPrecompiled={}},48300:function($,R,e){var k=e(5386).f,A=e(5386).s,l=e(1426).extendFlat,T=e(82196),x=e(9012),d=T.line;$.exports={mode:T.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:A({editType:"plot"},{keys:["real","imag","text"]}),hovertext:T.hovertext,line:{color:d.color,width:d.width,dash:d.dash,backoff:d.backoff,shape:l({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:l({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:l({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:l({},x.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:T.hoveron,hovertemplate:k(),selected:T.selected,unselected:T.unselected}},30621:function($,R,e){var k=e(92770),A=e(50606).BADNUM,l=e(36922),T=e(75225),x=e(66279),d=e(47761).calcMarkerSize;$.exports=function(s,t){for(var o=s._fullLayout,r=t.subplot,n=o[r].realaxis,a=o[r].imaginaryaxis,i=n.makeCalcdata(t,"real"),c=a.makeCalcdata(t,"imag"),h=t._length,f=new Array(h),b=0;b<h;b++){var v=i[b],g=c[b],y=f[b]={};k(v)&&k(g)?(y.real=v,y.imag=g):y.real=A}return d(t,h),l(s,t),T(f,t),x(f,t),f}},65269:function($,R,e){var k=e(71828),A=e(34098),l=e(49508),T=e(11058),x=e(94039),d=e(82410),s=e(28908),t=e(47581).PTS_LINESONLY,o=e(48300);$.exports=function(r,n,a,i){function c(b,v){return k.coerce(r,n,o,b,v)}var h=function(b,v,g,y){var p,m=y("real"),w=y("imag");return m&&w&&(p=Math.min(m.length,w.length)),v._length=p,p}(0,n,0,c);if(h){c("mode",h<t?"lines+markers":"lines"),c("text"),c("hovertext"),n.hoveron!=="fills"&&c("hovertemplate"),A.hasLines(n)&&(T(r,n,a,i,c,{backoff:!0}),x(r,n,c),c("connectgaps")),A.hasMarkers(n)&&l(r,n,a,i,c,{gradient:!0}),A.hasText(n)&&(c("texttemplate"),d(r,n,i,c));var f=[];(A.hasMarkers(n)||A.hasText(n))&&(c("cliponaxis"),c("marker.maxdisplayed"),f.push("points")),c("fill"),n.fill!=="none"&&(s(r,n,a,c),A.hasLines(n)||x(r,n,c)),n.fill!=="tonext"&&n.fill!=="toself"||f.push("fills"),c("hoveron",f.join("+")||"points"),k.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},62047:function($,R,e){var k=e(89298);$.exports=function(A,l,T){var x={},d=T[l.subplot]._subplot;return x.realLabel=k.tickText(d.radialAxis,A.real,!0).text,x.imagLabel=k.tickText(d.angularAxis,A.imag,!0).text,x}},11350:function($,R,e){var k=e(33720);function A(l,T,x,d){var s=x.radialAxis,t=x.angularAxis;s._hovertitle="real",t._hovertitle="imag";var o={};o[T.subplot]={_subplot:x};var r=T._module.formatLabels(l,T,o);d.realLabel=r.realLabel,d.imagLabel=r.imagLabel;var n=l.hi||T.hoverinfo,a=[];function i(h,f){a.push(h._hovertitle+": "+f)}if(!T.hovertemplate){var c=n.split("+");c.indexOf("all")!==-1&&(c=["real","imag","text"]),c.indexOf("real")!==-1&&i(s,d.realLabel),c.indexOf("imag")!==-1&&i(t,d.imagLabel),c.indexOf("text")!==-1&&d.text&&(a.push(d.text),delete d.text),d.extraText=a.join("<br>")}}$.exports={hoverPoints:function(l,T,x,d){var s=k(l,T,x,d);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var o=l.subplot,r=t.cd[t.index],n=t.trace;if(o.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,A(r,n,o,t),t.hovertemplate=n.hovertemplate,s}},makeHoverPointText:A}},85956:function($,R,e){$.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(48300),supplyDefaults:e(65269),colorbar:e(4898),formatLabels:e(62047),calc:e(30621),plot:e(12480),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(11350).hoverPoints,selectPoints:e(98002),meta:{}}},12480:function($,R,e){var k=e(32663),A=e(50606).BADNUM,l=e(23893).smith;$.exports=function(T,x,d){for(var s=x.layers.frontplot.select("g.scatterlayer"),t=x.xaxis,o=x.yaxis,r={xaxis:t,yaxis:o,plot:x.framework,layerClipId:x._hasClipOnAxisFalse?x.clipIds.forTraces:null},n=0;n<d.length;n++)for(var a=d[n],i=0;i<a.length;i++){i===0&&(a[0].trace._xA=t,a[0].trace._yA=o);var c=a[i],h=c.real;if(h===A)c.x=c.y=A;else{var f=l([h,c.imag]);c.x=f[0],c.y=f[1]}}k(T,r,d,s)}},50413:function($,R,e){var k=e(5386).f,A=e(5386).s,l=e(82196),T=e(9012),x=e(50693),d=e(79952).P,s=e(1426).extendFlat,t=l.marker,o=l.line,r=t.line;$.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:s({},l.mode,{dflt:"markers"}),text:s({},l.text,{}),texttemplate:A({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:s({},l.hovertext,{}),line:{color:o.color,width:o.width,dash:d,backoff:o.backoff,shape:s({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:l.connectgaps,cliponaxis:l.cliponaxis,fill:s({},l.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:l.fillcolor,marker:s({symbol:t.symbol,opacity:t.opacity,angle:t.angle,angleref:t.angleref,standoff:t.standoff,maxdisplayed:t.maxdisplayed,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:s({width:r.width,editType:"calc"},x("marker.line")),gradient:t.gradient,editType:"calc"},x("marker")),textfont:l.textfont,textposition:l.textposition,selected:l.selected,unselected:l.unselected,hoverinfo:s({},T.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:l.hoveron,hovertemplate:k()}},54337:function($,R,e){var k=e(92770),A=e(36922),l=e(75225),T=e(66279),x=e(47761).calcMarkerSize,d=["a","b","c"],s={a:["b","c"],b:["a","c"],c:["a","b"]};$.exports=function(t,o){var r,n,a,i,c,h,f=t._fullLayout[o.subplot].sum,b=o.sum||f,v={a:o.a,b:o.b,c:o.c};for(r=0;r<d.length;r++)if(!v[a=d[r]]){for(c=v[s[a][0]],h=v[s[a][1]],i=new Array(c.length),n=0;n<c.length;n++)i[n]=b-c[n]-h[n];v[a]=i}var g,y,p,m,w,u,S=o._length,_=new Array(S);for(r=0;r<S;r++)g=v.a[r],y=v.b[r],p=v.c[r],k(g)&&k(y)&&k(p)?((m=f/((g=+g)+(y=+y)+(p=+p)))!=1&&(g*=m,y*=m,p*=m),u=g,w=p-y,_[r]={x:w,y:u,a:g,b:y,c:p}):_[r]={x:!1,y:!1};return x(o,S),A(t,o),l(_,o),T(_,o),_}},46008:function($,R,e){var k=e(71828),A=e(47581),l=e(34098),T=e(49508),x=e(11058),d=e(94039),s=e(82410),t=e(28908),o=e(50413);$.exports=function(r,n,a,i){function c(y,p){return k.coerce(r,n,o,y,p)}var h,f=c("a"),b=c("b"),v=c("c");if(f?(h=f.length,b?(h=Math.min(h,b.length),v&&(h=Math.min(h,v.length))):h=v?Math.min(h,v.length):0):b&&v&&(h=Math.min(b.length,v.length)),h){n._length=h,c("sum"),c("text"),c("hovertext"),n.hoveron!=="fills"&&c("hovertemplate"),c("mode",h<A.PTS_LINESONLY?"lines+markers":"lines"),l.hasLines(n)&&(x(r,n,a,i,c,{backoff:!0}),d(r,n,c),c("connectgaps")),l.hasMarkers(n)&&T(r,n,a,i,c,{gradient:!0}),l.hasText(n)&&(c("texttemplate"),s(r,n,i,c));var g=[];(l.hasMarkers(n)||l.hasText(n))&&(c("cliponaxis"),c("marker.maxdisplayed"),g.push("points")),c("fill"),n.fill!=="none"&&(t(r,n,a,c),l.hasLines(n)||d(r,n,c)),n.fill!=="tonext"&&n.fill!=="toself"||g.push("fills"),c("hoveron",g.join("+")||"points"),k.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},4524:function($){$.exports=function(R,e,k,A,l){if(e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),A[l]){var T=A[l];R.a=T.a,R.b=T.b,R.c=T.c}else R.a=e.a,R.b=e.b,R.c=e.c;return R}},93645:function($,R,e){var k=e(89298);$.exports=function(A,l,T){var x={},d=T[l.subplot]._subplot;return x.aLabel=k.tickText(d.aaxis,A.a,!0).text,x.bLabel=k.tickText(d.baxis,A.b,!0).text,x.cLabel=k.tickText(d.caxis,A.c,!0).text,x}},47250:function($,R,e){var k=e(33720);$.exports=function(A,l,T,x){var d=k(A,l,T,x);if(d&&d[0].index!==!1){var s=d[0];if(s.index===void 0){var t=1-s.y0/A.ya._length,o=A.xa._length,r=o*t/2,n=o-r;return s.x0=Math.max(Math.min(s.x0,n),r),s.x1=Math.max(Math.min(s.x1,n),r),d}var a=s.cd[s.index],i=s.trace,c=s.subplot;s.a=a.a,s.b=a.b,s.c=a.c,s.xLabelVal=void 0,s.yLabelVal=void 0;var h={};h[i.subplot]={_subplot:c};var f=i._module.formatLabels(a,i,h);s.aLabel=f.aLabel,s.bLabel=f.bLabel,s.cLabel=f.cLabel;var b=a.hi||i.hoverinfo,v=[];if(!i.hovertemplate){var g=b.split("+");g.indexOf("all")!==-1&&(g=["a","b","c"]),g.indexOf("a")!==-1&&y(c.aaxis,s.aLabel),g.indexOf("b")!==-1&&y(c.baxis,s.bLabel),g.indexOf("c")!==-1&&y(c.caxis,s.cLabel)}return s.extraText=v.join("<br>"),s.hovertemplate=i.hovertemplate,d}function y(p,m){v.push(p._hovertitle+": "+m)}}},52979:function($,R,e){$.exports={attributes:e(50413),supplyDefaults:e(46008),colorbar:e(4898),formatLabels:e(93645),calc:e(54337),plot:e(7507),style:e(16296).style,styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(47250),selectPoints:e(98002),eventData:e(4524),moduleType:"trace",name:"scatterternary",basePlotModule:e(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function($,R,e){var k=e(32663);$.exports=function(A,l,T){var x=l.plotContainer;x.select(".scatterlayer").selectAll("*").remove();for(var d=l.xaxis,s=l.yaxis,t={xaxis:d,yaxis:s,plot:x,layerClipId:l._hasClipOnAxisFalse?l.clipIdRelative:null},o=l.layers.frontplot.select("g.scatterlayer"),r=0;r<T.length;r++){var n=T[r];n.length&&(n[0].trace._xA=d,n[0].trace._yA=s)}k(A,t,T,o)}},46880:function($,R,e){var k=e(82196),A=e(50693),l=e(12663).axisHoverFormat,T=e(5386).f,x=e(42341),d=e(85555).idRegex,s=e(44467).templatedArray,t=e(1426).extendFlat,o=k.marker,r=o.line,n=t(A("marker.line",{editTypeOverride:"calc"}),{width:t({},r.width,{editType:"calc"}),editType:"calc"}),a=t(A("marker"),{symbol:o.symbol,angle:o.angle,size:t({},o.size,{editType:"markerSize"}),sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:o.opacity,colorbar:o.colorbar,line:n,editType:"calc"});function i(c){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:d[c],editType:"plot"}}}a.color.editType=a.cmin.editType=a.cmax.editType="style",$.exports={dimensions:s("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},x.text,{}),hovertext:t({},x.hovertext,{}),hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),marker:a,xaxes:i("x"),yaxes:i("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:x.selected.marker,editType:"calc"},unselected:{marker:x.unselected.marker,editType:"calc"},opacity:x.opacity}},65017:function($,R,e){var k=e(73972),A=e(83312);$.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(46880),supplyDefaults:e(25784),colorbar:e(4898),calc:e(87625),plot:e(79410),hoverPoints:e(8567).hoverPoints,selectPoints:e(8689),editStyle:e(28801),meta:{}},k.register(A)},16947:function($,R,e){var k=e(46075),A=e(73972),l=e(79749),T=e(27659).a0,x=e(93612),d=e(41675).getFromId,s=e(89298).shouldShowZeroLine,t="splom",o={};function r(a,i,c){for(var h=c.matrixOptions.data.length,f=i._visibleDims,b=c.viewOpts.ranges=new Array(h),v=0;v<f.length;v++){var g=f[v],y=b[v]=new Array(4),p=d(a,i._diag[g][0]);p&&(y[0]=p.r2l(p.range[0]),y[2]=p.r2l(p.range[1]));var m=d(a,i._diag[g][1]);m&&(y[1]=m.r2l(m.range[0]),y[3]=m.r2l(m.range[1]))}c.selectBatch.length||c.unselectBatch.length?c.matrix.update({ranges:b},{ranges:b}):c.matrix.update({ranges:b})}function n(a){var i=a._fullLayout,c=i._glcanvas.data()[0].regl,h=i._splomGrid;h||(h=i._splomGrid=k(c)),h.update(function(f){var b,v=f._context.plotGlPixelRatio,g=f._fullLayout,y=g._size,p=[0,0,g.width*v,g.height*v],m={};function w(j,K,G,V,W,J){G*=v,V*=v,W*=v,J*=v;var X=K[j+"color"],ee=K[j+"width"],re=String(X+ee);re in m?m[re].data.push(NaN,NaN,G,V,W,J):m[re]={data:[G,V,W,J],join:"rect",thickness:ee*v,color:X,viewport:p,range:p,overlay:!1}}for(b in g._splomSubplots){var u,S,_=g._plots[b],E=_.xaxis,L=_.yaxis,C=E._gridVals,P=L._gridVals,I=E._offset,U=E._length,z=L._length,H=y.b+L.domain[0]*y.h,F=-L._m,N=-F*L.r2l(L.range[0],L.calendar);if(E.showgrid)for(b=0;b<C.length;b++)u=I+E.l2p(C[b].x),w("grid",E,u,H,u,H+z);if(L.showgrid)for(b=0;b<P.length;b++)w("grid",L,I,S=H+N+F*P[b].x,I+U,S);s(f,E,L)&&(u=I+E.l2p(0),w("zeroline",E,u,H,u,H+z)),s(f,L,E)&&w("zeroline",L,I,S=H+N+0,I+U,S)}var B=[];for(b in m)B.push(m[b]);return B}(a))}$.exports={name:t,attr:x.attr,attrRegex:x.attrRegex,layoutAttributes:x.layoutAttributes,supplyLayoutDefaults:x.supplyLayoutDefaults,drawFramework:x.drawFramework,plot:function(a){var i=a._fullLayout,c=A.getModule(t),h=T(a.calcdata,c)[0];l(a,["ANGLE_instanced_arrays","OES_element_index_uint"],o)&&(i._hasOnlyLargeSploms&&n(a),c.plot(a,{},h))},drag:function(a){var i=a.calcdata,c=a._fullLayout;c._hasOnlyLargeSploms&&n(a);for(var h=0;h<i.length;h++){var f=i[h][0].trace,b=c._splomScenes[f.uid];f.type==="splom"&&b&&b.matrix&&r(a,f,b)}},updateGrid:n,clean:function(a,i,c,h){var f,b={};if(h._splomScenes){for(f=0;f<a.length;f++){var v=a[f];v.type==="splom"&&(b[v.uid]=1)}for(f=0;f<c.length;f++){var g=c[f];if(!b[g.uid]){var y=h._splomScenes[g.uid];y&&y.destroy&&y.destroy(),h._splomScenes[g.uid]=null,delete h._splomScenes[g.uid]}}}Object.keys(h._splomScenes||{}).length===0&&delete h._splomScenes,h._splomGrid&&!i._hasOnlyLargeSploms&&h._hasOnlyLargeSploms&&(h._splomGrid.destroy(),h._splomGrid=null,delete h._splomGrid),x.clean(a,i,c,h)},updateFx:x.updateFx,toSVG:x.toSVG,reglPrecompiled:o}},87625:function($,R,e){var k=e(71828),A=e(41675),l=e(47761).calcMarkerSize,T=e(47761).calcAxisExpansion,x=e(36922),d=e(19635).markerSelection,s=e(19635).markerStyle,t=e(10164),o=e(50606).BADNUM,r=e(78232).TOO_MANY_POINTS;$.exports=function(n,a){var i,c,h,f,b,v,g=a.dimensions,y=a._length,p={},m=p.cdata=[],w=p.data=[],u=a._visibleDims=[];function S(E,L){for(var C=E.makeCalcdata({v:L.values,vcalendar:a.calendar},"v"),P=0;P<C.length;P++)C[P]=C[P]===o?NaN:C[P];m.push(C),w.push(E.type==="log"?k.simpleMap(C,E.c2l):C)}for(i=0;i<g.length;i++)if((h=g[i]).visible){if(f=A.getFromId(n,a._diag[i][0]),b=A.getFromId(n,a._diag[i][1]),f&&b&&f.type!==b.type){k.log("Skipping splom dimension "+i+" with conflicting axis types");continue}f?(S(f,h),b&&b.type==="category"&&(b._categories=f._categories.slice())):S(b,h),u.push(i)}for(x(n,a),k.extendFlat(p,s(n,a)),v=m.length*y>r?p.sizeAvg||Math.max(p.size,3):l(a,y),c=0;c<u.length;c++)h=g[i=u[c]],f=A.getFromId(n,a._diag[i][0])||{},b=A.getFromId(n,a._diag[i][1])||{},T(n,a,f,b,m[c],m[c],v);var _=t(n,a);return _.matrix||(_.matrix=!0),_.matrixOptions=p,_.selectedOptions=d(n,a,a.selected),_.unselectedOptions=d(n,a,a.unselected),[{x:!1,y:!1,t:{},trace:a}]}},25784:function($,R,e){var k=e(71828),A=e(85501),l=e(46880),T=e(34098),x=e(49508),d=e(94397),s=e(68645).isOpenSymbol;function t(o,r){function n(i,c){return k.coerce(o,r,l.dimensions,i,c)}n("label");var a=n("values");a&&a.length?n("visible"):r.visible=!1,n("axis.type"),n("axis.matches")}$.exports=function(o,r,n,a){function i(y,p){return k.coerce(o,r,l,y,p)}var c=A(o,r,{name:"dimensions",handleItemDefaults:t}),h=i("diagonal.visible"),f=i("showupperhalf"),b=i("showlowerhalf");if(d(r,c,"values")&&(h||f||b)){i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),x(o,r,n,a,i,{noAngleRef:!0,noStandOff:!0});var v=s(r.marker.symbol),g=T.isBubble(r);i("marker.line.width",v||g?1:0),function(y,p,m,w){var u,S,_=p.dimensions,E=_.length,L=p.showupperhalf,C=p.showlowerhalf,P=p.diagonal.visible,I=new Array(E),U=new Array(E);for(u=0;u<E;u++){var z=u?u+1:"";I[u]="x"+z,U[u]="y"+z}var H=w("xaxes",I),F=w("yaxes",U),N=p._diag=new Array(E);p._xaxes={},p._yaxes={};var B=[],j=[];function K(se,fe,ye,ge){if(se){var he=se.charAt(0),ve=m._splomAxes[he];if(p["_"+he+"axes"][se]=1,ge.push(se),!(se in ve)){var Oe=ve[se]={};ye&&(Oe.label=ye.label||"",ye.visible&&ye.axis&&(ye.axis.type&&(Oe.type=ye.axis.type),ye.axis.matches&&(Oe.matches=fe)))}}}var G=!P&&!C,V=!P&&!L;for(p._axesDim={},u=0;u<E;u++){var W=_[u],J=u===0,X=u===E-1,ee=J&&G||X&&V?void 0:H[u],re=J&&V||X&&G?void 0:F[u];K(ee,re,W,B),K(re,ee,W,j),N[u]=[ee,re],p._axesDim[ee]=u,p._axesDim[re]=u}for(u=0;u<B.length;u++)for(S=0;S<j.length;S++){var ie=B[u]+j[S];u>S&&L||u<S&&C?m._splomSubplots[ie]=1:u!==S||!P&&C&&L||(m._splomSubplots[ie]=1)}(!C||!P&&L&&C)&&(m._splomGridDflt.xside="bottom",m._splomGridDflt.yside="left")}(0,r,a,i),k.coerceSelectionMarkerOpacity(r,i)}else r.visible=!1}},28801:function($,R,e){var k=e(71828),A=e(36922),l=e(19635).markerStyle;$.exports=function(T,x){var d=x.trace,s=T._fullLayout._splomScenes[d.uid];if(s){A(T,d),k.extendFlat(s.matrixOptions,l(T,d));var t=k.extendFlat({},s.matrixOptions,s.viewOpts);s.matrix.update(t,null)}}},35948:function($,R){R.getDimIndex=function(e,k){for(var A=k._id,l={x:0,y:1}[A.charAt(0)],T=e._visibleDims,x=0;x<T.length;x++){var d=T[x];if(e._diag[d][l]===A)return x}return!1}},8567:function($,R,e){var k=e(35948),A=e(20794).calcHover;$.exports={hoverPoints:function(l,T,x){var d=l.cd[0].trace,s=l.scene.matrixOptions.cdata,t=l.xa,o=l.ya,r=t.c2p(T),n=o.c2p(x),a=l.distance,i=k.getDimIndex(d,t),c=k.getDimIndex(d,o);if(i===!1||c===!1)return[l];for(var h,f,b=s[i],v=s[c],g=a,y=0;y<b.length;y++){var p=b[y],m=v[y],w=t.c2p(p)-r,u=o.c2p(m)-n,S=Math.sqrt(w*w+u*u);S<g&&(g=f=S,h=y)}return l.index=h,l.distance=g,l.dxy=f,h===void 0?[l]:[A(l,b,v,d)]}}},6419:function($,R,e){var k=e(65017);k.basePlotModule=e(16947),$.exports=k},79410:function($,R,e){var k=e(60487),A=e(71828),l=e(41675),T=e(64505).selectMode;function x(d,s){var t,o,r,n,a,i=d._fullLayout,c=i._size,h=s.trace,f=s.t,b=i._splomScenes[h.uid],v=b.matrixOptions,g=v.cdata,y=i._glcanvas.data()[0].regl,p=i.dragmode;if(g.length!==0){v.lower=h.showupperhalf,v.upper=h.showlowerhalf,v.diagonal=h.diagonal.visible;var m=h._visibleDims,w=g.length,u=b.viewOpts={};for(u.ranges=new Array(w),u.domains=new Array(w),a=0;a<m.length;a++){r=m[a];var S=u.ranges[a]=new Array(4),_=u.domains[a]=new Array(4);(t=l.getFromId(d,h._diag[r][0]))&&(S[0]=t._rl[0],S[2]=t._rl[1],_[0]=t.domain[0],_[2]=t.domain[1]),(o=l.getFromId(d,h._diag[r][1]))&&(S[1]=o._rl[0],S[3]=o._rl[1],_[1]=o.domain[0],_[3]=o.domain[1])}var E=d._context.plotGlPixelRatio,L=c.l*E,C=c.b*E,P=c.w*E,I=c.h*E;u.viewport=[L,C,P+L,I+C],b.matrix===!0&&(b.matrix=k(y));var U=i.clickmode.indexOf("select")>-1,z=!0;if(T(p)||h.selectedpoints||U){var H=h._length;if(h.selectedpoints){b.selectBatch=h.selectedpoints;var F=h.selectedpoints,N={};for(r=0;r<F.length;r++)N[F[r]]=!0;var B=[];for(r=0;r<H;r++)N[r]||B.push(r);b.unselectBatch=B}var j=f.xpx=new Array(w),K=f.ypx=new Array(w);for(a=0;a<m.length;a++){if(r=m[a],t=l.getFromId(d,h._diag[r][0]))for(j[a]=new Array(H),n=0;n<H;n++)j[a][n]=t.c2p(g[a][n]);if(o=l.getFromId(d,h._diag[r][1]))for(K[a]=new Array(H),n=0;n<H;n++)K[a][n]=o.c2p(g[a][n])}if(b.selectBatch.length||b.unselectBatch.length){var G=A.extendFlat({},v,b.unselectedOptions,u),V=A.extendFlat({},v,b.selectedOptions,u);b.matrix.update(G,V),z=!1}}else f.xpx=f.ypx=null;if(z){var W=A.extendFlat({},v,u);b.matrix.update(W,null)}}}$.exports=function(d,s,t){if(t.length)for(var o=0;o<t.length;o++)x(d,t[o][0])}},10164:function($,R,e){var k=e(71828);$.exports=function(A,l){var T=A._fullLayout,x=l.uid,d=T._splomScenes;d||(d=T._splomScenes={});var s={dirty:!0,selectBatch:[],unselectBatch:[]},t=d[l.uid];return t||((t=d[x]=k.extendFlat({},s,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||k.extendFlat(t,s),t}},8689:function($,R,e){var k=e(71828),A=k.pushUnique,l=e(34098),T=e(35948);$.exports=function(x,d){var s=x.cd,t=s[0].trace,o=s[0].t,r=x.scene,n=r.matrixOptions.cdata,a=x.xaxis,i=x.yaxis,c=[];if(!r)return c;var h=!l.hasMarkers(t)&&!l.hasText(t);if(t.visible!==!0||h)return c;var f=T.getDimIndex(t,a),b=T.getDimIndex(t,i);if(f===!1||b===!1)return c;var v=o.xpx[f],g=o.ypx[b],y=n[f],p=n[b],m=(x.scene.selectBatch||[]).slice(),w=[];if(d!==!1&&!d.degenerate)for(var u=0;u<y.length;u++)d.contains([v[u],g[u]],null,u,x)?(c.push({pointNumber:u,x:y[u],y:p[u]}),A(m,u)):m.indexOf(u)!==-1?A(m,u):w.push(u);var S=r.matrixOptions;return m.length||w.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,k.extendFlat({},S,r.selectedOptions,r.viewOpts)):r.matrix.update(S,null),r.selectBatch=m,r.unselectBatch=w,c}},21850:function($,R,e){var k=e(50693),A=e(12663).axisHoverFormat,l=e(5386).f,T=e(2418),x=e(9012),d=e(1426).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:l({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:A("u",1),vhoverformat:A("v",1),whoverformat:A("w",1),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),showlegend:d({},x.showlegend,{dflt:!1})};d(s,k("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=d({},x.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,$.exports=s},88489:function($,R,e){var k=e(71828),A=e(78803);function l(d){var s,t,o,r,n,a,i,c,h,f,b,v,g=d._x,y=d._y,p=d._z,m=d._len,w=-1/0,u=1/0,S=-1/0,_=1/0,E=-1/0,L=1/0,C="";for(m&&(i=g[0],h=y[0],b=p[0]),m>1&&(c=g[m-1],f=y[m-1],v=p[m-1]),s=0;s<m;s++)w=Math.max(w,g[s]),u=Math.min(u,g[s]),S=Math.max(S,y[s]),_=Math.min(_,y[s]),E=Math.max(E,p[s]),L=Math.min(L,p[s]),r||g[s]===i||(r=!0,C+="x"),n||y[s]===h||(n=!0,C+="y"),a||p[s]===b||(a=!0,C+="z");r||(C+="x"),n||(C+="y"),a||(C+="z");var P=T(d._x),I=T(d._y),U=T(d._z);C=(C=(C=C.replace("x",(i>c?"-":"+")+"x")).replace("y",(h>f?"-":"+")+"y")).replace("z",(b>v?"-":"+")+"z");var z=function(){m=0,P=[],I=[],U=[]};(!m||m<P.length*I.length*U.length)&&z();var H=function(he){return he==="x"?g:he==="y"?y:p},F=function(he){return he==="x"?P:he==="y"?I:U},N=function(he){return he[m-1]<he[0]?-1:1},B=H(C[1]),j=H(C[3]),K=H(C[5]),G=F(C[1]).length,V=F(C[3]).length,W=F(C[5]).length,J=!1,X=function(he,ve,Oe){return G*(V*he+ve)+Oe},ee=N(H(C[1])),re=N(H(C[3])),ie=N(H(C[5]));for(s=0;s<W-1;s++){for(t=0;t<V-1;t++){for(o=0;o<G-1;o++){var se=X(s,t,o),fe=X(s,t,o+1),ye=X(s,t+1,o),ge=X(s+1,t,o);if(B[se]*ee<B[fe]*ee&&j[se]*re<j[ye]*re&&K[se]*ie<K[ge]*ie||(J=!0),J)break}if(J)break}if(J)break}return J&&(k.warn("Encountered arbitrary coordinates! Unable to input data grid."),z()),{xMin:u,yMin:_,zMin:L,xMax:w,yMax:S,zMax:E,Xs:P,Ys:I,Zs:U,len:m,fill:C}}function T(d){return k.distinctVals(d).vals}function x(d,s){if(s===void 0&&(s=d.length),k.isTypedArray(d))return d.subarray(0,s);for(var t=[],o=0;o<s;o++)t[o]=+d[o];return t}$.exports={calc:function(d,s){s._len=Math.min(s.u.length,s.v.length,s.w.length,s.x.length,s.y.length,s.z.length),s._u=x(s.u,s._len),s._v=x(s.v,s._len),s._w=x(s.w,s._len),s._x=x(s.x,s._len),s._y=x(s.y,s._len),s._z=x(s.z,s._len);var t=l(s);s._gridFill=t.fill,s._Xs=t.Xs,s._Ys=t.Ys,s._Zs=t.Zs,s._len=t.len;var o,r,n,a=0;s.starts&&(o=x(s.starts.x||[]),r=x(s.starts.y||[]),n=x(s.starts.z||[]),a=Math.min(o.length,r.length,n.length)),s._startsX=o||[],s._startsY=r||[],s._startsZ=n||[];var i,c=0,h=1/0;for(i=0;i<s._len;i++){var f=s._u[i],b=s._v[i],v=s._w[i],g=Math.sqrt(f*f+b*b+v*v);c=Math.max(c,g),h=Math.min(h,g)}for(A(d,s,{vals:[h,c],containerStr:"",cLetter:"c"}),i=0;i<a;i++){var y=o[i];t.xMax=Math.max(t.xMax,y),t.xMin=Math.min(t.xMin,y);var p=r[i];t.yMax=Math.max(t.yMax,p),t.yMin=Math.min(t.yMin,p);var m=n[i];t.zMax=Math.max(t.zMax,m),t.zMin=Math.min(t.zMin,m)}s._slen=a,s._normMax=c,s._xbnds=[t.xMin,t.xMax],s._ybnds=[t.yMin,t.yMax],s._zbnds=[t.zMin,t.zMax]},filter:x,processGrid:l}},90154:function($,R,e){var k=e(9330).gl_streamtube3d,A=k.createTubeMesh,l=e(71828),T=e(81697).parseColorScale,x=e(21081).extractOpts,d=e(90060),s={xaxis:0,yaxis:1,zaxis:2};function t(i,c){this.scene=i,this.uid=c,this.mesh=null,this.data=null}var o=t.prototype;function r(i){var c=i.length;return c>2?i.slice(1,c-1):c===2?[(i[0]+i[1])/2]:i}function n(i){var c=i.length;return c===1?[.5,.5]:[i[1]-i[0],i[c-1]-i[c-2]]}function a(i,c){var h=i.fullSceneLayout,f=i.dataScale,b=c._len,v={};function g(G,V){var W=h[V],J=f[s[V]];return l.simpleMap(G,function(X){return W.d2l(X)*J})}if(v.vectors=d(g(c._u,"xaxis"),g(c._v,"yaxis"),g(c._w,"zaxis"),b),!b)return{positions:[],cells:[]};var y=g(c._Xs,"xaxis"),p=g(c._Ys,"yaxis"),m=g(c._Zs,"zaxis");if(v.meshgrid=[y,p,m],v.gridFill=c._gridFill,c._slen)v.startingPositions=d(g(c._startsX,"xaxis"),g(c._startsY,"yaxis"),g(c._startsZ,"zaxis"));else{for(var w=p[0],u=r(y),S=r(m),_=new Array(u.length*S.length),E=0,L=0;L<u.length;L++)for(var C=0;C<S.length;C++)_[E++]=[u[L],w,S[C]];v.startingPositions=_}v.colormap=T(c),v.tubeSize=c.sizeref,v.maxLength=c.maxdisplayed;var P=g(c._xbnds,"xaxis"),I=g(c._ybnds,"yaxis"),U=g(c._zbnds,"zaxis"),z=n(y),H=n(p),F=n(m),N=[[P[0]-z[0],I[0]-H[0],U[0]-F[0]],[P[1]+z[1],I[1]+H[1],U[1]+F[1]]],B=k(v,N),j=x(c);B.vertexIntensityBounds=[j.min/c._normMax,j.max/c._normMax];var K=c.lightposition;return B.lightPosition=[K.x,K.y,K.z],B.ambient=c.lighting.ambient,B.diffuse=c.lighting.diffuse,B.specular=c.lighting.specular,B.roughness=c.lighting.roughness,B.fresnel=c.lighting.fresnel,B.opacity=c.opacity,c._pad=B.tubeScale*c.sizeref*2,B}o.handlePick=function(i){var c=this.scene.fullSceneLayout,h=this.scene.dataScale;function f(g,y){var p=c[y],m=h[s[y]];return p.l2c(g)/m}if(i.object===this.mesh){var b=i.data.position,v=i.data.velocity;return i.traceCoordinate=[f(b[0],"xaxis"),f(b[1],"yaxis"),f(b[2],"zaxis"),f(v[0],"xaxis"),f(v[1],"yaxis"),f(v[2],"zaxis"),i.data.intensity*this.data._normMax,i.data.divergence],i.textLabel=this.data.hovertext||this.data.text,!0}},o.update=function(i){this.data=i;var c=a(this.scene,i);this.mesh.update(c)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(i,c){var h=i.glplot.gl,f=a(i,c),b=A(h,f),v=new t(i,c.uid);return v.mesh=b,v.data=c,b._trace=v,i.glplot.add(b),v}},22459:function($,R,e){var k=e(71828),A=e(1586),l=e(21850);$.exports=function(T,x,d,s){function t(h,f){return k.coerce(T,x,l,h,f)}var o=t("u"),r=t("v"),n=t("w"),a=t("x"),i=t("y"),c=t("z");o&&o.length&&r&&r.length&&n&&n.length&&a&&a.length&&i&&i.length&&c&&c.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),A(T,x,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),x._length=null):x.visible=!1}},61510:function($,R,e){$.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(58547),categories:["gl3d","showLegend"],attributes:e(21850),supplyDefaults:e(22459),colorbar:{min:"cmin",max:"cmax"},calc:e(88489).calc,plot:e(90154),eventData:function(k,A){return k.tubex=k.x,k.tubey=k.y,k.tubez=k.z,k.tubeu=A.traceCoordinate[3],k.tubev=A.traceCoordinate[4],k.tubew=A.traceCoordinate[5],k.norm=A.traceCoordinate[6],k.divergence=A.traceCoordinate[7],delete k.x,delete k.y,delete k.z,k},meta:{}}},57564:function($,R,e){var k=e(9012),A=e(5386).f,l=e(5386).s,T=e(50693),x=e(27670).Y,d=e(34e3),s=e(7055),t=e(1426).extendFlat;$.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},d.marker.line.color,{dflt:null}),width:t({},d.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:d.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:l({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:d.hovertext,hoverinfo:t({},k.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:A({},{keys:s.eventDataKeys}),textfont:d.textfont,insidetextorientation:d.insidetextorientation,insidetextfont:d.insidetextfont,outsidetextfont:t({},d.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:d.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:x({name:"sunburst",trace:!0,editType:"calc"})}},66888:function($,R,e){var k=e(74875);R.name="sunburst",R.plot=function(A,l,T,x){k.plotBasePlot(R.name,A,l,T,x)},R.clean=function(A,l,T,x){k.cleanBasePlot(R.name,A,l,T,x)}},52147:function($,R,e){var k=e(674),A=e(92770),l=e(71828),T=e(21081).makeColorScaleFuncFromTrace,x=e(32354).makePullColorFn,d=e(32354).generateExtendedColors,s=e(21081).calc,t=e(50606).ALMOST_EQUAL,o={},r={},n={};function a(i,c,h){var f=0,b=i.children;if(b){for(var v=b.length,g=0;g<v;g++)f+=a(b[g],c,h);h.branches&&f++}else h.leaves&&f++;return i.value=i.data.data.value=f,c._values||(c._values=[]),c._values[i.data.data.i]=f,f}R.calc=function(i,c){var h,f,b,v,g,y,p=i._fullLayout,m=c.ids,w=l.isArrayOrTypedArray(m),u=c.labels,S=c.parents,_=c.values,E=l.isArrayOrTypedArray(_),L=[],C={},P={},I=function(ie){return ie||typeof ie=="number"},U=function(ie){return!E||A(_[ie])&&_[ie]>=0};w?(h=Math.min(m.length,S.length),f=function(ie){return I(m[ie])&&U(ie)},b=function(ie){return String(m[ie])}):(h=Math.min(u.length,S.length),f=function(ie){return I(u[ie])&&U(ie)},b=function(ie){return String(u[ie])}),E&&(h=Math.min(h,_.length));for(var z=0;z<h;z++)if(f(z)){var H=b(z),F=I(S[z])?String(S[z]):"",N={i:z,id:H,pid:F,label:I(u[z])?String(u[z]):""};E&&(N.v=+_[z]),L.push(N),g=H,C[v=F]?C[v].push(g):C[v]=[g],P[g]=1}if(C[""]){if(C[""].length>1){for(var B=l.randstr(),j=0;j<L.length;j++)L[j].pid===""&&(L[j].pid=B);L.unshift({hasMultipleRoots:!0,id:B,pid:"",label:""})}}else{var K,G=[];for(K in C)P[K]||G.push(K);if(G.length!==1)return l.warn(["Multiple implied roots, cannot build",c.type,"hierarchy of",c.name+".","These roots include:",G.join(", ")].join(" "));K=G[0],L.unshift({hasImpliedRoot:!0,id:K,pid:"",label:K})}try{y=k.stratify().id(function(ie){return ie.id}).parentId(function(ie){return ie.pid})(L)}catch(ie){return l.warn(["Failed to build",c.type,"hierarchy of",c.name+".","Error:",ie.message].join(" "))}var V=k.hierarchy(y),W=!1;if(E)switch(c.branchvalues){case"remainder":V.sum(function(ie){return ie.data.v});break;case"total":V.each(function(ie){var se=ie.data.data,fe=se.v;if(ie.children){var ye=ie.children.reduce(function(ge,he){return ge+he.data.data.v},0);if((se.hasImpliedRoot||se.hasMultipleRoots)&&(fe=ye),fe<ye*t)return W=!0,l.warn(["Total value for node",ie.data.data.id,"of",c.name,"is smaller than the sum of its children.",`
parent value =`,fe,`
children sum =`,ye].join(" "))}ie.value=fe})}else a(V,c,{branches:c.count.indexOf("branches")!==-1,leaves:c.count.indexOf("leaves")!==-1});if(!W){var J,X;c.sort&&V.sort(function(ie,se){return se.value-ie.value});var ee=c.marker.colors||[],re=!!ee.length;return c._hasColorscale?(re||(ee=E?c.values:c._values),s(i,c,{vals:ee,containerStr:"marker",cLetter:"c"}),X=T(c.marker)):J=x(p["_"+c.type+"colormap"]),V.each(function(ie){var se=ie.data.data;se.color=c._hasColorscale?X(ee[se.i]):J(ee[se.i],se.id)}),L[0].hierarchy=V,L}},R._runCrossTraceCalc=function(i,c){var h=c._fullLayout,f=c.calcdata,b=h[i+"colorway"],v=h["_"+i+"colormap"];h["extend"+i+"colors"]&&(b=d(b,i==="icicle"?n:i==="treemap"?r:o));var g,y=0;function p(u){var S=u.data.data,_=S.id;S.color===!1&&(v[_]?S.color=v[_]:u.parent?u.parent.parent?S.color=u.parent.data.data.color:(v[_]=S.color=b[y%b.length],y++):S.color=g)}for(var m=0;m<f.length;m++){var w=f[m][0];w.trace.type===i&&w.hierarchy&&(g=w.trace.root.color,w.hierarchy.each(p))}},R.crossTraceCalc=function(i){return R._runCrossTraceCalc("sunburst",i)}},7055:function($){$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function($,R,e){var k=e(71828),A=e(57564),l=e(27670).c,T=e(90769).handleText,x=e(21081),d=x.hasColorscale,s=x.handleDefaults;$.exports=function(t,o,r,n){function a(v,g){return k.coerce(t,o,A,v,g)}var i=a("labels"),c=a("parents");if(i&&i.length&&c&&c.length){var h=a("values");h&&h.length?a("branchvalues"):a("count"),a("level"),a("maxdepth"),a("marker.line.width")&&a("marker.line.color",n.paper_bgcolor),a("marker.colors");var f=o._hasColorscale=d(t,"marker","colors")||(t.marker||{}).coloraxis;f&&s(t,o,n,a,{prefix:"marker.",cLetter:"c"}),a("leaf.opacity",f?1:.7);var b=a("text");a("texttemplate"),o.texttemplate||a("textinfo",Array.isArray(b)?"text+label":"label"),a("hovertext"),a("hovertemplate"),T(t,o,n,a,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("insidetextorientation"),a("sort"),a("rotation"),a("root.color"),l(o,n,a),o._length=null}else o.visible=!1}},83523:function($,R,e){var k=e(39898),A=e(73972),l=e(23469).appendArrayPointValue,T=e(30211),x=e(71828),d=e(11086),s=e(2791),t=e(53581).formatPieValue;function o(r,n,a){for(var i=r.data.data,c={curveNumber:n.index,pointNumber:i.i,data:n._input,fullData:n},h=0;h<a.length;h++){var f=a[h];f in r&&(c[f]=r[f])}return"parentString"in r&&!s.isHierarchyRoot(r)&&(c.parent=r.parentString),l(c,n,i.i),c}$.exports=function(r,n,a,i,c){var h=i[0],f=h.trace,b=h.hierarchy,v=f.type==="sunburst",g=f.type==="treemap"||f.type==="icicle";"_hasHoverLabel"in f||(f._hasHoverLabel=!1),"_hasHoverEvent"in f||(f._hasHoverEvent=!1),r.on("mouseover",function(y){var p=a._fullLayout;if(!a._dragging&&p.hovermode!==!1){var m,w=a._fullData[f.index],u=y.data.data,S=u.i,_=s.isHierarchyRoot(y),E=s.getParent(b,y),L=s.getValue(y),C=function(ee){return x.castOption(w,S,ee)},P=C("hovertemplate"),I=T.castHoverinfo(w,p,S),U=p.separators;if(P||I&&I!=="none"&&I!=="skip"){var z,H;v&&(z=h.cx+y.pxmid[0]*(1-y.rInscribed),H=h.cy+y.pxmid[1]*(1-y.rInscribed)),g&&(z=y._hoverX,H=y._hoverY);var F,N={},B=[],j=[],K=function(ee){return B.indexOf(ee)!==-1};I&&(B=I==="all"?w._module.attributes.hoverinfo.flags:I.split("+")),N.label=u.label,K("label")&&N.label&&j.push(N.label),u.hasOwnProperty("v")&&(N.value=u.v,N.valueLabel=t(N.value,U),K("value")&&j.push(N.valueLabel)),N.currentPath=y.currentPath=s.getPath(y.data),K("current path")&&!_&&j.push(N.currentPath);var G=[],V=function(){G.indexOf(F)===-1&&(j.push(F),G.push(F))};N.percentParent=y.percentParent=L/s.getValue(E),N.parent=y.parentString=s.getPtLabel(E),K("percent parent")&&(F=s.formatPercent(N.percentParent,U)+" of "+N.parent,V()),N.percentEntry=y.percentEntry=L/s.getValue(n),N.entry=y.entry=s.getPtLabel(n),!K("percent entry")||_||y.onPathbar||(F=s.formatPercent(N.percentEntry,U)+" of "+N.entry,V()),N.percentRoot=y.percentRoot=L/s.getValue(b),N.root=y.root=s.getPtLabel(b),K("percent root")&&!_&&(F=s.formatPercent(N.percentRoot,U)+" of "+N.root,V()),N.text=C("hovertext")||C("text"),K("text")&&(F=N.text,x.isValidTextValue(F)&&j.push(F)),m=[o(y,w,c.eventDataKeys)];var W={trace:w,y:H,_x0:y._x0,_x1:y._x1,_y0:y._y0,_y1:y._y1,text:j.join("<br>"),name:P||K("name")?w.name:void 0,color:C("hoverlabel.bgcolor")||u.color,borderColor:C("hoverlabel.bordercolor"),fontFamily:C("hoverlabel.font.family"),fontSize:C("hoverlabel.font.size"),fontColor:C("hoverlabel.font.color"),nameLength:C("hoverlabel.namelength"),textAlign:C("hoverlabel.align"),hovertemplate:P,hovertemplateLabels:N,eventData:m};v&&(W.x0=z-y.rInscribed*y.rpx1,W.x1=z+y.rInscribed*y.rpx1,W.idealAlign=y.pxmid[0]<0?"left":"right"),g&&(W.x=z,W.idealAlign=z<0?"left":"right");var J=[];T.loneHover(W,{container:p._hoverlayer.node(),outerContainer:p._paper.node(),gd:a,inOut_bbox:J}),m[0].bbox=J[0],f._hasHoverLabel=!0}if(g){var X=r.select("path.surface");c.styleOne(X,y,w,{hovered:!0})}f._hasHoverEvent=!0,a.emit("plotly_hover",{points:m||[o(y,w,c.eventDataKeys)],event:k.event})}}),r.on("mouseout",function(y){var p=a._fullLayout,m=a._fullData[f.index],w=k.select(this).datum();if(f._hasHoverEvent&&(y.originalEvent=k.event,a.emit("plotly_unhover",{points:[o(w,m,c.eventDataKeys)],event:k.event}),f._hasHoverEvent=!1),f._hasHoverLabel&&(T.loneUnhover(p._hoverlayer.node()),f._hasHoverLabel=!1),g){var u=r.select("path.surface");c.styleOne(u,w,m,{hovered:!1})}}),r.on("click",function(y){var p=a._fullLayout,m=a._fullData[f.index],w=v&&(s.isHierarchyRoot(y)||s.isLeaf(y)),u=s.getPtId(y),S=s.isEntry(y)?s.findEntryWithChild(b,u):s.findEntryWithLevel(b,u),_=s.getPtId(S),E={points:[o(y,m,c.eventDataKeys)],event:k.event};w||(E.nextLevel=_);var L=d.triggerHandler(a,"plotly_"+f.type+"click",E);if(L!==!1&&p.hovermode&&(a._hoverdata=[o(y,m,c.eventDataKeys)],T.click(a,k.event)),!w&&L!==!1&&!a._dragging&&!a._transitioning){A.call("_storeDirectGUIEdit",m,p._tracePreGUI[m.uid],{level:m.level});var C={data:[{level:_}],traces:[f.index]},P={frame:{redraw:!1,duration:c.transitionTime},transition:{duration:c.transitionTime,easing:c.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(p._hoverlayer.node()),A.call("animate",a,C,P)}})}},2791:function($,R,e){var k=e(71828),A=e(7901),l=e(6964),T=e(53581);function x(d){return d.data.data.pid}R.findEntryWithLevel=function(d,s){var t;return s&&d.eachAfter(function(o){if(R.getPtId(o)===s)return t=o.copy()}),t||d},R.findEntryWithChild=function(d,s){var t;return d.eachAfter(function(o){for(var r=o.children||[],n=0;n<r.length;n++){var a=r[n];if(R.getPtId(a)===s)return t=o.copy()}}),t||d},R.isEntry=function(d){return!d.parent},R.isLeaf=function(d){return!d.children},R.getPtId=function(d){return d.data.data.id},R.getPtLabel=function(d){return d.data.data.label},R.getValue=function(d){return d.value},R.isHierarchyRoot=function(d){return x(d)===""},R.setSliceCursor=function(d,s,t){var o=t.isTransitioning;if(!o){var r=d.datum();o=t.hideOnRoot&&R.isHierarchyRoot(r)||t.hideOnLeaves&&R.isLeaf(r)}l(d,o?null:"pointer")},R.getInsideTextFontKey=function(d,s,t,o,r){var n=(r||{}).onPathbar?"pathbar.textfont":"insidetextfont",a=t.data.data.i;return k.castOption(s,a,n+"."+d)||k.castOption(s,a,"textfont."+d)||o.size},R.getOutsideTextFontKey=function(d,s,t,o){var r=t.data.data.i;return k.castOption(s,r,"outsidetextfont."+d)||k.castOption(s,r,"textfont."+d)||o.size},R.isOutsideText=function(d,s){return!d._hasColorscale&&R.isHierarchyRoot(s)},R.determineTextFont=function(d,s,t,o){return R.isOutsideText(d,s)?function(r,n,a){return{color:R.getOutsideTextFontKey("color",r,n,a),family:R.getOutsideTextFontKey("family",r,n,a),size:R.getOutsideTextFontKey("size",r,n,a)}}(d,s,t):function(r,n,a,i){var c=(i||{}).onPathbar,h=n.data.data,f=h.i,b=k.castOption(r,f,(c?"pathbar.textfont":"insidetextfont")+".color");return!b&&r._input.textfont&&(b=k.castOption(r._input,f,"textfont.color")),{color:b||A.contrast(h.color),family:R.getInsideTextFontKey("family",r,n,a,i),size:R.getInsideTextFontKey("size",r,n,a,i)}}(d,s,t,o)},R.hasTransition=function(d){return!!(d&&d.duration>0)},R.getMaxDepth=function(d){return d.maxdepth>=0?d.maxdepth:1/0},R.isHeader=function(d,s){return!(R.isLeaf(d)||d.depth===s._maxDepth-1)},R.getParent=function(d,s){return R.findEntryWithLevel(d,x(s))},R.listPath=function(d,s){var t=d.parent;if(!t)return[];var o=s?[t.data[s]]:[t];return R.listPath(t,s).concat(o)},R.getPath=function(d){return R.listPath(d,"label").join("/")+"/"},R.formatValue=T.formatPieValue,R.formatPercent=function(d,s){var t=k.formatPercent(d,0);return t==="0%"&&(t=T.formatPiePercent(d,s)),t}},87619:function($,R,e){$.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(66888),categories:[],animatable:!0,attributes:e(57564),layoutAttributes:e(2654),supplyDefaults:e(17094),supplyLayoutDefaults:e(57034),calc:e(52147).calc,crossTraceCalc:e(52147).crossTraceCalc,plot:e(24714).plot,style:e(29969).style,colorbar:e(4898),meta:{}}},2654:function($){$.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57034:function($,R,e){var k=e(71828),A=e(2654);$.exports=function(l,T){function x(d,s){return k.coerce(l,T,A,d,s)}x("sunburstcolorway",T.colorway),x("extendsunburstcolors")}},24714:function($,R,e){var k=e(39898),A=e(674),l=e(29502).sX,T=e(91424),x=e(71828),d=e(63893),s=e(72597),t=s.recordMinTextSize,o=s.clearMinTextSize,r=e(14575),n=e(53581).getRotationAngle,a=r.computeTransform,i=r.transformInsideText,c=e(29969).styleOne,h=e(16688).resizeText,f=e(83523),b=e(7055),v=e(2791);function g(p,m,w,u){var S=p._context.staticPlot,_=p._fullLayout,E=!_.uniformtext.mode&&v.hasTransition(u),L=k.select(w).selectAll("g.slice"),C=m[0],P=C.trace,I=C.hierarchy,U=v.findEntryWithLevel(I,P.level),z=v.getMaxDepth(P),H=_._size,F=P.domain,N=H.w*(F.x[1]-F.x[0]),B=H.h*(F.y[1]-F.y[0]),j=.5*Math.min(N,B),K=C.cx=H.l+H.w*(F.x[1]+F.x[0])/2,G=C.cy=H.t+H.h*(1-F.y[0])-B/2;if(!U)return L.remove();var V=null,W={};E&&L.each(function(Te){W[v.getPtId(Te)]={rpx0:Te.rpx0,rpx1:Te.rpx1,x0:Te.x0,x1:Te.x1,transform:Te.transform},!V&&v.isEntry(Te)&&(V=Te)});var J=function(Te){return A.partition().size([2*Math.PI,Te.height+1])(Te)}(U).descendants(),X=U.height+1,ee=0,re=z;C.hasMultipleRoots&&v.isHierarchyRoot(U)&&(J=J.slice(1),X-=1,ee=1,re+=1),J=J.filter(function(Te){return Te.y1<=re});var ie=n(P.rotation);ie&&J.forEach(function(Te){Te.x0+=ie,Te.x1+=ie});var se=Math.min(X,z),fe=function(Te){return(Te-ee)/se*j},ye=function(Te,Q){return[Te*Math.cos(Q),-Te*Math.sin(Q)]},ge=function(Te){return x.pathAnnulus(Te.rpx0,Te.rpx1,Te.x0,Te.x1,K,G)},he=function(Te){return K+y(Te)[0]*(Te.transform.rCenter||0)+(Te.transform.x||0)},ve=function(Te){return G+y(Te)[1]*(Te.transform.rCenter||0)+(Te.transform.y||0)};(L=L.data(J,v.getPtId)).enter().append("g").classed("slice",!0),E?L.exit().transition().each(function(){var Te=k.select(this);Te.select("path.surface").transition().attrTween("d",function(Q){var oe=function(ce){var me,Ae=v.getPtId(ce),Ie=W[Ae],Ce=W[v.getPtId(U)];if(Ce){var Re=(ce.x1>Ce.x1?2*Math.PI:0)+ie;me=ce.rpx1<Ce.rpx1?{x0:ce.x0,x1:ce.x1,rpx0:0,rpx1:0}:{x0:Re,x1:Re,rpx0:ce.rpx0,rpx1:ce.rpx1}}else{var le,de=v.getPtId(ce.parent);L.each(function(nt){if(v.getPtId(nt)===de)return le=nt});var _e,Fe=le.children;Fe.forEach(function(nt,tt){if(v.getPtId(nt)===Ae)return _e=tt});var Ve=Fe.length,He=l(le.x0,le.x1);me={rpx0:j,rpx1:j,x0:He(_e/Ve),x1:He((_e+1)/Ve)}}return l(Ie,me)}(Q);return function(ce){return ge(oe(ce))}}),Te.select("g.slicetext").attr("opacity",0)}).remove():L.exit().remove(),L.order();var Oe=null;if(E&&V){var xe=v.getPtId(V);L.each(function(Te){Oe===null&&v.getPtId(Te)===xe&&(Oe=Te.x1)})}var ke=L;function Me(Te){var Q=Te.parent,oe=W[v.getPtId(Q)],ce={};if(oe){var me=Q.children,Ae=me.indexOf(Te),Ie=me.length,Ce=l(oe.x0,oe.x1);ce.x0=Ce(Ae/Ie),ce.x1=Ce(Ae/Ie)}else ce.x0=ce.x1=0;return ce}E&&(ke=ke.transition().each("end",function(){var Te=k.select(this);v.setSliceCursor(Te,p,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),ke.each(function(Te){var Q=k.select(this),oe=x.ensureSingle(Q,"path","surface",function(Re){Re.style("pointer-events",S?"none":"all")});Te.rpx0=fe(Te.y0),Te.rpx1=fe(Te.y1),Te.xmid=(Te.x0+Te.x1)/2,Te.pxmid=ye(Te.rpx1,Te.xmid),Te.midangle=-(Te.xmid-Math.PI/2),Te.startangle=-(Te.x0-Math.PI/2),Te.stopangle=-(Te.x1-Math.PI/2),Te.halfangle=.5*Math.min(x.angleDelta(Te.x0,Te.x1)||Math.PI,Math.PI),Te.ring=1-Te.rpx0/Te.rpx1,Te.rInscribed=function(Re){return Re.rpx0===0&&x.isFullCircle([Re.x0,Re.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(Re.halfangle)),Re.ring/2))}(Te),E?oe.transition().attrTween("d",function(Re){var le=function(de){var _e,Fe=W[v.getPtId(de)],Ve={x0:de.x0,x1:de.x1,rpx0:de.rpx0,rpx1:de.rpx1};if(Fe)_e=Fe;else if(V)if(de.parent)if(Oe){var He=(de.x1>Oe?2*Math.PI:0)+ie;_e={x0:He,x1:He}}else _e={rpx0:j,rpx1:j},x.extendFlat(_e,Me(de));else _e={rpx0:0,rpx1:0};else _e={x0:ie,x1:ie};return l(_e,Ve)}(Re);return function(de){return ge(le(de))}}):oe.attr("d",ge),Q.call(f,U,p,m,{eventDataKeys:b.eventDataKeys,transitionTime:b.CLICK_TRANSITION_TIME,transitionEasing:b.CLICK_TRANSITION_EASING}).call(v.setSliceCursor,p,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:p._transitioning}),oe.call(c,Te,P);var ce=x.ensureSingle(Q,"g","slicetext"),me=x.ensureSingle(ce,"text","",function(Re){Re.attr("data-notex",1)}),Ae=x.ensureUniformFontSize(p,v.determineTextFont(P,Te,_.font));me.text(R.formatSliceLabel(Te,U,P,m,_)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,Ae).call(d.convertToTspans,p);var Ie=T.bBox(me.node());Te.transform=i(Ie,Te,C),Te.transform.targetX=he(Te),Te.transform.targetY=ve(Te);var Ce=function(Re,le){var de=Re.transform;return a(de,le),de.fontSize=Ae.size,t(P.type,de,_),x.getTextTransform(de)};E?me.transition().attrTween("transform",function(Re){var le=function(de){var _e,Fe=W[v.getPtId(de)],Ve=de.transform;if(Fe)_e=Fe;else if(_e={rpx1:de.rpx1,transform:{textPosAngle:Ve.textPosAngle,scale:0,rotate:Ve.rotate,rCenter:Ve.rCenter,x:Ve.x,y:Ve.y}},V)if(de.parent)if(Oe){var He=de.x1>Oe?2*Math.PI:0;_e.x0=_e.x1=He}else x.extendFlat(_e,Me(de));else _e.x0=_e.x1=ie;else _e.x0=_e.x1=ie;var nt=l(_e.transform.textPosAngle,de.transform.textPosAngle),tt=l(_e.rpx1,de.rpx1),ot=l(_e.x0,de.x0),dt=l(_e.x1,de.x1),kt=l(_e.transform.scale,Ve.scale),mt=l(_e.transform.rotate,Ve.rotate),wt=Ve.rCenter===0?3:_e.transform.rCenter===0?1/3:1,Lt=l(_e.transform.rCenter,Ve.rCenter);return function(Ct){var It=tt(Ct),Ut=ot(Ct),Rt=dt(Ct),Ge=function(Be){return Lt(Math.pow(Be,wt))}(Ct),We={pxmid:ye(It,(Ut+Rt)/2),rpx1:It,transform:{textPosAngle:nt(Ct),rCenter:Ge,x:Ve.x,y:Ve.y}};return t(P.type,Ve,_),{transform:{targetX:he(We),targetY:ve(We),scale:kt(Ct),rotate:mt(Ct),rCenter:Ge}}}}(Re);return function(de){return Ce(le(de),Ie)}}):me.attr("transform",Ce(Te,Ie))})}function y(p){return m=p.rpx1,w=p.transform.textPosAngle,[m*Math.sin(w),-m*Math.cos(w)];var m,w}R.plot=function(p,m,w,u){var S,_,E=p._fullLayout,L=E._sunburstlayer,C=!w,P=!E.uniformtext.mode&&v.hasTransition(w);o("sunburst",E),(S=L.selectAll("g.trace.sunburst").data(m,function(I){return I[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),S.order(),P?(u&&(_=u()),k.transition().duration(w.duration).ease(w.easing).each("end",function(){_&&_()}).each("interrupt",function(){_&&_()}).each(function(){L.selectAll("g.trace").each(function(I){g(p,I,this,w)})})):(S.each(function(I){g(p,I,this,w)}),E.uniformtext.mode&&h(p,E._sunburstlayer.selectAll(".trace"),"sunburst")),C&&S.exit().remove()},R.formatSliceLabel=function(p,m,w,u,S){var _=w.texttemplate,E=w.textinfo;if(!(_||E&&E!=="none"))return"";var L=S.separators,C=u[0],P=p.data.data,I=C.hierarchy,U=v.isHierarchyRoot(p),z=v.getParent(I,p),H=v.getValue(p);if(!_){var F,N=E.split("+"),B=function(re){return N.indexOf(re)!==-1},j=[];if(B("label")&&P.label&&j.push(P.label),P.hasOwnProperty("v")&&B("value")&&j.push(v.formatValue(P.v,L)),!U){B("current path")&&j.push(v.getPath(p.data));var K=0;B("percent parent")&&K++,B("percent entry")&&K++,B("percent root")&&K++;var G=K>1;if(K){var V,W=function(re){F=v.formatPercent(V,L),G&&(F+=" of "+re),j.push(F)};B("percent parent")&&!U&&(V=H/v.getValue(z),W("parent")),B("percent entry")&&(V=H/v.getValue(m),W("entry")),B("percent root")&&(V=H/v.getValue(I),W("root"))}}return B("text")&&(F=x.castOption(w,P.i,"text"),x.isValidTextValue(F)&&j.push(F)),j.join("<br>")}var J=x.castOption(w,P.i,"texttemplate");if(!J)return"";var X={};P.label&&(X.label=P.label),P.hasOwnProperty("v")&&(X.value=P.v,X.valueLabel=v.formatValue(P.v,L)),X.currentPath=v.getPath(p.data),U||(X.percentParent=H/v.getValue(z),X.percentParentLabel=v.formatPercent(X.percentParent,L),X.parent=v.getPtLabel(z)),X.percentEntry=H/v.getValue(m),X.percentEntryLabel=v.formatPercent(X.percentEntry,L),X.entry=v.getPtLabel(m),X.percentRoot=H/v.getValue(I),X.percentRootLabel=v.formatPercent(X.percentRoot,L),X.root=v.getPtLabel(I),P.hasOwnProperty("color")&&(X.color=P.color);var ee=x.castOption(w,P.i,"text");return(x.isValidTextValue(ee)||ee==="")&&(X.text=ee),X.customdata=x.castOption(w,P.i,"customdata"),x.texttemplateString(J,X,S._d3locale,X,w._meta||{})}},29969:function($,R,e){var k=e(39898),A=e(7901),l=e(71828),T=e(72597).resizeText;function x(d,s,t){var o=s.data.data,r=!s.children,n=o.i,a=l.castOption(t,n,"marker.line.color")||A.defaultLine,i=l.castOption(t,n,"marker.line.width")||0;d.style("stroke-width",i).call(A.fill,o.color).call(A.stroke,a).style("opacity",r?t.leaf.opacity:null)}$.exports={style:function(d){var s=d._fullLayout._sunburstlayer.selectAll(".trace");T(d,s,"sunburst"),s.each(function(t){var o=k.select(this),r=t[0].trace;o.style("opacity",r.opacity),o.selectAll("path.surface").each(function(n){k.select(this).call(x,n,r)})})},styleOne:x}},54532:function($,R,e){var k=e(7901),A=e(50693),l=e(12663).axisHoverFormat,T=e(5386).f,x=e(9012),d=e(1426).extendFlat,s=e(30962).overrideAll;function t(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:k.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:k.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var o=$.exports=s(d({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},A("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:d({},A.zauto,{}),zmin:d({},A.zmin,{}),zmax:d({},A.zmax,{})},hoverinfo:d({},x.hoverinfo),showlegend:d({},x.showlegend,{dflt:!1})}),"calc","nested");o.x.editType=o.y.editType=o.z.editType="calc+clearAxisTypes",o.transforms=void 0},18396:function($,R,e){var k=e(78803);$.exports=function(A,l){l.surfacecolor?k(A,l,{vals:l.surfacecolor,containerStr:"",cLetter:"c"}):k(A,l,{vals:l.z,containerStr:"",cLetter:"c"})}},43768:function($,R,e){var k=e(9330).gl_surface3d,A=e(9330).ndarray,l=e(9330).ndarray_linear_interpolate.d2,T=e(824),x=e(43907),d=e(71828).isArrayOrTypedArray,s=e(81697).parseColorScale,t=e(78614),o=e(21081).extractOpts;function r(w,u,S){this.scene=w,this.uid=S,this.surface=u,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var n=r.prototype;n.getXat=function(w,u,S,_){var E=d(this.data.x)?d(this.data.x[0])?this.data.x[u][w]:this.data.x[w]:w;return S===void 0?E:_.d2l(E,0,S)},n.getYat=function(w,u,S,_){var E=d(this.data.y)?d(this.data.y[0])?this.data.y[u][w]:this.data.y[u]:u;return S===void 0?E:_.d2l(E,0,S)},n.getZat=function(w,u,S,_){var E=this.data.z[u][w];return E===null&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[u][w]),S===void 0?E:_.d2l(E,0,S)},n.handlePick=function(w){if(w.object===this.surface){var u=(w.data.index[0]-1)/this.dataScaleX-1,S=(w.data.index[1]-1)/this.dataScaleY-1,_=Math.max(Math.min(Math.round(u),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(S),this.data._ylength-1),0);w.index=[_,E],w.traceCoordinate=[this.getXat(_,E),this.getYat(_,E),this.getZat(_,E)],w.dataCoordinate=[this.getXat(_,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(_,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(_,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var L=0;L<3;L++)w.dataCoordinate[L]!=null&&(w.dataCoordinate[L]*=this.scene.dataScale[L]);var C=this.data.hovertext||this.data.text;return Array.isArray(C)&&C[E]&&C[E][_]!==void 0?w.textLabel=C[E][_]:w.textLabel=C||"",w.data.dataCoordinate=w.dataCoordinate.slice(),this.surface.highlight(w.data),this.scene.glplot.spikes.position=w.dataCoordinate,!0}};var a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function i(w,u){if(w<u)return 0;for(var S=0;Math.floor(w%u)===0;)w/=u,S++;return S}function c(w){for(var u=[],S=0;S<a.length;S++){var _=a[S];u.push(i(w,_))}return u}function h(w){for(var u=c(w),S=w,_=0;_<a.length;_++)if(u[_]>0){S=a[_];break}return S}function f(w,u){if(!(w<1||u<1)){for(var S=c(w),_=c(u),E=1,L=0;L<a.length;L++)E*=Math.pow(a[L],Math.max(S[L],_[L]));return E}}n.calcXnums=function(w){var u,S=[];for(u=1;u<w;u++){var _=this.getXat(u-1,0),E=this.getXat(u,0);S[u-1]=E!==_&&_!=null&&E!=null?Math.abs(E-_):0}var L=0;for(u=1;u<w;u++)L+=S[u-1];for(u=1;u<w;u++)S[u-1]===0?S[u-1]=1:S[u-1]=Math.round(L/S[u-1]);return S},n.calcYnums=function(w){var u,S=[];for(u=1;u<w;u++){var _=this.getYat(0,u-1),E=this.getYat(0,u);S[u-1]=E!==_&&_!=null&&E!=null?Math.abs(E-_):0}var L=0;for(u=1;u<w;u++)L+=S[u-1];for(u=1;u<w;u++)S[u-1]===0?S[u-1]=1:S[u-1]=Math.round(L/S[u-1]);return S};var b=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],v=b[9],g=b[13];function y(w,u,S){var _=S[8]+S[2]*u[0]+S[5]*u[1];return w[0]=(S[6]+S[0]*u[0]+S[3]*u[1])/_,w[1]=(S[7]+S[1]*u[0]+S[4]*u[1])/_,w}function p(w,u,S){return function(_,E,L,C){for(var P=[0,0],I=_.shape[0],U=_.shape[1],z=0;z<I;z++)for(var H=0;H<U;H++)L(P,[z,H],C),_.set(z,H,l(E,P[0],P[1]))}(w,u,y,S),w}function m(w,u){for(var S=!1,_=0;_<w.length;_++)if(u===w[_]){S=!0;break}S===!1&&w.push(u)}n.estimateScale=function(w,u){for(var S=1+function(E){if(E.length!==0){for(var L=1,C=0;C<E.length;C++)L=f(L,E[C]);return L}}(u===0?this.calcXnums(w):this.calcYnums(w));S<v;)S*=2;for(;S>g;)S--,S/=h(S),++S<v&&(S=g);var _=Math.round(S/w);return _>1?_:1},n.refineCoords=function(w){for(var u=this.dataScaleX,S=this.dataScaleY,_=w[0].shape[0],E=w[0].shape[1],L=0|Math.floor(w[0].shape[0]*u+1),C=0|Math.floor(w[0].shape[1]*S+1),P=1+_+1,I=1+E+1,U=A(new Float32Array(P*I),[P,I]),z=[1/u,0,0,0,1/S,0,0,0,1],H=0;H<w.length;++H){this.surface.padField(U,w[H]);var F=A(new Float32Array(L*C),[L,C]);p(F,U,z),w[H]=F}},n.setContourLevels=function(){var w,u,S,_=[[],[],[]],E=[!1,!1,!1],L=!1;for(w=0;w<3;++w)if(this.showContour[w]&&(L=!0,this.contourSize[w]>0&&this.contourStart[w]!==null&&this.contourEnd[w]!==null&&this.contourEnd[w]>this.contourStart[w]))for(E[w]=!0,u=this.contourStart[w];u<this.contourEnd[w];u+=this.contourSize[w])S=u*this.scene.dataScale[w],m(_[w],S);if(L){var C=[[],[],[]];for(w=0;w<3;++w)this.showContour[w]&&(C[w]=E[w]?_[w]:this.scene.contourLevels[w]);this.surface.update({levels:C})}},n.update=function(w){var u,S,_,E,L=this.scene,C=L.fullSceneLayout,P=this.surface,I=s(w),U=L.dataScale,z=w.z[0].length,H=w._ylength,F=L.contourLevels;this.data=w;var N=[];for(u=0;u<3;u++)for(N[u]=[],S=0;S<z;S++)N[u][S]=[];for(S=0;S<z;S++)for(_=0;_<H;_++)N[0][S][_]=this.getXat(S,_,w.xcalendar,C.xaxis),N[1][S][_]=this.getYat(S,_,w.ycalendar,C.yaxis),N[2][S][_]=this.getZat(S,_,w.zcalendar,C.zaxis);if(w.connectgaps)for(w._emptypoints=x(N[2]),T(N[2],w._emptypoints),w._interpolatedZ=[],S=0;S<z;S++)for(w._interpolatedZ[S]=[],_=0;_<H;_++)w._interpolatedZ[S][_]=N[2][S][_];for(u=0;u<3;u++)for(S=0;S<z;S++)for(_=0;_<H;_++)(E=N[u][S][_])==null?N[u][S][_]=NaN:E=N[u][S][_]*=U[u];for(u=0;u<3;u++)for(S=0;S<z;S++)for(_=0;_<H;_++)(E=N[u][S][_])!=null&&(this.minValues[u]>E&&(this.minValues[u]=E),this.maxValues[u]<E&&(this.maxValues[u]=E));for(u=0;u<3;u++)this.objectOffset[u]=.5*(this.minValues[u]+this.maxValues[u]);for(u=0;u<3;u++)for(S=0;S<z;S++)for(_=0;_<H;_++)(E=N[u][S][_])!=null&&(N[u][S][_]-=this.objectOffset[u]);var B=[A(new Float32Array(z*H),[z,H]),A(new Float32Array(z*H),[z,H]),A(new Float32Array(z*H),[z,H])];for(u=0;u<3;u++)for(S=0;S<z;S++)for(_=0;_<H;_++)B[u].set(S,_,N[u][S][_]);N=[];var j={colormap:I,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!w.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:w.opacityscale,opacity:w.opacity},K=o(w);if(j.intensityBounds=[K.min,K.max],w.surfacecolor){var G=A(new Float32Array(z*H),[z,H]);for(S=0;S<z;S++)for(_=0;_<H;_++)G.set(S,_,w.surfacecolor[_][S]);B.push(G)}else j.intensityBounds[0]*=U[2],j.intensityBounds[1]*=U[2];(g<B[0].shape[0]||g<B[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(B[0].shape[0],0),this.dataScaleY=this.estimateScale(B[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(B)),w.surfacecolor&&(j.intensity=B.pop());var V=[!0,!0,!0],W=["x","y","z"];for(u=0;u<3;++u){var J=w.contours[W[u]];V[u]=J.highlight,j.showContour[u]=J.show||J.highlight,j.showContour[u]&&(j.contourProject[u]=[J.project.x,J.project.y,J.project.z],J.show?(this.showContour[u]=!0,j.levels[u]=F[u],P.highlightColor[u]=j.contourColor[u]=t(J.color),J.usecolormap?P.highlightTint[u]=j.contourTint[u]=0:P.highlightTint[u]=j.contourTint[u]=1,j.contourWidth[u]=J.width,this.contourStart[u]=J.start,this.contourEnd[u]=J.end,this.contourSize[u]=J.size):(this.showContour[u]=!1,this.contourStart[u]=null,this.contourEnd[u]=null,this.contourSize[u]=0),J.highlight&&(j.dynamicColor[u]=t(J.highlightcolor),j.dynamicWidth[u]=J.highlightwidth))}(function(X){var ee=X[0].rgb,re=X[X.length-1].rgb;return ee[0]===re[0]&&ee[1]===re[1]&&ee[2]===re[2]&&ee[3]===re[3]})(I)&&(j.vertexColor=!0),j.objectOffset=this.objectOffset,j.coords=B,P.update(j),P.visible=w.visible,P.enableDynamic=V,P.enableHighlight=V,P.snapToData=!0,"lighting"in w&&(P.ambientLight=w.lighting.ambient,P.diffuseLight=w.lighting.diffuse,P.specularLight=w.lighting.specular,P.roughness=w.lighting.roughness,P.fresnel=w.lighting.fresnel),"lightposition"in w&&(P.lightPosition=[w.lightposition.x,w.lightposition.y,w.lightposition.z])},n.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},$.exports=function(w,u){var S=w.glplot.gl,_=k({gl:S}),E=new r(w,_,u.uid);return _._trace=E,E.update(u),w.glplot.add(_),E}},91831:function($,R,e){var k=e(73972),A=e(71828),l=e(1586),T=e(54532);function x(s,t,o,r){var n=r("opacityscale");n==="max"?t.opacityscale=[[0,.1],[1,1]]:n==="min"?t.opacityscale=[[0,1],[1,.1]]:n==="extremes"?t.opacityscale=function(a,i){for(var c=[],h=0;h<32;h++){var f=h/31,b=.1+.9*(1-Math.pow(Math.sin(1*f*Math.PI),2));c.push([f,Math.max(0,Math.min(1,b))])}return c}():function(a){var i=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||+a[0][0]!=0||+a[a.length-1][0]!=1)return!1;for(var c=0;c<a.length;c++){var h=a[c];if(h.length!==2||+h[0]<i)return!1;i=+h[0]}return!0}(n)||(t.opacityscale=void 0)}function d(s,t,o){t in s&&!(o in s)&&(s[o]=s[t])}$.exports={supplyDefaults:function(s,t,o,r){var n,a;function i(m,w){return A.coerce(s,t,T,m,w)}var c=i("x"),h=i("y"),f=i("z");if(!f||!f.length||c&&c.length<1||h&&h.length<1)t.visible=!1;else{t._xlength=Array.isArray(c)&&A.isArrayOrTypedArray(c[0])?f.length:f[0].length,t._ylength=f.length,k.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y","z"],r),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(m){i(m)});var b=i("surfacecolor"),v=["x","y","z"];for(n=0;n<3;++n){var g="contours."+v[n],y=i(g+".show"),p=i(g+".highlight");if(y||p)for(a=0;a<3;++a)i(g+".project."+v[a]);y&&(i(g+".color"),i(g+".width"),i(g+".usecolormap")),p&&(i(g+".highlightcolor"),i(g+".highlightwidth")),i(g+".start"),i(g+".end"),i(g+".size")}b||(d(s,"zmin","cmin"),d(s,"zmax","cmax"),d(s,"zauto","cauto")),l(s,t,r,i,{prefix:"",cLetter:"c"}),x(0,t,0,i),t._length=null}},opacityscaleDefaults:x}},93601:function($,R,e){$.exports={attributes:e(54532),supplyDefaults:e(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(18396),plot:e(43768),moduleType:"trace",name:"surface",basePlotModule:e(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function($,R,e){var k=e(50215),A=e(1426).extendFlat,l=e(30962).overrideAll,T=e(41940),x=e(27670).Y,d=e(12663).descriptionOnlyNumbers;($.exports=l({domain:x({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:d("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:A({},k.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:A({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:d("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:A({},k.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:A({},T({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},99469:function($,R,e){var k=e(27659).a0,A=e(36736),l="table";R.name=l,R.plot=function(T){var x=k(T.calcdata,l)[0];x.length&&A(T,x)},R.clean=function(T,x,d,s){var t=s._has&&s._has(l),o=x._has&&x._has(l);t&&!o&&s._paperdiv.selectAll(".table").remove()}},76333:function($,R,e){var k=e(28984).wrap;$.exports=function(){return k({})}},49850:function($){$.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function($,R,e){var k=e(49850),A=e(1426).extendFlat,l=e(92770);function T(n){if(Array.isArray(n)){for(var a=0,i=0;i<n.length;i++)a=Math.max(a,T(n[i]));return a}return n}function x(n,a){return n+a}function d(n){var a,i=n.slice(),c=1/0,h=0;for(a=0;a<i.length;a++)Array.isArray(i[a])||(i[a]=[i[a]]),c=Math.min(c,i[a].length),h=Math.max(h,i[a].length);if(c!==h)for(a=0;a<i.length;a++){var f=h-i[a].length;f&&(i[a]=i[a].concat(s(f)))}return i}function s(n){for(var a=new Array(n),i=0;i<n;i++)a[i]="";return a}function t(n){return n.calcdata.columns.reduce(function(a,i){return i.xIndex<n.xIndex?a+i.columnWidth:a},0)}function o(n,a){return Object.keys(n).map(function(i){return A({},n[i],{auxiliaryBlocks:a})})}function r(n,a){for(var i,c={},h=0,f=0,b={firstRowIndex:null,lastRowIndex:null,rows:[]},v=0,g=0,y=0;y<n.length;y++)i=n[y],b.rows.push({rowIndex:y,rowHeight:i}),((f+=i)>=a||y===n.length-1)&&(c[h]=b,b.key=g++,b.firstRowIndex=v,b.lastRowIndex=y,b={firstRowIndex:null,lastRowIndex:null,rows:[]},h+=f,v=y+1,f=0);return c}$.exports=function(n,a){var i=d(a.cells.values),c=function(U){return U.slice(a.header.values.length,U.length)},h=d(a.header.values);h.length&&!h[0].length&&(h[0]=[""],h=d(h));var f=h.concat(c(i).map(function(){return s((h[0]||[""]).length)})),b=a.domain,v=Math.floor(n._fullLayout._size.w*(b.x[1]-b.x[0])),g=Math.floor(n._fullLayout._size.h*(b.y[1]-b.y[0])),y=a.header.values.length?f[0].map(function(){return a.header.height}):[k.emptyHeaderHeight],p=i.length?i[0].map(function(){return a.cells.height}):[],m=y.reduce(x,0),w=r(p,g-m+k.uplift),u=o(r(y,m),[]),S=o(w,u),_={},E=a._fullInput.columnorder.concat(c(i.map(function(U,z){return z}))),L=f.map(function(U,z){var H=Array.isArray(a.columnwidth)?a.columnwidth[Math.min(z,a.columnwidth.length-1)]:a.columnwidth;return l(H)?Number(H):1}),C=L.reduce(x,0);L=L.map(function(U){return U/C*v});var P=Math.max(T(a.header.line.width),T(a.cells.line.width)),I={key:a.uid+n._context.staticPlot,translateX:b.x[0]*n._fullLayout._size.w,translateY:n._fullLayout._size.h*(1-b.y[1]),size:n._fullLayout._size,width:v,maxLineWidth:P,height:g,columnOrder:E,groupHeight:g,rowBlocks:S,headerRowBlocks:u,scrollY:0,cells:A({},a.cells,{values:i}),headerCells:A({},a.header,{values:f}),gdColumns:f.map(function(U){return U[0]}),gdColumnsOriginalOrder:f.map(function(U){return U[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:f.map(function(U,z){var H=_[U];return _[U]=(H||0)+1,{key:U+"__"+_[U],label:U,specIndex:z,xIndex:E[z],xScale:t,x:void 0,calcdata:void 0,columnWidth:L[z]}})};return I.columns.forEach(function(U){U.calcdata=I,U.x=t(U)}),I}},56269:function($,R,e){var k=e(1426).extendFlat;R.splitToPanels=function(A){var l=[0,0],T=k({},A,{key:"header",type:"header",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!0,values:A.calcdata.headerCells.values[A.specIndex],rowBlocks:A.calcdata.headerRowBlocks,calcdata:k({},A.calcdata,{cells:A.calcdata.headerCells})});return[k({},A,{key:"cells1",type:"cells",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:A.calcdata.cells.values[A.specIndex],rowBlocks:A.calcdata.rowBlocks}),k({},A,{key:"cells2",type:"cells",page:1,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:A.calcdata.cells.values[A.specIndex],rowBlocks:A.calcdata.rowBlocks}),T]},R.splitToCells=function(A){var l=function(T){var x=T.rowBlocks[T.page],d=x?x.rows[0].rowIndex:0;return[d,x?d+x.rows.length:0]}(A);return(A.values||[]).slice(l[0],l[1]).map(function(T,x){return{keyWithinBlock:x+(typeof T=="string"&&T.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:l[0]+x,column:A,calcdata:A.calcdata,page:A.page,rowBlocks:A.rowBlocks,value:T}})}},39754:function($,R,e){var k=e(71828),A=e(44464),l=e(27670).c;$.exports=function(T,x,d,s){function t(o,r){return k.coerce(T,x,A,o,r)}l(x,s,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),k.coerceFont(t,"header.font",k.extendFlat({},s.font)),function(o,r){for(var n=o.columnorder||[],a=o.header.values.length,i=n.slice(0,a),c=i.slice().sort(function(b,v){return b-v}),h=i.map(function(b){return c.indexOf(b)}),f=h.length;f<a;f++)h.push(f);r("columnorder",h)}(x,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),k.coerceFont(t,"cells.font",k.extendFlat({},s.font)),x._length=null}},96595:function($,R,e){$.exports={attributes:e(44464),supplyDefaults:e(39754),calc:e(76333),plot:e(36736),moduleType:"trace",name:"table",basePlotModule:e(99469),categories:["noOpacity"],meta:{}}},36736:function($,R,e){var k=e(49850),A=e(39898),l=e(71828).numberFormat,T=e(28984),x=e(91424),d=e(63893),s=e(71828).raiseToTop,t=e(71828).strTranslate,o=e(71828).cancelTransition,r=e(51018),n=e(56269),a=e(7901);function i(B){return Math.ceil(B.calcdata.maxLineWidth/2)}function c(B,j){return"clip"+B._fullLayout._uid+"_scrollAreaBottomClip_"+j.key}function h(B,j){return"clip"+B._fullLayout._uid+"_columnBoundaryClippath_"+j.calcdata.key+"_"+j.specIndex}function f(B){return[].concat.apply([],B.map(function(j){return j})).map(function(j){return j.__data__})}function b(B,j,K){var G=B.selectAll("."+k.cn.scrollbarKit).data(T.repeat,T.keyFun);G.enter().append("g").classed(k.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),G.each(function(ee){var re=ee.scrollbarState;re.totalHeight=function(ie){var se=ie.rowBlocks;return z(se,se.length-1)+(se.length?H(se[se.length-1],1/0):1)}(ee),re.scrollableAreaHeight=ee.groupHeight-S(ee),re.currentlyVisibleHeight=Math.min(re.totalHeight,re.scrollableAreaHeight),re.ratio=re.currentlyVisibleHeight/re.totalHeight,re.barLength=Math.max(re.ratio*re.currentlyVisibleHeight,k.goldenRatio*k.scrollbarWidth),re.barWiggleRoom=re.currentlyVisibleHeight-re.barLength,re.wiggleRoom=Math.max(0,re.totalHeight-re.scrollableAreaHeight),re.topY=re.barWiggleRoom===0?0:ee.scrollY/re.wiggleRoom*re.barWiggleRoom,re.bottomY=re.topY+re.barLength,re.dragMultiplier=re.wiggleRoom/re.barWiggleRoom}).attr("transform",function(ee){var re=ee.width+k.scrollbarWidth/2+k.scrollbarOffset;return t(re,S(ee))});var V=G.selectAll("."+k.cn.scrollbar).data(T.repeat,T.keyFun);V.enter().append("g").classed(k.cn.scrollbar,!0);var W=V.selectAll("."+k.cn.scrollbarSlider).data(T.repeat,T.keyFun);W.enter().append("g").classed(k.cn.scrollbarSlider,!0),W.attr("transform",function(ee){return t(0,ee.scrollbarState.topY||0)});var J=W.selectAll("."+k.cn.scrollbarGlyph).data(T.repeat,T.keyFun);J.enter().append("line").classed(k.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",k.scrollbarWidth).attr("stroke-linecap","round").attr("y1",k.scrollbarWidth/2),J.attr("y2",function(ee){return ee.scrollbarState.barLength-k.scrollbarWidth/2}).attr("stroke-opacity",function(ee){return ee.columnDragInProgress||!ee.scrollbarState.barWiggleRoom||K?0:.4}),J.transition().delay(0).duration(0),J.transition().delay(k.scrollbarHideDelay).duration(k.scrollbarHideDuration).attr("stroke-opacity",0);var X=V.selectAll("."+k.cn.scrollbarCaptureZone).data(T.repeat,T.keyFun);X.enter().append("line").classed(k.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",k.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ee){var re=A.event.y,ie=this.getBoundingClientRect(),se=ee.scrollbarState,fe=re-ie.top,ye=A.scale.linear().domain([0,se.scrollableAreaHeight]).range([0,se.totalHeight]).clamp(!0);se.topY<=fe&&fe<=se.bottomY||E(j,B,null,ye(fe-se.barLength/2))(ee)}).call(A.behavior.drag().origin(function(ee){return A.event.stopPropagation(),ee.scrollbarState.scrollbarScrollInProgress=!0,ee}).on("drag",E(j,B)).on("dragend",function(){})),X.attr("y2",function(ee){return ee.scrollbarState.scrollableAreaHeight}),j._context.staticPlot&&(J.remove(),X.remove())}function v(B,j,K,G){var V=function(re){var ie=re.selectAll("."+k.cn.columnCells).data(T.repeat,T.keyFun);return ie.enter().append("g").classed(k.cn.columnCells,!0),ie.exit().remove(),ie}(K),W=function(re){var ie=re.selectAll("."+k.cn.columnCell).data(n.splitToCells,function(se){return se.keyWithinBlock});return ie.enter().append("g").classed(k.cn.columnCell,!0),ie.exit().remove(),ie}(V);(function(re){re.each(function(ie,se){var fe=ie.calcdata.cells.font,ye=ie.column.specIndex,ge={size:p(fe.size,ye,se),color:p(fe.color,ye,se),family:p(fe.family,ye,se)};ie.rowNumber=ie.key,ie.align=p(ie.calcdata.cells.align,ye,se),ie.cellBorderWidth=p(ie.calcdata.cells.line.width,ye,se),ie.font=ge})})(W);var J=function(re){var ie=re.selectAll("."+k.cn.cellRect).data(T.repeat,function(se){return se.keyWithinBlock});return ie.enter().append("rect").classed(k.cn.cellRect,!0),ie}(W);(function(re){re.attr("width",function(ie){return ie.column.columnWidth}).attr("stroke-width",function(ie){return ie.cellBorderWidth}).each(function(ie){var se=A.select(this);a.stroke(se,p(ie.calcdata.cells.line.color,ie.column.specIndex,ie.rowNumber)),a.fill(se,p(ie.calcdata.cells.fill.color,ie.column.specIndex,ie.rowNumber))})})(J);var X=function(re){var ie=re.selectAll("."+k.cn.cellTextHolder).data(T.repeat,function(se){return se.keyWithinBlock});return ie.enter().append("g").classed(k.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ie}(W),ee=function(re){var ie=re.selectAll("."+k.cn.cellText).data(T.repeat,function(se){return se.keyWithinBlock});return ie.enter().append("text").classed(k.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){A.event.stopPropagation()}),ie}(X);(function(re){re.each(function(ie){x.font(A.select(this),ie.font)})})(ee),g(ee,j,G,B),U(W)}function g(B,j,K,G){B.text(function(V){var W=V.column.specIndex,J=V.rowNumber,X=V.value,ee=typeof X=="string",re=ee&&X.match(/<br>/i),ie=!ee||re;V.mayHaveMarkup=ee&&X.match(/[<&>]/);var se,fe=typeof(se=X)=="string"&&se.match(k.latexCheck);V.latex=fe;var ye,ge,he=fe?"":p(V.calcdata.cells.prefix,W,J)||"",ve=fe?"":p(V.calcdata.cells.suffix,W,J)||"",Oe=fe?null:p(V.calcdata.cells.format,W,J)||null,xe=he+(Oe?l(Oe)(V.value):V.value)+ve;if(V.wrappingNeeded=!V.wrapped&&!ie&&!fe&&(ye=y(xe)),V.cellHeightMayIncrease=re||fe||V.mayHaveMarkup||(ye===void 0?y(xe):ye),V.needsConvertToTspans=V.mayHaveMarkup||V.wrappingNeeded||V.latex,V.wrappingNeeded){var ke=(k.wrapSplitCharacter===" "?xe.replace(/<a href=/gi,"<a_href="):xe).split(k.wrapSplitCharacter),Me=k.wrapSplitCharacter===" "?ke.map(function(Te){return Te.replace(/<a_href=/gi,"<a href=")}):ke;V.fragments=Me.map(function(Te){return{text:Te,width:null}}),V.fragments.push({fragment:k.wrapSpacer,width:null}),ge=Me.join(k.lineBreaker)+k.lineBreaker+k.wrapSpacer}else delete V.fragments,ge=xe;return ge}).attr("dy",function(V){return V.needsConvertToTspans?0:"0.75em"}).each(function(V){var W=this,J=A.select(W),X=V.wrappingNeeded?C:P;V.needsConvertToTspans?d.convertToTspans(J,G,X(K,W,j,G,V)):A.select(W.parentNode).attr("transform",function(ee){return t(I(ee),k.cellPad)}).attr("text-anchor",function(ee){return{left:"start",center:"middle",right:"end"}[ee.align]})})}function y(B){return B.indexOf(k.wrapSplitCharacter)!==-1}function p(B,j,K){if(Array.isArray(B)){var G=B[Math.min(j,B.length-1)];return Array.isArray(G)?G[Math.min(K,G.length-1)]:G}return B}function m(B,j,K){B.transition().ease(k.releaseTransitionEase).duration(k.releaseTransitionDuration).attr("transform",t(j.x,K))}function w(B){return B.type==="cells"}function u(B){return B.type==="header"}function S(B){return(B.rowBlocks.length?B.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(j,K){return j+H(K,1/0)},0)}function _(B,j,K){var G=f(j)[0];if(G!==void 0){var V=G.rowBlocks,W=G.calcdata,J=z(V,V.length),X=G.calcdata.groupHeight-S(G),ee=W.scrollY=Math.max(0,Math.min(J-X,W.scrollY)),re=function(ie,se,fe){for(var ye=[],ge=0,he=0;he<ie.length;he++){for(var ve=ie[he],Oe=ve.rows,xe=0,ke=0;ke<Oe.length;ke++)xe+=Oe[ke].rowHeight;ve.allRowsHeight=xe,se<ge+xe&&se+fe>ge&&ye.push(he),ge+=xe}return ye}(V,ee,X);re.length===1&&(re[0]===V.length-1?re.unshift(re[0]-1):re.push(re[0]+1)),re[0]%2&&re.reverse(),j.each(function(ie,se){ie.page=re[se],ie.scrollY=ee}),j.attr("transform",function(ie){var se=z(ie.rowBlocks,ie.page)-ie.scrollY;return t(0,se)}),B&&(L(B,K,j,re,G.prevPages,G,0),L(B,K,j,re,G.prevPages,G,1),b(K,B))}}function E(B,j,K,G){return function(V){var W=V.calcdata?V.calcdata:V,J=j.filter(function(ie){return W.key===ie.key}),X=K||W.scrollbarState.dragMultiplier,ee=W.scrollY;W.scrollY=G===void 0?W.scrollY+X*A.event.dy:G;var re=J.selectAll("."+k.cn.yColumn).selectAll("."+k.cn.columnBlock).filter(w);return _(B,re,J),W.scrollY===ee}}function L(B,j,K,G,V,W,J){G[J]!==V[J]&&(clearTimeout(W.currentRepaint[J]),W.currentRepaint[J]=setTimeout(function(){var X=K.filter(function(ee,re){return re===J&&G[re]!==V[re]});v(B,j,X,K),V[J]=G[J]}))}function C(B,j,K,G){return function(){var V=A.select(j.parentNode);V.each(function(W){var J=W.fragments;V.selectAll("tspan.line").each(function(ge,he){J[he].width=this.getComputedTextLength()});var X,ee,re=J[J.length-1].width,ie=J.slice(0,-1),se=[],fe=0,ye=W.column.columnWidth-2*k.cellPad;for(W.value="";ie.length;)fe+(ee=(X=ie.shift()).width+re)>ye&&(W.value+=se.join(k.wrapSpacer)+k.lineBreaker,se=[],fe=0),se.push(X.text),fe+=ee;fe&&(W.value+=se.join(k.wrapSpacer)),W.wrapped=!0}),V.selectAll("tspan.line").remove(),g(V.select("."+k.cn.cellText),K,B,G),A.select(j.parentNode.parentNode).call(U)}}function P(B,j,K,G,V){return function(){if(!V.settledY){var W=A.select(j.parentNode),J=N(V),X=V.key-J.firstRowIndex,ee=J.rows[X].rowHeight,re=V.cellHeightMayIncrease?j.parentNode.getBoundingClientRect().height+2*k.cellPad:ee,ie=Math.max(re,ee);ie-J.rows[X].rowHeight&&(J.rows[X].rowHeight=ie,B.selectAll("."+k.cn.columnCell).call(U),_(null,B.filter(w),0),b(K,G,!0)),W.attr("transform",function(){var se=this,fe=se.parentNode.getBoundingClientRect(),ye=A.select(se.parentNode).select("."+k.cn.cellRect).node().getBoundingClientRect(),ge=se.transform.baseVal.consolidate(),he=ye.top-fe.top+(ge?ge.matrix.f:k.cellPad);return t(I(V,A.select(se.parentNode).select("."+k.cn.cellTextHolder).node().getBoundingClientRect().width),he)}),V.settledY=!0}}}function I(B,j){switch(B.align){case"left":default:return k.cellPad;case"right":return B.column.columnWidth-(j||0)-k.cellPad;case"center":return(B.column.columnWidth-(j||0))/2}}function U(B){B.attr("transform",function(j){var K=j.rowBlocks[0].auxiliaryBlocks.reduce(function(V,W){return V+H(W,1/0)},0),G=H(N(j),j.key);return t(0,G+K)}).selectAll("."+k.cn.cellRect).attr("height",function(j){return(K=N(j),G=j.key,K.rows[G-K.firstRowIndex]).rowHeight;var K,G})}function z(B,j){for(var K=0,G=j-1;G>=0;G--)K+=F(B[G]);return K}function H(B,j){for(var K=0,G=0;G<B.rows.length&&B.rows[G].rowIndex<j;G++)K+=B.rows[G].rowHeight;return K}function F(B){var j=B.allRowsHeight;if(j!==void 0)return j;for(var K=0,G=0;G<B.rows.length;G++)K+=B.rows[G].rowHeight;return B.allRowsHeight=K,K}function N(B){return B.rowBlocks[B.page]}$.exports=function(B,j){var K=!B._context.staticPlot,G=B._fullLayout._paper.selectAll("."+k.cn.table).data(j.map(function(ve){var Oe=T.unwrap(ve).trace;return r(B,Oe)}),T.keyFun);G.exit().remove(),G.enter().append("g").classed(k.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),G.attr("width",function(ve){return ve.width+ve.size.l+ve.size.r}).attr("height",function(ve){return ve.height+ve.size.t+ve.size.b}).attr("transform",function(ve){return t(ve.translateX,ve.translateY)});var V=G.selectAll("."+k.cn.tableControlView).data(T.repeat,T.keyFun),W=V.enter().append("g").classed(k.cn.tableControlView,!0).style("box-sizing","content-box");if(K){var J="onwheel"in document?"wheel":"mousewheel";W.on("mousemove",function(ve){V.filter(function(Oe){return ve===Oe}).call(b,B)}).on(J,function(ve){if(!ve.scrollbarState.wheeling){ve.scrollbarState.wheeling=!0;var Oe=ve.scrollY+A.event.deltaY;E(B,V,null,Oe)(ve)||(A.event.stopPropagation(),A.event.preventDefault()),ve.scrollbarState.wheeling=!1}}).call(b,B,!0)}V.attr("transform",function(ve){return t(ve.size.l,ve.size.t)});var X=V.selectAll("."+k.cn.scrollBackground).data(T.repeat,T.keyFun);X.enter().append("rect").classed(k.cn.scrollBackground,!0).attr("fill","none"),X.attr("width",function(ve){return ve.width}).attr("height",function(ve){return ve.height}),V.each(function(ve){x.setClipUrl(A.select(this),c(B,ve),B)});var ee=V.selectAll("."+k.cn.yColumn).data(function(ve){return ve.columns},T.keyFun);ee.enter().append("g").classed(k.cn.yColumn,!0),ee.exit().remove(),ee.attr("transform",function(ve){return t(ve.x,0)}),K&&ee.call(A.behavior.drag().origin(function(ve){return m(A.select(this),ve,-k.uplift),s(this),ve.calcdata.columnDragInProgress=!0,b(V.filter(function(Oe){return ve.calcdata.key===Oe.key}),B),ve}).on("drag",function(ve){var Oe=A.select(this),xe=function(ke){return(ve===ke?A.event.x:ke.x)+ke.columnWidth/2};ve.x=Math.max(-k.overdrag,Math.min(ve.calcdata.width+k.overdrag-ve.columnWidth,A.event.x)),f(ee).filter(function(ke){return ke.calcdata.key===ve.calcdata.key}).sort(function(ke,Me){return xe(ke)-xe(Me)}).forEach(function(ke,Me){ke.xIndex=Me,ke.x=ve===ke?ke.x:ke.xScale(ke)}),ee.filter(function(ke){return ve!==ke}).transition().ease(k.transitionEase).duration(k.transitionDuration).attr("transform",function(ke){return t(ke.x,0)}),Oe.call(o).attr("transform",t(ve.x,-k.uplift))}).on("dragend",function(ve){var Oe=A.select(this),xe=ve.calcdata;ve.x=ve.xScale(ve),ve.calcdata.columnDragInProgress=!1,m(Oe,ve,0),function(ke,Me,Te){var Q=Me.gdColumnsOriginalOrder;Me.gdColumns.sort(function(oe,ce){return Te[Q.indexOf(oe)]-Te[Q.indexOf(ce)]}),Me.columnorder=Te,ke.emit("plotly_restyle")}(B,xe,xe.columns.map(function(ke){return ke.xIndex}))})),ee.each(function(ve){x.setClipUrl(A.select(this),h(B,ve),B)});var re=ee.selectAll("."+k.cn.columnBlock).data(n.splitToPanels,T.keyFun);re.enter().append("g").classed(k.cn.columnBlock,!0).attr("id",function(ve){return ve.key}),re.style("cursor",function(ve){return ve.dragHandle?"ew-resize":ve.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ie=re.filter(u),se=re.filter(w);K&&se.call(A.behavior.drag().origin(function(ve){return A.event.stopPropagation(),ve}).on("drag",E(B,V,-1)).on("dragend",function(){})),v(B,V,ie,re),v(B,V,se,re);var fe=V.selectAll("."+k.cn.scrollAreaClip).data(T.repeat,T.keyFun);fe.enter().append("clipPath").classed(k.cn.scrollAreaClip,!0).attr("id",function(ve){return c(B,ve)});var ye=fe.selectAll("."+k.cn.scrollAreaClipRect).data(T.repeat,T.keyFun);ye.enter().append("rect").classed(k.cn.scrollAreaClipRect,!0).attr("x",-k.overdrag).attr("y",-k.uplift).attr("fill","none"),ye.attr("width",function(ve){return ve.width+2*k.overdrag}).attr("height",function(ve){return ve.height+k.uplift}),ee.selectAll("."+k.cn.columnBoundary).data(T.repeat,T.keyFun).enter().append("g").classed(k.cn.columnBoundary,!0);var ge=ee.selectAll("."+k.cn.columnBoundaryClippath).data(T.repeat,T.keyFun);ge.enter().append("clipPath").classed(k.cn.columnBoundaryClippath,!0),ge.attr("id",function(ve){return h(B,ve)});var he=ge.selectAll("."+k.cn.columnBoundaryRect).data(T.repeat,T.keyFun);he.enter().append("rect").classed(k.cn.columnBoundaryRect,!0).attr("fill","none"),he.attr("width",function(ve){return ve.columnWidth+2*i(ve)}).attr("height",function(ve){return ve.calcdata.height+2*i(ve)+k.uplift}).attr("x",function(ve){return-i(ve)}).attr("y",function(ve){return-i(ve)}),_(null,se,V)}},45802:function($,R,e){var k=e(5386).f,A=e(5386).s,l=e(50693),T=e(27670).Y,x=e(34e3),d=e(57564),s=e(43473),t=e(1426).extendFlat;$.exports={labels:d.labels,parents:d.parents,values:d.values,branchvalues:d.branchvalues,count:d.count,level:d.level,maxdepth:d.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:d.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:d.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},x.textfont,{}),editType:"calc"},text:x.text,textinfo:d.textinfo,texttemplate:A({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:x.hovertext,hoverinfo:d.hoverinfo,hovertemplate:k({},{keys:s.eventDataKeys}),textfont:x.textfont,insidetextfont:x.insidetextfont,outsidetextfont:t({},x.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:x.sort,root:d.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},78018:function($,R,e){var k=e(74875);R.name="treemap",R.plot=function(A,l,T,x){k.plotBasePlot(R.name,A,l,T,x)},R.clean=function(A,l,T,x){k.cleanBasePlot(R.name,A,l,T,x)}},65039:function($,R,e){var k=e(52147);R.y=function(A,l){return k.calc(A,l)},R.T=function(A){return k._runCrossTraceCalc("treemap",A)}},43473:function($){$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function($,R,e){var k=e(71828),A=e(45802),l=e(7901),T=e(27670).c,x=e(90769).handleText,d=e(97313).TEXTPAD,s=e(21081),t=s.hasColorscale,o=s.handleDefaults;$.exports=function(r,n,a,i){function c(w,u){return k.coerce(r,n,A,w,u)}var h=c("labels"),f=c("parents");if(h&&h.length&&f&&f.length){var b=c("values");b&&b.length?c("branchvalues"):c("count"),c("level"),c("maxdepth"),c("tiling.packing")==="squarify"&&c("tiling.squarifyratio"),c("tiling.flip"),c("tiling.pad");var v=c("text");c("texttemplate"),n.texttemplate||c("textinfo",Array.isArray(v)?"text+label":"label"),c("hovertext"),c("hovertemplate");var g=c("pathbar.visible");x(r,n,i,c,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("textposition");var y=n.textposition.indexOf("bottom")!==-1;c("marker.line.width")&&c("marker.line.color",i.paper_bgcolor);var p=c("marker.colors");(n._hasColorscale=t(r,"marker","colors")||(r.marker||{}).coloraxis)?o(r,n,i,c,{prefix:"marker.",cLetter:"c"}):c("marker.depthfade",!(p||[]).length);var m=2*n.textfont.size;c("marker.pad.t",y?m/4:m),c("marker.pad.l",m/4),c("marker.pad.r",m/4),c("marker.pad.b",y?m:m/4),c("marker.cornerradius"),n._hovered={marker:{line:{width:2,color:l.contrast(i.paper_bgcolor)}}},g&&(c("pathbar.thickness",n.pathbar.textfont.size+2*d),c("pathbar.side"),c("pathbar.edgeshape")),c("sort"),c("root.color"),T(n,i,c),n._length=null}else n.visible=!1}},80694:function($,R,e){var k=e(39898),A=e(2791),l=e(72597).clearMinTextSize,T=e(16688).resizeText,x=e(46650);$.exports=function(d,s,t,o,r){var n,a,i=r.type,c=r.drawDescendants,h=d._fullLayout,f=h["_"+i+"layer"],b=!t;l(i,h),(n=f.selectAll("g.trace."+i).data(s,function(v){return v[0].trace.uid})).enter().append("g").classed("trace",!0).classed(i,!0),n.order(),!h.uniformtext.mode&&A.hasTransition(t)?(o&&(a=o()),k.transition().duration(t.duration).ease(t.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}).each(function(){f.selectAll("g.trace").each(function(v){x(d,v,this,t,c)})})):(n.each(function(v){x(d,v,this,t,c)}),h.uniformtext.mode&&T(d,f.selectAll(".trace"),i)),b&&n.exit().remove()}},66209:function($,R,e){var k=e(39898),A=e(71828),l=e(91424),T=e(63893),x=e(37210),d=e(96362).styleOne,s=e(43473),t=e(2791),o=e(83523),r=!0;$.exports=function(n,a,i,c,h){var f=h.barDifY,b=h.width,v=h.height,g=h.viewX,y=h.viewY,p=h.pathSlice,m=h.toMoveInsideSlice,w=h.strTransform,u=h.hasTransition,S=h.handleSlicesExit,_=h.makeUpdateSliceInterpolator,E=h.makeUpdateTextInterpolator,L={},C=n._context.staticPlot,P=n._fullLayout,I=a[0],U=I.trace,z=I.hierarchy,H=b/U._entryDepth,F=t.listPath(i.data,"id"),N=x(z.copy(),[b,v],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(N=N.filter(function(j){var K=F.indexOf(j.data.id);return K!==-1&&(j.x0=H*K,j.x1=H*(K+1),j.y0=f,j.y1=f+v,j.onPathbar=!0,!0)})).reverse(),(c=c.data(N,t.getPtId)).enter().append("g").classed("pathbar",!0),S(c,r,L,[b,v],p),c.order();var B=c;u&&(B=B.transition().each("end",function(){var j=k.select(this);t.setSliceCursor(j,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),B.each(function(j){j._x0=g(j.x0),j._x1=g(j.x1),j._y0=y(j.y0),j._y1=y(j.y1),j._hoverX=g(j.x1-Math.min(b,v)/2),j._hoverY=y(j.y1-v/2);var K=k.select(this),G=A.ensureSingle(K,"path","surface",function(X){X.style("pointer-events",C?"none":"all")});u?G.transition().attrTween("d",function(X){var ee=_(X,r,L,[b,v]);return function(re){return p(ee(re))}}):G.attr("d",p),K.call(o,i,n,a,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:n._transitioning}),G.call(d,j,U,{hovered:!1}),j._text=(t.getPtLabel(j)||"").split("<br>").join(" ")||"";var V=A.ensureSingle(K,"g","slicetext"),W=A.ensureSingle(V,"text","",function(X){X.attr("data-notex",1)}),J=A.ensureUniformFontSize(n,t.determineTextFont(U,j,P.font,{onPathbar:!0}));W.text(j._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(l.font,J).call(T.convertToTspans,n),j.textBB=l.bBox(W.node()),j.transform=m(j,{fontSize:J.size,onPathbar:!0}),j.transform.fontSize=J.size,u?W.transition().attrTween("transform",function(X){var ee=E(X,r,L,[b,v]);return function(re){return w(ee(re))}}):W.attr("transform",w(j))})}},52583:function($,R,e){var k=e(39898),A=e(71828),l=e(91424),T=e(63893),x=e(37210),d=e(96362).styleOne,s=e(43473),t=e(2791),o=e(83523),r=e(24714).formatSliceLabel,n=!1;$.exports=function(a,i,c,h,f){var b=f.width,v=f.height,g=f.viewX,y=f.viewY,p=f.pathSlice,m=f.toMoveInsideSlice,w=f.strTransform,u=f.hasTransition,S=f.handleSlicesExit,_=f.makeUpdateSliceInterpolator,E=f.makeUpdateTextInterpolator,L=f.prevEntry,C=a._context.staticPlot,P=a._fullLayout,I=i[0].trace,U=I.textposition.indexOf("left")!==-1,z=I.textposition.indexOf("right")!==-1,H=I.textposition.indexOf("bottom")!==-1,F=!H&&!I.marker.pad.t||H&&!I.marker.pad.b,N=x(c,[b,v],{packing:I.tiling.packing,squarifyratio:I.tiling.squarifyratio,flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1,pad:{inner:I.tiling.pad,top:I.marker.pad.t,left:I.marker.pad.l,right:I.marker.pad.r,bottom:I.marker.pad.b}}).descendants(),B=1/0,j=-1/0;N.forEach(function(J){var X=J.depth;X>=I._maxDepth?(J.x0=J.x1=(J.x0+J.x1)/2,J.y0=J.y1=(J.y0+J.y1)/2):(B=Math.min(B,X),j=Math.max(j,X))}),h=h.data(N,t.getPtId),I._maxVisibleLayers=isFinite(j)?j-B+1:0,h.enter().append("g").classed("slice",!0),S(h,n,{},[b,v],p),h.order();var K=null;if(u&&L){var G=t.getPtId(L);h.each(function(J){K===null&&t.getPtId(J)===G&&(K={x0:J.x0,x1:J.x1,y0:J.y0,y1:J.y1})})}var V=function(){return K||{x0:0,x1:b,y0:0,y1:v}},W=h;return u&&(W=W.transition().each("end",function(){var J=k.select(this);t.setSliceCursor(J,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),W.each(function(J){var X=t.isHeader(J,I);J._x0=g(J.x0),J._x1=g(J.x1),J._y0=y(J.y0),J._y1=y(J.y1),J._hoverX=g(J.x1-I.marker.pad.r),J._hoverY=y(H?J.y1-I.marker.pad.b/2:J.y0+I.marker.pad.t/2);var ee=k.select(this),re=A.ensureSingle(ee,"path","surface",function(ye){ye.style("pointer-events",C?"none":"all")});u?re.transition().attrTween("d",function(ye){var ge=_(ye,n,V(),[b,v]);return function(he){return p(ge(he))}}):re.attr("d",p),ee.call(o,c,a,i,{styleOne:d,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),re.call(d,J,I,{hovered:!1}),J.x0===J.x1||J.y0===J.y1?J._text="":J._text=X?F?"":t.getPtLabel(J)||"":r(J,c,I,i,P)||"";var ie=A.ensureSingle(ee,"g","slicetext"),se=A.ensureSingle(ie,"text","",function(ye){ye.attr("data-notex",1)}),fe=A.ensureUniformFontSize(a,t.determineTextFont(I,J,P.font));se.text(J._text||" ").classed("slicetext",!0).attr("text-anchor",z?"end":U||X?"start":"middle").call(l.font,fe).call(T.convertToTspans,a),J.textBB=l.bBox(se.node()),J.transform=m(J,{fontSize:fe.size,isHeader:X}),J.transform.fontSize=fe.size,u?se.transition().attrTween("transform",function(ye){var ge=E(ye,n,V(),[b,v]);return function(he){return w(ge(he))}}):se.attr("transform",w(J))}),K}},14102:function($){$.exports=function R(e,k,A){var l;A.swapXY&&(l=e.x0,e.x0=e.y0,e.y0=l,l=e.x1,e.x1=e.y1,e.y1=l),A.flipX&&(l=e.x0,e.x0=k[0]-e.x1,e.x1=k[0]-l),A.flipY&&(l=e.y0,e.y0=k[1]-e.y1,e.y1=k[1]-l);var T=e.children;if(T)for(var x=0;x<T.length;x++)R(T[x],k,A)}},70954:function($,R,e){$.exports={moduleType:"trace",name:"treemap",basePlotModule:e(78018),categories:[],animatable:!0,attributes:e(45802),layoutAttributes:e(55479),supplyDefaults:e(91174),supplyLayoutDefaults:e(77182),calc:e(65039).y,crossTraceCalc:e(65039).T,plot:e(5893),style:e(96362).style,colorbar:e(4898),meta:{}}},55479:function($){$.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77182:function($,R,e){var k=e(71828),A=e(55479);$.exports=function(l,T){function x(d,s){return k.coerce(l,T,A,d,s)}x("treemapcolorway",T.colorway),x("extendtreemapcolors")}},37210:function($,R,e){var k=e(674),A=e(14102);$.exports=function(l,T,x){var d,s=x.flipX,t=x.flipY,o=x.packing==="dice-slice",r=x.pad[t?"bottom":"top"],n=x.pad[s?"right":"left"],a=x.pad[s?"left":"right"],i=x.pad[t?"top":"bottom"];o&&(d=n,n=r,r=d,d=a,a=i,i=d);var c=k.treemap().tile(function(h,f){switch(h){case"squarify":return k.treemapSquarify.ratio(f);case"binary":return k.treemapBinary;case"dice":return k.treemapDice;case"slice":return k.treemapSlice;default:return k.treemapSliceDice}}(x.packing,x.squarifyratio)).paddingInner(x.pad.inner).paddingLeft(n).paddingRight(a).paddingTop(r).paddingBottom(i).size(o?[T[1],T[0]]:T)(l);return(o||s||t)&&A(c,T,{swapXY:o,flipX:s,flipY:t}),c}},5893:function($,R,e){var k=e(80694),A=e(52583);$.exports=function(l,T,x,d){return k(l,T,x,d,{type:"treemap",drawDescendants:A})}},46650:function($,R,e){var k=e(39898),A=e(29502).sX,l=e(2791),T=e(71828),x=e(97313).TEXTPAD,d=e(17295).toMoveInsideBar,s=e(72597).recordMinTextSize,t=e(43473),o=e(66209);function r(n){return l.isHierarchyRoot(n)?"":l.getPtId(n)}$.exports=function(n,a,i,c,h){var f=n._fullLayout,b=a[0],v=b.trace,g=v.type==="icicle",y=b.hierarchy,p=l.findEntryWithLevel(y,v.level),m=k.select(i),w=m.selectAll("g.pathbar"),u=m.selectAll("g.slice");if(!p)return w.remove(),void u.remove();var S=l.isHierarchyRoot(p),_=!f.uniformtext.mode&&l.hasTransition(c),E=l.getMaxDepth(v),L=f._size,C=v.domain,P=L.w*(C.x[1]-C.x[0]),I=L.h*(C.y[1]-C.y[0]),U=P,z=v.pathbar.thickness,H=v.marker.line.width+t.gapWithPathbar,F=v.pathbar.visible?v.pathbar.side.indexOf("bottom")>-1?I+H:-(z+H):0,N={x0:U,x1:U,y0:F,y1:F+z},B=function(le,de,_e){var Fe=v.tiling.pad,Ve=function(ot){return ot-Fe<=de.x0},He=function(ot){return ot+Fe>=de.x1},nt=function(ot){return ot-Fe<=de.y0},tt=function(ot){return ot+Fe>=de.y1};return le.x0===de.x0&&le.x1===de.x1&&le.y0===de.y0&&le.y1===de.y1?{x0:le.x0,x1:le.x1,y0:le.y0,y1:le.y1}:{x0:Ve(le.x0-Fe)?0:He(le.x0-Fe)?_e[0]:le.x0,x1:Ve(le.x1+Fe)?0:He(le.x1+Fe)?_e[0]:le.x1,y0:nt(le.y0-Fe)?0:tt(le.y0-Fe)?_e[1]:le.y0,y1:nt(le.y1+Fe)?0:tt(le.y1+Fe)?_e[1]:le.y1}},j=null,K={},G={},V=null,W=function(le,de){return de?K[r(le)]:G[r(le)]};b.hasMultipleRoots&&S&&E++,v._maxDepth=E,v._backgroundColor=f.paper_bgcolor,v._entryDepth=p.data.depth,v._atRootLevel=S;var J=-P/2+L.l+L.w*(C.x[1]+C.x[0])/2,X=-I/2+L.t+L.h*(1-(C.y[1]+C.y[0])/2),ee=function(le){return J+le},re=function(le){return X+le},ie=re(0),se=ee(0),fe=function(le){return se+le},ye=function(le){return ie+le};function ge(le,de){return le+","+de}var he=fe(0),ve=function(le){le.x=Math.max(he,le.x)},Oe=v.pathbar.edgeshape,xe=v[g?"tiling":"marker"].pad,ke=function(le){return v.textposition.indexOf(le)!==-1},Me=ke("top"),Te=ke("left"),Q=ke("right"),oe=ke("bottom"),ce=function(le,de){var _e=le.x0,Fe=le.x1,Ve=le.y0,He=le.y1,nt=le.textBB,tt=Me||de.isHeader&&!oe?"start":oe?"end":"middle",ot=ke("right"),dt=ke("left")||de.onPathbar?-1:ot?1:0;if(de.isHeader){if((_e+=(g?xe:xe.l)-x)>=(Fe-=(g?xe:xe.r)-x)){var kt=(_e+Fe)/2;_e=kt,Fe=kt}var mt;oe?Ve<(mt=He-(g?xe:xe.b))&&mt<He&&(Ve=mt):Ve<(mt=Ve+(g?xe:xe.t))&&mt<He&&(He=mt)}var wt=d(_e,Fe,Ve,He,nt,{isHorizontal:!1,constrained:!0,angle:0,anchor:tt,leftToRight:dt});return wt.fontSize=de.fontSize,wt.targetX=ee(wt.targetX),wt.targetY=re(wt.targetY),isNaN(wt.targetX)||isNaN(wt.targetY)?{}:(_e!==Fe&&Ve!==He&&s(v.type,wt,f),{scale:wt.scale,rotate:wt.rotate,textX:wt.textX,textY:wt.textY,anchorX:wt.anchorX,anchorY:wt.anchorY,targetX:wt.targetX,targetY:wt.targetY})},me=function(le,de){for(var _e,Fe=0,Ve=le;!_e&&Fe<E;)Fe++,(Ve=Ve.parent)?_e=W(Ve,de):Fe=E;return _e||{}},Ae=function(le,de,_e,Fe,Ve){var He,nt=W(le,de);if(nt)He=nt;else if(de)He=N;else if(j)if(le.parent){var tt=V||_e;tt&&!de?He=B(le,tt,Fe):(He={},T.extendFlat(He,me(le,de)))}else He=T.extendFlat({},le),g&&(Ve.orientation==="h"?Ve.flipX?He.x0=le.x1:He.x1=0:Ve.flipY?He.y0=le.y1:He.y1=0);else He={};return A(He,{x0:le.x0,x1:le.x1,y0:le.y0,y1:le.y1})},Ie=function(le,de,_e,Fe){var Ve=W(le,de),He={},nt=function(ot,dt,kt,mt){if(dt)return K[r(y)]||N;var wt=G[v.level]||kt;return function(Lt){return Lt.data.depth-p.data.depth<E}(ot)?B(ot,wt,mt):{}}(le,de,_e,Fe);T.extendFlat(He,{transform:ce({x0:nt.x0,x1:nt.x1,y0:nt.y0,y1:nt.y1,textBB:le.textBB,_text:le._text},{isHeader:l.isHeader(le,v)})}),Ve?He=Ve:le.parent&&T.extendFlat(He,me(le,de));var tt=le.transform;return le.x0!==le.x1&&le.y0!==le.y1&&s(v.type,tt,f),A(He,{transform:{scale:tt.scale,rotate:tt.rotate,textX:tt.textX,textY:tt.textY,anchorX:tt.anchorX,anchorY:tt.anchorY,targetX:tt.targetX,targetY:tt.targetY}})},Ce=function(le,de,_e,Fe,Ve){var He=Fe[0],nt=Fe[1];_?le.exit().transition().each(function(){var tt=k.select(this);tt.select("path.surface").transition().attrTween("d",function(ot){var dt=function(kt,mt,wt,Lt){var Ct,It=W(kt,mt);if(mt)Ct=N;else{var Ut=W(p,mt);Ct=Ut?B(kt,Ut,Lt):{}}return A(It,Ct)}(ot,de,0,[He,nt]);return function(kt){return Ve(dt(kt))}}),tt.select("g.slicetext").attr("opacity",0)}).remove():le.exit().remove()},Re=function(le){var de=le.transform;return le.x0!==le.x1&&le.y0!==le.y1&&s(v.type,de,f),T.getTextTransform({textX:de.textX,textY:de.textY,anchorX:de.anchorX,anchorY:de.anchorY,targetX:de.targetX,targetY:de.targetY,scale:de.scale,rotate:de.rotate})};_&&(w.each(function(le){K[r(le)]={x0:le.x0,x1:le.x1,y0:le.y0,y1:le.y1},le.transform&&(K[r(le)].transform={textX:le.transform.textX,textY:le.transform.textY,anchorX:le.transform.anchorX,anchorY:le.transform.anchorY,targetX:le.transform.targetX,targetY:le.transform.targetY,scale:le.transform.scale,rotate:le.transform.rotate})}),u.each(function(le){G[r(le)]={x0:le.x0,x1:le.x1,y0:le.y0,y1:le.y1},le.transform&&(G[r(le)].transform={textX:le.transform.textX,textY:le.transform.textY,anchorX:le.transform.anchorX,anchorY:le.transform.anchorY,targetX:le.transform.targetX,targetY:le.transform.targetY,scale:le.transform.scale,rotate:le.transform.rotate}),!j&&l.isEntry(le)&&(j=le)})),V=h(n,a,p,u,{width:P,height:I,viewX:ee,viewY:re,pathSlice:function(le){var de=ee(le.x0),_e=ee(le.x1),Fe=re(le.y0),Ve=re(le.y1),He=_e-de,nt=Ve-Fe;if(!He||!nt)return"";var tt=v.marker.cornerradius||0,ot=Math.min(tt,He/2,nt/2);ot&&le.data&&le.data.data&&le.data.data.label&&(Me&&(ot=Math.min(ot,xe.t)),Te&&(ot=Math.min(ot,xe.l)),Q&&(ot=Math.min(ot,xe.r)),oe&&(ot=Math.min(ot,xe.b)));var dt=function(kt,mt){return ot?"a"+ge(ot,ot)+" 0 0 1 "+ge(kt,mt):""};return"M"+ge(de,Fe+ot)+dt(ot,-ot)+"L"+ge(_e-ot,Fe)+dt(ot,ot)+"L"+ge(_e,Ve-ot)+dt(-ot,ot)+"L"+ge(de+ot,Ve)+dt(-ot,-ot)+"Z"},toMoveInsideSlice:ce,prevEntry:j,makeUpdateSliceInterpolator:Ae,makeUpdateTextInterpolator:Ie,handleSlicesExit:Ce,hasTransition:_,strTransform:Re}),v.pathbar.visible?o(n,a,p,w,{barDifY:F,width:U,height:z,viewX:fe,viewY:ye,pathSlice:function(le){var de=fe(Math.max(Math.min(le.x0,le.x0),0)),_e=fe(Math.min(Math.max(le.x1,le.x1),U)),Fe=ye(le.y0),Ve=ye(le.y1),He=z/2,nt={},tt={};nt.x=de,tt.x=_e,nt.y=tt.y=(Fe+Ve)/2;var ot={x:de,y:Fe},dt={x:_e,y:Fe},kt={x:_e,y:Ve},mt={x:de,y:Ve};return Oe===">"?(ot.x-=He,dt.x-=He,kt.x-=He,mt.x-=He):Oe==="/"?(kt.x-=He,mt.x-=He,nt.x-=He/2,tt.x-=He/2):Oe==="\\"?(ot.x-=He,dt.x-=He,nt.x-=He/2,tt.x-=He/2):Oe==="<"&&(nt.x-=He,tt.x-=He),ve(ot),ve(mt),ve(nt),ve(dt),ve(kt),ve(tt),"M"+ge(ot.x,ot.y)+"L"+ge(dt.x,dt.y)+"L"+ge(tt.x,tt.y)+"L"+ge(kt.x,kt.y)+"L"+ge(mt.x,mt.y)+"L"+ge(nt.x,nt.y)+"Z"},toMoveInsideSlice:ce,makeUpdateSliceInterpolator:Ae,makeUpdateTextInterpolator:Ie,handleSlicesExit:Ce,hasTransition:_,strTransform:Re}):w.remove()}},96362:function($,R,e){var k=e(39898),A=e(7901),l=e(71828),T=e(2791),x=e(72597).resizeText;function d(s,t,o,r){var n,a,i=(r||{}).hovered,c=t.data.data,h=c.i,f=c.color,b=T.isHierarchyRoot(t),v=1;if(i)n=o._hovered.marker.line.color,a=o._hovered.marker.line.width;else if(b&&f===o.root.color)v=100,n="rgba(0,0,0,0)",a=0;else if(n=l.castOption(o,h,"marker.line.color")||A.defaultLine,a=l.castOption(o,h,"marker.line.width")||0,!o._hasColorscale&&!t.onPathbar){var g=o.marker.depthfade;if(g){var y,p=A.combine(A.addOpacity(o._backgroundColor,.75),f);if(g===!0){var m=T.getMaxDepth(o);y=isFinite(m)?T.isLeaf(t)?0:o._maxVisibleLayers-(t.data.depth-o._entryDepth):t.data.height+1}else y=t.data.depth-o._entryDepth,o._atRootLevel||y++;if(y>0)for(var w=0;w<y;w++){var u=.5*w/y;f=A.combine(A.addOpacity(p,u),f)}}}s.style("stroke-width",a).call(A.fill,f).call(A.stroke,n).style("opacity",v)}$.exports={style:function(s){var t=s._fullLayout._treemaplayer.selectAll(".trace");x(s,t,"treemap"),t.each(function(o){var r=k.select(this),n=o[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(a){k.select(this).call(d,a,n,{hovered:!1})})})},styleOne:d}},68875:function($,R,e){var k=e(53522),A=e(1426).extendFlat,l=e(12663).axisHoverFormat;$.exports={y:k.y,x:k.x,x0:k.x0,y0:k.y0,xhoverformat:l("x"),yhoverformat:l("y"),name:A({},k.name,{}),orientation:A({},k.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:k.fillcolor,points:A({},k.boxpoints,{}),jitter:A({},k.jitter,{}),pointpos:A({},k.pointpos,{}),width:A({},k.width,{}),marker:k.marker,text:k.text,hovertext:k.hovertext,hovertemplate:k.hovertemplate,quartilemethod:k.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,selected:k.selected,unselected:k.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function($,R,e){var k=e(71828),A=e(89298),l=e(48518),T=e(60168),x=e(50606).BADNUM;function d(t,o,r){var n=o.max-o.min;if(!n)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,n/1e4);var a=r.length,i=k.stdev(r,a-1,o.mean);return Math.max(function(c,h,f){return 1.059*Math.min(h,f/1.349)*Math.pow(c,-.2)}(a,i,o.q3-o.q1),n/100)}function s(t,o,r,n){var a,i=t.spanmode,c=t.span||[],h=[o.min,o.max],f=[o.min-2*n,o.max+2*n];function b(g){var y=c[g],p=r.type==="multicategory"?r.r2c(y):r.d2c(y,0,t[o.valLetter+"calendar"]);return p===x?f[g]:p}var v={type:"linear",range:a=i==="soft"?f:i==="hard"?h:[b(0),b(1)]};return A.setConvert(v),v.cleanRange(),a}$.exports=function(t,o){var r=l(t,o);if(r[0].t.empty)return r;for(var n=t._fullLayout,a=A.getFromId(t,o[o.orientation==="h"?"xaxis":"yaxis"]),i=1/0,c=-1/0,h=0,f=0,b=0;b<r.length;b++){var v=r[b],g=v.pts.map(T.extractVal),y=v.bandwidth=d(o,v,g),p=v.span=s(o,v,a,y);if(v.min===v.max&&y===0)p=v.span=[v.min,v.max],v.density=[{v:1,t:p[0]}],v.bandwidth=y,h=Math.max(h,1);else{var m=p[1]-p[0],w=Math.ceil(m/(y/3)),u=m/w;if(!isFinite(u)||!isFinite(w))return k.error("Something went wrong with computing the violin span"),r[0].t.empty=!0,r;var S=T.makeKDE(v,o,g);v.density=new Array(w);for(var _=0,E=p[0];E<p[1]+u/2;_++,E+=u){var L=S(E);v.density[_]={v:L,t:E},h=Math.max(h,L)}}f=Math.max(f,g.length),i=Math.min(i,p[0]),c=Math.max(c,p[1])}var C=A.findExtremes(a,[i,c],{padded:!0});if(o._extremes[a._id]=C,o.width)r[0].t.maxKDE=h;else{var P=n._violinScaleGroupStats,I=o.scalegroup,U=P[I];U?(U.maxKDE=Math.max(U.maxKDE,h),U.maxCount=Math.max(U.maxCount,f)):P[I]={maxKDE:h,maxCount:f}}return r[0].t.labels.kde=k._(t,"kde:"),r}},86403:function($,R,e){var k=e(37188).setPositionOffset,A=["v","h"];$.exports=function(l,T){for(var x=l.calcdata,d=T.xaxis,s=T.yaxis,t=0;t<A.length;t++){for(var o=A[t],r=o==="h"?s:d,n=[],a=0;a<x.length;a++){var i=x[a],c=i[0].t,h=i[0].trace;h.visible!==!0||h.type!=="violin"||c.empty||h.orientation!==o||h.xaxis!==d._id||h.yaxis!==s._id||n.push(a)}k("violin",l,n,r)}}},15899:function($,R,e){var k=e(71828),A=e(7901),l=e(36411),T=e(68875);$.exports=function(x,d,s,t){function o(m,w){return k.coerce(x,d,T,m,w)}function r(m,w){return k.coerce2(x,d,T,m,w)}if(l.handleSampleDefaults(x,d,o,t),d.visible!==!1){o("bandwidth"),o("side"),o("width")||(o("scalegroup",d.name),o("scalemode"));var n,a=o("span");Array.isArray(a)&&(n="manual"),o("spanmode",n);var i=o("line.color",(x.marker||{}).color||s),c=o("line.width"),h=o("fillcolor",A.addOpacity(d.line.color,.5));l.handlePointsDefaults(x,d,o,{prefix:""});var f=r("box.width"),b=r("box.fillcolor",h),v=r("box.line.color",i),g=r("box.line.width",c);o("box.visible",Boolean(f||b||v||g))||(d.box={visible:!1});var y=r("meanline.color",i),p=r("meanline.width",c);o("meanline.visible",Boolean(y||p))||(d.meanline={visible:!1}),o("quartilemethod")}}},60168:function($,R,e){var k=e(71828),A=function(l){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*l*l)};R.makeKDE=function(l,T,x){var d=x.length,s=A,t=l.bandwidth,o=1/(d*t);return function(r){for(var n=0,a=0;a<d;a++)n+=s((r-x[a])/t);return o*n}},R.getPositionOnKdePath=function(l,T,x){var d,s;T.orientation==="h"?(d="y",s="x"):(d="x",s="y");var t=k.findPointOnPath(l.path,x,s,{pathLength:l.pathLength}),o=l.posCenterPx,r=t[d];return[r,T.side==="both"?2*o-r:o]},R.getKdeValue=function(l,T,x){var d=l.pts.map(R.extractVal);return R.makeKDE(l,T,d)(x)/l.posDensityScale},R.extractVal=function(l){return l.v}},57634:function($,R,e){var k=e(7901),A=e(71828),l=e(89298),T=e(41868),x=e(60168);$.exports=function(d,s,t,o,r){r||(r={});var n,a,i=r.hoverLayer,c=d.cd,h=c[0].trace,f=h.hoveron,b=f.indexOf("violins")!==-1,v=f.indexOf("kde")!==-1,g=[];if(b||v){var y=T.hoverOnBoxes(d,s,t,o);if(v&&y.length>0){var p,m,w,u,S,_=d.xa,E=d.ya;h.orientation==="h"?(S=s,p="y",w=E,m="x",u=_):(S=t,p="x",w=_,m="y",u=E);var L=c[d.index];if(S>=L.span[0]&&S<=L.span[1]){var C=A.extendFlat({},d),P=u.c2p(S,!0),I=x.getKdeValue(L,h,S),U=x.getPositionOnKdePath(L,h,P),z=w._offset,H=w._length;C[p+"0"]=U[0],C[p+"1"]=U[1],C[m+"0"]=C[m+"1"]=P,C[m+"Label"]=m+": "+l.hoverLabelText(u,S,h[m+"hoverformat"])+", "+c[0].t.labels.kde+" "+I.toFixed(3);for(var F=0,N=0;N<y.length;N++)if(y[N].attr==="med"){F=N;break}C.spikeDistance=y[F].spikeDistance;var B=p+"Spike";C[B]=y[F][B],y[F].spikeDistance=void 0,y[F][B]=void 0,C.hovertemplate=!1,g.push(C),(a={})[p+"1"]=A.constrain(z+U[0],z,z+H),a[p+"2"]=A.constrain(z+U[1],z,z+H),a[m+"1"]=a[m+"2"]=u._offset+P}}b&&(g=g.concat(y))}f.indexOf("points")!==-1&&(n=T.hoverOnPoints(d,s,t));var j=i.selectAll(".violinline-"+h.uid).data(a?[0]:[]);return j.enter().append("line").classed("violinline-"+h.uid,!0).attr("stroke-width",1.5),j.exit().remove(),j.attr(a).call(k.stroke,d.color),o==="closest"?n?[n]:g:(n&&g.push(n),g)}},47462:function($,R,e){$.exports={attributes:e(68875),layoutAttributes:e(9228),supplyDefaults:e(15899),crossTraceDefaults:e(36411).crossTraceDefaults,supplyLayoutDefaults:e(33598),calc:e(38603),crossTraceCalc:e(86403),plot:e(28443),style:e(31847),styleOnSelect:e(16296).styleOnSelect,hoverPoints:e(57634),selectPoints:e(24626),moduleType:"trace",name:"violin",basePlotModule:e(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function($,R,e){var k=e(40094),A=e(71828).extendFlat;$.exports={violinmode:A({},k.boxmode,{}),violingap:A({},k.boxgap,{}),violingroupgap:A({},k.boxgroupgap,{})}},33598:function($,R,e){var k=e(71828),A=e(9228),l=e(4199);$.exports=function(T,x,d){l._supply(T,x,d,function(s,t){return k.coerce(T,x,A,s,t)},"violin")}},28443:function($,R,e){var k=e(39898),A=e(71828),l=e(91424),T=e(86047),x=e(34621),d=e(60168);$.exports=function(s,t,o,r){var n=s._fullLayout,a=t.xaxis,i=t.yaxis;function c(h,f){var b=x(h,{xaxis:a,yaxis:i,trace:f,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return l.smoothopen(b[0],1)}A.makeTraceGroups(r,o,"trace violins").each(function(h){var f=k.select(this),b=h[0],v=b.t,g=b.trace;if(g.visible!==!0||v.empty)f.remove();else{var y=v.bPos,p=v.bdPos,m=t[v.valLetter+"axis"],w=t[v.posLetter+"axis"],u=g.side==="both",S=u||g.side==="positive",_=u||g.side==="negative",E=f.selectAll("path.violin").data(A.identity);E.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),E.exit().remove(),E.each(function(F){var N,B,j,K,G,V,W,J,X=k.select(this),ee=F.density,re=ee.length,ie=w.c2l(F.pos+y,!0),se=w.l2p(ie);if(g.width)N=v.maxKDE/p;else{var fe=n._violinScaleGroupStats[g.scalegroup];N=g.scalemode==="count"?fe.maxKDE/p*(fe.maxCount/F.pts.length):fe.maxKDE/p}if(S){for(W=new Array(re),G=0;G<re;G++)(J=W[G]={})[v.posLetter]=ie+ee[G].v/N,J[v.valLetter]=m.c2l(ee[G].t,!0);B=c(W,g)}if(_){for(W=new Array(re),V=0,G=re-1;V<re;V++,G--)(J=W[V]={})[v.posLetter]=ie-ee[G].v/N,J[v.valLetter]=m.c2l(ee[G].t,!0);j=c(W,g)}if(u)K=B+"L"+j.substr(1)+"Z";else{var ye=[se,m.c2p(ee[0].t)],ge=[se,m.c2p(ee[re-1].t)];g.orientation==="h"&&(ye.reverse(),ge.reverse()),K=S?"M"+ye+"L"+B.substr(1)+"L"+ge:"M"+ge+"L"+j.substr(1)+"L"+ye}X.attr("d",K),F.posCenterPx=se,F.posDensityScale=N*p,F.path=X.node(),F.pathLength=F.path.getTotalLength()/(u?2:1)});var L,C,P,I=g.box,U=I.width,z=(I.line||{}).width;u?(L=p*U,C=0):S?(L=[0,p*U/2],C=z*{x:1,y:-1}[v.posLetter]):(L=[p*U/2,0],C=z*{x:-1,y:1}[v.posLetter]),T.plotBoxAndWhiskers(f,{pos:w,val:m},g,{bPos:y,bdPos:L,bPosPxOffset:C}),T.plotBoxMean(f,{pos:w,val:m},g,{bPos:y,bdPos:L,bPosPxOffset:C}),!g.box.visible&&g.meanline.visible&&(P=A.identity);var H=f.selectAll("path.meanline").data(P||[]);H.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),H.exit().remove(),H.each(function(F){var N=m.c2p(F.mean,!0),B=d.getPositionOnKdePath(F,g,N);k.select(this).attr("d",g.orientation==="h"?"M"+N+","+B[0]+"V"+B[1]:"M"+B[0]+","+N+"H"+B[1])}),T.plotPoints(f,{x:a,y:i},g,v)}})}},31847:function($,R,e){var k=e(39898),A=e(7901),l=e(16296).stylePoints;$.exports=function(T){var x=k.select(T).selectAll("g.trace.violins");x.style("opacity",function(d){return d[0].trace.opacity}),x.each(function(d){var s=d[0].trace,t=k.select(this),o=s.box||{},r=o.line||{},n=s.meanline||{},a=n.width;t.selectAll("path.violin").style("stroke-width",s.line.width+"px").call(A.stroke,s.line.color).call(A.fill,s.fillcolor),t.selectAll("path.box").style("stroke-width",r.width+"px").call(A.stroke,r.color).call(A.fill,o.fillcolor);var i={"stroke-width":a+"px","stroke-dasharray":2*a+"px,"+a+"px"};t.selectAll("path.mean").style(i).call(A.stroke,n.color),t.selectAll("path.meanline").style(i).call(A.stroke,n.color),l(t,s,T)})}},16336:function($,R,e){var k=e(50693),A=e(16249),l=e(54532),T=e(9012),x=e(1426).extendFlat,d=e(30962).overrideAll,s=$.exports=d(x({x:A.x,y:A.y,z:A.z,value:A.value,isomin:A.isomin,isomax:A.isomax,surface:A.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:A.slices,caps:A.caps,text:A.text,hovertext:A.hovertext,xhoverformat:A.xhoverformat,yhoverformat:A.yhoverformat,zhoverformat:A.zhoverformat,valuehoverformat:A.valuehoverformat,hovertemplate:A.hovertemplate},k("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:A.colorbar,opacity:A.opacity,opacityscale:l.opacityscale,lightposition:A.lightposition,lighting:A.lighting,flatshading:A.flatshading,contour:A.contour,hoverinfo:x({},T.hoverinfo),showlegend:x({},T.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},64809:function($,R,e){var k=e(9330).gl_mesh3d,A=e(81697).parseColorScale,l=e(78614),T=e(21081).extractOpts,x=e(90060),d=e(22674).findNearestOnAxis,s=e(22674).generateIsoMeshes;function t(r,n,a){this.scene=r,this.uid=a,this.mesh=n,this.name="",this.data=null,this.showContour=!1}var o=t.prototype;o.handlePick=function(r){if(r.object===this.mesh){var n=r.data.index,a=this.data._meshX[n],i=this.data._meshY[n],c=this.data._meshZ[n],h=this.data._Ys.length,f=this.data._Zs.length,b=d(a,this.data._Xs).id,v=d(i,this.data._Ys).id,g=d(c,this.data._Zs).id,y=r.index=g+f*v+f*h*b;r.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var p=this.data.hovertext||this.data.text;return Array.isArray(p)&&p[y]!==void 0?r.textLabel=p[y]:p&&(r.textLabel=p),!0}},o.update=function(r){var n=this.scene,a=n.fullSceneLayout;function i(f,b,v,g){return b.map(function(y){return f.d2l(y,0,g)*v})}this.data=s(r);var c={positions:x(i(a.xaxis,r._meshX,n.dataScale[0],r.xcalendar),i(a.yaxis,r._meshY,n.dataScale[1],r.ycalendar),i(a.zaxis,r._meshZ,n.dataScale[2],r.zcalendar)),cells:x(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,opacityscale:r.opacityscale,contourEnable:r.contour.show,contourColor:l(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},h=T(r);c.vertexIntensity=r._meshIntensity,c.vertexIntensityBounds=[h.min,h.max],c.colormap=A(r),this.mesh.update(c)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(r,n){var a=r.glplot.gl,i=k({gl:a}),c=new t(r,i,n.uid);return i._trace=c,c.update(n),r.glplot.add(i),c}},47651:function($,R,e){var k=e(71828),A=e(16336),l=e(82738).supplyIsoDefaults,T=e(91831).opacityscaleDefaults;$.exports=function(x,d,s,t){function o(r,n){return k.coerce(x,d,A,r,n)}l(x,d,s,t,o),T(x,d,t,o)}},17659:function($,R,e){$.exports={attributes:e(16336),supplyDefaults:e(47651),calc:e(56959),colorbar:{min:"cmin",max:"cmax"},plot:e(64809),moduleType:"trace",name:"volume",basePlotModule:e(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function($,R,e){var k=e(1486),A=e(82196).line,l=e(9012),T=e(12663).axisHoverFormat,x=e(5386).f,d=e(5386).s,s=e(48334),t=e(1426).extendFlat,o=e(7901);function r(n){return{marker:{color:t({},k.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},k.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},k.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}$.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:k.hovertext,hovertemplate:x({},{keys:s.eventDataKeys}),hoverinfo:t({},l.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:d({editType:"plot"},{keys:s.eventDataKeys.concat(["label"])}),text:k.text,textposition:k.textposition,insidetextanchor:k.insidetextanchor,textangle:k.textangle,textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:k.orientation,offset:k.offset,width:k.width,increasing:r(),decreasing:r(),totals:r(),connector:{line:{color:t({},A.color,{dflt:o.defaultLine}),width:t({},A.width,{editType:"plot"}),dash:A.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup}},52752:function($,R,e){var k=e(89298),A=e(42973),l=e(71828).mergeArray,T=e(66279),x=e(50606).BADNUM;function d(t){return t==="a"||t==="absolute"}function s(t){return t==="t"||t==="total"}$.exports=function(t,o){var r,n,a,i,c,h,f=k.getFromId(t,o.xaxis||"x"),b=k.getFromId(t,o.yaxis||"y");o.orientation==="h"?(r=f.makeCalcdata(o,"x"),a=b.makeCalcdata(o,"y"),i=A(o,b,"y",a),c=!!o.yperiodalignment,h="y"):(r=b.makeCalcdata(o,"y"),a=f.makeCalcdata(o,"x"),i=A(o,f,"x",a),c=!!o.xperiodalignment,h="x"),n=i.vals;for(var v,g=Math.min(n.length,r.length),y=new Array(g),p=0,m=!1,w=0;w<g;w++){var u=r[w]||0,S=!1;(r[w]!==x||s(o.measure[w])||d(o.measure[w]))&&w+1<g&&(r[w+1]!==x||s(o.measure[w+1])||d(o.measure[w+1]))&&(S=!0);var _=y[w]={i:w,p:n[w],s:u,rawS:u,cNext:S};d(o.measure[w])?(p=_.s,_.isSum=!0,_.dir="totals",_.s=p):s(o.measure[w])?(_.isSum=!0,_.dir="totals",_.s=p):(_.isSum=!1,_.dir=_.rawS<0?"decreasing":"increasing",v=_.s,_.s=p+v,p+=v),_.dir==="totals"&&(m=!0),c&&(y[w].orig_p=a[w],y[w][h+"End"]=i.ends[w],y[w][h+"Start"]=i.starts[w]),o.ids&&(_.id=String(o.ids[w])),_.v=(o.base||0)+p}return y.length&&(y[0].hasTotals=m),l(o.text,y,"tx"),l(o.hovertext,y,"htx"),T(y,o),y}},48334:function($){$.exports={eventDataKeys:["initial","delta","final"]}},70766:function($,R,e){var k=e(11661).setGroupPositions;$.exports=function(A,l){var T,x,d=A._fullLayout,s=A._fullData,t=A.calcdata,o=l.xaxis,r=l.yaxis,n=[],a=[],i=[];for(x=0;x<s.length;x++){var c=s[x];c.visible===!0&&c.xaxis===o._id&&c.yaxis===r._id&&c.type==="waterfall"&&(T=t[x],c.orientation==="h"?i.push(T):a.push(T),n.push(T))}var h={mode:d.waterfallmode,norm:d.waterfallnorm,gap:d.waterfallgap,groupgap:d.waterfallgroupgap};for(k(A,o,r,a,h),k(A,r,o,i,h),x=0;x<n.length;x++){T=n[x];for(var f=0;f<T.length;f++){var b=T[f];b.isSum===!1&&(b.s0+=f===0?0:T[f-1].s),f+1<T.length&&(T[f].nextP0=T[f+1].p0,T[f].nextS0=T[f+1].s0)}}}},83266:function($,R,e){var k=e(71828),A=e(26125),l=e(90769).handleText,T=e(67513),x=e(73927),d=e(43037),s=e(7901),t=e(22372),o=t.INCREASING.COLOR,r=t.DECREASING.COLOR;function n(a,i,c){a(i+".marker.color",c),a(i+".marker.line.color",s.defaultLine),a(i+".marker.line.width")}$.exports={supplyDefaults:function(a,i,c,h){function f(v,g){return k.coerce(a,i,d,v,g)}if(T(a,i,h,f)){x(a,i,h,f),f("xhoverformat"),f("yhoverformat"),f("measure"),f("orientation",i.x&&!i.y?"h":"v"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate");var b=f("textposition");l(a,i,h,f,b,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i.textposition!=="none"&&(f("texttemplate"),i.texttemplate||f("textinfo")),n(f,"increasing",o),n(f,"decreasing",r),n(f,"totals","#4499FF"),f("connector.visible")&&(f("connector.mode"),f("connector.line.width")&&(f("connector.line.color"),f("connector.line.dash")))}else i.visible=!1},crossTraceDefaults:function(a,i){var c,h;function f(v){return k.coerce(h._input,h,d,v)}if(i.waterfallmode==="group")for(var b=0;b<a.length;b++)c=(h=a[b])._input,A(c,h,i,f)}}},58593:function($){$.exports=function(R,e){return R.x="xVal"in e?e.xVal:e.x,R.y="yVal"in e?e.yVal:e.y,"initial"in e&&(R.initial=e.initial),"delta"in e&&(R.delta=e.delta),"final"in e&&(R.final=e.final),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),R}},61326:function($,R,e){var k=e(89298).hoverLabelText,A=e(7901).opacity,l=e(95423).hoverOnBars,T=e(22372),x=T.INCREASING.SYMBOL,d=T.DECREASING.SYMBOL;$.exports=function(s,t,o,r,n){var a=l(s,t,o,r,n);if(a){var i=a.cd,c=i[0].trace,h=c.orientation==="h",f=h?"x":"y",b=h?s.xa:s.ya,v=i[a.index],g=v.isSum?v.b+v.s:v.rawS;if(!v.isSum){a.initial=v.b+v.s-g,a.delta=g,a.final=a.initial+a.delta;var y=_(Math.abs(a.delta));a.deltaLabel=g<0?"("+y+")":y,a.finalLabel=_(a.final),a.initialLabel=_(a.initial)}var p=v.hi||c.hoverinfo,m=[];if(p&&p!=="none"&&p!=="skip"){var w=p==="all",u=p.split("+"),S=function(E){return w||u.indexOf(E)!==-1};v.isSum||(!S("final")||S(h?"x":"y")||m.push(a.finalLabel),S("delta")&&(g<0?m.push(a.deltaLabel+" "+d):m.push(a.deltaLabel+" "+x)),S("initial")&&m.push("Initial: "+a.initialLabel))}return m.length&&(a.extraText=m.join("<br>")),a.color=function(E,L){var C=E[L.dir].marker,P=C.color,I=C.line.color,U=C.line.width;return A(P)?P:A(I)&&U?I:void 0}(c,v),[a]}function _(E){return k(b,E,c[f+"hoverformat"])}}},19990:function($,R,e){$.exports={attributes:e(43037),layoutAttributes:e(13494),supplyDefaults:e(83266).supplyDefaults,crossTraceDefaults:e(83266).crossTraceDefaults,supplyLayoutDefaults:e(5176),calc:e(52752),crossTraceCalc:e(70766),plot:e(30436),style:e(55750).style,hoverPoints:e(61326),eventData:e(58593),selectPoints:e(81974),moduleType:"trace",name:"waterfall",basePlotModule:e(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function($){$.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function($,R,e){var k=e(71828),A=e(13494);$.exports=function(l,T,x){var d=!1;function s(r,n){return k.coerce(l,T,A,r,n)}for(var t=0;t<x.length;t++){var o=x[t];if(o.visible&&o.type==="waterfall"){d=!0;break}}d&&(s("waterfallmode"),s("waterfallgap",.2),s("waterfallgroupgap"))}},30436:function($,R,e){var k=e(39898),A=e(71828),l=e(91424),T=e(50606).BADNUM,x=e(17295),d=e(72597).clearMinTextSize;$.exports=function(s,t,o,r){var n=s._fullLayout;d("waterfall",n),x.plot(s,t,o,r,{mode:n.waterfallmode,norm:n.waterfallmode,gap:n.waterfallgap,groupgap:n.waterfallgroupgap}),function(a,i,c,h){var f=i.xaxis,b=i.yaxis;A.makeTraceGroups(h,c,"trace bars").each(function(v){var g=k.select(this),y=v[0].trace,p=A.ensureSingle(g,"g","lines");if(y.connector&&y.connector.visible){var m=y.orientation==="h",w=y.connector.mode,u=p.selectAll("g.line").data(A.identity);u.enter().append("g").classed("line",!0),u.exit().remove();var S=u.size();u.each(function(_,E){if(E===S-1||_.cNext){var L=function(U,z,H,F){var N=[],B=[],j=F?z:H,K=F?H:z;return N[0]=j.c2p(U.s0,!0),B[0]=K.c2p(U.p0,!0),N[1]=j.c2p(U.s1,!0),B[1]=K.c2p(U.p1,!0),N[2]=j.c2p(U.nextS0,!0),B[2]=K.c2p(U.nextP0,!0),F?[N,B]:[B,N]}(_,f,b,m),C=L[0],P=L[1],I="";C[0]!==T&&P[0]!==T&&C[1]!==T&&P[1]!==T&&(w==="spanning"&&!_.isSum&&E>0&&(I+=m?"M"+C[0]+","+P[1]+"V"+P[0]:"M"+C[1]+","+P[0]+"H"+C[0]),w!=="between"&&(_.isSum||E<S-1)&&(I+=m?"M"+C[1]+","+P[0]+"V"+P[1]:"M"+C[0]+","+P[1]+"H"+C[1]),C[2]!==T&&P[2]!==T&&(I+=m?"M"+C[1]+","+P[1]+"V"+P[2]:"M"+C[1]+","+P[1]+"H"+C[2])),I===""&&(I="M0,0Z"),A.ensureSingle(k.select(this),"path").attr("d",I).call(l.setClipUrl,i.layerClipId,a)}})}else p.remove()})}(s,t,o,r)}},55750:function($,R,e){var k=e(39898),A=e(91424),l=e(7901),T=e(37822).DESELECTDIM,x=e(16688),d=e(72597).resizeText,s=x.styleTextPoints;$.exports={style:function(t,o,r){var n=r||k.select(t).selectAll("g.waterfalllayer").selectAll("g.trace");d(t,n,"waterfall"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var i=k.select(this),c=a[0].trace;i.selectAll(".point > path").each(function(h){if(!h.isBlank){var f=c[h.dir].marker;k.select(this).call(l.fill,f.color).call(l.stroke,f.line.color).call(A.dashLine,f.line.dash,f.line.width).style("opacity",c.selectedpoints&&!h.selected?T:1)}}),s(i,c,t),i.selectAll(".lines").each(function(){var h=c.connector.line;A.lineGroupStyle(k.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},82887:function($,R,e){var k=e(89298),A=e(71828),l=e(86281),T=e(79344).p,x=e(50606).BADNUM;R.moduleType="transform",R.name="aggregate";var d=R.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},s=d.aggregations;function t(a,i,c,h){if(h.enabled){for(var f=h.target,b=A.nestedProperty(i,f),v=b.get(),g=function(m,w){var u=m.func,S=w.d2c,_=w.c2d;switch(u){case"count":return o;case"first":return r;case"last":return n;case"sum":return function(E,L){for(var C=0,P=0;P<L.length;P++){var I=S(E[L[P]]);I!==x&&(C+=I)}return _(C)};case"avg":return function(E,L){for(var C=0,P=0,I=0;I<L.length;I++){var U=S(E[L[I]]);U!==x&&(C+=U,P++)}return P?_(C/P):x};case"min":return function(E,L){for(var C=1/0,P=0;P<L.length;P++){var I=S(E[L[P]]);I!==x&&(C=Math.min(C,I))}return C===1/0?x:_(C)};case"max":return function(E,L){for(var C=-1/0,P=0;P<L.length;P++){var I=S(E[L[P]]);I!==x&&(C=Math.max(C,I))}return C===-1/0?x:_(C)};case"range":return function(E,L){for(var C=1/0,P=-1/0,I=0;I<L.length;I++){var U=S(E[L[I]]);U!==x&&(C=Math.min(C,U),P=Math.max(P,U))}return P===-1/0||C===1/0?x:_(P-C)};case"change":return function(E,L){var C=S(E[L[0]]),P=S(E[L[L.length-1]]);return C===x||P===x?x:_(P-C)};case"median":return function(E,L){for(var C=[],P=0;P<L.length;P++){var I=S(E[L[P]]);I!==x&&C.push(I)}if(!C.length)return x;C.sort(A.sorterAsc);var U=(C.length-1)/2;return _((C[Math.floor(U)]+C[Math.ceil(U)])/2)};case"mode":return function(E,L){for(var C={},P=0,I=x,U=0;U<L.length;U++){var z=S(E[L[U]]);if(z!==x){var H=C[z]=(C[z]||0)+1;H>P&&(P=H,I=z)}}return P?_(I):x};case"rms":return function(E,L){for(var C=0,P=0,I=0;I<L.length;I++){var U=S(E[L[I]]);U!==x&&(C+=U*U,P++)}return P?_(Math.sqrt(C/P)):x};case"stddev":return function(E,L){var C,P=0,I=0,U=1,z=x;for(C=0;C<L.length&&z===x;C++)z=S(E[L[C]]);if(z===x)return x;for(;C<L.length;C++){var H=S(E[L[C]]);if(H!==x){var F=H-z;P+=F,I+=F*F,U++}}var N=m.funcmode==="sample"?U-1:U;return N?Math.sqrt((I-P*P/U)/N):0}}}(h,k.getDataConversions(a,i,f,v)),y=new Array(c.length),p=0;p<c.length;p++)y[p]=g(v,c[p]);b.set(y),h.func==="count"&&A.pushUnique(i._arrayAttrs,f)}}function o(a,i){return i.length}function r(a,i){return a[i[0]]}function n(a,i){return a[i[i.length-1]]}R.supplyDefaults=function(a,i){var c,h={};function f(_,E){return A.coerce(a,h,d,_,E)}if(!f("enabled"))return h;var b=l.findArrayAttributes(i),v={};for(c=0;c<b.length;c++)v[b[c]]=1;var g=f("groups");if(!Array.isArray(g)){if(!v[g])return h.enabled=!1,h;v[g]=0}var y,p=a.aggregations||[],m=h.aggregations=new Array(p.length);function w(_,E){return A.coerce(p[c],y,s,_,E)}for(c=0;c<p.length;c++){y={_index:c};var u=w("target"),S=w("func");w("enabled")&&u&&(v[u]||S==="count"&&v[u]===void 0)?(S==="stddev"&&w("funcmode"),v[u]=0,m[c]=y):m[c]={enabled:!1,_index:c}}for(c=0;c<b.length;c++)v[b[c]]&&m.push({target:b[c],func:s.func.dflt,enabled:!0,_index:-1});return h},R.calcTransform=function(a,i,c){if(c.enabled){var h=c.groups,f=A.getTargetArray(i,{target:h});if(f){var b,v,g,y,p={},m={},w=[],u=T(i.transforms,c),S=f.length;for(i._length&&(S=Math.min(S,i._length)),b=0;b<S;b++)(g=p[v=f[b]])===void 0?(p[v]=w.length,y=[b],w.push(y),m[p[v]]=u(b)):(w[g].push(b),m[p[v]]=(m[p[v]]||[]).concat(u(b)));c._indexToPoints=m;var _=c.aggregations;for(b=0;b<_.length;b++)t(a,i,w,_[b]);typeof h=="string"&&t(a,i,w,{target:h,func:"first",enabled:!0}),i._length=w.length}}}},14382:function($,R,e){var k=e(71828),A=e(73972),l=e(89298),T=e(79344).p,x=e(74808),d=x.COMPARISON_OPS,s=x.INTERVAL_OPS,t=x.SET_OPS;R.moduleType="transform",R.name="filter",R.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(d).concat(s).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},R.supplyDefaults=function(o){var r={};function n(c,h){return k.coerce(o,r,R.attributes,c,h)}if(n("enabled")){var a=n("target");if(k.isArrayOrTypedArray(a)&&a.length===0)return r.enabled=!1,r;n("preservegaps"),n("operation"),n("value");var i=A.getComponentMethod("calendars","handleDefaults");i(o,r,"valuecalendar",null),i(o,r,"targetcalendar",null)}return r},R.calcTransform=function(o,r,n){if(n.enabled){var a=k.getTargetArray(r,n);if(a){var i=n.target,c=a.length;r._length&&(c=Math.min(c,r._length));var h=n.targetcalendar,f=r._arrayAttrs,b=n.preservegaps;if(typeof i=="string"){var v=k.nestedProperty(r,i+"calendar").get();v&&(h=v)}var g,y,p=function(L,C,P){var I=L.operation,U=L.value,z=Array.isArray(U);function H(j){return j.indexOf(I)!==-1}var F,N=function(j){return C(j,0,L.valuecalendar)},B=function(j){return C(j,0,P)};switch(H(d)?F=N(z?U[0]:U):H(s)?F=z?[N(U[0]),N(U[1])]:[N(U),N(U)]:H(t)&&(F=z?U.map(N):[N(U)]),I){case"=":return function(j){return B(j)===F};case"!=":return function(j){return B(j)!==F};case"<":return function(j){return B(j)<F};case"<=":return function(j){return B(j)<=F};case">":return function(j){return B(j)>F};case">=":return function(j){return B(j)>=F};case"[]":return function(j){var K=B(j);return K>=F[0]&&K<=F[1]};case"()":return function(j){var K=B(j);return K>F[0]&&K<F[1]};case"[)":return function(j){var K=B(j);return K>=F[0]&&K<F[1]};case"(]":return function(j){var K=B(j);return K>F[0]&&K<=F[1]};case"][":return function(j){var K=B(j);return K<=F[0]||K>=F[1]};case")(":return function(j){var K=B(j);return K<F[0]||K>F[1]};case"](":return function(j){var K=B(j);return K<=F[0]||K>F[1]};case")[":return function(j){var K=B(j);return K<F[0]||K>=F[1]};case"{}":return function(j){return F.indexOf(B(j))!==-1};case"}{":return function(j){return F.indexOf(B(j))===-1}}}(n,l.getDataToCoordFunc(o,r,i,a),h),m={},w={},u=0;b?(g=function(L){m[L.astr]=k.extendDeep([],L.get()),L.set(new Array(c))},y=function(L,C){var P=m[L.astr][C];L.get()[C]=P}):(g=function(L){m[L.astr]=k.extendDeep([],L.get()),L.set([])},y=function(L,C){var P=m[L.astr][C];L.get().push(P)}),E(g);for(var S=T(r.transforms,n),_=0;_<c;_++)p(a[_])?(E(y,_),w[u++]=S(_)):b&&u++;n._indexToPoints=w,r._length=u}}function E(L,C){for(var P=0;P<f.length;P++)L(k.nestedProperty(r,f[P]),C)}}},43102:function($,R,e){var k=e(71828),A=e(86281),l=e(74875),T=e(79344).p;function x(d,s){var t,o,r,n,a,i,c,h,f,b,v=s.transform,g=s.transformIndex,y=d.transforms[g].groups,p=T(d.transforms,v);if(!k.isArrayOrTypedArray(y)||y.length===0)return[d];var m=k.filterUnique(y),w=new Array(m.length),u=y.length,S=A.findArrayAttributes(d),_=v.styles||[],E={};for(t=0;t<_.length;t++)E[_[t].target]=_[t].value;v.styles&&(b=k.keyedContainer(v,"styles","target","value.name"));var L={},C={};for(t=0;t<m.length;t++){L[i=m[t]]=t,C[i]=0,(c=w[t]=k.extendDeepNoArrays({},d))._group=i,c.transforms[g]._indexToPoints={};var P=null;for(b&&(P=b.get(i)),c.name=P||P===""?P:k.templateString(v.nameformat,{trace:d.name,group:i}),h=c.transforms,c.transforms=[],o=0;o<h.length;o++)c.transforms[o]=k.extendDeepNoArrays({},h[o]);for(o=0;o<S.length;o++)k.nestedProperty(c,S[o]).set([])}for(r=0;r<S.length;r++){for(n=S[r],o=0,f=[];o<m.length;o++)f[o]=k.nestedProperty(w[o],n).get();for(a=k.nestedProperty(d,n).get(),o=0;o<u;o++)f[L[y[o]]].push(a[o])}for(o=0;o<u;o++)(c=w[L[y[o]]]).transforms[g]._indexToPoints[C[y[o]]]=p(o),C[y[o]]++;for(t=0;t<m.length;t++)i=m[t],c=w[t],l.clearExpandedTraceDefaultColors(c),c=k.extendDeepNoArrays(c,E[i]||{});return w}R.moduleType="transform",R.name="groupby",R.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},R.supplyDefaults=function(d,s,t){var o,r={};function n(f,b){return k.coerce(d,r,R.attributes,f,b)}if(!n("enabled"))return r;n("groups"),n("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var a=d.styles,i=r.styles=[];if(a)for(o=0;o<a.length;o++){var c=i[o]={};k.coerce(a[o],i[o],R.attributes.styles,"target");var h=k.coerce(a[o],i[o],R.attributes.styles,"value");k.isPlainObject(h)?c.value=k.extendDeep({},h):h&&delete c.value}return r},R.transform=function(d,s){var t,o,r,n=[];for(o=0;o<d.length;o++)for(t=x(d[o],s),r=0;r<t.length;r++)n.push(t[r]);return n}},79344:function($,R){R.p=function(e,k){for(var A,l,T=0;T<e.length&&(A=e[T])!==k;T++)A._indexToPoints&&A.enabled!==!1&&(l=A._indexToPoints);var x=l?function(d){return l[d]}:function(d){return[d]};return x}},32275:function($,R,e){var k=e(71828),A=e(89298),l=e(79344).p,T=e(50606).BADNUM;R.moduleType="transform",R.name="sort",R.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},R.supplyDefaults=function(x){var d={};function s(t,o){return k.coerce(x,d,R.attributes,t,o)}return s("enabled")&&(s("target"),s("order")),d},R.calcTransform=function(x,d,s){if(s.enabled){var t=k.getTargetArray(d,s);if(t){var o=s.target,r=t.length;d._length&&(r=Math.min(r,d._length));var n,a,i=d._arrayAttrs,c=function(y,p,m,w){var u,S=new Array(w),_=new Array(w);for(u=0;u<w;u++)S[u]={v:p[u],i:u};for(S.sort(function(E,L){switch(E.order){case"ascending":return function(C,P){var I=L(C.v),U=L(P.v);return I===T?1:U===T?-1:I-U};case"descending":return function(C,P){var I=L(C.v),U=L(P.v);return I===T?1:U===T?-1:U-I}}}(y,m)),u=0;u<w;u++)_[u]=S[u].i;return _}(s,t,A.getDataToCoordFunc(x,d,o,t),r),h=l(d.transforms,s),f={};for(n=0;n<i.length;n++){var b=k.nestedProperty(d,i[n]),v=b.get(),g=new Array(r);for(a=0;a<r;a++)g[a]=v[c[a]];b.set(g)}for(a=0;a<r;a++)f[a]=h(c[a]);s._indexToPoints=f,d._length=r}}}},11506:function($,R){R.version="2.18.0"},9330:function($,R,e){var k,A=e(90386);k=function(){return function(){var l={7386:function(d,s,t){d.exports={alpha_shape:t(2350),convex_hull:t(5537),delaunay_triangulate:t(4419),gl_cone3d:t(1140),gl_error3d:t(3110),gl_heatmap2d:t(6386),gl_line3d:t(6086),gl_mesh3d:t(8116),gl_plot2d:t(2117),gl_plot3d:t(1059),gl_pointcloud2d:t(8271),gl_scatter3d:t(2182),gl_select_box:t(6623),gl_spikes2d:t(3050),gl_streamtube3d:t(7307),gl_surface3d:t(3754),ndarray:t(5050),ndarray_linear_interpolate:t(3581)}},2146:function(d,s,t){function o(le,de){if(!(le instanceof de))throw new TypeError("Cannot call a class as a function")}function r(le,de){for(var _e=0;_e<de.length;_e++){var Fe=de[_e];Fe.enumerable=Fe.enumerable||!1,Fe.configurable=!0,"value"in Fe&&(Fe.writable=!0),Object.defineProperty(le,Fe.key,Fe)}}function n(le,de){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_e,Fe){return _e.__proto__=Fe,_e},n(le,de)}function a(le,de){if(de&&(h(de)==="object"||typeof de=="function"))return de;if(de!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i(le)}function i(le){if(le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le}function c(le){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(de){return de.__proto__||Object.getPrototypeOf(de)},c(le)}function h(le){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},h(le)}var f=t(3910),b=t(3187),v=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.lW=p,s.h2=50;var g=2147483647;function y(le){if(le>g)throw new RangeError('The value "'+le+'" is invalid for option "size"');var de=new Uint8Array(le);return Object.setPrototypeOf(de,p.prototype),de}function p(le,de,_e){if(typeof le=="number"){if(typeof de=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(le)}return m(le,de,_e)}function m(le,de,_e){if(typeof le=="string")return function(He,nt){if(typeof nt=="string"&&nt!==""||(nt="utf8"),!p.isEncoding(nt))throw new TypeError("Unknown encoding: "+nt);var tt=0|L(He,nt),ot=y(tt),dt=ot.write(He,nt);return dt!==tt&&(ot=ot.slice(0,dt)),ot}(le,de);if(ArrayBuffer.isView(le))return function(He){if(me(He,Uint8Array)){var nt=new Uint8Array(He);return _(nt.buffer,nt.byteOffset,nt.byteLength)}return S(He)}(le);if(le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+h(le));if(me(le,ArrayBuffer)||le&&me(le.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(me(le,SharedArrayBuffer)||le&&me(le.buffer,SharedArrayBuffer)))return _(le,de,_e);if(typeof le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Fe=le.valueOf&&le.valueOf();if(Fe!=null&&Fe!==le)return p.from(Fe,de,_e);var Ve=function(He){if(p.isBuffer(He)){var nt=0|E(He.length),tt=y(nt);return tt.length===0||He.copy(tt,0,0,nt),tt}return He.length!==void 0?typeof He.length!="number"||Ae(He.length)?y(0):S(He):He.type==="Buffer"&&Array.isArray(He.data)?S(He.data):void 0}(le);if(Ve)return Ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof le[Symbol.toPrimitive]=="function")return p.from(le[Symbol.toPrimitive]("string"),de,_e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+h(le))}function w(le){if(typeof le!="number")throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function u(le){return w(le),y(le<0?0:0|E(le))}function S(le){for(var de=le.length<0?0:0|E(le.length),_e=y(de),Fe=0;Fe<de;Fe+=1)_e[Fe]=255&le[Fe];return _e}function _(le,de,_e){if(de<0||le.byteLength<de)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<de+(_e||0))throw new RangeError('"length" is outside of buffer bounds');var Fe;return Fe=de===void 0&&_e===void 0?new Uint8Array(le):_e===void 0?new Uint8Array(le,de):new Uint8Array(le,de,_e),Object.setPrototypeOf(Fe,p.prototype),Fe}function E(le){if(le>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return 0|le}function L(le,de){if(p.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||me(le,ArrayBuffer))return le.byteLength;if(typeof le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+h(le));var _e=le.length,Fe=arguments.length>2&&arguments[2]===!0;if(!Fe&&_e===0)return 0;for(var Ve=!1;;)switch(de){case"ascii":case"latin1":case"binary":return _e;case"utf8":case"utf-8":return Q(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*_e;case"hex":return _e>>>1;case"base64":return oe(le).length;default:if(Ve)return Fe?-1:Q(le).length;de=(""+de).toLowerCase(),Ve=!0}}function C(le,de,_e){var Fe=!1;if((de===void 0||de<0)&&(de=0),de>this.length||((_e===void 0||_e>this.length)&&(_e=this.length),_e<=0)||(_e>>>=0)<=(de>>>=0))return"";for(le||(le="utf8");;)switch(le){case"hex":return J(this,de,_e);case"utf8":case"utf-8":return K(this,de,_e);case"ascii":return V(this,de,_e);case"latin1":case"binary":return W(this,de,_e);case"base64":return j(this,de,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,de,_e);default:if(Fe)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),Fe=!0}}function P(le,de,_e){var Fe=le[de];le[de]=le[_e],le[_e]=Fe}function I(le,de,_e,Fe,Ve){if(le.length===0)return-1;if(typeof _e=="string"?(Fe=_e,_e=0):_e>2147483647?_e=2147483647:_e<-2147483648&&(_e=-2147483648),Ae(_e=+_e)&&(_e=Ve?0:le.length-1),_e<0&&(_e=le.length+_e),_e>=le.length){if(Ve)return-1;_e=le.length-1}else if(_e<0){if(!Ve)return-1;_e=0}if(typeof de=="string"&&(de=p.from(de,Fe)),p.isBuffer(de))return de.length===0?-1:U(le,de,_e,Fe,Ve);if(typeof de=="number")return de&=255,typeof Uint8Array.prototype.indexOf=="function"?Ve?Uint8Array.prototype.indexOf.call(le,de,_e):Uint8Array.prototype.lastIndexOf.call(le,de,_e):U(le,[de],_e,Fe,Ve);throw new TypeError("val must be string, number or Buffer")}function U(le,de,_e,Fe,Ve){var He,nt=1,tt=le.length,ot=de.length;if(Fe!==void 0&&((Fe=String(Fe).toLowerCase())==="ucs2"||Fe==="ucs-2"||Fe==="utf16le"||Fe==="utf-16le")){if(le.length<2||de.length<2)return-1;nt=2,tt/=2,ot/=2,_e/=2}function dt(Lt,Ct){return nt===1?Lt[Ct]:Lt.readUInt16BE(Ct*nt)}if(Ve){var kt=-1;for(He=_e;He<tt;He++)if(dt(le,He)===dt(de,kt===-1?0:He-kt)){if(kt===-1&&(kt=He),He-kt+1===ot)return kt*nt}else kt!==-1&&(He-=He-kt),kt=-1}else for(_e+ot>tt&&(_e=tt-ot),He=_e;He>=0;He--){for(var mt=!0,wt=0;wt<ot;wt++)if(dt(le,He+wt)!==dt(de,wt)){mt=!1;break}if(mt)return He}return-1}function z(le,de,_e,Fe){_e=Number(_e)||0;var Ve=le.length-_e;Fe?(Fe=Number(Fe))>Ve&&(Fe=Ve):Fe=Ve;var He,nt=de.length;for(Fe>nt/2&&(Fe=nt/2),He=0;He<Fe;++He){var tt=parseInt(de.substr(2*He,2),16);if(Ae(tt))return He;le[_e+He]=tt}return He}function H(le,de,_e,Fe){return ce(Q(de,le.length-_e),le,_e,Fe)}function F(le,de,_e,Fe){return ce(function(Ve){for(var He=[],nt=0;nt<Ve.length;++nt)He.push(255&Ve.charCodeAt(nt));return He}(de),le,_e,Fe)}function N(le,de,_e,Fe){return ce(oe(de),le,_e,Fe)}function B(le,de,_e,Fe){return ce(function(Ve,He){for(var nt,tt,ot,dt=[],kt=0;kt<Ve.length&&!((He-=2)<0);++kt)tt=(nt=Ve.charCodeAt(kt))>>8,ot=nt%256,dt.push(ot),dt.push(tt);return dt}(de,le.length-_e),le,_e,Fe)}function j(le,de,_e){return de===0&&_e===le.length?f.fromByteArray(le):f.fromByteArray(le.slice(de,_e))}function K(le,de,_e){_e=Math.min(le.length,_e);for(var Fe=[],Ve=de;Ve<_e;){var He=le[Ve],nt=null,tt=He>239?4:He>223?3:He>191?2:1;if(Ve+tt<=_e){var ot=void 0,dt=void 0,kt=void 0,mt=void 0;switch(tt){case 1:He<128&&(nt=He);break;case 2:(192&(ot=le[Ve+1]))==128&&(mt=(31&He)<<6|63&ot)>127&&(nt=mt);break;case 3:ot=le[Ve+1],dt=le[Ve+2],(192&ot)==128&&(192&dt)==128&&(mt=(15&He)<<12|(63&ot)<<6|63&dt)>2047&&(mt<55296||mt>57343)&&(nt=mt);break;case 4:ot=le[Ve+1],dt=le[Ve+2],kt=le[Ve+3],(192&ot)==128&&(192&dt)==128&&(192&kt)==128&&(mt=(15&He)<<18|(63&ot)<<12|(63&dt)<<6|63&kt)>65535&&mt<1114112&&(nt=mt)}}nt===null?(nt=65533,tt=1):nt>65535&&(nt-=65536,Fe.push(nt>>>10&1023|55296),nt=56320|1023&nt),Fe.push(nt),Ve+=tt}return function(wt){var Lt=wt.length;if(Lt<=G)return String.fromCharCode.apply(String,wt);for(var Ct="",It=0;It<Lt;)Ct+=String.fromCharCode.apply(String,wt.slice(It,It+=G));return Ct}(Fe)}p.TYPED_ARRAY_SUPPORT=function(){try{var le=new Uint8Array(1),de={foo:function(){return 42}};return Object.setPrototypeOf(de,Uint8Array.prototype),Object.setPrototypeOf(le,de),le.foo()===42}catch{return!1}}(),p.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(le,de,_e){return m(le,de,_e)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(le,de,_e){return function(Fe,Ve,He){return w(Fe),Fe<=0?y(Fe):Ve!==void 0?typeof He=="string"?y(Fe).fill(Ve,He):y(Fe).fill(Ve):y(Fe)}(le,de,_e)},p.allocUnsafe=function(le){return u(le)},p.allocUnsafeSlow=function(le){return u(le)},p.isBuffer=function(le){return le!=null&&le._isBuffer===!0&&le!==p.prototype},p.compare=function(le,de){if(me(le,Uint8Array)&&(le=p.from(le,le.offset,le.byteLength)),me(de,Uint8Array)&&(de=p.from(de,de.offset,de.byteLength)),!p.isBuffer(le)||!p.isBuffer(de))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(le===de)return 0;for(var _e=le.length,Fe=de.length,Ve=0,He=Math.min(_e,Fe);Ve<He;++Ve)if(le[Ve]!==de[Ve]){_e=le[Ve],Fe=de[Ve];break}return _e<Fe?-1:Fe<_e?1:0},p.isEncoding=function(le){switch(String(le).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(le,de){if(!Array.isArray(le))throw new TypeError('"list" argument must be an Array of Buffers');if(le.length===0)return p.alloc(0);var _e;if(de===void 0)for(de=0,_e=0;_e<le.length;++_e)de+=le[_e].length;var Fe=p.allocUnsafe(de),Ve=0;for(_e=0;_e<le.length;++_e){var He=le[_e];if(me(He,Uint8Array))Ve+He.length>Fe.length?(p.isBuffer(He)||(He=p.from(He)),He.copy(Fe,Ve)):Uint8Array.prototype.set.call(Fe,He,Ve);else{if(!p.isBuffer(He))throw new TypeError('"list" argument must be an Array of Buffers');He.copy(Fe,Ve)}Ve+=He.length}return Fe},p.byteLength=L,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var le=this.length;if(le%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var de=0;de<le;de+=2)P(this,de,de+1);return this},p.prototype.swap32=function(){var le=this.length;if(le%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var de=0;de<le;de+=4)P(this,de,de+3),P(this,de+1,de+2);return this},p.prototype.swap64=function(){var le=this.length;if(le%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var de=0;de<le;de+=8)P(this,de,de+7),P(this,de+1,de+6),P(this,de+2,de+5),P(this,de+3,de+4);return this},p.prototype.toString=function(){var le=this.length;return le===0?"":arguments.length===0?K(this,0,le):C.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(le){if(!p.isBuffer(le))throw new TypeError("Argument must be a Buffer");return this===le||p.compare(this,le)===0},p.prototype.inspect=function(){var le="",de=s.h2;return le=this.toString("hex",0,de).replace(/(.{2})/g,"$1 ").trim(),this.length>de&&(le+=" ... "),"<Buffer "+le+">"},v&&(p.prototype[v]=p.prototype.inspect),p.prototype.compare=function(le,de,_e,Fe,Ve){if(me(le,Uint8Array)&&(le=p.from(le,le.offset,le.byteLength)),!p.isBuffer(le))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+h(le));if(de===void 0&&(de=0),_e===void 0&&(_e=le?le.length:0),Fe===void 0&&(Fe=0),Ve===void 0&&(Ve=this.length),de<0||_e>le.length||Fe<0||Ve>this.length)throw new RangeError("out of range index");if(Fe>=Ve&&de>=_e)return 0;if(Fe>=Ve)return-1;if(de>=_e)return 1;if(this===le)return 0;for(var He=(Ve>>>=0)-(Fe>>>=0),nt=(_e>>>=0)-(de>>>=0),tt=Math.min(He,nt),ot=this.slice(Fe,Ve),dt=le.slice(de,_e),kt=0;kt<tt;++kt)if(ot[kt]!==dt[kt]){He=ot[kt],nt=dt[kt];break}return He<nt?-1:nt<He?1:0},p.prototype.includes=function(le,de,_e){return this.indexOf(le,de,_e)!==-1},p.prototype.indexOf=function(le,de,_e){return I(this,le,de,_e,!0)},p.prototype.lastIndexOf=function(le,de,_e){return I(this,le,de,_e,!1)},p.prototype.write=function(le,de,_e,Fe){if(de===void 0)Fe="utf8",_e=this.length,de=0;else if(_e===void 0&&typeof de=="string")Fe=de,_e=this.length,de=0;else{if(!isFinite(de))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");de>>>=0,isFinite(_e)?(_e>>>=0,Fe===void 0&&(Fe="utf8")):(Fe=_e,_e=void 0)}var Ve=this.length-de;if((_e===void 0||_e>Ve)&&(_e=Ve),le.length>0&&(_e<0||de<0)||de>this.length)throw new RangeError("Attempt to write outside buffer bounds");Fe||(Fe="utf8");for(var He=!1;;)switch(Fe){case"hex":return z(this,le,de,_e);case"utf8":case"utf-8":return H(this,le,de,_e);case"ascii":case"latin1":case"binary":return F(this,le,de,_e);case"base64":return N(this,le,de,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,le,de,_e);default:if(He)throw new TypeError("Unknown encoding: "+Fe);Fe=(""+Fe).toLowerCase(),He=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var G=4096;function V(le,de,_e){var Fe="";_e=Math.min(le.length,_e);for(var Ve=de;Ve<_e;++Ve)Fe+=String.fromCharCode(127&le[Ve]);return Fe}function W(le,de,_e){var Fe="";_e=Math.min(le.length,_e);for(var Ve=de;Ve<_e;++Ve)Fe+=String.fromCharCode(le[Ve]);return Fe}function J(le,de,_e){var Fe=le.length;(!de||de<0)&&(de=0),(!_e||_e<0||_e>Fe)&&(_e=Fe);for(var Ve="",He=de;He<_e;++He)Ve+=Ie[le[He]];return Ve}function X(le,de,_e){for(var Fe=le.slice(de,_e),Ve="",He=0;He<Fe.length-1;He+=2)Ve+=String.fromCharCode(Fe[He]+256*Fe[He+1]);return Ve}function ee(le,de,_e){if(le%1!=0||le<0)throw new RangeError("offset is not uint");if(le+de>_e)throw new RangeError("Trying to access beyond buffer length")}function re(le,de,_e,Fe,Ve,He){if(!p.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(de>Ve||de<He)throw new RangeError('"value" argument is out of bounds');if(_e+Fe>le.length)throw new RangeError("Index out of range")}function ie(le,de,_e,Fe,Ve){xe(de,Fe,Ve,le,_e,7);var He=Number(de&BigInt(4294967295));le[_e++]=He,He>>=8,le[_e++]=He,He>>=8,le[_e++]=He,He>>=8,le[_e++]=He;var nt=Number(de>>BigInt(32)&BigInt(4294967295));return le[_e++]=nt,nt>>=8,le[_e++]=nt,nt>>=8,le[_e++]=nt,nt>>=8,le[_e++]=nt,_e}function se(le,de,_e,Fe,Ve){xe(de,Fe,Ve,le,_e,7);var He=Number(de&BigInt(4294967295));le[_e+7]=He,He>>=8,le[_e+6]=He,He>>=8,le[_e+5]=He,He>>=8,le[_e+4]=He;var nt=Number(de>>BigInt(32)&BigInt(4294967295));return le[_e+3]=nt,nt>>=8,le[_e+2]=nt,nt>>=8,le[_e+1]=nt,nt>>=8,le[_e]=nt,_e+8}function fe(le,de,_e,Fe,Ve,He){if(_e+Fe>le.length)throw new RangeError("Index out of range");if(_e<0)throw new RangeError("Index out of range")}function ye(le,de,_e,Fe,Ve){return de=+de,_e>>>=0,Ve||fe(le,0,_e,4),b.write(le,de,_e,Fe,23,4),_e+4}function ge(le,de,_e,Fe,Ve){return de=+de,_e>>>=0,Ve||fe(le,0,_e,8),b.write(le,de,_e,Fe,52,8),_e+8}p.prototype.slice=function(le,de){var _e=this.length;(le=~~le)<0?(le+=_e)<0&&(le=0):le>_e&&(le=_e),(de=de===void 0?_e:~~de)<0?(de+=_e)<0&&(de=0):de>_e&&(de=_e),de<le&&(de=le);var Fe=this.subarray(le,de);return Object.setPrototypeOf(Fe,p.prototype),Fe},p.prototype.readUintLE=p.prototype.readUIntLE=function(le,de,_e){le>>>=0,de>>>=0,_e||ee(le,de,this.length);for(var Fe=this[le],Ve=1,He=0;++He<de&&(Ve*=256);)Fe+=this[le+He]*Ve;return Fe},p.prototype.readUintBE=p.prototype.readUIntBE=function(le,de,_e){le>>>=0,de>>>=0,_e||ee(le,de,this.length);for(var Fe=this[le+--de],Ve=1;de>0&&(Ve*=256);)Fe+=this[le+--de]*Ve;return Fe},p.prototype.readUint8=p.prototype.readUInt8=function(le,de){return le>>>=0,de||ee(le,1,this.length),this[le]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(le,de){return le>>>=0,de||ee(le,2,this.length),this[le]|this[le+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(le,de){return le>>>=0,de||ee(le,2,this.length),this[le]<<8|this[le+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(le,de){return le>>>=0,de||ee(le,4,this.length),(this[le]|this[le+1]<<8|this[le+2]<<16)+16777216*this[le+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(le,de){return le>>>=0,de||ee(le,4,this.length),16777216*this[le]+(this[le+1]<<16|this[le+2]<<8|this[le+3])},p.prototype.readBigUInt64LE=Ce(function(le){ke(le>>>=0,"offset");var de=this[le],_e=this[le+7];de!==void 0&&_e!==void 0||Me(le,this.length-8);var Fe=de+this[++le]*Math.pow(2,8)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,24),Ve=this[++le]+this[++le]*Math.pow(2,8)+this[++le]*Math.pow(2,16)+_e*Math.pow(2,24);return BigInt(Fe)+(BigInt(Ve)<<BigInt(32))}),p.prototype.readBigUInt64BE=Ce(function(le){ke(le>>>=0,"offset");var de=this[le],_e=this[le+7];de!==void 0&&_e!==void 0||Me(le,this.length-8);var Fe=de*Math.pow(2,24)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,8)+this[++le],Ve=this[++le]*Math.pow(2,24)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,8)+_e;return(BigInt(Fe)<<BigInt(32))+BigInt(Ve)}),p.prototype.readIntLE=function(le,de,_e){le>>>=0,de>>>=0,_e||ee(le,de,this.length);for(var Fe=this[le],Ve=1,He=0;++He<de&&(Ve*=256);)Fe+=this[le+He]*Ve;return Fe>=(Ve*=128)&&(Fe-=Math.pow(2,8*de)),Fe},p.prototype.readIntBE=function(le,de,_e){le>>>=0,de>>>=0,_e||ee(le,de,this.length);for(var Fe=de,Ve=1,He=this[le+--Fe];Fe>0&&(Ve*=256);)He+=this[le+--Fe]*Ve;return He>=(Ve*=128)&&(He-=Math.pow(2,8*de)),He},p.prototype.readInt8=function(le,de){return le>>>=0,de||ee(le,1,this.length),128&this[le]?-1*(255-this[le]+1):this[le]},p.prototype.readInt16LE=function(le,de){le>>>=0,de||ee(le,2,this.length);var _e=this[le]|this[le+1]<<8;return 32768&_e?4294901760|_e:_e},p.prototype.readInt16BE=function(le,de){le>>>=0,de||ee(le,2,this.length);var _e=this[le+1]|this[le]<<8;return 32768&_e?4294901760|_e:_e},p.prototype.readInt32LE=function(le,de){return le>>>=0,de||ee(le,4,this.length),this[le]|this[le+1]<<8|this[le+2]<<16|this[le+3]<<24},p.prototype.readInt32BE=function(le,de){return le>>>=0,de||ee(le,4,this.length),this[le]<<24|this[le+1]<<16|this[le+2]<<8|this[le+3]},p.prototype.readBigInt64LE=Ce(function(le){ke(le>>>=0,"offset");var de=this[le],_e=this[le+7];de!==void 0&&_e!==void 0||Me(le,this.length-8);var Fe=this[le+4]+this[le+5]*Math.pow(2,8)+this[le+6]*Math.pow(2,16)+(_e<<24);return(BigInt(Fe)<<BigInt(32))+BigInt(de+this[++le]*Math.pow(2,8)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,24))}),p.prototype.readBigInt64BE=Ce(function(le){ke(le>>>=0,"offset");var de=this[le],_e=this[le+7];de!==void 0&&_e!==void 0||Me(le,this.length-8);var Fe=(de<<24)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,8)+this[++le];return(BigInt(Fe)<<BigInt(32))+BigInt(this[++le]*Math.pow(2,24)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,8)+_e)}),p.prototype.readFloatLE=function(le,de){return le>>>=0,de||ee(le,4,this.length),b.read(this,le,!0,23,4)},p.prototype.readFloatBE=function(le,de){return le>>>=0,de||ee(le,4,this.length),b.read(this,le,!1,23,4)},p.prototype.readDoubleLE=function(le,de){return le>>>=0,de||ee(le,8,this.length),b.read(this,le,!0,52,8)},p.prototype.readDoubleBE=function(le,de){return le>>>=0,de||ee(le,8,this.length),b.read(this,le,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(le,de,_e,Fe){le=+le,de>>>=0,_e>>>=0,Fe||re(this,le,de,_e,Math.pow(2,8*_e)-1,0);var Ve=1,He=0;for(this[de]=255&le;++He<_e&&(Ve*=256);)this[de+He]=le/Ve&255;return de+_e},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(le,de,_e,Fe){le=+le,de>>>=0,_e>>>=0,Fe||re(this,le,de,_e,Math.pow(2,8*_e)-1,0);var Ve=_e-1,He=1;for(this[de+Ve]=255&le;--Ve>=0&&(He*=256);)this[de+Ve]=le/He&255;return de+_e},p.prototype.writeUint8=p.prototype.writeUInt8=function(le,de,_e){return le=+le,de>>>=0,_e||re(this,le,de,1,255,0),this[de]=255&le,de+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(le,de,_e){return le=+le,de>>>=0,_e||re(this,le,de,2,65535,0),this[de]=255&le,this[de+1]=le>>>8,de+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(le,de,_e){return le=+le,de>>>=0,_e||re(this,le,de,2,65535,0),this[de]=le>>>8,this[de+1]=255&le,de+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(le,de,_e){return le=+le,de>>>=0,_e||re(this,le,de,4,4294967295,0),this[de+3]=le>>>24,this[de+2]=le>>>16,this[de+1]=le>>>8,this[de]=255&le,de+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(le,de,_e){return le=+le,de>>>=0,_e||re(this,le,de,4,4294967295,0),this[de]=le>>>24,this[de+1]=le>>>16,this[de+2]=le>>>8,this[de+3]=255&le,de+4},p.prototype.writeBigUInt64LE=Ce(function(le){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ie(this,le,de,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=Ce(function(le){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return se(this,le,de,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(le,de,_e,Fe){if(le=+le,de>>>=0,!Fe){var Ve=Math.pow(2,8*_e-1);re(this,le,de,_e,Ve-1,-Ve)}var He=0,nt=1,tt=0;for(this[de]=255&le;++He<_e&&(nt*=256);)le<0&&tt===0&&this[de+He-1]!==0&&(tt=1),this[de+He]=(le/nt>>0)-tt&255;return de+_e},p.prototype.writeIntBE=function(le,de,_e,Fe){if(le=+le,de>>>=0,!Fe){var Ve=Math.pow(2,8*_e-1);re(this,le,de,_e,Ve-1,-Ve)}var He=_e-1,nt=1,tt=0;for(this[de+He]=255&le;--He>=0&&(nt*=256);)le<0&&tt===0&&this[de+He+1]!==0&&(tt=1),this[de+He]=(le/nt>>0)-tt&255;return de+_e},p.prototype.writeInt8=function(le,de,_e){return le=+le,de>>>=0,_e||re(this,le,de,1,127,-128),le<0&&(le=255+le+1),this[de]=255&le,de+1},p.prototype.writeInt16LE=function(le,de,_e){return le=+le,de>>>=0,_e||re(this,le,de,2,32767,-32768),this[de]=255&le,this[de+1]=le>>>8,de+2},p.prototype.writeInt16BE=function(le,de,_e){return le=+le,de>>>=0,_e||re(this,le,de,2,32767,-32768),this[de]=le>>>8,this[de+1]=255&le,de+2},p.prototype.writeInt32LE=function(le,de,_e){return le=+le,de>>>=0,_e||re(this,le,de,4,2147483647,-2147483648),this[de]=255&le,this[de+1]=le>>>8,this[de+2]=le>>>16,this[de+3]=le>>>24,de+4},p.prototype.writeInt32BE=function(le,de,_e){return le=+le,de>>>=0,_e||re(this,le,de,4,2147483647,-2147483648),le<0&&(le=4294967295+le+1),this[de]=le>>>24,this[de+1]=le>>>16,this[de+2]=le>>>8,this[de+3]=255&le,de+4},p.prototype.writeBigInt64LE=Ce(function(le){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ie(this,le,de,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=Ce(function(le){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return se(this,le,de,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeFloatLE=function(le,de,_e){return ye(this,le,de,!0,_e)},p.prototype.writeFloatBE=function(le,de,_e){return ye(this,le,de,!1,_e)},p.prototype.writeDoubleLE=function(le,de,_e){return ge(this,le,de,!0,_e)},p.prototype.writeDoubleBE=function(le,de,_e){return ge(this,le,de,!1,_e)},p.prototype.copy=function(le,de,_e,Fe){if(!p.isBuffer(le))throw new TypeError("argument should be a Buffer");if(_e||(_e=0),Fe||Fe===0||(Fe=this.length),de>=le.length&&(de=le.length),de||(de=0),Fe>0&&Fe<_e&&(Fe=_e),Fe===_e||le.length===0||this.length===0)return 0;if(de<0)throw new RangeError("targetStart out of bounds");if(_e<0||_e>=this.length)throw new RangeError("Index out of range");if(Fe<0)throw new RangeError("sourceEnd out of bounds");Fe>this.length&&(Fe=this.length),le.length-de<Fe-_e&&(Fe=le.length-de+_e);var Ve=Fe-_e;return this===le&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(de,_e,Fe):Uint8Array.prototype.set.call(le,this.subarray(_e,Fe),de),Ve},p.prototype.fill=function(le,de,_e,Fe){if(typeof le=="string"){if(typeof de=="string"?(Fe=de,de=0,_e=this.length):typeof _e=="string"&&(Fe=_e,_e=this.length),Fe!==void 0&&typeof Fe!="string")throw new TypeError("encoding must be a string");if(typeof Fe=="string"&&!p.isEncoding(Fe))throw new TypeError("Unknown encoding: "+Fe);if(le.length===1){var Ve=le.charCodeAt(0);(Fe==="utf8"&&Ve<128||Fe==="latin1")&&(le=Ve)}}else typeof le=="number"?le&=255:typeof le=="boolean"&&(le=Number(le));if(de<0||this.length<de||this.length<_e)throw new RangeError("Out of range index");if(_e<=de)return this;var He;if(de>>>=0,_e=_e===void 0?this.length:_e>>>0,le||(le=0),typeof le=="number")for(He=de;He<_e;++He)this[He]=le;else{var nt=p.isBuffer(le)?le:p.from(le,Fe),tt=nt.length;if(tt===0)throw new TypeError('The value "'+le+'" is invalid for argument "value"');for(He=0;He<_e-de;++He)this[He+de]=nt[He%tt]}return this};var he={};function ve(le,de,_e){he[le]=function(Fe){(function(kt,mt){if(typeof mt!="function"&&mt!==null)throw new TypeError("Super expression must either be null or a function");kt.prototype=Object.create(mt&&mt.prototype,{constructor:{value:kt,writable:!0,configurable:!0}}),Object.defineProperty(kt,"prototype",{writable:!1}),mt&&n(kt,mt)})(dt,Fe);var Ve,He,nt,tt,ot=(nt=dt,tt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var kt,mt=c(nt);if(tt){var wt=c(this).constructor;kt=Reflect.construct(mt,arguments,wt)}else kt=mt.apply(this,arguments);return a(this,kt)});function dt(){var kt;return o(this,dt),kt=ot.call(this),Object.defineProperty(i(kt),"message",{value:de.apply(i(kt),arguments),writable:!0,configurable:!0}),kt.name="".concat(kt.name," [").concat(le,"]"),kt.stack,delete kt.name,kt}return Ve=dt,(He=[{key:"code",get:function(){return le},set:function(kt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:kt,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(le,"]: ").concat(this.message)}}])&&r(Ve.prototype,He),Object.defineProperty(Ve,"prototype",{writable:!1}),dt}(_e)}function Oe(le){for(var de="",_e=le.length,Fe=le[0]==="-"?1:0;_e>=Fe+4;_e-=3)de="_".concat(le.slice(_e-3,_e)).concat(de);return"".concat(le.slice(0,_e)).concat(de)}function xe(le,de,_e,Fe,Ve,He){if(le>_e||le<de){var nt,tt=typeof de=="bigint"?"n":"";throw nt=He>3?de===0||de===BigInt(0)?">= 0".concat(tt," and < 2").concat(tt," ** ").concat(8*(He+1)).concat(tt):">= -(2".concat(tt," ** ").concat(8*(He+1)-1).concat(tt,") and < 2 ** ")+"".concat(8*(He+1)-1).concat(tt):">= ".concat(de).concat(tt," and <= ").concat(_e).concat(tt),new he.ERR_OUT_OF_RANGE("value",nt,le)}(function(ot,dt,kt){ke(dt,"offset"),ot[dt]!==void 0&&ot[dt+kt]!==void 0||Me(dt,ot.length-(kt+1))})(Fe,Ve,He)}function ke(le,de){if(typeof le!="number")throw new he.ERR_INVALID_ARG_TYPE(de,"number",le)}function Me(le,de,_e){throw Math.floor(le)!==le?(ke(le,_e),new he.ERR_OUT_OF_RANGE(_e||"offset","an integer",le)):de<0?new he.ERR_BUFFER_OUT_OF_BOUNDS:new he.ERR_OUT_OF_RANGE(_e||"offset",">= ".concat(_e?1:0," and <= ").concat(de),le)}ve("ERR_BUFFER_OUT_OF_BOUNDS",function(le){return le?"".concat(le," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ve("ERR_INVALID_ARG_TYPE",function(le,de){return'The "'.concat(le,'" argument must be of type number. Received type ').concat(h(de))},TypeError),ve("ERR_OUT_OF_RANGE",function(le,de,_e){var Fe='The value of "'.concat(le,'" is out of range.'),Ve=_e;return Number.isInteger(_e)&&Math.abs(_e)>Math.pow(2,32)?Ve=Oe(String(_e)):typeof _e=="bigint"&&(Ve=String(_e),(_e>Math.pow(BigInt(2),BigInt(32))||_e<-Math.pow(BigInt(2),BigInt(32)))&&(Ve=Oe(Ve)),Ve+="n"),Fe+" It must be ".concat(de,". Received ").concat(Ve)},RangeError);var Te=/[^+/0-9A-Za-z-_]/g;function Q(le,de){var _e;de=de||1/0;for(var Fe=le.length,Ve=null,He=[],nt=0;nt<Fe;++nt){if((_e=le.charCodeAt(nt))>55295&&_e<57344){if(!Ve){if(_e>56319){(de-=3)>-1&&He.push(239,191,189);continue}if(nt+1===Fe){(de-=3)>-1&&He.push(239,191,189);continue}Ve=_e;continue}if(_e<56320){(de-=3)>-1&&He.push(239,191,189),Ve=_e;continue}_e=65536+(Ve-55296<<10|_e-56320)}else Ve&&(de-=3)>-1&&He.push(239,191,189);if(Ve=null,_e<128){if((de-=1)<0)break;He.push(_e)}else if(_e<2048){if((de-=2)<0)break;He.push(_e>>6|192,63&_e|128)}else if(_e<65536){if((de-=3)<0)break;He.push(_e>>12|224,_e>>6&63|128,63&_e|128)}else{if(!(_e<1114112))throw new Error("Invalid code point");if((de-=4)<0)break;He.push(_e>>18|240,_e>>12&63|128,_e>>6&63|128,63&_e|128)}}return He}function oe(le){return f.toByteArray(function(de){if((de=(de=de.split("=")[0]).trim().replace(Te,"")).length<2)return"";for(;de.length%4!=0;)de+="=";return de}(le))}function ce(le,de,_e,Fe){var Ve;for(Ve=0;Ve<Fe&&!(Ve+_e>=de.length||Ve>=le.length);++Ve)de[Ve+_e]=le[Ve];return Ve}function me(le,de){return le instanceof de||le!=null&&le.constructor!=null&&le.constructor.name!=null&&le.constructor.name===de.name}function Ae(le){return le!=le}var Ie=function(){for(var le="0123456789abcdef",de=new Array(256),_e=0;_e<16;++_e)for(var Fe=16*_e,Ve=0;Ve<16;++Ve)de[Fe+Ve]=le[_e]+le[Ve];return de}();function Ce(le){return typeof BigInt>"u"?Re:le}function Re(){throw new Error("BigInt not supported")}},3910:function(d,s){s.byteLength=function(f){var b=c(f),v=b[0],g=b[1];return 3*(v+g)/4-g},s.toByteArray=function(f){var b,v,g=c(f),y=g[0],p=g[1],m=new r(function(S,_,E){return 3*(_+E)/4-E}(0,y,p)),w=0,u=p>0?y-4:y;for(v=0;v<u;v+=4)b=o[f.charCodeAt(v)]<<18|o[f.charCodeAt(v+1)]<<12|o[f.charCodeAt(v+2)]<<6|o[f.charCodeAt(v+3)],m[w++]=b>>16&255,m[w++]=b>>8&255,m[w++]=255&b;return p===2&&(b=o[f.charCodeAt(v)]<<2|o[f.charCodeAt(v+1)]>>4,m[w++]=255&b),p===1&&(b=o[f.charCodeAt(v)]<<10|o[f.charCodeAt(v+1)]<<4|o[f.charCodeAt(v+2)]>>2,m[w++]=b>>8&255,m[w++]=255&b),m},s.fromByteArray=function(f){for(var b,v=f.length,g=v%3,y=[],p=16383,m=0,w=v-g;m<w;m+=p)y.push(h(f,m,m+p>w?w:m+p));return g===1?(b=f[v-1],y.push(t[b>>2]+t[b<<4&63]+"==")):g===2&&(b=(f[v-2]<<8)+f[v-1],y.push(t[b>>10]+t[b>>4&63]+t[b<<2&63]+"=")),y.join("")};for(var t=[],o=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,i=n.length;a<i;++a)t[a]=n[a],o[n.charCodeAt(a)]=a;function c(f){var b=f.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=f.indexOf("=");return v===-1&&(v=b),[v,v===b?0:4-v%4]}function h(f,b,v){for(var g,y,p=[],m=b;m<v;m+=3)g=(f[m]<<16&16711680)+(f[m+1]<<8&65280)+(255&f[m+2]),p.push(t[(y=g)>>18&63]+t[y>>12&63]+t[y>>6&63]+t[63&y]);return p.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},3187:function(d,s){s.read=function(t,o,r,n,a){var i,c,h=8*a-n-1,f=(1<<h)-1,b=f>>1,v=-7,g=r?a-1:0,y=r?-1:1,p=t[o+g];for(g+=y,i=p&(1<<-v)-1,p>>=-v,v+=h;v>0;i=256*i+t[o+g],g+=y,v-=8);for(c=i&(1<<-v)-1,i>>=-v,v+=n;v>0;c=256*c+t[o+g],g+=y,v-=8);if(i===0)i=1-b;else{if(i===f)return c?NaN:1/0*(p?-1:1);c+=Math.pow(2,n),i-=b}return(p?-1:1)*c*Math.pow(2,i-n)},s.write=function(t,o,r,n,a,i){var c,h,f,b=8*i-a-1,v=(1<<b)-1,g=v>>1,y=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,m=n?1:-1,w=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(h=isNaN(o)?1:0,c=v):(c=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-c))<1&&(c--,f*=2),(o+=c+g>=1?y/f:y*Math.pow(2,1-g))*f>=2&&(c++,f/=2),c+g>=v?(h=0,c=v):c+g>=1?(h=(o*f-1)*Math.pow(2,a),c+=g):(h=o*Math.pow(2,g-1)*Math.pow(2,a),c=0));a>=8;t[r+p]=255&h,p+=m,h/=256,a-=8);for(c=c<<a|h,b+=a;b>0;t[r+p]=255&c,p+=m,c/=256,b-=8);t[r+p-m]|=128*w}},1152:function(d,s,t){d.exports=function(c){var h=(c=c||{}).eye||[0,0,1],f=c.center||[0,0,0],b=c.up||[0,1,0],v=c.distanceLimits||[0,1/0],g=c.mode||"turntable",y=o(),p=r(),m=n();return y.setDistanceLimits(v[0],v[1]),y.lookAt(0,h,f,b),p.setDistanceLimits(v[0],v[1]),p.lookAt(0,h,f,b),m.setDistanceLimits(v[0],v[1]),m.lookAt(0,h,f,b),new a({turntable:y,orbit:p,matrix:m},g)};var o=t(3440),r=t(7774),n=t(9298);function a(c,h){this._controllerNames=Object.keys(c),this._controllerList=this._controllerNames.map(function(f){return c[f]}),this._mode=h,this._active=c[h],this._active||(this._mode="turntable",this._active=c.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var i=a.prototype;i.flush=function(c){for(var h=this._controllerList,f=0;f<h.length;++f)h[f].flush(c)},i.idle=function(c){for(var h=this._controllerList,f=0;f<h.length;++f)h[f].idle(c)},i.lookAt=function(c,h,f,b){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].lookAt(c,h,f,b)},i.rotate=function(c,h,f,b){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].rotate(c,h,f,b)},i.pan=function(c,h,f,b){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].pan(c,h,f,b)},i.translate=function(c,h,f,b){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].translate(c,h,f,b)},i.setMatrix=function(c,h){for(var f=this._controllerList,b=0;b<f.length;++b)f[b].setMatrix(c,h)},i.setDistanceLimits=function(c,h){for(var f=this._controllerList,b=0;b<f.length;++b)f[b].setDistanceLimits(c,h)},i.setDistance=function(c,h){for(var f=this._controllerList,b=0;b<f.length;++b)f[b].setDistance(c,h)},i.recalcMatrix=function(c){this._active.recalcMatrix(c)},i.getDistance=function(c){return this._active.getDistance(c)},i.getDistanceLimits=function(c){return this._active.getDistanceLimits(c)},i.lastT=function(){return this._active.lastT()},i.setMode=function(c){if(c!==this._mode){var h=this._controllerNames.indexOf(c);if(!(h<0)){var f=this._active,b=this._controllerList[h],v=Math.max(f.lastT(),b.lastT());f.recalcMatrix(v),b.setMatrix(v,f.computedMatrix),this._active=b,this._mode=c,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},i.getMode=function(){return this._mode}},8126:function(d,s,t){var o=typeof WeakMap>"u"?t(5346):WeakMap,r=t(5827),n=t(2944),a=new o;d.exports=function(i){var c=a.get(i),h=c&&(c._triangleBuffer.handle||c._triangleBuffer.buffer);if(!h||!i.isBuffer(h)){var f=r(i,new Float32Array([-1,-1,-1,4,4,-1]));(c=n(i,[{buffer:f,type:i.FLOAT,size:2}]))._triangleBuffer=f,a.set(i,c)}c.bind(),i.drawArrays(i.TRIANGLES,0,3),c.unbind()}},8008:function(d,s,t){var o=t(4930);d.exports=function(r,n,a){n=typeof n=="number"?n:1,a=a||": ";var i=r.split(/\r?\n/),c=String(i.length+n-1).length;return i.map(function(h,f){var b=f+n,v=String(b).length;return o(b,c-v)+a+h}).join(`
`)}},2153:function(d,s,t){d.exports=function(n){var a=n.length;if(a===0)return[];if(a===1)return[0];for(var i=n[0].length,c=[n[0]],h=[0],f=1;f<a;++f)if(c.push(n[f]),r(c,i)){if(h.push(f),h.length===i+1)return h}else c.pop();return h};var o=t(417);function r(n,a){for(var i=new Array(a+1),c=0;c<n.length;++c)i[c]=n[c];for(c=0;c<=n.length;++c){for(var h=n.length;h<=a;++h){for(var f=new Array(a),b=0;b<a;++b)f[b]=Math.pow(h+1-c,b);i[h]=f}if(o.apply(void 0,i))return!0}return!1}},4653:function(d,s,t){d.exports=function(n,a){return o(a).filter(function(i){for(var c=new Array(i.length),h=0;h<i.length;++h)c[h]=a[i[h]];return r(c)*n<1})};var o=t(4419),r=t(1778)},2350:function(d,s,t){d.exports=function(n,a){return r(o(n,a))};var o=t(4653),r=t(8691)},7896:function(d){d.exports=function(s){return atob(s)}},957:function(d,s,t){d.exports=function(n,a){for(var i=a.length,c=new Array(i+1),h=0;h<i;++h){for(var f=new Array(i+1),b=0;b<=i;++b)f[b]=n[b][h];c[h]=f}for(c[i]=new Array(i+1),h=0;h<=i;++h)c[i][h]=1;var v=new Array(i+1);for(h=0;h<i;++h)v[h]=a[h];v[i]=1;var g=o(c,v),y=r(g[i+1]);y===0&&(y=1);var p=new Array(i+1);for(h=0;h<=i;++h)p[h]=r(g[h])/y;return p};var o=t(6606);function r(n){for(var a=0,i=0;i<n.length;++i)a+=n[i];return a}},1539:function(d,s,t){var o=t(8524);d.exports=function(r,n){return o(r[0].mul(n[1]).add(n[0].mul(r[1])),r[1].mul(n[1]))}},8846:function(d){d.exports=function(s,t){return s[0].mul(t[1]).cmp(t[0].mul(s[1]))}},9189:function(d,s,t){var o=t(8524);d.exports=function(r,n){return o(r[0].mul(n[1]),r[1].mul(n[0]))}},5125:function(d,s,t){var o=t(234),r=t(3218),n=t(5514),a=t(2813),i=t(8524),c=t(9189);d.exports=function h(f,b){if(o(f))return b?c(f,h(b)):[f[0].clone(),f[1].clone()];var v,g,y=0;if(r(f))v=f.clone();else if(typeof f=="string")v=a(f);else{if(f===0)return[n(0),n(1)];if(f===Math.floor(f))v=n(f);else{for(;f!==Math.floor(f);)f*=Math.pow(2,256),y-=256;v=n(f)}}if(o(b))v.mul(b[1]),g=b[0].clone();else if(r(b))g=b.clone();else if(typeof b=="string")g=a(b);else if(b)if(b===Math.floor(b))g=n(b);else{for(;b!==Math.floor(b);)b*=Math.pow(2,256),y+=256;g=n(b)}else g=n(1);return y>0?v=v.ushln(y):y<0&&(g=g.ushln(-y)),i(v,g)}},234:function(d,s,t){var o=t(3218);d.exports=function(r){return Array.isArray(r)&&r.length===2&&o(r[0])&&o(r[1])}},4275:function(d,s,t){var o=t(1928);d.exports=function(r){return r.cmp(new o(0))}},9958:function(d,s,t){var o=t(4275);d.exports=function(r){var n=r.length,a=r.words,i=0;if(n===1)i=a[0];else if(n===2)i=a[0]+67108864*a[1];else for(var c=0;c<n;c++)i+=a[c]*Math.pow(67108864,c);return o(r)*i}},1112:function(d,s,t){var o=t(8362),r=t(2288).countTrailingZeros;d.exports=function(n){var a=r(o.lo(n));if(a<32)return a;var i=r(o.hi(n));return i>20?52:i+32}},3218:function(d,s,t){t(1928),d.exports=function(o){return o&&typeof o=="object"&&Boolean(o.words)}},5514:function(d,s,t){var o=t(1928),r=t(8362);d.exports=function(n){var a=r.exponent(n);return a<52?new o(n):new o(n*Math.pow(2,52-a)).ushln(a-52)}},8524:function(d,s,t){var o=t(5514),r=t(4275);d.exports=function(n,a){var i=r(n),c=r(a);if(i===0)return[o(0),o(1)];if(c===0)return[o(0),o(0)];c<0&&(n=n.neg(),a=a.neg());var h=n.gcd(a);return h.cmpn(1)?[n.div(h),a.div(h)]:[n,a]}},2813:function(d,s,t){var o=t(1928);d.exports=function(r){return new o(r)}},3962:function(d,s,t){var o=t(8524);d.exports=function(r,n){return o(r[0].mul(n[0]),r[1].mul(n[1]))}},4951:function(d,s,t){var o=t(4275);d.exports=function(r){return o(r[0])*o(r[1])}},4354:function(d,s,t){var o=t(8524);d.exports=function(r,n){return o(r[0].mul(n[1]).sub(r[1].mul(n[0])),r[1].mul(n[1]))}},7999:function(d,s,t){var o=t(9958),r=t(1112);d.exports=function(n){var a=n[0],i=n[1];if(a.cmpn(0)===0)return 0;var c=a.abs().divmod(i.abs()),h=c.div,f=o(h),b=c.mod,v=a.negative!==i.negative?-1:1;if(b.cmpn(0)===0)return v*f;if(f){var g=r(f)+4,y=o(b.ushln(g).divRound(i));return v*(f+y*Math.pow(2,-g))}var p=i.bitLength()-b.bitLength()+53;return y=o(b.ushln(p).divRound(i)),p<1023?v*y*Math.pow(2,-p):v*(y*=Math.pow(2,-1023))*Math.pow(2,1023-p)}},5070:function(d){function s(i,c,h,f,b){for(var v=b+1;f<=b;){var g=f+b>>>1,y=i[g];(h!==void 0?h(y,c):y-c)>=0?(v=g,b=g-1):f=g+1}return v}function t(i,c,h,f,b){for(var v=b+1;f<=b;){var g=f+b>>>1,y=i[g];(h!==void 0?h(y,c):y-c)>0?(v=g,b=g-1):f=g+1}return v}function o(i,c,h,f,b){for(var v=f-1;f<=b;){var g=f+b>>>1,y=i[g];(h!==void 0?h(y,c):y-c)<0?(v=g,f=g+1):b=g-1}return v}function r(i,c,h,f,b){for(var v=f-1;f<=b;){var g=f+b>>>1,y=i[g];(h!==void 0?h(y,c):y-c)<=0?(v=g,f=g+1):b=g-1}return v}function n(i,c,h,f,b){for(;f<=b;){var v=f+b>>>1,g=i[v],y=h!==void 0?h(g,c):g-c;if(y===0)return v;y<=0?f=v+1:b=v-1}return-1}function a(i,c,h,f,b,v){return typeof h=="function"?v(i,c,h,f===void 0?0:0|f,b===void 0?i.length-1:0|b):v(i,c,void 0,h===void 0?0:0|h,f===void 0?i.length-1:0|f)}d.exports={ge:function(i,c,h,f,b){return a(i,c,h,f,b,s)},gt:function(i,c,h,f,b){return a(i,c,h,f,b,t)},lt:function(i,c,h,f,b){return a(i,c,h,f,b,o)},le:function(i,c,h,f,b){return a(i,c,h,f,b,r)},eq:function(i,c,h,f,b){return a(i,c,h,f,b,n)}}},2288:function(d,s){function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var o=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,i=n,c=7;for(a>>>=1;a;a>>>=1)i<<=1,i|=1&a,--c;r[n]=i<<c&255}})(o),s.reverse=function(r){return o[255&r]<<24|o[r>>>8&255]<<16|o[r>>>16&255]<<8|o[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},1928:function(d,s,t){(function(o,r){function n(z,H){if(!z)throw new Error(H||"Assertion failed")}function a(z,H){z.super_=H;var F=function(){};F.prototype=H.prototype,z.prototype=new F,z.prototype.constructor=z}function i(z,H,F){if(i.isBN(z))return z;this.negative=0,this.words=null,this.length=0,this.red=null,z!==null&&(H!=="le"&&H!=="be"||(F=H,H=10),this._init(z||0,H||10,F||"be"))}var c;typeof o=="object"?o.exports=i:r.BN=i,i.BN=i,i.wordSize=26;try{c=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t(6601).Buffer}catch{}function h(z,H){var F=z.charCodeAt(H);return F>=65&&F<=70?F-55:F>=97&&F<=102?F-87:F-48&15}function f(z,H,F){var N=h(z,F);return F-1>=H&&(N|=h(z,F-1)<<4),N}function b(z,H,F,N){for(var B=0,j=Math.min(z.length,F),K=H;K<j;K++){var G=z.charCodeAt(K)-48;B*=N,B+=G>=49?G-49+10:G>=17?G-17+10:G}return B}i.isBN=function(z){return z instanceof i||z!==null&&typeof z=="object"&&z.constructor.wordSize===i.wordSize&&Array.isArray(z.words)},i.max=function(z,H){return z.cmp(H)>0?z:H},i.min=function(z,H){return z.cmp(H)<0?z:H},i.prototype._init=function(z,H,F){if(typeof z=="number")return this._initNumber(z,H,F);if(typeof z=="object")return this._initArray(z,H,F);H==="hex"&&(H=16),n(H===(0|H)&&H>=2&&H<=36);var N=0;(z=z.toString().replace(/\s+/g,""))[0]==="-"&&(N++,this.negative=1),N<z.length&&(H===16?this._parseHex(z,N,F):(this._parseBase(z,H,N),F==="le"&&this._initArray(this.toArray(),H,F)))},i.prototype._initNumber=function(z,H,F){z<0&&(this.negative=1,z=-z),z<67108864?(this.words=[67108863&z],this.length=1):z<4503599627370496?(this.words=[67108863&z,z/67108864&67108863],this.length=2):(n(z<9007199254740992),this.words=[67108863&z,z/67108864&67108863,1],this.length=3),F==="le"&&this._initArray(this.toArray(),H,F)},i.prototype._initArray=function(z,H,F){if(n(typeof z.length=="number"),z.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(z.length/3),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var B,j,K=0;if(F==="be")for(N=z.length-1,B=0;N>=0;N-=3)j=z[N]|z[N-1]<<8|z[N-2]<<16,this.words[B]|=j<<K&67108863,this.words[B+1]=j>>>26-K&67108863,(K+=24)>=26&&(K-=26,B++);else if(F==="le")for(N=0,B=0;N<z.length;N+=3)j=z[N]|z[N+1]<<8|z[N+2]<<16,this.words[B]|=j<<K&67108863,this.words[B+1]=j>>>26-K&67108863,(K+=24)>=26&&(K-=26,B++);return this.strip()},i.prototype._parseHex=function(z,H,F){this.length=Math.ceil((z.length-H)/6),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var B,j=0,K=0;if(F==="be")for(N=z.length-1;N>=H;N-=2)B=f(z,H,N)<<j,this.words[K]|=67108863&B,j>=18?(j-=18,K+=1,this.words[K]|=B>>>26):j+=8;else for(N=(z.length-H)%2==0?H+1:H;N<z.length;N+=2)B=f(z,H,N)<<j,this.words[K]|=67108863&B,j>=18?(j-=18,K+=1,this.words[K]|=B>>>26):j+=8;this.strip()},i.prototype._parseBase=function(z,H,F){this.words=[0],this.length=1;for(var N=0,B=1;B<=67108863;B*=H)N++;N--,B=B/H|0;for(var j=z.length-F,K=j%N,G=Math.min(j,j-K)+F,V=0,W=F;W<G;W+=N)V=b(z,W,W+N,H),this.imuln(B),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V);if(K!==0){var J=1;for(V=b(z,W,z.length,H),W=0;W<K;W++)J*=H;this.imuln(J),this.words[0]+V<67108864?this.words[0]+=V:this._iaddn(V)}this.strip()},i.prototype.copy=function(z){z.words=new Array(this.length);for(var H=0;H<this.length;H++)z.words[H]=this.words[H];z.length=this.length,z.negative=this.negative,z.red=this.red},i.prototype.clone=function(){var z=new i(null);return this.copy(z),z},i.prototype._expand=function(z){for(;this.length<z;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(z,H,F){F.negative=H.negative^z.negative;var N=z.length+H.length|0;F.length=N,N=N-1|0;var B=0|z.words[0],j=0|H.words[0],K=B*j,G=67108863&K,V=K/67108864|0;F.words[0]=G;for(var W=1;W<N;W++){for(var J=V>>>26,X=67108863&V,ee=Math.min(W,H.length-1),re=Math.max(0,W-z.length+1);re<=ee;re++){var ie=W-re|0;J+=(K=(B=0|z.words[ie])*(j=0|H.words[re])+X)/67108864|0,X=67108863&K}F.words[W]=0|X,V=0|J}return V!==0?F.words[W]=0|V:F.length--,F.strip()}i.prototype.toString=function(z,H){var F;if(H=0|H||1,(z=z||10)===16||z==="hex"){F="";for(var N=0,B=0,j=0;j<this.length;j++){var K=this.words[j],G=(16777215&(K<<N|B)).toString(16);F=(B=K>>>24-N&16777215)!=0||j!==this.length-1?v[6-G.length]+G+F:G+F,(N+=2)>=26&&(N-=26,j--)}for(B!==0&&(F=B.toString(16)+F);F.length%H!=0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}if(z===(0|z)&&z>=2&&z<=36){var V=g[z],W=y[z];F="";var J=this.clone();for(J.negative=0;!J.isZero();){var X=J.modn(W).toString(z);F=(J=J.idivn(W)).isZero()?X+F:v[V-X.length]+X+F}for(this.isZero()&&(F="0"+F);F.length%H!=0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var z=this.words[0];return this.length===2?z+=67108864*this.words[1]:this.length===3&&this.words[2]===1?z+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-z:z},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(z,H){return n(c!==void 0),this.toArrayLike(c,z,H)},i.prototype.toArray=function(z,H){return this.toArrayLike(Array,z,H)},i.prototype.toArrayLike=function(z,H,F){var N=this.byteLength(),B=F||Math.max(1,N);n(N<=B,"byte array longer than desired length"),n(B>0,"Requested array length <= 0"),this.strip();var j,K,G=H==="le",V=new z(B),W=this.clone();if(G){for(K=0;!W.isZero();K++)j=W.andln(255),W.iushrn(8),V[K]=j;for(;K<B;K++)V[K]=0}else{for(K=0;K<B-N;K++)V[K]=0;for(K=0;!W.isZero();K++)j=W.andln(255),W.iushrn(8),V[B-K-1]=j}return V},Math.clz32?i.prototype._countBits=function(z){return 32-Math.clz32(z)}:i.prototype._countBits=function(z){var H=z,F=0;return H>=4096&&(F+=13,H>>>=13),H>=64&&(F+=7,H>>>=7),H>=8&&(F+=4,H>>>=4),H>=2&&(F+=2,H>>>=2),F+H},i.prototype._zeroBits=function(z){if(z===0)return 26;var H=z,F=0;return!(8191&H)&&(F+=13,H>>>=13),!(127&H)&&(F+=7,H>>>=7),!(15&H)&&(F+=4,H>>>=4),!(3&H)&&(F+=2,H>>>=2),!(1&H)&&F++,F},i.prototype.bitLength=function(){var z=this.words[this.length-1],H=this._countBits(z);return 26*(this.length-1)+H},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var z=0,H=0;H<this.length;H++){var F=this._zeroBits(this.words[H]);if(z+=F,F!==26)break}return z},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(z){return this.negative!==0?this.abs().inotn(z).iaddn(1):this.clone()},i.prototype.fromTwos=function(z){return this.testn(z-1)?this.notn(z).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(z){for(;this.length<z.length;)this.words[this.length++]=0;for(var H=0;H<z.length;H++)this.words[H]=this.words[H]|z.words[H];return this.strip()},i.prototype.ior=function(z){return n((this.negative|z.negative)==0),this.iuor(z)},i.prototype.or=function(z){return this.length>z.length?this.clone().ior(z):z.clone().ior(this)},i.prototype.uor=function(z){return this.length>z.length?this.clone().iuor(z):z.clone().iuor(this)},i.prototype.iuand=function(z){var H;H=this.length>z.length?z:this;for(var F=0;F<H.length;F++)this.words[F]=this.words[F]&z.words[F];return this.length=H.length,this.strip()},i.prototype.iand=function(z){return n((this.negative|z.negative)==0),this.iuand(z)},i.prototype.and=function(z){return this.length>z.length?this.clone().iand(z):z.clone().iand(this)},i.prototype.uand=function(z){return this.length>z.length?this.clone().iuand(z):z.clone().iuand(this)},i.prototype.iuxor=function(z){var H,F;this.length>z.length?(H=this,F=z):(H=z,F=this);for(var N=0;N<F.length;N++)this.words[N]=H.words[N]^F.words[N];if(this!==H)for(;N<H.length;N++)this.words[N]=H.words[N];return this.length=H.length,this.strip()},i.prototype.ixor=function(z){return n((this.negative|z.negative)==0),this.iuxor(z)},i.prototype.xor=function(z){return this.length>z.length?this.clone().ixor(z):z.clone().ixor(this)},i.prototype.uxor=function(z){return this.length>z.length?this.clone().iuxor(z):z.clone().iuxor(this)},i.prototype.inotn=function(z){n(typeof z=="number"&&z>=0);var H=0|Math.ceil(z/26),F=z%26;this._expand(H),F>0&&H--;for(var N=0;N<H;N++)this.words[N]=67108863&~this.words[N];return F>0&&(this.words[N]=~this.words[N]&67108863>>26-F),this.strip()},i.prototype.notn=function(z){return this.clone().inotn(z)},i.prototype.setn=function(z,H){n(typeof z=="number"&&z>=0);var F=z/26|0,N=z%26;return this._expand(F+1),this.words[F]=H?this.words[F]|1<<N:this.words[F]&~(1<<N),this.strip()},i.prototype.iadd=function(z){var H,F,N;if(this.negative!==0&&z.negative===0)return this.negative=0,H=this.isub(z),this.negative^=1,this._normSign();if(this.negative===0&&z.negative!==0)return z.negative=0,H=this.isub(z),z.negative=1,H._normSign();this.length>z.length?(F=this,N=z):(F=z,N=this);for(var B=0,j=0;j<N.length;j++)H=(0|F.words[j])+(0|N.words[j])+B,this.words[j]=67108863&H,B=H>>>26;for(;B!==0&&j<F.length;j++)H=(0|F.words[j])+B,this.words[j]=67108863&H,B=H>>>26;if(this.length=F.length,B!==0)this.words[this.length]=B,this.length++;else if(F!==this)for(;j<F.length;j++)this.words[j]=F.words[j];return this},i.prototype.add=function(z){var H;return z.negative!==0&&this.negative===0?(z.negative=0,H=this.sub(z),z.negative^=1,H):z.negative===0&&this.negative!==0?(this.negative=0,H=z.sub(this),this.negative=1,H):this.length>z.length?this.clone().iadd(z):z.clone().iadd(this)},i.prototype.isub=function(z){if(z.negative!==0){z.negative=0;var H=this.iadd(z);return z.negative=1,H._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(z),this.negative=1,this._normSign();var F,N,B=this.cmp(z);if(B===0)return this.negative=0,this.length=1,this.words[0]=0,this;B>0?(F=this,N=z):(F=z,N=this);for(var j=0,K=0;K<N.length;K++)j=(H=(0|F.words[K])-(0|N.words[K])+j)>>26,this.words[K]=67108863&H;for(;j!==0&&K<F.length;K++)j=(H=(0|F.words[K])+j)>>26,this.words[K]=67108863&H;if(j===0&&K<F.length&&F!==this)for(;K<F.length;K++)this.words[K]=F.words[K];return this.length=Math.max(this.length,K),F!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(z){return this.clone().isub(z)};var m=function(z,H,F){var N,B,j,K=z.words,G=H.words,V=F.words,W=0,J=0|K[0],X=8191&J,ee=J>>>13,re=0|K[1],ie=8191&re,se=re>>>13,fe=0|K[2],ye=8191&fe,ge=fe>>>13,he=0|K[3],ve=8191&he,Oe=he>>>13,xe=0|K[4],ke=8191&xe,Me=xe>>>13,Te=0|K[5],Q=8191&Te,oe=Te>>>13,ce=0|K[6],me=8191&ce,Ae=ce>>>13,Ie=0|K[7],Ce=8191&Ie,Re=Ie>>>13,le=0|K[8],de=8191&le,_e=le>>>13,Fe=0|K[9],Ve=8191&Fe,He=Fe>>>13,nt=0|G[0],tt=8191&nt,ot=nt>>>13,dt=0|G[1],kt=8191&dt,mt=dt>>>13,wt=0|G[2],Lt=8191&wt,Ct=wt>>>13,It=0|G[3],Ut=8191&It,Rt=It>>>13,Ge=0|G[4],We=8191&Ge,Be=Ge>>>13,Ye=0|G[5],rt=8191&Ye,Se=Ye>>>13,ze=0|G[6],Ke=8191&ze,st=ze>>>13,ct=0|G[7],Tt=8191&ct,Et=ct>>>13,At=0|G[8],ht=8191&At,pt=At>>>13,gt=0|G[9],Pt=8191&gt,Ot=gt>>>13;F.negative=z.negative^H.negative,F.length=19;var Ht=(W+(N=Math.imul(X,tt))|0)+((8191&(B=(B=Math.imul(X,ot))+Math.imul(ee,tt)|0))<<13)|0;W=((j=Math.imul(ee,ot))+(B>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,N=Math.imul(ie,tt),B=(B=Math.imul(ie,ot))+Math.imul(se,tt)|0,j=Math.imul(se,ot);var jt=(W+(N=N+Math.imul(X,kt)|0)|0)+((8191&(B=(B=B+Math.imul(X,mt)|0)+Math.imul(ee,kt)|0))<<13)|0;W=((j=j+Math.imul(ee,mt)|0)+(B>>>13)|0)+(jt>>>26)|0,jt&=67108863,N=Math.imul(ye,tt),B=(B=Math.imul(ye,ot))+Math.imul(ge,tt)|0,j=Math.imul(ge,ot),N=N+Math.imul(ie,kt)|0,B=(B=B+Math.imul(ie,mt)|0)+Math.imul(se,kt)|0,j=j+Math.imul(se,mt)|0;var Nt=(W+(N=N+Math.imul(X,Lt)|0)|0)+((8191&(B=(B=B+Math.imul(X,Ct)|0)+Math.imul(ee,Lt)|0))<<13)|0;W=((j=j+Math.imul(ee,Ct)|0)+(B>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,N=Math.imul(ve,tt),B=(B=Math.imul(ve,ot))+Math.imul(Oe,tt)|0,j=Math.imul(Oe,ot),N=N+Math.imul(ye,kt)|0,B=(B=B+Math.imul(ye,mt)|0)+Math.imul(ge,kt)|0,j=j+Math.imul(ge,mt)|0,N=N+Math.imul(ie,Lt)|0,B=(B=B+Math.imul(ie,Ct)|0)+Math.imul(se,Lt)|0,j=j+Math.imul(se,Ct)|0;var Gt=(W+(N=N+Math.imul(X,Ut)|0)|0)+((8191&(B=(B=B+Math.imul(X,Rt)|0)+Math.imul(ee,Ut)|0))<<13)|0;W=((j=j+Math.imul(ee,Rt)|0)+(B>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,N=Math.imul(ke,tt),B=(B=Math.imul(ke,ot))+Math.imul(Me,tt)|0,j=Math.imul(Me,ot),N=N+Math.imul(ve,kt)|0,B=(B=B+Math.imul(ve,mt)|0)+Math.imul(Oe,kt)|0,j=j+Math.imul(Oe,mt)|0,N=N+Math.imul(ye,Lt)|0,B=(B=B+Math.imul(ye,Ct)|0)+Math.imul(ge,Lt)|0,j=j+Math.imul(ge,Ct)|0,N=N+Math.imul(ie,Ut)|0,B=(B=B+Math.imul(ie,Rt)|0)+Math.imul(se,Ut)|0,j=j+Math.imul(se,Rt)|0;var un=(W+(N=N+Math.imul(X,We)|0)|0)+((8191&(B=(B=B+Math.imul(X,Be)|0)+Math.imul(ee,We)|0))<<13)|0;W=((j=j+Math.imul(ee,Be)|0)+(B>>>13)|0)+(un>>>26)|0,un&=67108863,N=Math.imul(Q,tt),B=(B=Math.imul(Q,ot))+Math.imul(oe,tt)|0,j=Math.imul(oe,ot),N=N+Math.imul(ke,kt)|0,B=(B=B+Math.imul(ke,mt)|0)+Math.imul(Me,kt)|0,j=j+Math.imul(Me,mt)|0,N=N+Math.imul(ve,Lt)|0,B=(B=B+Math.imul(ve,Ct)|0)+Math.imul(Oe,Lt)|0,j=j+Math.imul(Oe,Ct)|0,N=N+Math.imul(ye,Ut)|0,B=(B=B+Math.imul(ye,Rt)|0)+Math.imul(ge,Ut)|0,j=j+Math.imul(ge,Rt)|0,N=N+Math.imul(ie,We)|0,B=(B=B+Math.imul(ie,Be)|0)+Math.imul(se,We)|0,j=j+Math.imul(se,Be)|0;var pn=(W+(N=N+Math.imul(X,rt)|0)|0)+((8191&(B=(B=B+Math.imul(X,Se)|0)+Math.imul(ee,rt)|0))<<13)|0;W=((j=j+Math.imul(ee,Se)|0)+(B>>>13)|0)+(pn>>>26)|0,pn&=67108863,N=Math.imul(me,tt),B=(B=Math.imul(me,ot))+Math.imul(Ae,tt)|0,j=Math.imul(Ae,ot),N=N+Math.imul(Q,kt)|0,B=(B=B+Math.imul(Q,mt)|0)+Math.imul(oe,kt)|0,j=j+Math.imul(oe,mt)|0,N=N+Math.imul(ke,Lt)|0,B=(B=B+Math.imul(ke,Ct)|0)+Math.imul(Me,Lt)|0,j=j+Math.imul(Me,Ct)|0,N=N+Math.imul(ve,Ut)|0,B=(B=B+Math.imul(ve,Rt)|0)+Math.imul(Oe,Ut)|0,j=j+Math.imul(Oe,Rt)|0,N=N+Math.imul(ye,We)|0,B=(B=B+Math.imul(ye,Be)|0)+Math.imul(ge,We)|0,j=j+Math.imul(ge,Be)|0,N=N+Math.imul(ie,rt)|0,B=(B=B+Math.imul(ie,Se)|0)+Math.imul(se,rt)|0,j=j+Math.imul(se,Se)|0;var Kt=(W+(N=N+Math.imul(X,Ke)|0)|0)+((8191&(B=(B=B+Math.imul(X,st)|0)+Math.imul(ee,Ke)|0))<<13)|0;W=((j=j+Math.imul(ee,st)|0)+(B>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,N=Math.imul(Ce,tt),B=(B=Math.imul(Ce,ot))+Math.imul(Re,tt)|0,j=Math.imul(Re,ot),N=N+Math.imul(me,kt)|0,B=(B=B+Math.imul(me,mt)|0)+Math.imul(Ae,kt)|0,j=j+Math.imul(Ae,mt)|0,N=N+Math.imul(Q,Lt)|0,B=(B=B+Math.imul(Q,Ct)|0)+Math.imul(oe,Lt)|0,j=j+Math.imul(oe,Ct)|0,N=N+Math.imul(ke,Ut)|0,B=(B=B+Math.imul(ke,Rt)|0)+Math.imul(Me,Ut)|0,j=j+Math.imul(Me,Rt)|0,N=N+Math.imul(ve,We)|0,B=(B=B+Math.imul(ve,Be)|0)+Math.imul(Oe,We)|0,j=j+Math.imul(Oe,Be)|0,N=N+Math.imul(ye,rt)|0,B=(B=B+Math.imul(ye,Se)|0)+Math.imul(ge,rt)|0,j=j+Math.imul(ge,Se)|0,N=N+Math.imul(ie,Ke)|0,B=(B=B+Math.imul(ie,st)|0)+Math.imul(se,Ke)|0,j=j+Math.imul(se,st)|0;var wn=(W+(N=N+Math.imul(X,Tt)|0)|0)+((8191&(B=(B=B+Math.imul(X,Et)|0)+Math.imul(ee,Tt)|0))<<13)|0;W=((j=j+Math.imul(ee,Et)|0)+(B>>>13)|0)+(wn>>>26)|0,wn&=67108863,N=Math.imul(de,tt),B=(B=Math.imul(de,ot))+Math.imul(_e,tt)|0,j=Math.imul(_e,ot),N=N+Math.imul(Ce,kt)|0,B=(B=B+Math.imul(Ce,mt)|0)+Math.imul(Re,kt)|0,j=j+Math.imul(Re,mt)|0,N=N+Math.imul(me,Lt)|0,B=(B=B+Math.imul(me,Ct)|0)+Math.imul(Ae,Lt)|0,j=j+Math.imul(Ae,Ct)|0,N=N+Math.imul(Q,Ut)|0,B=(B=B+Math.imul(Q,Rt)|0)+Math.imul(oe,Ut)|0,j=j+Math.imul(oe,Rt)|0,N=N+Math.imul(ke,We)|0,B=(B=B+Math.imul(ke,Be)|0)+Math.imul(Me,We)|0,j=j+Math.imul(Me,Be)|0,N=N+Math.imul(ve,rt)|0,B=(B=B+Math.imul(ve,Se)|0)+Math.imul(Oe,rt)|0,j=j+Math.imul(Oe,Se)|0,N=N+Math.imul(ye,Ke)|0,B=(B=B+Math.imul(ye,st)|0)+Math.imul(ge,Ke)|0,j=j+Math.imul(ge,st)|0,N=N+Math.imul(ie,Tt)|0,B=(B=B+Math.imul(ie,Et)|0)+Math.imul(se,Tt)|0,j=j+Math.imul(se,Et)|0;var Bn=(W+(N=N+Math.imul(X,ht)|0)|0)+((8191&(B=(B=B+Math.imul(X,pt)|0)+Math.imul(ee,ht)|0))<<13)|0;W=((j=j+Math.imul(ee,pt)|0)+(B>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,N=Math.imul(Ve,tt),B=(B=Math.imul(Ve,ot))+Math.imul(He,tt)|0,j=Math.imul(He,ot),N=N+Math.imul(de,kt)|0,B=(B=B+Math.imul(de,mt)|0)+Math.imul(_e,kt)|0,j=j+Math.imul(_e,mt)|0,N=N+Math.imul(Ce,Lt)|0,B=(B=B+Math.imul(Ce,Ct)|0)+Math.imul(Re,Lt)|0,j=j+Math.imul(Re,Ct)|0,N=N+Math.imul(me,Ut)|0,B=(B=B+Math.imul(me,Rt)|0)+Math.imul(Ae,Ut)|0,j=j+Math.imul(Ae,Rt)|0,N=N+Math.imul(Q,We)|0,B=(B=B+Math.imul(Q,Be)|0)+Math.imul(oe,We)|0,j=j+Math.imul(oe,Be)|0,N=N+Math.imul(ke,rt)|0,B=(B=B+Math.imul(ke,Se)|0)+Math.imul(Me,rt)|0,j=j+Math.imul(Me,Se)|0,N=N+Math.imul(ve,Ke)|0,B=(B=B+Math.imul(ve,st)|0)+Math.imul(Oe,Ke)|0,j=j+Math.imul(Oe,st)|0,N=N+Math.imul(ye,Tt)|0,B=(B=B+Math.imul(ye,Et)|0)+Math.imul(ge,Tt)|0,j=j+Math.imul(ge,Et)|0,N=N+Math.imul(ie,ht)|0,B=(B=B+Math.imul(ie,pt)|0)+Math.imul(se,ht)|0,j=j+Math.imul(se,pt)|0;var vn=(W+(N=N+Math.imul(X,Pt)|0)|0)+((8191&(B=(B=B+Math.imul(X,Ot)|0)+Math.imul(ee,Pt)|0))<<13)|0;W=((j=j+Math.imul(ee,Ot)|0)+(B>>>13)|0)+(vn>>>26)|0,vn&=67108863,N=Math.imul(Ve,kt),B=(B=Math.imul(Ve,mt))+Math.imul(He,kt)|0,j=Math.imul(He,mt),N=N+Math.imul(de,Lt)|0,B=(B=B+Math.imul(de,Ct)|0)+Math.imul(_e,Lt)|0,j=j+Math.imul(_e,Ct)|0,N=N+Math.imul(Ce,Ut)|0,B=(B=B+Math.imul(Ce,Rt)|0)+Math.imul(Re,Ut)|0,j=j+Math.imul(Re,Rt)|0,N=N+Math.imul(me,We)|0,B=(B=B+Math.imul(me,Be)|0)+Math.imul(Ae,We)|0,j=j+Math.imul(Ae,Be)|0,N=N+Math.imul(Q,rt)|0,B=(B=B+Math.imul(Q,Se)|0)+Math.imul(oe,rt)|0,j=j+Math.imul(oe,Se)|0,N=N+Math.imul(ke,Ke)|0,B=(B=B+Math.imul(ke,st)|0)+Math.imul(Me,Ke)|0,j=j+Math.imul(Me,st)|0,N=N+Math.imul(ve,Tt)|0,B=(B=B+Math.imul(ve,Et)|0)+Math.imul(Oe,Tt)|0,j=j+Math.imul(Oe,Et)|0,N=N+Math.imul(ye,ht)|0,B=(B=B+Math.imul(ye,pt)|0)+Math.imul(ge,ht)|0,j=j+Math.imul(ge,pt)|0;var cn=(W+(N=N+Math.imul(ie,Pt)|0)|0)+((8191&(B=(B=B+Math.imul(ie,Ot)|0)+Math.imul(se,Pt)|0))<<13)|0;W=((j=j+Math.imul(se,Ot)|0)+(B>>>13)|0)+(cn>>>26)|0,cn&=67108863,N=Math.imul(Ve,Lt),B=(B=Math.imul(Ve,Ct))+Math.imul(He,Lt)|0,j=Math.imul(He,Ct),N=N+Math.imul(de,Ut)|0,B=(B=B+Math.imul(de,Rt)|0)+Math.imul(_e,Ut)|0,j=j+Math.imul(_e,Rt)|0,N=N+Math.imul(Ce,We)|0,B=(B=B+Math.imul(Ce,Be)|0)+Math.imul(Re,We)|0,j=j+Math.imul(Re,Be)|0,N=N+Math.imul(me,rt)|0,B=(B=B+Math.imul(me,Se)|0)+Math.imul(Ae,rt)|0,j=j+Math.imul(Ae,Se)|0,N=N+Math.imul(Q,Ke)|0,B=(B=B+Math.imul(Q,st)|0)+Math.imul(oe,Ke)|0,j=j+Math.imul(oe,st)|0,N=N+Math.imul(ke,Tt)|0,B=(B=B+Math.imul(ke,Et)|0)+Math.imul(Me,Tt)|0,j=j+Math.imul(Me,Et)|0,N=N+Math.imul(ve,ht)|0,B=(B=B+Math.imul(ve,pt)|0)+Math.imul(Oe,ht)|0,j=j+Math.imul(Oe,pt)|0;var dn=(W+(N=N+Math.imul(ye,Pt)|0)|0)+((8191&(B=(B=B+Math.imul(ye,Ot)|0)+Math.imul(ge,Pt)|0))<<13)|0;W=((j=j+Math.imul(ge,Ot)|0)+(B>>>13)|0)+(dn>>>26)|0,dn&=67108863,N=Math.imul(Ve,Ut),B=(B=Math.imul(Ve,Rt))+Math.imul(He,Ut)|0,j=Math.imul(He,Rt),N=N+Math.imul(de,We)|0,B=(B=B+Math.imul(de,Be)|0)+Math.imul(_e,We)|0,j=j+Math.imul(_e,Be)|0,N=N+Math.imul(Ce,rt)|0,B=(B=B+Math.imul(Ce,Se)|0)+Math.imul(Re,rt)|0,j=j+Math.imul(Re,Se)|0,N=N+Math.imul(me,Ke)|0,B=(B=B+Math.imul(me,st)|0)+Math.imul(Ae,Ke)|0,j=j+Math.imul(Ae,st)|0,N=N+Math.imul(Q,Tt)|0,B=(B=B+Math.imul(Q,Et)|0)+Math.imul(oe,Tt)|0,j=j+Math.imul(oe,Et)|0,N=N+Math.imul(ke,ht)|0,B=(B=B+Math.imul(ke,pt)|0)+Math.imul(Me,ht)|0,j=j+Math.imul(Me,pt)|0;var sn=(W+(N=N+Math.imul(ve,Pt)|0)|0)+((8191&(B=(B=B+Math.imul(ve,Ot)|0)+Math.imul(Oe,Pt)|0))<<13)|0;W=((j=j+Math.imul(Oe,Ot)|0)+(B>>>13)|0)+(sn>>>26)|0,sn&=67108863,N=Math.imul(Ve,We),B=(B=Math.imul(Ve,Be))+Math.imul(He,We)|0,j=Math.imul(He,Be),N=N+Math.imul(de,rt)|0,B=(B=B+Math.imul(de,Se)|0)+Math.imul(_e,rt)|0,j=j+Math.imul(_e,Se)|0,N=N+Math.imul(Ce,Ke)|0,B=(B=B+Math.imul(Ce,st)|0)+Math.imul(Re,Ke)|0,j=j+Math.imul(Re,st)|0,N=N+Math.imul(me,Tt)|0,B=(B=B+Math.imul(me,Et)|0)+Math.imul(Ae,Tt)|0,j=j+Math.imul(Ae,Et)|0,N=N+Math.imul(Q,ht)|0,B=(B=B+Math.imul(Q,pt)|0)+Math.imul(oe,ht)|0,j=j+Math.imul(oe,pt)|0;var hn=(W+(N=N+Math.imul(ke,Pt)|0)|0)+((8191&(B=(B=B+Math.imul(ke,Ot)|0)+Math.imul(Me,Pt)|0))<<13)|0;W=((j=j+Math.imul(Me,Ot)|0)+(B>>>13)|0)+(hn>>>26)|0,hn&=67108863,N=Math.imul(Ve,rt),B=(B=Math.imul(Ve,Se))+Math.imul(He,rt)|0,j=Math.imul(He,Se),N=N+Math.imul(de,Ke)|0,B=(B=B+Math.imul(de,st)|0)+Math.imul(_e,Ke)|0,j=j+Math.imul(_e,st)|0,N=N+Math.imul(Ce,Tt)|0,B=(B=B+Math.imul(Ce,Et)|0)+Math.imul(Re,Tt)|0,j=j+Math.imul(Re,Et)|0,N=N+Math.imul(me,ht)|0,B=(B=B+Math.imul(me,pt)|0)+Math.imul(Ae,ht)|0,j=j+Math.imul(Ae,pt)|0;var En=(W+(N=N+Math.imul(Q,Pt)|0)|0)+((8191&(B=(B=B+Math.imul(Q,Ot)|0)+Math.imul(oe,Pt)|0))<<13)|0;W=((j=j+Math.imul(oe,Ot)|0)+(B>>>13)|0)+(En>>>26)|0,En&=67108863,N=Math.imul(Ve,Ke),B=(B=Math.imul(Ve,st))+Math.imul(He,Ke)|0,j=Math.imul(He,st),N=N+Math.imul(de,Tt)|0,B=(B=B+Math.imul(de,Et)|0)+Math.imul(_e,Tt)|0,j=j+Math.imul(_e,Et)|0,N=N+Math.imul(Ce,ht)|0,B=(B=B+Math.imul(Ce,pt)|0)+Math.imul(Re,ht)|0,j=j+Math.imul(Re,pt)|0;var Mn=(W+(N=N+Math.imul(me,Pt)|0)|0)+((8191&(B=(B=B+Math.imul(me,Ot)|0)+Math.imul(Ae,Pt)|0))<<13)|0;W=((j=j+Math.imul(Ae,Ot)|0)+(B>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,N=Math.imul(Ve,Tt),B=(B=Math.imul(Ve,Et))+Math.imul(He,Tt)|0,j=Math.imul(He,Et),N=N+Math.imul(de,ht)|0,B=(B=B+Math.imul(de,pt)|0)+Math.imul(_e,ht)|0,j=j+Math.imul(_e,pt)|0;var Rn=(W+(N=N+Math.imul(Ce,Pt)|0)|0)+((8191&(B=(B=B+Math.imul(Ce,Ot)|0)+Math.imul(Re,Pt)|0))<<13)|0;W=((j=j+Math.imul(Re,Ot)|0)+(B>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,N=Math.imul(Ve,ht),B=(B=Math.imul(Ve,pt))+Math.imul(He,ht)|0,j=Math.imul(He,pt);var Nn=(W+(N=N+Math.imul(de,Pt)|0)|0)+((8191&(B=(B=B+Math.imul(de,Ot)|0)+Math.imul(_e,Pt)|0))<<13)|0;W=((j=j+Math.imul(_e,Ot)|0)+(B>>>13)|0)+(Nn>>>26)|0,Nn&=67108863;var Fn=(W+(N=Math.imul(Ve,Pt))|0)+((8191&(B=(B=Math.imul(Ve,Ot))+Math.imul(He,Pt)|0))<<13)|0;return W=((j=Math.imul(He,Ot))+(B>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,V[0]=Ht,V[1]=jt,V[2]=Nt,V[3]=Gt,V[4]=un,V[5]=pn,V[6]=Kt,V[7]=wn,V[8]=Bn,V[9]=vn,V[10]=cn,V[11]=dn,V[12]=sn,V[13]=hn,V[14]=En,V[15]=Mn,V[16]=Rn,V[17]=Nn,V[18]=Fn,W!==0&&(V[19]=W,F.length++),F};function w(z,H,F){return new u().mulp(z,H,F)}function u(z,H){this.x=z,this.y=H}Math.imul||(m=p),i.prototype.mulTo=function(z,H){var F,N=this.length+z.length;return F=this.length===10&&z.length===10?m(this,z,H):N<63?p(this,z,H):N<1024?function(B,j,K){K.negative=j.negative^B.negative,K.length=B.length+j.length;for(var G=0,V=0,W=0;W<K.length-1;W++){var J=V;V=0;for(var X=67108863&G,ee=Math.min(W,j.length-1),re=Math.max(0,W-B.length+1);re<=ee;re++){var ie=W-re,se=(0|B.words[ie])*(0|j.words[re]),fe=67108863&se;X=67108863&(fe=fe+X|0),V+=(J=(J=J+(se/67108864|0)|0)+(fe>>>26)|0)>>>26,J&=67108863}K.words[W]=X,G=J,J=V}return G!==0?K.words[W]=G:K.length--,K.strip()}(this,z,H):w(this,z,H),F},u.prototype.makeRBT=function(z){for(var H=new Array(z),F=i.prototype._countBits(z)-1,N=0;N<z;N++)H[N]=this.revBin(N,F,z);return H},u.prototype.revBin=function(z,H,F){if(z===0||z===F-1)return z;for(var N=0,B=0;B<H;B++)N|=(1&z)<<H-B-1,z>>=1;return N},u.prototype.permute=function(z,H,F,N,B,j){for(var K=0;K<j;K++)N[K]=H[z[K]],B[K]=F[z[K]]},u.prototype.transform=function(z,H,F,N,B,j){this.permute(j,z,H,F,N,B);for(var K=1;K<B;K<<=1)for(var G=K<<1,V=Math.cos(2*Math.PI/G),W=Math.sin(2*Math.PI/G),J=0;J<B;J+=G)for(var X=V,ee=W,re=0;re<K;re++){var ie=F[J+re],se=N[J+re],fe=F[J+re+K],ye=N[J+re+K],ge=X*fe-ee*ye;ye=X*ye+ee*fe,fe=ge,F[J+re]=ie+fe,N[J+re]=se+ye,F[J+re+K]=ie-fe,N[J+re+K]=se-ye,re!==G&&(ge=V*X-W*ee,ee=V*ee+W*X,X=ge)}},u.prototype.guessLen13b=function(z,H){var F=1|Math.max(H,z),N=1&F,B=0;for(F=F/2|0;F;F>>>=1)B++;return 1<<B+1+N},u.prototype.conjugate=function(z,H,F){if(!(F<=1))for(var N=0;N<F/2;N++){var B=z[N];z[N]=z[F-N-1],z[F-N-1]=B,B=H[N],H[N]=-H[F-N-1],H[F-N-1]=-B}},u.prototype.normalize13b=function(z,H){for(var F=0,N=0;N<H/2;N++){var B=8192*Math.round(z[2*N+1]/H)+Math.round(z[2*N]/H)+F;z[N]=67108863&B,F=B<67108864?0:B/67108864|0}return z},u.prototype.convert13b=function(z,H,F,N){for(var B=0,j=0;j<H;j++)B+=0|z[j],F[2*j]=8191&B,B>>>=13,F[2*j+1]=8191&B,B>>>=13;for(j=2*H;j<N;++j)F[j]=0;n(B===0),n((-8192&B)==0)},u.prototype.stub=function(z){for(var H=new Array(z),F=0;F<z;F++)H[F]=0;return H},u.prototype.mulp=function(z,H,F){var N=2*this.guessLen13b(z.length,H.length),B=this.makeRBT(N),j=this.stub(N),K=new Array(N),G=new Array(N),V=new Array(N),W=new Array(N),J=new Array(N),X=new Array(N),ee=F.words;ee.length=N,this.convert13b(z.words,z.length,K,N),this.convert13b(H.words,H.length,W,N),this.transform(K,j,G,V,N,B),this.transform(W,j,J,X,N,B);for(var re=0;re<N;re++){var ie=G[re]*J[re]-V[re]*X[re];V[re]=G[re]*X[re]+V[re]*J[re],G[re]=ie}return this.conjugate(G,V,N),this.transform(G,V,ee,j,N,B),this.conjugate(ee,j,N),this.normalize13b(ee,N),F.negative=z.negative^H.negative,F.length=z.length+H.length,F.strip()},i.prototype.mul=function(z){var H=new i(null);return H.words=new Array(this.length+z.length),this.mulTo(z,H)},i.prototype.mulf=function(z){var H=new i(null);return H.words=new Array(this.length+z.length),w(this,z,H)},i.prototype.imul=function(z){return this.clone().mulTo(z,this)},i.prototype.imuln=function(z){n(typeof z=="number"),n(z<67108864);for(var H=0,F=0;F<this.length;F++){var N=(0|this.words[F])*z,B=(67108863&N)+(67108863&H);H>>=26,H+=N/67108864|0,H+=B>>>26,this.words[F]=67108863&B}return H!==0&&(this.words[F]=H,this.length++),this},i.prototype.muln=function(z){return this.clone().imuln(z)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(z){var H=function(j){for(var K=new Array(j.bitLength()),G=0;G<K.length;G++){var V=G/26|0,W=G%26;K[G]=(j.words[V]&1<<W)>>>W}return K}(z);if(H.length===0)return new i(1);for(var F=this,N=0;N<H.length&&H[N]===0;N++,F=F.sqr());if(++N<H.length)for(var B=F.sqr();N<H.length;N++,B=B.sqr())H[N]!==0&&(F=F.mul(B));return F},i.prototype.iushln=function(z){n(typeof z=="number"&&z>=0);var H,F=z%26,N=(z-F)/26,B=67108863>>>26-F<<26-F;if(F!==0){var j=0;for(H=0;H<this.length;H++){var K=this.words[H]&B,G=(0|this.words[H])-K<<F;this.words[H]=G|j,j=K>>>26-F}j&&(this.words[H]=j,this.length++)}if(N!==0){for(H=this.length-1;H>=0;H--)this.words[H+N]=this.words[H];for(H=0;H<N;H++)this.words[H]=0;this.length+=N}return this.strip()},i.prototype.ishln=function(z){return n(this.negative===0),this.iushln(z)},i.prototype.iushrn=function(z,H,F){var N;n(typeof z=="number"&&z>=0),N=H?(H-H%26)/26:0;var B=z%26,j=Math.min((z-B)/26,this.length),K=67108863^67108863>>>B<<B,G=F;if(N-=j,N=Math.max(0,N),G){for(var V=0;V<j;V++)G.words[V]=this.words[V];G.length=j}if(j!==0)if(this.length>j)for(this.length-=j,V=0;V<this.length;V++)this.words[V]=this.words[V+j];else this.words[0]=0,this.length=1;var W=0;for(V=this.length-1;V>=0&&(W!==0||V>=N);V--){var J=0|this.words[V];this.words[V]=W<<26-B|J>>>B,W=J&K}return G&&W!==0&&(G.words[G.length++]=W),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(z,H,F){return n(this.negative===0),this.iushrn(z,H,F)},i.prototype.shln=function(z){return this.clone().ishln(z)},i.prototype.ushln=function(z){return this.clone().iushln(z)},i.prototype.shrn=function(z){return this.clone().ishrn(z)},i.prototype.ushrn=function(z){return this.clone().iushrn(z)},i.prototype.testn=function(z){n(typeof z=="number"&&z>=0);var H=z%26,F=(z-H)/26,N=1<<H;return!(this.length<=F||!(this.words[F]&N))},i.prototype.imaskn=function(z){n(typeof z=="number"&&z>=0);var H=z%26,F=(z-H)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=F)return this;if(H!==0&&F++,this.length=Math.min(F,this.length),H!==0){var N=67108863^67108863>>>H<<H;this.words[this.length-1]&=N}return this.strip()},i.prototype.maskn=function(z){return this.clone().imaskn(z)},i.prototype.iaddn=function(z){return n(typeof z=="number"),n(z<67108864),z<0?this.isubn(-z):this.negative!==0?this.length===1&&(0|this.words[0])<z?(this.words[0]=z-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(z),this.negative=1,this):this._iaddn(z)},i.prototype._iaddn=function(z){this.words[0]+=z;for(var H=0;H<this.length&&this.words[H]>=67108864;H++)this.words[H]-=67108864,H===this.length-1?this.words[H+1]=1:this.words[H+1]++;return this.length=Math.max(this.length,H+1),this},i.prototype.isubn=function(z){if(n(typeof z=="number"),n(z<67108864),z<0)return this.iaddn(-z);if(this.negative!==0)return this.negative=0,this.iaddn(z),this.negative=1,this;if(this.words[0]-=z,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var H=0;H<this.length&&this.words[H]<0;H++)this.words[H]+=67108864,this.words[H+1]-=1;return this.strip()},i.prototype.addn=function(z){return this.clone().iaddn(z)},i.prototype.subn=function(z){return this.clone().isubn(z)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(z,H,F){var N,B,j=z.length+F;this._expand(j);var K=0;for(N=0;N<z.length;N++){B=(0|this.words[N+F])+K;var G=(0|z.words[N])*H;K=((B-=67108863&G)>>26)-(G/67108864|0),this.words[N+F]=67108863&B}for(;N<this.length-F;N++)K=(B=(0|this.words[N+F])+K)>>26,this.words[N+F]=67108863&B;if(K===0)return this.strip();for(n(K===-1),K=0,N=0;N<this.length;N++)K=(B=-(0|this.words[N])+K)>>26,this.words[N]=67108863&B;return this.negative=1,this.strip()},i.prototype._wordDiv=function(z,H){var F=(this.length,z.length),N=this.clone(),B=z,j=0|B.words[B.length-1];(F=26-this._countBits(j))!=0&&(B=B.ushln(F),N.iushln(F),j=0|B.words[B.length-1]);var K,G=N.length-B.length;if(H!=="mod"){(K=new i(null)).length=G+1,K.words=new Array(K.length);for(var V=0;V<K.length;V++)K.words[V]=0}var W=N.clone()._ishlnsubmul(B,1,G);W.negative===0&&(N=W,K&&(K.words[G]=1));for(var J=G-1;J>=0;J--){var X=67108864*(0|N.words[B.length+J])+(0|N.words[B.length+J-1]);for(X=Math.min(X/j|0,67108863),N._ishlnsubmul(B,X,J);N.negative!==0;)X--,N.negative=0,N._ishlnsubmul(B,1,J),N.isZero()||(N.negative^=1);K&&(K.words[J]=X)}return K&&K.strip(),N.strip(),H!=="div"&&F!==0&&N.iushrn(F),{div:K||null,mod:N}},i.prototype.divmod=function(z,H,F){return n(!z.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:this.negative!==0&&z.negative===0?(j=this.neg().divmod(z,H),H!=="mod"&&(N=j.div.neg()),H!=="div"&&(B=j.mod.neg(),F&&B.negative!==0&&B.iadd(z)),{div:N,mod:B}):this.negative===0&&z.negative!==0?(j=this.divmod(z.neg(),H),H!=="mod"&&(N=j.div.neg()),{div:N,mod:j.mod}):this.negative&z.negative?(j=this.neg().divmod(z.neg(),H),H!=="div"&&(B=j.mod.neg(),F&&B.negative!==0&&B.isub(z)),{div:j.div,mod:B}):z.length>this.length||this.cmp(z)<0?{div:new i(0),mod:this}:z.length===1?H==="div"?{div:this.divn(z.words[0]),mod:null}:H==="mod"?{div:null,mod:new i(this.modn(z.words[0]))}:{div:this.divn(z.words[0]),mod:new i(this.modn(z.words[0]))}:this._wordDiv(z,H);var N,B,j},i.prototype.div=function(z){return this.divmod(z,"div",!1).div},i.prototype.mod=function(z){return this.divmod(z,"mod",!1).mod},i.prototype.umod=function(z){return this.divmod(z,"mod",!0).mod},i.prototype.divRound=function(z){var H=this.divmod(z);if(H.mod.isZero())return H.div;var F=H.div.negative!==0?H.mod.isub(z):H.mod,N=z.ushrn(1),B=z.andln(1),j=F.cmp(N);return j<0||B===1&&j===0?H.div:H.div.negative!==0?H.div.isubn(1):H.div.iaddn(1)},i.prototype.modn=function(z){n(z<=67108863);for(var H=67108864%z,F=0,N=this.length-1;N>=0;N--)F=(H*F+(0|this.words[N]))%z;return F},i.prototype.idivn=function(z){n(z<=67108863);for(var H=0,F=this.length-1;F>=0;F--){var N=(0|this.words[F])+67108864*H;this.words[F]=N/z|0,H=N%z}return this.strip()},i.prototype.divn=function(z){return this.clone().idivn(z)},i.prototype.egcd=function(z){n(z.negative===0),n(!z.isZero());var H=this,F=z.clone();H=H.negative!==0?H.umod(z):H.clone();for(var N=new i(1),B=new i(0),j=new i(0),K=new i(1),G=0;H.isEven()&&F.isEven();)H.iushrn(1),F.iushrn(1),++G;for(var V=F.clone(),W=H.clone();!H.isZero();){for(var J=0,X=1;!(H.words[0]&X)&&J<26;++J,X<<=1);if(J>0)for(H.iushrn(J);J-- >0;)(N.isOdd()||B.isOdd())&&(N.iadd(V),B.isub(W)),N.iushrn(1),B.iushrn(1);for(var ee=0,re=1;!(F.words[0]&re)&&ee<26;++ee,re<<=1);if(ee>0)for(F.iushrn(ee);ee-- >0;)(j.isOdd()||K.isOdd())&&(j.iadd(V),K.isub(W)),j.iushrn(1),K.iushrn(1);H.cmp(F)>=0?(H.isub(F),N.isub(j),B.isub(K)):(F.isub(H),j.isub(N),K.isub(B))}return{a:j,b:K,gcd:F.iushln(G)}},i.prototype._invmp=function(z){n(z.negative===0),n(!z.isZero());var H=this,F=z.clone();H=H.negative!==0?H.umod(z):H.clone();for(var N,B=new i(1),j=new i(0),K=F.clone();H.cmpn(1)>0&&F.cmpn(1)>0;){for(var G=0,V=1;!(H.words[0]&V)&&G<26;++G,V<<=1);if(G>0)for(H.iushrn(G);G-- >0;)B.isOdd()&&B.iadd(K),B.iushrn(1);for(var W=0,J=1;!(F.words[0]&J)&&W<26;++W,J<<=1);if(W>0)for(F.iushrn(W);W-- >0;)j.isOdd()&&j.iadd(K),j.iushrn(1);H.cmp(F)>=0?(H.isub(F),B.isub(j)):(F.isub(H),j.isub(B))}return(N=H.cmpn(1)===0?B:j).cmpn(0)<0&&N.iadd(z),N},i.prototype.gcd=function(z){if(this.isZero())return z.abs();if(z.isZero())return this.abs();var H=this.clone(),F=z.clone();H.negative=0,F.negative=0;for(var N=0;H.isEven()&&F.isEven();N++)H.iushrn(1),F.iushrn(1);for(;;){for(;H.isEven();)H.iushrn(1);for(;F.isEven();)F.iushrn(1);var B=H.cmp(F);if(B<0){var j=H;H=F,F=j}else if(B===0||F.cmpn(1)===0)break;H.isub(F)}return F.iushln(N)},i.prototype.invm=function(z){return this.egcd(z).a.umod(z)},i.prototype.isEven=function(){return(1&this.words[0])==0},i.prototype.isOdd=function(){return(1&this.words[0])==1},i.prototype.andln=function(z){return this.words[0]&z},i.prototype.bincn=function(z){n(typeof z=="number");var H=z%26,F=(z-H)/26,N=1<<H;if(this.length<=F)return this._expand(F+1),this.words[F]|=N,this;for(var B=N,j=F;B!==0&&j<this.length;j++){var K=0|this.words[j];B=(K+=B)>>>26,K&=67108863,this.words[j]=K}return B!==0&&(this.words[j]=B,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(z){var H,F=z<0;if(this.negative!==0&&!F)return-1;if(this.negative===0&&F)return 1;if(this.strip(),this.length>1)H=1;else{F&&(z=-z),n(z<=67108863,"Number is too big");var N=0|this.words[0];H=N===z?0:N<z?-1:1}return this.negative!==0?0|-H:H},i.prototype.cmp=function(z){if(this.negative!==0&&z.negative===0)return-1;if(this.negative===0&&z.negative!==0)return 1;var H=this.ucmp(z);return this.negative!==0?0|-H:H},i.prototype.ucmp=function(z){if(this.length>z.length)return 1;if(this.length<z.length)return-1;for(var H=0,F=this.length-1;F>=0;F--){var N=0|this.words[F],B=0|z.words[F];if(N!==B){N<B?H=-1:N>B&&(H=1);break}}return H},i.prototype.gtn=function(z){return this.cmpn(z)===1},i.prototype.gt=function(z){return this.cmp(z)===1},i.prototype.gten=function(z){return this.cmpn(z)>=0},i.prototype.gte=function(z){return this.cmp(z)>=0},i.prototype.ltn=function(z){return this.cmpn(z)===-1},i.prototype.lt=function(z){return this.cmp(z)===-1},i.prototype.lten=function(z){return this.cmpn(z)<=0},i.prototype.lte=function(z){return this.cmp(z)<=0},i.prototype.eqn=function(z){return this.cmpn(z)===0},i.prototype.eq=function(z){return this.cmp(z)===0},i.red=function(z){return new I(z)},i.prototype.toRed=function(z){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),z.convertTo(this)._forceRed(z)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(z){return this.red=z,this},i.prototype.forceRed=function(z){return n(!this.red,"Already a number in reduction context"),this._forceRed(z)},i.prototype.redAdd=function(z){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,z)},i.prototype.redIAdd=function(z){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,z)},i.prototype.redSub=function(z){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,z)},i.prototype.redISub=function(z){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,z)},i.prototype.redShl=function(z){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,z)},i.prototype.redMul=function(z){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,z),this.red.mul(this,z)},i.prototype.redIMul=function(z){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,z),this.red.imul(this,z)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(z){return n(this.red&&!z.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,z)};var S={k256:null,p224:null,p192:null,p25519:null};function _(z,H){this.name=z,this.p=new i(H,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function L(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(z){if(typeof z=="string"){var H=i._prime(z);this.m=H.p,this.prime=H}else n(z.gtn(1),"modulus must be greater than 1"),this.m=z,this.prime=null}function U(z){I.call(this,z),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var z=new i(null);return z.words=new Array(Math.ceil(this.n/13)),z},_.prototype.ireduce=function(z){var H,F=z;do this.split(F,this.tmp),H=(F=(F=this.imulK(F)).iadd(this.tmp)).bitLength();while(H>this.n);var N=H<this.n?-1:F.ucmp(this.p);return N===0?(F.words[0]=0,F.length=1):N>0?F.isub(this.p):F.strip!==void 0?F.strip():F._strip(),F},_.prototype.split=function(z,H){z.iushrn(this.n,0,H)},_.prototype.imulK=function(z){return z.imul(this.k)},a(E,_),E.prototype.split=function(z,H){for(var F=4194303,N=Math.min(z.length,9),B=0;B<N;B++)H.words[B]=z.words[B];if(H.length=N,z.length<=9)return z.words[0]=0,void(z.length=1);var j=z.words[9];for(H.words[H.length++]=j&F,B=10;B<z.length;B++){var K=0|z.words[B];z.words[B-10]=(K&F)<<4|j>>>22,j=K}j>>>=22,z.words[B-10]=j,j===0&&z.length>10?z.length-=10:z.length-=9},E.prototype.imulK=function(z){z.words[z.length]=0,z.words[z.length+1]=0,z.length+=2;for(var H=0,F=0;F<z.length;F++){var N=0|z.words[F];H+=977*N,z.words[F]=67108863&H,H=64*N+(H/67108864|0)}return z.words[z.length-1]===0&&(z.length--,z.words[z.length-1]===0&&z.length--),z},a(L,_),a(C,_),a(P,_),P.prototype.imulK=function(z){for(var H=0,F=0;F<z.length;F++){var N=19*(0|z.words[F])+H,B=67108863&N;N>>>=26,z.words[F]=B,H=N}return H!==0&&(z.words[z.length++]=H),z},i._prime=function(z){if(S[z])return S[z];var H;if(z==="k256")H=new E;else if(z==="p224")H=new L;else if(z==="p192")H=new C;else{if(z!=="p25519")throw new Error("Unknown prime "+z);H=new P}return S[z]=H,H},I.prototype._verify1=function(z){n(z.negative===0,"red works only with positives"),n(z.red,"red works only with red numbers")},I.prototype._verify2=function(z,H){n((z.negative|H.negative)==0,"red works only with positives"),n(z.red&&z.red===H.red,"red works only with red numbers")},I.prototype.imod=function(z){return this.prime?this.prime.ireduce(z)._forceRed(this):z.umod(this.m)._forceRed(this)},I.prototype.neg=function(z){return z.isZero()?z.clone():this.m.sub(z)._forceRed(this)},I.prototype.add=function(z,H){this._verify2(z,H);var F=z.add(H);return F.cmp(this.m)>=0&&F.isub(this.m),F._forceRed(this)},I.prototype.iadd=function(z,H){this._verify2(z,H);var F=z.iadd(H);return F.cmp(this.m)>=0&&F.isub(this.m),F},I.prototype.sub=function(z,H){this._verify2(z,H);var F=z.sub(H);return F.cmpn(0)<0&&F.iadd(this.m),F._forceRed(this)},I.prototype.isub=function(z,H){this._verify2(z,H);var F=z.isub(H);return F.cmpn(0)<0&&F.iadd(this.m),F},I.prototype.shl=function(z,H){return this._verify1(z),this.imod(z.ushln(H))},I.prototype.imul=function(z,H){return this._verify2(z,H),this.imod(z.imul(H))},I.prototype.mul=function(z,H){return this._verify2(z,H),this.imod(z.mul(H))},I.prototype.isqr=function(z){return this.imul(z,z.clone())},I.prototype.sqr=function(z){return this.mul(z,z)},I.prototype.sqrt=function(z){if(z.isZero())return z.clone();var H=this.m.andln(3);if(n(H%2==1),H===3){var F=this.m.add(new i(1)).iushrn(2);return this.pow(z,F)}for(var N=this.m.subn(1),B=0;!N.isZero()&&N.andln(1)===0;)B++,N.iushrn(1);n(!N.isZero());var j=new i(1).toRed(this),K=j.redNeg(),G=this.m.subn(1).iushrn(1),V=this.m.bitLength();for(V=new i(2*V*V).toRed(this);this.pow(V,G).cmp(K)!==0;)V.redIAdd(K);for(var W=this.pow(V,N),J=this.pow(z,N.addn(1).iushrn(1)),X=this.pow(z,N),ee=B;X.cmp(j)!==0;){for(var re=X,ie=0;re.cmp(j)!==0;ie++)re=re.redSqr();n(ie<ee);var se=this.pow(W,new i(1).iushln(ee-ie-1));J=J.redMul(se),W=se.redSqr(),X=X.redMul(W),ee=ie}return J},I.prototype.invm=function(z){var H=z._invmp(this.m);return H.negative!==0?(H.negative=0,this.imod(H).redNeg()):this.imod(H)},I.prototype.pow=function(z,H){if(H.isZero())return new i(1).toRed(this);if(H.cmpn(1)===0)return z.clone();var F=new Array(16);F[0]=new i(1).toRed(this),F[1]=z;for(var N=2;N<F.length;N++)F[N]=this.mul(F[N-1],z);var B=F[0],j=0,K=0,G=H.bitLength()%26;for(G===0&&(G=26),N=H.length-1;N>=0;N--){for(var V=H.words[N],W=G-1;W>=0;W--){var J=V>>W&1;B!==F[0]&&(B=this.sqr(B)),J!==0||j!==0?(j<<=1,j|=J,(++K==4||N===0&&W===0)&&(B=this.mul(B,F[j]),K=0,j=0)):K=0}G=26}return B},I.prototype.convertTo=function(z){var H=z.umod(this.m);return H===z?H.clone():H},I.prototype.convertFrom=function(z){var H=z.clone();return H.red=null,H},i.mont=function(z){return new U(z)},a(U,I),U.prototype.convertTo=function(z){return this.imod(z.ushln(this.shift))},U.prototype.convertFrom=function(z){var H=this.imod(z.mul(this.rinv));return H.red=null,H},U.prototype.imul=function(z,H){if(z.isZero()||H.isZero())return z.words[0]=0,z.length=1,z;var F=z.imul(H),N=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=F.isub(N).iushrn(this.shift),j=B;return B.cmp(this.m)>=0?j=B.isub(this.m):B.cmpn(0)<0&&(j=B.iadd(this.m)),j._forceRed(this)},U.prototype.mul=function(z,H){if(z.isZero()||H.isZero())return new i(0)._forceRed(this);var F=z.mul(H),N=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=F.isub(N).iushrn(this.shift),j=B;return B.cmp(this.m)>=0?j=B.isub(this.m):B.cmpn(0)<0&&(j=B.iadd(this.m)),j._forceRed(this)},U.prototype.invm=function(z){return this.imod(z._invmp(this.m).mul(this.r2))._forceRed(this)}})(d=t.nmd(d),this)},2692:function(d){d.exports=function(s){var t,o,r,n=s.length,a=0;for(t=0;t<n;++t)a+=s[t].length;var i=new Array(a),c=0;for(t=0;t<n;++t){var h=s[t],f=h.length;for(o=0;o<f;++o){var b=i[c++]=new Array(f-1),v=0;for(r=0;r<f;++r)r!==o&&(b[v++]=h[r]);if(1&o){var g=b[1];b[1]=b[0],b[0]=g}}}return i}},2569:function(d,s,t){d.exports=function(g,y,p){switch(arguments.length){case 1:return b(g);case 2:return typeof y=="function"?h(g,g,y,!0):v(g,y);case 3:return h(g,y,p,!1);default:throw new Error("box-intersect: Invalid arguments")}};var o,r=t(5306),n=t(1390),a=t(2337);function i(g,y){for(var p=0;p<g;++p)if(!(y[p]<=y[p+g]))return!0;return!1}function c(g,y,p,m){for(var w=0,u=0,S=0,_=g.length;S<_;++S){var E=g[S];if(!i(y,E)){for(var L=0;L<2*y;++L)p[w++]=E[L];m[u++]=S}}return u}function h(g,y,p,m){var w=g.length,u=y.length;if(!(w<=0||u<=0)){var S=g[0].length>>>1;if(!(S<=0)){var _,E=r.mallocDouble(2*S*w),L=r.mallocInt32(w);if((w=c(g,S,E,L))>0){if(S===1&&m)n.init(w),_=n.sweepComplete(S,p,0,w,E,L,0,w,E,L);else{var C=r.mallocDouble(2*S*u),P=r.mallocInt32(u);(u=c(y,S,C,P))>0&&(n.init(w+u),_=S===1?n.sweepBipartite(S,p,0,w,E,L,0,u,C,P):a(S,p,m,w,E,L,u,C,P),r.free(C),r.free(P))}r.free(E),r.free(L)}return _}}}function f(g,y){o.push([g,y])}function b(g){return o=[],h(g,g,f,!0),o}function v(g,y){return o=[],h(g,y,f,!1),o}},7333:function(d,s){function t(o){return o?function(r,n,a,i,c,h,f,b,v,g,y){return c-i>v-b?function(p,m,w,u,S,_,E,L,C,P,I){for(var U=2*p,z=u,H=U*u;z<S;++z,H+=U){var F=_[m+H],N=_[m+H+p],B=E[z];e:for(var j=L,K=U*L;j<C;++j,K+=U){var G=P[m+K],V=P[m+K+p],W=I[j];if(!(V<F||N<G)){for(var J=m+1;J<p;++J){var X=_[J+H],ee=_[J+p+H],re=P[J+K],ie=P[J+p+K];if(ee<re||ie<X)continue e}var se=w(B,W);if(se!==void 0)return se}}}}(r,n,a,i,c,h,f,b,v,g,y):function(p,m,w,u,S,_,E,L,C,P,I){for(var U=2*p,z=L,H=U*L;z<C;++z,H+=U){var F=P[m+H],N=P[m+H+p],B=I[z];e:for(var j=u,K=U*u;j<S;++j,K+=U){var G=_[m+K],V=_[m+K+p],W=E[j];if(!(N<G||V<F)){for(var J=m+1;J<p;++J){var X=_[J+K],ee=_[J+p+K],re=P[J+H],ie=P[J+p+H];if(ee<re||ie<X)continue e}var se=w(W,B);if(se!==void 0)return se}}}}(r,n,a,i,c,h,f,b,v,g,y)}:function(r,n,a,i,c,h,f,b,v,g,y,p){return h-c>g-v?i?function(m,w,u,S,_,E,L,C,P,I,U){for(var z=2*m,H=S,F=z*S;H<_;++H,F+=z){var N=E[w+F],B=E[w+F+m],j=L[H];e:for(var K=C,G=z*C;K<P;++K,G+=z){var V=I[w+G],W=U[K];if(!(V<=N||B<V)){for(var J=w+1;J<m;++J){var X=E[J+F],ee=E[J+m+F],re=I[J+G],ie=I[J+m+G];if(ee<re||ie<X)continue e}var se=u(W,j);if(se!==void 0)return se}}}}(r,n,a,c,h,f,b,v,g,y,p):function(m,w,u,S,_,E,L,C,P,I,U){for(var z=2*m,H=S,F=z*S;H<_;++H,F+=z){var N=E[w+F],B=E[w+F+m],j=L[H];e:for(var K=C,G=z*C;K<P;++K,G+=z){var V=I[w+G],W=U[K];if(!(V<N||B<V)){for(var J=w+1;J<m;++J){var X=E[J+F],ee=E[J+m+F],re=I[J+G],ie=I[J+m+G];if(ee<re||ie<X)continue e}var se=u(j,W);if(se!==void 0)return se}}}}(r,n,a,c,h,f,b,v,g,y,p):i?function(m,w,u,S,_,E,L,C,P,I,U){for(var z=2*m,H=C,F=z*C;H<P;++H,F+=z){var N=I[w+F],B=U[H];e:for(var j=S,K=z*S;j<_;++j,K+=z){var G=E[w+K],V=E[w+K+m],W=L[j];if(!(N<=G||V<N)){for(var J=w+1;J<m;++J){var X=E[J+K],ee=E[J+m+K],re=I[J+F],ie=I[J+m+F];if(ee<re||ie<X)continue e}var se=u(B,W);if(se!==void 0)return se}}}}(r,n,a,c,h,f,b,v,g,y,p):function(m,w,u,S,_,E,L,C,P,I,U){for(var z=2*m,H=C,F=z*C;H<P;++H,F+=z){var N=I[w+F],B=U[H];e:for(var j=S,K=z*S;j<_;++j,K+=z){var G=E[w+K],V=E[w+K+m],W=L[j];if(!(N<G||V<N)){for(var J=w+1;J<m;++J){var X=E[J+K],ee=E[J+m+K],re=I[J+F],ie=I[J+m+F];if(ee<re||ie<X)continue e}var se=u(W,B);if(se!==void 0)return se}}}}(r,n,a,c,h,f,b,v,g,y,p)}}s.partial=t(!1),s.full=t(!0)},2337:function(d,s,t){d.exports=function(L,C,P,I,U,z,H,F,N){(function(Ie,Ce){var Re=8*r.log2(Ce+1)*(Ie+1)|0,le=r.nextPow2(6*Re);w.length<le&&(o.free(w),w=o.mallocInt32(le));var de=r.nextPow2(2*Re);u.length<de&&(o.free(u),u=o.mallocDouble(de))})(L,I+H);var B,j=0,K=2*L;for(S(j++,0,0,I,0,H,P?16:0,-1/0,1/0),P||S(j++,0,0,H,0,I,1,-1/0,1/0);j>0;){var G=6*(j-=1),V=w[G],W=w[G+1],J=w[G+2],X=w[G+3],ee=w[G+4],re=w[G+5],ie=2*j,se=u[ie],fe=u[ie+1],ye=1&re,ge=!!(16&re),he=U,ve=z,Oe=F,xe=N;if(ye&&(he=F,ve=N,Oe=U,xe=z),!(2&re&&(J=g(L,V,W,J,he,ve,fe),W>=J)||4&re&&(W=y(L,V,W,J,he,ve,se))>=J)){var ke=J-W,Me=ee-X;if(ge){if(L*ke*(ke+Me)<4194304){if((B=c.scanComplete(L,V,C,W,J,he,ve,X,ee,Oe,xe))!==void 0)return B;continue}}else{if(L*Math.min(ke,Me)<128){if((B=a(L,V,C,ye,W,J,he,ve,X,ee,Oe,xe))!==void 0)return B;continue}if(L*ke*Me<4194304){if((B=c.scanBipartite(L,V,C,ye,W,J,he,ve,X,ee,Oe,xe))!==void 0)return B;continue}}var Te=b(L,V,W,J,he,ve,se,fe);if(W<Te)if(L*(Te-W)<128){if((B=i(L,V+1,C,W,Te,he,ve,X,ee,Oe,xe))!==void 0)return B}else if(V===L-2){if((B=ye?c.sweepBipartite(L,C,X,ee,Oe,xe,W,Te,he,ve):c.sweepBipartite(L,C,W,Te,he,ve,X,ee,Oe,xe))!==void 0)return B}else S(j++,V+1,W,Te,X,ee,ye,-1/0,1/0),S(j++,V+1,X,ee,W,Te,1^ye,-1/0,1/0);if(Te<J){var Q=h(L,V,X,ee,Oe,xe),oe=Oe[K*Q+V],ce=v(L,V,Q,ee,Oe,xe,oe);if(ce<ee&&S(j++,V,Te,J,ce,ee,(4|ye)+(ge?16:0),oe,fe),X<Q&&S(j++,V,Te,J,X,Q,(2|ye)+(ge?16:0),se,oe),Q+1===ce){if((B=ge?E(L,V,C,Te,J,he,ve,Q,Oe,xe[Q]):_(L,V,C,ye,Te,J,he,ve,Q,Oe,xe[Q]))!==void 0)return B}else if(Q<ce){var me;if(ge){if(Te<(me=p(L,V,Te,J,he,ve,oe))){var Ae=v(L,V,Te,me,he,ve,oe);if(V===L-2){if(Te<Ae&&(B=c.sweepComplete(L,C,Te,Ae,he,ve,Q,ce,Oe,xe))!==void 0||Ae<me&&(B=c.sweepBipartite(L,C,Ae,me,he,ve,Q,ce,Oe,xe))!==void 0)return B}else Te<Ae&&S(j++,V+1,Te,Ae,Q,ce,16,-1/0,1/0),Ae<me&&(S(j++,V+1,Ae,me,Q,ce,0,-1/0,1/0),S(j++,V+1,Q,ce,Ae,me,1,-1/0,1/0))}}else Te<(me=ye?m(L,V,Te,J,he,ve,oe):p(L,V,Te,J,he,ve,oe))&&(V===L-2?B=ye?c.sweepBipartite(L,C,Q,ce,Oe,xe,Te,me,he,ve):c.sweepBipartite(L,C,Te,me,he,ve,Q,ce,Oe,xe):(S(j++,V+1,Te,me,Q,ce,ye,-1/0,1/0),S(j++,V+1,Q,ce,Te,me,1^ye,-1/0,1/0)))}}}}};var o=t(5306),r=t(2288),n=t(7333),a=n.partial,i=n.full,c=t(1390),h=t(2464),f=t(122),b=f("!(lo>=p0)&&!(p1>=hi)"),v=f("lo===p0"),g=f("lo<p0"),y=f("hi<=p0"),p=f("lo<=p0&&p0<=hi"),m=f("lo<p0&&p0<=hi"),w=o.mallocInt32(1024),u=o.mallocDouble(1024);function S(L,C,P,I,U,z,H,F,N){var B=6*L;w[B]=C,w[B+1]=P,w[B+2]=I,w[B+3]=U,w[B+4]=z,w[B+5]=H;var j=2*L;u[j]=F,u[j+1]=N}function _(L,C,P,I,U,z,H,F,N,B,j){var K=2*L,G=N*K,V=B[G+C];e:for(var W=U,J=U*K;W<z;++W,J+=K){var X=H[J+C],ee=H[J+C+L];if(!(V<X||ee<V||I&&V===X)){for(var re,ie=F[W],se=C+1;se<L;++se){X=H[J+se],ee=H[J+se+L];var fe=B[G+se],ye=B[G+se+L];if(ee<fe||ye<X)continue e}if((re=I?P(j,ie):P(ie,j))!==void 0)return re}}}function E(L,C,P,I,U,z,H,F,N,B){var j=2*L,K=F*j,G=N[K+C];e:for(var V=I,W=I*j;V<U;++V,W+=j){var J=H[V];if(J!==B){var X=z[W+C],ee=z[W+C+L];if(!(G<X||ee<G)){for(var re=C+1;re<L;++re){X=z[W+re],ee=z[W+re+L];var ie=N[K+re],se=N[K+re+L];if(ee<ie||se<X)continue e}var fe=P(J,B);if(fe!==void 0)return fe}}}}},2464:function(d,s,t){d.exports=function(n,a,i,c,h,f){if(c<=i+1)return i;for(var b=i,v=c,g=c+i>>>1,y=2*n,p=g,m=h[y*g+a];b<v;){if(v-b<8){r(n,a,b,v,h,f),m=h[y*g+a];break}var w=v-b,u=Math.random()*w+b|0,S=h[y*u+a],_=Math.random()*w+b|0,E=h[y*_+a],L=Math.random()*w+b|0,C=h[y*L+a];S<=E?C>=E?(p=_,m=E):S>=C?(p=u,m=S):(p=L,m=C):E>=C?(p=_,m=E):C>=S?(p=u,m=S):(p=L,m=C);for(var P=y*(v-1),I=y*p,U=0;U<y;++U,++P,++I){var z=h[P];h[P]=h[I],h[I]=z}var H=f[v-1];for(f[v-1]=f[p],f[p]=H,P=y*(v-1),I=y*(p=o(n,a,b,v-1,h,f,m)),U=0;U<y;++U,++P,++I)z=h[P],h[P]=h[I],h[I]=z;if(H=f[v-1],f[v-1]=f[p],f[p]=H,g<p){for(v=p-1;b<v&&h[y*(v-1)+a]===m;)v-=1;v+=1}else{if(!(p<g))break;for(b=p+1;b<v&&h[y*b+a]===m;)b+=1}}return o(n,a,i,g,h,f,h[y*g+a])};var o=t(122)("lo<p0");function r(n,a,i,c,h,f){for(var b=2*n,v=b*(i+1)+a,g=i+1;g<c;++g,v+=b)for(var y=h[v],p=g,m=b*(g-1);p>i&&h[m+a]>y;--p,m-=b){for(var w=m,u=m+b,S=0;S<b;++S,++w,++u){var _=h[w];h[w]=h[u],h[u]=_}var E=f[p];f[p]=f[p-1],f[p-1]=E}}},122:function(d){d.exports=function(t){return s[t]};var s={"lo===p0":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,b=f,v=r,g=o,y=r;n>y;++y,f+=h)if(a[f+g]===c)if(v===y)v+=1,b+=h;else{for(var p=0;h>p;++p){var m=a[f+p];a[f+p]=a[b],a[b++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"lo<p0":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,b=f,v=r,g=o,y=r;n>y;++y,f+=h)if(a[f+g]<c)if(v===y)v+=1,b+=h;else{for(var p=0;h>p;++p){var m=a[f+p];a[f+p]=a[b],a[b++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"lo<=p0":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,b=f,v=r,g=t+o,y=r;n>y;++y,f+=h)if(a[f+g]<=c)if(v===y)v+=1,b+=h;else{for(var p=0;h>p;++p){var m=a[f+p];a[f+p]=a[b],a[b++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"hi<=p0":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,b=f,v=r,g=t+o,y=r;n>y;++y,f+=h)if(a[f+g]<=c)if(v===y)v+=1,b+=h;else{for(var p=0;h>p;++p){var m=a[f+p];a[f+p]=a[b],a[b++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"lo<p0&&p0<=hi":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,b=f,v=r,g=o,y=t+o,p=r;n>p;++p,f+=h){var m=a[f+g],w=a[f+y];if(m<c&&c<=w)if(v===p)v+=1,b+=h;else{for(var u=0;h>u;++u){var S=a[f+u];a[f+u]=a[b],a[b++]=S}var _=i[p];i[p]=i[v],i[v++]=_}}return v},"lo<=p0&&p0<=hi":function(t,o,r,n,a,i,c){for(var h=2*t,f=h*r,b=f,v=r,g=o,y=t+o,p=r;n>p;++p,f+=h){var m=a[f+g],w=a[f+y];if(m<=c&&c<=w)if(v===p)v+=1,b+=h;else{for(var u=0;h>u;++u){var S=a[f+u];a[f+u]=a[b],a[b++]=S}var _=i[p];i[p]=i[v],i[v++]=_}}return v},"!(lo>=p0)&&!(p1>=hi)":function(t,o,r,n,a,i,c,h){for(var f=2*t,b=f*r,v=b,g=r,y=o,p=t+o,m=r;n>m;++m,b+=f){var w=a[b+y],u=a[b+p];if(!(w>=c||h>=u))if(g===m)g+=1,v+=f;else{for(var S=0;f>S;++S){var _=a[b+S];a[b+S]=a[v],a[v++]=_}var E=i[m];i[m]=i[g],i[g++]=E}}return g}}},309:function(d){function s(h,f,b){for(var v=2*(h+1),g=h+1;g<=f;++g){for(var y=b[v++],p=b[v++],m=g,w=v-2;m-- >h;){var u=b[w-2],S=b[w-1];if(u<y||u===y&&S<p)break;b[w]=u,b[w+1]=S,w-=2}b[w]=y,b[w+1]=p}}function t(h,f,b){f*=2;var v=b[h*=2],g=b[h+1];b[h]=b[f],b[h+1]=b[f+1],b[f]=v,b[f+1]=g}function o(h,f,b){f*=2,b[h*=2]=b[f],b[h+1]=b[f+1]}function r(h,f,b,v){f*=2,b*=2;var g=v[h*=2],y=v[h+1];v[h]=v[f],v[h+1]=v[f+1],v[f]=v[b],v[f+1]=v[b+1],v[b]=g,v[b+1]=y}function n(h,f,b,v,g){f*=2,g[h*=2]=g[f],g[f]=b,g[h+1]=g[f+1],g[f+1]=v}function a(h,f,b){f*=2;var v=b[h*=2],g=b[f];return!(v<g)&&(v!==g||b[h+1]>b[f+1])}function i(h,f,b,v){var g=v[h*=2];return g<f||g===f&&v[h+1]<b}function c(h,f,b){var v=(f-h+1)/6|0,g=h+v,y=f-v,p=h+f>>1,m=p-v,w=p+v,u=g,S=m,_=p,E=w,L=y,C=h+1,P=f-1,I=0;a(u,S,b)&&(I=u,u=S,S=I),a(E,L,b)&&(I=E,E=L,L=I),a(u,_,b)&&(I=u,u=_,_=I),a(S,_,b)&&(I=S,S=_,_=I),a(u,E,b)&&(I=u,u=E,E=I),a(_,E,b)&&(I=_,_=E,E=I),a(S,L,b)&&(I=S,S=L,L=I),a(S,_,b)&&(I=S,S=_,_=I),a(E,L,b)&&(I=E,E=L,L=I);for(var U=b[2*S],z=b[2*S+1],H=b[2*E],F=b[2*E+1],N=2*u,B=2*_,j=2*L,K=2*g,G=2*p,V=2*y,W=0;W<2;++W){var J=b[N+W],X=b[B+W],ee=b[j+W];b[K+W]=J,b[G+W]=X,b[V+W]=ee}o(m,h,b),o(w,f,b);for(var re=C;re<=P;++re)if(i(re,U,z,b))re!==C&&t(re,C,b),++C;else if(!i(re,H,F,b))for(;;){if(i(P,H,F,b)){i(P,U,z,b)?(r(re,C,P,b),++C,--P):(t(re,P,b),--P);break}if(--P<re)break}n(h,C-1,U,z,b),n(f,P+1,H,F,b),C-2-h<=32?s(h,C-2,b):c(h,C-2,b),f-(P+2)<=32?s(P+2,f,b):c(P+2,f,b),P-C<=32?s(C,P,b):c(C,P,b)}d.exports=function(h,f){f<=128?s(0,f-1,h):c(0,f-1,h)}},1390:function(d,s,t){d.exports={init:function(w){var u=r.nextPow2(w);c.length<u&&(o.free(c),c=o.mallocInt32(u)),h.length<u&&(o.free(h),h=o.mallocInt32(u)),f.length<u&&(o.free(f),f=o.mallocInt32(u)),b.length<u&&(o.free(b),b=o.mallocInt32(u)),v.length<u&&(o.free(v),v=o.mallocInt32(u)),g.length<u&&(o.free(g),g=o.mallocInt32(u));var S=8*u;y.length<S&&(o.free(y),y=o.mallocDouble(S))},sweepBipartite:function(w,u,S,_,E,L,C,P,I,U){for(var z=0,H=2*w,F=w-1,N=H-1,B=S;B<_;++B){var j=L[B],K=H*B;y[z++]=E[K+F],y[z++]=-(j+1),y[z++]=E[K+N],y[z++]=j}for(B=C;B<P;++B){j=U[B]+a;var G=H*B;y[z++]=I[G+F],y[z++]=-j,y[z++]=I[G+N],y[z++]=j}var V=z>>>1;n(y,V);var W=0,J=0;for(B=0;B<V;++B){var X=0|y[2*B+1];if(X>=a)p(f,b,J--,X=X-a|0);else if(X>=0)p(c,h,W--,X);else if(X<=-268435456){X=-X-a|0;for(var ee=0;ee<W;++ee)if((re=u(c[ee],X))!==void 0)return re;m(f,b,J++,X)}else{for(X=-X-1|0,ee=0;ee<J;++ee){var re;if((re=u(X,f[ee]))!==void 0)return re}m(c,h,W++,X)}}},sweepComplete:function(w,u,S,_,E,L,C,P,I,U){for(var z=0,H=2*w,F=w-1,N=H-1,B=S;B<_;++B){var j=L[B]+1<<1,K=H*B;y[z++]=E[K+F],y[z++]=-j,y[z++]=E[K+N],y[z++]=j}for(B=C;B<P;++B){j=U[B]+1<<1;var G=H*B;y[z++]=I[G+F],y[z++]=1|-j,y[z++]=I[G+N],y[z++]=1|j}var V=z>>>1;n(y,V);var W=0,J=0,X=0;for(B=0;B<V;++B){var ee=0|y[2*B+1],re=1&ee;if(B<V-1&&ee>>1==y[2*B+3]>>1&&(re=2,B+=1),ee<0){for(var ie=-(ee>>1)-1,se=0;se<X;++se)if((fe=u(v[se],ie))!==void 0)return fe;if(re!==0){for(se=0;se<W;++se)if((fe=u(c[se],ie))!==void 0)return fe}if(re!==1)for(se=0;se<J;++se){var fe;if((fe=u(f[se],ie))!==void 0)return fe}re===0?m(c,h,W++,ie):re===1?m(f,b,J++,ie):re===2&&m(v,g,X++,ie)}else ie=(ee>>1)-1,re===0?p(c,h,W--,ie):re===1?p(f,b,J--,ie):re===2&&p(v,g,X--,ie)}},scanBipartite:function(w,u,S,_,E,L,C,P,I,U,z,H){var F=0,N=2*w,B=u,j=u+w,K=1,G=1;_?G=a:K=a;for(var V=E;V<L;++V){var W=V+K,J=N*V;y[F++]=C[J+B],y[F++]=-W,y[F++]=C[J+j],y[F++]=W}for(V=I;V<U;++V){W=V+G;var X=N*V;y[F++]=z[X+B],y[F++]=-W}var ee=F>>>1;n(y,ee);var re=0;for(V=0;V<ee;++V){var ie=0|y[2*V+1];if(ie<0){var se=!1;if((W=-ie)>=a?(se=!_,W-=a):(se=!!_,W-=1),se)m(c,h,re++,W);else{var fe=H[W],ye=N*W,ge=z[ye+u+1],he=z[ye+u+1+w];e:for(var ve=0;ve<re;++ve){var Oe=c[ve],xe=N*Oe;if(!(he<C[xe+u+1]||C[xe+u+1+w]<ge)){for(var ke=u+2;ke<w;++ke)if(z[ye+ke+w]<C[xe+ke]||C[xe+ke+w]<z[ye+ke])continue e;var Me,Te=P[Oe];if((Me=_?S(fe,Te):S(Te,fe))!==void 0)return Me}}}}else p(c,h,re--,ie-K)}},scanComplete:function(w,u,S,_,E,L,C,P,I,U,z){for(var H=0,F=2*w,N=u,B=u+w,j=_;j<E;++j){var K=j+a,G=F*j;y[H++]=L[G+N],y[H++]=-K,y[H++]=L[G+B],y[H++]=K}for(j=P;j<I;++j){K=j+1;var V=F*j;y[H++]=U[V+N],y[H++]=-K}var W=H>>>1;n(y,W);var J=0;for(j=0;j<W;++j){var X=0|y[2*j+1];if(X<0)if((K=-X)>=a)c[J++]=K-a;else{var ee=z[K-=1],re=F*K,ie=U[re+u+1],se=U[re+u+1+w];e:for(var fe=0;fe<J;++fe){var ye=c[fe],ge=C[ye];if(ge===ee)break;var he=F*ye;if(!(se<L[he+u+1]||L[he+u+1+w]<ie)){for(var ve=u+2;ve<w;++ve)if(U[re+ve+w]<L[he+ve]||L[he+ve+w]<U[re+ve])continue e;var Oe=S(ge,ee);if(Oe!==void 0)return Oe}}}else{for(K=X-a,fe=J-1;fe>=0;--fe)if(c[fe]===K){for(ve=fe+1;ve<J;++ve)c[ve-1]=c[ve];break}--J}}}};var o=t(5306),r=t(2288),n=t(309),a=1<<28,i=1024,c=o.mallocInt32(i),h=o.mallocInt32(i),f=o.mallocInt32(i),b=o.mallocInt32(i),v=o.mallocInt32(i),g=o.mallocInt32(i),y=o.mallocDouble(8192);function p(w,u,S,_){var E=u[_],L=w[S-1];w[E]=L,u[L]=E}function m(w,u,S,_){w[S]=_,u[_]=S}},7761:function(d,s,t){var o=t(9971),r=t(743),n=t(2161),a=t(7098);function i(f){return[Math.min(f[0],f[1]),Math.max(f[0],f[1])]}function c(f,b){return f[0]-b[0]||f[1]-b[1]}function h(f,b,v){return b in f?f[b]:v}d.exports=function(f,b,v){Array.isArray(b)?(v=v||{},b=b||[]):(v=b||{},b=[]);var g=!!h(v,"delaunay",!0),y=!!h(v,"interior",!0),p=!!h(v,"exterior",!0),m=!!h(v,"infinity",!1);if(!y&&!p||f.length===0)return[];var w=o(f,b);if(g||y!==p||m){for(var u=r(f.length,function(E){return E.map(i).sort(c)}(b)),S=0;S<w.length;++S){var _=w[S];u.addTriangle(_[0],_[1],_[2])}return g&&n(f,u),p?y?m?a(u,0,m):u.cells():a(u,1,m):a(u,-1)}return w}},2161:function(d,s,t){var o=t(2227)[4];function r(n,a,i,c,h,f){var b=a.opposite(c,h);if(!(b<0)){if(h<c){var v=c;c=h,h=v,v=f,f=b,b=v}a.isConstraint(c,h)||o(n[c],n[h],n[f],n[b])<0&&i.push(c,h)}}t(5070),d.exports=function(n,a){for(var i=[],c=n.length,h=a.stars,f=0;f<c;++f)for(var b=h[f],v=1;v<b.length;v+=2)if(!((m=b[v])<f||a.isConstraint(f,m))){for(var g=b[v-1],y=-1,p=1;p<b.length;p+=2)if(b[p-1]===m){y=b[p];break}y<0||o(n[f],n[m],n[g],n[y])<0&&i.push(f,m)}for(;i.length>0;){for(var m=i.pop(),w=(g=-1,y=-1,b=h[f=i.pop()],1);w<b.length;w+=2){var u=b[w-1],S=b[w];u===m?y=S:S===m&&(g=u)}g<0||y<0||o(n[f],n[m],n[g],n[y])>=0||(a.flip(f,m),r(n,a,i,g,f,y),r(n,a,i,f,y,g),r(n,a,i,y,m,g),r(n,a,i,m,g,y))}}},7098:function(d,s,t){var o,r=t(5070);function n(i,c,h,f,b,v,g){this.cells=i,this.neighbor=c,this.flags=f,this.constraint=h,this.active=b,this.next=v,this.boundary=g}function a(i,c){return i[0]-c[0]||i[1]-c[1]||i[2]-c[2]}d.exports=function(i,c,h){var f=function(C,P){for(var I=C.cells(),U=I.length,z=0;z<U;++z){var H=(X=I[z])[0],F=X[1],N=X[2];F<N?F<H&&(X[0]=F,X[1]=N,X[2]=H):N<H&&(X[0]=N,X[1]=H,X[2]=F)}I.sort(a);var B=new Array(U);for(z=0;z<B.length;++z)B[z]=0;var j=[],K=[],G=new Array(3*U),V=new Array(3*U),W=null;P&&(W=[]);var J=new n(I,G,V,B,j,K,W);for(z=0;z<U;++z)for(var X=I[z],ee=0;ee<3;++ee){H=X[ee],F=X[(ee+1)%3];var re=G[3*z+ee]=J.locate(F,H,C.opposite(F,H)),ie=V[3*z+ee]=C.isConstraint(H,F);re<0&&(ie?K.push(z):(j.push(z),B[z]=1),P&&W.push([F,H,-1]))}return J}(i,h);if(c===0)return h?f.cells.concat(f.boundary):f.cells;for(var b=1,v=f.active,g=f.next,y=f.flags,p=f.cells,m=f.constraint,w=f.neighbor;v.length>0||g.length>0;){for(;v.length>0;){var u=v.pop();if(y[u]!==-b){y[u]=b,p[u];for(var S=0;S<3;++S){var _=w[3*u+S];_>=0&&y[_]===0&&(m[3*u+S]?g.push(_):(v.push(_),y[_]=b))}}}var E=g;g=v,v=E,g.length=0,b=-b}var L=function(C,P,I){for(var U=0,z=0;z<C.length;++z)P[z]===I&&(C[U++]=C[z]);return C.length=U,C}(p,y,c);return h?L.concat(f.boundary):L},n.prototype.locate=(o=[0,0,0],function(i,c,h){var f=i,b=c,v=h;return c<h?c<i&&(f=c,b=h,v=i):h<i&&(f=h,b=i,v=c),f<0?-1:(o[0]=f,o[1]=b,o[2]=v,r.eq(this.cells,o,a))})},9971:function(d,s,t){var o=t(5070),r=t(417)[3];function n(g,y,p,m,w){this.a=g,this.b=y,this.idx=p,this.lowerIds=m,this.upperIds=w}function a(g,y,p,m){this.a=g,this.b=y,this.type=p,this.idx=m}function i(g,y){var p=g.a[0]-y.a[0]||g.a[1]-y.a[1]||g.type-y.type;return p||(g.type!==0&&(p=r(g.a,g.b,y.b))?p:g.idx-y.idx)}function c(g,y){return r(g.a,g.b,y)}function h(g,y,p,m,w){for(var u=o.lt(y,m,c),S=o.gt(y,m,c),_=u;_<S;++_){for(var E=y[_],L=E.lowerIds,C=L.length;C>1&&r(p[L[C-2]],p[L[C-1]],m)>0;)g.push([L[C-1],L[C-2],w]),C-=1;L.length=C,L.push(w);var P=E.upperIds;for(C=P.length;C>1&&r(p[P[C-2]],p[P[C-1]],m)<0;)g.push([P[C-2],P[C-1],w]),C-=1;P.length=C,P.push(w)}}function f(g,y){var p;return(p=g.a[0]<y.a[0]?r(g.a,g.b,y.a):r(y.b,y.a,g.a))?p:(p=y.b[0]<g.b[0]?r(g.a,g.b,y.b):r(y.b,y.a,g.b))||g.idx-y.idx}function b(g,y,p){var m=o.le(g,p,f),w=g[m],u=w.upperIds,S=u[u.length-1];w.upperIds=[S],g.splice(m+1,0,new n(p.a,p.b,p.idx,[S],u))}function v(g,y,p){var m=p.a;p.a=p.b,p.b=m;var w=o.eq(g,p,f),u=g[w];g[w-1].upperIds=u.upperIds,g.splice(w,1)}d.exports=function(g,y){for(var p=g.length,m=y.length,w=[],u=0;u<p;++u)w.push(new a(g[u],null,0,u));for(u=0;u<m;++u){var S=y[u],_=g[S[0]],E=g[S[1]];_[0]<E[0]?w.push(new a(_,E,2,u),new a(E,_,1,u)):_[0]>E[0]&&w.push(new a(E,_,2,u),new a(_,E,1,u))}w.sort(i);for(var L=w[0].a[0]-(1+Math.abs(w[0].a[0]))*Math.pow(2,-52),C=[new n([L,1],[L,0],-1,[],[])],P=[],I=(u=0,w.length);u<I;++u){var U=w[u],z=U.type;z===0?h(P,C,g,U.a,U.idx):z===2?b(C,0,U):v(C,0,U)}return P}},743:function(d,s,t){var o=t(5070);function r(i,c){this.stars=i,this.edges=c}d.exports=function(i,c){for(var h=new Array(i),f=0;f<i;++f)h[f]=[];return new r(h,c)};var n=r.prototype;function a(i,c,h){for(var f=1,b=i.length;f<b;f+=2)if(i[f-1]===c&&i[f]===h)return i[f-1]=i[b-2],i[f]=i[b-1],void(i.length=b-2)}n.isConstraint=function(){var i=[0,0];function c(h,f){return h[0]-f[0]||h[1]-f[1]}return function(h,f){return i[0]=Math.min(h,f),i[1]=Math.max(h,f),o.eq(this.edges,i,c)>=0}}(),n.removeTriangle=function(i,c,h){var f=this.stars;a(f[i],c,h),a(f[c],h,i),a(f[h],i,c)},n.addTriangle=function(i,c,h){var f=this.stars;f[i].push(c,h),f[c].push(h,i),f[h].push(i,c)},n.opposite=function(i,c){for(var h=this.stars[c],f=1,b=h.length;f<b;f+=2)if(h[f]===i)return h[f-1];return-1},n.flip=function(i,c){var h=this.opposite(i,c),f=this.opposite(c,i);this.removeTriangle(i,c,h),this.removeTriangle(c,i,f),this.addTriangle(i,f,h),this.addTriangle(c,h,f)},n.edges=function(){for(var i=this.stars,c=[],h=0,f=i.length;h<f;++h)for(var b=i[h],v=0,g=b.length;v<g;v+=2)c.push([b[v],b[v+1]]);return c},n.cells=function(){for(var i=this.stars,c=[],h=0,f=i.length;h<f;++h)for(var b=i[h],v=0,g=b.length;v<g;v+=2){var y=b[v],p=b[v+1];h<Math.min(y,p)&&c.push([h,y,p])}return c}},9887:function(d){d.exports=function(s){for(var t=1,o=1;o<s.length;++o)for(var r=0;r<o;++r)if(s[o]<s[r])t=-t;else if(s[r]===s[o])return 0;return t}},9243:function(d,s,t){var o=t(3094),r=t(6606);function n(c,h){for(var f=0,b=c.length,v=0;v<b;++v)f+=c[v]*h[v];return f}function a(c){var h=c.length;if(h===0)return[];c[0].length;var f=o([c.length+1,c.length+1],1),b=o([c.length+1],1);f[h][h]=0;for(var v=0;v<h;++v){for(var g=0;g<=v;++g)f[g][v]=f[v][g]=2*n(c[v],c[g]);b[v]=n(c[v],c[v])}var y=r(f,b),p=0,m=y[h+1];for(v=0;v<m.length;++v)p+=m[v];var w=new Array(h);for(v=0;v<h;++v){m=y[v];var u=0;for(g=0;g<m.length;++g)u+=m[g];w[v]=u/p}return w}function i(c){if(c.length===0)return[];for(var h=c[0].length,f=o([h]),b=a(c),v=0;v<c.length;++v)for(var g=0;g<h;++g)f[g]+=c[v][g]*b[v];return f}i.barycenetric=a,d.exports=i},1778:function(d,s,t){d.exports=function(r){for(var n=o(r),a=0,i=0;i<r.length;++i)for(var c=r[i],h=0;h<n.length;++h)a+=Math.pow(c[h]-n[h],2);return Math.sqrt(a/r.length)};var o=t(9243)},197:function(d,s,t){d.exports=function(S,_,E){var L;if(E){L=_;for(var C=new Array(_.length),P=0;P<_.length;++P){var I=_[P];C[P]=[I[0],I[1],E[P]]}_=C}for(var U=function(z,H,F){var N=y(z,[],g(z));return w(H,N,F),!!N}(S,_,!!E);u(S,_,!!E);)U=!0;if(E&&U)for(L.length=0,E.length=0,P=0;P<_.length;++P)I=_[P],L.push([I[0],I[1]]),E.push(I[2]);return U};var o=t(1731),r=t(2569),n=t(4434),a=t(5125),i=t(8846),c=t(7999),h=t(2826),f=t(8551),b=t(5528);function v(S){var _=c(S);return[f(_,-1/0),f(_,1/0)]}function g(S){for(var _=new Array(S.length),E=0;E<S.length;++E){var L=S[E];_[E]=[f(L[0],-1/0),f(L[1],-1/0),f(L[0],1/0),f(L[1],1/0)]}return _}function y(S,_,E){for(var L=_.length,C=new o(L),P=[],I=0;I<_.length;++I){var U=_[I],z=v(U[0]),H=v(U[1]);P.push([f(z[0],-1/0),f(H[0],-1/0),f(z[1],1/0),f(H[1],1/0)])}r(P,function(K,G){C.link(K,G)});var F=!0,N=new Array(L);for(I=0;I<L;++I)(j=C.find(I))!==I&&(F=!1,S[j]=[Math.min(S[I][0],S[j][0]),Math.min(S[I][1],S[j][1])]);if(F)return null;var B=0;for(I=0;I<L;++I){var j;(j=C.find(I))===I?(N[I]=B,S[B++]=S[I]):N[I]=-1}for(S.length=B,I=0;I<L;++I)N[I]<0&&(N[I]=N[C.find(I)]);return N}function p(S,_){return S[0]-_[0]||S[1]-_[1]}function m(S,_){return S[0]-_[0]||S[1]-_[1]||(S[2]<_[2]?-1:S[2]>_[2]?1:0)}function w(S,_,E){if(S.length!==0){if(_)for(var L=0;L<S.length;++L){var C=_[(I=S[L])[0]],P=_[I[1]];I[0]=Math.min(C,P),I[1]=Math.max(C,P)}else for(L=0;L<S.length;++L){var I;C=(I=S[L])[0],P=I[1],I[0]=Math.min(C,P),I[1]=Math.max(C,P)}E?S.sort(m):S.sort(p);var U=1;for(L=1;L<S.length;++L){var z=S[L-1],H=S[L];(H[0]!==z[0]||H[1]!==z[1]||E&&H[2]!==z[2])&&(S[U++]=H)}S.length=U}}function u(S,_,E){var L=function(z,H){for(var F=new Array(H.length),N=0;N<H.length;++N){var B=H[N],j=z[B[0]],K=z[B[1]];F[N]=[f(Math.min(j[0],K[0]),-1/0),f(Math.min(j[1],K[1]),-1/0),f(Math.max(j[0],K[0]),1/0),f(Math.max(j[1],K[1]),1/0)]}return F}(S,_),C=function(z,H,F){var N=[];return r(F,function(B,j){var K=H[B],G=H[j];if(K[0]!==G[0]&&K[0]!==G[1]&&K[1]!==G[0]&&K[1]!==G[1]){var V=z[K[0]],W=z[K[1]],J=z[G[0]],X=z[G[1]];n(V,W,J,X)&&N.push([B,j])}}),N}(S,_,L),P=function(z,H,F,N){var B=[];return r(F,N,function(j,K){var G=H[j];if(G[0]!==K&&G[1]!==K){var V=z[K],W=z[G[0]],J=z[G[1]];n(W,J,V,V)&&B.push([j,K])}}),B}(S,_,L,g(S)),I=function(z,H,F,N,B){var j,K,G=z.map(function(Me){return[a(Me[0]),a(Me[1])]});for(j=0;j<F.length;++j){var V=F[j];K=V[0];var W=V[1],J=H[K],X=H[W],ee=b(h(z[J[0]]),h(z[J[1]]),h(z[X[0]]),h(z[X[1]]));if(ee){var re=z.length;z.push([c(ee[0]),c(ee[1])]),G.push(ee),N.push([K,re],[W,re])}}for(N.sort(function(Me,Te){if(Me[0]!==Te[0])return Me[0]-Te[0];var Q=G[Me[1]],oe=G[Te[1]];return i(Q[0],oe[0])||i(Q[1],oe[1])}),j=N.length-1;j>=0;--j){var ie=H[K=(xe=N[j])[0]],se=ie[0],fe=ie[1],ye=z[se],ge=z[fe];if((ye[0]-ge[0]||ye[1]-ge[1])<0){var he=se;se=fe,fe=he}ie[0]=se;var ve,Oe=ie[1]=xe[1];for(B&&(ve=ie[2]);j>0&&N[j-1][0]===K;){var xe,ke=(xe=N[--j])[1];B?H.push([Oe,ke,ve]):H.push([Oe,ke]),Oe=ke}B?H.push([Oe,fe,ve]):H.push([Oe,fe])}return G}(S,_,C,P,E),U=y(S,I);return w(_,U,E),!!U||C.length>0||P.length>0}},5528:function(d,s,t){d.exports=function(b,v,g,y){var p=i(v,b),m=i(y,g),w=f(p,m);if(a(w)===0)return null;var u=f(m,i(b,g)),S=r(u,w),_=h(p,S);return c(b,_)};var o=t(3962),r=t(9189),n=t(4354),a=t(4951),i=t(6695),c=t(7584),h=t(4469);function f(b,v){return n(o(b[0],v[1]),o(b[1],v[0]))}},5692:function(d){d.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(d,s,t){var o=t(5692),r=t(3578);function n(c){return[c[0]/255,c[1]/255,c[2]/255,c[3]]}function a(c){for(var h,f="#",b=0;b<3;++b)f+=("00"+(h=(h=c[b]).toString(16))).substr(h.length);return f}function i(c){return"rgba("+c.join(",")+")"}d.exports=function(c){var h,f,b,v,g,y,p,m,w,u;if(c||(c={}),m=(c.nshades||72)-1,p=c.format||"hex",(y=c.colormap)||(y="jet"),typeof y=="string"){if(y=y.toLowerCase(),!o[y])throw Error(y+" not a supported colorscale");g=o[y]}else{if(!Array.isArray(y))throw Error("unsupported colormap option",y);g=y.slice()}if(g.length>m+1)throw new Error(y+" map requires nshades to be at least size "+g.length);w=Array.isArray(c.alpha)?c.alpha.length!==2?[1,1]:c.alpha.slice():typeof c.alpha=="number"?[c.alpha,c.alpha]:[1,1],h=g.map(function(C){return Math.round(C.index*m)}),w[0]=Math.min(Math.max(w[0],0),1),w[1]=Math.min(Math.max(w[1],0),1);var S=g.map(function(C,P){var I=g[P].index,U=g[P].rgb.slice();return U.length===4&&U[3]>=0&&U[3]<=1||(U[3]=w[0]+(w[1]-w[0])*I),U}),_=[];for(u=0;u<h.length-1;++u){v=h[u+1]-h[u],f=S[u],b=S[u+1];for(var E=0;E<v;E++){var L=E/v;_.push([Math.round(r(f[0],b[0],L)),Math.round(r(f[1],b[1],L)),Math.round(r(f[2],b[2],L)),r(f[3],b[3],L)])}}return _.push(g[g.length-1].rgb.concat(w[1])),p==="hex"?_=_.map(a):p==="rgbaString"?_=_.map(i):p==="float"&&(_=_.map(n)),_}},9398:function(d,s,t){d.exports=function(h,f,b,v){var g=o(f,b,v);if(g===0){var y=r(o(h,f,b)),p=r(o(h,f,v));if(y===p){if(y===0){var m=c(h,f,b);return m===c(h,f,v)?0:m?1:-1}return 0}return p===0?y>0||c(h,f,v)?-1:1:y===0?p>0||c(h,f,b)?1:-1:r(p-y)}var w=o(h,f,b);return w>0?g>0&&o(h,f,v)>0?1:-1:w<0?g>0||o(h,f,v)>0?1:-1:o(h,f,v)>0||c(h,f,b)?1:-1};var o=t(417),r=t(7538),n=t(87),a=t(2019),i=t(9662);function c(h,f,b){var v=n(h[0],-f[0]),g=n(h[1],-f[1]),y=n(b[0],-f[0]),p=n(b[1],-f[1]),m=i(a(v,y),a(g,p));return m[m.length-1]>=0}},7538:function(d){d.exports=function(s){return s<0?-1:s>0?1:0}},9209:function(d){d.exports=function(o,r){var n=o.length,a=o.length-r.length;if(a)return a;switch(n){case 0:return 0;case 1:return o[0]-r[0];case 2:return o[0]+o[1]-r[0]-r[1]||s(o[0],o[1])-s(r[0],r[1]);case 3:var i=o[0]+o[1],c=r[0]+r[1];if(a=i+o[2]-(c+r[2]))return a;var h=s(o[0],o[1]),f=s(r[0],r[1]);return s(h,o[2])-s(f,r[2])||s(h+o[2],i)-s(f+r[2],c);case 4:var b=o[0],v=o[1],g=o[2],y=o[3],p=r[0],m=r[1],w=r[2],u=r[3];return b+v+g+y-(p+m+w+u)||s(b,v,g,y)-s(p,m,w,u,p)||s(b+v,b+g,b+y,v+g,v+y,g+y)-s(p+m,p+w,p+u,m+w,m+u,w+u)||s(b+v+g,b+v+y,b+g+y,v+g+y)-s(p+m+w,p+m+u,p+w+u,m+w+u);default:for(var S=o.slice().sort(t),_=r.slice().sort(t),E=0;E<n;++E)if(a=S[E]-_[E])return a;return 0}};var s=Math.min;function t(o,r){return o-r}},1284:function(d,s,t){var o=t(9209),r=t(9887);d.exports=function(n,a){return o(n,a)||r(n)-r(a)}},5537:function(d,s,t){var o=t(8950),r=t(8722),n=t(3332);d.exports=function(a){var i=a.length;if(i===0)return[];if(i===1)return[[0]];var c=a[0].length;return c===0?[]:c===1?o(a):c===2?r(a):n(a,c)}},8950:function(d){d.exports=function(s){for(var t=0,o=0,r=1;r<s.length;++r)s[r][0]<s[t][0]&&(t=r),s[r][0]>s[o][0]&&(o=r);return t<o?[[t],[o]]:t>o?[[o],[t]]:[[t]]}},8722:function(d,s,t){d.exports=function(r){var n=o(r),a=n.length;if(a<=2)return[];for(var i=new Array(a),c=n[a-1],h=0;h<a;++h){var f=n[h];i[h]=[c,f],c=f}return i};var o=t(3266)},3332:function(d,s,t){d.exports=function(n,a){try{return o(n,!0)}catch{var i=r(n);if(i.length<=a)return[];var c=function(f,b){for(var v=f.length,g=new Array(v),y=0;y<b.length;++y)g[y]=f[b[y]];var p=b.length;for(y=0;y<v;++y)b.indexOf(y)<0&&(g[p++]=f[y]);return g}(n,i);return function(f,b){for(var v=f.length,g=b.length,y=0;y<v;++y)for(var p=f[y],m=0;m<p.length;++m){var w=p[m];if(w<g)p[m]=b[w];else{w-=g;for(var u=0;u<g;++u)w>=b[u]&&(w+=1);p[m]=w}}return f}(o(c,!0),i)}};var o=t(2183),r=t(2153)},9680:function(d){d.exports=function(s,t,o,r,n,a){var i=n-1,c=n*n,h=i*i,f=(1+2*n)*h,b=n*h,v=c*(3-2*n),g=c*i;if(s.length){a||(a=new Array(s.length));for(var y=s.length-1;y>=0;--y)a[y]=f*s[y]+b*t[y]+v*o[y]+g*r[y];return a}return f*s+b*t+v*o+g*r},d.exports.derivative=function(s,t,o,r,n,a){var i=6*n*n-6*n,c=3*n*n-4*n+1,h=-6*n*n+6*n,f=3*n*n-2*n;if(s.length){a||(a=new Array(s.length));for(var b=s.length-1;b>=0;--b)a[b]=i*s[b]+c*t[b]+h*o[b]+f*r[b];return a}return i*s+c*t+h*o[b]+f*r}},4419:function(d,s,t){var o=t(2183),r=t(1215);function n(i,c){this.point=i,this.index=c}function a(i,c){for(var h=i.point,f=c.point,b=h.length,v=0;v<b;++v){var g=f[v]-h[v];if(g)return g}return 0}d.exports=function(i,c){var h=i.length;if(h===0)return[];var f=i[0].length;if(f<1)return[];if(f===1)return function(I,U,z){if(I===1)return z?[[-1,0]]:[];var H=U.map(function(K,G){return[K[0],G]});H.sort(function(K,G){return K[0]-G[0]});for(var F=new Array(I-1),N=1;N<I;++N){var B=H[N-1],j=H[N];F[N-1]=[B[1],j[1]]}return z&&F.push([-1,F[0][1]],[F[I-1][1],-1]),F}(h,i,c);for(var b=new Array(h),v=1,g=0;g<h;++g){for(var y=i[g],p=new Array(f+1),m=0,w=0;w<f;++w){var u=y[w];p[w]=u,m+=u*u}p[f]=m,b[g]=new n(p,g),v=Math.max(m,v)}r(b,a),h=b.length;var S=new Array(h+f+1),_=new Array(h+f+1),E=(f+1)*(f+1)*v,L=new Array(f+1);for(g=0;g<=f;++g)L[g]=0;for(L[f]=E,S[0]=L.slice(),_[0]=-1,g=0;g<=f;++g)(p=L.slice())[g]=1,S[g+1]=p,_[g+1]=-1;for(g=0;g<h;++g){var C=b[g];S[g+f+1]=C.point,_[g+f+1]=C.index}var P=o(S,!1);if(P=c?P.filter(function(I){for(var U=0,z=0;z<=f;++z){var H=_[I[z]];if(H<0&&++U>=2)return!1;I[z]=H}return!0}):P.filter(function(I){for(var U=0;U<=f;++U){var z=_[I[U]];if(z<0)return!1;I[U]=z}return!0}),1&f)for(g=0;g<P.length;++g)p=(C=P[g])[0],C[0]=C[1],C[1]=p;return P}},8362:function(d){var s=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),o=new Uint32Array(t.buffer);t[0]=1,s=!0,o[1]===1072693248?(d.exports=function(n){return t[0]=n,[o[0],o[1]]},d.exports.pack=function(n,a){return o[0]=n,o[1]=a,t[0]},d.exports.lo=function(n){return t[0]=n,o[0]},d.exports.hi=function(n){return t[0]=n,o[1]}):o[0]===1072693248?(d.exports=function(n){return t[0]=n,[o[1],o[0]]},d.exports.pack=function(n,a){return o[1]=n,o[0]=a,t[0]},d.exports.lo=function(n){return t[0]=n,o[1]},d.exports.hi=function(n){return t[0]=n,o[0]}):s=!1}if(!s){var r=new Buffer(8);d.exports=function(n){return r.writeDoubleLE(n,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},d.exports.pack=function(n,a){return r.writeUInt32LE(n,0,!0),r.writeUInt32LE(a,4,!0),r.readDoubleLE(0,!0)},d.exports.lo=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(0,!0)},d.exports.hi=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(4,!0)}}d.exports.sign=function(n){return d.exports.hi(n)>>>31},d.exports.exponent=function(n){return(d.exports.hi(n)<<1>>>21)-1023},d.exports.fraction=function(n){var a=d.exports.lo(n),i=d.exports.hi(n),c=1048575&i;return 2146435072&i&&(c+=1048576),[a,c]},d.exports.denormalized=function(n){return!(2146435072&d.exports.hi(n))}},3094:function(d){function s(t,o,r){var n=0|t[r];if(n<=0)return[];var a,i=new Array(n);if(r===t.length-1)for(a=0;a<n;++a)i[a]=o;else for(a=0;a<n;++a)i[a]=s(t,o,r+1);return i}d.exports=function(t,o){switch(o===void 0&&(o=0),typeof t){case"number":if(t>0)return function(r,n){var a,i;for(a=new Array(r),i=0;i<r;++i)a[i]=n;return a}(0|t,o);break;case"object":if(typeof t.length=="number")return s(t,o,0)}return[]}},8348:function(d,s,t){d.exports=function(r,n){var a=r.length;if(typeof n!="number"){n=0;for(var i=0;i<a;++i){var c=r[i];n=Math.max(n,c[0],c[1])}n=1+(0|n)}n|=0;var h=new Array(n);for(i=0;i<n;++i)h[i]=[];for(i=0;i<a;++i)h[(c=r[i])[0]].push(c[1]),h[c[1]].push(c[0]);for(var f=0;f<n;++f)o(h[f],function(b,v){return b-v});return h};var o=t(1215)},5795:function(d){d.exports=function(s,t,o){var r=t||0,n=o||1;return[[s[12]+s[0],s[13]+s[1],s[14]+s[2],s[15]+s[3]],[s[12]-s[0],s[13]-s[1],s[14]-s[2],s[15]-s[3]],[s[12]+s[4],s[13]+s[5],s[14]+s[6],s[15]+s[7]],[s[12]-s[4],s[13]-s[5],s[14]-s[6],s[15]-s[7]],[r*s[12]+s[8],r*s[13]+s[9],r*s[14]+s[10],r*s[15]+s[11]],[n*s[12]-s[8],n*s[13]-s[9],n*s[14]-s[10],n*s[15]-s[11]]]}},8444:function(d,s,t){d.exports=function(h,f,b){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return typeof h=="number"?new a(v=c(h),v,0):new a(h,c(h.length),0);case 2:if(typeof f=="number"){var v=c(h.length);return new a(h,v,+f)}b=0;case 3:if(h.length!==f.length)throw new Error("state and velocity lengths must match");return new a(h,f,b)}};var o=t(9680),r=t(5070);function n(h,f,b){return Math.min(f,Math.max(h,b))}function a(h,f,b){this.dimension=h.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var v=0;v<this.dimension;++v)this.bounds[0][v]=-1/0,this.bounds[1][v]=1/0;this._state=h.slice().reverse(),this._velocity=f.slice().reverse(),this._time=[b],this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}var i=a.prototype;function c(h){for(var f=new Array(h),b=0;b<h;++b)f[b]=0;return f}i.flush=function(h){var f=r.gt(this._time,h)-1;f<=0||(this._time.splice(0,f),this._state.splice(0,f*this.dimension),this._velocity.splice(0,f*this.dimension))},i.curve=function(h){var f=this._time,b=f.length,v=r.le(f,h),g=this._scratch[0],y=this._state,p=this._velocity,m=this.dimension,w=this.bounds;if(v<0)for(var u=m-1,S=0;S<m;++S,--u)g[S]=y[u];else if(v>=b-1){u=y.length-1;var _=h-f[b-1];for(S=0;S<m;++S,--u)g[S]=y[u]+_*p[u]}else{u=m*(v+1)-1;var E=f[v],L=f[v+1]-E||1,C=this._scratch[1],P=this._scratch[2],I=this._scratch[3],U=this._scratch[4],z=!0;for(S=0;S<m;++S,--u)C[S]=y[u],I[S]=p[u]*L,P[S]=y[u+m],U[S]=p[u+m]*L,z=z&&C[S]===P[S]&&I[S]===U[S]&&I[S]===0;if(z)for(S=0;S<m;++S)g[S]=C[S];else o(C,I,P,U,(h-E)/L,g)}var H=w[0],F=w[1];for(S=0;S<m;++S)g[S]=n(H[S],F[S],g[S]);return g},i.dcurve=function(h){var f=this._time,b=f.length,v=r.le(f,h),g=this._scratch[0],y=this._state,p=this._velocity,m=this.dimension;if(v>=b-1)for(var w=y.length-1,u=(f[b-1],0);u<m;++u,--w)g[u]=p[w];else{w=m*(v+1)-1;var S=f[v],_=f[v+1]-S||1,E=this._scratch[1],L=this._scratch[2],C=this._scratch[3],P=this._scratch[4],I=!0;for(u=0;u<m;++u,--w)E[u]=y[w],C[u]=p[w]*_,L[u]=y[w+m],P[u]=p[w+m]*_,I=I&&E[u]===L[u]&&C[u]===P[u]&&C[u]===0;if(I)for(u=0;u<m;++u)g[u]=0;else for(o.derivative(E,C,L,P,(h-S)/_,g),u=0;u<m;++u)g[u]/=_}return g},i.lastT=function(){var h=this._time;return h[h.length-1]},i.stable=function(){for(var h=this._velocity,f=h.length,b=this.dimension-1;b>=0;--b)if(h[--f])return!1;return!0},i.jump=function(h){var f=this.lastT(),b=this.dimension;if(!(h<f||arguments.length!==b+1)){var v=this._state,g=this._velocity,y=v.length-this.dimension,p=this.bounds,m=p[0],w=p[1];this._time.push(f,h);for(var u=0;u<2;++u)for(var S=0;S<b;++S)v.push(v[y++]),g.push(0);for(this._time.push(h),S=b;S>0;--S)v.push(n(m[S-1],w[S-1],arguments[S])),g.push(0)}},i.push=function(h){var f=this.lastT(),b=this.dimension;if(!(h<f||arguments.length!==b+1)){var v=this._state,g=this._velocity,y=v.length-this.dimension,p=h-f,m=this.bounds,w=m[0],u=m[1],S=p>1e-6?1/p:0;this._time.push(h);for(var _=b;_>0;--_){var E=n(w[_-1],u[_-1],arguments[_]);v.push(E),g.push((E-v[y++])*S)}}},i.set=function(h){var f=this.dimension;if(!(h<this.lastT()||arguments.length!==f+1)){var b=this._state,v=this._velocity,g=this.bounds,y=g[0],p=g[1];this._time.push(h);for(var m=f;m>0;--m)b.push(n(y[m-1],p[m-1],arguments[m])),v.push(0)}},i.move=function(h){var f=this.lastT(),b=this.dimension;if(!(h<=f||arguments.length!==b+1)){var v=this._state,g=this._velocity,y=v.length-this.dimension,p=this.bounds,m=p[0],w=p[1],u=h-f,S=u>1e-6?1/u:0;this._time.push(h);for(var _=b;_>0;--_){var E=arguments[_];v.push(n(m[_-1],w[_-1],v[y++]+E)),g.push(E*S)}}},i.idle=function(h){var f=this.lastT();if(!(h<f)){var b=this.dimension,v=this._state,g=this._velocity,y=v.length-b,p=this.bounds,m=p[0],w=p[1],u=h-f;this._time.push(h);for(var S=b-1;S>=0;--S)v.push(n(m[S],w[S],v[y]+u*g[y])),g.push(0),y+=1}}},7080:function(d){function s(y,p,m,w,u,S){this._color=y,this.key=p,this.value=m,this.left=w,this.right=u,this._count=S}function t(y){return new s(y._color,y.key,y.value,y.left,y.right,y._count)}function o(y,p){return new s(y,p.key,p.value,p.left,p.right,p._count)}function r(y){y._count=1+(y.left?y.left._count:0)+(y.right?y.right._count:0)}function n(y,p){this._compare=y,this.root=p}d.exports=function(y){return new n(y||g,null)};var a=n.prototype;function i(y,p){var m;return p.left&&(m=i(y,p.left))?m:(m=y(p.key,p.value))||(p.right?i(y,p.right):void 0)}function c(y,p,m,w){if(p(y,w.key)<=0){var u;if(w.left&&(u=c(y,p,m,w.left))||(u=m(w.key,w.value)))return u}if(w.right)return c(y,p,m,w.right)}function h(y,p,m,w,u){var S,_=m(y,u.key),E=m(p,u.key);if(_<=0&&(u.left&&(S=h(y,p,m,w,u.left))||E>0&&(S=w(u.key,u.value))))return S;if(E>0&&u.right)return h(y,p,m,w,u.right)}function f(y,p){this.tree=y,this._stack=p}Object.defineProperty(a,"keys",{get:function(){var y=[];return this.forEach(function(p,m){y.push(p)}),y}}),Object.defineProperty(a,"values",{get:function(){var y=[];return this.forEach(function(p,m){y.push(m)}),y}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(y,p){for(var m=this._compare,w=this.root,u=[],S=[];w;){var _=m(y,w.key);u.push(w),S.push(_),w=_<=0?w.left:w.right}u.push(new s(0,y,p,null,null,1));for(var E=u.length-2;E>=0;--E)w=u[E],S[E]<=0?u[E]=new s(w._color,w.key,w.value,u[E+1],w.right,w._count+1):u[E]=new s(w._color,w.key,w.value,w.left,u[E+1],w._count+1);for(E=u.length-1;E>1;--E){var L=u[E-1];if(w=u[E],L._color===1||w._color===1)break;var C=u[E-2];if(C.left===L)if(L.left===w){if(!(P=C.right)||P._color!==0){C._color=0,C.left=L.right,L._color=1,L.right=C,u[E-2]=L,u[E-1]=w,r(C),r(L),E>=3&&((I=u[E-3]).left===C?I.left=L:I.right=L);break}L._color=1,C.right=o(1,P),C._color=0,E-=1}else{if(!(P=C.right)||P._color!==0){L.right=w.left,C._color=0,C.left=w.right,w._color=1,w.left=L,w.right=C,u[E-2]=w,u[E-1]=L,r(C),r(L),r(w),E>=3&&((I=u[E-3]).left===C?I.left=w:I.right=w);break}L._color=1,C.right=o(1,P),C._color=0,E-=1}else if(L.right===w){if(!(P=C.left)||P._color!==0){C._color=0,C.right=L.left,L._color=1,L.left=C,u[E-2]=L,u[E-1]=w,r(C),r(L),E>=3&&((I=u[E-3]).right===C?I.right=L:I.left=L);break}L._color=1,C.left=o(1,P),C._color=0,E-=1}else{var P;if(!(P=C.left)||P._color!==0){var I;L.left=w.right,C._color=0,C.right=w.left,w._color=1,w.right=L,w.left=C,u[E-2]=w,u[E-1]=L,r(C),r(L),r(w),E>=3&&((I=u[E-3]).right===C?I.right=w:I.left=w);break}L._color=1,C.left=o(1,P),C._color=0,E-=1}}return u[0]._color=1,new n(m,u[0])},a.forEach=function(y,p,m){if(this.root)switch(arguments.length){case 1:return i(y,this.root);case 2:return c(p,this._compare,y,this.root);case 3:return this._compare(p,m)>=0?void 0:h(p,m,this._compare,y,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var y=[],p=this.root;p;)y.push(p),p=p.left;return new f(this,y)}}),Object.defineProperty(a,"end",{get:function(){for(var y=[],p=this.root;p;)y.push(p),p=p.right;return new f(this,y)}}),a.at=function(y){if(y<0)return new f(this,[]);for(var p=this.root,m=[];;){if(m.push(p),p.left){if(y<p.left._count){p=p.left;continue}y-=p.left._count}if(!y)return new f(this,m);if(y-=1,!p.right||y>=p.right._count)break;p=p.right}return new f(this,[])},a.ge=function(y){for(var p=this._compare,m=this.root,w=[],u=0;m;){var S=p(y,m.key);w.push(m),S<=0&&(u=w.length),m=S<=0?m.left:m.right}return w.length=u,new f(this,w)},a.gt=function(y){for(var p=this._compare,m=this.root,w=[],u=0;m;){var S=p(y,m.key);w.push(m),S<0&&(u=w.length),m=S<0?m.left:m.right}return w.length=u,new f(this,w)},a.lt=function(y){for(var p=this._compare,m=this.root,w=[],u=0;m;){var S=p(y,m.key);w.push(m),S>0&&(u=w.length),m=S<=0?m.left:m.right}return w.length=u,new f(this,w)},a.le=function(y){for(var p=this._compare,m=this.root,w=[],u=0;m;){var S=p(y,m.key);w.push(m),S>=0&&(u=w.length),m=S<0?m.left:m.right}return w.length=u,new f(this,w)},a.find=function(y){for(var p=this._compare,m=this.root,w=[];m;){var u=p(y,m.key);if(w.push(m),u===0)return new f(this,w);m=u<=0?m.left:m.right}return new f(this,[])},a.remove=function(y){var p=this.find(y);return p?p.remove():this},a.get=function(y){for(var p=this._compare,m=this.root;m;){var w=p(y,m.key);if(w===0)return m.value;m=w<=0?m.left:m.right}};var b=f.prototype;function v(y,p){y.key=p.key,y.value=p.value,y.left=p.left,y.right=p.right,y._color=p._color,y._count=p._count}function g(y,p){return y<p?-1:y>p?1:0}Object.defineProperty(b,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(b,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),b.clone=function(){return new f(this.tree,this._stack.slice())},b.remove=function(){var y=this._stack;if(y.length===0)return this.tree;var p=new Array(y.length),m=y[y.length-1];p[p.length-1]=new s(m._color,m.key,m.value,m.left,m.right,m._count);for(var w=y.length-2;w>=0;--w)(m=y[w]).left===y[w+1]?p[w]=new s(m._color,m.key,m.value,p[w+1],m.right,m._count):p[w]=new s(m._color,m.key,m.value,m.left,p[w+1],m._count);if((m=p[p.length-1]).left&&m.right){var u=p.length;for(m=m.left;m.right;)p.push(m),m=m.right;var S=p[u-1];for(p.push(new s(m._color,S.key,S.value,m.left,m.right,m._count)),p[u-1].key=m.key,p[u-1].value=m.value,w=p.length-2;w>=u;--w)m=p[w],p[w]=new s(m._color,m.key,m.value,m.left,p[w+1],m._count);p[u-1].left=p[u]}if((m=p[p.length-1])._color===0){var _=p[p.length-2];for(_.left===m?_.left=null:_.right===m&&(_.right=null),p.pop(),w=0;w<p.length;++w)p[w]._count--;return new n(this.tree._compare,p[0])}if(m.left||m.right){for(m.left?v(m,m.left):m.right&&v(m,m.right),m._color=1,w=0;w<p.length-1;++w)p[w]._count--;return new n(this.tree._compare,p[0])}if(p.length===1)return new n(this.tree._compare,null);for(w=0;w<p.length;++w)p[w]._count--;var E=p[p.length-2];return function(L){for(var C,P,I,U,z=L.length-1;z>=0;--z){if(C=L[z],z===0)return void(C._color=1);if((P=L[z-1]).left===C){if((I=P.right).right&&I.right._color===0)return U=(I=P.right=t(I)).right=t(I.right),P.right=I.left,I.left=P,I.right=U,I._color=P._color,C._color=1,P._color=1,U._color=1,r(P),r(I),z>1&&((H=L[z-2]).left===P?H.left=I:H.right=I),void(L[z-1]=I);if(I.left&&I.left._color===0)return U=(I=P.right=t(I)).left=t(I.left),P.right=U.left,I.left=U.right,U.left=P,U.right=I,U._color=P._color,P._color=1,I._color=1,C._color=1,r(P),r(I),r(U),z>1&&((H=L[z-2]).left===P?H.left=U:H.right=U),void(L[z-1]=U);if(I._color===1){if(P._color===0)return P._color=1,void(P.right=o(0,I));P.right=o(0,I);continue}I=t(I),P.right=I.left,I.left=P,I._color=P._color,P._color=0,r(P),r(I),z>1&&((H=L[z-2]).left===P?H.left=I:H.right=I),L[z-1]=I,L[z]=P,z+1<L.length?L[z+1]=C:L.push(C),z+=2}else{if((I=P.left).left&&I.left._color===0)return U=(I=P.left=t(I)).left=t(I.left),P.left=I.right,I.right=P,I.left=U,I._color=P._color,C._color=1,P._color=1,U._color=1,r(P),r(I),z>1&&((H=L[z-2]).right===P?H.right=I:H.left=I),void(L[z-1]=I);if(I.right&&I.right._color===0)return U=(I=P.left=t(I)).right=t(I.right),P.left=U.right,I.right=U.left,U.right=P,U.left=I,U._color=P._color,P._color=1,I._color=1,C._color=1,r(P),r(I),r(U),z>1&&((H=L[z-2]).right===P?H.right=U:H.left=U),void(L[z-1]=U);if(I._color===1){if(P._color===0)return P._color=1,void(P.left=o(0,I));P.left=o(0,I);continue}var H;I=t(I),P.left=I.right,I.right=P,I._color=P._color,P._color=0,r(P),r(I),z>1&&((H=L[z-2]).right===P?H.right=I:H.left=I),L[z-1]=I,L[z]=P,z+1<L.length?L[z+1]=C:L.push(C),z+=2}}}(p),E.left===m?E.left=null:E.right=null,new n(this.tree._compare,p[0])},Object.defineProperty(b,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(b,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(b,"index",{get:function(){var y=0,p=this._stack;if(p.length===0){var m=this.tree.root;return m?m._count:0}p[p.length-1].left&&(y=p[p.length-1].left._count);for(var w=p.length-2;w>=0;--w)p[w+1]===p[w].right&&(++y,p[w].left&&(y+=p[w].left._count));return y},enumerable:!0}),b.next=function(){var y=this._stack;if(y.length!==0){var p=y[y.length-1];if(p.right)for(p=p.right;p;)y.push(p),p=p.left;else for(y.pop();y.length>0&&y[y.length-1].right===p;)p=y[y.length-1],y.pop()}},Object.defineProperty(b,"hasNext",{get:function(){var y=this._stack;if(y.length===0)return!1;if(y[y.length-1].right)return!0;for(var p=y.length-1;p>0;--p)if(y[p-1].left===y[p])return!0;return!1}}),b.update=function(y){var p=this._stack;if(p.length===0)throw new Error("Can't update empty node!");var m=new Array(p.length),w=p[p.length-1];m[m.length-1]=new s(w._color,w.key,y,w.left,w.right,w._count);for(var u=p.length-2;u>=0;--u)(w=p[u]).left===p[u+1]?m[u]=new s(w._color,w.key,w.value,m[u+1],w.right,w._count):m[u]=new s(w._color,w.key,w.value,w.left,m[u+1],w._count);return new n(this.tree._compare,m[0])},b.prev=function(){var y=this._stack;if(y.length!==0){var p=y[y.length-1];if(p.left)for(p=p.left;p;)y.push(p),p=p.right;else for(y.pop();y.length>0&&y[y.length-1].left===p;)p=y[y.length-1],y.pop()}},Object.defineProperty(b,"hasPrev",{get:function(){var y=this._stack;if(y.length===0)return!1;if(y[y.length-1].left)return!0;for(var p=y.length-1;p>0;--p)if(y[p-1].right===y[p])return!0;return!1}})},7453:function(d,s,t){d.exports=function(_,E){var L=new f(_);return L.update(E),L};var o=t(9557),r=t(1681),n=t(1011),a=t(2864),i=t(8468),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function h(_,E){return _[0]=E[0],_[1]=E[1],_[2]=E[2],_}function f(_){this.gl=_,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(_)}var b=f.prototype;function v(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}b.update=function(_){function E(K,G,V){if(V in _){var W,J=_[V],X=this[V];(K?Array.isArray(J)&&Array.isArray(J[0]):Array.isArray(J))?this[V]=W=[G(J[0]),G(J[1]),G(J[2])]:this[V]=W=[G(J),G(J),G(J)];for(var ee=0;ee<3;++ee)if(W[ee]!==X[ee])return!0}return!1}_=_||{};var L,C=E.bind(this,!1,Number),P=E.bind(this,!1,Boolean),I=E.bind(this,!1,String),U=E.bind(this,!0,function(K){if(Array.isArray(K)){if(K.length===3)return[+K[0],+K[1],+K[2],1];if(K.length===4)return[+K[0],+K[1],+K[2],+K[3]]}return[0,0,0,1]}),z=!1,H=!1;if("bounds"in _)for(var F=_.bounds,N=0;N<2;++N)for(var B=0;B<3;++B)F[N][B]!==this.bounds[N][B]&&(H=!0),this.bounds[N][B]=F[N][B];if("ticks"in _)for(L=_.ticks,z=!0,this.autoTicks=!1,N=0;N<3;++N)this.tickSpacing[N]=0;else C("tickSpacing")&&(this.autoTicks=!0,H=!0);if(this._firstInit&&("ticks"in _||"tickSpacing"in _||(this.autoTicks=!0),H=!0,z=!0,this._firstInit=!1),H&&this.autoTicks&&(L=i.create(this.bounds,this.tickSpacing),z=!0),z){for(N=0;N<3;++N)L[N].sort(function(K,G){return K.x-G.x});i.equal(L,this.ticks)?z=!1:this.ticks=L}P("tickEnable"),I("tickFont")&&(z=!0),C("tickSize"),C("tickAngle"),C("tickPad"),U("tickColor");var j=I("labels");I("labelFont")&&(j=!0),P("labelEnable"),C("labelSize"),C("labelPad"),U("labelColor"),P("lineEnable"),P("lineMirror"),C("lineWidth"),U("lineColor"),P("lineTickEnable"),P("lineTickMirror"),C("lineTickLength"),C("lineTickWidth"),U("lineTickColor"),P("gridEnable"),C("gridWidth"),U("gridColor"),P("zeroEnable"),U("zeroLineColor"),C("zeroLineWidth"),P("backgroundEnable"),U("backgroundColor"),this._text?this._text&&(j||z)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=o(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&z&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var g=[new v,new v,new v];function y(_,E,L,C,P){for(var I=_.primalOffset,U=_.primalMinor,z=_.mirrorOffset,H=_.mirrorMinor,F=C[E],N=0;N<3;++N)if(E!==N){var B=I,j=z,K=U,G=H;F&1<<N&&(B=z,j=I,K=H,G=U),B[N]=L[0][N],j[N]=L[1][N],P[N]>0?(K[N]=-1,G[N]=0):(K[N]=0,G[N]=1)}}var p=[0,0,0],m={model:c,view:c,projection:c,_ortho:!1};b.isOpaque=function(){return!0},b.isTransparent=function(){return!1},b.drawTransparent=function(_){};var w=[0,0,0],u=[0,0,0],S=[0,0,0];b.draw=function(_){_=_||m;for(var E=this.gl,L=_.model||c,C=_.view||c,P=_.projection||c,I=this.bounds,U=_._ortho||!1,z=a(L,C,P,I,U),H=z.cubeEdges,F=z.axis,N=C[12],B=C[13],j=C[14],K=C[15],G=(U?2:1)*this.pixelRatio*(P[3]*N+P[7]*B+P[11]*j+P[15]*K)/E.drawingBufferHeight,V=0;V<3;++V)this.lastCubeProps.cubeEdges[V]=H[V],this.lastCubeProps.axis[V]=F[V];var W=g;for(V=0;V<3;++V)y(g[V],V,this.bounds,H,F);E=this.gl;var J,X,ee,re=p;for(V=0;V<3;++V)this.backgroundEnable[V]?re[V]=F[V]:re[V]=0;for(this._background.draw(L,C,P,I,re,this.backgroundColor),this._lines.bind(L,C,P,this),V=0;V<3;++V){var ie=[0,0,0];F[V]>0?ie[V]=I[1][V]:ie[V]=I[0][V];for(var se=0;se<2;++se){var fe=(V+1+se)%3,ye=(V+1+(1^se))%3;this.gridEnable[fe]&&this._lines.drawGrid(fe,ye,this.bounds,ie,this.gridColor[fe],this.gridWidth[fe]*this.pixelRatio)}for(se=0;se<2;++se)fe=(V+1+se)%3,ye=(V+1+(1^se))%3,this.zeroEnable[ye]&&Math.min(I[0][ye],I[1][ye])<=0&&Math.max(I[0][ye],I[1][ye])>=0&&this._lines.drawZero(fe,ye,this.bounds,ie,this.zeroLineColor[ye],this.zeroLineWidth[ye]*this.pixelRatio)}for(V=0;V<3;++V){this.lineEnable[V]&&this._lines.drawAxisLine(V,this.bounds,W[V].primalOffset,this.lineColor[V],this.lineWidth[V]*this.pixelRatio),this.lineMirror[V]&&this._lines.drawAxisLine(V,this.bounds,W[V].mirrorOffset,this.lineColor[V],this.lineWidth[V]*this.pixelRatio);var ge=h(w,W[V].primalMinor),he=h(u,W[V].mirrorMinor),ve=this.lineTickLength;for(se=0;se<3;++se){var Oe=G/L[5*se];ge[se]*=ve[se]*Oe,he[se]*=ve[se]*Oe}this.lineTickEnable[V]&&this._lines.drawAxisTicks(V,W[V].primalOffset,ge,this.lineTickColor[V],this.lineTickWidth[V]*this.pixelRatio),this.lineTickMirror[V]&&this._lines.drawAxisTicks(V,W[V].mirrorOffset,he,this.lineTickColor[V],this.lineTickWidth[V]*this.pixelRatio)}function xe(ce){(ee=[0,0,0])[ce]=1}function ke(ce,me,Ae){var Ie=(ce+1)%3,Ce=(ce+2)%3,Re=me[Ie],le=me[Ce],de=Ae[Ie],_e=Ae[Ce];Re>0&&_e>0||Re>0&&_e<0||Re<0&&_e>0||Re<0&&_e<0?xe(Ie):(le>0&&de>0||le>0&&de<0||le<0&&de>0||le<0&&de<0)&&xe(Ce)}for(this._lines.unbind(),this._text.bind(L,C,P,this.pixelRatio),V=0;V<3;++V){var Me=W[V].primalMinor,Te=W[V].mirrorMinor,Q=h(S,W[V].primalOffset);for(se=0;se<3;++se)this.lineTickEnable[V]&&(Q[se]+=G*Me[se]*Math.max(this.lineTickLength[se],0)/L[5*se]);var oe=[0,0,0];if(oe[V]=1,this.tickEnable[V]){for(this.tickAngle[V]===-3600?(this.tickAngle[V]=0,this.tickAlign[V]="auto"):this.tickAlign[V]=-1,X=1,(J=[this.tickAlign[V],.5,X])[0]==="auto"?J[0]=0:J[0]=parseInt(""+J[0]),ee=[0,0,0],ke(V,Me,Te),se=0;se<3;++se)Q[se]+=G*Me[se]*this.tickPad[se]/L[5*se];this._text.drawTicks(V,this.tickSize[V],this.tickAngle[V],Q,this.tickColor[V],oe,ee,J)}if(this.labelEnable[V]){for(X=0,ee=[0,0,0],this.labels[V].length>4&&(xe(V),X=1),(J=[this.labelAlign[V],.5,X])[0]==="auto"?J[0]=0:J[0]=parseInt(""+J[0]),se=0;se<3;++se)Q[se]+=G*Me[se]*this.labelPad[se]/L[5*se];Q[V]+=.5*(I[0][V]+I[1][V]),this._text.drawLabel(V,this.labelSize[V],this.labelAngle[V],Q,this.labelColor[V],[0,0,0],ee,J)}}this._text.unbind()},b.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(d,s,t){d.exports=function(c){for(var h=[],f=[],b=0,v=0;v<3;++v)for(var g=(v+1)%3,y=(v+2)%3,p=[0,0,0],m=[0,0,0],w=-1;w<=1;w+=2){f.push(b,b+2,b+1,b+1,b+2,b+3),p[v]=w,m[v]=w;for(var u=-1;u<=1;u+=2){p[g]=u;for(var S=-1;S<=1;S+=2)p[y]=S,h.push(p[0],p[1],p[2],m[0],m[1],m[2]),b+=1}var _=g;g=y,y=_}var E=o(c,new Float32Array(h)),L=o(c,new Uint16Array(f),c.ELEMENT_ARRAY_BUFFER),C=r(c,[{buffer:E,type:c.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:c.FLOAT,size:3,offset:12,stride:24}],L),P=n(c);return P.attributes.position.location=0,P.attributes.normal.location=1,new a(c,E,C,P)};var o=t(5827),r=t(2944),n=t(1943).bg;function a(c,h,f,b){this.gl=c,this.buffer=h,this.vao=f,this.shader=b}var i=a.prototype;i.draw=function(c,h,f,b,v,g){for(var y=!1,p=0;p<3;++p)y=y||v[p];if(y){var m=this.gl;m.enable(m.POLYGON_OFFSET_FILL),m.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:c,view:h,projection:f,bounds:b,enable:v,colors:g},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),m.disable(m.POLYGON_OFFSET_FILL)}},i.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(d,s,t){d.exports=function(u,S,_,E,L){r(i,S,u),r(i,_,i);for(var C=0,P=0;P<2;++P){f[2]=E[P][2];for(var I=0;I<2;++I){f[1]=E[I][1];for(var U=0;U<2;++U)f[0]=E[U][0],v(c[C],f,i),C+=1}}var z=-1;for(P=0;P<8;++P){for(var H=c[P][3],F=0;F<3;++F)h[P][F]=c[P][F]/H;L&&(h[P][2]*=-1),H<0&&(z<0||h[P][2]<h[z][2])&&(z=P)}if(z<0){z=0;for(var N=0;N<3;++N){for(var B=(N+2)%3,j=(N+1)%3,K=-1,G=-1,V=0;V<2;++V){var W=(X=V<<N)+(V<<B)+(1-V<<j),J=X+(1-V<<B)+(V<<j);a(h[X],h[W],h[J],b)<0||(V?K=1:G=1)}if(K<0||G<0)G>K&&(z|=1<<N);else{for(V=0;V<2;++V){W=(X=V<<N)+(V<<B)+(1-V<<j),J=X+(1-V<<B)+(V<<j);var X,ee=y([c[X],c[W],c[J],c[X+(1<<B)+(1<<j)]]);V?K=ee:G=ee}G>K&&(z|=1<<N)}}}var re=7^z,ie=-1;for(P=0;P<8;++P)P!==z&&P!==re&&(ie<0||h[ie][1]>h[P][1])&&(ie=P);var se=-1;for(P=0;P<3;++P)(ye=ie^1<<P)!==z&&ye!==re&&(se<0&&(se=ye),(j=h[ye])[0]<h[se][0]&&(se=ye));var fe=-1;for(P=0;P<3;++P){var ye;(ye=ie^1<<P)!==z&&ye!==re&&ye!==se&&(fe<0&&(fe=ye),(j=h[ye])[0]>h[fe][0]&&(fe=ye))}var ge=p;ge[0]=ge[1]=ge[2]=0,ge[o.log2(se^ie)]=ie&se,ge[o.log2(ie^fe)]=ie&fe;var he=7^fe;he===z||he===re?(he=7^se,ge[o.log2(fe^he)]=he&fe):ge[o.log2(se^he)]=he&se;var ve=m,Oe=z;for(N=0;N<3;++N)ve[N]=Oe&1<<N?-1:1;return w};var o=t(2288),r=t(104),n=t(4670),a=t(417),i=new Array(16),c=new Array(8),h=new Array(8),f=new Array(3),b=[0,0,0];function v(u,S,_){for(var E=0;E<4;++E){u[E]=_[12+E];for(var L=0;L<3;++L)u[E]+=S[L]*_[4*L+E]}}(function(){for(var u=0;u<8;++u)c[u]=[1,1,1,1],h[u]=[1,1,1]})();var g=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function y(u){for(var S=0;S<g.length;++S)if((u=n.positive(u,g[S])).length<3)return 0;var _=u[0],E=_[0]/_[3],L=_[1]/_[3],C=0;for(S=1;S+1<u.length;++S){var P=u[S],I=u[S+1],U=P[0]/P[3]-E,z=P[1]/P[3]-L,H=I[0]/I[3]-E,F=I[1]/I[3]-L;C+=Math.abs(U*F-z*H)}return C}var p=[1,1,1],m=[0,0,0],w={cubeEdges:p,axis:m}},1681:function(d,s,t){d.exports=function(p,m,w){var u=[],S=[0,0,0],_=[0,0,0],E=[0,0,0],L=[0,0,0];u.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;C<3;++C){for(var P=u.length/3|0,I=0;I<w[C].length;++I){var U=+w[C][I].x;u.push(U,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1)}var z=u.length/3|0;S[C]=P,_[C]=z-P,P=u.length/3|0;for(var H=0;H<w[C].length;++H)U=+w[C][H].x,u.push(U,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1);z=u.length/3|0,E[C]=P,L[C]=z-P}var F=o(p,new Float32Array(u)),N=r(p,[{buffer:F,type:p.FLOAT,size:3,stride:0,offset:0}]),B=n(p);return B.attributes.position.location=0,new g(p,F,N,B,_,S,L,E)};var o=t(5827),r=t(2944),n=t(1943).j,a=[0,0,0],i=[0,0,0],c=[0,0,0],h=[0,0,0],f=[1,1];function b(p){return p[0]=p[1]=p[2]=0,p}function v(p,m){return p[0]=m[0],p[1]=m[1],p[2]=m[2],p}function g(p,m,w,u,S,_,E,L){this.gl=p,this.vertBuffer=m,this.vao=w,this.shader=u,this.tickCount=S,this.tickOffset=_,this.gridCount=E,this.gridOffset=L}var y=g.prototype;y.bind=function(p,m,w){this.shader.bind(),this.shader.uniforms.model=p,this.shader.uniforms.view=m,this.shader.uniforms.projection=w,f[0]=this.gl.drawingBufferWidth,f[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=f,this.vao.bind()},y.unbind=function(){this.vao.unbind()},y.drawAxisLine=function(p,m,w,u,S){var _=b(i);this.shader.uniforms.majorAxis=i,_[p]=m[1][p]-m[0][p],this.shader.uniforms.minorAxis=_;var E,L=v(h,w);L[p]+=m[0][p],this.shader.uniforms.offset=L,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=u,(E=b(c))[(p+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=b(c))[(p+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},y.drawAxisTicks=function(p,m,w,u,S){if(this.tickCount[p]){var _=b(a);_[p]=1,this.shader.uniforms.majorAxis=_,this.shader.uniforms.offset=m,this.shader.uniforms.minorAxis=w,this.shader.uniforms.color=u,this.shader.uniforms.lineWidth=S;var E=b(c);E[p]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[p],this.tickOffset[p])}},y.drawGrid=function(p,m,w,u,S,_){if(this.gridCount[p]){var E=b(i);E[m]=w[1][m]-w[0][m],this.shader.uniforms.minorAxis=E;var L=v(h,u);L[m]+=w[0][m],this.shader.uniforms.offset=L;var C=b(a);C[p]=1,this.shader.uniforms.majorAxis=C;var P=b(c);P[p]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[p],this.gridOffset[p])}},y.drawZero=function(p,m,w,u,S,_){var E=b(i);this.shader.uniforms.majorAxis=E,E[p]=w[1][p]-w[0][p],this.shader.uniforms.minorAxis=E;var L=v(h,u);L[p]+=w[0][p],this.shader.uniforms.offset=L;var C=b(c);C[m]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},y.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(d,s,t){var o=t(6832),r=t(5158),n=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),a=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.j=function(b){return r(b,n,a,null,[{name:"position",type:"vec3"}])};var i=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),c=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.f=function(b){return r(b,i,c,null,[{name:"position",type:"vec3"}])};var h=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),f=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);s.bg=function(b){return r(b,h,f,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(d,s,t){d.exports=function(v,g,y,p,m,w){var u=o(v),S=r(v,[{buffer:u,size:3}]),_=a(v);_.attributes.position.location=0;var E=new h(v,_,u,S);return E.update(g,y,p,m,w),E};var o=t(5827),r=t(2944),n=t(875),a=t(1943).f,i=window||A.global||{},c=i.__TEXT_CACHE||{};function h(v,g,y,p){this.gl=v,this.shader=g,this.buffer=y,this.vao=p,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}i.__TEXT_CACHE={};var f=h.prototype,b=[0,0];f.bind=function(v,g,y,p){this.vao.bind(),this.shader.bind();var m=this.shader.uniforms;m.model=v,m.view=g,m.projection=y,m.pixelScale=p,b[0]=this.gl.drawingBufferWidth,b[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=b},f.unbind=function(){this.vao.unbind()},f.update=function(v,g,y,p,m){var w=[];function u(U,z,H,F,N,B){var j=c[H];j||(j=c[H]={});var K=j[z];K||(K=j[z]=function(se,fe){try{return n(se,fe)}catch(ye){return console.warn('error vectorizing text:"'+se+'" error:',ye),{cells:[],positions:[]}}}(z,{triangles:!0,font:H,textAlign:"center",textBaseline:"middle",lineSpacing:N,styletags:B}));for(var G=(F||12)/12,V=K.positions,W=K.cells,J=0,X=W.length;J<X;++J)for(var ee=W[J],re=2;re>=0;--re){var ie=V[ee[re]];w.push(G*ie[0],-G*ie[1],U)}}for(var S=[0,0,0],_=[0,0,0],E=[0,0,0],L=[0,0,0],C={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},P=0;P<3;++P){E[P]=w.length/3|0,u(.5*(v[0][P]+v[1][P]),g[P],y[P],12,1.25,C),L[P]=(w.length/3|0)-E[P],S[P]=w.length/3|0;for(var I=0;I<p[P].length;++I)p[P][I].text&&u(p[P][I].x,p[P][I].text,p[P][I].font||m,p[P][I].fontSize||12,1.25,C);_[P]=(w.length/3|0)-S[P]}this.buffer.update(w),this.tickOffset=S,this.tickCount=_,this.labelOffset=E,this.labelCount=L},f.drawTicks=function(v,g,y,p,m,w,u,S){this.tickCount[v]&&(this.shader.uniforms.axis=w,this.shader.uniforms.color=m,this.shader.uniforms.angle=y,this.shader.uniforms.scale=g,this.shader.uniforms.offset=p,this.shader.uniforms.alignDir=u,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[v],this.tickOffset[v]))},f.drawLabel=function(v,g,y,p,m,w,u,S){this.labelCount[v]&&(this.shader.uniforms.axis=w,this.shader.uniforms.color=m,this.shader.uniforms.angle=y,this.shader.uniforms.scale=g,this.shader.uniforms.offset=p,this.shader.uniforms.alignDir=u,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[v],this.labelOffset[v]))},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(d,s){function t(o,r){var n=o+"",a=n.indexOf("."),i=0;a>=0&&(i=n.length-a-1);var c=Math.pow(10,i),h=Math.round(o*r*c),f=h+"";if(f.indexOf("e")>=0)return f;var b=h/c,v=h%c;h<0?(b=0|-Math.ceil(b),v=0|-v):(b=0|Math.floor(b),v|=0);var g=""+b;if(h<0&&(g="-"+g),i){for(var y=""+v;y.length<i;)y="0"+y;return g+"."+y}return g}s.create=function(o,r){for(var n=[],a=0;a<3;++a){for(var i=[],c=(o[0][a],o[1][a],0);c*r[a]<=o[1][a];++c)i.push({x:c*r[a],text:t(r[a],c)});for(c=-1;c*r[a]>=o[0][a];--c)i.push({x:c*r[a],text:t(r[a],c)});n.push(i)}return n},s.equal=function(o,r){for(var n=0;n<3;++n){if(o[n].length!==r[n].length)return!1;for(var a=0;a<o[n].length;++a){var i=o[n][a],c=r[n][a];if(i.x!==c.x||i.text!==c.text||i.font!==c.font||i.fontColor!==c.fontColor||i.fontSize!==c.fontSize||i.dx!==c.dx||i.dy!==c.dy)return!1}}return!0}},2771:function(d,s,t){d.exports=function(w,u,S,_,E){var L=u.model||h,C=u.view||h,P=u.projection||h,I=u._ortho||!1,U=w.bounds,z=(E=E||n(L,C,P,U,I)).axis;a(f,C,L),a(f,P,f);for(var H=p,F=0;F<3;++F)H[F].lo=1/0,H[F].hi=-1/0,H[F].pixelsPerDataUnit=1/0;var N=o(i(f,f));i(f,f);for(var B=0;B<3;++B){var j=(B+1)%3,K=(B+2)%3,G=m;e:for(F=0;F<2;++F){var V=[];if(z[B]<0!=!!F){G[B]=U[F][B];for(var W=0;W<2;++W){G[j]=U[W^F][j];for(var J=0;J<2;++J)G[K]=U[J^W^F][K],V.push(G.slice())}var X=I?5:4;for(W=X;W===X;++W){if(V.length===0)continue e;V=r.positive(V,N[W])}for(W=0;W<V.length;++W){K=V[W];var ee=y(m,f,K,S,_);for(J=0;J<3;++J)H[J].lo=Math.min(H[J].lo,K[J]),H[J].hi=Math.max(H[J].hi,K[J]),J!==B&&(H[J].pixelsPerDataUnit=Math.min(H[J].pixelsPerDataUnit,Math.abs(ee[J])))}}}}return H};var o=t(5795),r=t(4670),n=t(2864),a=t(104),i=t(2142),c=t(6342),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),f=new Float32Array(16);function b(w,u,S){this.lo=w,this.hi=u,this.pixelsPerDataUnit=S}var v=[0,0,0,1],g=[0,0,0,1];function y(w,u,S,_,E){for(var L=0;L<3;++L){for(var C=v,P=g,I=0;I<3;++I)P[I]=C[I]=S[I];P[3]=C[3]=1,P[L]+=1,c(P,P,u),P[3]<0&&(w[L]=1/0),C[L]-=1,c(C,C,u),C[3]<0&&(w[L]=1/0);var U=(C[0]/C[3]-P[0]/P[3])*_,z=(C[1]/C[3]-P[1]/P[3])*E;w[L]=.25*Math.sqrt(U*U+z*z)}return w}var p=[new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0)],m=[0,0,0]},5827:function(d,s,t){var o=t(5306),r=t(7498),n=t(5050),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function i(b,v,g,y,p){this.gl=b,this.type=v,this.handle=g,this.length=y,this.usage=p}var c=i.prototype;function h(b,v,g,y,p,m){var w=p.length*p.BYTES_PER_ELEMENT;if(m<0)return b.bufferData(v,p,y),w;if(w+m>g)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return b.bufferSubData(v,m,p),g}function f(b,v){for(var g=o.malloc(b.length,v),y=b.length,p=0;p<y;++p)g[p]=b[p];return g}c.bind=function(){this.gl.bindBuffer(this.type,this.handle)},c.unbind=function(){this.gl.bindBuffer(this.type,null)},c.dispose=function(){this.gl.deleteBuffer(this.handle)},c.update=function(b,v){if(typeof v!="number"&&(v=-1),this.bind(),typeof b=="object"&&b.shape!==void 0){var g=b.dtype;if(a.indexOf(g)<0&&(g="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(g=gl.getExtension("OES_element_index_uint")&&g!=="uint16"?"uint32":"uint16"),g===b.dtype&&function(w,u){for(var S=1,_=u.length-1;_>=0;--_){if(u[_]!==S)return!1;S*=w[_]}return!0}(b.shape,b.stride))b.offset===0&&b.data.length===b.shape[0]?this.length=h(this.gl,this.type,this.length,this.usage,b.data,v):this.length=h(this.gl,this.type,this.length,this.usage,b.data.subarray(b.offset,b.shape[0]),v);else{var y=o.malloc(b.size,g),p=n(y,b.shape);r.assign(p,b),this.length=h(this.gl,this.type,this.length,this.usage,v<0?y:y.subarray(0,b.size),v),o.free(y)}}else if(Array.isArray(b)){var m;m=this.type===this.gl.ELEMENT_ARRAY_BUFFER?f(b,"uint16"):f(b,"float32"),this.length=h(this.gl,this.type,this.length,this.usage,v<0?m:m.subarray(0,b.length),v),o.free(m)}else if(typeof b=="object"&&typeof b.length=="number")this.length=h(this.gl,this.type,this.length,this.usage,b,v);else{if(typeof b!="number"&&b!==void 0)throw new Error("gl-buffer: Invalid data type");if(v>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(b|=0)<=0&&(b=1),this.gl.bufferData(this.type,0|b,this.usage),this.length=b}},d.exports=function(b,v,g,y){if(g=g||b.ARRAY_BUFFER,y=y||b.DYNAMIC_DRAW,g!==b.ARRAY_BUFFER&&g!==b.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(y!==b.DYNAMIC_DRAW&&y!==b.STATIC_DRAW&&y!==b.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var p=b.createBuffer(),m=new i(b,g,p,0,y);return m.update(v),m}},1140:function(d,s,t){var o=t(2858);d.exports=function(n,a){var i=n.positions,c=n.vectors,h={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(n.positions.length===0)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),h;for(var f=0,b=1/0,v=-1/0,g=1/0,y=-1/0,p=1/0,m=-1/0,w=null,u=null,S=[],_=1/0,E=!1,L=0;L<i.length;L++){var C=i[L];b=Math.min(C[0],b),v=Math.max(C[0],v),g=Math.min(C[1],g),y=Math.max(C[1],y),p=Math.min(C[2],p),m=Math.max(C[2],m);var P=c[L];if(o.length(P)>f&&(f=o.length(P)),L){var I=2*o.distance(w,C)/(o.length(u)+o.length(P));I?(_=Math.min(_,I),E=!1):E=!0}E||(w=C,u=P),S.push(P)}var U=[b,g,p],z=[v,y,m];a&&(a[0]=U,a[1]=z),f===0&&(f=1);var H=1/f;isFinite(_)||(_=1),h.vectorScale=_;var F=n.coneSize||.5;n.absoluteConeSize&&(F=n.absoluteConeSize*H),h.coneScale=F,L=0;for(var N=0;L<i.length;L++)for(var B=(C=i[L])[0],j=C[1],K=C[2],G=S[L],V=o.length(G)*H,W=0;W<8;W++){h.positions.push([B,j,K,N++]),h.positions.push([B,j,K,N++]),h.positions.push([B,j,K,N++]),h.positions.push([B,j,K,N++]),h.positions.push([B,j,K,N++]),h.positions.push([B,j,K,N++]),h.vectors.push(G),h.vectors.push(G),h.vectors.push(G),h.vectors.push(G),h.vectors.push(G),h.vectors.push(G),h.vertexIntensity.push(V,V,V),h.vertexIntensity.push(V,V,V);var J=h.positions.length;h.cells.push([J-6,J-5,J-4],[J-3,J-2,J-1])}return h};var r=t(7234);d.exports.createMesh=t(5028),d.exports.createConeMesh=function(n,a){return d.exports.createMesh(n,a,{shaders:r,traceType:"cone"})}},5028:function(d,s,t){var o=t(5158),r=t(5827),n=t(2944),a=t(8931),i=t(104),c=t(7437),h=t(5050),f=t(9156),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(m,w,u,S,_,E,L,C,P,I,U){this.gl=m,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=w,this.dirty=!0,this.triShader=u,this.pickShader=S,this.trianglePositions=_,this.triangleVectors=E,this.triangleColors=C,this.triangleUVs=P,this.triangleIds=L,this.triangleVAO=I,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=U,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=b,this._view=b,this._projection=b,this._resolution=[1,1]}var g=v.prototype;function y(m,w){var u=o(m,w.meshShader.vertex,w.meshShader.fragment,null,w.meshShader.attributes);return u.attributes.position.location=0,u.attributes.color.location=2,u.attributes.uv.location=3,u.attributes.vector.location=4,u}function p(m,w){var u=o(m,w.pickShader.vertex,w.pickShader.fragment,null,w.pickShader.attributes);return u.attributes.position.location=0,u.attributes.id.location=1,u.attributes.vector.location=4,u}g.isOpaque=function(){return this.opacity>=1},g.isTransparent=function(){return this.opacity<1},g.pickSlots=1,g.setPickBase=function(m){this.pickId=m},g.update=function(m){m=m||{};var w=this.gl;this.dirty=!0,"lightPosition"in m&&(this.lightPosition=m.lightPosition),"opacity"in m&&(this.opacity=m.opacity),"ambient"in m&&(this.ambientLight=m.ambient),"diffuse"in m&&(this.diffuseLight=m.diffuse),"specular"in m&&(this.specularLight=m.specular),"roughness"in m&&(this.roughness=m.roughness),"fresnel"in m&&(this.fresnel=m.fresnel),m.tubeScale!==void 0&&(this.tubeScale=m.tubeScale),m.vectorScale!==void 0&&(this.vectorScale=m.vectorScale),m.coneScale!==void 0&&(this.coneScale=m.coneScale),m.coneOffset!==void 0&&(this.coneOffset=m.coneOffset),m.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=w.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=w.LINEAR,this.texture.setPixels(function(ie){for(var se=f({colormap:ie,nshades:256,format:"rgba"}),fe=new Uint8Array(1024),ye=0;ye<256;++ye){for(var ge=se[ye],he=0;he<3;++he)fe[4*ye+he]=ge[he];fe[4*ye+3]=255*ge[3]}return h(fe,[256,256,4],[4,0,1])}(m.colormap)),this.texture.generateMipmap());var u=m.cells,S=m.positions,_=m.vectors;if(S&&u&&_){var E=[],L=[],C=[],P=[],I=[];this.cells=u,this.positions=S,this.vectors=_;var U=m.meshColor||[1,1,1,1],z=m.vertexIntensity,H=1/0,F=-1/0;if(z)if(m.vertexIntensityBounds)H=+m.vertexIntensityBounds[0],F=+m.vertexIntensityBounds[1];else for(var N=0;N<z.length;++N){var B=z[N];H=Math.min(H,B),F=Math.max(F,B)}else for(N=0;N<S.length;++N)B=S[N][2],H=Math.min(H,B),F=Math.max(F,B);for(this.intensity=z||function(ie){for(var se=ie.length,fe=new Array(se),ye=0;ye<se;++ye)fe[ye]=ie[ye][2];return fe}(S),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=0;N<S.length;++N)for(var j=S[N],K=0;K<3;++K)!isNaN(j[K])&&isFinite(j[K])&&(this.bounds[0][K]=Math.min(this.bounds[0][K],j[K]),this.bounds[1][K]=Math.max(this.bounds[1][K],j[K]));var G=0;e:for(N=0;N<u.length;++N){var V=u[N];if(V.length===3){for(K=0;K<3;++K){j=S[J=V[K]];for(var W=0;W<3;++W)if(isNaN(j[W])||!isFinite(j[W]))continue e}for(K=0;K<3;++K){var J;j=S[J=V[2-K]],E.push(j[0],j[1],j[2],j[3]);var X=_[J];L.push(X[0],X[1],X[2],X[3]||0);var ee,re=U;re.length===3?C.push(re[0],re[1],re[2],1):C.push(re[0],re[1],re[2],re[3]),ee=z?[(z[J]-H)/(F-H),0]:[(j[2]-H)/(F-H),0],P.push(ee[0],ee[1]),I.push(N)}G+=1}}this.triangleCount=G,this.trianglePositions.update(E),this.triangleVectors.update(L),this.triangleColors.update(C),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(I))}},g.drawTransparent=g.draw=function(m){m=m||{};for(var w=this.gl,u=m.model||b,S=m.view||b,_=m.projection||b,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],L=0;L<3;++L)E[0][L]=Math.max(E[0][L],this.clipBounds[0][L]),E[1][L]=Math.min(E[1][L],this.clipBounds[1][L]);var C={model:u,view:S,projection:_,inverseModel:b.slice(),clipBounds:E,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};C.inverseModel=c(C.inverseModel,C.model),w.disable(w.CULL_FACE),this.texture.bind(0);var P=new Array(16);for(i(P,C.view,C.model),i(P,C.projection,P),c(P,P),L=0;L<3;++L)C.eyePosition[L]=P[12+L]/P[15];var I=P[15];for(L=0;L<3;++L)I+=this.lightPosition[L]*P[4*L+3];for(L=0;L<3;++L){for(var U=P[12+L],z=0;z<3;++z)U+=P[4*z+L]*this.lightPosition[z];C.lightPosition[L]=U/I}if(this.triangleCount>0){var H=this.triShader;H.bind(),H.uniforms=C,this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},g.drawPick=function(m){m=m||{};for(var w=this.gl,u=m.model||b,S=m.view||b,_=m.projection||b,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],L=0;L<3;++L)E[0][L]=Math.max(E[0][L],this.clipBounds[0][L]),E[1][L]=Math.min(E[1][L],this.clipBounds[1][L]);this._model=[].slice.call(u),this._view=[].slice.call(S),this._projection=[].slice.call(_),this._resolution=[w.drawingBufferWidth,w.drawingBufferHeight];var C={model:u,view:S,projection:_,clipBounds:E,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=C,this.triangleCount>0&&(this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},g.pick=function(m){if(!m||m.id!==this.pickId)return null;var w=m.value[0]+256*m.value[1]+65536*m.value[2],u=this.cells[w],S=this.positions[u[1]].slice(0,3),_={position:S,dataCoordinate:S,index:Math.floor(u[1]/48)};return this.traceType==="cone"?_.index=Math.floor(u[1]/48):this.traceType==="streamtube"&&(_.intensity=this.intensity[u[1]],_.velocity=this.vectors[u[1]].slice(0,3),_.divergence=this.vectors[u[1]][3],_.index=w),_},g.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},d.exports=function(m,w,u){var S=u.shaders;arguments.length===1&&(m=(w=m).gl);var _=y(m,S),E=p(m,S),L=a(m,h(new Uint8Array([255,255,255,255]),[1,1,4]));L.generateMipmap(),L.minFilter=m.LINEAR_MIPMAP_LINEAR,L.magFilter=m.LINEAR;var C=r(m),P=r(m),I=r(m),U=r(m),z=r(m),H=n(m,[{buffer:C,type:m.FLOAT,size:4},{buffer:z,type:m.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:I,type:m.FLOAT,size:4},{buffer:U,type:m.FLOAT,size:2},{buffer:P,type:m.FLOAT,size:4}]),F=new v(m,L,_,E,C,P,z,I,U,H,u.traceType||"cone");return F.update(w),F}},7234:function(d,s,t){var o=t(6832),r=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),i=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},s.pickShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(d){d.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(d,s,t){var o=t(1950);d.exports=function(r){return o[r]}},3110:function(d,s,t){d.exports=function(v){var g=v.gl,y=o(g),p=r(g,[{buffer:y,type:g.FLOAT,size:3,offset:0,stride:40},{buffer:y,type:g.FLOAT,size:4,offset:12,stride:40},{buffer:y,type:g.FLOAT,size:3,offset:28,stride:40}]),m=n(g);m.attributes.position.location=0,m.attributes.color.location=1,m.attributes.offset.location=2;var w=new i(g,y,p,m);return w.update(v),w};var o=t(5827),r=t(2944),n=t(7667),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(v,g,y,p){this.gl=v,this.shader=p,this.buffer=g,this.vao=y,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var c=i.prototype;function h(v,g){for(var y=0;y<3;++y)v[0][y]=Math.min(v[0][y],g[y]),v[1][y]=Math.max(v[1][y],g[y])}c.isOpaque=function(){return!this.hasAlpha},c.isTransparent=function(){return this.hasAlpha},c.drawTransparent=c.draw=function(v){var g=this.gl,y=this.shader.uniforms;this.shader.bind();var p=y.view=v.view||a,m=y.projection=v.projection||a;y.model=v.model||a,y.clipBounds=this.clipBounds,y.opacity=this.opacity;var w=p[12],u=p[13],S=p[14],_=p[15],E=(v._ortho?2:1)*this.pixelRatio*(m[3]*w+m[7]*u+m[11]*S+m[15]*_)/g.drawingBufferHeight;this.vao.bind();for(var L=0;L<3;++L)g.lineWidth(this.lineWidth[L]*this.pixelRatio),y.capSize=this.capSize[L]*E,this.lineCount[L]&&g.drawArrays(g.LINES,this.lineOffset[L],this.lineCount[L]);this.vao.unbind()};var f=function(){for(var v=new Array(3),g=0;g<3;++g){for(var y=[],p=1;p<=2;++p)for(var m=-1;m<=1;m+=2){var w=[0,0,0];w[(p+g)%3]=m,y.push(w)}v[g]=y}return v}();function b(v,g,y,p){for(var m=f[p],w=0;w<m.length;++w){var u=m[w];v.push(g[0],g[1],g[2],y[0],y[1],y[2],y[3],u[0],u[1],u[2])}return m.length}c.update=function(v){"lineWidth"in(v=v||{})&&(this.lineWidth=v.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in v&&(this.capSize=v.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in v&&(this.opacity=+v.opacity,this.opacity<1&&(this.hasAlpha=!0));var g=v.color||[[0,0,0],[0,0,0],[0,0,0]],y=v.position,p=v.error;if(Array.isArray(g[0])||(g=[g,g,g]),y&&p){var m=[],w=y.length,u=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=u;e:for(var _=0;_<w;++_){for(var E=y[_],L=0;L<3;++L)if(isNaN(E[L])||!isFinite(E[L]))continue e;var C,P=p[_],I=g[S];Array.isArray(I[0])&&(I=g[_]),I.length===3?I=[I[0],I[1],I[2],1]:I.length===4&&(I=[I[0],I[1],I[2],I[3]],!this.hasAlpha&&I[3]<1&&(this.hasAlpha=!0)),isNaN(P[0][S])||isNaN(P[1][S])||(P[0][S]<0&&((C=E.slice())[S]+=P[0][S],m.push(E[0],E[1],E[2],I[0],I[1],I[2],I[3],0,0,0,C[0],C[1],C[2],I[0],I[1],I[2],I[3],0,0,0),h(this.bounds,C),u+=2+b(m,C,I,S)),P[1][S]>0&&((C=E.slice())[S]+=P[1][S],m.push(E[0],E[1],E[2],I[0],I[1],I[2],I[3],0,0,0,C[0],C[1],C[2],I[0],I[1],I[2],I[3],0,0,0),h(this.bounds,C),u+=2+b(m,C,I,S)))}this.lineCount[S]=u-this.lineOffset[S]}this.buffer.update(m)}},c.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(d,s,t){var o=t(6832),r=t(5158),n=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),a=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);d.exports=function(i){return r(i,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(d,s,t){var o=t(8931);d.exports=function(w,u,S,_){r||(r=w.FRAMEBUFFER_UNSUPPORTED,n=w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,i=w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=w.getExtension("WEBGL_draw_buffers");if(!c&&E&&function(H,F){var N=H.getParameter(F.MAX_COLOR_ATTACHMENTS_WEBGL);c=new Array(N+1);for(var B=0;B<=N;++B){for(var j=new Array(N),K=0;K<B;++K)j[K]=H.COLOR_ATTACHMENT0+K;for(K=B;K<N;++K)j[K]=H.NONE;c[B]=j}}(w,E),Array.isArray(u)&&(_=S,S=0|u[1],u=0|u[0]),typeof u!="number")throw new Error("gl-fbo: Missing shape parameter");var L=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(u<0||u>L||S<0||S>L)throw new Error("gl-fbo: Parameters are too large for FBO");var C=1;if("color"in(_=_||{})){if((C=Math.max(0|_.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(C>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(C>w.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+C+" draw buffers")}}var P=w.UNSIGNED_BYTE,I=w.getExtension("OES_texture_float");if(_.float&&C>0){if(!I)throw new Error("gl-fbo: Context does not support floating point textures");P=w.FLOAT}else _.preferFloat&&C>0&&I&&(P=w.FLOAT);var U=!0;"depth"in _&&(U=!!_.depth);var z=!1;return"stencil"in _&&(z=!!_.stencil),new y(w,u,S,P,C,U,z,E)};var r,n,a,i,c=null;function h(w){return[w.getParameter(w.FRAMEBUFFER_BINDING),w.getParameter(w.RENDERBUFFER_BINDING),w.getParameter(w.TEXTURE_BINDING_2D)]}function f(w,u){w.bindFramebuffer(w.FRAMEBUFFER,u[0]),w.bindRenderbuffer(w.RENDERBUFFER,u[1]),w.bindTexture(w.TEXTURE_2D,u[2])}function b(w){switch(w){case r:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case i:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function v(w,u,S,_,E,L){if(!_)return null;var C=o(w,u,S,E,_);return C.magFilter=w.NEAREST,C.minFilter=w.NEAREST,C.mipSamples=1,C.bind(),w.framebufferTexture2D(w.FRAMEBUFFER,L,w.TEXTURE_2D,C.handle,0),C}function g(w,u,S,_,E){var L=w.createRenderbuffer();return w.bindRenderbuffer(w.RENDERBUFFER,L),w.renderbufferStorage(w.RENDERBUFFER,_,u,S),w.framebufferRenderbuffer(w.FRAMEBUFFER,E,w.RENDERBUFFER,L),L}function y(w,u,S,_,E,L,C,P){this.gl=w,this._shape=[0|u,0|S],this._destroyed=!1,this._ext=P,this.color=new Array(E);for(var I=0;I<E;++I)this.color[I]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=_,this._useDepth=L,this._useStencil=C;var U=this,z=[0|u,0|S];Object.defineProperties(z,{0:{get:function(){return U._shape[0]},set:function(H){return U.width=H}},1:{get:function(){return U._shape[1]},set:function(H){return U.height=H}}}),this._shapeVector=z,function(H){var F=h(H.gl),N=H.gl,B=H.handle=N.createFramebuffer(),j=H._shape[0],K=H._shape[1],G=H.color.length,V=H._ext,W=H._useStencil,J=H._useDepth,X=H._colorType;N.bindFramebuffer(N.FRAMEBUFFER,B);for(var ee=0;ee<G;++ee)H.color[ee]=v(N,j,K,X,N.RGBA,N.COLOR_ATTACHMENT0+ee);G===0?(H._color_rb=g(N,j,K,N.RGBA4,N.COLOR_ATTACHMENT0),V&&V.drawBuffersWEBGL(c[0])):G>1&&V.drawBuffersWEBGL(c[G]);var re=N.getExtension("WEBGL_depth_texture");re?W?H.depth=v(N,j,K,re.UNSIGNED_INT_24_8_WEBGL,N.DEPTH_STENCIL,N.DEPTH_STENCIL_ATTACHMENT):J&&(H.depth=v(N,j,K,N.UNSIGNED_SHORT,N.DEPTH_COMPONENT,N.DEPTH_ATTACHMENT)):J&&W?H._depth_rb=g(N,j,K,N.DEPTH_STENCIL,N.DEPTH_STENCIL_ATTACHMENT):J?H._depth_rb=g(N,j,K,N.DEPTH_COMPONENT16,N.DEPTH_ATTACHMENT):W&&(H._depth_rb=g(N,j,K,N.STENCIL_INDEX,N.STENCIL_ATTACHMENT));var ie=N.checkFramebufferStatus(N.FRAMEBUFFER);if(ie!==N.FRAMEBUFFER_COMPLETE){for(H._destroyed=!0,N.bindFramebuffer(N.FRAMEBUFFER,null),N.deleteFramebuffer(H.handle),H.handle=null,H.depth&&(H.depth.dispose(),H.depth=null),H._depth_rb&&(N.deleteRenderbuffer(H._depth_rb),H._depth_rb=null),ee=0;ee<H.color.length;++ee)H.color[ee].dispose(),H.color[ee]=null;H._color_rb&&(N.deleteRenderbuffer(H._color_rb),H._color_rb=null),f(N,F),b(ie)}f(N,F)}(this)}var p=y.prototype;function m(w,u,S){if(w._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(w._shape[0]!==u||w._shape[1]!==S){var _=w.gl,E=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(u<0||u>E||S<0||S>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");w._shape[0]=u,w._shape[1]=S;for(var L=h(_),C=0;C<w.color.length;++C)w.color[C].shape=w._shape;w._color_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,w._color_rb),_.renderbufferStorage(_.RENDERBUFFER,_.RGBA4,w._shape[0],w._shape[1])),w.depth&&(w.depth.shape=w._shape),w._depth_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,w._depth_rb),w._useDepth&&w._useStencil?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_STENCIL,w._shape[0],w._shape[1]):w._useDepth?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_COMPONENT16,w._shape[0],w._shape[1]):w._useStencil&&_.renderbufferStorage(_.RENDERBUFFER,_.STENCIL_INDEX,w._shape[0],w._shape[1])),_.bindFramebuffer(_.FRAMEBUFFER,w.handle);var P=_.checkFramebufferStatus(_.FRAMEBUFFER);P!==_.FRAMEBUFFER_COMPLETE&&(w.dispose(),f(_,L),b(P)),f(_,L)}}Object.defineProperties(p,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(w){if(Array.isArray(w)||(w=[0|w,0|w]),w.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var u=0|w[0],S=0|w[1];return m(this,u,S),[u,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(w){return m(this,w|=0,this._shape[1]),w},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(w){return w|=0,m(this,this._shape[0],w),w},enumerable:!1}}),p.bind=function(){if(!this._destroyed){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,this.handle),w.viewport(0,0,this._shape[0],this._shape[1])}},p.dispose=function(){if(!this._destroyed){this._destroyed=!0;var w=this.gl;w.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(w.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var u=0;u<this.color.length;++u)this.color[u].dispose(),this.color[u]=null;this._color_rb&&(w.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(d,s,t){var o=t(8974).sprintf,r=t(6603),n=t(9365),a=t(8008);d.exports=function(i,c,h){var f=n(c)||"of unknown name (see npm glsl-shader-name)",b="unknown type";h!==void 0&&(b=h===r.FRAGMENT_SHADER?"fragment":"vertex");for(var v=o(`Error compiling %s shader %s:
`,b,f),g=o("%s%s",v,i),y=i.split(`
`),p={},m=0;m<y.length;m++){var w=y[m];if(w!==""&&w!=="\0"){var u=parseInt(w.split(":")[2]);if(isNaN(u))throw new Error(o("Could not parse error: %s",w));p[u]=w}}var S=a(c).split(`
`);for(m=0;m<S.length;m++)if((p[m+3]||p[m+2]||p[m+1])&&(v+=S[m]+`
`,p[m+1])){var _=p[m+1];_=_.substr(_.split(":",3).join(":").length+1).trim(),v+=o(`^^^ %s

`,_)}return{long:v.trim(),short:g.trim()}}},6386:function(d,s,t){d.exports=function(g,y){var p=g.gl,m=new h(g,a(p,c.vertex,c.fragment),a(p,c.pickVertex,c.pickFragment),i(p),i(p),i(p),i(p));return m.update(y),g.addObject(m),m};var o=t(5070),r=t(9560),n=t(5306),a=t(5158),i=t(5827),c=t(1292);function h(g,y,p,m,w,u,S){this.plot=g,this.shader=y,this.pickShader=p,this.positionBuffer=m,this.weightBuffer=w,this.colorBuffer=u,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var f,b=h.prototype,v=[0,0,1,0,0,1,1,0,1,1,0,1];b.draw=(f=[1,0,0,0,1,0,0,0,1],function(){var g=this.plot,y=this.shader,p=this.bounds,m=this.numVertices;if(!(m<=0)){var w=g.gl,u=g.dataBox,S=p[2]-p[0],_=p[3]-p[1],E=u[2]-u[0],L=u[3]-u[1];f[0]=2*S/E,f[4]=2*_/L,f[6]=2*(p[0]-u[0])/E-1,f[7]=2*(p[1]-u[1])/L-1,y.bind();var C=y.uniforms;C.viewTransform=f,C.shape=this.shape;var P=y.attributes;this.positionBuffer.bind(),P.position.pointer(),this.weightBuffer.bind(),P.weight.pointer(w.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),P.color.pointer(w.UNSIGNED_BYTE,!0),w.drawArrays(w.TRIANGLES,0,m)}}),b.drawPick=function(){var g=[1,0,0,0,1,0,0,0,1],y=[0,0,0,0];return function(p){var m=this.plot,w=this.pickShader,u=this.bounds,S=this.numVertices;if(!(S<=0)){var _=m.gl,E=m.dataBox,L=u[2]-u[0],C=u[3]-u[1],P=E[2]-E[0],I=E[3]-E[1];g[0]=2*L/P,g[4]=2*C/I,g[6]=2*(u[0]-E[0])/P-1,g[7]=2*(u[1]-E[1])/I-1;for(var U=0;U<4;++U)y[U]=p>>8*U&255;this.pickOffset=p,w.bind();var z=w.uniforms;z.viewTransform=g,z.pickOffset=y,z.shape=this.shape;var H=w.attributes;return this.positionBuffer.bind(),H.position.pointer(),this.weightBuffer.bind(),H.weight.pointer(_.UNSIGNED_BYTE,!1),this.idBuffer.bind(),H.pickId.pointer(_.UNSIGNED_BYTE,!1),_.drawArrays(_.TRIANGLES,0,S),p+this.shape[0]*this.shape[1]}}}(),b.pick=function(g,y,p){var m=this.pickOffset,w=this.shape[0]*this.shape[1];if(p<m||p>=m+w)return null;var u=p-m,S=this.xData,_=this.yData;return{object:this,pointId:u,dataCoord:[S[u%this.shape[0]],_[u/this.shape[0]|0]]}},b.update=function(g){var y=(g=g||{}).shape||[0,0],p=g.x||r(y[0]),m=g.y||r(y[1]),w=g.z||new Float32Array(y[0]*y[1]),u=g.zsmooth!==!1;this.xData=p,this.yData=m;var S,_,E,L,C=g.colorLevels||[0],P=g.colorValues||[0,0,0,1],I=C.length,U=this.bounds;u?(S=U[0]=p[0],_=U[1]=m[0],E=U[2]=p[p.length-1],L=U[3]=m[m.length-1]):(S=U[0]=p[0]+(p[1]-p[0])/2,_=U[1]=m[0]+(m[1]-m[0])/2,E=U[2]=p[p.length-1]+(p[p.length-1]-p[p.length-2])/2,L=U[3]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2);var z=1/(E-S),H=1/(L-_),F=y[0],N=y[1];this.shape=[F,N];var B=(u?(F-1)*(N-1):F*N)*(v.length>>>1);this.numVertices=B;for(var j=n.mallocUint8(4*B),K=n.mallocFloat32(2*B),G=n.mallocUint8(2*B),V=n.mallocUint32(B),W=0,J=u?F-1:F,X=u?N-1:N,ee=0;ee<X;++ee){var re,ie;u?(re=H*(m[ee]-_),ie=H*(m[ee+1]-_)):(re=ee<N-1?H*(m[ee]-(m[ee+1]-m[ee])/2-_):H*(m[ee]-(m[ee]-m[ee-1])/2-_),ie=ee<N-1?H*(m[ee]+(m[ee+1]-m[ee])/2-_):H*(m[ee]+(m[ee]-m[ee-1])/2-_));for(var se=0;se<J;++se){var fe,ye;u?(fe=z*(p[se]-S),ye=z*(p[se+1]-S)):(fe=se<F-1?z*(p[se]-(p[se+1]-p[se])/2-S):z*(p[se]-(p[se]-p[se-1])/2-S),ye=se<F-1?z*(p[se]+(p[se+1]-p[se])/2-S):z*(p[se]+(p[se]-p[se-1])/2-S));for(var ge=0;ge<v.length;ge+=2){var he,ve,Oe,xe,ke=v[ge],Me=v[ge+1],Te=w[u?(ee+Me)*F+(se+ke):ee*F+se],Q=o.le(C,Te);if(Q<0)he=P[0],ve=P[1],Oe=P[2],xe=P[3];else if(Q===I-1)he=P[4*I-4],ve=P[4*I-3],Oe=P[4*I-2],xe=P[4*I-1];else{var oe=(Te-C[Q])/(C[Q+1]-C[Q]),ce=1-oe,me=4*Q,Ae=4*(Q+1);he=ce*P[me]+oe*P[Ae],ve=ce*P[me+1]+oe*P[Ae+1],Oe=ce*P[me+2]+oe*P[Ae+2],xe=ce*P[me+3]+oe*P[Ae+3]}j[4*W]=255*he,j[4*W+1]=255*ve,j[4*W+2]=255*Oe,j[4*W+3]=255*xe,K[2*W]=.5*fe+.5*ye,K[2*W+1]=.5*re+.5*ie,G[2*W]=ke,G[2*W+1]=Me,V[W]=ee*F+se,W+=1}}}this.positionBuffer.update(K),this.weightBuffer.update(G),this.colorBuffer.update(j),this.idBuffer.update(V),n.free(K),n.free(j),n.free(G),n.free(V)},b.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(d,s,t){var o=t(6832);d.exports={fragment:o([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},248:function(d,s,t){var o=t(6832),r=t(5158),n=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),a=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),i=o([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),c=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];s.createShader=function(h){return r(h,n,a,null,c)},s.createPickShader=function(h){return r(h,n,i,null,c)}},6086:function(d,s,t){d.exports=function(S){var _=S.gl||S.scene&&S.scene.gl,E=b(_);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var L=v(_);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var C=o(_),P=r(_,[{buffer:C,size:3,offset:0,stride:48},{buffer:C,size:3,offset:12,stride:48},{buffer:C,size:1,offset:24,stride:48},{buffer:C,size:1,offset:28,stride:48},{buffer:C,size:4,offset:32,stride:48}]),I=h(new Array(1024),[256,1,4]),U=0;U<1024;++U)I.data[U]=255;var z=n(_,I);z.wrap=_.REPEAT;var H=new w(_,E,L,C,P,z);return H.update(S),H};var o=t(5827),r=t(2944),n=t(8931),a=new Uint8Array(4),i=new Float32Array(a.buffer),c=t(5070),h=t(5050),f=t(248),b=f.createShader,v=f.createPickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(S,_){for(var E=0,L=0;L<3;++L){var C=S[L]-_[L];E+=C*C}return Math.sqrt(E)}function p(S){for(var _=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)_[0][E]=Math.max(S[0][E],_[0][E]),_[1][E]=Math.min(S[1][E],_[1][E]);return _}function m(S,_,E,L){this.arcLength=S,this.position=_,this.index=E,this.dataCoordinate=L}function w(S,_,E,L,C,P){this.gl=S,this.shader=_,this.pickShader=E,this.buffer=L,this.vao=C,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=P,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var u=w.prototype;u.isTransparent=function(){return this.hasAlpha},u.isOpaque=function(){return!this.hasAlpha},u.pickSlots=1,u.setPickBase=function(S){this.pickId=S},u.drawTransparent=u.draw=function(S){if(this.vertexCount){var _=this.gl,E=this.shader,L=this.vao;E.bind(),E.uniforms={model:S.model||g,view:S.view||g,projection:S.projection||g,clipBounds:p(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},u.drawPick=function(S){if(this.vertexCount){var _=this.gl,E=this.pickShader,L=this.vao;E.bind(),E.uniforms={model:S.model||g,view:S.view||g,projection:S.projection||g,pickId:this.pickId,clipBounds:p(this.clipBounds),screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},u.update=function(S){var _,E;this.dirty=!0;var L=!!S.connectGaps;"dashScale"in S&&(this.dashScale=S.dashScale),this.hasAlpha=!1,"opacity"in S&&(this.opacity=+S.opacity,this.opacity<1&&(this.hasAlpha=!0));var C=[],P=[],I=[],U=0,z=0,H=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],F=S.position||S.positions;if(F){var N=S.color||S.colors||[0,0,0,1],B=S.lineWidth||1,j=!1;e:for(_=1;_<F.length;++_){var K,G,V,W=F[_-1],J=F[_];for(P.push(U),I.push(W.slice()),E=0;E<3;++E){if(isNaN(W[E])||isNaN(J[E])||!isFinite(W[E])||!isFinite(J[E])){if(!L&&C.length>0){for(var X=0;X<24;++X)C.push(C[C.length-12]);z+=2,j=!0}continue e}H[0][E]=Math.min(H[0][E],W[E],J[E]),H[1][E]=Math.max(H[1][E],W[E],J[E])}Array.isArray(N[0])?(K=N.length>_-1?N[_-1]:N.length>0?N[N.length-1]:[0,0,0,1],G=N.length>_?N[_]:N.length>0?N[N.length-1]:[0,0,0,1]):K=G=N,K.length===3&&(K=[K[0],K[1],K[2],1]),G.length===3&&(G=[G[0],G[1],G[2],1]),!this.hasAlpha&&K[3]<1&&(this.hasAlpha=!0),V=Array.isArray(B)?B.length>_-1?B[_-1]:B.length>0?B[B.length-1]:[0,0,0,1]:B;var ee=U;if(U+=y(W,J),j){for(E=0;E<2;++E)C.push(W[0],W[1],W[2],J[0],J[1],J[2],ee,V,K[0],K[1],K[2],K[3]);z+=2,j=!1}C.push(W[0],W[1],W[2],J[0],J[1],J[2],ee,V,K[0],K[1],K[2],K[3],W[0],W[1],W[2],J[0],J[1],J[2],ee,-V,K[0],K[1],K[2],K[3],J[0],J[1],J[2],W[0],W[1],W[2],U,-V,G[0],G[1],G[2],G[3],J[0],J[1],J[2],W[0],W[1],W[2],U,V,G[0],G[1],G[2],G[3]),z+=4}}if(this.buffer.update(C),P.push(U),I.push(F[F.length-1].slice()),this.bounds=H,this.vertexCount=z,this.points=I,this.arcLength=P,"dashes"in S){var re=S.dashes.slice();for(re.unshift(0),_=1;_<re.length;++_)re[_]=re[_-1]+re[_];var ie=h(new Array(1024),[256,1,4]);for(_=0;_<256;++_){for(E=0;E<4;++E)ie.set(_,0,E,0);1&c.le(re,re[re.length-1]*_/255)?ie.set(_,0,0,0):ie.set(_,0,0,255)}this.texture.setPixels(ie)}},u.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},u.pick=function(S){if(!S||S.id!==this.pickId)return null;var _=function(F,N,B,j){return a[0]=0,a[1]=B,a[2]=N,a[3]=F,i[0]}(S.value[0],S.value[1],S.value[2]),E=c.le(this.arcLength,_);if(E<0)return null;if(E===this.arcLength.length-1)return new m(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var L=this.points[E],C=this.points[Math.min(E+1,this.points.length-1)],P=(_-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),I=1-P,U=[0,0,0],z=0;z<3;++z)U[z]=I*L[z]+P*C[z];var H=Math.min(P<.5?E:E+1,this.points.length-1);return new m(_,U,H,this.points[H])}},7332:function(d){d.exports=function(s){var t=new Float32Array(16);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t}},9823:function(d){d.exports=function(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7787:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2],n=s[3],a=s[4],i=s[5],c=s[6],h=s[7],f=s[8],b=s[9],v=s[10],g=s[11],y=s[12],p=s[13],m=s[14],w=s[15];return(t*i-o*a)*(v*w-g*m)-(t*c-r*a)*(b*w-g*p)+(t*h-n*a)*(b*m-v*p)+(o*c-r*i)*(f*w-g*y)-(o*h-n*i)*(f*m-v*y)+(r*h-n*c)*(f*p-b*y)}},5950:function(d){d.exports=function(s,t){var o=t[0],r=t[1],n=t[2],a=t[3],i=o+o,c=r+r,h=n+n,f=o*i,b=r*i,v=r*c,g=n*i,y=n*c,p=n*h,m=a*i,w=a*c,u=a*h;return s[0]=1-v-p,s[1]=b+u,s[2]=g-w,s[3]=0,s[4]=b-u,s[5]=1-f-p,s[6]=y+m,s[7]=0,s[8]=g+w,s[9]=y-m,s[10]=1-f-v,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7280:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=t[3],c=r+r,h=n+n,f=a+a,b=r*c,v=r*h,g=r*f,y=n*h,p=n*f,m=a*f,w=i*c,u=i*h,S=i*f;return s[0]=1-(y+m),s[1]=v+S,s[2]=g-u,s[3]=0,s[4]=v-S,s[5]=1-(b+m),s[6]=p+w,s[7]=0,s[8]=g+u,s[9]=p-w,s[10]=1-(b+y),s[11]=0,s[12]=o[0],s[13]=o[1],s[14]=o[2],s[15]=1,s}},9947:function(d){d.exports=function(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7437:function(d){d.exports=function(s,t){var o=t[0],r=t[1],n=t[2],a=t[3],i=t[4],c=t[5],h=t[6],f=t[7],b=t[8],v=t[9],g=t[10],y=t[11],p=t[12],m=t[13],w=t[14],u=t[15],S=o*c-r*i,_=o*h-n*i,E=o*f-a*i,L=r*h-n*c,C=r*f-a*c,P=n*f-a*h,I=b*m-v*p,U=b*w-g*p,z=b*u-y*p,H=v*w-g*m,F=v*u-y*m,N=g*u-y*w,B=S*N-_*F+E*H+L*z-C*U+P*I;return B?(B=1/B,s[0]=(c*N-h*F+f*H)*B,s[1]=(n*F-r*N-a*H)*B,s[2]=(m*P-w*C+u*L)*B,s[3]=(g*C-v*P-y*L)*B,s[4]=(h*z-i*N-f*U)*B,s[5]=(o*N-n*z+a*U)*B,s[6]=(w*E-p*P-u*_)*B,s[7]=(b*P-g*E+y*_)*B,s[8]=(i*F-c*z+f*I)*B,s[9]=(r*z-o*F-a*I)*B,s[10]=(p*C-m*E+u*S)*B,s[11]=(v*E-b*C-y*S)*B,s[12]=(c*U-i*H-h*I)*B,s[13]=(o*H-r*U+n*I)*B,s[14]=(m*_-p*L-w*S)*B,s[15]=(b*L-v*_+g*S)*B,s):null}},3012:function(d,s,t){var o=t(9947);d.exports=function(r,n,a,i){var c,h,f,b,v,g,y,p,m,w,u=n[0],S=n[1],_=n[2],E=i[0],L=i[1],C=i[2],P=a[0],I=a[1],U=a[2];return Math.abs(u-P)<1e-6&&Math.abs(S-I)<1e-6&&Math.abs(_-U)<1e-6?o(r):(y=u-P,p=S-I,m=_-U,c=L*(m*=w=1/Math.sqrt(y*y+p*p+m*m))-C*(p*=w),h=C*(y*=w)-E*m,f=E*p-L*y,(w=Math.sqrt(c*c+h*h+f*f))?(c*=w=1/w,h*=w,f*=w):(c=0,h=0,f=0),b=p*f-m*h,v=m*c-y*f,g=y*h-p*c,(w=Math.sqrt(b*b+v*v+g*g))?(b*=w=1/w,v*=w,g*=w):(b=0,v=0,g=0),r[0]=c,r[1]=b,r[2]=y,r[3]=0,r[4]=h,r[5]=v,r[6]=p,r[7]=0,r[8]=f,r[9]=g,r[10]=m,r[11]=0,r[12]=-(c*u+h*S+f*_),r[13]=-(b*u+v*S+g*_),r[14]=-(y*u+p*S+m*_),r[15]=1,r)}},104:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=t[3],c=t[4],h=t[5],f=t[6],b=t[7],v=t[8],g=t[9],y=t[10],p=t[11],m=t[12],w=t[13],u=t[14],S=t[15],_=o[0],E=o[1],L=o[2],C=o[3];return s[0]=_*r+E*c+L*v+C*m,s[1]=_*n+E*h+L*g+C*w,s[2]=_*a+E*f+L*y+C*u,s[3]=_*i+E*b+L*p+C*S,_=o[4],E=o[5],L=o[6],C=o[7],s[4]=_*r+E*c+L*v+C*m,s[5]=_*n+E*h+L*g+C*w,s[6]=_*a+E*f+L*y+C*u,s[7]=_*i+E*b+L*p+C*S,_=o[8],E=o[9],L=o[10],C=o[11],s[8]=_*r+E*c+L*v+C*m,s[9]=_*n+E*h+L*g+C*w,s[10]=_*a+E*f+L*y+C*u,s[11]=_*i+E*b+L*p+C*S,_=o[12],E=o[13],L=o[14],C=o[15],s[12]=_*r+E*c+L*v+C*m,s[13]=_*n+E*h+L*g+C*w,s[14]=_*a+E*f+L*y+C*u,s[15]=_*i+E*b+L*p+C*S,s}},5268:function(d){d.exports=function(s,t,o,r,n,a,i){var c=1/(t-o),h=1/(r-n),f=1/(a-i);return s[0]=-2*c,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*h,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*f,s[11]=0,s[12]=(t+o)*c,s[13]=(n+r)*h,s[14]=(i+a)*f,s[15]=1,s}},1120:function(d){d.exports=function(s,t,o,r,n){var a=1/Math.tan(t/2),i=1/(r-n);return s[0]=a/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=a,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(n+r)*i,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*n*r*i,s[15]=0,s}},4422:function(d){d.exports=function(s,t,o,r){var n,a,i,c,h,f,b,v,g,y,p,m,w,u,S,_,E,L,C,P,I,U,z,H,F=r[0],N=r[1],B=r[2],j=Math.sqrt(F*F+N*N+B*B);return Math.abs(j)<1e-6?null:(F*=j=1/j,N*=j,B*=j,n=Math.sin(o),i=1-(a=Math.cos(o)),c=t[0],h=t[1],f=t[2],b=t[3],v=t[4],g=t[5],y=t[6],p=t[7],m=t[8],w=t[9],u=t[10],S=t[11],_=F*F*i+a,E=N*F*i+B*n,L=B*F*i-N*n,C=F*N*i-B*n,P=N*N*i+a,I=B*N*i+F*n,U=F*B*i+N*n,z=N*B*i-F*n,H=B*B*i+a,s[0]=c*_+v*E+m*L,s[1]=h*_+g*E+w*L,s[2]=f*_+y*E+u*L,s[3]=b*_+p*E+S*L,s[4]=c*C+v*P+m*I,s[5]=h*C+g*P+w*I,s[6]=f*C+y*P+u*I,s[7]=b*C+p*P+S*I,s[8]=c*U+v*z+m*H,s[9]=h*U+g*z+w*H,s[10]=f*U+y*z+u*H,s[11]=b*U+p*z+S*H,t!==s&&(s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s)}},6109:function(d){d.exports=function(s,t,o){var r=Math.sin(o),n=Math.cos(o),a=t[4],i=t[5],c=t[6],h=t[7],f=t[8],b=t[9],v=t[10],g=t[11];return t!==s&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[4]=a*n+f*r,s[5]=i*n+b*r,s[6]=c*n+v*r,s[7]=h*n+g*r,s[8]=f*n-a*r,s[9]=b*n-i*r,s[10]=v*n-c*r,s[11]=g*n-h*r,s}},7115:function(d){d.exports=function(s,t,o){var r=Math.sin(o),n=Math.cos(o),a=t[0],i=t[1],c=t[2],h=t[3],f=t[8],b=t[9],v=t[10],g=t[11];return t!==s&&(s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=a*n-f*r,s[1]=i*n-b*r,s[2]=c*n-v*r,s[3]=h*n-g*r,s[8]=a*r+f*n,s[9]=i*r+b*n,s[10]=c*r+v*n,s[11]=h*r+g*n,s}},5240:function(d){d.exports=function(s,t,o){var r=Math.sin(o),n=Math.cos(o),a=t[0],i=t[1],c=t[2],h=t[3],f=t[4],b=t[5],v=t[6],g=t[7];return t!==s&&(s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=a*n+f*r,s[1]=i*n+b*r,s[2]=c*n+v*r,s[3]=h*n+g*r,s[4]=f*n-a*r,s[5]=b*n-i*r,s[6]=v*n-c*r,s[7]=g*n-h*r,s}},3668:function(d){d.exports=function(s,t,o){var r=o[0],n=o[1],a=o[2];return s[0]=t[0]*r,s[1]=t[1]*r,s[2]=t[2]*r,s[3]=t[3]*r,s[4]=t[4]*n,s[5]=t[5]*n,s[6]=t[6]*n,s[7]=t[7]*n,s[8]=t[8]*a,s[9]=t[9]*a,s[10]=t[10]*a,s[11]=t[11]*a,s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s}},998:function(d){d.exports=function(s,t,o){var r,n,a,i,c,h,f,b,v,g,y,p,m=o[0],w=o[1],u=o[2];return t===s?(s[12]=t[0]*m+t[4]*w+t[8]*u+t[12],s[13]=t[1]*m+t[5]*w+t[9]*u+t[13],s[14]=t[2]*m+t[6]*w+t[10]*u+t[14],s[15]=t[3]*m+t[7]*w+t[11]*u+t[15]):(r=t[0],n=t[1],a=t[2],i=t[3],c=t[4],h=t[5],f=t[6],b=t[7],v=t[8],g=t[9],y=t[10],p=t[11],s[0]=r,s[1]=n,s[2]=a,s[3]=i,s[4]=c,s[5]=h,s[6]=f,s[7]=b,s[8]=v,s[9]=g,s[10]=y,s[11]=p,s[12]=r*m+c*w+v*u+t[12],s[13]=n*m+h*w+g*u+t[13],s[14]=a*m+f*w+y*u+t[14],s[15]=i*m+b*w+p*u+t[15]),s}},2142:function(d){d.exports=function(s,t){if(s===t){var o=t[1],r=t[2],n=t[3],a=t[6],i=t[7],c=t[11];s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=o,s[6]=t[9],s[7]=t[13],s[8]=r,s[9]=a,s[11]=t[14],s[12]=n,s[13]=i,s[14]=c}else s[0]=t[0],s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=t[1],s[5]=t[5],s[6]=t[9],s[7]=t[13],s[8]=t[2],s[9]=t[6],s[10]=t[10],s[11]=t[14],s[12]=t[3],s[13]=t[7],s[14]=t[11],s[15]=t[15];return s}},4340:function(d,s,t){var o=t(957),r=t(7309);function n(c,h){for(var f=[0,0,0,0],b=0;b<4;++b)for(var v=0;v<4;++v)f[v]+=c[4*b+v]*h[b];return f}function a(c,h,f,b,v){for(var g=n(b,n(f,n(h,[c[0],c[1],c[2],1]))),y=0;y<3;++y)g[y]/=g[3];return[.5*v[0]*(1+g[0]),.5*v[1]*(1-g[1])]}function i(c,h){for(var f=[0,0,0],b=0;b<c.length;++b)for(var v=c[b],g=h[b],y=0;y<3;++y)f[y]+=g*v[y];return f}d.exports=function(c,h,f,b,v,g){if(c.length===1)return[0,c[0].slice()];for(var y=new Array(c.length),p=0;p<c.length;++p)y[p]=a(c[p],f,b,v,g);var m=0,w=1/0;for(p=0;p<y.length;++p){for(var u=0,S=0;S<2;++S)u+=Math.pow(y[p][S]-h[S],2);u<w&&(w=u,m=p)}var _=function(L,C){if(L.length===2){for(var P=0,I=0,U=0;U<2;++U)P+=Math.pow(C[U]-L[0][U],2),I+=Math.pow(C[U]-L[1][U],2);return(P=Math.sqrt(P))+(I=Math.sqrt(I))<1e-6?[1,0]:[I/(P+I),P/(I+P)]}if(L.length===3){var z=[0,0];return r(L[0],L[1],L[2],C,z),o(L,z)}return[]}(y,h),E=0;for(p=0;p<3;++p){if(_[p]<-.001||_[p]>1.0001)return null;E+=_[p]}return Math.abs(E-1)>.001?null:[m,i(c,_),_]}},2056:function(d,s,t){var o=t(6832),r=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),n=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),a=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),i=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),h=o([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),f=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),b=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),v=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),g=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),y=o([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.wireShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.pointShader={vertex:c,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},s.pickShader={vertex:f,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},s.pointPickShader={vertex:v,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},s.contourShader={vertex:g,fragment:y,attributes:[{name:"position",type:"vec3"}]}},8116:function(d,s,t){var o=t(5158),r=t(5827),n=t(2944),a=t(8931),i=t(115),c=t(104),h=t(7437),f=t(5050),b=t(9156),v=t(7212),g=t(5306),y=t(2056),p=t(4340),m=y.meshShader,w=y.wireShader,u=y.pointShader,S=y.pickShader,_=y.pointPickShader,E=y.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function C(j,K,G,V,W,J,X,ee,re,ie,se,fe,ye,ge,he,ve,Oe,xe,ke,Me,Te,Q,oe,ce,me,Ae,Ie){this.gl=j,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=K,this.dirty=!0,this.triShader=G,this.lineShader=V,this.pointShader=W,this.pickShader=J,this.pointPickShader=X,this.contourShader=ee,this.trianglePositions=re,this.triangleColors=se,this.triangleNormals=ye,this.triangleUVs=fe,this.triangleIds=ie,this.triangleVAO=ge,this.triangleCount=0,this.lineWidth=1,this.edgePositions=he,this.edgeColors=Oe,this.edgeUVs=xe,this.edgeIds=ve,this.edgeVAO=ke,this.edgeCount=0,this.pointPositions=Me,this.pointColors=Q,this.pointUVs=oe,this.pointSizes=ce,this.pointIds=Te,this.pointVAO=me,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Ae,this.contourVAO=Ie,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var P=C.prototype;function I(j,K){if(!K||!K.length)return 1;for(var G=0;G<K.length;++G){if(K.length<2)return 1;if(K[G][0]===j)return K[G][1];if(K[G][0]>j&&G>0){var V=(K[G][0]-j)/(K[G][0]-K[G-1][0]);return K[G][1]*(1-V)+V*K[G-1][1]}}return 1}function U(j){var K=o(j,m.vertex,m.fragment);return K.attributes.position.location=0,K.attributes.color.location=2,K.attributes.uv.location=3,K.attributes.normal.location=4,K}function z(j){var K=o(j,w.vertex,w.fragment);return K.attributes.position.location=0,K.attributes.color.location=2,K.attributes.uv.location=3,K}function H(j){var K=o(j,u.vertex,u.fragment);return K.attributes.position.location=0,K.attributes.color.location=2,K.attributes.uv.location=3,K.attributes.pointSize.location=4,K}function F(j){var K=o(j,S.vertex,S.fragment);return K.attributes.position.location=0,K.attributes.id.location=1,K}function N(j){var K=o(j,_.vertex,_.fragment);return K.attributes.position.location=0,K.attributes.id.location=1,K.attributes.pointSize.location=4,K}function B(j){var K=o(j,E.vertex,E.fragment);return K.attributes.position.location=0,K}P.isOpaque=function(){return!this.hasAlpha},P.isTransparent=function(){return this.hasAlpha},P.pickSlots=1,P.setPickBase=function(j){this.pickId=j},P.highlight=function(j){if(j&&this.contourEnable){for(var K=v(this.cells,this.intensity,j.intensity),G=K.cells,V=K.vertexIds,W=K.vertexWeights,J=G.length,X=g.mallocFloat32(6*J),ee=0,re=0;re<J;++re)for(var ie=G[re],se=0;se<2;++se){var fe=ie[0];ie.length===2&&(fe=ie[se]);for(var ye=V[fe][0],ge=V[fe][1],he=W[fe],ve=1-he,Oe=this.positions[ye],xe=this.positions[ge],ke=0;ke<3;++ke)X[ee++]=he*Oe[ke]+ve*xe[ke]}this.contourCount=ee/3|0,this.contourPositions.update(X.subarray(0,ee)),g.free(X)}else this.contourCount=0},P.update=function(j){j=j||{};var K=this.gl;this.dirty=!0,"contourEnable"in j&&(this.contourEnable=j.contourEnable),"contourColor"in j&&(this.contourColor=j.contourColor),"lineWidth"in j&&(this.lineWidth=j.lineWidth),"lightPosition"in j&&(this.lightPosition=j.lightPosition),this.hasAlpha=!1,"opacity"in j&&(this.opacity=j.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in j&&(this.opacityscale=j.opacityscale,this.hasAlpha=!0),"ambient"in j&&(this.ambientLight=j.ambient),"diffuse"in j&&(this.diffuseLight=j.diffuse),"specular"in j&&(this.specularLight=j.specular),"roughness"in j&&(this.roughness=j.roughness),"fresnel"in j&&(this.fresnel=j.fresnel),j.texture?(this.texture.dispose(),this.texture=a(K,j.texture)):j.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=K.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=K.LINEAR,this.texture.setPixels(function(Rt,Ge){for(var We=b({colormap:Rt,nshades:256,format:"rgba"}),Be=new Uint8Array(1024),Ye=0;Ye<256;++Ye){for(var rt=We[Ye],Se=0;Se<3;++Se)Be[4*Ye+Se]=rt[Se];Be[4*Ye+3]=Ge?255*I(Ye/255,Ge):255*rt[3]}return f(Be,[256,256,4],[4,0,1])}(j.colormap,this.opacityscale)),this.texture.generateMipmap());var G=j.cells,V=j.positions;if(V&&G){var W=[],J=[],X=[],ee=[],re=[],ie=[],se=[],fe=[],ye=[],ge=[],he=[],ve=[],Oe=[],xe=[];this.cells=G,this.positions=V;var ke=j.vertexNormals,Me=j.cellNormals,Te=j.vertexNormalsEpsilon===void 0?1e-6:j.vertexNormalsEpsilon,Q=j.faceNormalsEpsilon===void 0?1e-6:j.faceNormalsEpsilon;j.useFacetNormals&&!Me&&(Me=i.faceNormals(G,V,Q)),Me||ke||(ke=i.vertexNormals(G,V,Te));var oe=j.vertexColors,ce=j.cellColors,me=j.meshColor||[1,1,1,1],Ae=j.vertexUVs,Ie=j.vertexIntensity,Ce=j.cellUVs,Re=j.cellIntensity,le=1/0,de=-1/0;if(!Ae&&!Ce)if(Ie)if(j.vertexIntensityBounds)le=+j.vertexIntensityBounds[0],de=+j.vertexIntensityBounds[1];else for(var _e=0;_e<Ie.length;++_e){var Fe=Ie[_e];le=Math.min(le,Fe),de=Math.max(de,Fe)}else if(Re)if(j.cellIntensityBounds)le=+j.cellIntensityBounds[0],de=+j.cellIntensityBounds[1];else for(_e=0;_e<Re.length;++_e)Fe=Re[_e],le=Math.min(le,Fe),de=Math.max(de,Fe);else for(_e=0;_e<V.length;++_e)Fe=V[_e][2],le=Math.min(le,Fe),de=Math.max(de,Fe);this.intensity=Ie||Re||function(Rt){for(var Ge=Rt.length,We=new Array(Ge),Be=0;Be<Ge;++Be)We[Be]=Rt[Be][2];return We}(V),this.pickVertex=!(Re||ce);var Ve=j.pointSizes,He=j.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],_e=0;_e<V.length;++_e)for(var nt=V[_e],tt=0;tt<3;++tt)!isNaN(nt[tt])&&isFinite(nt[tt])&&(this.bounds[0][tt]=Math.min(this.bounds[0][tt],nt[tt]),this.bounds[1][tt]=Math.max(this.bounds[1][tt],nt[tt]));var ot=0,dt=0,kt=0;e:for(_e=0;_e<G.length;++_e){var mt=G[_e];switch(mt.length){case 1:for(nt=V[Lt=mt[0]],tt=0;tt<3;++tt)if(isNaN(nt[tt])||!isFinite(nt[tt]))continue e;ge.push(nt[0],nt[1],nt[2]),Ct=oe?oe[Lt]:ce?ce[_e]:me,this.opacityscale&&Ie?J.push(Ct[0],Ct[1],Ct[2],this.opacity*I((Ie[Lt]-le)/(de-le),this.opacityscale)):Ct.length===3?he.push(Ct[0],Ct[1],Ct[2],this.opacity):(he.push(Ct[0],Ct[1],Ct[2],Ct[3]*this.opacity),Ct[3]<1&&(this.hasAlpha=!0)),It=Ae?Ae[Lt]:Ie?[(Ie[Lt]-le)/(de-le),0]:Ce?Ce[_e]:Re?[(Re[_e]-le)/(de-le),0]:[(nt[2]-le)/(de-le),0],ve.push(It[0],It[1]),Ve?Oe.push(Ve[Lt]):Oe.push(He),xe.push(_e),kt+=1;break;case 2:for(tt=0;tt<2;++tt){nt=V[Lt=mt[tt]];for(var wt=0;wt<3;++wt)if(isNaN(nt[wt])||!isFinite(nt[wt]))continue e}for(tt=0;tt<2;++tt)nt=V[Lt=mt[tt]],ie.push(nt[0],nt[1],nt[2]),Ct=oe?oe[Lt]:ce?ce[_e]:me,this.opacityscale&&Ie?J.push(Ct[0],Ct[1],Ct[2],this.opacity*I((Ie[Lt]-le)/(de-le),this.opacityscale)):Ct.length===3?se.push(Ct[0],Ct[1],Ct[2],this.opacity):(se.push(Ct[0],Ct[1],Ct[2],Ct[3]*this.opacity),Ct[3]<1&&(this.hasAlpha=!0)),It=Ae?Ae[Lt]:Ie?[(Ie[Lt]-le)/(de-le),0]:Ce?Ce[_e]:Re?[(Re[_e]-le)/(de-le),0]:[(nt[2]-le)/(de-le),0],fe.push(It[0],It[1]),ye.push(_e);dt+=1;break;case 3:for(tt=0;tt<3;++tt)for(nt=V[Lt=mt[tt]],wt=0;wt<3;++wt)if(isNaN(nt[wt])||!isFinite(nt[wt]))continue e;for(tt=0;tt<3;++tt){var Lt,Ct,It,Ut;nt=V[Lt=mt[2-tt]],W.push(nt[0],nt[1],nt[2]),(Ct=oe?oe[Lt]:ce?ce[_e]:me)?this.opacityscale&&Ie?J.push(Ct[0],Ct[1],Ct[2],this.opacity*I((Ie[Lt]-le)/(de-le),this.opacityscale)):Ct.length===3?J.push(Ct[0],Ct[1],Ct[2],this.opacity):(J.push(Ct[0],Ct[1],Ct[2],Ct[3]*this.opacity),Ct[3]<1&&(this.hasAlpha=!0)):J.push(.5,.5,.5,1),It=Ae?Ae[Lt]:Ie?[(Ie[Lt]-le)/(de-le),0]:Ce?Ce[_e]:Re?[(Re[_e]-le)/(de-le),0]:[(nt[2]-le)/(de-le),0],ee.push(It[0],It[1]),Ut=ke?ke[Lt]:Me[_e],X.push(Ut[0],Ut[1],Ut[2]),re.push(_e)}ot+=1}}this.pointCount=kt,this.edgeCount=dt,this.triangleCount=ot,this.pointPositions.update(ge),this.pointColors.update(he),this.pointUVs.update(ve),this.pointSizes.update(Oe),this.pointIds.update(new Uint32Array(xe)),this.edgePositions.update(ie),this.edgeColors.update(se),this.edgeUVs.update(fe),this.edgeIds.update(new Uint32Array(ye)),this.trianglePositions.update(W),this.triangleColors.update(J),this.triangleUVs.update(ee),this.triangleNormals.update(X),this.triangleIds.update(new Uint32Array(re))}},P.drawTransparent=P.draw=function(j){j=j||{};for(var K=this.gl,G=j.model||L,V=j.view||L,W=j.projection||L,J=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],X=0;X<3;++X)J[0][X]=Math.max(J[0][X],this.clipBounds[0][X]),J[1][X]=Math.min(J[1][X],this.clipBounds[1][X]);var ee={model:G,view:V,projection:W,inverseModel:L.slice(),clipBounds:J,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};ee.inverseModel=h(ee.inverseModel,ee.model),K.disable(K.CULL_FACE),this.texture.bind(0);var re=new Array(16);for(c(re,ee.view,ee.model),c(re,ee.projection,re),h(re,re),X=0;X<3;++X)ee.eyePosition[X]=re[12+X]/re[15];var ie,se=re[15];for(X=0;X<3;++X)se+=this.lightPosition[X]*re[4*X+3];for(X=0;X<3;++X){for(var fe=re[12+X],ye=0;ye<3;++ye)fe+=re[4*ye+X]*this.lightPosition[ye];ee.lightPosition[X]=fe/se}this.triangleCount>0&&((ie=this.triShader).bind(),ie.uniforms=ee,this.triangleVAO.bind(),K.drawArrays(K.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ie=this.lineShader).bind(),ie.uniforms=ee,this.edgeVAO.bind(),K.lineWidth(this.lineWidth*this.pixelRatio),K.drawArrays(K.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ie=this.pointShader).bind(),ie.uniforms=ee,this.pointVAO.bind(),K.drawArrays(K.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ie=this.contourShader).bind(),ie.uniforms=ee,this.contourVAO.bind(),K.drawArrays(K.LINES,0,this.contourCount),this.contourVAO.unbind())},P.drawPick=function(j){j=j||{};for(var K=this.gl,G=j.model||L,V=j.view||L,W=j.projection||L,J=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],X=0;X<3;++X)J[0][X]=Math.max(J[0][X],this.clipBounds[0][X]),J[1][X]=Math.min(J[1][X],this.clipBounds[1][X]);this._model=[].slice.call(G),this._view=[].slice.call(V),this._projection=[].slice.call(W),this._resolution=[K.drawingBufferWidth,K.drawingBufferHeight];var ee,re={model:G,view:V,projection:W,clipBounds:J,pickId:this.pickId/255};(ee=this.pickShader).bind(),ee.uniforms=re,this.triangleCount>0&&(this.triangleVAO.bind(),K.drawArrays(K.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),K.lineWidth(this.lineWidth*this.pixelRatio),K.drawArrays(K.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ee=this.pointPickShader).bind(),ee.uniforms=re,this.pointVAO.bind(),K.drawArrays(K.POINTS,0,this.pointCount),this.pointVAO.unbind())},P.pick=function(j){if(!j||j.id!==this.pickId)return null;for(var K=j.value[0]+256*j.value[1]+65536*j.value[2],G=this.cells[K],V=this.positions,W=new Array(G.length),J=0;J<G.length;++J)W[J]=V[G[J]];var X=j.coord[0],ee=j.coord[1];if(!this.pickVertex){var re=this.positions[G[0]],ie=this.positions[G[1]],se=this.positions[G[2]],fe=[(re[0]+ie[0]+se[0])/3,(re[1]+ie[1]+se[1])/3,(re[2]+ie[2]+se[2])/3];return{_cellCenter:!0,position:[X,ee],index:K,cell:G,cellId:K,intensity:this.intensity[K],dataCoordinate:fe}}var ye=p(W,[X*this.pixelRatio,this._resolution[1]-ee*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ye)return null;var ge=ye[2],he=0;for(J=0;J<G.length;++J)he+=ge[J]*this.intensity[G[J]];return{position:ye[1],index:G[ye[0]],cell:G,cellId:K,intensity:he,dataCoordinate:this.positions[G[ye[0]]]}},P.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},d.exports=function(j,K){arguments.length===1&&(j=(K=j).gl);var G=j.getExtension("OES_standard_derivatives")||j.getExtension("MOZ_OES_standard_derivatives")||j.getExtension("WEBKIT_OES_standard_derivatives");if(!G)throw new Error("derivatives not supported");var V=U(j),W=z(j),J=H(j),X=F(j),ee=N(j),re=B(j),ie=a(j,f(new Uint8Array([255,255,255,255]),[1,1,4]));ie.generateMipmap(),ie.minFilter=j.LINEAR_MIPMAP_LINEAR,ie.magFilter=j.LINEAR;var se=r(j),fe=r(j),ye=r(j),ge=r(j),he=r(j),ve=n(j,[{buffer:se,type:j.FLOAT,size:3},{buffer:he,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:fe,type:j.FLOAT,size:4},{buffer:ye,type:j.FLOAT,size:2},{buffer:ge,type:j.FLOAT,size:3}]),Oe=r(j),xe=r(j),ke=r(j),Me=r(j),Te=n(j,[{buffer:Oe,type:j.FLOAT,size:3},{buffer:Me,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:xe,type:j.FLOAT,size:4},{buffer:ke,type:j.FLOAT,size:2}]),Q=r(j),oe=r(j),ce=r(j),me=r(j),Ae=r(j),Ie=n(j,[{buffer:Q,type:j.FLOAT,size:3},{buffer:Ae,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:oe,type:j.FLOAT,size:4},{buffer:ce,type:j.FLOAT,size:2},{buffer:me,type:j.FLOAT,size:1}]),Ce=r(j),Re=n(j,[{buffer:Ce,type:j.FLOAT,size:3}]),le=new C(j,ie,V,W,J,X,ee,re,se,he,fe,ye,ge,ve,Oe,Me,xe,ke,Te,Q,Ae,oe,ce,me,Ie,Ce,Re);return le.update(K),le}},4554:function(d,s,t){d.exports=function(f){var b=f.gl;return new a(f,o(b,[0,0,0,1,1,0,1,1]),r(b,n.boxVert,n.lineFrag))};var o=t(5827),r=t(5158),n=t(2709);function a(f,b,v){this.plot=f,this.vbo=b,this.shader=v}var i,c,h=a.prototype;h.bind=function(){var f=this.shader;this.vbo.bind(),this.shader.bind(),f.attributes.coord.pointer(),f.uniforms.screenBox=this.plot.screenBox},h.drawBox=(i=[0,0],c=[0,0],function(f,b,v,g,y){var p=this.plot,m=this.shader,w=p.gl;i[0]=f,i[1]=b,c[0]=v,c[1]=g,m.uniforms.lo=i,m.uniforms.hi=c,m.uniforms.color=y,w.drawArrays(w.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(d,s,t){d.exports=function(p){var m=p.gl;return new i(p,o(m),r(m,a.gridVert,a.gridFrag),r(m,a.tickVert,a.gridFrag))};var o=t(5827),r=t(5158),n=t(5070),a=t(2709);function i(p,m,w,u){this.plot=p,this.vbo=m,this.shader=w,this.tickShader=u,this.ticks=[[],[]]}function c(p,m){return p-m}var h,f,b,v,g,y=i.prototype;y.draw=(h=[0,0],f=[0,0],b=[0,0],function(){for(var p=this.plot,m=this.vbo,w=this.shader,u=this.ticks,S=p.gl,_=p._tickBounds,E=p.dataBox,L=p.viewBox,C=p.gridLineWidth,P=p.gridLineColor,I=p.gridLineEnable,U=p.pixelRatio,z=0;z<2;++z){var H=_[z],F=_[z+2]-H,N=.5*(E[z+2]+E[z]),B=E[z+2]-E[z];f[z]=2*F/B,h[z]=2*(H-N)/B}w.bind(),m.bind(),w.attributes.dataCoord.pointer(),w.uniforms.dataShift=h,w.uniforms.dataScale=f;var j=0;for(z=0;z<2;++z){b[0]=b[1]=0,b[z]=1,w.uniforms.dataAxis=b,w.uniforms.lineWidth=C[z]/(L[z+2]-L[z])*U,w.uniforms.color=P[z];var K=6*u[z].length;I[z]&&K&&S.drawArrays(S.TRIANGLES,j,K),j+=K}}),y.drawTickMarks=function(){var p=[0,0],m=[0,0],w=[1,0],u=[0,1],S=[0,0],_=[0,0];return function(){for(var E=this.plot,L=this.vbo,C=this.tickShader,P=this.ticks,I=E.gl,U=E._tickBounds,z=E.dataBox,H=E.viewBox,F=E.pixelRatio,N=E.screenBox,B=N[2]-N[0],j=N[3]-N[1],K=H[2]-H[0],G=H[3]-H[1],V=0;V<2;++V){var W=U[V],J=U[V+2]-W,X=.5*(z[V+2]+z[V]),ee=z[V+2]-z[V];m[V]=2*J/ee,p[V]=2*(W-X)/ee}m[0]*=K/B,p[0]*=K/B,m[1]*=G/j,p[1]*=G/j,C.bind(),L.bind(),C.attributes.dataCoord.pointer();var re=C.uniforms;re.dataShift=p,re.dataScale=m;var ie=E.tickMarkLength,se=E.tickMarkWidth,fe=E.tickMarkColor,ye=6*P[0].length,ge=Math.min(n.ge(P[0],(z[0]-U[0])/(U[2]-U[0]),c),P[0].length),he=Math.min(n.gt(P[0],(z[2]-U[0])/(U[2]-U[0]),c),P[0].length),ve=0+6*ge,Oe=6*Math.max(0,he-ge),xe=Math.min(n.ge(P[1],(z[1]-U[1])/(U[3]-U[1]),c),P[1].length),ke=Math.min(n.gt(P[1],(z[3]-U[1])/(U[3]-U[1]),c),P[1].length),Me=ye+6*xe,Te=6*Math.max(0,ke-xe);S[0]=2*(H[0]-ie[1])/B-1,S[1]=(H[3]+H[1])/j-1,_[0]=ie[1]*F/B,_[1]=se[1]*F/j,Te&&(re.color=fe[1],re.tickScale=_,re.dataAxis=u,re.screenOffset=S,I.drawArrays(I.TRIANGLES,Me,Te)),S[0]=(H[2]+H[0])/B-1,S[1]=2*(H[1]-ie[0])/j-1,_[0]=se[0]*F/B,_[1]=ie[0]*F/j,Oe&&(re.color=fe[0],re.tickScale=_,re.dataAxis=w,re.screenOffset=S,I.drawArrays(I.TRIANGLES,ve,Oe)),S[0]=2*(H[2]+ie[3])/B-1,S[1]=(H[3]+H[1])/j-1,_[0]=ie[3]*F/B,_[1]=se[3]*F/j,Te&&(re.color=fe[3],re.tickScale=_,re.dataAxis=u,re.screenOffset=S,I.drawArrays(I.TRIANGLES,Me,Te)),S[0]=(H[2]+H[0])/B-1,S[1]=2*(H[3]+ie[2])/j-1,_[0]=se[2]*F/B,_[1]=ie[2]*F/j,Oe&&(re.color=fe[2],re.tickScale=_,re.dataAxis=w,re.screenOffset=S,I.drawArrays(I.TRIANGLES,ve,Oe))}}(),y.update=(v=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1],function(p){for(var m=p.ticks,w=p.bounds,u=new Float32Array(18*(m[0].length+m[1].length)),S=(this.plot.zeroLineEnable,0),_=[[],[]],E=0;E<2;++E)for(var L=_[E],C=m[E],P=w[E],I=w[E+2],U=0;U<C.length;++U){var z=(C[U].x-P)/(I-P);L.push(z);for(var H=0;H<6;++H)u[S++]=z,u[S++]=v[H],u[S++]=g[H]}this.ticks=_,this.vbo.update(u)}),y.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(d,s,t){d.exports=function(f){var b=f.gl;return new a(f,o(b,[-1,-1,-1,1,1,-1,1,1]),r(b,n.lineVert,n.lineFrag))};var o=t(5827),r=t(5158),n=t(2709);function a(f,b,v){this.plot=f,this.vbo=b,this.shader=v}var i,c,h=a.prototype;h.bind=function(){var f=this.shader;this.vbo.bind(),this.shader.bind(),f.attributes.coord.pointer(),f.uniforms.screenBox=this.plot.screenBox},h.drawLine=(i=[0,0],c=[0,0],function(f,b,v,g,y,p){var m=this.plot,w=this.shader,u=m.gl;i[0]=f,i[1]=b,c[0]=v,c[1]=g,w.uniforms.start=i,w.uniforms.end=c,w.uniforms.width=y*m.pixelRatio,w.uniforms.color=p,u.drawArrays(u.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(d,s,t){var o=t(6832),r=o([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);d.exports={lineVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:r,textVert:o([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:r,gridVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:r,boxVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},5613:function(d,s,t){d.exports=function(m){var w=m.gl;return new c(m,o(w),r(w,i.textVert,i.textFrag))};var o=t(5827),r=t(5158),n=t(6946),a=t(5070),i=t(2709);function c(m,w,u){this.plot=m,this.vbo=w,this.shader=u,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var h,f,b,v,g,y,p=c.prototype;p.drawTicks=(h=[0,0],f=[0,0],b=[0,0],function(m){var w=this.plot,u=this.shader,S=this.tickX[m],_=this.tickOffset[m],E=w.gl,L=w.viewBox,C=w.dataBox,P=w.screenBox,I=w.pixelRatio,U=w.tickEnable,z=w.tickPad,H=w.tickColor,F=w.tickAngle,N=w.labelEnable,B=w.labelPad,j=w.labelColor,K=w.labelAngle,G=this.labelOffset[m],V=this.labelCount[m],W=a.lt(S,C[m]),J=a.le(S,C[m+2]);h[0]=h[1]=0,h[m]=1,f[m]=(L[2+m]+L[m])/(P[2+m]-P[m])-1;var X=2/P[2+(1^m)]-P[1^m];f[1^m]=X*L[1^m]-1,U[m]&&(f[1^m]-=X*I*z[m],W<J&&_[J]>_[W]&&(u.uniforms.dataAxis=h,u.uniforms.screenOffset=f,u.uniforms.color=H[m],u.uniforms.angle=F[m],E.drawArrays(E.TRIANGLES,_[W],_[J]-_[W]))),N[m]&&V&&(f[1^m]-=X*I*B[m],u.uniforms.dataAxis=b,u.uniforms.screenOffset=f,u.uniforms.color=j[m],u.uniforms.angle=K[m],E.drawArrays(E.TRIANGLES,G,V)),f[1^m]=X*L[2+(1^m)]-1,U[m+2]&&(f[1^m]+=X*I*z[m+2],W<J&&_[J]>_[W]&&(u.uniforms.dataAxis=h,u.uniforms.screenOffset=f,u.uniforms.color=H[m+2],u.uniforms.angle=F[m+2],E.drawArrays(E.TRIANGLES,_[W],_[J]-_[W]))),N[m+2]&&V&&(f[1^m]+=X*I*B[m+2],u.uniforms.dataAxis=b,u.uniforms.screenOffset=f,u.uniforms.color=j[m+2],u.uniforms.angle=K[m+2],E.drawArrays(E.TRIANGLES,G,V))}),p.drawTitle=function(){var m=[0,0],w=[0,0];return function(){var u=this.plot,S=this.shader,_=u.gl,E=u.screenBox,L=u.titleCenter,C=u.titleAngle,P=u.titleColor,I=u.pixelRatio;if(this.titleCount){for(var U=0;U<2;++U)w[U]=2*(L[U]*I-E[U])/(E[2+U]-E[U])-1;S.bind(),S.uniforms.dataAxis=m,S.uniforms.screenOffset=w,S.uniforms.angle=C,S.uniforms.color=P,_.drawArrays(_.TRIANGLES,this.titleOffset,this.titleCount)}}}(),p.bind=(v=[0,0],g=[0,0],y=[0,0],function(){var m=this.plot,w=this.shader,u=m._tickBounds,S=m.dataBox,_=m.screenBox,E=m.viewBox;w.bind();for(var L=0;L<2;++L){var C=u[L],P=u[L+2]-C,I=.5*(S[L+2]+S[L]),U=S[L+2]-S[L],z=E[L],H=E[L+2]-z,F=_[L],N=_[L+2]-F;g[L]=2*P/U*H/N,v[L]=2*(C-I)/U*H/N}y[1]=2*m.pixelRatio/(_[3]-_[1]),y[0]=y[1]*(_[3]-_[1])/(_[2]-_[0]),w.uniforms.dataScale=g,w.uniforms.dataShift=v,w.uniforms.textScale=y,this.vbo.bind(),w.attributes.textCoordinate.pointer()}),p.update=function(m){var w,u,S,_,E,L=[],C=m.ticks,P=m.bounds;for(E=0;E<2;++E){var I=[Math.floor(L.length/3)],U=[-1/0],z=C[E];for(w=0;w<z.length;++w){var H=z[w],F=H.x,N=H.text,B=H.font||"sans-serif";_=H.fontSize||12;for(var j=1/(P[E+2]-P[E]),K=P[E],G=N.split(`
`),V=0;V<G.length;V++)for(S=n(B,G[V]).data,u=0;u<S.length;u+=2)L.push(S[u]*_,-S[u+1]*_-V*_*1.2,(F-K)*j);I.push(Math.floor(L.length/3)),U.push(F)}this.tickOffset[E]=I,this.tickX[E]=U}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(L.length/3),S=n(m.labelFont[E],m.labels[E],{textAlign:"center"}).data,_=m.labelSize[E],w=0;w<S.length;w+=2)L.push(S[w]*_,-S[w+1]*_,0);this.labelCount[E]=Math.floor(L.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(L.length/3),S=n(m.titleFont,m.title).data,_=m.titleSize,w=0;w<S.length;w+=2)L.push(S[w]*_,-S[w+1]*_,0);this.titleCount=Math.floor(L.length/3)-this.titleOffset,this.vbo.update(L)},p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(d,s,t){d.exports=function(v){var g=v.gl,y=new c(g,o(g,[g.drawingBufferWidth,g.drawingBufferHeight]));return y.grid=r(y),y.text=n(y),y.line=a(y),y.box=i(y),y.update(v),y};var o=t(2611),r=t(3016),n=t(5613),a=t(1154),i=t(4554);function c(v,g){this.gl=v,this.pickBuffer=g,this.screenBox=[0,0,v.drawingBufferWidth,v.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var h=c.prototype;function f(v){for(var g=v.slice(),y=0;y<g.length;++y)g[y]=g[y].slice();return g}function b(v,g){return v.x-g.x}h.setDirty=function(){this.dirty=this.pickDirty=!0},h.setOverlayDirty=function(){this.dirty=!0},h.nextDepthValue=function(){return this._depthCounter++/65536},h.draw=function(){var v=this.gl,g=this.screenBox,y=this.viewBox,p=this.dataBox,m=this.pixelRatio,w=this.grid,u=this.line,S=this.text,_=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,v.bindFramebuffer(v.FRAMEBUFFER,null),v.enable(v.SCISSOR_TEST),v.disable(v.DEPTH_TEST),v.depthFunc(v.LESS),v.depthMask(!1),v.enable(v.BLEND),v.blendEquation(v.FUNC_ADD,v.FUNC_ADD),v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA),this.borderColor){v.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]);var E=this.borderColor;v.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),v.clear(v.COLOR_BUFFER_BIT|v.DEPTH_BUFFER_BIT)}v.scissor(y[0],y[1],y[2]-y[0],y[3]-y[1]),v.viewport(y[0],y[1],y[2]-y[0],y[3]-y[1]);var L=this.backgroundColor;v.clearColor(L[0]*L[3],L[1]*L[3],L[2]*L[3],L[3]),v.clear(v.COLOR_BUFFER_BIT),w.draw();var C=this.zeroLineEnable,P=this.zeroLineColor,I=this.zeroLineWidth;if(C[0]||C[1]){u.bind();for(var U=0;U<2;++U)if(C[U]&&p[U]<=0&&p[U+2]>=0){var z=g[U]-p[U]*(g[U+2]-g[U])/(p[U+2]-p[U]);U===0?u.drawLine(z,g[1],z,g[3],I[U],P[U]):u.drawLine(g[0],z,g[2],z,I[U],P[U])}}for(U=0;U<_.length;++U)_[U].draw();v.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]),v.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),this.grid.drawTickMarks(),u.bind();var H=this.borderLineEnable,F=this.borderLineWidth,N=this.borderLineColor;for(H[1]&&u.drawLine(y[0],y[1]-.5*F[1]*m,y[0],y[3]+.5*F[3]*m,F[1],N[1]),H[0]&&u.drawLine(y[0]-.5*F[0]*m,y[1],y[2]+.5*F[2]*m,y[1],F[0],N[0]),H[3]&&u.drawLine(y[2],y[1]-.5*F[1]*m,y[2],y[3]+.5*F[3]*m,F[3],N[3]),H[2]&&u.drawLine(y[0]-.5*F[0]*m,y[3],y[2]+.5*F[2]*m,y[3],F[2],N[2]),S.bind(),U=0;U<2;++U)S.drawTicks(U);this.titleEnable&&S.drawTitle();var B=this.overlays;for(U=0;U<B.length;++U)B[U].draw();v.disable(v.SCISSOR_TEST),v.disable(v.BLEND),v.depthMask(!0)}},h.drawPick=function(){if(!this.static){var v=this.pickBuffer;this.gl,this._pickTimeout=null,v.begin();for(var g=1,y=this.objects,p=0;p<y.length;++p)g=y[p].drawPick(g);v.end()}},h.pick=function(v,g){if(!this.static){var y=this.pixelRatio,p=this.pickPixelRatio,m=this.viewBox,w=0|Math.round((v-m[0]/y)*p),u=0|Math.round((g-m[1]/y)*p),S=this.pickBuffer.query(w,u,this.pickRadius);if(!S)return null;for(var _=S.id+(S.value[0]<<8)+(S.value[1]<<16)+(S.value[2]<<24),E=this.objects,L=0;L<E.length;++L){var C=E[L].pick(w,u,_);if(C)return C}return null}},h.setScreenBox=function(v){var g=this.screenBox,y=this.pixelRatio;g[0]=0|Math.round(v[0]*y),g[1]=0|Math.round(v[1]*y),g[2]=0|Math.round(v[2]*y),g[3]=0|Math.round(v[3]*y),this.setDirty()},h.setDataBox=function(v){var g=this.dataBox;(g[0]!==v[0]||g[1]!==v[1]||g[2]!==v[2]||g[3]!==v[3])&&(g[0]=v[0],g[1]=v[1],g[2]=v[2],g[3]=v[3],this.setDirty())},h.setViewBox=function(v){var g=this.pixelRatio,y=this.viewBox;y[0]=0|Math.round(v[0]*g),y[1]=0|Math.round(v[1]*g),y[2]=0|Math.round(v[2]*g),y[3]=0|Math.round(v[3]*g);var p=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((v[2]-v[0])*p),0|Math.round((v[3]-v[1])*p)],this.setDirty()},h.update=function(v){v=v||{};var g=this.gl;this.pixelRatio=v.pixelRatio||1;var y=this.pixelRatio;this.pickPixelRatio=Math.max(y,1),this.setScreenBox(v.screenBox||[0,0,g.drawingBufferWidth/y,g.drawingBufferHeight/y]),this.screenBox,this.setViewBox(v.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/y,.125*(this.screenBox[3]-this.screenBox[1])/y,.875*(this.screenBox[2]-this.screenBox[0])/y,.875*(this.screenBox[3]-this.screenBox[1])/y]);var p=this.viewBox,m=(p[2]-p[0])/(p[3]-p[1]);this.setDataBox(v.dataBox||[-10,-10/m,10,10/m]),this.borderColor=v.borderColor!==!1&&(v.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(v.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(v.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(v.gridLineWidth||[1,1]).slice(),this.gridLineColor=f(v.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(v.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(v.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=f(v.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(v.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(v.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=f(v.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(v.titleCenter||[.5*(p[0]+p[2])/y,(p[3]+120)/y]).slice(),this.titleEnable=!("titleEnable"in v)||!!v.titleEnable,this.titleAngle=v.titleAngle||0,this.titleColor=(v.titleColor||[0,0,0,1]).slice(),this.labelPad=(v.labelPad||[15,15,15,15]).slice(),this.labelAngle=(v.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(v.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=f(v.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(v.tickPad||[15,15,15,15]).slice(),this.tickAngle=(v.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(v.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=f(v.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(v.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(v.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=f(v.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var w=v.ticks||[[],[]],u=this._tickBounds;u[0]=u[1]=1/0,u[2]=u[3]=-1/0;for(var S=0;S<2;++S){var _=w[S].slice(0);_.length!==0&&(_.sort(b),u[S]=Math.min(u[S],_[0].x),u[S+2]=Math.max(u[S+2],_[_.length-1].x))}this.grid.update({bounds:u,ticks:w}),this.text.update({bounds:u,ticks:w,labels:v.labels||["x","y"],labelSize:v.labelSize||[12,12],labelFont:v.labelFont||["sans-serif","sans-serif"],title:v.title||"",titleSize:v.titleSize||18,titleFont:v.titleFont||"sans-serif"}),this.static=!!v.static,this.setDirty()},h.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var v=this.objects.length-1;v>=0;--v)this.objects[v].dispose();for(this.objects.length=0,v=this.overlays.length-1;v>=0;--v)this.overlays[v].dispose();this.overlays.length=0,this.gl=null},h.addObject=function(v){this.objects.indexOf(v)<0&&(this.objects.push(v),this.setDirty())},h.removeObject=function(v){for(var g=this.objects,y=0;y<g.length;++y)if(g[y]===v){g.splice(y,1),this.setDirty();break}},h.addOverlay=function(v){this.overlays.indexOf(v)<0&&(this.overlays.push(v),this.setOverlayDirty())},h.removeOverlay=function(v){for(var g=this.overlays,y=0;y<g.length;++y)if(g[y]===v){g.splice(y,1),this.setOverlayDirty();break}}},4296:function(d,s,t){d.exports=function(h,f){h=h||document.body;var b=[.01,1/0];"distanceLimits"in(f=f||{})&&(b[0]=f.distanceLimits[0],b[1]=f.distanceLimits[1]),"zoomMin"in f&&(b[0]=f.zoomMin),"zoomMax"in f&&(b[1]=f.zoomMax);var v=r({center:f.center||[0,0,0],up:f.up||[0,1,0],eye:f.eye||[0,0,10],mode:f.mode||"orbit",distanceLimits:b}),g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0,p=h.clientWidth,m=h.clientHeight,w={keyBindingMode:"rotate",enableWheel:!0,view:v,element:h,delay:f.delay||16,rotateSpeed:f.rotateSpeed||1,zoomSpeed:f.zoomSpeed||1,translateSpeed:f.translateSpeed||1,flipX:!!f.flipX,flipY:!!f.flipY,modes:v.modes,_ortho:f._ortho||f.projection&&f.projection.type==="orthographic"||!1,tick:function(){var u=o(),S=this.delay,_=u-2*S;v.idle(u-S),v.recalcMatrix(_),v.flush(u-(100+2*S));for(var E=!0,L=v.computedMatrix,C=0;C<16;++C)E=E&&g[C]===L[C],g[C]=L[C];var P=h.clientWidth===p&&h.clientHeight===m;return p=h.clientWidth,m=h.clientHeight,E?!P:(y=Math.exp(v.computedRadius[0]),!0)},lookAt:function(u,S,_){v.lookAt(v.lastT(),u,S,_)},rotate:function(u,S,_){v.rotate(v.lastT(),u,S,_)},pan:function(u,S,_){v.pan(v.lastT(),u,S,_)},translate:function(u,S,_){v.translate(v.lastT(),u,S,_)}};return Object.defineProperties(w,{matrix:{get:function(){return v.computedMatrix},set:function(u){return v.setMatrix(v.lastT(),u),v.computedMatrix},enumerable:!0},mode:{get:function(){return v.getMode()},set:function(u){var S=v.computedUp.slice(),_=v.computedEye.slice(),E=v.computedCenter.slice();if(v.setMode(u),u==="turntable"){var L=o();v._active.lookAt(L,_,E,S),v._active.lookAt(L+500,_,E,[0,0,1]),v._active.flush(L)}return v.getMode()},enumerable:!0},center:{get:function(){return v.computedCenter},set:function(u){return v.lookAt(v.lastT(),null,u),v.computedCenter},enumerable:!0},eye:{get:function(){return v.computedEye},set:function(u){return v.lookAt(v.lastT(),u),v.computedEye},enumerable:!0},up:{get:function(){return v.computedUp},set:function(u){return v.lookAt(v.lastT(),null,null,u),v.computedUp},enumerable:!0},distance:{get:function(){return y},set:function(u){return v.setDistance(v.lastT(),u),u},enumerable:!0},distanceLimits:{get:function(){return v.getDistanceLimits(b)},set:function(u){return v.setDistanceLimits(u),u},enumerable:!0}}),h.addEventListener("contextmenu",function(u){return u.preventDefault(),!1}),w._lastX=-1,w._lastY=-1,w._lastMods={shift:!1,control:!1,alt:!1,meta:!1},w.enableMouseListeners=function(){function u(S,_,E,L){var C=w.keyBindingMode;if(C!==!1){var P=C==="rotate",I=C==="pan",U=C==="zoom",z=!!L.control,H=!!L.alt,F=!!L.shift,N=!!(1&S),B=!!(2&S),j=!!(4&S),K=1/h.clientHeight,G=K*(_-w._lastX),V=K*(E-w._lastY),W=w.flipX?1:-1,J=w.flipY?1:-1,X=Math.PI*w.rotateSpeed,ee=o();if(w._lastX!==-1&&w._lastY!==-1&&((P&&N&&!z&&!H&&!F||N&&!z&&!H&&F)&&v.rotate(ee,W*X*G,-J*X*V,0),(I&&N&&!z&&!H&&!F||B||N&&z&&!H&&!F)&&v.pan(ee,-w.translateSpeed*G*y,w.translateSpeed*V*y,0),U&&N&&!z&&!H&&!F||j||N&&!z&&H&&!F)){var re=-w.zoomSpeed*V/window.innerHeight*(ee-v.lastT())*100;v.pan(ee,0,0,y*(Math.exp(re)-1))}return w._lastX=_,w._lastY=E,w._lastMods=L,!0}}w.mouseListener=n(h,u),h.addEventListener("touchstart",function(S){var _=i(S.changedTouches[0],h);u(0,_[0],_[1],w._lastMods),u(1,_[0],_[1],w._lastMods)},!!c&&{passive:!0}),h.addEventListener("touchmove",function(S){var _=i(S.changedTouches[0],h);u(1,_[0],_[1],w._lastMods),S.preventDefault()},!!c&&{passive:!1}),h.addEventListener("touchend",function(S){u(0,w._lastX,w._lastY,w._lastMods)},!!c&&{passive:!0}),w.wheelListener=a(h,function(S,_){if(w.keyBindingMode!==!1&&w.enableWheel){var E=w.flipX?1:-1,L=w.flipY?1:-1,C=o();if(Math.abs(S)>Math.abs(_))v.rotate(C,0,0,-S*E*Math.PI*w.rotateSpeed/window.innerWidth);else if(!w._ortho){var P=-w.zoomSpeed*L*_/window.innerHeight*(C-v.lastT())/20;v.pan(C,0,0,y*(Math.exp(P)-1))}}},!0)},w.enableMouseListeners(),w};var o=t(8161),r=t(1152),n=t(6145),a=t(6475),i=t(2565),c=t(5233)},8245:function(d,s,t){var o=t(6832),r=t(5158),n=o([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),a=o([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);d.exports=function(i){return r(i,n,a,null,[{name:"position",type:"vec2"}])}},1059:function(d,s,t){var o=t(4296),r=t(7453),n=t(2771),a=t(6496),i=t(2611),c=t(4234),h=t(8126),f=t(6145),b=t(1120),v=t(5268),g=t(8245),y=t(2861)({tablet:!0,featureDetect:!0});function p(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function m(u){var S=Math.round(Math.log(Math.abs(u))/Math.log(10));if(S<0){var _=Math.round(Math.pow(10,-S));return Math.ceil(u*_)/_}return S>0?(_=Math.round(Math.pow(10,S)),Math.ceil(u/_)*_):Math.ceil(u)}function w(u){return typeof u!="boolean"||u}d.exports={createScene:function(u){(u=u||{}).camera=u.camera||{};var S=u.canvas;S||(S=document.createElement("canvas"),u.container?u.container.appendChild(S):document.body.appendChild(S));var _=u.gl;if(_||(u.glOptions&&(y=!!u.glOptions.preserveDrawingBuffer),_=function(Oe,xe){var ke=null;try{(ke=Oe.getContext("webgl",xe))||(ke=Oe.getContext("experimental-webgl",xe))}catch{return null}return ke}(S,u.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:y})),!_)throw new Error("webgl not supported");var E=u.bounds||[[-10,-10,-10],[10,10,10]],L=new p,C=c(_,_.drawingBufferWidth,_.drawingBufferHeight,{preferFloat:!y}),P=g(_),I=u.cameraObject&&u.cameraObject._ortho===!0||u.camera.projection&&u.camera.projection.type==="orthographic"||!1,U={eye:u.camera.eye||[2,0,0],center:u.camera.center||[0,0,0],up:u.camera.up||[0,1,0],zoomMin:u.camera.zoomMax||.1,zoomMax:u.camera.zoomMin||100,mode:u.camera.mode||"turntable",_ortho:I},z=u.axes||{},H=r(_,z);H.enable=!z.disable;var F=u.spikes||{},N=a(_,F),B=[],j=[],K=[],G=[],V=!0,W=!0,J={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},X=(W=!0,[_.drawingBufferWidth,_.drawingBufferHeight]),ee=u.cameraObject||o(S,U),re={gl:_,contextLost:!1,pixelRatio:u.pixelRatio||1,canvas:S,selection:L,camera:ee,axes:H,axesPixels:null,spikes:N,bounds:E,objects:B,shape:X,aspect:u.aspectRatio||[1,1,1],pickRadius:u.pickRadius||10,zNear:u.zNear||.01,zFar:u.zFar||1e3,fovy:u.fovy||Math.PI/4,clearColor:u.clearColor||[0,0,0,0],autoResize:w(u.autoResize),autoBounds:w(u.autoBounds),autoScale:!!u.autoScale,autoCenter:w(u.autoCenter),clipToBounds:w(u.clipToBounds),snapToData:!!u.snapToData,onselect:u.onselect||null,onrender:u.onrender||null,onclick:u.onclick||null,cameraParams:J,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Oe){this.aspect[0]=Oe.x,this.aspect[1]=Oe.y,this.aspect[2]=Oe.z,W=!0},setBounds:function(Oe,xe){this.bounds[0][Oe]=xe.min,this.bounds[1][Oe]=xe.max},setClearColor:function(Oe){this.clearColor=Oe},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ie=[_.drawingBufferWidth/re.pixelRatio|0,_.drawingBufferHeight/re.pixelRatio|0];function se(){if(!re._stopped&&re.autoResize){var Oe=S.parentNode,xe=1,ke=1;Oe&&Oe!==document.body?(xe=Oe.clientWidth,ke=Oe.clientHeight):(xe=window.innerWidth,ke=window.innerHeight);var Me=0|Math.ceil(xe*re.pixelRatio),Te=0|Math.ceil(ke*re.pixelRatio);if(Me!==S.width||Te!==S.height){S.width=Me,S.height=Te;var Q=S.style;Q.position=Q.position||"absolute",Q.left="0px",Q.top="0px",Q.width=xe+"px",Q.height=ke+"px",V=!0}}}function fe(){for(var Oe=B.length,xe=G.length,ke=0;ke<xe;++ke)K[ke]=0;e:for(ke=0;ke<Oe;++ke){var Me=B[ke],Te=Me.pickSlots;if(Te){for(var Q=0;Q<xe;++Q)if(K[Q]+Te<255){j[ke]=Q,Me.setPickBase(K[Q]+1),K[Q]+=Te;continue e}var oe=i(_,X);j[ke]=xe,G.push(oe),K.push(Te),Me.setPickBase(1),xe+=1}else j[ke]=-1}for(;xe>0&&K[xe-1]===0;)K.pop(),G.pop().dispose()}function ye(){if(re.contextLost)return!0;_.isContextLost()&&(re.contextLost=!0,re.mouseListener.enabled=!1,re.selection.object=null,re.oncontextloss&&re.oncontextloss())}re.autoResize&&se(),window.addEventListener("resize",se),re.update=function(Oe){re._stopped||(V=!0,W=!0)},re.add=function(Oe){re._stopped||(Oe.axes=H,B.push(Oe),j.push(-1),V=!0,W=!0,fe())},re.remove=function(Oe){if(!re._stopped){var xe=B.indexOf(Oe);xe<0||(B.splice(xe,1),j.pop(),V=!0,W=!0,fe())}},re.dispose=function(){if(!re._stopped&&(re._stopped=!0,window.removeEventListener("resize",se),S.removeEventListener("webglcontextlost",ye),re.mouseListener.enabled=!1,!re.contextLost)){H.dispose(),N.dispose();for(var Oe=0;Oe<B.length;++Oe)B[Oe].dispose();for(C.dispose(),Oe=0;Oe<G.length;++Oe)G[Oe].dispose();P.dispose(),_=null,H=null,N=null,B=[]}},re._mouseRotating=!1,re._prevButtons=0,re.enableMouseListeners=function(){re.mouseListener=f(S,function(Oe,xe,ke){if(!re._stopped){var Me=G.length,Te=B.length,Q=L.object;L.distance=1/0,L.mouse[0]=xe,L.mouse[1]=ke,L.object=null,L.screen=null,L.dataCoordinate=L.dataPosition=null;var oe=!1;if(Oe&&re._prevButtons)re._mouseRotating=!0;else{re._mouseRotating&&(W=!0),re._mouseRotating=!1;for(var ce=0;ce<Me;++ce){var me=G[ce].query(xe,ie[1]-ke-1,re.pickRadius);if(me){if(me.distance>L.distance)continue;for(var Ae=0;Ae<Te;++Ae){var Ie=B[Ae];if(j[Ae]===ce){var Ce=Ie.pick(me);Ce&&(L.buttons=Oe,L.screen=me.coord,L.distance=me.distance,L.object=Ie,L.index=Ce.distance,L.dataPosition=Ce.position,L.dataCoordinate=Ce.dataCoordinate,L.data=Ce,oe=!0)}}}}}Q&&Q!==L.object&&(Q.highlight&&Q.highlight(null),V=!0),L.object&&(L.object.highlight&&L.object.highlight(L.data),V=!0),(oe=oe||L.object!==Q)&&re.onselect&&re.onselect(L),1&Oe&&!(1&re._prevButtons)&&re.onclick&&re.onclick(L),re._prevButtons=Oe}})},S.addEventListener("webglcontextlost",ye);var ge=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],he=[ge[0].slice(),ge[1].slice()];function ve(){if(!ye()){se();var Oe=re.camera.tick();J.view=re.camera.matrix,V=V||Oe,W=W||Oe,H.pixelRatio=re.pixelRatio,N.pixelRatio=re.pixelRatio;var xe=B.length,ke=ge[0],Me=ge[1];ke[0]=ke[1]=ke[2]=1/0,Me[0]=Me[1]=Me[2]=-1/0;for(var Te=0;Te<xe;++Te){(Fe=B[Te]).pixelRatio=re.pixelRatio,Fe.axes=re.axes,V=V||!!Fe.dirty,W=W||!!Fe.dirty;var Q=Fe.bounds;if(Q)for(var oe=Q[0],ce=Q[1],me=0;me<3;++me)ke[me]=Math.min(ke[me],oe[me]),Me[me]=Math.max(Me[me],ce[me])}var Ae=re.bounds;if(re.autoBounds)for(me=0;me<3;++me){if(Me[me]<ke[me])ke[me]=-1,Me[me]=1;else{ke[me]===Me[me]&&(ke[me]-=1,Me[me]+=1);var Ie=.05*(Me[me]-ke[me]);ke[me]=ke[me]-Ie,Me[me]=Me[me]+Ie}Ae[0][me]=ke[me],Ae[1][me]=Me[me]}var Ce=!1;for(me=0;me<3;++me)Ce=Ce||he[0][me]!==Ae[0][me]||he[1][me]!==Ae[1][me],he[0][me]=Ae[0][me],he[1][me]=Ae[1][me];if(W=W||Ce,V=V||Ce){if(Ce){var Re=[0,0,0];for(Te=0;Te<3;++Te)Re[Te]=m((Ae[1][Te]-Ae[0][Te])/10);H.autoTicks?H.update({bounds:Ae,tickSpacing:Re}):H.update({bounds:Ae})}var le=_.drawingBufferWidth,de=_.drawingBufferHeight;for(X[0]=le,X[1]=de,ie[0]=0|Math.max(le/re.pixelRatio,1),ie[1]=0|Math.max(de/re.pixelRatio,1),function(Ve,He){var nt=Ve.bounds,tt=Ve.cameraParams,ot=tt.projection,dt=tt.model,kt=Ve.gl.drawingBufferWidth,mt=Ve.gl.drawingBufferHeight,wt=Ve.zNear,Lt=Ve.zFar,Ct=Ve.fovy,It=kt/mt;He?(v(ot,-It,It,-1,1,wt,Lt),tt._ortho=!0):(b(ot,Ct,It,wt,Lt),tt._ortho=!1);for(var Ut=0;Ut<16;++Ut)dt[Ut]=0;dt[15]=1;var Rt=0;for(Ut=0;Ut<3;++Ut)Rt=Math.max(Rt,nt[1][Ut]-nt[0][Ut]);for(Ut=0;Ut<3;++Ut)Ve.autoScale?dt[5*Ut]=Ve.aspect[Ut]/(nt[1][Ut]-nt[0][Ut]):dt[5*Ut]=1/Rt,Ve.autoCenter&&(dt[12+Ut]=.5*-dt[5*Ut]*(nt[0][Ut]+nt[1][Ut]))}(re,I),Te=0;Te<xe;++Te)(Fe=B[Te]).axesBounds=Ae,re.clipToBounds&&(Fe.clipBounds=Ae);L.object&&(re.snapToData?N.position=L.dataCoordinate:N.position=L.dataPosition,N.bounds=Ae),W&&(W=!1,function(){if(!ye()){_.colorMask(!0,!0,!0,!0),_.depthMask(!0),_.disable(_.BLEND),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL);for(var Ve=B.length,He=G.length,nt=0;nt<He;++nt){var tt=G[nt];tt.shape=ie,tt.begin();for(var ot=0;ot<Ve;++ot)if(j[ot]===nt){var dt=B[ot];dt.drawPick&&(dt.pixelRatio=1,dt.drawPick(J))}tt.end()}}}()),re.axesPixels=n(re.axes,J,le,de),re.onrender&&re.onrender(),_.bindFramebuffer(_.FRAMEBUFFER,null),_.viewport(0,0,le,de),re.clearRGBA(),_.depthMask(!0),_.colorMask(!0,!0,!0,!0),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL),_.disable(_.BLEND),_.disable(_.CULL_FACE);var _e=!1;for(H.enable&&(_e=_e||H.isTransparent(),H.draw(J)),N.axes=H,L.object&&N.draw(J),_.disable(_.CULL_FACE),Te=0;Te<xe;++Te)(Fe=B[Te]).axes=H,Fe.pixelRatio=re.pixelRatio,Fe.isOpaque&&Fe.isOpaque()&&Fe.draw(J),Fe.isTransparent&&Fe.isTransparent()&&(_e=!0);if(_e){for(C.shape=X,C.bind(),_.clear(_.DEPTH_BUFFER_BIT),_.colorMask(!1,!1,!1,!1),_.depthMask(!0),_.depthFunc(_.LESS),H.enable&&H.isTransparent()&&H.drawTransparent(J),Te=0;Te<xe;++Te)(Fe=B[Te]).isOpaque&&Fe.isOpaque()&&Fe.draw(J);for(_.enable(_.BLEND),_.blendEquation(_.FUNC_ADD),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.colorMask(!0,!0,!0,!0),_.depthMask(!1),_.clearColor(0,0,0,0),_.clear(_.COLOR_BUFFER_BIT),H.isTransparent()&&H.drawTransparent(J),Te=0;Te<xe;++Te){var Fe;(Fe=B[Te]).isTransparent&&Fe.isTransparent()&&Fe.drawTransparent(J)}_.bindFramebuffer(_.FRAMEBUFFER,null),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.disable(_.DEPTH_TEST),P.bind(),C.color[0].bind(0),P.uniforms.accumBuffer=0,h(_),_.disable(_.BLEND)}for(V=!1,Te=0;Te<xe;++Te)B[Te].dirty=!1}}}return re.enableMouseListeners(),function Oe(){re._stopped||re.contextLost||(ve(),requestAnimationFrame(Oe))}(),re.redraw=function(){re._stopped||(V=!0,ve())},re},createCamera:o}},8023:function(d,s,t){var o=t(6832);s.pointVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),s.pointFragment=o([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),s.pickVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),s.pickFragment=o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},8271:function(d,s,t){var o=t(5158),r=t(5827),n=t(5306),a=t(8023);function i(b,v,g,y,p){this.plot=b,this.offsetBuffer=v,this.pickBuffer=g,this.shader=y,this.pickShader=p,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}d.exports=function(b,v){var g=b.gl,y=new i(b,r(g),r(g),o(g,a.pointVertex,a.pointFragment),o(g,a.pickVertex,a.pickFragment));return y.update(v),b.addObject(y),y};var c,h,f=i.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(b){var v;function g(_,E){return _ in b?b[_]:E}b=b||{},this.sizeMin=g("sizeMin",.5),this.sizeMax=g("sizeMax",20),this.color=g("color",[1,0,0,1]).slice(),this.areaRatio=g("areaRatio",1),this.borderColor=g("borderColor",[0,0,0,1]).slice(),this.blend=g("blend",!1);var y=b.positions.length>>>1,p=b.positions instanceof Float32Array,m=b.idToIndex instanceof Int32Array&&b.idToIndex.length>=y,w=b.positions,u=p?w:n.mallocFloat32(w.length),S=m?b.idToIndex:n.mallocInt32(y);if(p||u.set(w),!m)for(u.set(w),v=0;v<y;v++)S[v]=v;this.points=w,this.offsetBuffer.update(u),this.pickBuffer.update(S),p||n.free(u),m||n.free(S),this.pointCount=y,this.pickOffset=0},f.unifiedDraw=(c=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0],function(b){var v=b!==void 0,g=v?this.pickShader:this.shader,y=this.plot.gl,p=this.plot.dataBox;if(this.pointCount===0)return b;var m=p[2]-p[0],w=p[3]-p[1],u=function(L,C){var P,I=0,U=L.length>>>1;for(P=0;P<U;P++){var z=L[2*P],H=L[2*P+1];z>=C[0]&&z<=C[2]&&H>=C[1]&&H<=C[3]&&I++}return I}(this.points,p),S=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(u,.33333)));c[0]=2/m,c[4]=2/w,c[6]=-2*p[0]/m-1,c[7]=-2*p[1]/w-1,this.offsetBuffer.bind(),g.bind(),g.attributes.position.pointer(),g.uniforms.matrix=c,g.uniforms.color=this.color,g.uniforms.borderColor=this.borderColor,g.uniforms.pointCloud=S<5,g.uniforms.pointSize=S,g.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),v&&(h[0]=255&b,h[1]=b>>8&255,h[2]=b>>16&255,h[3]=b>>24&255,this.pickBuffer.bind(),g.attributes.pickId.pointer(y.UNSIGNED_BYTE),g.uniforms.pickOffset=h,this.pickOffset=b);var _=y.getParameter(y.BLEND),E=y.getParameter(y.DITHER);return _&&!this.blend&&y.disable(y.BLEND),E&&y.disable(y.DITHER),y.drawArrays(y.POINTS,0,this.pointCount),_&&!this.blend&&y.enable(y.BLEND),E&&y.enable(y.DITHER),b+this.pointCount}),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(b,v,g){var y=this.pickOffset,p=this.pointCount;if(g<y||g>=y+p)return null;var m=g-y,w=this.points;return{object:this,pointId:m,dataCoord:[w[2*m],w[2*m+1]]}}},6093:function(d){d.exports=function(s,t,o,r){var n,a,i,c,h,f=t[0],b=t[1],v=t[2],g=t[3],y=o[0],p=o[1],m=o[2],w=o[3];return(a=f*y+b*p+v*m+g*w)<0&&(a=-a,y=-y,p=-p,m=-m,w=-w),1-a>1e-6?(n=Math.acos(a),i=Math.sin(n),c=Math.sin((1-r)*n)/i,h=Math.sin(r*n)/i):(c=1-r,h=r),s[0]=c*f+h*y,s[1]=c*b+h*p,s[2]=c*v+h*m,s[3]=c*g+h*w,s}},8240:function(d){d.exports=function(s){return s||s===0?s.toString():""}},4123:function(d,s,t){var o=t(875);d.exports=function(n,a,i){var c=r[a];if(c||(c=r[a]={}),n in c)return c[n];var h={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},f=o(n,h);h.triangles=!1;var b,v,g=o(n,h);if(i&&i!==1){for(b=0;b<f.positions.length;++b)for(v=0;v<f.positions[b].length;++v)f.positions[b][v]/=i;for(b=0;b<g.positions.length;++b)for(v=0;v<g.positions[b].length;++v)g.positions[b][v]/=i}var y=[[1/0,1/0],[-1/0,-1/0]],p=g.positions.length;for(b=0;b<p;++b){var m=g.positions[b];for(v=0;v<2;++v)y[0][v]=Math.min(y[0][v],m[v]),y[1][v]=Math.max(y[1][v],m[v])}return c[n]=[f,g,y]};var r={}},9282:function(d,s,t){var o=t(5158),r=t(6832),n=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),a=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),i=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),c=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),h=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),f=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],b={vertex:n,fragment:c,attributes:f},v={vertex:a,fragment:c,attributes:f},g={vertex:i,fragment:c,attributes:f},y={vertex:n,fragment:h,attributes:f},p={vertex:a,fragment:h,attributes:f},m={vertex:i,fragment:h,attributes:f};function w(u,S){var _=o(u,S),E=_.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,_}s.createPerspective=function(u){return w(u,b)},s.createOrtho=function(u){return w(u,v)},s.createProject=function(u){return w(u,g)},s.createPickPerspective=function(u){return w(u,y)},s.createPickOrtho=function(u){return w(u,p)},s.createPickProject=function(u){return w(u,m)}},2182:function(d,s,t){var o=t(3596),r=t(5827),n=t(2944),a=t(5306),i=t(104),c=t(9282),h=t(4123),f=t(8240),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(j,K){var G=j[0],V=j[1],W=j[2],J=j[3];return j[0]=K[0]*G+K[4]*V+K[8]*W+K[12]*J,j[1]=K[1]*G+K[5]*V+K[9]*W+K[13]*J,j[2]=K[2]*G+K[6]*V+K[10]*W+K[14]*J,j[3]=K[3]*G+K[7]*V+K[11]*W+K[15]*J,j}function g(j,K,G,V){return v(V,V),v(V,V),v(V,V)}function y(j,K){this.index=j,this.dataCoordinate=this.position=K}function p(j){return j===!0||j>1?1:j}function m(j,K,G,V,W,J,X,ee,re,ie,se,fe){this.gl=j,this.pixelRatio=1,this.shader=K,this.orthoShader=G,this.projectShader=V,this.pointBuffer=W,this.colorBuffer=J,this.glyphBuffer=X,this.idBuffer=ee,this.vao=re,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ie,this.pickOrthoShader=se,this.pickProjectShader=fe,this.points=[],this._selectResult=new y(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}d.exports=function(j){var K=j.gl,G=c.createPerspective(K),V=c.createOrtho(K),W=c.createProject(K),J=c.createPickPerspective(K),X=c.createPickOrtho(K),ee=c.createPickProject(K),re=r(K),ie=r(K),se=r(K),fe=r(K),ye=new m(K,G,V,W,re,ie,se,fe,n(K,[{buffer:re,size:3,type:K.FLOAT},{buffer:ie,size:4,type:K.FLOAT},{buffer:se,size:2,type:K.FLOAT},{buffer:fe,size:4,type:K.UNSIGNED_BYTE,normalized:!0}]),J,X,ee);return ye.update(j),ye};var w=m.prototype;w.pickSlots=1,w.setPickBase=function(j){this.pickId=j},w.isTransparent=function(){if(this.hasAlpha)return!0;for(var j=0;j<3;++j)if(this.axesProject[j]&&this.projectHasAlpha)return!0;return!1},w.isOpaque=function(){if(!this.hasAlpha)return!0;for(var j=0;j<3;++j)if(this.axesProject[j]&&!this.projectHasAlpha)return!0;return!1};var u=[0,0],S=[0,0,0],_=[0,0,0],E=[0,0,0,1],L=[0,0,0,1],C=b.slice(),P=[0,0,0],I=[[0,0,0],[0,0,0]];function U(j){return j[0]=j[1]=j[2]=0,j}function z(j,K){return j[0]=K[0],j[1]=K[1],j[2]=K[2],j[3]=1,j}function H(j,K,G,V){return j[0]=K[0],j[1]=K[1],j[2]=K[2],j[G]=V,j}var F=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function N(j,K,G,V,W,J,X){var ee=G.gl;if((J===G.projectHasAlpha||X)&&function(ie,se,fe,ye){var ge,he=se.axesProject,ve=se.gl,Oe=ie.uniforms,xe=fe.model||b,ke=fe.view||b,Me=fe.projection||b,Te=se.axesBounds,Q=function(nt){for(var tt=I,ot=0;ot<2;++ot)for(var dt=0;dt<3;++dt)tt[ot][dt]=Math.max(Math.min(nt[ot][dt],1e8),-1e8);return tt}(se.clipBounds);ge=se.axes&&se.axes.lastCubeProps?se.axes.lastCubeProps.axis:[1,1,1],u[0]=2/ve.drawingBufferWidth,u[1]=2/ve.drawingBufferHeight,ie.bind(),Oe.view=ke,Oe.projection=Me,Oe.screenSize=u,Oe.highlightId=se.highlightId,Oe.highlightScale=se.highlightScale,Oe.clipBounds=Q,Oe.pickGroup=se.pickId/255,Oe.pixelRatio=ye;for(var oe=0;oe<3;++oe)if(he[oe]){Oe.scale=se.projectScale[oe],Oe.opacity=se.projectOpacity[oe];for(var ce=C,me=0;me<16;++me)ce[me]=0;for(me=0;me<4;++me)ce[5*me]=1;ce[5*oe]=0,ge[oe]<0?ce[12+oe]=Te[0][oe]:ce[12+oe]=Te[1][oe],i(ce,xe,ce),Oe.model=ce;var Ae=(oe+1)%3,Ie=(oe+2)%3,Ce=U(S),Re=U(_);Ce[Ae]=1,Re[Ie]=1;var le=g(0,0,0,z(E,Ce)),de=g(0,0,0,z(L,Re));if(Math.abs(le[1])>Math.abs(de[1])){var _e=le;le=de,de=_e,_e=Ce,Ce=Re,Re=_e;var Fe=Ae;Ae=Ie,Ie=Fe}le[0]<0&&(Ce[Ae]=-1),de[1]>0&&(Re[Ie]=-1);var Ve=0,He=0;for(me=0;me<4;++me)Ve+=Math.pow(xe[4*Ae+me],2),He+=Math.pow(xe[4*Ie+me],2);Ce[Ae]/=Math.sqrt(Ve),Re[Ie]/=Math.sqrt(He),Oe.axes[0]=Ce,Oe.axes[1]=Re,Oe.fragClipBounds[0]=H(P,Q[0],oe,-1e8),Oe.fragClipBounds[1]=H(P,Q[1],oe,1e8),se.vao.bind(),se.vao.draw(ve.TRIANGLES,se.vertexCount),se.lineWidth>0&&(ve.lineWidth(se.lineWidth*ye),se.vao.draw(ve.LINES,se.lineVertexCount,se.vertexCount)),se.vao.unbind()}}(K,G,V,W),J===G.hasAlpha||X){j.bind();var re=j.uniforms;re.model=V.model||b,re.view=V.view||b,re.projection=V.projection||b,u[0]=2/ee.drawingBufferWidth,u[1]=2/ee.drawingBufferHeight,re.screenSize=u,re.highlightId=G.highlightId,re.highlightScale=G.highlightScale,re.fragClipBounds=F,re.clipBounds=G.axes.bounds,re.opacity=G.opacity,re.pickGroup=G.pickId/255,re.pixelRatio=W,G.vao.bind(),G.vao.draw(ee.TRIANGLES,G.vertexCount),G.lineWidth>0&&(ee.lineWidth(G.lineWidth*W),G.vao.draw(ee.LINES,G.lineVertexCount,G.vertexCount)),G.vao.unbind()}}function B(j,K,G,V){var W;W=Array.isArray(j)?K<j.length?j[K]:void 0:j,W=f(W);var J=!0;o(W)&&(W="",J=!1);var X=h(W,G,V);return{mesh:X[0],lines:X[1],bounds:X[2],visible:J}}w.draw=function(j){N(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,j,this.pixelRatio,!1,!1)},w.drawTransparent=function(j){N(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,j,this.pixelRatio,!0,!1)},w.drawPick=function(j){N(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,j,1,!0,!0)},w.pick=function(j){if(!j||j.id!==this.pickId)return null;var K=j.value[2]+(j.value[1]<<8)+(j.value[0]<<16);if(K>=this.pointCount||K<0)return null;var G=this.points[K],V=this._selectResult;V.index=K;for(var W=0;W<3;++W)V.position[W]=V.dataCoordinate[W]=G[W];return V},w.highlight=function(j){if(j){var K=j.index,G=255&K,V=K>>8&255,W=K>>16&255;this.highlightId=[G/255,V/255,W/255,0]}else this.highlightId=[1,1,1,1]},w.update=function(j){if("perspective"in(j=j||{})&&(this.useOrtho=!j.perspective),"orthographic"in j&&(this.useOrtho=!!j.orthographic),"lineWidth"in j&&(this.lineWidth=j.lineWidth),"project"in j)if(Array.isArray(j.project))this.axesProject=j.project;else{var K=!!j.project;this.axesProject=[K,K,K]}if("projectScale"in j)if(Array.isArray(j.projectScale))this.projectScale=j.projectScale.slice();else{var G=+j.projectScale;this.projectScale=[G,G,G]}if(this.projectHasAlpha=!1,"projectOpacity"in j){Array.isArray(j.projectOpacity)?this.projectOpacity=j.projectOpacity.slice():(G=+j.projectOpacity,this.projectOpacity=[G,G,G]);for(var V=0;V<3;++V)this.projectOpacity[V]=p(this.projectOpacity[V]),this.projectOpacity[V]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in j&&(this.opacity=p(j.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var W,J,X=j.position,ee=j.font||"normal",re=j.alignment||[0,0];if(re.length===2)W=re[0],J=re[1];else for(W=[],J=[],V=0;V<re.length;++V)W[V]=re[V][0],J[V]=re[V][1];var ie=[1/0,1/0,1/0],se=[-1/0,-1/0,-1/0],fe=j.glyph,ye=j.color,ge=j.size,he=j.angle,ve=j.lineColor,Oe=-1,xe=0,ke=0,Me=0;if(X.length){Me=X.length;e:for(V=0;V<Me;++V){for(var Te=X[V],Q=0;Q<3;++Q)if(isNaN(Te[Q])||!isFinite(Te[Q]))continue e;var oe=(tt=B(fe,V,ee,this.pixelRatio)).mesh,ce=tt.lines,me=tt.bounds;xe+=3*oe.cells.length,ke+=2*ce.edges.length}}var Ae=xe+ke,Ie=a.mallocFloat(3*Ae),Ce=a.mallocFloat(4*Ae),Re=a.mallocFloat(2*Ae),le=a.mallocUint32(Ae);if(Ae>0){var de=0,_e=xe,Fe=[0,0,0,1],Ve=[0,0,0,1],He=Array.isArray(ye)&&Array.isArray(ye[0]),nt=Array.isArray(ve)&&Array.isArray(ve[0]);e:for(V=0;V<Me;++V){for(Oe+=1,Te=X[V],Q=0;Q<3;++Q){if(isNaN(Te[Q])||!isFinite(Te[Q]))continue e;se[Q]=Math.max(se[Q],Te[Q]),ie[Q]=Math.min(ie[Q],Te[Q])}oe=(tt=B(fe,V,ee,this.pixelRatio)).mesh,ce=tt.lines,me=tt.bounds;var tt,ot=tt.visible;if(ot)if(Array.isArray(ye)){if((dt=He?V<ye.length?ye[V]:[0,0,0,0]:ye).length===3){for(Q=0;Q<3;++Q)Fe[Q]=dt[Q];Fe[3]=1}else if(dt.length===4){for(Q=0;Q<4;++Q)Fe[Q]=dt[Q];!this.hasAlpha&&dt[3]<1&&(this.hasAlpha=!0)}}else Fe[0]=Fe[1]=Fe[2]=0,Fe[3]=1;else Fe=[1,1,1,0];if(ot)if(Array.isArray(ve)){var dt;if((dt=nt?V<ve.length?ve[V]:[0,0,0,0]:ve).length===3){for(Q=0;Q<3;++Q)Ve[Q]=dt[Q];Ve[Q]=1}else if(dt.length===4){for(Q=0;Q<4;++Q)Ve[Q]=dt[Q];!this.hasAlpha&&dt[3]<1&&(this.hasAlpha=!0)}}else Ve[0]=Ve[1]=Ve[2]=0,Ve[3]=1;else Ve=[1,1,1,0];var kt=.5;ot?Array.isArray(ge)?kt=V<ge.length?+ge[V]:12:ge?kt=+ge:this.useOrtho&&(kt=12):kt=0;var mt=0;Array.isArray(he)?mt=V<he.length?+he[V]:0:he&&(mt=+he);var wt=Math.cos(mt),Lt=Math.sin(mt);for(Te=X[V],Q=0;Q<3;++Q)se[Q]=Math.max(se[Q],Te[Q]),ie[Q]=Math.min(ie[Q],Te[Q]);var Ct=W,It=J;Ct=0,Array.isArray(W)?Ct=V<W.length?W[V]:0:W&&(Ct=W),It=0,Array.isArray(J)?It=V<J.length?J[V]:0:J&&(It=J);var Ut=[Ct*=Ct>0?1-me[0][0]:Ct<0?1+me[1][0]:1,It*=It>0?1-me[0][1]:It<0?1+me[1][1]:1],Rt=oe.cells||[],Ge=oe.positions||[];for(Q=0;Q<Rt.length;++Q)for(var We=Rt[Q],Be=0;Be<3;++Be){for(var Ye=0;Ye<3;++Ye)Ie[3*de+Ye]=Te[Ye];for(Ye=0;Ye<4;++Ye)Ce[4*de+Ye]=Fe[Ye];le[de]=Oe;var rt=Ge[We[Be]];Re[2*de]=kt*(wt*rt[0]-Lt*rt[1]+Ut[0]),Re[2*de+1]=kt*(Lt*rt[0]+wt*rt[1]+Ut[1]),de+=1}for(Rt=ce.edges,Ge=ce.positions,Q=0;Q<Rt.length;++Q)for(We=Rt[Q],Be=0;Be<2;++Be){for(Ye=0;Ye<3;++Ye)Ie[3*_e+Ye]=Te[Ye];for(Ye=0;Ye<4;++Ye)Ce[4*_e+Ye]=Ve[Ye];le[_e]=Oe,rt=Ge[We[Be]],Re[2*_e]=kt*(wt*rt[0]-Lt*rt[1]+Ut[0]),Re[2*_e+1]=kt*(Lt*rt[0]+wt*rt[1]+Ut[1]),_e+=1}}}this.bounds=[ie,se],this.points=X,this.pointCount=X.length,this.vertexCount=xe,this.lineVertexCount=ke,this.pointBuffer.update(Ie),this.colorBuffer.update(Ce),this.glyphBuffer.update(Re),this.idBuffer.update(le),a.free(Ie),a.free(Ce),a.free(Re),a.free(le)},w.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(d,s,t){var o=t(6832);s.boxVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),s.boxFragment=o([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},6623:function(d,s,t){var o=t(5158),r=t(5827),n=t(1884);function a(c,h,f){this.plot=c,this.boxBuffer=h,this.boxShader=f,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}d.exports=function(c,h){var f=c.gl,b=new a(c,r(f,[0,0,0,1,1,0,1,1]),o(f,n.boxVertex,n.boxFragment));return b.update(h),c.addOverlay(b),b};var i=a.prototype;i.draw=function(){if(this.enabled){var c=this.plot,h=this.selectBox,f=this.borderWidth,b=(this.innerFill,this.innerColor),v=(this.outerFill,this.outerColor),g=this.borderColor,y=c.box,p=c.screenBox,m=c.dataBox,w=c.viewBox,u=c.pixelRatio,S=(h[0]-m[0])*(w[2]-w[0])/(m[2]-m[0])+w[0],_=(h[1]-m[1])*(w[3]-w[1])/(m[3]-m[1])+w[1],E=(h[2]-m[0])*(w[2]-w[0])/(m[2]-m[0])+w[0],L=(h[3]-m[1])*(w[3]-w[1])/(m[3]-m[1])+w[1];if(S=Math.max(S,w[0]),_=Math.max(_,w[1]),E=Math.min(E,w[2]),L=Math.min(L,w[3]),!(E<S||L<_)){y.bind();var C=p[2]-p[0],P=p[3]-p[1];if(this.outerFill&&(y.drawBox(0,0,C,_,v),y.drawBox(0,_,S,L,v),y.drawBox(0,L,C,P,v),y.drawBox(E,_,C,L,v)),this.innerFill&&y.drawBox(S,_,E,L,b),f>0){var I=f*u;y.drawBox(S-I,_-I,E+I,_+I,g),y.drawBox(S-I,L-I,E+I,L+I,g),y.drawBox(S-I,_-I,S+I,L+I,g),y.drawBox(E-I,_-I,E+I,L+I,g)}}}},i.update=function(c){c=c||{},this.innerFill=!!c.innerFill,this.outerFill=!!c.outerFill,this.innerColor=(c.innerColor||[0,0,0,.5]).slice(),this.outerColor=(c.outerColor||[0,0,0,.5]).slice(),this.borderColor=(c.borderColor||[0,0,0,1]).slice(),this.borderWidth=c.borderWidth||0,this.selectBox=(c.selectBox||this.selectBox).slice()},i.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(d,s,t){d.exports=function(f,b){var v=b[0],g=b[1];return new c(f,o(f,v,g,{}),r.mallocUint8(v*g*4))};var o=t(4234),r=t(5306),n=t(5050),a=t(2288).nextPow2;function i(f,b,v,g,y){this.coord=[f,b],this.id=v,this.value=g,this.distance=y}function c(f,b,v){this.gl=f,this.fbo=b,this.buffer=v,this._readTimeout=null;var g=this;this._readCallback=function(){g.gl&&(b.bind(),f.readPixels(0,0,b.shape[0],b.shape[1],f.RGBA,f.UNSIGNED_BYTE,g.buffer),g._readTimeout=null)}}var h=c.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(f){if(this.gl){this.fbo.shape=f;var b=this.fbo.shape[0],v=this.fbo.shape[1];if(v*b*4>this.buffer.length){r.free(this.buffer);for(var g=this.buffer=r.mallocUint8(a(v*b*4)),y=0;y<v*b*4;++y)g[y]=255}return f}}}),h.begin=function(){var f=this.gl;this.shape,f&&(this.fbo.bind(),f.clearColor(1,1,1,1),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT))},h.end=function(){var f=this.gl;f&&(f.bindFramebuffer(f.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(f,b,v){if(!this.gl)return null;var g=this.fbo.shape.slice();f|=0,b|=0,typeof v!="number"&&(v=1);var y=0|Math.min(Math.max(f-v,0),g[0]),p=0|Math.min(Math.max(f+v,0),g[0]),m=0|Math.min(Math.max(b-v,0),g[1]),w=0|Math.min(Math.max(b+v,0),g[1]);if(p<=y||w<=m)return null;var u=[p-y,w-m],S=n(this.buffer,[u[0],u[1],4],[4,4*g[0],1],4*(y+g[0]*m)),_=function(C,P,I){for(var U=1e8,z=-1,H=-1,F=C.shape[0],N=C.shape[1],B=0;B<F;B++)for(var j=0;j<N;j++){var K=C.get(B,j,0),G=C.get(B,j,1),V=C.get(B,j,2),W=C.get(B,j,3);if(K<255||G<255||V<255||W<255){var J=P-B,X=I-j,ee=J*J+X*X;ee<U&&(U=ee,z=B,H=j)}}return[z,H,U]}(S.hi(u[0],u[1],1),v,v),E=_[0],L=_[1];return E<0||Math.pow(this.radius,2)<_[2]?null:new i(E+y|0,L+m|0,S.get(E,L,0),[S.get(E,L,1),S.get(E,L,2),S.get(E,L,3)],Math.sqrt(_[2]))},h.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(d,s,t){var o=t(9016),r=t(4280),n=t(3984),a=t(1628),i=t(2631),c=t(9068);function h(v){this.gl=v,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var f=h.prototype;function b(v,g){return v.name<g.name?-1:1}f.bind=function(){var v;this.program||this._relink();var g=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),y=this.gl.lastAttribCount;if(g>y)for(v=y;v<g;v++)this.gl.enableVertexAttribArray(v);else if(y>g)for(v=g;v<y;v++)this.gl.disableVertexAttribArray(v);this.gl.lastAttribCount=g,this.gl.useProgram(this.program)},f.dispose=function(){for(var v=this.gl.lastAttribCount,g=0;g<v;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},f.update=function(v,g,y,p){if(!g||arguments.length===1){var m=v;v=m.vertex,g=m.fragment,y=m.uniforms,p=m.attributes}var w=this,u=w.gl,S=w._vref;w._vref=a.shader(u,u.VERTEX_SHADER,v),S&&S.dispose(),w.vertShader=w._vref.shader;var _=this._fref;if(w._fref=a.shader(u,u.FRAGMENT_SHADER,g),_&&_.dispose(),w.fragShader=w._fref.shader,!y||!p){var E=u.createProgram();if(u.attachShader(E,w.fragShader),u.attachShader(E,w.vertShader),u.linkProgram(E),!u.getProgramParameter(E,u.LINK_STATUS)){var L=u.getProgramInfoLog(E);throw new c(L,"Error linking program:"+L)}y=y||i.uniforms(u,E),p=p||i.attributes(u,E),u.deleteProgram(E)}(p=p.slice()).sort(b);var C,P=[],I=[],U=[];for(C=0;C<p.length;++C){var z=p[C];if(z.type.indexOf("mat")>=0){for(var H=0|z.type.charAt(z.type.length-1),F=new Array(H),N=0;N<H;++N)F[N]=U.length,I.push(z.name+"["+N+"]"),typeof z.location=="number"?U.push(z.location+N):Array.isArray(z.location)&&z.location.length===H&&typeof z.location[N]=="number"?U.push(0|z.location[N]):U.push(-1);P.push({name:z.name,type:z.type,locations:F})}else P.push({name:z.name,type:z.type,locations:[U.length]}),I.push(z.name),typeof z.location=="number"?U.push(0|z.location):U.push(-1)}var B=0;for(C=0;C<U.length;++C)if(U[C]<0){for(;U.indexOf(B)>=0;)B+=1;U[C]=B}var j=new Array(y.length);function K(){w.program=a.program(u,w._vref,w._fref,I,U);for(var G=0;G<y.length;++G)j[G]=u.getUniformLocation(w.program,y[G].name)}K(),w._relink=K,w.types={uniforms:n(y),attributes:n(p)},w.attributes=r(u,w,P,U),Object.defineProperty(w,"uniforms",o(u,w,y,j))},d.exports=function(v,g,y,p,m){var w=new h(v);return w.update(g,y,p,m),w}},9068:function(d){function s(t,o,r){this.shortMessage=o||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(o||t||"")+(r?`
`+r:""),this.stack=new Error().stack}s.prototype=new Error,s.prototype.name="GLError",s.prototype.constructor=s,d.exports=s},4280:function(d,s,t){d.exports=function(h,f,b,v){for(var g={},y=0,p=b.length;y<p;++y){var m=b[y],w=m.name,u=m.type,S=m.locations;switch(u){case"bool":case"int":case"float":i(h,f,S[0],v,1,g,w);break;default:if(u.indexOf("vec")>=0){if((_=u.charCodeAt(u.length-1)-48)<2||_>4)throw new o("","Invalid data type for attribute "+w+": "+u);i(h,f,S[0],v,_,g,w)}else{if(!(u.indexOf("mat")>=0))throw new o("","Unknown data type for attribute "+w+": "+u);var _;if((_=u.charCodeAt(u.length-1)-48)<2||_>4)throw new o("","Invalid data type for attribute "+w+": "+u);c(h,f,S,v,_,g,w)}}}return g};var o=t(9068);function r(h,f,b,v,g,y){this._gl=h,this._wrapper=f,this._index=b,this._locations=v,this._dimension=g,this._constFunc=y}var n=r.prototype;n.pointer=function(h,f,b,v){var g=this,y=g._gl,p=g._locations[g._index];y.vertexAttribPointer(p,g._dimension,h||y.FLOAT,!!f,b||0,v||0),y.enableVertexAttribArray(p)},n.set=function(h,f,b,v){return this._constFunc(this._locations[this._index],h,f,b,v)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(h){return h!==this._locations[this._index]&&(this._locations[this._index]=0|h,this._wrapper.program=null),0|h}});var a=[function(h,f,b){return b.length===void 0?h.vertexAttrib1f(f,b):h.vertexAttrib1fv(f,b)},function(h,f,b,v){return b.length===void 0?h.vertexAttrib2f(f,b,v):h.vertexAttrib2fv(f,b)},function(h,f,b,v,g){return b.length===void 0?h.vertexAttrib3f(f,b,v,g):h.vertexAttrib3fv(f,b)},function(h,f,b,v,g,y){return b.length===void 0?h.vertexAttrib4f(f,b,v,g,y):h.vertexAttrib4fv(f,b)}];function i(h,f,b,v,g,y,p){var m=a[g],w=new r(h,f,b,v,g,m);Object.defineProperty(y,p,{set:function(u){return h.disableVertexAttribArray(v[b]),m(h,v[b],u),u},get:function(){return w},enumerable:!0})}function c(h,f,b,v,g,y,p){for(var m=new Array(g),w=new Array(g),u=0;u<g;++u)i(h,f,b[u],v,g,m,u),w[u]=m[u];Object.defineProperty(m,"location",{set:function(E){if(Array.isArray(E))for(var L=0;L<g;++L)w[L].location=E[L];else for(L=0;L<g;++L)w[L].location=E+L;return E},get:function(){for(var E=new Array(g),L=0;L<g;++L)E[L]=v[b[L]];return E},enumerable:!0}),m.pointer=function(E,L,C,P){E=E||h.FLOAT,L=!!L,C=C||g*g,P=P||0;for(var I=0;I<g;++I){var U=v[b[I]];h.vertexAttribPointer(U,g,E,L,C,P+I*g),h.enableVertexAttribArray(U)}};var S=new Array(g),_=h["vertexAttrib"+g+"fv"];Object.defineProperty(y,p,{set:function(E){for(var L=0;L<g;++L){var C=v[b[L]];if(h.disableVertexAttribArray(C),Array.isArray(E[0]))_.call(h,C,E[L]);else{for(var P=0;P<g;++P)S[P]=E[g*L+P];_.call(h,C,S)}}return E},get:function(){return m},enumerable:!0})}},9016:function(d,s,t){var o=t(3984),r=t(9068);function n(i){return function(){return i}}function a(i,c){for(var h=new Array(i),f=0;f<i;++f)h[f]=c;return h}d.exports=function(i,c,h,f){function b(m){return function(w){for(var u=v("",m),S=0;S<u.length;++S){var _=u[S],E=_[0],L=_[1];if(f[L]){var C=w;if(typeof E=="string"&&(E.indexOf(".")===0||E.indexOf("[")===0)){var P=E;if(E.indexOf(".")===0&&(P=E.slice(1)),P.indexOf("]")===P.length-1){var I=P.indexOf("["),U=P.slice(0,I),z=P.slice(I+1,P.length-1);C=U?w[U][z]:w[z]}else C=w[P]}var H,F=h[L].type;switch(F){case"bool":case"int":case"sampler2D":case"samplerCube":i.uniform1i(f[L],C);break;case"float":i.uniform1f(f[L],C);break;default:var N=F.indexOf("vec");if(!(0<=N&&N<=1&&F.length===4+N)){if(F.indexOf("mat")===0&&F.length===4){if((H=F.charCodeAt(F.length-1)-48)<2||H>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+F);i["uniformMatrix"+H+"fv"](f[L],!1,C);break}throw new r("","Unknown uniform data type for "+name+": "+F)}if((H=F.charCodeAt(F.length-1)-48)<2||H>4)throw new r("","Invalid data type");switch(F.charAt(0)){case"b":case"i":i["uniform"+H+"iv"](f[L],C);break;case"v":i["uniform"+H+"fv"](f[L],C);break;default:throw new r("","Unrecognized data type for vector "+name+": "+F)}}}}}}function v(m,w){if(typeof w!="object")return[[m,w]];var u=[];for(var S in w){var _=w[S],E=m;parseInt(S)+""===S?E+="["+S+"]":E+="."+S,typeof _=="object"?u.push.apply(u,v(E,_)):u.push([E,_])}return u}function g(m,w,u){if(typeof u=="object"){var S=y(u);Object.defineProperty(m,w,{get:n(S),set:b(u),enumerable:!0,configurable:!1})}else f[u]?Object.defineProperty(m,w,{get:(_=u,function(E,L,C){return E.getUniform(L.program,C[_])}),set:b(u),enumerable:!0,configurable:!1}):m[w]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var L=E.indexOf("vec");if(0<=L&&L<=1&&E.length===4+L){if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new r("","Invalid data type");return E.charAt(0)==="b"?a(C,!1):a(C,0)}if(E.indexOf("mat")===0&&E.length===4){var C;if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+E);return a(C*C,0)}throw new r("","Unknown uniform data type for "+name+": "+E)}}(h[u].type);var _}function y(m){var w;if(Array.isArray(m)){w=new Array(m.length);for(var u=0;u<m.length;++u)g(w,u,m[u])}else for(var S in w={},m)g(w,S,m[S]);return w}var p=o(h,!0);return{get:n(y(p)),set:b(p),enumerable:!0,configurable:!0}}},3984:function(d){d.exports=function(s,t){for(var o={},r=0;r<s.length;++r)for(var n=s[r].name.split("."),a=o,i=0;i<n.length;++i){var c=n[i].split("[");if(c.length>1){c[0]in a||(a[c[0]]=[]),a=a[c[0]];for(var h=1;h<c.length;++h){var f=parseInt(c[h]);h<c.length-1||i<n.length-1?(f in a||(h<c.length-1?a[f]=[]:a[f]={}),a=a[f]):a[f]=t?r:s[r].type}}else i<n.length-1?(c[0]in a||(a[c[0]]={}),a=a[c[0]]):a[c[0]]=t?r:s[r].type}return o}},2631:function(d,s){s.uniforms=function(n,a){for(var i=n.getProgramParameter(a,n.ACTIVE_UNIFORMS),c=[],h=0;h<i;++h){var f=n.getActiveUniform(a,h);if(f){var b=r(n,f.type);if(f.size>1)for(var v=0;v<f.size;++v)c.push({name:f.name.replace("[0]","["+v+"]"),type:b});else c.push({name:f.name,type:b})}}return c},s.attributes=function(n,a){for(var i=n.getProgramParameter(a,n.ACTIVE_ATTRIBUTES),c=[],h=0;h<i;++h){var f=n.getActiveAttrib(a,h);f&&c.push({name:f.name,type:r(n,f.type)})}return c};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},o=null;function r(n,a){if(!o){var i=Object.keys(t);o={};for(var c=0;c<i.length;++c){var h=i[c];o[n[h]]=t[h]}}return o[a]}},1628:function(d,s,t){s.shader=function(b,v,g){return f(b).getShaderReference(v,g)},s.program=function(b,v,g,y,p){return f(b).getProgram(v,g,y,p)};var o=t(9068),r=t(3530),n=new(typeof WeakMap>"u"?t(4037):WeakMap),a=0;function i(b,v,g,y,p,m,w){this.id=b,this.src=v,this.type=g,this.shader=y,this.count=m,this.programs=[],this.cache=w}function c(b){this.gl=b,this.shaders=[{},{}],this.programs={}}i.prototype.dispose=function(){if(--this.count==0){for(var b=this.cache,v=b.gl,g=this.programs,y=0,p=g.length;y<p;++y){var m=b.programs[g[y]];m&&(delete b.programs[y],v.deleteProgram(m))}v.deleteShader(this.shader),delete b.shaders[this.type===v.FRAGMENT_SHADER|0][this.src]}};var h=c.prototype;function f(b){var v=n.get(b);return v||(v=new c(b),n.set(b,v)),v}h.getShaderReference=function(b,v){var g=this.gl,y=this.shaders[b===g.FRAGMENT_SHADER|0],p=y[v];if(p&&g.isShader(p.shader))p.count+=1;else{var m=function(w,u,S){var _=w.createShader(u);if(w.shaderSource(_,S),w.compileShader(_),!w.getShaderParameter(_,w.COMPILE_STATUS)){var E=w.getShaderInfoLog(_);try{var L=r(E,S,u)}catch(C){throw console.warn("Failed to format compiler error: "+C),new o(E,`Error compiling shader:
`+E)}throw new o(E,L.short,L.long)}return _}(g,b,v);p=y[v]=new i(a++,v,b,m,[],1,this)}return p},h.getProgram=function(b,v,g,y){var p=[b.id,v.id,g.join(":"),y.join(":")].join("@"),m=this.programs[p];return m&&this.gl.isProgram(m)||(this.programs[p]=m=function(w,u,S,_,E){var L=w.createProgram();w.attachShader(L,u),w.attachShader(L,S);for(var C=0;C<_.length;++C)w.bindAttribLocation(L,E[C],_[C]);if(w.linkProgram(L),!w.getProgramParameter(L,w.LINK_STATUS)){var P=w.getProgramInfoLog(L);throw new o(P,"Error linking program: "+P)}return L}(this.gl,b.shader,v.shader,g,y),b.programs.push(p),v.programs.push(p)),m}},3050:function(d){function s(o){this.plot=o,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}d.exports=function(o,r){var n=new s(o);return n.update(r),o.addOverlay(n),n};var t=s.prototype;t.update=function(o){o=o||{},this.enable=(o.enable||[!0,!0,!1,!1]).slice(),this.width=(o.width||[1,1,1,1]).slice(),this.color=(o.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(o.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var o=this.enable,r=this.width,n=this.color,a=this.center,i=this.plot,c=i.line,h=i.dataBox,f=i.viewBox;if(c.bind(),h[0]<=a[0]&&a[0]<=h[2]&&h[1]<=a[1]&&a[1]<=h[3]){var b=f[0]+(a[0]-h[0])/(h[2]-h[0])*(f[2]-f[0]),v=f[1]+(a[1]-h[1])/(h[3]-h[1])*(f[3]-f[1]);o[0]&&c.drawLine(b,v,f[0],v,r[0],n[0]),o[1]&&c.drawLine(b,v,b,f[1],r[1],n[1]),o[2]&&c.drawLine(b,v,f[2],v,r[2],n[2]),o[3]&&c.drawLine(b,v,b,f[3],r[3],n[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},3540:function(d,s,t){var o=t(6832),r=t(5158),n=o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),a=o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);d.exports=function(i){return r(i,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(d,s,t){var o=t(5827),r=t(2944),n=t(3540);d.exports=function(v,g){var y=[];function p(_,E,L,C,P,I){var U=[_,E,L,0,0,0,1];U[C+3]=1,U[C]=P,y.push.apply(y,U),U[6]=-1,y.push.apply(y,U),U[C]=I,y.push.apply(y,U),y.push.apply(y,U),U[6]=1,y.push.apply(y,U),U[C]=P,y.push.apply(y,U)}p(0,0,0,0,0,1),p(0,0,0,1,0,1),p(0,0,0,2,0,1),p(1,0,0,1,-1,1),p(1,0,0,2,-1,1),p(0,1,0,0,-1,1),p(0,1,0,2,-1,1),p(0,0,1,0,-1,1),p(0,0,1,1,-1,1);var m=o(v,y),w=r(v,[{type:v.FLOAT,buffer:m,size:3,offset:0,stride:28},{type:v.FLOAT,buffer:m,size:3,offset:12,stride:28},{type:v.FLOAT,buffer:m,size:1,offset:24,stride:28}]),u=n(v);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.weight.location=2;var S=new i(v,m,w,u);return S.update(g),S};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(v,g,y,p){this.gl=v,this.buffer=g,this.vao=y,this.shader=p,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var c=i.prototype,h=[0,0,0],f=[0,0,0],b=[0,0];c.isTransparent=function(){return!1},c.drawTransparent=function(v){},c.draw=function(v){var g=this.gl,y=this.vao,p=this.shader;y.bind(),p.bind();var m,w=v.model||a,u=v.view||a,S=v.projection||a;this.axes&&(m=this.axes.lastCubeProps.axis);for(var _=h,E=f,L=0;L<3;++L)m&&m[L]<0?(_[L]=this.bounds[0][L],E[L]=this.bounds[1][L]):(_[L]=this.bounds[1][L],E[L]=this.bounds[0][L]);for(b[0]=g.drawingBufferWidth,b[1]=g.drawingBufferHeight,p.uniforms.model=w,p.uniforms.view=u,p.uniforms.projection=S,p.uniforms.coordinates=[this.position,_,E],p.uniforms.colors=this.colors,p.uniforms.screenShape=b,L=0;L<3;++L)p.uniforms.lineWidth=this.lineWidth[L]*this.pixelRatio,this.enabled[L]&&(y.draw(g.TRIANGLES,6,6*L),this.drawSides[L]&&y.draw(g.TRIANGLES,12,18+12*L));y.unbind()},c.update=function(v){v&&("bounds"in v&&(this.bounds=v.bounds),"position"in v&&(this.position=v.position),"lineWidth"in v&&(this.lineWidth=v.lineWidth),"colors"in v&&(this.colors=v.colors),"enabled"in v&&(this.enabled=v.enabled),"drawSides"in v&&(this.drawSides=v.drawSides))},c.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(d,s,t){var o=t(6832),r=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),i=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},s.pickShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(d,s,t){var o=t(2858),r=t(4020),n=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(b,v){var g,y=b.length;for(g=0;g<y;g++){var p=b[g];if(p===v)return g;if(p>v)return g-1}return g},i=function(b,v,g){return b<v?v:b>g?g:b},c=function(b){var v=1/0;b.sort(function(m,w){return m-w});for(var g=b.length,y=1;y<g;y++){var p=Math.abs(b[y]-b[y-1]);p<v&&(v=p)}return v};d.exports=function(b,v){var g=b.startingPositions,y=b.maxLength||1e3,p=b.tubeSize||1,m=b.absoluteTubeSize,w=b.gridFill||"+x+y+z",u={};w.indexOf("-x")!==-1&&(u.reversedX=!0),w.indexOf("-y")!==-1&&(u.reversedY=!0),w.indexOf("-z")!==-1&&(u.reversedZ=!0),u.filled=n.indexOf(w.replace(/-/g,"").replace(/\+/g,""));var S=b.getVelocity||function(ve){return function(Oe,xe,ke){var Me=xe.vectors,Te=xe.meshgrid,Q=Oe[0],oe=Oe[1],ce=Oe[2],me=Te[0].length,Ae=Te[1].length,Ie=Te[2].length,Ce=a(Te[0],Q),Re=a(Te[1],oe),le=a(Te[2],ce),de=Ce+1,_e=Re+1,Fe=le+1;if(Ce=i(Ce,0,me-1),de=i(de,0,me-1),Re=i(Re,0,Ae-1),_e=i(_e,0,Ae-1),le=i(le,0,Ie-1),Fe=i(Fe,0,Ie-1),Ce<0||Re<0||le<0||de>me-1||_e>Ae-1||Fe>Ie-1)return o.create();var Ve,He,nt,tt,ot,dt,kt=Te[0][Ce],mt=Te[0][de],wt=Te[1][Re],Lt=Te[1][_e],Ct=Te[2][le],It=(Q-kt)/(mt-kt),Ut=(oe-wt)/(Lt-wt),Rt=(ce-Ct)/(Te[2][Fe]-Ct);switch(isFinite(It)||(It=.5),isFinite(Ut)||(Ut=.5),isFinite(Rt)||(Rt=.5),ke.reversedX&&(Ce=me-1-Ce,de=me-1-de),ke.reversedY&&(Re=Ae-1-Re,_e=Ae-1-_e),ke.reversedZ&&(le=Ie-1-le,Fe=Ie-1-Fe),ke.filled){case 5:ot=le,dt=Fe,nt=Re*Ie,tt=_e*Ie,Ve=Ce*Ie*Ae,He=de*Ie*Ae;break;case 4:ot=le,dt=Fe,Ve=Ce*Ie,He=de*Ie,nt=Re*Ie*me,tt=_e*Ie*me;break;case 3:nt=Re,tt=_e,ot=le*Ae,dt=Fe*Ae,Ve=Ce*Ae*Ie,He=de*Ae*Ie;break;case 2:nt=Re,tt=_e,Ve=Ce*Ae,He=de*Ae,ot=le*Ae*me,dt=Fe*Ae*me;break;case 1:Ve=Ce,He=de,ot=le*me,dt=Fe*me,nt=Re*me*Ie,tt=_e*me*Ie;break;default:Ve=Ce,He=de,nt=Re*me,tt=_e*me,ot=le*me*Ae,dt=Fe*me*Ae}var Ge=Me[Ve+nt+ot],We=Me[Ve+nt+dt],Be=Me[Ve+tt+ot],Ye=Me[Ve+tt+dt],rt=Me[He+nt+ot],Se=Me[He+nt+dt],ze=Me[He+tt+ot],Ke=Me[He+tt+dt],st=o.create(),ct=o.create(),Tt=o.create(),Et=o.create();o.lerp(st,Ge,rt,It),o.lerp(ct,We,Se,It),o.lerp(Tt,Be,ze,It),o.lerp(Et,Ye,Ke,It);var At=o.create(),ht=o.create();o.lerp(At,st,Tt,Ut),o.lerp(ht,ct,Et,Ut);var pt=o.create();return o.lerp(pt,At,ht,Rt),pt}(ve,b,u)},_=b.getDivergence||function(ve,Oe){var xe=o.create(),ke=1e-4;o.add(xe,ve,[ke,0,0]);var Me=S(xe);o.subtract(Me,Me,Oe),o.scale(Me,Me,1/ke),o.add(xe,ve,[0,ke,0]);var Te=S(xe);o.subtract(Te,Te,Oe),o.scale(Te,Te,1/ke),o.add(xe,ve,[0,0,ke]);var Q=S(xe);return o.subtract(Q,Q,Oe),o.scale(Q,Q,1/ke),o.add(xe,Me,Te),o.add(xe,xe,Q),xe},E=[],L=v[0][0],C=v[0][1],P=v[0][2],I=v[1][0],U=v[1][1],z=v[1][2],H=function(ve){var Oe=ve[0],xe=ve[1],ke=ve[2];return!(Oe<L||Oe>I||xe<C||xe>U||ke<P||ke>z)},F=10*o.distance(v[0],v[1])/y,N=F*F,B=1,j=0,K=g.length;K>1&&(B=function(ve){for(var Oe=[],xe=[],ke=[],Me={},Te={},Q={},oe=ve.length,ce=0;ce<oe;ce++){var me=ve[ce],Ae=me[0],Ie=me[1],Ce=me[2];Me[Ae]||(Oe.push(Ae),Me[Ae]=!0),Te[Ie]||(xe.push(Ie),Te[Ie]=!0),Q[Ce]||(ke.push(Ce),Q[Ce]=!0)}var Re=c(Oe),le=c(xe),de=c(ke),_e=Math.min(Re,le,de);return isFinite(_e)?_e:1}(g));for(var G=0;G<K;G++){var V=o.create();o.copy(V,g[G]);var W=[V],J=[],X=S(V),ee=V;J.push(X);var re=[],ie=_(V,X),se=o.length(ie);isFinite(se)&&se>j&&(j=se),re.push(se),E.push({points:W,velocities:J,divergences:re});for(var fe=0;fe<100*y&&W.length<y&&H(V);){fe++;var ye=o.clone(X),ge=o.squaredLength(ye);if(ge===0)break;ge>N&&o.scale(ye,ye,F/Math.sqrt(ge)),o.add(ye,ye,V),X=S(ye),o.squaredDistance(ee,ye)-N>-1e-4*N&&(W.push(ye),ee=ye,J.push(X),ie=_(ye,X),se=o.length(ie),isFinite(se)&&se>j&&(j=se),re.push(se)),V=ye}}var he=function(ve,Oe,xe,ke){for(var Me=0,Te=0;Te<ve.length;Te++)for(var Q=ve[Te].velocities,oe=0;oe<Q.length;oe++)Me=Math.max(Me,o.length(Q[oe]));var ce=ve.map(function(Ve){return function(He,nt,tt,ot){for(var dt=He.points,kt=He.velocities,mt=He.divergences,wt=[],Lt=[],Ct=[],It=[],Ut=[],Rt=[],Ge=0,We=0,Be=r.create(),Ye=r.create(),rt=0;rt<dt.length;rt++){var Se=dt[rt],ze=kt[rt],Ke=mt[rt];nt===0&&(Ke=.05*tt),We=o.length(ze)/ot,Be=r.create(),o.copy(Be,ze),Be[3]=Ke;for(var st=0;st<8;st++)Ut[st]=[Se[0],Se[1],Se[2],st];if(It.length>0)for(st=0;st<8;st++){var ct=(st+1)%8;wt.push(It[st],Ut[st],Ut[ct],Ut[ct],It[ct],It[st]),Ct.push(Ye,Be,Be,Be,Ye,Ye),Rt.push(Ge,We,We,We,Ge,Ge);var Tt=wt.length;Lt.push([Tt-6,Tt-5,Tt-4],[Tt-3,Tt-2,Tt-1])}var Et=It;It=Ut,Ut=Et;var At=Ye;Ye=Be,Be=At;var ht=Ge;Ge=We,We=ht}return{positions:wt,cells:Lt,vectors:Ct,vertexIntensity:Rt}}(Ve,xe,ke,Me)}),me=[],Ae=[],Ie=[],Ce=[];for(Te=0;Te<ce.length;Te++){var Re=ce[Te],le=me.length;for(me=me.concat(Re.positions),Ie=Ie.concat(Re.vectors),Ce=Ce.concat(Re.vertexIntensity),oe=0;oe<Re.cells.length;oe++){var de=Re.cells[oe],_e=[];Ae.push(_e);for(var Fe=0;Fe<de.length;Fe++)_e.push(de[Fe]+le)}}return{positions:me,cells:Ae,vectors:Ie,vertexIntensity:Ce,colormap:Oe}}(E,b.colormap,j,B);return m?he.tubeScale=m:(j===0&&(j=1),he.tubeScale=.5*p*B/j),he};var h=t(9578),f=t(1140).createMesh;d.exports.createTubeMesh=function(b,v){return f(b,v,{shaders:h,traceType:"streamtube"})}},9054:function(d,s,t){var o=t(5158),r=t(6832),n=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),a=r([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color  in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),i=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),c=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);s.createShader=function(h){var f=o(h,n,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f.attributes.normal.location=2,f},s.createPickShader=function(h){var f=o(h,n,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f.attributes.normal.location=2,f},s.createContourShader=function(h){var f=o(h,i,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f},s.createPickContourShader=function(h){var f=o(h,i,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f}},3754:function(d,s,t){d.exports=function(ee){var re=ee.gl,ie=u(re),se=_(re),fe=S(re),ye=E(re),ge=r(re),he=n(re,[{buffer:ge,size:4,stride:40,offset:0},{buffer:ge,size:3,stride:40,offset:16},{buffer:ge,size:3,stride:40,offset:28}]),ve=r(re),Oe=n(re,[{buffer:ve,size:4,stride:20,offset:0},{buffer:ve,size:1,stride:20,offset:16}]),xe=r(re),ke=n(re,[{buffer:xe,size:2,type:re.FLOAT}]),Me=a(re,1,256,re.RGBA,re.UNSIGNED_BYTE);Me.minFilter=re.LINEAR,Me.magFilter=re.LINEAR;var Te=new U(re,[0,0],[[0,0,0],[0,0,0]],ie,se,ge,he,Me,fe,ye,ve,Oe,xe,ke,[0,0,0]),Q={levels:[[],[],[]]};for(var oe in ee)Q[oe]=ee[oe];return Q.colormap=Q.colormap||"jet",Te.update(Q),Te};var o=t(2288),r=t(5827),n=t(2944),a=t(8931),i=t(5306),c=t(9156),h=t(7498),f=t(7382),b=t(5050),v=t(4162),g=t(104),y=t(7437),p=t(5070),m=t(9144),w=t(9054),u=w.createShader,S=w.createContourShader,_=w.createPickShader,E=w.createPickContourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],C=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],P=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function I(ee,re,ie,se,fe){this.position=ee,this.index=re,this.uv=ie,this.level=se,this.dataCoordinate=fe}function U(ee,re,ie,se,fe,ye,ge,he,ve,Oe,xe,ke,Me,Te,Q){this.gl=ee,this.shape=re,this.bounds=ie,this.objectOffset=Q,this.intensityBounds=[],this._shader=se,this._pickShader=fe,this._coordinateBuffer=ye,this._vao=ge,this._colorMap=he,this._contourShader=ve,this._contourPickShader=Oe,this._contourBuffer=xe,this._contourVAO=ke,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new I([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=Me,this._dynamicVAO=Te,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[b(i.mallocFloat(1024),[0,0]),b(i.mallocFloat(1024),[0,0]),b(i.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}(function(){for(var ee=0;ee<3;++ee){var re=P[ee],ie=(ee+2)%3;re[(ee+1)%3+0]=1,re[ie+3]=1,re[ee+6]=1}})();var z=U.prototype;z.genColormap=function(ee,re){var ie=!1,se=f([c({colormap:ee,nshades:256,format:"rgba"}).map(function(fe,ye){var ge=re?function(he,ve){if(!ve||!ve.length)return 1;for(var Oe=0;Oe<ve.length;++Oe){if(ve.length<2)return 1;if(ve[Oe][0]===he)return ve[Oe][1];if(ve[Oe][0]>he&&Oe>0){var xe=(ve[Oe][0]-he)/(ve[Oe][0]-ve[Oe-1][0]);return ve[Oe][1]*(1-xe)+xe*ve[Oe-1][1]}}return 1}(ye/255,re):fe[3];return ge<1&&(ie=!0),[fe[0],fe[1],fe[2],255*ge]})]);return h.divseq(se,255),this.hasAlphaScale=ie,se},z.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},z.isOpaque=function(){return!this.isTransparent()},z.pickSlots=1,z.setPickBase=function(ee){this.pickId=ee};var H=[0,0,0],F={showSurface:!1,showContour:!1,projections:[L.slice(),L.slice(),L.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function N(ee,re){var ie,se,fe,ye=re.axes&&re.axes.lastCubeProps.axis||H,ge=re.showSurface,he=re.showContour;for(ie=0;ie<3;++ie)for(ge=ge||re.surfaceProject[ie],se=0;se<3;++se)he=he||re.contourProject[ie][se];for(ie=0;ie<3;++ie){var ve=F.projections[ie];for(se=0;se<16;++se)ve[se]=0;for(se=0;se<4;++se)ve[5*se]=1;ve[5*ie]=0,ve[12+ie]=re.axesBounds[+(ye[ie]>0)][ie],g(ve,ee.model,ve);var Oe=F.clipBounds[ie];for(fe=0;fe<2;++fe)for(se=0;se<3;++se)Oe[fe][se]=ee.clipBounds[fe][se];Oe[0][ie]=-1e8,Oe[1][ie]=1e8}return F.showSurface=ge,F.showContour=he,F}var B={model:L,view:L,projection:L,inverseModel:L.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},j=L.slice(),K=[1,0,0,0,1,0,0,0,1];function G(ee,re){ee=ee||{};var ie=this.gl;ie.disable(ie.CULL_FACE),this._colorMap.bind(0);var se=B;se.model=ee.model||L,se.view=ee.view||L,se.projection=ee.projection||L,se.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],se.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],se.objectOffset=this.objectOffset,se.contourColor=this.contourColor[0],se.inverseModel=y(se.inverseModel,se.model);for(var fe=0;fe<2;++fe)for(var ye=se.clipBounds[fe],ge=0;ge<3;++ge)ye[ge]=Math.min(Math.max(this.clipBounds[fe][ge],-1e8),1e8);se.kambient=this.ambientLight,se.kdiffuse=this.diffuseLight,se.kspecular=this.specularLight,se.roughness=this.roughness,se.fresnel=this.fresnel,se.opacity=this.opacity,se.height=0,se.permutation=K,se.vertexColor=this.vertexColor;var he=j;for(g(he,se.view,se.model),g(he,se.projection,he),y(he,he),fe=0;fe<3;++fe)se.eyePosition[fe]=he[12+fe]/he[15];var ve=he[15];for(fe=0;fe<3;++fe)ve+=this.lightPosition[fe]*he[4*fe+3];for(fe=0;fe<3;++fe){var Oe=he[12+fe];for(ge=0;ge<3;++ge)Oe+=he[4*ge+fe]*this.lightPosition[ge];se.lightPosition[fe]=Oe/ve}var xe=N(se,this);if(xe.showSurface){for(this._shader.bind(),this._shader.uniforms=se,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ie.TRIANGLES,this._vertexCount),fe=0;fe<3;++fe)this.surfaceProject[fe]&&this.vertexCount&&(this._shader.uniforms.model=xe.projections[fe],this._shader.uniforms.clipBounds=xe.clipBounds[fe],this._vao.draw(ie.TRIANGLES,this._vertexCount));this._vao.unbind()}if(xe.showContour){var ke=this._contourShader;se.kambient=1,se.kdiffuse=0,se.kspecular=0,se.opacity=1,ke.bind(),ke.uniforms=se;var Me=this._contourVAO;for(Me.bind(),fe=0;fe<3;++fe)for(ke.uniforms.permutation=P[fe],ie.lineWidth(this.contourWidth[fe]*this.pixelRatio),ge=0;ge<this.contourLevels[fe].length;++ge)ge===this.highlightLevel[fe]?(ke.uniforms.contourColor=this.highlightColor[fe],ke.uniforms.contourTint=this.highlightTint[fe]):ge!==0&&ge-1!==this.highlightLevel[fe]||(ke.uniforms.contourColor=this.contourColor[fe],ke.uniforms.contourTint=this.contourTint[fe]),this._contourCounts[fe][ge]&&(ke.uniforms.height=this.contourLevels[fe][ge],Me.draw(ie.LINES,this._contourCounts[fe][ge],this._contourOffsets[fe][ge]));for(fe=0;fe<3;++fe)for(ke.uniforms.model=xe.projections[fe],ke.uniforms.clipBounds=xe.clipBounds[fe],ge=0;ge<3;++ge)if(this.contourProject[fe][ge]){ke.uniforms.permutation=P[ge],ie.lineWidth(this.contourWidth[ge]*this.pixelRatio);for(var Te=0;Te<this.contourLevels[ge].length;++Te)Te===this.highlightLevel[ge]?(ke.uniforms.contourColor=this.highlightColor[ge],ke.uniforms.contourTint=this.highlightTint[ge]):Te!==0&&Te-1!==this.highlightLevel[ge]||(ke.uniforms.contourColor=this.contourColor[ge],ke.uniforms.contourTint=this.contourTint[ge]),this._contourCounts[ge][Te]&&(ke.uniforms.height=this.contourLevels[ge][Te],Me.draw(ie.LINES,this._contourCounts[ge][Te],this._contourOffsets[ge][Te]))}for(Me.unbind(),(Me=this._dynamicVAO).bind(),fe=0;fe<3;++fe)if(this._dynamicCounts[fe]!==0)for(ke.uniforms.model=se.model,ke.uniforms.clipBounds=se.clipBounds,ke.uniforms.permutation=P[fe],ie.lineWidth(this.dynamicWidth[fe]*this.pixelRatio),ke.uniforms.contourColor=this.dynamicColor[fe],ke.uniforms.contourTint=this.dynamicTint[fe],ke.uniforms.height=this.dynamicLevel[fe],Me.draw(ie.LINES,this._dynamicCounts[fe],this._dynamicOffsets[fe]),ge=0;ge<3;++ge)this.contourProject[ge][fe]&&(ke.uniforms.model=xe.projections[ge],ke.uniforms.clipBounds=xe.clipBounds[ge],Me.draw(ie.LINES,this._dynamicCounts[fe],this._dynamicOffsets[fe]));Me.unbind()}}z.draw=function(ee){return G.call(this,ee,!1)},z.drawTransparent=function(ee){return G.call(this,ee,!0)};var V={model:L,view:L,projection:L,inverseModel:L,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function W(ee,re){return Array.isArray(ee)?[re(ee[0]),re(ee[1]),re(ee[2])]:[re(ee),re(ee),re(ee)]}function J(ee){return Array.isArray(ee)?ee.length===3?[ee[0],ee[1],ee[2],1]:[ee[0],ee[1],ee[2],ee[3]]:[0,0,0,1]}function X(ee){if(Array.isArray(ee)){if(Array.isArray(ee))return[J(ee[0]),J(ee[1]),J(ee[2])];var re=J(ee);return[re.slice(),re.slice(),re.slice()]}}z.drawPick=function(ee){ee=ee||{};var re=this.gl;re.disable(re.CULL_FACE);var ie=V;ie.model=ee.model||L,ie.view=ee.view||L,ie.projection=ee.projection||L,ie.shape=this._field[2].shape,ie.pickId=this.pickId/255,ie.lowerBound=this.bounds[0],ie.upperBound=this.bounds[1],ie.objectOffset=this.objectOffset,ie.permutation=K;for(var se=0;se<2;++se)for(var fe=ie.clipBounds[se],ye=0;ye<3;++ye)fe[ye]=Math.min(Math.max(this.clipBounds[se][ye],-1e8),1e8);var ge=N(ie,this);if(ge.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ie,this._vao.bind(),this._vao.draw(re.TRIANGLES,this._vertexCount),se=0;se<3;++se)this.surfaceProject[se]&&(this._pickShader.uniforms.model=ge.projections[se],this._pickShader.uniforms.clipBounds=ge.clipBounds[se],this._vao.draw(re.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ge.showContour){var he=this._contourPickShader;he.bind(),he.uniforms=ie;var ve=this._contourVAO;for(ve.bind(),ye=0;ye<3;++ye)for(re.lineWidth(this.contourWidth[ye]*this.pixelRatio),he.uniforms.permutation=P[ye],se=0;se<this.contourLevels[ye].length;++se)this._contourCounts[ye][se]&&(he.uniforms.height=this.contourLevels[ye][se],ve.draw(re.LINES,this._contourCounts[ye][se],this._contourOffsets[ye][se]));for(se=0;se<3;++se)for(he.uniforms.model=ge.projections[se],he.uniforms.clipBounds=ge.clipBounds[se],ye=0;ye<3;++ye)if(this.contourProject[se][ye]){he.uniforms.permutation=P[ye],re.lineWidth(this.contourWidth[ye]*this.pixelRatio);for(var Oe=0;Oe<this.contourLevels[ye].length;++Oe)this._contourCounts[ye][Oe]&&(he.uniforms.height=this.contourLevels[ye][Oe],ve.draw(re.LINES,this._contourCounts[ye][Oe],this._contourOffsets[ye][Oe]))}ve.unbind()}},z.pick=function(ee){if(!ee||ee.id!==this.pickId)return null;var re=this._field[2].shape,ie=this._pickResult,se=re[0]*(ee.value[0]+(ee.value[2]>>4)/16)/255,fe=Math.floor(se),ye=se-fe,ge=re[1]*(ee.value[1]+(15&ee.value[2])/16)/255,he=Math.floor(ge),ve=ge-he;fe+=1,he+=1;var Oe=ie.position;Oe[0]=Oe[1]=Oe[2]=0;for(var xe=0;xe<2;++xe)for(var ke=xe?ye:1-ye,Me=0;Me<2;++Me)for(var Te=fe+xe,Q=he+Me,oe=ke*(Me?ve:1-ve),ce=0;ce<3;++ce)Oe[ce]+=this._field[ce].get(Te,Q)*oe;for(var me=this._pickResult.level,Ae=0;Ae<3;++Ae)if(me[Ae]=p.le(this.contourLevels[Ae],Oe[Ae]),me[Ae]<0)this.contourLevels[Ae].length>0&&(me[Ae]=0);else if(me[Ae]<this.contourLevels[Ae].length-1){var Ie=this.contourLevels[Ae][me[Ae]],Ce=this.contourLevels[Ae][me[Ae]+1];Math.abs(Ie-Oe[Ae])>Math.abs(Ce-Oe[Ae])&&(me[Ae]+=1)}for(ie.index[0]=ye<.5?fe:fe+1,ie.index[1]=ve<.5?he:he+1,ie.uv[0]=se/re[0],ie.uv[1]=ge/re[1],ce=0;ce<3;++ce)ie.dataCoordinate[ce]=this._field[ce].get(ie.index[0],ie.index[1]);return ie},z.padField=function(ee,re){var ie=re.shape.slice(),se=ee.shape.slice();h.assign(ee.lo(1,1).hi(ie[0],ie[1]),re),h.assign(ee.lo(1).hi(ie[0],1),re.hi(ie[0],1)),h.assign(ee.lo(1,se[1]-1).hi(ie[0],1),re.lo(0,ie[1]-1).hi(ie[0],1)),h.assign(ee.lo(0,1).hi(1,ie[1]),re.hi(1)),h.assign(ee.lo(se[0]-1,1).hi(1,ie[1]),re.lo(ie[0]-1)),ee.set(0,0,re.get(0,0)),ee.set(0,se[1]-1,re.get(0,ie[1]-1)),ee.set(se[0]-1,0,re.get(ie[0]-1,0)),ee.set(se[0]-1,se[1]-1,re.get(ie[0]-1,ie[1]-1))},z.update=function(ee){ee=ee||{},this.objectOffset=ee.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in ee&&(this.contourWidth=W(ee.contourWidth,Number)),"showContour"in ee&&(this.showContour=W(ee.showContour,Boolean)),"showSurface"in ee&&(this.showSurface=!!ee.showSurface),"contourTint"in ee&&(this.contourTint=W(ee.contourTint,Boolean)),"contourColor"in ee&&(this.contourColor=X(ee.contourColor)),"contourProject"in ee&&(this.contourProject=W(ee.contourProject,function(vn){return W(vn,Boolean)})),"surfaceProject"in ee&&(this.surfaceProject=ee.surfaceProject),"dynamicColor"in ee&&(this.dynamicColor=X(ee.dynamicColor)),"dynamicTint"in ee&&(this.dynamicTint=W(ee.dynamicTint,Number)),"dynamicWidth"in ee&&(this.dynamicWidth=W(ee.dynamicWidth,Number)),"opacity"in ee&&(this.opacity=ee.opacity),"opacityscale"in ee&&(this.opacityscale=ee.opacityscale),"colorBounds"in ee&&(this.colorBounds=ee.colorBounds),"vertexColor"in ee&&(this.vertexColor=ee.vertexColor?1:0),"colormap"in ee&&this._colorMap.setPixels(this.genColormap(ee.colormap,this.opacityscale));var re=ee.field||ee.coords&&ee.coords[2]||null,ie=!1;if(re||(re=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in ee||"coords"in ee){var se=(re.shape[0]+2)*(re.shape[1]+2);se>this._field[2].data.length&&(i.freeFloat(this._field[2].data),this._field[2].data=i.mallocFloat(o.nextPow2(se))),this._field[2]=b(this._field[2].data,[re.shape[0]+2,re.shape[1]+2]),this.padField(this._field[2],re),this.shape=re.shape.slice();for(var fe=this.shape,ye=0;ye<2;++ye)this._field[2].size>this._field[ye].data.length&&(i.freeFloat(this._field[ye].data),this._field[ye].data=i.mallocFloat(this._field[2].size)),this._field[ye]=b(this._field[ye].data,[fe[0]+2,fe[1]+2]);if(ee.coords){var ge=ee.coords;if(!Array.isArray(ge)||ge.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(ye=0;ye<2;++ye){var he=ge[ye];for(Me=0;Me<2;++Me)if(he.shape[Me]!==fe[Me])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[ye],he)}}else if(ee.ticks){var ve=ee.ticks;if(!Array.isArray(ve)||ve.length!==2)throw new Error("gl-surface: invalid ticks");for(ye=0;ye<2;++ye){var Oe=ve[ye];if((Array.isArray(Oe)||Oe.length)&&(Oe=b(Oe)),Oe.shape[0]!==fe[ye])throw new Error("gl-surface: invalid tick length");var xe=b(Oe.data,fe);xe.stride[ye]=Oe.stride[0],xe.stride[1^ye]=0,this.padField(this._field[ye],xe)}}else{for(ye=0;ye<2;++ye){var ke=[0,0];ke[ye]=1,this._field[ye]=b(this._field[ye].data,[fe[0]+2,fe[1]+2],ke,0)}this._field[0].set(0,0,0);for(var Me=0;Me<fe[0];++Me)this._field[0].set(Me+1,0,Me);for(this._field[0].set(fe[0]+1,0,fe[0]-1),this._field[1].set(0,0,0),Me=0;Me<fe[1];++Me)this._field[1].set(0,Me+1,Me);this._field[1].set(0,fe[1]+1,fe[1]-1)}var Te=this._field,Q=b(i.mallocFloat(3*Te[2].size*2),[3,fe[0]+2,fe[1]+2,2]);for(ye=0;ye<3;++ye)m(Q.pick(ye),Te[ye],"mirror");var oe=b(i.mallocFloat(3*Te[2].size),[fe[0]+2,fe[1]+2,3]);for(ye=0;ye<fe[0]+2;++ye)for(Me=0;Me<fe[1]+2;++Me){var ce=Q.get(0,ye,Me,0),me=Q.get(0,ye,Me,1),Ae=Q.get(1,ye,Me,0),Ie=Q.get(1,ye,Me,1),Ce=Q.get(2,ye,Me,0),Re=Q.get(2,ye,Me,1),le=Ae*Re-Ie*Ce,de=Ce*me-Re*ce,_e=ce*Ie-me*Ae,Fe=Math.sqrt(le*le+de*de+_e*_e);Fe<1e-8?(Fe=Math.max(Math.abs(le),Math.abs(de),Math.abs(_e)))<1e-8?(_e=1,de=le=0,Fe=1):Fe=1/Fe:Fe=1/Math.sqrt(Fe),oe.set(ye,Me,0,le*Fe),oe.set(ye,Me,1,de*Fe),oe.set(ye,Me,2,_e*Fe)}i.free(Q.data);var Ve=[1/0,1/0,1/0],He=[-1/0,-1/0,-1/0],nt=1/0,tt=-1/0,ot=(fe[0]-1)*(fe[1]-1)*6,dt=i.mallocFloat(o.nextPow2(10*ot)),kt=0,mt=0;for(ye=0;ye<fe[0]-1;++ye)e:for(Me=0;Me<fe[1]-1;++Me){for(var wt=0;wt<2;++wt)for(var Lt=0;Lt<2;++Lt)for(var Ct=0;Ct<3;++Ct){var It=this._field[Ct].get(1+ye+wt,1+Me+Lt);if(isNaN(It)||!isFinite(It))continue e}for(Ct=0;Ct<6;++Ct){var Ut=ye+C[Ct][0],Rt=Me+C[Ct][1],Ge=this._field[0].get(Ut+1,Rt+1),We=this._field[1].get(Ut+1,Rt+1);It=this._field[2].get(Ut+1,Rt+1),le=oe.get(Ut+1,Rt+1,0),de=oe.get(Ut+1,Rt+1,1),_e=oe.get(Ut+1,Rt+1,2),ee.intensity&&(Be=ee.intensity.get(Ut,Rt));var Be=ee.intensity?ee.intensity.get(Ut,Rt):It+this.objectOffset[2];dt[kt++]=Ut,dt[kt++]=Rt,dt[kt++]=Ge,dt[kt++]=We,dt[kt++]=It,dt[kt++]=0,dt[kt++]=Be,dt[kt++]=le,dt[kt++]=de,dt[kt++]=_e,Ve[0]=Math.min(Ve[0],Ge+this.objectOffset[0]),Ve[1]=Math.min(Ve[1],We+this.objectOffset[1]),Ve[2]=Math.min(Ve[2],It+this.objectOffset[2]),nt=Math.min(nt,Be),He[0]=Math.max(He[0],Ge+this.objectOffset[0]),He[1]=Math.max(He[1],We+this.objectOffset[1]),He[2]=Math.max(He[2],It+this.objectOffset[2]),tt=Math.max(tt,Be),mt+=1}}for(ee.intensityBounds&&(nt=+ee.intensityBounds[0],tt=+ee.intensityBounds[1]),ye=6;ye<kt;ye+=10)dt[ye]=(dt[ye]-nt)/(tt-nt);this._vertexCount=mt,this._coordinateBuffer.update(dt.subarray(0,kt)),i.freeFloat(dt),i.free(oe.data),this.bounds=[Ve,He],this.intensity=ee.intensity||this._field[2],this.intensityBounds[0]===nt&&this.intensityBounds[1]===tt||(ie=!0),this.intensityBounds=[nt,tt]}if("levels"in ee){var Ye=ee.levels;for(Ye=Array.isArray(Ye[0])?Ye.slice():[[],[],Ye],ye=0;ye<3;++ye)Ye[ye]=Ye[ye].slice(),Ye[ye].sort(function(vn,cn){return vn-cn});for(ye=0;ye<3;++ye)for(Me=0;Me<Ye[ye].length;++Me)Ye[ye][Me]-=this.objectOffset[ye];e:for(ye=0;ye<3;++ye){if(Ye[ye].length!==this.contourLevels[ye].length){ie=!0;break}for(Me=0;Me<Ye[ye].length;++Me)if(Ye[ye][Me]!==this.contourLevels[ye][Me]){ie=!0;break e}}this.contourLevels=Ye}if(ie){Te=this._field,fe=this.shape;for(var rt=[],Se=0;Se<3;++Se){var ze=this.contourLevels[Se],Ke=[],st=[],ct=[0,0,0];for(ye=0;ye<ze.length;++ye){var Tt=v(this._field[Se],ze[ye]);Ke.push(rt.length/5|0),mt=0;e:for(Me=0;Me<Tt.cells.length;++Me){var Et=Tt.cells[Me];for(Ct=0;Ct<2;++Ct){var At=Tt.positions[Et[Ct]],ht=At[0],pt=0|Math.floor(ht),gt=ht-pt,Pt=At[1],Ot=0|Math.floor(Pt),Ht=Pt-Ot,jt=!1;t:for(var Nt=0;Nt<3;++Nt){ct[Nt]=0;var Gt=(Se+Nt+1)%3;for(wt=0;wt<2;++wt){var un=wt?gt:1-gt;for(Ut=0|Math.min(Math.max(pt+wt,0),fe[0]),Lt=0;Lt<2;++Lt){var pn=Lt?Ht:1-Ht;if(Rt=0|Math.min(Math.max(Ot+Lt,0),fe[1]),It=Nt<2?this._field[Gt].get(Ut,Rt):(this.intensity.get(Ut,Rt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(It)||isNaN(It)){jt=!0;break t}var Kt=un*pn;ct[Nt]+=Kt*It}}}if(jt){if(Ct>0){for(var wn=0;wn<5;++wn)rt.pop();mt-=1}continue e}rt.push(ct[0],ct[1],At[0],At[1],ct[2]),mt+=1}}st.push(mt)}this._contourOffsets[Se]=Ke,this._contourCounts[Se]=st}var Bn=i.mallocFloat(rt.length);for(ye=0;ye<rt.length;++ye)Bn[ye]=rt[ye];this._contourBuffer.update(Bn),i.freeFloat(Bn)}},z.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var ee=0;ee<3;++ee)i.freeFloat(this._field[ee].data)},z.highlight=function(ee){var re,ie;if(!ee)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(re=0;re<3;++re)this.enableHighlight[re]?this.highlightLevel[re]=ee.level[re]:this.highlightLevel[re]=-1;for(ie=this.snapToData?ee.dataCoordinate:ee.position,re=0;re<3;++re)ie[re]-=this.objectOffset[re];if(this.enableDynamic[0]&&ie[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ie[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ie[2]!==this.dynamicLevel[2]){for(var se=0,fe=this.shape,ye=i.mallocFloat(12*fe[0]*fe[1]),ge=0;ge<3;++ge)if(this.enableDynamic[ge]){this.dynamicLevel[ge]=ie[ge];var he=(ge+1)%3,ve=(ge+2)%3,Oe=this._field[ge],xe=this._field[he],ke=this._field[ve],Me=v(Oe,ie[ge]),Te=Me.cells,Q=Me.positions;for(this._dynamicOffsets[ge]=se,re=0;re<Te.length;++re)for(var oe=Te[re],ce=0;ce<2;++ce){var me=Q[oe[ce]],Ae=+me[0],Ie=0|Ae,Ce=0|Math.min(Ie+1,fe[0]),Re=Ae-Ie,le=1-Re,de=+me[1],_e=0|de,Fe=0|Math.min(_e+1,fe[1]),Ve=de-_e,He=1-Ve,nt=le*He,tt=le*Ve,ot=Re*He,dt=Re*Ve,kt=nt*xe.get(Ie,_e)+tt*xe.get(Ie,Fe)+ot*xe.get(Ce,_e)+dt*xe.get(Ce,Fe),mt=nt*ke.get(Ie,_e)+tt*ke.get(Ie,Fe)+ot*ke.get(Ce,_e)+dt*ke.get(Ce,Fe);if(isNaN(kt)||isNaN(mt)){ce&&(se-=1);break}ye[2*se+0]=kt,ye[2*se+1]=mt,se+=1}this._dynamicCounts[ge]=se-this._dynamicOffsets[ge]}else this.dynamicLevel[ge]=NaN,this._dynamicCounts[ge]=0;this._dynamicBuffer.update(ye.subarray(0,2*se)),i.freeFloat(ye)}}},8931:function(d,s,t){var o=t(5050),r=t(7498),n=t(5306);d.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||h(_),typeof arguments[1]=="number")return w(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return w(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var E=arguments[1],L=f(E)?E:E.raw;if(L)return u(_,L,0|E.width,0|E.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(E.shape&&E.data&&E.stride)return S(_,E)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,i=null,c=null;function h(_){a=[_.LINEAR,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_NEAREST],i=[_.NEAREST,_.LINEAR,_.NEAREST_MIPMAP_NEAREST,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_LINEAR],c=[_.REPEAT,_.CLAMP_TO_EDGE,_.MIRRORED_REPEAT]}function f(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var b=function(_,E){r.muls(_,E,255)};function v(_,E,L){var C=_.gl,P=C.getParameter(C.MAX_TEXTURE_SIZE);if(E<0||E>P||L<0||L>P)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[E,L],_.bind(),C.texImage2D(C.TEXTURE_2D,0,_.format,E,L,0,_.format,_.type,null),_._mipLevels=[0],_}function g(_,E,L,C,P,I){this.gl=_,this.handle=E,this.format=P,this.type=I,this._shape=[L,C],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var U=this,z=[this._wrapS,this._wrapT];Object.defineProperties(z,[{get:function(){return U._wrapS},set:function(F){return U.wrapS=F}},{get:function(){return U._wrapT},set:function(F){return U.wrapT=F}}]),this._wrapVector=z;var H=[this._shape[0],this._shape[1]];Object.defineProperties(H,[{get:function(){return U._shape[0]},set:function(F){return U.width=F}},{get:function(){return U._shape[1]},set:function(F){return U.height=F}}]),this._shapeVector=H}var y=g.prototype;function p(_,E){return _.length===3?E[2]===1&&E[1]===_[0]*_[2]&&E[0]===_[2]:E[0]===1&&E[1]===_[0]}function m(_){var E=_.createTexture();return _.bindTexture(_.TEXTURE_2D,E),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),E}function w(_,E,L,C,P){var I=_.getParameter(_.MAX_TEXTURE_SIZE);if(E<0||E>I||L<0||L>I)throw new Error("gl-texture2d: Invalid texture shape");if(P===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var U=m(_);return _.texImage2D(_.TEXTURE_2D,0,C,E,L,0,C,P,null),new g(_,U,E,L,C,P)}function u(_,E,L,C,P,I){var U=m(_);return _.texImage2D(_.TEXTURE_2D,0,P,P,I,E),new g(_,U,L,C,P,I)}function S(_,E){var L=E.dtype,C=E.shape.slice(),P=_.getParameter(_.MAX_TEXTURE_SIZE);if(C[0]<0||C[0]>P||C[1]<0||C[1]>P)throw new Error("gl-texture2d: Invalid texture size");var I=p(C,E.stride.slice()),U=0;L==="float32"?U=_.FLOAT:L==="float64"?(U=_.FLOAT,I=!1,L="float32"):L==="uint8"?U=_.UNSIGNED_BYTE:(U=_.UNSIGNED_BYTE,I=!1,L="uint8");var z,H,F=0;if(C.length===2)F=_.LUMINANCE,C=[C[0],C[1],1],E=o(E.data,C,[E.stride[0],E.stride[1],1],E.offset);else{if(C.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(C[2]===1)F=_.ALPHA;else if(C[2]===2)F=_.LUMINANCE_ALPHA;else if(C[2]===3)F=_.RGB;else{if(C[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");F=_.RGBA}}U!==_.FLOAT||_.getExtension("OES_texture_float")||(U=_.UNSIGNED_BYTE,I=!1);var N=E.size;if(I)z=E.offset===0&&E.data.length===N?E.data:E.data.subarray(E.offset,E.offset+N);else{var B=[C[2],C[2]*C[0],1];H=n.malloc(N,L);var j=o(H,C,B,0);L!=="float32"&&L!=="float64"||U!==_.UNSIGNED_BYTE?r.assign(j,E):b(j,E),z=H.subarray(0,N)}var K=m(_);return _.texImage2D(_.TEXTURE_2D,0,F,C[0],C[1],0,F,U,z),I||n.free(H),new g(_,K,C[0],C[1],F,U)}Object.defineProperties(y,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var E=this.gl;if(this.type===E.FLOAT&&a.indexOf(_)>=0&&(E.getExtension("OES_texture_float_linear")||(_=E.NEAREST)),i.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var E=this.gl;if(this.type===E.FLOAT&&a.indexOf(_)>=0&&(E.getExtension("OES_texture_float_linear")||(_=E.NEAREST)),i.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var E=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),E!==this._anisoSamples){var L=this.gl.getExtension("EXT_texture_filter_anisotropic");L&&this.gl.texParameterf(this.gl.TEXTURE_2D,L.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),c.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),c.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var E=0;E<2;++E)if(c.indexOf(_[E])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var L=this.gl;return this.bind(),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,this._wrapS),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return v(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return v(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _|=0,v(this,this._shape[0],_),_}}}),y.bind=function(_){var E=this.gl;return _!==void 0&&E.activeTexture(E.TEXTURE0+(0|_)),E.bindTexture(E.TEXTURE_2D,this.handle),_!==void 0?0|_:E.getParameter(E.ACTIVE_TEXTURE)-E.TEXTURE0},y.dispose=function(){this.gl.deleteTexture(this.handle)},y.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),E=0;_>0;++E,_>>>=1)this._mipLevels.indexOf(E)<0&&this._mipLevels.push(E)},y.setPixels=function(_,E,L,C){var P=this.gl;this.bind(),Array.isArray(E)?(C=L,L=0|E[1],E=0|E[0]):(E=E||0,L=L||0),C=C||0;var I=f(_)?_:_.raw;if(I)this._mipLevels.indexOf(C)<0?(P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,this.type,I),this._mipLevels.push(C)):P.texSubImage2D(P.TEXTURE_2D,C,E,L,this.format,this.type,I);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||E+_.shape[1]>this._shape[1]>>>C||L+_.shape[0]>this._shape[0]>>>C||E<0||L<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(U,z,H,F,N,B,j,K){var G=K.dtype,V=K.shape.slice();if(V.length<2||V.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var W=0,J=0,X=p(V,K.stride.slice());if(G==="float32"?W=U.FLOAT:G==="float64"?(W=U.FLOAT,X=!1,G="float32"):G==="uint8"?W=U.UNSIGNED_BYTE:(W=U.UNSIGNED_BYTE,X=!1,G="uint8"),V.length===2)J=U.LUMINANCE,V=[V[0],V[1],1],K=o(K.data,V,[K.stride[0],K.stride[1],1],K.offset);else{if(V.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(V[2]===1)J=U.ALPHA;else if(V[2]===2)J=U.LUMINANCE_ALPHA;else if(V[2]===3)J=U.RGB;else{if(V[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");J=U.RGBA}V[2]}if(J!==U.LUMINANCE&&J!==U.ALPHA||N!==U.LUMINANCE&&N!==U.ALPHA||(J=N),J!==N)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var ee=K.size,re=j.indexOf(F)<0;if(re&&j.push(F),W===B&&X)K.offset===0&&K.data.length===ee?re?U.texImage2D(U.TEXTURE_2D,F,N,V[0],V[1],0,N,B,K.data):U.texSubImage2D(U.TEXTURE_2D,F,z,H,V[0],V[1],N,B,K.data):re?U.texImage2D(U.TEXTURE_2D,F,N,V[0],V[1],0,N,B,K.data.subarray(K.offset,K.offset+ee)):U.texSubImage2D(U.TEXTURE_2D,F,z,H,V[0],V[1],N,B,K.data.subarray(K.offset,K.offset+ee));else{var ie;ie=B===U.FLOAT?n.mallocFloat32(ee):n.mallocUint8(ee);var se=o(ie,V,[V[2],V[2]*V[0],1]);W===U.FLOAT&&B===U.UNSIGNED_BYTE?b(se,K):r.assign(se,K),re?U.texImage2D(U.TEXTURE_2D,F,N,V[0],V[1],0,N,B,ie.subarray(0,ee)):U.texSubImage2D(U.TEXTURE_2D,F,z,H,V[0],V[1],N,B,ie.subarray(0,ee)),B===U.FLOAT?n.freeFloat32(ie):n.freeUint8(ie)}})(P,E,L,C,this.format,this.type,this._mipLevels,_)}}},3056:function(d){d.exports=function(s,t,o){t?t.bind():s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null);var r=0|s.getParameter(s.MAX_VERTEX_ATTRIBS);if(o){if(o.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<o.length;++n){var a=o[n];if(a.buffer){var i=a.buffer,c=a.size||4,h=a.type||s.FLOAT,f=!!a.normalized,b=a.stride||0,v=a.offset||0;i.bind(),s.enableVertexAttribArray(n),s.vertexAttribPointer(n,c,h,f,b,v)}else{if(typeof a=="number")s.vertexAttrib1f(n,a);else if(a.length===1)s.vertexAttrib1f(n,a[0]);else if(a.length===2)s.vertexAttrib2f(n,a[0],a[1]);else if(a.length===3)s.vertexAttrib3f(n,a[0],a[1],a[2]);else{if(a.length!==4)throw new Error("gl-vao: Invalid vertex attribute");s.vertexAttrib4f(n,a[0],a[1],a[2],a[3])}s.disableVertexAttribArray(n)}}for(;n<r;++n)s.disableVertexAttribArray(n)}else for(s.bindBuffer(s.ARRAY_BUFFER,null),n=0;n<r;++n)s.disableVertexAttribArray(n)}},7220:function(d,s,t){var o=t(3056);function r(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}r.prototype.bind=function(){o(this.gl,this._elements,this._attributes)},r.prototype.update=function(n,a,i){this._elements=a,this._attributes=n,this._elementsType=i||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(n,a,i){i=i||0;var c=this.gl;this._elements?c.drawElements(n,a,this._elementsType,i):c.drawArrays(n,i,a)},d.exports=function(n){return new r(n)}},3778:function(d,s,t){var o=t(3056);function r(a,i,c,h,f,b){this.location=a,this.dimension=i,this.a=c,this.b=h,this.c=f,this.d=b}function n(a,i,c){this.gl=a,this._ext=i,this.handle=c,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}r.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(a,i,c){if(this.bind(),o(this.gl,i,a),this.unbind(),this._attribs.length=0,a)for(var h=0;h<a.length;++h){var f=a[h];typeof f=="number"?this._attribs.push(new r(h,1,f)):Array.isArray(f)&&this._attribs.push(new r(h,f.length,f[0],f[1],f[2],f[3]))}this._useElements=!!i,this._elementsType=c||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(a,i,c){c=c||0;var h=this.gl;this._useElements?h.drawElements(a,i,this._elementsType,c):h.drawArrays(a,c,i)},d.exports=function(a,i){return new n(a,i,i.createVertexArrayOES())}},2944:function(d,s,t){var o=t(3778),r=t(7220);function n(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}d.exports=function(a,i,c,h){var f,b=a.createVertexArray?new n(a):a.getExtension("OES_vertex_array_object");return(f=b?o(a,b):r(a)).update(i,c,h),f}},2598:function(d){d.exports=function(s,t,o){return s[0]=t[0]+o[0],s[1]=t[1]+o[1],s[2]=t[2]+o[2],s}},5879:function(d,s,t){d.exports=function(a,i){var c=o(a[0],a[1],a[2]),h=o(i[0],i[1],i[2]);r(c,c),r(h,h);var f=n(c,h);return f>1?0:Math.acos(f)};var o=t(5415),r=t(899),n=t(9305)},8827:function(d){d.exports=function(s,t){return s[0]=Math.ceil(t[0]),s[1]=Math.ceil(t[1]),s[2]=Math.ceil(t[2]),s}},7622:function(d){d.exports=function(s){var t=new Float32Array(3);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t}},8782:function(d){d.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s}},8501:function(d){d.exports=function(){var s=new Float32Array(3);return s[0]=0,s[1]=0,s[2]=0,s}},903:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=o[0],c=o[1],h=o[2];return s[0]=n*h-a*c,s[1]=a*i-r*h,s[2]=r*c-n*i,s}},5981:function(d,s,t){d.exports=t(8288)},8288:function(d){d.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2];return Math.sqrt(o*o+r*r+n*n)}},8629:function(d,s,t){d.exports=t(7979)},7979:function(d){d.exports=function(s,t,o){return s[0]=t[0]/o[0],s[1]=t[1]/o[1],s[2]=t[2]/o[2],s}},9305:function(d){d.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]}},154:function(d){d.exports=1e-6},4932:function(d,s,t){d.exports=function(r,n){var a=r[0],i=r[1],c=r[2],h=n[0],f=n[1],b=n[2];return Math.abs(a-h)<=o*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-f)<=o*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(c-b)<=o*Math.max(1,Math.abs(c),Math.abs(b))};var o=t(154)},5777:function(d){d.exports=function(s,t){return s[0]===t[0]&&s[1]===t[1]&&s[2]===t[2]}},3306:function(d){d.exports=function(s,t){return s[0]=Math.floor(t[0]),s[1]=Math.floor(t[1]),s[2]=Math.floor(t[2]),s}},7447:function(d,s,t){d.exports=function(r,n,a,i,c,h){var f,b;for(n||(n=3),a||(a=0),b=i?Math.min(i*n+a,r.length):r.length,f=a;f<b;f+=n)o[0]=r[f],o[1]=r[f+1],o[2]=r[f+2],c(o,o,h),r[f]=o[0],r[f+1]=o[1],r[f+2]=o[2];return r};var o=t(8501)()},5415:function(d){d.exports=function(s,t,o){var r=new Float32Array(3);return r[0]=s,r[1]=t,r[2]=o,r}},2858:function(d,s,t){d.exports={EPSILON:t(154),create:t(8501),clone:t(7622),angle:t(5879),fromValues:t(5415),copy:t(8782),set:t(831),equals:t(4932),exactEquals:t(5777),add:t(2598),subtract:t(911),sub:t(8921),multiply:t(105),mul:t(5733),divide:t(7979),div:t(8629),min:t(3605),max:t(1716),floor:t(3306),ceil:t(8827),round:t(1624),scale:t(5685),scaleAndAdd:t(6722),distance:t(8288),dist:t(5981),squaredDistance:t(6403),sqrDist:t(5294),length:t(4693),len:t(1468),squaredLength:t(4337),sqrLen:t(3303),negate:t(435),inverse:t(2073),normalize:t(899),dot:t(9305),cross:t(903),lerp:t(1868),random:t(6660),transformMat4:t(3255),transformMat3:t(9908),transformQuat:t(6568),rotateX:t(392),rotateY:t(3222),rotateZ:t(3388),forEach:t(7447)}},2073:function(d){d.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s}},1468:function(d,s,t){d.exports=t(4693)},4693:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2];return Math.sqrt(t*t+o*o+r*r)}},1868:function(d){d.exports=function(s,t,o,r){var n=t[0],a=t[1],i=t[2];return s[0]=n+r*(o[0]-n),s[1]=a+r*(o[1]-a),s[2]=i+r*(o[2]-i),s}},1716:function(d){d.exports=function(s,t,o){return s[0]=Math.max(t[0],o[0]),s[1]=Math.max(t[1],o[1]),s[2]=Math.max(t[2],o[2]),s}},3605:function(d){d.exports=function(s,t,o){return s[0]=Math.min(t[0],o[0]),s[1]=Math.min(t[1],o[1]),s[2]=Math.min(t[2],o[2]),s}},5733:function(d,s,t){d.exports=t(105)},105:function(d){d.exports=function(s,t,o){return s[0]=t[0]*o[0],s[1]=t[1]*o[1],s[2]=t[2]*o[2],s}},435:function(d){d.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s}},899:function(d){d.exports=function(s,t){var o=t[0],r=t[1],n=t[2],a=o*o+r*r+n*n;return a>0&&(a=1/Math.sqrt(a),s[0]=t[0]*a,s[1]=t[1]*a,s[2]=t[2]*a),s}},6660:function(d){d.exports=function(s,t){t=t||1;var o=2*Math.random()*Math.PI,r=2*Math.random()-1,n=Math.sqrt(1-r*r)*t;return s[0]=Math.cos(o)*n,s[1]=Math.sin(o)*n,s[2]=r*t,s}},392:function(d){d.exports=function(s,t,o,r){var n=o[1],a=o[2],i=t[1]-n,c=t[2]-a,h=Math.sin(r),f=Math.cos(r);return s[0]=t[0],s[1]=n+i*f-c*h,s[2]=a+i*h+c*f,s}},3222:function(d){d.exports=function(s,t,o,r){var n=o[0],a=o[2],i=t[0]-n,c=t[2]-a,h=Math.sin(r),f=Math.cos(r);return s[0]=n+c*h+i*f,s[1]=t[1],s[2]=a+c*f-i*h,s}},3388:function(d){d.exports=function(s,t,o,r){var n=o[0],a=o[1],i=t[0]-n,c=t[1]-a,h=Math.sin(r),f=Math.cos(r);return s[0]=n+i*f-c*h,s[1]=a+i*h+c*f,s[2]=t[2],s}},1624:function(d){d.exports=function(s,t){return s[0]=Math.round(t[0]),s[1]=Math.round(t[1]),s[2]=Math.round(t[2]),s}},5685:function(d){d.exports=function(s,t,o){return s[0]=t[0]*o,s[1]=t[1]*o,s[2]=t[2]*o,s}},6722:function(d){d.exports=function(s,t,o,r){return s[0]=t[0]+o[0]*r,s[1]=t[1]+o[1]*r,s[2]=t[2]+o[2]*r,s}},831:function(d){d.exports=function(s,t,o,r){return s[0]=t,s[1]=o,s[2]=r,s}},5294:function(d,s,t){d.exports=t(6403)},3303:function(d,s,t){d.exports=t(4337)},6403:function(d){d.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2];return o*o+r*r+n*n}},4337:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2];return t*t+o*o+r*r}},8921:function(d,s,t){d.exports=t(911)},911:function(d){d.exports=function(s,t,o){return s[0]=t[0]-o[0],s[1]=t[1]-o[1],s[2]=t[2]-o[2],s}},9908:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2];return s[0]=r*o[0]+n*o[3]+a*o[6],s[1]=r*o[1]+n*o[4]+a*o[7],s[2]=r*o[2]+n*o[5]+a*o[8],s}},3255:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=o[3]*r+o[7]*n+o[11]*a+o[15];return i=i||1,s[0]=(o[0]*r+o[4]*n+o[8]*a+o[12])/i,s[1]=(o[1]*r+o[5]*n+o[9]*a+o[13])/i,s[2]=(o[2]*r+o[6]*n+o[10]*a+o[14])/i,s}},6568:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=o[0],c=o[1],h=o[2],f=o[3],b=f*r+c*a-h*n,v=f*n+h*r-i*a,g=f*a+i*n-c*r,y=-i*r-c*n-h*a;return s[0]=b*f+y*-i+v*-h-g*-c,s[1]=v*f+y*-c+g*-i-b*-h,s[2]=g*f+y*-h+b*-c-v*-i,s}},3433:function(d){d.exports=function(s,t,o){return s[0]=t[0]+o[0],s[1]=t[1]+o[1],s[2]=t[2]+o[2],s[3]=t[3]+o[3],s}},1413:function(d){d.exports=function(s){var t=new Float32Array(4);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t}},3470:function(d){d.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s}},5313:function(d){d.exports=function(){var s=new Float32Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s}},5446:function(d){d.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2],a=t[3]-s[3];return Math.sqrt(o*o+r*r+n*n+a*a)}},205:function(d){d.exports=function(s,t,o){return s[0]=t[0]/o[0],s[1]=t[1]/o[1],s[2]=t[2]/o[2],s[3]=t[3]/o[3],s}},4242:function(d){d.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]*t[3]}},5680:function(d){d.exports=function(s,t,o,r){var n=new Float32Array(4);return n[0]=s,n[1]=t,n[2]=o,n[3]=r,n}},4020:function(d,s,t){d.exports={create:t(5313),clone:t(1413),fromValues:t(5680),copy:t(3470),set:t(6453),add:t(3433),subtract:t(2705),multiply:t(746),divide:t(205),min:t(2170),max:t(3030),scale:t(5510),scaleAndAdd:t(4224),distance:t(5446),squaredDistance:t(1542),length:t(8177),squaredLength:t(9037),negate:t(6459),inverse:t(8057),normalize:t(381),dot:t(4242),lerp:t(8746),random:t(3770),transformMat4:t(6342),transformQuat:t(5022)}},8057:function(d){d.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s[3]=1/t[3],s}},8177:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2],n=s[3];return Math.sqrt(t*t+o*o+r*r+n*n)}},8746:function(d){d.exports=function(s,t,o,r){var n=t[0],a=t[1],i=t[2],c=t[3];return s[0]=n+r*(o[0]-n),s[1]=a+r*(o[1]-a),s[2]=i+r*(o[2]-i),s[3]=c+r*(o[3]-c),s}},3030:function(d){d.exports=function(s,t,o){return s[0]=Math.max(t[0],o[0]),s[1]=Math.max(t[1],o[1]),s[2]=Math.max(t[2],o[2]),s[3]=Math.max(t[3],o[3]),s}},2170:function(d){d.exports=function(s,t,o){return s[0]=Math.min(t[0],o[0]),s[1]=Math.min(t[1],o[1]),s[2]=Math.min(t[2],o[2]),s[3]=Math.min(t[3],o[3]),s}},746:function(d){d.exports=function(s,t,o){return s[0]=t[0]*o[0],s[1]=t[1]*o[1],s[2]=t[2]*o[2],s[3]=t[3]*o[3],s}},6459:function(d){d.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s[3]=-t[3],s}},381:function(d){d.exports=function(s,t){var o=t[0],r=t[1],n=t[2],a=t[3],i=o*o+r*r+n*n+a*a;return i>0&&(i=1/Math.sqrt(i),s[0]=o*i,s[1]=r*i,s[2]=n*i,s[3]=a*i),s}},3770:function(d,s,t){var o=t(381),r=t(5510);d.exports=function(n,a){return a=a||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),o(n,n),r(n,n,a),n}},5510:function(d){d.exports=function(s,t,o){return s[0]=t[0]*o,s[1]=t[1]*o,s[2]=t[2]*o,s[3]=t[3]*o,s}},4224:function(d){d.exports=function(s,t,o,r){return s[0]=t[0]+o[0]*r,s[1]=t[1]+o[1]*r,s[2]=t[2]+o[2]*r,s[3]=t[3]+o[3]*r,s}},6453:function(d){d.exports=function(s,t,o,r,n){return s[0]=t,s[1]=o,s[2]=r,s[3]=n,s}},1542:function(d){d.exports=function(s,t){var o=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2],a=t[3]-s[3];return o*o+r*r+n*n+a*a}},9037:function(d){d.exports=function(s){var t=s[0],o=s[1],r=s[2],n=s[3];return t*t+o*o+r*r+n*n}},2705:function(d){d.exports=function(s,t,o){return s[0]=t[0]-o[0],s[1]=t[1]-o[1],s[2]=t[2]-o[2],s[3]=t[3]-o[3],s}},6342:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=t[3];return s[0]=o[0]*r+o[4]*n+o[8]*a+o[12]*i,s[1]=o[1]*r+o[5]*n+o[9]*a+o[13]*i,s[2]=o[2]*r+o[6]*n+o[10]*a+o[14]*i,s[3]=o[3]*r+o[7]*n+o[11]*a+o[15]*i,s}},5022:function(d){d.exports=function(s,t,o){var r=t[0],n=t[1],a=t[2],i=o[0],c=o[1],h=o[2],f=o[3],b=f*r+c*a-h*n,v=f*n+h*r-i*a,g=f*a+i*n-c*r,y=-i*r-c*n-h*a;return s[0]=b*f+y*-i+v*-h-g*-c,s[1]=v*f+y*-c+g*-i-b*-h,s[2]=g*f+y*-h+b*-c-v*-i,s[3]=t[3],s}},9365:function(d,s,t){var o=t(8096),r=t(7896);d.exports=function(n){for(var a=Array.isArray(n)?n:o(n),i=0;i<a.length;i++){var c=a[i];if(c.type==="preprocessor"){var h=c.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(h&&h[2]){var f=h[1],b=h[2];return(f?r(b):b).trim()}}}}},3193:function(d,s,t){d.exports=function(b){var v,g,y,p=0,m=0,w=c,u=[],S=[],_=1,E=0,L=0,C=!1,P=!1,I="",U=n,z=o;(b=b||{}).version==="300 es"&&(U=i,z=a);var H={},F={};for(p=0;p<U.length;p++)H[U[p]]=!0;for(p=0;p<z.length;p++)F[z[p]]=!0;return function(ie){return S=[],ie!==null?function(se){var fe;for(p=0,se.toString&&(se=se.toString()),I+=se.replace(/\r\n/g,`
`),y=I.length;v=I[p],p<y;){switch(fe=p,w){case 0:p=G();break;case 1:case 2:p=K();break;case 3:p=V();break;case 4:p=X();break;case 11:p=J();break;case 5:p=ee();break;case h:p=re();break;case 9:p=j();break;case c:p=B()}fe!==p&&(I[fe]===`
`?(E=0,++_):++E)}return m+=p,I=I.slice(p),S}(ie):(u.length&&N(u.join("")),w=10,N("(eof)"),S)};function N(ie){ie.length&&S.push({type:f[w],data:ie,position:L,line:_,column:E})}function B(){return u=u.length?[]:u,g==="/"&&v==="*"?(L=m+p-1,w=0,g=v,p+1):g==="/"&&v==="/"?(L=m+p-1,w=1,g=v,p+1):v==="#"?(w=2,L=m+p,p):/\s/.test(v)?(w=9,L=m+p,p):(C=/\d/.test(v),P=/[^\w_]/.test(v),L=m+p,w=C?4:P?3:h,p)}function j(){return/[^\s]/g.test(v)?(N(u.join("")),w=c,p):(u.push(v),g=v,p+1)}function K(){return v!=="\r"&&v!==`
`||g==="\\"?(u.push(v),g=v,p+1):(N(u.join("")),w=c,p)}function G(){return v==="/"&&g==="*"?(u.push(v),N(u.join("")),w=c,p+1):(u.push(v),g=v,p+1)}function V(){if(g==="."&&/\d/.test(v))return w=5,p;if(g==="/"&&v==="*")return w=0,p;if(g==="/"&&v==="/")return w=1,p;if(v==="."&&u.length){for(;W(u););return w=5,p}if(v===";"||v===")"||v==="("){if(u.length)for(;W(u););return N(v),w=c,p+1}var ie=u.length===2&&v!=="=";if(/[\w_\d\s]/.test(v)||ie){for(;W(u););return w=c,p}return u.push(v),g=v,p+1}function W(ie){for(var se,fe,ye=0;;){if(se=r.indexOf(ie.slice(0,ie.length+ye).join("")),fe=r[se],se===-1){if(ye--+ie.length>0)continue;fe=ie.slice(0,1).join("")}return N(fe),L+=fe.length,(u=u.slice(fe.length)).length}}function J(){return/[^a-fA-F0-9]/.test(v)?(N(u.join("")),w=c,p):(u.push(v),g=v,p+1)}function X(){return v==="."||/[eE]/.test(v)?(u.push(v),w=5,g=v,p+1):v==="x"&&u.length===1&&u[0]==="0"?(w=11,u.push(v),g=v,p+1):/[^\d]/.test(v)?(N(u.join("")),w=c,p):(u.push(v),g=v,p+1)}function ee(){return v==="f"&&(u.push(v),g=v,p+=1),/[eE]/.test(v)?(u.push(v),g=v,p+1):(v!=="-"&&v!=="+"||!/[eE]/.test(g))&&/[^\d]/.test(v)?(N(u.join("")),w=c,p):(u.push(v),g=v,p+1)}function re(){if(/[^\d\w_]/.test(v)){var ie=u.join("");return w=F[ie]?8:H[ie]?7:6,N(u.join("")),w=c,p}return u.push(v),g=v,p+1}};var o=t(399),r=t(9746),n=t(9525),a=t(9458),i=t(3585),c=999,h=9999,f=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(d,s,t){var o=t(9525);o=o.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),d.exports=o.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(d){d.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(d,s,t){var o=t(399);d.exports=o.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(d){d.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(d){d.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(d,s,t){var o=t(3193);d.exports=function(r,n){var a=o(n),i=[];return(i=i.concat(a(r))).concat(a(null))}},6832:function(d){d.exports=function(s){typeof s=="string"&&(s=[s]);for(var t=[].slice.call(arguments,1),o=[],r=0;r<s.length-1;r++)o.push(s[r],t[r]||"");return o.push(s[r]),o.join("")}},5233:function(d,s,t){var o=t(4846);d.exports=o&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{r=!1}return r}()},2183:function(d,s,t){d.exports=function(b,v){var g=b.length;if(g===0)throw new Error("Must have at least d+1 points");var y=b[0].length;if(g<=y)throw new Error("Must input at least d+1 points");var p=b.slice(0,y+1),m=o.apply(void 0,p);if(m===0)throw new Error("Input not in general position");for(var w=new Array(y+1),u=0;u<=y;++u)w[u]=u;m<0&&(w[0]=1,w[1]=0);var S=new n(w,new Array(y+1),!1),_=S.adjacent,E=new Array(y+2);for(u=0;u<=y;++u){for(var L=w.slice(),C=0;C<=y;++C)C===u&&(L[C]=-1);var P=L[0];L[0]=L[1],L[1]=P;var I=new n(L,new Array(y+1),!0);_[u]=I,E[u]=I}for(E[y+1]=S,u=0;u<=y;++u){L=_[u].vertices;var U=_[u].adjacent;for(C=0;C<=y;++C){var z=L[C];if(z<0)U[C]=S;else for(var H=0;H<=y;++H)_[H].vertices.indexOf(z)<0&&(U[C]=_[H])}}var F=new h(y,p,E),N=!!v;for(u=y+1;u<g;++u)F.insert(b[u],N);return F.boundary()};var o=t(417),r=t(8211).H;function n(b,v,g){this.vertices=b,this.adjacent=v,this.boundary=g,this.lastVisited=-1}function a(b,v,g){this.vertices=b,this.cell=v,this.index=g}function i(b,v){return r(b.vertices,v.vertices)}n.prototype.flip=function(){var b=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=b;var v=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=v};var c=[];function h(b,v,g){this.dimension=b,this.vertices=v,this.simplices=g,this.interior=g.filter(function(w){return!w.boundary}),this.tuple=new Array(b+1);for(var y=0;y<=b;++y)this.tuple[y]=this.vertices[y];var p,m=c[b];m||(m=c[b]=((p=o[b+1])||(p=o),function(w){return function(){var u=this.tuple;return w.apply(this,u)}}(p))),this.orient=m}var f=h.prototype;f.handleBoundaryDegeneracy=function(b,v){var g=this.dimension,y=this.vertices.length-1,p=this.tuple,m=this.vertices,w=[b];for(b.lastVisited=-y;w.length>0;)for(var u=(b=w.pop()).adjacent,S=0;S<=g;++S){var _=u[S];if(_.boundary&&!(_.lastVisited<=-y)){for(var E=_.vertices,L=0;L<=g;++L){var C=E[L];p[L]=C<0?v:m[C]}var P=this.orient();if(P>0)return _;_.lastVisited=-y,P===0&&w.push(_)}}return null},f.walk=function(b,v){var g=this.vertices.length-1,y=this.dimension,p=this.vertices,m=this.tuple,w=v?this.interior.length*Math.random()|0:this.interior.length-1,u=this.interior[w];e:for(;!u.boundary;){for(var S=u.vertices,_=u.adjacent,E=0;E<=y;++E)m[E]=p[S[E]];for(u.lastVisited=g,E=0;E<=y;++E){var L=_[E];if(!(L.lastVisited>=g)){var C=m[E];m[E]=b;var P=this.orient();if(m[E]=C,P<0){u=L;continue e}L.boundary?L.lastVisited=-g:L.lastVisited=g}}return}return u},f.addPeaks=function(b,v){var g=this.vertices.length-1,y=this.dimension,p=this.vertices,m=this.tuple,w=this.interior,u=this.simplices,S=[v];v.lastVisited=g,v.vertices[v.vertices.indexOf(-1)]=g,v.boundary=!1,w.push(v);for(var _=[];S.length>0;){var E=(v=S.pop()).vertices,L=v.adjacent,C=E.indexOf(g);if(!(C<0)){for(var P=0;P<=y;++P)if(P!==C){var I=L[P];if(I.boundary&&!(I.lastVisited>=g)){var U=I.vertices;if(I.lastVisited!==-g){for(var z=0,H=0;H<=y;++H)U[H]<0?(z=H,m[H]=b):m[H]=p[U[H]];if(this.orient()>0){U[z]=g,I.boundary=!1,w.push(I),S.push(I),I.lastVisited=g;continue}I.lastVisited=-g}var F=I.adjacent,N=E.slice(),B=L.slice(),j=new n(N,B,!0);u.push(j);var K=F.indexOf(v);if(!(K<0))for(F[K]=j,B[C]=I,N[P]=-1,B[P]=v,L[P]=j,j.flip(),H=0;H<=y;++H){var G=N[H];if(!(G<0||G===g)){for(var V=new Array(y-1),W=0,J=0;J<=y;++J){var X=N[J];X<0||J===H||(V[W++]=X)}_.push(new a(V,j,H))}}}}}}for(_.sort(i),P=0;P+1<_.length;P+=2){var ee=_[P],re=_[P+1],ie=ee.index,se=re.index;ie<0||se<0||(ee.cell.adjacent[ee.index]=re.cell,re.cell.adjacent[re.index]=ee.cell)}},f.insert=function(b,v){var g=this.vertices;g.push(b);var y=this.walk(b,v);if(y){for(var p=this.dimension,m=this.tuple,w=0;w<=p;++w){var u=y.vertices[w];m[w]=u<0?b:g[u]}var S=this.orient(m);S<0||(S!==0||(y=this.handleBoundaryDegeneracy(y,b)))&&this.addPeaks(b,y)}},f.boundary=function(){for(var b=this.dimension,v=[],g=this.simplices,y=g.length,p=0;p<y;++p){var m=g[p];if(m.boundary){for(var w=new Array(b),u=m.vertices,S=0,_=0,E=0;E<=b;++E)u[E]>=0?w[S++]=u[E]:_=1&E;if(_===(1&b)){var L=w[0];w[0]=w[1],w[1]=L}v.push(w)}}return v}},9014:function(d,s,t){var o=t(5070);function r(S,_,E,L,C){this.mid=S,this.left=_,this.right=E,this.leftPoints=L,this.rightPoints=C,this.count=(_?_.count:0)+(E?E.count:0)+L.length}d.exports=function(S){return S&&S.length!==0?new w(m(S)):new w(null)};var n=r.prototype;function a(S,_){S.mid=_.mid,S.left=_.left,S.right=_.right,S.leftPoints=_.leftPoints,S.rightPoints=_.rightPoints,S.count=_.count}function i(S,_){var E=m(_);S.mid=E.mid,S.left=E.left,S.right=E.right,S.leftPoints=E.leftPoints,S.rightPoints=E.rightPoints,S.count=E.count}function c(S,_){var E=S.intervals([]);E.push(_),i(S,E)}function h(S,_){var E=S.intervals([]),L=E.indexOf(_);return L<0?0:(E.splice(L,1),i(S,E),1)}function f(S,_,E){for(var L=0;L<S.length&&S[L][0]<=_;++L){var C=E(S[L]);if(C)return C}}function b(S,_,E){for(var L=S.length-1;L>=0&&S[L][1]>=_;--L){var C=E(S[L]);if(C)return C}}function v(S,_){for(var E=0;E<S.length;++E){var L=_(S[E]);if(L)return L}}function g(S,_){return S-_}function y(S,_){return S[0]-_[0]||S[1]-_[1]}function p(S,_){return S[1]-_[1]||S[0]-_[0]}function m(S){if(S.length===0)return null;for(var _=[],E=0;E<S.length;++E)_.push(S[E][0],S[E][1]);_.sort(g);var L=_[_.length>>1],C=[],P=[],I=[];for(E=0;E<S.length;++E){var U=S[E];U[1]<L?C.push(U):L<U[0]?P.push(U):I.push(U)}var z=I,H=I.slice();return z.sort(y),H.sort(p),new r(L,m(C),m(P),z,H)}function w(S){this.root=S}n.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},n.insert=function(S){var _=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(_+1)?c(this,S):this.left.insert(S):this.left=m([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(_+1)?c(this,S):this.right.insert(S):this.right=m([S]);else{var E=o.ge(this.leftPoints,S,y),L=o.ge(this.rightPoints,S,p);this.leftPoints.splice(E,0,S),this.rightPoints.splice(L,0,S)}},n.remove=function(S){var _=this.count-this.leftPoints;if(S[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(_-1)?h(this,S):(P=this.left.remove(S))===2?(this.left=null,this.count-=1,1):(P===1&&(this.count-=1),P):0;if(S[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(_-1)?h(this,S):(P=this.right.remove(S))===2?(this.right=null,this.count-=1,1):(P===1&&(this.count-=1),P):0;if(this.count===1)return this.leftPoints[0]===S?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===S){if(this.left&&this.right){for(var E=this,L=this.left;L.right;)E=L,L=L.right;if(E===this)L.right=this.right;else{var C=this.left,P=this.right;E.count-=L.count,E.right=L.left,L.left=C,L.right=P}a(this,L),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?a(this,this.left):a(this,this.right);return 1}for(C=o.ge(this.leftPoints,S,y);C<this.leftPoints.length&&this.leftPoints[C][0]===S[0];++C)if(this.leftPoints[C]===S){for(this.count-=1,this.leftPoints.splice(C,1),P=o.ge(this.rightPoints,S,p);P<this.rightPoints.length&&this.rightPoints[P][1]===S[1];++P)if(this.rightPoints[P]===S)return this.rightPoints.splice(P,1),1}return 0},n.queryPoint=function(S,_){return S<this.mid?this.left&&(E=this.left.queryPoint(S,_))?E:f(this.leftPoints,S,_):S>this.mid?this.right&&(E=this.right.queryPoint(S,_))?E:b(this.rightPoints,S,_):v(this.leftPoints,_);var E},n.queryInterval=function(S,_,E){var L;return S<this.mid&&this.left&&(L=this.left.queryInterval(S,_,E))||_>this.mid&&this.right&&(L=this.right.queryInterval(S,_,E))?L:_<this.mid?f(this.leftPoints,_,E):S>this.mid?b(this.rightPoints,S,E):v(this.leftPoints,E)};var u=w.prototype;u.insert=function(S){this.root?this.root.insert(S):this.root=new r(S[0],null,null,[S],[S])},u.remove=function(S){if(this.root){var _=this.root.remove(S);return _===2&&(this.root=null),_!==0}return!1},u.queryPoint=function(S,_){if(this.root)return this.root.queryPoint(S,_)},u.queryInterval=function(S,_,E){if(S<=_&&this.root)return this.root.queryInterval(S,_,E)},Object.defineProperty(u,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(u,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(d){d.exports=function(s){for(var t=new Array(s),o=0;o<s;++o)t[o]=o;return t}},4846:function(d){d.exports=!0},4780:function(d){function s(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}d.exports=function(t){return t!=null&&(s(t)||function(o){return typeof o.readFloatLE=="function"&&typeof o.slice=="function"&&s(o.slice(0,0))}(t)||!!t._isBuffer)}},2861:function(d){d.exports=o,d.exports.isMobile=o,d.exports.default=o;var s=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function o(r){r||(r={});var n=r.ua;if(n||typeof navigator>"u"||(n=navigator.userAgent),n&&n.headers&&typeof n.headers["user-agent"]=="string"&&(n=n.headers["user-agent"]),typeof n!="string")return!1;var a=r.tablet?t.test(n):s.test(n);return!a&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&n.indexOf("Macintosh")!==-1&&n.indexOf("Safari")!==-1&&(a=!0),a}},3596:function(d){d.exports=function(s){for(var t,o=s.length,r=0;r<o;r++)if(((t=s.charCodeAt(r))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},3578:function(d){d.exports=function(s,t,o){return s*(1-o)+t*o}},7191:function(d,s,t){var o=t(4690),r=t(9823),n=t(7332),a=t(7787),i=t(7437),c=t(2142),h={length:t(4693),normalize:t(899),dot:t(9305),cross:t(903)},f=r(),b=r(),v=[0,0,0,0],g=[[0,0,0],[0,0,0],[0,0,0]],y=[0,0,0];function p(m,w,u,S,_){m[0]=w[0]*S+u[0]*_,m[1]=w[1]*S+u[1]*_,m[2]=w[2]*S+u[2]*_}d.exports=function(m,w,u,S,_,E){if(w||(w=[0,0,0]),u||(u=[0,0,0]),S||(S=[0,0,0]),_||(_=[0,0,0,1]),E||(E=[0,0,0,1]),!o(f,m)||(n(b,f),b[3]=0,b[7]=0,b[11]=0,b[15]=1,Math.abs(a(b)<1e-8)))return!1;var L,C,P,I,U,z,H,F=f[3],N=f[7],B=f[11],j=f[12],K=f[13],G=f[14],V=f[15];if(F!==0||N!==0||B!==0){if(v[0]=F,v[1]=N,v[2]=B,v[3]=V,!i(b,b))return!1;c(b,b),L=_,P=b,I=(C=v)[0],U=C[1],z=C[2],H=C[3],L[0]=P[0]*I+P[4]*U+P[8]*z+P[12]*H,L[1]=P[1]*I+P[5]*U+P[9]*z+P[13]*H,L[2]=P[2]*I+P[6]*U+P[10]*z+P[14]*H,L[3]=P[3]*I+P[7]*U+P[11]*z+P[15]*H}else _[0]=_[1]=_[2]=0,_[3]=1;if(w[0]=j,w[1]=K,w[2]=G,function(J,X){J[0][0]=X[0],J[0][1]=X[1],J[0][2]=X[2],J[1][0]=X[4],J[1][1]=X[5],J[1][2]=X[6],J[2][0]=X[8],J[2][1]=X[9],J[2][2]=X[10]}(g,f),u[0]=h.length(g[0]),h.normalize(g[0],g[0]),S[0]=h.dot(g[0],g[1]),p(g[1],g[1],g[0],1,-S[0]),u[1]=h.length(g[1]),h.normalize(g[1],g[1]),S[0]/=u[1],S[1]=h.dot(g[0],g[2]),p(g[2],g[2],g[0],1,-S[1]),S[2]=h.dot(g[1],g[2]),p(g[2],g[2],g[1],1,-S[2]),u[2]=h.length(g[2]),h.normalize(g[2],g[2]),S[1]/=u[2],S[2]/=u[2],h.cross(y,g[1],g[2]),h.dot(g[0],y)<0)for(var W=0;W<3;W++)u[W]*=-1,g[W][0]*=-1,g[W][1]*=-1,g[W][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+g[0][0]-g[1][1]-g[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-g[0][0]+g[1][1]-g[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-g[0][0]-g[1][1]+g[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+g[0][0]+g[1][1]+g[2][2],0)),g[2][1]>g[1][2]&&(E[0]=-E[0]),g[0][2]>g[2][0]&&(E[1]=-E[1]),g[1][0]>g[0][1]&&(E[2]=-E[2]),!0}},4690:function(d){d.exports=function(s,t){var o=t[15];if(o===0)return!1;for(var r=1/o,n=0;n<16;n++)s[n]=t[n]*r;return!0}},7649:function(d,s,t){var o=t(1868),r=t(1102),n=t(7191),a=t(7787),i=t(1116),c=b(),h=b(),f=b();function b(){return{translate:v(),scale:v(1),skew:v(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function v(g){return[g||0,g||0,g||0]}d.exports=function(g,y,p,m){if(a(y)===0||a(p)===0)return!1;var w=n(y,c.translate,c.scale,c.skew,c.perspective,c.quaternion),u=n(p,h.translate,h.scale,h.skew,h.perspective,h.quaternion);return!(!w||!u||(o(f.translate,c.translate,h.translate,m),o(f.skew,c.skew,h.skew,m),o(f.scale,c.scale,h.scale,m),o(f.perspective,c.perspective,h.perspective,m),i(f.quaternion,c.quaternion,h.quaternion,m),r(g,f.translate,f.scale,f.skew,f.perspective,f.quaternion),0))}},1102:function(d,s,t){var o={identity:t(9947),translate:t(998),multiply:t(104),create:t(9823),scale:t(3668),fromRotationTranslation:t(7280)},r=(o.create(),o.create());d.exports=function(n,a,i,c,h,f){return o.identity(n),o.fromRotationTranslation(n,f,a),n[3]=h[0],n[7]=h[1],n[11]=h[2],n[15]=h[3],o.identity(r),c[2]!==0&&(r[9]=c[2],o.multiply(n,n,r)),c[1]!==0&&(r[9]=0,r[8]=c[1],o.multiply(n,n,r)),c[0]!==0&&(r[8]=0,r[4]=c[0],o.multiply(n,n,r)),o.scale(n,n,i),n}},9298:function(d,s,t){var o=t(5070),r=t(7649),n=t(7437),a=t(6109),i=t(7115),c=t(5240),h=t(3012),f=t(998),b=(t(3668),t(899)),v=[0,0,0];function g(m){this._components=m.slice(),this._time=[0],this.prevMatrix=m.slice(),this.nextMatrix=m.slice(),this.computedMatrix=m.slice(),this.computedInverse=m.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}d.exports=function(m){return new g((m=m||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var y=g.prototype;y.recalcMatrix=function(m){var w=this._time,u=o.le(w,m),S=this.computedMatrix;if(!(u<0)){var _=this._components;if(u===w.length-1)for(var E=16*u,L=0;L<16;++L)S[L]=_[E++];else{var C=w[u+1]-w[u],P=(E=16*u,this.prevMatrix),I=!0;for(L=0;L<16;++L)P[L]=_[E++];var U=this.nextMatrix;for(L=0;L<16;++L)U[L]=_[E++],I=I&&P[L]===U[L];if(C<1e-6||I)for(L=0;L<16;++L)S[L]=P[L];else r(S,P,U,(m-w[u])/C)}var z=this.computedUp;z[0]=S[1],z[1]=S[5],z[2]=S[9],b(z,z);var H=this.computedInverse;n(H,S);var F=this.computedEye,N=H[15];F[0]=H[12]/N,F[1]=H[13]/N,F[2]=H[14]/N;var B=this.computedCenter,j=Math.exp(this.computedRadius[0]);for(L=0;L<3;++L)B[L]=F[L]-S[2+4*L]*j}},y.idle=function(m){if(!(m<this.lastT())){for(var w=this._components,u=w.length-16,S=0;S<16;++S)w.push(w[u++]);this._time.push(m)}},y.flush=function(m){var w=o.gt(this._time,m)-2;w<0||(this._time.splice(0,w),this._components.splice(0,16*w))},y.lastT=function(){return this._time[this._time.length-1]},y.lookAt=function(m,w,u,S){this.recalcMatrix(m),w=w||this.computedEye,u=u||v,S=S||this.computedUp,this.setMatrix(m,h(this.computedMatrix,w,u,S));for(var _=0,E=0;E<3;++E)_+=Math.pow(u[E]-w[E],2);_=Math.log(Math.sqrt(_)),this.computedRadius[0]=_},y.rotate=function(m,w,u,S){this.recalcMatrix(m);var _=this.computedInverse;w&&i(_,_,w),u&&a(_,_,u),S&&c(_,_,S),this.setMatrix(m,n(this.computedMatrix,_))};var p=[0,0,0];y.pan=function(m,w,u,S){p[0]=-(w||0),p[1]=-(u||0),p[2]=-(S||0),this.recalcMatrix(m);var _=this.computedInverse;f(_,_,p),this.setMatrix(m,n(_,_))},y.translate=function(m,w,u,S){p[0]=w||0,p[1]=u||0,p[2]=S||0,this.recalcMatrix(m);var _=this.computedMatrix;f(_,_,p),this.setMatrix(m,_)},y.setMatrix=function(m,w){if(!(m<this.lastT())){this._time.push(m);for(var u=0;u<16;++u)this._components.push(w[u])}},y.setDistance=function(m,w){this.computedRadius[0]=w},y.setDistanceLimits=function(m,w){var u=this._limits;u[0]=m,u[1]=w},y.getDistanceLimits=function(m){var w=this._limits;return m?(m[0]=w[0],m[1]=w[1],m):w}},3266:function(d,s,t){d.exports=function(r){var n=r.length;if(n<3){for(var a=new Array(n),i=0;i<n;++i)a[i]=i;return n===2&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:a}var c=new Array(n);for(i=0;i<n;++i)c[i]=i;c.sort(function(w,u){return r[w][0]-r[u][0]||r[w][1]-r[u][1]});var h=[c[0],c[1]],f=[c[0],c[1]];for(i=2;i<n;++i){for(var b=c[i],v=r[b],g=h.length;g>1&&o(r[h[g-2]],r[h[g-1]],v)<=0;)g-=1,h.pop();for(h.push(b),g=f.length;g>1&&o(r[f[g-2]],r[f[g-1]],v)>=0;)g-=1,f.pop();f.push(b)}a=new Array(f.length+h.length-2);for(var y=0,p=(i=0,h.length);i<p;++i)a[y++]=h[i];for(var m=f.length-2;m>0;--m)a[y++]=f[m];return a};var o=t(417)[3]},6145:function(d,s,t){d.exports=function(r,n){n||(n=r,r=window);var a=0,i=0,c=0,h={shift:!1,alt:!1,control:!1,meta:!1},f=!1;function b(E){var L=!1;return"altKey"in E&&(L=L||E.altKey!==h.alt,h.alt=!!E.altKey),"shiftKey"in E&&(L=L||E.shiftKey!==h.shift,h.shift=!!E.shiftKey),"ctrlKey"in E&&(L=L||E.ctrlKey!==h.control,h.control=!!E.ctrlKey),"metaKey"in E&&(L=L||E.metaKey!==h.meta,h.meta=!!E.metaKey),L}function v(E,L){var C=o.x(L),P=o.y(L);"buttons"in L&&(E=0|L.buttons),(E!==a||C!==i||P!==c||b(L))&&(a=0|E,i=C||0,c=P||0,n&&n(a,i,c,h))}function g(E){v(0,E)}function y(){(a||i||c||h.shift||h.alt||h.meta||h.control)&&(i=c=0,a=0,h.shift=h.alt=h.control=h.meta=!1,n&&n(0,0,0,h))}function p(E){b(E)&&n&&n(a,i,c,h)}function m(E){o.buttons(E)===0?v(0,E):v(a,E)}function w(E){v(a|o.buttons(E),E)}function u(E){v(a&~o.buttons(E),E)}function S(){f||(f=!0,r.addEventListener("mousemove",m),r.addEventListener("mousedown",w),r.addEventListener("mouseup",u),r.addEventListener("mouseleave",g),r.addEventListener("mouseenter",g),r.addEventListener("mouseout",g),r.addEventListener("mouseover",g),r.addEventListener("blur",y),r.addEventListener("keyup",p),r.addEventListener("keydown",p),r.addEventListener("keypress",p),r!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",p),window.addEventListener("keydown",p),window.addEventListener("keypress",p)))}S();var _={element:r};return Object.defineProperties(_,{enabled:{get:function(){return f},set:function(E){E?S():f&&(f=!1,r.removeEventListener("mousemove",m),r.removeEventListener("mousedown",w),r.removeEventListener("mouseup",u),r.removeEventListener("mouseleave",g),r.removeEventListener("mouseenter",g),r.removeEventListener("mouseout",g),r.removeEventListener("mouseover",g),r.removeEventListener("blur",y),r.removeEventListener("keyup",p),r.removeEventListener("keydown",p),r.removeEventListener("keypress",p),r!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",p),window.removeEventListener("keydown",p),window.removeEventListener("keypress",p)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return c},enumerable:!0},mods:{get:function(){return h},enumerable:!0}}),_};var o=t(4110)},2565:function(d){var s={left:0,top:0};d.exports=function(t,o,r){o=o||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var n,a=t.clientX||0,i=t.clientY||0,c=(n=o)===window||n===document||n===document.body?s:n.getBoundingClientRect();return r[0]=a-c.left,r[1]=i-c.top,r}},4110:function(d,s){function t(o){return o.target||o.srcElement||window}s.buttons=function(o){if(typeof o=="object"){if("buttons"in o)return o.buttons;if("which"in o){if((r=o.which)===2)return 4;if(r===3)return 2;if(r>0)return 1<<r-1}else if("button"in o){var r;if((r=o.button)===1)return 4;if(r===2)return 2;if(r>=0)return 1<<r}}return 0},s.element=t,s.x=function(o){if(typeof o=="object"){if("offsetX"in o)return o.offsetX;var r=t(o).getBoundingClientRect();return o.clientX-r.left}return 0},s.y=function(o){if(typeof o=="object"){if("offsetY"in o)return o.offsetY;var r=t(o).getBoundingClientRect();return o.clientY-r.top}return 0}},6475:function(d,s,t){var o=t(14);d.exports=function(r,n,a){typeof r=="function"&&(a=!!n,n=r,r=window);var i=o("ex",r),c=function(h){a&&h.preventDefault();var f=h.deltaX||0,b=h.deltaY||0,v=h.deltaZ||0,g=1;switch(h.deltaMode){case 1:g=i;break;case 2:g=window.innerHeight}if(b*=g,v*=g,(f*=g)||b||v)return n(f,b,v,h)};return r.addEventListener("wheel",c),c}},9284:function(d,s,t){var o=t(5306);d.exports=function(n){function a(v){throw new Error("ndarray-extract-contour: "+v)}typeof n!="object"&&a("Must specify arguments");var i=n.order;Array.isArray(i)||a("Must specify order");var c=n.arrayArguments||1;c<1&&a("Must have at least one array argument"),(n.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),typeof n.vertex!="function"&&a("Must specify vertex creation function"),typeof n.cell!="function"&&a("Must specify cell creation function"),typeof n.phase!="function"&&a("Must specify phase function");for(var h=n.getters||[],f=new Array(c),b=0;b<c;++b)h.indexOf(b)>=0?f[b]=!0:f[b]=!1;return function(v,g,y,p,m,w){var u=[w,m].join(",");return(0,r[u])(v,g,y,o.mallocUint32,o.freeUint32)}(n.vertex,n.cell,n.phase,0,i,f)};var r={"false,0,1":function(n,a,i,c,h){return function(f,b,v,g){var y,p=0|f.shape[0],m=0|f.shape[1],w=f.data,u=0|f.offset,S=0|f.stride[0],_=0|f.stride[1],E=u,L=0|-S,C=0,P=0|-_,I=0,U=-S-_|0,z=0,H=0|S,F=_-S*p|0,N=0,B=0,j=0,K=2*p|0,G=c(K),V=c(K),W=0,J=0,X=-1,ee=-1,re=0,ie=0|-p,se=0|p,fe=0,ye=-p-1|0,ge=p-1|0,he=0,ve=0,Oe=0;for(N=0;N<p;++N)G[W++]=i(w[E],b,v,g),E+=H;if(E+=F,m>0){if(B=1,G[W++]=i(w[E],b,v,g),E+=H,p>0)for(N=1,y=w[E],J=G[W]=i(y,b,v,g),re=G[W+X],fe=G[W+ie],he=G[W+ye],J===re&&J===fe&&J===he||(C=w[E+L],I=w[E+P],z=w[E+U],n(N,B,y,C,I,z,J,re,fe,he,b,v,g),ve=V[W]=j++),W+=1,E+=H,N=2;N<p;++N)y=w[E],J=G[W]=i(y,b,v,g),re=G[W+X],fe=G[W+ie],he=G[W+ye],J===re&&J===fe&&J===he||(C=w[E+L],I=w[E+P],z=w[E+U],n(N,B,y,C,I,z,J,re,fe,he,b,v,g),ve=V[W]=j++,he!==re&&a(V[W+X],ve,z,C,he,re,b,v,g)),W+=1,E+=H;for(E+=F,W=0,Oe=X,X=ee,ee=Oe,Oe=ie,ie=se,se=Oe,Oe=ye,ye=ge,ge=Oe,B=2;B<m;++B){if(G[W++]=i(w[E],b,v,g),E+=H,p>0)for(N=1,y=w[E],J=G[W]=i(y,b,v,g),re=G[W+X],fe=G[W+ie],he=G[W+ye],J===re&&J===fe&&J===he||(C=w[E+L],I=w[E+P],z=w[E+U],n(N,B,y,C,I,z,J,re,fe,he,b,v,g),ve=V[W]=j++,he!==fe&&a(V[W+ie],ve,I,z,fe,he,b,v,g)),W+=1,E+=H,N=2;N<p;++N)y=w[E],J=G[W]=i(y,b,v,g),re=G[W+X],fe=G[W+ie],he=G[W+ye],J===re&&J===fe&&J===he||(C=w[E+L],I=w[E+P],z=w[E+U],n(N,B,y,C,I,z,J,re,fe,he,b,v,g),ve=V[W]=j++,he!==fe&&a(V[W+ie],ve,I,z,fe,he,b,v,g),he!==re&&a(V[W+X],ve,z,C,he,re,b,v,g)),W+=1,E+=H;1&B&&(W=0),Oe=X,X=ee,ee=Oe,Oe=ie,ie=se,se=Oe,Oe=ye,ye=ge,ge=Oe,E+=F}}h(V),h(G)}},"false,1,0":function(n,a,i,c,h){return function(f,b,v,g){var y,p=0|f.shape[0],m=0|f.shape[1],w=f.data,u=0|f.offset,S=0|f.stride[0],_=0|f.stride[1],E=u,L=0|-S,C=0,P=0|-_,I=0,U=-S-_|0,z=0,H=0|_,F=S-_*m|0,N=0,B=0,j=0,K=2*m|0,G=c(K),V=c(K),W=0,J=0,X=-1,ee=-1,re=0,ie=0|-m,se=0|m,fe=0,ye=-m-1|0,ge=m-1|0,he=0,ve=0,Oe=0;for(B=0;B<m;++B)G[W++]=i(w[E],b,v,g),E+=H;if(E+=F,p>0){if(N=1,G[W++]=i(w[E],b,v,g),E+=H,m>0)for(B=1,y=w[E],J=G[W]=i(y,b,v,g),fe=G[W+ie],re=G[W+X],he=G[W+ye],J===fe&&J===re&&J===he||(C=w[E+L],I=w[E+P],z=w[E+U],n(N,B,y,C,I,z,J,fe,re,he,b,v,g),ve=V[W]=j++),W+=1,E+=H,B=2;B<m;++B)y=w[E],J=G[W]=i(y,b,v,g),fe=G[W+ie],re=G[W+X],he=G[W+ye],J===fe&&J===re&&J===he||(C=w[E+L],I=w[E+P],z=w[E+U],n(N,B,y,C,I,z,J,fe,re,he,b,v,g),ve=V[W]=j++,he!==re&&a(V[W+X],ve,I,z,re,he,b,v,g)),W+=1,E+=H;for(E+=F,W=0,Oe=ie,ie=se,se=Oe,Oe=X,X=ee,ee=Oe,Oe=ye,ye=ge,ge=Oe,N=2;N<p;++N){if(G[W++]=i(w[E],b,v,g),E+=H,m>0)for(B=1,y=w[E],J=G[W]=i(y,b,v,g),fe=G[W+ie],re=G[W+X],he=G[W+ye],J===fe&&J===re&&J===he||(C=w[E+L],I=w[E+P],z=w[E+U],n(N,B,y,C,I,z,J,fe,re,he,b,v,g),ve=V[W]=j++,he!==fe&&a(V[W+ie],ve,z,C,he,fe,b,v,g)),W+=1,E+=H,B=2;B<m;++B)y=w[E],J=G[W]=i(y,b,v,g),fe=G[W+ie],re=G[W+X],he=G[W+ye],J===fe&&J===re&&J===he||(C=w[E+L],I=w[E+P],z=w[E+U],n(N,B,y,C,I,z,J,fe,re,he,b,v,g),ve=V[W]=j++,he!==re&&a(V[W+X],ve,I,z,re,he,b,v,g),he!==fe&&a(V[W+ie],ve,z,C,he,fe,b,v,g)),W+=1,E+=H;1&N&&(W=0),Oe=ie,ie=se,se=Oe,Oe=X,X=ee,ee=Oe,Oe=ye,ye=ge,ge=Oe,E+=F}}h(V),h(G)}}}},9144:function(d,s,t){var o=t(3094),r={zero:function(p,m,w,u){var S=p[0];u|=0;var _=0,E=w[0];for(_=0;_<S;++_)m[u]=0,u+=E},fdTemplate1:function(p,m,w,u,S,_,E){var L=p[0],C=w[0],P=-1*C,I=C;u|=0,E|=0;var U=0,z=C,H=_[0];for(U=0;U<L;++U)S[E]=.5*(m[u+P]-m[u+I]),u+=z,E+=H},fdTemplate2:function(p,m,w,u,S,_,E,L,C,P){var I=p[0],U=p[1],z=w[0],H=w[1],F=_[0],N=_[1],B=C[0],j=C[1],K=-1*z,G=z,V=-1*H,W=H;u|=0,E|=0,P|=0;var J=0,X=0,ee=H,re=z-U*H,ie=N,se=F-U*N,fe=j,ye=B-U*j;for(X=0;X<I;++X){for(J=0;J<U;++J)S[E]=.5*(m[u+K]-m[u+G]),L[P]=.5*(m[u+V]-m[u+W]),u+=ee,E+=ie,P+=fe;u+=re,E+=se,P+=ye}}},n={cdiff:function(p){var m={};return function(w,u,S){var _=w.dtype,E=w.order,L=u.dtype,C=u.order,P=S.dtype,I=S.order,U=[_,E.join(),L,C.join(),P,I.join()].join(),z=m[U];return z||(m[U]=z=p([_,E,L,C,P,I])),z(w.shape.slice(0),w.data,w.stride,0|w.offset,u.data,u.stride,0|u.offset,S.data,S.stride,0|S.offset)}},zero:function(p){var m={};return function(w){var u=w.dtype,S=w.order,_=[u,S.join()].join(),E=m[_];return E||(m[_]=E=p([u,S])),E(w.shape.slice(0),w.data,w.stride,0|w.offset)}},fdTemplate1:function(p){var m={};return function(w,u){var S=w.dtype,_=w.order,E=u.dtype,L=u.order,C=[S,_.join(),E,L.join()].join(),P=m[C];return P||(m[C]=P=p([S,_,E,L])),P(w.shape.slice(0),w.data,w.stride,0|w.offset,u.data,u.stride,0|u.offset)}},fdTemplate2:function(p){var m={};return function(w,u,S){var _=w.dtype,E=w.order,L=u.dtype,C=u.order,P=S.dtype,I=S.order,U=[_,E.join(),L,C.join(),P,I.join()].join(),z=m[U];return z||(m[U]=z=p([_,E,L,C,P,I])),z(w.shape.slice(0),w.data,w.stride,0|w.offset,u.data,u.stride,0|u.offset,S.data,S.stride,0|S.offset)}}};function a(p){return(0,n[p.funcName])(i.bind(void 0,p))}function i(p){return r[p.funcName]}function c(p){return a({funcName:p.funcName})}var h={},f={},b=c({funcName:"cdiff"}),v=c({funcName:"zero"});function g(p){return p in h?h[p]:h[p]=c({funcName:"fdTemplate"+p})}function y(p,m,w,u){return function(S,_){var E=_.shape.slice();return E[0]>2&&E[1]>2&&u(_.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(w(_.pick(0,-1).lo(1).hi(E[1]-2),S.pick(0,-1,1).lo(1).hi(E[1]-2)),m(S.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(w(_.pick(E[0]-1,-1).lo(1).hi(E[1]-2),S.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),m(S.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(w(_.pick(-1,0).lo(1).hi(E[0]-2),S.pick(-1,0,0).lo(1).hi(E[0]-2)),m(S.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(w(_.pick(-1,E[1]-1).lo(1).hi(E[0]-2),S.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),m(S.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),S.set(0,0,0,0),S.set(0,0,1,0),S.set(E[0]-1,0,0,0),S.set(E[0]-1,0,1,0),S.set(0,E[1]-1,0,0),S.set(0,E[1]-1,1,0),S.set(E[0]-1,E[1]-1,0,0),S.set(E[0]-1,E[1]-1,1,0),S}}d.exports=function(p,m,w){return Array.isArray(w)||(w=o(m.dimension,typeof w=="string"?w:"clamp")),m.size===0?p:m.dimension===0?(p.set(0),p):function(u){var S=u.join();if(C=f[S])return C;for(var _=u.length,E=[b,v],L=1;L<=_;++L)E.push(g(L));var C=y.apply(void 0,E);return f[S]=C,C}(w)(p,m)}},3581:function(d){function s(n,a){var i=Math.floor(a),c=a-i,h=0<=i&&i<n.shape[0],f=0<=i+1&&i+1<n.shape[0];return(1-c)*(h?+n.get(i):0)+c*(f?+n.get(i+1):0)}function t(n,a,i){var c=Math.floor(a),h=a-c,f=0<=c&&c<n.shape[0],b=0<=c+1&&c+1<n.shape[0],v=Math.floor(i),g=i-v,y=0<=v&&v<n.shape[1],p=0<=v+1&&v+1<n.shape[1],m=f&&y?n.get(c,v):0,w=f&&p?n.get(c,v+1):0;return(1-g)*((1-h)*m+h*(b&&y?n.get(c+1,v):0))+g*((1-h)*w+h*(b&&p?n.get(c+1,v+1):0))}function o(n,a,i,c){var h=Math.floor(a),f=a-h,b=0<=h&&h<n.shape[0],v=0<=h+1&&h+1<n.shape[0],g=Math.floor(i),y=i-g,p=0<=g&&g<n.shape[1],m=0<=g+1&&g+1<n.shape[1],w=Math.floor(c),u=c-w,S=0<=w&&w<n.shape[2],_=0<=w+1&&w+1<n.shape[2],E=b&&p&&S?n.get(h,g,w):0,L=b&&m&&S?n.get(h,g+1,w):0,C=v&&p&&S?n.get(h+1,g,w):0,P=v&&m&&S?n.get(h+1,g+1,w):0,I=b&&p&&_?n.get(h,g,w+1):0,U=b&&m&&_?n.get(h,g+1,w+1):0;return(1-u)*((1-y)*((1-f)*E+f*C)+y*((1-f)*L+f*P))+u*((1-y)*((1-f)*I+f*(v&&p&&_?n.get(h+1,g,w+1):0))+y*((1-f)*U+f*(v&&m&&_?n.get(h+1,g+1,w+1):0)))}function r(n){var a,i,c=0|n.shape.length,h=new Array(c),f=new Array(c),b=new Array(c),v=new Array(c);for(a=0;a<c;++a)i=+arguments[a+1],h[a]=Math.floor(i),f[a]=i-h[a],b[a]=0<=h[a]&&h[a]<n.shape[a],v[a]=0<=h[a]+1&&h[a]+1<n.shape[a];var g,y,p,m=0;e:for(a=0;a<1<<c;++a){for(y=1,p=n.offset,g=0;g<c;++g)if(a&1<<g){if(!v[g])continue e;y*=f[g],p+=n.stride[g]*(h[g]+1)}else{if(!b[g])continue e;y*=1-f[g],p+=n.stride[g]*h[g]}m+=y*n.data[p]}return m}d.exports=function(n,a,i,c){switch(n.shape.length){case 0:return 0;case 1:return s(n,a);case 2:return t(n,a,i);case 3:return o(n,a,i,c);default:return r.apply(void 0,arguments)}},d.exports.d1=s,d.exports.d2=t,d.exports.d3=o},7498:function(d,s){var t={"float64,2,1,0":function(){return function(i,c,h,f,b){var v=i[0],g=i[1],y=i[2],p=h[0],m=h[1],w=h[2];f|=0;var u=0,S=0,_=0,E=w,L=m-y*w,C=p-g*m;for(_=0;_<v;++_){for(S=0;S<g;++S){for(u=0;u<y;++u)c[f]/=b,f+=E;f+=L}f+=C}}},"uint8,2,0,1,float64,2,1,0":function(){return function(i,c,h,f,b,v,g,y){for(var p=i[0],m=i[1],w=i[2],u=h[0],S=h[1],_=h[2],E=v[0],L=v[1],C=v[2],P=f|=0,I=g|=0,U=0|i[0];U>0;){U<64?(p=U,U=0):(p=64,U-=64);for(var z=0|i[1];z>0;){z<64?(m=z,z=0):(m=64,z-=64),f=P+U*u+z*S,g=I+U*E+z*L;var H=0,F=0,N=0,B=_,j=u-w*_,K=S-p*u,G=C,V=E-w*C,W=L-p*E;for(N=0;N<m;++N){for(F=0;F<p;++F){for(H=0;H<w;++H)c[f]=b[g]*y,f+=B,g+=G;f+=j,g+=V}f+=K,g+=W}}}}},"float32,1,0,float32,1,0":function(){return function(i,c,h,f,b,v,g){var y=i[0],p=i[1],m=h[0],w=h[1],u=v[0],S=v[1];f|=0,g|=0;var _=0,E=0,L=w,C=m-p*w,P=S,I=u-p*S;for(E=0;E<y;++E){for(_=0;_<p;++_)c[f]=b[g],f+=L,g+=P;f+=C,g+=I}}},"float32,1,0,float32,0,1":function(){return function(i,c,h,f,b,v,g){for(var y=i[0],p=i[1],m=h[0],w=h[1],u=v[0],S=v[1],_=f|=0,E=g|=0,L=0|i[1];L>0;){L<64?(p=L,L=0):(p=64,L-=64);for(var C=0|i[0];C>0;){C<64?(y=C,C=0):(y=64,C-=64),f=_+L*w+C*m,g=E+L*S+C*u;var P=0,I=0,U=w,z=m-p*w,H=S,F=u-p*S;for(I=0;I<y;++I){for(P=0;P<p;++P)c[f]=b[g],f+=U,g+=H;f+=z,g+=F}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(i,c,h,f,b,v,g){for(var y=i[0],p=i[1],m=i[2],w=h[0],u=h[1],S=h[2],_=v[0],E=v[1],L=v[2],C=f|=0,P=g|=0,I=0|i[2];I>0;){I<64?(m=I,I=0):(m=64,I-=64);for(var U=0|i[0];U>0;){U<64?(y=U,U=0):(y=64,U-=64);for(var z=0|i[1];z>0;){z<64?(p=z,z=0):(p=64,z-=64),f=C+I*S+U*w+z*u,g=P+I*L+U*_+z*E;var H=0,F=0,N=0,B=S,j=w-m*S,K=u-y*w,G=L,V=_-m*L,W=E-y*_;for(N=0;N<p;++N){for(F=0;F<y;++F){for(H=0;H<m;++H)c[f]=b[g],f+=B,g+=G;f+=j,g+=V}f+=K,g+=W}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(i,c,h,f,b,v,g){var y=i[0],p=i[1],m=i[2],w=h[0],u=h[1],S=h[2],_=v[0],E=v[1],L=v[2];f|=0,g|=0;var C=0,P=0,I=0,U=S,z=w-m*S,H=u-y*w,F=L,N=_-m*L,B=E-y*_;for(I=0;I<p;++I){for(P=0;P<y;++P){for(C=0;C<m;++C)c[f]=b[g],f+=U,g+=F;f+=z,g+=N}f+=H,g+=B}}}},o=function(i,c){var h=c.join(",");return(0,t[h])()},r={mul:function(i){var c={};return function(h,f,b){var v=h.dtype,g=h.order,y=f.dtype,p=f.order,m=b.dtype,w=b.order,u=[v,g.join(),y,p.join(),m,w.join()].join(),S=c[u];return S||(c[u]=S=i([v,g,y,p,m,w])),S(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,b.data,b.stride,0|b.offset)}},muls:function(i){var c={};return function(h,f,b){var v=h.dtype,g=h.order,y=f.dtype,p=f.order,m=[v,g.join(),y,p.join()].join(),w=c[m];return w||(c[m]=w=i([v,g,y,p])),w(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,b)}},mulseq:function(i){var c={};return function(h,f){var b=h.dtype,v=h.order,g=[b,v.join()].join(),y=c[g];return y||(c[g]=y=i([b,v])),y(h.shape.slice(0),h.data,h.stride,0|h.offset,f)}},div:function(i){var c={};return function(h,f,b){var v=h.dtype,g=h.order,y=f.dtype,p=f.order,m=b.dtype,w=b.order,u=[v,g.join(),y,p.join(),m,w.join()].join(),S=c[u];return S||(c[u]=S=i([v,g,y,p,m,w])),S(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,b.data,b.stride,0|b.offset)}},divs:function(i){var c={};return function(h,f,b){var v=h.dtype,g=h.order,y=f.dtype,p=f.order,m=[v,g.join(),y,p.join()].join(),w=c[m];return w||(c[m]=w=i([v,g,y,p])),w(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,b)}},divseq:function(i){var c={};return function(h,f){var b=h.dtype,v=h.order,g=[b,v.join()].join(),y=c[g];return y||(c[g]=y=i([b,v])),y(h.shape.slice(0),h.data,h.stride,0|h.offset,f)}},assign:function(i){var c={};return function(h,f){var b=h.dtype,v=h.order,g=f.dtype,y=f.order,p=[b,v.join(),g,y.join()].join(),m=c[p];return m||(c[p]=m=i([b,v,g,y])),m(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset)}}};function n(i){return c={funcName:i.funcName},(0,r[c.funcName])(o.bind(void 0,c));var c}var a={mul:"*",div:"/"};(function(){for(var i in a)s[i]=n({funcName:i}),s[i+"s"]=n({funcName:i+"s"}),s[i+"seq"]=n({funcName:i+"seq"})})(),s.assign=n({funcName:"assign"})},7382:function(d,s,t){var o=t(5050),r=t(9262);d.exports=function(n,a){for(var i=[],c=n,h=1;Array.isArray(c);)i.push(c.length),h*=c.length,c=c[0];return i.length===0?o():(a||(a=o(new Float64Array(h),i)),r(a,n),a)}},9262:function(d){d.exports=function(s){var t={};return function(o,r){var n=o.dtype,a=o.order,i=[n,a.join()].join(),c=t[i];return c||(t[i]=c=s([n,a])),c(o.shape.slice(0),o.data,o.stride,0|o.offset,r)}}(function(){return function(s,t,o,r,n){var a=s[0],i=s[1],c=s[2],h=o[0],f=o[1],b=o[2],v=[0,0,0];r|=0;var g=0,y=0,p=0,m=b,w=f-c*b,u=h-i*f;for(p=0;p<a;++p){for(y=0;y<i;++y){for(g=0;g<c;++g){var S,_=n;for(S=0;S<v.length-1;++S)_=_[v[S]];t[r]=_[v[v.length-1]],r+=m,++v[2]}r+=w,v[2]-=c,++v[1]}r+=u,v[1]-=i,++v[0]}}}.bind(void 0,{funcName:"convert"}))},8139:function(d,s,t){var o=t(5306);function r(c){return c==="uint32"?[o.mallocUint32,o.freeUint32]:null}var n={"uint32,1,0":function(c,h){return function(f,b,v,g,y,p,m,w,u,S,_){var E,L,C,P,I,U,z,H,F=f*y+g,N=c(w);for(E=f+1;E<=b;++E){for(L=E,C=F+=y,I=0,U=F,P=0;P<w;++P)N[I++]=v[U],U+=u;e:for(;L-- >f;){I=0,U=C-y;t:for(P=0;P<w;++P){if((z=v[U])<(H=N[I]))break e;if(z>H)break t;U+=S,I+=_}for(I=C,U=C-y,P=0;P<w;++P)v[I]=v[U],I+=u,U+=u;C-=y}for(I=C,U=0,P=0;P<w;++P)v[I]=N[U++],I+=u}h(N)}}},a={"uint32,1,0":function(c,h,f){return function b(v,g,y,p,m,w,u,S,_,E,L){var C,P,I,U,z,H,F,N,B,j,K,G,V,W,J,X,ee,re,ie,se,fe,ye,ge,he,ve,Oe=(g-v+1)/6|0,xe=v+Oe,ke=g-Oe,Me=v+g>>1,Te=Me-Oe,Q=Me+Oe,oe=xe,ce=Te,me=Me,Ae=Q,Ie=ke,Ce=v+1,Re=g-1,le=!0,de=0,_e=0,Fe=0,Ve=S,He=h(Ve),nt=h(Ve);K=m*oe,G=m*ce,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=oe,oe=ce,ce=P;break e}if(Fe<0)break e;ve+=E}K=m*Ae,G=m*Ie,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=Ae,Ae=Ie,Ie=P;break e}if(Fe<0)break e;ve+=E}K=m*oe,G=m*me,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=oe,oe=me,me=P;break e}if(Fe<0)break e;ve+=E}K=m*ce,G=m*me,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=ce,ce=me,me=P;break e}if(Fe<0)break e;ve+=E}K=m*oe,G=m*Ae,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=oe,oe=Ae,Ae=P;break e}if(Fe<0)break e;ve+=E}K=m*me,G=m*Ae,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=me,me=Ae,Ae=P;break e}if(Fe<0)break e;ve+=E}K=m*ce,G=m*Ie,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=ce,ce=Ie,Ie=P;break e}if(Fe<0)break e;ve+=E}K=m*ce,G=m*me,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=ce,ce=me,me=P;break e}if(Fe<0)break e;ve+=E}K=m*Ae,G=m*Ie,ve=p;e:for(j=0;j<S;++j){if(N=G+ve,(Fe=y[F=K+ve]-y[N])>0){P=Ae,Ae=Ie,Ie=P;break e}if(Fe<0)break e;ve+=E}for(K=m*oe,G=m*ce,V=m*me,W=m*Ae,J=m*Ie,X=m*xe,ee=m*Me,re=m*ke,he=0,ve=p,j=0;j<S;++j)F=K+ve,N=G+ve,B=V+ve,ie=W+ve,se=J+ve,fe=X+ve,ye=ee+ve,ge=re+ve,He[he]=y[N],nt[he]=y[ie],le=le&&He[he]===nt[he],I=y[F],U=y[B],z=y[se],y[fe]=I,y[ye]=U,y[ge]=z,++he,ve+=_;for(K=m*Te,G=m*v,ve=p,j=0;j<S;++j)N=G+ve,y[F=K+ve]=y[N],ve+=_;for(K=m*Q,G=m*g,ve=p,j=0;j<S;++j)N=G+ve,y[F=K+ve]=y[N],ve+=_;if(le)for(H=Ce;H<=Re;++H){for(F=p+H*m,he=0,j=0;j<S&&(Fe=y[F]-He[he])==0;++j)he+=L,F+=E;if(Fe!==0)if(Fe<0){if(H!==Ce)for(K=m*H,G=m*Ce,ve=p,j=0;j<S;++j)N=G+ve,C=y[F=K+ve],y[F]=y[N],y[N]=C,ve+=_;++Ce}else for(;;){for(F=p+Re*m,he=0,j=0;j<S&&(Fe=y[F]-He[he])==0;++j)he+=L,F+=E;if(!(Fe>0)){if(Fe<0){for(K=m*H,G=m*Ce,V=m*Re,ve=p,j=0;j<S;++j)N=G+ve,B=V+ve,C=y[F=K+ve],y[F]=y[N],y[N]=y[B],y[B]=C,ve+=_;++Ce,--Re;break}for(K=m*H,G=m*Re,ve=p,j=0;j<S;++j)N=G+ve,C=y[F=K+ve],y[F]=y[N],y[N]=C,ve+=_;--Re;break}Re--}}else for(H=Ce;H<=Re;++H){for(F=p+H*m,he=0,j=0;j<S&&(de=y[F]-He[he])==0;++j)he+=L,F+=E;if(de<0){if(H!==Ce)for(K=m*H,G=m*Ce,ve=p,j=0;j<S;++j)N=G+ve,C=y[F=K+ve],y[F]=y[N],y[N]=C,ve+=_;++Ce}else{for(F=p+H*m,he=0,j=0;j<S&&(_e=y[F]-nt[he])==0;++j)he+=L,F+=E;if(_e>0)for(;;){for(F=p+Re*m,he=0,j=0;j<S&&(Fe=y[F]-nt[he])==0;++j)he+=L,F+=E;if(!(Fe>0)){for(F=p+Re*m,he=0,j=0;j<S&&(Fe=y[F]-He[he])==0;++j)he+=L,F+=E;if(Fe<0){for(K=m*H,G=m*Ce,V=m*Re,ve=p,j=0;j<S;++j)N=G+ve,B=V+ve,C=y[F=K+ve],y[F]=y[N],y[N]=y[B],y[B]=C,ve+=_;++Ce,--Re}else{for(K=m*H,G=m*Re,ve=p,j=0;j<S;++j)N=G+ve,C=y[F=K+ve],y[F]=y[N],y[N]=C,ve+=_;--Re}break}if(--Re<H)break}}}for(K=m*v,G=m*(Ce-1),he=0,ve=p,j=0;j<S;++j)N=G+ve,y[F=K+ve]=y[N],y[N]=He[he],++he,ve+=_;for(K=m*g,G=m*(Re+1),he=0,ve=p,j=0;j<S;++j)N=G+ve,y[F=K+ve]=y[N],y[N]=nt[he],++he,ve+=_;if(Ce-2-v<=32?c(v,Ce-2,y,p,m,w,u,S,_,E,L):b(v,Ce-2,y,p,m,w,u,S,_,E,L),g-(Re+2)<=32?c(Re+2,g,y,p,m,w,u,S,_,E,L):b(Re+2,g,y,p,m,w,u,S,_,E,L),le)return f(He),void f(nt);if(Ce<xe&&Re>ke){e:for(;;){for(F=p+Ce*m,he=0,ve=p,j=0;j<S;++j){if(y[F]!==He[he])break e;++he,F+=_}++Ce}e:for(;;){for(F=p+Re*m,he=0,ve=p,j=0;j<S;++j){if(y[F]!==nt[he])break e;++he,F+=_}--Re}for(H=Ce;H<=Re;++H){for(F=p+H*m,he=0,j=0;j<S&&(de=y[F]-He[he])==0;++j)he+=L,F+=E;if(de===0){if(H!==Ce)for(K=m*H,G=m*Ce,ve=p,j=0;j<S;++j)N=G+ve,C=y[F=K+ve],y[F]=y[N],y[N]=C,ve+=_;++Ce}else{for(F=p+H*m,he=0,j=0;j<S&&(_e=y[F]-nt[he])==0;++j)he+=L,F+=E;if(_e===0)for(;;){for(F=p+Re*m,he=0,j=0;j<S&&(Fe=y[F]-nt[he])==0;++j)he+=L,F+=E;if(Fe!==0){for(F=p+Re*m,he=0,j=0;j<S&&(Fe=y[F]-He[he])==0;++j)he+=L,F+=E;if(Fe<0){for(K=m*H,G=m*Ce,V=m*Re,ve=p,j=0;j<S;++j)N=G+ve,B=V+ve,C=y[F=K+ve],y[F]=y[N],y[N]=y[B],y[B]=C,ve+=_;++Ce,--Re}else{for(K=m*H,G=m*Re,ve=p,j=0;j<S;++j)N=G+ve,C=y[F=K+ve],y[F]=y[N],y[N]=C,ve+=_;--Re}break}if(--Re<H)break}}}}f(He),f(nt),Re-Ce<=32?c(Ce,Re,y,p,m,w,u,S,_,E,L):b(Ce,Re,y,p,m,w,u,S,_,E,L)}}},i={"uint32,1,0":function(c,h){return function(f){var b=f.data,v=0|f.offset,g=f.shape,y=f.stride,p=0|y[0],m=0|g[0],w=0|y[1],u=0|g[1],S=w,_=w;m<=32?c(0,m-1,b,v,p,w,m,u,S,_,1):h(0,m-1,b,v,p,w,m,u,S,_,1)}}};d.exports=function(c,h){var f=[h,c].join(","),b=i[f],v=function(y,p){var m=r(p),w=[p,y].join(","),u=n[w];return m?u(m[0],m[1]):u()}(c,h),g=function(y,p,m){var w=r(p),u=[p,y].join(","),S=a[u];return y.length>1&&w?S(m,w[0],w[1]):S(m)}(c,h,v);return b(v,g)}},8729:function(d,s,t){var o=t(8139),r={};d.exports=function(n){var a=n.order,i=n.dtype,c=[a,i].join(":"),h=r[c];return h||(r[c]=h=o(a,i)),h(n),n}},5050:function(d,s,t){var o=t(4780),r=typeof Float64Array<"u";function n(f,b){return f[0]-b[0]}function a(){var f,b=this.stride,v=new Array(b.length);for(f=0;f<v.length;++f)v[f]=[Math.abs(b[f]),f];v.sort(n);var g=new Array(v.length);for(f=0;f<g.length;++f)g[f]=v[f][1];return g}var i={T:function(f){function b(g){this.data=g}var v=b.prototype;return v.dtype=f,v.index=function(){return-1},v.size=0,v.dimension=-1,v.shape=v.stride=v.order=[],v.lo=v.hi=v.transpose=v.step=function(){return new b(this.data)},v.get=v.set=function(){},v.pick=function(){return null},function(g){return new b(g)}},0:function(f,b){function v(y,p){this.data=y,this.offset=p}var g=v.prototype;return g.dtype=f,g.index=function(){return this.offset},g.dimension=0,g.size=1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new v(this.data,this.offset)},g.pick=function(){return b(this.data)},g.valueOf=g.get=function(){return f==="generic"?this.data.get(this.offset):this.data[this.offset]},g.set=function(y){return f==="generic"?this.data.set(this.offset,y):this.data[this.offset]=y},function(y,p,m,w){return new v(y,w)}},1:function(f,b,v){function g(p,m,w,u){this.data=p,this.shape=[m],this.stride=[w],this.offset=0|u}var y=g.prototype;return y.dtype=f,y.dimension=1,Object.defineProperty(y,"size",{get:function(){return this.shape[0]}}),y.order=[0],y.set=function(p,m){return f==="generic"?this.data.set(this.offset+this.stride[0]*p,m):this.data[this.offset+this.stride[0]*p]=m},y.get=function(p){return f==="generic"?this.data.get(this.offset+this.stride[0]*p):this.data[this.offset+this.stride[0]*p]},y.index=function(p){return this.offset+this.stride[0]*p},y.hi=function(p){return new g(this.data,typeof p!="number"||p<0?this.shape[0]:0|p,this.stride[0],this.offset)},y.lo=function(p){var m=this.offset,w=0,u=this.shape[0],S=this.stride[0];return typeof p=="number"&&p>=0&&(m+=S*(w=0|p),u-=w),new g(this.data,u,S,m)},y.step=function(p){var m=this.shape[0],w=this.stride[0],u=this.offset,S=0,_=Math.ceil;return typeof p=="number"&&((S=0|p)<0?(u+=w*(m-1),m=_(-m/S)):m=_(m/S),w*=S),new g(this.data,m,w,u)},y.transpose=function(p){p=p===void 0?0:0|p;var m=this.shape,w=this.stride;return new g(this.data,m[p],w[p],this.offset)},y.pick=function(p){var m=[],w=[],u=this.offset;return typeof p=="number"&&p>=0?u=u+this.stride[0]*p|0:(m.push(this.shape[0]),w.push(this.stride[0])),(0,b[m.length+1])(this.data,m,w,u)},function(p,m,w,u){return new g(p,m[0],w[0],u)}},2:function(f,b,v){function g(p,m,w,u,S,_){this.data=p,this.shape=[m,w],this.stride=[u,S],this.offset=0|_}var y=g.prototype;return y.dtype=f,y.dimension=2,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(y,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),y.set=function(p,m,w){return f==="generic"?this.data.set(this.offset+this.stride[0]*p+this.stride[1]*m,w):this.data[this.offset+this.stride[0]*p+this.stride[1]*m]=w},y.get=function(p,m){return f==="generic"?this.data.get(this.offset+this.stride[0]*p+this.stride[1]*m):this.data[this.offset+this.stride[0]*p+this.stride[1]*m]},y.index=function(p,m){return this.offset+this.stride[0]*p+this.stride[1]*m},y.hi=function(p,m){return new g(this.data,typeof p!="number"||p<0?this.shape[0]:0|p,typeof m!="number"||m<0?this.shape[1]:0|m,this.stride[0],this.stride[1],this.offset)},y.lo=function(p,m){var w=this.offset,u=0,S=this.shape[0],_=this.shape[1],E=this.stride[0],L=this.stride[1];return typeof p=="number"&&p>=0&&(w+=E*(u=0|p),S-=u),typeof m=="number"&&m>=0&&(w+=L*(u=0|m),_-=u),new g(this.data,S,_,E,L,w)},y.step=function(p,m){var w=this.shape[0],u=this.shape[1],S=this.stride[0],_=this.stride[1],E=this.offset,L=0,C=Math.ceil;return typeof p=="number"&&((L=0|p)<0?(E+=S*(w-1),w=C(-w/L)):w=C(w/L),S*=L),typeof m=="number"&&((L=0|m)<0?(E+=_*(u-1),u=C(-u/L)):u=C(u/L),_*=L),new g(this.data,w,u,S,_,E)},y.transpose=function(p,m){p=p===void 0?0:0|p,m=m===void 0?1:0|m;var w=this.shape,u=this.stride;return new g(this.data,w[p],w[m],u[p],u[m],this.offset)},y.pick=function(p,m){var w=[],u=[],S=this.offset;return typeof p=="number"&&p>=0?S=S+this.stride[0]*p|0:(w.push(this.shape[0]),u.push(this.stride[0])),typeof m=="number"&&m>=0?S=S+this.stride[1]*m|0:(w.push(this.shape[1]),u.push(this.stride[1])),(0,b[w.length+1])(this.data,w,u,S)},function(p,m,w,u){return new g(p,m[0],m[1],w[0],w[1],u)}},3:function(f,b,v){function g(p,m,w,u,S,_,E,L){this.data=p,this.shape=[m,w,u],this.stride=[S,_,E],this.offset=0|L}var y=g.prototype;return y.dtype=f,y.dimension=3,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(y,"order",{get:function(){var p=Math.abs(this.stride[0]),m=Math.abs(this.stride[1]),w=Math.abs(this.stride[2]);return p>m?m>w?[2,1,0]:p>w?[1,2,0]:[1,0,2]:p>w?[2,0,1]:w>m?[0,1,2]:[0,2,1]}}),y.set=function(p,m,w,u){return f==="generic"?this.data.set(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w,u):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w]=u},y.get=function(p,m,w){return f==="generic"?this.data.get(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w]},y.index=function(p,m,w){return this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w},y.hi=function(p,m,w){return new g(this.data,typeof p!="number"||p<0?this.shape[0]:0|p,typeof m!="number"||m<0?this.shape[1]:0|m,typeof w!="number"||w<0?this.shape[2]:0|w,this.stride[0],this.stride[1],this.stride[2],this.offset)},y.lo=function(p,m,w){var u=this.offset,S=0,_=this.shape[0],E=this.shape[1],L=this.shape[2],C=this.stride[0],P=this.stride[1],I=this.stride[2];return typeof p=="number"&&p>=0&&(u+=C*(S=0|p),_-=S),typeof m=="number"&&m>=0&&(u+=P*(S=0|m),E-=S),typeof w=="number"&&w>=0&&(u+=I*(S=0|w),L-=S),new g(this.data,_,E,L,C,P,I,u)},y.step=function(p,m,w){var u=this.shape[0],S=this.shape[1],_=this.shape[2],E=this.stride[0],L=this.stride[1],C=this.stride[2],P=this.offset,I=0,U=Math.ceil;return typeof p=="number"&&((I=0|p)<0?(P+=E*(u-1),u=U(-u/I)):u=U(u/I),E*=I),typeof m=="number"&&((I=0|m)<0?(P+=L*(S-1),S=U(-S/I)):S=U(S/I),L*=I),typeof w=="number"&&((I=0|w)<0?(P+=C*(_-1),_=U(-_/I)):_=U(_/I),C*=I),new g(this.data,u,S,_,E,L,C,P)},y.transpose=function(p,m,w){p=p===void 0?0:0|p,m=m===void 0?1:0|m,w=w===void 0?2:0|w;var u=this.shape,S=this.stride;return new g(this.data,u[p],u[m],u[w],S[p],S[m],S[w],this.offset)},y.pick=function(p,m,w){var u=[],S=[],_=this.offset;return typeof p=="number"&&p>=0?_=_+this.stride[0]*p|0:(u.push(this.shape[0]),S.push(this.stride[0])),typeof m=="number"&&m>=0?_=_+this.stride[1]*m|0:(u.push(this.shape[1]),S.push(this.stride[1])),typeof w=="number"&&w>=0?_=_+this.stride[2]*w|0:(u.push(this.shape[2]),S.push(this.stride[2])),(0,b[u.length+1])(this.data,u,S,_)},function(p,m,w,u){return new g(p,m[0],m[1],m[2],w[0],w[1],w[2],u)}},4:function(f,b,v){function g(p,m,w,u,S,_,E,L,C,P){this.data=p,this.shape=[m,w,u,S],this.stride=[_,E,L,C],this.offset=0|P}var y=g.prototype;return y.dtype=f,y.dimension=4,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(y,"order",{get:v}),y.set=function(p,m,w,u,S){return f==="generic"?this.data.set(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u,S):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u]=S},y.get=function(p,m,w,u){return f==="generic"?this.data.get(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u]},y.index=function(p,m,w,u){return this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u},y.hi=function(p,m,w,u){return new g(this.data,typeof p!="number"||p<0?this.shape[0]:0|p,typeof m!="number"||m<0?this.shape[1]:0|m,typeof w!="number"||w<0?this.shape[2]:0|w,typeof u!="number"||u<0?this.shape[3]:0|u,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},y.lo=function(p,m,w,u){var S=this.offset,_=0,E=this.shape[0],L=this.shape[1],C=this.shape[2],P=this.shape[3],I=this.stride[0],U=this.stride[1],z=this.stride[2],H=this.stride[3];return typeof p=="number"&&p>=0&&(S+=I*(_=0|p),E-=_),typeof m=="number"&&m>=0&&(S+=U*(_=0|m),L-=_),typeof w=="number"&&w>=0&&(S+=z*(_=0|w),C-=_),typeof u=="number"&&u>=0&&(S+=H*(_=0|u),P-=_),new g(this.data,E,L,C,P,I,U,z,H,S)},y.step=function(p,m,w,u){var S=this.shape[0],_=this.shape[1],E=this.shape[2],L=this.shape[3],C=this.stride[0],P=this.stride[1],I=this.stride[2],U=this.stride[3],z=this.offset,H=0,F=Math.ceil;return typeof p=="number"&&((H=0|p)<0?(z+=C*(S-1),S=F(-S/H)):S=F(S/H),C*=H),typeof m=="number"&&((H=0|m)<0?(z+=P*(_-1),_=F(-_/H)):_=F(_/H),P*=H),typeof w=="number"&&((H=0|w)<0?(z+=I*(E-1),E=F(-E/H)):E=F(E/H),I*=H),typeof u=="number"&&((H=0|u)<0?(z+=U*(L-1),L=F(-L/H)):L=F(L/H),U*=H),new g(this.data,S,_,E,L,C,P,I,U,z)},y.transpose=function(p,m,w,u){p=p===void 0?0:0|p,m=m===void 0?1:0|m,w=w===void 0?2:0|w,u=u===void 0?3:0|u;var S=this.shape,_=this.stride;return new g(this.data,S[p],S[m],S[w],S[u],_[p],_[m],_[w],_[u],this.offset)},y.pick=function(p,m,w,u){var S=[],_=[],E=this.offset;return typeof p=="number"&&p>=0?E=E+this.stride[0]*p|0:(S.push(this.shape[0]),_.push(this.stride[0])),typeof m=="number"&&m>=0?E=E+this.stride[1]*m|0:(S.push(this.shape[1]),_.push(this.stride[1])),typeof w=="number"&&w>=0?E=E+this.stride[2]*w|0:(S.push(this.shape[2]),_.push(this.stride[2])),typeof u=="number"&&u>=0?E=E+this.stride[3]*u|0:(S.push(this.shape[3]),_.push(this.stride[3])),(0,b[S.length+1])(this.data,S,_,E)},function(p,m,w,u){return new g(p,m[0],m[1],m[2],m[3],w[0],w[1],w[2],w[3],u)}},5:function(f,b,v){function g(p,m,w,u,S,_,E,L,C,P,I,U){this.data=p,this.shape=[m,w,u,S,_],this.stride=[E,L,C,P,I],this.offset=0|U}var y=g.prototype;return y.dtype=f,y.dimension=5,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(y,"order",{get:v}),y.set=function(p,m,w,u,S,_){return f==="generic"?this.data.set(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S,_):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S]=_},y.get=function(p,m,w,u,S){return f==="generic"?this.data.get(this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S):this.data[this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S]},y.index=function(p,m,w,u,S){return this.offset+this.stride[0]*p+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S},y.hi=function(p,m,w,u,S){return new g(this.data,typeof p!="number"||p<0?this.shape[0]:0|p,typeof m!="number"||m<0?this.shape[1]:0|m,typeof w!="number"||w<0?this.shape[2]:0|w,typeof u!="number"||u<0?this.shape[3]:0|u,typeof S!="number"||S<0?this.shape[4]:0|S,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},y.lo=function(p,m,w,u,S){var _=this.offset,E=0,L=this.shape[0],C=this.shape[1],P=this.shape[2],I=this.shape[3],U=this.shape[4],z=this.stride[0],H=this.stride[1],F=this.stride[2],N=this.stride[3],B=this.stride[4];return typeof p=="number"&&p>=0&&(_+=z*(E=0|p),L-=E),typeof m=="number"&&m>=0&&(_+=H*(E=0|m),C-=E),typeof w=="number"&&w>=0&&(_+=F*(E=0|w),P-=E),typeof u=="number"&&u>=0&&(_+=N*(E=0|u),I-=E),typeof S=="number"&&S>=0&&(_+=B*(E=0|S),U-=E),new g(this.data,L,C,P,I,U,z,H,F,N,B,_)},y.step=function(p,m,w,u,S){var _=this.shape[0],E=this.shape[1],L=this.shape[2],C=this.shape[3],P=this.shape[4],I=this.stride[0],U=this.stride[1],z=this.stride[2],H=this.stride[3],F=this.stride[4],N=this.offset,B=0,j=Math.ceil;return typeof p=="number"&&((B=0|p)<0?(N+=I*(_-1),_=j(-_/B)):_=j(_/B),I*=B),typeof m=="number"&&((B=0|m)<0?(N+=U*(E-1),E=j(-E/B)):E=j(E/B),U*=B),typeof w=="number"&&((B=0|w)<0?(N+=z*(L-1),L=j(-L/B)):L=j(L/B),z*=B),typeof u=="number"&&((B=0|u)<0?(N+=H*(C-1),C=j(-C/B)):C=j(C/B),H*=B),typeof S=="number"&&((B=0|S)<0?(N+=F*(P-1),P=j(-P/B)):P=j(P/B),F*=B),new g(this.data,_,E,L,C,P,I,U,z,H,F,N)},y.transpose=function(p,m,w,u,S){p=p===void 0?0:0|p,m=m===void 0?1:0|m,w=w===void 0?2:0|w,u=u===void 0?3:0|u,S=S===void 0?4:0|S;var _=this.shape,E=this.stride;return new g(this.data,_[p],_[m],_[w],_[u],_[S],E[p],E[m],E[w],E[u],E[S],this.offset)},y.pick=function(p,m,w,u,S){var _=[],E=[],L=this.offset;return typeof p=="number"&&p>=0?L=L+this.stride[0]*p|0:(_.push(this.shape[0]),E.push(this.stride[0])),typeof m=="number"&&m>=0?L=L+this.stride[1]*m|0:(_.push(this.shape[1]),E.push(this.stride[1])),typeof w=="number"&&w>=0?L=L+this.stride[2]*w|0:(_.push(this.shape[2]),E.push(this.stride[2])),typeof u=="number"&&u>=0?L=L+this.stride[3]*u|0:(_.push(this.shape[3]),E.push(this.stride[3])),typeof S=="number"&&S>=0?L=L+this.stride[4]*S|0:(_.push(this.shape[4]),E.push(this.stride[4])),(0,b[_.length+1])(this.data,_,E,L)},function(p,m,w,u){return new g(p,m[0],m[1],m[2],m[3],m[4],w[0],w[1],w[2],w[3],w[4],u)}}};function c(f,b){var v=b===-1?"T":String(b),g=i[v];return b===-1?g(f):b===0?g(f,h[f][0]):g(f,h[f],a)}var h={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};d.exports=function(f,b,v,g){if(f===void 0)return(0,h.array[0])([]);typeof f=="number"&&(f=[f]),b===void 0&&(b=[f.length]);var y=b.length;if(v===void 0){v=new Array(y);for(var p=y-1,m=1;p>=0;--p)v[p]=m,m*=b[p]}if(g===void 0)for(g=0,p=0;p<y;++p)v[p]<0&&(g-=(b[p]-1)*v[p]);for(var w=function(S){if(o(S))return"buffer";if(r)switch(Object.prototype.toString.call(S)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(S)?"array":"generic"}(f),u=h[w];u.length<=y+1;)u.push(c(w,u.length-1));return(0,u[y+1])(f,b,v,g)}},8551:function(d,s,t){var o=t(8362),r=Math.pow(2,-1074),n=-1>>>0;d.exports=function(a,i){if(isNaN(a)||isNaN(i))return NaN;if(a===i)return a;if(a===0)return i<0?-r:r;var c=o.hi(a),h=o.lo(a);return i>a==a>0?h===n?(c+=1,h=0):h+=1:h===0?(h=n,c-=1):h-=1,o.pack(h,c)}},115:function(d,s){s.vertexNormals=function(t,o,r){for(var n=o.length,a=new Array(n),i=r===void 0?1e-6:r,c=0;c<n;++c)a[c]=[0,0,0];for(c=0;c<t.length;++c)for(var h=t[c],f=0,b=h[h.length-1],v=h[0],g=0;g<h.length;++g){f=b,b=v,v=h[(g+1)%h.length];for(var y=o[f],p=o[b],m=o[v],w=new Array(3),u=0,S=new Array(3),_=0,E=0;E<3;++E)w[E]=y[E]-p[E],u+=w[E]*w[E],S[E]=m[E]-p[E],_+=S[E]*S[E];if(u*_>i){var L=a[b],C=1/Math.sqrt(u*_);for(E=0;E<3;++E){var P=(E+1)%3,I=(E+2)%3;L[E]+=C*(S[P]*w[I]-S[I]*w[P])}}}for(c=0;c<n;++c){L=a[c];var U=0;for(E=0;E<3;++E)U+=L[E]*L[E];if(U>i)for(C=1/Math.sqrt(U),E=0;E<3;++E)L[E]*=C;else for(E=0;E<3;++E)L[E]=0}return a},s.faceNormals=function(t,o,r){for(var n=t.length,a=new Array(n),i=r===void 0?1e-6:r,c=0;c<n;++c){for(var h=t[c],f=new Array(3),b=0;b<3;++b)f[b]=o[h[b]];var v=new Array(3),g=new Array(3);for(b=0;b<3;++b)v[b]=f[1][b]-f[0][b],g[b]=f[2][b]-f[0][b];var y=new Array(3),p=0;for(b=0;b<3;++b){var m=(b+1)%3,w=(b+2)%3;y[b]=v[m]*g[w]-v[w]*g[m],p+=y[b]*y[b]}for(p=p>i?1/Math.sqrt(p):0,b=0;b<3;++b)y[b]*=p;a[c]=y}return a}},567:function(d){d.exports=function(s,t,o,r,n,a,i,c,h,f){var b=t+a+f;if(v>0){var v=Math.sqrt(b+1);s[0]=.5*(i-h)/v,s[1]=.5*(c-r)/v,s[2]=.5*(o-a)/v,s[3]=.5*v}else{var g=Math.max(t,a,f);v=Math.sqrt(2*g-b+1),t>=g?(s[0]=.5*v,s[1]=.5*(n+o)/v,s[2]=.5*(c+r)/v,s[3]=.5*(i-h)/v):a>=g?(s[0]=.5*(o+n)/v,s[1]=.5*v,s[2]=.5*(h+i)/v,s[3]=.5*(c-r)/v):(s[0]=.5*(r+c)/v,s[1]=.5*(i+h)/v,s[2]=.5*v,s[3]=.5*(o-n)/v)}return s}},7774:function(d,s,t){d.exports=function(g){var y=(g=g||{}).center||[0,0,0],p=g.rotation||[0,0,0,1],m=g.radius||1;y=[].slice.call(y,0,3),f(p=[].slice.call(p,0,4),p);var w=new b(p,y,Math.log(m));return w.setDistanceLimits(g.zoomMin,g.zoomMax),("eye"in g||"up"in g)&&w.lookAt(0,g.eye,g.center,g.up),w};var o=t(8444),r=t(3012),n=t(5950),a=t(7437),i=t(567);function c(g,y,p){return Math.sqrt(Math.pow(g,2)+Math.pow(y,2)+Math.pow(p,2))}function h(g,y,p,m){return Math.sqrt(Math.pow(g,2)+Math.pow(y,2)+Math.pow(p,2)+Math.pow(m,2))}function f(g,y){var p=y[0],m=y[1],w=y[2],u=y[3],S=h(p,m,w,u);S>1e-6?(g[0]=p/S,g[1]=m/S,g[2]=w/S,g[3]=u/S):(g[0]=g[1]=g[2]=0,g[3]=1)}function b(g,y,p){this.radius=o([p]),this.center=o(y),this.rotation=o(g),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var v=b.prototype;v.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},v.recalcMatrix=function(g){this.radius.curve(g),this.center.curve(g),this.rotation.curve(g);var y=this.computedRotation;f(y,y);var p=this.computedMatrix;n(p,y);var m=this.computedCenter,w=this.computedEye,u=this.computedUp,S=Math.exp(this.computedRadius[0]);w[0]=m[0]+S*p[2],w[1]=m[1]+S*p[6],w[2]=m[2]+S*p[10],u[0]=p[1],u[1]=p[5],u[2]=p[9];for(var _=0;_<3;++_){for(var E=0,L=0;L<3;++L)E+=p[_+4*L]*w[L];p[12+_]=-E}},v.getMatrix=function(g,y){this.recalcMatrix(g);var p=this.computedMatrix;if(y){for(var m=0;m<16;++m)y[m]=p[m];return y}return p},v.idle=function(g){this.center.idle(g),this.radius.idle(g),this.rotation.idle(g)},v.flush=function(g){this.center.flush(g),this.radius.flush(g),this.rotation.flush(g)},v.pan=function(g,y,p,m){y=y||0,p=p||0,m=m||0,this.recalcMatrix(g);var w=this.computedMatrix,u=w[1],S=w[5],_=w[9],E=c(u,S,_);u/=E,S/=E,_/=E;var L=w[0],C=w[4],P=w[8],I=L*u+C*S+P*_,U=c(L-=u*I,C-=S*I,P-=_*I);L/=U,C/=U,P/=U,w[2],w[6],w[10];var z=L*y+u*p,H=C*y+S*p,F=P*y+_*p;this.center.move(g,z,H,F);var N=Math.exp(this.computedRadius[0]);N=Math.max(1e-4,N+m),this.radius.set(g,Math.log(N))},v.rotate=function(g,y,p,m){this.recalcMatrix(g),y=y||0,p=p||0;var w=this.computedMatrix,u=w[0],S=w[4],_=w[8],E=w[1],L=w[5],C=w[9],P=w[2],I=w[6],U=w[10],z=y*u+p*E,H=y*S+p*L,F=y*_+p*C,N=-(I*F-U*H),B=-(U*z-P*F),j=-(P*H-I*z),K=Math.sqrt(Math.max(0,1-Math.pow(N,2)-Math.pow(B,2)-Math.pow(j,2))),G=h(N,B,j,K);G>1e-6?(N/=G,B/=G,j/=G,K/=G):(N=B=j=0,K=1);var V=this.computedRotation,W=V[0],J=V[1],X=V[2],ee=V[3],re=W*K+ee*N+J*j-X*B,ie=J*K+ee*B+X*N-W*j,se=X*K+ee*j+W*B-J*N,fe=ee*K-W*N-J*B-X*j;if(m){N=P,B=I,j=U;var ye=Math.sin(m)/c(N,B,j);N*=ye,B*=ye,j*=ye,fe=fe*(K=Math.cos(y))-(re=re*K+fe*N+ie*j-se*B)*N-(ie=ie*K+fe*B+se*N-re*j)*B-(se=se*K+fe*j+re*B-ie*N)*j}var ge=h(re,ie,se,fe);ge>1e-6?(re/=ge,ie/=ge,se/=ge,fe/=ge):(re=ie=se=0,fe=1),this.rotation.set(g,re,ie,se,fe)},v.lookAt=function(g,y,p,m){this.recalcMatrix(g),p=p||this.computedCenter,y=y||this.computedEye,m=m||this.computedUp;var w=this.computedMatrix;r(w,y,p,m);var u=this.computedRotation;i(u,w[0],w[1],w[2],w[4],w[5],w[6],w[8],w[9],w[10]),f(u,u),this.rotation.set(g,u[0],u[1],u[2],u[3]);for(var S=0,_=0;_<3;++_)S+=Math.pow(p[_]-y[_],2);this.radius.set(g,.5*Math.log(Math.max(S,1e-6))),this.center.set(g,p[0],p[1],p[2])},v.translate=function(g,y,p,m){this.center.move(g,y||0,p||0,m||0)},v.setMatrix=function(g,y){var p=this.computedRotation;i(p,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),f(p,p),this.rotation.set(g,p[0],p[1],p[2],p[3]);var m=this.computedMatrix;a(m,y);var w=m[15];if(Math.abs(w)>1e-6){var u=m[12]/w,S=m[13]/w,_=m[14]/w;this.recalcMatrix(g);var E=Math.exp(this.computedRadius[0]);this.center.set(g,u-m[2]*E,S-m[6]*E,_-m[10]*E),this.radius.idle(g)}else this.center.idle(g),this.radius.idle(g)},v.setDistance=function(g,y){y>0&&this.radius.set(g,Math.log(y))},v.setDistanceLimits=function(g,y){g=g>0?Math.log(g):-1/0,y=y>0?Math.log(y):1/0,y=Math.max(y,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=y},v.getDistanceLimits=function(g){var y=this.radius.bounds;return g?(g[0]=Math.exp(y[0][0]),g[1]=Math.exp(y[1][0]),g):[Math.exp(y[0][0]),Math.exp(y[1][0])]},v.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},v.fromJSON=function(g){var y=this.lastT(),p=g.center;p&&this.center.set(y,p[0],p[1],p[2]);var m=g.rotation;m&&this.rotation.set(y,m[0],m[1],m[2],m[3]);var w=g.distance;w&&w>0&&this.radius.set(y,Math.log(w)),this.setDistanceLimits(g.zoomMin,g.zoomMax)}},4930:function(d,s,t){var o=t(6184);d.exports=function(r,n,a){return o(a=a!==void 0?a+"":" ",n)+r}},4405:function(d){d.exports=function(s,t){t||(t=[0,""]),s=String(s);var o=parseFloat(s,10);return t[0]=o,t[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},4166:function(d,s,t){d.exports=function(r,n){for(var a=0|n.length,i=r.length,c=[new Array(a),new Array(a)],h=0;h<a;++h)c[0][h]=[],c[1][h]=[];for(h=0;h<i;++h){var f=r[h];c[0][f[0]].push(f),c[1][f[1]].push(f)}var b=[];for(h=0;h<a;++h)c[0][h].length+c[1][h].length===0&&b.push([h]);function v(S,_){var E=c[_][S[_]];E.splice(E.indexOf(S),1)}function g(S,_,E){for(var L,C,P,I=0;I<2;++I)if(c[I][_].length>0){L=c[I][_][0],P=I;break}C=L[1^P];for(var U=0;U<2;++U)for(var z=c[U][_],H=0;H<z.length;++H){var F=z[H],N=F[1^U];o(n[S],n[_],n[C],n[N])>0&&(L=F,C=N,P=U)}return E||L&&v(L,P),C}function y(S,_){var E=c[_][S][0],L=[S];v(E,_);for(var C=E[1^_];;){for(;C!==S;)L.push(C),C=g(L[L.length-2],C,!1);if(c[0][S].length+c[1][S].length===0)break;var P=L[L.length-1],I=S,U=L[1],z=g(P,I,!0);if(o(n[P],n[I],n[U],n[z])<0)break;L.push(S),C=g(P,I)}return L}function p(S,_){return _[1]===_[_.length-1]}for(h=0;h<a;++h)for(var m=0;m<2;++m){for(var w=[];c[m][h].length>0;){c[0][h].length;var u=y(h,m);p(0,u)?w.push.apply(w,u):(w.length>0&&b.push(w),w=u)}w.length>0&&b.push(w)}return b};var o=t(9398)},3959:function(d,s,t){d.exports=function(r,n){for(var a=o(r,n.length),i=new Array(n.length),c=new Array(n.length),h=[],f=0;f<n.length;++f){var b=a[f].length;c[f]=b,i[f]=!0,b<=1&&h.push(f)}for(;h.length>0;){var v=h.pop();i[v]=!1;var g=a[v];for(f=0;f<g.length;++f){var y=g[f];--c[y]==0&&h.push(y)}}var p=new Array(n.length),m=[];for(f=0;f<n.length;++f)i[f]?(v=m.length,p[f]=v,m.push(n[f])):p[f]=-1;var w=[];for(f=0;f<r.length;++f){var u=r[f];i[u[0]]&&i[u[1]]&&w.push([p[u[0]],p[u[1]]])}return[w,m]};var o=t(8348)},8040:function(d,s,t){d.exports=function(b,v){var g=h(b,v);b=g[0];for(var y=(v=g[1]).length,p=(b.length,o(b,v.length)),m=0;m<y;++m)if(p[m].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var w=r(b,v),u=(w=w.filter(function(Oe){for(var xe=Oe.length,ke=[0],Me=0;Me<xe;++Me){var Te=v[Oe[Me]],Q=v[Oe[(Me+1)%xe]],oe=a(-Te[0],Te[1]),ce=a(-Te[0],Q[1]),me=a(Q[0],Te[1]),Ae=a(Q[0],Q[1]);ke=i(ke,i(i(oe,ce),i(me,Ae)))}return ke[ke.length-1]>0})).length,S=new Array(u),_=new Array(u);for(m=0;m<u;++m){S[m]=m;var E=new Array(u),L=w[m].map(function(Oe){return v[Oe]}),C=n([L]),P=0;e:for(var I=0;I<u;++I)if(E[I]=0,m!==I){for(var U=(he=w[I]).length,z=0;z<U;++z){var H=C(v[he[z]]);if(H!==0){H<0&&(E[I]=1,P+=1);continue e}}E[I]=1,P+=1}_[m]=[P,m,E]}for(_.sort(function(Oe,xe){return xe[0]-Oe[0]}),m=0;m<u;++m){var F=(E=_[m])[1],N=E[2];for(I=0;I<u;++I)N[I]&&(S[I]=F)}var B=function(Oe){for(var xe=new Array(Oe),ke=0;ke<Oe;++ke)xe[ke]=[];return xe}(u);for(m=0;m<u;++m)B[m].push(S[m]),B[S[m]].push(m);var j={},K=f(y,!1);for(m=0;m<u;++m)for(U=(he=w[m]).length,I=0;I<U;++I){var G=he[I],V=he[(I+1)%U],W=Math.min(G,V)+":"+Math.max(G,V);if(W in j){var J=j[W];B[J].push(m),B[m].push(J),K[G]=K[V]=!0}else j[W]=m}function X(Oe){for(var xe=Oe.length,ke=0;ke<xe;++ke)if(!K[Oe[ke]])return!1;return!0}var ee=[],re=f(u,-1);for(m=0;m<u;++m)S[m]!==m||X(w[m])?re[m]=-1:(ee.push(m),re[m]=0);for(g=[];ee.length>0;){var ie=ee.pop(),se=B[ie];c(se,function(Oe,xe){return Oe-xe});var fe,ye=se.length,ge=re[ie];if(ge===0){var he=w[ie];fe=[he]}for(m=0;m<ye;++m){var ve=se[m];re[ve]>=0||(re[ve]=1^ge,ee.push(ve),ge===0&&(X(he=w[ve])||(he.reverse(),fe.push(he))))}ge===0&&g.push(fe)}return g};var o=t(8348),r=t(4166),n=t(211),a=t(9660),i=t(9662),c=t(1215),h=t(3959);function f(b,v){for(var g=new Array(b),y=0;y<b;++y)g[y]=v;return g}},211:function(d,s,t){d.exports=function(f){for(var b=f.length,v=[],g=[],y=0;y<b;++y)for(var p=f[y],m=p.length,w=m-1,u=0;u<m;w=u++){var S=p[w],_=p[u];S[0]===_[0]?g.push([S,_]):v.push([S,_])}if(v.length===0)return g.length===0?h:(E=c(g),function(P){return E(P[0],P[1])?0:1});var E,L=r(v),C=function(P,I){return function(U){var z=a.le(I,U[0]);if(z<0)return 1;var H=P[z];if(!H){if(!(z>0&&I[z]===U[0]))return 1;H=P[z-1]}for(var F=1;H;){var N=H.key,B=o(U,N[0],N[1]);if(N[0][0]<N[1][0])if(B<0)H=H.left;else{if(!(B>0))return 0;F=-1,H=H.right}else if(B>0)H=H.left;else{if(!(B<0))return 0;F=1,H=H.right}}return F}}(L.slabs,L.coordinates);return g.length===0?C:function(P,I){return function(U){return P(U[0],U[1])?0:I(U)}}(c(g),C)};var o=t(417)[3],r=t(4385),n=t(9014),a=t(5070);function i(){return!0}function c(f){for(var b={},v=0;v<f.length;++v){var g=f[v],y=g[0][0],p=g[0][1],m=g[1][1],w=[Math.min(p,m),Math.max(p,m)];y in b?b[y].push(w):b[y]=[w]}var u={},S=Object.keys(b);for(v=0;v<S.length;++v){var _=b[S[v]];u[S[v]]=n(_)}return function(E){return function(L,C){var P=E[L];return!!P&&!!P.queryPoint(C,i)}}(u)}function h(f){return 1}},7309:function(d){var s=new Float64Array(4),t=new Float64Array(4),o=new Float64Array(4);d.exports=function(r,n,a,i,c){s.length<i.length&&(s=new Float64Array(i.length),t=new Float64Array(i.length),o=new Float64Array(i.length));for(var h=0;h<i.length;++h)s[h]=r[h]-i[h],t[h]=n[h]-r[h],o[h]=a[h]-r[h];var f=0,b=0,v=0,g=0,y=0,p=0;for(h=0;h<i.length;++h){var m=t[h],w=o[h],u=s[h];f+=m*m,b+=m*w,v+=w*w,g+=u*m,y+=u*w,p+=u*u}var S,_,E,L,C,P=Math.abs(f*v-b*b),I=b*y-v*g,U=b*g-f*y;if(I+U<=P)if(I<0)U<0&&g<0?(U=0,-g>=f?(I=1,S=f+2*g+p):S=g*(I=-g/f)+p):(I=0,y>=0?(U=0,S=p):-y>=v?(U=1,S=v+2*y+p):S=y*(U=-y/v)+p);else if(U<0)U=0,g>=0?(I=0,S=p):-g>=f?(I=1,S=f+2*g+p):S=g*(I=-g/f)+p;else{var z=1/P;S=(I*=z)*(f*I+b*(U*=z)+2*g)+U*(b*I+v*U+2*y)+p}else I<0?(E=v+y)>(_=b+g)?(L=E-_)>=(C=f-2*b+v)?(I=1,U=0,S=f+2*g+p):S=(I=L/C)*(f*I+b*(U=1-I)+2*g)+U*(b*I+v*U+2*y)+p:(I=0,E<=0?(U=1,S=v+2*y+p):y>=0?(U=0,S=p):S=y*(U=-y/v)+p):U<0?(E=f+g)>(_=b+y)?(L=E-_)>=(C=f-2*b+v)?(U=1,I=0,S=v+2*y+p):S=(I=1-(U=L/C))*(f*I+b*U+2*g)+U*(b*I+v*U+2*y)+p:(U=0,E<=0?(I=1,S=f+2*g+p):g>=0?(I=0,S=p):S=g*(I=-g/f)+p):(L=v+y-b-g)<=0?(I=0,U=1,S=v+2*y+p):L>=(C=f-2*b+v)?(I=1,U=0,S=f+2*g+p):S=(I=L/C)*(f*I+b*(U=1-I)+2*g)+U*(b*I+v*U+2*y)+p;var H=1-I-U;for(h=0;h<i.length;++h)c[h]=H*r[h]+I*n[h]+U*a[h];return S<0?0:S}},1116:function(d,s,t){d.exports=t(6093)},7584:function(d,s,t){var o=t(1539);d.exports=function(r,n){for(var a=r.length,i=new Array(a),c=0;c<a;++c)i[c]=o(r[c],n[c]);return i}},2826:function(d,s,t){d.exports=function(r){for(var n=new Array(r.length),a=0;a<r.length;++a)n[a]=o(r[a]);return n};var o=t(5125)},4469:function(d,s,t){var o=t(5125),r=t(3962);d.exports=function(n,a){for(var i=o(a),c=n.length,h=new Array(c),f=0;f<c;++f)h[f]=r(n[f],i);return h}},6695:function(d,s,t){var o=t(4354);d.exports=function(r,n){for(var a=r.length,i=new Array(a),c=0;c<a;++c)i[c]=o(r[c],n[c]);return i}},7037:function(d,s,t){var o=t(9209),r=t(1284),n=t(9887);d.exports=function(a){a.sort(r);for(var i=a.length,c=0,h=0;h<i;++h){var f=a[h],b=n(f);if(b!==0){if(c>0){var v=a[c-1];if(o(f,v)===0&&n(v)!==b){c-=1;continue}}a[c++]=f}}return a.length=c,a}},6184:function(d){var s,t="";d.exports=function(o,r){if(typeof o!="string")throw new TypeError("expected a string");if(r===1)return o;if(r===2)return o+o;var n=o.length*r;if(s!==o||s===void 0)s=o,t="";else if(t.length>=n)return t.substr(0,n);for(;n>t.length&&r>1;)1&r&&(t+=o),r>>=1,o+=o;return t=(t+=o).substr(0,n)}},8161:function(d,s,t){d.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(d){d.exports=function(s){for(var t=s.length,o=s[s.length-1],r=t,n=t-2;n>=0;--n){var a=o,i=s[n];(h=i-((o=a+i)-a))&&(s[--r]=o,o=h)}var c=0;for(n=r;n<t;++n){var h;(h=(i=o)-((o=(a=s[n])+i)-a))&&(s[c++]=h)}return s[c++]=o,s.length=c,s}},8167:function(d,s,t){var o=t(9660),r=t(9662),n=t(8289),a=t(402);function i(y,p,m,w){return function(u){return w(y(m(u[0][0],u[1][1]),m(-u[0][1],u[1][0])))}}function c(y,p,m,w){return function(u){return w(y(p(y(m(u[1][1],u[2][2]),m(-u[1][2],u[2][1])),u[0][0]),y(p(y(m(u[1][0],u[2][2]),m(-u[1][2],u[2][0])),-u[0][1]),p(y(m(u[1][0],u[2][1]),m(-u[1][1],u[2][0])),u[0][2]))))}}function h(y,p,m,w){return function(u){return w(y(y(p(y(p(y(m(u[2][2],u[3][3]),m(-u[2][3],u[3][2])),u[1][1]),y(p(y(m(u[2][1],u[3][3]),m(-u[2][3],u[3][1])),-u[1][2]),p(y(m(u[2][1],u[3][2]),m(-u[2][2],u[3][1])),u[1][3]))),u[0][0]),p(y(p(y(m(u[2][2],u[3][3]),m(-u[2][3],u[3][2])),u[1][0]),y(p(y(m(u[2][0],u[3][3]),m(-u[2][3],u[3][0])),-u[1][2]),p(y(m(u[2][0],u[3][2]),m(-u[2][2],u[3][0])),u[1][3]))),-u[0][1])),y(p(y(p(y(m(u[2][1],u[3][3]),m(-u[2][3],u[3][1])),u[1][0]),y(p(y(m(u[2][0],u[3][3]),m(-u[2][3],u[3][0])),-u[1][1]),p(y(m(u[2][0],u[3][1]),m(-u[2][1],u[3][0])),u[1][3]))),u[0][2]),p(y(p(y(m(u[2][1],u[3][2]),m(-u[2][2],u[3][1])),u[1][0]),y(p(y(m(u[2][0],u[3][2]),m(-u[2][2],u[3][0])),-u[1][1]),p(y(m(u[2][0],u[3][1]),m(-u[2][1],u[3][0])),u[1][2]))),-u[0][3]))))}}function f(y,p,m,w){return function(u){return w(y(y(p(y(y(p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][2]),y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),-u[2][3]),p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][4]))),u[1][1]),p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][1]),y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),-u[2][3]),p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),u[2][4]))),-u[1][2])),y(p(y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),u[2][1]),y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),-u[2][2]),p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][4]))),u[1][3]),p(y(p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][1]),y(p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),-u[2][2]),p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][3]))),-u[1][4]))),u[0][0]),p(y(y(p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][2]),y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),-u[2][3]),p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][4]))),u[1][0]),p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][3]),p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),u[2][4]))),-u[1][2])),y(p(y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][2]),p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),u[2][4]))),u[1][3]),p(y(p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][0]),y(p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),-u[2][2]),p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),u[2][3]))),-u[1][4]))),-u[0][1])),y(p(y(y(p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][1]),y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),-u[2][3]),p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),u[2][4]))),u[1][0]),p(y(p(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][3]),p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),u[2][4]))),-u[1][1])),y(p(y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][4]))),u[1][3]),p(y(p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][3]))),-u[1][4]))),u[0][2]),y(p(y(y(p(y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),u[2][1]),y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),-u[2][2]),p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][4]))),u[1][0]),p(y(p(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][2]),p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),u[2][4]))),-u[1][1])),y(p(y(p(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][4]))),u[1][2]),p(y(p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][2]))),-u[1][4]))),-u[0][3]),p(y(y(p(y(p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][1]),y(p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),-u[2][2]),p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][3]))),u[1][0]),p(y(p(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][0]),y(p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),-u[2][2]),p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),u[2][3]))),-u[1][1])),y(p(y(p(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][3]))),u[1][2]),p(y(p(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][0]),y(p(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),-u[2][1]),p(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][2]))),-u[1][3]))),u[0][4])))))}}function b(y){return(y===2?i:y===3?c:y===4?h:y===5?f:void 0)(r,n,o,a)}var v=[function(){return[0]},function(y){return[y[0][0]]}];function g(y,p,m,w,u,S,_,E){return function(L){switch(L.length){case 0:return y(L);case 1:return p(L);case 2:return m(L);case 3:return w(L);case 4:return u(L);case 5:return S(L)}var C=_[L.length];return C||(C=_[L.length]=E(L.length)),C(L)}}(function(){for(;v.length<6;)v.push(b(v.length));d.exports=g.apply(void 0,v.concat([v,b]));for(var y=0;y<v.length;++y)d.exports[y]=v[y]})()},9130:function(d,s,t){var o=t(9660),r=t(9662);d.exports=function(n,a){for(var i=o(n[0],a[0]),c=1;c<n.length;++c)i=r(i,o(n[c],a[c]));return i}},2227:function(d,s,t){var o=t(9660),r=t(9662),n=t(4078),a=t(8289);function i(p){return(p===3?c:p===4?h:p===5?f:b)(r,n,o,a)}function c(p,m,w,u){return function(S,_,E){var L=w(S[0],S[0]),C=u(L,_[0]),P=u(L,E[0]),I=w(_[0],_[0]),U=u(I,S[0]),z=u(I,E[0]),H=w(E[0],E[0]),F=u(H,S[0]),N=u(H,_[0]),B=p(m(N,z),m(U,C)),j=m(F,P),K=m(B,j);return K[K.length-1]}}function h(p,m,w,u){return function(S,_,E,L){var C=p(w(S[0],S[0]),w(S[1],S[1])),P=u(C,_[0]),I=u(C,E[0]),U=u(C,L[0]),z=p(w(_[0],_[0]),w(_[1],_[1])),H=u(z,S[0]),F=u(z,E[0]),N=u(z,L[0]),B=p(w(E[0],E[0]),w(E[1],E[1])),j=u(B,S[0]),K=u(B,_[0]),G=u(B,L[0]),V=p(w(L[0],L[0]),w(L[1],L[1])),W=u(V,S[0]),J=u(V,_[0]),X=u(V,E[0]),ee=p(p(u(m(X,G),_[1]),p(u(m(J,N),-E[1]),u(m(K,F),L[1]))),p(u(m(J,N),S[1]),p(u(m(W,U),-_[1]),u(m(H,P),L[1])))),re=p(p(u(m(X,G),S[1]),p(u(m(W,U),-E[1]),u(m(j,I),L[1]))),p(u(m(K,F),S[1]),p(u(m(j,I),-_[1]),u(m(H,P),E[1])))),ie=m(ee,re);return ie[ie.length-1]}}function f(p,m,w,u){return function(S,_,E,L,C){var P=p(w(S[0],S[0]),p(w(S[1],S[1]),w(S[2],S[2]))),I=u(P,_[0]),U=u(P,E[0]),z=u(P,L[0]),H=u(P,C[0]),F=p(w(_[0],_[0]),p(w(_[1],_[1]),w(_[2],_[2]))),N=u(F,S[0]),B=u(F,E[0]),j=u(F,L[0]),K=u(F,C[0]),G=p(w(E[0],E[0]),p(w(E[1],E[1]),w(E[2],E[2]))),V=u(G,S[0]),W=u(G,_[0]),J=u(G,L[0]),X=u(G,C[0]),ee=p(w(L[0],L[0]),p(w(L[1],L[1]),w(L[2],L[2]))),re=u(ee,S[0]),ie=u(ee,_[0]),se=u(ee,E[0]),fe=u(ee,C[0]),ye=p(w(C[0],C[0]),p(w(C[1],C[1]),w(C[2],C[2]))),ge=u(ye,S[0]),he=u(ye,_[0]),ve=u(ye,E[0]),Oe=u(ye,L[0]),xe=p(p(p(u(p(u(m(Oe,fe),E[1]),p(u(m(ve,X),-L[1]),u(m(se,J),C[1]))),_[2]),p(u(p(u(m(Oe,fe),_[1]),p(u(m(he,K),-L[1]),u(m(ie,j),C[1]))),-E[2]),u(p(u(m(ve,X),_[1]),p(u(m(he,K),-E[1]),u(m(W,B),C[1]))),L[2]))),p(u(p(u(m(se,J),_[1]),p(u(m(ie,j),-E[1]),u(m(W,B),L[1]))),-C[2]),p(u(p(u(m(Oe,fe),_[1]),p(u(m(he,K),-L[1]),u(m(ie,j),C[1]))),S[2]),u(p(u(m(Oe,fe),S[1]),p(u(m(ge,H),-L[1]),u(m(re,z),C[1]))),-_[2])))),p(p(u(p(u(m(he,K),S[1]),p(u(m(ge,H),-_[1]),u(m(N,I),C[1]))),L[2]),p(u(p(u(m(ie,j),S[1]),p(u(m(re,z),-_[1]),u(m(N,I),L[1]))),-C[2]),u(p(u(m(se,J),_[1]),p(u(m(ie,j),-E[1]),u(m(W,B),L[1]))),S[2]))),p(u(p(u(m(se,J),S[1]),p(u(m(re,z),-E[1]),u(m(V,U),L[1]))),-_[2]),p(u(p(u(m(ie,j),S[1]),p(u(m(re,z),-_[1]),u(m(N,I),L[1]))),E[2]),u(p(u(m(W,B),S[1]),p(u(m(V,U),-_[1]),u(m(N,I),E[1]))),-L[2]))))),ke=p(p(p(u(p(u(m(Oe,fe),E[1]),p(u(m(ve,X),-L[1]),u(m(se,J),C[1]))),S[2]),u(p(u(m(Oe,fe),S[1]),p(u(m(ge,H),-L[1]),u(m(re,z),C[1]))),-E[2])),p(u(p(u(m(ve,X),S[1]),p(u(m(ge,H),-E[1]),u(m(V,U),C[1]))),L[2]),u(p(u(m(se,J),S[1]),p(u(m(re,z),-E[1]),u(m(V,U),L[1]))),-C[2]))),p(p(u(p(u(m(ve,X),_[1]),p(u(m(he,K),-E[1]),u(m(W,B),C[1]))),S[2]),u(p(u(m(ve,X),S[1]),p(u(m(ge,H),-E[1]),u(m(V,U),C[1]))),-_[2])),p(u(p(u(m(he,K),S[1]),p(u(m(ge,H),-_[1]),u(m(N,I),C[1]))),E[2]),u(p(u(m(W,B),S[1]),p(u(m(V,U),-_[1]),u(m(N,I),E[1]))),-C[2])))),Me=m(xe,ke);return Me[Me.length-1]}}function b(p,m,w,u){return function(S,_,E,L,C,P){var I=p(p(w(S[0],S[0]),w(S[1],S[1])),p(w(S[2],S[2]),w(S[3],S[3]))),U=u(I,_[0]),z=u(I,E[0]),H=u(I,L[0]),F=u(I,C[0]),N=u(I,P[0]),B=p(p(w(_[0],_[0]),w(_[1],_[1])),p(w(_[2],_[2]),w(_[3],_[3]))),j=u(B,S[0]),K=u(B,E[0]),G=u(B,L[0]),V=u(B,C[0]),W=u(B,P[0]),J=p(p(w(E[0],E[0]),w(E[1],E[1])),p(w(E[2],E[2]),w(E[3],E[3]))),X=u(J,S[0]),ee=u(J,_[0]),re=u(J,L[0]),ie=u(J,C[0]),se=u(J,P[0]),fe=p(p(w(L[0],L[0]),w(L[1],L[1])),p(w(L[2],L[2]),w(L[3],L[3]))),ye=u(fe,S[0]),ge=u(fe,_[0]),he=u(fe,E[0]),ve=u(fe,C[0]),Oe=u(fe,P[0]),xe=p(p(w(C[0],C[0]),w(C[1],C[1])),p(w(C[2],C[2]),w(C[3],C[3]))),ke=u(xe,S[0]),Me=u(xe,_[0]),Te=u(xe,E[0]),Q=u(xe,L[0]),oe=u(xe,P[0]),ce=p(p(w(P[0],P[0]),w(P[1],P[1])),p(w(P[2],P[2]),w(P[3],P[3]))),me=u(ce,S[0]),Ae=u(ce,_[0]),Ie=u(ce,E[0]),Ce=u(ce,L[0]),Re=u(ce,C[0]),le=p(p(p(u(p(p(u(p(u(m(Re,oe),L[1]),p(u(m(Ce,Oe),-C[1]),u(m(Q,ve),P[1]))),E[2]),u(p(u(m(Re,oe),E[1]),p(u(m(Ie,se),-C[1]),u(m(Te,ie),P[1]))),-L[2])),p(u(p(u(m(Ce,Oe),E[1]),p(u(m(Ie,se),-L[1]),u(m(he,re),P[1]))),C[2]),u(p(u(m(Q,ve),E[1]),p(u(m(Te,ie),-L[1]),u(m(he,re),C[1]))),-P[2]))),_[3]),p(u(p(p(u(p(u(m(Re,oe),L[1]),p(u(m(Ce,Oe),-C[1]),u(m(Q,ve),P[1]))),_[2]),u(p(u(m(Re,oe),_[1]),p(u(m(Ae,W),-C[1]),u(m(Me,V),P[1]))),-L[2])),p(u(p(u(m(Ce,Oe),_[1]),p(u(m(Ae,W),-L[1]),u(m(ge,G),P[1]))),C[2]),u(p(u(m(Q,ve),_[1]),p(u(m(Me,V),-L[1]),u(m(ge,G),C[1]))),-P[2]))),-E[3]),u(p(p(u(p(u(m(Re,oe),E[1]),p(u(m(Ie,se),-C[1]),u(m(Te,ie),P[1]))),_[2]),u(p(u(m(Re,oe),_[1]),p(u(m(Ae,W),-C[1]),u(m(Me,V),P[1]))),-E[2])),p(u(p(u(m(Ie,se),_[1]),p(u(m(Ae,W),-E[1]),u(m(ee,K),P[1]))),C[2]),u(p(u(m(Te,ie),_[1]),p(u(m(Me,V),-E[1]),u(m(ee,K),C[1]))),-P[2]))),L[3]))),p(p(u(p(p(u(p(u(m(Ce,Oe),E[1]),p(u(m(Ie,se),-L[1]),u(m(he,re),P[1]))),_[2]),u(p(u(m(Ce,Oe),_[1]),p(u(m(Ae,W),-L[1]),u(m(ge,G),P[1]))),-E[2])),p(u(p(u(m(Ie,se),_[1]),p(u(m(Ae,W),-E[1]),u(m(ee,K),P[1]))),L[2]),u(p(u(m(he,re),_[1]),p(u(m(ge,G),-E[1]),u(m(ee,K),L[1]))),-P[2]))),-C[3]),u(p(p(u(p(u(m(Q,ve),E[1]),p(u(m(Te,ie),-L[1]),u(m(he,re),C[1]))),_[2]),u(p(u(m(Q,ve),_[1]),p(u(m(Me,V),-L[1]),u(m(ge,G),C[1]))),-E[2])),p(u(p(u(m(Te,ie),_[1]),p(u(m(Me,V),-E[1]),u(m(ee,K),C[1]))),L[2]),u(p(u(m(he,re),_[1]),p(u(m(ge,G),-E[1]),u(m(ee,K),L[1]))),-C[2]))),P[3])),p(u(p(p(u(p(u(m(Re,oe),L[1]),p(u(m(Ce,Oe),-C[1]),u(m(Q,ve),P[1]))),_[2]),u(p(u(m(Re,oe),_[1]),p(u(m(Ae,W),-C[1]),u(m(Me,V),P[1]))),-L[2])),p(u(p(u(m(Ce,Oe),_[1]),p(u(m(Ae,W),-L[1]),u(m(ge,G),P[1]))),C[2]),u(p(u(m(Q,ve),_[1]),p(u(m(Me,V),-L[1]),u(m(ge,G),C[1]))),-P[2]))),S[3]),u(p(p(u(p(u(m(Re,oe),L[1]),p(u(m(Ce,Oe),-C[1]),u(m(Q,ve),P[1]))),S[2]),u(p(u(m(Re,oe),S[1]),p(u(m(me,N),-C[1]),u(m(ke,F),P[1]))),-L[2])),p(u(p(u(m(Ce,Oe),S[1]),p(u(m(me,N),-L[1]),u(m(ye,H),P[1]))),C[2]),u(p(u(m(Q,ve),S[1]),p(u(m(ke,F),-L[1]),u(m(ye,H),C[1]))),-P[2]))),-_[3])))),p(p(p(u(p(p(u(p(u(m(Re,oe),_[1]),p(u(m(Ae,W),-C[1]),u(m(Me,V),P[1]))),S[2]),u(p(u(m(Re,oe),S[1]),p(u(m(me,N),-C[1]),u(m(ke,F),P[1]))),-_[2])),p(u(p(u(m(Ae,W),S[1]),p(u(m(me,N),-_[1]),u(m(j,U),P[1]))),C[2]),u(p(u(m(Me,V),S[1]),p(u(m(ke,F),-_[1]),u(m(j,U),C[1]))),-P[2]))),L[3]),u(p(p(u(p(u(m(Ce,Oe),_[1]),p(u(m(Ae,W),-L[1]),u(m(ge,G),P[1]))),S[2]),u(p(u(m(Ce,Oe),S[1]),p(u(m(me,N),-L[1]),u(m(ye,H),P[1]))),-_[2])),p(u(p(u(m(Ae,W),S[1]),p(u(m(me,N),-_[1]),u(m(j,U),P[1]))),L[2]),u(p(u(m(ge,G),S[1]),p(u(m(ye,H),-_[1]),u(m(j,U),L[1]))),-P[2]))),-C[3])),p(u(p(p(u(p(u(m(Q,ve),_[1]),p(u(m(Me,V),-L[1]),u(m(ge,G),C[1]))),S[2]),u(p(u(m(Q,ve),S[1]),p(u(m(ke,F),-L[1]),u(m(ye,H),C[1]))),-_[2])),p(u(p(u(m(Me,V),S[1]),p(u(m(ke,F),-_[1]),u(m(j,U),C[1]))),L[2]),u(p(u(m(ge,G),S[1]),p(u(m(ye,H),-_[1]),u(m(j,U),L[1]))),-C[2]))),P[3]),u(p(p(u(p(u(m(Ce,Oe),E[1]),p(u(m(Ie,se),-L[1]),u(m(he,re),P[1]))),_[2]),u(p(u(m(Ce,Oe),_[1]),p(u(m(Ae,W),-L[1]),u(m(ge,G),P[1]))),-E[2])),p(u(p(u(m(Ie,se),_[1]),p(u(m(Ae,W),-E[1]),u(m(ee,K),P[1]))),L[2]),u(p(u(m(he,re),_[1]),p(u(m(ge,G),-E[1]),u(m(ee,K),L[1]))),-P[2]))),S[3]))),p(p(u(p(p(u(p(u(m(Ce,Oe),E[1]),p(u(m(Ie,se),-L[1]),u(m(he,re),P[1]))),S[2]),u(p(u(m(Ce,Oe),S[1]),p(u(m(me,N),-L[1]),u(m(ye,H),P[1]))),-E[2])),p(u(p(u(m(Ie,se),S[1]),p(u(m(me,N),-E[1]),u(m(X,z),P[1]))),L[2]),u(p(u(m(he,re),S[1]),p(u(m(ye,H),-E[1]),u(m(X,z),L[1]))),-P[2]))),-_[3]),u(p(p(u(p(u(m(Ce,Oe),_[1]),p(u(m(Ae,W),-L[1]),u(m(ge,G),P[1]))),S[2]),u(p(u(m(Ce,Oe),S[1]),p(u(m(me,N),-L[1]),u(m(ye,H),P[1]))),-_[2])),p(u(p(u(m(Ae,W),S[1]),p(u(m(me,N),-_[1]),u(m(j,U),P[1]))),L[2]),u(p(u(m(ge,G),S[1]),p(u(m(ye,H),-_[1]),u(m(j,U),L[1]))),-P[2]))),E[3])),p(u(p(p(u(p(u(m(Ie,se),_[1]),p(u(m(Ae,W),-E[1]),u(m(ee,K),P[1]))),S[2]),u(p(u(m(Ie,se),S[1]),p(u(m(me,N),-E[1]),u(m(X,z),P[1]))),-_[2])),p(u(p(u(m(Ae,W),S[1]),p(u(m(me,N),-_[1]),u(m(j,U),P[1]))),E[2]),u(p(u(m(ee,K),S[1]),p(u(m(X,z),-_[1]),u(m(j,U),E[1]))),-P[2]))),-L[3]),u(p(p(u(p(u(m(he,re),_[1]),p(u(m(ge,G),-E[1]),u(m(ee,K),L[1]))),S[2]),u(p(u(m(he,re),S[1]),p(u(m(ye,H),-E[1]),u(m(X,z),L[1]))),-_[2])),p(u(p(u(m(ge,G),S[1]),p(u(m(ye,H),-_[1]),u(m(j,U),L[1]))),E[2]),u(p(u(m(ee,K),S[1]),p(u(m(X,z),-_[1]),u(m(j,U),E[1]))),-L[2]))),P[3]))))),de=p(p(p(u(p(p(u(p(u(m(Re,oe),L[1]),p(u(m(Ce,Oe),-C[1]),u(m(Q,ve),P[1]))),E[2]),u(p(u(m(Re,oe),E[1]),p(u(m(Ie,se),-C[1]),u(m(Te,ie),P[1]))),-L[2])),p(u(p(u(m(Ce,Oe),E[1]),p(u(m(Ie,se),-L[1]),u(m(he,re),P[1]))),C[2]),u(p(u(m(Q,ve),E[1]),p(u(m(Te,ie),-L[1]),u(m(he,re),C[1]))),-P[2]))),S[3]),p(u(p(p(u(p(u(m(Re,oe),L[1]),p(u(m(Ce,Oe),-C[1]),u(m(Q,ve),P[1]))),S[2]),u(p(u(m(Re,oe),S[1]),p(u(m(me,N),-C[1]),u(m(ke,F),P[1]))),-L[2])),p(u(p(u(m(Ce,Oe),S[1]),p(u(m(me,N),-L[1]),u(m(ye,H),P[1]))),C[2]),u(p(u(m(Q,ve),S[1]),p(u(m(ke,F),-L[1]),u(m(ye,H),C[1]))),-P[2]))),-E[3]),u(p(p(u(p(u(m(Re,oe),E[1]),p(u(m(Ie,se),-C[1]),u(m(Te,ie),P[1]))),S[2]),u(p(u(m(Re,oe),S[1]),p(u(m(me,N),-C[1]),u(m(ke,F),P[1]))),-E[2])),p(u(p(u(m(Ie,se),S[1]),p(u(m(me,N),-E[1]),u(m(X,z),P[1]))),C[2]),u(p(u(m(Te,ie),S[1]),p(u(m(ke,F),-E[1]),u(m(X,z),C[1]))),-P[2]))),L[3]))),p(p(u(p(p(u(p(u(m(Ce,Oe),E[1]),p(u(m(Ie,se),-L[1]),u(m(he,re),P[1]))),S[2]),u(p(u(m(Ce,Oe),S[1]),p(u(m(me,N),-L[1]),u(m(ye,H),P[1]))),-E[2])),p(u(p(u(m(Ie,se),S[1]),p(u(m(me,N),-E[1]),u(m(X,z),P[1]))),L[2]),u(p(u(m(he,re),S[1]),p(u(m(ye,H),-E[1]),u(m(X,z),L[1]))),-P[2]))),-C[3]),u(p(p(u(p(u(m(Q,ve),E[1]),p(u(m(Te,ie),-L[1]),u(m(he,re),C[1]))),S[2]),u(p(u(m(Q,ve),S[1]),p(u(m(ke,F),-L[1]),u(m(ye,H),C[1]))),-E[2])),p(u(p(u(m(Te,ie),S[1]),p(u(m(ke,F),-E[1]),u(m(X,z),C[1]))),L[2]),u(p(u(m(he,re),S[1]),p(u(m(ye,H),-E[1]),u(m(X,z),L[1]))),-C[2]))),P[3])),p(u(p(p(u(p(u(m(Re,oe),E[1]),p(u(m(Ie,se),-C[1]),u(m(Te,ie),P[1]))),_[2]),u(p(u(m(Re,oe),_[1]),p(u(m(Ae,W),-C[1]),u(m(Me,V),P[1]))),-E[2])),p(u(p(u(m(Ie,se),_[1]),p(u(m(Ae,W),-E[1]),u(m(ee,K),P[1]))),C[2]),u(p(u(m(Te,ie),_[1]),p(u(m(Me,V),-E[1]),u(m(ee,K),C[1]))),-P[2]))),S[3]),u(p(p(u(p(u(m(Re,oe),E[1]),p(u(m(Ie,se),-C[1]),u(m(Te,ie),P[1]))),S[2]),u(p(u(m(Re,oe),S[1]),p(u(m(me,N),-C[1]),u(m(ke,F),P[1]))),-E[2])),p(u(p(u(m(Ie,se),S[1]),p(u(m(me,N),-E[1]),u(m(X,z),P[1]))),C[2]),u(p(u(m(Te,ie),S[1]),p(u(m(ke,F),-E[1]),u(m(X,z),C[1]))),-P[2]))),-_[3])))),p(p(p(u(p(p(u(p(u(m(Re,oe),_[1]),p(u(m(Ae,W),-C[1]),u(m(Me,V),P[1]))),S[2]),u(p(u(m(Re,oe),S[1]),p(u(m(me,N),-C[1]),u(m(ke,F),P[1]))),-_[2])),p(u(p(u(m(Ae,W),S[1]),p(u(m(me,N),-_[1]),u(m(j,U),P[1]))),C[2]),u(p(u(m(Me,V),S[1]),p(u(m(ke,F),-_[1]),u(m(j,U),C[1]))),-P[2]))),E[3]),u(p(p(u(p(u(m(Ie,se),_[1]),p(u(m(Ae,W),-E[1]),u(m(ee,K),P[1]))),S[2]),u(p(u(m(Ie,se),S[1]),p(u(m(me,N),-E[1]),u(m(X,z),P[1]))),-_[2])),p(u(p(u(m(Ae,W),S[1]),p(u(m(me,N),-_[1]),u(m(j,U),P[1]))),E[2]),u(p(u(m(ee,K),S[1]),p(u(m(X,z),-_[1]),u(m(j,U),E[1]))),-P[2]))),-C[3])),p(u(p(p(u(p(u(m(Te,ie),_[1]),p(u(m(Me,V),-E[1]),u(m(ee,K),C[1]))),S[2]),u(p(u(m(Te,ie),S[1]),p(u(m(ke,F),-E[1]),u(m(X,z),C[1]))),-_[2])),p(u(p(u(m(Me,V),S[1]),p(u(m(ke,F),-_[1]),u(m(j,U),C[1]))),E[2]),u(p(u(m(ee,K),S[1]),p(u(m(X,z),-_[1]),u(m(j,U),E[1]))),-C[2]))),P[3]),u(p(p(u(p(u(m(Q,ve),E[1]),p(u(m(Te,ie),-L[1]),u(m(he,re),C[1]))),_[2]),u(p(u(m(Q,ve),_[1]),p(u(m(Me,V),-L[1]),u(m(ge,G),C[1]))),-E[2])),p(u(p(u(m(Te,ie),_[1]),p(u(m(Me,V),-E[1]),u(m(ee,K),C[1]))),L[2]),u(p(u(m(he,re),_[1]),p(u(m(ge,G),-E[1]),u(m(ee,K),L[1]))),-C[2]))),S[3]))),p(p(u(p(p(u(p(u(m(Q,ve),E[1]),p(u(m(Te,ie),-L[1]),u(m(he,re),C[1]))),S[2]),u(p(u(m(Q,ve),S[1]),p(u(m(ke,F),-L[1]),u(m(ye,H),C[1]))),-E[2])),p(u(p(u(m(Te,ie),S[1]),p(u(m(ke,F),-E[1]),u(m(X,z),C[1]))),L[2]),u(p(u(m(he,re),S[1]),p(u(m(ye,H),-E[1]),u(m(X,z),L[1]))),-C[2]))),-_[3]),u(p(p(u(p(u(m(Q,ve),_[1]),p(u(m(Me,V),-L[1]),u(m(ge,G),C[1]))),S[2]),u(p(u(m(Q,ve),S[1]),p(u(m(ke,F),-L[1]),u(m(ye,H),C[1]))),-_[2])),p(u(p(u(m(Me,V),S[1]),p(u(m(ke,F),-_[1]),u(m(j,U),C[1]))),L[2]),u(p(u(m(ge,G),S[1]),p(u(m(ye,H),-_[1]),u(m(j,U),L[1]))),-C[2]))),E[3])),p(u(p(p(u(p(u(m(Te,ie),_[1]),p(u(m(Me,V),-E[1]),u(m(ee,K),C[1]))),S[2]),u(p(u(m(Te,ie),S[1]),p(u(m(ke,F),-E[1]),u(m(X,z),C[1]))),-_[2])),p(u(p(u(m(Me,V),S[1]),p(u(m(ke,F),-_[1]),u(m(j,U),C[1]))),E[2]),u(p(u(m(ee,K),S[1]),p(u(m(X,z),-_[1]),u(m(j,U),E[1]))),-C[2]))),-L[3]),u(p(p(u(p(u(m(he,re),_[1]),p(u(m(ge,G),-E[1]),u(m(ee,K),L[1]))),S[2]),u(p(u(m(he,re),S[1]),p(u(m(ye,H),-E[1]),u(m(X,z),L[1]))),-_[2])),p(u(p(u(m(ge,G),S[1]),p(u(m(ye,H),-_[1]),u(m(j,U),L[1]))),E[2]),u(p(u(m(ee,K),S[1]),p(u(m(X,z),-_[1]),u(m(j,U),E[1]))),-L[2]))),C[3]))))),_e=m(le,de);return _e[_e.length-1]}}var v=[function(){return 0},function(){return 0},function(){return 0}];function g(p){var m=v[p.length];return m||(m=v[p.length]=i(p.length)),m.apply(void 0,p)}function y(p,m,w,u,S,_,E,L){return function(C,P,I,U,z,H){switch(arguments.length){case 0:case 1:return 0;case 2:return u(C,P);case 3:return S(C,P,I);case 4:return _(C,P,I,U);case 5:return E(C,P,I,U,z);case 6:return L(C,P,I,U,z,H)}for(var F=new Array(arguments.length),N=0;N<arguments.length;++N)F[N]=arguments[N];return p(F)}}(function(){for(;v.length<=6;)v.push(i(v.length));d.exports=y.apply(void 0,[g].concat(v));for(var p=0;p<=6;++p)d.exports[p]=v[p]})()},6606:function(d,s,t){var o=t(8167);function r(v){return(v===2?n:v===3?a:v===4?i:v===5?c:h)(v<6?o[v]:o)}function n(v){return function(g,y){return[v([[+y[0],+g[0][1]],[+y[1],+g[1][1]]]),v([[+g[0][0],+y[0]],[+g[1][0],+y[1]]]),v(g)]}}function a(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2]],[+y[1],+g[1][1],+g[1][2]],[+y[2],+g[2][1],+g[2][2]]]),v([[+g[0][0],+y[0],+g[0][2]],[+g[1][0],+y[1],+g[1][2]],[+g[2][0],+y[2],+g[2][2]]]),v([[+g[0][0],+g[0][1],+y[0]],[+g[1][0],+g[1][1],+y[1]],[+g[2][0],+g[2][1],+y[2]]]),v(g)]}}function i(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2],+g[0][3]],[+y[1],+g[1][1],+g[1][2],+g[1][3]],[+y[2],+g[2][1],+g[2][2],+g[2][3]],[+y[3],+g[3][1],+g[3][2],+g[3][3]]]),v([[+g[0][0],+y[0],+g[0][2],+g[0][3]],[+g[1][0],+y[1],+g[1][2],+g[1][3]],[+g[2][0],+y[2],+g[2][2],+g[2][3]],[+g[3][0],+y[3],+g[3][2],+g[3][3]]]),v([[+g[0][0],+g[0][1],+y[0],+g[0][3]],[+g[1][0],+g[1][1],+y[1],+g[1][3]],[+g[2][0],+g[2][1],+y[2],+g[2][3]],[+g[3][0],+g[3][1],+y[3],+g[3][3]]]),v([[+g[0][0],+g[0][1],+g[0][2],+y[0]],[+g[1][0],+g[1][1],+g[1][2],+y[1]],[+g[2][0],+g[2][1],+g[2][2],+y[2]],[+g[3][0],+g[3][1],+g[3][2],+y[3]]]),v(g)]}}function c(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4]],[+y[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4]],[+y[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4]],[+y[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4]],[+y[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4]]]),v([[+g[0][0],+y[0],+g[0][2],+g[0][3],+g[0][4]],[+g[1][0],+y[1],+g[1][2],+g[1][3],+g[1][4]],[+g[2][0],+y[2],+g[2][2],+g[2][3],+g[2][4]],[+g[3][0],+y[3],+g[3][2],+g[3][3],+g[3][4]],[+g[4][0],+y[4],+g[4][2],+g[4][3],+g[4][4]]]),v([[+g[0][0],+g[0][1],+y[0],+g[0][3],+g[0][4]],[+g[1][0],+g[1][1],+y[1],+g[1][3],+g[1][4]],[+g[2][0],+g[2][1],+y[2],+g[2][3],+g[2][4]],[+g[3][0],+g[3][1],+y[3],+g[3][3],+g[3][4]],[+g[4][0],+g[4][1],+y[4],+g[4][3],+g[4][4]]]),v([[+g[0][0],+g[0][1],+g[0][2],+y[0],+g[0][4]],[+g[1][0],+g[1][1],+g[1][2],+y[1],+g[1][4]],[+g[2][0],+g[2][1],+g[2][2],+y[2],+g[2][4]],[+g[3][0],+g[3][1],+g[3][2],+y[3],+g[3][4]],[+g[4][0],+g[4][1],+g[4][2],+y[4],+g[4][4]]]),v([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+y[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+y[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+y[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+y[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+y[4]]]),v(g)]}}function h(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+y[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+y[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+y[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+y[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+y[5],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),v([[+g[0][0],+y[0],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+y[1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+y[2],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+y[3],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+y[4],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+y[5],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),v([[+g[0][0],+g[0][1],+y[0],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+y[1],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+y[2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+y[3],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+y[4],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+y[5],+g[5][3],+g[5][4],+g[5][5]]]),v([[+g[0][0],+g[0][1],+g[0][2],+y[0],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+y[1],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+y[2],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+y[3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+y[4],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+y[5],+g[5][4],+g[5][5]]]),v([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+y[0],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+y[1],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+y[2],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+y[3],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+y[4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+y[5],+g[5][5]]]),v([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+y[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+y[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+y[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+y[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+y[4]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+y[5]]]),v(g)]}}var f=[function(){return[[0]]},function(v,g){return[[g[0]],[v[0][0]]]}];function b(v,g,y,p,m,w,u,S){return function(_,E){switch(_.length){case 0:return v(_,E);case 1:return g(_,E);case 2:return y(_,E);case 3:return p(_,E);case 4:return m(_,E);case 5:return w(_,E)}var L=u[_.length];return L||(L=u[_.length]=S(_.length)),L(_,E)}}(function(){for(;f.length<6;)f.push(r(f.length));d.exports=b.apply(void 0,f.concat([f,r]));for(var v=0;v<6;++v)d.exports[v]=f[v]})()},417:function(d,s,t){var o=t(9660),r=t(9662),n=t(8289),a=t(4078);function i(m,w,u,S){return function(_,E,L){var C=m(m(w(E[1],L[0]),w(-L[1],E[0])),m(w(_[1],E[0]),w(-E[1],_[0]))),P=m(w(_[1],L[0]),w(-L[1],_[0])),I=S(C,P);return I[I.length-1]}}function c(m,w,u,S){return function(_,E,L,C){var P=m(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),E[2]),m(u(m(w(E[1],C[0]),w(-C[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),C[2]))),m(u(m(w(E[1],C[0]),w(-C[1],E[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),C[2])))),I=m(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),C[2]))),m(u(m(w(E[1],L[0]),w(-L[1],E[0])),_[2]),m(u(m(w(_[1],L[0]),w(-L[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),L[2])))),U=S(P,I);return U[U.length-1]}}function h(m,w,u,S){return function(_,E,L,C,P){var I=m(m(m(u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),L[2]),m(u(m(w(L[1],P[0]),w(-P[1],L[0])),-C[2]),u(m(w(L[1],C[0]),w(-C[1],L[0])),P[2]))),E[3]),m(u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),E[2]),m(u(m(w(E[1],P[0]),w(-P[1],E[0])),-C[2]),u(m(w(E[1],C[0]),w(-C[1],E[0])),P[2]))),-L[3]),u(m(u(m(w(L[1],P[0]),w(-P[1],L[0])),E[2]),m(u(m(w(E[1],P[0]),w(-P[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),P[2]))),C[3]))),m(u(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),E[2]),m(u(m(w(E[1],C[0]),w(-C[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),C[2]))),-P[3]),m(u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),E[2]),m(u(m(w(E[1],P[0]),w(-P[1],E[0])),-C[2]),u(m(w(E[1],C[0]),w(-C[1],E[0])),P[2]))),_[3]),u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-C[2]),u(m(w(_[1],C[0]),w(-C[1],_[0])),P[2]))),-E[3])))),m(m(u(m(u(m(w(E[1],P[0]),w(-P[1],E[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),P[2]))),C[3]),m(u(m(u(m(w(E[1],C[0]),w(-C[1],E[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),C[2]))),-P[3]),u(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),E[2]),m(u(m(w(E[1],C[0]),w(-C[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),C[2]))),_[3]))),m(u(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),C[2]))),-E[3]),m(u(m(u(m(w(E[1],C[0]),w(-C[1],E[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),C[2]))),L[3]),u(m(u(m(w(E[1],L[0]),w(-L[1],E[0])),_[2]),m(u(m(w(_[1],L[0]),w(-L[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),L[2]))),-C[3]))))),U=m(m(m(u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),L[2]),m(u(m(w(L[1],P[0]),w(-P[1],L[0])),-C[2]),u(m(w(L[1],C[0]),w(-C[1],L[0])),P[2]))),_[3]),u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-C[2]),u(m(w(_[1],C[0]),w(-C[1],_[0])),P[2]))),-L[3])),m(u(m(u(m(w(L[1],P[0]),w(-P[1],L[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),P[2]))),C[3]),u(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),C[2]))),-P[3]))),m(m(u(m(u(m(w(L[1],P[0]),w(-P[1],L[0])),E[2]),m(u(m(w(E[1],P[0]),w(-P[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),P[2]))),_[3]),u(m(u(m(w(L[1],P[0]),w(-P[1],L[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),P[2]))),-E[3])),m(u(m(u(m(w(E[1],P[0]),w(-P[1],E[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),P[2]))),L[3]),u(m(u(m(w(E[1],L[0]),w(-L[1],E[0])),_[2]),m(u(m(w(_[1],L[0]),w(-L[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),L[2]))),-P[3])))),z=S(I,U);return z[z.length-1]}}function f(m){return(m===3?i:m===4?c:h)(r,o,n,a)}var b=f(3),v=f(4),g=[function(){return 0},function(){return 0},function(m,w){return w[0]-m[0]},function(m,w,u){var S,_=(m[1]-u[1])*(w[0]-u[0]),E=(m[0]-u[0])*(w[1]-u[1]),L=_-E;if(_>0){if(E<=0)return L;S=_+E}else{if(!(_<0)||E>=0)return L;S=-(_+E)}var C=33306690738754716e-32*S;return L>=C||L<=-C?L:b(m,w,u)},function(m,w,u,S){var _=m[0]-S[0],E=w[0]-S[0],L=u[0]-S[0],C=m[1]-S[1],P=w[1]-S[1],I=u[1]-S[1],U=m[2]-S[2],z=w[2]-S[2],H=u[2]-S[2],F=E*I,N=L*P,B=L*C,j=_*I,K=_*P,G=E*C,V=U*(F-N)+z*(B-j)+H*(K-G),W=7771561172376103e-31*((Math.abs(F)+Math.abs(N))*Math.abs(U)+(Math.abs(B)+Math.abs(j))*Math.abs(z)+(Math.abs(K)+Math.abs(G))*Math.abs(H));return V>W||-V>W?V:v(m,w,u,S)}];function y(m){var w=g[m.length];return w||(w=g[m.length]=f(m.length)),w.apply(void 0,m)}function p(m,w,u,S,_,E,L){return function(C,P,I,U,z){switch(arguments.length){case 0:case 1:return 0;case 2:return S(C,P);case 3:return _(C,P,I);case 4:return E(C,P,I,U);case 5:return L(C,P,I,U,z)}for(var H=new Array(arguments.length),F=0;F<arguments.length;++F)H[F]=arguments[F];return m(H)}}(function(){for(;g.length<=5;)g.push(f(g.length));d.exports=p.apply(void 0,[y].concat(g));for(var m=0;m<=5;++m)d.exports[m]=g[m]})()},2019:function(d,s,t){var o=t(9662),r=t(8289);d.exports=function(n,a){if(n.length===1)return r(a,n[0]);if(a.length===1)return r(n,a[0]);if(n.length===0||a.length===0)return[0];var i=[0];if(n.length<a.length)for(var c=0;c<n.length;++c)i=o(i,r(a,n[c]));else for(c=0;c<a.length;++c)i=o(i,r(n,a[c]));return i}},8289:function(d,s,t){var o=t(9660),r=t(87);d.exports=function(n,a){var i=n.length;if(i===1){var c=o(n[0],a);return c[0]?c:[c[1]]}var h=new Array(2*i),f=[.1,.1],b=[.1,.1],v=0;o(n[0],a,f),f[0]&&(h[v++]=f[0]);for(var g=1;g<i;++g){o(n[g],a,b);var y=f[1];r(y,b[0],f),f[0]&&(h[v++]=f[0]);var p=b[1],m=f[1],w=p+m,u=m-(w-p);f[1]=w,u&&(h[v++]=u)}return f[1]&&(h[v++]=f[1]),v===0&&(h[v++]=0),h.length=v,h}},4434:function(d,s,t){d.exports=function(r,n,a,i){var c=o(r,a,i),h=o(n,a,i);if(c>0&&h>0||c<0&&h<0)return!1;var f=o(a,r,n),b=o(i,r,n);return!(f>0&&b>0||f<0&&b<0)&&(c!==0||h!==0||f!==0||b!==0||function(v,g,y,p){for(var m=0;m<2;++m){var w=v[m],u=g[m],S=Math.min(w,u),_=Math.max(w,u),E=y[m],L=p[m],C=Math.min(E,L);if(Math.max(E,L)<S||_<C)return!1}return!0}(r,n,a,i))};var o=t(417)[3]},4078:function(d){d.exports=function(s,t){var o=0|s.length,r=0|t.length;if(o===1&&r===1)return function(C,P){var I=C+P,U=I-C,z=C-(I-U)+(P-U);return z?[z,I]:[I]}(s[0],-t[0]);var n,a,i=new Array(o+r),c=0,h=0,f=0,b=Math.abs,v=s[h],g=b(v),y=-t[f],p=b(y);g<p?(a=v,(h+=1)<o&&(g=b(v=s[h]))):(a=y,(f+=1)<r&&(p=b(y=-t[f]))),h<o&&g<p||f>=r?(n=v,(h+=1)<o&&(g=b(v=s[h]))):(n=y,(f+=1)<r&&(p=b(y=-t[f])));for(var m,w,u=n+a,S=u-n,_=a-S,E=_,L=u;h<o&&f<r;)g<p?(n=v,(h+=1)<o&&(g=b(v=s[h]))):(n=y,(f+=1)<r&&(p=b(y=-t[f]))),(_=(a=E)-(S=(u=n+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m;for(;h<o;)(_=(a=E)-(S=(u=(n=v)+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m,(h+=1)<o&&(v=s[h]);for(;f<r;)(_=(a=E)-(S=(u=(n=y)+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m,(f+=1)<r&&(y=-t[f]);return E&&(i[c++]=E),L&&(i[c++]=L),c||(i[c++]=0),i.length=c,i}},9662:function(d){d.exports=function(s,t){var o=0|s.length,r=0|t.length;if(o===1&&r===1)return function(C,P){var I=C+P,U=I-C,z=C-(I-U)+(P-U);return z?[z,I]:[I]}(s[0],t[0]);var n,a,i=new Array(o+r),c=0,h=0,f=0,b=Math.abs,v=s[h],g=b(v),y=t[f],p=b(y);g<p?(a=v,(h+=1)<o&&(g=b(v=s[h]))):(a=y,(f+=1)<r&&(p=b(y=t[f]))),h<o&&g<p||f>=r?(n=v,(h+=1)<o&&(g=b(v=s[h]))):(n=y,(f+=1)<r&&(p=b(y=t[f])));for(var m,w,u=n+a,S=u-n,_=a-S,E=_,L=u;h<o&&f<r;)g<p?(n=v,(h+=1)<o&&(g=b(v=s[h]))):(n=y,(f+=1)<r&&(p=b(y=t[f]))),(_=(a=E)-(S=(u=n+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m;for(;h<o;)(_=(a=E)-(S=(u=(n=v)+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m,(h+=1)<o&&(v=s[h]);for(;f<r;)(_=(a=E)-(S=(u=(n=y)+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m,(f+=1)<r&&(y=t[f]);return E&&(i[c++]=E),L&&(i[c++]=L),c||(i[c++]=0),i.length=c,i}},8691:function(d,s,t){d.exports=function(n){return r(o(n))};var o=t(2692),r=t(7037)},7212:function(d,s,t){d.exports=function(i,c,h,f){if(h=h||0,f===void 0&&(f=function(u){for(var S=u.length,_=0,E=0;E<S;++E)_=0|Math.max(_,u[E].length);return _-1}(i)),i.length===0||f<1)return{cells:[],vertexIds:[],vertexWeights:[]};var b=function(u,S){for(var _=u.length,E=r.mallocUint8(_),L=0;L<_;++L)E[L]=u[L]<S|0;return E}(c,+h),v=function(u,S){for(var _=u.length,E=S*(S+1)/2*_|0,L=r.mallocUint32(2*E),C=0,P=0;P<_;++P)for(var I=u[P],U=(S=I.length,0);U<S;++U)for(var z=0;z<U;++z){var H=I[z],F=I[U];L[C++]=0|Math.min(H,F),L[C++]=0|Math.max(H,F)}n(o(L,[C/2|0,2]));var N=2;for(P=2;P<C;P+=2)L[P-2]===L[P]&&L[P-1]===L[P+1]||(L[N++]=L[P],L[N++]=L[P+1]);return o(L,[N/2|0,2])}(i,f),g=function(u,S,_,E){for(var L=u.data,C=u.shape[0],P=r.mallocDouble(C),I=0,U=0;U<C;++U){var z=L[2*U],H=L[2*U+1];if(_[z]!==_[H]){var F=S[z],N=S[H];L[2*I]=z,L[2*I+1]=H,P[I++]=(N-E)/(N-F)}}return u.shape[0]=I,o(P,[I])}(v,c,b,+h),y=function(u,S){var _=r.mallocInt32(2*S),E=u.shape[0],L=u.data;_[0]=0;for(var C=0,P=0;P<E;++P){var I=L[2*P];if(I!==C){for(_[2*C+1]=P;++C<I;)_[2*C]=P,_[2*C+1]=P;_[2*C]=P}}for(_[2*C+1]=E;++C<S;)_[2*C]=_[2*C+1]=E;return _}(v,0|c.length),p=a(f)(i,v.data,y,b),m=function(u){for(var S=0|u.shape[0],_=u.data,E=new Array(S),L=0;L<S;++L)E[L]=[_[2*L],_[2*L+1]];return E}(v),w=[].slice.call(g.data,0,g.shape[0]);return r.free(b),r.free(v.data),r.free(g.data),r.free(y),{cells:p,vertexIds:m,vertexWeights:w}};var o=t(5050),r=t(5306),n=t(8729),a=t(1168)},1168:function(d){d.exports=function(t){return s[t]()};var s=[function(){return function(t,o,r,n){for(var a=t.length,i=0;i<a;++i)t[i].length;return[]}},function(){function t(o,r,n,a){for(var i=0|Math.min(n,a),c=0|Math.max(n,a),h=o[2*i],f=o[2*i+1];h<f;){var b=h+f>>1,v=r[2*b+1];if(v===c)return b;c<v?f=b:h=b+1}return h}return function(o,r,n,a){for(var i=o.length,c=[],h=0;h<i;++h){var f=o[h];if(f.length===2){var b=(a[f[0]]<<0)+(a[f[1]]<<1);if(b===0||b===3)continue;switch(b){case 0:case 3:break;case 1:c.push([t(n,r,f[0],f[1])]);break;case 2:c.push([t(n,r,f[1],f[0])])}}}return c}},function(){function t(o,r,n,a){for(var i=0|Math.min(n,a),c=0|Math.max(n,a),h=o[2*i],f=o[2*i+1];h<f;){var b=h+f>>1,v=r[2*b+1];if(v===c)return b;c<v?f=b:h=b+1}return h}return function(o,r,n,a){for(var i=o.length,c=[],h=0;h<i;++h){var f=o[h],b=f.length;if(b===3){if((v=(a[f[0]]<<0)+(a[f[1]]<<1)+(a[f[2]]<<2))==0||v===7)continue;switch(v){case 0:case 7:break;case 1:c.push([t(n,r,f[0],f[2]),t(n,r,f[0],f[1])]);break;case 2:c.push([t(n,r,f[1],f[0]),t(n,r,f[1],f[2])]);break;case 3:c.push([t(n,r,f[0],f[2]),t(n,r,f[1],f[2])]);break;case 4:c.push([t(n,r,f[2],f[1]),t(n,r,f[2],f[0])]);break;case 5:c.push([t(n,r,f[2],f[1]),t(n,r,f[0],f[1])]);break;case 6:c.push([t(n,r,f[1],f[0]),t(n,r,f[2],f[0])])}}else if(b===2){var v;if((v=(a[f[0]]<<0)+(a[f[1]]<<1))==0||v===3)continue;switch(v){case 0:case 3:break;case 1:c.push([t(n,r,f[0],f[1])]);break;case 2:c.push([t(n,r,f[1],f[0])])}}}return c}},function(){function t(o,r,n,a){for(var i=0|Math.min(n,a),c=0|Math.max(n,a),h=o[2*i],f=o[2*i+1];h<f;){var b=h+f>>1,v=r[2*b+1];if(v===c)return b;c<v?f=b:h=b+1}return h}return function(o,r,n,a){for(var i=o.length,c=[],h=0;h<i;++h){var f=o[h],b=f.length;if(b===4){if((v=(a[f[0]]<<0)+(a[f[1]]<<1)+(a[f[2]]<<2)+(a[f[3]]<<3))==0||v===15)continue;switch(v){case 0:case 15:break;case 1:c.push([t(n,r,f[0],f[1]),t(n,r,f[0],f[2]),t(n,r,f[0],f[3])]);break;case 2:c.push([t(n,r,f[1],f[2]),t(n,r,f[1],f[0]),t(n,r,f[1],f[3])]);break;case 3:c.push([t(n,r,f[1],f[2]),t(n,r,f[0],f[2]),t(n,r,f[0],f[3])],[t(n,r,f[1],f[3]),t(n,r,f[1],f[2]),t(n,r,f[0],f[3])]);break;case 4:c.push([t(n,r,f[2],f[0]),t(n,r,f[2],f[1]),t(n,r,f[2],f[3])]);break;case 5:c.push([t(n,r,f[0],f[1]),t(n,r,f[2],f[1]),t(n,r,f[0],f[3])],[t(n,r,f[2],f[1]),t(n,r,f[2],f[3]),t(n,r,f[0],f[3])]);break;case 6:c.push([t(n,r,f[2],f[0]),t(n,r,f[1],f[0]),t(n,r,f[1],f[3])],[t(n,r,f[2],f[3]),t(n,r,f[2],f[0]),t(n,r,f[1],f[3])]);break;case 7:c.push([t(n,r,f[0],f[3]),t(n,r,f[1],f[3]),t(n,r,f[2],f[3])]);break;case 8:c.push([t(n,r,f[3],f[1]),t(n,r,f[3],f[0]),t(n,r,f[3],f[2])]);break;case 9:c.push([t(n,r,f[3],f[1]),t(n,r,f[0],f[1]),t(n,r,f[0],f[2])],[t(n,r,f[3],f[2]),t(n,r,f[3],f[1]),t(n,r,f[0],f[2])]);break;case 10:c.push([t(n,r,f[1],f[0]),t(n,r,f[3],f[0]),t(n,r,f[1],f[2])],[t(n,r,f[3],f[0]),t(n,r,f[3],f[2]),t(n,r,f[1],f[2])]);break;case 11:c.push([t(n,r,f[1],f[2]),t(n,r,f[0],f[2]),t(n,r,f[3],f[2])]);break;case 12:c.push([t(n,r,f[3],f[0]),t(n,r,f[2],f[0]),t(n,r,f[2],f[1])],[t(n,r,f[3],f[1]),t(n,r,f[3],f[0]),t(n,r,f[2],f[1])]);break;case 13:c.push([t(n,r,f[0],f[1]),t(n,r,f[2],f[1]),t(n,r,f[3],f[1])]);break;case 14:c.push([t(n,r,f[2],f[0]),t(n,r,f[1],f[0]),t(n,r,f[3],f[0])])}}else if(b===3){if((v=(a[f[0]]<<0)+(a[f[1]]<<1)+(a[f[2]]<<2))==0||v===7)continue;switch(v){case 0:case 7:break;case 1:c.push([t(n,r,f[0],f[2]),t(n,r,f[0],f[1])]);break;case 2:c.push([t(n,r,f[1],f[0]),t(n,r,f[1],f[2])]);break;case 3:c.push([t(n,r,f[0],f[2]),t(n,r,f[1],f[2])]);break;case 4:c.push([t(n,r,f[2],f[1]),t(n,r,f[2],f[0])]);break;case 5:c.push([t(n,r,f[2],f[1]),t(n,r,f[0],f[1])]);break;case 6:c.push([t(n,r,f[1],f[0]),t(n,r,f[2],f[0])])}}else if(b===2){var v;if((v=(a[f[0]]<<0)+(a[f[1]]<<1))==0||v===3)continue;switch(v){case 0:case 3:break;case 1:c.push([t(n,r,f[0],f[1])]);break;case 2:c.push([t(n,r,f[1],f[0])])}}}return c}}]},8211:function(d,s,t){t(2288),t(1731),s.H=function(o,r){var n=o.length,a=o.length-r.length,i=Math.min;if(a)return a;switch(n){case 0:return 0;case 1:return o[0]-r[0];case 2:return(f=o[0]+o[1]-r[0]-r[1])||i(o[0],o[1])-i(r[0],r[1]);case 3:var c=o[0]+o[1],h=r[0]+r[1];if(f=c+o[2]-(h+r[2]))return f;var f,b=i(o[0],o[1]),v=i(r[0],r[1]);return(f=i(b,o[2])-i(v,r[2]))||i(b+o[2],c)-i(v+r[2],h);default:var g=o.slice(0);g.sort();var y=r.slice(0);y.sort();for(var p=0;p<n;++p)if(a=g[p]-y[p])return a;return 0}}},9392:function(d,s){function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var o=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,i=n,c=7;for(a>>>=1;a;a>>>=1)i<<=1,i|=1&a,--c;r[n]=i<<c&255}})(o),s.reverse=function(r){return o[255&r]<<24|o[r>>>8&255]<<16|o[r>>>16&255]<<8|o[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},6656:function(d,s,t){var o=t(9392),r=t(9521);function n(v,g){var y=v.length,p=v.length-g.length,m=Math.min;if(p)return p;switch(y){case 0:return 0;case 1:return v[0]-g[0];case 2:return(S=v[0]+v[1]-g[0]-g[1])||m(v[0],v[1])-m(g[0],g[1]);case 3:var w=v[0]+v[1],u=g[0]+g[1];if(S=w+v[2]-(u+g[2]))return S;var S,_=m(v[0],v[1]),E=m(g[0],g[1]);return(S=m(_,v[2])-m(E,g[2]))||m(_+v[2],w)-m(E+g[2],u);default:var L=v.slice(0);L.sort();var C=g.slice(0);C.sort();for(var P=0;P<y;++P)if(p=L[P]-C[P])return p;return 0}}function a(v,g){return n(v[0],g[0])}function i(v,g){if(g){for(var y=v.length,p=new Array(y),m=0;m<y;++m)p[m]=[v[m],g[m]];for(p.sort(a),m=0;m<y;++m)v[m]=p[m][0],g[m]=p[m][1];return v}return v.sort(n),v}function c(v){if(v.length===0)return[];for(var g=1,y=v.length,p=1;p<y;++p){var m=v[p];if(n(m,v[p-1])){if(p===g){g++;continue}v[g++]=m}}return v.length=g,v}function h(v,g){for(var y=0,p=v.length-1,m=-1;y<=p;){var w=y+p>>1,u=n(v[w],g);u<=0?(u===0&&(m=w),y=w+1):u>0&&(p=w-1)}return m}function f(v,g){for(var y=new Array(v.length),p=0,m=y.length;p<m;++p)y[p]=[];for(var w=[],u=(p=0,g.length);p<u;++p)for(var S=g[p],_=S.length,E=1,L=1<<_;E<L;++E){w.length=o.popCount(E);for(var C=0,P=0;P<_;++P)E&1<<P&&(w[C++]=S[P]);var I=h(v,w);if(!(I<0))for(;y[I++].push(p),!(I>=v.length||n(v[I],w)!==0););}return y}function b(v,g){if(g<0)return[];for(var y=[],p=(1<<g+1)-1,m=0;m<v.length;++m)for(var w=v[m],u=p;u<1<<w.length;u=o.nextCombination(u)){for(var S=new Array(g+1),_=0,E=0;E<w.length;++E)u&1<<E&&(S[_++]=w[E]);y.push(S)}return i(y)}s.dimension=function(v){for(var g=0,y=Math.max,p=0,m=v.length;p<m;++p)g=y(g,v[p].length);return g-1},s.countVertices=function(v){for(var g=-1,y=Math.max,p=0,m=v.length;p<m;++p)for(var w=v[p],u=0,S=w.length;u<S;++u)g=y(g,w[u]);return g+1},s.cloneCells=function(v){for(var g=new Array(v.length),y=0,p=v.length;y<p;++y)g[y]=v[y].slice(0);return g},s.compareCells=n,s.normalize=i,s.unique=c,s.findCell=h,s.incidence=f,s.dual=function(v,g){if(!g)return f(c(b(v,0)),v);for(var y=new Array(g),p=0;p<g;++p)y[p]=[];p=0;for(var m=v.length;p<m;++p)for(var w=v[p],u=0,S=w.length;u<S;++u)y[w[u]].push(p);return y},s.explode=function(v){for(var g=[],y=0,p=v.length;y<p;++y)for(var m=v[y],w=0|m.length,u=1,S=1<<w;u<S;++u){for(var _=[],E=0;E<w;++E)u>>>E&1&&_.push(m[E]);g.push(_)}return i(g)},s.skeleton=b,s.boundary=function(v){for(var g=[],y=0,p=v.length;y<p;++y)for(var m=v[y],w=0,u=m.length;w<u;++w){for(var S=new Array(m.length-1),_=0,E=0;_<u;++_)_!==w&&(S[E++]=m[_]);g.push(S)}return i(g)},s.connectedComponents=function(v,g){return g?function(y,p){for(var m=new r(p),w=0;w<y.length;++w)for(var u=y[w],S=0;S<u.length;++S)for(var _=S+1;_<u.length;++_)m.link(u[S],u[_]);var E=[],L=m.ranks;for(w=0;w<L.length;++w)L[w]=-1;for(w=0;w<y.length;++w){var C=m.find(y[w][0]);L[C]<0?(L[C]=E.length,E.push([y[w].slice(0)])):E[L[C]].push(y[w].slice(0))}return E}(v,g):function(y){for(var p=c(i(b(y,0))),m=new r(p.length),w=0;w<y.length;++w)for(var u=y[w],S=0;S<u.length;++S)for(var _=h(p,[u[S]]),E=S+1;E<u.length;++E)m.link(_,h(p,[u[E]]));var L=[],C=m.ranks;for(w=0;w<C.length;++w)C[w]=-1;for(w=0;w<y.length;++w){var P=m.find(h(p,[y[w][0]]));C[P]<0?(C[P]=L.length,L.push([y[w].slice(0)])):L[C[P]].push(y[w].slice(0))}return L}(v)}},9521:function(d){function s(t){this.roots=new Array(t),this.ranks=new Array(t);for(var o=0;o<t;++o)this.roots[o]=o,this.ranks[o]=0}d.exports=s,s.prototype.length=function(){return this.roots.length},s.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},s.prototype.find=function(t){for(var o=this.roots;o[t]!==t;){var r=o[t];o[t]=o[r],t=r}return t},s.prototype.link=function(t,o){var r=this.find(t),n=this.find(o);if(r!==n){var a=this.ranks,i=this.roots,c=a[r],h=a[n];c<h?i[r]=n:h<c?i[n]=r:(i[n]=r,++a[r])}}},8243:function(d,s,t){d.exports=function(n,a,i){for(var c=a.length,h=n.length,f=new Array(c),b=new Array(c),v=new Array(c),g=new Array(c),y=0;y<c;++y)f[y]=b[y]=-1,v[y]=1/0,g[y]=!1;for(y=0;y<h;++y){var p=n[y];if(p.length!==2)throw new Error("Input must be a graph");var m=p[1],w=p[0];b[w]!==-1?b[w]=-2:b[w]=m,f[m]!==-1?f[m]=-2:f[m]=w}function u(G){if(g[G])return 1/0;var V,W,J,X=f[G],ee=b[G];return X<0||ee<0?1/0:(V=a[G],W=a[X],J=a[ee],Math.abs(o(V,W,J))/Math.sqrt(Math.pow(W[0]-J[0],2)+Math.pow(W[1]-J[1],2)))}function S(G,V){var W=z[G],J=z[V];z[G]=J,z[V]=W,H[W]=V,H[J]=G}function _(G){return v[z[G]]}function E(G){return 1&G?G-1>>1:(G>>1)-1}function L(G){for(var V=_(G);;){var W=V,J=2*G+1,X=2*(G+1),ee=G;if(J<F){var re=_(J);re<W&&(ee=J,W=re)}if(X<F&&_(X)<W&&(ee=X),ee===G)return G;S(G,ee),G=ee}}function C(G){for(var V=_(G);G>0;){var W=E(G);if(!(W>=0&&V<_(W)))return G;S(G,W),G=W}}function P(){if(F>0){var G=z[0];return S(0,F-1),F-=1,L(0),G}return-1}function I(G,V){var W=z[G];return v[W]===V?G:(v[W]=-1/0,C(G),P(),v[W]=V,C((F+=1)-1))}function U(G){if(!g[G]){g[G]=!0;var V=f[G],W=b[G];f[W]>=0&&(f[W]=V),b[V]>=0&&(b[V]=W),H[V]>=0&&I(H[V],u(V)),H[W]>=0&&I(H[W],u(W))}}var z=[],H=new Array(c);for(y=0;y<c;++y)(v[y]=u(y))<1/0?(H[y]=z.length,z.push(y)):H[y]=-1;var F=z.length;for(y=F>>1;y>=0;--y)L(y);for(;;){var N=P();if(N<0||v[N]>i)break;U(N)}var B=[];for(y=0;y<c;++y)g[y]||(H[y]=B.length,B.push(a[y].slice()));function j(G,V){if(G[V]<0)return V;var W=V,J=V;do{var X=G[J];if(!g[J]||X<0||X===J||(X=G[J=X],!g[J]||X<0||X===J))break;J=X,W=G[W]}while(W!==J);for(var ee=V;ee!==J;ee=G[ee])G[ee]=J;return J}B.length;var K=[];return n.forEach(function(G){var V=j(f,G[0]),W=j(b,G[1]);if(V>=0&&W>=0&&V!==W){var J=H[V],X=H[W];J!==X&&K.push([J,X])}}),r.unique(r.normalize(K)),{positions:B,edges:K}};var o=t(417),r=t(6656)},6638:function(d,s,t){d.exports=function(n,a){var i,c,h,f;if(a[0][0]<a[1][0])i=a[0],c=a[1];else{if(!(a[0][0]>a[1][0]))return r(a,n);i=a[1],c=a[0]}if(n[0][0]<n[1][0])h=n[0],f=n[1];else{if(!(n[0][0]>n[1][0]))return-r(n,a);h=n[1],f=n[0]}var b=o(i,c,f),v=o(i,c,h);if(b<0){if(v<=0)return b}else if(b>0){if(v>=0)return b}else if(v)return v;if(b=o(f,h,c),v=o(f,h,i),b<0){if(v<=0)return b}else if(b>0){if(v>=0)return b}else if(v)return v;return c[0]-f[0]};var o=t(417);function r(n,a){var i,c,h,f;if(a[0][0]<a[1][0])i=a[0],c=a[1];else{if(!(a[0][0]>a[1][0])){var b=Math.min(n[0][1],n[1][1]),v=Math.max(n[0][1],n[1][1]),g=Math.min(a[0][1],a[1][1]),y=Math.max(a[0][1],a[1][1]);return v<g?v-g:b>y?b-y:v-y}i=a[1],c=a[0]}n[0][1]<n[1][1]?(h=n[0],f=n[1]):(h=n[1],f=n[0]);var p=o(c,i,h);return p||(p=o(c,i,f))||f-c}},4385:function(d,s,t){d.exports=function(v){for(var g=v.length,y=2*g,p=new Array(y),m=0;m<g;++m){var w=v[m],u=w[0][0]<w[1][0];p[2*m]=new b(w[0][0],w,u,m),p[2*m+1]=new b(w[1][0],w,!u,m)}p.sort(function(U,z){var H=U.x-z.x;return H||(H=U.create-z.create)||Math.min(U.segment[0][1],U.segment[1][1])-Math.min(z.segment[0][1],z.segment[1][1])});var S=r(a),_=[],E=[],L=[];for(m=0;m<y;){for(var C=p[m].x,P=[];m<y;){var I=p[m];if(I.x!==C)break;m+=1,I.segment[0][0]===I.x&&I.segment[1][0]===I.x?I.create&&(I.segment[0][1]<I.segment[1][1]?(P.push(new f(I.segment[0][1],I.index,!0,!0)),P.push(new f(I.segment[1][1],I.index,!1,!1))):(P.push(new f(I.segment[1][1],I.index,!0,!1)),P.push(new f(I.segment[0][1],I.index,!1,!0)))):S=I.create?S.insert(I.segment,I.index):S.remove(I.segment)}_.push(S.root),E.push(C),L.push(P)}return new i(_,E,L)};var o=t(5070),r=t(7080),n=t(417),a=t(6638);function i(v,g,y){this.slabs=v,this.coordinates=g,this.horizontal=y}function c(v,g){return v.y-g}function h(v,g){for(var y=null;v;){var p,m,w=v.key;w[0][0]<w[1][0]?(p=w[0],m=w[1]):(p=w[1],m=w[0]);var u=n(p,m,g);if(u<0)v=v.left;else if(u>0)if(g[0]!==w[1][0])y=v,v=v.right;else{if(S=h(v.right,g))return S;v=v.left}else{if(g[0]!==w[1][0])return v;var S;if(S=h(v.right,g))return S;v=v.left}}return y}function f(v,g,y,p){this.y=v,this.index=g,this.start=y,this.closed=p}function b(v,g,y,p){this.x=v,this.segment=g,this.create=y,this.index=p}i.prototype.castUp=function(v){var g=o.le(this.coordinates,v[0]);if(g<0)return-1;this.slabs[g];var y=h(this.slabs[g],v),p=-1;if(y&&(p=y.value),this.coordinates[g]===v[0]){var m=null;if(y&&(m=y.key),g>0){var w=h(this.slabs[g-1],v);w&&(m?a(w.key,m)>0&&(m=w.key,p=w.value):(p=w.value,m=w.key))}var u=this.horizontal[g];if(u.length>0){var S=o.ge(u,v[1],c);if(S<u.length){var _=u[S];if(v[1]===_.y){if(_.closed)return _.index;for(;S<u.length-1&&u[S+1].y===v[1];)if((_=u[S+=1]).closed)return _.index;if(_.y===v[1]&&!_.start){if((S+=1)>=u.length)return p;_=u[S]}}if(_.start)if(m){var E=n(m[0],m[1],[v[0],_.y]);m[0][0]>m[1][0]&&(E=-E),E>0&&(p=_.index)}else p=_.index;else _.y!==v[1]&&(p=_.index)}}}return p}},4670:function(d,s,t){var o=t(9130),r=t(9662);function n(i,c){var h=r(o(i,c),[c[c.length-1]]);return h[h.length-1]}function a(i,c,h,f){var b=-c/(f-c);b<0?b=0:b>1&&(b=1);for(var v=1-b,g=i.length,y=new Array(g),p=0;p<g;++p)y[p]=b*i[p]+v*h[p];return y}d.exports=function(i,c){for(var h=[],f=[],b=n(i[i.length-1],c),v=i[i.length-1],g=i[0],y=0;y<i.length;++y,v=g){var p=n(g=i[y],c);if(b<0&&p>0||b>0&&p<0){var m=a(v,p,g,b);h.push(m),f.push(m.slice())}p<0?f.push(g.slice()):p>0?h.push(g.slice()):(h.push(g.slice()),f.push(g.slice())),b=p}return{positive:h,negative:f}},d.exports.positive=function(i,c){for(var h=[],f=n(i[i.length-1],c),b=i[i.length-1],v=i[0],g=0;g<i.length;++g,b=v){var y=n(v=i[g],c);(f<0&&y>0||f>0&&y<0)&&h.push(a(b,y,v,f)),y>=0&&h.push(v.slice()),f=y}return h},d.exports.negative=function(i,c){for(var h=[],f=n(i[i.length-1],c),b=i[i.length-1],v=i[0],g=0;g<i.length;++g,b=v){var y=n(v=i[g],c);(f<0&&y>0||f>0&&y<0)&&h.push(a(b,y,v,f)),y<=0&&h.push(v.slice()),f=y}return h}},8974:function(d,s,t){var o;(function(){var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(f){return i(h(f),arguments)}function a(f,b){return n.apply(null,[f].concat(b||[]))}function i(f,b){var v,g,y,p,m,w,u,S,_,E=1,L=f.length,C="";for(g=0;g<L;g++)if(typeof f[g]=="string")C+=f[g];else if(typeof f[g]=="object"){if((p=f[g]).keys)for(v=b[E],y=0;y<p.keys.length;y++){if(v==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',p.keys[y],p.keys[y-1]));v=v[p.keys[y]]}else v=p.param_no?b[p.param_no]:b[E++];if(r.not_type.test(p.type)&&r.not_primitive.test(p.type)&&v instanceof Function&&(v=v()),r.numeric_arg.test(p.type)&&typeof v!="number"&&isNaN(v))throw new TypeError(n("[sprintf] expecting number but found %T",v));switch(r.number.test(p.type)&&(S=v>=0),p.type){case"b":v=parseInt(v,10).toString(2);break;case"c":v=String.fromCharCode(parseInt(v,10));break;case"d":case"i":v=parseInt(v,10);break;case"j":v=JSON.stringify(v,null,p.width?parseInt(p.width):0);break;case"e":v=p.precision?parseFloat(v).toExponential(p.precision):parseFloat(v).toExponential();break;case"f":v=p.precision?parseFloat(v).toFixed(p.precision):parseFloat(v);break;case"g":v=p.precision?String(Number(v.toPrecision(p.precision))):parseFloat(v);break;case"o":v=(parseInt(v,10)>>>0).toString(8);break;case"s":v=String(v),v=p.precision?v.substring(0,p.precision):v;break;case"t":v=String(!!v),v=p.precision?v.substring(0,p.precision):v;break;case"T":v=Object.prototype.toString.call(v).slice(8,-1).toLowerCase(),v=p.precision?v.substring(0,p.precision):v;break;case"u":v=parseInt(v,10)>>>0;break;case"v":v=v.valueOf(),v=p.precision?v.substring(0,p.precision):v;break;case"x":v=(parseInt(v,10)>>>0).toString(16);break;case"X":v=(parseInt(v,10)>>>0).toString(16).toUpperCase()}r.json.test(p.type)?C+=v:(!r.number.test(p.type)||S&&!p.sign?_="":(_=S?"+":"-",v=v.toString().replace(r.sign,"")),w=p.pad_char?p.pad_char==="0"?"0":p.pad_char.charAt(1):" ",u=p.width-(_+v).length,m=p.width&&u>0?w.repeat(u):"",C+=p.align?_+v+m:w==="0"?_+m+v:m+_+v)}return C}var c=Object.create(null);function h(f){if(c[f])return c[f];for(var b,v=f,g=[],y=0;v;){if((b=r.text.exec(v))!==null)g.push(b[0]);else if((b=r.modulo.exec(v))!==null)g.push("%");else{if((b=r.placeholder.exec(v))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(b[2]){y|=1;var p=[],m=b[2],w=[];if((w=r.key.exec(m))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(p.push(w[1]);(m=m.substring(w[0].length))!=="";)if((w=r.key_access.exec(m))!==null)p.push(w[1]);else{if((w=r.index_access.exec(m))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");p.push(w[1])}b[2]=p}else y|=2;if(y===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:b[0],param_no:b[1],keys:b[2],sign:b[3],pad_char:b[4],align:b[5],width:b[6],precision:b[7],type:b[8]})}v=v.substring(b[0].length)}return c[f]=g}s.sprintf=n,s.vsprintf=a,typeof window<"u"&&(window.sprintf=n,window.vsprintf=a,(o=function(){return{sprintf:n,vsprintf:a}}.call(s,t,s,d))===void 0||(d.exports=o))})()},4162:function(d,s,t){d.exports=function(i,c){if(i.dimension<=0)return{positions:[],cells:[]};if(i.dimension===1)return function(b,v){for(var g=r(b,v),y=g.length,p=new Array(y),m=new Array(y),w=0;w<y;++w)p[w]=[g[w]],m[w]=[w];return{positions:p,cells:m}}(i,c);var h=i.order.join()+"-"+i.dtype,f=a[h];return c=+c||0,f||(f=a[h]=function(b,v){var g=b.length+"d",y=n[g];if(y)return y(o,b,v)}(i.order,i.dtype)),f(i,c)};var o=t(9284),r=t(9584),n={"2d":function(i,c,h){var f=i({order:c,scalarArguments:3,getters:h==="generic"?[0]:void 0,phase:function(b,v,g,y){return b>y|0},vertex:function(b,v,g,y,p,m,w,u,S,_,E,L,C){var P=(w<<0)+(u<<1)+(S<<2)+(_<<3)|0;if(P!==0&&P!==15)switch(P){case 0:case 15:E.push([b-.5,v-.5]);break;case 1:E.push([b-.25-.25*(y+g-2*C)/(g-y),v-.25-.25*(p+g-2*C)/(g-p)]);break;case 2:E.push([b-.75-.25*(-y-g+2*C)/(y-g),v-.25-.25*(m+y-2*C)/(y-m)]);break;case 3:E.push([b-.5,v-.5-.5*(p+g+m+y-4*C)/(g-p+y-m)]);break;case 4:E.push([b-.25-.25*(m+p-2*C)/(p-m),v-.75-.25*(-p-g+2*C)/(p-g)]);break;case 5:E.push([b-.5-.5*(y+g+m+p-4*C)/(g-y+p-m),v-.5]);break;case 6:E.push([b-.5-.25*(-y-g+m+p)/(y-g+p-m),v-.5-.25*(-p-g+m+y)/(p-g+y-m)]);break;case 7:E.push([b-.75-.25*(m+p-2*C)/(p-m),v-.75-.25*(m+y-2*C)/(y-m)]);break;case 8:E.push([b-.75-.25*(-m-p+2*C)/(m-p),v-.75-.25*(-m-y+2*C)/(m-y)]);break;case 9:E.push([b-.5-.25*(y+g+-m-p)/(g-y+m-p),v-.5-.25*(p+g+-m-y)/(g-p+m-y)]);break;case 10:E.push([b-.5-.5*(-y-g-m-p+4*C)/(y-g+m-p),v-.5]);break;case 11:E.push([b-.25-.25*(-m-p+2*C)/(m-p),v-.75-.25*(p+g-2*C)/(g-p)]);break;case 12:E.push([b-.5,v-.5-.5*(-p-g-m-y+4*C)/(p-g+m-y)]);break;case 13:E.push([b-.75-.25*(y+g-2*C)/(g-y),v-.25-.25*(-m-y+2*C)/(m-y)]);break;case 14:E.push([b-.25-.25*(-y-g+2*C)/(y-g),v-.25-.25*(-p-g+2*C)/(p-g)])}},cell:function(b,v,g,y,p,m,w,u,S){p?u.push([b,v]):u.push([v,b])}});return function(b,v){var g=[],y=[];return f(b,g,y,v),{positions:g,cells:y}}}},a={}},6946:function(d,s,t){d.exports=function a(i,c,h){h=h||{};var f=n[i];f||(f=n[i]={" ":{data:new Float32Array(0),shape:.2}});var b=f[c];if(!b)if(c.length<=1||!/\d/.test(c))b=f[c]=function(L){for(var C=L.cells,P=L.positions,I=new Float32Array(6*C.length),U=0,z=0,H=0;H<C.length;++H)for(var F=C[H],N=0;N<3;++N){var B=P[F[N]];I[U++]=B[0],I[U++]=B[1]+1.4,z=Math.max(B[0],z)}return{data:I,shape:z}}(o(c,{triangles:!0,font:i,textAlign:h.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var v=c.split(/(\d|\s)/),g=new Array(v.length),y=0,p=0,m=0;m<v.length;++m)g[m]=a(i,v[m]),y+=g[m].data.length,p+=g[m].shape,m>0&&(p+=.02);var w=new Float32Array(y),u=0,S=-.5*p;for(m=0;m<g.length;++m){for(var _=g[m].data,E=0;E<_.length;E+=2)w[u++]=_[E]+S,w[u++]=_[E+1];S+=g[m].shape+.02}b=f[c]={data:w,shape:p}}return b};var o=t(875),r=window||A.global||{},n=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}},14:function(d,s,t){var o=t(4405);function r(a,i){var c=o(getComputedStyle(a).getPropertyValue(i));return c[0]*n(c[1],a)}function n(a,i){switch(i=i||document.body,a=(a||"px").trim().toLowerCase(),i!==window&&i!==document||(i=document.body),a){case"%":return i.clientHeight/100;case"ch":case"ex":return function(c,h){var f=document.createElement("div");f.style["font-size"]="128"+c,h.appendChild(f);var b=r(f,"font-size")/128;return h.removeChild(f),b}(a,i);case"em":return r(i,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 37.79527559055118;case"mm":return 3.7795275590551185;case"pt":return 1.3333333333333333;case"pc":return 16}return 1}d.exports=n},3440:function(d,s,t){d.exports=function(p){var m=(p=p||{}).center||[0,0,0],w=p.up||[0,1,0],u=p.right||b(w),S=p.radius||1,_=p.theta||0,E=p.phi||0;if(m=[].slice.call(m,0,3),w=[].slice.call(w,0,3),i(w,w),u=[].slice.call(u,0,3),i(u,u),"eye"in p){var L=p.eye,C=[L[0]-m[0],L[1]-m[1],L[2]-m[2]];a(u,C,w),h(u[0],u[1],u[2])<1e-6?u=b(w):i(u,u),S=h(C[0],C[1],C[2]);var P=c(w,C)/S,I=c(u,C)/S;E=Math.acos(P),_=Math.acos(I)}return S=Math.log(S),new v(p.zoomMin,p.zoomMax,m,w,u,S,_,E)};var o=t(8444),r=t(7437),n=t(4422),a=t(903),i=t(899),c=t(9305);function h(p,m,w){return Math.sqrt(Math.pow(p,2)+Math.pow(m,2)+Math.pow(w,2))}function f(p){return Math.min(1,Math.max(-1,p))}function b(p){var m=Math.abs(p[0]),w=Math.abs(p[1]),u=Math.abs(p[2]),S=[0,0,0];m>Math.max(w,u)?S[2]=1:w>Math.max(m,u)?S[0]=1:S[1]=1;for(var _=0,E=0,L=0;L<3;++L)_+=p[L]*p[L],E+=S[L]*p[L];for(L=0;L<3;++L)S[L]-=E/_*p[L];return i(S,S),S}function v(p,m,w,u,S,_,E,L){this.center=o(w),this.up=o(u),this.right=o(S),this.radius=o([_]),this.angle=o([E,L]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(p,m),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var C=0;C<16;++C)this.computedMatrix[C]=.5;this.recalcMatrix(0)}var g=v.prototype;g.setDistanceLimits=function(p,m){p=p>0?Math.log(p):-1/0,m=m>0?Math.log(m):1/0,m=Math.max(m,p),this.radius.bounds[0][0]=p,this.radius.bounds[1][0]=m},g.getDistanceLimits=function(p){var m=this.radius.bounds[0];return p?(p[0]=Math.exp(m[0][0]),p[1]=Math.exp(m[1][0]),p):[Math.exp(m[0][0]),Math.exp(m[1][0])]},g.recalcMatrix=function(p){this.center.curve(p),this.up.curve(p),this.right.curve(p),this.radius.curve(p),this.angle.curve(p);for(var m=this.computedUp,w=this.computedRight,u=0,S=0,_=0;_<3;++_)S+=m[_]*w[_],u+=m[_]*m[_];var E=Math.sqrt(u),L=0;for(_=0;_<3;++_)w[_]-=m[_]*S/u,L+=w[_]*w[_],m[_]/=E;var C=Math.sqrt(L);for(_=0;_<3;++_)w[_]/=C;var P=this.computedToward;a(P,m,w),i(P,P);var I=Math.exp(this.computedRadius[0]),U=this.computedAngle[0],z=this.computedAngle[1],H=Math.cos(U),F=Math.sin(U),N=Math.cos(z),B=Math.sin(z),j=this.computedCenter,K=H*N,G=F*N,V=B,W=-H*B,J=-F*B,X=N,ee=this.computedEye,re=this.computedMatrix;for(_=0;_<3;++_){var ie=K*w[_]+G*P[_]+V*m[_];re[4*_+1]=W*w[_]+J*P[_]+X*m[_],re[4*_+2]=ie,re[4*_+3]=0}var se=re[1],fe=re[5],ye=re[9],ge=re[2],he=re[6],ve=re[10],Oe=fe*ve-ye*he,xe=ye*ge-se*ve,ke=se*he-fe*ge,Me=h(Oe,xe,ke);for(Oe/=Me,xe/=Me,ke/=Me,re[0]=Oe,re[4]=xe,re[8]=ke,_=0;_<3;++_)ee[_]=j[_]+re[2+4*_]*I;for(_=0;_<3;++_){L=0;for(var Te=0;Te<3;++Te)L+=re[_+4*Te]*ee[Te];re[12+_]=-L}re[15]=1},g.getMatrix=function(p,m){this.recalcMatrix(p);var w=this.computedMatrix;if(m){for(var u=0;u<16;++u)m[u]=w[u];return m}return w};var y=[0,0,0];g.rotate=function(p,m,w,u){if(this.angle.move(p,m,w),u){this.recalcMatrix(p);var S=this.computedMatrix;y[0]=S[2],y[1]=S[6],y[2]=S[10];for(var _=this.computedUp,E=this.computedRight,L=this.computedToward,C=0;C<3;++C)S[4*C]=_[C],S[4*C+1]=E[C],S[4*C+2]=L[C];for(n(S,S,u,y),C=0;C<3;++C)_[C]=S[4*C],E[C]=S[4*C+1];this.up.set(p,_[0],_[1],_[2]),this.right.set(p,E[0],E[1],E[2])}},g.pan=function(p,m,w,u){m=m||0,w=w||0,u=u||0,this.recalcMatrix(p);var S=this.computedMatrix,_=(Math.exp(this.computedRadius[0]),S[1]),E=S[5],L=S[9],C=h(_,E,L);_/=C,E/=C,L/=C;var P=S[0],I=S[4],U=S[8],z=P*_+I*E+U*L,H=h(P-=_*z,I-=E*z,U-=L*z),F=(P/=H)*m+_*w,N=(I/=H)*m+E*w,B=(U/=H)*m+L*w;this.center.move(p,F,N,B);var j=Math.exp(this.computedRadius[0]);j=Math.max(1e-4,j+u),this.radius.set(p,Math.log(j))},g.translate=function(p,m,w,u){this.center.move(p,m||0,w||0,u||0)},g.setMatrix=function(p,m,w,u){var S=1;typeof w=="number"&&(S=0|w),(S<0||S>3)&&(S=1);var _=(S+2)%3;m||(this.recalcMatrix(p),m=this.computedMatrix);var E=m[S],L=m[S+4],C=m[S+8];if(u){var P=Math.abs(E),I=Math.abs(L),U=Math.abs(C),z=Math.max(P,I,U);P===z?(E=E<0?-1:1,L=C=0):U===z?(C=C<0?-1:1,E=L=0):(L=L<0?-1:1,E=C=0)}else{var H=h(E,L,C);E/=H,L/=H,C/=H}var F,N,B=m[_],j=m[_+4],K=m[_+8],G=B*E+j*L+K*C,V=h(B-=E*G,j-=L*G,K-=C*G),W=L*(K/=V)-C*(j/=V),J=C*(B/=V)-E*K,X=E*j-L*B,ee=h(W,J,X);if(W/=ee,J/=ee,X/=ee,this.center.jump(p,me,Ae,Ie),this.radius.idle(p),this.up.jump(p,E,L,C),this.right.jump(p,B,j,K),S===2){var re=m[1],ie=m[5],se=m[9],fe=re*B+ie*j+se*K,ye=re*W+ie*J+se*X;F=Oe<0?-Math.PI/2:Math.PI/2,N=Math.atan2(ye,fe)}else{var ge=m[2],he=m[6],ve=m[10],Oe=ge*E+he*L+ve*C,xe=ge*B+he*j+ve*K,ke=ge*W+he*J+ve*X;F=Math.asin(f(Oe)),N=Math.atan2(ke,xe)}this.angle.jump(p,N,F),this.recalcMatrix(p);var Me=m[2],Te=m[6],Q=m[10],oe=this.computedMatrix;r(oe,m);var ce=oe[15],me=oe[12]/ce,Ae=oe[13]/ce,Ie=oe[14]/ce,Ce=Math.exp(this.computedRadius[0]);this.center.jump(p,me-Me*Ce,Ae-Te*Ce,Ie-Q*Ce)},g.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},g.idle=function(p){this.center.idle(p),this.up.idle(p),this.right.idle(p),this.radius.idle(p),this.angle.idle(p)},g.flush=function(p){this.center.flush(p),this.up.flush(p),this.right.flush(p),this.radius.flush(p),this.angle.flush(p)},g.setDistance=function(p,m){m>0&&this.radius.set(p,Math.log(m))},g.lookAt=function(p,m,w,u){this.recalcMatrix(p),m=m||this.computedEye,w=w||this.computedCenter;var S=(u=u||this.computedUp)[0],_=u[1],E=u[2],L=h(S,_,E);if(!(L<1e-6)){S/=L,_/=L,E/=L;var C=m[0]-w[0],P=m[1]-w[1],I=m[2]-w[2],U=h(C,P,I);if(!(U<1e-6)){C/=U,P/=U,I/=U;var z=this.computedRight,H=z[0],F=z[1],N=z[2],B=S*H+_*F+E*N,j=h(H-=B*S,F-=B*_,N-=B*E);if(!(j<.01&&(j=h(H=_*I-E*P,F=E*C-S*I,N=S*P-_*C))<1e-6)){H/=j,F/=j,N/=j,this.up.set(p,S,_,E),this.right.set(p,H,F,N),this.center.set(p,w[0],w[1],w[2]),this.radius.set(p,Math.log(U));var K=_*N-E*F,G=E*H-S*N,V=S*F-_*H,W=h(K,G,V),J=S*C+_*P+E*I,X=H*C+F*P+N*I,ee=(K/=W)*C+(G/=W)*P+(V/=W)*I,re=Math.asin(f(J)),ie=Math.atan2(ee,X),se=this.angle._state,fe=se[se.length-1],ye=se[se.length-2];fe%=2*Math.PI;var ge=Math.abs(fe+2*Math.PI-ie),he=Math.abs(fe-ie),ve=Math.abs(fe-2*Math.PI-ie);ge<he&&(fe+=2*Math.PI),ve<he&&(fe-=2*Math.PI),this.angle.jump(this.angle.lastT(),fe,ye),this.angle.set(p,ie,re)}}}}},9660:function(d){d.exports=function(t,o,r){var n=t*o,a=s*t,i=a-(a-t),c=t-i,h=s*o,f=h-(h-o),b=o-f,v=c*b-(n-i*f-c*f-i*b);return r?(r[0]=v,r[1]=n,r):[v,n]};var s=+(Math.pow(2,27)+1)},87:function(d){d.exports=function(s,t,o){var r=s+t,n=r-s,a=t-n,i=s-(r-n);return o?(o[0]=i+a,o[1]=r,o):[i+a,r]}},5306:function(d,s,t){var o=t(2288),r=t(3094),n=t(2146).lW;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var a=typeof Uint8ClampedArray<"u",i=typeof BigUint64Array<"u",c=typeof BigInt64Array<"u",h=t.g.__TYPEDARRAY_POOL;h.UINT8C||(h.UINT8C=r([32,0])),h.BIGUINT64||(h.BIGUINT64=r([32,0])),h.BIGINT64||(h.BIGINT64=r([32,0])),h.BUFFER||(h.BUFFER=r([32,0]));var f=h.DATA,b=h.BUFFER;function v(z){if(z){var H=z.length||z.byteLength,F=o.log2(H);f[F].push(z)}}function g(z){z=o.nextPow2(z);var H=o.log2(z),F=f[H];return F.length>0?F.pop():new ArrayBuffer(z)}function y(z){return new Uint8Array(g(z),0,z)}function p(z){return new Uint16Array(g(2*z),0,z)}function m(z){return new Uint32Array(g(4*z),0,z)}function w(z){return new Int8Array(g(z),0,z)}function u(z){return new Int16Array(g(2*z),0,z)}function S(z){return new Int32Array(g(4*z),0,z)}function _(z){return new Float32Array(g(4*z),0,z)}function E(z){return new Float64Array(g(8*z),0,z)}function L(z){return a?new Uint8ClampedArray(g(z),0,z):y(z)}function C(z){return i?new BigUint64Array(g(8*z),0,z):null}function P(z){return c?new BigInt64Array(g(8*z),0,z):null}function I(z){return new DataView(g(z),0,z)}function U(z){z=o.nextPow2(z);var H=o.log2(z),F=b[H];return F.length>0?F.pop():new n(z)}s.free=function(z){if(n.isBuffer(z))b[o.log2(z.length)].push(z);else{if(Object.prototype.toString.call(z)!=="[object ArrayBuffer]"&&(z=z.buffer),!z)return;var H=z.length||z.byteLength,F=0|o.log2(H);f[F].push(z)}},s.freeUint8=s.freeUint16=s.freeUint32=s.freeBigUint64=s.freeInt8=s.freeInt16=s.freeInt32=s.freeBigInt64=s.freeFloat32=s.freeFloat=s.freeFloat64=s.freeDouble=s.freeUint8Clamped=s.freeDataView=function(z){v(z.buffer)},s.freeArrayBuffer=v,s.freeBuffer=function(z){b[o.log2(z.length)].push(z)},s.malloc=function(z,H){if(H===void 0||H==="arraybuffer")return g(z);switch(H){case"uint8":return y(z);case"uint16":return p(z);case"uint32":return m(z);case"int8":return w(z);case"int16":return u(z);case"int32":return S(z);case"float":case"float32":return _(z);case"double":case"float64":return E(z);case"uint8_clamped":return L(z);case"bigint64":return P(z);case"biguint64":return C(z);case"buffer":return U(z);case"data":case"dataview":return I(z);default:return null}return null},s.mallocArrayBuffer=g,s.mallocUint8=y,s.mallocUint16=p,s.mallocUint32=m,s.mallocInt8=w,s.mallocInt16=u,s.mallocInt32=S,s.mallocFloat32=s.mallocFloat=_,s.mallocFloat64=s.mallocDouble=E,s.mallocUint8Clamped=L,s.mallocBigUint64=C,s.mallocBigInt64=P,s.mallocDataView=I,s.mallocBuffer=U,s.clearCache=function(){for(var z=0;z<32;++z)h.UINT8[z].length=0,h.UINT16[z].length=0,h.UINT32[z].length=0,h.INT8[z].length=0,h.INT16[z].length=0,h.INT32[z].length=0,h.FLOAT[z].length=0,h.DOUBLE[z].length=0,h.BIGUINT64[z].length=0,h.BIGINT64[z].length=0,h.UINT8C[z].length=0,f[z].length=0,b[z].length=0}},1731:function(d){function s(o){this.roots=new Array(o),this.ranks=new Array(o);for(var r=0;r<o;++r)this.roots[r]=r,this.ranks[r]=0}d.exports=s;var t=s.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var o=this.roots.length;return this.roots.push(o),this.ranks.push(0),o},t.find=function(o){for(var r=o,n=this.roots;n[o]!==o;)o=n[o];for(;n[r]!==o;){var a=n[r];n[r]=o,r=a}return o},t.link=function(o,r){var n=this.find(o),a=this.find(r);if(n!==a){var i=this.ranks,c=this.roots,h=i[n],f=i[a];h<f?c[n]=a:f<h?c[a]=n:(c[a]=n,++i[n])}}},1215:function(d){d.exports=function(s,t,o){return s.length===0?s:t?(o||s.sort(t),function(r,n){for(var a=1,i=r.length,c=r[0],h=r[0],f=1;f<i;++f)if(h=c,n(c=r[f],h)){if(f===a){a++;continue}r[a++]=c}return r.length=a,r}(s,t)):(o||s.sort(),function(r){for(var n=1,a=r.length,i=r[0],c=r[0],h=1;h<a;++h,c=i)if(c=i,(i=r[h])!==c){if(h===n){n++;continue}r[n++]=i}return r.length=n,r}(s))}},875:function(d,s,t){d.exports=function(a,i){return typeof i=="object"&&i!==null||(i={}),o(a,i.canvas||r,i.context||n,i)};var o=t(712),r=null,n=null;typeof document<"u"&&((r=document.createElement("canvas")).width=8192,r.height=1024,n=r.getContext("2d"))},712:function(d,s,t){d.exports=function(p,m,w,u){var S=64,_=1.25,E={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return u&&(u.size&&u.size>0&&(S=u.size),u.lineSpacing&&u.lineSpacing>0&&(_=u.lineSpacing),u.styletags&&u.styletags.breaklines&&(E.breaklines=!!u.styletags.breaklines),u.styletags&&u.styletags.bolds&&(E.bolds=!!u.styletags.bolds),u.styletags&&u.styletags.italics&&(E.italics=!!u.styletags.italics),u.styletags&&u.styletags.subscripts&&(E.subscripts=!!u.styletags.subscripts),u.styletags&&u.styletags.superscripts&&(E.superscripts=!!u.styletags.superscripts)),w.font=[u.fontStyle,u.fontVariant,u.fontWeight,S+"px",u.font].filter(function(L){return L}).join(" "),w.textAlign="start",w.textBaseline="alphabetic",w.direction="ltr",y(function(L,C,P,I,U,z){P=P.replace(/\n/g,""),P=z.breaklines===!0?P.replace(/\<br\>/g,`
`):P.replace(/\<br\>/g," ");var H="",F=[];for(K=0;K<P.length;++K)F[K]=H;z.bolds===!0&&(F=b("b",h,P,F)),z.italics===!0&&(F=b("i",f,P,F)),z.superscripts===!0&&(F=b("sup","+1",P,F)),z.subscripts===!0&&(F=b("sub","-1",P,F));var N=[],B="";for(K=0;K<P.length;++K)F[K]!==null&&(B+=P[K],N.push(F[K]));var j,K,G,V,W,J=B.split(`
`),X=J.length,ee=Math.round(U*I),re=I,ie=2*I,se=0,fe=X*ee+ie;L.height<fe&&(L.height=fe),C.fillStyle="#000",C.fillRect(0,0,L.width,L.height),C.fillStyle="#fff";var ye=0,ge="";function he(){if(ge!==""){var oe=C.measureText(ge).width;C.fillText(ge,re+G,ie+V),G+=oe}}function ve(){return Math.round(W)+"px "}function Oe(oe,ce){var me=""+C.font;if(z.subscripts===!0){var Ae=oe.indexOf("-"),Ie=ce.indexOf("-"),Ce=Ae>-1?parseInt(oe[1+Ae]):0,Re=Ie>-1?parseInt(ce[1+Ie]):0;Ce!==Re&&(me=me.replace(ve(),"?px "),W*=Math.pow(.75,Re-Ce),me=me.replace("?px ",ve())),V+=.25*ee*(Re-Ce)}if(z.superscripts===!0){var le=oe.indexOf("+"),de=ce.indexOf("+"),_e=le>-1?parseInt(oe[1+le]):0,Fe=de>-1?parseInt(ce[1+de]):0;_e!==Fe&&(me=me.replace(ve(),"?px "),W*=Math.pow(.75,Fe-_e),me=me.replace("?px ",ve())),V-=.25*ee*(Fe-_e)}if(z.bolds===!0){var Ve=oe.indexOf(h)>-1,He=ce.indexOf(h)>-1;!Ve&&He&&(me=nt?me.replace("italic ","italic bold "):"bold "+me),Ve&&!He&&(me=me.replace("bold ",""))}if(z.italics===!0){var nt=oe.indexOf(f)>-1,tt=ce.indexOf(f)>-1;!nt&&tt&&(me="italic "+me),nt&&!tt&&(me=me.replace("italic ",""))}C.font=me}for(j=0;j<X;++j){var xe=J[j]+`
`;for(G=0,V=j*ee,W=I,ge="",K=0;K<xe.length;++K){var ke=K+ye<N.length?N[K+ye]:N[N.length-1];H===ke?ge+=xe[K]:(he(),ge=xe[K],ke!==void 0&&(Oe(H,ke),H=ke))}he(),ye+=xe.length;var Me=0|Math.round(G+2*re);se<Me&&(se=Me)}var Te=se,Q=ie+ee*X;return r(C.getImageData(0,0,Te,Q).data,[Q,Te,4]).pick(-1,-1,0).transpose(1,0)}(m,w,p,S,_,E),u,S)},d.exports.processPixels=y;var o=t(4162),r=t(5050),n=t(8243),a=t(197),i=t(7761),c=t(8040),h="b|",f="i|";function b(p,m,w,u){for(var S="<"+p+">",_="</"+p+">",E=S.length,L=_.length,C=m[0]==="+"||m[0]==="-",P=0,I=-L;P>-1&&(P=w.indexOf(S,P))!==-1&&(I=w.indexOf(_,P+E))!==-1&&!(I<=P);){for(var U=P;U<I+L;++U)if(U<P+E||U>=I)u[U]=null,w=w.substr(0,U)+" "+w.substr(U+1);else if(u[U]!==null){var z=u[U].indexOf(m[0]);z===-1?u[U]+=m:C&&(u[U]=u[U].substr(0,z+1)+(1+parseInt(u[U][z+1]))+u[U].substr(z+2))}var H=P+E,F=w.substr(H,I-H).indexOf(S);P=F!==-1?F:I+L}return u}function v(p,m){var w=o(p,128);return m?n(w.cells,w.positions,.25):{edges:w.cells,positions:w.positions}}function g(p,m,w,u){var S=v(p,u),_=function(j,K,G){for(var V=K.textAlign||"start",W=K.textBaseline||"alphabetic",J=[1<<30,1<<30],X=[0,0],ee=j.length,re=0;re<ee;++re)for(var ie=j[re],se=0;se<2;++se)J[se]=0|Math.min(J[se],ie[se]),X[se]=0|Math.max(X[se],ie[se]);var fe=0;switch(V){case"center":fe=-.5*(J[0]+X[0]);break;case"right":case"end":fe=-X[0];break;case"left":case"start":fe=-J[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+V+"'")}var ye=0;switch(W){case"hanging":case"top":ye=-J[1];break;case"middle":ye=-.5*(J[1]+X[1]);break;case"alphabetic":case"ideographic":ye=-3*G;break;case"bottom":ye=-X[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+W+"'")}var ge=1/G;return"lineHeight"in K?ge*=+K.lineHeight:"width"in K?ge=K.width/(X[0]-J[0]):"height"in K&&(ge=K.height/(X[1]-J[1])),j.map(function(he){return[ge*(he[0]+fe),ge*(he[1]+ye)]})}(S.positions,m,w),E=S.edges,L=m.orientation==="ccw";if(a(_,E),m.polygons||m.polygon||m.polyline){for(var C=c(E,_),P=new Array(C.length),I=0;I<C.length;++I){for(var U=C[I],z=new Array(U.length),H=0;H<U.length;++H){for(var F=U[H],N=new Array(F.length),B=0;B<F.length;++B)N[B]=_[F[B]].slice();L&&N.reverse(),z[H]=N}P[I]=z}return P}return m.triangles||m.triangulate||m.triangle?{cells:i(_,E,{delaunay:!1,exterior:!1,interior:!0}),positions:_}:{edges:E,positions:_}}function y(p,m,w){try{return g(p,m,w,!0)}catch{}try{return g(p,m,w,!1)}catch{}return m.polygons||m.polyline||m.polygon?[]:m.triangles||m.triangulate||m.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(d){(function(){if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=m);var s=!1;if(typeof WeakMap=="function"){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var o=new t,r=Object.freeze({});if(o.set(r,1),o.get(r)===1)return void(d.exports=WeakMap);s=!0}}var n=Object.getOwnPropertyNames,a=Object.defineProperty,i=Object.isExtensible,c="weakmap:",h="weakmap:ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var f=new ArrayBuffer(25),b=new Uint8Array(f);crypto.getRandomValues(b),h="weakmap:rand:"+Array.prototype.map.call(b,function(E){return(E%36).toString(36)}).join("")+"___"}if(a(Object,"getOwnPropertyNames",{value:function(E){return n(E).filter(w)}}),"getPropertyNames"in Object){var v=Object.getPropertyNames;a(Object,"getPropertyNames",{value:function(E){return v(E).filter(w)}})}(function(){var E=Object.freeze;a(Object,"freeze",{value:function(P){return u(P),E(P)}});var L=Object.seal;a(Object,"seal",{value:function(P){return u(P),L(P)}});var C=Object.preventExtensions;a(Object,"preventExtensions",{value:function(P){return u(P),C(P)}})})();var g=!1,y=0,p=function(){this instanceof p||_();var E=[],L=[],C=y++;return Object.create(p.prototype,{get___:{value:S(function(P,I){var U,z=u(P);return z?C in z?z[C]:I:(U=E.indexOf(P))>=0?L[U]:I})},has___:{value:S(function(P){var I=u(P);return I?C in I:E.indexOf(P)>=0})},set___:{value:S(function(P,I){var U,z=u(P);return z?z[C]=I:(U=E.indexOf(P))>=0?L[U]=I:(U=E.length,L[U]=I,E[U]=P),this})},delete___:{value:S(function(P){var I,U,z=u(P);return z?C in z&&delete z[C]:!((I=E.indexOf(P))<0||(U=E.length-1,E[I]=void 0,L[I]=L[U],E[I]=E[U],E.length=U,L.length=U,0))})}})};p.prototype=Object.create(Object.prototype,{get:{value:function(E,L){return this.get___(E,L)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,L){return this.set___(E,L)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof t=="function"?function(){function E(){this instanceof p||_();var L,C=new t,P=void 0,I=!1;return L=s?function(U,z){return C.set(U,z),C.has(U)||(P||(P=new p),P.set(U,z)),this}:function(U,z){if(I)try{C.set(U,z)}catch{P||(P=new p),P.set___(U,z)}else C.set(U,z);return this},Object.create(p.prototype,{get___:{value:S(function(U,z){return P?C.has(U)?C.get(U):P.get___(U,z):C.get(U,z)})},has___:{value:S(function(U){return C.has(U)||!!P&&P.has___(U)})},set___:{value:S(L)},delete___:{value:S(function(U){var z=!!C.delete(U);return P&&P.delete___(U)||z})},permitHostObjects___:{value:S(function(U){if(U!==m)throw new Error("bogus call to permitHostObjects___");I=!0})}})}s&&typeof Proxy<"u"&&(Proxy=void 0),E.prototype=p.prototype,d.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),d.exports=p)}function m(E){E.permitHostObjects___&&E.permitHostObjects___(m)}function w(E){return!(E.substr(0,c.length)==c&&E.substr(E.length-3)==="___")}function u(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var L=E[h];if(L&&L.key===E)return L;if(i(E)){L={key:E};try{return a(E,h,{value:L,writable:!1,enumerable:!1,configurable:!1}),L}catch{return}}}function S(E){return E.prototype=null,Object.freeze(E)}function _(){g||typeof console>"u"||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},9222:function(d,s,t){var o=t(7178);d.exports=function(){var r={};return function(n){if((typeof n!="object"||n===null)&&typeof n!="function")throw new Error("Weakmap-shim: Key must be object");var a=n.valueOf(r);return a&&a.identity===r?a:o(n,r)}}},7178:function(d){d.exports=function(s,t){var o={identity:t},r=s.valueOf;return Object.defineProperty(s,"valueOf",{value:function(n){return n!==t?r.apply(this,arguments):o},writable:!0}),o}},4037:function(d,s,t){var o=t(9222);d.exports=function(){var r=o();return{get:function(n,a){var i=r(n);return i.hasOwnProperty("value")?i.value:a},set:function(n,a){return r(n).value=a,this},has:function(n){return"value"in r(n)},delete:function(n){return delete r(n).value}}}},6183:function(d){d.exports=function(s){var t={};return function(o,r,n){var a=o.dtype,i=o.order,c=[a,i.join()].join(),h=t[c];return h||(t[c]=h=s([a,i])),h(o.shape.slice(0),o.data,o.stride,0|o.offset,r,n)}}(function(){return function(s,t,o,r,n,a){var i=s[0],c=o[0],h=[0],f=c;r|=0;var b=0,v=c;for(b=0;b<i;++b){var g=t[r]-a,y=t[r+f]-a;g>=0!=y>=0&&n.push(h[0]+.5+.5*(g+y)/(g-y)),r+=v,++h[0]}}}.bind(void 0,{funcName:"zeroCrossings"}))},9584:function(d,s,t){d.exports=function(r,n){var a=[];return n=+n||0,o(r.hi(r.shape[0]-1),a,n),a};var o=t(6183)},6601:function(){}},T={};function x(d){var s=T[d];if(s!==void 0)return s.exports;var t=T[d]={id:d,loaded:!1,exports:{}};return l[d].call(t.exports,t,t.exports,x),t.loaded=!0,t.exports}return x.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),x.nmd=function(d){return d.paths=[],d.children||(d.children=[]),d},x(7386)}()},$.exports=k()},12856:function($,R,e){function k(Q,oe){if(!(Q instanceof oe))throw new TypeError("Cannot call a class as a function")}function A(Q,oe){for(var ce=0;ce<oe.length;ce++){var me=oe[ce];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(Q,me.key,me)}}function l(Q,oe){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ce,me){return ce.__proto__=me,ce},l(Q,oe)}function T(Q,oe){if(oe&&(s(oe)==="object"||typeof oe=="function"))return oe;if(oe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(Q)}function x(Q){if(Q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q}function d(Q){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(oe){return oe.__proto__||Object.getPrototypeOf(oe)},d(Q)}function s(Q){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},s(Q)}var t=e(95341),o=e(95280),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;R.Buffer=i,R.SlowBuffer=function(Q){return+Q!=Q&&(Q=0),i.alloc(+Q)},R.INSPECT_MAX_BYTES=50;var n=2147483647;function a(Q){if(Q>n)throw new RangeError('The value "'+Q+'" is invalid for option "size"');var oe=new Uint8Array(Q);return Object.setPrototypeOf(oe,i.prototype),oe}function i(Q,oe,ce){if(typeof Q=="number"){if(typeof oe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(Q)}return c(Q,oe,ce)}function c(Q,oe,ce){if(typeof Q=="string")return function(Ie,Ce){if(typeof Ce=="string"&&Ce!==""||(Ce="utf8"),!i.isEncoding(Ce))throw new TypeError("Unknown encoding: "+Ce);var Re=0|y(Ie,Ce),le=a(Re),de=le.write(Ie,Ce);return de!==Re&&(le=le.slice(0,de)),le}(Q,oe);if(ArrayBuffer.isView(Q))return function(Ie){if(Oe(Ie,Uint8Array)){var Ce=new Uint8Array(Ie);return v(Ce.buffer,Ce.byteOffset,Ce.byteLength)}return b(Ie)}(Q);if(Q==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+s(Q));if(Oe(Q,ArrayBuffer)||Q&&Oe(Q.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Oe(Q,SharedArrayBuffer)||Q&&Oe(Q.buffer,SharedArrayBuffer)))return v(Q,oe,ce);if(typeof Q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var me=Q.valueOf&&Q.valueOf();if(me!=null&&me!==Q)return i.from(me,oe,ce);var Ae=function(Ie){if(i.isBuffer(Ie)){var Ce=0|g(Ie.length),Re=a(Ce);return Re.length===0||Ie.copy(Re,0,0,Ce),Re}return Ie.length!==void 0?typeof Ie.length!="number"||xe(Ie.length)?a(0):b(Ie):Ie.type==="Buffer"&&Array.isArray(Ie.data)?b(Ie.data):void 0}(Q);if(Ae)return Ae;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Q[Symbol.toPrimitive]=="function")return i.from(Q[Symbol.toPrimitive]("string"),oe,ce);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+s(Q))}function h(Q){if(typeof Q!="number")throw new TypeError('"size" argument must be of type number');if(Q<0)throw new RangeError('The value "'+Q+'" is invalid for option "size"')}function f(Q){return h(Q),a(Q<0?0:0|g(Q))}function b(Q){for(var oe=Q.length<0?0:0|g(Q.length),ce=a(oe),me=0;me<oe;me+=1)ce[me]=255&Q[me];return ce}function v(Q,oe,ce){if(oe<0||Q.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if(Q.byteLength<oe+(ce||0))throw new RangeError('"length" is outside of buffer bounds');var me;return me=oe===void 0&&ce===void 0?new Uint8Array(Q):ce===void 0?new Uint8Array(Q,oe):new Uint8Array(Q,oe,ce),Object.setPrototypeOf(me,i.prototype),me}function g(Q){if(Q>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|Q}function y(Q,oe){if(i.isBuffer(Q))return Q.length;if(ArrayBuffer.isView(Q)||Oe(Q,ArrayBuffer))return Q.byteLength;if(typeof Q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+s(Q));var ce=Q.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&ce===0)return 0;for(var Ae=!1;;)switch(oe){case"ascii":case"latin1":case"binary":return ce;case"utf8":case"utf-8":return ge(Q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ce;case"hex":return ce>>>1;case"base64":return he(Q).length;default:if(Ae)return me?-1:ge(Q).length;oe=(""+oe).toLowerCase(),Ae=!0}}function p(Q,oe,ce){var me=!1;if((oe===void 0||oe<0)&&(oe=0),oe>this.length||((ce===void 0||ce>this.length)&&(ce=this.length),ce<=0)||(ce>>>=0)<=(oe>>>=0))return"";for(Q||(Q="utf8");;)switch(Q){case"hex":return F(this,oe,ce);case"utf8":case"utf-8":return I(this,oe,ce);case"ascii":return z(this,oe,ce);case"latin1":case"binary":return H(this,oe,ce);case"base64":return P(this,oe,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,oe,ce);default:if(me)throw new TypeError("Unknown encoding: "+Q);Q=(Q+"").toLowerCase(),me=!0}}function m(Q,oe,ce){var me=Q[oe];Q[oe]=Q[ce],Q[ce]=me}function w(Q,oe,ce,me,Ae){if(Q.length===0)return-1;if(typeof ce=="string"?(me=ce,ce=0):ce>2147483647?ce=2147483647:ce<-2147483648&&(ce=-2147483648),xe(ce=+ce)&&(ce=Ae?0:Q.length-1),ce<0&&(ce=Q.length+ce),ce>=Q.length){if(Ae)return-1;ce=Q.length-1}else if(ce<0){if(!Ae)return-1;ce=0}if(typeof oe=="string"&&(oe=i.from(oe,me)),i.isBuffer(oe))return oe.length===0?-1:u(Q,oe,ce,me,Ae);if(typeof oe=="number")return oe&=255,typeof Uint8Array.prototype.indexOf=="function"?Ae?Uint8Array.prototype.indexOf.call(Q,oe,ce):Uint8Array.prototype.lastIndexOf.call(Q,oe,ce):u(Q,[oe],ce,me,Ae);throw new TypeError("val must be string, number or Buffer")}function u(Q,oe,ce,me,Ae){var Ie,Ce=1,Re=Q.length,le=oe.length;if(me!==void 0&&((me=String(me).toLowerCase())==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(Q.length<2||oe.length<2)return-1;Ce=2,Re/=2,le/=2,ce/=2}function de(He,nt){return Ce===1?He[nt]:He.readUInt16BE(nt*Ce)}if(Ae){var _e=-1;for(Ie=ce;Ie<Re;Ie++)if(de(Q,Ie)===de(oe,_e===-1?0:Ie-_e)){if(_e===-1&&(_e=Ie),Ie-_e+1===le)return _e*Ce}else _e!==-1&&(Ie-=Ie-_e),_e=-1}else for(ce+le>Re&&(ce=Re-le),Ie=ce;Ie>=0;Ie--){for(var Fe=!0,Ve=0;Ve<le;Ve++)if(de(Q,Ie+Ve)!==de(oe,Ve)){Fe=!1;break}if(Fe)return Ie}return-1}function S(Q,oe,ce,me){ce=Number(ce)||0;var Ae=Q.length-ce;me?(me=Number(me))>Ae&&(me=Ae):me=Ae;var Ie,Ce=oe.length;for(me>Ce/2&&(me=Ce/2),Ie=0;Ie<me;++Ie){var Re=parseInt(oe.substr(2*Ie,2),16);if(xe(Re))return Ie;Q[ce+Ie]=Re}return Ie}function _(Q,oe,ce,me){return ve(ge(oe,Q.length-ce),Q,ce,me)}function E(Q,oe,ce,me){return ve(function(Ae){for(var Ie=[],Ce=0;Ce<Ae.length;++Ce)Ie.push(255&Ae.charCodeAt(Ce));return Ie}(oe),Q,ce,me)}function L(Q,oe,ce,me){return ve(he(oe),Q,ce,me)}function C(Q,oe,ce,me){return ve(function(Ae,Ie){for(var Ce,Re,le,de=[],_e=0;_e<Ae.length&&!((Ie-=2)<0);++_e)Re=(Ce=Ae.charCodeAt(_e))>>8,le=Ce%256,de.push(le),de.push(Re);return de}(oe,Q.length-ce),Q,ce,me)}function P(Q,oe,ce){return oe===0&&ce===Q.length?t.fromByteArray(Q):t.fromByteArray(Q.slice(oe,ce))}function I(Q,oe,ce){ce=Math.min(Q.length,ce);for(var me=[],Ae=oe;Ae<ce;){var Ie=Q[Ae],Ce=null,Re=Ie>239?4:Ie>223?3:Ie>191?2:1;if(Ae+Re<=ce){var le=void 0,de=void 0,_e=void 0,Fe=void 0;switch(Re){case 1:Ie<128&&(Ce=Ie);break;case 2:(192&(le=Q[Ae+1]))==128&&(Fe=(31&Ie)<<6|63&le)>127&&(Ce=Fe);break;case 3:le=Q[Ae+1],de=Q[Ae+2],(192&le)==128&&(192&de)==128&&(Fe=(15&Ie)<<12|(63&le)<<6|63&de)>2047&&(Fe<55296||Fe>57343)&&(Ce=Fe);break;case 4:le=Q[Ae+1],de=Q[Ae+2],_e=Q[Ae+3],(192&le)==128&&(192&de)==128&&(192&_e)==128&&(Fe=(15&Ie)<<18|(63&le)<<12|(63&de)<<6|63&_e)>65535&&Fe<1114112&&(Ce=Fe)}}Ce===null?(Ce=65533,Re=1):Ce>65535&&(Ce-=65536,me.push(Ce>>>10&1023|55296),Ce=56320|1023&Ce),me.push(Ce),Ae+=Re}return function(Ve){var He=Ve.length;if(He<=U)return String.fromCharCode.apply(String,Ve);for(var nt="",tt=0;tt<He;)nt+=String.fromCharCode.apply(String,Ve.slice(tt,tt+=U));return nt}(me)}R.kMaxLength=n,i.TYPED_ARRAY_SUPPORT=function(){try{var Q=new Uint8Array(1),oe={foo:function(){return 42}};return Object.setPrototypeOf(oe,Uint8Array.prototype),Object.setPrototypeOf(Q,oe),Q.foo()===42}catch{return!1}}(),i.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function(Q,oe,ce){return c(Q,oe,ce)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(Q,oe,ce){return function(me,Ae,Ie){return h(me),me<=0?a(me):Ae!==void 0?typeof Ie=="string"?a(me).fill(Ae,Ie):a(me).fill(Ae):a(me)}(Q,oe,ce)},i.allocUnsafe=function(Q){return f(Q)},i.allocUnsafeSlow=function(Q){return f(Q)},i.isBuffer=function(Q){return Q!=null&&Q._isBuffer===!0&&Q!==i.prototype},i.compare=function(Q,oe){if(Oe(Q,Uint8Array)&&(Q=i.from(Q,Q.offset,Q.byteLength)),Oe(oe,Uint8Array)&&(oe=i.from(oe,oe.offset,oe.byteLength)),!i.isBuffer(Q)||!i.isBuffer(oe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Q===oe)return 0;for(var ce=Q.length,me=oe.length,Ae=0,Ie=Math.min(ce,me);Ae<Ie;++Ae)if(Q[Ae]!==oe[Ae]){ce=Q[Ae],me=oe[Ae];break}return ce<me?-1:me<ce?1:0},i.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(Q,oe){if(!Array.isArray(Q))throw new TypeError('"list" argument must be an Array of Buffers');if(Q.length===0)return i.alloc(0);var ce;if(oe===void 0)for(oe=0,ce=0;ce<Q.length;++ce)oe+=Q[ce].length;var me=i.allocUnsafe(oe),Ae=0;for(ce=0;ce<Q.length;++ce){var Ie=Q[ce];if(Oe(Ie,Uint8Array))Ae+Ie.length>me.length?(i.isBuffer(Ie)||(Ie=i.from(Ie)),Ie.copy(me,Ae)):Uint8Array.prototype.set.call(me,Ie,Ae);else{if(!i.isBuffer(Ie))throw new TypeError('"list" argument must be an Array of Buffers');Ie.copy(me,Ae)}Ae+=Ie.length}return me},i.byteLength=y,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var Q=this.length;if(Q%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var oe=0;oe<Q;oe+=2)m(this,oe,oe+1);return this},i.prototype.swap32=function(){var Q=this.length;if(Q%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var oe=0;oe<Q;oe+=4)m(this,oe,oe+3),m(this,oe+1,oe+2);return this},i.prototype.swap64=function(){var Q=this.length;if(Q%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var oe=0;oe<Q;oe+=8)m(this,oe,oe+7),m(this,oe+1,oe+6),m(this,oe+2,oe+5),m(this,oe+3,oe+4);return this},i.prototype.toString=function(){var Q=this.length;return Q===0?"":arguments.length===0?I(this,0,Q):p.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(Q){if(!i.isBuffer(Q))throw new TypeError("Argument must be a Buffer");return this===Q||i.compare(this,Q)===0},i.prototype.inspect=function(){var Q="",oe=R.INSPECT_MAX_BYTES;return Q=this.toString("hex",0,oe).replace(/(.{2})/g,"$1 ").trim(),this.length>oe&&(Q+=" ... "),"<Buffer "+Q+">"},r&&(i.prototype[r]=i.prototype.inspect),i.prototype.compare=function(Q,oe,ce,me,Ae){if(Oe(Q,Uint8Array)&&(Q=i.from(Q,Q.offset,Q.byteLength)),!i.isBuffer(Q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+s(Q));if(oe===void 0&&(oe=0),ce===void 0&&(ce=Q?Q.length:0),me===void 0&&(me=0),Ae===void 0&&(Ae=this.length),oe<0||ce>Q.length||me<0||Ae>this.length)throw new RangeError("out of range index");if(me>=Ae&&oe>=ce)return 0;if(me>=Ae)return-1;if(oe>=ce)return 1;if(this===Q)return 0;for(var Ie=(Ae>>>=0)-(me>>>=0),Ce=(ce>>>=0)-(oe>>>=0),Re=Math.min(Ie,Ce),le=this.slice(me,Ae),de=Q.slice(oe,ce),_e=0;_e<Re;++_e)if(le[_e]!==de[_e]){Ie=le[_e],Ce=de[_e];break}return Ie<Ce?-1:Ce<Ie?1:0},i.prototype.includes=function(Q,oe,ce){return this.indexOf(Q,oe,ce)!==-1},i.prototype.indexOf=function(Q,oe,ce){return w(this,Q,oe,ce,!0)},i.prototype.lastIndexOf=function(Q,oe,ce){return w(this,Q,oe,ce,!1)},i.prototype.write=function(Q,oe,ce,me){if(oe===void 0)me="utf8",ce=this.length,oe=0;else if(ce===void 0&&typeof oe=="string")me=oe,ce=this.length,oe=0;else{if(!isFinite(oe))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");oe>>>=0,isFinite(ce)?(ce>>>=0,me===void 0&&(me="utf8")):(me=ce,ce=void 0)}var Ae=this.length-oe;if((ce===void 0||ce>Ae)&&(ce=Ae),Q.length>0&&(ce<0||oe<0)||oe>this.length)throw new RangeError("Attempt to write outside buffer bounds");me||(me="utf8");for(var Ie=!1;;)switch(me){case"hex":return S(this,Q,oe,ce);case"utf8":case"utf-8":return _(this,Q,oe,ce);case"ascii":case"latin1":case"binary":return E(this,Q,oe,ce);case"base64":return L(this,Q,oe,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,Q,oe,ce);default:if(Ie)throw new TypeError("Unknown encoding: "+me);me=(""+me).toLowerCase(),Ie=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var U=4096;function z(Q,oe,ce){var me="";ce=Math.min(Q.length,ce);for(var Ae=oe;Ae<ce;++Ae)me+=String.fromCharCode(127&Q[Ae]);return me}function H(Q,oe,ce){var me="";ce=Math.min(Q.length,ce);for(var Ae=oe;Ae<ce;++Ae)me+=String.fromCharCode(Q[Ae]);return me}function F(Q,oe,ce){var me=Q.length;(!oe||oe<0)&&(oe=0),(!ce||ce<0||ce>me)&&(ce=me);for(var Ae="",Ie=oe;Ie<ce;++Ie)Ae+=ke[Q[Ie]];return Ae}function N(Q,oe,ce){for(var me=Q.slice(oe,ce),Ae="",Ie=0;Ie<me.length-1;Ie+=2)Ae+=String.fromCharCode(me[Ie]+256*me[Ie+1]);return Ae}function B(Q,oe,ce){if(Q%1!=0||Q<0)throw new RangeError("offset is not uint");if(Q+oe>ce)throw new RangeError("Trying to access beyond buffer length")}function j(Q,oe,ce,me,Ae,Ie){if(!i.isBuffer(Q))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe>Ae||oe<Ie)throw new RangeError('"value" argument is out of bounds');if(ce+me>Q.length)throw new RangeError("Index out of range")}function K(Q,oe,ce,me,Ae){ie(oe,me,Ae,Q,ce,7);var Ie=Number(oe&BigInt(4294967295));Q[ce++]=Ie,Ie>>=8,Q[ce++]=Ie,Ie>>=8,Q[ce++]=Ie,Ie>>=8,Q[ce++]=Ie;var Ce=Number(oe>>BigInt(32)&BigInt(4294967295));return Q[ce++]=Ce,Ce>>=8,Q[ce++]=Ce,Ce>>=8,Q[ce++]=Ce,Ce>>=8,Q[ce++]=Ce,ce}function G(Q,oe,ce,me,Ae){ie(oe,me,Ae,Q,ce,7);var Ie=Number(oe&BigInt(4294967295));Q[ce+7]=Ie,Ie>>=8,Q[ce+6]=Ie,Ie>>=8,Q[ce+5]=Ie,Ie>>=8,Q[ce+4]=Ie;var Ce=Number(oe>>BigInt(32)&BigInt(4294967295));return Q[ce+3]=Ce,Ce>>=8,Q[ce+2]=Ce,Ce>>=8,Q[ce+1]=Ce,Ce>>=8,Q[ce]=Ce,ce+8}function V(Q,oe,ce,me,Ae,Ie){if(ce+me>Q.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("Index out of range")}function W(Q,oe,ce,me,Ae){return oe=+oe,ce>>>=0,Ae||V(Q,0,ce,4),o.write(Q,oe,ce,me,23,4),ce+4}function J(Q,oe,ce,me,Ae){return oe=+oe,ce>>>=0,Ae||V(Q,0,ce,8),o.write(Q,oe,ce,me,52,8),ce+8}i.prototype.slice=function(Q,oe){var ce=this.length;(Q=~~Q)<0?(Q+=ce)<0&&(Q=0):Q>ce&&(Q=ce),(oe=oe===void 0?ce:~~oe)<0?(oe+=ce)<0&&(oe=0):oe>ce&&(oe=ce),oe<Q&&(oe=Q);var me=this.subarray(Q,oe);return Object.setPrototypeOf(me,i.prototype),me},i.prototype.readUintLE=i.prototype.readUIntLE=function(Q,oe,ce){Q>>>=0,oe>>>=0,ce||B(Q,oe,this.length);for(var me=this[Q],Ae=1,Ie=0;++Ie<oe&&(Ae*=256);)me+=this[Q+Ie]*Ae;return me},i.prototype.readUintBE=i.prototype.readUIntBE=function(Q,oe,ce){Q>>>=0,oe>>>=0,ce||B(Q,oe,this.length);for(var me=this[Q+--oe],Ae=1;oe>0&&(Ae*=256);)me+=this[Q+--oe]*Ae;return me},i.prototype.readUint8=i.prototype.readUInt8=function(Q,oe){return Q>>>=0,oe||B(Q,1,this.length),this[Q]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(Q,oe){return Q>>>=0,oe||B(Q,2,this.length),this[Q]|this[Q+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(Q,oe){return Q>>>=0,oe||B(Q,2,this.length),this[Q]<<8|this[Q+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(Q,oe){return Q>>>=0,oe||B(Q,4,this.length),(this[Q]|this[Q+1]<<8|this[Q+2]<<16)+16777216*this[Q+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(Q,oe){return Q>>>=0,oe||B(Q,4,this.length),16777216*this[Q]+(this[Q+1]<<16|this[Q+2]<<8|this[Q+3])},i.prototype.readBigUInt64LE=Me(function(Q){se(Q>>>=0,"offset");var oe=this[Q],ce=this[Q+7];oe!==void 0&&ce!==void 0||fe(Q,this.length-8);var me=oe+this[++Q]*Math.pow(2,8)+this[++Q]*Math.pow(2,16)+this[++Q]*Math.pow(2,24),Ae=this[++Q]+this[++Q]*Math.pow(2,8)+this[++Q]*Math.pow(2,16)+ce*Math.pow(2,24);return BigInt(me)+(BigInt(Ae)<<BigInt(32))}),i.prototype.readBigUInt64BE=Me(function(Q){se(Q>>>=0,"offset");var oe=this[Q],ce=this[Q+7];oe!==void 0&&ce!==void 0||fe(Q,this.length-8);var me=oe*Math.pow(2,24)+this[++Q]*Math.pow(2,16)+this[++Q]*Math.pow(2,8)+this[++Q],Ae=this[++Q]*Math.pow(2,24)+this[++Q]*Math.pow(2,16)+this[++Q]*Math.pow(2,8)+ce;return(BigInt(me)<<BigInt(32))+BigInt(Ae)}),i.prototype.readIntLE=function(Q,oe,ce){Q>>>=0,oe>>>=0,ce||B(Q,oe,this.length);for(var me=this[Q],Ae=1,Ie=0;++Ie<oe&&(Ae*=256);)me+=this[Q+Ie]*Ae;return me>=(Ae*=128)&&(me-=Math.pow(2,8*oe)),me},i.prototype.readIntBE=function(Q,oe,ce){Q>>>=0,oe>>>=0,ce||B(Q,oe,this.length);for(var me=oe,Ae=1,Ie=this[Q+--me];me>0&&(Ae*=256);)Ie+=this[Q+--me]*Ae;return Ie>=(Ae*=128)&&(Ie-=Math.pow(2,8*oe)),Ie},i.prototype.readInt8=function(Q,oe){return Q>>>=0,oe||B(Q,1,this.length),128&this[Q]?-1*(255-this[Q]+1):this[Q]},i.prototype.readInt16LE=function(Q,oe){Q>>>=0,oe||B(Q,2,this.length);var ce=this[Q]|this[Q+1]<<8;return 32768&ce?4294901760|ce:ce},i.prototype.readInt16BE=function(Q,oe){Q>>>=0,oe||B(Q,2,this.length);var ce=this[Q+1]|this[Q]<<8;return 32768&ce?4294901760|ce:ce},i.prototype.readInt32LE=function(Q,oe){return Q>>>=0,oe||B(Q,4,this.length),this[Q]|this[Q+1]<<8|this[Q+2]<<16|this[Q+3]<<24},i.prototype.readInt32BE=function(Q,oe){return Q>>>=0,oe||B(Q,4,this.length),this[Q]<<24|this[Q+1]<<16|this[Q+2]<<8|this[Q+3]},i.prototype.readBigInt64LE=Me(function(Q){se(Q>>>=0,"offset");var oe=this[Q],ce=this[Q+7];oe!==void 0&&ce!==void 0||fe(Q,this.length-8);var me=this[Q+4]+this[Q+5]*Math.pow(2,8)+this[Q+6]*Math.pow(2,16)+(ce<<24);return(BigInt(me)<<BigInt(32))+BigInt(oe+this[++Q]*Math.pow(2,8)+this[++Q]*Math.pow(2,16)+this[++Q]*Math.pow(2,24))}),i.prototype.readBigInt64BE=Me(function(Q){se(Q>>>=0,"offset");var oe=this[Q],ce=this[Q+7];oe!==void 0&&ce!==void 0||fe(Q,this.length-8);var me=(oe<<24)+this[++Q]*Math.pow(2,16)+this[++Q]*Math.pow(2,8)+this[++Q];return(BigInt(me)<<BigInt(32))+BigInt(this[++Q]*Math.pow(2,24)+this[++Q]*Math.pow(2,16)+this[++Q]*Math.pow(2,8)+ce)}),i.prototype.readFloatLE=function(Q,oe){return Q>>>=0,oe||B(Q,4,this.length),o.read(this,Q,!0,23,4)},i.prototype.readFloatBE=function(Q,oe){return Q>>>=0,oe||B(Q,4,this.length),o.read(this,Q,!1,23,4)},i.prototype.readDoubleLE=function(Q,oe){return Q>>>=0,oe||B(Q,8,this.length),o.read(this,Q,!0,52,8)},i.prototype.readDoubleBE=function(Q,oe){return Q>>>=0,oe||B(Q,8,this.length),o.read(this,Q,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function(Q,oe,ce,me){Q=+Q,oe>>>=0,ce>>>=0,me||j(this,Q,oe,ce,Math.pow(2,8*ce)-1,0);var Ae=1,Ie=0;for(this[oe]=255&Q;++Ie<ce&&(Ae*=256);)this[oe+Ie]=Q/Ae&255;return oe+ce},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(Q,oe,ce,me){Q=+Q,oe>>>=0,ce>>>=0,me||j(this,Q,oe,ce,Math.pow(2,8*ce)-1,0);var Ae=ce-1,Ie=1;for(this[oe+Ae]=255&Q;--Ae>=0&&(Ie*=256);)this[oe+Ae]=Q/Ie&255;return oe+ce},i.prototype.writeUint8=i.prototype.writeUInt8=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,1,255,0),this[oe]=255&Q,oe+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,2,65535,0),this[oe]=255&Q,this[oe+1]=Q>>>8,oe+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,2,65535,0),this[oe]=Q>>>8,this[oe+1]=255&Q,oe+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,4,4294967295,0),this[oe+3]=Q>>>24,this[oe+2]=Q>>>16,this[oe+1]=Q>>>8,this[oe]=255&Q,oe+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,4,4294967295,0),this[oe]=Q>>>24,this[oe+1]=Q>>>16,this[oe+2]=Q>>>8,this[oe+3]=255&Q,oe+4},i.prototype.writeBigUInt64LE=Me(function(Q){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return K(this,Q,oe,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=Me(function(Q){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return G(this,Q,oe,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(Q,oe,ce,me){if(Q=+Q,oe>>>=0,!me){var Ae=Math.pow(2,8*ce-1);j(this,Q,oe,ce,Ae-1,-Ae)}var Ie=0,Ce=1,Re=0;for(this[oe]=255&Q;++Ie<ce&&(Ce*=256);)Q<0&&Re===0&&this[oe+Ie-1]!==0&&(Re=1),this[oe+Ie]=(Q/Ce>>0)-Re&255;return oe+ce},i.prototype.writeIntBE=function(Q,oe,ce,me){if(Q=+Q,oe>>>=0,!me){var Ae=Math.pow(2,8*ce-1);j(this,Q,oe,ce,Ae-1,-Ae)}var Ie=ce-1,Ce=1,Re=0;for(this[oe+Ie]=255&Q;--Ie>=0&&(Ce*=256);)Q<0&&Re===0&&this[oe+Ie+1]!==0&&(Re=1),this[oe+Ie]=(Q/Ce>>0)-Re&255;return oe+ce},i.prototype.writeInt8=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,1,127,-128),Q<0&&(Q=255+Q+1),this[oe]=255&Q,oe+1},i.prototype.writeInt16LE=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,2,32767,-32768),this[oe]=255&Q,this[oe+1]=Q>>>8,oe+2},i.prototype.writeInt16BE=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,2,32767,-32768),this[oe]=Q>>>8,this[oe+1]=255&Q,oe+2},i.prototype.writeInt32LE=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,4,2147483647,-2147483648),this[oe]=255&Q,this[oe+1]=Q>>>8,this[oe+2]=Q>>>16,this[oe+3]=Q>>>24,oe+4},i.prototype.writeInt32BE=function(Q,oe,ce){return Q=+Q,oe>>>=0,ce||j(this,Q,oe,4,2147483647,-2147483648),Q<0&&(Q=4294967295+Q+1),this[oe]=Q>>>24,this[oe+1]=Q>>>16,this[oe+2]=Q>>>8,this[oe+3]=255&Q,oe+4},i.prototype.writeBigInt64LE=Me(function(Q){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return K(this,Q,oe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=Me(function(Q){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return G(this,Q,oe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeFloatLE=function(Q,oe,ce){return W(this,Q,oe,!0,ce)},i.prototype.writeFloatBE=function(Q,oe,ce){return W(this,Q,oe,!1,ce)},i.prototype.writeDoubleLE=function(Q,oe,ce){return J(this,Q,oe,!0,ce)},i.prototype.writeDoubleBE=function(Q,oe,ce){return J(this,Q,oe,!1,ce)},i.prototype.copy=function(Q,oe,ce,me){if(!i.isBuffer(Q))throw new TypeError("argument should be a Buffer");if(ce||(ce=0),me||me===0||(me=this.length),oe>=Q.length&&(oe=Q.length),oe||(oe=0),me>0&&me<ce&&(me=ce),me===ce||Q.length===0||this.length===0)return 0;if(oe<0)throw new RangeError("targetStart out of bounds");if(ce<0||ce>=this.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("sourceEnd out of bounds");me>this.length&&(me=this.length),Q.length-oe<me-ce&&(me=Q.length-oe+ce);var Ae=me-ce;return this===Q&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(oe,ce,me):Uint8Array.prototype.set.call(Q,this.subarray(ce,me),oe),Ae},i.prototype.fill=function(Q,oe,ce,me){if(typeof Q=="string"){if(typeof oe=="string"?(me=oe,oe=0,ce=this.length):typeof ce=="string"&&(me=ce,ce=this.length),me!==void 0&&typeof me!="string")throw new TypeError("encoding must be a string");if(typeof me=="string"&&!i.isEncoding(me))throw new TypeError("Unknown encoding: "+me);if(Q.length===1){var Ae=Q.charCodeAt(0);(me==="utf8"&&Ae<128||me==="latin1")&&(Q=Ae)}}else typeof Q=="number"?Q&=255:typeof Q=="boolean"&&(Q=Number(Q));if(oe<0||this.length<oe||this.length<ce)throw new RangeError("Out of range index");if(ce<=oe)return this;var Ie;if(oe>>>=0,ce=ce===void 0?this.length:ce>>>0,Q||(Q=0),typeof Q=="number")for(Ie=oe;Ie<ce;++Ie)this[Ie]=Q;else{var Ce=i.isBuffer(Q)?Q:i.from(Q,me),Re=Ce.length;if(Re===0)throw new TypeError('The value "'+Q+'" is invalid for argument "value"');for(Ie=0;Ie<ce-oe;++Ie)this[Ie+oe]=Ce[Ie%Re]}return this};var X={};function ee(Q,oe,ce){X[Q]=function(me){(function(_e,Fe){if(typeof Fe!="function"&&Fe!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(Fe&&Fe.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),Fe&&l(_e,Fe)})(de,me);var Ae,Ie,Ce,Re,le=(Ce=de,Re=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var _e,Fe=d(Ce);if(Re){var Ve=d(this).constructor;_e=Reflect.construct(Fe,arguments,Ve)}else _e=Fe.apply(this,arguments);return T(this,_e)});function de(){var _e;return k(this,de),_e=le.call(this),Object.defineProperty(x(_e),"message",{value:oe.apply(x(_e),arguments),writable:!0,configurable:!0}),_e.name="".concat(_e.name," [").concat(Q,"]"),_e.stack,delete _e.name,_e}return Ae=de,(Ie=[{key:"code",get:function(){return Q},set:function(_e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(Q,"]: ").concat(this.message)}}])&&A(Ae.prototype,Ie),Object.defineProperty(Ae,"prototype",{writable:!1}),de}(ce)}function re(Q){for(var oe="",ce=Q.length,me=Q[0]==="-"?1:0;ce>=me+4;ce-=3)oe="_".concat(Q.slice(ce-3,ce)).concat(oe);return"".concat(Q.slice(0,ce)).concat(oe)}function ie(Q,oe,ce,me,Ae,Ie){if(Q>ce||Q<oe){var Ce,Re=typeof oe=="bigint"?"n":"";throw Ce=Ie>3?oe===0||oe===BigInt(0)?">= 0".concat(Re," and < 2").concat(Re," ** ").concat(8*(Ie+1)).concat(Re):">= -(2".concat(Re," ** ").concat(8*(Ie+1)-1).concat(Re,") and < 2 ** ")+"".concat(8*(Ie+1)-1).concat(Re):">= ".concat(oe).concat(Re," and <= ").concat(ce).concat(Re),new X.ERR_OUT_OF_RANGE("value",Ce,Q)}(function(le,de,_e){se(de,"offset"),le[de]!==void 0&&le[de+_e]!==void 0||fe(de,le.length-(_e+1))})(me,Ae,Ie)}function se(Q,oe){if(typeof Q!="number")throw new X.ERR_INVALID_ARG_TYPE(oe,"number",Q)}function fe(Q,oe,ce){throw Math.floor(Q)!==Q?(se(Q,ce),new X.ERR_OUT_OF_RANGE(ce||"offset","an integer",Q)):oe<0?new X.ERR_BUFFER_OUT_OF_BOUNDS:new X.ERR_OUT_OF_RANGE(ce||"offset",">= ".concat(ce?1:0," and <= ").concat(oe),Q)}ee("ERR_BUFFER_OUT_OF_BOUNDS",function(Q){return Q?"".concat(Q," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ee("ERR_INVALID_ARG_TYPE",function(Q,oe){return'The "'.concat(Q,'" argument must be of type number. Received type ').concat(s(oe))},TypeError),ee("ERR_OUT_OF_RANGE",function(Q,oe,ce){var me='The value of "'.concat(Q,'" is out of range.'),Ae=ce;return Number.isInteger(ce)&&Math.abs(ce)>Math.pow(2,32)?Ae=re(String(ce)):typeof ce=="bigint"&&(Ae=String(ce),(ce>Math.pow(BigInt(2),BigInt(32))||ce<-Math.pow(BigInt(2),BigInt(32)))&&(Ae=re(Ae)),Ae+="n"),me+" It must be ".concat(oe,". Received ").concat(Ae)},RangeError);var ye=/[^+/0-9A-Za-z-_]/g;function ge(Q,oe){var ce;oe=oe||1/0;for(var me=Q.length,Ae=null,Ie=[],Ce=0;Ce<me;++Ce){if((ce=Q.charCodeAt(Ce))>55295&&ce<57344){if(!Ae){if(ce>56319){(oe-=3)>-1&&Ie.push(239,191,189);continue}if(Ce+1===me){(oe-=3)>-1&&Ie.push(239,191,189);continue}Ae=ce;continue}if(ce<56320){(oe-=3)>-1&&Ie.push(239,191,189),Ae=ce;continue}ce=65536+(Ae-55296<<10|ce-56320)}else Ae&&(oe-=3)>-1&&Ie.push(239,191,189);if(Ae=null,ce<128){if((oe-=1)<0)break;Ie.push(ce)}else if(ce<2048){if((oe-=2)<0)break;Ie.push(ce>>6|192,63&ce|128)}else if(ce<65536){if((oe-=3)<0)break;Ie.push(ce>>12|224,ce>>6&63|128,63&ce|128)}else{if(!(ce<1114112))throw new Error("Invalid code point");if((oe-=4)<0)break;Ie.push(ce>>18|240,ce>>12&63|128,ce>>6&63|128,63&ce|128)}}return Ie}function he(Q){return t.toByteArray(function(oe){if((oe=(oe=oe.split("=")[0]).trim().replace(ye,"")).length<2)return"";for(;oe.length%4!=0;)oe+="=";return oe}(Q))}function ve(Q,oe,ce,me){var Ae;for(Ae=0;Ae<me&&!(Ae+ce>=oe.length||Ae>=Q.length);++Ae)oe[Ae+ce]=Q[Ae];return Ae}function Oe(Q,oe){return Q instanceof oe||Q!=null&&Q.constructor!=null&&Q.constructor.name!=null&&Q.constructor.name===oe.name}function xe(Q){return Q!=Q}var ke=function(){for(var Q="0123456789abcdef",oe=new Array(256),ce=0;ce<16;++ce)for(var me=16*ce,Ae=0;Ae<16;++Ae)oe[me+Ae]=Q[ce]+Q[Ae];return oe}();function Me(Q){return typeof BigInt>"u"?Te:Q}function Te(){throw new Error("BigInt not supported")}},35791:function($){$.exports=A,$.exports.isMobile=A,$.exports.default=A;var R=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,k=/android|ipad|playbook|silk/i;function A(l){l||(l={});var T=l.ua;if(T||typeof navigator>"u"||(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),typeof T!="string")return!1;var x=R.test(T)&&!e.test(T)||!!l.tablet&&k.test(T);return!x&&l.tablet&&l.featureDetect&&navigator&&navigator.maxTouchPoints>1&&T.indexOf("Macintosh")!==-1&&T.indexOf("Safari")!==-1&&(x=!0),x}},86781:function($,R,e){e.r(R),e.d(R,{sankeyCenter:function(){return r},sankeyCircular:function(){return E},sankeyJustify:function(){return o},sankeyLeft:function(){return s},sankeyRight:function(){return t}});var k=e(33064),A=e(15140),l=e(45879),T=e(2502),x=e.n(T);function d(he){return he.target.depth}function s(he){return he.depth}function t(he,ve){return ve-1-he.height}function o(he,ve){return he.sourceLinks.length?he.depth:ve-1}function r(he){return he.targetLinks.length?he.depth:he.sourceLinks.length?(0,k.VV)(he.sourceLinks,d)-1:0}function n(he){return function(){return he}}var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he};function i(he,ve){return h(he.source,ve.source)||he.index-ve.index}function c(he,ve){return h(he.target,ve.target)||he.index-ve.index}function h(he,ve){return he.partOfCycle===ve.partOfCycle?he.y0-ve.y0:he.circularLinkType==="top"||ve.circularLinkType==="bottom"?-1:1}function f(he){return he.value}function b(he){return(he.y0+he.y1)/2}function v(he){return b(he.source)}function g(he){return b(he.target)}function y(he){return he.index}function p(he){return he.nodes}function m(he){return he.links}function w(he,ve){var Oe=he.get(ve);if(!Oe)throw new Error("missing: "+ve);return Oe}function u(he,ve){return ve(he)}var S=25,_=10;function E(){var he,ve,Oe=0,xe=0,ke=1,Me=1,Te=24,Q=y,oe=o,ce=p,me=m,Ae=32,Ie=2,Ce=null;function Re(){var He={nodes:ce.apply(null,arguments),links:me.apply(null,arguments)};le(He),L(He,0,Ce),de(He),_e(He),C(He,Q),Fe(He,Ae,Q),Ve(He);for(var nt=4,tt=0;tt<nt;tt++)re(He,Me,Q),ie(He,0,Q),X(He,xe,Me,Q),re(He,Me,Q),ie(He,0,Q);return ge(He,xe,Me),H(He,Ie,Me,Q),He}function le(He){He.nodes.forEach(function(tt,ot){tt.index=ot,tt.sourceLinks=[],tt.targetLinks=[]});var nt=(0,A.UI)(He.nodes,Q);return He.links.forEach(function(tt,ot){tt.index=ot;var dt=tt.source,kt=tt.target;(dt===void 0?"undefined":a(dt))!=="object"&&(dt=tt.source=w(nt,dt)),(kt===void 0?"undefined":a(kt))!=="object"&&(kt=tt.target=w(nt,kt)),dt.sourceLinks.push(tt),kt.targetLinks.push(tt)}),He}function de(He){He.nodes.forEach(function(nt){nt.partOfCycle=!1,nt.value=Math.max((0,k.Sm)(nt.sourceLinks,f),(0,k.Sm)(nt.targetLinks,f)),nt.sourceLinks.forEach(function(tt){tt.circular&&(nt.partOfCycle=!0,nt.circularLinkType=tt.circularLinkType)}),nt.targetLinks.forEach(function(tt){tt.circular&&(nt.partOfCycle=!0,nt.circularLinkType=tt.circularLinkType)})})}function _e(He){var nt,tt,ot;for(nt=He.nodes,tt=[],ot=0;nt.length;++ot,nt=tt,tt=[])nt.forEach(function(dt){dt.depth=ot,dt.sourceLinks.forEach(function(kt){tt.indexOf(kt.target)<0&&!kt.circular&&tt.push(kt.target)})});for(nt=He.nodes,tt=[],ot=0;nt.length;++ot,nt=tt,tt=[])nt.forEach(function(dt){dt.height=ot,dt.targetLinks.forEach(function(kt){tt.indexOf(kt.source)<0&&!kt.circular&&tt.push(kt.source)})});He.nodes.forEach(function(dt){dt.column=Math.floor(oe.call(null,dt,ot))})}function Fe(He,nt,tt){var ot=(0,A.b1)().key(function(Lt){return Lt.column}).sortKeys(k.j2).entries(He.nodes).map(function(Lt){return Lt.values});(function(Lt){if(ve){var Ct=1/0;ot.forEach(function(Ge){var We=Me*ve/(Ge.length+1);Ct=We<Ct?We:Ct}),he=Ct}var It=(0,k.VV)(ot,function(Ge){return(Me-xe-(Ge.length-1)*he)/(0,k.Sm)(Ge,f)});It*=.3,He.links.forEach(function(Ge){Ge.width=Ge.value*It});var Ut=function(Ge){var We=0,Be=0,Ye=0,rt=0,Se=(0,k.Fp)(Ge.nodes,function(ze){return ze.column});return Ge.links.forEach(function(ze){ze.circular&&(ze.circularLinkType=="top"?We+=ze.width:Be+=ze.width,ze.target.column==0&&(rt+=ze.width),ze.source.column==Se&&(Ye+=ze.width))}),{top:We=We>0?We+S+_:We,bottom:Be=Be>0?Be+S+_:Be,left:rt=rt>0?rt+S+_:rt,right:Ye=Ye>0?Ye+S+_:Ye}}(He),Rt=function(Ge,We){var Be=(0,k.Fp)(Ge.nodes,function(Ke){return Ke.column}),Ye=ke-Oe,rt=Me-xe,Se=Ye/(Ye+We.right+We.left),ze=rt/(rt+We.top+We.bottom);return Oe=Oe*Se+We.left,ke=We.right==0?ke:ke*Se,xe=xe*ze+We.top,Me*=ze,Ge.nodes.forEach(function(Ke){Ke.x0=Oe+Ke.column*((ke-Oe-Te)/Be),Ke.x1=Ke.x0+Te}),ze}(He,Ut);It*=Rt,He.links.forEach(function(Ge){Ge.width=Ge.value*It}),ot.forEach(function(Ge){var We=Ge.length;Ge.forEach(function(Be,Ye){Be.depth==ot.length-1&&We==1||Be.depth==0&&We==1?(Be.y0=Me/2-Be.value*It,Be.y1=Be.y0+Be.value*It):Be.partOfCycle?I(Be,Lt)==0?(Be.y0=Me/2+Ye,Be.y1=Be.y0+Be.value*It):Be.circularLinkType=="top"?(Be.y0=xe+Ye,Be.y1=Be.y0+Be.value*It):(Be.y0=Me-Be.value*It-Ye,Be.y1=Be.y0+Be.value*It):Ut.top==0||Ut.bottom==0?(Be.y0=(Me-xe)/We*Ye,Be.y1=Be.y0+Be.value*It):(Be.y0=(Me-xe)/2-We/2+Ye,Be.y1=Be.y0+Be.value*It)})})})(tt),wt();for(var dt=1,kt=nt;kt>0;--kt)mt(dt*=.99,tt),wt();function mt(Lt,Ct){var It=ot.length;ot.forEach(function(Ut){var Rt=Ut.length,Ge=Ut[0].depth;Ut.forEach(function(We){var Be;if((We.sourceLinks.length||We.targetLinks.length)&&!(We.partOfCycle&&I(We,Ct)>0))if(Ge==0&&Rt==1)Be=We.y1-We.y0,We.y0=Me/2-Be/2,We.y1=Me/2+Be/2;else if(Ge==It-1&&Rt==1)Be=We.y1-We.y0,We.y0=Me/2-Be/2,We.y1=Me/2+Be/2;else{var Ye=(0,k.J6)(We.sourceLinks,g),rt=(0,k.J6)(We.targetLinks,v),Se=((Ye&&rt?(Ye+rt)/2:Ye||rt)-b(We))*Lt;We.y0+=Se,We.y1+=Se}})})}function wt(){ot.forEach(function(Lt){var Ct,It,Ut,Rt=xe,Ge=Lt.length;for(Lt.sort(h),Ut=0;Ut<Ge;++Ut)(It=Rt-(Ct=Lt[Ut]).y0)>0&&(Ct.y0+=It,Ct.y1+=It),Rt=Ct.y1+he;if((It=Rt-he-Me)>0)for(Rt=Ct.y0-=It,Ct.y1-=It,Ut=Ge-2;Ut>=0;--Ut)(It=(Ct=Lt[Ut]).y1+he-Rt)>0&&(Ct.y0-=It,Ct.y1-=It),Rt=Ct.y0})}}function Ve(He){He.nodes.forEach(function(nt){nt.sourceLinks.sort(c),nt.targetLinks.sort(i)}),He.nodes.forEach(function(nt){var tt=nt.y0,ot=tt,dt=nt.y1,kt=dt;nt.sourceLinks.forEach(function(mt){mt.circular?(mt.y0=dt-mt.width/2,dt-=mt.width):(mt.y0=tt+mt.width/2,tt+=mt.width)}),nt.targetLinks.forEach(function(mt){mt.circular?(mt.y1=kt-mt.width/2,kt-=mt.width):(mt.y1=ot+mt.width/2,ot+=mt.width)})})}return Re.nodeId=function(He){return arguments.length?(Q=typeof He=="function"?He:n(He),Re):Q},Re.nodeAlign=function(He){return arguments.length?(oe=typeof He=="function"?He:n(He),Re):oe},Re.nodeWidth=function(He){return arguments.length?(Te=+He,Re):Te},Re.nodePadding=function(He){return arguments.length?(he=+He,Re):he},Re.nodes=function(He){return arguments.length?(ce=typeof He=="function"?He:n(He),Re):ce},Re.links=function(He){return arguments.length?(me=typeof He=="function"?He:n(He),Re):me},Re.size=function(He){return arguments.length?(Oe=xe=0,ke=+He[0],Me=+He[1],Re):[ke-Oe,Me-xe]},Re.extent=function(He){return arguments.length?(Oe=+He[0][0],ke=+He[1][0],xe=+He[0][1],Me=+He[1][1],Re):[[Oe,xe],[ke,Me]]},Re.iterations=function(He){return arguments.length?(Ae=+He,Re):Ae},Re.circularLinkGap=function(He){return arguments.length?(Ie=+He,Re):Ie},Re.nodePaddingRatio=function(He){return arguments.length?(ve=+He,Re):ve},Re.sortNodes=function(He){return arguments.length?(Ce=He,Re):Ce},Re.update=function(He){return C(He,Q),Ve(He),He.links.forEach(function(nt){nt.circular&&(nt.circularLinkType=nt.y0+nt.y1<Me?"top":"bottom",nt.source.circularLinkType=nt.circularLinkType,nt.target.circularLinkType=nt.circularLinkType)}),re(He,Me,Q,!1),ie(He,0,Q),H(He,Ie,Me,Q),He},Re}function L(he,ve,Oe){var xe=0;if(Oe===null){for(var ke=[],Me=0;Me<he.links.length;Me++){var Te=he.links[Me],Q=Te.source.index,oe=Te.target.index;ke[Q]||(ke[Q]=[]),ke[oe]||(ke[oe]=[]),ke[Q].indexOf(oe)===-1&&ke[Q].push(oe)}var ce=x()(ke);ce.sort(function(Ie,Ce){return Ie.length-Ce.length});var me={};for(Me=0;Me<ce.length;Me++){var Ae=ce[Me].slice(-2);me[Ae[0]]||(me[Ae[0]]={}),me[Ae[0]][Ae[1]]=!0}he.links.forEach(function(Ie){var Ce=Ie.target.index,Re=Ie.source.index;Ce===Re||me[Re]&&me[Re][Ce]?(Ie.circular=!0,Ie.circularLinkID=xe,xe+=1):Ie.circular=!1})}else he.links.forEach(function(Ie){Ie.source[Oe]<Ie.target[Oe]?Ie.circular=!1:(Ie.circular=!0,Ie.circularLinkID=xe,xe+=1)})}function C(he,ve){var Oe=0,xe=0;he.links.forEach(function(ke){ke.circular&&(ke.source.circularLinkType||ke.target.circularLinkType?ke.circularLinkType=ke.source.circularLinkType?ke.source.circularLinkType:ke.target.circularLinkType:ke.circularLinkType=Oe<xe?"top":"bottom",ke.circularLinkType=="top"?Oe+=1:xe+=1,he.nodes.forEach(function(Me){u(Me,ve)!=u(ke.source,ve)&&u(Me,ve)!=u(ke.target,ve)||(Me.circularLinkType=ke.circularLinkType)}))}),he.links.forEach(function(ke){ke.circular&&(ke.source.circularLinkType==ke.target.circularLinkType&&(ke.circularLinkType=ke.source.circularLinkType),ye(ke,ve)&&(ke.circularLinkType=ke.source.circularLinkType))})}function P(he){var ve=Math.abs(he.y1-he.y0),Oe=Math.abs(he.target.x0-he.source.x1);return Math.atan(Oe/ve)}function I(he,ve){var Oe=0;he.sourceLinks.forEach(function(ke){Oe=ke.circular&&!ye(ke,ve)?Oe+1:Oe});var xe=0;return he.targetLinks.forEach(function(ke){xe=ke.circular&&!ye(ke,ve)?xe+1:xe}),Oe+xe}function U(he){var ve=he.source.sourceLinks,Oe=0;ve.forEach(function(Me){Oe=Me.circular?Oe+1:Oe});var xe=he.target.targetLinks,ke=0;return xe.forEach(function(Me){ke=Me.circular?ke+1:ke}),!(Oe>1||ke>1)}function z(he,ve,Oe){return he.sort(F),he.forEach(function(xe,ke){var Me,Te,Q=0;if(ye(xe,Oe)&&U(xe))xe.circularPathData.verticalBuffer=Q+xe.width/2;else{for(var oe=0;oe<ke;oe++)if(Me=he[ke],Te=he[oe],!(Me.source.column<Te.target.column||Me.target.column>Te.source.column)){var ce=he[oe].circularPathData.verticalBuffer+he[oe].width/2+ve;Q=ce>Q?ce:Q}xe.circularPathData.verticalBuffer=Q+xe.width/2}}),he}function H(he,ve,Oe,xe){var ke=(0,k.VV)(he.links,function(Me){return Me.source.y0});he.links.forEach(function(Me){Me.circular&&(Me.circularPathData={})}),z(he.links.filter(function(Me){return Me.circularLinkType=="top"}),ve,xe),z(he.links.filter(function(Me){return Me.circularLinkType=="bottom"}),ve,xe),he.links.forEach(function(Me){if(Me.circular){if(Me.circularPathData.arcRadius=Me.width+_,Me.circularPathData.leftNodeBuffer=5,Me.circularPathData.rightNodeBuffer=5,Me.circularPathData.sourceWidth=Me.source.x1-Me.source.x0,Me.circularPathData.sourceX=Me.source.x0+Me.circularPathData.sourceWidth,Me.circularPathData.targetX=Me.target.x0,Me.circularPathData.sourceY=Me.y0,Me.circularPathData.targetY=Me.y1,ye(Me,xe)&&U(Me))Me.circularPathData.leftSmallArcRadius=_+Me.width/2,Me.circularPathData.leftLargeArcRadius=_+Me.width/2,Me.circularPathData.rightSmallArcRadius=_+Me.width/2,Me.circularPathData.rightLargeArcRadius=_+Me.width/2,Me.circularLinkType=="bottom"?(Me.circularPathData.verticalFullExtent=Me.source.y1+S+Me.circularPathData.verticalBuffer,Me.circularPathData.verticalLeftInnerExtent=Me.circularPathData.verticalFullExtent-Me.circularPathData.leftLargeArcRadius,Me.circularPathData.verticalRightInnerExtent=Me.circularPathData.verticalFullExtent-Me.circularPathData.rightLargeArcRadius):(Me.circularPathData.verticalFullExtent=Me.source.y0-S-Me.circularPathData.verticalBuffer,Me.circularPathData.verticalLeftInnerExtent=Me.circularPathData.verticalFullExtent+Me.circularPathData.leftLargeArcRadius,Me.circularPathData.verticalRightInnerExtent=Me.circularPathData.verticalFullExtent+Me.circularPathData.rightLargeArcRadius);else{var Te=Me.source.column,Q=Me.circularLinkType,oe=he.links.filter(function(Ae){return Ae.source.column==Te&&Ae.circularLinkType==Q});Me.circularLinkType=="bottom"?oe.sort(B):oe.sort(N);var ce=0;oe.forEach(function(Ae,Ie){Ae.circularLinkID==Me.circularLinkID&&(Me.circularPathData.leftSmallArcRadius=_+Me.width/2+ce,Me.circularPathData.leftLargeArcRadius=_+Me.width/2+Ie*ve+ce),ce+=Ae.width}),Te=Me.target.column,oe=he.links.filter(function(Ae){return Ae.target.column==Te&&Ae.circularLinkType==Q}),Me.circularLinkType=="bottom"?oe.sort(K):oe.sort(j),ce=0,oe.forEach(function(Ae,Ie){Ae.circularLinkID==Me.circularLinkID&&(Me.circularPathData.rightSmallArcRadius=_+Me.width/2+ce,Me.circularPathData.rightLargeArcRadius=_+Me.width/2+Ie*ve+ce),ce+=Ae.width}),Me.circularLinkType=="bottom"?(Me.circularPathData.verticalFullExtent=Math.max(Oe,Me.source.y1,Me.target.y1)+S+Me.circularPathData.verticalBuffer,Me.circularPathData.verticalLeftInnerExtent=Me.circularPathData.verticalFullExtent-Me.circularPathData.leftLargeArcRadius,Me.circularPathData.verticalRightInnerExtent=Me.circularPathData.verticalFullExtent-Me.circularPathData.rightLargeArcRadius):(Me.circularPathData.verticalFullExtent=ke-S-Me.circularPathData.verticalBuffer,Me.circularPathData.verticalLeftInnerExtent=Me.circularPathData.verticalFullExtent+Me.circularPathData.leftLargeArcRadius,Me.circularPathData.verticalRightInnerExtent=Me.circularPathData.verticalFullExtent+Me.circularPathData.rightLargeArcRadius)}Me.circularPathData.leftInnerExtent=Me.circularPathData.sourceX+Me.circularPathData.leftNodeBuffer,Me.circularPathData.rightInnerExtent=Me.circularPathData.targetX-Me.circularPathData.rightNodeBuffer,Me.circularPathData.leftFullExtent=Me.circularPathData.sourceX+Me.circularPathData.leftLargeArcRadius+Me.circularPathData.leftNodeBuffer,Me.circularPathData.rightFullExtent=Me.circularPathData.targetX-Me.circularPathData.rightLargeArcRadius-Me.circularPathData.rightNodeBuffer}if(Me.circular)Me.path=function(Ae){return Ae.circularLinkType=="top"?"M"+Ae.circularPathData.sourceX+" "+Ae.circularPathData.sourceY+" L"+Ae.circularPathData.leftInnerExtent+" "+Ae.circularPathData.sourceY+" A"+Ae.circularPathData.leftLargeArcRadius+" "+Ae.circularPathData.leftSmallArcRadius+" 0 0 0 "+Ae.circularPathData.leftFullExtent+" "+(Ae.circularPathData.sourceY-Ae.circularPathData.leftSmallArcRadius)+" L"+Ae.circularPathData.leftFullExtent+" "+Ae.circularPathData.verticalLeftInnerExtent+" A"+Ae.circularPathData.leftLargeArcRadius+" "+Ae.circularPathData.leftLargeArcRadius+" 0 0 0 "+Ae.circularPathData.leftInnerExtent+" "+Ae.circularPathData.verticalFullExtent+" L"+Ae.circularPathData.rightInnerExtent+" "+Ae.circularPathData.verticalFullExtent+" A"+Ae.circularPathData.rightLargeArcRadius+" "+Ae.circularPathData.rightLargeArcRadius+" 0 0 0 "+Ae.circularPathData.rightFullExtent+" "+Ae.circularPathData.verticalRightInnerExtent+" L"+Ae.circularPathData.rightFullExtent+" "+(Ae.circularPathData.targetY-Ae.circularPathData.rightSmallArcRadius)+" A"+Ae.circularPathData.rightLargeArcRadius+" "+Ae.circularPathData.rightSmallArcRadius+" 0 0 0 "+Ae.circularPathData.rightInnerExtent+" "+Ae.circularPathData.targetY+" L"+Ae.circularPathData.targetX+" "+Ae.circularPathData.targetY:"M"+Ae.circularPathData.sourceX+" "+Ae.circularPathData.sourceY+" L"+Ae.circularPathData.leftInnerExtent+" "+Ae.circularPathData.sourceY+" A"+Ae.circularPathData.leftLargeArcRadius+" "+Ae.circularPathData.leftSmallArcRadius+" 0 0 1 "+Ae.circularPathData.leftFullExtent+" "+(Ae.circularPathData.sourceY+Ae.circularPathData.leftSmallArcRadius)+" L"+Ae.circularPathData.leftFullExtent+" "+Ae.circularPathData.verticalLeftInnerExtent+" A"+Ae.circularPathData.leftLargeArcRadius+" "+Ae.circularPathData.leftLargeArcRadius+" 0 0 1 "+Ae.circularPathData.leftInnerExtent+" "+Ae.circularPathData.verticalFullExtent+" L"+Ae.circularPathData.rightInnerExtent+" "+Ae.circularPathData.verticalFullExtent+" A"+Ae.circularPathData.rightLargeArcRadius+" "+Ae.circularPathData.rightLargeArcRadius+" 0 0 1 "+Ae.circularPathData.rightFullExtent+" "+Ae.circularPathData.verticalRightInnerExtent+" L"+Ae.circularPathData.rightFullExtent+" "+(Ae.circularPathData.targetY+Ae.circularPathData.rightSmallArcRadius)+" A"+Ae.circularPathData.rightLargeArcRadius+" "+Ae.circularPathData.rightSmallArcRadius+" 0 0 1 "+Ae.circularPathData.rightInnerExtent+" "+Ae.circularPathData.targetY+" L"+Ae.circularPathData.targetX+" "+Ae.circularPathData.targetY}(Me);else{var me=(0,l.h5)().source(function(Ae){return[Ae.source.x0+(Ae.source.x1-Ae.source.x0),Ae.y0]}).target(function(Ae){return[Ae.target.x0,Ae.y1]});Me.path=me(Me)}})}function F(he,ve){return G(he)==G(ve)?he.circularLinkType=="bottom"?B(he,ve):N(he,ve):G(ve)-G(he)}function N(he,ve){return he.y0-ve.y0}function B(he,ve){return ve.y0-he.y0}function j(he,ve){return he.y1-ve.y1}function K(he,ve){return ve.y1-he.y1}function G(he){return he.target.column-he.source.column}function V(he){return he.target.x0-he.source.x1}function W(he,ve){var Oe=P(he),xe=V(ve)/Math.tan(Oe);return fe(he)=="up"?he.y1+xe:he.y1-xe}function J(he,ve){var Oe=P(he),xe=V(ve)/Math.tan(Oe);return fe(he)=="up"?he.y1-xe:he.y1+xe}function X(he,ve,Oe,xe){he.links.forEach(function(ke){if(!ke.circular&&ke.target.column-ke.source.column>1){var Me=ke.source.column+1,Te=ke.target.column-1,Q=1,oe=Te-Me+1;for(Q=1;Me<=Te;Me++,Q++)he.nodes.forEach(function(ce){if(ce.column==Me){var me,Ae=Q/(oe+1),Ie=Math.pow(1-Ae,3),Ce=3*Ae*Math.pow(1-Ae,2),Re=3*Math.pow(Ae,2)*(1-Ae),le=Math.pow(Ae,3),de=Ie*ke.y0+Ce*ke.y0+Re*ke.y1+le*ke.y1,_e=de-ke.width/2,Fe=de+ke.width/2;_e>ce.y0&&_e<ce.y1?(me=ce.y1-_e+10,me=ce.circularLinkType=="bottom"?me:-me,ce=ee(ce,me,ve,Oe),he.nodes.forEach(function(Ve){var He,nt;u(Ve,xe)!=u(ce,xe)&&Ve.column==ce.column&&(nt=Ve,(He=ce).y0>nt.y0&&He.y0<nt.y1||He.y1>nt.y0&&He.y1<nt.y1||He.y0<nt.y0&&He.y1>nt.y1)&&ee(Ve,me,ve,Oe)})):(Fe>ce.y0&&Fe<ce.y1||_e<ce.y0&&Fe>ce.y1)&&(me=Fe-ce.y0+10,ce=ee(ce,me,ve,Oe),he.nodes.forEach(function(Ve){u(Ve,xe)!=u(ce,xe)&&Ve.column==ce.column&&Ve.y0<ce.y1&&Ve.y1>ce.y1&&ee(Ve,me,ve,Oe)}))}})}})}function ee(he,ve,Oe,xe){return he.y0+ve>=Oe&&he.y1+ve<=xe&&(he.y0=he.y0+ve,he.y1=he.y1+ve,he.targetLinks.forEach(function(ke){ke.y1=ke.y1+ve}),he.sourceLinks.forEach(function(ke){ke.y0=ke.y0+ve})),he}function re(he,ve,Oe,xe){he.nodes.forEach(function(ke){xe&&ke.y+(ke.y1-ke.y0)>ve&&(ke.y=ke.y-(ke.y+(ke.y1-ke.y0)-ve));var Me=he.links.filter(function(oe){return u(oe.source,Oe)==u(ke,Oe)}),Te=Me.length;Te>1&&Me.sort(function(oe,ce){if(!oe.circular&&!ce.circular){if(oe.target.column==ce.target.column||!se(oe,ce))return oe.y1-ce.y1;if(oe.target.column>ce.target.column){var me=J(ce,oe);return oe.y1-me}if(ce.target.column>oe.target.column)return J(oe,ce)-ce.y1}return oe.circular&&!ce.circular?oe.circularLinkType=="top"?-1:1:ce.circular&&!oe.circular?ce.circularLinkType=="top"?1:-1:oe.circular&&ce.circular?oe.circularLinkType===ce.circularLinkType&&oe.circularLinkType=="top"?oe.target.column===ce.target.column?oe.target.y1-ce.target.y1:ce.target.column-oe.target.column:oe.circularLinkType===ce.circularLinkType&&oe.circularLinkType=="bottom"?oe.target.column===ce.target.column?ce.target.y1-oe.target.y1:oe.target.column-ce.target.column:oe.circularLinkType=="top"?-1:1:void 0});var Q=ke.y0;Me.forEach(function(oe){oe.y0=Q+oe.width/2,Q+=oe.width}),Me.forEach(function(oe,ce){if(oe.circularLinkType=="bottom"){for(var me=ce+1,Ae=0;me<Te;me++)Ae+=Me[me].width;oe.y0=ke.y1-Ae-oe.width/2}})})}function ie(he,ve,Oe){he.nodes.forEach(function(xe){var ke=he.links.filter(function(Q){return u(Q.target,Oe)==u(xe,Oe)}),Me=ke.length;Me>1&&ke.sort(function(Q,oe){if(!Q.circular&&!oe.circular){if(Q.source.column==oe.source.column||!se(Q,oe))return Q.y0-oe.y0;if(oe.source.column<Q.source.column){var ce=W(oe,Q);return Q.y0-ce}if(Q.source.column<oe.source.column)return W(Q,oe)-oe.y0}return Q.circular&&!oe.circular?Q.circularLinkType=="top"?-1:1:oe.circular&&!Q.circular?oe.circularLinkType=="top"?1:-1:Q.circular&&oe.circular?Q.circularLinkType===oe.circularLinkType&&Q.circularLinkType=="top"?Q.source.column===oe.source.column?Q.source.y1-oe.source.y1:Q.source.column-oe.source.column:Q.circularLinkType===oe.circularLinkType&&Q.circularLinkType=="bottom"?Q.source.column===oe.source.column?Q.source.y1-oe.source.y1:oe.source.column-Q.source.column:Q.circularLinkType=="top"?-1:1:void 0});var Te=xe.y0;ke.forEach(function(Q){Q.y1=Te+Q.width/2,Te+=Q.width}),ke.forEach(function(Q,oe){if(Q.circularLinkType=="bottom"){for(var ce=oe+1,me=0;ce<Me;ce++)me+=ke[ce].width;Q.y1=xe.y1-me-Q.width/2}})})}function se(he,ve){return fe(he)==fe(ve)}function fe(he){return he.y0-he.y1>0?"up":"down"}function ye(he,ve){return u(he.source,ve)==u(he.target,ve)}function ge(he,ve,Oe){var xe=he.nodes,ke=he.links,Me=!1,Te=!1;if(ke.forEach(function(ce){ce.circularLinkType=="top"?Me=!0:ce.circularLinkType=="bottom"&&(Te=!0)}),Me==0||Te==0){var Q=(0,k.VV)(xe,function(ce){return ce.y0}),oe=(Oe-ve)/((0,k.Fp)(xe,function(ce){return ce.y1})-Q);xe.forEach(function(ce){var me=(ce.y1-ce.y0)*oe;ce.y0=(ce.y0-Q)*oe,ce.y1=ce.y0+me}),ke.forEach(function(ce){ce.y0=(ce.y0-Q)*oe,ce.y1=(ce.y1-Q)*oe,ce.width=ce.width*oe})}}},30838:function($,R,e){e.r(R),e.d(R,{sankey:function(){return y},sankeyCenter:function(){return s},sankeyJustify:function(){return d},sankeyLeft:function(){return T},sankeyLinkHorizontal:function(){return u},sankeyRight:function(){return x}});var k=e(33064),A=e(15140);function l(S){return S.target.depth}function T(S){return S.depth}function x(S,_){return _-1-S.height}function d(S,_){return S.sourceLinks.length?S.depth:_-1}function s(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,k.VV)(S.sourceLinks,l)-1:0}function t(S){return function(){return S}}function o(S,_){return n(S.source,_.source)||S.index-_.index}function r(S,_){return n(S.target,_.target)||S.index-_.index}function n(S,_){return S.y0-_.y0}function a(S){return S.value}function i(S){return(S.y0+S.y1)/2}function c(S){return i(S.source)*S.value}function h(S){return i(S.target)*S.value}function f(S){return S.index}function b(S){return S.nodes}function v(S){return S.links}function g(S,_){var E=S.get(_);if(!E)throw new Error("missing: "+_);return E}function y(){var S=0,_=0,E=1,L=1,C=24,P=8,I=f,U=d,z=b,H=v,F=32;function N(){var W={nodes:z.apply(null,arguments),links:H.apply(null,arguments)};return B(W),j(W),K(W),G(W),V(W),W}function B(W){W.nodes.forEach(function(X,ee){X.index=ee,X.sourceLinks=[],X.targetLinks=[]});var J=(0,A.UI)(W.nodes,I);W.links.forEach(function(X,ee){X.index=ee;var re=X.source,ie=X.target;typeof re!="object"&&(re=X.source=g(J,re)),typeof ie!="object"&&(ie=X.target=g(J,ie)),re.sourceLinks.push(X),ie.targetLinks.push(X)})}function j(W){W.nodes.forEach(function(J){J.value=Math.max((0,k.Sm)(J.sourceLinks,a),(0,k.Sm)(J.targetLinks,a))})}function K(W){var J,X,ee;for(J=W.nodes,X=[],ee=0;J.length;++ee,J=X,X=[])J.forEach(function(ie){ie.depth=ee,ie.sourceLinks.forEach(function(se){X.indexOf(se.target)<0&&X.push(se.target)})});for(J=W.nodes,X=[],ee=0;J.length;++ee,J=X,X=[])J.forEach(function(ie){ie.height=ee,ie.targetLinks.forEach(function(se){X.indexOf(se.source)<0&&X.push(se.source)})});var re=(E-S-C)/(ee-1);W.nodes.forEach(function(ie){ie.x1=(ie.x0=S+Math.max(0,Math.min(ee-1,Math.floor(U.call(null,ie,ee))))*re)+C})}function G(W){var J=(0,A.b1)().key(function(fe){return fe.x0}).sortKeys(k.j2).entries(W.nodes).map(function(fe){return fe.values});(function(){var fe=(0,k.Fp)(J,function(he){return he.length}),ye=.6666666666666666*(L-_)/(fe-1);P>ye&&(P=ye);var ge=(0,k.VV)(J,function(he){return(L-_-(he.length-1)*P)/(0,k.Sm)(he,a)});J.forEach(function(he){he.forEach(function(ve,Oe){ve.y1=(ve.y0=Oe)+ve.value*ge})}),W.links.forEach(function(he){he.width=he.value*ge})})(),se();for(var X=1,ee=F;ee>0;--ee)ie(X*=.99),se(),re(X),se();function re(fe){J.forEach(function(ye){ye.forEach(function(ge){if(ge.targetLinks.length){var he=((0,k.Sm)(ge.targetLinks,c)/(0,k.Sm)(ge.targetLinks,a)-i(ge))*fe;ge.y0+=he,ge.y1+=he}})})}function ie(fe){J.slice().reverse().forEach(function(ye){ye.forEach(function(ge){if(ge.sourceLinks.length){var he=((0,k.Sm)(ge.sourceLinks,h)/(0,k.Sm)(ge.sourceLinks,a)-i(ge))*fe;ge.y0+=he,ge.y1+=he}})})}function se(){J.forEach(function(fe){var ye,ge,he,ve=_,Oe=fe.length;for(fe.sort(n),he=0;he<Oe;++he)(ge=ve-(ye=fe[he]).y0)>0&&(ye.y0+=ge,ye.y1+=ge),ve=ye.y1+P;if((ge=ve-P-L)>0)for(ve=ye.y0-=ge,ye.y1-=ge,he=Oe-2;he>=0;--he)(ge=(ye=fe[he]).y1+P-ve)>0&&(ye.y0-=ge,ye.y1-=ge),ve=ye.y0})}}function V(W){W.nodes.forEach(function(J){J.sourceLinks.sort(r),J.targetLinks.sort(o)}),W.nodes.forEach(function(J){var X=J.y0,ee=X;J.sourceLinks.forEach(function(re){re.y0=X+re.width/2,X+=re.width}),J.targetLinks.forEach(function(re){re.y1=ee+re.width/2,ee+=re.width})})}return N.update=function(W){return V(W),W},N.nodeId=function(W){return arguments.length?(I=typeof W=="function"?W:t(W),N):I},N.nodeAlign=function(W){return arguments.length?(U=typeof W=="function"?W:t(W),N):U},N.nodeWidth=function(W){return arguments.length?(C=+W,N):C},N.nodePadding=function(W){return arguments.length?(P=+W,N):P},N.nodes=function(W){return arguments.length?(z=typeof W=="function"?W:t(W),N):z},N.links=function(W){return arguments.length?(H=typeof W=="function"?W:t(W),N):H},N.size=function(W){return arguments.length?(S=_=0,E=+W[0],L=+W[1],N):[E-S,L-_]},N.extent=function(W){return arguments.length?(S=+W[0][0],E=+W[1][0],_=+W[0][1],L=+W[1][1],N):[[S,_],[E,L]]},N.iterations=function(W){return arguments.length?(F=+W,N):F},N}var p=e(45879);function m(S){return[S.source.x1,S.y0]}function w(S){return[S.target.x0,S.y1]}function u(){return(0,p.h5)().source(m).target(w)}},39898:function($,R,e){var k,A;(function(){var l={version:"3.8.0"},T=[].slice,x=function(te){return T.call(te)},d=self.document;function s(te){return te&&(te.ownerDocument||te.document||te).documentElement}function t(te){return te&&(te.ownerDocument&&te.ownerDocument.defaultView||te.document&&te||te.defaultView)}if(d)try{x(d.documentElement.childNodes)[0].nodeType}catch{x=function(ue){for(var we=ue.length,Pe=new Array(we);we--;)Pe[we]=ue[we];return Pe}}if(Date.now||(Date.now=function(){return+new Date}),d)try{d.createElement("DIV").style.setProperty("opacity",0,"")}catch{var o=this.Element.prototype,r=o.setAttribute,n=o.setAttributeNS,a=this.CSSStyleDeclaration.prototype,i=a.setProperty;o.setAttribute=function(ue,we){r.call(this,ue,we+"")},o.setAttributeNS=function(ue,we,Pe){n.call(this,ue,we,Pe+"")},a.setProperty=function(ue,we,Pe){i.call(this,ue,we+"",Pe)}}function c(te,ue){return te<ue?-1:te>ue?1:te>=ue?0:NaN}function h(te){return te===null?NaN:+te}function f(te){return!isNaN(te)}function b(te){return{left:function(ue,we,Pe,De){for(arguments.length<3&&(Pe=0),arguments.length<4&&(De=ue.length);Pe<De;){var Ue=Pe+De>>>1;te(ue[Ue],we)<0?Pe=Ue+1:De=Ue}return Pe},right:function(ue,we,Pe,De){for(arguments.length<3&&(Pe=0),arguments.length<4&&(De=ue.length);Pe<De;){var Ue=Pe+De>>>1;te(ue[Ue],we)>0?De=Ue:Pe=Ue+1}return Pe}}}l.ascending=c,l.descending=function(te,ue){return ue<te?-1:ue>te?1:ue>=te?0:NaN},l.min=function(te,ue){var we,Pe,De=-1,Ue=te.length;if(arguments.length===1){for(;++De<Ue;)if((Pe=te[De])!=null&&Pe>=Pe){we=Pe;break}for(;++De<Ue;)(Pe=te[De])!=null&&we>Pe&&(we=Pe)}else{for(;++De<Ue;)if((Pe=ue.call(te,te[De],De))!=null&&Pe>=Pe){we=Pe;break}for(;++De<Ue;)(Pe=ue.call(te,te[De],De))!=null&&we>Pe&&(we=Pe)}return we},l.max=function(te,ue){var we,Pe,De=-1,Ue=te.length;if(arguments.length===1){for(;++De<Ue;)if((Pe=te[De])!=null&&Pe>=Pe){we=Pe;break}for(;++De<Ue;)(Pe=te[De])!=null&&Pe>we&&(we=Pe)}else{for(;++De<Ue;)if((Pe=ue.call(te,te[De],De))!=null&&Pe>=Pe){we=Pe;break}for(;++De<Ue;)(Pe=ue.call(te,te[De],De))!=null&&Pe>we&&(we=Pe)}return we},l.extent=function(te,ue){var we,Pe,De,Ue=-1,Ze=te.length;if(arguments.length===1){for(;++Ue<Ze;)if((Pe=te[Ue])!=null&&Pe>=Pe){we=De=Pe;break}for(;++Ue<Ze;)(Pe=te[Ue])!=null&&(we>Pe&&(we=Pe),De<Pe&&(De=Pe))}else{for(;++Ue<Ze;)if((Pe=ue.call(te,te[Ue],Ue))!=null&&Pe>=Pe){we=De=Pe;break}for(;++Ue<Ze;)(Pe=ue.call(te,te[Ue],Ue))!=null&&(we>Pe&&(we=Pe),De<Pe&&(De=Pe))}return[we,De]},l.sum=function(te,ue){var we,Pe=0,De=te.length,Ue=-1;if(arguments.length===1)for(;++Ue<De;)f(we=+te[Ue])&&(Pe+=we);else for(;++Ue<De;)f(we=+ue.call(te,te[Ue],Ue))&&(Pe+=we);return Pe},l.mean=function(te,ue){var we,Pe=0,De=te.length,Ue=-1,Ze=De;if(arguments.length===1)for(;++Ue<De;)f(we=h(te[Ue]))?Pe+=we:--Ze;else for(;++Ue<De;)f(we=h(ue.call(te,te[Ue],Ue)))?Pe+=we:--Ze;if(Ze)return Pe/Ze},l.quantile=function(te,ue){var we=(te.length-1)*ue+1,Pe=Math.floor(we),De=+te[Pe-1],Ue=we-Pe;return Ue?De+Ue*(te[Pe]-De):De},l.median=function(te,ue){var we,Pe=[],De=te.length,Ue=-1;if(arguments.length===1)for(;++Ue<De;)f(we=h(te[Ue]))&&Pe.push(we);else for(;++Ue<De;)f(we=h(ue.call(te,te[Ue],Ue)))&&Pe.push(we);if(Pe.length)return l.quantile(Pe.sort(c),.5)},l.variance=function(te,ue){var we,Pe,De=te.length,Ue=0,Ze=0,Je=-1,it=0;if(arguments.length===1)for(;++Je<De;)f(we=h(te[Je]))&&(Ze+=(Pe=we-Ue)*(we-(Ue+=Pe/++it)));else for(;++Je<De;)f(we=h(ue.call(te,te[Je],Je)))&&(Ze+=(Pe=we-Ue)*(we-(Ue+=Pe/++it)));if(it>1)return Ze/(it-1)},l.deviation=function(){var te=l.variance.apply(this,arguments);return te&&Math.sqrt(te)};var v=b(c);function g(te){return te.length}l.bisectLeft=v.left,l.bisect=l.bisectRight=v.right,l.bisector=function(te){return b(te.length===1?function(ue,we){return c(te(ue),we)}:te)},l.shuffle=function(te,ue,we){(Ue=arguments.length)<3&&(we=te.length,Ue<2&&(ue=0));for(var Pe,De,Ue=we-ue;Ue;)De=Math.random()*Ue--|0,Pe=te[Ue+ue],te[Ue+ue]=te[De+ue],te[De+ue]=Pe;return te},l.permute=function(te,ue){for(var we=ue.length,Pe=new Array(we);we--;)Pe[we]=te[ue[we]];return Pe},l.pairs=function(te){for(var ue=0,we=te.length-1,Pe=te[0],De=new Array(we<0?0:we);ue<we;)De[ue]=[Pe,Pe=te[++ue]];return De},l.transpose=function(te){if(!(De=te.length))return[];for(var ue=-1,we=l.min(te,g),Pe=new Array(we);++ue<we;)for(var De,Ue=-1,Ze=Pe[ue]=new Array(De);++Ue<De;)Ze[Ue]=te[Ue][ue];return Pe},l.zip=function(){return l.transpose(arguments)},l.keys=function(te){var ue=[];for(var we in te)ue.push(we);return ue},l.values=function(te){var ue=[];for(var we in te)ue.push(te[we]);return ue},l.entries=function(te){var ue=[];for(var we in te)ue.push({key:we,value:te[we]});return ue},l.merge=function(te){for(var ue,we,Pe,De=te.length,Ue=-1,Ze=0;++Ue<De;)Ze+=te[Ue].length;for(we=new Array(Ze);--De>=0;)for(ue=(Pe=te[De]).length;--ue>=0;)we[--Ze]=Pe[ue];return we};var y=Math.abs;function p(te){for(var ue=1;te*ue%1;)ue*=10;return ue}function m(te,ue){for(var we in ue)Object.defineProperty(te.prototype,we,{value:ue[we],enumerable:!1})}function w(){this._=Object.create(null)}function u(te){return(te+="")=="__proto__"||te[0]==="\0"?"\0"+te:te}function S(te){return(te+="")[0]==="\0"?te.slice(1):te}function _(te){return u(te)in this._}function E(te){return(te=u(te))in this._&&delete this._[te]}function L(){var te=[];for(var ue in this._)te.push(S(ue));return te}function C(){var te=0;for(var ue in this._)++te;return te}function P(){for(var te in this._)return!1;return!0}function I(){this._=Object.create(null)}function U(te){return te}function z(te,ue,we){return function(){var Pe=we.apply(ue,arguments);return Pe===ue?te:Pe}}function H(te,ue){if(ue in te)return ue;ue=ue.charAt(0).toUpperCase()+ue.slice(1);for(var we=0,Pe=F.length;we<Pe;++we){var De=F[we]+ue;if(De in te)return De}}l.range=function(te,ue,we){if(arguments.length<3&&(we=1,arguments.length<2&&(ue=te,te=0)),(ue-te)/we==1/0)throw new Error("infinite range");var Pe,De=[],Ue=p(y(we)),Ze=-1;if(te*=Ue,ue*=Ue,(we*=Ue)<0)for(;(Pe=te+we*++Ze)>ue;)De.push(Pe/Ue);else for(;(Pe=te+we*++Ze)<ue;)De.push(Pe/Ue);return De},l.map=function(te,ue){var we=new w;if(te instanceof w)te.forEach(function(Je,it){we.set(Je,it)});else if(Array.isArray(te)){var Pe,De=-1,Ue=te.length;if(arguments.length===1)for(;++De<Ue;)we.set(De,te[De]);else for(;++De<Ue;)we.set(ue.call(te,Pe=te[De],De),Pe)}else for(var Ze in te)we.set(Ze,te[Ze]);return we},m(w,{has:_,get:function(te){return this._[u(te)]},set:function(te,ue){return this._[u(te)]=ue},remove:E,keys:L,values:function(){var te=[];for(var ue in this._)te.push(this._[ue]);return te},entries:function(){var te=[];for(var ue in this._)te.push({key:S(ue),value:this._[ue]});return te},size:C,empty:P,forEach:function(te){for(var ue in this._)te.call(this,S(ue),this._[ue])}}),l.nest=function(){var te,ue,we={},Pe=[],De=[];function Ue(Je,it,ut){if(ut>=Pe.length)return ue?ue.call(we,it):te?it.sort(te):it;for(var St,Dt,Ft,Yt,ln=-1,Xt=it.length,en=Pe[ut++],Jt=new w;++ln<Xt;)(Yt=Jt.get(St=en(Dt=it[ln])))?Yt.push(Dt):Jt.set(St,[Dt]);return Je?(Dt=Je(),Ft=function(bn,gn){Dt.set(bn,Ue(Je,gn,ut))}):(Dt={},Ft=function(bn,gn){Dt[bn]=Ue(Je,gn,ut)}),Jt.forEach(Ft),Dt}function Ze(Je,it){if(it>=Pe.length)return Je;var ut=[],St=De[it++];return Je.forEach(function(Dt,Ft){ut.push({key:Dt,values:Ze(Ft,it)})}),St?ut.sort(function(Dt,Ft){return St(Dt.key,Ft.key)}):ut}return we.map=function(Je,it){return Ue(it,Je,0)},we.entries=function(Je){return Ze(Ue(l.map,Je,0),0)},we.key=function(Je){return Pe.push(Je),we},we.sortKeys=function(Je){return De[Pe.length-1]=Je,we},we.sortValues=function(Je){return te=Je,we},we.rollup=function(Je){return ue=Je,we},we},l.set=function(te){var ue=new I;if(te)for(var we=0,Pe=te.length;we<Pe;++we)ue.add(te[we]);return ue},m(I,{has:_,add:function(te){return this._[u(te+="")]=!0,te},remove:E,values:L,size:C,empty:P,forEach:function(te){for(var ue in this._)te.call(this,S(ue))}}),l.behavior={},l.rebind=function(te,ue){for(var we,Pe=1,De=arguments.length;++Pe<De;)te[we=arguments[Pe]]=z(te,ue,ue[we]);return te};var F=["webkit","ms","moz","Moz","o","O"];function N(){}function B(){}function j(te){var ue=[],we=new w;function Pe(){for(var De,Ue=ue,Ze=-1,Je=Ue.length;++Ze<Je;)(De=Ue[Ze].on)&&De.apply(this,arguments);return te}return Pe.on=function(De,Ue){var Ze,Je=we.get(De);return arguments.length<2?Je&&Je.on:(Je&&(Je.on=null,ue=ue.slice(0,Ze=ue.indexOf(Je)).concat(ue.slice(Ze+1)),we.remove(De)),Ue&&ue.push(we.set(De,{on:Ue})),te)},Pe}function K(){l.event.preventDefault()}function G(){for(var te,ue=l.event;te=ue.sourceEvent;)ue=te;return ue}function V(te){for(var ue=new B,we=0,Pe=arguments.length;++we<Pe;)ue[arguments[we]]=j(ue);return ue.of=function(De,Ue){return function(Ze){try{var Je=Ze.sourceEvent=l.event;Ze.target=te,l.event=Ze,ue[Ze.type].apply(De,Ue)}finally{l.event=Je}}},ue}l.dispatch=function(){for(var te=new B,ue=-1,we=arguments.length;++ue<we;)te[arguments[ue]]=j(te);return te},B.prototype.on=function(te,ue){var we=te.indexOf("."),Pe="";if(we>=0&&(Pe=te.slice(we+1),te=te.slice(0,we)),te)return arguments.length<2?this[te].on(Pe):this[te].on(Pe,ue);if(arguments.length===2){if(ue==null)for(te in this)this.hasOwnProperty(te)&&this[te].on(Pe,null);return this}},l.event=null,l.requote=function(te){return te.replace(W,"\\$&")};var W=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,J={}.__proto__?function(te,ue){te.__proto__=ue}:function(te,ue){for(var we in ue)te[we]=ue[we]};function X(te){return J(te,se),te}var ee=function(te,ue){return ue.querySelector(te)},re=function(te,ue){return ue.querySelectorAll(te)},ie=function(te,ue){var we=te.matches||te[H(te,"matchesSelector")];return ie=function(Pe,De){return we.call(Pe,De)},ie(te,ue)};typeof Sizzle=="function"&&(ee=function(te,ue){return Sizzle(te,ue)[0]||null},re=Sizzle,ie=Sizzle.matchesSelector),l.selection=function(){return l.select(d.documentElement)};var se=l.selection.prototype=[];function fe(te){return typeof te=="function"?te:function(){return ee(te,this)}}function ye(te){return typeof te=="function"?te:function(){return re(te,this)}}se.select=function(te){var ue,we,Pe,De,Ue=[];te=fe(te);for(var Ze=-1,Je=this.length;++Ze<Je;){Ue.push(ue=[]),ue.parentNode=(Pe=this[Ze]).parentNode;for(var it=-1,ut=Pe.length;++it<ut;)(De=Pe[it])?(ue.push(we=te.call(De,De.__data__,it,Ze)),we&&"__data__"in De&&(we.__data__=De.__data__)):ue.push(null)}return X(Ue)},se.selectAll=function(te){var ue,we,Pe=[];te=ye(te);for(var De=-1,Ue=this.length;++De<Ue;)for(var Ze=this[De],Je=-1,it=Ze.length;++Je<it;)(we=Ze[Je])&&(Pe.push(ue=x(te.call(we,we.__data__,Je,De))),ue.parentNode=we);return X(Pe)};var ge="http://www.w3.org/1999/xhtml",he={svg:"http://www.w3.org/2000/svg",xhtml:ge,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ve(te,ue){return te=l.ns.qualify(te),ue==null?te.local?function(){this.removeAttributeNS(te.space,te.local)}:function(){this.removeAttribute(te)}:typeof ue=="function"?te.local?function(){var we=ue.apply(this,arguments);we==null?this.removeAttributeNS(te.space,te.local):this.setAttributeNS(te.space,te.local,we)}:function(){var we=ue.apply(this,arguments);we==null?this.removeAttribute(te):this.setAttribute(te,we)}:te.local?function(){this.setAttributeNS(te.space,te.local,ue)}:function(){this.setAttribute(te,ue)}}function Oe(te){return te.trim().replace(/\s+/g," ")}function xe(te){return new RegExp("(?:^|\\s+)"+l.requote(te)+"(?:\\s+|$)","g")}function ke(te){return(te+"").trim().split(/^|\s+/)}function Me(te,ue){var we=(te=ke(te).map(Te)).length;return typeof ue=="function"?function(){for(var Pe=-1,De=ue.apply(this,arguments);++Pe<we;)te[Pe](this,De)}:function(){for(var Pe=-1;++Pe<we;)te[Pe](this,ue)}}function Te(te){var ue=xe(te);return function(we,Pe){if(De=we.classList)return Pe?De.add(te):De.remove(te);var De=we.getAttribute("class")||"";Pe?(ue.lastIndex=0,ue.test(De)||we.setAttribute("class",Oe(De+" "+te))):we.setAttribute("class",Oe(De.replace(ue," ")))}}function Q(te,ue,we){return ue==null?function(){this.style.removeProperty(te)}:typeof ue=="function"?function(){var Pe=ue.apply(this,arguments);Pe==null?this.style.removeProperty(te):this.style.setProperty(te,Pe,we)}:function(){this.style.setProperty(te,ue,we)}}function oe(te,ue){return ue==null?function(){delete this[te]}:typeof ue=="function"?function(){var we=ue.apply(this,arguments);we==null?delete this[te]:this[te]=we}:function(){this[te]=ue}}function ce(te){return typeof te=="function"?te:(te=l.ns.qualify(te)).local?function(){return this.ownerDocument.createElementNS(te.space,te.local)}:function(){var ue=this.ownerDocument,we=this.namespaceURI;return we===ge&&ue.documentElement.namespaceURI===ge?ue.createElement(te):ue.createElementNS(we,te)}}function me(){var te=this.parentNode;te&&te.removeChild(this)}function Ae(te){return{__data__:te}}function Ie(te){return function(){return ie(this,te)}}function Ce(te){return arguments.length||(te=c),function(ue,we){return ue&&we?te(ue.__data__,we.__data__):!ue-!we}}function Re(te,ue){for(var we=0,Pe=te.length;we<Pe;we++)for(var De,Ue=te[we],Ze=0,Je=Ue.length;Ze<Je;Ze++)(De=Ue[Ze])&&ue(De,Ze,we);return te}function le(te){return J(te,de),te}l.ns={prefix:he,qualify:function(te){var ue=te.indexOf(":"),we=te;return ue>=0&&(we=te.slice(0,ue))!=="xmlns"&&(te=te.slice(ue+1)),he.hasOwnProperty(we)?{space:he[we],local:te}:te}},se.attr=function(te,ue){if(arguments.length<2){if(typeof te=="string"){var we=this.node();return(te=l.ns.qualify(te)).local?we.getAttributeNS(te.space,te.local):we.getAttribute(te)}for(ue in te)this.each(ve(ue,te[ue]));return this}return this.each(ve(te,ue))},se.classed=function(te,ue){if(arguments.length<2){if(typeof te=="string"){var we=this.node(),Pe=(te=ke(te)).length,De=-1;if(ue=we.classList){for(;++De<Pe;)if(!ue.contains(te[De]))return!1}else for(ue=we.getAttribute("class");++De<Pe;)if(!xe(te[De]).test(ue))return!1;return!0}for(ue in te)this.each(Me(ue,te[ue]));return this}return this.each(Me(te,ue))},se.style=function(te,ue,we){var Pe=arguments.length;if(Pe<3){if(typeof te!="string"){for(we in Pe<2&&(ue=""),te)this.each(Q(we,te[we],ue));return this}if(Pe<2){var De=this.node();return t(De).getComputedStyle(De,null).getPropertyValue(te)}we=""}return this.each(Q(te,ue,we))},se.property=function(te,ue){if(arguments.length<2){if(typeof te=="string")return this.node()[te];for(ue in te)this.each(oe(ue,te[ue]));return this}return this.each(oe(te,ue))},se.text=function(te){return arguments.length?this.each(typeof te=="function"?function(){var ue=te.apply(this,arguments);this.textContent=ue??""}:te==null?function(){this.textContent=""}:function(){this.textContent=te}):this.node().textContent},se.html=function(te){return arguments.length?this.each(typeof te=="function"?function(){var ue=te.apply(this,arguments);this.innerHTML=ue??""}:te==null?function(){this.innerHTML=""}:function(){this.innerHTML=te}):this.node().innerHTML},se.append=function(te){return te=ce(te),this.select(function(){return this.appendChild(te.apply(this,arguments))})},se.insert=function(te,ue){return te=ce(te),ue=fe(ue),this.select(function(){return this.insertBefore(te.apply(this,arguments),ue.apply(this,arguments)||null)})},se.remove=function(){return this.each(me)},se.data=function(te,ue){var we,Pe,De=-1,Ue=this.length;if(!arguments.length){for(te=new Array(Ue=(we=this[0]).length);++De<Ue;)(Pe=we[De])&&(te[De]=Pe.__data__);return te}function Ze(St,Dt){var Ft,Yt,ln,Xt=St.length,en=Dt.length,Jt=Math.min(Xt,en),bn=new Array(en),gn=new Array(en),Qt=new Array(Xt);if(ue){var Pn,Dn=new w,Xn=new Array(Xt);for(Ft=-1;++Ft<Xt;)(Yt=St[Ft])&&(Dn.has(Pn=ue.call(Yt,Yt.__data__,Ft))?Qt[Ft]=Yt:Dn.set(Pn,Yt),Xn[Ft]=Pn);for(Ft=-1;++Ft<en;)(Yt=Dn.get(Pn=ue.call(Dt,ln=Dt[Ft],Ft)))?Yt!==!0&&(bn[Ft]=Yt,Yt.__data__=ln):gn[Ft]=Ae(ln),Dn.set(Pn,!0);for(Ft=-1;++Ft<Xt;)Ft in Xn&&Dn.get(Xn[Ft])!==!0&&(Qt[Ft]=St[Ft])}else{for(Ft=-1;++Ft<Jt;)Yt=St[Ft],ln=Dt[Ft],Yt?(Yt.__data__=ln,bn[Ft]=Yt):gn[Ft]=Ae(ln);for(;Ft<en;++Ft)gn[Ft]=Ae(Dt[Ft]);for(;Ft<Xt;++Ft)Qt[Ft]=St[Ft]}gn.update=bn,gn.parentNode=bn.parentNode=Qt.parentNode=St.parentNode,Je.push(gn),it.push(bn),ut.push(Qt)}var Je=le([]),it=X([]),ut=X([]);if(typeof te=="function")for(;++De<Ue;)Ze(we=this[De],te.call(we,we.parentNode.__data__,De));else for(;++De<Ue;)Ze(we=this[De],te);return it.enter=function(){return Je},it.exit=function(){return ut},it},se.datum=function(te){return arguments.length?this.property("__data__",te):this.property("__data__")},se.filter=function(te){var ue,we,Pe,De=[];typeof te!="function"&&(te=Ie(te));for(var Ue=0,Ze=this.length;Ue<Ze;Ue++){De.push(ue=[]),ue.parentNode=(we=this[Ue]).parentNode;for(var Je=0,it=we.length;Je<it;Je++)(Pe=we[Je])&&te.call(Pe,Pe.__data__,Je,Ue)&&ue.push(Pe)}return X(De)},se.order=function(){for(var te=-1,ue=this.length;++te<ue;)for(var we,Pe=this[te],De=Pe.length-1,Ue=Pe[De];--De>=0;)(we=Pe[De])&&(Ue&&Ue!==we.nextSibling&&Ue.parentNode.insertBefore(we,Ue),Ue=we);return this},se.sort=function(te){te=Ce.apply(this,arguments);for(var ue=-1,we=this.length;++ue<we;)this[ue].sort(te);return this.order()},se.each=function(te){return Re(this,function(ue,we,Pe){te.call(ue,ue.__data__,we,Pe)})},se.call=function(te){var ue=x(arguments);return te.apply(ue[0]=this,ue),this},se.empty=function(){return!this.node()},se.node=function(){for(var te=0,ue=this.length;te<ue;te++)for(var we=this[te],Pe=0,De=we.length;Pe<De;Pe++){var Ue=we[Pe];if(Ue)return Ue}return null},se.size=function(){var te=0;return Re(this,function(){++te}),te};var de=[];function _e(te){var ue,we;return function(Pe,De,Ue){var Ze,Je=te[Ue].update,it=Je.length;for(Ue!=we&&(we=Ue,ue=0),De>=ue&&(ue=De+1);!(Ze=Je[ue])&&++ue<it;);return Ze}}function Fe(te,ue,we){var Pe="__on"+te,De=te.indexOf("."),Ue=He;De>0&&(te=te.slice(0,De));var Ze=Ve.get(te);function Je(){var it=this[Pe];it&&(this.removeEventListener(te,it,it.$),delete this[Pe])}return Ze&&(te=Ze,Ue=nt),De?ue?function(){var it=Ue(ue,x(arguments));Je.call(this),this.addEventListener(te,this[Pe]=it,it.$=we),it._=ue}:Je:ue?N:function(){var it,ut=new RegExp("^__on([^.]+)"+l.requote(te)+"$");for(var St in this)if(it=St.match(ut)){var Dt=this[St];this.removeEventListener(it[1],Dt,Dt.$),delete this[St]}}}l.selection.enter=le,l.selection.enter.prototype=de,de.append=se.append,de.empty=se.empty,de.node=se.node,de.call=se.call,de.size=se.size,de.select=function(te){for(var ue,we,Pe,De,Ue,Ze=[],Je=-1,it=this.length;++Je<it;){Pe=(De=this[Je]).update,Ze.push(ue=[]),ue.parentNode=De.parentNode;for(var ut=-1,St=De.length;++ut<St;)(Ue=De[ut])?(ue.push(Pe[ut]=we=te.call(De.parentNode,Ue.__data__,ut,Je)),we.__data__=Ue.__data__):ue.push(null)}return X(Ze)},de.insert=function(te,ue){return arguments.length<2&&(ue=_e(this)),se.insert.call(this,te,ue)},l.select=function(te){var ue;return typeof te=="string"?(ue=[ee(te,d)]).parentNode=d.documentElement:(ue=[te]).parentNode=s(te),X([ue])},l.selectAll=function(te){var ue;return typeof te=="string"?(ue=x(re(te,d))).parentNode=d.documentElement:(ue=x(te)).parentNode=null,X([ue])},se.on=function(te,ue,we){var Pe=arguments.length;if(Pe<3){if(typeof te!="string"){for(we in Pe<2&&(ue=!1),te)this.each(Fe(we,te[we],ue));return this}if(Pe<2)return(Pe=this.node()["__on"+te])&&Pe._;we=!1}return this.each(Fe(te,ue,we))};var Ve=l.map({mouseenter:"mouseover",mouseleave:"mouseout"});function He(te,ue){return function(we){var Pe=l.event;l.event=we,ue[0]=this.__data__;try{te.apply(this,ue)}finally{l.event=Pe}}}function nt(te,ue){var we=He(te,ue);return function(Pe){var De=this,Ue=Pe.relatedTarget;Ue&&(Ue===De||8&Ue.compareDocumentPosition(De))||we.call(De,Pe)}}d&&Ve.forEach(function(te){"on"+te in d&&Ve.remove(te)});var tt,ot=0;function dt(te){var ue=".dragsuppress-"+ ++ot,we="click"+ue,Pe=l.select(t(te)).on("touchmove"+ue,K).on("dragstart"+ue,K).on("selectstart"+ue,K);if(tt==null&&(tt=!("onselectstart"in te)&&H(te.style,"userSelect")),tt){var De=s(te).style,Ue=De[tt];De[tt]="none"}return function(Ze){if(Pe.on(ue,null),tt&&(De[tt]=Ue),Ze){var Je=function(){Pe.on(we,null)};Pe.on(we,function(){K(),Je()},!0),setTimeout(Je,0)}}}l.mouse=function(te){return mt(te,G())};var kt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function mt(te,ue){ue.changedTouches&&(ue=ue.changedTouches[0]);var we=te.ownerSVGElement||te;if(we.createSVGPoint){var Pe=we.createSVGPoint();if(kt<0){var De=t(te);if(De.scrollX||De.scrollY){var Ue=(we=l.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();kt=!(Ue.f||Ue.e),we.remove()}}return kt?(Pe.x=ue.pageX,Pe.y=ue.pageY):(Pe.x=ue.clientX,Pe.y=ue.clientY),[(Pe=Pe.matrixTransform(te.getScreenCTM().inverse())).x,Pe.y]}var Ze=te.getBoundingClientRect();return[ue.clientX-Ze.left-te.clientLeft,ue.clientY-Ze.top-te.clientTop]}function wt(){return l.event.changedTouches[0].identifier}l.touch=function(te,ue,we){if(arguments.length<3&&(we=ue,ue=G().changedTouches),ue){for(var Pe,De=0,Ue=ue.length;De<Ue;++De)if((Pe=ue[De]).identifier===we)return mt(te,Pe)}},l.behavior.drag=function(){var te=V(De,"drag","dragstart","dragend"),ue=null,we=Ue(N,l.mouse,t,"mousemove","mouseup"),Pe=Ue(wt,l.touch,U,"touchmove","touchend");function De(){this.on("mousedown.drag",we).on("touchstart.drag",Pe)}function Ue(Ze,Je,it,ut,St){return function(){var Dt,Ft=this,Yt=l.event.target.correspondingElement||l.event.target,ln=Ft.parentNode,Xt=te.of(Ft,arguments),en=0,Jt=Ze(),bn=".drag"+(Jt==null?"":"-"+Jt),gn=l.select(it(Yt)).on(ut+bn,Dn).on(St+bn,Xn),Qt=dt(Yt),Pn=Je(ln,Jt);function Dn(){var Jn,gr,vr=Je(ln,Jt);vr&&(Jn=vr[0]-Pn[0],gr=vr[1]-Pn[1],en|=Jn|gr,Pn=vr,Xt({type:"drag",x:vr[0]+Dt[0],y:vr[1]+Dt[1],dx:Jn,dy:gr}))}function Xn(){Je(ln,Jt)&&(gn.on(ut+bn,null).on(St+bn,null),Qt(en),Xt({type:"dragend"}))}Dt=ue?[(Dt=ue.apply(Ft,arguments)).x-Pn[0],Dt.y-Pn[1]]:[0,0],Xt({type:"dragstart"})}}return De.origin=function(Ze){return arguments.length?(ue=Ze,De):ue},l.rebind(De,te,"on")},l.touches=function(te,ue){return arguments.length<2&&(ue=G().touches),ue?x(ue).map(function(we){var Pe=mt(te,we);return Pe.identifier=we.identifier,Pe}):[]};var Lt=1e-6,Ct=Math.PI,It=2*Ct,Ut=It-Lt,Rt=Ct/2,Ge=Ct/180,We=180/Ct;function Be(te){return te>1?Rt:te<-1?-Rt:Math.asin(te)}function Ye(te){return((te=Math.exp(te))+1/te)/2}var rt=Math.SQRT2;l.interpolateZoom=function(te,ue){var we,Pe,De=te[0],Ue=te[1],Ze=te[2],Je=ue[0],it=ue[1],ut=ue[2],St=Je-De,Dt=it-Ue,Ft=St*St+Dt*Dt;if(Ft<1e-12)Pe=Math.log(ut/Ze)/rt,we=function(bn){return[De+bn*St,Ue+bn*Dt,Ze*Math.exp(rt*bn*Pe)]};else{var Yt=Math.sqrt(Ft),ln=(ut*ut-Ze*Ze+4*Ft)/(2*Ze*2*Yt),Xt=(ut*ut-Ze*Ze-4*Ft)/(2*ut*2*Yt),en=Math.log(Math.sqrt(ln*ln+1)-ln),Jt=Math.log(Math.sqrt(Xt*Xt+1)-Xt);Pe=(Jt-en)/rt,we=function(bn){var gn,Qt=bn*Pe,Pn=Ye(en),Dn=Ze/(2*Yt)*(Pn*(gn=rt*Qt+en,((gn=Math.exp(2*gn))-1)/(gn+1))-function(Xn){return((Xn=Math.exp(Xn))-1/Xn)/2}(en));return[De+Dn*St,Ue+Dn*Dt,Ze*Pn/Ye(rt*Qt+en)]}}return we.duration=1e3*Pe,we},l.behavior.zoom=function(){var te,ue,we,Pe,De,Ue,Ze,Je,it,ut={x:0,y:0,k:1},St=[960,500],Dt=Ke,Ft=250,Yt=0,ln="mousedown.zoom",Xt="mousemove.zoom",en="mouseup.zoom",Jt="touchstart.zoom",bn=V(gn,"zoomstart","zoom","zoomend");function gn(hr){hr.on(ln,dr).on(ze+".zoom",Vr).on("dblclick.zoom",Hr).on(Jt,kr)}function Qt(hr){return[(hr[0]-ut.x)/ut.k,(hr[1]-ut.y)/ut.k]}function Pn(hr){ut.k=Math.max(Dt[0],Math.min(Dt[1],hr))}function Dn(hr,Ar){Ar=function(Dr){return[Dr[0]*ut.k+ut.x,Dr[1]*ut.k+ut.y]}(Ar),ut.x+=hr[0]-Ar[0],ut.y+=hr[1]-Ar[1]}function Xn(hr,Ar,Dr,zr){hr.__chart__={x:ut.x,y:ut.y,k:ut.k},Pn(Math.pow(2,zr)),Dn(ue=Ar,Dr),hr=l.select(hr),Ft>0&&(hr=hr.transition().duration(Ft)),hr.call(gn.event)}function Jn(){Ze&&Ze.domain(Ue.range().map(function(hr){return(hr-ut.x)/ut.k}).map(Ue.invert)),it&&it.domain(Je.range().map(function(hr){return(hr-ut.y)/ut.k}).map(Je.invert))}function gr(hr){Yt++||hr({type:"zoomstart"})}function vr(hr){Jn(),hr({type:"zoom",scale:ut.k,translate:[ut.x,ut.y]})}function sr(hr){--Yt||(hr({type:"zoomend"}),ue=null)}function dr(){var hr=this,Ar=bn.of(hr,arguments),Dr=0,zr=l.select(t(hr)).on(Xt,$r).on(en,ui),Wr=Qt(l.mouse(hr)),Zr=dt(hr);function $r(){Dr=1,Dn(l.mouse(hr),Wr),vr(Ar)}function ui(){zr.on(Xt,null).on(en,null),Zr(Dr),sr(Ar)}fi.call(hr),gr(Ar)}function kr(){var hr,Ar=this,Dr=bn.of(Ar,arguments),zr={},Wr=0,Zr=".zoom-"+l.event.changedTouches[0].identifier,$r="touchmove"+Zr,ui="touchend"+Zr,yi=[],hi=l.select(Ar),si=dt(Ar);function ci(){var Bi=l.touches(Ar);return hr=ut.k,Bi.forEach(function(Br){Br.identifier in zr&&(zr[Br.identifier]=Qt(Br))}),Bi}function pi(){var Bi=l.event.target;l.select(Bi).on($r,Ei).on(ui,Lo),yi.push(Bi);for(var Br=l.event.changedTouches,Zi=0,ea=Br.length;Zi<ea;++Zi)zr[Br[Zi].identifier]=null;var Ai=ci(),Za=Date.now();if(Ai.length===1){if(Za-De<500){var Yr=Ai[0];Xn(Ar,Yr,zr[Yr.identifier],Math.floor(Math.log(ut.k)/Math.LN2)+1),K()}De=Za}else if(Ai.length>1){Yr=Ai[0];var Ni=Ai[1],pa=Yr[0]-Ni[0],js=Yr[1]-Ni[1];Wr=pa*pa+js*js}}function Ei(){var Bi,Br,Zi,ea,Ai=l.touches(Ar);fi.call(Ar);for(var Za=0,Yr=Ai.length;Za<Yr;++Za,ea=null)if(Zi=Ai[Za],ea=zr[Zi.identifier]){if(Br)break;Bi=Zi,Br=ea}if(ea){var Ni=(Ni=Zi[0]-Bi[0])*Ni+(Ni=Zi[1]-Bi[1])*Ni,pa=Wr&&Math.sqrt(Ni/Wr);Bi=[(Bi[0]+Zi[0])/2,(Bi[1]+Zi[1])/2],Br=[(Br[0]+ea[0])/2,(Br[1]+ea[1])/2],Pn(pa*hr)}De=null,Dn(Bi,Br),vr(Dr)}function Lo(){if(l.event.touches.length){for(var Bi=l.event.changedTouches,Br=0,Zi=Bi.length;Br<Zi;++Br)delete zr[Bi[Br].identifier];for(var ea in zr)return void ci()}l.selectAll(yi).on(Zr,null),hi.on(ln,dr).on(Jt,kr),si(),sr(Dr)}pi(),gr(Dr),hi.on(ln,null).on(Jt,pi)}function Vr(){var hr=bn.of(this,arguments);Pe?clearTimeout(Pe):(fi.call(this),te=Qt(ue=we||l.mouse(this)),gr(hr)),Pe=setTimeout(function(){Pe=null,sr(hr)},50),K(),Pn(Math.pow(2,.002*Se())*ut.k),Dn(ue,te),vr(hr)}function Hr(){var hr=l.mouse(this),Ar=Math.log(ut.k)/Math.LN2;Xn(this,hr,Qt(hr),l.event.shiftKey?Math.ceil(Ar)-1:Math.floor(Ar)+1)}return ze||(ze="onwheel"in d?(Se=function(){return-l.event.deltaY*(l.event.deltaMode?120:1)},"wheel"):"onmousewheel"in d?(Se=function(){return l.event.wheelDelta},"mousewheel"):(Se=function(){return-l.event.detail},"MozMousePixelScroll")),gn.event=function(hr){hr.each(function(){var Ar=bn.of(this,arguments),Dr=ut;$e?l.select(this).transition().each("start.zoom",function(){ut=this.__chart__||{x:0,y:0,k:1},gr(Ar)}).tween("zoom:zoom",function(){var zr=St[0],Wr=St[1],Zr=ue?ue[0]:zr/2,$r=ue?ue[1]:Wr/2,ui=l.interpolateZoom([(Zr-ut.x)/ut.k,($r-ut.y)/ut.k,zr/ut.k],[(Zr-Dr.x)/Dr.k,($r-Dr.y)/Dr.k,zr/Dr.k]);return function(yi){var hi=ui(yi),si=zr/hi[2];this.__chart__=ut={x:Zr-hi[0]*si,y:$r-hi[1]*si,k:si},vr(Ar)}}).each("interrupt.zoom",function(){sr(Ar)}).each("end.zoom",function(){sr(Ar)}):(this.__chart__=ut,gr(Ar),vr(Ar),sr(Ar))})},gn.translate=function(hr){return arguments.length?(ut={x:+hr[0],y:+hr[1],k:ut.k},Jn(),gn):[ut.x,ut.y]},gn.scale=function(hr){return arguments.length?(ut={x:ut.x,y:ut.y,k:null},Pn(+hr),Jn(),gn):ut.k},gn.scaleExtent=function(hr){return arguments.length?(Dt=hr==null?Ke:[+hr[0],+hr[1]],gn):Dt},gn.center=function(hr){return arguments.length?(we=hr&&[+hr[0],+hr[1]],gn):we},gn.size=function(hr){return arguments.length?(St=hr&&[+hr[0],+hr[1]],gn):St},gn.duration=function(hr){return arguments.length?(Ft=+hr,gn):Ft},gn.x=function(hr){return arguments.length?(Ze=hr,Ue=hr.copy(),ut={x:0,y:0,k:1},gn):Ze},gn.y=function(hr){return arguments.length?(it=hr,Je=hr.copy(),ut={x:0,y:0,k:1},gn):it},l.rebind(gn,bn,"on")};var Se,ze,Ke=[0,1/0];function st(){}function ct(te,ue,we){return this instanceof ct?(this.h=+te,this.s=+ue,void(this.l=+we)):arguments.length<2?te instanceof ct?new ct(te.h,te.s,te.l):sn(""+te,hn,ct):new ct(te,ue,we)}l.color=st,st.prototype.toString=function(){return this.rgb()+""},l.hsl=ct;var Tt=ct.prototype=new st;function Et(te,ue,we){var Pe,De;function Ue(Ze){return Math.round(255*function(Je){return Je>360?Je-=360:Je<0&&(Je+=360),Je<60?Pe+(De-Pe)*Je/60:Je<180?De:Je<240?Pe+(De-Pe)*(240-Je)/60:Pe}(Ze))}return te=isNaN(te)?0:(te%=360)<0?te+360:te,ue=isNaN(ue)||ue<0?0:ue>1?1:ue,Pe=2*(we=we<0?0:we>1?1:we)-(De=we<=.5?we*(1+ue):we+ue-we*ue),new wn(Ue(te+120),Ue(te),Ue(te-120))}function At(te,ue,we){return this instanceof At?(this.h=+te,this.c=+ue,void(this.l=+we)):arguments.length<2?te instanceof At?new At(te.h,te.c,te.l):Gt(te instanceof gt?te.l:(te=En((te=l.rgb(te)).r,te.g,te.b)).l,te.a,te.b):new At(te,ue,we)}Tt.brighter=function(te){return te=Math.pow(.7,arguments.length?te:1),new ct(this.h,this.s,this.l/te)},Tt.darker=function(te){return te=Math.pow(.7,arguments.length?te:1),new ct(this.h,this.s,te*this.l)},Tt.rgb=function(){return Et(this.h,this.s,this.l)},l.hcl=At;var ht=At.prototype=new st;function pt(te,ue,we){return isNaN(te)&&(te=0),isNaN(ue)&&(ue=0),new gt(we,Math.cos(te*=Ge)*ue,Math.sin(te)*ue)}function gt(te,ue,we){return this instanceof gt?(this.l=+te,this.a=+ue,void(this.b=+we)):arguments.length<2?te instanceof gt?new gt(te.l,te.a,te.b):te instanceof At?pt(te.h,te.c,te.l):En((te=wn(te)).r,te.g,te.b):new gt(te,ue,we)}ht.brighter=function(te){return new At(this.h,this.c,Math.min(100,this.l+Pt*(arguments.length?te:1)))},ht.darker=function(te){return new At(this.h,this.c,Math.max(0,this.l-Pt*(arguments.length?te:1)))},ht.rgb=function(){return pt(this.h,this.c,this.l).rgb()},l.lab=gt;var Pt=18,Ot=.95047,Ht=1.08883,jt=gt.prototype=new st;function Nt(te,ue,we){var Pe=(te+16)/116,De=Pe+ue/500,Ue=Pe-we/200;return new wn(Kt(3.2404542*(De=un(De)*Ot)-1.5371385*(Pe=1*un(Pe))-.4985314*(Ue=un(Ue)*Ht)),Kt(-.969266*De+1.8760108*Pe+.041556*Ue),Kt(.0556434*De-.2040259*Pe+1.0572252*Ue))}function Gt(te,ue,we){return te>0?new At(Math.atan2(we,ue)*We,Math.sqrt(ue*ue+we*we),te):new At(NaN,NaN,te)}function un(te){return te>.206893034?te*te*te:(te-.13793103448275862)/7.787037}function pn(te){return te>.008856?Math.pow(te,.3333333333333333):7.787037*te+.13793103448275862}function Kt(te){return Math.round(255*(te<=.00304?12.92*te:1.055*Math.pow(te,.4166666666666667)-.055))}function wn(te,ue,we){return this instanceof wn?(this.r=~~te,this.g=~~ue,void(this.b=~~we)):arguments.length<2?te instanceof wn?new wn(te.r,te.g,te.b):sn(""+te,wn,Et):new wn(te,ue,we)}function Bn(te){return new wn(te>>16,te>>8&255,255&te)}function vn(te){return Bn(te)+""}jt.brighter=function(te){return new gt(Math.min(100,this.l+Pt*(arguments.length?te:1)),this.a,this.b)},jt.darker=function(te){return new gt(Math.max(0,this.l-Pt*(arguments.length?te:1)),this.a,this.b)},jt.rgb=function(){return Nt(this.l,this.a,this.b)},l.rgb=wn;var cn=wn.prototype=new st;function dn(te){return te<16?"0"+Math.max(0,te).toString(16):Math.min(255,te).toString(16)}function sn(te,ue,we){var Pe,De,Ue,Ze=0,Je=0,it=0;if(Pe=/([a-z]+)\((.*)\)/.exec(te=te.toLowerCase()))switch(De=Pe[2].split(","),Pe[1]){case"hsl":return we(parseFloat(De[0]),parseFloat(De[1])/100,parseFloat(De[2])/100);case"rgb":return ue(Rn(De[0]),Rn(De[1]),Rn(De[2]))}return(Ue=Nn.get(te))?ue(Ue.r,Ue.g,Ue.b):(te==null||te.charAt(0)!=="#"||isNaN(Ue=parseInt(te.slice(1),16))||(te.length===4?(Ze=(3840&Ue)>>4,Ze|=Ze>>4,Je=240&Ue,Je|=Je>>4,it=15&Ue,it|=it<<4):te.length===7&&(Ze=(16711680&Ue)>>16,Je=(65280&Ue)>>8,it=255&Ue)),ue(Ze,Je,it))}function hn(te,ue,we){var Pe,De,Ue=Math.min(te/=255,ue/=255,we/=255),Ze=Math.max(te,ue,we),Je=Ze-Ue,it=(Ze+Ue)/2;return Je?(De=it<.5?Je/(Ze+Ue):Je/(2-Ze-Ue),Pe=te==Ze?(ue-we)/Je+(ue<we?6:0):ue==Ze?(we-te)/Je+2:(te-ue)/Je+4,Pe*=60):(Pe=NaN,De=it>0&&it<1?0:Pe),new ct(Pe,De,it)}function En(te,ue,we){var Pe=pn((.4124564*(te=Mn(te))+.3575761*(ue=Mn(ue))+.1804375*(we=Mn(we)))/Ot),De=pn((.2126729*te+.7151522*ue+.072175*we)/1);return gt(116*De-16,500*(Pe-De),200*(De-pn((.0193339*te+.119192*ue+.9503041*we)/Ht)))}function Mn(te){return(te/=255)<=.04045?te/12.92:Math.pow((te+.055)/1.055,2.4)}function Rn(te){var ue=parseFloat(te);return te.charAt(te.length-1)==="%"?Math.round(2.55*ue):ue}cn.brighter=function(te){te=Math.pow(.7,arguments.length?te:1);var ue=this.r,we=this.g,Pe=this.b,De=30;return ue||we||Pe?(ue&&ue<De&&(ue=De),we&&we<De&&(we=De),Pe&&Pe<De&&(Pe=De),new wn(Math.min(255,ue/te),Math.min(255,we/te),Math.min(255,Pe/te))):new wn(De,De,De)},cn.darker=function(te){return new wn((te=Math.pow(.7,arguments.length?te:1))*this.r,te*this.g,te*this.b)},cn.hsl=function(){return hn(this.r,this.g,this.b)},cn.toString=function(){return"#"+dn(this.r)+dn(this.g)+dn(this.b)};var Nn=l.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Fn(te){return typeof te=="function"?te:function(){return te}}function rr(te){return function(ue,we,Pe){return arguments.length===2&&typeof we=="function"&&(Pe=we,we=null),$n(ue,we,te,Pe)}}function $n(te,ue,we,Pe){var De={},Ue=l.dispatch("beforesend","progress","load","error"),Ze={},Je=new XMLHttpRequest,it=null;function ut(){var St,Dt=Je.status;if(!Dt&&function(Ft){var Yt=Ft.responseType;return Yt&&Yt!=="text"?Ft.response:Ft.responseText}(Je)||Dt>=200&&Dt<300||Dt===304){try{St=we.call(De,Je)}catch(Ft){return void Ue.error.call(De,Ft)}Ue.load.call(De,St)}else Ue.error.call(De,Je)}return self.XDomainRequest&&!("withCredentials"in Je)&&/^(http(s)?:)?\/\//.test(te)&&(Je=new XDomainRequest),"onload"in Je?Je.onload=Je.onerror=ut:Je.onreadystatechange=function(){Je.readyState>3&&ut()},Je.onprogress=function(St){var Dt=l.event;l.event=St;try{Ue.progress.call(De,Je)}finally{l.event=Dt}},De.header=function(St,Dt){return St=(St+"").toLowerCase(),arguments.length<2?Ze[St]:(Dt==null?delete Ze[St]:Ze[St]=Dt+"",De)},De.mimeType=function(St){return arguments.length?(ue=St==null?null:St+"",De):ue},De.responseType=function(St){return arguments.length?(it=St,De):it},De.response=function(St){return we=St,De},["get","post"].forEach(function(St){De[St]=function(){return De.send.apply(De,[St].concat(x(arguments)))}}),De.send=function(St,Dt,Ft){if(arguments.length===2&&typeof Dt=="function"&&(Ft=Dt,Dt=null),Je.open(St,te,!0),ue==null||"accept"in Ze||(Ze.accept=ue+",*/*"),Je.setRequestHeader)for(var Yt in Ze)Je.setRequestHeader(Yt,Ze[Yt]);return ue!=null&&Je.overrideMimeType&&Je.overrideMimeType(ue),it!=null&&(Je.responseType=it),Ft!=null&&De.on("error",Ft).on("load",function(ln){Ft(null,ln)}),Ue.beforesend.call(De,Je),Je.send(Dt??null),De},De.abort=function(){return Je.abort(),De},l.rebind(De,Ue,"on"),Pe==null?De:De.get(function(St){return St.length===1?function(Dt,Ft){St(Dt==null?Ft:null)}:St}(Pe))}Nn.forEach(function(te,ue){Nn.set(te,Bn(ue))}),l.functor=Fn,l.xhr=rr(U),l.dsv=function(te,ue){var we=new RegExp('["'+te+`
]`),Pe=te.charCodeAt(0);function De(ut,St,Dt){arguments.length<3&&(Dt=St,St=null);var Ft=$n(ut,ue,St==null?Ue:Ze(St),Dt);return Ft.row=function(Yt){return arguments.length?Ft.response((St=Yt)==null?Ue:Ze(Yt)):St},Ft}function Ue(ut){return De.parse(ut.responseText)}function Ze(ut){return function(St){return De.parse(St.responseText,ut)}}function Je(ut){return ut.map(it).join(te)}function it(ut){return we.test(ut)?'"'+ut.replace(/\"/g,'""')+'"':ut}return De.parse=function(ut,St){var Dt;return De.parseRows(ut,function(Ft,Yt){if(Dt)return Dt(Ft,Yt-1);var ln=function(Xt){for(var en={},Jt=Ft.length,bn=0;bn<Jt;++bn)en[Ft[bn]]=Xt[bn];return en};Dt=St?function(Xt,en){return St(ln(Xt),en)}:ln})},De.parseRows=function(ut,St){var Dt,Ft,Yt={},ln={},Xt=[],en=ut.length,Jt=0,bn=0;function gn(){if(Jt>=en)return ln;if(Ft)return Ft=!1,Yt;var Pn=Jt;if(ut.charCodeAt(Pn)===34){for(var Dn=Pn;Dn++<en;)if(ut.charCodeAt(Dn)===34){if(ut.charCodeAt(Dn+1)!==34)break;++Dn}return Jt=Dn+2,(Xn=ut.charCodeAt(Dn+1))===13?(Ft=!0,ut.charCodeAt(Dn+2)===10&&++Jt):Xn===10&&(Ft=!0),ut.slice(Pn+1,Dn).replace(/""/g,'"')}for(;Jt<en;){var Xn,Jn=1;if((Xn=ut.charCodeAt(Jt++))===10)Ft=!0;else if(Xn===13)Ft=!0,ut.charCodeAt(Jt)===10&&(++Jt,++Jn);else if(Xn!==Pe)continue;return ut.slice(Pn,Jt-Jn)}return ut.slice(Pn)}for(;(Dt=gn())!==ln;){for(var Qt=[];Dt!==Yt&&Dt!==ln;)Qt.push(Dt),Dt=gn();St&&(Qt=St(Qt,bn++))==null||Xt.push(Qt)}return Xt},De.format=function(ut){if(Array.isArray(ut[0]))return De.formatRows(ut);var St=new I,Dt=[];return ut.forEach(function(Ft){for(var Yt in Ft)St.has(Yt)||Dt.push(St.add(Yt))}),[Dt.map(it).join(te)].concat(ut.map(function(Ft){return Dt.map(function(Yt){return it(Ft[Yt])}).join(te)})).join(`
`)},De.formatRows=function(ut){return ut.map(Je).join(`
`)},De},l.csv=l.dsv(",","text/csv"),l.tsv=l.dsv("	","text/tab-separated-values");var mr,fr,Zn,qn,ur=this[H(this,"requestAnimationFrame")]||function(te){setTimeout(te,17)};function Zt(te,ue,we){var Pe=arguments.length;Pe<2&&(ue=0),Pe<3&&(we=Date.now());var De=we+ue,Ue={c:te,t:De,n:null};return fr?fr.n=Ue:mr=Ue,fr=Ue,Zn||(qn=clearTimeout(qn),Zn=1,ur(nn)),Ue}function nn(){var te=zn(),ue=_n()-te;ue>24?(isFinite(ue)&&(clearTimeout(qn),qn=setTimeout(nn,ue)),Zn=0):(Zn=1,ur(nn))}function zn(){for(var te=Date.now(),ue=mr;ue;)te>=ue.t&&ue.c(te-ue.t)&&(ue.c=null),ue=ue.n;return te}function _n(){for(var te,ue=mr,we=1/0;ue;)ue.c?(ue.t<we&&(we=ue.t),ue=(te=ue).n):ue=te?te.n=ue.n:mr=ue.n;return fr=te,we}function Cn(te){return te[0]}function Un(te){return te[1]}function Gn(te){for(var ue,we,Pe,De=te.length,Ue=[0,1],Ze=2,Je=2;Je<De;Je++){for(;Ze>1&&(ue=te[Ue[Ze-2]],we=te[Ue[Ze-1]],Pe=te[Je],(we[0]-ue[0])*(Pe[1]-ue[1])-(we[1]-ue[1])*(Pe[0]-ue[0])<=0);)--Ze;Ue[Ze++]=Je}return Ue.slice(0,Ze)}function ar(te,ue){return te[0]-ue[0]||te[1]-ue[1]}l.timer=function(){Zt.apply(this,arguments)},l.timer.flush=function(){zn(),_n()},l.round=function(te,ue){return ue?Math.round(te*(ue=Math.pow(10,ue)))/ue:Math.round(te)},l.geom={},l.geom.hull=function(te){var ue=Cn,we=Un;if(arguments.length)return Pe(te);function Pe(De){if(De.length<3)return[];var Ue,Ze=Fn(ue),Je=Fn(we),it=De.length,ut=[],St=[];for(Ue=0;Ue<it;Ue++)ut.push([+Ze.call(this,De[Ue],Ue),+Je.call(this,De[Ue],Ue),Ue]);for(ut.sort(ar),Ue=0;Ue<it;Ue++)St.push([ut[Ue][0],-ut[Ue][1]]);var Dt=Gn(ut),Ft=Gn(St),Yt=Ft[0]===Dt[0],ln=Ft[Ft.length-1]===Dt[Dt.length-1],Xt=[];for(Ue=Dt.length-1;Ue>=0;--Ue)Xt.push(De[ut[Dt[Ue]][2]]);for(Ue=+Yt;Ue<Ft.length-ln;++Ue)Xt.push(De[ut[Ft[Ue]][2]]);return Xt}return Pe.x=function(De){return arguments.length?(ue=De,Pe):ue},Pe.y=function(De){return arguments.length?(we=De,Pe):we},Pe},l.geom.polygon=function(te){return J(te,yr),te};var yr=l.geom.polygon.prototype=[];function $t(te,ue,we){return(we[0]-ue[0])*(te[1]-ue[1])<(we[1]-ue[1])*(te[0]-ue[0])}function kn(te,ue,we,Pe){var De=te[0],Ue=we[0],Ze=ue[0]-De,Je=Pe[0]-Ue,it=te[1],ut=we[1],St=ue[1]-it,Dt=Pe[1]-ut,Ft=(Je*(it-ut)-Dt*(De-Ue))/(Dt*Ze-Je*St);return[De+Ft*Ze,it+Ft*St]}function zt(te){var ue=te[0],we=te[te.length-1];return!(ue[0]-we[0]||ue[1]-we[1])}yr.area=function(){for(var te,ue=-1,we=this.length,Pe=this[we-1],De=0;++ue<we;)te=Pe,Pe=this[ue],De+=te[1]*Pe[0]-te[0]*Pe[1];return .5*De},yr.centroid=function(te){var ue,we,Pe=-1,De=this.length,Ue=0,Ze=0,Je=this[De-1];for(arguments.length||(te=-1/(6*this.area()));++Pe<De;)ue=Je,Je=this[Pe],we=ue[0]*Je[1]-Je[0]*ue[1],Ue+=(ue[0]+Je[0])*we,Ze+=(ue[1]+Je[1])*we;return[Ue*te,Ze*te]},yr.clip=function(te){for(var ue,we,Pe,De,Ue,Ze,Je=zt(te),it=-1,ut=this.length-zt(this),St=this[ut-1];++it<ut;){for(ue=te.slice(),te.length=0,De=this[it],Ue=ue[(Pe=ue.length-Je)-1],we=-1;++we<Pe;)$t(Ze=ue[we],St,De)?($t(Ue,St,De)||te.push(kn(Ue,Ze,St,De)),te.push(Ze)):$t(Ue,St,De)&&te.push(kn(Ue,Ze,St,De)),Ue=Ze;Je&&te.push(te[0]),St=De}return te};var Wt,tn,Sn,An,Tn,an=[],mn=[];function on(){li(this),this.edge=this.site=this.circle=null}function fn(te){var ue=an.pop()||new on;return ue.site=te,ue}function yn(te){lr(te),Sn.remove(te),an.push(te),li(te)}function Ln(te){var ue=te.circle,we=ue.x,Pe=ue.cy,De={x:we,y:Pe},Ue=te.P,Ze=te.N,Je=[te];yn(te);for(var it=Ue;it.circle&&y(we-it.circle.x)<Lt&&y(Pe-it.circle.cy)<Lt;)Ue=it.P,Je.unshift(it),yn(it),it=Ue;Je.unshift(it),lr(it);for(var ut=Ze;ut.circle&&y(we-ut.circle.x)<Lt&&y(Pe-ut.circle.cy)<Lt;)Ze=ut.N,Je.push(ut),yn(ut),ut=Ze;Je.push(ut),lr(ut);var St,Dt=Je.length;for(St=1;St<Dt;++St)ut=Je[St],it=Je[St-1],cr(ut.edge,it.site,ut.site,De);it=Je[0],(ut=Je[Dt-1]).edge=Sr(it.site,ut.site,null,De),ir(it),ir(ut)}function Hn(te){for(var ue,we,Pe,De,Ue=te.x,Ze=te.y,Je=Sn._;Je;)if((Pe=Wn(Je,Ze)-Ue)>Lt)Je=Je.L;else{if(!((De=Ue-Kn(Je,Ze))>Lt)){Pe>-Lt?(ue=Je.P,we=Je):De>-Lt?(ue=Je,we=Je.N):ue=we=Je;break}if(!Je.R){ue=Je;break}Je=Je.R}var it=fn(te);if(Sn.insert(ue,it),ue||we){if(ue===we)return lr(ue),we=fn(ue.site),Sn.insert(it,we),it.edge=we.edge=Sr(ue.site,it.site),ir(ue),void ir(we);if(we){lr(ue),lr(we);var ut=ue.site,St=ut.x,Dt=ut.y,Ft=te.x-St,Yt=te.y-Dt,ln=we.site,Xt=ln.x-St,en=ln.y-Dt,Jt=2*(Ft*en-Yt*Xt),bn=Ft*Ft+Yt*Yt,gn=Xt*Xt+en*en,Qt={x:(en*bn-Yt*gn)/Jt+St,y:(Ft*gn-Xt*bn)/Jt+Dt};cr(we.edge,ut,ln,Qt),it.edge=Sr(ut,te,null,Qt),we.edge=Sr(te,ln,null,Qt),ir(ue),ir(we)}else it.edge=Sr(ue.site,it.site)}}function Wn(te,ue){var we=te.site,Pe=we.x,De=we.y,Ue=De-ue;if(!Ue)return Pe;var Ze=te.P;if(!Ze)return-1/0;var Je=(we=Ze.site).x,it=we.y,ut=it-ue;if(!ut)return Je;var St=Je-Pe,Dt=1/Ue-1/ut,Ft=St/ut;return Dt?(-Ft+Math.sqrt(Ft*Ft-2*Dt*(St*St/(-2*ut)-it+ut/2+De-Ue/2)))/Dt+Pe:(Pe+Je)/2}function Kn(te,ue){var we=te.N;if(we)return Wn(we,ue);var Pe=te.site;return Pe.y===ue?Pe.x:1/0}function nr(te){this.site=te,this.edges=[]}function er(te,ue){return ue.angle-te.angle}function or(){li(this),this.x=this.y=this.arc=this.site=this.cy=null}function ir(te){var ue=te.P,we=te.N;if(ue&&we){var Pe=ue.site,De=te.site,Ue=we.site;if(Pe!==Ue){var Ze=De.x,Je=De.y,it=Pe.x-Ze,ut=Pe.y-Je,St=Ue.x-Ze,Dt=2*(it*(en=Ue.y-Je)-ut*St);if(!(Dt>=-1e-12)){var Ft=it*it+ut*ut,Yt=St*St+en*en,ln=(en*Ft-ut*Yt)/Dt,Xt=(it*Yt-St*Ft)/Dt,en=Xt+Je,Jt=mn.pop()||new or;Jt.arc=te,Jt.site=De,Jt.x=ln+Ze,Jt.y=en+Math.sqrt(ln*ln+Xt*Xt),Jt.cy=en,te.circle=Jt;for(var bn=null,gn=Tn._;gn;)if(Jt.y<gn.y||Jt.y===gn.y&&Jt.x<=gn.x){if(!gn.L){bn=gn.P;break}gn=gn.L}else{if(!gn.R){bn=gn;break}gn=gn.R}Tn.insert(bn,Jt),bn||(An=Jt)}}}}function lr(te){var ue=te.circle;ue&&(ue.P||(An=ue.N),Tn.remove(ue),mn.push(ue),li(ue),te.circle=null)}function br(te,ue){var we=te.b;if(we)return!0;var Pe,De,Ue=te.a,Ze=ue[0][0],Je=ue[1][0],it=ue[0][1],ut=ue[1][1],St=te.l,Dt=te.r,Ft=St.x,Yt=St.y,ln=Dt.x,Xt=Dt.y,en=(Ft+ln)/2,Jt=(Yt+Xt)/2;if(Xt===Yt){if(en<Ze||en>=Je)return;if(Ft>ln){if(Ue){if(Ue.y>=ut)return}else Ue={x:en,y:it};we={x:en,y:ut}}else{if(Ue){if(Ue.y<it)return}else Ue={x:en,y:ut};we={x:en,y:it}}}else if(De=Jt-(Pe=(Ft-ln)/(Xt-Yt))*en,Pe<-1||Pe>1)if(Ft>ln){if(Ue){if(Ue.y>=ut)return}else Ue={x:(it-De)/Pe,y:it};we={x:(ut-De)/Pe,y:ut}}else{if(Ue){if(Ue.y<it)return}else Ue={x:(ut-De)/Pe,y:ut};we={x:(it-De)/Pe,y:it}}else if(Yt<Xt){if(Ue){if(Ue.x>=Je)return}else Ue={x:Ze,y:Pe*Ze+De};we={x:Je,y:Pe*Je+De}}else{if(Ue){if(Ue.x<Ze)return}else Ue={x:Je,y:Pe*Je+De};we={x:Ze,y:Pe*Ze+De}}return te.a=Ue,te.b=we,!0}function Ur(te,ue){this.l=te,this.r=ue,this.a=this.b=null}function Sr(te,ue,we,Pe){var De=new Ur(te,ue);return Wt.push(De),we&&cr(De,te,ue,we),Pe&&cr(De,ue,te,Pe),tn[te.i].edges.push(new Lr(De,te,ue)),tn[ue.i].edges.push(new Lr(De,ue,te)),De}function cr(te,ue,we,Pe){te.a||te.b?te.l===we?te.b=Pe:te.a=Pe:(te.a=Pe,te.l=ue,te.r=we)}function Lr(te,ue,we){var Pe=te.a,De=te.b;this.edge=te,this.site=ue,this.angle=we?Math.atan2(we.y-ue.y,we.x-ue.x):te.l===ue?Math.atan2(De.x-Pe.x,Pe.y-De.y):Math.atan2(Pe.x-De.x,De.y-Pe.y)}function Rr(){this._=null}function li(te){te.U=te.C=te.L=te.R=te.P=te.N=null}function Si(te,ue){var we=ue,Pe=ue.R,De=we.U;De?De.L===we?De.L=Pe:De.R=Pe:te._=Pe,Pe.U=De,we.U=Pe,we.R=Pe.L,we.R&&(we.R.U=we),Pe.L=we}function Oi(te,ue){var we=ue,Pe=ue.L,De=we.U;De?De.L===we?De.L=Pe:De.R=Pe:te._=Pe,Pe.U=De,we.U=Pe,we.L=Pe.R,we.L&&(we.L.U=we),Pe.R=we}function La(te){for(;te.L;)te=te.L;return te}function Vi(te,ue){var we,Pe,De,Ue=te.sort(vi).pop();for(Wt=[],tn=new Array(te.length),Sn=new Rr,Tn=new Rr;;)if(De=An,Ue&&(!De||Ue.y<De.y||Ue.y===De.y&&Ue.x<De.x))Ue.x===we&&Ue.y===Pe||(tn[Ue.i]=new nr(Ue),Hn(Ue),we=Ue.x,Pe=Ue.y),Ue=te.pop();else{if(!De)break;Ln(De.arc)}ue&&(function(Je){for(var it,ut,St,Dt,Ft,Yt=Wt,ln=(ut=Je[0][0],St=Je[0][1],Dt=Je[1][0],Ft=Je[1][1],function(en){var Jt,bn=en.a,gn=en.b,Qt=bn.x,Pn=bn.y,Dn=0,Xn=1,Jn=gn.x-Qt,gr=gn.y-Pn;if(Jt=ut-Qt,Jn||!(Jt>0)){if(Jt/=Jn,Jn<0){if(Jt<Dn)return;Jt<Xn&&(Xn=Jt)}else if(Jn>0){if(Jt>Xn)return;Jt>Dn&&(Dn=Jt)}if(Jt=Dt-Qt,Jn||!(Jt<0)){if(Jt/=Jn,Jn<0){if(Jt>Xn)return;Jt>Dn&&(Dn=Jt)}else if(Jn>0){if(Jt<Dn)return;Jt<Xn&&(Xn=Jt)}if(Jt=St-Pn,gr||!(Jt>0)){if(Jt/=gr,gr<0){if(Jt<Dn)return;Jt<Xn&&(Xn=Jt)}else if(gr>0){if(Jt>Xn)return;Jt>Dn&&(Dn=Jt)}if(Jt=Ft-Pn,gr||!(Jt<0)){if(Jt/=gr,gr<0){if(Jt>Xn)return;Jt>Dn&&(Dn=Jt)}else if(gr>0){if(Jt<Dn)return;Jt<Xn&&(Xn=Jt)}return Dn>0&&(en.a={x:Qt+Dn*Jn,y:Pn+Dn*gr}),Xn<1&&(en.b={x:Qt+Xn*Jn,y:Pn+Xn*gr}),en}}}}}),Xt=Yt.length;Xt--;)(!br(it=Yt[Xt],Je)||!ln(it)||y(it.a.x-it.b.x)<Lt&&y(it.a.y-it.b.y)<Lt)&&(it.a=it.b=null,Yt.splice(Xt,1))}(ue),function(Je){for(var it,ut,St,Dt,Ft,Yt,ln,Xt,en,Jt,bn=Je[0][0],gn=Je[1][0],Qt=Je[0][1],Pn=Je[1][1],Dn=tn,Xn=Dn.length;Xn--;)if((Ft=Dn[Xn])&&Ft.prepare())for(Xt=(ln=Ft.edges).length,Yt=0;Yt<Xt;)St=(Jt=ln[Yt].end()).x,Dt=Jt.y,it=(en=ln[++Yt%Xt].start()).x,ut=en.y,(y(St-it)>Lt||y(Dt-ut)>Lt)&&(ln.splice(Yt,0,new Lr((Jn=Ft.site,gr=Jt,vr=y(St-bn)<Lt&&Pn-Dt>Lt?{x:bn,y:y(it-bn)<Lt?ut:Pn}:y(Dt-Pn)<Lt&&gn-St>Lt?{x:y(ut-Pn)<Lt?it:gn,y:Pn}:y(St-gn)<Lt&&Dt-Qt>Lt?{x:gn,y:y(it-gn)<Lt?ut:Qt}:y(Dt-Qt)<Lt&&St-bn>Lt?{x:y(ut-Qt)<Lt?it:bn,y:Qt}:null,sr=void 0,(sr=new Ur(Jn,null)).a=gr,sr.b=vr,Wt.push(sr),sr),Ft.site,null)),++Xt);var Jn,gr,vr,sr}(ue));var Ze={cells:tn,edges:Wt};return Sn=Tn=Wt=tn=null,Ze}function vi(te,ue){return ue.y-te.y||ue.x-te.x}nr.prototype.prepare=function(){for(var te,ue=this.edges,we=ue.length;we--;)(te=ue[we].edge).b&&te.a||ue.splice(we,1);return ue.sort(er),ue.length},Lr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Rr.prototype={insert:function(te,ue){var we,Pe,De;if(te){if(ue.P=te,ue.N=te.N,te.N&&(te.N.P=ue),te.N=ue,te.R){for(te=te.R;te.L;)te=te.L;te.L=ue}else te.R=ue;we=te}else this._?(te=La(this._),ue.P=null,ue.N=te,te.P=te.L=ue,we=te):(ue.P=ue.N=null,this._=ue,we=null);for(ue.L=ue.R=null,ue.U=we,ue.C=!0,te=ue;we&&we.C;)we===(Pe=we.U).L?(De=Pe.R)&&De.C?(we.C=De.C=!1,Pe.C=!0,te=Pe):(te===we.R&&(Si(this,we),we=(te=we).U),we.C=!1,Pe.C=!0,Oi(this,Pe)):(De=Pe.L)&&De.C?(we.C=De.C=!1,Pe.C=!0,te=Pe):(te===we.L&&(Oi(this,we),we=(te=we).U),we.C=!1,Pe.C=!0,Si(this,Pe)),we=te.U;this._.C=!1},remove:function(te){te.N&&(te.N.P=te.P),te.P&&(te.P.N=te.N),te.N=te.P=null;var ue,we,Pe,De=te.U,Ue=te.L,Ze=te.R;if(we=Ue?Ze?La(Ze):Ue:Ze,De?De.L===te?De.L=we:De.R=we:this._=we,Ue&&Ze?(Pe=we.C,we.C=te.C,we.L=Ue,Ue.U=we,we!==Ze?(De=we.U,we.U=te.U,te=we.R,De.L=te,we.R=Ze,Ze.U=we):(we.U=De,De=we,te=we.R)):(Pe=te.C,te=we),te&&(te.U=De),!Pe)if(te&&te.C)te.C=!1;else{do{if(te===this._)break;if(te===De.L){if((ue=De.R).C&&(ue.C=!1,De.C=!0,Si(this,De),ue=De.R),ue.L&&ue.L.C||ue.R&&ue.R.C){ue.R&&ue.R.C||(ue.L.C=!1,ue.C=!0,Oi(this,ue),ue=De.R),ue.C=De.C,De.C=ue.R.C=!1,Si(this,De),te=this._;break}}else if((ue=De.L).C&&(ue.C=!1,De.C=!0,Oi(this,De),ue=De.L),ue.L&&ue.L.C||ue.R&&ue.R.C){ue.L&&ue.L.C||(ue.R.C=!1,ue.C=!0,Si(this,ue),ue=De.L),ue.C=De.C,De.C=ue.L.C=!1,Oi(this,De),te=this._;break}ue.C=!0,te=De,De=De.U}while(!te.C);te&&(te.C=!1)}}},l.geom.voronoi=function(te){var ue=Cn,we=Un,Pe=ue,De=we,Ue=Ca;if(te)return Ze(te);function Ze(it){var ut=new Array(it.length),St=Ue[0][0],Dt=Ue[0][1],Ft=Ue[1][0],Yt=Ue[1][1];return Vi(Je(it),Ue).cells.forEach(function(ln,Xt){var en=ln.edges,Jt=ln.site;(ut[Xt]=en.length?en.map(function(bn){var gn=bn.start();return[gn.x,gn.y]}):Jt.x>=St&&Jt.x<=Ft&&Jt.y>=Dt&&Jt.y<=Yt?[[St,Yt],[Ft,Yt],[Ft,Dt],[St,Dt]]:[]).point=it[Xt]}),ut}function Je(it){return it.map(function(ut,St){return{x:Math.round(Pe(ut,St)/Lt)*Lt,y:Math.round(De(ut,St)/Lt)*Lt,i:St}})}return Ze.links=function(it){return Vi(Je(it)).edges.filter(function(ut){return ut.l&&ut.r}).map(function(ut){return{source:it[ut.l.i],target:it[ut.r.i]}})},Ze.triangles=function(it){var ut=[];return Vi(Je(it)).cells.forEach(function(St,Dt){for(var Ft,Yt,ln,Xt,en=St.site,Jt=St.edges.sort(er),bn=-1,gn=Jt.length,Qt=Jt[gn-1].edge,Pn=Qt.l===en?Qt.r:Qt.l;++bn<gn;)Ft=Pn,Pn=(Qt=Jt[bn].edge).l===en?Qt.r:Qt.l,Dt<Ft.i&&Dt<Pn.i&&(ln=Ft,Xt=Pn,((Yt=en).x-Xt.x)*(ln.y-Yt.y)-(Yt.x-ln.x)*(Xt.y-Yt.y)<0)&&ut.push([it[Dt],it[Ft.i],it[Pn.i]])}),ut},Ze.x=function(it){return arguments.length?(Pe=Fn(ue=it),Ze):ue},Ze.y=function(it){return arguments.length?(De=Fn(we=it),Ze):we},Ze.clipExtent=function(it){return arguments.length?(Ue=it??Ca,Ze):Ue===Ca?null:Ue},Ze.size=function(it){return arguments.length?Ze.clipExtent(it&&[[0,0],it]):Ue===Ca?null:Ue&&Ue[1]},Ze};var Ca=[[-1e6,-1e6],[1e6,1e6]];function io(te){return te.x}function Yo(te){return te.y}function Xo(te,ue,we,Pe,De,Ue){if(!te(ue,we,Pe,De,Ue)){var Ze=.5*(we+De),Je=.5*(Pe+Ue),it=ue.nodes;it[0]&&Xo(te,it[0],we,Pe,Ze,Je),it[1]&&Xo(te,it[1],Ze,Pe,De,Je),it[2]&&Xo(te,it[2],we,Je,Ze,Ue),it[3]&&Xo(te,it[3],Ze,Je,De,Ue)}}function ll(te,ue,we,Pe,De,Ue,Ze){var Je,it=1/0;return function ut(St,Dt,Ft,Yt,ln){if(!(Dt>Ue||Ft>Ze||Yt<Pe||ln<De)){if(Xt=St.point){var Xt,en=ue-St.x,Jt=we-St.y,bn=en*en+Jt*Jt;if(bn<it){var gn=Math.sqrt(it=bn);Pe=ue-gn,De=we-gn,Ue=ue+gn,Ze=we+gn,Je=Xt}}for(var Qt=St.nodes,Pn=.5*(Dt+Yt),Dn=.5*(Ft+ln),Xn=(we>=Dn)<<1|ue>=Pn,Jn=Xn+4;Xn<Jn;++Xn)if(St=Qt[3&Xn])switch(3&Xn){case 0:ut(St,Dt,Ft,Pn,Dn);break;case 1:ut(St,Pn,Ft,Yt,Dn);break;case 2:ut(St,Dt,Dn,Pn,ln);break;case 3:ut(St,Pn,Dn,Yt,ln)}}}(te,Pe,De,Ue,Ze),Je}function Gs(te,ue){te=l.rgb(te),ue=l.rgb(ue);var we=te.r,Pe=te.g,De=te.b,Ue=ue.r-we,Ze=ue.g-Pe,Je=ue.b-De;return function(it){return"#"+dn(Math.round(we+Ue*it))+dn(Math.round(Pe+Ze*it))+dn(Math.round(De+Je*it))}}function Jo(te,ue){var we,Pe={},De={};for(we in te)we in ue?Pe[we]=ya(te[we],ue[we]):De[we]=te[we];for(we in ue)we in te||(De[we]=ue[we]);return function(Ue){for(we in Pe)De[we]=Pe[we](Ue);return De}}function ka(te,ue){return te=+te,ue=+ue,function(we){return te*(1-we)+ue*we}}function Zs(te,ue){var we,Pe,De,Ue=Di.lastIndex=hs.lastIndex=0,Ze=-1,Je=[],it=[];for(te+="",ue+="";(we=Di.exec(te))&&(Pe=hs.exec(ue));)(De=Pe.index)>Ue&&(De=ue.slice(Ue,De),Je[Ze]?Je[Ze]+=De:Je[++Ze]=De),(we=we[0])===(Pe=Pe[0])?Je[Ze]?Je[Ze]+=Pe:Je[++Ze]=Pe:(Je[++Ze]=null,it.push({i:Ze,x:ka(we,Pe)})),Ue=hs.lastIndex;return Ue<ue.length&&(De=ue.slice(Ue),Je[Ze]?Je[Ze]+=De:Je[++Ze]=De),Je.length<2?it[0]?(ue=it[0].x,function(ut){return ue(ut)+""}):function(){return ue}:(ue=it.length,function(ut){for(var St,Dt=0;Dt<ue;++Dt)Je[(St=it[Dt]).i]=St.x(ut);return Je.join("")})}l.geom.delaunay=function(te){return l.geom.voronoi().triangles(te)},l.geom.quadtree=function(te,ue,we,Pe,De){var Ue,Ze=Cn,Je=Un;if(Ue=arguments.length)return Ze=io,Je=Yo,Ue===3&&(De=we,Pe=ue,we=ue=0),it(te);function it(ut){var St,Dt,Ft,Yt,ln,Xt,en,Jt,bn,gn=Fn(Ze),Qt=Fn(Je);if(ue!=null)Xt=ue,en=we,Jt=Pe,bn=De;else if(Jt=bn=-(Xt=en=1/0),Dt=[],Ft=[],ln=ut.length,Ue)for(Yt=0;Yt<ln;++Yt)(St=ut[Yt]).x<Xt&&(Xt=St.x),St.y<en&&(en=St.y),St.x>Jt&&(Jt=St.x),St.y>bn&&(bn=St.y),Dt.push(St.x),Ft.push(St.y);else for(Yt=0;Yt<ln;++Yt){var Pn=+gn(St=ut[Yt],Yt),Dn=+Qt(St,Yt);Pn<Xt&&(Xt=Pn),Dn<en&&(en=Dn),Pn>Jt&&(Jt=Pn),Dn>bn&&(bn=Dn),Dt.push(Pn),Ft.push(Dn)}var Xn=Jt-Xt,Jn=bn-en;function gr(dr,kr,Vr,Hr,hr,Ar,Dr,zr){if(!isNaN(Vr)&&!isNaN(Hr))if(dr.leaf){var Wr=dr.x,Zr=dr.y;if(Wr!=null)if(y(Wr-Vr)+y(Zr-Hr)<.01)vr(dr,kr,Vr,Hr,hr,Ar,Dr,zr);else{var $r=dr.point;dr.x=dr.y=dr.point=null,vr(dr,$r,Wr,Zr,hr,Ar,Dr,zr),vr(dr,kr,Vr,Hr,hr,Ar,Dr,zr)}else dr.x=Vr,dr.y=Hr,dr.point=kr}else vr(dr,kr,Vr,Hr,hr,Ar,Dr,zr)}function vr(dr,kr,Vr,Hr,hr,Ar,Dr,zr){var Wr=.5*(hr+Dr),Zr=.5*(Ar+zr),$r=Vr>=Wr,ui=Hr>=Zr,yi=ui<<1|$r;dr.leaf=!1,$r?hr=Wr:Dr=Wr,ui?Ar=Zr:zr=Zr,gr(dr=dr.nodes[yi]||(dr.nodes[yi]={leaf:!0,nodes:[],point:null,x:null,y:null}),kr,Vr,Hr,hr,Ar,Dr,zr)}Xn>Jn?bn=en+Xn:Jt=Xt+Jn;var sr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(dr){gr(sr,dr,+gn(dr,++Yt),+Qt(dr,Yt),Xt,en,Jt,bn)},visit:function(dr){Xo(dr,sr,Xt,en,Jt,bn)},find:function(dr){return ll(sr,dr[0],dr[1],Xt,en,Jt,bn)}};if(Yt=-1,ue==null){for(;++Yt<ln;)gr(sr,ut[Yt],Dt[Yt],Ft[Yt],Xt,en,Jt,bn);--Yt}else ut.forEach(sr.add);return Dt=Ft=ut=St=null,sr}return it.x=function(ut){return arguments.length?(Ze=ut,it):Ze},it.y=function(ut){return arguments.length?(Je=ut,it):Je},it.extent=function(ut){return arguments.length?(ut==null?ue=we=Pe=De=null:(ue=+ut[0][0],we=+ut[0][1],Pe=+ut[1][0],De=+ut[1][1]),it):ue==null?null:[[ue,we],[Pe,De]]},it.size=function(ut){return arguments.length?(ut==null?ue=we=Pe=De=null:(ue=we=0,Pe=+ut[0],De=+ut[1]),it):ue==null?null:[Pe-ue,De-we]},it},l.interpolateRgb=Gs,l.interpolateObject=Jo,l.interpolateNumber=ka,l.interpolateString=Zs;var Di=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hs=new RegExp(Di.source,"g");function ya(te,ue){for(var we,Pe=l.interpolators.length;--Pe>=0&&!(we=l.interpolators[Pe](te,ue)););return we}function Aa(te,ue){var we,Pe=[],De=[],Ue=te.length,Ze=ue.length,Je=Math.min(te.length,ue.length);for(we=0;we<Je;++we)Pe.push(ya(te[we],ue[we]));for(;we<Ue;++we)De[we]=te[we];for(;we<Ze;++we)De[we]=ue[we];return function(it){for(we=0;we<Je;++we)De[we]=Pe[we](it);return De}}l.interpolate=ya,l.interpolators=[function(te,ue){var we=typeof ue;return(we==="string"?Nn.has(ue.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(ue)?Gs:Zs:ue instanceof st?Gs:Array.isArray(ue)?Aa:we==="object"&&isNaN(ue)?Jo:ka)(te,ue)}],l.interpolateArray=Aa;var xo=function(){return U},Qr=l.map({linear:xo,poly:function(te){return function(ue){return Math.pow(ue,te)}},quad:function(){return ps},cubic:function(){return ul},sin:function(){return cl},exp:function(){return fl},circle:function(){return bl},elastic:function(te,ue){var we;return arguments.length<2&&(ue=.45),arguments.length?we=ue/It*Math.asin(1/te):(te=1,we=ue/4),function(Pe){return 1+te*Math.pow(2,-10*Pe)*Math.sin((Pe-we)*It/ue)}},back:function(te){return te||(te=1.70158),function(ue){return ue*ue*((te+1)*ue-te)}},bounce:function(){return Ws}}),bo=l.map({in:U,out:Va,"in-out":Ja,"out-in":function(te){return Ja(Va(te))}});function Pa(te){return function(ue){return ue<=0?0:ue>=1?1:te(ue)}}function Va(te){return function(ue){return 1-te(1-ue)}}function Ja(te){return function(ue){return .5*(ue<.5?te(2*ue):2-te(2-2*ue))}}function ps(te){return te*te}function ul(te){return te*te*te}function ao(te){if(te<=0)return 0;if(te>=1)return 1;var ue=te*te,we=ue*te;return 4*(te<.5?we:3*(te-ue)+we-.75)}function cl(te){return 1-Math.cos(te*Rt)}function fl(te){return Math.pow(2,10*(te-1))}function bl(te){return 1-Math.sqrt(1-te*te)}function Ws(te){return te<.36363636363636365?7.5625*te*te:te<.7272727272727273?7.5625*(te-=.5454545454545454)*te+.75:te<.9090909090909091?7.5625*(te-=.8181818181818182)*te+.9375:7.5625*(te-=.9545454545454546)*te+.984375}function hl(te,ue){return ue-=te,function(we){return Math.round(te+ue*we)}}function Ys(te){var ue,we,Pe,De=[te.a,te.b],Ue=[te.c,te.d],Ze=so(De),Je=oo(De,Ue),it=so(((ue=Ue)[0]+=(Pe=-Je)*(we=De)[0],ue[1]+=Pe*we[1],ue))||0;De[0]*Ue[1]<Ue[0]*De[1]&&(De[0]*=-1,De[1]*=-1,Ze*=-1,Je*=-1),this.rotate=(Ze?Math.atan2(De[1],De[0]):Math.atan2(-Ue[0],Ue[1]))*We,this.translate=[te.e,te.f],this.scale=[Ze,it],this.skew=it?Math.atan2(Je,it)*We:0}function oo(te,ue){return te[0]*ue[0]+te[1]*ue[1]}function so(te){var ue=Math.sqrt(oo(te,te));return ue&&(te[0]/=ue,te[1]/=ue),ue}l.ease=function(te){var ue=te.indexOf("-"),we=ue>=0?te.slice(0,ue):te,Pe=ue>=0?te.slice(ue+1):"in";return we=Qr.get(we)||xo,Pa((Pe=bo.get(Pe)||U)(we.apply(null,T.call(arguments,1))))},l.interpolateHcl=function(te,ue){te=l.hcl(te),ue=l.hcl(ue);var we=te.h,Pe=te.c,De=te.l,Ue=ue.h-we,Ze=ue.c-Pe,Je=ue.l-De;return isNaN(Ze)&&(Ze=0,Pe=isNaN(Pe)?ue.c:Pe),isNaN(Ue)?(Ue=0,we=isNaN(we)?ue.h:we):Ue>180?Ue-=360:Ue<-180&&(Ue+=360),function(it){return pt(we+Ue*it,Pe+Ze*it,De+Je*it)+""}},l.interpolateHsl=function(te,ue){te=l.hsl(te),ue=l.hsl(ue);var we=te.h,Pe=te.s,De=te.l,Ue=ue.h-we,Ze=ue.s-Pe,Je=ue.l-De;return isNaN(Ze)&&(Ze=0,Pe=isNaN(Pe)?ue.s:Pe),isNaN(Ue)?(Ue=0,we=isNaN(we)?ue.h:we):Ue>180?Ue-=360:Ue<-180&&(Ue+=360),function(it){return Et(we+Ue*it,Pe+Ze*it,De+Je*it)+""}},l.interpolateLab=function(te,ue){te=l.lab(te),ue=l.lab(ue);var we=te.l,Pe=te.a,De=te.b,Ue=ue.l-we,Ze=ue.a-Pe,Je=ue.b-De;return function(it){return Nt(we+Ue*it,Pe+Ze*it,De+Je*it)+""}},l.interpolateRound=hl,l.transform=function(te){var ue=d.createElementNS(l.ns.prefix.svg,"g");return(l.transform=function(we){if(we!=null){ue.setAttribute("transform",we);var Pe=ue.transform.baseVal.consolidate()}return new Ys(Pe?Pe.matrix:Ko)})(te)},Ys.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ko={a:1,b:0,c:0,d:1,e:0,f:0};function lo(te){return te.length?te.pop()+",":""}function Xs(te,ue){var we=[],Pe=[];return te=l.transform(te),ue=l.transform(ue),function(De,Ue,Ze,Je){if(De[0]!==Ue[0]||De[1]!==Ue[1]){var it=Ze.push("translate(",null,",",null,")");Je.push({i:it-4,x:ka(De[0],Ue[0])},{i:it-2,x:ka(De[1],Ue[1])})}else(Ue[0]||Ue[1])&&Ze.push("translate("+Ue+")")}(te.translate,ue.translate,we,Pe),function(De,Ue,Ze,Je){De!==Ue?(De-Ue>180?Ue+=360:Ue-De>180&&(De+=360),Je.push({i:Ze.push(lo(Ze)+"rotate(",null,")")-2,x:ka(De,Ue)})):Ue&&Ze.push(lo(Ze)+"rotate("+Ue+")")}(te.rotate,ue.rotate,we,Pe),function(De,Ue,Ze,Je){De!==Ue?Je.push({i:Ze.push(lo(Ze)+"skewX(",null,")")-2,x:ka(De,Ue)}):Ue&&Ze.push(lo(Ze)+"skewX("+Ue+")")}(te.skew,ue.skew,we,Pe),function(De,Ue,Ze,Je){if(De[0]!==Ue[0]||De[1]!==Ue[1]){var it=Ze.push(lo(Ze)+"scale(",null,",",null,")");Je.push({i:it-4,x:ka(De[0],Ue[0])},{i:it-2,x:ka(De[1],Ue[1])})}else Ue[0]===1&&Ue[1]===1||Ze.push(lo(Ze)+"scale("+Ue+")")}(te.scale,ue.scale,we,Pe),te=ue=null,function(De){for(var Ue,Ze=-1,Je=Pe.length;++Ze<Je;)we[(Ue=Pe[Ze]).i]=Ue.x(De);return we.join("")}}function Js(te,ue){return ue=(ue-=te=+te)||1/ue,function(we){return(we-te)/ue}}function Ro(te,ue){return ue=(ue-=te=+te)||1/ue,function(we){return Math.max(0,Math.min(1,(we-te)/ue))}}function Cs(te){for(var ue=te.source,we=te.target,Pe=function(Ze,Je){if(Ze===Je)return Ze;for(var it=_o(Ze),ut=_o(Je),St=it.pop(),Dt=ut.pop(),Ft=null;St===Dt;)Ft=St,St=it.pop(),Dt=ut.pop();return Ft}(ue,we),De=[ue];ue!==Pe;)ue=ue.parent,De.push(ue);for(var Ue=De.length;we!==Pe;)De.splice(Ue,0,we),we=we.parent;return De}function _o(te){for(var ue=[],we=te.parent;we!=null;)ue.push(te),te=we,we=we.parent;return ue.push(te),ue}function $o(te){te.fixed|=2}function zo(te){te.fixed&=-7}function uo(te){te.fixed|=4,te.px=te.x,te.py=te.y}function ei(te){te.fixed&=-5}function wo(te,ue,we){var Pe=0,De=0;if(te.charge=0,!te.leaf)for(var Ue,Ze=te.nodes,Je=Ze.length,it=-1;++it<Je;)(Ue=Ze[it])!=null&&(wo(Ue,ue,we),te.charge+=Ue.charge,Pe+=Ue.charge*Ue.cx,De+=Ue.charge*Ue.cy);if(te.point){te.leaf||(te.point.x+=Math.random()-.5,te.point.y+=Math.random()-.5);var ut=ue*we[te.point.index];te.charge+=te.pointCharge=ut,Pe+=ut*te.point.x,De+=ut*te.point.y}te.cx=Pe/te.charge,te.cy=De/te.charge}l.interpolateTransform=Xs,l.layout={},l.layout.bundle=function(){return function(te){for(var ue=[],we=-1,Pe=te.length;++we<Pe;)ue.push(Cs(te[we]));return ue}},l.layout.chord=function(){var te,ue,we,Pe,De,Ue,Ze,Je={},it=0;function ut(){var Dt,Ft,Yt,ln,Xt,en={},Jt=[],bn=l.range(Pe),gn=[];for(te=[],ue=[],Dt=0,ln=-1;++ln<Pe;){for(Ft=0,Xt=-1;++Xt<Pe;)Ft+=we[ln][Xt];Jt.push(Ft),gn.push(l.range(Pe)),Dt+=Ft}for(De&&bn.sort(function(sr,dr){return De(Jt[sr],Jt[dr])}),Ue&&gn.forEach(function(sr,dr){sr.sort(function(kr,Vr){return Ue(we[dr][kr],we[dr][Vr])})}),Dt=(It-it*Pe)/Dt,Ft=0,ln=-1;++ln<Pe;){for(Yt=Ft,Xt=-1;++Xt<Pe;){var Qt=bn[ln],Pn=gn[Qt][Xt],Dn=we[Qt][Pn],Xn=Ft,Jn=Ft+=Dn*Dt;en[Qt+"-"+Pn]={index:Qt,subindex:Pn,startAngle:Xn,endAngle:Jn,value:Dn}}ue[Qt]={index:Qt,startAngle:Yt,endAngle:Ft,value:Jt[Qt]},Ft+=it}for(ln=-1;++ln<Pe;)for(Xt=ln-1;++Xt<Pe;){var gr=en[ln+"-"+Xt],vr=en[Xt+"-"+ln];(gr.value||vr.value)&&te.push(gr.value<vr.value?{source:vr,target:gr}:{source:gr,target:vr})}Ze&&St()}function St(){te.sort(function(Dt,Ft){return Ze((Dt.source.value+Dt.target.value)/2,(Ft.source.value+Ft.target.value)/2)})}return Je.matrix=function(Dt){return arguments.length?(Pe=(we=Dt)&&we.length,te=ue=null,Je):we},Je.padding=function(Dt){return arguments.length?(it=Dt,te=ue=null,Je):it},Je.sortGroups=function(Dt){return arguments.length?(De=Dt,te=ue=null,Je):De},Je.sortSubgroups=function(Dt){return arguments.length?(Ue=Dt,te=null,Je):Ue},Je.sortChords=function(Dt){return arguments.length?(Ze=Dt,te&&St(),Je):Ze},Je.chords=function(){return te||ut(),te},Je.groups=function(){return ue||ut(),ue},Je},l.layout.force=function(){var te,ue,we,Pe,De,Ue,Ze={},Je=l.dispatch("start","tick","end"),it=[1,1],ut=.9,St=_l,Dt=Ps,Ft=-30,Yt=ds,ln=.1,Xt=.64,en=[],Jt=[];function bn(Qt){return function(Pn,Dn,Xn,Jn){if(Pn.point!==Qt){var gr=Pn.cx-Qt.x,vr=Pn.cy-Qt.y,sr=Jn-Dn,dr=gr*gr+vr*vr;if(sr*sr/Xt<dr){if(dr<Yt){var kr=Pn.charge/dr;Qt.px-=gr*kr,Qt.py-=vr*kr}return!0}Pn.point&&dr&&dr<Yt&&(kr=Pn.pointCharge/dr,Qt.px-=gr*kr,Qt.py-=vr*kr)}return!Pn.charge}}function gn(Qt){Qt.px=l.event.x,Qt.py=l.event.y,Ze.resume()}return Ze.tick=function(){if((we*=.99)<.005)return te=null,Je.end({type:"end",alpha:we=0}),!0;var Qt,Pn,Dn,Xn,Jn,gr,vr,sr,dr,kr=en.length,Vr=Jt.length;for(Pn=0;Pn<Vr;++Pn)Xn=(Dn=Jt[Pn]).source,(gr=(sr=(Jn=Dn.target).x-Xn.x)*sr+(dr=Jn.y-Xn.y)*dr)&&(sr*=gr=we*De[Pn]*((gr=Math.sqrt(gr))-Pe[Pn])/gr,dr*=gr,Jn.x-=sr*(vr=Xn.weight+Jn.weight?Xn.weight/(Xn.weight+Jn.weight):.5),Jn.y-=dr*vr,Xn.x+=sr*(vr=1-vr),Xn.y+=dr*vr);if((vr=we*ln)&&(sr=it[0]/2,dr=it[1]/2,Pn=-1,vr))for(;++Pn<kr;)(Dn=en[Pn]).x+=(sr-Dn.x)*vr,Dn.y+=(dr-Dn.y)*vr;if(Ft)for(wo(Qt=l.geom.quadtree(en),we,Ue),Pn=-1;++Pn<kr;)(Dn=en[Pn]).fixed||Qt.visit(bn(Dn));for(Pn=-1;++Pn<kr;)(Dn=en[Pn]).fixed?(Dn.x=Dn.px,Dn.y=Dn.py):(Dn.x-=(Dn.px-(Dn.px=Dn.x))*ut,Dn.y-=(Dn.py-(Dn.py=Dn.y))*ut);Je.tick({type:"tick",alpha:we})},Ze.nodes=function(Qt){return arguments.length?(en=Qt,Ze):en},Ze.links=function(Qt){return arguments.length?(Jt=Qt,Ze):Jt},Ze.size=function(Qt){return arguments.length?(it=Qt,Ze):it},Ze.linkDistance=function(Qt){return arguments.length?(St=typeof Qt=="function"?Qt:+Qt,Ze):St},Ze.distance=Ze.linkDistance,Ze.linkStrength=function(Qt){return arguments.length?(Dt=typeof Qt=="function"?Qt:+Qt,Ze):Dt},Ze.friction=function(Qt){return arguments.length?(ut=+Qt,Ze):ut},Ze.charge=function(Qt){return arguments.length?(Ft=typeof Qt=="function"?Qt:+Qt,Ze):Ft},Ze.chargeDistance=function(Qt){return arguments.length?(Yt=Qt*Qt,Ze):Math.sqrt(Yt)},Ze.gravity=function(Qt){return arguments.length?(ln=+Qt,Ze):ln},Ze.theta=function(Qt){return arguments.length?(Xt=Qt*Qt,Ze):Math.sqrt(Xt)},Ze.alpha=function(Qt){return arguments.length?(Qt=+Qt,we?Qt>0?we=Qt:(te.c=null,te.t=NaN,te=null,Je.end({type:"end",alpha:we=0})):Qt>0&&(Je.start({type:"start",alpha:we=Qt}),te=Zt(Ze.tick)),Ze):we},Ze.start=function(){var Qt,Pn,Dn,Xn=en.length,Jn=Jt.length,gr=it[0],vr=it[1];for(Qt=0;Qt<Xn;++Qt)(Dn=en[Qt]).index=Qt,Dn.weight=0;for(Qt=0;Qt<Jn;++Qt)typeof(Dn=Jt[Qt]).source=="number"&&(Dn.source=en[Dn.source]),typeof Dn.target=="number"&&(Dn.target=en[Dn.target]),++Dn.source.weight,++Dn.target.weight;for(Qt=0;Qt<Xn;++Qt)Dn=en[Qt],isNaN(Dn.x)&&(Dn.x=sr("x",gr)),isNaN(Dn.y)&&(Dn.y=sr("y",vr)),isNaN(Dn.px)&&(Dn.px=Dn.x),isNaN(Dn.py)&&(Dn.py=Dn.y);if(Pe=[],typeof St=="function")for(Qt=0;Qt<Jn;++Qt)Pe[Qt]=+St.call(this,Jt[Qt],Qt);else for(Qt=0;Qt<Jn;++Qt)Pe[Qt]=St;if(De=[],typeof Dt=="function")for(Qt=0;Qt<Jn;++Qt)De[Qt]=+Dt.call(this,Jt[Qt],Qt);else for(Qt=0;Qt<Jn;++Qt)De[Qt]=Dt;if(Ue=[],typeof Ft=="function")for(Qt=0;Qt<Xn;++Qt)Ue[Qt]=+Ft.call(this,en[Qt],Qt);else for(Qt=0;Qt<Xn;++Qt)Ue[Qt]=Ft;function sr(dr,kr){if(!Pn){for(Pn=new Array(Xn),Ar=0;Ar<Xn;++Ar)Pn[Ar]=[];for(Ar=0;Ar<Jn;++Ar){var Vr=Jt[Ar];Pn[Vr.source.index].push(Vr.target),Pn[Vr.target.index].push(Vr.source)}}for(var Hr,hr=Pn[Qt],Ar=-1,Dr=hr.length;++Ar<Dr;)if(!isNaN(Hr=hr[Ar][dr]))return Hr;return Math.random()*kr}return Ze.resume()},Ze.resume=function(){return Ze.alpha(.1)},Ze.stop=function(){return Ze.alpha(0)},Ze.drag=function(){if(ue||(ue=l.behavior.drag().origin(U).on("dragstart.force",$o).on("drag.force",gn).on("dragend.force",zo)),!arguments.length)return ue;this.on("mouseover.force",uo).on("mouseout.force",ei).call(ue)},l.rebind(Ze,Je,"on")};var _l=20,Ps=1,ds=1/0;function Do(te,ue){return l.rebind(te,ue,"sort","children","value"),te.nodes=te,te.links=vs,te}function Qo(te,ue){for(var we=[te];(te=we.pop())!=null;)if(ue(te),(De=te.children)&&(Pe=De.length))for(var Pe,De;--Pe>=0;)we.push(De[Pe])}function Oa(te,ue){for(var we=[te],Pe=[];(te=we.pop())!=null;)if(Pe.push(te),(Ue=te.children)&&(De=Ue.length))for(var De,Ue,Ze=-1;++Ze<De;)we.push(Ue[Ze]);for(;(te=Pe.pop())!=null;)ue(te)}function Ks(te){return te.children}function gs(te){return te.value}function es(te,ue){return ue.value-te.value}function vs(te){return l.merge(te.map(function(ue){return(ue.children||[]).map(function(we){return{source:ue,target:we}})}))}l.layout.hierarchy=function(){var te=es,ue=Ks,we=gs;function Pe(De){var Ue,Ze=[De],Je=[];for(De.depth=0;(Ue=Ze.pop())!=null;)if(Je.push(Ue),(ut=ue.call(Pe,Ue,Ue.depth))&&(it=ut.length)){for(var it,ut,St;--it>=0;)Ze.push(St=ut[it]),St.parent=Ue,St.depth=Ue.depth+1;we&&(Ue.value=0),Ue.children=ut}else we&&(Ue.value=+we.call(Pe,Ue,Ue.depth)||0),delete Ue.children;return Oa(De,function(Dt){var Ft,Yt;te&&(Ft=Dt.children)&&Ft.sort(te),we&&(Yt=Dt.parent)&&(Yt.value+=Dt.value)}),Je}return Pe.sort=function(De){return arguments.length?(te=De,Pe):te},Pe.children=function(De){return arguments.length?(ue=De,Pe):ue},Pe.value=function(De){return arguments.length?(we=De,Pe):we},Pe.revalue=function(De){return we&&(Qo(De,function(Ue){Ue.children&&(Ue.value=0)}),Oa(De,function(Ue){var Ze;Ue.children||(Ue.value=+we.call(Pe,Ue,Ue.depth)||0),(Ze=Ue.parent)&&(Ze.value+=Ue.value)})),De},Pe},l.layout.partition=function(){var te=l.layout.hierarchy(),ue=[1,1];function we(Ue,Ze,Je,it){var ut=Ue.children;if(Ue.x=Ze,Ue.y=Ue.depth*it,Ue.dx=Je,Ue.dy=it,ut&&(St=ut.length)){var St,Dt,Ft,Yt=-1;for(Je=Ue.value?Je/Ue.value:0;++Yt<St;)we(Dt=ut[Yt],Ze,Ft=Dt.value*Je,it),Ze+=Ft}}function Pe(Ue){var Ze=Ue.children,Je=0;if(Ze&&(it=Ze.length))for(var it,ut=-1;++ut<it;)Je=Math.max(Je,Pe(Ze[ut]));return 1+Je}function De(Ue,Ze){var Je=te.call(this,Ue,Ze);return we(Je[0],0,ue[0],ue[1]/Pe(Je[0])),Je}return De.size=function(Ue){return arguments.length?(ue=Ue,De):ue},Do(De,te)},l.layout.pie=function(){var te=Number,ue=Fo,we=0,Pe=It,De=0;function Ue(Ze){var Je,it=Ze.length,ut=Ze.map(function(bn,gn){return+te.call(Ue,bn,gn)}),St=+(typeof we=="function"?we.apply(this,arguments):we),Dt=(typeof Pe=="function"?Pe.apply(this,arguments):Pe)-St,Ft=Math.min(Math.abs(Dt)/it,+(typeof De=="function"?De.apply(this,arguments):De)),Yt=Ft*(Dt<0?-1:1),ln=l.sum(ut),Xt=ln?(Dt-it*Yt)/ln:0,en=l.range(it),Jt=[];return ue!=null&&en.sort(ue===Fo?function(bn,gn){return ut[gn]-ut[bn]}:function(bn,gn){return ue(Ze[bn],Ze[gn])}),en.forEach(function(bn){Jt[bn]={data:Ze[bn],value:Je=ut[bn],startAngle:St,endAngle:St+=Je*Xt+Yt,padAngle:Ft}}),Jt}return Ue.value=function(Ze){return arguments.length?(te=Ze,Ue):te},Ue.sort=function(Ze){return arguments.length?(ue=Ze,Ue):ue},Ue.startAngle=function(Ze){return arguments.length?(we=Ze,Ue):we},Ue.endAngle=function(Ze){return arguments.length?(Pe=Ze,Ue):Pe},Ue.padAngle=function(Ze){return arguments.length?(De=Ze,Ue):De},Ue};var Fo={};function Bo(te){return te.x}function ts(te){return te.y}function ms(te,ue,we){te.y0=ue,te.y=we}l.layout.stack=function(){var te=U,ue=xs,we=bs,Pe=ms,De=Bo,Ue=ts;function Ze(Je,it){if(!(Ft=Je.length))return Je;var ut=Je.map(function(bn,gn){return te.call(Ze,bn,gn)}),St=ut.map(function(bn){return bn.map(function(gn,Qt){return[De.call(Ze,gn,Qt),Ue.call(Ze,gn,Qt)]})}),Dt=ue.call(Ze,St,it);ut=l.permute(ut,Dt),St=l.permute(St,Dt);var Ft,Yt,ln,Xt,en=we.call(Ze,St,it),Jt=ut[0].length;for(ln=0;ln<Jt;++ln)for(Pe.call(Ze,ut[0][ln],Xt=en[ln],St[0][ln][1]),Yt=1;Yt<Ft;++Yt)Pe.call(Ze,ut[Yt][ln],Xt+=St[Yt-1][ln][1],St[Yt][ln][1]);return Je}return Ze.values=function(Je){return arguments.length?(te=Je,Ze):te},Ze.order=function(Je){return arguments.length?(ue=typeof Je=="function"?Je:ys.get(Je)||xs,Ze):ue},Ze.offset=function(Je){return arguments.length?(we=typeof Je=="function"?Je:Ia.get(Je)||bs,Ze):we},Ze.x=function(Je){return arguments.length?(De=Je,Ze):De},Ze.y=function(Je){return arguments.length?(Ue=Je,Ze):Ue},Ze.out=function(Je){return arguments.length?(Pe=Je,Ze):Pe},Ze};var ys=l.map({"inside-out":function(te){var ue,we,Pe=te.length,De=te.map($s),Ue=te.map(To),Ze=l.range(Pe).sort(function(Dt,Ft){return De[Dt]-De[Ft]}),Je=0,it=0,ut=[],St=[];for(ue=0;ue<Pe;++ue)we=Ze[ue],Je<it?(Je+=Ue[we],ut.push(we)):(it+=Ue[we],St.push(we));return St.reverse().concat(ut)},reverse:function(te){return l.range(te.length).reverse()},default:xs}),Ia=l.map({silhouette:function(te){var ue,we,Pe,De=te.length,Ue=te[0].length,Ze=[],Je=0,it=[];for(we=0;we<Ue;++we){for(ue=0,Pe=0;ue<De;ue++)Pe+=te[ue][we][1];Pe>Je&&(Je=Pe),Ze.push(Pe)}for(we=0;we<Ue;++we)it[we]=(Je-Ze[we])/2;return it},wiggle:function(te){var ue,we,Pe,De,Ue,Ze,Je,it,ut,St=te.length,Dt=te[0],Ft=Dt.length,Yt=[];for(Yt[0]=it=ut=0,we=1;we<Ft;++we){for(ue=0,De=0;ue<St;++ue)De+=te[ue][we][1];for(ue=0,Ue=0,Je=Dt[we][0]-Dt[we-1][0];ue<St;++ue){for(Pe=0,Ze=(te[ue][we][1]-te[ue][we-1][1])/(2*Je);Pe<ue;++Pe)Ze+=(te[Pe][we][1]-te[Pe][we-1][1])/Je;Ue+=Ze*te[ue][we][1]}Yt[we]=it-=De?Ue/De*Je:0,it<ut&&(ut=it)}for(we=0;we<Ft;++we)Yt[we]-=ut;return Yt},expand:function(te){var ue,we,Pe,De=te.length,Ue=te[0].length,Ze=1/De,Je=[];for(we=0;we<Ue;++we){for(ue=0,Pe=0;ue<De;ue++)Pe+=te[ue][we][1];if(Pe)for(ue=0;ue<De;ue++)te[ue][we][1]/=Pe;else for(ue=0;ue<De;ue++)te[ue][we][1]=Ze}for(we=0;we<Ue;++we)Je[we]=0;return Je},zero:bs});function xs(te){return l.range(te.length)}function bs(te){for(var ue=-1,we=te[0].length,Pe=[];++ue<we;)Pe[ue]=0;return Pe}function $s(te){for(var ue,we=1,Pe=0,De=te[0][1],Ue=te.length;we<Ue;++we)(ue=te[we][1])>De&&(Pe=we,De=ue);return Pe}function To(te){return te.reduce(Os,0)}function Os(te,ue){return te+ue[1]}function _s(te,ue){return Qs(te,Math.ceil(Math.log(ue.length)/Math.LN2+1))}function Qs(te,ue){for(var we=-1,Pe=+te[0],De=(te[1]-Pe)/ue,Ue=[];++we<=ue;)Ue[we]=De*we+Pe;return Ue}function ws(te){return[l.min(te),l.max(te)]}function ns(te,ue){return te.value-ue.value}function No(te,ue){var we=te._pack_next;te._pack_next=ue,ue._pack_prev=te,ue._pack_next=we,we._pack_prev=ue}function jo(te,ue){te._pack_next=ue,ue._pack_prev=te}function ai(te,ue){var we=ue.x-te.x,Pe=ue.y-te.y,De=te.r+ue.r;return .999*De*De>we*we+Pe*Pe}function ko(te){if((ue=te.children)&&(it=ue.length)){var ue,we,Pe,De,Ue,Ze,Je,it,ut=1/0,St=-1/0,Dt=1/0,Ft=-1/0;if(ue.forEach(Ao),(we=ue[0]).x=-we.r,we.y=0,gn(we),it>1&&((Pe=ue[1]).x=Pe.r,Pe.y=0,gn(Pe),it>2))for(Kr(we,Pe,De=ue[2]),gn(De),No(we,De),we._pack_prev=De,No(De,Pe),Pe=we._pack_next,Ue=3;Ue<it;Ue++){Kr(we,Pe,De=ue[Ue]);var Yt=0,ln=1,Xt=1;for(Ze=Pe._pack_next;Ze!==Pe;Ze=Ze._pack_next,ln++)if(ai(Ze,De)){Yt=1;break}if(Yt==1)for(Je=we._pack_prev;Je!==Ze._pack_prev&&!ai(Je,De);Je=Je._pack_prev,Xt++);Yt?(ln<Xt||ln==Xt&&Pe.r<we.r?jo(we,Pe=Ze):jo(we=Je,Pe),Ue--):(No(we,De),Pe=De,gn(De))}var en=(ut+St)/2,Jt=(Dt+Ft)/2,bn=0;for(Ue=0;Ue<it;Ue++)(De=ue[Ue]).x-=en,De.y-=Jt,bn=Math.max(bn,De.r+Math.sqrt(De.x*De.x+De.y*De.y));te.r=bn,ue.forEach(Wi)}function gn(Qt){ut=Math.min(Qt.x-Qt.r,ut),St=Math.max(Qt.x+Qt.r,St),Dt=Math.min(Qt.y-Qt.r,Dt),Ft=Math.max(Qt.y+Qt.r,Ft)}}function Ao(te){te._pack_next=te._pack_prev=te}function Wi(te){delete te._pack_next,delete te._pack_prev}function Xr(te,ue,we,Pe){var De=te.children;if(te.x=ue+=Pe*te.x,te.y=we+=Pe*te.y,te.r*=Pe,De)for(var Ue=-1,Ze=De.length;++Ue<Ze;)Xr(De[Ue],ue,we,Pe)}function Kr(te,ue,we){var Pe=te.r+we.r,De=ue.x-te.x,Ue=ue.y-te.y;if(Pe&&(De||Ue)){var Ze=ue.r+we.r,Je=De*De+Ue*Ue,it=.5+((Pe*=Pe)-(Ze*=Ze))/(2*Je),ut=Math.sqrt(Math.max(0,2*Ze*(Pe+Je)-(Pe-=Je)*Pe-Ze*Ze))/(2*Je);we.x=te.x+it*De+ut*Ue,we.y=te.y+it*Ue-ut*De}else we.x=te.x+Pe,we.y=te.y}function co(te,ue){return te.parent==ue.parent?1:2}function Ka(te){var ue=te.children;return ue.length?ue[0]:te.t}function Is(te){var ue,we=te.children;return(ue=we.length)?we[ue-1]:te.t}function el(te,ue,we){var Pe=we/(ue.i-te.i);ue.c-=Pe,ue.s+=we,te.c+=Pe,ue.z+=we,ue.m+=we}function Uo(te,ue,we){return te.a.parent===ue.parent?te.a:we}function tl(te){var ue=te.children;return ue&&ue.length?tl(ue[0]):te}function Vo(te){var ue,we=te.children;return we&&(ue=we.length)?Vo(we[ue-1]):te}function fo(te){return{x:te.x,y:te.y,dx:te.dx,dy:te.dy}}function Ho(te,ue){var we=te.x+ue[3],Pe=te.y+ue[0],De=te.dx-ue[1]-ue[3],Ue=te.dy-ue[0]-ue[2];return De<0&&(we+=De/2,De=0),Ue<0&&(Pe+=Ue/2,Ue=0),{x:we,y:Pe,dx:De,dy:Ue}}function mi(te){var ue=te[0],we=te[te.length-1];return ue<we?[ue,we]:[we,ue]}function $a(te){return te.rangeExtent?te.rangeExtent():mi(te.range())}function qo(te,ue,we,Pe){var De=we(te[0],te[1]),Ue=Pe(ue[0],ue[1]);return function(Ze){return Ue(De(Ze))}}function Ri(te,ue){var we,Pe=0,De=te.length-1,Ue=te[Pe],Ze=te[De];return Ze<Ue&&(we=Pe,Pe=De,De=we,we=Ue,Ue=Ze,Ze=we),te[Pe]=ue.floor(Ue),te[De]=ue.ceil(Ze),te}function Yi(te){return te?{floor:function(ue){return Math.floor(ue/te)*te},ceil:function(ue){return Math.ceil(ue/te)*te}}:Xi}l.layout.histogram=function(){var te=!0,ue=Number,we=ws,Pe=_s;function De(Ue,Ze){for(var Je,it,ut=[],St=Ue.map(ue,this),Dt=we.call(this,St,Ze),Ft=Pe.call(this,Dt,St,Ze),Yt=(Ze=-1,St.length),ln=Ft.length-1,Xt=te?1:1/Yt;++Ze<ln;)(Je=ut[Ze]=[]).dx=Ft[Ze+1]-(Je.x=Ft[Ze]),Je.y=0;if(ln>0)for(Ze=-1;++Ze<Yt;)(it=St[Ze])>=Dt[0]&&it<=Dt[1]&&((Je=ut[l.bisect(Ft,it,1,ln)-1]).y+=Xt,Je.push(Ue[Ze]));return ut}return De.value=function(Ue){return arguments.length?(ue=Ue,De):ue},De.range=function(Ue){return arguments.length?(we=Fn(Ue),De):we},De.bins=function(Ue){return arguments.length?(Pe=typeof Ue=="number"?function(Ze){return Qs(Ze,Ue)}:Fn(Ue),De):Pe},De.frequency=function(Ue){return arguments.length?(te=!!Ue,De):te},De},l.layout.pack=function(){var te,ue=l.layout.hierarchy().sort(ns),we=0,Pe=[1,1];function De(Ue,Ze){var Je=ue.call(this,Ue,Ze),it=Je[0],ut=Pe[0],St=Pe[1],Dt=te==null?Math.sqrt:typeof te=="function"?te:function(){return te};if(it.x=it.y=0,Oa(it,function(Yt){Yt.r=+Dt(Yt.value)}),Oa(it,ko),we){var Ft=we*(te?1:Math.max(2*it.r/ut,2*it.r/St))/2;Oa(it,function(Yt){Yt.r+=Ft}),Oa(it,ko),Oa(it,function(Yt){Yt.r-=Ft})}return Xr(it,ut/2,St/2,te?1:1/Math.max(2*it.r/ut,2*it.r/St)),Je}return De.size=function(Ue){return arguments.length?(Pe=Ue,De):Pe},De.radius=function(Ue){return arguments.length?(te=Ue==null||typeof Ue=="function"?Ue:+Ue,De):te},De.padding=function(Ue){return arguments.length?(we=+Ue,De):we},Do(De,ue)},l.layout.tree=function(){var te=l.layout.hierarchy().sort(null).value(null),ue=co,we=[1,1],Pe=null;function De(it,ut){var St=te.call(this,it,ut),Dt=St[0],Ft=function(gn){for(var Qt,Pn={A:null,children:[gn]},Dn=[Pn];(Qt=Dn.pop())!=null;)for(var Xn,Jn=Qt.children,gr=0,vr=Jn.length;gr<vr;++gr)Dn.push((Jn[gr]=Xn={_:Jn[gr],parent:Qt,children:(Xn=Jn[gr].children)&&Xn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:gr}).a=Xn);return Pn.children[0]}(Dt);if(Oa(Ft,Ue),Ft.parent.m=-Ft.z,Qo(Ft,Ze),Pe)Qo(Dt,Je);else{var Yt=Dt,ln=Dt,Xt=Dt;Qo(Dt,function(gn){gn.x<Yt.x&&(Yt=gn),gn.x>ln.x&&(ln=gn),gn.depth>Xt.depth&&(Xt=gn)});var en=ue(Yt,ln)/2-Yt.x,Jt=we[0]/(ln.x+ue(ln,Yt)/2+en),bn=we[1]/(Xt.depth||1);Qo(Dt,function(gn){gn.x=(gn.x+en)*Jt,gn.y=gn.depth*bn})}return St}function Ue(it){var ut=it.children,St=it.parent.children,Dt=it.i?St[it.i-1]:null;if(ut.length){(function(Yt){for(var ln,Xt=0,en=0,Jt=Yt.children,bn=Jt.length;--bn>=0;)(ln=Jt[bn]).z+=Xt,ln.m+=Xt,Xt+=ln.s+(en+=ln.c)})(it);var Ft=(ut[0].z+ut[ut.length-1].z)/2;Dt?(it.z=Dt.z+ue(it._,Dt._),it.m=it.z-Ft):it.z=Ft}else Dt&&(it.z=Dt.z+ue(it._,Dt._));it.parent.A=function(Yt,ln,Xt){if(ln){for(var en,Jt=Yt,bn=Yt,gn=ln,Qt=Jt.parent.children[0],Pn=Jt.m,Dn=bn.m,Xn=gn.m,Jn=Qt.m;gn=Is(gn),Jt=Ka(Jt),gn&&Jt;)Qt=Ka(Qt),(bn=Is(bn)).a=Yt,(en=gn.z+Xn-Jt.z-Pn+ue(gn._,Jt._))>0&&(el(Uo(gn,Yt,Xt),Yt,en),Pn+=en,Dn+=en),Xn+=gn.m,Pn+=Jt.m,Jn+=Qt.m,Dn+=bn.m;gn&&!Is(bn)&&(bn.t=gn,bn.m+=Xn-Dn),Jt&&!Ka(Qt)&&(Qt.t=Jt,Qt.m+=Pn-Jn,Xt=Yt)}return Xt}(it,Dt,it.parent.A||St[0])}function Ze(it){it._.x=it.z+it.parent.m,it.m+=it.parent.m}function Je(it){it.x*=we[0],it.y=it.depth*we[1]}return De.separation=function(it){return arguments.length?(ue=it,De):ue},De.size=function(it){return arguments.length?(Pe=(we=it)==null?Je:null,De):Pe?null:we},De.nodeSize=function(it){return arguments.length?(Pe=(we=it)==null?null:Je,De):Pe?we:null},Do(De,te)},l.layout.cluster=function(){var te=l.layout.hierarchy().sort(null).value(null),ue=co,we=[1,1],Pe=!1;function De(Ue,Ze){var Je,it=te.call(this,Ue,Ze),ut=it[0],St=0;Oa(ut,function(Xt){var en=Xt.children;en&&en.length?(Xt.x=function(Jt){return Jt.reduce(function(bn,gn){return bn+gn.x},0)/Jt.length}(en),Xt.y=function(Jt){return 1+l.max(Jt,function(bn){return bn.y})}(en)):(Xt.x=Je?St+=ue(Xt,Je):0,Xt.y=0,Je=Xt)});var Dt=tl(ut),Ft=Vo(ut),Yt=Dt.x-ue(Dt,Ft)/2,ln=Ft.x+ue(Ft,Dt)/2;return Oa(ut,Pe?function(Xt){Xt.x=(Xt.x-ut.x)*we[0],Xt.y=(ut.y-Xt.y)*we[1]}:function(Xt){Xt.x=(Xt.x-Yt)/(ln-Yt)*we[0],Xt.y=(1-(ut.y?Xt.y/ut.y:1))*we[1]}),it}return De.separation=function(Ue){return arguments.length?(ue=Ue,De):ue},De.size=function(Ue){return arguments.length?(Pe=(we=Ue)==null,De):Pe?null:we},De.nodeSize=function(Ue){return arguments.length?(Pe=(we=Ue)!=null,De):Pe?we:null},Do(De,te)},l.layout.treemap=function(){var te,ue=l.layout.hierarchy(),we=Math.round,Pe=[1,1],De=null,Ue=fo,Ze=!1,Je="squarify",it=.5*(1+Math.sqrt(5));function ut(Xt,en){for(var Jt,bn,gn=-1,Qt=Xt.length;++gn<Qt;)bn=(Jt=Xt[gn]).value*(en<0?0:en),Jt.area=isNaN(bn)||bn<=0?0:bn}function St(Xt){var en=Xt.children;if(en&&en.length){var Jt,bn,gn,Qt=Ue(Xt),Pn=[],Dn=en.slice(),Xn=1/0,Jn=Je==="slice"?Qt.dx:Je==="dice"?Qt.dy:Je==="slice-dice"?1&Xt.depth?Qt.dy:Qt.dx:Math.min(Qt.dx,Qt.dy);for(ut(Dn,Qt.dx*Qt.dy/Xt.value),Pn.area=0;(gn=Dn.length)>0;)Pn.push(Jt=Dn[gn-1]),Pn.area+=Jt.area,Je!=="squarify"||(bn=Ft(Pn,Jn))<=Xn?(Dn.pop(),Xn=bn):(Pn.area-=Pn.pop().area,Yt(Pn,Jn,Qt,!1),Jn=Math.min(Qt.dx,Qt.dy),Pn.length=Pn.area=0,Xn=1/0);Pn.length&&(Yt(Pn,Jn,Qt,!0),Pn.length=Pn.area=0),en.forEach(St)}}function Dt(Xt){var en=Xt.children;if(en&&en.length){var Jt,bn=Ue(Xt),gn=en.slice(),Qt=[];for(ut(gn,bn.dx*bn.dy/Xt.value),Qt.area=0;Jt=gn.pop();)Qt.push(Jt),Qt.area+=Jt.area,Jt.z!=null&&(Yt(Qt,Jt.z?bn.dx:bn.dy,bn,!gn.length),Qt.length=Qt.area=0);en.forEach(Dt)}}function Ft(Xt,en){for(var Jt,bn=Xt.area,gn=0,Qt=1/0,Pn=-1,Dn=Xt.length;++Pn<Dn;)(Jt=Xt[Pn].area)&&(Jt<Qt&&(Qt=Jt),Jt>gn&&(gn=Jt));return en*=en,(bn*=bn)?Math.max(en*gn*it/bn,bn/(en*Qt*it)):1/0}function Yt(Xt,en,Jt,bn){var gn,Qt=-1,Pn=Xt.length,Dn=Jt.x,Xn=Jt.y,Jn=en?we(Xt.area/en):0;if(en==Jt.dx){for((bn||Jn>Jt.dy)&&(Jn=Jt.dy);++Qt<Pn;)(gn=Xt[Qt]).x=Dn,gn.y=Xn,gn.dy=Jn,Dn+=gn.dx=Math.min(Jt.x+Jt.dx-Dn,Jn?we(gn.area/Jn):0);gn.z=!0,gn.dx+=Jt.x+Jt.dx-Dn,Jt.y+=Jn,Jt.dy-=Jn}else{for((bn||Jn>Jt.dx)&&(Jn=Jt.dx);++Qt<Pn;)(gn=Xt[Qt]).x=Dn,gn.y=Xn,gn.dx=Jn,Xn+=gn.dy=Math.min(Jt.y+Jt.dy-Xn,Jn?we(gn.area/Jn):0);gn.z=!1,gn.dy+=Jt.y+Jt.dy-Xn,Jt.x+=Jn,Jt.dx-=Jn}}function ln(Xt){var en=te||ue(Xt),Jt=en[0];return Jt.x=Jt.y=0,Jt.value?(Jt.dx=Pe[0],Jt.dy=Pe[1]):Jt.dx=Jt.dy=0,te&&ue.revalue(Jt),ut([Jt],Jt.dx*Jt.dy/Jt.value),(te?Dt:St)(Jt),Ze&&(te=en),en}return ln.size=function(Xt){return arguments.length?(Pe=Xt,ln):Pe},ln.padding=function(Xt){if(!arguments.length)return De;function en(gn){var Qt=Xt.call(ln,gn,gn.depth);return Qt==null?fo(gn):Ho(gn,typeof Qt=="number"?[Qt,Qt,Qt,Qt]:Qt)}function Jt(gn){return Ho(gn,Xt)}var bn;return Ue=(De=Xt)==null?fo:(bn=typeof Xt)=="function"?en:(bn==="number"&&(Xt=[Xt,Xt,Xt,Xt]),Jt),ln},ln.round=function(Xt){return arguments.length?(we=Xt?Math.round:Number,ln):we!=Number},ln.sticky=function(Xt){return arguments.length?(Ze=Xt,te=null,ln):Ze},ln.ratio=function(Xt){return arguments.length?(it=Xt,ln):it},ln.mode=function(Xt){return arguments.length?(Je=Xt+"",ln):Je},Do(ln,ue)},l.random={normal:function(te,ue){var we=arguments.length;return we<2&&(ue=1),we<1&&(te=0),function(){var Pe,De,Ue;do Ue=(Pe=2*Math.random()-1)*Pe+(De=2*Math.random()-1)*De;while(!Ue||Ue>1);return te+ue*Pe*Math.sqrt(-2*Math.log(Ue)/Ue)}},logNormal:function(){var te=l.random.normal.apply(l,arguments);return function(){return Math.exp(te())}},bates:function(te){var ue=l.random.irwinHall(te);return function(){return ue()/te}},irwinHall:function(te){return function(){for(var ue=0,we=0;we<te;we++)ue+=Math.random();return ue}}},l.scale={};var Xi={floor:U,ceil:U};function Gi(te,ue,we,Pe){var De=[],Ue=[],Ze=0,Je=Math.min(te.length,ue.length)-1;for(te[Je]<te[0]&&(te=te.slice().reverse(),ue=ue.slice().reverse());++Ze<=Je;)De.push(we(te[Ze-1],te[Ze])),Ue.push(Pe(ue[Ze-1],ue[Ze]));return function(it){var ut=l.bisect(te,it,1,Je)-1;return Ue[ut](De[ut](it))}}function la(te,ue,we,Pe){var De,Ue;function Ze(){var it=Math.min(te.length,ue.length)>2?Gi:qo,ut=Pe?Ro:Js;return De=it(te,ue,ut,we),Ue=it(ue,te,ut,ya),Je}function Je(it){return De(it)}return Je.invert=function(it){return Ue(it)},Je.domain=function(it){return arguments.length?(te=it.map(Number),Ze()):te},Je.range=function(it){return arguments.length?(ue=it,Ze()):ue},Je.rangeRound=function(it){return Je.range(it).interpolate(hl)},Je.clamp=function(it){return arguments.length?(Pe=it,Ze()):Pe},Je.interpolate=function(it){return arguments.length?(we=it,Ze()):we},Je.ticks=function(it){return xa(te,it)},Je.tickFormat=function(it,ut){return d3_scale_linearTickFormat(te,it,ut)},Je.nice=function(it){return Ra(te,it),Ze()},Je.copy=function(){return la(te,ue,we,Pe)},Ze()}function Mo(te,ue){return l.rebind(te,ue,"range","rangeRound","interpolate","clamp")}function Ra(te,ue){return Ri(te,Yi(Fi(te,ue)[2])),Ri(te,Yi(Fi(te,ue)[2])),te}function Fi(te,ue){ue==null&&(ue=10);var we=mi(te),Pe=we[1]-we[0],De=Math.pow(10,Math.floor(Math.log(Pe/ue)/Math.LN10)),Ue=ue/Pe*De;return Ue<=.15?De*=10:Ue<=.35?De*=5:Ue<=.75&&(De*=2),we[0]=Math.ceil(we[0]/De)*De,we[1]=Math.floor(we[1]/De)*De+.5*De,we[2]=De,we}function xa(te,ue){return l.range.apply(l,Fi(te,ue))}function Rs(te,ue,we,Pe){function De(Je){return(we?Math.log(Je<0?0:Je):-Math.log(Je>0?0:-Je))/Math.log(ue)}function Ue(Je){return we?Math.pow(ue,Je):-Math.pow(ue,-Je)}function Ze(Je){return te(De(Je))}return Ze.invert=function(Je){return Ue(te.invert(Je))},Ze.domain=function(Je){return arguments.length?(we=Je[0]>=0,te.domain((Pe=Je.map(Number)).map(De)),Ze):Pe},Ze.base=function(Je){return arguments.length?(ue=+Je,te.domain(Pe.map(De)),Ze):ue},Ze.nice=function(){var Je=Ri(Pe.map(De),we?Math:zs);return te.domain(Je),Pe=Je.map(Ue),Ze},Ze.ticks=function(){var Je=mi(Pe),it=[],ut=Je[0],St=Je[1],Dt=Math.floor(De(ut)),Ft=Math.ceil(De(St)),Yt=ue%1?2:ue;if(isFinite(Ft-Dt)){if(we){for(;Dt<Ft;Dt++)for(var ln=1;ln<Yt;ln++)it.push(Ue(Dt)*ln);it.push(Ue(Dt))}else for(it.push(Ue(Dt));Dt++<Ft;)for(ln=Yt-1;ln>0;ln--)it.push(Ue(Dt)*ln);for(Dt=0;it[Dt]<ut;Dt++);for(Ft=it.length;it[Ft-1]>St;Ft--);it=it.slice(Dt,Ft)}return it},Ze.copy=function(){return Rs(te.copy(),ue,we,Pe)},Mo(Ze,te)}l.scale.linear=function(){return la([0,1],[0,1],ya,!1)},l.scale.log=function(){return Rs(l.scale.linear().domain([0,1]),10,!0,[1,10])};var zs={floor:function(te){return-Math.ceil(-te)},ceil:function(te){return-Math.floor(-te)}};function aa(te,ue,we){var Pe=_r(ue),De=_r(1/ue);function Ue(Ze){return te(Pe(Ze))}return Ue.invert=function(Ze){return De(te.invert(Ze))},Ue.domain=function(Ze){return arguments.length?(te.domain((we=Ze.map(Number)).map(Pe)),Ue):we},Ue.ticks=function(Ze){return xa(we,Ze)},Ue.tickFormat=function(Ze,Je){return d3_scale_linearTickFormat(we,Ze,Je)},Ue.nice=function(Ze){return Ue.domain(Ra(we,Ze))},Ue.exponent=function(Ze){return arguments.length?(Pe=_r(ue=Ze),De=_r(1/ue),te.domain(we.map(Pe)),Ue):ue},Ue.copy=function(){return aa(te.copy(),ue,we)},Mo(Ue,te)}function _r(te){return function(ue){return ue<0?-Math.pow(-ue,te):Math.pow(ue,te)}}function Go(te,ue){var we,Pe,De;function Ue(Je){return Pe[((we.get(Je)||(ue.t==="range"?we.set(Je,te.push(Je)):NaN))-1)%Pe.length]}function Ze(Je,it){return l.range(te.length).map(function(ut){return Je+it*ut})}return Ue.domain=function(Je){if(!arguments.length)return te;te=[],we=new w;for(var it,ut=-1,St=Je.length;++ut<St;)we.has(it=Je[ut])||we.set(it,te.push(it));return Ue[ue.t].apply(Ue,ue.a)},Ue.range=function(Je){return arguments.length?(Pe=Je,De=0,ue={t:"range",a:arguments},Ue):Pe},Ue.rangePoints=function(Je,it){arguments.length<2&&(it=0);var ut=Je[0],St=Je[1],Dt=te.length<2?(ut=(ut+St)/2,0):(St-ut)/(te.length-1+it);return Pe=Ze(ut+Dt*it/2,Dt),De=0,ue={t:"rangePoints",a:arguments},Ue},Ue.rangeRoundPoints=function(Je,it){arguments.length<2&&(it=0);var ut=Je[0],St=Je[1],Dt=te.length<2?(ut=St=Math.round((ut+St)/2),0):(St-ut)/(te.length-1+it)|0;return Pe=Ze(ut+Math.round(Dt*it/2+(St-ut-(te.length-1+it)*Dt)/2),Dt),De=0,ue={t:"rangeRoundPoints",a:arguments},Ue},Ue.rangeBands=function(Je,it,ut){arguments.length<2&&(it=0),arguments.length<3&&(ut=it);var St=Je[1]<Je[0],Dt=Je[St-0],Ft=Je[1-St],Yt=(Ft-Dt)/(te.length-it+2*ut);return Pe=Ze(Dt+Yt*ut,Yt),St&&Pe.reverse(),De=Yt*(1-it),ue={t:"rangeBands",a:arguments},Ue},Ue.rangeRoundBands=function(Je,it,ut){arguments.length<2&&(it=0),arguments.length<3&&(ut=it);var St=Je[1]<Je[0],Dt=Je[St-0],Ft=Je[1-St],Yt=Math.floor((Ft-Dt)/(te.length-it+2*ut));return Pe=Ze(Dt+Math.round((Ft-Dt-(te.length-it)*Yt)/2),Yt),St&&Pe.reverse(),De=Math.round(Yt*(1-it)),ue={t:"rangeRoundBands",a:arguments},Ue},Ue.rangeBand=function(){return De},Ue.rangeExtent=function(){return mi(ue.a[0])},Ue.copy=function(){return Go(te,ue)},Ue.domain(te)}l.scale.pow=function(){return aa(l.scale.linear(),1,[0,1])},l.scale.sqrt=function(){return l.scale.pow().exponent(.5)},l.scale.ordinal=function(){return Go([],{t:"range",a:[[]]})},l.scale.category10=function(){return l.scale.ordinal().range(ua)},l.scale.category20=function(){return l.scale.ordinal().range(Ds)},l.scale.category20b=function(){return l.scale.ordinal().range(rs)},l.scale.category20c=function(){return l.scale.ordinal().range(is)};var ua=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(vn),Ds=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(vn),rs=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(vn),is=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(vn);function as(te,ue){var we;function Pe(){var Ue=0,Ze=ue.length;for(we=[];++Ue<Ze;)we[Ue-1]=l.quantile(te,Ue/Ze);return De}function De(Ue){if(!isNaN(Ue=+Ue))return ue[l.bisect(we,Ue)]}return De.domain=function(Ue){return arguments.length?(te=Ue.map(h).filter(f).sort(c),Pe()):te},De.range=function(Ue){return arguments.length?(ue=Ue,Pe()):ue},De.quantiles=function(){return we},De.invertExtent=function(Ue){return(Ue=ue.indexOf(Ue))<0?[NaN,NaN]:[Ue>0?we[Ue-1]:te[0],Ue<we.length?we[Ue]:te[te.length-1]]},De.copy=function(){return as(te,ue)},Pe()}function wr(te,ue,we){var Pe,De;function Ue(Je){return we[Math.max(0,Math.min(De,Math.floor(Pe*(Je-te))))]}function Ze(){return Pe=we.length/(ue-te),De=we.length-1,Ue}return Ue.domain=function(Je){return arguments.length?(te=+Je[0],ue=+Je[Je.length-1],Ze()):[te,ue]},Ue.range=function(Je){return arguments.length?(we=Je,Ze()):we},Ue.invertExtent=function(Je){return[Je=(Je=we.indexOf(Je))<0?NaN:Je/Pe+te,Je+1/Pe]},Ue.copy=function(){return wr(te,ue,we)},Ze()}function os(te,ue){function we(Pe){if(Pe<=Pe)return ue[l.bisect(te,Pe)]}return we.domain=function(Pe){return arguments.length?(te=Pe,we):te},we.range=function(Pe){return arguments.length?(ue=Pe,we):ue},we.invertExtent=function(Pe){return Pe=ue.indexOf(Pe),[te[Pe-1],te[Pe]]},we.copy=function(){return os(te,ue)},we}function za(te){function ue(we){return+we}return ue.invert=ue,ue.domain=ue.range=function(we){return arguments.length?(te=we.map(ue),ue):te},ue.ticks=function(we){return xa(te,we)},ue.tickFormat=function(we,Pe){return d3_scale_linearTickFormat(te,we,Pe)},ue.copy=function(){return za(te)},ue}function Fs(){return 0}l.scale.quantile=function(){return as([],[])},l.scale.quantize=function(){return wr(0,1,[0,1])},l.scale.threshold=function(){return os([.5],[0,1])},l.scale.identity=function(){return za([0,1])},l.svg={},l.svg.arc=function(){var te=Ji,ue=Zo,we=Fs,Pe=Ts,De=ho,Ue=ba,Ze=So;function Je(){var ut=Math.max(0,+te.apply(this,arguments)),St=Math.max(0,+ue.apply(this,arguments)),Dt=De.apply(this,arguments)-Rt,Ft=Ue.apply(this,arguments)-Rt,Yt=Math.abs(Ft-Dt),ln=Dt>Ft?0:1;if(St<ut&&(Xt=St,St=ut,ut=Xt),Yt>=Ut)return it(St,ln)+(ut?it(ut,1-ln):"")+"Z";var Xt,en,Jt,bn,gn,Qt,Pn,Dn,Xn,Jn,gr,vr,sr=0,dr=0,kr=[];if((bn=(+Ze.apply(this,arguments)||0)/2)&&(Jt=Pe===Ts?Math.sqrt(ut*ut+St*St):+Pe.apply(this,arguments),ln||(dr*=-1),St&&(dr=Be(Jt/St*Math.sin(bn))),ut&&(sr=Be(Jt/ut*Math.sin(bn)))),St){gn=St*Math.cos(Dt+dr),Qt=St*Math.sin(Dt+dr),Pn=St*Math.cos(Ft-dr),Dn=St*Math.sin(Ft-dr);var Vr=Math.abs(Ft-Dt-2*dr)<=Ct?0:1;if(dr&&Ha(gn,Qt,Pn,Dn)===ln^Vr){var Hr=(Dt+Ft)/2;gn=St*Math.cos(Hr),Qt=St*Math.sin(Hr),Pn=Dn=null}}else gn=Qt=0;if(ut){Xn=ut*Math.cos(Ft-sr),Jn=ut*Math.sin(Ft-sr),gr=ut*Math.cos(Dt+sr),vr=ut*Math.sin(Dt+sr);var hr=Math.abs(Dt-Ft+2*sr)<=Ct?0:1;if(sr&&Ha(Xn,Jn,gr,vr)===1-ln^hr){var Ar=(Dt+Ft)/2;Xn=ut*Math.cos(Ar),Jn=ut*Math.sin(Ar),gr=vr=null}}else Xn=Jn=0;if(Yt>Lt&&(Xt=Math.min(Math.abs(St-ut)/2,+we.apply(this,arguments)))>.001){en=ut<St^ln?0:1;var Dr=Xt,zr=Xt;if(Yt<Ct){var Wr=gr==null?[Xn,Jn]:Pn==null?[gn,Qt]:kn([gn,Qt],[gr,vr],[Pn,Dn],[Xn,Jn]),Zr=gn-Wr[0],$r=Qt-Wr[1],ui=Pn-Wr[0],yi=Dn-Wr[1],hi=1/Math.sin(Math.acos((Zr*ui+$r*yi)/(Math.sqrt(Zr*Zr+$r*$r)*Math.sqrt(ui*ui+yi*yi)))/2),si=Math.sqrt(Wr[0]*Wr[0]+Wr[1]*Wr[1]);zr=Math.min(Xt,(ut-si)/(hi-1)),Dr=Math.min(Xt,(St-si)/(hi+1))}if(Pn!=null){var ci=Da(gr==null?[Xn,Jn]:[gr,vr],[gn,Qt],St,Dr,ln),pi=Da([Pn,Dn],[Xn,Jn],St,Dr,ln);Xt===Dr?kr.push("M",ci[0],"A",Dr,",",Dr," 0 0,",en," ",ci[1],"A",St,",",St," 0 ",1-ln^Ha(ci[1][0],ci[1][1],pi[1][0],pi[1][1]),",",ln," ",pi[1],"A",Dr,",",Dr," 0 0,",en," ",pi[0]):kr.push("M",ci[0],"A",Dr,",",Dr," 0 1,",en," ",pi[0])}else kr.push("M",gn,",",Qt);if(gr!=null){var Ei=Da([gn,Qt],[gr,vr],ut,-zr,ln),Lo=Da([Xn,Jn],Pn==null?[gn,Qt]:[Pn,Dn],ut,-zr,ln);Xt===zr?kr.push("L",Lo[0],"A",zr,",",zr," 0 0,",en," ",Lo[1],"A",ut,",",ut," 0 ",ln^Ha(Lo[1][0],Lo[1][1],Ei[1][0],Ei[1][1]),",",1-ln," ",Ei[1],"A",zr,",",zr," 0 0,",en," ",Ei[0]):kr.push("L",Lo[0],"A",zr,",",zr," 0 0,",en," ",Ei[0])}else kr.push("L",Xn,",",Jn)}else kr.push("M",gn,",",Qt),Pn!=null&&kr.push("A",St,",",St," 0 ",Vr,",",ln," ",Pn,",",Dn),kr.push("L",Xn,",",Jn),gr!=null&&kr.push("A",ut,",",ut," 0 ",hr,",",1-ln," ",gr,",",vr);return kr.push("Z"),kr.join("")}function it(ut,St){return"M0,"+ut+"A"+ut+","+ut+" 0 1,"+St+" 0,"+-ut+"A"+ut+","+ut+" 0 1,"+St+" 0,"+ut}return Je.innerRadius=function(ut){return arguments.length?(te=Fn(ut),Je):te},Je.outerRadius=function(ut){return arguments.length?(ue=Fn(ut),Je):ue},Je.cornerRadius=function(ut){return arguments.length?(we=Fn(ut),Je):we},Je.padRadius=function(ut){return arguments.length?(Pe=ut==Ts?Ts:Fn(ut),Je):Pe},Je.startAngle=function(ut){return arguments.length?(De=Fn(ut),Je):De},Je.endAngle=function(ut){return arguments.length?(Ue=Fn(ut),Je):Ue},Je.padAngle=function(ut){return arguments.length?(Ze=Fn(ut),Je):Ze},Je.centroid=function(){var ut=(+te.apply(this,arguments)+ +ue.apply(this,arguments))/2,St=(+De.apply(this,arguments)+ +Ue.apply(this,arguments))/2-Rt;return[Math.cos(St)*ut,Math.sin(St)*ut]},Je};var Ts="auto";function Ji(te){return te.innerRadius}function Zo(te){return te.outerRadius}function ho(te){return te.startAngle}function ba(te){return te.endAngle}function So(te){return te&&te.padAngle}function Ha(te,ue,we,Pe){return(te-we)*ue-(ue-Pe)*te>0?0:1}function Da(te,ue,we,Pe,De){var Ue=te[0]-ue[0],Ze=te[1]-ue[1],Je=(De?Pe:-Pe)/Math.sqrt(Ue*Ue+Ze*Ze),it=Je*Ze,ut=-Je*Ue,St=te[0]+it,Dt=te[1]+ut,Ft=ue[0]+it,Yt=ue[1]+ut,ln=(St+Ft)/2,Xt=(Dt+Yt)/2,en=Ft-St,Jt=Yt-Dt,bn=en*en+Jt*Jt,gn=we-Pe,Qt=St*Yt-Ft*Dt,Pn=(Jt<0?-1:1)*Math.sqrt(Math.max(0,gn*gn*bn-Qt*Qt)),Dn=(Qt*Jt-en*Pn)/bn,Xn=(-Qt*en-Jt*Pn)/bn,Jn=(Qt*Jt+en*Pn)/bn,gr=(-Qt*en+Jt*Pn)/bn,vr=Dn-ln,sr=Xn-Xt,dr=Jn-ln,kr=gr-Xt;return vr*vr+sr*sr>dr*dr+kr*kr&&(Dn=Jn,Xn=gr),[[Dn-it,Xn-ut],[Dn*we/gn,Xn*we/gn]]}function Wo(){return!0}function Ki(te){var ue=Cn,we=Un,Pe=Wo,De=ri,Ue=De.key,Ze=.7;function Je(it){var ut,St=[],Dt=[],Ft=-1,Yt=it.length,ln=Fn(ue),Xt=Fn(we);function en(){St.push("M",De(te(Dt),Ze))}for(;++Ft<Yt;)Pe.call(this,ut=it[Ft],Ft)?Dt.push([+ln.call(this,ut,Ft),+Xt.call(this,ut,Ft)]):Dt.length&&(en(),Dt=[]);return Dt.length&&en(),St.length?St.join(""):null}return Je.x=function(it){return arguments.length?(ue=it,Je):ue},Je.y=function(it){return arguments.length?(we=it,Je):we},Je.defined=function(it){return arguments.length?(Pe=it,Je):Pe},Je.interpolate=function(it){return arguments.length?(Ue=typeof it=="function"?De=it:(De=Fa.get(it)||ri).key,Je):Ue},Je.tension=function(it){return arguments.length?(Ze=it,Je):Ze},Je}l.svg.line=function(){return Ki(U)};var Fa=l.map({linear:ri,"linear-closed":ks,step:function(te){for(var ue=0,we=te.length,Pe=te[0],De=[Pe[0],",",Pe[1]];++ue<we;)De.push("H",(Pe[0]+(Pe=te[ue])[0])/2,"V",Pe[1]);return we>1&&De.push("H",Pe[0]),De.join("")},"step-before":Ma,"step-after":Ba,basis:ni,"basis-open":function(te){if(te.length<4)return ri(te);for(var ue,we=[],Pe=-1,De=te.length,Ue=[0],Ze=[0];++Pe<3;)ue=te[Pe],Ue.push(ue[0]),Ze.push(ue[1]);for(we.push(Hi(eo,Ue)+","+Hi(eo,Ze)),--Pe;++Pe<De;)ue=te[Pe],Ue.shift(),Ue.push(ue[0]),Ze.shift(),Ze.push(ue[1]),Eo(we,Ue,Ze);return we.join("")},"basis-closed":function(te){for(var ue,we,Pe=-1,De=te.length,Ue=De+4,Ze=[],Je=[];++Pe<4;)we=te[Pe%De],Ze.push(we[0]),Je.push(we[1]);for(ue=[Hi(eo,Ze),",",Hi(eo,Je)],--Pe;++Pe<Ue;)we=te[Pe%De],Ze.shift(),Ze.push(we[0]),Je.shift(),Je.push(we[1]),Eo(ue,Ze,Je);return ue.join("")},bundle:function(te,ue){var we=te.length-1;if(we)for(var Pe,De,Ue=te[0][0],Ze=te[0][1],Je=te[we][0]-Ue,it=te[we][1]-Ze,ut=-1;++ut<=we;)De=ut/we,(Pe=te[ut])[0]=ue*Pe[0]+(1-ue)*(Ue+De*Je),Pe[1]=ue*Pe[1]+(1-ue)*(Ze+De*it);return ni(te)},cardinal:function(te,ue){return te.length<3?ri(te):te[0]+Qa(te,ca(te,ue))},"cardinal-open":function(te,ue){return te.length<4?ri(te):te[1]+Qa(te.slice(1,-1),ca(te,ue))},"cardinal-closed":function(te,ue){return te.length<3?ks(te):te[0]+Qa((te.push(te[0]),te),ca([te[te.length-2]].concat(te,[te[1]]),ue))},monotone:function(te){return te.length<3?ri(te):te[0]+Qa(te,function(ue){for(var we,Pe,De,Ue,Ze=[],Je=function(St){for(var Dt=0,Ft=St.length-1,Yt=[],ln=St[0],Xt=St[1],en=Yt[0]=po(ln,Xt);++Dt<Ft;)Yt[Dt]=(en+(en=po(ln=Xt,Xt=St[Dt+1])))/2;return Yt[Dt]=en,Yt}(ue),it=-1,ut=ue.length-1;++it<ut;)we=po(ue[it],ue[it+1]),y(we)<Lt?Je[it]=Je[it+1]=0:(Ue=(Pe=Je[it]/we)*Pe+(De=Je[it+1]/we)*De)>9&&(Ue=3*we/Math.sqrt(Ue),Je[it]=Ue*Pe,Je[it+1]=Ue*De);for(it=-1;++it<=ut;)Ue=(ue[Math.min(ut,it+1)][0]-ue[Math.max(0,it-1)][0])/(6*(1+Je[it]*Je[it])),Ze.push([Ue||0,Je[it]*Ue||0]);return Ze}(te))}});function ri(te){return te.length>1?te.join("L"):te+"Z"}function ks(te){return te.join("L")+"Z"}function Ma(te){for(var ue=0,we=te.length,Pe=te[0],De=[Pe[0],",",Pe[1]];++ue<we;)De.push("V",(Pe=te[ue])[1],"H",Pe[0]);return De.join("")}function Ba(te){for(var ue=0,we=te.length,Pe=te[0],De=[Pe[0],",",Pe[1]];++ue<we;)De.push("H",(Pe=te[ue])[0],"V",Pe[1]);return De.join("")}function Qa(te,ue){if(ue.length<1||te.length!=ue.length&&te.length!=ue.length+2)return ri(te);var we=te.length!=ue.length,Pe="",De=te[0],Ue=te[1],Ze=ue[0],Je=Ze,it=1;if(we&&(Pe+="Q"+(Ue[0]-2*Ze[0]/3)+","+(Ue[1]-2*Ze[1]/3)+","+Ue[0]+","+Ue[1],De=te[1],it=2),ue.length>1){Je=ue[1],Ue=te[it],it++,Pe+="C"+(De[0]+Ze[0])+","+(De[1]+Ze[1])+","+(Ue[0]-Je[0])+","+(Ue[1]-Je[1])+","+Ue[0]+","+Ue[1];for(var ut=2;ut<ue.length;ut++,it++)Ue=te[it],Je=ue[ut],Pe+="S"+(Ue[0]-Je[0])+","+(Ue[1]-Je[1])+","+Ue[0]+","+Ue[1]}if(we){var St=te[it];Pe+="Q"+(Ue[0]+2*Je[0]/3)+","+(Ue[1]+2*Je[1]/3)+","+St[0]+","+St[1]}return Pe}function ca(te,ue){for(var we,Pe=[],De=(1-ue)/2,Ue=te[0],Ze=te[1],Je=1,it=te.length;++Je<it;)we=Ue,Ue=Ze,Ze=te[Je],Pe.push([De*(Ze[0]-we[0]),De*(Ze[1]-we[1])]);return Pe}function ni(te){if(te.length<3)return ri(te);var ue=1,we=te.length,Pe=te[0],De=Pe[0],Ue=Pe[1],Ze=[De,De,De,(Pe=te[1])[0]],Je=[Ue,Ue,Ue,Pe[1]],it=[De,",",Ue,"L",Hi(eo,Ze),",",Hi(eo,Je)];for(te.push(te[we-1]);++ue<=we;)Pe=te[ue],Ze.shift(),Ze.push(Pe[0]),Je.shift(),Je.push(Pe[1]),Eo(it,Ze,Je);return te.pop(),it.push("L",Pe),it.join("")}function Hi(te,ue){return te[0]*ue[0]+te[1]*ue[1]+te[2]*ue[2]+te[3]*ue[3]}Fa.forEach(function(te,ue){ue.key=te,ue.closed=/-closed$/.test(te)});var qa=[0,2/3,1/3,0],fa=[0,1/3,2/3,0],eo=[0,1/6,2/3,1/6];function Eo(te,ue,we){te.push("C",Hi(qa,ue),",",Hi(qa,we),",",Hi(fa,ue),",",Hi(fa,we),",",Hi(eo,ue),",",Hi(eo,we))}function po(te,ue){return(ue[1]-te[1])/(ue[0]-te[0])}function $i(te){for(var ue,we,Pe,De=-1,Ue=te.length;++De<Ue;)we=(ue=te[De])[0],Pe=ue[1]-Rt,ue[0]=we*Math.cos(Pe),ue[1]=we*Math.sin(Pe);return te}function Na(te){var ue=Cn,we=Cn,Pe=0,De=Un,Ue=Wo,Ze=ri,Je=Ze.key,it=Ze,ut="L",St=.7;function Dt(Ft){var Yt,ln,Xt,en=[],Jt=[],bn=[],gn=-1,Qt=Ft.length,Pn=Fn(ue),Dn=Fn(Pe),Xn=ue===we?function(){return ln}:Fn(we),Jn=Pe===De?function(){return Xt}:Fn(De);function gr(){en.push("M",Ze(te(bn),St),ut,it(te(Jt.reverse()),St),"Z")}for(;++gn<Qt;)Ue.call(this,Yt=Ft[gn],gn)?(Jt.push([ln=+Pn.call(this,Yt,gn),Xt=+Dn.call(this,Yt,gn)]),bn.push([+Xn.call(this,Yt,gn),+Jn.call(this,Yt,gn)])):Jt.length&&(gr(),Jt=[],bn=[]);return Jt.length&&gr(),en.length?en.join(""):null}return Dt.x=function(Ft){return arguments.length?(ue=we=Ft,Dt):we},Dt.x0=function(Ft){return arguments.length?(ue=Ft,Dt):ue},Dt.x1=function(Ft){return arguments.length?(we=Ft,Dt):we},Dt.y=function(Ft){return arguments.length?(Pe=De=Ft,Dt):De},Dt.y0=function(Ft){return arguments.length?(Pe=Ft,Dt):Pe},Dt.y1=function(Ft){return arguments.length?(De=Ft,Dt):De},Dt.defined=function(Ft){return arguments.length?(Ue=Ft,Dt):Ue},Dt.interpolate=function(Ft){return arguments.length?(Je=typeof Ft=="function"?Ze=Ft:(Ze=Fa.get(Ft)||ri).key,it=Ze.reverse||Ze,ut=Ze.closed?"M":"L",Dt):Je},Dt.tension=function(Ft){return arguments.length?(St=Ft,Dt):St},Dt}function Mr(te){return te.source}function Or(te){return te.target}function ss(te){return te.radius}function go(te){return[te.x,te.y]}function Ga(te){return function(){var ue=te.apply(this,arguments),we=ue[0],Pe=ue[1]-Rt;return[we*Math.cos(Pe),we*Math.sin(Pe)]}}function Qi(){return 64}function Bs(){return"circle"}function ha(te){var ue=Math.sqrt(te/Ct);return"M0,"+ue+"A"+ue+","+ue+" 0 1,1 0,"+-ue+"A"+ue+","+ue+" 0 1,1 0,"+ue+"Z"}l.svg.line.radial=function(){var te=Ki($i);return te.radius=te.x,delete te.x,te.angle=te.y,delete te.y,te},Ma.reverse=Ba,Ba.reverse=Ma,l.svg.area=function(){return Na(U)},l.svg.area.radial=function(){var te=Na($i);return te.radius=te.x,delete te.x,te.innerRadius=te.x0,delete te.x0,te.outerRadius=te.x1,delete te.x1,te.angle=te.y,delete te.y,te.startAngle=te.y0,delete te.y0,te.endAngle=te.y1,delete te.y1,te},l.svg.chord=function(){var te=Mr,ue=Or,we=ss,Pe=ho,De=ba;function Ue(ut,St){var Dt,Ft,Yt=Ze(this,te,ut,St),ln=Ze(this,ue,ut,St);return"M"+Yt.p0+Je(Yt.r,Yt.p1,Yt.a1-Yt.a0)+(Ft=ln,((Dt=Yt).a0==Ft.a0&&Dt.a1==Ft.a1?it(Yt.r,Yt.p1,Yt.r,Yt.p0):it(Yt.r,Yt.p1,ln.r,ln.p0)+Je(ln.r,ln.p1,ln.a1-ln.a0)+it(ln.r,ln.p1,Yt.r,Yt.p0))+"Z")}function Ze(ut,St,Dt,Ft){var Yt=St.call(ut,Dt,Ft),ln=we.call(ut,Yt,Ft),Xt=Pe.call(ut,Yt,Ft)-Rt,en=De.call(ut,Yt,Ft)-Rt;return{r:ln,a0:Xt,a1:en,p0:[ln*Math.cos(Xt),ln*Math.sin(Xt)],p1:[ln*Math.cos(en),ln*Math.sin(en)]}}function Je(ut,St,Dt){return"A"+ut+","+ut+" 0 "+ +(Dt>Ct)+",1 "+St}function it(ut,St,Dt,Ft){return"Q 0,0 "+Ft}return Ue.radius=function(ut){return arguments.length?(we=Fn(ut),Ue):we},Ue.source=function(ut){return arguments.length?(te=Fn(ut),Ue):te},Ue.target=function(ut){return arguments.length?(ue=Fn(ut),Ue):ue},Ue.startAngle=function(ut){return arguments.length?(Pe=Fn(ut),Ue):Pe},Ue.endAngle=function(ut){return arguments.length?(De=Fn(ut),Ue):De},Ue},l.svg.diagonal=function(){var te=Mr,ue=Or,we=go;function Pe(De,Ue){var Ze=te.call(this,De,Ue),Je=ue.call(this,De,Ue),it=(Ze.y+Je.y)/2,ut=[Ze,{x:Ze.x,y:it},{x:Je.x,y:it},Je];return"M"+(ut=ut.map(we))[0]+"C"+ut[1]+" "+ut[2]+" "+ut[3]}return Pe.source=function(De){return arguments.length?(te=Fn(De),Pe):te},Pe.target=function(De){return arguments.length?(ue=Fn(De),Pe):ue},Pe.projection=function(De){return arguments.length?(we=De,Pe):we},Pe},l.svg.diagonal.radial=function(){var te=l.svg.diagonal(),ue=go,we=te.projection;return te.projection=function(Pe){return arguments.length?we(Ga(ue=Pe)):ue},te},l.svg.symbol=function(){var te=Bs,ue=Qi;function we(Pe,De){return(ls.get(te.call(this,Pe,De))||ha)(ue.call(this,Pe,De))}return we.type=function(Pe){return arguments.length?(te=Fn(Pe),we):te},we.size=function(Pe){return arguments.length?(ue=Fn(Pe),we):ue},we};var ls=l.map({circle:ha,cross:function(te){var ue=Math.sqrt(te/5)/2;return"M"+-3*ue+","+-ue+"H"+-ue+"V"+-3*ue+"H"+ue+"V"+-ue+"H"+3*ue+"V"+ue+"H"+ue+"V"+3*ue+"H"+-ue+"V"+ue+"H"+-3*ue+"Z"},diamond:function(te){var ue=Math.sqrt(te/(2*oi)),we=ue*oi;return"M0,"+-ue+"L"+we+",0 0,"+ue+" "+-we+",0Z"},square:function(te){var ue=Math.sqrt(te)/2;return"M"+-ue+","+-ue+"L"+ue+","+-ue+" "+ue+","+ue+" "+-ue+","+ue+"Z"},"triangle-down":function(te){var ue=Math.sqrt(te/vo),we=ue*vo/2;return"M0,"+we+"L"+ue+","+-we+" "+-ue+","+-we+"Z"},"triangle-up":function(te){var ue=Math.sqrt(te/vo),we=ue*vo/2;return"M0,"+-we+"L"+ue+","+we+" "+-ue+","+we+"Z"}});l.svg.symbolTypes=ls.keys();var vo=Math.sqrt(3),oi=Math.tan(30*Ge);se.transition=function(te){for(var ue,we,Pe=$e||++bt,De=Y(te),Ue=[],Ze=at||{time:Date.now(),ease:ao,delay:0,duration:250},Je=-1,it=this.length;++Je<it;){Ue.push(ue=[]);for(var ut=this[Je],St=-1,Dt=ut.length;++St<Dt;)(we=ut[St])&&q(we,St,De,Pe,Ze),ue.push(we)}return Xe(Ue,De,Pe)},se.interrupt=function(te){return this.each(te==null?fi:Ns(Y(te)))};var fi=Ns(Y());function Ns(te){return function(){var ue,we,Pe;(ue=this[te])&&(Pe=ue[we=ue.active])&&(Pe.timer.c=null,Pe.timer.t=NaN,--ue.count?delete ue[we]:delete this[te],ue.active+=.5,Pe.event&&Pe.event.interrupt.call(this,this.__data__,Pe.index))}}function Xe(te,ue,we){return J(te,ft),te.namespace=ue,te.id=we,te}var $e,at,ft=[],bt=0;function yt(te,ue,we,Pe){var De=te.id,Ue=te.namespace;return Re(te,typeof we=="function"?function(Ze,Je,it){Ze[Ue][De].tween.set(ue,Pe(we.call(Ze,Ze.__data__,Je,it)))}:(we=Pe(we),function(Ze){Ze[Ue][De].tween.set(ue,we)}))}function D(te){return te==null&&(te=""),function(){this.textContent=te}}function Y(te){return te==null?"__transition__":"__transition_"+te+"__"}function q(te,ue,we,Pe,De){var Ue,Ze,Je,it,ut,St=te[we]||(te[we]={active:0,count:0}),Dt=St[Pe];function Ft(ln){var Xt=St.active,en=St[Xt];for(var Jt in en&&(en.timer.c=null,en.timer.t=NaN,--St.count,delete St[Xt],en.event&&en.event.interrupt.call(te,te.__data__,en.index)),St)if(+Jt<Pe){var bn=St[Jt];bn.timer.c=null,bn.timer.t=NaN,--St.count,delete St[Jt]}Ze.c=Yt,Zt(function(){return Ze.c&&Yt(ln||1)&&(Ze.c=null,Ze.t=NaN),1},0,Ue),St.active=Pe,Dt.event&&Dt.event.start.call(te,te.__data__,ue),ut=[],Dt.tween.forEach(function(gn,Qt){(Qt=Qt.call(te,te.__data__,ue))&&ut.push(Qt)}),it=Dt.ease,Je=Dt.duration}function Yt(ln){for(var Xt=ln/Je,en=it(Xt),Jt=ut.length;Jt>0;)ut[--Jt].call(te,en);if(Xt>=1)return Dt.event&&Dt.event.end.call(te,te.__data__,ue),--St.count?delete St[Pe]:delete te[we],1}Dt||(Ue=De.time,Ze=Zt(function(ln){var Xt=Dt.delay;if(Ze.t=Xt+Ue,Xt<=ln)return Ft(ln-Xt);Ze.c=Ft},0,Ue),Dt=St[Pe]={tween:new w,time:Ue,timer:Ze,delay:De.delay,duration:De.duration,ease:De.ease,index:ue},De=null,++St.count)}ft.call=se.call,ft.empty=se.empty,ft.node=se.node,ft.size=se.size,l.transition=function(te,ue){return te&&te.transition?$e?te.transition(ue):te:l.selection().transition(te)},l.transition.prototype=ft,ft.select=function(te){var ue,we,Pe,De=this.id,Ue=this.namespace,Ze=[];te=fe(te);for(var Je=-1,it=this.length;++Je<it;){Ze.push(ue=[]);for(var ut=this[Je],St=-1,Dt=ut.length;++St<Dt;)(Pe=ut[St])&&(we=te.call(Pe,Pe.__data__,St,Je))?("__data__"in Pe&&(we.__data__=Pe.__data__),q(we,St,Ue,De,Pe[Ue][De]),ue.push(we)):ue.push(null)}return Xe(Ze,Ue,De)},ft.selectAll=function(te){var ue,we,Pe,De,Ue,Ze=this.id,Je=this.namespace,it=[];te=ye(te);for(var ut=-1,St=this.length;++ut<St;)for(var Dt=this[ut],Ft=-1,Yt=Dt.length;++Ft<Yt;)if(Pe=Dt[Ft]){Ue=Pe[Je][Ze],we=te.call(Pe,Pe.__data__,Ft,ut),it.push(ue=[]);for(var ln=-1,Xt=we.length;++ln<Xt;)(De=we[ln])&&q(De,ln,Je,Ze,Ue),ue.push(De)}return Xe(it,Je,Ze)},ft.filter=function(te){var ue,we,Pe=[];typeof te!="function"&&(te=Ie(te));for(var De=0,Ue=this.length;De<Ue;De++){Pe.push(ue=[]);for(var Ze,Je=0,it=(Ze=this[De]).length;Je<it;Je++)(we=Ze[Je])&&te.call(we,we.__data__,Je,De)&&ue.push(we)}return Xe(Pe,this.namespace,this.id)},ft.tween=function(te,ue){var we=this.id,Pe=this.namespace;return arguments.length<2?this.node()[Pe][we].tween.get(te):Re(this,ue==null?function(De){De[Pe][we].tween.remove(te)}:function(De){De[Pe][we].tween.set(te,ue)})},ft.attr=function(te,ue){if(arguments.length<2){for(ue in te)this.attr(ue,te[ue]);return this}var we=te=="transform"?Xs:ya,Pe=l.ns.qualify(te);function De(){this.removeAttribute(Pe)}function Ue(){this.removeAttributeNS(Pe.space,Pe.local)}function Ze(it){return it==null?De:(it+="",function(){var ut,St=this.getAttribute(Pe);return St!==it&&(ut=we(St,it),function(Dt){this.setAttribute(Pe,ut(Dt))})})}function Je(it){return it==null?Ue:(it+="",function(){var ut,St=this.getAttributeNS(Pe.space,Pe.local);return St!==it&&(ut=we(St,it),function(Dt){this.setAttributeNS(Pe.space,Pe.local,ut(Dt))})})}return yt(this,"attr."+te,ue,Pe.local?Je:Ze)},ft.attrTween=function(te,ue){var we=l.ns.qualify(te);return this.tween("attr."+te,we.local?function(Pe,De){var Ue=ue.call(this,Pe,De,this.getAttributeNS(we.space,we.local));return Ue&&function(Ze){this.setAttributeNS(we.space,we.local,Ue(Ze))}}:function(Pe,De){var Ue=ue.call(this,Pe,De,this.getAttribute(we));return Ue&&function(Ze){this.setAttribute(we,Ue(Ze))}})},ft.style=function(te,ue,we){var Pe=arguments.length;if(Pe<3){if(typeof te!="string"){for(we in Pe<2&&(ue=""),te)this.style(we,te[we],ue);return this}we=""}function De(){this.style.removeProperty(te)}function Ue(Ze){return Ze==null?De:(Ze+="",function(){var Je,it=t(this).getComputedStyle(this,null).getPropertyValue(te);return it!==Ze&&(Je=ya(it,Ze),function(ut){this.style.setProperty(te,Je(ut),we)})})}return yt(this,"style."+te,ue,Ue)},ft.styleTween=function(te,ue,we){function Pe(De,Ue){var Ze=ue.call(this,De,Ue,t(this).getComputedStyle(this,null).getPropertyValue(te));return Ze&&function(Je){this.style.setProperty(te,Ze(Je),we)}}return arguments.length<3&&(we=""),this.tween("style."+te,Pe)},ft.text=function(te){return yt(this,"text",te,D)},ft.remove=function(){var te=this.namespace;return this.each("end.transition",function(){var ue;this[te].count<2&&(ue=this.parentNode)&&ue.removeChild(this)})},ft.ease=function(te){var ue=this.id,we=this.namespace;return arguments.length<1?this.node()[we][ue].ease:(typeof te!="function"&&(te=l.ease.apply(l,arguments)),Re(this,function(Pe){Pe[we][ue].ease=te}))},ft.delay=function(te){var ue=this.id,we=this.namespace;return arguments.length<1?this.node()[we][ue].delay:Re(this,typeof te=="function"?function(Pe,De,Ue){Pe[we][ue].delay=+te.call(Pe,Pe.__data__,De,Ue)}:(te=+te,function(Pe){Pe[we][ue].delay=te}))},ft.duration=function(te){var ue=this.id,we=this.namespace;return arguments.length<1?this.node()[we][ue].duration:Re(this,typeof te=="function"?function(Pe,De,Ue){Pe[we][ue].duration=Math.max(1,te.call(Pe,Pe.__data__,De,Ue))}:(te=Math.max(1,te),function(Pe){Pe[we][ue].duration=te}))},ft.each=function(te,ue){var we=this.id,Pe=this.namespace;if(arguments.length<2){var De=at,Ue=$e;try{$e=we,Re(this,function(Ze,Je,it){at=Ze[Pe][we],te.call(Ze,Ze.__data__,Je,it)})}finally{at=De,$e=Ue}}else Re(this,function(Ze){var Je=Ze[Pe][we];(Je.event||(Je.event=l.dispatch("start","end","interrupt"))).on(te,ue)});return this},ft.transition=function(){for(var te,ue,we,Pe=this.id,De=++bt,Ue=this.namespace,Ze=[],Je=0,it=this.length;Je<it;Je++){Ze.push(te=[]);for(var ut,St=0,Dt=(ut=this[Je]).length;St<Dt;St++)(ue=ut[St])&&q(ue,St,Ue,De,{time:(we=ue[Ue][Pe]).time,ease:we.ease,delay:we.delay+we.duration,duration:we.duration}),te.push(ue)}return Xe(Ze,Ue,De)},l.svg.axis=function(){var te,ue=l.scale.linear(),we=ne,Pe=6,De=6,Ue=3,Ze=[10],Je=null;function it(ut){ut.each(function(){var St,Dt=l.select(this),Ft=this.__chart__||ue,Yt=this.__chart__=ue.copy(),ln=Je??(Yt.ticks?Yt.ticks.apply(Yt,Ze):Yt.domain()),Xt=te??(Yt.tickFormat?Yt.tickFormat.apply(Yt,Ze):U),en=Dt.selectAll(".tick").data(ln,Yt),Jt=en.enter().insert("g",".domain").attr("class","tick").style("opacity",Lt),bn=l.transition(en.exit()).style("opacity",Lt).remove(),gn=l.transition(en.order()).style("opacity",1),Qt=Math.max(Pe,0)+Ue,Pn=$a(Yt),Dn=Dt.selectAll(".domain").data([0]),Xn=(Dn.enter().append("path").attr("class","domain"),l.transition(Dn));Jt.append("line"),Jt.append("text");var Jn,gr,vr,sr,dr=Jt.select("line"),kr=gn.select("line"),Vr=en.select("text").text(Xt),Hr=Jt.select("text"),hr=gn.select("text"),Ar=we==="top"||we==="left"?-1:1;if(we==="bottom"||we==="top"?(St=Le,Jn="x",vr="y",gr="x2",sr="y2",Vr.attr("dy",Ar<0?"0em":".71em").style("text-anchor","middle"),Xn.attr("d","M"+Pn[0]+","+Ar*De+"V0H"+Pn[1]+"V"+Ar*De)):(St=Ne,Jn="y",vr="x",gr="y2",sr="x2",Vr.attr("dy",".32em").style("text-anchor",Ar<0?"end":"start"),Xn.attr("d","M"+Ar*De+","+Pn[0]+"H0V"+Pn[1]+"H"+Ar*De)),dr.attr(sr,Ar*Pe),Hr.attr(vr,Ar*Qt),kr.attr(gr,0).attr(sr,Ar*Pe),hr.attr(Jn,0).attr(vr,Ar*Qt),Yt.rangeBand){var Dr=Yt,zr=Dr.rangeBand()/2;Ft=Yt=function(Wr){return Dr(Wr)+zr}}else Ft.rangeBand?Ft=Yt:bn.call(St,Yt,Ft);Jt.call(St,Ft,Yt),gn.call(St,Yt,Yt)})}return it.scale=function(ut){return arguments.length?(ue=ut,it):ue},it.orient=function(ut){return arguments.length?(we=ut in pe?ut+"":ne,it):we},it.ticks=function(){return arguments.length?(Ze=x(arguments),it):Ze},it.tickValues=function(ut){return arguments.length?(Je=ut,it):Je},it.tickFormat=function(ut){return arguments.length?(te=ut,it):te},it.tickSize=function(ut){var St=arguments.length;return St?(Pe=+ut,De=+arguments[St-1],it):Pe},it.innerTickSize=function(ut){return arguments.length?(Pe=+ut,it):Pe},it.outerTickSize=function(ut){return arguments.length?(De=+ut,it):De},it.tickPadding=function(ut){return arguments.length?(Ue=+ut,it):Ue},it.tickSubdivide=function(){return arguments.length&&it},it};var ne="bottom",pe={top:1,right:1,bottom:1,left:1};function Le(te,ue,we){te.attr("transform",function(Pe){var De=ue(Pe);return"translate("+(isFinite(De)?De:we(Pe))+",0)"})}function Ne(te,ue,we){te.attr("transform",function(Pe){var De=ue(Pe);return"translate(0,"+(isFinite(De)?De:we(Pe))+")"})}l.svg.brush=function(){var te,ue,we=V(St,"brushstart","brush","brushend"),Pe=null,De=null,Ue=[0,0],Ze=[0,0],Je=!0,it=!0,ut=et[0];function St(Xt){Xt.each(function(){var en=l.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",ln).on("touchstart.brush",ln),Jt=en.selectAll(".background").data([0]);Jt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),en.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var bn=en.selectAll(".resize").data(ut,U);bn.exit().remove(),bn.enter().append("g").attr("class",function(Dn){return"resize "+Dn}).style("cursor",function(Dn){return qe[Dn]}).append("rect").attr("x",function(Dn){return/[ew]$/.test(Dn)?-3:null}).attr("y",function(Dn){return/^[ns]/.test(Dn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),bn.style("display",St.empty()?"none":null);var gn,Qt=l.transition(en),Pn=l.transition(Jt);Pe&&(gn=$a(Pe),Pn.attr("x",gn[0]).attr("width",gn[1]-gn[0]),Ft(Qt)),De&&(gn=$a(De),Pn.attr("y",gn[0]).attr("height",gn[1]-gn[0]),Yt(Qt)),Dt(Qt)})}function Dt(Xt){Xt.selectAll(".resize").attr("transform",function(en){return"translate("+Ue[+/e$/.test(en)]+","+Ze[+/^s/.test(en)]+")"})}function Ft(Xt){Xt.select(".extent").attr("x",Ue[0]),Xt.selectAll(".extent,.n>rect,.s>rect").attr("width",Ue[1]-Ue[0])}function Yt(Xt){Xt.select(".extent").attr("y",Ze[0]),Xt.selectAll(".extent,.e>rect,.w>rect").attr("height",Ze[1]-Ze[0])}function ln(){var Xt,en,Jt=this,bn=l.select(l.event.target),gn=we.of(Jt,arguments),Qt=l.select(Jt),Pn=bn.datum(),Dn=!/^(n|s)$/.test(Pn)&&Pe,Xn=!/^(e|w)$/.test(Pn)&&De,Jn=bn.classed("extent"),gr=dt(Jt),vr=l.mouse(Jt),sr=l.select(t(Jt)).on("keydown.brush",Vr).on("keyup.brush",Hr);if(l.event.changedTouches?sr.on("touchmove.brush",hr).on("touchend.brush",Dr):sr.on("mousemove.brush",hr).on("mouseup.brush",Dr),Qt.interrupt().selectAll("*").interrupt(),Jn)vr[0]=Ue[0]-vr[0],vr[1]=Ze[0]-vr[1];else if(Pn){var dr=+/w$/.test(Pn),kr=+/^n/.test(Pn);en=[Ue[1-dr]-vr[0],Ze[1-kr]-vr[1]],vr[0]=Ue[dr],vr[1]=Ze[kr]}else l.event.altKey&&(Xt=vr.slice());function Vr(){l.event.keyCode==32&&(Jn||(Xt=null,vr[0]-=Ue[1],vr[1]-=Ze[1],Jn=2),K())}function Hr(){l.event.keyCode==32&&Jn==2&&(vr[0]+=Ue[1],vr[1]+=Ze[1],Jn=0,K())}function hr(){var zr=l.mouse(Jt),Wr=!1;en&&(zr[0]+=en[0],zr[1]+=en[1]),Jn||(l.event.altKey?(Xt||(Xt=[(Ue[0]+Ue[1])/2,(Ze[0]+Ze[1])/2]),vr[0]=Ue[+(zr[0]<Xt[0])],vr[1]=Ze[+(zr[1]<Xt[1])]):Xt=null),Dn&&Ar(zr,Pe,0)&&(Ft(Qt),Wr=!0),Xn&&Ar(zr,De,1)&&(Yt(Qt),Wr=!0),Wr&&(Dt(Qt),gn({type:"brush",mode:Jn?"move":"resize"}))}function Ar(zr,Wr,Zr){var $r,ui,yi=$a(Wr),hi=yi[0],si=yi[1],ci=vr[Zr],pi=Zr?Ze:Ue,Ei=pi[1]-pi[0];if(Jn&&(hi-=ci,si-=Ei+ci),$r=(Zr?it:Je)?Math.max(hi,Math.min(si,zr[Zr])):zr[Zr],Jn?ui=($r+=ci)+Ei:(Xt&&(ci=Math.max(hi,Math.min(si,2*Xt[Zr]-$r))),ci<$r?(ui=$r,$r=ci):ui=ci),pi[0]!=$r||pi[1]!=ui)return Zr?ue=null:te=null,pi[0]=$r,pi[1]=ui,!0}function Dr(){hr(),Qt.style("pointer-events","all").selectAll(".resize").style("display",St.empty()?"none":null),l.select("body").style("cursor",null),sr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),gr(),gn({type:"brushend"})}Qt.style("pointer-events","none").selectAll(".resize").style("display",null),l.select("body").style("cursor",bn.style("cursor")),gn({type:"brushstart"}),hr()}return St.event=function(Xt){Xt.each(function(){var en=we.of(this,arguments),Jt={x:Ue,y:Ze,i:te,j:ue},bn=this.__chart__||Jt;this.__chart__=Jt,$e?l.select(this).transition().each("start.brush",function(){te=bn.i,ue=bn.j,Ue=bn.x,Ze=bn.y,en({type:"brushstart"})}).tween("brush:brush",function(){var gn=Aa(Ue,Jt.x),Qt=Aa(Ze,Jt.y);return te=ue=null,function(Pn){Ue=Jt.x=gn(Pn),Ze=Jt.y=Qt(Pn),en({type:"brush",mode:"resize"})}}).each("end.brush",function(){te=Jt.i,ue=Jt.j,en({type:"brush",mode:"resize"}),en({type:"brushend"})}):(en({type:"brushstart"}),en({type:"brush",mode:"resize"}),en({type:"brushend"}))})},St.x=function(Xt){return arguments.length?(ut=et[!(Pe=Xt)<<1|!De],St):Pe},St.y=function(Xt){return arguments.length?(ut=et[!Pe<<1|!(De=Xt)],St):De},St.clamp=function(Xt){return arguments.length?(Pe&&De?(Je=!!Xt[0],it=!!Xt[1]):Pe?Je=!!Xt:De&&(it=!!Xt),St):Pe&&De?[Je,it]:Pe?Je:De?it:null},St.extent=function(Xt){var en,Jt,bn,gn,Qt;return arguments.length?(Pe&&(en=Xt[0],Jt=Xt[1],De&&(en=en[0],Jt=Jt[0]),te=[en,Jt],Pe.invert&&(en=Pe(en),Jt=Pe(Jt)),Jt<en&&(Qt=en,en=Jt,Jt=Qt),en==Ue[0]&&Jt==Ue[1]||(Ue=[en,Jt])),De&&(bn=Xt[0],gn=Xt[1],Pe&&(bn=bn[1],gn=gn[1]),ue=[bn,gn],De.invert&&(bn=De(bn),gn=De(gn)),gn<bn&&(Qt=bn,bn=gn,gn=Qt),bn==Ze[0]&&gn==Ze[1]||(Ze=[bn,gn])),St):(Pe&&(te?(en=te[0],Jt=te[1]):(en=Ue[0],Jt=Ue[1],Pe.invert&&(en=Pe.invert(en),Jt=Pe.invert(Jt)),Jt<en&&(Qt=en,en=Jt,Jt=Qt))),De&&(ue?(bn=ue[0],gn=ue[1]):(bn=Ze[0],gn=Ze[1],De.invert&&(bn=De.invert(bn),gn=De.invert(gn)),gn<bn&&(Qt=bn,bn=gn,gn=Qt))),Pe&&De?[[en,bn],[Jt,gn]]:Pe?[en,Jt]:De&&[bn,gn])},St.clear=function(){return St.empty()||(Ue=[0,0],Ze=[0,0],te=ue=null),St},St.empty=function(){return!!Pe&&Ue[0]==Ue[1]||!!De&&Ze[0]==Ze[1]},l.rebind(St,we,"on")};var qe={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},et=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function vt(te){return JSON.parse(te.responseText)}function xt(te){var ue=d.createRange();return ue.selectNode(d.body),ue.createContextualFragment(te.responseText)}l.text=rr(function(te){return te.responseText}),l.json=function(te,ue){return $n(te,"application/json",vt,ue)},l.html=function(te,ue){return $n(te,"text/html",xt,ue)},l.xml=rr(function(te){return te.responseXML}),this.d3=l,(A=typeof(k=l)=="function"?k.call(R,e,R,$):k)===void 0||($.exports=A)}).apply(self)},88294:function($,R,e){$.exports=e(62849)},62849:function($,R,e){var k=e(91358),A=e(53435),l=e(18863),T=e(21527),x=e(71299),d=e(46775),s=e(30120),t=e(64941),o=e(90660),r=e(27084);function n(a,i){for(var c=i[0],h=i[1],f=1/(i[2]-c),b=1/(i[3]-h),v=new Array(a.length),g=0,y=a.length/2;g<y;g++)v[2*g]=A((a[2*g]-c)*f,0,1),v[2*g+1]=A((a[2*g+1]-h)*b,0,1);return v}$.exports=function(a,i){i||(i={}),a=s(a,"float64"),i=x(i,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var c=d(i.maxDepth,255),h=d(i.bounds,T(a,2));h[0]===h[2]&&h[2]++,h[1]===h[3]&&h[3]++;var f,b=n(a,h),v=a.length>>>1;i.dtype||(i.dtype="array"),typeof i.dtype=="string"?f=new(o(i.dtype))(v):i.dtype&&(f=i.dtype,Array.isArray(f)&&(f.length=v));for(var g=0;g<v;++g)f[g]=g;var y=[],p=[],m=[],w=[];(function U(z,H,F,N,B,j){if(!N.length)return null;var K=y[B]||(y[B]=[]),G=m[B]||(m[B]=[]),V=p[B]||(p[B]=[]),W=K.length;if(++B>c||j>1073741824){for(var J=0;J<N.length;J++)K.push(N[J]),G.push(j),V.push(null,null,null,null);return W}if(K.push(N[0]),G.push(j),N.length<=1)return V.push(null,null,null,null),W;for(var X=.5*F,ee=z+X,re=H+X,ie=[],se=[],fe=[],ye=[],ge=1,he=N.length;ge<he;ge++){var ve=N[ge],Oe=b[2*ve],xe=b[2*ve+1];Oe<ee?xe<re?ie.push(ve):se.push(ve):xe<re?fe.push(ve):ye.push(ve)}return j<<=2,V.push(U(z,H,X,ie,B,j),U(z,re,X,se,B,j+1),U(ee,H,X,fe,B,j+2),U(ee,re,X,ye,B,j+3)),W})(0,0,1,f,0,1);for(var u=0,S=0;S<y.length;S++){var _=y[S];if(f.set)f.set(_,u);else for(var E=0,L=_.length;E<L;E++)f[E+u]=_[E];var C=u+y[S].length;w[S]=[u,C],u=C}return f.range=function(){for(var U,z=[],H=arguments.length;H--;)z[H]=arguments[H];if(t(z[z.length-1])){var F=z.pop();z.length||F.x==null&&F.l==null&&F.left==null||(z=[F],U={}),U=x(F,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else U={};z.length||(z=h);var N,B=l.apply(void 0,z),j=[Math.min(B.x,B.x+B.width),Math.min(B.y,B.y+B.height),Math.max(B.x,B.x+B.width),Math.max(B.y,B.y+B.height)],K=j[0],G=j[1],V=j[2],W=j[3],J=n([K,G,V,W],h),X=J[0],ee=J[1],re=J[2],ie=J[3],se=d(U.level,y.length);if(U.d!=null&&(typeof U.d=="number"?N=[U.d,U.d]:U.d.length&&(N=U.d),se=Math.min(Math.max(Math.ceil(-r(Math.abs(N[0])/(h[2]-h[0]))),Math.ceil(-r(Math.abs(N[1])/(h[3]-h[1])))),se)),se=Math.min(se,y.length),U.lod)return P(X,ee,re,ie,se);var fe=[];function ye(he,ve,Oe,xe,ke,Me){if(ke!==null&&Me!==null&&!(X>he+Oe||ee>ve+Oe||re<he||ie<ve||xe>=se||ke===Me)){var Te=y[xe];Me===void 0&&(Me=Te.length);for(var Q=ke;Q<Me;Q++){var oe=Te[Q],ce=a[2*oe],me=a[2*oe+1];ce>=K&&ce<=V&&me>=G&&me<=W&&fe.push(oe)}var Ae=p[xe],Ie=Ae[4*ke+0],Ce=Ae[4*ke+1],Re=Ae[4*ke+2],le=Ae[4*ke+3],de=ge(Ae,ke+1),_e=.5*Oe,Fe=xe+1;ye(he,ve,_e,Fe,Ie,Ce||Re||le||de),ye(he,ve+_e,_e,Fe,Ce,Re||le||de),ye(he+_e,ve,_e,Fe,Re,le||de),ye(he+_e,ve+_e,_e,Fe,le,de)}}function ge(he,ve){for(var Oe=null,xe=0;Oe===null;)if(Oe=he[4*ve+xe],++xe>he.length)return null;return Oe}return ye(0,0,1,0,0,1),fe},f;function P(U,z,H,F,N){for(var B=[],j=0;j<N;j++){var K=m[j],G=w[j][0],V=I(U,z,j),W=I(H,F,j),J=k.ge(K,V),X=k.gt(K,W,J,K.length-1);B[j]=[J+G,X+G]}return B}function I(U,z,H){for(var F=1,N=.5,B=.5,j=.5,K=0;K<H;K++)F<<=2,F+=U<N?z<B?0:1:z<B?2:3,j*=.5,N+=U<N?-j:j,B+=z<B?-j:j;return F}}},30774:function($,R,e){Object.defineProperty(R,"__esModule",{value:!0});var k=e(60302),A=6378137;function l(d){var s=0;if(d&&d.length>0){s+=Math.abs(T(d[0]));for(var t=1;t<d.length;t++)s-=Math.abs(T(d[t]))}return s}function T(d){var s,t,o,r,n,a,i=0,c=d.length;if(c>2){for(a=0;a<c;a++)a===c-2?(o=c-2,r=c-1,n=0):a===c-1?(o=c-1,r=0,n=1):(o=a,r=a+1,n=a+2),s=d[o],t=d[r],i+=(x(d[n][0])-x(s[0]))*Math.sin(x(t[1]));i=i*A*A/2}return i}function x(d){return d*Math.PI/180}R.default=function(d){return k.geomReduce(d,function(s,t){return s+function(o){var r,n=0;switch(o.type){case"Polygon":return l(o.coordinates);case"MultiPolygon":for(r=0;r<o.coordinates.length;r++)n+=l(o.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},23132:function($,R){function e(a,i,c){c===void 0&&(c={});var h={type:"Feature"};return(c.id===0||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=i||{},h.geometry=a,h}function k(a,i,c){if(c===void 0&&(c={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},i,c)}function A(a,i,c){c===void 0&&(c={});for(var h=0,f=a;h<f.length;h++){var b=f[h];if(b.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<b[b.length-1].length;v++)if(b[b.length-1][v]!==b[0][v])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},i,c)}function l(a,i,c){if(c===void 0&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},i,c)}function T(a,i){i===void 0&&(i={});var c={type:"FeatureCollection"};return i.id&&(c.id=i.id),i.bbox&&(c.bbox=i.bbox),c.features=a,c}function x(a,i,c){return c===void 0&&(c={}),e({type:"MultiLineString",coordinates:a},i,c)}function d(a,i,c){return c===void 0&&(c={}),e({type:"MultiPoint",coordinates:a},i,c)}function s(a,i,c){return c===void 0&&(c={}),e({type:"MultiPolygon",coordinates:a},i,c)}function t(a,i){i===void 0&&(i="kilometers");var c=R.factors[i];if(!c)throw new Error(i+" units is invalid");return a*c}function o(a,i){i===void 0&&(i="kilometers");var c=R.factors[i];if(!c)throw new Error(i+" units is invalid");return a/c}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(R,"__esModule",{value:!0}),R.earthRadius=63710088e-1,R.factors={centimeters:100*R.earthRadius,centimetres:100*R.earthRadius,degrees:R.earthRadius/111325,feet:3.28084*R.earthRadius,inches:39.37*R.earthRadius,kilometers:R.earthRadius/1e3,kilometres:R.earthRadius/1e3,meters:R.earthRadius,metres:R.earthRadius,miles:R.earthRadius/1609.344,millimeters:1e3*R.earthRadius,millimetres:1e3*R.earthRadius,nauticalmiles:R.earthRadius/1852,radians:1,yards:1.0936*R.earthRadius},R.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/R.earthRadius,yards:1.0936133},R.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},R.feature=e,R.geometry=function(a,i,c){switch(a){case"Point":return k(i).geometry;case"LineString":return l(i).geometry;case"Polygon":return A(i).geometry;case"MultiPoint":return d(i).geometry;case"MultiLineString":return x(i).geometry;case"MultiPolygon":return s(i).geometry;default:throw new Error(a+" is invalid")}},R.point=k,R.points=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return k(h,i)}),c)},R.polygon=A,R.polygons=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return A(h,i)}),c)},R.lineString=l,R.lineStrings=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return l(h,i)}),c)},R.featureCollection=T,R.multiLineString=x,R.multiPoint=d,R.multiPolygon=s,R.geometryCollection=function(a,i,c){return c===void 0&&(c={}),e({type:"GeometryCollection",geometries:a},i,c)},R.round=function(a,i){if(i===void 0&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,i||0);return Math.round(a*c)/c},R.radiansToLength=t,R.lengthToRadians=o,R.lengthToDegrees=function(a,i){return r(o(a,i))},R.bearingToAzimuth=function(a){var i=a%360;return i<0&&(i+=360),i},R.radiansToDegrees=r,R.degreesToRadians=function(a){return a%360*Math.PI/180},R.convertLength=function(a,i,c){if(i===void 0&&(i="kilometers"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(o(a,i),c)},R.convertArea=function(a,i,c){if(i===void 0&&(i="meters"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=R.areaFactors[i];if(!h)throw new Error("invalid original units");var f=R.areaFactors[c];if(!f)throw new Error("invalid final units");return a/h*f},R.isNumber=n,R.isObject=function(a){return!!a&&a.constructor===Object},R.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(i){if(!n(i))throw new Error("bbox must only contain numbers")})},R.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},60302:function($,R,e){Object.defineProperty(R,"__esModule",{value:!0});var k=e(23132);function A(o,r,n){if(o!==null)for(var a,i,c,h,f,b,v,g,y=0,p=0,m=o.type,w=m==="FeatureCollection",u=m==="Feature",S=w?o.features.length:1,_=0;_<S;_++){f=(g=!!(v=w?o.features[_].geometry:u?o.geometry:o)&&v.type==="GeometryCollection")?v.geometries.length:1;for(var E=0;E<f;E++){var L=0,C=0;if((h=g?v.geometries[E]:v)!==null){b=h.coordinates;var P=h.type;switch(y=!n||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(r(b,p,_,L,C)===!1)return!1;p++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(r(b[a],p,_,L,C)===!1)return!1;p++,P==="MultiPoint"&&L++}P==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(i=0;i<b[a].length-y;i++){if(r(b[a][i],p,_,L,C)===!1)return!1;p++}P==="MultiLineString"&&L++,P==="Polygon"&&C++}P==="Polygon"&&L++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(C=0,i=0;i<b[a].length;i++){for(c=0;c<b[a][i].length-y;c++){if(r(b[a][i][c],p,_,L,C)===!1)return!1;p++}C++}L++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(A(h.geometries[a],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(o,r){var n;switch(o.type){case"FeatureCollection":for(n=0;n<o.features.length&&r(o.features[n].properties,n)!==!1;n++);break;case"Feature":r(o.properties,0)}}function T(o,r){if(o.type==="Feature")r(o,0);else if(o.type==="FeatureCollection")for(var n=0;n<o.features.length&&r(o.features[n],n)!==!1;n++);}function x(o,r){var n,a,i,c,h,f,b,v,g,y,p=0,m=o.type==="FeatureCollection",w=o.type==="Feature",u=m?o.features.length:1;for(n=0;n<u;n++){for(f=m?o.features[n].geometry:w?o.geometry:o,v=m?o.features[n].properties:w?o.properties:{},g=m?o.features[n].bbox:w?o.bbox:void 0,y=m?o.features[n].id:w?o.id:void 0,h=(b=!!f&&f.type==="GeometryCollection")?f.geometries.length:1,i=0;i<h;i++)if((c=b?f.geometries[i]:f)!==null)switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(c,p,v,g,y)===!1)return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(r(c.geometries[a],p,v,g,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,p,v,g,y)===!1)return!1;p++}}function d(o,r){x(o,function(n,a,i,c,h){var f,b=n===null?null:n.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return r(k.feature(n,i,{bbox:c,id:h}),a,0)!==!1&&void 0}switch(b){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<n.coordinates.length;v++){var g={type:f,coordinates:n.coordinates[v]};if(r(k.feature(g,i),a,v)===!1)return!1}})}function s(o,r){d(o,function(n,a,i){var c=0;if(n.geometry){var h=n.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var f,b=0,v=0,g=0;return A(n,function(y,p,m,w,u){if(f===void 0||a>b||w>v||u>g)return f=y,b=a,v=w,g=u,void(c=0);var S=k.lineString([f,y],n.properties);if(r(S,a,i,u,c)===!1)return!1;c++,f=y})!==!1&&void 0}}})}function t(o,r){if(!o)throw new Error("geojson is required");d(o,function(n,a,i){if(n.geometry!==null){var c=n.geometry.type,h=n.geometry.coordinates;switch(c){case"LineString":if(r(n,a,i,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<h.length;f++)if(r(k.lineString(h[f],n.properties),a,i,f)===!1)return!1}}})}R.coordEach=A,R.coordReduce=function(o,r,n,a){var i=n;return A(o,function(c,h,f,b,v){i=h===0&&n===void 0?c:r(i,c,h,f,b,v)},a),i},R.propEach=l,R.propReduce=function(o,r,n){var a=n;return l(o,function(i,c){a=c===0&&n===void 0?i:r(a,i,c)}),a},R.featureEach=T,R.featureReduce=function(o,r,n){var a=n;return T(o,function(i,c){a=c===0&&n===void 0?i:r(a,i,c)}),a},R.coordAll=function(o){var r=[];return A(o,function(n){r.push(n)}),r},R.geomEach=x,R.geomReduce=function(o,r,n){var a=n;return x(o,function(i,c,h,f,b){a=c===0&&n===void 0?i:r(a,i,c,h,f,b)}),a},R.flattenEach=d,R.flattenReduce=function(o,r,n){var a=n;return d(o,function(i,c,h){a=c===0&&h===0&&n===void 0?i:r(a,i,c,h)}),a},R.segmentEach=s,R.segmentReduce=function(o,r,n){var a=n,i=!1;return s(o,function(c,h,f,b,v){a=i===!1&&n===void 0?c:r(a,c,h,f,b,v),i=!0}),a},R.lineEach=t,R.lineReduce=function(o,r,n){var a=n;return t(o,function(i,c,h,f){a=c===0&&n===void 0?i:r(a,i,c,h,f)}),a},R.findSegment=function(o,r){if(r=r||{},!k.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.segmentIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var b=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=b.length+h-1),k.lineString([b[h],b[h+1]],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h-1),k.lineString([b[c][h],b[c][h+1]],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h-1),k.lineString([b[i][h],b[i][h+1]],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h-1),k.lineString([b[i][c][h],b[i][c][h+1]],f,r)}throw new Error("geojson is invalid")},R.findPoint=function(o,r){if(r=r||{},!k.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.coordIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var b=n.coordinates;switch(n.type){case"Point":return k.point(b,f,r);case"MultiPoint":return i<0&&(i=b.length+i),k.point(b[i],f,r);case"LineString":return h<0&&(h=b.length+h),k.point(b[h],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h),k.point(b[c][h],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h),k.point(b[i][h],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h),k.point(b[i][c][h],f,r)}throw new Error("geojson is invalid")}},85268:function($,R,e){Object.defineProperty(R,"__esModule",{value:!0});var k=e(27138);function A(l){var T=[1/0,1/0,-1/0,-1/0];return k.coordEach(l,function(x){T[0]>x[0]&&(T[0]=x[0]),T[1]>x[1]&&(T[1]=x[1]),T[2]<x[0]&&(T[2]=x[0]),T[3]<x[1]&&(T[3]=x[1])}),T}A.default=A,R.default=A},94228:function($,R){function e(a,i,c){c===void 0&&(c={});var h={type:"Feature"};return(c.id===0||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=i||{},h.geometry=a,h}function k(a,i,c){if(c===void 0&&(c={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},i,c)}function A(a,i,c){c===void 0&&(c={});for(var h=0,f=a;h<f.length;h++){var b=f[h];if(b.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<b[b.length-1].length;v++)if(b[b.length-1][v]!==b[0][v])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},i,c)}function l(a,i,c){if(c===void 0&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},i,c)}function T(a,i){i===void 0&&(i={});var c={type:"FeatureCollection"};return i.id&&(c.id=i.id),i.bbox&&(c.bbox=i.bbox),c.features=a,c}function x(a,i,c){return c===void 0&&(c={}),e({type:"MultiLineString",coordinates:a},i,c)}function d(a,i,c){return c===void 0&&(c={}),e({type:"MultiPoint",coordinates:a},i,c)}function s(a,i,c){return c===void 0&&(c={}),e({type:"MultiPolygon",coordinates:a},i,c)}function t(a,i){i===void 0&&(i="kilometers");var c=R.factors[i];if(!c)throw new Error(i+" units is invalid");return a*c}function o(a,i){i===void 0&&(i="kilometers");var c=R.factors[i];if(!c)throw new Error(i+" units is invalid");return a/c}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(R,"__esModule",{value:!0}),R.earthRadius=63710088e-1,R.factors={centimeters:100*R.earthRadius,centimetres:100*R.earthRadius,degrees:R.earthRadius/111325,feet:3.28084*R.earthRadius,inches:39.37*R.earthRadius,kilometers:R.earthRadius/1e3,kilometres:R.earthRadius/1e3,meters:R.earthRadius,metres:R.earthRadius,miles:R.earthRadius/1609.344,millimeters:1e3*R.earthRadius,millimetres:1e3*R.earthRadius,nauticalmiles:R.earthRadius/1852,radians:1,yards:1.0936*R.earthRadius},R.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/R.earthRadius,yards:1.0936133},R.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},R.feature=e,R.geometry=function(a,i,c){switch(a){case"Point":return k(i).geometry;case"LineString":return l(i).geometry;case"Polygon":return A(i).geometry;case"MultiPoint":return d(i).geometry;case"MultiLineString":return x(i).geometry;case"MultiPolygon":return s(i).geometry;default:throw new Error(a+" is invalid")}},R.point=k,R.points=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return k(h,i)}),c)},R.polygon=A,R.polygons=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return A(h,i)}),c)},R.lineString=l,R.lineStrings=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return l(h,i)}),c)},R.featureCollection=T,R.multiLineString=x,R.multiPoint=d,R.multiPolygon=s,R.geometryCollection=function(a,i,c){return c===void 0&&(c={}),e({type:"GeometryCollection",geometries:a},i,c)},R.round=function(a,i){if(i===void 0&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,i||0);return Math.round(a*c)/c},R.radiansToLength=t,R.lengthToRadians=o,R.lengthToDegrees=function(a,i){return r(o(a,i))},R.bearingToAzimuth=function(a){var i=a%360;return i<0&&(i+=360),i},R.radiansToDegrees=r,R.degreesToRadians=function(a){return a%360*Math.PI/180},R.convertLength=function(a,i,c){if(i===void 0&&(i="kilometers"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(o(a,i),c)},R.convertArea=function(a,i,c){if(i===void 0&&(i="meters"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=R.areaFactors[i];if(!h)throw new Error("invalid original units");var f=R.areaFactors[c];if(!f)throw new Error("invalid final units");return a/h*f},R.isNumber=n,R.isObject=function(a){return!!a&&a.constructor===Object},R.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(i){if(!n(i))throw new Error("bbox must only contain numbers")})},R.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},27138:function($,R,e){Object.defineProperty(R,"__esModule",{value:!0});var k=e(94228);function A(o,r,n){if(o!==null)for(var a,i,c,h,f,b,v,g,y=0,p=0,m=o.type,w=m==="FeatureCollection",u=m==="Feature",S=w?o.features.length:1,_=0;_<S;_++){f=(g=!!(v=w?o.features[_].geometry:u?o.geometry:o)&&v.type==="GeometryCollection")?v.geometries.length:1;for(var E=0;E<f;E++){var L=0,C=0;if((h=g?v.geometries[E]:v)!==null){b=h.coordinates;var P=h.type;switch(y=!n||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(r(b,p,_,L,C)===!1)return!1;p++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(r(b[a],p,_,L,C)===!1)return!1;p++,P==="MultiPoint"&&L++}P==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(i=0;i<b[a].length-y;i++){if(r(b[a][i],p,_,L,C)===!1)return!1;p++}P==="MultiLineString"&&L++,P==="Polygon"&&C++}P==="Polygon"&&L++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(C=0,i=0;i<b[a].length;i++){for(c=0;c<b[a][i].length-y;c++){if(r(b[a][i][c],p,_,L,C)===!1)return!1;p++}C++}L++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(A(h.geometries[a],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(o,r){var n;switch(o.type){case"FeatureCollection":for(n=0;n<o.features.length&&r(o.features[n].properties,n)!==!1;n++);break;case"Feature":r(o.properties,0)}}function T(o,r){if(o.type==="Feature")r(o,0);else if(o.type==="FeatureCollection")for(var n=0;n<o.features.length&&r(o.features[n],n)!==!1;n++);}function x(o,r){var n,a,i,c,h,f,b,v,g,y,p=0,m=o.type==="FeatureCollection",w=o.type==="Feature",u=m?o.features.length:1;for(n=0;n<u;n++){for(f=m?o.features[n].geometry:w?o.geometry:o,v=m?o.features[n].properties:w?o.properties:{},g=m?o.features[n].bbox:w?o.bbox:void 0,y=m?o.features[n].id:w?o.id:void 0,h=(b=!!f&&f.type==="GeometryCollection")?f.geometries.length:1,i=0;i<h;i++)if((c=b?f.geometries[i]:f)!==null)switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(c,p,v,g,y)===!1)return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(r(c.geometries[a],p,v,g,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,p,v,g,y)===!1)return!1;p++}}function d(o,r){x(o,function(n,a,i,c,h){var f,b=n===null?null:n.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return r(k.feature(n,i,{bbox:c,id:h}),a,0)!==!1&&void 0}switch(b){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<n.coordinates.length;v++){var g={type:f,coordinates:n.coordinates[v]};if(r(k.feature(g,i),a,v)===!1)return!1}})}function s(o,r){d(o,function(n,a,i){var c=0;if(n.geometry){var h=n.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var f,b=0,v=0,g=0;return A(n,function(y,p,m,w,u){if(f===void 0||a>b||w>v||u>g)return f=y,b=a,v=w,g=u,void(c=0);var S=k.lineString([f,y],n.properties);if(r(S,a,i,u,c)===!1)return!1;c++,f=y})!==!1&&void 0}}})}function t(o,r){if(!o)throw new Error("geojson is required");d(o,function(n,a,i){if(n.geometry!==null){var c=n.geometry.type,h=n.geometry.coordinates;switch(c){case"LineString":if(r(n,a,i,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<h.length;f++)if(r(k.lineString(h[f],n.properties),a,i,f)===!1)return!1}}})}R.coordEach=A,R.coordReduce=function(o,r,n,a){var i=n;return A(o,function(c,h,f,b,v){i=h===0&&n===void 0?c:r(i,c,h,f,b,v)},a),i},R.propEach=l,R.propReduce=function(o,r,n){var a=n;return l(o,function(i,c){a=c===0&&n===void 0?i:r(a,i,c)}),a},R.featureEach=T,R.featureReduce=function(o,r,n){var a=n;return T(o,function(i,c){a=c===0&&n===void 0?i:r(a,i,c)}),a},R.coordAll=function(o){var r=[];return A(o,function(n){r.push(n)}),r},R.geomEach=x,R.geomReduce=function(o,r,n){var a=n;return x(o,function(i,c,h,f,b){a=c===0&&n===void 0?i:r(a,i,c,h,f,b)}),a},R.flattenEach=d,R.flattenReduce=function(o,r,n){var a=n;return d(o,function(i,c,h){a=c===0&&h===0&&n===void 0?i:r(a,i,c,h)}),a},R.segmentEach=s,R.segmentReduce=function(o,r,n){var a=n,i=!1;return s(o,function(c,h,f,b,v){a=i===!1&&n===void 0?c:r(a,c,h,f,b,v),i=!0}),a},R.lineEach=t,R.lineReduce=function(o,r,n){var a=n;return t(o,function(i,c,h,f){a=c===0&&n===void 0?i:r(a,i,c,h,f)}),a},R.findSegment=function(o,r){if(r=r||{},!k.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.segmentIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var b=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=b.length+h-1),k.lineString([b[h],b[h+1]],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h-1),k.lineString([b[c][h],b[c][h+1]],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h-1),k.lineString([b[i][h],b[i][h+1]],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h-1),k.lineString([b[i][c][h],b[i][c][h+1]],f,r)}throw new Error("geojson is invalid")},R.findPoint=function(o,r){if(r=r||{},!k.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.coordIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var b=n.coordinates;switch(n.type){case"Point":return k.point(b,f,r);case"MultiPoint":return i<0&&(i=b.length+i),k.point(b[i],f,r);case"LineString":return h<0&&(h=b.length+h),k.point(b[h],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h),k.point(b[c][h],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h),k.point(b[i][h],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h),k.point(b[i][c][h],f,r)}throw new Error("geojson is invalid")}},29261:function($,R,e){Object.defineProperty(R,"__esModule",{value:!0});var k=e(88553),A=e(64182);R.default=function(l,T){T===void 0&&(T={});var x=0,d=0,s=0;return k.coordEach(l,function(t){x+=t[0],d+=t[1],s++}),A.point([x/s,d/s],T.properties)}},64182:function($,R){function e(a,i,c){c===void 0&&(c={});var h={type:"Feature"};return(c.id===0||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=i||{},h.geometry=a,h}function k(a,i,c){return c===void 0&&(c={}),e({type:"Point",coordinates:a},i,c)}function A(a,i,c){c===void 0&&(c={});for(var h=0,f=a;h<f.length;h++){var b=f[h];if(b.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<b[b.length-1].length;v++)if(b[b.length-1][v]!==b[0][v])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},i,c)}function l(a,i,c){if(c===void 0&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},i,c)}function T(a,i){i===void 0&&(i={});var c={type:"FeatureCollection"};return i.id&&(c.id=i.id),i.bbox&&(c.bbox=i.bbox),c.features=a,c}function x(a,i,c){return c===void 0&&(c={}),e({type:"MultiLineString",coordinates:a},i,c)}function d(a,i,c){return c===void 0&&(c={}),e({type:"MultiPoint",coordinates:a},i,c)}function s(a,i,c){return c===void 0&&(c={}),e({type:"MultiPolygon",coordinates:a},i,c)}function t(a,i){i===void 0&&(i="kilometers");var c=R.factors[i];if(!c)throw new Error(i+" units is invalid");return a*c}function o(a,i){i===void 0&&(i="kilometers");var c=R.factors[i];if(!c)throw new Error(i+" units is invalid");return a/c}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)&&!/^\s*$/.test(a)}Object.defineProperty(R,"__esModule",{value:!0}),R.earthRadius=63710088e-1,R.factors={centimeters:100*R.earthRadius,centimetres:100*R.earthRadius,degrees:R.earthRadius/111325,feet:3.28084*R.earthRadius,inches:39.37*R.earthRadius,kilometers:R.earthRadius/1e3,kilometres:R.earthRadius/1e3,meters:R.earthRadius,metres:R.earthRadius,miles:R.earthRadius/1609.344,millimeters:1e3*R.earthRadius,millimetres:1e3*R.earthRadius,nauticalmiles:R.earthRadius/1852,radians:1,yards:R.earthRadius/1.0936},R.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/R.earthRadius,yards:.91441111923921},R.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},R.feature=e,R.geometry=function(a,i,c){switch(a){case"Point":return k(i).geometry;case"LineString":return l(i).geometry;case"Polygon":return A(i).geometry;case"MultiPoint":return d(i).geometry;case"MultiLineString":return x(i).geometry;case"MultiPolygon":return s(i).geometry;default:throw new Error(a+" is invalid")}},R.point=k,R.points=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return k(h,i)}),c)},R.polygon=A,R.polygons=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return A(h,i)}),c)},R.lineString=l,R.lineStrings=function(a,i,c){return c===void 0&&(c={}),T(a.map(function(h){return l(h,i)}),c)},R.featureCollection=T,R.multiLineString=x,R.multiPoint=d,R.multiPolygon=s,R.geometryCollection=function(a,i,c){return c===void 0&&(c={}),e({type:"GeometryCollection",geometries:a},i,c)},R.round=function(a,i){if(i===void 0&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,i||0);return Math.round(a*c)/c},R.radiansToLength=t,R.lengthToRadians=o,R.lengthToDegrees=function(a,i){return r(o(a,i))},R.bearingToAzimuth=function(a){var i=a%360;return i<0&&(i+=360),i},R.radiansToDegrees=r,R.degreesToRadians=function(a){return a%360*Math.PI/180},R.convertLength=function(a,i,c){if(i===void 0&&(i="kilometers"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(o(a,i),c)},R.convertArea=function(a,i,c){if(i===void 0&&(i="meters"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=R.areaFactors[i];if(!h)throw new Error("invalid original units");var f=R.areaFactors[c];if(!f)throw new Error("invalid final units");return a/h*f},R.isNumber=n,R.isObject=function(a){return!!a&&a.constructor===Object},R.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(i){if(!n(i))throw new Error("bbox must only contain numbers")})},R.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")},R.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},R.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},R.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},R.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},R.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},R.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},R.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},88553:function($,R,e){Object.defineProperty(R,"__esModule",{value:!0});var k=e(64182);function A(o,r,n){if(o!==null)for(var a,i,c,h,f,b,v,g,y=0,p=0,m=o.type,w=m==="FeatureCollection",u=m==="Feature",S=w?o.features.length:1,_=0;_<S;_++){f=(g=!!(v=w?o.features[_].geometry:u?o.geometry:o)&&v.type==="GeometryCollection")?v.geometries.length:1;for(var E=0;E<f;E++){var L=0,C=0;if((h=g?v.geometries[E]:v)!==null){b=h.coordinates;var P=h.type;switch(y=!n||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(r(b,p,_,L,C)===!1)return!1;p++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(r(b[a],p,_,L,C)===!1)return!1;p++,P==="MultiPoint"&&L++}P==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(i=0;i<b[a].length-y;i++){if(r(b[a][i],p,_,L,C)===!1)return!1;p++}P==="MultiLineString"&&L++,P==="Polygon"&&C++}P==="Polygon"&&L++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(C=0,i=0;i<b[a].length;i++){for(c=0;c<b[a][i].length-y;c++){if(r(b[a][i][c],p,_,L,C)===!1)return!1;p++}C++}L++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(A(h.geometries[a],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(o,r){var n;switch(o.type){case"FeatureCollection":for(n=0;n<o.features.length&&r(o.features[n].properties,n)!==!1;n++);break;case"Feature":r(o.properties,0)}}function T(o,r){if(o.type==="Feature")r(o,0);else if(o.type==="FeatureCollection")for(var n=0;n<o.features.length&&r(o.features[n],n)!==!1;n++);}function x(o,r){var n,a,i,c,h,f,b,v,g,y,p=0,m=o.type==="FeatureCollection",w=o.type==="Feature",u=m?o.features.length:1;for(n=0;n<u;n++){for(f=m?o.features[n].geometry:w?o.geometry:o,v=m?o.features[n].properties:w?o.properties:{},g=m?o.features[n].bbox:w?o.bbox:void 0,y=m?o.features[n].id:w?o.id:void 0,h=(b=!!f&&f.type==="GeometryCollection")?f.geometries.length:1,i=0;i<h;i++)if((c=b?f.geometries[i]:f)!==null)switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(c,p,v,g,y)===!1)return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(r(c.geometries[a],p,v,g,y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,p,v,g,y)===!1)return!1;p++}}function d(o,r){x(o,function(n,a,i,c,h){var f,b=n===null?null:n.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return r(k.feature(n,i,{bbox:c,id:h}),a,0)!==!1&&void 0}switch(b){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<n.coordinates.length;v++){var g={type:f,coordinates:n.coordinates[v]};if(r(k.feature(g,i),a,v)===!1)return!1}})}function s(o,r){d(o,function(n,a,i){var c=0;if(n.geometry){var h=n.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var f,b=0,v=0,g=0;return A(n,function(y,p,m,w,u){if(f===void 0||a>b||w>v||u>g)return f=y,b=a,v=w,g=u,void(c=0);var S=k.lineString([f,y],n.properties);if(r(S,a,i,u,c)===!1)return!1;c++,f=y})!==!1&&void 0}}})}function t(o,r){if(!o)throw new Error("geojson is required");d(o,function(n,a,i){if(n.geometry!==null){var c=n.geometry.type,h=n.geometry.coordinates;switch(c){case"LineString":if(r(n,a,i,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<h.length;f++)if(r(k.lineString(h[f],n.properties),a,i,f)===!1)return!1}}})}R.coordEach=A,R.coordReduce=function(o,r,n,a){var i=n;return A(o,function(c,h,f,b,v){i=h===0&&n===void 0?c:r(i,c,h,f,b,v)},a),i},R.propEach=l,R.propReduce=function(o,r,n){var a=n;return l(o,function(i,c){a=c===0&&n===void 0?i:r(a,i,c)}),a},R.featureEach=T,R.featureReduce=function(o,r,n){var a=n;return T(o,function(i,c){a=c===0&&n===void 0?i:r(a,i,c)}),a},R.coordAll=function(o){var r=[];return A(o,function(n){r.push(n)}),r},R.geomEach=x,R.geomReduce=function(o,r,n){var a=n;return x(o,function(i,c,h,f,b){a=c===0&&n===void 0?i:r(a,i,c,h,f,b)}),a},R.flattenEach=d,R.flattenReduce=function(o,r,n){var a=n;return d(o,function(i,c,h){a=c===0&&h===0&&n===void 0?i:r(a,i,c,h)}),a},R.segmentEach=s,R.segmentReduce=function(o,r,n){var a=n,i=!1;return s(o,function(c,h,f,b,v){a=i===!1&&n===void 0?c:r(a,c,h,f,b,v),i=!0}),a},R.lineEach=t,R.lineReduce=function(o,r,n){var a=n;return t(o,function(i,c,h,f){a=c===0&&n===void 0?i:r(a,i,c,h,f)}),a},R.findSegment=function(o,r){if(r=r||{},!k.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.segmentIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var b=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=b.length+h-1),k.lineString([b[h],b[h+1]],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h-1),k.lineString([b[c][h],b[c][h+1]],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h-1),k.lineString([b[i][h],b[i][h+1]],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h-1),k.lineString([b[i][c][h],b[i][c][h+1]],f,r)}throw new Error("geojson is invalid")},R.findPoint=function(o,r){if(r=r||{},!k.isObject(r))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.coordIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var b=n.coordinates;switch(n.type){case"Point":return k.point(b,f,r);case"MultiPoint":return i<0&&(i=b.length+i),k.point(b[i],f,r);case"LineString":return h<0&&(h=b.length+h),k.point(b[h],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h),k.point(b[c][h],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h),k.point(b[i][h],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h),k.point(b[i][c][h],f,r)}throw new Error("geojson is invalid")}},65185:function($){$.exports=function(R){var e=0,k=0,A=0,l=0;return R.map(function(T){var x=(T=T.slice())[0],d=x.toUpperCase();if(x!=d)switch(T[0]=d,x){case"a":T[6]+=A,T[7]+=l;break;case"v":T[1]+=l;break;case"h":T[1]+=A;break;default:for(var s=1;s<T.length;)T[s++]+=A,T[s++]+=l}switch(d){case"Z":A=e,l=k;break;case"H":A=T[1];break;case"V":l=T[1];break;case"M":A=e=T[1],l=k=T[2];break;default:A=T[T.length-2],l=T[T.length-1]}return T})}},21527:function($){$.exports=function(R,e){if(!R||R.length==null)throw Error("Argument should be an array");e=e==null?1:Math.floor(e);for(var k=Array(2*e),A=0;A<e;A++){for(var l=-1/0,T=1/0,x=A,d=R.length;x<d;x+=e)R[x]>l&&(l=R[x]),R[x]<T&&(T=R[x]);k[A]=T,k[e+A]=l}return k}},24696:function($){$.exports=function(e,k,A){if(e.filter)return e.filter(k,A);if(e==null)throw new TypeError;if(typeof k!="function")throw new TypeError;for(var l=[],T=0;T<e.length;T++)if(R.call(e,T)){var x=e[T];k.call(A,x,T,e)&&l.push(x)}return l};var R=Object.prototype.hasOwnProperty},6851:function($){$.exports=function(R,e,k){if(typeof Array.prototype.findIndex=="function")return R.findIndex(e,k);if(typeof e!="function")throw new TypeError("predicate must be a function");var A=Object(R),l=A.length;if(l===0)return-1;for(var T=0;T<l;T++)if(e.call(k,A[T],T,A))return T;return-1}},54:function($,R,e){var k=e(21527);$.exports=function(A,l,T){if(!A||A.length==null)throw Error("Argument should be an array");l==null&&(l=1),T==null&&(T=k(A,l));for(var x=0;x<l;x++){var d=T[l+x],s=T[x],t=x,o=A.length;if(d===1/0&&s===-1/0)for(t=x;t<o;t+=l)A[t]=A[t]===d?1:A[t]===s?0:.5;else if(d===1/0)for(t=x;t<o;t+=l)A[t]=A[t]===d?1:0;else if(s===-1/0)for(t=x;t<o;t+=l)A[t]=A[t]===s?0:1;else{var r=d-s;for(t=x;t<o;t+=l)isNaN(A[t])||(A[t]=r===0?.5:(A[t]-s)/r)}}return A}},57471:function($){$.exports=function(R,e){var k=typeof R=="number",A=typeof e=="number";k&&!A?(e=R,R=0):k||A||(R=0,e=0);var l=(e|=0)-(R|=0);if(l<0)throw new Error("array length must be positive");for(var T=new Array(l),x=0,d=R;x<l;x++,d++)T[x]=d;return T}},32791:function($,R,e){var k=e(90386);function A(H){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},A(H)}var l,T,x=e(79616).codes,d=x.ERR_AMBIGUOUS_ARGUMENT,s=x.ERR_INVALID_ARG_TYPE,t=x.ERR_INVALID_ARG_VALUE,o=x.ERR_INVALID_RETURN_VALUE,r=x.ERR_MISSING_ARGS,n=e(73894),a=e(43827).inspect,i=e(43827).types,c=i.isPromise,h=i.isRegExp,f=Object.assign?Object.assign:e(73523).assign,b=Object.is?Object.is:e(64003);function v(){var H=e(74061);l=H.isDeepEqual,T=H.isDeepStrictEqual}var g=!1,y=$.exports=u,p={};function m(H){throw H.message instanceof Error?H.message:new n(H)}function w(H,F,N,B){if(!N){var j=!1;if(F===0)j=!0,B="No value argument passed to `assert.ok()`";else if(B instanceof Error)throw B;var K=new n({actual:N,expected:!0,message:B,operator:"==",stackStartFn:H});throw K.generatedMessage=j,K}}function u(){for(var H=arguments.length,F=new Array(H),N=0;N<H;N++)F[N]=arguments[N];w.apply(void 0,[u,F.length].concat(F))}y.fail=function H(F,N,B,j,K){var G,V=arguments.length;if(V===0)G="Failed";else if(V===1)B=F,F=void 0;else{if(g===!1){g=!0;var W=k.emitWarning?k.emitWarning:console.warn.bind(console);W("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}V===2&&(j="!=")}if(B instanceof Error)throw B;var J={actual:F,expected:N,operator:j===void 0?"fail":j,stackStartFn:K||H};B!==void 0&&(J.message=B);var X=new n(J);throw G&&(X.message=G,X.generatedMessage=!0),X},y.AssertionError=n,y.ok=u,y.equal=function H(F,N,B){if(arguments.length<2)throw new r("actual","expected");F!=N&&m({actual:F,expected:N,message:B,operator:"==",stackStartFn:H})},y.notEqual=function H(F,N,B){if(arguments.length<2)throw new r("actual","expected");F==N&&m({actual:F,expected:N,message:B,operator:"!=",stackStartFn:H})},y.deepEqual=function H(F,N,B){if(arguments.length<2)throw new r("actual","expected");l===void 0&&v(),l(F,N)||m({actual:F,expected:N,message:B,operator:"deepEqual",stackStartFn:H})},y.notDeepEqual=function H(F,N,B){if(arguments.length<2)throw new r("actual","expected");l===void 0&&v(),l(F,N)&&m({actual:F,expected:N,message:B,operator:"notDeepEqual",stackStartFn:H})},y.deepStrictEqual=function H(F,N,B){if(arguments.length<2)throw new r("actual","expected");l===void 0&&v(),T(F,N)||m({actual:F,expected:N,message:B,operator:"deepStrictEqual",stackStartFn:H})},y.notDeepStrictEqual=function H(F,N,B){if(arguments.length<2)throw new r("actual","expected");l===void 0&&v(),T(F,N)&&m({actual:F,expected:N,message:B,operator:"notDeepStrictEqual",stackStartFn:H})},y.strictEqual=function H(F,N,B){if(arguments.length<2)throw new r("actual","expected");b(F,N)||m({actual:F,expected:N,message:B,operator:"strictEqual",stackStartFn:H})},y.notStrictEqual=function H(F,N,B){if(arguments.length<2)throw new r("actual","expected");b(F,N)&&m({actual:F,expected:N,message:B,operator:"notStrictEqual",stackStartFn:H})};var S=function H(F,N,B){var j=this;(function(K,G){if(!(K instanceof G))throw new TypeError("Cannot call a class as a function")})(this,H),N.forEach(function(K){K in F&&(B!==void 0&&typeof B[K]=="string"&&h(F[K])&&F[K].test(B[K])?j[K]=B[K]:j[K]=F[K])})};function _(H,F,N,B,j,K){if(!(N in H)||!T(H[N],F[N])){if(!B){var G=new S(H,j),V=new S(F,j,H),W=new n({actual:G,expected:V,operator:"deepStrictEqual",stackStartFn:K});throw W.actual=H,W.expected=F,W.operator=K.name,W}m({actual:H,expected:F,message:B,operator:K.name,stackStartFn:K})}}function E(H,F,N,B){if(typeof F!="function"){if(h(F))return F.test(H);if(arguments.length===2)throw new s("expected",["Function","RegExp"],F);if(A(H)!=="object"||H===null){var j=new n({actual:H,expected:F,message:N,operator:"deepStrictEqual",stackStartFn:B});throw j.operator=B.name,j}var K=Object.keys(F);if(F instanceof Error)K.push("name","message");else if(K.length===0)throw new t("error",F,"may not be an empty object");return l===void 0&&v(),K.forEach(function(G){typeof H[G]=="string"&&h(F[G])&&F[G].test(H[G])||_(H,F,G,N,K,B)}),!0}return F.prototype!==void 0&&H instanceof F||!Error.isPrototypeOf(F)&&F.call({},H)===!0}function L(H){if(typeof H!="function")throw new s("fn","Function",H);try{H()}catch(F){return F}return p}function C(H){return c(H)||H!==null&&A(H)==="object"&&typeof H.then=="function"&&typeof H.catch=="function"}function P(H){return Promise.resolve().then(function(){var F;if(typeof H=="function"){if(!C(F=H()))throw new o("instance of Promise","promiseFn",F)}else{if(!C(H))throw new s("promiseFn",["Function","Promise"],H);F=H}return Promise.resolve().then(function(){return F}).then(function(){return p}).catch(function(N){return N})})}function I(H,F,N,B){if(typeof N=="string"){if(arguments.length===4)throw new s("error",["Object","Error","Function","RegExp"],N);if(A(F)==="object"&&F!==null){if(F.message===N)throw new d("error/message",'The error message "'.concat(F.message,'" is identical to the message.'))}else if(F===N)throw new d("error/message",'The error "'.concat(F,'" is identical to the message.'));B=N,N=void 0}else if(N!=null&&A(N)!=="object"&&typeof N!="function")throw new s("error",["Object","Error","Function","RegExp"],N);if(F===p){var j="";N&&N.name&&(j+=" (".concat(N.name,")")),j+=B?": ".concat(B):".";var K=H.name==="rejects"?"rejection":"exception";m({actual:void 0,expected:N,operator:H.name,message:"Missing expected ".concat(K).concat(j),stackStartFn:H})}if(N&&!E(F,N,B,H))throw F}function U(H,F,N,B){if(F!==p){if(typeof N=="string"&&(B=N,N=void 0),!N||E(F,N)){var j=B?": ".concat(B):".",K=H.name==="doesNotReject"?"rejection":"exception";m({actual:F,expected:N,operator:H.name,message:"Got unwanted ".concat(K).concat(j,`
`)+'Actual message: "'.concat(F&&F.message,'"'),stackStartFn:H})}throw F}}function z(){for(var H=arguments.length,F=new Array(H),N=0;N<H;N++)F[N]=arguments[N];w.apply(void 0,[z,F.length].concat(F))}y.throws=function H(F){for(var N=arguments.length,B=new Array(N>1?N-1:0),j=1;j<N;j++)B[j-1]=arguments[j];I.apply(void 0,[H,L(F)].concat(B))},y.rejects=function H(F){for(var N=arguments.length,B=new Array(N>1?N-1:0),j=1;j<N;j++)B[j-1]=arguments[j];return P(F).then(function(K){return I.apply(void 0,[H,K].concat(B))})},y.doesNotThrow=function H(F){for(var N=arguments.length,B=new Array(N>1?N-1:0),j=1;j<N;j++)B[j-1]=arguments[j];U.apply(void 0,[H,L(F)].concat(B))},y.doesNotReject=function H(F){for(var N=arguments.length,B=new Array(N>1?N-1:0),j=1;j<N;j++)B[j-1]=arguments[j];return P(F).then(function(K){return U.apply(void 0,[H,K].concat(B))})},y.ifError=function H(F){if(F!=null){var N="ifError got unwanted exception: ";A(F)==="object"&&typeof F.message=="string"?F.message.length===0&&F.constructor?N+=F.constructor.name:N+=F.message:N+=a(F);var B=new n({actual:F,expected:null,operator:"ifError",message:N,stackStartFn:H}),j=F.stack;if(typeof j=="string"){var K=j.split(`
`);K.shift();for(var G=B.stack.split(`
`),V=0;V<K.length;V++){var W=G.indexOf(K[V]);if(W!==-1){G=G.slice(0,W);break}}B.stack="".concat(G.join(`
`),`
`).concat(K.join(`
`))}throw B}},y.strict=f(z,y,{equal:y.strictEqual,deepEqual:y.deepStrictEqual,notEqual:y.notStrictEqual,notDeepEqual:y.notDeepStrictEqual}),y.strict.strict=y.strict},73894:function($,R,e){var k=e(90386);function A(w,u,S){return u in w?Object.defineProperty(w,u,{value:S,enumerable:!0,configurable:!0,writable:!0}):w[u]=S,w}function l(w,u){for(var S=0;S<u.length;S++){var _=u[S];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(w,_.key,_)}}function T(w,u){return!u||n(u)!=="object"&&typeof u!="function"?x(w):u}function x(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function d(w){var u=typeof Map=="function"?new Map:void 0;return d=function(S){if(S===null||(_=S,Function.toString.call(_).indexOf("[native code]")===-1))return S;var _;if(typeof S!="function")throw new TypeError("Super expression must either be null or a function");if(u!==void 0){if(u.has(S))return u.get(S);u.set(S,E)}function E(){return t(S,arguments,r(this).constructor)}return E.prototype=Object.create(S.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),o(E,S)},d(w)}function s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function t(w,u,S){return t=s()?Reflect.construct:function(_,E,L){var C=[null];C.push.apply(C,E);var P=new(Function.bind.apply(_,C));return L&&o(P,L.prototype),P},t.apply(null,arguments)}function o(w,u){return o=Object.setPrototypeOf||function(S,_){return S.__proto__=_,S},o(w,u)}function r(w){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},r(w)}function n(w){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},n(w)}var a=e(43827).inspect,i=e(79616).codes.ERR_INVALID_ARG_TYPE;function c(w,u,S){return(S===void 0||S>w.length)&&(S=w.length),w.substring(S-u.length,S)===u}var h="",f="",b="",v="",g={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function y(w){var u=Object.keys(w),S=Object.create(Object.getPrototypeOf(w));return u.forEach(function(_){S[_]=w[_]}),Object.defineProperty(S,"message",{value:w.message}),S}function p(w){return a(w,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var m=function(w){function u(E){var L;if(function(G,V){if(!(G instanceof V))throw new TypeError("Cannot call a class as a function")}(this,u),n(E)!=="object"||E===null)throw new i("options","Object",E);var C=E.message,P=E.operator,I=E.stackStartFn,U=E.actual,z=E.expected,H=Error.stackTraceLimit;if(Error.stackTraceLimit=0,C!=null)L=T(this,r(u).call(this,String(C)));else if(k.stderr&&k.stderr.isTTY&&(k.stderr&&k.stderr.getColorDepth&&k.stderr.getColorDepth()!==1?(h="\x1B[34m",f="\x1B[32m",v="\x1B[39m",b="\x1B[31m"):(h="",f="",v="",b="")),n(U)==="object"&&U!==null&&n(z)==="object"&&z!==null&&"stack"in U&&U instanceof Error&&"stack"in z&&z instanceof Error&&(U=y(U),z=y(z)),P==="deepStrictEqual"||P==="strictEqual")L=T(this,r(u).call(this,function(G,V,W){var J="",X="",ee=0,re="",ie=!1,se=p(G),fe=se.split(`
`),ye=p(V).split(`
`),ge=0,he="";if(W==="strictEqual"&&n(G)==="object"&&n(V)==="object"&&G!==null&&V!==null&&(W="strictEqualObject"),fe.length===1&&ye.length===1&&fe[0]!==ye[0]){var ve=fe[0].length+ye[0].length;if(ve<=10){if(!(n(G)==="object"&&G!==null||n(V)==="object"&&V!==null||G===0&&V===0))return"".concat(g[W],`

`)+"".concat(fe[0]," !== ").concat(ye[0],`
`)}else if(W!=="strictEqualObject"&&ve<(k.stderr&&k.stderr.isTTY?k.stderr.columns:80)){for(;fe[0][ge]===ye[0][ge];)ge++;ge>2&&(he=`
  `.concat(function(Ce,Re){if(Re=Math.floor(Re),Ce.length==0||Re==0)return"";var le=Ce.length*Re;for(Re=Math.floor(Math.log(Re)/Math.log(2));Re;)Ce+=Ce,Re--;return Ce+Ce.substring(0,le-Ce.length)}(" ",ge),"^"),ge=0)}}for(var Oe=fe[fe.length-1],xe=ye[ye.length-1];Oe===xe&&(ge++<2?re=`
  `.concat(Oe).concat(re):J=Oe,fe.pop(),ye.pop(),fe.length!==0&&ye.length!==0);)Oe=fe[fe.length-1],xe=ye[ye.length-1];var ke=Math.max(fe.length,ye.length);if(ke===0){var Me=se.split(`
`);if(Me.length>30)for(Me[26]="".concat(h,"...").concat(v);Me.length>27;)Me.pop();return"".concat(g.notIdentical,`

`).concat(Me.join(`
`),`
`)}ge>3&&(re=`
`.concat(h,"...").concat(v).concat(re),ie=!0),J!==""&&(re=`
  `.concat(J).concat(re),J="");var Te=0,Q=g[W]+`
`.concat(f,"+ actual").concat(v," ").concat(b,"- expected").concat(v),oe=" ".concat(h,"...").concat(v," Lines skipped");for(ge=0;ge<ke;ge++){var ce=ge-ee;if(fe.length<ge+1)ce>1&&ge>2&&(ce>4?(X+=`
`.concat(h,"...").concat(v),ie=!0):ce>3&&(X+=`
  `.concat(ye[ge-2]),Te++),X+=`
  `.concat(ye[ge-1]),Te++),ee=ge,J+=`
`.concat(b,"-").concat(v," ").concat(ye[ge]),Te++;else if(ye.length<ge+1)ce>1&&ge>2&&(ce>4?(X+=`
`.concat(h,"...").concat(v),ie=!0):ce>3&&(X+=`
  `.concat(fe[ge-2]),Te++),X+=`
  `.concat(fe[ge-1]),Te++),ee=ge,X+=`
`.concat(f,"+").concat(v," ").concat(fe[ge]),Te++;else{var me=ye[ge],Ae=fe[ge],Ie=Ae!==me&&(!c(Ae,",")||Ae.slice(0,-1)!==me);Ie&&c(me,",")&&me.slice(0,-1)===Ae&&(Ie=!1,Ae+=","),Ie?(ce>1&&ge>2&&(ce>4?(X+=`
`.concat(h,"...").concat(v),ie=!0):ce>3&&(X+=`
  `.concat(fe[ge-2]),Te++),X+=`
  `.concat(fe[ge-1]),Te++),ee=ge,X+=`
`.concat(f,"+").concat(v," ").concat(Ae),J+=`
`.concat(b,"-").concat(v," ").concat(me),Te+=2):(X+=J,J="",ce!==1&&ge!==0||(X+=`
  `.concat(Ae),Te++))}if(Te>20&&ge<ke-2)return"".concat(Q).concat(oe,`
`).concat(X,`
`).concat(h,"...").concat(v).concat(J,`
`)+"".concat(h,"...").concat(v)}return"".concat(Q).concat(ie?oe:"",`
`).concat(X).concat(J).concat(re).concat(he)}(U,z,P)));else if(P==="notDeepStrictEqual"||P==="notStrictEqual"){var F=g[P],N=p(U).split(`
`);if(P==="notStrictEqual"&&n(U)==="object"&&U!==null&&(F=g.notStrictEqualObject),N.length>30)for(N[26]="".concat(h,"...").concat(v);N.length>27;)N.pop();L=N.length===1?T(this,r(u).call(this,"".concat(F," ").concat(N[0]))):T(this,r(u).call(this,"".concat(F,`

`).concat(N.join(`
`),`
`)))}else{var B=p(U),j="",K=g[P];P==="notDeepEqual"||P==="notEqual"?(B="".concat(g[P],`

`).concat(B)).length>1024&&(B="".concat(B.slice(0,1021),"...")):(j="".concat(p(z)),B.length>512&&(B="".concat(B.slice(0,509),"...")),j.length>512&&(j="".concat(j.slice(0,509),"...")),P==="deepEqual"||P==="equal"?B="".concat(K,`

`).concat(B,`

should equal

`):j=" ".concat(P," ").concat(j)),L=T(this,r(u).call(this,"".concat(B).concat(j)))}return Error.stackTraceLimit=H,L.generatedMessage=!C,Object.defineProperty(x(L),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),L.code="ERR_ASSERTION",L.actual=U,L.expected=z,L.operator=P,Error.captureStackTrace&&Error.captureStackTrace(x(L),I),L.stack,L.name="AssertionError",T(L)}var S,_;return function(E,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(L&&L.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),L&&o(E,L)}(u,w),S=u,_=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:a.custom,value:function(E,L){return a(this,function(C){for(var P=1;P<arguments.length;P++){var I=arguments[P]!=null?arguments[P]:{},U=Object.keys(I);typeof Object.getOwnPropertySymbols=="function"&&(U=U.concat(Object.getOwnPropertySymbols(I).filter(function(z){return Object.getOwnPropertyDescriptor(I,z).enumerable}))),U.forEach(function(z){A(C,z,I[z])})}return C}({},L,{customInspect:!1,depth:0}))}}],_&&l(S.prototype,_),u}(d(Error));$.exports=m},79616:function($,R,e){function k(o){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},k(o)}function A(o){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},A(o)}function l(o,r){return l=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},l(o,r)}var T,x,d={};function s(o,r,n){n||(n=Error);var a=function(i){function c(h,f,b){var v;return function(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}(this,c),v=function(g,y){return!y||k(y)!=="object"&&typeof y!="function"?function(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}(g):y}(this,A(c).call(this,function(g,y,p){return typeof r=="string"?r:r(g,y,p)}(h,f,b))),v.code=o,v}return function(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),f&&l(h,f)}(c,i),c}(n);d[o]=a}function t(o,r){if(Array.isArray(o)){var n=o.length;return o=o.map(function(a){return String(a)}),n>2?"one of ".concat(r," ").concat(o.slice(0,n-1).join(", "),", or ")+o[n-1]:n===2?"one of ".concat(r," ").concat(o[0]," or ").concat(o[1]):"of ".concat(r," ").concat(o[0])}return"of ".concat(r," ").concat(String(o))}s("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),s("ERR_INVALID_ARG_TYPE",function(o,r,n){var a,i,c,h,f;if(T===void 0&&(T=e(32791)),T(typeof o=="string","'name' must be a string"),typeof r=="string"&&(i="not ",r.substr(0,i.length)===i)?(a="must not be",r=r.replace(/^not /,"")):a="must be",function(v,g,y){return(y===void 0||y>v.length)&&(y=v.length),v.substring(y-g.length,y)===g}(o," argument"))c="The ".concat(o," ").concat(a," ").concat(t(r,"type"));else{var b=(typeof f!="number"&&(f=0),f+1>(h=o).length||h.indexOf(".",f)===-1?"argument":"property");c='The "'.concat(o,'" ').concat(b," ").concat(a," ").concat(t(r,"type"))}return c+". Received type ".concat(k(n))},TypeError),s("ERR_INVALID_ARG_VALUE",function(o,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";x===void 0&&(x=e(43827));var a=x.inspect(r);return a.length>128&&(a="".concat(a.slice(0,128),"...")),"The argument '".concat(o,"' ").concat(n,". Received ").concat(a)},TypeError),s("ERR_INVALID_RETURN_VALUE",function(o,r,n){var a;return a=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(k(n)),"Expected ".concat(o,' to be returned from the "').concat(r,'"')+" function but got ".concat(a,".")},TypeError),s("ERR_MISSING_ARGS",function(){for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];T===void 0&&(T=e(32791)),T(r.length>0,"At least one arg needs to be specified");var a="The ",i=r.length;switch(r=r.map(function(c){return'"'.concat(c,'"')}),i){case 1:a+="".concat(r[0]," argument");break;case 2:a+="".concat(r[0]," and ").concat(r[1]," arguments");break;default:a+=r.slice(0,i-1).join(", "),a+=", and ".concat(r[i-1]," arguments")}return"".concat(a," must be specified")},TypeError),$.exports.codes=d},74061:function($,R,e){function k(V,W){return function(J){if(Array.isArray(J))return J}(V)||function(J,X){var ee=[],re=!0,ie=!1,se=void 0;try{for(var fe,ye=J[Symbol.iterator]();!(re=(fe=ye.next()).done)&&(ee.push(fe.value),!X||ee.length!==X);re=!0);}catch(ge){ie=!0,se=ge}finally{try{re||ye.return==null||ye.return()}finally{if(ie)throw se}}return ee}(V,W)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function A(V){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},A(V)}var l=/a/g.flags!==void 0,T=function(V){var W=[];return V.forEach(function(J){return W.push(J)}),W},x=function(V){var W=[];return V.forEach(function(J,X){return W.push([X,J])}),W},d=Object.is?Object.is:e(64003),s=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:e(15567);function o(V){return V.call.bind(V)}var r=o(Object.prototype.hasOwnProperty),n=o(Object.prototype.propertyIsEnumerable),a=o(Object.prototype.toString),i=e(43827).types,c=i.isAnyArrayBuffer,h=i.isArrayBufferView,f=i.isDate,b=i.isMap,v=i.isRegExp,g=i.isSet,y=i.isNativeError,p=i.isBoxedPrimitive,m=i.isNumberObject,w=i.isStringObject,u=i.isBooleanObject,S=i.isBigIntObject,_=i.isSymbolObject,E=i.isFloat32Array,L=i.isFloat64Array;function C(V){if(V.length===0||V.length>10)return!0;for(var W=0;W<V.length;W++){var J=V.charCodeAt(W);if(J<48||J>57)return!0}return V.length===10&&V>=Math.pow(2,32)}function P(V){return Object.keys(V).filter(C).concat(s(V).filter(Object.prototype.propertyIsEnumerable.bind(V)))}function I(V,W){if(V===W)return 0;for(var J=V.length,X=W.length,ee=0,re=Math.min(J,X);ee<re;++ee)if(V[ee]!==W[ee]){J=V[ee],X=W[ee];break}return J<X?-1:X<J?1:0}function U(V,W,J,X){if(V===W)return V!==0||!J||d(V,W);if(J){if(A(V)!=="object")return typeof V=="number"&&t(V)&&t(W);if(A(W)!=="object"||V===null||W===null||Object.getPrototypeOf(V)!==Object.getPrototypeOf(W))return!1}else{if(V===null||A(V)!=="object")return(W===null||A(W)!=="object")&&V==W;if(W===null||A(W)!=="object")return!1}var ee,re,ie,se,fe=a(V);if(fe!==a(W))return!1;if(Array.isArray(V)){if(V.length!==W.length)return!1;var ye=P(V),ge=P(W);return ye.length===ge.length&&H(V,W,J,X,1,ye)}if(fe==="[object Object]"&&(!b(V)&&b(W)||!g(V)&&g(W)))return!1;if(f(V)){if(!f(W)||Date.prototype.getTime.call(V)!==Date.prototype.getTime.call(W))return!1}else if(v(V)){if(!v(W)||(ie=V,se=W,!(l?ie.source===se.source&&ie.flags===se.flags:RegExp.prototype.toString.call(ie)===RegExp.prototype.toString.call(se))))return!1}else if(y(V)||V instanceof Error){if(V.message!==W.message||V.name!==W.name)return!1}else{if(h(V)){if(J||!E(V)&&!L(V)){if(!function(Oe,xe){return Oe.byteLength===xe.byteLength&&I(new Uint8Array(Oe.buffer,Oe.byteOffset,Oe.byteLength),new Uint8Array(xe.buffer,xe.byteOffset,xe.byteLength))===0}(V,W))return!1}else if(!function(Oe,xe){if(Oe.byteLength!==xe.byteLength)return!1;for(var ke=0;ke<Oe.byteLength;ke++)if(Oe[ke]!==xe[ke])return!1;return!0}(V,W))return!1;var he=P(V),ve=P(W);return he.length===ve.length&&H(V,W,J,X,0,he)}if(g(V))return!(!g(W)||V.size!==W.size)&&H(V,W,J,X,2);if(b(V))return!(!b(W)||V.size!==W.size)&&H(V,W,J,X,3);if(c(V)){if(re=W,(ee=V).byteLength!==re.byteLength||I(new Uint8Array(ee),new Uint8Array(re))!==0)return!1}else if(p(V)&&!function(Oe,xe){return m(Oe)?m(xe)&&d(Number.prototype.valueOf.call(Oe),Number.prototype.valueOf.call(xe)):w(Oe)?w(xe)&&String.prototype.valueOf.call(Oe)===String.prototype.valueOf.call(xe):u(Oe)?u(xe)&&Boolean.prototype.valueOf.call(Oe)===Boolean.prototype.valueOf.call(xe):S(Oe)?S(xe)&&BigInt.prototype.valueOf.call(Oe)===BigInt.prototype.valueOf.call(xe):_(xe)&&Symbol.prototype.valueOf.call(Oe)===Symbol.prototype.valueOf.call(xe)}(V,W))return!1}return H(V,W,J,X,0)}function z(V,W){return W.filter(function(J){return n(V,J)})}function H(V,W,J,X,ee,re){if(arguments.length===5){re=Object.keys(V);var ie=Object.keys(W);if(re.length!==ie.length)return!1}for(var se=0;se<re.length;se++)if(!r(W,re[se]))return!1;if(J&&arguments.length===5){var fe=s(V);if(fe.length!==0){var ye=0;for(se=0;se<fe.length;se++){var ge=fe[se];if(n(V,ge)){if(!n(W,ge))return!1;re.push(ge),ye++}else if(n(W,ge))return!1}var he=s(W);if(fe.length!==he.length&&z(W,he).length!==ye)return!1}else{var ve=s(W);if(ve.length!==0&&z(W,ve).length!==0)return!1}}if(re.length===0&&(ee===0||ee===1&&V.length===0||V.size===0))return!0;if(X===void 0)X={val1:new Map,val2:new Map,position:0};else{var Oe=X.val1.get(V);if(Oe!==void 0){var xe=X.val2.get(W);if(xe!==void 0)return Oe===xe}X.position++}X.val1.set(V,X.position),X.val2.set(W,X.position);var ke=G(V,W,J,re,X,ee);return X.val1.delete(V),X.val2.delete(W),ke}function F(V,W,J,X){for(var ee=T(V),re=0;re<ee.length;re++){var ie=ee[re];if(U(W,ie,J,X))return V.delete(ie),!0}return!1}function N(V){switch(A(V)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":V=+V;case"number":if(t(V))return!1}return!0}function B(V,W,J){var X=N(J);return X??(W.has(X)&&!V.has(X))}function j(V,W,J,X,ee){var re=N(J);if(re!=null)return re;var ie=W.get(re);return!(ie===void 0&&!W.has(re)||!U(X,ie,!1,ee))&&!V.has(re)&&U(X,ie,!1,ee)}function K(V,W,J,X,ee,re){for(var ie=T(V),se=0;se<ie.length;se++){var fe=ie[se];if(U(J,fe,ee,re)&&U(X,W.get(fe),ee,re))return V.delete(fe),!0}return!1}function G(V,W,J,X,ee,re){var ie=0;if(re===2){if(!function(ge,he,ve,Oe){for(var xe=null,ke=T(ge),Me=0;Me<ke.length;Me++){var Te=ke[Me];if(A(Te)==="object"&&Te!==null)xe===null&&(xe=new Set),xe.add(Te);else if(!he.has(Te)){if(ve||!B(ge,he,Te))return!1;xe===null&&(xe=new Set),xe.add(Te)}}if(xe!==null){for(var Q=T(he),oe=0;oe<Q.length;oe++){var ce=Q[oe];if(A(ce)==="object"&&ce!==null){if(!F(xe,ce,ve,Oe))return!1}else if(!ve&&!ge.has(ce)&&!F(xe,ce,ve,Oe))return!1}return xe.size===0}return!0}(V,W,J,ee))return!1}else if(re===3){if(!function(ge,he,ve,Oe){for(var xe=null,ke=x(ge),Me=0;Me<ke.length;Me++){var Te=k(ke[Me],2),Q=Te[0],oe=Te[1];if(A(Q)==="object"&&Q!==null)xe===null&&(xe=new Set),xe.add(Q);else{var ce=he.get(Q);if(ce===void 0&&!he.has(Q)||!U(oe,ce,ve,Oe)){if(ve||!j(ge,he,Q,oe,Oe))return!1;xe===null&&(xe=new Set),xe.add(Q)}}}if(xe!==null){for(var me=x(he),Ae=0;Ae<me.length;Ae++){var Ie=k(me[Ae],2),Ce=(Q=Ie[0],Ie[1]);if(A(Q)==="object"&&Q!==null){if(!K(xe,ge,Q,Ce,ve,Oe))return!1}else if(!(ve||ge.has(Q)&&U(ge.get(Q),Ce,!1,Oe)||K(xe,ge,Q,Ce,!1,Oe)))return!1}return xe.size===0}return!0}(V,W,J,ee))return!1}else if(re===1)for(;ie<V.length;ie++){if(!r(V,ie)){if(r(W,ie))return!1;for(var se=Object.keys(V);ie<se.length;ie++){var fe=se[ie];if(!r(W,fe)||!U(V[fe],W[fe],J,ee))return!1}return se.length===Object.keys(W).length}if(!r(W,ie)||!U(V[ie],W[ie],J,ee))return!1}for(ie=0;ie<X.length;ie++){var ye=X[ie];if(!U(V[ye],W[ye],J,ee))return!1}return!0}$.exports={isDeepEqual:function(V,W){return U(V,W,!1)},isDeepStrictEqual:function(V,W){return U(V,W,!0)}}},95341:function($,R){R.byteLength=function(t){var o=d(t),r=o[0],n=o[1];return 3*(r+n)/4-n},R.toByteArray=function(t){var o,r,n=d(t),a=n[0],i=n[1],c=new A(function(b,v,g){return 3*(v+g)/4-g}(0,a,i)),h=0,f=i>0?a-4:a;for(r=0;r<f;r+=4)o=k[t.charCodeAt(r)]<<18|k[t.charCodeAt(r+1)]<<12|k[t.charCodeAt(r+2)]<<6|k[t.charCodeAt(r+3)],c[h++]=o>>16&255,c[h++]=o>>8&255,c[h++]=255&o;return i===2&&(o=k[t.charCodeAt(r)]<<2|k[t.charCodeAt(r+1)]>>4,c[h++]=255&o),i===1&&(o=k[t.charCodeAt(r)]<<10|k[t.charCodeAt(r+1)]<<4|k[t.charCodeAt(r+2)]>>2,c[h++]=o>>8&255,c[h++]=255&o),c},R.fromByteArray=function(t){for(var o,r=t.length,n=r%3,a=[],i=16383,c=0,h=r-n;c<h;c+=i)a.push(s(t,c,c+i>h?h:c+i));return n===1?(o=t[r-1],a.push(e[o>>2]+e[o<<4&63]+"==")):n===2&&(o=(t[r-2]<<8)+t[r-1],a.push(e[o>>10]+e[o>>4&63]+e[o<<2&63]+"=")),a.join("")};for(var e=[],k=[],A=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0,x=l.length;T<x;++T)e[T]=l[T],k[l.charCodeAt(T)]=T;function d(t){var o=t.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return r===-1&&(r=o),[r,r===o?0:4-r%4]}function s(t,o,r){for(var n,a,i=[],c=o;c<r;c+=3)n=(t[c]<<16&16711680)+(t[c+1]<<8&65280)+(255&t[c+2]),i.push(e[(a=n)>>18&63]+e[a>>12&63]+e[a>>6&63]+e[63&a]);return i.join("")}k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63},91358:function($){function R(x,d,s,t,o){for(var r=o+1;t<=o;){var n=t+o>>>1,a=x[n];(s!==void 0?s(a,d):a-d)>=0?(r=n,o=n-1):t=n+1}return r}function e(x,d,s,t,o){for(var r=o+1;t<=o;){var n=t+o>>>1,a=x[n];(s!==void 0?s(a,d):a-d)>0?(r=n,o=n-1):t=n+1}return r}function k(x,d,s,t,o){for(var r=t-1;t<=o;){var n=t+o>>>1,a=x[n];(s!==void 0?s(a,d):a-d)<0?(r=n,t=n+1):o=n-1}return r}function A(x,d,s,t,o){for(var r=t-1;t<=o;){var n=t+o>>>1,a=x[n];(s!==void 0?s(a,d):a-d)<=0?(r=n,t=n+1):o=n-1}return r}function l(x,d,s,t,o){for(;t<=o;){var r=t+o>>>1,n=x[r],a=s!==void 0?s(n,d):n-d;if(a===0)return r;a<=0?t=r+1:o=r-1}return-1}function T(x,d,s,t,o,r){return typeof s=="function"?r(x,d,s,t===void 0?0:0|t,o===void 0?x.length-1:0|o):r(x,d,void 0,s===void 0?0:0|s,t===void 0?x.length-1:0|t)}$.exports={ge:function(x,d,s,t,o){return T(x,d,s,t,o,R)},gt:function(x,d,s,t,o){return T(x,d,s,t,o,e)},lt:function(x,d,s,t,o){return T(x,d,s,t,o,k)},le:function(x,d,s,t,o){return T(x,d,s,t,o,A)},eq:function(x,d,s,t,o){return T(x,d,s,t,o,l)}}},13547:function($,R){function e(A){var l=32;return(A&=-A)&&l--,65535&A&&(l-=16),16711935&A&&(l-=8),252645135&A&&(l-=4),858993459&A&&(l-=2),1431655765&A&&(l-=1),l}R.INT_BITS=32,R.INT_MAX=2147483647,R.INT_MIN=-2147483648,R.sign=function(A){return(A>0)-(A<0)},R.abs=function(A){var l=A>>31;return(A^l)-l},R.min=function(A,l){return l^(A^l)&-(A<l)},R.max=function(A,l){return A^(A^l)&-(A<l)},R.isPow2=function(A){return!(A&A-1||!A)},R.log2=function(A){var l,T;return l=(A>65535)<<4,l|=T=((A>>>=l)>255)<<3,l|=T=((A>>>=T)>15)<<2,(l|=T=((A>>>=T)>3)<<1)|(A>>>=T)>>1},R.log10=function(A){return A>=1e9?9:A>=1e8?8:A>=1e7?7:A>=1e6?6:A>=1e5?5:A>=1e4?4:A>=1e3?3:A>=100?2:A>=10?1:0},R.popCount=function(A){return 16843009*((A=(858993459&(A-=A>>>1&1431655765))+(A>>>2&858993459))+(A>>>4)&252645135)>>>24},R.countTrailingZeros=e,R.nextPow2=function(A){return A+=A===0,--A,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,1+(A|=A>>>16)},R.prevPow2=function(A){return A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,(A|=A>>>16)-(A>>>1)},R.parity=function(A){return A^=A>>>16,A^=A>>>8,A^=A>>>4,27030>>>(A&=15)&1};var k=new Array(256);(function(A){for(var l=0;l<256;++l){var T=l,x=l,d=7;for(T>>>=1;T;T>>>=1)x<<=1,x|=1&T,--d;A[l]=x<<d&255}})(k),R.reverse=function(A){return k[255&A]<<24|k[A>>>8&255]<<16|k[A>>>16&255]<<8|k[A>>>24&255]},R.interleave2=function(A,l){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A&=65535)|A<<8))|A<<4))|A<<2))|A<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l&=65535)|l<<8))|l<<4))|l<<2))|l<<1))<<1},R.deinterleave2=function(A,l){return(A=65535&((A=16711935&((A=252645135&((A=858993459&((A=A>>>l&1431655765)|A>>>1))|A>>>2))|A>>>4))|A>>>16))<<16>>16},R.interleave3=function(A,l,T){return A=1227133513&((A=3272356035&((A=251719695&((A=4278190335&((A&=1023)|A<<16))|A<<8))|A<<4))|A<<2),(A|=(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<1)|(T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2))<<2},R.deinterleave3=function(A,l){return(A=1023&((A=4278190335&((A=251719695&((A=3272356035&((A=A>>>l&1227133513)|A>>>2))|A>>>4))|A>>>8))|A>>>16))<<22>>22},R.nextCombination=function(A){var l=A|A-1;return l+1|(~l&-~l)-1>>>e(A)+1}},44781:function($,R,e){var k=e(53435);$.exports=function(x,d){d||(d={});var s,t,o,r,n,a,i,c,h,f,b,v=d.cutoff==null?.25:d.cutoff,g=d.radius==null?8:d.radius,y=d.channel||0;if(ArrayBuffer.isView(x)||Array.isArray(x)){if(!d.width||!d.height)throw Error("For raw data width and height should be provided by options");s=d.width,t=d.height,r=x,a=d.stride?d.stride:Math.floor(x.length/s/t)}else window.HTMLCanvasElement&&x instanceof window.HTMLCanvasElement?(i=(c=x).getContext("2d"),s=c.width,t=c.height,r=(h=i.getImageData(0,0,s,t)).data,a=4):window.CanvasRenderingContext2D&&x instanceof window.CanvasRenderingContext2D?(i=x,s=(c=x.canvas).width,t=c.height,r=(h=i.getImageData(0,0,s,t)).data,a=4):window.ImageData&&x instanceof window.ImageData&&(h=x,s=x.width,t=x.height,r=h.data,a=4);if(o=Math.max(s,t),window.Uint8ClampedArray&&r instanceof window.Uint8ClampedArray||window.Uint8Array&&r instanceof window.Uint8Array)for(n=r,r=Array(s*t),f=0,b=n.length;f<b;f++)r[f]=n[f*a+y]/255;else if(a!==1)throw Error("Raw data can have only 1 value per pixel");var p=Array(s*t),m=Array(s*t),w=Array(o),u=Array(o),S=Array(o+1),_=Array(o);for(f=0,b=s*t;f<b;f++){var E=r[f];p[f]=E===1?0:E===0?A:Math.pow(Math.max(0,.5-E),2),m[f]=E===1?A:E===0?0:Math.pow(Math.max(0,E-.5),2)}l(p,s,t,w,u,_,S),l(m,s,t,w,u,_,S);var L=window.Float32Array?new Float32Array(s*t):new Array(s*t);for(f=0,b=s*t;f<b;f++)L[f]=k(1-((p[f]-m[f])/g+v),0,1);return L};var A=1e20;function l(x,d,s,t,o,r,n){for(var a=0;a<d;a++){for(var i=0;i<s;i++)t[i]=x[i*d+a];for(T(t,o,r,n,s),i=0;i<s;i++)x[i*d+a]=o[i]}for(i=0;i<s;i++){for(a=0;a<d;a++)t[a]=x[i*d+a];for(T(t,o,r,n,d),a=0;a<d;a++)x[i*d+a]=Math.sqrt(o[a])}}function T(x,d,s,t,o){s[0]=0,t[0]=-A,t[1]=+A;for(var r=1,n=0;r<o;r++){for(var a=(x[r]+r*r-(x[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);a<=t[n];)n--,a=(x[r]+r*r-(x[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);s[++n]=r,t[n]=a,t[n+1]=+A}for(r=0,n=0;r<o;r++){for(;t[n+1]<r;)n++;d[r]=(r-s[n])*(r-s[n])+x[s[n]]}}},68222:function($,R,e){var k=e(77575),A=e(68318),l=A("%Function.prototype.apply%"),T=A("%Function.prototype.call%"),x=A("%Reflect.apply%",!0)||k.call(T,l),d=A("%Object.defineProperty%",!0);if(d)try{d({},"a",{value:1})}catch{d=null}$.exports=function(){return x(k,T,arguments)};var s=function(){return x(k,l,arguments)};d?d($.exports,"apply",{value:s}):$.exports.apply=s},53435:function($){$.exports=function(R,e,k){return e<k?R<e?e:R>k?k:R:R<k?k:R>e?e:R}},6475:function($,R,e){var k=e(53435);function A(l,T){T==null&&(T=!0);var x=l[0],d=l[1],s=l[2],t=l[3];return t==null&&(t=T?1:255),T&&(x*=255,d*=255,s*=255,t*=255),16777216*(x=255&k(x,0,255))+((d=255&k(d,0,255))<<16)+((s=255&k(s,0,255))<<8)+(255&k(t,0,255))}$.exports=A,$.exports.to=A,$.exports.from=function(l,T){var x=(l=+l)>>>24,d=(16711680&l)>>>16,s=(65280&l)>>>8,t=255&l;return T===!1?[x,d,s,t]:[x/255,d/255,s/255,t/255]}},76857:function($){$.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function($,R,e){var k=e(36652),A=e(53435),l=e(90660);$.exports=function(T,x){x!=="float"&&x||(x="array"),x==="uint"&&(x="uint8"),x==="uint_clamped"&&(x="uint8_clamped");var d=new(l(x))(4),s=x!=="uint8"&&x!=="uint8_clamped";return T.length&&typeof T!="string"||((T=k(T))[0]/=255,T[1]/=255,T[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}(T)?(d[0]=T[0],d[1]=T[1],d[2]=T[2],d[3]=T[3]!=null?T[3]:255,s&&(d[0]/=255,d[1]/=255,d[2]/=255,d[3]/=255),d):(s?(d[0]=T[0],d[1]=T[1],d[2]=T[2],d[3]=T[3]!=null?T[3]:1):(d[0]=A(Math.floor(255*T[0]),0,255),d[1]=A(Math.floor(255*T[1]),0,255),d[2]=A(Math.floor(255*T[2]),0,255),d[3]=T[3]==null?255:A(Math.floor(255*T[3]),0,255)),d)}},90736:function($,R,e){var k=e(76857),A=e(10973),l=e(46775);$.exports=function(x){var d,s,t=[],o=1;if(typeof x=="string")if(k[x])t=k[x].slice(),s="rgb";else if(x==="transparent")o=0,s="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(x)){var r=(i=x.slice(1)).length;o=1,r<=4?(t=[parseInt(i[0]+i[0],16),parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16)],r===4&&(o=parseInt(i[3]+i[3],16)/255)):(t=[parseInt(i[0]+i[1],16),parseInt(i[2]+i[3],16),parseInt(i[4]+i[5],16)],r===8&&(o=parseInt(i[6]+i[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),s="rgb"}else if(d=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(x)){var n=d[1],a=n==="rgb",i=n.replace(/a$/,"");s=i,r=i==="cmyk"?4:i==="gray"?1:3,t=d[2].trim().split(/\s*,\s*/).map(function(h,f){if(/%$/.test(h))return f===r?parseFloat(h)/100:i==="rgb"?255*parseFloat(h)/100:parseFloat(h);if(i[f]==="h"){if(/deg$/.test(h))return parseFloat(h);if(T[h]!==void 0)return T[h]}return parseFloat(h)}),n===i&&t.push(1),o=a||t[r]===void 0?1:t[r],t=t.slice(0,r)}else x.length>10&&/[0-9](?:\s|\/)/.test(x)&&(t=x.match(/([0-9]+)/g).map(function(h){return parseFloat(h)}),s=x.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(x))if(A(x)){var c=l(x.r,x.red,x.R,null);c!==null?(s="rgb",t=[c,l(x.g,x.green,x.G),l(x.b,x.blue,x.B)]):(s="hsl",t=[l(x.h,x.hue,x.H),l(x.s,x.saturation,x.S),l(x.l,x.lightness,x.L,x.b,x.brightness)]),o=l(x.a,x.alpha,x.opacity,1),x.opacity!=null&&(o/=100)}else(Array.isArray(x)||e.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(x))&&(t=[x[0],x[1],x[2]],s="rgb",o=x.length===4?x[3]:1);else s="rgb",t=[x>>>16,(65280&x)>>>8,255&x];return{space:s,values:t,alpha:o}};var T={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},36652:function($,R,e){var k=e(90736),A=e(80009),l=e(53435);$.exports=function(T){var x,d=k(T);return d.space?((x=Array(3))[0]=l(d.values[0],0,255),x[1]=l(d.values[1],0,255),x[2]=l(d.values[2],0,255),d.space[0]==="h"&&(x=A.rgb(x)),x.push(l(d.alpha,0,1)),x):[]}},80009:function($,R,e){var k=e(6866);$.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(A){var l,T,x,d,s,t=A[0]/360,o=A[1]/100,r=A[2]/100;if(o===0)return[s=255*r,s,s];l=2*r-(T=r<.5?r*(1+o):r+o-r*o),d=[0,0,0];for(var n=0;n<3;n++)(x=t+.3333333333333333*-(n-1))<0?x++:x>1&&x--,s=6*x<1?l+6*(T-l)*x:2*x<1?T:3*x<2?l+(T-l)*(.6666666666666666-x)*6:l,d[n]=255*s;return d}},k.hsl=function(A){var l,T,x=A[0]/255,d=A[1]/255,s=A[2]/255,t=Math.min(x,d,s),o=Math.max(x,d,s),r=o-t;return o===t?l=0:x===o?l=(d-s)/r:d===o?l=2+(s-x)/r:s===o&&(l=4+(x-d)/r),(l=Math.min(60*l,360))<0&&(l+=360),T=(t+o)/2,[l,100*(o===t?0:T<=.5?r/(o+t):r/(2-o-t)),100*T]}},6866:function($){$.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function($){$.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function($,R,e){$.exports={parse:e(41004),stringify:e(53313)}},63625:function($,R,e){var k=e(40402);$.exports={isSize:function(A){return/^[\d\.]/.test(A)||A.indexOf("/")!==-1||k.indexOf(A)!==-1}}},41004:function($,R,e){var k=e(90448),A=e(38732),l=e(41901),T=e(15659),x=e(96209),d=e(83794),s=e(99011),t=e(63625).isSize;$.exports=r;var o=r.cache={};function r(a){if(typeof a!="string")throw new Error("Font argument must be a string.");if(o[a])return o[a];if(a==="")throw new Error("Cannot parse an empty string.");if(l.indexOf(a)!==-1)return o[a]={system:a};for(var i,c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},h=s(a,/\s+/);i=h.shift();){if(A.indexOf(i)!==-1)return["style","variant","weight","stretch"].forEach(function(b){c[b]=i}),o[a]=c;if(x.indexOf(i)===-1)if(i!=="normal"&&i!=="small-caps")if(d.indexOf(i)===-1){if(T.indexOf(i)===-1){if(t(i)){var f=s(i,"/");if(c.size=f[0],f[1]!=null?c.lineHeight=n(f[1]):h[0]==="/"&&(h.shift(),c.lineHeight=n(h.shift())),!h.length)throw new Error("Missing required font-family.");return c.family=s(h.join(" "),/\s*,\s*/).map(k),o[a]=c}throw new Error("Unknown or unsupported font token: "+i)}c.weight=i}else c.stretch=i;else c.variant=i;else c.style=i}throw new Error("Missing required font-size.")}function n(a){var i=parseFloat(a);return i.toString()===a?i:a}},53313:function($,R,e){var k=e(71299),A=e(63625).isSize,l=a(e(38732)),T=a(e(41901)),x=a(e(15659)),d=a(e(96209)),s=a(e(83794)),t={normal:1,"small-caps":1},o={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},r="serif";function n(i,c){if(i&&!c[i]&&!l[i])throw Error("Unknown keyword `"+i+"`");return i}function a(i){for(var c={},h=0;h<i.length;h++)c[i[h]]=1;return c}$.exports=function(i){if((i=k(i,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return i.system&&n(i.system,T),i.system;if(n(i.style,d),n(i.variant,t),n(i.weight,x),n(i.stretch,s),i.size==null&&(i.size="1rem"),typeof i.size=="number"&&(i.size+="px"),!A)throw Error("Bad size value `"+i.size+"`");i.family||(i.family=r),Array.isArray(i.family)&&(i.family.length||(i.family=[r]),i.family=i.family.map(function(h){return o[h]?h:'"'+h+'"'}).join(", "));var c=[];return c.push(i.style),i.variant!==i.style&&c.push(i.variant),i.weight!==i.variant&&i.weight!==i.style&&c.push(i.weight),i.stretch!==i.weight&&i.stretch!==i.variant&&i.stretch!==i.style&&c.push(i.stretch),c.push(i.size+(i.lineHeight==null||i.lineHeight==="normal"||i.lineHeight+""=="1"?"":"/"+i.lineHeight)),c.push(i.family),c.filter(Boolean).join(" ")}},55174:function($,R,e){var k,A=e(24582),l=e(10424),T=e(82527),x=e(19012),d=e(21780),s=e(16906),t=Function.prototype.bind,o=Object.defineProperty,r=Object.prototype.hasOwnProperty;k=function(n,a,i){var c,h=l(a)&&T(a.value);return delete(c=x(a)).writable,delete c.value,c.get=function(){return!i.overwriteDefinition&&r.call(this,n)?h:(a.value=t.call(h,i.resolveContext?i.resolveContext(this):this),o(this,n,a),this[n])},c},$.exports=function(n){var a=d(arguments[1]);return A(a.resolveContext)&&T(a.resolveContext),s(n,function(i,c){return k(c,i,a)})}},62072:function($,R,e){var k=e(24582),A=e(84985),l=e(95879),T=e(21780),x=e(66741),d=$.exports=function(s,t){var o,r,n,a,i;return arguments.length<2||typeof s!="string"?(a=t,t=s,s=null):a=arguments[2],k(s)?(o=x.call(s,"c"),r=x.call(s,"e"),n=x.call(s,"w")):(o=n=!0,r=!1),i={value:t,configurable:o,enumerable:r,writable:n},a?l(T(a),i):i};d.gs=function(s,t,o){var r,n,a,i;return typeof s!="string"?(a=o,o=t,t=s,s=null):a=arguments[3],k(t)?A(t)?k(o)?A(o)||(a=o,o=void 0):o=void 0:(a=t,t=o=void 0):t=void 0,k(s)?(r=x.call(s,"c"),n=x.call(s,"e")):(r=!0,n=!1),i={get:t,set:o,configurable:r,enumerable:n},a?l(T(a),i):i}},33064:function($,R,e){function k(n,a){return n<a?-1:n>a?1:n>=a?0:NaN}e.d(R,{j2:function(){return k},Fp:function(){return T},J6:function(){return d},TS:function(){return s},VV:function(){return t},w6:function(){return o},Sm:function(){return r}}),(A=k).length===1&&(l=A,A=function(n,a){return k(l(n),a)});var A,l;function T(n,a){var i,c,h=n.length,f=-1;if(a==null){for(;++f<h;)if((i=n[f])!=null&&i>=i)for(c=i;++f<h;)(i=n[f])!=null&&i>c&&(c=i)}else for(;++f<h;)if((i=a(n[f],f,n))!=null&&i>=i)for(c=i;++f<h;)(i=a(n[f],f,n))!=null&&i>c&&(c=i);return c}function x(n){return n===null?NaN:+n}function d(n,a){var i,c=n.length,h=c,f=-1,b=0;if(a==null)for(;++f<c;)isNaN(i=x(n[f]))?--h:b+=i;else for(;++f<c;)isNaN(i=x(a(n[f],f,n)))?--h:b+=i;if(h)return b/h}function s(n){for(var a,i,c,h=n.length,f=-1,b=0;++f<h;)b+=n[f].length;for(i=new Array(b);--h>=0;)for(a=(c=n[h]).length;--a>=0;)i[--b]=c[a];return i}function t(n,a){var i,c,h=n.length,f=-1;if(a==null){for(;++f<h;)if((i=n[f])!=null&&i>=i)for(c=i;++f<h;)(i=n[f])!=null&&c>i&&(c=i)}else for(;++f<h;)if((i=a(n[f],f,n))!=null&&i>=i)for(c=i;++f<h;)(i=a(n[f],f,n))!=null&&c>i&&(c=i);return c}function o(n,a,i){n=+n,a=+a,i=(h=arguments.length)<2?(a=n,n=0,1):h<3?1:+i;for(var c=-1,h=0|Math.max(0,Math.ceil((a-n)/i)),f=new Array(h);++c<h;)f[c]=n+c*i;return f}function r(n,a){var i,c=n.length,h=-1,f=0;if(a==null)for(;++h<c;)(i=+n[h])&&(f+=i);else for(;++h<c;)(i=+a(n[h],h,n))&&(f+=i);return f}},15140:function($,R,e){e.d(R,{UI:function(){return T},b1:function(){return x}});var k="$";function A(){}function l(a,i){var c=new A;if(a instanceof A)a.each(function(g,y){c.set(y,g)});else if(Array.isArray(a)){var h,f=-1,b=a.length;if(i==null)for(;++f<b;)c.set(f,a[f]);else for(;++f<b;)c.set(i(h=a[f],f,a),h)}else if(a)for(var v in a)c.set(v,a[v]);return c}A.prototype=l.prototype={constructor:A,has:function(a){return k+a in this},get:function(a){return this[k+a]},set:function(a,i){return this[k+a]=i,this},remove:function(a){var i=k+a;return i in this&&delete this[i]},clear:function(){for(var a in this)a[0]===k&&delete this[a]},keys:function(){var a=[];for(var i in this)i[0]===k&&a.push(i.slice(1));return a},values:function(){var a=[];for(var i in this)i[0]===k&&a.push(this[i]);return a},entries:function(){var a=[];for(var i in this)i[0]===k&&a.push({key:i.slice(1),value:this[i]});return a},size:function(){var a=0;for(var i in this)i[0]===k&&++a;return a},empty:function(){for(var a in this)if(a[0]===k)return!1;return!0},each:function(a){for(var i in this)i[0]===k&&a(this[i],i.slice(1),this)}};var T=l;function x(){var a,i,c,h=[],f=[];function b(g,y,p,m){if(y>=h.length)return a!=null&&g.sort(a),i!=null?i(g):g;for(var w,u,S,_=-1,E=g.length,L=h[y++],C=T(),P=p();++_<E;)(S=C.get(w=L(u=g[_])+""))?S.push(u):C.set(w,[u]);return C.each(function(I,U){m(P,U,b(I,y,p,m))}),P}function v(g,y){if(++y>h.length)return g;var p,m=f[y-1];return i!=null&&y>=h.length?p=g.entries():(p=[],g.each(function(w,u){p.push({key:u,values:v(w,y)})})),m!=null?p.sort(function(w,u){return m(w.key,u.key)}):p}return c={object:function(g){return b(g,0,d,s)},map:function(g){return b(g,0,t,o)},entries:function(g){return v(b(g,0,t,o),0)},key:function(g){return h.push(g),c},sortKeys:function(g){return f[h.length-1]=g,c},sortValues:function(g){return a=g,c},rollup:function(g){return i=g,c}}}function d(){return{}}function s(a,i,c){a[i]=c}function t(){return T()}function o(a,i,c){a.set(i,c)}function r(){}var n=T.prototype;r.prototype={constructor:r,has:n.has,add:function(a){return this[k+(a+="")]=a,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each}},49887:function($,R,e){function k(ge,he){var ve;function Oe(){var xe,ke,Me=ve.length,Te=0,Q=0;for(xe=0;xe<Me;++xe)Te+=(ke=ve[xe]).x,Q+=ke.y;for(Te=Te/Me-ge,Q=Q/Me-he,xe=0;xe<Me;++xe)(ke=ve[xe]).x-=Te,ke.y-=Q}return ge==null&&(ge=0),he==null&&(he=0),Oe.initialize=function(xe){ve=xe},Oe.x=function(xe){return arguments.length?(ge=+xe,Oe):ge},Oe.y=function(xe){return arguments.length?(he=+xe,Oe):he},Oe}function A(ge){return function(){return ge}}function l(){return 1e-6*(Math.random()-.5)}function T(ge,he,ve,Oe){if(isNaN(he)||isNaN(ve))return ge;var xe,ke,Me,Te,Q,oe,ce,me,Ae,Ie=ge._root,Ce={data:Oe},Re=ge._x0,le=ge._y0,de=ge._x1,_e=ge._y1;if(!Ie)return ge._root=Ce,ge;for(;Ie.length;)if((oe=he>=(ke=(Re+de)/2))?Re=ke:de=ke,(ce=ve>=(Me=(le+_e)/2))?le=Me:_e=Me,xe=Ie,!(Ie=Ie[me=ce<<1|oe]))return xe[me]=Ce,ge;if(Te=+ge._x.call(null,Ie.data),Q=+ge._y.call(null,Ie.data),he===Te&&ve===Q)return Ce.next=Ie,xe?xe[me]=Ce:ge._root=Ce,ge;do xe=xe?xe[me]=new Array(4):ge._root=new Array(4),(oe=he>=(ke=(Re+de)/2))?Re=ke:de=ke,(ce=ve>=(Me=(le+_e)/2))?le=Me:_e=Me;while((me=ce<<1|oe)==(Ae=(Q>=Me)<<1|Te>=ke));return xe[Ae]=Ie,xe[me]=Ce,ge}function x(ge,he,ve,Oe,xe){this.node=ge,this.x0=he,this.y0=ve,this.x1=Oe,this.y1=xe}function d(ge){return ge[0]}function s(ge){return ge[1]}function t(ge,he,ve){var Oe=new o(he??d,ve??s,NaN,NaN,NaN,NaN);return ge==null?Oe:Oe.addAll(ge)}function o(ge,he,ve,Oe,xe,ke){this._x=ge,this._y=he,this._x0=ve,this._y0=Oe,this._x1=xe,this._y1=ke,this._root=void 0}function r(ge){for(var he={data:ge.data},ve=he;ge=ge.next;)ve=ve.next={data:ge.data};return he}e.r(R),e.d(R,{forceCenter:function(){return k},forceCollide:function(){return c},forceLink:function(){return v},forceManyBody:function(){return ie},forceRadial:function(){return se},forceSimulation:function(){return re},forceX:function(){return fe},forceY:function(){return ye}});var n=t.prototype=o.prototype;function a(ge){return ge.x+ge.vx}function i(ge){return ge.y+ge.vy}function c(ge){var he,ve,Oe=1,xe=1;function ke(){for(var Q,oe,ce,me,Ae,Ie,Ce,Re=he.length,le=0;le<xe;++le)for(oe=t(he,a,i).visitAfter(Me),Q=0;Q<Re;++Q)ce=he[Q],Ie=ve[ce.index],Ce=Ie*Ie,me=ce.x+ce.vx,Ae=ce.y+ce.vy,oe.visit(de);function de(_e,Fe,Ve,He,nt){var tt=_e.data,ot=_e.r,dt=Ie+ot;if(!tt)return Fe>me+dt||He<me-dt||Ve>Ae+dt||nt<Ae-dt;if(tt.index>ce.index){var kt=me-tt.x-tt.vx,mt=Ae-tt.y-tt.vy,wt=kt*kt+mt*mt;wt<dt*dt&&(kt===0&&(wt+=(kt=l())*kt),mt===0&&(wt+=(mt=l())*mt),wt=(dt-(wt=Math.sqrt(wt)))/wt*Oe,ce.vx+=(kt*=wt)*(dt=(ot*=ot)/(Ce+ot)),ce.vy+=(mt*=wt)*dt,tt.vx-=kt*(dt=1-dt),tt.vy-=mt*dt)}}}function Me(Q){if(Q.data)return Q.r=ve[Q.data.index];for(var oe=Q.r=0;oe<4;++oe)Q[oe]&&Q[oe].r>Q.r&&(Q.r=Q[oe].r)}function Te(){if(he){var Q,oe,ce=he.length;for(ve=new Array(ce),Q=0;Q<ce;++Q)oe=he[Q],ve[oe.index]=+ge(oe,Q,he)}}return typeof ge!="function"&&(ge=A(ge==null?1:+ge)),ke.initialize=function(Q){he=Q,Te()},ke.iterations=function(Q){return arguments.length?(xe=+Q,ke):xe},ke.strength=function(Q){return arguments.length?(Oe=+Q,ke):Oe},ke.radius=function(Q){return arguments.length?(ge=typeof Q=="function"?Q:A(+Q),Te(),ke):ge},ke}n.copy=function(){var ge,he,ve=new o(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Oe=this._root;if(!Oe)return ve;if(!Oe.length)return ve._root=r(Oe),ve;for(ge=[{source:Oe,target:ve._root=new Array(4)}];Oe=ge.pop();)for(var xe=0;xe<4;++xe)(he=Oe.source[xe])&&(he.length?ge.push({source:he,target:Oe.target[xe]=new Array(4)}):Oe.target[xe]=r(he));return ve},n.add=function(ge){var he=+this._x.call(null,ge),ve=+this._y.call(null,ge);return T(this.cover(he,ve),he,ve,ge)},n.addAll=function(ge){var he,ve,Oe,xe,ke=ge.length,Me=new Array(ke),Te=new Array(ke),Q=1/0,oe=1/0,ce=-1/0,me=-1/0;for(ve=0;ve<ke;++ve)isNaN(Oe=+this._x.call(null,he=ge[ve]))||isNaN(xe=+this._y.call(null,he))||(Me[ve]=Oe,Te[ve]=xe,Oe<Q&&(Q=Oe),Oe>ce&&(ce=Oe),xe<oe&&(oe=xe),xe>me&&(me=xe));if(Q>ce||oe>me)return this;for(this.cover(Q,oe).cover(ce,me),ve=0;ve<ke;++ve)T(this,Me[ve],Te[ve],ge[ve]);return this},n.cover=function(ge,he){if(isNaN(ge=+ge)||isNaN(he=+he))return this;var ve=this._x0,Oe=this._y0,xe=this._x1,ke=this._y1;if(isNaN(ve))xe=(ve=Math.floor(ge))+1,ke=(Oe=Math.floor(he))+1;else{for(var Me,Te,Q=xe-ve,oe=this._root;ve>ge||ge>=xe||Oe>he||he>=ke;)switch(Te=(he<Oe)<<1|ge<ve,(Me=new Array(4))[Te]=oe,oe=Me,Q*=2,Te){case 0:xe=ve+Q,ke=Oe+Q;break;case 1:ve=xe-Q,ke=Oe+Q;break;case 2:xe=ve+Q,Oe=ke-Q;break;case 3:ve=xe-Q,Oe=ke-Q}this._root&&this._root.length&&(this._root=oe)}return this._x0=ve,this._y0=Oe,this._x1=xe,this._y1=ke,this},n.data=function(){var ge=[];return this.visit(function(he){if(!he.length)do ge.push(he.data);while(he=he.next)}),ge},n.extent=function(ge){return arguments.length?this.cover(+ge[0][0],+ge[0][1]).cover(+ge[1][0],+ge[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(ge,he,ve){var Oe,xe,ke,Me,Te,Q,oe,ce=this._x0,me=this._y0,Ae=this._x1,Ie=this._y1,Ce=[],Re=this._root;for(Re&&Ce.push(new x(Re,ce,me,Ae,Ie)),ve==null?ve=1/0:(ce=ge-ve,me=he-ve,Ae=ge+ve,Ie=he+ve,ve*=ve);Q=Ce.pop();)if(!(!(Re=Q.node)||(xe=Q.x0)>Ae||(ke=Q.y0)>Ie||(Me=Q.x1)<ce||(Te=Q.y1)<me))if(Re.length){var le=(xe+Me)/2,de=(ke+Te)/2;Ce.push(new x(Re[3],le,de,Me,Te),new x(Re[2],xe,de,le,Te),new x(Re[1],le,ke,Me,de),new x(Re[0],xe,ke,le,de)),(oe=(he>=de)<<1|ge>=le)&&(Q=Ce[Ce.length-1],Ce[Ce.length-1]=Ce[Ce.length-1-oe],Ce[Ce.length-1-oe]=Q)}else{var _e=ge-+this._x.call(null,Re.data),Fe=he-+this._y.call(null,Re.data),Ve=_e*_e+Fe*Fe;if(Ve<ve){var He=Math.sqrt(ve=Ve);ce=ge-He,me=he-He,Ae=ge+He,Ie=he+He,Oe=Re.data}}return Oe},n.remove=function(ge){if(isNaN(ke=+this._x.call(null,ge))||isNaN(Me=+this._y.call(null,ge)))return this;var he,ve,Oe,xe,ke,Me,Te,Q,oe,ce,me,Ae,Ie=this._root,Ce=this._x0,Re=this._y0,le=this._x1,de=this._y1;if(!Ie)return this;if(Ie.length)for(;;){if((oe=ke>=(Te=(Ce+le)/2))?Ce=Te:le=Te,(ce=Me>=(Q=(Re+de)/2))?Re=Q:de=Q,he=Ie,!(Ie=Ie[me=ce<<1|oe]))return this;if(!Ie.length)break;(he[me+1&3]||he[me+2&3]||he[me+3&3])&&(ve=he,Ae=me)}for(;Ie.data!==ge;)if(Oe=Ie,!(Ie=Ie.next))return this;return(xe=Ie.next)&&delete Ie.next,Oe?(xe?Oe.next=xe:delete Oe.next,this):he?(xe?he[me]=xe:delete he[me],(Ie=he[0]||he[1]||he[2]||he[3])&&Ie===(he[3]||he[2]||he[1]||he[0])&&!Ie.length&&(ve?ve[Ae]=Ie:this._root=Ie),this):(this._root=xe,this)},n.removeAll=function(ge){for(var he=0,ve=ge.length;he<ve;++he)this.remove(ge[he]);return this},n.root=function(){return this._root},n.size=function(){var ge=0;return this.visit(function(he){if(!he.length)do++ge;while(he=he.next)}),ge},n.visit=function(ge){var he,ve,Oe,xe,ke,Me,Te=[],Q=this._root;for(Q&&Te.push(new x(Q,this._x0,this._y0,this._x1,this._y1));he=Te.pop();)if(!ge(Q=he.node,Oe=he.x0,xe=he.y0,ke=he.x1,Me=he.y1)&&Q.length){var oe=(Oe+ke)/2,ce=(xe+Me)/2;(ve=Q[3])&&Te.push(new x(ve,oe,ce,ke,Me)),(ve=Q[2])&&Te.push(new x(ve,Oe,ce,oe,Me)),(ve=Q[1])&&Te.push(new x(ve,oe,xe,ke,ce)),(ve=Q[0])&&Te.push(new x(ve,Oe,xe,oe,ce))}return this},n.visitAfter=function(ge){var he,ve=[],Oe=[];for(this._root&&ve.push(new x(this._root,this._x0,this._y0,this._x1,this._y1));he=ve.pop();){var xe=he.node;if(xe.length){var ke,Me=he.x0,Te=he.y0,Q=he.x1,oe=he.y1,ce=(Me+Q)/2,me=(Te+oe)/2;(ke=xe[0])&&ve.push(new x(ke,Me,Te,ce,me)),(ke=xe[1])&&ve.push(new x(ke,ce,Te,Q,me)),(ke=xe[2])&&ve.push(new x(ke,Me,me,ce,oe)),(ke=xe[3])&&ve.push(new x(ke,ce,me,Q,oe))}Oe.push(he)}for(;he=Oe.pop();)ge(he.node,he.x0,he.y0,he.x1,he.y1);return this},n.x=function(ge){return arguments.length?(this._x=ge,this):this._x},n.y=function(ge){return arguments.length?(this._y=ge,this):this._y};var h=e(15140);function f(ge){return ge.index}function b(ge,he){var ve=ge.get(he);if(!ve)throw new Error("missing: "+he);return ve}function v(ge){var he,ve,Oe,xe,ke,Me=f,Te=function(Ce){return 1/Math.min(xe[Ce.source.index],xe[Ce.target.index])},Q=A(30),oe=1;function ce(Ce){for(var Re=0,le=ge.length;Re<oe;++Re)for(var de,_e,Fe,Ve,He,nt,tt,ot=0;ot<le;++ot)_e=(de=ge[ot]).source,Ve=(Fe=de.target).x+Fe.vx-_e.x-_e.vx||l(),He=Fe.y+Fe.vy-_e.y-_e.vy||l(),Ve*=nt=((nt=Math.sqrt(Ve*Ve+He*He))-ve[ot])/nt*Ce*he[ot],He*=nt,Fe.vx-=Ve*(tt=ke[ot]),Fe.vy-=He*tt,_e.vx+=Ve*(tt=1-tt),_e.vy+=He*tt}function me(){if(Oe){var Ce,Re,le=Oe.length,de=ge.length,_e=(0,h.UI)(Oe,Me);for(Ce=0,xe=new Array(le);Ce<de;++Ce)(Re=ge[Ce]).index=Ce,typeof Re.source!="object"&&(Re.source=b(_e,Re.source)),typeof Re.target!="object"&&(Re.target=b(_e,Re.target)),xe[Re.source.index]=(xe[Re.source.index]||0)+1,xe[Re.target.index]=(xe[Re.target.index]||0)+1;for(Ce=0,ke=new Array(de);Ce<de;++Ce)Re=ge[Ce],ke[Ce]=xe[Re.source.index]/(xe[Re.source.index]+xe[Re.target.index]);he=new Array(de),Ae(),ve=new Array(de),Ie()}}function Ae(){if(Oe)for(var Ce=0,Re=ge.length;Ce<Re;++Ce)he[Ce]=+Te(ge[Ce],Ce,ge)}function Ie(){if(Oe)for(var Ce=0,Re=ge.length;Ce<Re;++Ce)ve[Ce]=+Q(ge[Ce],Ce,ge)}return ge==null&&(ge=[]),ce.initialize=function(Ce){Oe=Ce,me()},ce.links=function(Ce){return arguments.length?(ge=Ce,me(),ce):ge},ce.id=function(Ce){return arguments.length?(Me=Ce,ce):Me},ce.iterations=function(Ce){return arguments.length?(oe=+Ce,ce):oe},ce.strength=function(Ce){return arguments.length?(Te=typeof Ce=="function"?Ce:A(+Ce),Ae(),ce):Te},ce.distance=function(Ce){return arguments.length?(Q=typeof Ce=="function"?Ce:A(+Ce),Ie(),ce):Q},ce}var g={value:function(){}};function y(){for(var ge,he=0,ve=arguments.length,Oe={};he<ve;++he){if(!(ge=arguments[he]+"")||ge in Oe||/[\s.]/.test(ge))throw new Error("illegal type: "+ge);Oe[ge]=[]}return new p(Oe)}function p(ge){this._=ge}function m(ge,he){return ge.trim().split(/^|\s+/).map(function(ve){var Oe="",xe=ve.indexOf(".");if(xe>=0&&(Oe=ve.slice(xe+1),ve=ve.slice(0,xe)),ve&&!he.hasOwnProperty(ve))throw new Error("unknown type: "+ve);return{type:ve,name:Oe}})}function w(ge,he){for(var ve,Oe=0,xe=ge.length;Oe<xe;++Oe)if((ve=ge[Oe]).name===he)return ve.value}function u(ge,he,ve){for(var Oe=0,xe=ge.length;Oe<xe;++Oe)if(ge[Oe].name===he){ge[Oe]=g,ge=ge.slice(0,Oe).concat(ge.slice(Oe+1));break}return ve!=null&&ge.push({name:he,value:ve}),ge}p.prototype=y.prototype={constructor:p,on:function(ge,he){var ve,Oe=this._,xe=m(ge+"",Oe),ke=-1,Me=xe.length;if(!(arguments.length<2)){if(he!=null&&typeof he!="function")throw new Error("invalid callback: "+he);for(;++ke<Me;)if(ve=(ge=xe[ke]).type)Oe[ve]=u(Oe[ve],ge.name,he);else if(he==null)for(ve in Oe)Oe[ve]=u(Oe[ve],ge.name,null);return this}for(;++ke<Me;)if((ve=(ge=xe[ke]).type)&&(ve=w(Oe[ve],ge.name)))return ve},copy:function(){var ge={},he=this._;for(var ve in he)ge[ve]=he[ve].slice();return new p(ge)},call:function(ge,he){if((ve=arguments.length-2)>0)for(var ve,Oe,xe=new Array(ve),ke=0;ke<ve;++ke)xe[ke]=arguments[ke+2];if(!this._.hasOwnProperty(ge))throw new Error("unknown type: "+ge);for(ke=0,ve=(Oe=this._[ge]).length;ke<ve;++ke)Oe[ke].value.apply(he,xe)},apply:function(ge,he,ve){if(!this._.hasOwnProperty(ge))throw new Error("unknown type: "+ge);for(var Oe=this._[ge],xe=0,ke=Oe.length;xe<ke;++xe)Oe[xe].value.apply(he,ve)}};var S,_,E=y,L=0,C=0,P=0,I=0,U=0,z=0,H=typeof performance=="object"&&performance.now?performance:Date,F=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(ge){setTimeout(ge,17)};function N(){return U||(F(B),U=H.now()+z)}function B(){U=0}function j(){this._call=this._time=this._next=null}function K(ge,he,ve){var Oe=new j;return Oe.restart(ge,he,ve),Oe}function G(){U=(I=H.now())+z,L=C=0;try{(function(){N(),++L;for(var ge,he=S;he;)(ge=U-he._time)>=0&&he._call.call(null,ge),he=he._next;--L})()}finally{L=0,function(){for(var ge,he,ve=S,Oe=1/0;ve;)ve._call?(Oe>ve._time&&(Oe=ve._time),ge=ve,ve=ve._next):(he=ve._next,ve._next=null,ve=ge?ge._next=he:S=he);_=ge,W(Oe)}(),U=0}}function V(){var ge=H.now(),he=ge-I;he>1e3&&(z-=he,I=ge)}function W(ge){L||(C&&(C=clearTimeout(C)),ge-U>24?(ge<1/0&&(C=setTimeout(G,ge-H.now()-z)),P&&(P=clearInterval(P))):(P||(I=H.now(),P=setInterval(V,1e3)),L=1,F(G)))}function J(ge){return ge.x}function X(ge){return ge.y}j.prototype=K.prototype={constructor:j,restart:function(ge,he,ve){if(typeof ge!="function")throw new TypeError("callback is not a function");ve=(ve==null?N():+ve)+(he==null?0:+he),this._next||_===this||(_?_._next=this:S=this,_=this),this._call=ge,this._time=ve,W()},stop:function(){this._call&&(this._call=null,this._time=1/0,W())}};var ee=Math.PI*(3-Math.sqrt(5));function re(ge){var he,ve=1,Oe=.001,xe=1-Math.pow(Oe,1/300),ke=0,Me=.6,Te=(0,h.UI)(),Q=K(ce),oe=E("tick","end");function ce(){me(),oe.call("tick",he),ve<Oe&&(Q.stop(),oe.call("end",he))}function me(Ce){var Re,le,de=ge.length;Ce===void 0&&(Ce=1);for(var _e=0;_e<Ce;++_e)for(ve+=(ke-ve)*xe,Te.each(function(Fe){Fe(ve)}),Re=0;Re<de;++Re)(le=ge[Re]).fx==null?le.x+=le.vx*=Me:(le.x=le.fx,le.vx=0),le.fy==null?le.y+=le.vy*=Me:(le.y=le.fy,le.vy=0);return he}function Ae(){for(var Ce,Re=0,le=ge.length;Re<le;++Re){if((Ce=ge[Re]).index=Re,Ce.fx!=null&&(Ce.x=Ce.fx),Ce.fy!=null&&(Ce.y=Ce.fy),isNaN(Ce.x)||isNaN(Ce.y)){var de=10*Math.sqrt(Re),_e=Re*ee;Ce.x=de*Math.cos(_e),Ce.y=de*Math.sin(_e)}(isNaN(Ce.vx)||isNaN(Ce.vy))&&(Ce.vx=Ce.vy=0)}}function Ie(Ce){return Ce.initialize&&Ce.initialize(ge),Ce}return ge==null&&(ge=[]),Ae(),he={tick:me,restart:function(){return Q.restart(ce),he},stop:function(){return Q.stop(),he},nodes:function(Ce){return arguments.length?(ge=Ce,Ae(),Te.each(Ie),he):ge},alpha:function(Ce){return arguments.length?(ve=+Ce,he):ve},alphaMin:function(Ce){return arguments.length?(Oe=+Ce,he):Oe},alphaDecay:function(Ce){return arguments.length?(xe=+Ce,he):+xe},alphaTarget:function(Ce){return arguments.length?(ke=+Ce,he):ke},velocityDecay:function(Ce){return arguments.length?(Me=1-Ce,he):1-Me},force:function(Ce,Re){return arguments.length>1?(Re==null?Te.remove(Ce):Te.set(Ce,Ie(Re)),he):Te.get(Ce)},find:function(Ce,Re,le){var de,_e,Fe,Ve,He,nt=0,tt=ge.length;for(le==null?le=1/0:le*=le,nt=0;nt<tt;++nt)(Fe=(de=Ce-(Ve=ge[nt]).x)*de+(_e=Re-Ve.y)*_e)<le&&(He=Ve,le=Fe);return He},on:function(Ce,Re){return arguments.length>1?(oe.on(Ce,Re),he):oe.on(Ce)}}}function ie(){var ge,he,ve,Oe,xe=A(-30),ke=1,Me=1/0,Te=.81;function Q(Ae){var Ie,Ce=ge.length,Re=t(ge,J,X).visitAfter(ce);for(ve=Ae,Ie=0;Ie<Ce;++Ie)he=ge[Ie],Re.visit(me)}function oe(){if(ge){var Ae,Ie,Ce=ge.length;for(Oe=new Array(Ce),Ae=0;Ae<Ce;++Ae)Ie=ge[Ae],Oe[Ie.index]=+xe(Ie,Ae,ge)}}function ce(Ae){var Ie,Ce,Re,le,de,_e=0,Fe=0;if(Ae.length){for(Re=le=de=0;de<4;++de)(Ie=Ae[de])&&(Ce=Math.abs(Ie.value))&&(_e+=Ie.value,Fe+=Ce,Re+=Ce*Ie.x,le+=Ce*Ie.y);Ae.x=Re/Fe,Ae.y=le/Fe}else{(Ie=Ae).x=Ie.data.x,Ie.y=Ie.data.y;do _e+=Oe[Ie.data.index];while(Ie=Ie.next)}Ae.value=_e}function me(Ae,Ie,Ce,Re){if(!Ae.value)return!0;var le=Ae.x-he.x,de=Ae.y-he.y,_e=Re-Ie,Fe=le*le+de*de;if(_e*_e/Te<Fe)return Fe<Me&&(le===0&&(Fe+=(le=l())*le),de===0&&(Fe+=(de=l())*de),Fe<ke&&(Fe=Math.sqrt(ke*Fe)),he.vx+=le*Ae.value*ve/Fe,he.vy+=de*Ae.value*ve/Fe),!0;if(!(Ae.length||Fe>=Me)){(Ae.data!==he||Ae.next)&&(le===0&&(Fe+=(le=l())*le),de===0&&(Fe+=(de=l())*de),Fe<ke&&(Fe=Math.sqrt(ke*Fe)));do Ae.data!==he&&(_e=Oe[Ae.data.index]*ve/Fe,he.vx+=le*_e,he.vy+=de*_e);while(Ae=Ae.next)}}return Q.initialize=function(Ae){ge=Ae,oe()},Q.strength=function(Ae){return arguments.length?(xe=typeof Ae=="function"?Ae:A(+Ae),oe(),Q):xe},Q.distanceMin=function(Ae){return arguments.length?(ke=Ae*Ae,Q):Math.sqrt(ke)},Q.distanceMax=function(Ae){return arguments.length?(Me=Ae*Ae,Q):Math.sqrt(Me)},Q.theta=function(Ae){return arguments.length?(Te=Ae*Ae,Q):Math.sqrt(Te)},Q}function se(ge,he,ve){var Oe,xe,ke,Me=A(.1);function Te(oe){for(var ce=0,me=Oe.length;ce<me;++ce){var Ae=Oe[ce],Ie=Ae.x-he||1e-6,Ce=Ae.y-ve||1e-6,Re=Math.sqrt(Ie*Ie+Ce*Ce),le=(ke[ce]-Re)*xe[ce]*oe/Re;Ae.vx+=Ie*le,Ae.vy+=Ce*le}}function Q(){if(Oe){var oe,ce=Oe.length;for(xe=new Array(ce),ke=new Array(ce),oe=0;oe<ce;++oe)ke[oe]=+ge(Oe[oe],oe,Oe),xe[oe]=isNaN(ke[oe])?0:+Me(Oe[oe],oe,Oe)}}return typeof ge!="function"&&(ge=A(+ge)),he==null&&(he=0),ve==null&&(ve=0),Te.initialize=function(oe){Oe=oe,Q()},Te.strength=function(oe){return arguments.length?(Me=typeof oe=="function"?oe:A(+oe),Q(),Te):Me},Te.radius=function(oe){return arguments.length?(ge=typeof oe=="function"?oe:A(+oe),Q(),Te):ge},Te.x=function(oe){return arguments.length?(he=+oe,Te):he},Te.y=function(oe){return arguments.length?(ve=+oe,Te):ve},Te}function fe(ge){var he,ve,Oe,xe=A(.1);function ke(Te){for(var Q,oe=0,ce=he.length;oe<ce;++oe)(Q=he[oe]).vx+=(Oe[oe]-Q.x)*ve[oe]*Te}function Me(){if(he){var Te,Q=he.length;for(ve=new Array(Q),Oe=new Array(Q),Te=0;Te<Q;++Te)ve[Te]=isNaN(Oe[Te]=+ge(he[Te],Te,he))?0:+xe(he[Te],Te,he)}}return typeof ge!="function"&&(ge=A(ge==null?0:+ge)),ke.initialize=function(Te){he=Te,Me()},ke.strength=function(Te){return arguments.length?(xe=typeof Te=="function"?Te:A(+Te),Me(),ke):xe},ke.x=function(Te){return arguments.length?(ge=typeof Te=="function"?Te:A(+Te),Me(),ke):ge},ke}function ye(ge){var he,ve,Oe,xe=A(.1);function ke(Te){for(var Q,oe=0,ce=he.length;oe<ce;++oe)(Q=he[oe]).vy+=(Oe[oe]-Q.y)*ve[oe]*Te}function Me(){if(he){var Te,Q=he.length;for(ve=new Array(Q),Oe=new Array(Q),Te=0;Te<Q;++Te)ve[Te]=isNaN(Oe[Te]=+ge(he[Te],Te,he))?0:+xe(he[Te],Te,he)}}return typeof ge!="function"&&(ge=A(ge==null?0:+ge)),ke.initialize=function(Te){he=Te,Me()},ke.strength=function(Te){return arguments.length?(xe=typeof Te=="function"?Te:A(+Te),Me(),ke):xe},ke.y=function(Te){return arguments.length?(ge=typeof Te=="function"?Te:A(+Te),Me(),ke):ge},ke}},60721:function($,R,e){function k(c,h){if((f=(c=h?c.toExponential(h-1):c.toExponential()).indexOf("e"))<0)return null;var f,b=c.slice(0,f);return[b.length>1?b[0]+b.slice(2):b,+c.slice(f+1)]}e.d(R,{WU:function(){return r},FF:function(){return i}});var A,l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(c){if(!(h=l.exec(c)))throw new Error("invalid format: "+c);var h;return new x({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}function x(c){this.fill=c.fill===void 0?" ":c.fill+"",this.align=c.align===void 0?">":c.align+"",this.sign=c.sign===void 0?"-":c.sign+"",this.symbol=c.symbol===void 0?"":c.symbol+"",this.zero=!!c.zero,this.width=c.width===void 0?void 0:+c.width,this.comma=!!c.comma,this.precision=c.precision===void 0?void 0:+c.precision,this.trim=!!c.trim,this.type=c.type===void 0?"":c.type+""}function d(c,h){var f=k(c,h);if(!f)return c+"";var b=f[0],v=f[1];return v<0?"0."+new Array(-v).join("0")+b:b.length>v+1?b.slice(0,v+1)+"."+b.slice(v+1):b+new Array(v-b.length+2).join("0")}T.prototype=x.prototype,x.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(c,h){return(100*c).toFixed(h)},b:function(c){return Math.round(c).toString(2)},c:function(c){return c+""},d:function(c){return Math.abs(c=Math.round(c))>=1e21?c.toLocaleString("en").replace(/,/g,""):c.toString(10)},e:function(c,h){return c.toExponential(h)},f:function(c,h){return c.toFixed(h)},g:function(c,h){return c.toPrecision(h)},o:function(c){return Math.round(c).toString(8)},p:function(c,h){return d(100*c,h)},r:d,s:function(c,h){var f=k(c,h);if(!f)return c+"";var b=f[0],v=f[1],g=v-(A=3*Math.max(-8,Math.min(8,Math.floor(v/3))))+1,y=b.length;return g===y?b:g>y?b+new Array(g-y+1).join("0"):g>0?b.slice(0,g)+"."+b.slice(g):"0."+new Array(1-g).join("0")+k(c,Math.max(0,h+g-1))[0]},X:function(c){return Math.round(c).toString(16).toUpperCase()},x:function(c){return Math.round(c).toString(16)}};function t(c){return c}var o,r,n=Array.prototype.map,a=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function i(c){var h,f,b=c.grouping===void 0||c.thousands===void 0?t:(h=n.call(c.grouping,Number),f=c.thousands+"",function(_,E){for(var L=_.length,C=[],P=0,I=h[0],U=0;L>0&&I>0&&(U+I+1>E&&(I=Math.max(1,E-U)),C.push(_.substring(L-=I,L+I)),!((U+=I+1)>E));)I=h[P=(P+1)%h.length];return C.reverse().join(f)}),v=c.currency===void 0?"":c.currency[0]+"",g=c.currency===void 0?"":c.currency[1]+"",y=c.decimal===void 0?".":c.decimal+"",p=c.numerals===void 0?t:function(_){return function(E){return E.replace(/[0-9]/g,function(L){return _[+L]})}}(n.call(c.numerals,String)),m=c.percent===void 0?"%":c.percent+"",w=c.minus===void 0?"-":c.minus+"",u=c.nan===void 0?"NaN":c.nan+"";function S(_){var E=(_=T(_)).fill,L=_.align,C=_.sign,P=_.symbol,I=_.zero,U=_.width,z=_.comma,H=_.precision,F=_.trim,N=_.type;N==="n"?(z=!0,N="g"):s[N]||(H===void 0&&(H=12),F=!0,N="g"),(I||E==="0"&&L==="=")&&(I=!0,E="0",L="=");var B=P==="$"?v:P==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",j=P==="$"?g:/[%p]/.test(N)?m:"",K=s[N],G=/[defgprs%]/.test(N);function V(W){var J,X,ee,re=B,ie=j;if(N==="c")ie=K(W)+ie,W="";else{var se=(W=+W)<0||1/W<0;if(W=isNaN(W)?u:K(Math.abs(W),H),F&&(W=function(ge){e:for(var he,ve=ge.length,Oe=1,xe=-1;Oe<ve;++Oe)switch(ge[Oe]){case".":xe=he=Oe;break;case"0":xe===0&&(xe=Oe),he=Oe;break;default:if(!+ge[Oe])break e;xe>0&&(xe=0)}return xe>0?ge.slice(0,xe)+ge.slice(he+1):ge}(W)),se&&+W==0&&C!=="+"&&(se=!1),re=(se?C==="("?C:w:C==="-"||C==="("?"":C)+re,ie=(N==="s"?a[8+A/3]:"")+ie+(se&&C==="("?")":""),G){for(J=-1,X=W.length;++J<X;)if(48>(ee=W.charCodeAt(J))||ee>57){ie=(ee===46?y+W.slice(J+1):W.slice(J))+ie,W=W.slice(0,J);break}}}z&&!I&&(W=b(W,1/0));var fe=re.length+W.length+ie.length,ye=fe<U?new Array(U-fe+1).join(E):"";switch(z&&I&&(W=b(ye+W,ye.length?U-ie.length:1/0),ye=""),L){case"<":W=re+W+ie+ye;break;case"=":W=re+ye+W+ie;break;case"^":W=ye.slice(0,fe=ye.length>>1)+re+W+ie+ye.slice(fe);break;default:W=ye+re+W+ie}return p(W)}return H=H===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,H)):Math.max(0,Math.min(20,H)),V.toString=function(){return _+""},V}return{format:S,formatPrefix:function(_,E){var L,C=S(((_=T(_)).type="f",_)),P=3*Math.max(-8,Math.min(8,Math.floor((L=E,((L=k(Math.abs(L)))?L[1]:NaN)/3)))),I=Math.pow(10,-P),U=a[8+P/3];return function(z){return C(I*z)+U}}}}o=i({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),r=o.format,o.formatPrefix},65704:function($,R,e){e.r(R),e.d(R,{geoAiry:function(){return z},geoAiryRaw:function(){return U},geoAitoff:function(){return F},geoAitoffRaw:function(){return H},geoArmadillo:function(){return B},geoArmadilloRaw:function(){return N},geoAugust:function(){return K},geoAugustRaw:function(){return j},geoBaker:function(){return J},geoBakerRaw:function(){return W},geoBerghaus:function(){return re},geoBerghausRaw:function(){return ee},geoBertin1953:function(){return Oe},geoBertin1953Raw:function(){return ve},geoBoggs:function(){return me},geoBoggsRaw:function(){return ce},geoBonne:function(){return le},geoBonneRaw:function(){return Re},geoBottomley:function(){return _e},geoBottomleyRaw:function(){return de},geoBromley:function(){return Ve},geoBromleyRaw:function(){return Fe},geoChamberlin:function(){return Lt},geoChamberlinAfrica:function(){return wt},geoChamberlinRaw:function(){return kt},geoCollignon:function(){return It},geoCollignonRaw:function(){return Ct},geoCraig:function(){return Rt},geoCraigRaw:function(){return Ut},geoCraster:function(){return Be},geoCrasterRaw:function(){return We},geoCylindricalEqualArea:function(){return rt},geoCylindricalEqualAreaRaw:function(){return Ye},geoCylindricalStereographic:function(){return ze},geoCylindricalStereographicRaw:function(){return Se},geoEckert1:function(){return st},geoEckert1Raw:function(){return Ke},geoEckert2:function(){return Tt},geoEckert2Raw:function(){return ct},geoEckert3:function(){return At},geoEckert3Raw:function(){return Et},geoEckert4:function(){return pt},geoEckert4Raw:function(){return ht},geoEckert5:function(){return Pt},geoEckert5Raw:function(){return gt},geoEckert6:function(){return Ht},geoEckert6Raw:function(){return Ot},geoEisenlohr:function(){return Gt},geoEisenlohrRaw:function(){return Nt},geoFahey:function(){return Kt},geoFaheyRaw:function(){return pn},geoFoucaut:function(){return Bn},geoFoucautRaw:function(){return wn},geoFoucautSinusoidal:function(){return cn},geoFoucautSinusoidalRaw:function(){return vn},geoGilbert:function(){return Mn},geoGingery:function(){return rr},geoGingeryRaw:function(){return Rn},geoGinzburg4:function(){return fr},geoGinzburg4Raw:function(){return mr},geoGinzburg5:function(){return qn},geoGinzburg5Raw:function(){return Zn},geoGinzburg6:function(){return Zt},geoGinzburg6Raw:function(){return ur},geoGinzburg8:function(){return zn},geoGinzburg8Raw:function(){return nn},geoGinzburg9:function(){return Cn},geoGinzburg9Raw:function(){return _n},geoGringorten:function(){return ar},geoGringortenQuincuncial:function(){return Rs},geoGringortenRaw:function(){return Gn},geoGuyou:function(){return zt},geoGuyouRaw:function(){return kn},geoHammer:function(){return ye},geoHammerRaw:function(){return se},geoHammerRetroazimuthal:function(){return An},geoHammerRetroazimuthalRaw:function(){return tn},geoHealpix:function(){return Wn},geoHealpixRaw:function(){return fn},geoHill:function(){return nr},geoHillRaw:function(){return Kn},geoHomolosine:function(){return Ur},geoHomolosineRaw:function(){return br},geoHufnagel:function(){return cr},geoHufnagelRaw:function(){return Sr},geoHyperelliptical:function(){return Si},geoHyperellipticalRaw:function(){return li},geoInterrupt:function(){return vi},geoInterruptedBoggs:function(){return io},geoInterruptedHomolosine:function(){return Xo},geoInterruptedMollweide:function(){return Gs},geoInterruptedMollweideHemispheres:function(){return ka},geoInterruptedQuarticAuthalic:function(){return Bo},geoInterruptedSinuMollweide:function(){return Di},geoInterruptedSinusoidal:function(){return ya},geoKavrayskiy7:function(){return xo},geoKavrayskiy7Raw:function(){return Aa},geoLagrange:function(){return bo},geoLagrangeRaw:function(){return Qr},geoLarrivee:function(){return Ja},geoLarriveeRaw:function(){return Va},geoLaskowski:function(){return ul},geoLaskowskiRaw:function(){return ps},geoLittrow:function(){return cl},geoLittrowRaw:function(){return ao},geoLoximuthal:function(){return bl},geoLoximuthalRaw:function(){return fl},geoMiller:function(){return hl},geoMillerRaw:function(){return Ws},geoModifiedStereographic:function(){return zo},geoModifiedStereographicAlaska:function(){return Js},geoModifiedStereographicGs48:function(){return Ro},geoModifiedStereographicGs50:function(){return Cs},geoModifiedStereographicLee:function(){return $o},geoModifiedStereographicMiller:function(){return _o},geoModifiedStereographicRaw:function(){return Ys},geoMollweide:function(){return Te},geoMollweideRaw:function(){return Me},geoMtFlatPolarParabolic:function(){return _l},geoMtFlatPolarParabolicRaw:function(){return wo},geoMtFlatPolarQuartic:function(){return ds},geoMtFlatPolarQuarticRaw:function(){return Ps},geoMtFlatPolarSinusoidal:function(){return Qo},geoMtFlatPolarSinusoidalRaw:function(){return Do},geoNaturalEarth:function(){return Oa.Z},geoNaturalEarth2:function(){return gs},geoNaturalEarth2Raw:function(){return Ks},geoNaturalEarthRaw:function(){return Oa.K},geoNellHammer:function(){return vs},geoNellHammerRaw:function(){return es},geoNicolosi:function(){return ms},geoNicolosiRaw:function(){return ts},geoPatterson:function(){return Os},geoPattersonRaw:function(){return To},geoPeirceQuincuncial:function(){return zs},geoPierceQuincuncial:function(){return zs},geoPolyconic:function(){return Qs},geoPolyconicRaw:function(){return _s},geoPolyhedral:function(){return ko},geoPolyhedralButterfly:function(){return Is},geoPolyhedralCollignon:function(){return tl},geoPolyhedralWaterman:function(){return Vo},geoProject:function(){return qo},geoQuantize:function(){return aa},geoQuincuncial:function(){return xa},geoRectangularPolyconic:function(){return Go},geoRectangularPolyconicRaw:function(){return _r},geoRobinson:function(){return rs},geoRobinsonRaw:function(){return Ds},geoSatellite:function(){return as},geoSatelliteRaw:function(){return is},geoSinuMollweide:function(){return lr},geoSinuMollweideRaw:function(){return ir},geoSinusoidal:function(){return Ce},geoSinusoidalRaw:function(){return Ie},geoStitch:function(){return Wo},geoTimes:function(){return Fa},geoTimesRaw:function(){return Ki},geoTwoPointAzimuthal:function(){return Ba},geoTwoPointAzimuthalRaw:function(){return ks},geoTwoPointAzimuthalUsa:function(){return Ma},geoTwoPointEquidistant:function(){return ni},geoTwoPointEquidistantRaw:function(){return Qa},geoTwoPointEquidistantUsa:function(){return ca},geoVanDerGrinten:function(){return qa},geoVanDerGrinten2:function(){return eo},geoVanDerGrinten2Raw:function(){return fa},geoVanDerGrinten3:function(){return po},geoVanDerGrinten3Raw:function(){return Eo},geoVanDerGrinten4:function(){return Na},geoVanDerGrinten4Raw:function(){return $i},geoVanDerGrintenRaw:function(){return Hi},geoWagner:function(){return Or},geoWagner4:function(){return Bs},geoWagner4Raw:function(){return Qi},geoWagner6:function(){return ls},geoWagner6Raw:function(){return ha},geoWagner7:function(){return ss},geoWagnerRaw:function(){return Mr},geoWiechel:function(){return oi},geoWiechelRaw:function(){return vo},geoWinkel3:function(){return Ns},geoWinkel3Raw:function(){return fi}});var k=e(15002),A=Math.abs,l=Math.atan,T=Math.atan2,x=Math.cos,d=Math.exp,s=Math.floor,t=Math.log,o=Math.max,r=Math.min,n=Math.pow,a=Math.round,i=Math.sign||function(Xe){return Xe>0?1:Xe<0?-1:0},c=Math.sin,h=Math.tan,f=1e-6,b=1e-12,v=Math.PI,g=v/2,y=v/4,p=Math.SQRT1_2,m=C(2),w=C(v),u=2*v,S=180/v,_=v/180;function E(Xe){return Xe>1?g:Xe<-1?-g:Math.asin(Xe)}function L(Xe){return Xe>1?0:Xe<-1?v:Math.acos(Xe)}function C(Xe){return Xe>0?Math.sqrt(Xe):0}function P(Xe){return(d(Xe)-d(-Xe))/2}function I(Xe){return(d(Xe)+d(-Xe))/2}function U(Xe){var $e=h(Xe/2),at=2*t(x(Xe/2))/($e*$e);function ft(bt,yt){var D=x(bt),Y=x(yt),q=c(yt),ne=Y*D,pe=-((1-ne?t((1+ne)/2)/(1-ne):-.5)+at/(1+ne));return[pe*Y*c(bt),pe*q]}return ft.invert=function(bt,yt){var D,Y=C(bt*bt+yt*yt),q=-Xe/2,ne=50;if(!Y)return[0,0];do{var pe=q/2,Le=x(pe),Ne=c(pe),qe=Ne/Le,et=-t(A(Le));q-=D=(2/qe*et-at*qe-Y)/(-et/(Ne*Ne)+1-at/(2*Le*Le))*(Le<0?.7:1)}while(A(D)>f&&--ne>0);var vt=c(q);return[T(bt*vt,Y*x(q)),E(yt*vt/Y)]},ft}function z(){var Xe=g,$e=(0,k.r)(U),at=$e(Xe);return at.radius=function(ft){return arguments.length?$e(Xe=ft*_):Xe*S},at.scale(179.976).clipAngle(147)}function H(Xe,$e){var at=x($e),ft=function(bt){return bt?bt/Math.sin(bt):1}(L(at*x(Xe/=2)));return[2*at*c(Xe)*ft,c($e)*ft]}function F(){return(0,k.Z)(H).scale(152.63)}function N(Xe){var $e=c(Xe),at=x(Xe),ft=Xe>=0?1:-1,bt=h(ft*Xe),yt=(1+$e-at)/2;function D(Y,q){var ne=x(q),pe=x(Y/=2);return[(1+ne)*c(Y),(ft*q>-T(pe,bt)-.001?0:10*-ft)+yt+c(q)*at-(1+ne)*$e*pe]}return D.invert=function(Y,q){var ne=0,pe=0,Le=50;do{var Ne=x(ne),qe=c(ne),et=x(pe),vt=c(pe),xt=1+et,te=xt*qe-Y,ue=yt+vt*at-xt*$e*Ne-q,we=xt*Ne/2,Pe=-qe*vt,De=$e*xt*qe/2,Ue=at*et+$e*Ne*vt,Ze=Pe*De-Ue*we,Je=(ue*Pe-te*Ue)/Ze/2,it=(te*De-ue*we)/Ze;A(it)>2&&(it/=2),ne-=Je,pe-=it}while((A(Je)>f||A(it)>f)&&--Le>0);return ft*pe>-T(x(ne),bt)-.001?[2*ne,pe]:null},D}function B(){var Xe=20*_,$e=Xe>=0?1:-1,at=h($e*Xe),ft=(0,k.r)(N),bt=ft(Xe),yt=bt.stream;return bt.parallel=function(D){return arguments.length?(at=h(($e=(Xe=D*_)>=0?1:-1)*Xe),ft(Xe)):Xe*S},bt.stream=function(D){var Y=bt.rotate(),q=yt(D),ne=(bt.rotate([0,0]),yt(D)),pe=bt.precision();return bt.rotate(Y),q.sphere=function(){ne.polygonStart(),ne.lineStart();for(var Le=-180*$e;$e*Le<180;Le+=90*$e)ne.point(Le,90*$e);if(Xe)for(;$e*(Le-=3*$e*pe)>=-180;)ne.point(Le,$e*-T(x(Le*_/2),at)*S);ne.lineEnd(),ne.polygonEnd()},q},bt.scale(218.695).center([0,28.0974])}function j(Xe,$e){var at=h($e/2),ft=C(1-at*at),bt=1+ft*x(Xe/=2),yt=c(Xe)*ft/bt,D=at/bt,Y=yt*yt,q=D*D;return[1.3333333333333333*yt*(3+Y-3*q),1.3333333333333333*D*(3+3*Y-q)]}function K(){return(0,k.Z)(j).scale(66.1603)}H.invert=function(Xe,$e){if(!(Xe*Xe+4*$e*$e>v*v+f)){var at=Xe,ft=$e,bt=25;do{var yt,D=c(at),Y=c(at/2),q=x(at/2),ne=c(ft),pe=x(ft),Le=c(2*ft),Ne=ne*ne,qe=pe*pe,et=Y*Y,vt=1-qe*q*q,xt=vt?L(pe*q)*C(yt=1/vt):yt=0,te=2*xt*pe*Y-Xe,ue=xt*ne-$e,we=yt*(qe*et+xt*pe*q*Ne),Pe=yt*(.5*D*Le-2*xt*ne*Y),De=.25*yt*(Le*Y-xt*ne*qe*D),Ue=yt*(Ne*q+xt*et*pe),Ze=Pe*De-Ue*we;if(!Ze)break;var Je=(ue*Pe-te*Ue)/Ze,it=(te*De-ue*we)/Ze;at-=Je,ft-=it}while((A(Je)>f||A(it)>f)&&--bt>0);return[at,ft]}},j.invert=function(Xe,$e){if($e*=.375,!(Xe*=.375)&&A($e)>1)return null;var at=1+Xe*Xe+$e*$e,ft=C((at-C(at*at-4*$e*$e))/2),bt=E(ft)/3,yt=ft?function(ne){return t(ne+C(ne*ne-1))}(A($e/ft))/3:function(ne){return t(ne+C(ne*ne+1))}(A(Xe))/3,D=x(bt),Y=I(yt),q=Y*Y-D*D;return[2*i(Xe)*T(P(yt)*D,.25-q),2*i($e)*T(Y*c(bt),.25+q)]};var G=C(8),V=t(1+m);function W(Xe,$e){var at=A($e);return at<y?[Xe,t(h(y+$e/2))]:[Xe*x(at)*(2*m-1/c(at)),i($e)*(2*m*(at-y)-t(h(at/2)))]}function J(){return(0,k.Z)(W).scale(112.314)}W.invert=function(Xe,$e){if((ft=A($e))<V)return[Xe,2*l(d($e))-g];var at,ft,bt=y,yt=25;do{var D=x(bt/2),Y=h(bt/2);bt-=at=(G*(bt-y)-t(Y)-ft)/(G-D*D/(2*Y))}while(A(at)>b&&--yt>0);return[Xe/(x(bt)*(G-1/c(bt))),i($e)*bt]};var X=e(17889);function ee(Xe){var $e=2*v/Xe;function at(ft,bt){var yt=(0,X.N)(ft,bt);if(A(ft)>g){var D=T(yt[1],yt[0]),Y=C(yt[0]*yt[0]+yt[1]*yt[1]),q=$e*a((D-g)/$e)+g,ne=T(c(D-=q),2-x(D));D=q+E(v/Y*c(ne))-ne,yt[0]=Y*x(D),yt[1]=Y*c(D)}return yt}return at.invert=function(ft,bt){var yt=C(ft*ft+bt*bt);if(yt>g){var D=T(bt,ft),Y=$e*a((D-g)/$e)+g,q=D>Y?-1:1,ne=yt*x(Y-D),pe=1/h(q*L((ne-v)/C(v*(v-2*ne)+yt*yt)));D=Y+2*l((pe+q*C(pe*pe-3))/3),ft=yt*x(D),bt=yt*c(D)}return X.N.invert(ft,bt)},at}function re(){var Xe=5,$e=(0,k.r)(ee),at=$e(Xe),ft=at.stream,bt=.01,yt=-x(bt*_),D=c(bt*_);return at.lobes=function(Y){return arguments.length?$e(Xe=+Y):Xe},at.stream=function(Y){var q=at.rotate(),ne=ft(Y),pe=(at.rotate([0,0]),ft(Y));return at.rotate(q),ne.sphere=function(){pe.polygonStart(),pe.lineStart();for(var Le=0,Ne=360/Xe,qe=2*v/Xe,et=90-180/Xe,vt=g;Le<Xe;++Le,et-=Ne,vt-=qe)pe.point(T(D*x(vt),yt)*S,E(D*c(vt))*S),et<-90?(pe.point(-90,-180-et-bt),pe.point(-90,-180-et+bt)):(pe.point(90,et+bt),pe.point(90,et-bt));pe.lineEnd(),pe.polygonEnd()},ne},at.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ie=e(12956);function se(Xe,$e){if(arguments.length<2&&($e=Xe),$e===1)return ie.l;if($e===1/0)return fe;function at(ft,bt){var yt=(0,ie.l)(ft/$e,bt);return yt[0]*=Xe,yt}return at.invert=function(ft,bt){var yt=ie.l.invert(ft/Xe,bt);return yt[0]*=$e,yt},at}function fe(Xe,$e){return[Xe*x($e)/x($e/=2),2*c($e)]}function ye(){var Xe=2,$e=(0,k.r)(se),at=$e(Xe);return at.coefficient=function(ft){return arguments.length?$e(Xe=+ft):Xe},at.scale(169.529)}function ge(Xe,$e,at){var ft,bt,yt,D=100;at=at===void 0?0:+at,$e=+$e;do(bt=Xe(at))===(yt=Xe(at+f))&&(yt=bt+f),at-=ft=-1e-6*(bt-$e)/(bt-yt);while(D-- >0&&A(ft)>f);return D<0?NaN:at}function he(Xe,$e,at){return $e===void 0&&($e=40),at===void 0&&(at=b),function(ft,bt,yt,D){var Y,q,ne;yt=yt===void 0?0:+yt,D=D===void 0?0:+D;for(var pe=0;pe<$e;pe++){var Le=Xe(yt,D),Ne=Le[0]-ft,qe=Le[1]-bt;if(A(Ne)<at&&A(qe)<at)break;var et=Ne*Ne+qe*qe;if(et>Y)yt-=q/=2,D-=ne/=2;else{Y=et;var vt=(yt>0?-1:1)*at,xt=(D>0?-1:1)*at,te=Xe(yt+vt,D),ue=Xe(yt,D+xt),we=(te[0]-Le[0])/vt,Pe=(te[1]-Le[1])/vt,De=(ue[0]-Le[0])/xt,Ue=(ue[1]-Le[1])/xt,Ze=Ue*we-Pe*De,Je=(A(Ze)<.5?.5:1)/Ze;if(yt+=q=(qe*De-Ne*Ue)*Je,D+=ne=(Ne*Pe-qe*we)*Je,A(q)<at&&A(ne)<at)break}}return[yt,D]}}function ve(){var Xe=se(1.68,2);function $e(at,ft){if(at+ft<-1.4){var bt=(at-ft+1.6)*(at+ft+1.4)/8;at+=bt,ft-=.8*bt*c(ft+v/2)}var yt=Xe(at,ft),D=(1-x(at*ft))/12;return yt[1]<0&&(yt[0]*=1+D),yt[1]>0&&(yt[1]*=1+D/1.5*yt[0]*yt[0]),yt}return $e.invert=he($e),$e}function Oe(){return(0,k.Z)(ve()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function xe(Xe,$e){var at,ft=Xe*c($e),bt=30;do $e-=at=($e+c($e)-ft)/(1+x($e));while(A(at)>f&&--bt>0);return $e/2}function ke(Xe,$e,at){function ft(bt,yt){return[Xe*bt*x(yt=xe(at,yt)),$e*c(yt)]}return ft.invert=function(bt,yt){return yt=E(yt/$e),[bt/(Xe*x(yt)),E((2*yt+c(2*yt))/at)]},ft}fe.invert=function(Xe,$e){var at=2*E($e/2);return[Xe*x(at/2)/x(at),at]};var Me=ke(m/g,m,v);function Te(){return(0,k.Z)(Me).scale(169.529)}var Q=2.00276,oe=1.11072;function ce(Xe,$e){var at=xe(v,$e);return[Q*Xe/(1/x($e)+oe/x(at)),($e+m*c(at))/Q]}function me(){return(0,k.Z)(ce).scale(160.857)}function Ae(Xe){var $e=0,at=(0,k.r)(Xe),ft=at($e);return ft.parallel=function(bt){return arguments.length?at($e=bt*_):$e*S},ft}function Ie(Xe,$e){return[Xe*x($e),$e]}function Ce(){return(0,k.Z)(Ie).scale(152.63)}function Re(Xe){if(!Xe)return Ie;var $e=1/h(Xe);function at(ft,bt){var yt=$e+Xe-bt,D=yt&&ft*x(bt)/yt;return[yt*c(D),$e-yt*x(D)]}return at.invert=function(ft,bt){var yt=C(ft*ft+(bt=$e-bt)*bt),D=$e+Xe-yt;return[yt/x(D)*T(ft,bt),D]},at}function le(){return Ae(Re).scale(123.082).center([0,26.1441]).parallel(45)}function de(Xe){function $e(at,ft){var bt=g-ft,yt=bt&&at*Xe*c(bt)/bt;return[bt*c(yt)/Xe,g-bt*x(yt)]}return $e.invert=function(at,ft){var bt=at*Xe,yt=g-ft,D=C(bt*bt+yt*yt),Y=T(bt,yt);return[(D?D/c(D):1)*Y/Xe,g-D]},$e}function _e(){var Xe=.5,$e=(0,k.r)(de),at=$e(Xe);return at.fraction=function(ft){return arguments.length?$e(Xe=+ft):Xe},at.scale(158.837)}ce.invert=function(Xe,$e){var at,ft,bt=Q*$e,yt=$e<0?-y:y,D=25;do ft=bt-m*c(yt),yt-=at=(c(2*yt)+2*yt-v*c(ft))/(2*x(2*yt)+2+v*x(ft)*m*x(yt));while(A(at)>f&&--D>0);return ft=bt-m*c(yt),[Xe*(1/x(ft)+oe/x(yt))/Q,ft]},Ie.invert=function(Xe,$e){return[Xe/x($e),$e]};var Fe=ke(1,4/v,v);function Ve(){return(0,k.Z)(Fe).scale(152.63)}var He=e(66624),nt=e(49386);function tt(Xe,$e,at,ft,bt,yt){var D,Y=x(yt);if(A(Xe)>1||A(yt)>1)D=L(at*bt+$e*ft*Y);else{var q=c(Xe/2),ne=c(yt/2);D=2*E(C(q*q+$e*ft*ne*ne))}return A(D)>f?[D,T(ft*c(yt),$e*bt-at*ft*Y)]:[0,0]}function ot(Xe,$e,at){return L((Xe*Xe+$e*$e-at*at)/(2*Xe*$e))}function dt(Xe){return Xe-2*v*s((Xe+v)/(2*v))}function kt(Xe,$e,at){for(var ft,bt=[[Xe[0],Xe[1],c(Xe[1]),x(Xe[1])],[$e[0],$e[1],c($e[1]),x($e[1])],[at[0],at[1],c(at[1]),x(at[1])]],yt=bt[2],D=0;D<3;++D,yt=ft)ft=bt[D],yt.v=tt(ft[1]-yt[1],yt[3],yt[2],ft[3],ft[2],ft[0]-yt[0]),yt.point=[0,0];var Y=ot(bt[0].v[0],bt[2].v[0],bt[1].v[0]),q=ot(bt[0].v[0],bt[1].v[0],bt[2].v[0]),ne=v-Y;bt[2].point[1]=0,bt[0].point[0]=-(bt[1].point[0]=bt[0].v[0]/2);var pe=[bt[2].point[0]=bt[0].point[0]+bt[2].v[0]*x(Y),2*(bt[0].point[1]=bt[1].point[1]=bt[2].v[0]*c(Y))];return function(Le,Ne){var qe,et=c(Ne),vt=x(Ne),xt=new Array(3);for(qe=0;qe<3;++qe){var te=bt[qe];if(xt[qe]=tt(Ne-te[1],te[3],te[2],vt,et,Le-te[0]),!xt[qe][0])return te.point;xt[qe][1]=dt(xt[qe][1]-te.v[1])}var ue=pe.slice();for(qe=0;qe<3;++qe){var we=qe==2?0:qe+1,Pe=ot(bt[qe].v[0],xt[qe][0],xt[we][0]);xt[qe][1]<0&&(Pe=-Pe),qe?qe==1?(Pe=q-Pe,ue[0]-=xt[qe][0]*x(Pe),ue[1]-=xt[qe][0]*c(Pe)):(Pe=ne-Pe,ue[0]+=xt[qe][0]*x(Pe),ue[1]+=xt[qe][0]*c(Pe)):(ue[0]+=xt[qe][0]*x(Pe),ue[1]-=xt[qe][0]*c(Pe))}return ue[0]/=3,ue[1]/=3,ue}}function mt(Xe){return Xe[0]*=_,Xe[1]*=_,Xe}function wt(){return Lt([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Lt(Xe,$e,at){var ft=(0,He.Z)({type:"MultiPoint",coordinates:[Xe,$e,at]}),bt=[-ft[0],-ft[1]],yt=(0,nt.Z)(bt),D=kt(mt(yt(Xe)),mt(yt($e)),mt(yt(at)));D.invert=he(D);var Y=(0,k.Z)(D).rotate(bt),q=Y.center;return delete Y.rotate,Y.center=function(ne){return arguments.length?q(yt(ne)):yt.invert(q())},Y.clipAngle(90)}function Ct(Xe,$e){var at=C(1-c($e));return[2/w*Xe*at,w*(1-at)]}function It(){return(0,k.Z)(Ct).scale(95.6464).center([0,30])}function Ut(Xe){var $e=h(Xe);function at(ft,bt){return[ft,(ft?ft/c(ft):1)*(c(bt)*x(ft)-$e*x(bt))]}return at.invert=$e?function(ft,bt){ft&&(bt*=c(ft)/ft);var yt=x(ft);return[ft,2*T(C(yt*yt+$e*$e-bt*bt)-yt,$e-bt)]}:function(ft,bt){return[ft,E(ft?bt*h(ft)/ft:bt)]},at}function Rt(){return Ae(Ut).scale(249.828).clipAngle(90)}Ct.invert=function(Xe,$e){var at=(at=$e/w-1)*at;return[at>0?Xe*C(v/at)/2:0,E(1-at)]};var Ge=C(3);function We(Xe,$e){return[Ge*Xe*(2*x(2*$e/3)-1)/w,Ge*w*c($e/3)]}function Be(){return(0,k.Z)(We).scale(156.19)}function Ye(Xe){var $e=x(Xe);function at(ft,bt){return[ft*$e,c(bt)/$e]}return at.invert=function(ft,bt){return[ft/$e,E(bt*$e)]},at}function rt(){return Ae(Ye).parallel(38.58).scale(195.044)}function Se(Xe){var $e=x(Xe);function at(ft,bt){return[ft*$e,(1+$e)*h(bt/2)]}return at.invert=function(ft,bt){return[ft/$e,2*l(bt/(1+$e))]},at}function ze(){return Ae(Se).scale(124.75)}function Ke(Xe,$e){var at=C(8/(3*v));return[at*Xe*(1-A($e)/v),at*$e]}function st(){return(0,k.Z)(Ke).scale(165.664)}function ct(Xe,$e){var at=C(4-3*c(A($e)));return[2/C(6*v)*Xe*at,i($e)*C(2*v/3)*(2-at)]}function Tt(){return(0,k.Z)(ct).scale(165.664)}function Et(Xe,$e){var at=C(v*(4+v));return[2/at*Xe*(1+C(1-4*$e*$e/(v*v))),4/at*$e]}function At(){return(0,k.Z)(Et).scale(180.739)}function ht(Xe,$e){var at=(2+g)*c($e);$e/=2;for(var ft=0,bt=1/0;ft<10&&A(bt)>f;ft++){var yt=x($e);$e-=bt=($e+c($e)*(yt+2)-at)/(2*yt*(1+yt))}return[2/C(v*(4+v))*Xe*(1+x($e)),2*C(v/(4+v))*c($e)]}function pt(){return(0,k.Z)(ht).scale(180.739)}function gt(Xe,$e){return[Xe*(1+x($e))/C(2+v),2*$e/C(2+v)]}function Pt(){return(0,k.Z)(gt).scale(173.044)}function Ot(Xe,$e){for(var at=(1+g)*c($e),ft=0,bt=1/0;ft<10&&A(bt)>f;ft++)$e-=bt=($e+c($e)-at)/(1+x($e));return at=C(2+v),[Xe*(1+x($e))/at,2*$e/at]}function Ht(){return(0,k.Z)(Ot).scale(173.044)}We.invert=function(Xe,$e){var at=3*E($e/(Ge*w));return[w*Xe/(Ge*(2*x(2*at/3)-1)),at]},Ke.invert=function(Xe,$e){var at=C(8/(3*v)),ft=$e/at;return[Xe/(at*(1-A(ft)/v)),ft]},ct.invert=function(Xe,$e){var at=2-A($e)/C(2*v/3);return[Xe*C(6*v)/(2*at),i($e)*E((4-at*at)/3)]},Et.invert=function(Xe,$e){var at=C(v*(4+v))/2;return[Xe*at/(1+C(1-$e*$e*(4+v)/(4*v))),$e*at/2]},ht.invert=function(Xe,$e){var at=$e*C((4+v)/v)/2,ft=E(at),bt=x(ft);return[Xe/(2/C(v*(4+v))*(1+bt)),E((ft+at*(bt+2))/(2+g))]},gt.invert=function(Xe,$e){var at=C(2+v),ft=$e*at/2;return[at*Xe/(1+x(ft)),ft]},Ot.invert=function(Xe,$e){var at=1+g,ft=C(at/2);return[2*Xe*ft/(1+x($e*=ft)),E(($e+c($e))/at)]};var jt=3+2*m;function Nt(Xe,$e){var at=c(Xe/=2),ft=x(Xe),bt=C(x($e)),yt=x($e/=2),D=c($e)/(yt+m*ft*bt),Y=C(2/(1+D*D)),q=C((m*yt+(ft+at)*bt)/(m*yt+(ft-at)*bt));return[jt*(Y*(q-1/q)-2*t(q)),jt*(Y*D*(q+1/q)-2*l(D))]}function Gt(){return(0,k.Z)(Nt).scale(62.5271)}Nt.invert=function(Xe,$e){if(!(at=j.invert(Xe/1.2,1.065*$e)))return null;var at,ft=at[0],bt=at[1],yt=20;Xe/=jt,$e/=jt;do{var D=ft/2,Y=bt/2,q=c(D),ne=x(D),pe=c(Y),Le=x(Y),Ne=x(bt),qe=C(Ne),et=pe/(Le+m*ne*qe),vt=et*et,xt=C(2/(1+vt)),te=(m*Le+(ne+q)*qe)/(m*Le+(ne-q)*qe),ue=C(te),we=ue-1/ue,Pe=ue+1/ue,De=xt*we-2*t(ue)-Xe,Ue=xt*et*Pe-2*l(et)-$e,Ze=pe&&p*qe*q*vt/pe,Je=(m*ne*Le+qe)/(2*(Le+m*ne*qe)*(Le+m*ne*qe)*qe),it=-.5*et*xt*xt*xt,ut=it*Ze,St=it*Je,Dt=(Dt=2*Le+m*qe*(ne-q))*Dt*ue,Ft=(m*ne*Le*qe+Ne)/Dt,Yt=-m*q*pe/(qe*Dt),ln=we*ut-2*Ft/ue+xt*(Ft+Ft/te),Xt=we*St-2*Yt/ue+xt*(Yt+Yt/te),en=et*Pe*ut-2*Ze/(1+vt)+xt*Pe*Ze+xt*et*(Ft-Ft/te),Jt=et*Pe*St-2*Je/(1+vt)+xt*Pe*Je+xt*et*(Yt-Yt/te),bn=Xt*en-Jt*ln;if(!bn)break;var gn=(Ue*Xt-De*Jt)/bn,Qt=(De*en-Ue*ln)/bn;ft-=gn,bt=o(-g,r(g,bt-Qt))}while((A(gn)>f||A(Qt)>f)&&--yt>0);return A(A(bt)-g)<f?[0,bt]:yt&&[ft,bt]};var un=x(35*_);function pn(Xe,$e){var at=h($e/2);return[Xe*un*C(1-at*at),(1+un)*at]}function Kt(){return(0,k.Z)(pn).scale(137.152)}function wn(Xe,$e){var at=$e/2,ft=x(at);return[2*Xe/w*x($e)*ft*ft,w*h(at)]}function Bn(){return(0,k.Z)(wn).scale(135.264)}function vn(Xe){var $e=1-Xe,at=bt(v,0)[0]-bt(-v,0)[0],ft=C(2*(bt(0,g)[1]-bt(0,-g)[1])/at);function bt(Y,q){var ne=x(q),pe=c(q);return[ne/($e+Xe*ne)*Y,$e*q+Xe*pe]}function yt(Y,q){var ne=bt(Y,q);return[ne[0]*ft,ne[1]/ft]}function D(Y){return yt(0,Y)[1]}return yt.invert=function(Y,q){var ne=ge(D,q);return[Y/ft*(Xe+$e/x(ne)),ne]},yt}function cn(){var Xe=.5,$e=(0,k.r)(vn),at=$e(Xe);return at.alpha=function(ft){return arguments.length?$e(Xe=+ft):Xe},at.scale(168.725)}pn.invert=function(Xe,$e){var at=$e/(1+un);return[Xe&&Xe/(un*C(1-at*at)),2*l(at)]},wn.invert=function(Xe,$e){var at=l($e/w),ft=x(at),bt=2*at;return[Xe*w/2/(x(bt)*ft*ft),bt]};var dn=e(57962),sn=e(97492);function hn(Xe){return[Xe[0]/2,E(h(Xe[1]/2*_))*S]}function En(Xe){return[2*Xe[0],2*l(c(Xe[1]*_))*S]}function Mn(Xe){Xe==null&&(Xe=dn.Z);var $e=Xe(),at=(0,sn.Z)().scale(S).precision(0).clipAngle(null).translate([0,0]);function ft(yt){return $e(hn(yt))}function bt(yt){ft[yt]=function(){return arguments.length?($e[yt].apply($e,arguments),ft):$e[yt]()}}return $e.invert&&(ft.invert=function(yt){return En($e.invert(yt))}),ft.stream=function(yt){var D=$e.stream(yt),Y=at.stream({point:function(q,ne){D.point(q/2,E(h(-ne/2*_))*S)},lineStart:function(){D.lineStart()},lineEnd:function(){D.lineEnd()},polygonStart:function(){D.polygonStart()},polygonEnd:function(){D.polygonEnd()}});return Y.sphere=D.sphere,Y},ft.rotate=function(yt){return arguments.length?(at.rotate(yt),ft):at.rotate()},ft.center=function(yt){return arguments.length?($e.center(hn(yt)),ft):En($e.center())},bt("angle"),bt("clipAngle"),bt("clipExtent"),bt("fitExtent"),bt("fitHeight"),bt("fitSize"),bt("fitWidth"),bt("scale"),bt("translate"),bt("precision"),ft.scale(249.5)}function Rn(Xe,$e){var at=2*v/$e,ft=Xe*Xe;function bt(yt,D){var Y=(0,X.N)(yt,D),q=Y[0],ne=Y[1],pe=q*q+ne*ne;if(pe>ft){var Le=C(pe),Ne=T(ne,q),qe=at*a(Ne/at),et=Ne-qe,vt=Xe*x(et),xt=(Xe*c(et)-et*c(vt))/(g-vt),te=Nn(et,xt),ue=(v-Xe)/Fn(te,vt,v);q=Le;var we,Pe=50;do q-=we=(Xe+Fn(te,vt,q)*ue-Le)/(te(q)*ue);while(A(we)>f&&--Pe>0);ne=et*c(q),q<g&&(ne-=xt*(q-g));var De=c(qe),Ue=x(qe);Y[0]=q*Ue-ne*De,Y[1]=q*De+ne*Ue}return Y}return bt.invert=function(yt,D){var Y=yt*yt+D*D;if(Y>ft){var q=C(Y),ne=T(D,yt),pe=at*a(ne/at),Le=ne-pe;yt=q*x(Le),D=q*c(Le);for(var Ne=yt-g,qe=c(yt),et=D/qe,vt=yt<g?1/0:0,xt=10;;){var te=Xe*c(et),ue=Xe*x(et),we=c(ue),Pe=g-ue,De=(te-et*we)/Pe,Ue=Nn(et,De);if(A(vt)<b||!--xt)break;et-=vt=(et*qe-De*Ne-D)/(qe-2*Ne*(Pe*(ue+et*te*x(ue)-we)-te*(te-et*we))/(Pe*Pe))}yt=(q=Xe+Fn(Ue,ue,yt)*(v-Xe)/Fn(Ue,ue,v))*x(ne=pe+et),D=q*c(ne)}return X.N.invert(yt,D)},bt}function Nn(Xe,$e){return function(at){var ft=Xe*x(at);return at<g&&(ft-=$e),C(1+ft*ft)}}function Fn(Xe,$e,at){for(var ft=(at-$e)/50,bt=Xe($e)+Xe(at),yt=1,D=$e;yt<50;++yt)bt+=2*Xe(D+=ft);return .5*bt*ft}function rr(){var Xe=6,$e=30*_,at=x($e),ft=c($e),bt=(0,k.r)(Rn),yt=bt($e,Xe),D=yt.stream,Y=-x(.01*_),q=c(.01*_);return yt.radius=function(ne){return arguments.length?(at=x($e=ne*_),ft=c($e),bt($e,Xe)):$e*S},yt.lobes=function(ne){return arguments.length?bt($e,Xe=+ne):Xe},yt.stream=function(ne){var pe=yt.rotate(),Le=D(ne),Ne=(yt.rotate([0,0]),D(ne));return yt.rotate(pe),Le.sphere=function(){Ne.polygonStart(),Ne.lineStart();for(var qe=0,et=2*v/Xe,vt=0;qe<Xe;++qe,vt-=et)Ne.point(T(q*x(vt),Y)*S,E(q*c(vt))*S),Ne.point(T(ft*x(vt-et/2),at)*S,E(ft*c(vt-et/2))*S);Ne.lineEnd(),Ne.polygonEnd()},Le},yt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function $n(Xe,$e,at,ft,bt,yt,D,Y){function q(ne,pe){if(!pe)return[Xe*ne/v,0];var Le=pe*pe,Ne=Xe+Le*($e+Le*(at+Le*ft)),qe=pe*(bt-1+Le*(yt-Y+Le*D)),et=(Ne*Ne+qe*qe)/(2*qe),vt=ne*E(Ne/et)/v;return[et*c(vt),pe*(1+Le*Y)+et*(1-x(vt))]}return arguments.length<8&&(Y=0),q.invert=function(ne,pe){var Le,Ne,qe=v*ne/Xe,et=pe,vt=50;do{var xt=et*et,te=Xe+xt*($e+xt*(at+xt*ft)),ue=et*(bt-1+xt*(yt-Y+xt*D)),we=te*te+ue*ue,Pe=2*ue,De=we/Pe,Ue=De*De,Ze=E(te/De)/v,Je=qe*Ze,it=te*te,ut=(2*$e+xt*(4*at+6*xt*ft))*et,St=bt+xt*(3*yt+5*xt*D),Dt=(2*(te*ut+ue*(St-1))*Pe-we*(2*(St-1)))/(Pe*Pe),Ft=x(Je),Yt=c(Je),ln=De*Ft,Xt=De*Yt,en=qe/v*(1/C(1-it/Ue))*(ut*De-te*Dt)/Ue,Jt=Xt-ne,bn=et*(1+xt*Y)+De-ln-pe,gn=Dt*Yt+ln*en,Qt=ln*Ze,Pn=1+Dt-(Dt*Ft-Xt*en),Dn=Xt*Ze,Xn=gn*Dn-Pn*Qt;if(!Xn)break;qe-=Le=(bn*gn-Jt*Pn)/Xn,et-=Ne=(Jt*Dn-bn*Qt)/Xn}while((A(Le)>f||A(Ne)>f)&&--vt>0);return[qe,et]},q}var mr=$n(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function fr(){return(0,k.Z)(mr).scale(149.995)}var Zn=$n(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function qn(){return(0,k.Z)(Zn).scale(153.93)}var ur=$n(5/6*v,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Zt(){return(0,k.Z)(ur).scale(130.945)}function nn(Xe,$e){var at=Xe*Xe,ft=$e*$e;return[Xe*(1-.162388*ft)*(.87-952426e-9*at*at),$e*(1+ft/12)]}function zn(){return(0,k.Z)(nn).scale(131.747)}nn.invert=function(Xe,$e){var at,ft=Xe,bt=$e,yt=50;do{var D=bt*bt;bt-=at=(bt*(1+D/12)-$e)/(1+D/4)}while(A(at)>f&&--yt>0);yt=50,Xe/=1-.162388*D;do{var Y=(Y=ft*ft)*Y;ft-=at=(ft*(.87-952426e-9*Y)-Xe)/(.87-.00476213*Y)}while(A(at)>f&&--yt>0);return[ft,bt]};var _n=$n(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Cn(){return(0,k.Z)(_n).scale(131.087)}function Un(Xe){var $e=Xe(g,0)[0]-Xe(-g,0)[0];function at(ft,bt){var yt=ft>0?-.5:.5,D=Xe(ft+yt*v,bt);return D[0]-=yt*$e,D}return Xe.invert&&(at.invert=function(ft,bt){var yt=ft>0?-.5:.5,D=Xe.invert(ft+yt*$e,bt),Y=D[0]-yt*v;return Y<-v?Y+=2*v:Y>v&&(Y-=2*v),D[0]=Y,D}),at}function Gn(Xe,$e){var at=i(Xe),ft=i($e),bt=x($e),yt=x(Xe)*bt,D=c(Xe)*bt,Y=c(ft*$e);Xe=A(T(D,Y)),$e=E(yt),A(Xe-g)>f&&(Xe%=g);var q=function(ne,pe){if(pe===g)return[0,0];var Le,Ne,qe=c(pe),et=qe*qe,vt=et*et,xt=1+vt,te=1+3*vt,ue=1-vt,we=E(1/C(xt)),Pe=ue+et*xt*we,De=(1-qe)/Pe,Ue=C(De),Ze=De*xt,Je=C(Ze),it=Ue*ue;if(ne===0)return[0,-(it+et*Je)];var ut,St=x(pe),Dt=1/St,Ft=2*qe*St,Yt=(-Pe*St-(-3*et+we*te)*Ft*(1-qe))/(Pe*Pe),ln=-Dt*Ft,Xt=-Dt*(et*xt*Yt+De*te*Ft),en=-2*Dt*(ue*(.5*Yt/Ue)-2*et*Ue*Ft),Jt=4*ne/v;if(ne>.222*v||pe<v/4&&ne>.175*v){if(Le=(it+et*C(Ze*(1+vt)-it*it))/(1+vt),ne>v/4)return[Le,Le];var bn=Le,gn=.5*Le;Le=.5*(gn+bn),Ne=50;do{var Qt=Le*(en+ln*C(Ze-Le*Le))+Xt*E(Le/Je)-Jt;if(!Qt)break;Qt<0?gn=Le:bn=Le,Le=.5*(gn+bn)}while(A(bn-gn)>f&&--Ne>0)}else{Le=f,Ne=25;do{var Pn=Le*Le,Dn=C(Ze-Pn),Xn=en+ln*Dn,Jn=Le*Xn+Xt*E(Le/Je)-Jt;Le-=ut=Dn?Jn/(Xn+(Xt-ln*Pn)/Dn):0}while(A(ut)>f&&--Ne>0)}return[Le,-it-et*C(Ze-Le*Le)]}(Xe>v/4?g-Xe:Xe,$e);return Xe>v/4&&(Y=q[0],q[0]=-q[1],q[1]=-Y),q[0]*=at,q[1]*=-ft,q}function ar(){return(0,k.Z)(Un(Gn)).scale(239.75)}function yr(Xe,$e){var at,ft,bt,yt,D,Y;if($e<f)return[(yt=c(Xe))-(at=$e*(Xe-yt*(ft=x(Xe)))/4)*ft,ft+at*yt,1-$e*yt*yt/2,Xe-at];if($e>=.999999)return at=(1-$e)/4,bt=1/(ft=I(Xe)),[(yt=((Y=d(2*(Y=Xe)))-1)/(Y+1))+at*((D=ft*P(Xe))-Xe)/(ft*ft),bt-at*yt*bt*(D-Xe),bt+at*yt*bt*(D+Xe),2*l(d(Xe))-g+at*(D-Xe)/ft];var q=[1,0,0,0,0,0,0,0,0],ne=[C($e),0,0,0,0,0,0,0,0],pe=0;for(ft=C(1-$e),D=1;A(ne[pe]/q[pe])>f&&pe<8;)at=q[pe++],ne[pe]=(at-ft)/2,q[pe]=(at+ft)/2,ft=C(at*ft),D*=2;bt=D*q[pe]*Xe;do bt=(E(yt=ne[pe]*c(ft=bt)/q[pe])+bt)/2;while(--pe);return[c(bt),yt=x(bt),yt/x(bt-ft),bt]}function $t(Xe,$e){if(!$e)return Xe;if($e===1)return t(h(Xe/2+y));for(var at=1,ft=C(1-$e),bt=C($e),yt=0;A(bt)>f;yt++){if(Xe%v){var D=l(ft*h(Xe)/at);D<0&&(D+=v),Xe+=D+~~(Xe/v)*v}else Xe+=Xe;bt=(at+ft)/2,ft=C(at*ft),bt=((at=bt)-ft)/2}return Xe/(n(2,yt)*at)}function kn(Xe,$e){var at=(m-1)/(m+1),ft=C(1-at*at),bt=$t(g,ft*ft),yt=t(h(v/4+A($e)/2)),D=d(-1*yt)/C(at),Y=function(ne,pe){var Le=ne*ne,Ne=pe+1,qe=1-Le-pe*pe;return[.5*((ne>=0?g:-g)-T(qe,2*ne)),-.25*t(qe*qe+4*Le)+.5*t(Ne*Ne+Le)]}(D*x(-1*Xe),D*c(-1*Xe)),q=function(ne,pe,Le){var Ne=A(ne),qe=P(A(pe));if(Ne){var et=1/c(Ne),vt=1/(h(Ne)*h(Ne)),xt=-(vt+Le*(qe*qe*et*et)-1+Le),te=(-xt+C(xt*xt-(Le-1)*vt*4))/2;return[$t(l(1/C(te)),Le)*i(ne),$t(l(C((te/vt-1)/Le)),1-Le)*i(pe)]}return[0,$t(l(qe),1-Le)*i(pe)]}(Y[0],Y[1],ft*ft);return[-q[1],($e>=0?1:-1)*(.5*bt-q[0])]}function zt(){return(0,k.Z)(Un(kn)).scale(151.496)}Gn.invert=function(Xe,$e){A(Xe)>1&&(Xe=2*i(Xe)-Xe),A($e)>1&&($e=2*i($e)-$e);var at=i(Xe),ft=i($e),bt=-at*Xe,yt=-ft*$e,D=yt/bt<1,Y=function(Le,Ne){for(var qe=0,et=1,vt=.5,xt=50;;){var te=vt*vt,ue=C(vt),we=E(1/C(1+te)),Pe=1-te+vt*(1+te)*we,De=(1-ue)/Pe,Ue=C(De),Ze=De*(1+te),Je=Ue*(1-te),it=C(Ze-Le*Le),ut=Ne+Je+vt*it;if(A(et-qe)<b||--xt==0||ut===0)break;ut>0?qe=vt:et=vt,vt=.5*(qe+et)}if(!xt)return null;var St=E(ue),Dt=x(St),Ft=1/Dt,Yt=2*ue*Dt,ln=(-Pe*Dt-(-3*vt+we*(1+3*te))*Yt*(1-ue))/(Pe*Pe);return[v/4*(Le*(-2*Ft*(.5*ln/Ue*(1-te)-2*vt*Ue*Yt)+-Ft*Yt*it)+-Ft*(vt*(1+te)*ln+De*(1+3*te)*Yt)*E(Le/C(Ze))),St]}(D?yt:bt,D?bt:yt),q=Y[0],ne=Y[1],pe=x(ne);return D&&(q=-g-q),[at*(T(c(q)*pe,-c(ne))+v),ft*E(x(q)*pe)]},kn.invert=function(Xe,$e){var at,ft,bt,yt,D,Y,q=(m-1)/(m+1),ne=C(1-q*q),pe=(ft=-Xe,bt=ne*ne,(at=.5*$t(g,ne*ne)-$e)?(yt=yr(at,bt),ft?(Y=(D=yr(ft,1-bt))[1]*D[1]+bt*yt[0]*yt[0]*D[0]*D[0],[[yt[0]*D[2]/Y,yt[1]*yt[2]*D[0]*D[1]/Y],[yt[1]*D[1]/Y,-yt[0]*yt[2]*D[0]*D[2]/Y],[yt[2]*D[1]*D[2]/Y,-bt*yt[0]*yt[1]*D[0]/Y]]):[[yt[0],0],[yt[1],0],[yt[2],0]]):[[0,(D=yr(ft,1-bt))[0]/D[1]],[1/D[1],0],[D[2]/D[1],0]]),Le=function(Ne,qe){var et=qe[0]*qe[0]+qe[1]*qe[1];return[(Ne[0]*qe[0]+Ne[1]*qe[1])/et,(Ne[1]*qe[0]-Ne[0]*qe[1])/et]}(pe[0],pe[1]);return[T(Le[1],Le[0])/-1,2*l(d(-.5*t(q*Le[0]*Le[0]+q*Le[1]*Le[1])))-g]};var Wt=e(7613);function tn(Xe){var $e=c(Xe),at=x(Xe),ft=Sn(Xe);function bt(yt,D){var Y=ft(yt,D);yt=Y[0],D=Y[1];var q=c(D),ne=x(D),pe=x(yt),Le=L($e*q+at*ne*pe),Ne=c(Le),qe=A(Ne)>f?Le/Ne:1;return[qe*at*c(yt),(A(yt)>g?qe:-qe)*($e*ne-at*q*pe)]}return ft.invert=Sn(-Xe),bt.invert=function(yt,D){var Y=C(yt*yt+D*D),q=-c(Y),ne=x(Y),pe=Y*ne,Le=-D*q,Ne=Y*$e,qe=C(pe*pe+Le*Le-Ne*Ne),et=T(pe*Ne+Le*qe,Le*Ne-pe*qe),vt=(Y>g?-1:1)*T(yt*q,Y*x(et)*ne+D*c(et)*q);return ft.invert(vt,et)},bt}function Sn(Xe){var $e=c(Xe),at=x(Xe);return function(ft,bt){var yt=x(bt),D=x(ft)*yt,Y=c(ft)*yt,q=c(bt);return[T(Y,D*at-q*$e),E(q*at+D*$e)]}}function An(){var Xe=0,$e=(0,k.r)(tn),at=$e(Xe),ft=at.rotate,bt=at.stream,yt=(0,Wt.Z)();return at.parallel=function(D){if(!arguments.length)return Xe*S;var Y=at.rotate();return $e(Xe=D*_).rotate(Y)},at.rotate=function(D){return arguments.length?(ft.call(at,[D[0],D[1]-Xe*S]),yt.center([-D[0],-D[1]]),at):((D=ft.call(at))[1]+=Xe*S,D)},at.stream=function(D){return(D=bt(D)).sphere=function(){D.polygonStart();var Y,q=yt.radius(89.99)().coordinates[0],ne=q.length-1,pe=-1;for(D.lineStart();++pe<ne;)D.point((Y=q[pe])[0],Y[1]);for(D.lineEnd(),ne=(q=yt.radius(90.01)().coordinates[0]).length-1,D.lineStart();--pe>=0;)D.point((Y=q[pe])[0],Y[1]);D.lineEnd(),D.polygonEnd()},D},at.scale(79.4187).parallel(45).clipAngle(179.999)}var Tn=e(33064),an=e(72736),mn=E(1-1/3)*S,on=Ye(0);function fn(Xe){var $e=mn*_,at=Ct(v,$e)[0]-Ct(-v,$e)[0],ft=on(0,$e)[1],bt=Ct(0,$e)[1],yt=w-bt,D=u/Xe,Y=4/u,q=ft+yt*yt*4/u;function ne(pe,Le){var Ne,qe=A(Le);if(qe>$e){var et=r(Xe-1,o(0,s((pe+v)/D)));(Ne=Ct(pe+=v*(Xe-1)/Xe-et*D,qe))[0]=Ne[0]*u/at-u*(Xe-1)/(2*Xe)+et*u/Xe,Ne[1]=ft+4*(Ne[1]-bt)*yt/u,Le<0&&(Ne[1]=-Ne[1])}else Ne=on(pe,Le);return Ne[0]*=Y,Ne[1]/=q,Ne}return ne.invert=function(pe,Le){pe/=Y;var Ne=A(Le*=q);if(Ne>ft){var qe=r(Xe-1,o(0,s((pe+v)/D)));pe=(pe+v*(Xe-1)/Xe-qe*D)*at/u;var et=Ct.invert(pe,.25*(Ne-ft)*u/yt+bt);return et[0]-=v*(Xe-1)/Xe-qe*D,Le<0&&(et[1]=-et[1]),et}return on.invert(pe,Le)},ne}function yn(Xe,$e){return[Xe,1&$e?89.999999:mn]}function Ln(Xe,$e){return[Xe,1&$e?-89.999999:-mn]}function Hn(Xe){return[.999999*Xe[0],Xe[1]]}function Wn(){var Xe=4,$e=(0,k.r)(fn),at=$e(Xe),ft=at.stream;return at.lobes=function(bt){return arguments.length?$e(Xe=+bt):Xe},at.stream=function(bt){var yt=at.rotate(),D=ft(bt),Y=(at.rotate([0,0]),ft(bt));return at.rotate(yt),D.sphere=function(){var q,ne;(0,an.Z)((q=180/Xe,ne=[].concat((0,Tn.w6)(-180,180+q/2,q).map(yn),(0,Tn.w6)(180,-180-q/2,-q).map(Ln)),{type:"Polygon",coordinates:[q===180?ne.map(Hn):ne]}),Y)},D},at.scale(239.75)}function Kn(Xe){var $e,at=1+Xe,ft=E(c(1/at)),bt=2*C(v/($e=v+4*ft*at)),yt=.5*bt*(at+C(Xe*(2+Xe))),D=Xe*Xe,Y=at*at;function q(ne,pe){var Le,Ne,qe=1-c(pe);if(qe&&qe<2){var et,vt=g-pe,xt=25;do{var te=c(vt),ue=x(vt),we=ft+T(te,at-ue),Pe=1+Y-2*at*ue;vt-=et=(vt-D*ft-at*te+Pe*we-.5*qe*$e)/(2*at*te*we)}while(A(et)>b&&--xt>0);Le=bt*C(Pe),Ne=ne*we/v}else Le=bt*(Xe+qe),Ne=ne*ft/v;return[Le*c(Ne),yt-Le*x(Ne)]}return q.invert=function(ne,pe){var Le=ne*ne+(pe-=yt)*pe,Ne=(1+Y-Le/(bt*bt))/(2*at),qe=L(Ne),et=c(qe),vt=ft+T(et,at-Ne);return[E(ne/C(Le))*v/vt,E(1-2*(qe-D*ft-at*et+(1+Y-2*at*Ne)*vt)/$e)]},q}function nr(){var Xe=1,$e=(0,k.r)(Kn),at=$e(Xe);return at.ratio=function(ft){return arguments.length?$e(Xe=+ft):Xe},at.scale(167.774).center([0,18.67])}var er=.7109889596207567,or=.0528035274542;function ir(Xe,$e){return $e>-er?((Xe=Me(Xe,$e))[1]+=or,Xe):Ie(Xe,$e)}function lr(){return(0,k.Z)(ir).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function br(Xe,$e){return A($e)>er?((Xe=Me(Xe,$e))[1]-=$e>0?or:-or,Xe):Ie(Xe,$e)}function Ur(){return(0,k.Z)(br).scale(152.63)}function Sr(Xe,$e,at,ft){var bt=C(4*v/(2*at+(1+Xe-$e/2)*c(2*at)+(Xe+$e)/2*c(4*at)+$e/2*c(6*at))),yt=C(ft*c(at)*C((1+Xe*x(2*at)+$e*x(4*at))/(1+Xe+$e))),D=at*q(1);function Y(Le){return C(1+Xe*x(2*Le)+$e*x(4*Le))}function q(Le){var Ne=Le*at;return(2*Ne+(1+Xe-$e/2)*c(2*Ne)+(Xe+$e)/2*c(4*Ne)+$e/2*c(6*Ne))/at}function ne(Le){return Y(Le)*c(Le)}var pe=function(Le,Ne){var qe=at*ge(q,D*c(Ne)/at,Ne/v);isNaN(qe)&&(qe=at*i(Ne));var et=bt*Y(qe);return[et*yt*Le/v*x(qe),et/yt*c(qe)]};return pe.invert=function(Le,Ne){var qe=ge(ne,Ne*yt/bt);return[Le*v/(x(qe)*bt*yt*Y(qe)),E(at*q(qe/at)/D)]},at===0&&(bt=C(ft/v),(pe=function(Le,Ne){return[Le*bt,c(Ne)/bt]}).invert=function(Le,Ne){return[Le/bt,E(Ne*bt)]}),pe}function cr(){var Xe=1,$e=0,at=45*_,ft=2,bt=(0,k.r)(Sr),yt=bt(Xe,$e,at,ft);return yt.a=function(D){return arguments.length?bt(Xe=+D,$e,at,ft):Xe},yt.b=function(D){return arguments.length?bt(Xe,$e=+D,at,ft):$e},yt.psiMax=function(D){return arguments.length?bt(Xe,$e,at=+D*_,ft):at*S},yt.ratio=function(D){return arguments.length?bt(Xe,$e,at,ft=+D):ft},yt.scale(180.739)}function Lr(Xe,$e,at,ft,bt,yt,D,Y,q,ne,pe){if(pe.nanEncountered)return NaN;var Le,Ne,qe,et,vt,xt,te,ue,we,Pe;if(Ne=Xe($e+.25*(Le=at-$e)),qe=Xe(at-.25*Le),isNaN(Ne))pe.nanEncountered=!0;else{if(!isNaN(qe))return Pe=((xt=(et=Le*(ft+4*Ne+bt)/12)+(vt=Le*(bt+4*qe+yt)/12))-D)/15,ne>q?(pe.maxDepthCount++,xt+Pe):Math.abs(Pe)<Y?xt+Pe:(ue=Lr(Xe,$e,te=$e+.5*Le,ft,Ne,bt,et,.5*Y,q,ne+1,pe),isNaN(ue)?(pe.nanEncountered=!0,NaN):(we=Lr(Xe,te,at,bt,qe,yt,vt,.5*Y,q,ne+1,pe),isNaN(we)?(pe.nanEncountered=!0,NaN):ue+we));pe.nanEncountered=!0}}function Rr(Xe,$e,at,ft,bt){ft===void 0&&(ft=1e-8),bt===void 0&&(bt=20);var yt=Xe($e),D=Xe(.5*($e+at)),Y=Xe(at);return Lr(Xe,$e,at,yt,D,Y,(yt+4*D+Y)*(at-$e)/6,ft,bt,1,{maxDepthCount:0,nanEncountered:!1})}function li(Xe,$e,at){function ft(qe){return Xe+(1-Xe)*n(1-n(qe,$e),1/$e)}function bt(qe){return Rr(ft,0,qe,1e-4)}for(var yt=1/bt(1),D=1e3,Y=1.00000001*yt,q=[],ne=0;ne<=D;ne++)q.push(bt(ne/D)*Y);function pe(qe){var et=0,vt=D,xt=500;do q[xt]>qe?vt=xt:et=xt,xt=et+vt>>1;while(xt>et);var te=q[xt+1]-q[xt];return te&&(te=(qe-q[xt+1])/te),(xt+1+te)/D}var Le=2*pe(1)/v*yt/at,Ne=function(qe,et){var vt=pe(A(c(et))),xt=ft(vt)*qe;return vt/=Le,[xt,et>=0?vt:-vt]};return Ne.invert=function(qe,et){var vt;return A(et*=Le)<1&&(vt=i(et)*E(bt(A(et))*yt)),[qe/ft(A(et)),vt]},Ne}function Si(){var Xe=0,$e=2.5,at=1.183136,ft=(0,k.r)(li),bt=ft(Xe,$e,at);return bt.alpha=function(yt){return arguments.length?ft(Xe=+yt,$e,at):Xe},bt.k=function(yt){return arguments.length?ft(Xe,$e=+yt,at):$e},bt.gamma=function(yt){return arguments.length?ft(Xe,$e,at=+yt):at},bt.scale(152.63)}function Oi(Xe,$e){return A(Xe[0]-$e[0])<f&&A(Xe[1]-$e[1])<f}function La(Xe,$e){for(var at,ft,bt,yt=-1,D=Xe.length,Y=Xe[0],q=[];++yt<D;){ft=((at=Xe[yt])[0]-Y[0])/$e,bt=(at[1]-Y[1])/$e;for(var ne=0;ne<$e;++ne)q.push([Y[0]+ne*ft,Y[1]+ne*bt]);Y=at}return q.push(at),q}function Vi(Xe){var $e,at,ft,bt,yt,D,Y,q=[],ne=Xe[0].length;for(Y=0;Y<ne;++Y)at=($e=Xe[0][Y])[0][0],ft=$e[0][1],bt=$e[1][1],yt=$e[2][0],D=$e[2][1],q.push(La([[at+f,ft+f],[at+f,bt-f],[yt-f,bt-f],[yt-f,D+f]],30));for(Y=Xe[1].length-1;Y>=0;--Y)at=($e=Xe[1][Y])[0][0],ft=$e[0][1],bt=$e[1][1],yt=$e[2][0],D=$e[2][1],q.push(La([[yt-f,D-f],[yt-f,bt+f],[at+f,bt+f],[at+f,ft-f]],30));return{type:"Polygon",coordinates:[(0,Tn.TS)(q)]}}function vi(Xe,$e,at){var ft,bt;function yt(q,ne){for(var pe=ne<0?-1:1,Le=$e[+(ne<0)],Ne=0,qe=Le.length-1;Ne<qe&&q>Le[Ne][2][0];++Ne);var et=Xe(q-Le[Ne][1][0],ne);return et[0]+=Xe(Le[Ne][1][0],pe*ne>pe*Le[Ne][0][1]?Le[Ne][0][1]:ne)[0],et}at?yt.invert=at(yt):Xe.invert&&(yt.invert=function(q,ne){for(var pe=bt[+(ne<0)],Le=$e[+(ne<0)],Ne=0,qe=pe.length;Ne<qe;++Ne){var et=pe[Ne];if(et[0][0]<=q&&q<et[1][0]&&et[0][1]<=ne&&ne<et[1][1]){var vt=Xe.invert(q-Xe(Le[Ne][1][0],0)[0],ne);return vt[0]+=Le[Ne][1][0],Oi(yt(vt[0],vt[1]),[q,ne])?vt:null}}});var D=(0,k.Z)(yt),Y=D.stream;return D.stream=function(q){var ne=D.rotate(),pe=Y(q),Le=(D.rotate([0,0]),Y(q));return D.rotate(ne),pe.sphere=function(){(0,an.Z)(ft,Le)},pe},D.lobes=function(q){return arguments.length?(ft=Vi(q),$e=q.map(function(ne){return ne.map(function(pe){return[[pe[0][0]*_,pe[0][1]*_],[pe[1][0]*_,pe[1][1]*_],[pe[2][0]*_,pe[2][1]*_]]})}),bt=$e.map(function(ne){return ne.map(function(pe){var Le,Ne=Xe(pe[0][0],pe[0][1])[0],qe=Xe(pe[2][0],pe[2][1])[0],et=Xe(pe[1][0],pe[0][1])[1],vt=Xe(pe[1][0],pe[1][1])[1];return et>vt&&(Le=et,et=vt,vt=Le),[[Ne,et],[qe,vt]]})}),D):$e.map(function(ne){return ne.map(function(pe){return[[pe[0][0]*S,pe[0][1]*S],[pe[1][0]*S,pe[1][1]*S],[pe[2][0]*S,pe[2][1]*S]]})})},$e!=null&&D.lobes($e),D}ir.invert=function(Xe,$e){return $e>-er?Me.invert(Xe,$e-or):Ie.invert(Xe,$e)},br.invert=function(Xe,$e){return A($e)>er?Me.invert(Xe,$e+($e>0?or:-or)):Ie.invert(Xe,$e)};var Ca=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function io(){return vi(ce,Ca).scale(160.857)}var Yo=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Xo(){return vi(br,Yo).scale(152.63)}var ll=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Gs(){return vi(Me,ll).scale(169.529)}var Jo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function ka(){return vi(Me,Jo).scale(169.529).rotate([20,0])}var Zs=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Di(){return vi(ir,Zs,he).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var hs=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function ya(){return vi(Ie,hs).scale(152.63).rotate([-20,0])}function Aa(Xe,$e){return[3/u*Xe*C(v*v/3-$e*$e),$e]}function xo(){return(0,k.Z)(Aa).scale(158.837)}function Qr(Xe){function $e(at,ft){if(A(A(ft)-g)<f)return[0,ft<0?-2:2];var bt=c(ft),yt=n((1+bt)/(1-bt),Xe/2),D=.5*(yt+1/yt)+x(at*=Xe);return[2*c(at)/D,(yt-1/yt)/D]}return $e.invert=function(at,ft){var bt=A(ft);if(A(bt-2)<f)return at?null:[0,i(ft)*g];if(bt>2)return null;var yt=(at/=2)*at,D=(ft/=2)*ft,Y=2*ft/(1+yt+D);return Y=n((1+Y)/(1-Y),1/Xe),[T(2*at,1-yt-D)/Xe,E((Y-1)/(Y+1))]},$e}function bo(){var Xe=.5,$e=(0,k.r)(Qr),at=$e(Xe);return at.spacing=function(ft){return arguments.length?$e(Xe=+ft):Xe},at.scale(124.75)}Aa.invert=function(Xe,$e){return[u/3*Xe/C(v*v/3-$e*$e),$e]};var Pa=v/m;function Va(Xe,$e){return[Xe*(1+C(x($e)))/2,$e/(x($e/2)*x(Xe/6))]}function Ja(){return(0,k.Z)(Va).scale(97.2672)}function ps(Xe,$e){var at=Xe*Xe,ft=$e*$e;return[Xe*(.975534+ft*(-.0143059*at-.119161+-.0547009*ft)),$e*(1.00384+at*(.0802894+-.02855*ft+199025e-9*at)+ft*(.0998909+-.0491032*ft))]}function ul(){return(0,k.Z)(ps).scale(139.98)}function ao(Xe,$e){return[c(Xe)/x($e),h($e)*x(Xe)]}function cl(){return(0,k.Z)(ao).scale(144.049).clipAngle(89.999)}function fl(Xe){var $e=x(Xe),at=h(y+Xe/2);function ft(bt,yt){var D=yt-Xe,Y=A(D)<f?bt*$e:A(Y=y+yt/2)<f||A(A(Y)-g)<f?0:bt*D/t(h(Y)/at);return[Y,D]}return ft.invert=function(bt,yt){var D,Y=yt+Xe;return[A(yt)<f?bt/$e:A(D=y+Y/2)<f||A(A(D)-g)<f?0:bt*t(h(D)/at)/yt,Y]},ft}function bl(){return Ae(fl).parallel(40).scale(158.837)}function Ws(Xe,$e){return[Xe,1.25*t(h(y+.4*$e))]}function hl(){return(0,k.Z)(Ws).scale(108.318)}function Ys(Xe){var $e=Xe.length-1;function at(ft,bt){for(var yt,D=x(bt),Y=2/(1+D*x(ft)),q=Y*D*c(ft),ne=Y*c(bt),pe=$e,Le=Xe[pe],Ne=Le[0],qe=Le[1];--pe>=0;)Ne=(Le=Xe[pe])[0]+q*(yt=Ne)-ne*qe,qe=Le[1]+q*qe+ne*yt;return[Ne=q*(yt=Ne)-ne*qe,qe=q*qe+ne*yt]}return at.invert=function(ft,bt){var yt=20,D=ft,Y=bt;do{for(var q,ne=$e,pe=Xe[ne],Le=pe[0],Ne=pe[1],qe=0,et=0;--ne>=0;)qe=Le+D*(q=qe)-Y*et,et=Ne+D*et+Y*q,Le=(pe=Xe[ne])[0]+D*(q=Le)-Y*Ne,Ne=pe[1]+D*Ne+Y*q;var vt,xt,te=(qe=Le+D*(q=qe)-Y*et)*qe+(et=Ne+D*et+Y*q)*et;D-=vt=((Le=D*(q=Le)-Y*Ne-ft)*qe+(Ne=D*Ne+Y*q-bt)*et)/te,Y-=xt=(Ne*qe-Le*et)/te}while(A(vt)+A(xt)>1e-12&&--yt>0);if(yt){var ue=C(D*D+Y*Y),we=2*l(.5*ue),Pe=c(we);return[T(D*Pe,ue*x(we)),ue?E(Y*Pe/ue):0]}},at}Va.invert=function(Xe,$e){var at=A(Xe),ft=A($e),bt=f,yt=g;ft<Pa?yt*=ft/Pa:bt+=6*L(Pa/ft);for(var D=0;D<25;D++){var Y=c(yt),q=C(x(yt)),ne=c(yt/2),pe=x(yt/2),Le=c(bt/6),Ne=x(bt/6),qe=.5*bt*(1+q)-at,et=yt/(pe*Ne)-ft,vt=q?-.25*bt*Y/q:0,xt=.5*(1+q),te=(1+.5*yt*ne/pe)/(pe*Ne),ue=yt/pe*(Le/6)/(Ne*Ne),we=vt*ue-te*xt,Pe=(qe*ue-et*xt)/we,De=(et*vt-qe*te)/we;if(yt-=Pe,bt-=De,A(Pe)<f&&A(De)<f)break}return[Xe<0?-bt:bt,$e<0?-yt:yt]},ps.invert=function(Xe,$e){var at=i(Xe)*v,ft=$e/2,bt=50;do{var yt=at*at,D=ft*ft,Y=at*ft,q=at*(.975534+D*(-.0143059*yt-.119161+-.0547009*D))-Xe,ne=ft*(1.00384+yt*(.0802894+-.02855*D+199025e-9*yt)+D*(.0998909+-.0491032*D))-$e,pe=.975534-D*(.119161+3*yt*.0143059+.0547009*D),Le=-Y*(.238322+.2188036*D+.0286118*yt),Ne=Y*(.1605788+7961e-7*yt+-.0571*D),qe=1.00384+yt*(.0802894+199025e-9*yt)+D*(3*(.0998909-.02855*yt)-.245516*D),et=Le*Ne-qe*pe,vt=(ne*Le-q*qe)/et,xt=(q*Ne-ne*pe)/et;at-=vt,ft-=xt}while((A(vt)>f||A(xt)>f)&&--bt>0);return bt&&[at,ft]},ao.invert=function(Xe,$e){var at=Xe*Xe,ft=$e*$e+1,bt=at+ft,yt=Xe?p*C((bt-C(bt*bt-4*at))/at):1/C(ft);return[E(Xe*yt),i($e)*L(yt)]},Ws.invert=function(Xe,$e){return[Xe,2.5*l(d(.8*$e))-.625*v]};var oo=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],so=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Ko=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],lo=[[.9245,0],[0,0],[.01943,0]],Xs=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Js(){return zo(oo,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Ro(){return zo(so,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Cs(){return zo(Ko,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function _o(){return zo(lo,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function $o(){return zo(Xs,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function zo(Xe,$e){var at=(0,k.Z)(Ys(Xe)).rotate($e).clipAngle(90),ft=(0,nt.Z)($e),bt=at.center;return delete at.rotate,at.center=function(yt){return arguments.length?bt(ft(yt)):ft.invert(bt())},at}var uo=C(6),ei=C(7);function wo(Xe,$e){var at=E(7*c($e)/(3*uo));return[uo*Xe*(2*x(2*at/3)-1)/ei,9*c(at/3)/ei]}function _l(){return(0,k.Z)(wo).scale(164.859)}function Ps(Xe,$e){for(var at,ft=(1+p)*c($e),bt=$e,yt=0;yt<25&&(bt-=at=(c(bt/2)+c(bt)-ft)/(.5*x(bt/2)+x(bt)),!(A(at)<f));yt++);return[Xe*(1+2*x(bt)/x(bt/2))/(3*m),2*C(3)*c(bt/2)/C(2+m)]}function ds(){return(0,k.Z)(Ps).scale(188.209)}function Do(Xe,$e){for(var at,ft=C(6/(4+v)),bt=(1+v/4)*c($e),yt=$e/2,D=0;D<25&&(yt-=at=(yt/2+c(yt)-bt)/(.5+x(yt)),!(A(at)<f));D++);return[ft*(.5+x(yt))*Xe/1.5,ft*yt]}function Qo(){return(0,k.Z)(Do).scale(166.518)}wo.invert=function(Xe,$e){var at=3*E($e*ei/9);return[Xe*ei/(uo*(2*x(2*at/3)-1)),E(3*c(at)*uo/7)]},Ps.invert=function(Xe,$e){var at=$e*C(2+m)/(2*C(3)),ft=2*E(at);return[3*m*Xe/(1+2*x(ft)/x(ft/2)),E((at+c(ft))/(1+p))]},Do.invert=function(Xe,$e){var at=C(6/(4+v)),ft=$e/at;return A(A(ft)-g)<f&&(ft=ft<0?-g:g),[1.5*Xe/(at*(.5+x(ft))),E((ft/2+c(ft))/(1+v/4))]};var Oa=e(26867);function Ks(Xe,$e){var at=$e*$e,ft=at*at,bt=at*ft;return[Xe*(.84719-.13063*at+bt*bt*(.05494*at-.04515-.02326*ft+.00331*bt)),$e*(1.01183+ft*ft*(.01926*at-.02625-.00396*ft))]}function gs(){return(0,k.Z)(Ks).scale(175.295)}function es(Xe,$e){return[Xe*(1+x($e))/2,2*($e-h($e/2))]}function vs(){return(0,k.Z)(es).scale(152.63)}Ks.invert=function(Xe,$e){var at,ft,bt,yt,D=$e,Y=25;do D-=at=(D*(1.01183+(bt=(ft=D*D)*ft)*bt*(.01926*ft-.02625-.00396*bt))-$e)/(1.01183+bt*bt*(.21186*ft-.23625+-.05148*bt));while(A(at)>b&&--Y>0);return[Xe/(.84719-.13063*(ft=D*D)+(yt=ft*(bt=ft*ft))*yt*(.05494*ft-.04515-.02326*bt+.00331*yt)),D]},es.invert=function(Xe,$e){for(var at=$e/2,ft=0,bt=1/0;ft<10&&A(bt)>f;++ft){var yt=x($e/2);$e-=bt=($e-h($e/2)-at)/(1-.5/(yt*yt))}return[2*Xe/(1+x($e)),$e]};var Fo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Bo(){return vi(se(1/0),Fo).rotate([20,0]).scale(152.63)}function ts(Xe,$e){var at=c($e),ft=x($e),bt=i(Xe);if(Xe===0||A($e)===g)return[0,$e];if($e===0)return[Xe,0];if(A(Xe)===g)return[Xe*ft,g*at];var yt=v/(2*Xe)-2*Xe/v,D=2*$e/v,Y=(1-D*D)/(at-D),q=yt*yt,ne=Y*Y,pe=1+q/ne,Le=1+ne/q,Ne=(yt*at/Y-yt/2)/pe,qe=(ne*at/q+Y/2)/Le,et=qe*qe-(ne*at*at/q+Y*at-1)/Le;return[g*(Ne+C(Ne*Ne+ft*ft/pe)*bt),g*(qe+C(et<0?0:et)*i(-$e*yt)*bt)]}function ms(){return(0,k.Z)(ts).scale(127.267)}ts.invert=function(Xe,$e){var at=(Xe/=g)*Xe,ft=at+($e/=g)*$e,bt=v*v;return[Xe?(ft-1+C((1-ft)*(1-ft)+4*at))/(2*Xe)*g:0,ge(function(yt){return ft*(v*c(yt)-2*yt)*v+4*yt*yt*($e-c(yt))+2*v*yt-bt*$e},0)]};var ys=1.0148,Ia=.23185,xs=-.14499,bs=.02406,$s=1.790857183;function To(Xe,$e){var at=$e*$e;return[Xe,$e*(ys+at*at*(Ia+at*(xs+bs*at)))]}function Os(){return(0,k.Z)(To).scale(139.319)}function _s(Xe,$e){if(A($e)<f)return[Xe,0];var at=h($e),ft=Xe*c($e);return[c(ft)/at,$e+(1-x(ft))/at]}function Qs(){return(0,k.Z)(_s).scale(103.74)}To.invert=function(Xe,$e){$e>$s?$e=$s:$e<-1.790857183&&($e=-1.790857183);var at,ft=$e;do{var bt=ft*ft;ft-=at=(ft*(ys+bt*bt*(Ia+bt*(xs+bs*bt)))-$e)/(1.0148+bt*bt*(1.1592500000000001+bt*(.21654*bt-1.01493)))}while(A(at)>f);return[Xe,ft]},_s.invert=function(Xe,$e){if(A($e)<f)return[Xe,0];var at,ft=Xe*Xe+$e*$e,bt=.5*$e,yt=10;do{var D=h(bt),Y=1/x(bt),q=ft-2*$e*bt+bt*bt;bt-=at=(D*q+2*(bt-$e))/(2+q*Y*Y+2*(bt-$e)*D)}while(A(at)>f&&--yt>0);return D=h(bt),[(A($e)<A(bt+1/D)?E(Xe*D):i($e)*i(Xe)*(L(A(Xe*D))+g))/c(bt),bt]};var ws=e(77338),ns=e(83074);function No(Xe,$e){return[Xe[0]*$e[0]+Xe[1]*$e[3],Xe[0]*$e[1]+Xe[1]*$e[4],Xe[0]*$e[2]+Xe[1]*$e[5]+Xe[2],Xe[3]*$e[0]+Xe[4]*$e[3],Xe[3]*$e[1]+Xe[4]*$e[4],Xe[3]*$e[2]+Xe[4]*$e[5]+Xe[5]]}function jo(Xe,$e){return[Xe[0]-$e[0],Xe[1]-$e[1]]}function ai(Xe){return C(Xe[0]*Xe[0]+Xe[1]*Xe[1])}function ko(Xe,$e,at){function ft(Y,q){var ne,pe=$e(Y,q),Le=pe.project([Y*S,q*S]);return(ne=pe.transform)?[ne[0]*Le[0]+ne[1]*Le[1]+ne[2],-(ne[3]*Le[0]+ne[4]*Le[1]+ne[5])]:(Le[1]=-Le[1],Le)}function bt(Y,q){var ne=Y.project.invert,pe=Y.transform,Le=q;if(pe&&(pe=function(xt){var te=1/(xt[0]*xt[4]-xt[1]*xt[3]);return[te*xt[4],-te*xt[1],te*(xt[1]*xt[5]-xt[2]*xt[4]),-te*xt[3],te*xt[0],te*(xt[2]*xt[3]-xt[0]*xt[5])]}(pe),Le=[pe[0]*Le[0]+pe[1]*Le[1]+pe[2],pe[3]*Le[0]+pe[4]*Le[1]+pe[5]]),ne&&Y===function(xt){return $e(xt[0]*_,xt[1]*_)}(Ne=ne(Le)))return Ne;for(var Ne,qe=Y.children,et=0,vt=qe&&qe.length;et<vt;++et)if(Ne=bt(qe[et],q))return Ne}(function Y(q,ne){if(q.edges=function(De){for(var Ue=De.length,Ze=[],Je=De[Ue-1],it=0;it<Ue;++it)Ze.push([Je,Je=De[it]]);return Ze}(q.face),ne.face){var pe=q.shared=function(De,Ue){for(var Ze,Je,it=De.length,ut=null,St=0;St<it;++St){Ze=De[St];for(var Dt=Ue.length;--Dt>=0;)if(Je=Ue[Dt],Ze[0]===Je[0]&&Ze[1]===Je[1]){if(ut)return[ut,Ze];ut=Ze}}}(q.face,ne.face),Le=(vt=pe.map(ne.project),xt=pe.map(q.project),te=jo(vt[1],vt[0]),ue=jo(xt[1],xt[0]),we=function(De,Ue){return T(De[0]*Ue[1]-De[1]*Ue[0],De[0]*Ue[0]+De[1]*Ue[1])}(te,ue),Pe=ai(te)/ai(ue),No([1,0,vt[0][0],0,1,vt[0][1]],No([Pe,0,0,0,Pe,0],No([x(we),c(we),0,-c(we),x(we),0],[1,0,-xt[0][0],0,1,-xt[0][1]]))));q.transform=ne.transform?No(ne.transform,Le):Le;for(var Ne=ne.edges,qe=0,et=Ne.length;qe<et;++qe)Wi(pe[0],Ne[qe][1])&&Wi(pe[1],Ne[qe][0])&&(Ne[qe]=q),Wi(pe[0],Ne[qe][0])&&Wi(pe[1],Ne[qe][1])&&(Ne[qe]=q);for(qe=0,et=(Ne=q.edges).length;qe<et;++qe)Wi(pe[0],Ne[qe][0])&&Wi(pe[1],Ne[qe][1])&&(Ne[qe]=ne),Wi(pe[0],Ne[qe][1])&&Wi(pe[1],Ne[qe][0])&&(Ne[qe]=ne)}else q.transform=ne.transform;var vt,xt,te,ue,we,Pe;return q.children&&q.children.forEach(function(De){Y(De,q)}),q})(Xe,{transform:null}),Xr(Xe)&&(ft.invert=function(Y,q){var ne=bt(Xe,[Y,-q]);return ne&&(ne[0]*=_,ne[1]*=_,ne)});var yt=(0,k.Z)(ft),D=yt.stream;return yt.stream=function(Y){var q=yt.rotate(),ne=D(Y),pe=(yt.rotate([0,0]),D(Y));return yt.rotate(q),ne.sphere=function(){pe.polygonStart(),pe.lineStart(),Ao(pe,Xe),pe.lineEnd(),pe.polygonEnd()},ne},yt.angle(at==null?-30:at*S)}function Ao(Xe,$e,at){var ft,bt,yt=$e.edges,D=yt.length,Y={type:"MultiPoint",coordinates:$e.face},q=$e.face.filter(function(vt){return A(vt[1])!==90}),ne=(0,ws.Z)({type:"MultiPoint",coordinates:q}),pe=!1,Le=-1,Ne=ne[1][0]-ne[0][0],qe=Ne===180||Ne===360?[(ne[0][0]+ne[1][0])/2,(ne[0][1]+ne[1][1])/2]:(0,He.Z)(Y);if(at)for(;++Le<D&&yt[Le]!==at;);++Le;for(var et=0;et<D;++et)bt=yt[(et+Le)%D],Array.isArray(bt)?(pe||(Xe.point((ft=(0,ns.Z)(bt[0],qe)(f))[0],ft[1]),pe=!0),Xe.point((ft=(0,ns.Z)(bt[1],qe)(f))[0],ft[1])):(pe=!1,bt!==at&&Ao(Xe,bt,$e))}function Wi(Xe,$e){return Xe&&$e&&Xe[0]===$e[0]&&Xe[1]===$e[1]}function Xr(Xe){return Xe.project.invert||Xe.children&&Xe.children.some(Xr)}var Kr=e(98936),co=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Ka=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Xe){return Xe.map(function($e){return co[$e]})});function Is(Xe){Xe=Xe||function(at){var ft=(0,He.Z)({type:"MultiPoint",coordinates:at});return(0,Kr.Z)().scale(1).translate([0,0]).rotate([-ft[0],-ft[1]])};var $e=Ka.map(function(at){return{face:at,project:Xe(at)}});return[-1,0,0,1,0,1,4,5].forEach(function(at,ft){var bt=$e[at];bt&&(bt.children||(bt.children=[])).push($e[ft])}),ko($e[0],function(at,ft){return $e[at<-v/2?ft<0?6:4:at<0?ft<0?2:0:at<v/2?ft<0?3:1:ft<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var el=2/C(3);function Uo(Xe,$e){var at=Ct(Xe,$e);return[at[0]*el,at[1]]}function tl(Xe){Xe=Xe||function(at){var ft=(0,He.Z)({type:"MultiPoint",coordinates:at});return(0,k.Z)(Uo).translate([0,0]).scale(1).rotate(ft[1]>0?[-ft[0],0]:[180-ft[0],180])};var $e=Ka.map(function(at){return{face:at,project:Xe(at)}});return[-1,0,0,1,0,1,4,5].forEach(function(at,ft){var bt=$e[at];bt&&(bt.children||(bt.children=[])).push($e[ft])}),ko($e[0],function(at,ft){return $e[at<-v/2?ft<0?6:4:at<0?ft<0?2:0:at<v/2?ft<0?3:1:ft<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Vo(Xe){Xe=Xe||function(yt){var D=yt.length===6?(0,He.Z)({type:"MultiPoint",coordinates:yt}):yt[0];return(0,Kr.Z)().scale(1).translate([0,0]).rotate([-D[0],-D[1]])};var $e=Ka.map(function(yt){for(var D,Y=yt.map(mi),q=Y.length,ne=Y[q-1],pe=[],Le=0;Le<q;++Le)D=Y[Le],pe.push(Ho([.9486832980505138*ne[0]+.31622776601683794*D[0],.9486832980505138*ne[1]+.31622776601683794*D[1],.9486832980505138*ne[2]+.31622776601683794*D[2]]),Ho([.9486832980505138*D[0]+.31622776601683794*ne[0],.9486832980505138*D[1]+.31622776601683794*ne[1],.9486832980505138*D[2]+.31622776601683794*ne[2]])),ne=D;return pe}),at=[],ft=[-1,0,0,1,0,1,4,5];$e.forEach(function(yt,D){for(var Y,q,ne=Ka[D],pe=ne.length,Le=at[D]=[],Ne=0;Ne<pe;++Ne)$e.push([ne[Ne],yt[(2*Ne+2)%(2*pe)],yt[(2*Ne+1)%(2*pe)]]),ft.push(D),Le.push((Y=mi(yt[(2*Ne+2)%(2*pe)]),q=mi(yt[(2*Ne+1)%(2*pe)]),[Y[1]*q[2]-Y[2]*q[1],Y[2]*q[0]-Y[0]*q[2],Y[0]*q[1]-Y[1]*q[0]]))});var bt=$e.map(function(yt){return{project:Xe(yt),face:yt}});return ft.forEach(function(yt,D){var Y=bt[yt];Y&&(Y.children||(Y.children=[])).push(bt[D])}),ko(bt[0],function(yt,D){var Y=x(D),q=[Y*x(yt),Y*c(yt),c(D)],ne=yt<-v/2?D<0?6:4:yt<0?D<0?2:0:yt<v/2?D<0?3:1:D<0?7:5,pe=at[ne];return bt[fo(pe[0],q)<0?8+3*ne:fo(pe[1],q)<0?8+3*ne+1:fo(pe[2],q)<0?8+3*ne+2:ne]}).angle(-30).scale(110.625).center([0,45])}function fo(Xe,$e){for(var at=0,ft=Xe.length,bt=0;at<ft;++at)bt+=Xe[at]*$e[at];return bt}function Ho(Xe){return[T(Xe[1],Xe[0])*S,E(o(-1,r(1,Xe[2])))*S]}function mi(Xe){var $e=Xe[0]*_,at=Xe[1]*_,ft=x(at);return[ft*x($e),ft*c($e),c(at)]}function $a(){}function qo(Xe,$e){var at,ft=$e.stream;if(!ft)throw new Error("invalid projection");switch(Xe&&Xe.type){case"Feature":at=Yi;break;case"FeatureCollection":at=Ri;break;default:at=Xi}return at(Xe,ft)}function Ri(Xe,$e){return{type:"FeatureCollection",features:Xe.features.map(function(at){return Yi(at,$e)})}}function Yi(Xe,$e){return{type:"Feature",id:Xe.id,properties:Xe.properties,geometry:Xi(Xe.geometry,$e)}}function Xi(Xe,$e){if(!Xe)return null;if(Xe.type==="GeometryCollection")return function(ft,bt){return{type:"GeometryCollection",geometries:ft.geometries.map(function(yt){return Xi(yt,bt)})}}(Xe,$e);var at;switch(Xe.type){case"Point":case"MultiPoint":at=Mo;break;case"LineString":case"MultiLineString":at=Ra;break;case"Polygon":case"MultiPolygon":case"Sphere":at=Fi;break;default:return null}return(0,an.Z)(Xe,$e(at)),at.result()}Uo.invert=function(Xe,$e){return Ct.invert(Xe/el,$e)};var Gi=[],la=[],Mo={point:function(Xe,$e){Gi.push([Xe,$e])},result:function(){var Xe=Gi.length?Gi.length<2?{type:"Point",coordinates:Gi[0]}:{type:"MultiPoint",coordinates:Gi}:null;return Gi=[],Xe}},Ra={lineStart:$a,point:function(Xe,$e){Gi.push([Xe,$e])},lineEnd:function(){Gi.length&&(la.push(Gi),Gi=[])},result:function(){var Xe=la.length?la.length<2?{type:"LineString",coordinates:la[0]}:{type:"MultiLineString",coordinates:la}:null;return la=[],Xe}},Fi={polygonStart:$a,lineStart:$a,point:function(Xe,$e){Gi.push([Xe,$e])},lineEnd:function(){var Xe=Gi.length;if(Xe){do Gi.push(Gi[0].slice());while(++Xe<4);la.push(Gi),Gi=[]}},polygonEnd:$a,result:function(){if(!la.length)return null;var Xe=[],$e=[];return la.forEach(function(at){(function(ft){if((bt=ft.length)<4)return!1;for(var bt,yt=0,D=ft[bt-1][1]*ft[0][0]-ft[bt-1][0]*ft[0][1];++yt<bt;)D+=ft[yt-1][1]*ft[yt][0]-ft[yt-1][0]*ft[yt][1];return D<=0})(at)?Xe.push([at]):$e.push(at)}),$e.forEach(function(at){var ft=at[0];Xe.some(function(bt){if(function(yt,D){for(var Y=D[0],q=D[1],ne=!1,pe=0,Le=yt.length,Ne=Le-1;pe<Le;Ne=pe++){var qe=yt[pe],et=qe[0],vt=qe[1],xt=yt[Ne],te=xt[0],ue=xt[1];vt>q^ue>q&&Y<(te-et)*(q-vt)/(ue-vt)+et&&(ne=!ne)}return ne}(bt[0],ft))return bt.push(at),!0})||Xe.push([at])}),la=[],Xe.length?Xe.length>1?{type:"MultiPolygon",coordinates:Xe}:{type:"Polygon",coordinates:Xe[0]}:null}};function xa(Xe){var $e=Xe(g,0)[0]-Xe(-g,0)[0];function at(ft,bt){var yt=A(ft)<g,D=Xe(yt?ft:ft>0?ft-v:ft+v,bt),Y=(D[0]-D[1])*p,q=(D[0]+D[1])*p;if(yt)return[Y,q];var ne=$e*p,pe=Y>0^q>0?-1:1;return[pe*Y-i(q)*ne,pe*q-i(Y)*ne]}return Xe.invert&&(at.invert=function(ft,bt){var yt=(ft+bt)*p,D=(bt-ft)*p,Y=A(yt)<.5*$e&&A(D)<.5*$e;if(!Y){var q=$e*p,ne=yt>0^D>0?-1:1,pe=-ne*ft+(D>0?1:-1)*q,Le=-ne*bt+(yt>0?1:-1)*q;yt=(-pe-Le)*p,D=(pe-Le)*p}var Ne=Xe.invert(yt,D);return Y||(Ne[0]+=yt>0?v:-v),Ne}),(0,k.Z)(at).rotate([-90,-90,45]).clipAngle(179.999)}function Rs(){return xa(Gn).scale(176.423)}function zs(){return xa(kn).scale(111.48)}function aa(Xe,$e){if(!(0<=($e=+$e)&&$e<=20))throw new Error("invalid digits");function at(ne){var pe=ne.length,Le=2,Ne=new Array(pe);for(Ne[0]=+ne[0].toFixed($e),Ne[1]=+ne[1].toFixed($e);Le<pe;)Ne[Le]=ne[Le],++Le;return Ne}function ft(ne){return ne.map(at)}function bt(ne){for(var pe=at(ne[0]),Le=[pe],Ne=1;Ne<ne.length;Ne++){var qe=at(ne[Ne]);(qe.length>2||qe[0]!=pe[0]||qe[1]!=pe[1])&&(Le.push(qe),pe=qe)}return Le.length===1&&ne.length>1&&Le.push(at(ne[ne.length-1])),Le}function yt(ne){return ne.map(bt)}function D(ne){if(ne==null)return ne;var pe;switch(ne.type){case"GeometryCollection":pe={type:"GeometryCollection",geometries:ne.geometries.map(D)};break;case"Point":pe={type:"Point",coordinates:at(ne.coordinates)};break;case"MultiPoint":pe={type:ne.type,coordinates:ft(ne.coordinates)};break;case"LineString":pe={type:ne.type,coordinates:bt(ne.coordinates)};break;case"MultiLineString":case"Polygon":pe={type:ne.type,coordinates:yt(ne.coordinates)};break;case"MultiPolygon":pe={type:"MultiPolygon",coordinates:ne.coordinates.map(yt)};break;default:return ne}return ne.bbox!=null&&(pe.bbox=ne.bbox),pe}function Y(ne){var pe={type:"Feature",properties:ne.properties,geometry:D(ne.geometry)};return ne.id!=null&&(pe.id=ne.id),ne.bbox!=null&&(pe.bbox=ne.bbox),pe}if(Xe!=null)switch(Xe.type){case"Feature":return Y(Xe);case"FeatureCollection":var q={type:"FeatureCollection",features:Xe.features.map(Y)};return Xe.bbox!=null&&(q.bbox=Xe.bbox),q;default:return D(Xe)}return Xe}function _r(Xe){var $e=c(Xe);function at(ft,bt){var yt=$e?h(ft*$e/2)/$e:ft/2;if(!bt)return[2*yt,-Xe];var D=2*l(yt*c(bt)),Y=1/h(bt);return[c(D)*Y,bt+(1-x(D))*Y-Xe]}return at.invert=function(ft,bt){if(A(bt+=Xe)<f)return[$e?2*l($e*ft/2)/$e:ft,0];var yt,D=ft*ft+bt*bt,Y=0,q=10;do{var ne=h(Y),pe=1/x(Y),Le=D-2*bt*Y+Y*Y;Y-=yt=(ne*Le+2*(Y-bt))/(2+Le*pe*pe+2*(Y-bt)*ne)}while(A(yt)>f&&--q>0);var Ne=ft*(ne=h(Y)),qe=h(A(bt)<A(Y+1/ne)?.5*E(Ne):.5*L(Ne)+v/4)/c(Y);return[$e?2*l($e*qe)/$e:2*qe,Y]},at}function Go(){return Ae(_r).scale(131.215)}var ua=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Ds(Xe,$e){var at,ft=r(18,36*A($e)/v),bt=s(ft),yt=ft-bt,D=(at=ua[bt])[0],Y=at[1],q=(at=ua[++bt])[0],ne=at[1],pe=(at=ua[r(19,++bt)])[0],Le=at[1];return[Xe*(q+yt*(pe-D)/2+yt*yt*(pe-2*q+D)/2),($e>0?g:-g)*(ne+yt*(Le-Y)/2+yt*yt*(Le-2*ne+Y)/2)]}function rs(){return(0,k.Z)(Ds).scale(152.63)}function is(Xe,$e){var at=function(D){function Y(q,ne){var pe=x(ne),Le=(D-1)/(D-pe*x(q));return[Le*pe*c(q),Le*c(ne)]}return Y.invert=function(q,ne){var pe=q*q+ne*ne,Le=C(pe),Ne=(D-C(1-pe*(D+1)/(D-1)))/((D-1)/Le+Le/(D-1));return[T(q*Ne,Le*C(1-Ne*Ne)),Le?E(ne*Ne/Le):0]},Y}(Xe);if(!$e)return at;var ft=x($e),bt=c($e);function yt(D,Y){var q=at(D,Y),ne=q[1],pe=ne*bt/(Xe-1)+ft;return[q[0]*ft/pe,ne/pe]}return yt.invert=function(D,Y){var q=(Xe-1)/(Xe-1-Y*bt);return at.invert(q*D,q*Y*ft)},yt}function as(){var Xe=2,$e=0,at=(0,k.r)(is),ft=at(Xe,$e);return ft.distance=function(bt){return arguments.length?at(Xe=+bt,$e):Xe},ft.tilt=function(bt){return arguments.length?at(Xe,$e=bt*_):$e*S},ft.scale(432.147).clipAngle(L(1/Xe)*S-1e-6)}ua.forEach(function(Xe){Xe[1]*=1.0144}),Ds.invert=function(Xe,$e){var at=$e/g,ft=90*at,bt=r(18,A(ft/5)),yt=o(0,s(bt));do{var D=ua[yt][1],Y=ua[yt+1][1],q=ua[r(19,yt+2)][1],ne=q-D,pe=q-2*Y+D,Le=2*(A(at)-Y)/ne,Ne=pe/ne,qe=Le*(1-Ne*Le*(1-2*Ne*Le));if(qe>=0||yt===1){ft=($e>=0?5:-5)*(qe+bt);var et,vt=50;do qe=(bt=r(18,A(ft)/5))-(yt=s(bt)),D=ua[yt][1],Y=ua[yt+1][1],q=ua[r(19,yt+2)][1],ft-=(et=($e>=0?g:-g)*(Y+qe*(q-D)/2+qe*qe*(q-2*Y+D)/2)-$e)*S;while(A(et)>b&&--vt>0);break}}while(--yt>=0);var xt=ua[yt][0],te=ua[yt+1][0],ue=ua[r(19,yt+2)][0];return[Xe/(te+qe*(ue-xt)/2+qe*qe*(ue-2*te+xt)/2),ft*_]};var wr=-179.9999,os=179.9999,za=-89.9999,Fs=89.9999;function Ts(Xe){return Xe.length>0}function Ji(Xe){return Xe===-90||Xe===90?[0,Xe]:[-180,($e=Xe,Math.floor(1e4*$e)/1e4)];var $e}function Zo(Xe){var $e=Xe[0],at=Xe[1],ft=!1;return $e<=wr?($e=-180,ft=!0):$e>=os&&($e=180,ft=!0),at<=za?(at=-90,ft=!0):at>=Fs&&(at=90,ft=!0),ft?[$e,at]:Xe}function ho(Xe){return Xe.map(Zo)}function ba(Xe,$e,at){for(var ft=0,bt=Xe.length;ft<bt;++ft){var yt=Xe[ft].slice();at.push({index:-1,polygon:$e,ring:yt});for(var D=0,Y=yt.length;D<Y;++D){var q=yt[D],ne=q[0],pe=q[1];if(ne<=wr||ne>=os||pe<=za||pe>=Fs){yt[D]=Zo(q);for(var Le=D+1;Le<Y;++Le){var Ne=yt[Le],qe=Ne[0],et=Ne[1];if(qe>wr&&qe<os&&et>za&&et<Fs)break}if(Le===D+1)continue;if(D){var vt={index:-1,polygon:$e,ring:yt.slice(0,D+1)};vt.ring[vt.ring.length-1]=Ji(pe),at[at.length-1]=vt}else at.pop();if(Le>=Y)break;at.push({index:-1,polygon:$e,ring:yt=yt.slice(Le-1)}),yt[0]=Ji(yt[0][1]),D=-1,Y=yt.length}}}}function So(Xe){var $e,at,ft,bt,yt,D,Y=Xe.length,q={},ne={};for($e=0;$e<Y;++$e)ft=(at=Xe[$e]).ring[0],yt=at.ring[at.ring.length-1],ft[0]!==yt[0]||ft[1]!==yt[1]?(at.index=$e,q[ft]=ne[yt]=at):(at.polygon.push(at.ring),Xe[$e]=null);for($e=0;$e<Y;++$e)if(at=Xe[$e]){if(ft=at.ring[0],yt=at.ring[at.ring.length-1],bt=ne[ft],D=q[yt],delete q[ft],delete ne[yt],ft[0]===yt[0]&&ft[1]===yt[1]){at.polygon.push(at.ring);continue}bt?(delete ne[ft],delete q[bt.ring[0]],bt.ring.pop(),Xe[bt.index]=null,at={index:-1,polygon:bt.polygon,ring:bt.ring.concat(at.ring)},bt===D?at.polygon.push(at.ring):(at.index=Y++,Xe.push(q[at.ring[0]]=ne[at.ring[at.ring.length-1]]=at))):D?(delete q[yt],delete ne[D.ring[D.ring.length-1]],at.ring.pop(),at={index:Y++,polygon:D.polygon,ring:at.ring.concat(D.ring)},Xe[D.index]=null,Xe.push(q[at.ring[0]]=ne[at.ring[at.ring.length-1]]=at)):(at.ring.push(at.ring[0]),at.polygon.push(at.ring))}}function Ha(Xe){var $e={type:"Feature",geometry:Da(Xe.geometry)};return Xe.id!=null&&($e.id=Xe.id),Xe.bbox!=null&&($e.bbox=Xe.bbox),Xe.properties!=null&&($e.properties=Xe.properties),$e}function Da(Xe){if(Xe==null)return Xe;var $e,at,ft,bt;switch(Xe.type){case"GeometryCollection":$e={type:"GeometryCollection",geometries:Xe.geometries.map(Da)};break;case"Point":$e={type:"Point",coordinates:Zo(Xe.coordinates)};break;case"MultiPoint":case"LineString":$e={type:Xe.type,coordinates:ho(Xe.coordinates)};break;case"MultiLineString":$e={type:"MultiLineString",coordinates:Xe.coordinates.map(ho)};break;case"Polygon":var yt=[];ba(Xe.coordinates,yt,at=[]),So(at),$e={type:"Polygon",coordinates:yt};break;case"MultiPolygon":at=[],ft=-1,bt=Xe.coordinates.length;for(var D=new Array(bt);++ft<bt;)ba(Xe.coordinates[ft],D[ft]=[],at);So(at),$e={type:"MultiPolygon",coordinates:D.filter(Ts)};break;default:return Xe}return Xe.bbox!=null&&($e.bbox=Xe.bbox),$e}function Wo(Xe){if(Xe==null)return Xe;switch(Xe.type){case"Feature":return Ha(Xe);case"FeatureCollection":var $e={type:"FeatureCollection",features:Xe.features.map(Ha)};return Xe.bbox!=null&&($e.bbox=Xe.bbox),$e;default:return Da(Xe)}}function Ki(Xe,$e){var at=h($e/2),ft=c(y*at);return[Xe*(.74482-.34588*ft*ft),1.70711*at]}function Fa(){return(0,k.Z)(Ki).scale(146.153)}function ri(Xe,$e,at){var ft=(0,ns.Z)($e,at),bt=ft(.5),yt=(0,nt.Z)([-bt[0],-bt[1]])($e),D=ft.distance/2,Y=-E(c(yt[1]*_)/c(D)),q=[-bt[0],-bt[1],-(yt[0]>0?v-Y:Y)*S],ne=(0,k.Z)(Xe(D)).rotate(q),pe=(0,nt.Z)(q),Le=ne.center;return delete ne.rotate,ne.center=function(Ne){return arguments.length?Le(pe(Ne)):pe.invert(Le())},ne.clipAngle(90)}function ks(Xe){var $e=x(Xe);function at(ft,bt){var yt=(0,Kr.M)(ft,bt);return yt[0]*=$e,yt}return at.invert=function(ft,bt){return Kr.M.invert(ft/$e,bt)},at}function Ma(){return Ba([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Ba(Xe,$e){return ri(ks,Xe,$e)}function Qa(Xe){if(!(Xe*=2))return X.N;var $e=-Xe/2,at=-$e,ft=Xe*Xe,bt=h(at),yt=.5/c(at);function D(Y,q){var ne=L(x(q)*x(Y-$e)),pe=L(x(q)*x(Y-at));return[((ne*=ne)-(pe*=pe))/(2*Xe),(q<0?-1:1)*C(4*ft*pe-(ft-ne+pe)*(ft-ne+pe))/(2*Xe)]}return D.invert=function(Y,q){var ne,pe,Le=q*q,Ne=x(C(Le+(ne=Y+$e)*ne)),qe=x(C(Le+(ne=Y+at)*ne));return[T(pe=Ne-qe,ne=(Ne+qe)*bt),(q<0?-1:1)*L(C(ne*ne+pe*pe)*yt)]},D}function ca(){return ni([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function ni(Xe,$e){return ri(Qa,Xe,$e)}function Hi(Xe,$e){if(A($e)<f)return[Xe,0];var at=A($e/g),ft=E(at);if(A(Xe)<f||A(A($e)-g)<f)return[0,i($e)*v*h(ft/2)];var bt=x(ft),yt=A(v/Xe-Xe/v)/2,D=yt*yt,Y=bt/(at+bt-1),q=Y*(2/at-1),ne=q*q,pe=ne+D,Le=Y-ne,Ne=D+Y;return[i(Xe)*v*(yt*Le+C(D*Le*Le-pe*(Y*Y-ne)))/pe,i($e)*v*(q*Ne-yt*C((D+1)*pe-Ne*Ne))/pe]}function qa(){return(0,k.Z)(Hi).scale(79.4183)}function fa(Xe,$e){if(A($e)<f)return[Xe,0];var at=A($e/g),ft=E(at);if(A(Xe)<f||A(A($e)-g)<f)return[0,i($e)*v*h(ft/2)];var bt=x(ft),yt=A(v/Xe-Xe/v)/2,D=yt*yt,Y=bt*(C(1+D)-yt*bt)/(1+D*at*at);return[i(Xe)*v*Y,i($e)*v*C(1-Y*(2*yt+Y))]}function eo(){return(0,k.Z)(fa).scale(79.4183)}function Eo(Xe,$e){if(A($e)<f)return[Xe,0];var at=$e/g,ft=E(at);if(A(Xe)<f||A(A($e)-g)<f)return[0,v*h(ft/2)];var bt=(v/Xe-Xe/v)/2,yt=at/(1+x(ft));return[v*(i(Xe)*C(bt*bt+1-yt*yt)-bt),v*yt]}function po(){return(0,k.Z)(Eo).scale(79.4183)}function $i(Xe,$e){if(!$e)return[Xe,0];var at=A($e);if(!Xe||at===g)return[0,$e];var ft=at/g,bt=ft*ft,yt=(8*ft-bt*(bt+2)-5)/(2*bt*(ft-1)),D=yt*yt,Y=ft*yt,q=bt+D+2*Y,ne=ft+3*yt,pe=Xe/g,Le=pe+1/pe,Ne=i(A(Xe)-g)*C(Le*Le-4),qe=Ne*Ne,et=(Ne*(q+D-1)+2*C(q*(bt+D*qe-1)+(1-bt)*(bt*(ne*ne+4*D)+12*Y*D+4*D*D)))/(4*q+qe);return[i(Xe)*g*et,i($e)*g*C(1+Ne*A(et)-et*et)]}function Na(){return(0,k.Z)($i).scale(127.16)}function Mr(Xe,$e,at,ft){var bt=v/3;Xe=o(Xe,f),$e=o($e,f),Xe=r(Xe,g),$e=r($e,v-f),at=o(at,0),at=r(at,99.999999);var yt=(ft=o(ft,f))/100,D=L((at/100+1)*x(bt))/bt,Y=c(Xe)/c(D*g),q=$e/v,ne=C(yt*c(Xe/2)/c($e/2));return function(pe,Le,Ne,qe,et){function vt(xt,te){var ue=Ne*c(qe*te),we=C(1-ue*ue),Pe=C(2/(1+we*x(xt*=et)));return[pe*we*Pe*c(xt),Le*ue*Pe]}return vt.invert=function(xt,te){var ue=xt/pe,we=te/Le,Pe=C(ue*ue+we*we),De=2*E(Pe/2);return[T(xt*h(De),pe*Pe)/et,Pe&&E(te*c(De)/(Le*Ne*Pe))/qe]},vt}(ne/C(q*Y*D),1/(ne*C(q*Y*D)),Y,D,q)}function Or(){var Xe=65*_,$e=60*_,at=20,ft=200,bt=(0,k.r)(Mr),yt=bt(Xe,$e,at,ft);return yt.poleline=function(D){return arguments.length?bt(Xe=+D*_,$e,at,ft):Xe*S},yt.parallels=function(D){return arguments.length?bt(Xe,$e=+D*_,at,ft):$e*S},yt.inflation=function(D){return arguments.length?bt(Xe,$e,at=+D,ft):at},yt.ratio=function(D){return arguments.length?bt(Xe,$e,at,ft=+D):ft},yt.scale(163.775)}function ss(){return Or().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}Ki.invert=function(Xe,$e){var at=$e/1.70711,ft=c(y*at);return[Xe/(.74482-.34588*ft*ft),2*l(at)]},Hi.invert=function(Xe,$e){if(A($e)<f)return[Xe,0];if(A(Xe)<f)return[0,g*c(2*l($e/v))];var at=(Xe/=v)*Xe,ft=($e/=v)*$e,bt=at+ft,yt=bt*bt,D=-A($e)*(1+bt),Y=D-2*ft+at,q=-2*D+1+2*ft+yt,ne=ft/q+(2*Y*Y*Y/(q*q*q)-9*D*Y/(q*q))/27,pe=(D-Y*Y/(3*q))/q,Le=2*C(-pe/3),Ne=L(3*ne/(pe*Le))/3;return[v*(bt-1+C(1+2*(at-ft)+yt))/(2*Xe),i($e)*v*(-Le*x(Ne+v/3)-Y/(3*q))]},fa.invert=function(Xe,$e){if(!Xe)return[0,g*c(2*l($e/v))];var at=A(Xe/v),ft=(1-at*at-($e/=v)*$e)/(2*at),bt=C(ft*ft+1);return[i(Xe)*v*(bt-ft),i($e)*g*c(2*T(C((1-2*ft*at)*(ft+bt)-at),C(bt+ft+at)))]},Eo.invert=function(Xe,$e){if(!$e)return[Xe,0];var at=$e/v,ft=(v*v*(1-at*at)-Xe*Xe)/(2*v*Xe);return[Xe?v*(i(Xe)*C(ft*ft+1)-ft):0,g*c(2*l(at))]},$i.invert=function(Xe,$e){var at;if(!Xe||!$e)return[Xe,$e];$e/=v;var ft=i(Xe)*Xe/g,bt=(ft*ft-1+4*$e*$e)/A(ft),yt=bt*bt,D=2*$e,Y=50;do{var q=D*D,ne=(8*D-q*(q+2)-5)/(2*q*(D-1)),pe=(3*D-q*D-10)/(2*q*D),Le=ne*ne,Ne=D*ne,qe=D+ne,et=qe*qe,vt=D+3*ne,xt=-2*qe*(4*Ne*Le+(1-4*q+3*q*q)*(1+pe)+Le*(14*q-6-yt+(8*q-8-2*yt)*pe)+Ne*(12*q-8+(10*q-10-yt)*pe)),te=C(et*(q+Le*yt-1)+(1-q)*(q*(vt*vt+4*Le)+Le*(12*Ne+4*Le)));D-=at=(bt*(et+Le-1)+2*te-ft*(4*et+yt))/(bt*(2*ne*pe+2*qe*(1+pe))+xt/te-8*qe*(bt*(-1+Le+et)+2*te)*(1+pe)/(yt+4*et))}while(at>f&&--Y>0);return[i(Xe)*(C(bt*bt+4)+bt)*v/4,g*D]};var go=4*v+3*C(3),Ga=2*C(2*v*C(3)/go),Qi=ke(Ga*C(3)/v,Ga,go/6);function Bs(){return(0,k.Z)(Qi).scale(176.84)}function ha(Xe,$e){return[Xe*C(1-3*$e*$e/(v*v)),$e]}function ls(){return(0,k.Z)(ha).scale(152.63)}function vo(Xe,$e){var at=x($e),ft=x(Xe)*at,bt=1-ft,yt=x(Xe=T(c(Xe)*at,-c($e))),D=c(Xe);return[D*(at=C(1-ft*ft))-yt*bt,-yt*at-D*bt]}function oi(){return(0,k.Z)(vo).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function fi(Xe,$e){var at=H(Xe,$e);return[(at[0]+Xe/g)/2,(at[1]+$e)/2]}function Ns(){return(0,k.Z)(fi).scale(158.837)}ha.invert=function(Xe,$e){return[Xe/C(1-3*$e*$e/(v*v)),$e]},vo.invert=function(Xe,$e){var at=(Xe*Xe+$e*$e)/-2,ft=C(-at*(2+at)),bt=$e*at+Xe*ft,yt=Xe*at-$e*ft,D=C(yt*yt+bt*bt);return[T(ft*bt,D*(1+at)),D?-E(ft*yt/D):0]},fi.invert=function(Xe,$e){var at=Xe,ft=$e,bt=25;do{var yt,D=x(ft),Y=c(ft),q=c(2*ft),ne=Y*Y,pe=D*D,Le=c(at),Ne=x(at/2),qe=c(at/2),et=qe*qe,vt=1-pe*Ne*Ne,xt=vt?L(D*Ne)*C(yt=1/vt):yt=0,te=.5*(2*xt*D*qe+at/g)-Xe,ue=.5*(xt*Y+ft)-$e,we=.5*yt*(pe*et+xt*D*Ne*ne)+.5/g,Pe=yt*(Le*q/4-xt*Y*qe),De=.125*yt*(q*qe-xt*Y*pe*Le),Ue=.5*yt*(ne*Ne+xt*et*D)+.5,Ze=Pe*De-Ue*we,Je=(ue*Pe-te*Ue)/Ze,it=(te*De-ue*we)/Ze;at-=Je,ft-=it}while((A(Je)>f||A(it)>f)&&--bt>0);return[at,ft]}},33940:function($,R,e){function k(){return new A}function A(){this.reset()}e.d(R,{Z:function(){return k}}),A.prototype={constructor:A,reset:function(){this.s=this.t=0},add:function(x){T(l,x,this.t),T(this,l.s,this.s),this.s?this.t+=l.t:this.s=l.t},valueOf:function(){return this.s}};var l=new A;function T(x,d,s){var t=x.s=d+s,o=t-d,r=t-o;x.t=d-r+(s-o)}},97860:function($,R,e){e.d(R,{L9:function(){return r},ZP:function(){return b},gL:function(){return a}});var k,A,l,T,x,d=e(33940),s=e(39695),t=e(73182),o=e(72736),r=(0,d.Z)(),n=(0,d.Z)(),a={point:t.Z,lineStart:t.Z,lineEnd:t.Z,polygonStart:function(){r.reset(),a.lineStart=i,a.lineEnd=c},polygonEnd:function(){var v=+r;n.add(v<0?s.BZ+v:v),this.lineStart=this.lineEnd=this.point=t.Z},sphere:function(){n.add(s.BZ)}};function i(){a.point=h}function c(){f(k,A)}function h(v,g){a.point=f,k=v,A=g,v*=s.uR,g*=s.uR,l=v,T=(0,s.mC)(g=g/2+s.pu),x=(0,s.O$)(g)}function f(v,g){v*=s.uR,g=(g*=s.uR)/2+s.pu;var y=v-l,p=y>=0?1:-1,m=p*y,w=(0,s.mC)(g),u=(0,s.O$)(g),S=x*u,_=T*w+S*(0,s.mC)(m),E=S*p*(0,s.O$)(m);r.add((0,s.fv)(E,_)),l=v,T=w,x=u}function b(v){return n.reset(),(0,o.Z)(v,a),2*n}},77338:function($,R,e){e.d(R,{Z:function(){return L}});var k,A,l,T,x,d,s,t,o,r,n=e(33940),a=e(97860),i=e(7620),c=e(39695),h=e(72736),f=(0,n.Z)(),b={point:v,lineStart:y,lineEnd:p,polygonStart:function(){b.point=m,b.lineStart=w,b.lineEnd=u,f.reset(),a.gL.polygonStart()},polygonEnd:function(){a.gL.polygonEnd(),b.point=v,b.lineStart=y,b.lineEnd=p,a.L9<0?(k=-(l=180),A=-(T=90)):f>c.Ho?T=90:f<-c.Ho&&(A=-90),r[0]=k,r[1]=l},sphere:function(){k=-(l=180),A=-(T=90)}};function v(C,P){o.push(r=[k=C,l=C]),P<A&&(A=P),P>T&&(T=P)}function g(C,P){var I=(0,i.Og)([C*c.uR,P*c.uR]);if(t){var U=(0,i.T5)(t,I),z=[U[1],-U[0],0],H=(0,i.T5)(z,U);(0,i.iJ)(H),H=(0,i.Y1)(H);var F,N=C-x,B=N>0?1:-1,j=H[0]*c.RW*B,K=(0,c.Wn)(N)>180;K^(B*x<j&&j<B*C)?(F=H[1]*c.RW)>T&&(T=F):K^(B*x<(j=(j+360)%360-180)&&j<B*C)?(F=-H[1]*c.RW)<A&&(A=F):(P<A&&(A=P),P>T&&(T=P)),K?C<x?S(k,C)>S(k,l)&&(l=C):S(C,l)>S(k,l)&&(k=C):l>=k?(C<k&&(k=C),C>l&&(l=C)):C>x?S(k,C)>S(k,l)&&(l=C):S(C,l)>S(k,l)&&(k=C)}else o.push(r=[k=C,l=C]);P<A&&(A=P),P>T&&(T=P),t=I,x=C}function y(){b.point=g}function p(){r[0]=k,r[1]=l,b.point=v,t=null}function m(C,P){if(t){var I=C-x;f.add((0,c.Wn)(I)>180?I+(I>0?360:-360):I)}else d=C,s=P;a.gL.point(C,P),g(C,P)}function w(){a.gL.lineStart()}function u(){m(d,s),a.gL.lineEnd(),(0,c.Wn)(f)>c.Ho&&(k=-(l=180)),r[0]=k,r[1]=l,t=null}function S(C,P){return(P-=C)<0?P+360:P}function _(C,P){return C[0]-P[0]}function E(C,P){return C[0]<=C[1]?C[0]<=P&&P<=C[1]:P<C[0]||C[1]<P}function L(C){var P,I,U,z,H,F,N;if(T=l=-(k=A=1/0),o=[],(0,h.Z)(C,b),I=o.length){for(o.sort(_),P=1,H=[U=o[0]];P<I;++P)E(U,(z=o[P])[0])||E(U,z[1])?(S(U[0],z[1])>S(U[0],U[1])&&(U[1]=z[1]),S(z[0],U[1])>S(U[0],U[1])&&(U[0]=z[0])):H.push(U=z);for(F=-1/0,P=0,U=H[I=H.length-1];P<=I;U=z,++P)z=H[P],(N=S(U[1],z[0]))>F&&(F=N,k=z[0],l=U[1])}return o=r=null,k===1/0||A===1/0?[[NaN,NaN],[NaN,NaN]]:[[k,A],[l,T]]}},7620:function($,R,e){e.d(R,{Og:function(){return l},T:function(){return s},T5:function(){return x},Y1:function(){return A},iJ:function(){return t},j9:function(){return T},s0:function(){return d}});var k=e(39695);function A(o){return[(0,k.fv)(o[1],o[0]),(0,k.ZR)(o[2])]}function l(o){var r=o[0],n=o[1],a=(0,k.mC)(n);return[a*(0,k.mC)(r),a*(0,k.O$)(r),(0,k.O$)(n)]}function T(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]}function x(o,r){return[o[1]*r[2]-o[2]*r[1],o[2]*r[0]-o[0]*r[2],o[0]*r[1]-o[1]*r[0]]}function d(o,r){o[0]+=r[0],o[1]+=r[1],o[2]+=r[2]}function s(o,r){return[o[0]*r,o[1]*r,o[2]*r]}function t(o){var r=(0,k._b)(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]);o[0]/=r,o[1]/=r,o[2]/=r}},66624:function($,R,e){e.d(R,{Z:function(){return I}});var k,A,l,T,x,d,s,t,o,r,n,a,i,c,h,f,b=e(39695),v=e(73182),g=e(72736),y={sphere:v.Z,point:p,lineStart:w,lineEnd:_,polygonStart:function(){y.lineStart=E,y.lineEnd=L},polygonEnd:function(){y.lineStart=w,y.lineEnd=_}};function p(U,z){U*=b.uR,z*=b.uR;var H=(0,b.mC)(z);m(H*(0,b.mC)(U),H*(0,b.O$)(U),(0,b.O$)(z))}function m(U,z,H){++k,l+=(U-l)/k,T+=(z-T)/k,x+=(H-x)/k}function w(){y.point=u}function u(U,z){U*=b.uR,z*=b.uR;var H=(0,b.mC)(z);c=H*(0,b.mC)(U),h=H*(0,b.O$)(U),f=(0,b.O$)(z),y.point=S,m(c,h,f)}function S(U,z){U*=b.uR,z*=b.uR;var H=(0,b.mC)(z),F=H*(0,b.mC)(U),N=H*(0,b.O$)(U),B=(0,b.O$)(z),j=(0,b.fv)((0,b._b)((j=h*B-f*N)*j+(j=f*F-c*B)*j+(j=c*N-h*F)*j),c*F+h*N+f*B);A+=j,d+=j*(c+(c=F)),s+=j*(h+(h=N)),t+=j*(f+(f=B)),m(c,h,f)}function _(){y.point=p}function E(){y.point=C}function L(){P(a,i),y.point=p}function C(U,z){a=U,i=z,U*=b.uR,z*=b.uR,y.point=P;var H=(0,b.mC)(z);c=H*(0,b.mC)(U),h=H*(0,b.O$)(U),f=(0,b.O$)(z),m(c,h,f)}function P(U,z){U*=b.uR,z*=b.uR;var H=(0,b.mC)(z),F=H*(0,b.mC)(U),N=H*(0,b.O$)(U),B=(0,b.O$)(z),j=h*B-f*N,K=f*F-c*B,G=c*N-h*F,V=(0,b._b)(j*j+K*K+G*G),W=(0,b.ZR)(V),J=V&&-W/V;o+=J*j,r+=J*K,n+=J*G,A+=W,d+=W*(c+(c=F)),s+=W*(h+(h=N)),t+=W*(f+(f=B)),m(c,h,f)}function I(U){k=A=l=T=x=d=s=t=o=r=n=0,(0,g.Z)(U,y);var z=o,H=r,F=n,N=z*z+H*H+F*F;return N<b.aW&&(z=d,H=s,F=t,A<b.Ho&&(z=l,H=T,F=x),(N=z*z+H*H+F*F)<b.aW)?[NaN,NaN]:[(0,b.fv)(H,z)*b.RW,(0,b.ZR)(F/(0,b._b)(N))*b.RW]}},7613:function($,R,e){e.d(R,{m:function(){return x},Z:function(){return s}});var k=e(7620);function A(t){return function(){return t}}var l=e(39695),T=e(49386);function x(t,o,r,n,a,i){if(r){var c=(0,l.mC)(o),h=(0,l.O$)(o),f=n*r;a==null?(a=o+n*l.BZ,i=o-f/2):(a=d(c,a),i=d(c,i),(n>0?a<i:a>i)&&(a+=n*l.BZ));for(var b,v=a;n>0?v>i:v<i;v-=f)b=(0,k.Y1)([c,-h*(0,l.mC)(v),-h*(0,l.O$)(v)]),t.point(b[0],b[1])}}function d(t,o){(o=(0,k.Og)(o))[0]-=t,(0,k.iJ)(o);var r=(0,l.Kh)(-o[1]);return((-o[2]<0?-r:r)+l.BZ-l.Ho)%l.BZ}function s(){var t,o,r=A([0,0]),n=A(90),a=A(6),i={point:function(h,f){t.push(h=o(h,f)),h[0]*=l.RW,h[1]*=l.RW}};function c(){var h=r.apply(this,arguments),f=n.apply(this,arguments)*l.uR,b=a.apply(this,arguments)*l.uR;return t=[],o=(0,T.I)(-h[0]*l.uR,-h[1]*l.uR,0).invert,x(i,f,b,1),h={type:"Polygon",coordinates:[t]},t=o=null,h}return c.center=function(h){return arguments.length?(r=typeof h=="function"?h:A([+h[0],+h[1]]),c):r},c.radius=function(h){return arguments.length?(n=typeof h=="function"?h:A(+h),c):n},c.precision=function(h){return arguments.length?(a=typeof h=="function"?h:A(+h),c):a},c}},87070:function($,R,e){var k=e(97023),A=e(39695);R.Z=(0,k.Z)(function(){return!0},function(l){var T,x=NaN,d=NaN,s=NaN;return{lineStart:function(){l.lineStart(),T=1},point:function(t,o){var r=t>0?A.pi:-A.pi,n=(0,A.Wn)(t-x);(0,A.Wn)(n-A.pi)<A.Ho?(l.point(x,d=(d+o)/2>0?A.ou:-A.ou),l.point(s,d),l.lineEnd(),l.lineStart(),l.point(r,d),l.point(t,d),T=0):s!==r&&n>=A.pi&&((0,A.Wn)(x-s)<A.Ho&&(x-=s*A.Ho),(0,A.Wn)(t-r)<A.Ho&&(t-=r*A.Ho),d=function(a,i,c,h){var f,b,v=(0,A.O$)(a-c);return(0,A.Wn)(v)>A.Ho?(0,A.z4)(((0,A.O$)(i)*(b=(0,A.mC)(h))*(0,A.O$)(c)-(0,A.O$)(h)*(f=(0,A.mC)(i))*(0,A.O$)(a))/(f*b*v)):(i+h)/2}(x,d,t,o),l.point(s,d),l.lineEnd(),l.lineStart(),l.point(r,d),T=0),l.point(x=t,d=o),s=r},lineEnd:function(){l.lineEnd(),x=d=NaN},clean:function(){return 2-T}}},function(l,T,x,d){var s;if(l==null)s=x*A.ou,d.point(-A.pi,s),d.point(0,s),d.point(A.pi,s),d.point(A.pi,0),d.point(A.pi,-s),d.point(0,-s),d.point(-A.pi,-s),d.point(-A.pi,0),d.point(-A.pi,s);else if((0,A.Wn)(l[0]-T[0])>A.Ho){var t=l[0]<T[0]?A.pi:-A.pi;s=x*t/2,d.point(-t,s),d.point(0,s),d.point(t,s)}else d.point(T[0],T[1])},[-A.pi,-A.ou])},85272:function($,R,e){e.d(R,{Z:function(){return A}});var k=e(73182);function A(){var l,T=[];return{point:function(x,d,s){l.push([x,d,s])},lineStart:function(){T.push(l=[])},lineEnd:k.Z,rejoin:function(){T.length>1&&T.push(T.pop().concat(T.shift()))},result:function(){var x=T;return T=[],l=null,x}}}},1457:function($,R,e){e.d(R,{Z:function(){return d}});var k=e(7620),A=e(7613),l=e(39695),T=e(67108),x=e(97023);function d(s){var t=(0,l.mC)(s),o=6*l.uR,r=t>0,n=(0,l.Wn)(t)>l.Ho;function a(h,f){return(0,l.mC)(h)*(0,l.mC)(f)>t}function i(h,f,b){var v=(0,k.Og)(h),g=(0,k.Og)(f),y=[1,0,0],p=(0,k.T5)(v,g),m=(0,k.j9)(p,p),w=p[0],u=m-w*w;if(!u)return!b&&h;var S=t*m/u,_=-t*w/u,E=(0,k.T5)(y,p),L=(0,k.T)(y,S),C=(0,k.T)(p,_);(0,k.s0)(L,C);var P=E,I=(0,k.j9)(L,P),U=(0,k.j9)(P,P),z=I*I-U*((0,k.j9)(L,L)-1);if(!(z<0)){var H=(0,l._b)(z),F=(0,k.T)(P,(-I-H)/U);if((0,k.s0)(F,L),F=(0,k.Y1)(F),!b)return F;var N,B=h[0],j=f[0],K=h[1],G=f[1];j<B&&(N=B,B=j,j=N);var V=j-B,W=(0,l.Wn)(V-l.pi)<l.Ho;if(!W&&G<K&&(N=K,K=G,G=N),W||V<l.Ho?W?K+G>0^F[1]<((0,l.Wn)(F[0]-B)<l.Ho?K:G):K<=F[1]&&F[1]<=G:V>l.pi^(B<=F[0]&&F[0]<=j)){var J=(0,k.T)(P,(-I+H)/U);return(0,k.s0)(J,L),[F,(0,k.Y1)(J)]}}}function c(h,f){var b=r?s:l.pi-s,v=0;return h<-b?v|=1:h>b&&(v|=2),f<-b?v|=4:f>b&&(v|=8),v}return(0,x.Z)(a,function(h){var f,b,v,g,y;return{lineStart:function(){g=v=!1,y=1},point:function(p,m){var w,u=[p,m],S=a(p,m),_=r?S?0:c(p,m):S?c(p+(p<0?l.pi:-l.pi),m):0;if(!f&&(g=v=S)&&h.lineStart(),S!==v&&(!(w=i(f,u))||(0,T.Z)(f,w)||(0,T.Z)(u,w))&&(u[2]=1),S!==v)y=0,S?(h.lineStart(),w=i(u,f),h.point(w[0],w[1])):(w=i(f,u),h.point(w[0],w[1],2),h.lineEnd()),f=w;else if(n&&f&&r^S){var E;_&b||!(E=i(u,f,!0))||(y=0,r?(h.lineStart(),h.point(E[0][0],E[0][1]),h.point(E[1][0],E[1][1]),h.lineEnd()):(h.point(E[1][0],E[1][1]),h.lineEnd(),h.lineStart(),h.point(E[0][0],E[0][1],3)))}!S||f&&(0,T.Z)(f,u)||h.point(u[0],u[1]),f=u,v=S,b=_},lineEnd:function(){v&&h.lineEnd(),f=null},clean:function(){return y|(g&&v)<<1}}},function(h,f,b,v){(0,A.m)(v,s,o,b,h,f)},r?[0,-s]:[-l.pi,s-l.pi])}},97023:function($,R,e){e.d(R,{Z:function(){return d}});var k=e(85272),A=e(46225),l=e(39695),T=e(23071),x=e(33064);function d(o,r,n,a){return function(i){var c,h,f,b=r(i),v=(0,k.Z)(),g=r(v),y=!1,p={point:m,lineStart:u,lineEnd:S,polygonStart:function(){p.point=_,p.lineStart=E,p.lineEnd=L,h=[],c=[]},polygonEnd:function(){p.point=m,p.lineStart=u,p.lineEnd=S,h=(0,x.TS)(h);var C=(0,T.Z)(c,a);h.length?(y||(i.polygonStart(),y=!0),(0,A.Z)(h,t,C,n,i)):C&&(y||(i.polygonStart(),y=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),y&&(i.polygonEnd(),y=!1),h=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function m(C,P){o(C,P)&&i.point(C,P)}function w(C,P){b.point(C,P)}function u(){p.point=w,b.lineStart()}function S(){p.point=m,b.lineEnd()}function _(C,P){f.push([C,P]),g.point(C,P)}function E(){g.lineStart(),f=[]}function L(){_(f[0][0],f[0][1]),g.lineEnd();var C,P,I,U,z=g.clean(),H=v.result(),F=H.length;if(f.pop(),c.push(f),f=null,F)if(1&z){if((P=(I=H[0]).length-1)>0){for(y||(i.polygonStart(),y=!0),i.lineStart(),C=0;C<P;++C)i.point((U=I[C])[0],U[1]);i.lineEnd()}}else F>1&&2&z&&H.push(H.pop().concat(H.shift())),h.push(H.filter(s))}return p}}function s(o){return o.length>1}function t(o,r){return((o=o.x)[0]<0?o[1]-l.ou-l.Ho:l.ou-o[1])-((r=r.x)[0]<0?r[1]-l.ou-l.Ho:l.ou-r[1])}},87605:function($,R,e){e.d(R,{Z:function(){return s}});var k=e(39695),A=e(85272),l=e(46225),T=e(33064),x=1e9,d=-x;function s(t,o,r,n){function a(b,v){return t<=b&&b<=r&&o<=v&&v<=n}function i(b,v,g,y){var p=0,m=0;if(b==null||(p=c(b,g))!==(m=c(v,g))||f(b,v)<0^g>0)do y.point(p===0||p===3?t:r,p>1?n:o);while((p=(p+g+4)%4)!==m);else y.point(v[0],v[1])}function c(b,v){return(0,k.Wn)(b[0]-t)<k.Ho?v>0?0:3:(0,k.Wn)(b[0]-r)<k.Ho?v>0?2:1:(0,k.Wn)(b[1]-o)<k.Ho?v>0?1:0:v>0?3:2}function h(b,v){return f(b.x,v.x)}function f(b,v){var g=c(b,1),y=c(v,1);return g!==y?g-y:g===0?v[1]-b[1]:g===1?b[0]-v[0]:g===2?b[1]-v[1]:v[0]-b[0]}return function(b){var v,g,y,p,m,w,u,S,_,E,L,C=b,P=(0,A.Z)(),I={point:U,lineStart:function(){I.point=z,g&&g.push(y=[]),E=!0,_=!1,u=S=NaN},lineEnd:function(){v&&(z(p,m),w&&_&&P.rejoin(),v.push(P.result())),I.point=U,_&&C.lineEnd()},polygonStart:function(){C=P,v=[],g=[],L=!0},polygonEnd:function(){var H=function(){for(var B=0,j=0,K=g.length;j<K;++j)for(var G,V,W=g[j],J=1,X=W.length,ee=W[0],re=ee[0],ie=ee[1];J<X;++J)G=re,V=ie,re=(ee=W[J])[0],ie=ee[1],V<=n?ie>n&&(re-G)*(n-V)>(ie-V)*(t-G)&&++B:ie<=n&&(re-G)*(n-V)<(ie-V)*(t-G)&&--B;return B}(),F=L&&H,N=(v=(0,T.TS)(v)).length;(F||N)&&(b.polygonStart(),F&&(b.lineStart(),i(null,null,1,b),b.lineEnd()),N&&(0,l.Z)(v,h,H,i,b),b.polygonEnd()),C=b,v=g=y=null}};function U(H,F){a(H,F)&&C.point(H,F)}function z(H,F){var N=a(H,F);if(g&&y.push([H,F]),E)p=H,m=F,w=N,E=!1,N&&(C.lineStart(),C.point(H,F));else if(N&&_)C.point(H,F);else{var B=[u=Math.max(d,Math.min(x,u)),S=Math.max(d,Math.min(x,S))],j=[H=Math.max(d,Math.min(x,H)),F=Math.max(d,Math.min(x,F))];(function(K,G,V,W,J,X){var ee,re=K[0],ie=K[1],se=0,fe=1,ye=G[0]-re,ge=G[1]-ie;if(ee=V-re,ye||!(ee>0)){if(ee/=ye,ye<0){if(ee<se)return;ee<fe&&(fe=ee)}else if(ye>0){if(ee>fe)return;ee>se&&(se=ee)}if(ee=J-re,ye||!(ee<0)){if(ee/=ye,ye<0){if(ee>fe)return;ee>se&&(se=ee)}else if(ye>0){if(ee<se)return;ee<fe&&(fe=ee)}if(ee=W-ie,ge||!(ee>0)){if(ee/=ge,ge<0){if(ee<se)return;ee<fe&&(fe=ee)}else if(ge>0){if(ee>fe)return;ee>se&&(se=ee)}if(ee=X-ie,ge||!(ee<0)){if(ee/=ge,ge<0){if(ee>fe)return;ee>se&&(se=ee)}else if(ge>0){if(ee<se)return;ee<fe&&(fe=ee)}return se>0&&(K[0]=re+se*ye,K[1]=ie+se*ge),fe<1&&(G[0]=re+fe*ye,G[1]=ie+fe*ge),!0}}}}})(B,j,t,o,r,n)?(_||(C.lineStart(),C.point(B[0],B[1])),C.point(j[0],j[1]),N||C.lineEnd(),L=!1):N&&(C.lineStart(),C.point(H,F),L=!1)}u=H,S=F,_=N}return I}}},46225:function($,R,e){e.d(R,{Z:function(){return T}});var k=e(67108),A=e(39695);function l(d,s,t,o){this.x=d,this.z=s,this.o=t,this.e=o,this.v=!1,this.n=this.p=null}function T(d,s,t,o,r){var n,a,i=[],c=[];if(d.forEach(function(y){if(!((p=y.length-1)<=0)){var p,m,w=y[0],u=y[p];if((0,k.Z)(w,u)){if(!w[2]&&!u[2]){for(r.lineStart(),n=0;n<p;++n)r.point((w=y[n])[0],w[1]);return void r.lineEnd()}u[0]+=2*A.Ho}i.push(m=new l(w,y,null,!0)),c.push(m.o=new l(w,null,m,!1)),i.push(m=new l(u,y,null,!1)),c.push(m.o=new l(u,null,m,!0))}}),i.length){for(c.sort(s),x(i),x(c),n=0,a=c.length;n<a;++n)c[n].e=t=!t;for(var h,f,b=i[0];;){for(var v=b,g=!0;v.v;)if((v=v.n)===b)return;h=v.z,r.lineStart();do{if(v.v=v.o.v=!0,v.e){if(g)for(n=0,a=h.length;n<a;++n)r.point((f=h[n])[0],f[1]);else o(v.x,v.n.x,1,r);v=v.n}else{if(g)for(h=v.p.z,n=h.length-1;n>=0;--n)r.point((f=h[n])[0],f[1]);else o(v.x,v.p.x,-1,r);v=v.p}h=(v=v.o).z,g=!g}while(!v.v);r.lineEnd()}}}function x(d){if(s=d.length){for(var s,t,o=0,r=d[0];++o<s;)r.n=t=d[o],t.p=r,r=t;r.n=t=d[0],t.p=r}}},96059:function($,R,e){function k(A,l){function T(x,d){return x=A(x,d),l(x[0],x[1])}return A.invert&&l.invert&&(T.invert=function(x,d){return(x=l.invert(x,d))&&A.invert(x[0],x[1])}),T}e.d(R,{Z:function(){return k}})},8593:function($,R,e){function k(A){return A}e.d(R,{Z:function(){return k}})},27362:function($,R,e){e.r(R),e.d(R,{geoAlbers:function(){return At},geoAlbersUsa:function(){return pt},geoArea:function(){return k.ZP},geoAzimuthalEqualArea:function(){return gt.Z},geoAzimuthalEqualAreaRaw:function(){return gt.l},geoAzimuthalEquidistant:function(){return Pt.Z},geoAzimuthalEquidistantRaw:function(){return Pt.N},geoBounds:function(){return A.Z},geoCentroid:function(){return l.Z},geoCircle:function(){return T.Z},geoClipAntimeridian:function(){return x.Z},geoClipCircle:function(){return d.Z},geoClipExtent:function(){return t},geoClipRectangle:function(){return s.Z},geoConicConformal:function(){return pn},geoConicConformalRaw:function(){return un},geoConicEqualArea:function(){return Et},geoConicEqualAreaRaw:function(){return Tt},geoConicEquidistant:function(){return Bn},geoConicEquidistantRaw:function(){return wn},geoContains:function(){return H},geoDistance:function(){return S},geoEqualEarth:function(){return Mn},geoEqualEarthRaw:function(){return En},geoEquirectangular:function(){return Kt.Z},geoEquirectangularRaw:function(){return Kt.k},geoGnomonic:function(){return Rn.Z},geoGnomonicRaw:function(){return Rn.M},geoGraticule:function(){return j},geoGraticule10:function(){return K},geoIdentity:function(){return Fn},geoInterpolate:function(){return X.Z},geoLength:function(){return m},geoMercator:function(){return jt},geoMercatorRaw:function(){return Ht},geoNaturalEarth1:function(){return rr.Z},geoNaturalEarth1Raw:function(){return rr.K},geoOrthographic:function(){return $n.Z},geoOrthographicRaw:function(){return $n.I},geoPath:function(){return Ke},geoProjection:function(){return st.Z},geoProjectionMutator:function(){return st.r},geoRotation:function(){return Ot.Z},geoStereographic:function(){return Zn},geoStereographicRaw:function(){return fr},geoStream:function(){return f.Z},geoTransform:function(){return Nn.Z},geoTransverseMercator:function(){return ur},geoTransverseMercatorRaw:function(){return qn}});var k=e(97860),A=e(77338),l=e(66624),T=e(7613),x=e(87070),d=e(1457),s=e(87605);function t(){var Zt,nn,zn,_n=0,Cn=0,Un=960,Gn=500;return zn={stream:function(ar){return Zt&&nn===ar?Zt:Zt=(0,s.Z)(_n,Cn,Un,Gn)(nn=ar)},extent:function(ar){return arguments.length?(_n=+ar[0][0],Cn=+ar[0][1],Un=+ar[1][0],Gn=+ar[1][1],Zt=nn=null,zn):[[_n,Cn],[Un,Gn]]}}}var o,r,n,a=e(23071),i=e(33940),c=e(39695),h=e(73182),f=e(72736),b=(0,i.Z)(),v={sphere:h.Z,point:h.Z,lineStart:function(){v.point=y,v.lineEnd=g},lineEnd:h.Z,polygonStart:h.Z,polygonEnd:h.Z};function g(){v.point=v.lineEnd=h.Z}function y(Zt,nn){Zt*=c.uR,nn*=c.uR,o=Zt,r=(0,c.O$)(nn),n=(0,c.mC)(nn),v.point=p}function p(Zt,nn){Zt*=c.uR,nn*=c.uR;var zn=(0,c.O$)(nn),_n=(0,c.mC)(nn),Cn=(0,c.Wn)(Zt-o),Un=(0,c.mC)(Cn),Gn=_n*(0,c.O$)(Cn),ar=n*zn-r*_n*Un,yr=r*zn+n*_n*Un;b.add((0,c.fv)((0,c._b)(Gn*Gn+ar*ar),yr)),o=Zt,r=zn,n=_n}function m(Zt){return b.reset(),(0,f.Z)(Zt,v),+b}var w=[null,null],u={type:"LineString",coordinates:w};function S(Zt,nn){return w[0]=Zt,w[1]=nn,m(u)}var _={Feature:function(Zt,nn){return L(Zt.geometry,nn)},FeatureCollection:function(Zt,nn){for(var zn=Zt.features,_n=-1,Cn=zn.length;++_n<Cn;)if(L(zn[_n].geometry,nn))return!0;return!1}},E={Sphere:function(){return!0},Point:function(Zt,nn){return C(Zt.coordinates,nn)},MultiPoint:function(Zt,nn){for(var zn=Zt.coordinates,_n=-1,Cn=zn.length;++_n<Cn;)if(C(zn[_n],nn))return!0;return!1},LineString:function(Zt,nn){return P(Zt.coordinates,nn)},MultiLineString:function(Zt,nn){for(var zn=Zt.coordinates,_n=-1,Cn=zn.length;++_n<Cn;)if(P(zn[_n],nn))return!0;return!1},Polygon:function(Zt,nn){return I(Zt.coordinates,nn)},MultiPolygon:function(Zt,nn){for(var zn=Zt.coordinates,_n=-1,Cn=zn.length;++_n<Cn;)if(I(zn[_n],nn))return!0;return!1},GeometryCollection:function(Zt,nn){for(var zn=Zt.geometries,_n=-1,Cn=zn.length;++_n<Cn;)if(L(zn[_n],nn))return!0;return!1}};function L(Zt,nn){return!(!Zt||!E.hasOwnProperty(Zt.type))&&E[Zt.type](Zt,nn)}function C(Zt,nn){return S(Zt,nn)===0}function P(Zt,nn){for(var zn,_n,Cn,Un=0,Gn=Zt.length;Un<Gn;Un++){if((_n=S(Zt[Un],nn))===0||Un>0&&(Cn=S(Zt[Un],Zt[Un-1]))>0&&zn<=Cn&&_n<=Cn&&(zn+_n-Cn)*(1-Math.pow((zn-_n)/Cn,2))<c.aW*Cn)return!0;zn=_n}return!1}function I(Zt,nn){return!!(0,a.Z)(Zt.map(U),z(nn))}function U(Zt){return(Zt=Zt.map(z)).pop(),Zt}function z(Zt){return[Zt[0]*c.uR,Zt[1]*c.uR]}function H(Zt,nn){return(Zt&&_.hasOwnProperty(Zt.type)?_[Zt.type]:L)(Zt,nn)}var F=e(33064);function N(Zt,nn,zn){var _n=(0,F.w6)(Zt,nn-c.Ho,zn).concat(nn);return function(Cn){return _n.map(function(Un){return[Cn,Un]})}}function B(Zt,nn,zn){var _n=(0,F.w6)(Zt,nn-c.Ho,zn).concat(nn);return function(Cn){return _n.map(function(Un){return[Un,Cn]})}}function j(){var Zt,nn,zn,_n,Cn,Un,Gn,ar,yr,$t,kn,zt,Wt=10,tn=Wt,Sn=90,An=360,Tn=2.5;function an(){return{type:"MultiLineString",coordinates:mn()}}function mn(){return(0,F.w6)((0,c.mD)(_n/Sn)*Sn,zn,Sn).map(kn).concat((0,F.w6)((0,c.mD)(ar/An)*An,Gn,An).map(zt)).concat((0,F.w6)((0,c.mD)(nn/Wt)*Wt,Zt,Wt).filter(function(on){return(0,c.Wn)(on%Sn)>c.Ho}).map(yr)).concat((0,F.w6)((0,c.mD)(Un/tn)*tn,Cn,tn).filter(function(on){return(0,c.Wn)(on%An)>c.Ho}).map($t))}return an.lines=function(){return mn().map(function(on){return{type:"LineString",coordinates:on}})},an.outline=function(){return{type:"Polygon",coordinates:[kn(_n).concat(zt(Gn).slice(1),kn(zn).reverse().slice(1),zt(ar).reverse().slice(1))]}},an.extent=function(on){return arguments.length?an.extentMajor(on).extentMinor(on):an.extentMinor()},an.extentMajor=function(on){return arguments.length?(_n=+on[0][0],zn=+on[1][0],ar=+on[0][1],Gn=+on[1][1],_n>zn&&(on=_n,_n=zn,zn=on),ar>Gn&&(on=ar,ar=Gn,Gn=on),an.precision(Tn)):[[_n,ar],[zn,Gn]]},an.extentMinor=function(on){return arguments.length?(nn=+on[0][0],Zt=+on[1][0],Un=+on[0][1],Cn=+on[1][1],nn>Zt&&(on=nn,nn=Zt,Zt=on),Un>Cn&&(on=Un,Un=Cn,Cn=on),an.precision(Tn)):[[nn,Un],[Zt,Cn]]},an.step=function(on){return arguments.length?an.stepMajor(on).stepMinor(on):an.stepMinor()},an.stepMajor=function(on){return arguments.length?(Sn=+on[0],An=+on[1],an):[Sn,An]},an.stepMinor=function(on){return arguments.length?(Wt=+on[0],tn=+on[1],an):[Wt,tn]},an.precision=function(on){return arguments.length?(Tn=+on,yr=N(Un,Cn,90),$t=B(nn,Zt,Tn),kn=N(ar,Gn,90),zt=B(_n,zn,Tn),an):Tn},an.extentMajor([[-180,-90+c.Ho],[180,90-c.Ho]]).extentMinor([[-180,-80-c.Ho],[180,80+c.Ho]])}function K(){return j()()}var G,V,W,J,X=e(83074),ee=e(8593),re=(0,i.Z)(),ie=(0,i.Z)(),se={point:h.Z,lineStart:h.Z,lineEnd:h.Z,polygonStart:function(){se.lineStart=fe,se.lineEnd=he},polygonEnd:function(){se.lineStart=se.lineEnd=se.point=h.Z,re.add((0,c.Wn)(ie)),ie.reset()},result:function(){var Zt=re/2;return re.reset(),Zt}};function fe(){se.point=ye}function ye(Zt,nn){se.point=ge,G=W=Zt,V=J=nn}function ge(Zt,nn){ie.add(J*Zt-W*nn),W=Zt,J=nn}function he(){ge(G,V)}var ve,Oe,xe,ke,Me=se,Te=e(3559),Q=0,oe=0,ce=0,me=0,Ae=0,Ie=0,Ce=0,Re=0,le=0,de={point:_e,lineStart:Fe,lineEnd:nt,polygonStart:function(){de.lineStart=tt,de.lineEnd=ot},polygonEnd:function(){de.point=_e,de.lineStart=Fe,de.lineEnd=nt},result:function(){var Zt=le?[Ce/le,Re/le]:Ie?[me/Ie,Ae/Ie]:ce?[Q/ce,oe/ce]:[NaN,NaN];return Q=oe=ce=me=Ae=Ie=Ce=Re=le=0,Zt}};function _e(Zt,nn){Q+=Zt,oe+=nn,++ce}function Fe(){de.point=Ve}function Ve(Zt,nn){de.point=He,_e(xe=Zt,ke=nn)}function He(Zt,nn){var zn=Zt-xe,_n=nn-ke,Cn=(0,c._b)(zn*zn+_n*_n);me+=Cn*(xe+Zt)/2,Ae+=Cn*(ke+nn)/2,Ie+=Cn,_e(xe=Zt,ke=nn)}function nt(){de.point=_e}function tt(){de.point=dt}function ot(){kt(ve,Oe)}function dt(Zt,nn){de.point=kt,_e(ve=xe=Zt,Oe=ke=nn)}function kt(Zt,nn){var zn=Zt-xe,_n=nn-ke,Cn=(0,c._b)(zn*zn+_n*_n);me+=Cn*(xe+Zt)/2,Ae+=Cn*(ke+nn)/2,Ie+=Cn,Ce+=(Cn=ke*Zt-xe*nn)*(xe+Zt),Re+=Cn*(ke+nn),le+=3*Cn,_e(xe=Zt,ke=nn)}var mt=de;function wt(Zt){this._context=Zt}wt.prototype={_radius:4.5,pointRadius:function(Zt){return this._radius=Zt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Zt,nn){switch(this._point){case 0:this._context.moveTo(Zt,nn),this._point=1;break;case 1:this._context.lineTo(Zt,nn);break;default:this._context.moveTo(Zt+this._radius,nn),this._context.arc(Zt,nn,this._radius,0,c.BZ)}},result:h.Z};var Lt,Ct,It,Ut,Rt,Ge=(0,i.Z)(),We={point:h.Z,lineStart:function(){We.point=Be},lineEnd:function(){Lt&&Ye(Ct,It),We.point=h.Z},polygonStart:function(){Lt=!0},polygonEnd:function(){Lt=null},result:function(){var Zt=+Ge;return Ge.reset(),Zt}};function Be(Zt,nn){We.point=Ye,Ct=Ut=Zt,It=Rt=nn}function Ye(Zt,nn){Ut-=Zt,Rt-=nn,Ge.add((0,c._b)(Ut*Ut+Rt*Rt)),Ut=Zt,Rt=nn}var rt=We;function Se(){this._string=[]}function ze(Zt){return"m0,"+Zt+"a"+Zt+","+Zt+" 0 1,1 0,"+-2*Zt+"a"+Zt+","+Zt+" 0 1,1 0,"+2*Zt+"z"}function Ke(Zt,nn){var zn,_n,Cn=4.5;function Un(Gn){return Gn&&(typeof Cn=="function"&&_n.pointRadius(+Cn.apply(this,arguments)),(0,f.Z)(Gn,zn(_n))),_n.result()}return Un.area=function(Gn){return(0,f.Z)(Gn,zn(Me)),Me.result()},Un.measure=function(Gn){return(0,f.Z)(Gn,zn(rt)),rt.result()},Un.bounds=function(Gn){return(0,f.Z)(Gn,zn(Te.Z)),Te.Z.result()},Un.centroid=function(Gn){return(0,f.Z)(Gn,zn(mt)),mt.result()},Un.projection=function(Gn){return arguments.length?(zn=Gn==null?(Zt=null,ee.Z):(Zt=Gn).stream,Un):Zt},Un.context=function(Gn){return arguments.length?(_n=Gn==null?(nn=null,new Se):new wt(nn=Gn),typeof Cn!="function"&&_n.pointRadius(Cn),Un):nn},Un.pointRadius=function(Gn){return arguments.length?(Cn=typeof Gn=="function"?Gn:(_n.pointRadius(+Gn),+Gn),Un):Cn},Un.projection(Zt).context(nn)}Se.prototype={_radius:4.5,_circle:ze(4.5),pointRadius:function(Zt){return(Zt=+Zt)!==this._radius&&(this._radius=Zt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Zt,nn){switch(this._point){case 0:this._string.push("M",Zt,",",nn),this._point=1;break;case 1:this._string.push("L",Zt,",",nn);break;default:this._circle==null&&(this._circle=ze(this._radius)),this._string.push("M",Zt,",",nn,this._circle)}},result:function(){if(this._string.length){var Zt=this._string.join("");return this._string=[],Zt}return null}};var st=e(15002);function ct(Zt){var nn=0,zn=c.pi/3,_n=(0,st.r)(Zt),Cn=_n(nn,zn);return Cn.parallels=function(Un){return arguments.length?_n(nn=Un[0]*c.uR,zn=Un[1]*c.uR):[nn*c.RW,zn*c.RW]},Cn}function Tt(Zt,nn){var zn=(0,c.O$)(Zt),_n=(zn+(0,c.O$)(nn))/2;if((0,c.Wn)(_n)<c.Ho)return function(ar){var yr=(0,c.mC)(ar);function $t(kn,zt){return[kn*yr,(0,c.O$)(zt)/yr]}return $t.invert=function(kn,zt){return[kn/yr,(0,c.ZR)(zt*yr)]},$t}(Zt);var Cn=1+zn*(2*_n-zn),Un=(0,c._b)(Cn)/_n;function Gn(ar,yr){var $t=(0,c._b)(Cn-2*_n*(0,c.O$)(yr))/_n;return[$t*(0,c.O$)(ar*=_n),Un-$t*(0,c.mC)(ar)]}return Gn.invert=function(ar,yr){var $t=Un-yr,kn=(0,c.fv)(ar,(0,c.Wn)($t))*(0,c.Xx)($t);return $t*_n<0&&(kn-=c.pi*(0,c.Xx)(ar)*(0,c.Xx)($t)),[kn/_n,(0,c.ZR)((Cn-(ar*ar+$t*$t)*_n*_n)/(2*_n))]},Gn}function Et(){return ct(Tt).scale(155.424).center([0,33.6442])}function At(){return Et().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var ht=e(47589);function pt(){var Zt,nn,zn,_n,Cn,Un,Gn=At(),ar=Et().rotate([154,0]).center([-2,58.5]).parallels([55,65]),yr=Et().rotate([157,0]).center([-3,19.9]).parallels([8,18]),$t={point:function(Wt,tn){Un=[Wt,tn]}};function kn(Wt){var tn=Wt[0],Sn=Wt[1];return Un=null,zn.point(tn,Sn),Un||(_n.point(tn,Sn),Un)||(Cn.point(tn,Sn),Un)}function zt(){return Zt=nn=null,kn}return kn.invert=function(Wt){var tn=Gn.scale(),Sn=Gn.translate(),An=(Wt[0]-Sn[0])/tn,Tn=(Wt[1]-Sn[1])/tn;return(Tn>=.12&&Tn<.234&&An>=-.425&&An<-.214?ar:Tn>=.166&&Tn<.234&&An>=-.214&&An<-.115?yr:Gn).invert(Wt)},kn.stream=function(Wt){return Zt&&nn===Wt?Zt:(tn=[Gn.stream(nn=Wt),ar.stream(Wt),yr.stream(Wt)],Sn=tn.length,Zt={point:function(An,Tn){for(var an=-1;++an<Sn;)tn[an].point(An,Tn)},sphere:function(){for(var An=-1;++An<Sn;)tn[An].sphere()},lineStart:function(){for(var An=-1;++An<Sn;)tn[An].lineStart()},lineEnd:function(){for(var An=-1;++An<Sn;)tn[An].lineEnd()},polygonStart:function(){for(var An=-1;++An<Sn;)tn[An].polygonStart()},polygonEnd:function(){for(var An=-1;++An<Sn;)tn[An].polygonEnd()}});var tn,Sn},kn.precision=function(Wt){return arguments.length?(Gn.precision(Wt),ar.precision(Wt),yr.precision(Wt),zt()):Gn.precision()},kn.scale=function(Wt){return arguments.length?(Gn.scale(Wt),ar.scale(.35*Wt),yr.scale(Wt),kn.translate(Gn.translate())):Gn.scale()},kn.translate=function(Wt){if(!arguments.length)return Gn.translate();var tn=Gn.scale(),Sn=+Wt[0],An=+Wt[1];return zn=Gn.translate(Wt).clipExtent([[Sn-.455*tn,An-.238*tn],[Sn+.455*tn,An+.238*tn]]).stream($t),_n=ar.translate([Sn-.307*tn,An+.201*tn]).clipExtent([[Sn-.425*tn+c.Ho,An+.12*tn+c.Ho],[Sn-.214*tn-c.Ho,An+.234*tn-c.Ho]]).stream($t),Cn=yr.translate([Sn-.205*tn,An+.212*tn]).clipExtent([[Sn-.214*tn+c.Ho,An+.166*tn+c.Ho],[Sn-.115*tn-c.Ho,An+.234*tn-c.Ho]]).stream($t),zt()},kn.fitExtent=function(Wt,tn){return(0,ht.qg)(kn,Wt,tn)},kn.fitSize=function(Wt,tn){return(0,ht.mF)(kn,Wt,tn)},kn.fitWidth=function(Wt,tn){return(0,ht.V6)(kn,Wt,tn)},kn.fitHeight=function(Wt,tn){return(0,ht.rf)(kn,Wt,tn)},kn.scale(1070)}var gt=e(12956),Pt=e(17889),Ot=e(49386);function Ht(Zt,nn){return[Zt,(0,c.cM)((0,c.OR)((c.ou+nn)/2))]}function jt(){return Nt(Ht).scale(961/c.BZ)}function Nt(Zt){var nn,zn,_n,Cn=(0,st.Z)(Zt),Un=Cn.center,Gn=Cn.scale,ar=Cn.translate,yr=Cn.clipExtent,$t=null;function kn(){var zt=c.pi*Gn(),Wt=Cn((0,Ot.Z)(Cn.rotate()).invert([0,0]));return yr($t==null?[[Wt[0]-zt,Wt[1]-zt],[Wt[0]+zt,Wt[1]+zt]]:Zt===Ht?[[Math.max(Wt[0]-zt,$t),nn],[Math.min(Wt[0]+zt,zn),_n]]:[[$t,Math.max(Wt[1]-zt,nn)],[zn,Math.min(Wt[1]+zt,_n)]])}return Cn.scale=function(zt){return arguments.length?(Gn(zt),kn()):Gn()},Cn.translate=function(zt){return arguments.length?(ar(zt),kn()):ar()},Cn.center=function(zt){return arguments.length?(Un(zt),kn()):Un()},Cn.clipExtent=function(zt){return arguments.length?(zt==null?$t=nn=zn=_n=null:($t=+zt[0][0],nn=+zt[0][1],zn=+zt[1][0],_n=+zt[1][1]),kn()):$t==null?null:[[$t,nn],[zn,_n]]},kn()}function Gt(Zt){return(0,c.OR)((c.ou+Zt)/2)}function un(Zt,nn){var zn=(0,c.mC)(Zt),_n=Zt===nn?(0,c.O$)(Zt):(0,c.cM)(zn/(0,c.mC)(nn))/(0,c.cM)(Gt(nn)/Gt(Zt)),Cn=zn*(0,c.sQ)(Gt(Zt),_n)/_n;if(!_n)return Ht;function Un(Gn,ar){Cn>0?ar<-c.ou+c.Ho&&(ar=-c.ou+c.Ho):ar>c.ou-c.Ho&&(ar=c.ou-c.Ho);var yr=Cn/(0,c.sQ)(Gt(ar),_n);return[yr*(0,c.O$)(_n*Gn),Cn-yr*(0,c.mC)(_n*Gn)]}return Un.invert=function(Gn,ar){var yr=Cn-ar,$t=(0,c.Xx)(_n)*(0,c._b)(Gn*Gn+yr*yr),kn=(0,c.fv)(Gn,(0,c.Wn)(yr))*(0,c.Xx)(yr);return yr*_n<0&&(kn-=c.pi*(0,c.Xx)(Gn)*(0,c.Xx)(yr)),[kn/_n,2*(0,c.z4)((0,c.sQ)(Cn/$t,1/_n))-c.ou]},Un}function pn(){return ct(un).scale(109.5).parallels([30,30])}Ht.invert=function(Zt,nn){return[Zt,2*(0,c.z4)((0,c.Qq)(nn))-c.ou]};var Kt=e(97492);function wn(Zt,nn){var zn=(0,c.mC)(Zt),_n=Zt===nn?(0,c.O$)(Zt):(zn-(0,c.mC)(nn))/(nn-Zt),Cn=zn/_n+Zt;if((0,c.Wn)(_n)<c.Ho)return Kt.k;function Un(Gn,ar){var yr=Cn-ar,$t=_n*Gn;return[yr*(0,c.O$)($t),Cn-yr*(0,c.mC)($t)]}return Un.invert=function(Gn,ar){var yr=Cn-ar,$t=(0,c.fv)(Gn,(0,c.Wn)(yr))*(0,c.Xx)(yr);return yr*_n<0&&($t-=c.pi*(0,c.Xx)(Gn)*(0,c.Xx)(yr)),[$t/_n,Cn-(0,c.Xx)(_n)*(0,c._b)(Gn*Gn+yr*yr)]},Un}function Bn(){return ct(wn).scale(131.154).center([0,13.9389])}var vn=1.340264,cn=-.081106,dn=893e-6,sn=.003796,hn=(0,c._b)(3)/2;function En(Zt,nn){var zn=(0,c.ZR)(hn*(0,c.O$)(nn)),_n=zn*zn,Cn=_n*_n*_n;return[Zt*(0,c.mC)(zn)/(hn*(vn+3*cn*_n+Cn*(7*dn+9*sn*_n))),zn*(vn+cn*_n+Cn*(dn+sn*_n))]}function Mn(){return(0,st.Z)(En).scale(177.158)}En.invert=function(Zt,nn){for(var zn,_n=nn,Cn=_n*_n,Un=Cn*Cn*Cn,Gn=0;Gn<12&&(Un=(Cn=(_n-=zn=(_n*(vn+cn*Cn+Un*(dn+sn*Cn))-nn)/(vn+3*cn*Cn+Un*(7*dn+9*sn*Cn)))*_n)*Cn*Cn,!((0,c.Wn)(zn)<c.aW));++Gn);return[hn*Zt*(vn+3*cn*Cn+Un*(7*dn+9*sn*Cn))/(0,c.mC)(_n),(0,c.ZR)((0,c.O$)(_n)/hn)]};var Rn=e(98936),Nn=e(64684);function Fn(){var Zt,nn,zn,_n,Cn,Un,Gn,ar=1,yr=0,$t=0,kn=1,zt=1,Wt=0,tn=null,Sn=1,An=1,Tn=(0,Nn.l)({point:function(fn,yn){var Ln=on([fn,yn]);this.stream.point(Ln[0],Ln[1])}}),an=ee.Z;function mn(){return Sn=ar*kn,An=ar*zt,Un=Gn=null,on}function on(fn){var yn=fn[0]*Sn,Ln=fn[1]*An;if(Wt){var Hn=Ln*Zt-yn*nn;yn=yn*Zt+Ln*nn,Ln=Hn}return[yn+yr,Ln+$t]}return on.invert=function(fn){var yn=fn[0]-yr,Ln=fn[1]-$t;if(Wt){var Hn=Ln*Zt+yn*nn;yn=yn*Zt-Ln*nn,Ln=Hn}return[yn/Sn,Ln/An]},on.stream=function(fn){return Un&&Gn===fn?Un:Un=Tn(an(Gn=fn))},on.postclip=function(fn){return arguments.length?(an=fn,tn=zn=_n=Cn=null,mn()):an},on.clipExtent=function(fn){return arguments.length?(an=fn==null?(tn=zn=_n=Cn=null,ee.Z):(0,s.Z)(tn=+fn[0][0],zn=+fn[0][1],_n=+fn[1][0],Cn=+fn[1][1]),mn()):tn==null?null:[[tn,zn],[_n,Cn]]},on.scale=function(fn){return arguments.length?(ar=+fn,mn()):ar},on.translate=function(fn){return arguments.length?(yr=+fn[0],$t=+fn[1],mn()):[yr,$t]},on.angle=function(fn){return arguments.length?(Wt=fn%360*c.uR,nn=(0,c.O$)(Wt),Zt=(0,c.mC)(Wt),mn()):Wt*c.RW},on.reflectX=function(fn){return arguments.length?(kn=fn?-1:1,mn()):kn<0},on.reflectY=function(fn){return arguments.length?(zt=fn?-1:1,mn()):zt<0},on.fitExtent=function(fn,yn){return(0,ht.qg)(on,fn,yn)},on.fitSize=function(fn,yn){return(0,ht.mF)(on,fn,yn)},on.fitWidth=function(fn,yn){return(0,ht.V6)(on,fn,yn)},on.fitHeight=function(fn,yn){return(0,ht.rf)(on,fn,yn)},on}var rr=e(26867),$n=e(57962),mr=e(25382);function fr(Zt,nn){var zn=(0,c.mC)(nn),_n=1+(0,c.mC)(Zt)*zn;return[zn*(0,c.O$)(Zt)/_n,(0,c.O$)(nn)/_n]}function Zn(){return(0,st.Z)(fr).scale(250).clipAngle(142)}function qn(Zt,nn){return[(0,c.cM)((0,c.OR)((c.ou+nn)/2)),-Zt]}function ur(){var Zt=Nt(qn),nn=Zt.center,zn=Zt.rotate;return Zt.center=function(_n){return arguments.length?nn([-_n[1],_n[0]]):[(_n=nn())[1],-_n[0]]},Zt.rotate=function(_n){return arguments.length?zn([_n[0],_n[1],_n.length>2?_n[2]+90:90]):[(_n=zn())[0],_n[1],_n[2]-90]},zn([0,0,90]).scale(159.155)}fr.invert=(0,mr.O)(function(Zt){return 2*(0,c.z4)(Zt)}),qn.invert=function(Zt,nn){return[-nn,2*(0,c.z4)((0,c.Qq)(Zt))-c.ou]}},83074:function($,R,e){e.d(R,{Z:function(){return A}});var k=e(39695);function A(l,T){var x=l[0]*k.uR,d=l[1]*k.uR,s=T[0]*k.uR,t=T[1]*k.uR,o=(0,k.mC)(d),r=(0,k.O$)(d),n=(0,k.mC)(t),a=(0,k.O$)(t),i=o*(0,k.mC)(x),c=o*(0,k.O$)(x),h=n*(0,k.mC)(s),f=n*(0,k.O$)(s),b=2*(0,k.ZR)((0,k._b)((0,k.Jy)(t-d)+o*n*(0,k.Jy)(s-x))),v=(0,k.O$)(b),g=b?function(y){var p=(0,k.O$)(y*=b)/v,m=(0,k.O$)(b-y)/v,w=m*i+p*h,u=m*c+p*f,S=m*r+p*a;return[(0,k.fv)(u,w)*k.RW,(0,k.fv)(S,(0,k._b)(w*w+u*u))*k.RW]}:function(){return[x*k.RW,d*k.RW]};return g.distance=b,g}},39695:function($,R,e){e.d(R,{BZ:function(){return d},Ho:function(){return k},Jy:function(){return w},Kh:function(){return p},O$:function(){return b},OR:function(){return y},Qq:function(){return c},RW:function(){return s},Wn:function(){return o},Xx:function(){return v},ZR:function(){return m},_b:function(){return g},aW:function(){return A},cM:function(){return h},fv:function(){return n},mC:function(){return a},mD:function(){return i},ou:function(){return T},pi:function(){return l},pu:function(){return x},sQ:function(){return f},uR:function(){return t},z4:function(){return r}});var k=1e-6,A=1e-12,l=Math.PI,T=l/2,x=l/4,d=2*l,s=180/l,t=l/180,o=Math.abs,r=Math.atan,n=Math.atan2,a=Math.cos,i=Math.ceil,c=Math.exp,h=Math.log,f=Math.pow,b=Math.sin,v=Math.sign||function(u){return u>0?1:u<0?-1:0},g=Math.sqrt,y=Math.tan;function p(u){return u>1?0:u<-1?l:Math.acos(u)}function m(u){return u>1?T:u<-1?-T:Math.asin(u)}function w(u){return(u=b(u/2))*u}},73182:function($,R,e){function k(){}e.d(R,{Z:function(){return k}})},3559:function($,R,e){var k=e(73182),A=1/0,l=A,T=-A,x=T,d={point:function(s,t){s<A&&(A=s),s>T&&(T=s),t<l&&(l=t),t>x&&(x=t)},lineStart:k.Z,lineEnd:k.Z,polygonStart:k.Z,polygonEnd:k.Z,result:function(){var s=[[A,l],[T,x]];return T=x=-(l=A=1/0),s}};R.Z=d},67108:function($,R,e){e.d(R,{Z:function(){return A}});var k=e(39695);function A(l,T){return(0,k.Wn)(l[0]-T[0])<k.Ho&&(0,k.Wn)(l[1]-T[1])<k.Ho}},23071:function($,R,e){e.d(R,{Z:function(){return d}});var k=e(33940),A=e(7620),l=e(39695),T=(0,k.Z)();function x(s){return(0,l.Wn)(s[0])<=l.pi?s[0]:(0,l.Xx)(s[0])*(((0,l.Wn)(s[0])+l.pi)%l.BZ-l.pi)}function d(s,t){var o=x(t),r=t[1],n=(0,l.O$)(r),a=[(0,l.O$)(o),-(0,l.mC)(o),0],i=0,c=0;T.reset(),n===1?r=l.ou+l.Ho:n===-1&&(r=-l.ou-l.Ho);for(var h=0,f=s.length;h<f;++h)if(v=(b=s[h]).length)for(var b,v,g=b[v-1],y=x(g),p=g[1]/2+l.pu,m=(0,l.O$)(p),w=(0,l.mC)(p),u=0;u<v;++u,y=_,m=L,w=C,g=S){var S=b[u],_=x(S),E=S[1]/2+l.pu,L=(0,l.O$)(E),C=(0,l.mC)(E),P=_-y,I=P>=0?1:-1,U=I*P,z=U>l.pi,H=m*L;if(T.add((0,l.fv)(H*I*(0,l.O$)(U),w*C+H*(0,l.mC)(U))),i+=z?P+I*l.BZ:P,z^y>=o^_>=o){var F=(0,A.T5)((0,A.Og)(g),(0,A.Og)(S));(0,A.iJ)(F);var N=(0,A.T5)(a,F);(0,A.iJ)(N);var B=(z^P>=0?-1:1)*(0,l.ZR)(N[2]);(r>B||r===B&&(F[0]||F[1]))&&(c+=z^P>=0?1:-1)}}return(i<-l.Ho||i<l.Ho&&T<-l.Ho)^1&c}},25382:function($,R,e){e.d(R,{O:function(){return l},W:function(){return A}});var k=e(39695);function A(T){return function(x,d){var s=(0,k.mC)(x),t=(0,k.mC)(d),o=T(s*t);return[o*t*(0,k.O$)(x),o*(0,k.O$)(d)]}}function l(T){return function(x,d){var s=(0,k._b)(x*x+d*d),t=T(s),o=(0,k.O$)(t),r=(0,k.mC)(t);return[(0,k.fv)(x*o,s*r),(0,k.ZR)(s&&d*o/s)]}}},12956:function($,R,e){e.d(R,{Z:function(){return x},l:function(){return T}});var k=e(39695),A=e(25382),l=e(15002),T=(0,A.W)(function(d){return(0,k._b)(2/(1+d))});function x(){return(0,l.Z)(T).scale(124.75).clipAngle(179.999)}T.invert=(0,A.O)(function(d){return 2*(0,k.ZR)(d/2)})},17889:function($,R,e){e.d(R,{N:function(){return T},Z:function(){return x}});var k=e(39695),A=e(25382),l=e(15002),T=(0,A.W)(function(d){return(d=(0,k.Kh)(d))&&d/(0,k.O$)(d)});function x(){return(0,l.Z)(T).scale(79.4188).clipAngle(179.999)}T.invert=(0,A.O)(function(d){return d})},97492:function($,R,e){e.d(R,{Z:function(){return l},k:function(){return A}});var k=e(15002);function A(T,x){return[T,x]}function l(){return(0,k.Z)(A).scale(152.63)}A.invert=A},47589:function($,R,e){e.d(R,{V6:function(){return d},mF:function(){return x},qg:function(){return T},rf:function(){return s}});var k=e(72736),A=e(3559);function l(t,o,r){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),n!=null&&t.clipExtent(null),(0,k.Z)(r,t.stream(A.Z)),o(A.Z.result()),n!=null&&t.clipExtent(n),t}function T(t,o,r){return l(t,function(n){var a=o[1][0]-o[0][0],i=o[1][1]-o[0][1],c=Math.min(a/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),h=+o[0][0]+(a-c*(n[1][0]+n[0][0]))/2,f=+o[0][1]+(i-c*(n[1][1]+n[0][1]))/2;t.scale(150*c).translate([h,f])},r)}function x(t,o,r){return T(t,[[0,0],o],r)}function d(t,o,r){return l(t,function(n){var a=+o,i=a/(n[1][0]-n[0][0]),c=(a-i*(n[1][0]+n[0][0]))/2,h=-i*n[0][1];t.scale(150*i).translate([c,h])},r)}function s(t,o,r){return l(t,function(n){var a=+o,i=a/(n[1][1]-n[0][1]),c=-i*n[0][0],h=(a-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([c,h])},r)}},98936:function($,R,e){e.d(R,{M:function(){return T},Z:function(){return x}});var k=e(39695),A=e(25382),l=e(15002);function T(d,s){var t=(0,k.mC)(s),o=(0,k.mC)(d)*t;return[t*(0,k.O$)(d)/o,(0,k.O$)(s)/o]}function x(){return(0,l.Z)(T).scale(144.049).clipAngle(60)}T.invert=(0,A.O)(k.z4)},15002:function($,R,e){e.d(R,{Z:function(){return f},r:function(){return b}});var k=e(87070),A=e(1457),l=e(87605),T=e(96059),x=e(8593),d=e(39695),s=e(49386),t=e(64684),o=e(47589),r=e(7620),n=(0,d.mC)(30*d.uR);function a(v,g){return+g?function(y,p){function m(w,u,S,_,E,L,C,P,I,U,z,H,F,N){var B=C-w,j=P-u,K=B*B+j*j;if(K>4*p&&F--){var G=_+U,V=E+z,W=L+H,J=(0,d._b)(G*G+V*V+W*W),X=(0,d.ZR)(W/=J),ee=(0,d.Wn)((0,d.Wn)(W)-1)<d.Ho||(0,d.Wn)(S-I)<d.Ho?(S+I)/2:(0,d.fv)(V,G),re=y(ee,X),ie=re[0],se=re[1],fe=ie-w,ye=se-u,ge=j*fe-B*ye;(ge*ge/K>p||(0,d.Wn)((B*fe+j*ye)/K-.5)>.3||_*U+E*z+L*H<n)&&(m(w,u,S,_,E,L,ie,se,ee,G/=J,V/=J,W,F,N),N.point(ie,se),m(ie,se,ee,G,V,W,C,P,I,U,z,H,F,N))}}return function(w){var u,S,_,E,L,C,P,I,U,z,H,F,N={point:B,lineStart:j,lineEnd:G,polygonStart:function(){w.polygonStart(),N.lineStart=V},polygonEnd:function(){w.polygonEnd(),N.lineStart=j}};function B(X,ee){X=y(X,ee),w.point(X[0],X[1])}function j(){I=NaN,N.point=K,w.lineStart()}function K(X,ee){var re=(0,r.Og)([X,ee]),ie=y(X,ee);m(I,U,P,z,H,F,I=ie[0],U=ie[1],P=X,z=re[0],H=re[1],F=re[2],16,w),w.point(I,U)}function G(){N.point=B,w.lineEnd()}function V(){j(),N.point=W,N.lineEnd=J}function W(X,ee){K(u=X,ee),S=I,_=U,E=z,L=H,C=F,N.point=K}function J(){m(I,U,P,z,H,F,S,_,u,E,L,C,16,w),N.lineEnd=G,G()}return N}}(v,g):function(y){return(0,t.l)({point:function(p,m){p=y(p,m),this.stream.point(p[0],p[1])}})}(v)}var i=(0,t.l)({point:function(v,g){this.stream.point(v*d.uR,g*d.uR)}});function c(v,g,y,p,m){function w(u,S){return[g+v*(u*=p),y-v*(S*=m)]}return w.invert=function(u,S){return[(u-g)/v*p,(y-S)/v*m]},w}function h(v,g,y,p,m,w){var u=(0,d.mC)(w),S=(0,d.O$)(w),_=u*v,E=S*v,L=u/v,C=S/v,P=(S*y-u*g)/v,I=(S*g+u*y)/v;function U(z,H){return[_*(z*=p)-E*(H*=m)+g,y-E*z-_*H]}return U.invert=function(z,H){return[p*(L*z-C*H+P),m*(I-C*z-L*H)]},U}function f(v){return b(function(){return v})()}function b(v){var g,y,p,m,w,u,S,_,E,L,C=150,P=480,I=250,U=0,z=0,H=0,F=0,N=0,B=0,j=1,K=1,G=null,V=k.Z,W=null,J=x.Z,X=.5;function ee(fe){return _(fe[0]*d.uR,fe[1]*d.uR)}function re(fe){return(fe=_.invert(fe[0],fe[1]))&&[fe[0]*d.RW,fe[1]*d.RW]}function ie(){var fe=h(C,0,0,j,K,B).apply(null,g(U,z)),ye=(B?h:c)(C,P-fe[0],I-fe[1],j,K,B);return y=(0,s.I)(H,F,N),S=(0,T.Z)(g,ye),_=(0,T.Z)(y,S),u=a(S,X),se()}function se(){return E=L=null,ee}return ee.stream=function(fe){return E&&L===fe?E:E=i(function(ye){return(0,t.l)({point:function(ge,he){var ve=ye(ge,he);return this.stream.point(ve[0],ve[1])}})}(y)(V(u(J(L=fe)))))},ee.preclip=function(fe){return arguments.length?(V=fe,G=void 0,se()):V},ee.postclip=function(fe){return arguments.length?(J=fe,W=p=m=w=null,se()):J},ee.clipAngle=function(fe){return arguments.length?(V=+fe?(0,A.Z)(G=fe*d.uR):(G=null,k.Z),se()):G*d.RW},ee.clipExtent=function(fe){return arguments.length?(J=fe==null?(W=p=m=w=null,x.Z):(0,l.Z)(W=+fe[0][0],p=+fe[0][1],m=+fe[1][0],w=+fe[1][1]),se()):W==null?null:[[W,p],[m,w]]},ee.scale=function(fe){return arguments.length?(C=+fe,ie()):C},ee.translate=function(fe){return arguments.length?(P=+fe[0],I=+fe[1],ie()):[P,I]},ee.center=function(fe){return arguments.length?(U=fe[0]%360*d.uR,z=fe[1]%360*d.uR,ie()):[U*d.RW,z*d.RW]},ee.rotate=function(fe){return arguments.length?(H=fe[0]%360*d.uR,F=fe[1]%360*d.uR,N=fe.length>2?fe[2]%360*d.uR:0,ie()):[H*d.RW,F*d.RW,N*d.RW]},ee.angle=function(fe){return arguments.length?(B=fe%360*d.uR,ie()):B*d.RW},ee.reflectX=function(fe){return arguments.length?(j=fe?-1:1,ie()):j<0},ee.reflectY=function(fe){return arguments.length?(K=fe?-1:1,ie()):K<0},ee.precision=function(fe){return arguments.length?(u=a(S,X=fe*fe),se()):(0,d._b)(X)},ee.fitExtent=function(fe,ye){return(0,o.qg)(ee,fe,ye)},ee.fitSize=function(fe,ye){return(0,o.mF)(ee,fe,ye)},ee.fitWidth=function(fe,ye){return(0,o.V6)(ee,fe,ye)},ee.fitHeight=function(fe,ye){return(0,o.rf)(ee,fe,ye)},function(){return g=v.apply(this,arguments),ee.invert=g.invert&&re,ie()}}},26867:function($,R,e){e.d(R,{K:function(){return l},Z:function(){return T}});var k=e(15002),A=e(39695);function l(x,d){var s=d*d,t=s*s;return[x*(.8707-.131979*s+t*(t*(.003971*s-.001529*t)-.013791)),d*(1.007226+s*(.015085+t*(.028874*s-.044475-.005916*t)))]}function T(){return(0,k.Z)(l).scale(175.295)}l.invert=function(x,d){var s,t=d,o=25;do{var r=t*t,n=r*r;t-=s=(t*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))-d)/(1.007226+r*(.045255+n*(.259866*r-.311325-.06507600000000001*n)))}while((0,A.Wn)(s)>A.Ho&&--o>0);return[x/(.8707+(r=t*t)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),t]}},57962:function($,R,e){e.d(R,{I:function(){return T},Z:function(){return x}});var k=e(39695),A=e(25382),l=e(15002);function T(d,s){return[(0,k.mC)(s)*(0,k.O$)(d),(0,k.O$)(s)]}function x(){return(0,l.Z)(T).scale(249.5).clipAngle(90+k.Ho)}T.invert=(0,A.O)(k.ZR)},49386:function($,R,e){e.d(R,{I:function(){return T},Z:function(){return t}});var k=e(96059),A=e(39695);function l(o,r){return[(0,A.Wn)(o)>A.pi?o+Math.round(-o/A.BZ)*A.BZ:o,r]}function T(o,r,n){return(o%=A.BZ)?r||n?(0,k.Z)(d(o),s(r,n)):d(o):r||n?s(r,n):l}function x(o){return function(r,n){return[(r+=o)>A.pi?r-A.BZ:r<-A.pi?r+A.BZ:r,n]}}function d(o){var r=x(o);return r.invert=x(-o),r}function s(o,r){var n=(0,A.mC)(o),a=(0,A.O$)(o),i=(0,A.mC)(r),c=(0,A.O$)(r);function h(f,b){var v=(0,A.mC)(b),g=(0,A.mC)(f)*v,y=(0,A.O$)(f)*v,p=(0,A.O$)(b),m=p*n+g*a;return[(0,A.fv)(y*i-m*c,g*n-p*a),(0,A.ZR)(m*i+y*c)]}return h.invert=function(f,b){var v=(0,A.mC)(b),g=(0,A.mC)(f)*v,y=(0,A.O$)(f)*v,p=(0,A.O$)(b),m=p*i-y*c;return[(0,A.fv)(y*i+p*c,g*n+m*a),(0,A.ZR)(m*n-g*a)]},h}function t(o){function r(n){return(n=o(n[0]*A.uR,n[1]*A.uR))[0]*=A.RW,n[1]*=A.RW,n}return o=T(o[0]*A.uR,o[1]*A.uR,o.length>2?o[2]*A.uR:0),r.invert=function(n){return(n=o.invert(n[0]*A.uR,n[1]*A.uR))[0]*=A.RW,n[1]*=A.RW,n},r}l.invert=l},72736:function($,R,e){function k(s,t){s&&l.hasOwnProperty(s.type)&&l[s.type](s,t)}e.d(R,{Z:function(){return d}});var A={Feature:function(s,t){k(s.geometry,t)},FeatureCollection:function(s,t){for(var o=s.features,r=-1,n=o.length;++r<n;)k(o[r].geometry,t)}},l={Sphere:function(s,t){t.sphere()},Point:function(s,t){s=s.coordinates,t.point(s[0],s[1],s[2])},MultiPoint:function(s,t){for(var o=s.coordinates,r=-1,n=o.length;++r<n;)s=o[r],t.point(s[0],s[1],s[2])},LineString:function(s,t){T(s.coordinates,t,0)},MultiLineString:function(s,t){for(var o=s.coordinates,r=-1,n=o.length;++r<n;)T(o[r],t,0)},Polygon:function(s,t){x(s.coordinates,t)},MultiPolygon:function(s,t){for(var o=s.coordinates,r=-1,n=o.length;++r<n;)x(o[r],t)},GeometryCollection:function(s,t){for(var o=s.geometries,r=-1,n=o.length;++r<n;)k(o[r],t)}};function T(s,t,o){var r,n=-1,a=s.length-o;for(t.lineStart();++n<a;)r=s[n],t.point(r[0],r[1],r[2]);t.lineEnd()}function x(s,t){var o=-1,r=s.length;for(t.polygonStart();++o<r;)T(s[o],t,1);t.polygonEnd()}function d(s,t){s&&A.hasOwnProperty(s.type)?A[s.type](s,t):k(s,t)}},64684:function($,R,e){function k(T){return{stream:A(T)}}function A(T){return function(x){var d=new l;for(var s in T)d[s]=T[s];return d.stream=x,d}}function l(){}e.d(R,{Z:function(){return k},l:function(){return A}}),l.prototype={constructor:l,point:function(T,x){this.stream.point(T,x)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function($,R,e){function k(Te,Q){return Te.parent===Q.parent?1:2}function A(Te,Q){return Te+Q.x}function l(Te,Q){return Math.max(Te,Q.y)}function T(){var Te=k,Q=1,oe=1,ce=!1;function me(Ae){var Ie,Ce=0;Ae.eachAfter(function(Fe){var Ve=Fe.children;Ve?(Fe.x=function(He){return He.reduce(A,0)/He.length}(Ve),Fe.y=function(He){return 1+He.reduce(l,0)}(Ve)):(Fe.x=Ie?Ce+=Te(Fe,Ie):0,Fe.y=0,Ie=Fe)});var Re=function(Fe){for(var Ve;Ve=Fe.children;)Fe=Ve[0];return Fe}(Ae),le=function(Fe){for(var Ve;Ve=Fe.children;)Fe=Ve[Ve.length-1];return Fe}(Ae),de=Re.x-Te(Re,le)/2,_e=le.x+Te(le,Re)/2;return Ae.eachAfter(ce?function(Fe){Fe.x=(Fe.x-Ae.x)*Q,Fe.y=(Ae.y-Fe.y)*oe}:function(Fe){Fe.x=(Fe.x-de)/(_e-de)*Q,Fe.y=(1-(Ae.y?Fe.y/Ae.y:1))*oe})}return me.separation=function(Ae){return arguments.length?(Te=Ae,me):Te},me.size=function(Ae){return arguments.length?(ce=!1,Q=+Ae[0],oe=+Ae[1],me):ce?null:[Q,oe]},me.nodeSize=function(Ae){return arguments.length?(ce=!0,Q=+Ae[0],oe=+Ae[1],me):ce?[Q,oe]:null},me}function x(Te){var Q=0,oe=Te.children,ce=oe&&oe.length;if(ce)for(;--ce>=0;)Q+=oe[ce].value;else Q=1;Te.value=Q}function d(Te,Q){var oe,ce,me,Ae,Ie,Ce=new r(Te),Re=+Te.value&&(Ce.value=Te.value),le=[Ce];for(Q==null&&(Q=s);oe=le.pop();)if(Re&&(oe.value=+oe.data.value),(me=Q(oe.data))&&(Ie=me.length))for(oe.children=new Array(Ie),Ae=Ie-1;Ae>=0;--Ae)le.push(ce=oe.children[Ae]=new r(me[Ae])),ce.parent=oe,ce.depth=oe.depth+1;return Ce.eachBefore(o)}function s(Te){return Te.children}function t(Te){Te.data=Te.data.data}function o(Te){var Q=0;do Te.height=Q;while((Te=Te.parent)&&Te.height<++Q)}function r(Te){this.data=Te,this.depth=this.height=0,this.parent=null}e.r(R),e.d(R,{cluster:function(){return T},hierarchy:function(){return d},pack:function(){return I},packEnclose:function(){return a},packSiblings:function(){return S},partition:function(){return B},stratify:function(){return W},tree:function(){return fe},treemap:function(){return Oe},treemapBinary:function(){return xe},treemapDice:function(){return N},treemapResquarify:function(){return Me},treemapSlice:function(){return ye},treemapSliceDice:function(){return ke},treemapSquarify:function(){return ve}}),r.prototype=d.prototype={constructor:r,count:function(){return this.eachAfter(x)},each:function(Te){var Q,oe,ce,me,Ae=this,Ie=[Ae];do for(Q=Ie.reverse(),Ie=[];Ae=Q.pop();)if(Te(Ae),oe=Ae.children)for(ce=0,me=oe.length;ce<me;++ce)Ie.push(oe[ce]);while(Ie.length);return this},eachAfter:function(Te){for(var Q,oe,ce,me=this,Ae=[me],Ie=[];me=Ae.pop();)if(Ie.push(me),Q=me.children)for(oe=0,ce=Q.length;oe<ce;++oe)Ae.push(Q[oe]);for(;me=Ie.pop();)Te(me);return this},eachBefore:function(Te){for(var Q,oe,ce=this,me=[ce];ce=me.pop();)if(Te(ce),Q=ce.children)for(oe=Q.length-1;oe>=0;--oe)me.push(Q[oe]);return this},sum:function(Te){return this.eachAfter(function(Q){for(var oe=+Te(Q.data)||0,ce=Q.children,me=ce&&ce.length;--me>=0;)oe+=ce[me].value;Q.value=oe})},sort:function(Te){return this.eachBefore(function(Q){Q.children&&Q.children.sort(Te)})},path:function(Te){for(var Q=this,oe=function(Ae,Ie){if(Ae===Ie)return Ae;var Ce=Ae.ancestors(),Re=Ie.ancestors(),le=null;for(Ae=Ce.pop(),Ie=Re.pop();Ae===Ie;)le=Ae,Ae=Ce.pop(),Ie=Re.pop();return le}(Q,Te),ce=[Q];Q!==oe;)Q=Q.parent,ce.push(Q);for(var me=ce.length;Te!==oe;)ce.splice(me,0,Te),Te=Te.parent;return ce},ancestors:function(){for(var Te=this,Q=[Te];Te=Te.parent;)Q.push(Te);return Q},descendants:function(){var Te=[];return this.each(function(Q){Te.push(Q)}),Te},leaves:function(){var Te=[];return this.eachBefore(function(Q){Q.children||Te.push(Q)}),Te},links:function(){var Te=this,Q=[];return Te.each(function(oe){oe!==Te&&Q.push({source:oe.parent,target:oe})}),Q},copy:function(){return d(this).eachBefore(t)}};var n=Array.prototype.slice;function a(Te){for(var Q,oe,ce=0,me=(Te=function(Ie){for(var Ce,Re,le=Ie.length;le;)Re=Math.random()*le--|0,Ce=Ie[le],Ie[le]=Ie[Re],Ie[Re]=Ce;return Ie}(n.call(Te))).length,Ae=[];ce<me;)Q=Te[ce],oe&&h(oe,Q)?++ce:(oe=b(Ae=i(Ae,Q)),ce=0);return oe}function i(Te,Q){var oe,ce;if(f(Q,Te))return[Q];for(oe=0;oe<Te.length;++oe)if(c(Q,Te[oe])&&f(v(Te[oe],Q),Te))return[Te[oe],Q];for(oe=0;oe<Te.length-1;++oe)for(ce=oe+1;ce<Te.length;++ce)if(c(v(Te[oe],Te[ce]),Q)&&c(v(Te[oe],Q),Te[ce])&&c(v(Te[ce],Q),Te[oe])&&f(g(Te[oe],Te[ce],Q),Te))return[Te[oe],Te[ce],Q];throw new Error}function c(Te,Q){var oe=Te.r-Q.r,ce=Q.x-Te.x,me=Q.y-Te.y;return oe<0||oe*oe<ce*ce+me*me}function h(Te,Q){var oe=Te.r-Q.r+1e-6,ce=Q.x-Te.x,me=Q.y-Te.y;return oe>0&&oe*oe>ce*ce+me*me}function f(Te,Q){for(var oe=0;oe<Q.length;++oe)if(!h(Te,Q[oe]))return!1;return!0}function b(Te){switch(Te.length){case 1:return{x:(Q=Te[0]).x,y:Q.y,r:Q.r};case 2:return v(Te[0],Te[1]);case 3:return g(Te[0],Te[1],Te[2])}var Q}function v(Te,Q){var oe=Te.x,ce=Te.y,me=Te.r,Ae=Q.x,Ie=Q.y,Ce=Q.r,Re=Ae-oe,le=Ie-ce,de=Ce-me,_e=Math.sqrt(Re*Re+le*le);return{x:(oe+Ae+Re/_e*de)/2,y:(ce+Ie+le/_e*de)/2,r:(_e+me+Ce)/2}}function g(Te,Q,oe){var ce=Te.x,me=Te.y,Ae=Te.r,Ie=Q.x,Ce=Q.y,Re=Q.r,le=oe.x,de=oe.y,_e=oe.r,Fe=ce-Ie,Ve=ce-le,He=me-Ce,nt=me-de,tt=Re-Ae,ot=_e-Ae,dt=ce*ce+me*me-Ae*Ae,kt=dt-Ie*Ie-Ce*Ce+Re*Re,mt=dt-le*le-de*de+_e*_e,wt=Ve*He-Fe*nt,Lt=(He*mt-nt*kt)/(2*wt)-ce,Ct=(nt*tt-He*ot)/wt,It=(Ve*kt-Fe*mt)/(2*wt)-me,Ut=(Fe*ot-Ve*tt)/wt,Rt=Ct*Ct+Ut*Ut-1,Ge=2*(Ae+Lt*Ct+It*Ut),We=Lt*Lt+It*It-Ae*Ae,Be=-(Rt?(Ge+Math.sqrt(Ge*Ge-4*Rt*We))/(2*Rt):We/Ge);return{x:ce+Lt+Ct*Be,y:me+It+Ut*Be,r:Be}}function y(Te,Q,oe){var ce,me,Ae,Ie,Ce=Te.x-Q.x,Re=Te.y-Q.y,le=Ce*Ce+Re*Re;le?(me=Q.r+oe.r,me*=me,Ie=Te.r+oe.r,me>(Ie*=Ie)?(ce=(le+Ie-me)/(2*le),Ae=Math.sqrt(Math.max(0,Ie/le-ce*ce)),oe.x=Te.x-ce*Ce-Ae*Re,oe.y=Te.y-ce*Re+Ae*Ce):(ce=(le+me-Ie)/(2*le),Ae=Math.sqrt(Math.max(0,me/le-ce*ce)),oe.x=Q.x+ce*Ce-Ae*Re,oe.y=Q.y+ce*Re+Ae*Ce)):(oe.x=Q.x+oe.r,oe.y=Q.y)}function p(Te,Q){var oe=Te.r+Q.r-1e-6,ce=Q.x-Te.x,me=Q.y-Te.y;return oe>0&&oe*oe>ce*ce+me*me}function m(Te){var Q=Te._,oe=Te.next._,ce=Q.r+oe.r,me=(Q.x*oe.r+oe.x*Q.r)/ce,Ae=(Q.y*oe.r+oe.y*Q.r)/ce;return me*me+Ae*Ae}function w(Te){this._=Te,this.next=null,this.previous=null}function u(Te){if(!(me=Te.length))return 0;var Q,oe,ce,me,Ae,Ie,Ce,Re,le,de,_e;if((Q=Te[0]).x=0,Q.y=0,!(me>1))return Q.r;if(oe=Te[1],Q.x=-oe.r,oe.x=Q.r,oe.y=0,!(me>2))return Q.r+oe.r;y(oe,Q,ce=Te[2]),Q=new w(Q),oe=new w(oe),ce=new w(ce),Q.next=ce.previous=oe,oe.next=Q.previous=ce,ce.next=oe.previous=Q;e:for(Ce=3;Ce<me;++Ce){y(Q._,oe._,ce=Te[Ce]),ce=new w(ce),Re=oe.next,le=Q.previous,de=oe._.r,_e=Q._.r;do if(de<=_e){if(p(Re._,ce._)){oe=Re,Q.next=oe,oe.previous=Q,--Ce;continue e}de+=Re._.r,Re=Re.next}else{if(p(le._,ce._)){(Q=le).next=oe,oe.previous=Q,--Ce;continue e}_e+=le._.r,le=le.previous}while(Re!==le.next);for(ce.previous=Q,ce.next=oe,Q.next=oe.previous=oe=ce,Ae=m(Q);(ce=ce.next)!==oe;)(Ie=m(ce))<Ae&&(Q=ce,Ae=Ie);oe=Q.next}for(Q=[oe._],ce=oe;(ce=ce.next)!==oe;)Q.push(ce._);for(ce=a(Q),Ce=0;Ce<me;++Ce)(Q=Te[Ce]).x-=ce.x,Q.y-=ce.y;return ce.r}function S(Te){return u(Te),Te}function _(Te){return Te==null?null:E(Te)}function E(Te){if(typeof Te!="function")throw new Error;return Te}function L(){return 0}function C(Te){return function(){return Te}}function P(Te){return Math.sqrt(Te.value)}function I(){var Te=null,Q=1,oe=1,ce=L;function me(Ae){return Ae.x=Q/2,Ae.y=oe/2,Te?Ae.eachBefore(U(Te)).eachAfter(z(ce,.5)).eachBefore(H(1)):Ae.eachBefore(U(P)).eachAfter(z(L,1)).eachAfter(z(ce,Ae.r/Math.min(Q,oe))).eachBefore(H(Math.min(Q,oe)/(2*Ae.r))),Ae}return me.radius=function(Ae){return arguments.length?(Te=_(Ae),me):Te},me.size=function(Ae){return arguments.length?(Q=+Ae[0],oe=+Ae[1],me):[Q,oe]},me.padding=function(Ae){return arguments.length?(ce=typeof Ae=="function"?Ae:C(+Ae),me):ce},me}function U(Te){return function(Q){Q.children||(Q.r=Math.max(0,+Te(Q)||0))}}function z(Te,Q){return function(oe){if(ce=oe.children){var ce,me,Ae,Ie=ce.length,Ce=Te(oe)*Q||0;if(Ce)for(me=0;me<Ie;++me)ce[me].r+=Ce;if(Ae=u(ce),Ce)for(me=0;me<Ie;++me)ce[me].r-=Ce;oe.r=Ae+Ce}}}function H(Te){return function(Q){var oe=Q.parent;Q.r*=Te,oe&&(Q.x=oe.x+Te*Q.x,Q.y=oe.y+Te*Q.y)}}function F(Te){Te.x0=Math.round(Te.x0),Te.y0=Math.round(Te.y0),Te.x1=Math.round(Te.x1),Te.y1=Math.round(Te.y1)}function N(Te,Q,oe,ce,me){for(var Ae,Ie=Te.children,Ce=-1,Re=Ie.length,le=Te.value&&(ce-Q)/Te.value;++Ce<Re;)(Ae=Ie[Ce]).y0=oe,Ae.y1=me,Ae.x0=Q,Ae.x1=Q+=Ae.value*le}function B(){var Te=1,Q=1,oe=0,ce=!1;function me(Ae){var Ie=Ae.height+1;return Ae.x0=Ae.y0=oe,Ae.x1=Te,Ae.y1=Q/Ie,Ae.eachBefore(function(Ce,Re){return function(le){le.children&&N(le,le.x0,Ce*(le.depth+1)/Re,le.x1,Ce*(le.depth+2)/Re);var de=le.x0,_e=le.y0,Fe=le.x1-oe,Ve=le.y1-oe;Fe<de&&(de=Fe=(de+Fe)/2),Ve<_e&&(_e=Ve=(_e+Ve)/2),le.x0=de,le.y0=_e,le.x1=Fe,le.y1=Ve}}(Q,Ie)),ce&&Ae.eachBefore(F),Ae}return me.round=function(Ae){return arguments.length?(ce=!!Ae,me):ce},me.size=function(Ae){return arguments.length?(Te=+Ae[0],Q=+Ae[1],me):[Te,Q]},me.padding=function(Ae){return arguments.length?(oe=+Ae,me):oe},me}var j={depth:-1},K={};function G(Te){return Te.id}function V(Te){return Te.parentId}function W(){var Te=G,Q=V;function oe(ce){var me,Ae,Ie,Ce,Re,le,de,_e=ce.length,Fe=new Array(_e),Ve={};for(Ae=0;Ae<_e;++Ae)me=ce[Ae],Re=Fe[Ae]=new r(me),(le=Te(me,Ae,ce))!=null&&(le+="")&&(Ve[de="$"+(Re.id=le)]=de in Ve?K:Re);for(Ae=0;Ae<_e;++Ae)if(Re=Fe[Ae],(le=Q(ce[Ae],Ae,ce))!=null&&(le+="")){if(!(Ce=Ve["$"+le]))throw new Error("missing: "+le);if(Ce===K)throw new Error("ambiguous: "+le);Ce.children?Ce.children.push(Re):Ce.children=[Re],Re.parent=Ce}else{if(Ie)throw new Error("multiple roots");Ie=Re}if(!Ie)throw new Error("no root");if(Ie.parent=j,Ie.eachBefore(function(He){He.depth=He.parent.depth+1,--_e}).eachBefore(o),Ie.parent=null,_e>0)throw new Error("cycle");return Ie}return oe.id=function(ce){return arguments.length?(Te=E(ce),oe):Te},oe.parentId=function(ce){return arguments.length?(Q=E(ce),oe):Q},oe}function J(Te,Q){return Te.parent===Q.parent?1:2}function X(Te){var Q=Te.children;return Q?Q[0]:Te.t}function ee(Te){var Q=Te.children;return Q?Q[Q.length-1]:Te.t}function re(Te,Q,oe){var ce=oe/(Q.i-Te.i);Q.c-=ce,Q.s+=oe,Te.c+=ce,Q.z+=oe,Q.m+=oe}function ie(Te,Q,oe){return Te.a.parent===Q.parent?Te.a:oe}function se(Te,Q){this._=Te,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Q}function fe(){var Te=J,Q=1,oe=1,ce=null;function me(Re){var le=function(ot){for(var dt,kt,mt,wt,Lt,Ct=new se(ot,0),It=[Ct];dt=It.pop();)if(mt=dt._.children)for(dt.children=new Array(Lt=mt.length),wt=Lt-1;wt>=0;--wt)It.push(kt=dt.children[wt]=new se(mt[wt],wt)),kt.parent=dt;return(Ct.parent=new se(null,0)).children=[Ct],Ct}(Re);if(le.eachAfter(Ae),le.parent.m=-le.z,le.eachBefore(Ie),ce)Re.eachBefore(Ce);else{var de=Re,_e=Re,Fe=Re;Re.eachBefore(function(ot){ot.x<de.x&&(de=ot),ot.x>_e.x&&(_e=ot),ot.depth>Fe.depth&&(Fe=ot)});var Ve=de===_e?1:Te(de,_e)/2,He=Ve-de.x,nt=Q/(_e.x+Ve+He),tt=oe/(Fe.depth||1);Re.eachBefore(function(ot){ot.x=(ot.x+He)*nt,ot.y=ot.depth*tt})}return Re}function Ae(Re){var le=Re.children,de=Re.parent.children,_e=Re.i?de[Re.i-1]:null;if(le){(function(Ve){for(var He,nt=0,tt=0,ot=Ve.children,dt=ot.length;--dt>=0;)(He=ot[dt]).z+=nt,He.m+=nt,nt+=He.s+(tt+=He.c)})(Re);var Fe=(le[0].z+le[le.length-1].z)/2;_e?(Re.z=_e.z+Te(Re._,_e._),Re.m=Re.z-Fe):Re.z=Fe}else _e&&(Re.z=_e.z+Te(Re._,_e._));Re.parent.A=function(Ve,He,nt){if(He){for(var tt,ot=Ve,dt=Ve,kt=He,mt=ot.parent.children[0],wt=ot.m,Lt=dt.m,Ct=kt.m,It=mt.m;kt=ee(kt),ot=X(ot),kt&&ot;)mt=X(mt),(dt=ee(dt)).a=Ve,(tt=kt.z+Ct-ot.z-wt+Te(kt._,ot._))>0&&(re(ie(kt,Ve,nt),Ve,tt),wt+=tt,Lt+=tt),Ct+=kt.m,wt+=ot.m,It+=mt.m,Lt+=dt.m;kt&&!ee(dt)&&(dt.t=kt,dt.m+=Ct-Lt),ot&&!X(mt)&&(mt.t=ot,mt.m+=wt-It,nt=Ve)}return nt}(Re,_e,Re.parent.A||de[0])}function Ie(Re){Re._.x=Re.z+Re.parent.m,Re.m+=Re.parent.m}function Ce(Re){Re.x*=Q,Re.y=Re.depth*oe}return me.separation=function(Re){return arguments.length?(Te=Re,me):Te},me.size=function(Re){return arguments.length?(ce=!1,Q=+Re[0],oe=+Re[1],me):ce?null:[Q,oe]},me.nodeSize=function(Re){return arguments.length?(ce=!0,Q=+Re[0],oe=+Re[1],me):ce?[Q,oe]:null},me}function ye(Te,Q,oe,ce,me){for(var Ae,Ie=Te.children,Ce=-1,Re=Ie.length,le=Te.value&&(me-oe)/Te.value;++Ce<Re;)(Ae=Ie[Ce]).x0=Q,Ae.x1=ce,Ae.y0=oe,Ae.y1=oe+=Ae.value*le}se.prototype=Object.create(r.prototype);var ge=(1+Math.sqrt(5))/2;function he(Te,Q,oe,ce,me,Ae){for(var Ie,Ce,Re,le,de,_e,Fe,Ve,He,nt,tt,ot=[],dt=Q.children,kt=0,mt=0,wt=dt.length,Lt=Q.value;kt<wt;){Re=me-oe,le=Ae-ce;do de=dt[mt++].value;while(!de&&mt<wt);for(_e=Fe=de,tt=de*de*(nt=Math.max(le/Re,Re/le)/(Lt*Te)),He=Math.max(Fe/tt,tt/_e);mt<wt;++mt){if(de+=Ce=dt[mt].value,Ce<_e&&(_e=Ce),Ce>Fe&&(Fe=Ce),tt=de*de*nt,(Ve=Math.max(Fe/tt,tt/_e))>He){de-=Ce;break}He=Ve}ot.push(Ie={value:de,dice:Re<le,children:dt.slice(kt,mt)}),Ie.dice?N(Ie,oe,ce,me,Lt?ce+=le*de/Lt:Ae):ye(Ie,oe,ce,Lt?oe+=Re*de/Lt:me,Ae),Lt-=de,kt=mt}return ot}var ve=function Te(Q){function oe(ce,me,Ae,Ie,Ce){he(Q,ce,me,Ae,Ie,Ce)}return oe.ratio=function(ce){return Te((ce=+ce)>1?ce:1)},oe}(ge);function Oe(){var Te=ve,Q=!1,oe=1,ce=1,me=[0],Ae=L,Ie=L,Ce=L,Re=L,le=L;function de(Fe){return Fe.x0=Fe.y0=0,Fe.x1=oe,Fe.y1=ce,Fe.eachBefore(_e),me=[0],Q&&Fe.eachBefore(F),Fe}function _e(Fe){var Ve=me[Fe.depth],He=Fe.x0+Ve,nt=Fe.y0+Ve,tt=Fe.x1-Ve,ot=Fe.y1-Ve;tt<He&&(He=tt=(He+tt)/2),ot<nt&&(nt=ot=(nt+ot)/2),Fe.x0=He,Fe.y0=nt,Fe.x1=tt,Fe.y1=ot,Fe.children&&(Ve=me[Fe.depth+1]=Ae(Fe)/2,He+=le(Fe)-Ve,nt+=Ie(Fe)-Ve,(tt-=Ce(Fe)-Ve)<He&&(He=tt=(He+tt)/2),(ot-=Re(Fe)-Ve)<nt&&(nt=ot=(nt+ot)/2),Te(Fe,He,nt,tt,ot))}return de.round=function(Fe){return arguments.length?(Q=!!Fe,de):Q},de.size=function(Fe){return arguments.length?(oe=+Fe[0],ce=+Fe[1],de):[oe,ce]},de.tile=function(Fe){return arguments.length?(Te=E(Fe),de):Te},de.padding=function(Fe){return arguments.length?de.paddingInner(Fe).paddingOuter(Fe):de.paddingInner()},de.paddingInner=function(Fe){return arguments.length?(Ae=typeof Fe=="function"?Fe:C(+Fe),de):Ae},de.paddingOuter=function(Fe){return arguments.length?de.paddingTop(Fe).paddingRight(Fe).paddingBottom(Fe).paddingLeft(Fe):de.paddingTop()},de.paddingTop=function(Fe){return arguments.length?(Ie=typeof Fe=="function"?Fe:C(+Fe),de):Ie},de.paddingRight=function(Fe){return arguments.length?(Ce=typeof Fe=="function"?Fe:C(+Fe),de):Ce},de.paddingBottom=function(Fe){return arguments.length?(Re=typeof Fe=="function"?Fe:C(+Fe),de):Re},de.paddingLeft=function(Fe){return arguments.length?(le=typeof Fe=="function"?Fe:C(+Fe),de):le},de}function xe(Te,Q,oe,ce,me){var Ae,Ie,Ce=Te.children,Re=Ce.length,le=new Array(Re+1);for(le[0]=Ie=Ae=0;Ae<Re;++Ae)le[Ae+1]=Ie+=Ce[Ae].value;(function de(_e,Fe,Ve,He,nt,tt,ot){if(_e>=Fe-1){var dt=Ce[_e];return dt.x0=He,dt.y0=nt,dt.x1=tt,void(dt.y1=ot)}for(var kt=le[_e],mt=Ve/2+kt,wt=_e+1,Lt=Fe-1;wt<Lt;){var Ct=wt+Lt>>>1;le[Ct]<mt?wt=Ct+1:Lt=Ct}mt-le[wt-1]<le[wt]-mt&&_e+1<wt&&--wt;var It=le[wt]-kt,Ut=Ve-It;if(tt-He>ot-nt){var Rt=(He*Ut+tt*It)/Ve;de(_e,wt,It,He,nt,Rt,ot),de(wt,Fe,Ut,Rt,nt,tt,ot)}else{var Ge=(nt*Ut+ot*It)/Ve;de(_e,wt,It,He,nt,tt,Ge),de(wt,Fe,Ut,He,Ge,tt,ot)}})(0,Re,Te.value,Q,oe,ce,me)}function ke(Te,Q,oe,ce,me){(1&Te.depth?ye:N)(Te,Q,oe,ce,me)}var Me=function Te(Q){function oe(ce,me,Ae,Ie,Ce){if((Re=ce._squarify)&&Re.ratio===Q)for(var Re,le,de,_e,Fe,Ve=-1,He=Re.length,nt=ce.value;++Ve<He;){for(de=(le=Re[Ve]).children,_e=le.value=0,Fe=de.length;_e<Fe;++_e)le.value+=de[_e].value;le.dice?N(le,me,Ae,Ie,Ae+=(Ce-Ae)*le.value/nt):ye(le,me,Ae,me+=(Ie-me)*le.value/nt,Ce),nt-=le.value}else ce._squarify=Re=he(Q,ce,me,Ae,Ie,Ce),Re.ratio=Q}return oe.ratio=function(ce){return Te((ce=+ce)>1?ce:1)},oe}(ge)},29502:function($,R,e){function k(X,ee,re){X.prototype=ee.prototype=re,re.constructor=X}function A(X,ee){var re=Object.create(X.prototype);for(var ie in ee)re[ie]=ee[ie];return re}function l(){}e.d(R,{sX:function(){return J},k4:function(){return B}});var T=.7,x=1/T,d="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\("+[d,d,d]+"\\)$"),n=new RegExp("^rgb\\("+[t,t,t]+"\\)$"),a=new RegExp("^rgba\\("+[d,d,d,s]+"\\)$"),i=new RegExp("^rgba\\("+[t,t,t,s]+"\\)$"),c=new RegExp("^hsl\\("+[s,t,t]+"\\)$"),h=new RegExp("^hsla\\("+[s,t,t,s]+"\\)$"),f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function b(){return this.rgb().formatHex()}function v(){return this.rgb().formatRgb()}function g(X){var ee,re;return X=(X+"").trim().toLowerCase(),(ee=o.exec(X))?(re=ee[1].length,ee=parseInt(ee[1],16),re===6?y(ee):re===3?new u(ee>>8&15|ee>>4&240,ee>>4&15|240&ee,(15&ee)<<4|15&ee,1):re===8?p(ee>>24&255,ee>>16&255,ee>>8&255,(255&ee)/255):re===4?p(ee>>12&15|ee>>8&240,ee>>8&15|ee>>4&240,ee>>4&15|240&ee,((15&ee)<<4|15&ee)/255):null):(ee=r.exec(X))?new u(ee[1],ee[2],ee[3],1):(ee=n.exec(X))?new u(255*ee[1]/100,255*ee[2]/100,255*ee[3]/100,1):(ee=a.exec(X))?p(ee[1],ee[2],ee[3],ee[4]):(ee=i.exec(X))?p(255*ee[1]/100,255*ee[2]/100,255*ee[3]/100,ee[4]):(ee=c.exec(X))?L(ee[1],ee[2]/100,ee[3]/100,1):(ee=h.exec(X))?L(ee[1],ee[2]/100,ee[3]/100,ee[4]):f.hasOwnProperty(X)?y(f[X]):X==="transparent"?new u(NaN,NaN,NaN,0):null}function y(X){return new u(X>>16&255,X>>8&255,255&X,1)}function p(X,ee,re,ie){return ie<=0&&(X=ee=re=NaN),new u(X,ee,re,ie)}function m(X){return X instanceof l||(X=g(X)),X?new u((X=X.rgb()).r,X.g,X.b,X.opacity):new u}function w(X,ee,re,ie){return arguments.length===1?m(X):new u(X,ee,re,ie??1)}function u(X,ee,re,ie){this.r=+X,this.g=+ee,this.b=+re,this.opacity=+ie}function S(){return"#"+E(this.r)+E(this.g)+E(this.b)}function _(){var X=this.opacity;return((X=isNaN(X)?1:Math.max(0,Math.min(1,X)))===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(X===1?")":", "+X+")")}function E(X){return((X=Math.max(0,Math.min(255,Math.round(X)||0)))<16?"0":"")+X.toString(16)}function L(X,ee,re,ie){return ie<=0?X=ee=re=NaN:re<=0||re>=1?X=ee=NaN:ee<=0&&(X=NaN),new P(X,ee,re,ie)}function C(X){if(X instanceof P)return new P(X.h,X.s,X.l,X.opacity);if(X instanceof l||(X=g(X)),!X)return new P;if(X instanceof P)return X;var ee=(X=X.rgb()).r/255,re=X.g/255,ie=X.b/255,se=Math.min(ee,re,ie),fe=Math.max(ee,re,ie),ye=NaN,ge=fe-se,he=(fe+se)/2;return ge?(ye=ee===fe?(re-ie)/ge+6*(re<ie):re===fe?(ie-ee)/ge+2:(ee-re)/ge+4,ge/=he<.5?fe+se:2-fe-se,ye*=60):ge=he>0&&he<1?0:ye,new P(ye,ge,he,X.opacity)}function P(X,ee,re,ie){this.h=+X,this.s=+ee,this.l=+re,this.opacity=+ie}function I(X,ee,re){return 255*(X<60?ee+(re-ee)*X/60:X<180?re:X<240?ee+(re-ee)*(240-X)/60:ee)}function U(X){return function(){return X}}function z(X,ee){var re=ee-X;return re?function(ie,se){return function(fe){return ie+fe*se}}(X,re):U(isNaN(X)?ee:X)}k(l,g,{copy:function(X){return Object.assign(new this.constructor,this,X)},displayable:function(){return this.rgb().displayable()},hex:b,formatHex:b,formatHsl:function(){return C(this).formatHsl()},formatRgb:v,toString:v}),k(u,w,A(l,{brighter:function(X){return X=X==null?x:Math.pow(x,X),new u(this.r*X,this.g*X,this.b*X,this.opacity)},darker:function(X){return X=X==null?T:Math.pow(T,X),new u(this.r*X,this.g*X,this.b*X,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:_,toString:_})),k(P,function(X,ee,re,ie){return arguments.length===1?C(X):new P(X,ee,re,ie??1)},A(l,{brighter:function(X){return X=X==null?x:Math.pow(x,X),new P(this.h,this.s,this.l*X,this.opacity)},darker:function(X){return X=X==null?T:Math.pow(T,X),new P(this.h,this.s,this.l*X,this.opacity)},rgb:function(){var X=this.h%360+360*(this.h<0),ee=isNaN(X)||isNaN(this.s)?0:this.s,re=this.l,ie=re+(re<.5?re:1-re)*ee,se=2*re-ie;return new u(I(X>=240?X-240:X+120,se,ie),I(X,se,ie),I(X<120?X+240:X-120,se,ie),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var X=this.opacity;return((X=isNaN(X)?1:Math.max(0,Math.min(1,X)))===1?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(X===1?")":", "+X+")")}}));var H=function X(ee){var re=function(se){return(se=+se)==1?z:function(fe,ye){return ye-fe?function(ge,he,ve){return ge=Math.pow(ge,ve),he=Math.pow(he,ve)-ge,ve=1/ve,function(Oe){return Math.pow(ge+Oe*he,ve)}}(fe,ye,se):U(isNaN(fe)?ye:fe)}}(ee);function ie(se,fe){var ye=re((se=w(se)).r,(fe=w(fe)).r),ge=re(se.g,fe.g),he=re(se.b,fe.b),ve=z(se.opacity,fe.opacity);return function(Oe){return se.r=ye(Oe),se.g=ge(Oe),se.b=he(Oe),se.opacity=ve(Oe),se+""}}return ie.gamma=X,ie}(1);function F(X,ee){var re,ie=ee?ee.length:0,se=X?Math.min(ie,X.length):0,fe=new Array(se),ye=new Array(ie);for(re=0;re<se;++re)fe[re]=J(X[re],ee[re]);for(;re<ie;++re)ye[re]=ee[re];return function(ge){for(re=0;re<se;++re)ye[re]=fe[re](ge);return ye}}function N(X,ee){var re=new Date;return X=+X,ee=+ee,function(ie){return re.setTime(X*(1-ie)+ee*ie),re}}function B(X,ee){return X=+X,ee=+ee,function(re){return X*(1-re)+ee*re}}function j(X,ee){var re,ie={},se={};for(re in X!==null&&typeof X=="object"||(X={}),ee!==null&&typeof ee=="object"||(ee={}),ee)re in X?ie[re]=J(X[re],ee[re]):se[re]=ee[re];return function(fe){for(re in ie)se[re]=ie[re](fe);return se}}var K=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,G=new RegExp(K.source,"g");function V(X,ee){var re,ie,se,fe=K.lastIndex=G.lastIndex=0,ye=-1,ge=[],he=[];for(X+="",ee+="";(re=K.exec(X))&&(ie=G.exec(ee));)(se=ie.index)>fe&&(se=ee.slice(fe,se),ge[ye]?ge[ye]+=se:ge[++ye]=se),(re=re[0])===(ie=ie[0])?ge[ye]?ge[ye]+=ie:ge[++ye]=ie:(ge[++ye]=null,he.push({i:ye,x:B(re,ie)})),fe=G.lastIndex;return fe<ee.length&&(se=ee.slice(fe),ge[ye]?ge[ye]+=se:ge[++ye]=se),ge.length<2?he[0]?function(ve){return function(Oe){return ve(Oe)+""}}(he[0].x):function(ve){return function(){return ve}}(ee):(ee=he.length,function(ve){for(var Oe,xe=0;xe<ee;++xe)ge[(Oe=he[xe]).i]=Oe.x(ve);return ge.join("")})}function W(X,ee){ee||(ee=[]);var re,ie=X?Math.min(ee.length,X.length):0,se=ee.slice();return function(fe){for(re=0;re<ie;++re)se[re]=X[re]*(1-fe)+ee[re]*fe;return se}}function J(X,ee){var re,ie,se=typeof ee;return ee==null||se==="boolean"?U(ee):(se==="number"?B:se==="string"?(re=g(ee))?(ee=re,H):V:ee instanceof g?H:ee instanceof Date?N:(ie=ee,!ArrayBuffer.isView(ie)||ie instanceof DataView?Array.isArray(ee)?F:typeof ee.valueOf!="function"&&typeof ee.toString!="function"||isNaN(ee)?j:B:W))(X,ee)}},45879:function($,R,e){e.d(R,{h5:function(){return h}});var k=Math.PI,A=2*k,l=1e-6,T=A-l;function x(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function d(){return new x}x.prototype=d.prototype={constructor:x,moveTo:function(f,b){this._+="M"+(this._x0=this._x1=+f)+","+(this._y0=this._y1=+b)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(f,b){this._+="L"+(this._x1=+f)+","+(this._y1=+b)},quadraticCurveTo:function(f,b,v,g){this._+="Q"+ +f+","+ +b+","+(this._x1=+v)+","+(this._y1=+g)},bezierCurveTo:function(f,b,v,g,y,p){this._+="C"+ +f+","+ +b+","+ +v+","+ +g+","+(this._x1=+y)+","+(this._y1=+p)},arcTo:function(f,b,v,g,y){f=+f,b=+b,v=+v,g=+g,y=+y;var p=this._x1,m=this._y1,w=v-f,u=g-b,S=p-f,_=m-b,E=S*S+_*_;if(y<0)throw new Error("negative radius: "+y);if(this._x1===null)this._+="M"+(this._x1=f)+","+(this._y1=b);else if(E>l)if(Math.abs(_*w-u*S)>l&&y){var L=v-p,C=g-m,P=w*w+u*u,I=L*L+C*C,U=Math.sqrt(P),z=Math.sqrt(E),H=y*Math.tan((k-Math.acos((P+E-I)/(2*U*z)))/2),F=H/z,N=H/U;Math.abs(F-1)>l&&(this._+="L"+(f+F*S)+","+(b+F*_)),this._+="A"+y+","+y+",0,0,"+ +(_*L>S*C)+","+(this._x1=f+N*w)+","+(this._y1=b+N*u)}else this._+="L"+(this._x1=f)+","+(this._y1=b)},arc:function(f,b,v,g,y,p){f=+f,b=+b,p=!!p;var m=(v=+v)*Math.cos(g),w=v*Math.sin(g),u=f+m,S=b+w,_=1^p,E=p?g-y:y-g;if(v<0)throw new Error("negative radius: "+v);this._x1===null?this._+="M"+u+","+S:(Math.abs(this._x1-u)>l||Math.abs(this._y1-S)>l)&&(this._+="L"+u+","+S),v&&(E<0&&(E=E%A+A),E>T?this._+="A"+v+","+v+",0,1,"+_+","+(f-m)+","+(b-w)+"A"+v+","+v+",0,1,"+_+","+(this._x1=u)+","+(this._y1=S):E>l&&(this._+="A"+v+","+v+",0,"+ +(E>=k)+","+_+","+(this._x1=f+v*Math.cos(y))+","+(this._y1=b+v*Math.sin(y))))},rect:function(f,b,v,g){this._+="M"+(this._x0=this._x1=+f)+","+(this._y0=this._y1=+b)+"h"+ +v+"v"+ +g+"h"+-v+"Z"},toString:function(){return this._}};var s=d,t=Array.prototype.slice;function o(f){return function(){return f}}function r(f){return f[0]}function n(f){return f[1]}function a(f){return f.source}function i(f){return f.target}function c(f,b,v,g,y){f.moveTo(b,v),f.bezierCurveTo(b=(b+g)/2,v,b,y,g,y)}function h(){return function(f){var b=a,v=i,g=r,y=n,p=null;function m(){var w,u=t.call(arguments),S=b.apply(this,u),_=v.apply(this,u);if(p||(p=w=s()),f(p,+g.apply(this,(u[0]=S,u)),+y.apply(this,u),+g.apply(this,(u[0]=_,u)),+y.apply(this,u)),w)return p=null,w+""||null}return m.source=function(w){return arguments.length?(b=w,m):b},m.target=function(w){return arguments.length?(v=w,m):v},m.x=function(w){return arguments.length?(g=typeof w=="function"?w:o(+w),m):g},m.y=function(w){return arguments.length?(y=typeof w=="function"?w:o(+w),m):y},m.context=function(w){return arguments.length?(p=w??null,m):p},m}(c)}},84096:function($,R,e){e.d(R,{i$:function(){return a},Dq:function(){return r},g0:function(){return i}});var k=e(58176),A=e(48480),l=e(59879),T=e(82301),x=e(34823),d=e(79791);function s(wt){if(0<=wt.y&&wt.y<100){var Lt=new Date(-1,wt.m,wt.d,wt.H,wt.M,wt.S,wt.L);return Lt.setFullYear(wt.y),Lt}return new Date(wt.y,wt.m,wt.d,wt.H,wt.M,wt.S,wt.L)}function t(wt){if(0<=wt.y&&wt.y<100){var Lt=new Date(Date.UTC(-1,wt.m,wt.d,wt.H,wt.M,wt.S,wt.L));return Lt.setUTCFullYear(wt.y),Lt}return new Date(Date.UTC(wt.y,wt.m,wt.d,wt.H,wt.M,wt.S,wt.L))}function o(wt,Lt,Ct){return{y:wt,m:Lt,d:Ct,H:0,M:0,S:0,L:0}}function r(wt){var Lt=wt.dateTime,Ct=wt.date,It=wt.time,Ut=wt.periods,Rt=wt.days,Ge=wt.shortDays,We=wt.months,Be=wt.shortMonths,Ye=y(Ut),rt=p(Ut),Se=y(Rt),ze=p(Rt),Ke=y(Ge),st=p(Ge),ct=y(We),Tt=p(We),Et=y(Be),At=p(Be),ht={a:function(jt){return Ge[jt.getDay()]},A:function(jt){return Rt[jt.getDay()]},b:function(jt){return Be[jt.getMonth()]},B:function(jt){return We[jt.getMonth()]},c:null,d:W,e:W,f:ie,H:J,I:X,j:ee,L:re,m:se,M:fe,p:function(jt){return Ut[+(jt.getHours()>=12)]},q:function(jt){return 1+~~(jt.getMonth()/3)},Q:kt,s:mt,S:ye,u:ge,U:he,V:ve,w:Oe,W:xe,x:null,X:null,y:ke,Y:Me,Z:Te,"%":dt},pt={a:function(jt){return Ge[jt.getUTCDay()]},A:function(jt){return Rt[jt.getUTCDay()]},b:function(jt){return Be[jt.getUTCMonth()]},B:function(jt){return We[jt.getUTCMonth()]},c:null,d:Q,e:Q,f:Ie,H:oe,I:ce,j:me,L:Ae,m:Ce,M:Re,p:function(jt){return Ut[+(jt.getUTCHours()>=12)]},q:function(jt){return 1+~~(jt.getUTCMonth()/3)},Q:kt,s:mt,S:le,u:de,U:_e,V:Fe,w:Ve,W:He,x:null,X:null,y:nt,Y:tt,Z:ot,"%":dt},gt={a:function(jt,Nt,Gt){var un=Ke.exec(Nt.slice(Gt));return un?(jt.w=st[un[0].toLowerCase()],Gt+un[0].length):-1},A:function(jt,Nt,Gt){var un=Se.exec(Nt.slice(Gt));return un?(jt.w=ze[un[0].toLowerCase()],Gt+un[0].length):-1},b:function(jt,Nt,Gt){var un=Et.exec(Nt.slice(Gt));return un?(jt.m=At[un[0].toLowerCase()],Gt+un[0].length):-1},B:function(jt,Nt,Gt){var un=ct.exec(Nt.slice(Gt));return un?(jt.m=Tt[un[0].toLowerCase()],Gt+un[0].length):-1},c:function(jt,Nt,Gt){return Ht(jt,Lt,Nt,Gt)},d:U,e:U,f:j,H,I:H,j:z,L:B,m:I,M:F,p:function(jt,Nt,Gt){var un=Ye.exec(Nt.slice(Gt));return un?(jt.p=rt[un[0].toLowerCase()],Gt+un[0].length):-1},q:P,Q:G,s:V,S:N,u:w,U:u,V:S,w:m,W:_,x:function(jt,Nt,Gt){return Ht(jt,Ct,Nt,Gt)},X:function(jt,Nt,Gt){return Ht(jt,It,Nt,Gt)},y:L,Y:E,Z:C,"%":K};function Pt(jt,Nt){return function(Gt){var un,pn,Kt,wn=[],Bn=-1,vn=0,cn=jt.length;for(Gt instanceof Date||(Gt=new Date(+Gt));++Bn<cn;)jt.charCodeAt(Bn)===37&&(wn.push(jt.slice(vn,Bn)),(pn=c[un=jt.charAt(++Bn)])!=null?un=jt.charAt(++Bn):pn=un==="e"?" ":"0",(Kt=Nt[un])&&(un=Kt(Gt,pn)),wn.push(un),vn=Bn+1);return wn.push(jt.slice(vn,Bn)),wn.join("")}}function Ot(jt,Nt){return function(Gt){var un,pn,Kt=o(1900,void 0,1);if(Ht(Kt,jt,Gt+="",0)!=Gt.length)return null;if("Q"in Kt)return new Date(Kt.Q);if("s"in Kt)return new Date(1e3*Kt.s+("L"in Kt?Kt.L:0));if(Nt&&!("Z"in Kt)&&(Kt.Z=0),"p"in Kt&&(Kt.H=Kt.H%12+12*Kt.p),Kt.m===void 0&&(Kt.m="q"in Kt?Kt.q:0),"V"in Kt){if(Kt.V<1||Kt.V>53)return null;"w"in Kt||(Kt.w=1),"Z"in Kt?(pn=(un=t(o(Kt.y,0,1))).getUTCDay(),un=pn>4||pn===0?k.l6.ceil(un):(0,k.l6)(un),un=A.Z.offset(un,7*(Kt.V-1)),Kt.y=un.getUTCFullYear(),Kt.m=un.getUTCMonth(),Kt.d=un.getUTCDate()+(Kt.w+6)%7):(pn=(un=s(o(Kt.y,0,1))).getDay(),un=pn>4||pn===0?l.wA.ceil(un):(0,l.wA)(un),un=T.Z.offset(un,7*(Kt.V-1)),Kt.y=un.getFullYear(),Kt.m=un.getMonth(),Kt.d=un.getDate()+(Kt.w+6)%7)}else("W"in Kt||"U"in Kt)&&("w"in Kt||(Kt.w="u"in Kt?Kt.u%7:"W"in Kt?1:0),pn="Z"in Kt?t(o(Kt.y,0,1)).getUTCDay():s(o(Kt.y,0,1)).getDay(),Kt.m=0,Kt.d="W"in Kt?(Kt.w+6)%7+7*Kt.W-(pn+5)%7:Kt.w+7*Kt.U-(pn+6)%7);return"Z"in Kt?(Kt.H+=Kt.Z/100|0,Kt.M+=Kt.Z%100,t(Kt)):s(Kt)}}function Ht(jt,Nt,Gt,un){for(var pn,Kt,wn=0,Bn=Nt.length,vn=Gt.length;wn<Bn;){if(un>=vn)return-1;if((pn=Nt.charCodeAt(wn++))===37){if(pn=Nt.charAt(wn++),!(Kt=gt[pn in c?Nt.charAt(wn++):pn])||(un=Kt(jt,Gt,un))<0)return-1}else if(pn!=Gt.charCodeAt(un++))return-1}return un}return ht.x=Pt(Ct,ht),ht.X=Pt(It,ht),ht.c=Pt(Lt,ht),pt.x=Pt(Ct,pt),pt.X=Pt(It,pt),pt.c=Pt(Lt,pt),{format:function(jt){var Nt=Pt(jt+="",ht);return Nt.toString=function(){return jt},Nt},parse:function(jt){var Nt=Ot(jt+="",!1);return Nt.toString=function(){return jt},Nt},utcFormat:function(jt){var Nt=Pt(jt+="",pt);return Nt.toString=function(){return jt},Nt},utcParse:function(jt){var Nt=Ot(jt+="",!0);return Nt.toString=function(){return jt},Nt}}}var n,a,i,c={"-":"",_:" ",0:"0"},h=/^\s*\d+/,f=/^%/,b=/[\\^$*+?|[\]().{}]/g;function v(wt,Lt,Ct){var It=wt<0?"-":"",Ut=(It?-wt:wt)+"",Rt=Ut.length;return It+(Rt<Ct?new Array(Ct-Rt+1).join(Lt)+Ut:Ut)}function g(wt){return wt.replace(b,"\\$&")}function y(wt){return new RegExp("^(?:"+wt.map(g).join("|")+")","i")}function p(wt){for(var Lt={},Ct=-1,It=wt.length;++Ct<It;)Lt[wt[Ct].toLowerCase()]=Ct;return Lt}function m(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct,Ct+1));return It?(wt.w=+It[0],Ct+It[0].length):-1}function w(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct,Ct+1));return It?(wt.u=+It[0],Ct+It[0].length):-1}function u(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct,Ct+2));return It?(wt.U=+It[0],Ct+It[0].length):-1}function S(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct,Ct+2));return It?(wt.V=+It[0],Ct+It[0].length):-1}function _(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct,Ct+2));return It?(wt.W=+It[0],Ct+It[0].length):-1}function E(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct,Ct+4));return It?(wt.y=+It[0],Ct+It[0].length):-1}function L(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct,Ct+2));return It?(wt.y=+It[0]+(+It[0]>68?1900:2e3),Ct+It[0].length):-1}function C(wt,Lt,Ct){var It=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Lt.slice(Ct,Ct+6));return It?(wt.Z=It[1]?0:-(It[2]+(It[3]||"00")),Ct+It[0].length):-1}function P(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct,Ct+1));return It?(wt.q=3*It[0]-3,Ct+It[0].length):-1}function I(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct,Ct+2));return It?(wt.m=It[0]-1,Ct+It[0].length):-1}function U(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct,Ct+2));return It?(wt.d=+It[0],Ct+It[0].length):-1}function z(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct,Ct+3));return It?(wt.m=0,wt.d=+It[0],Ct+It[0].length):-1}function H(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct,Ct+2));return It?(wt.H=+It[0],Ct+It[0].length):-1}function F(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct,Ct+2));return It?(wt.M=+It[0],Ct+It[0].length):-1}function N(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct,Ct+2));return It?(wt.S=+It[0],Ct+It[0].length):-1}function B(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct,Ct+3));return It?(wt.L=+It[0],Ct+It[0].length):-1}function j(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct,Ct+6));return It?(wt.L=Math.floor(It[0]/1e3),Ct+It[0].length):-1}function K(wt,Lt,Ct){var It=f.exec(Lt.slice(Ct,Ct+1));return It?Ct+It[0].length:-1}function G(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct));return It?(wt.Q=+It[0],Ct+It[0].length):-1}function V(wt,Lt,Ct){var It=h.exec(Lt.slice(Ct));return It?(wt.s=+It[0],Ct+It[0].length):-1}function W(wt,Lt){return v(wt.getDate(),Lt,2)}function J(wt,Lt){return v(wt.getHours(),Lt,2)}function X(wt,Lt){return v(wt.getHours()%12||12,Lt,2)}function ee(wt,Lt){return v(1+T.Z.count((0,x.Z)(wt),wt),Lt,3)}function re(wt,Lt){return v(wt.getMilliseconds(),Lt,3)}function ie(wt,Lt){return re(wt,Lt)+"000"}function se(wt,Lt){return v(wt.getMonth()+1,Lt,2)}function fe(wt,Lt){return v(wt.getMinutes(),Lt,2)}function ye(wt,Lt){return v(wt.getSeconds(),Lt,2)}function ge(wt){var Lt=wt.getDay();return Lt===0?7:Lt}function he(wt,Lt){return v(l.OM.count((0,x.Z)(wt)-1,wt),Lt,2)}function ve(wt,Lt){var Ct=wt.getDay();return wt=Ct>=4||Ct===0?(0,l.bL)(wt):l.bL.ceil(wt),v(l.bL.count((0,x.Z)(wt),wt)+((0,x.Z)(wt).getDay()===4),Lt,2)}function Oe(wt){return wt.getDay()}function xe(wt,Lt){return v(l.wA.count((0,x.Z)(wt)-1,wt),Lt,2)}function ke(wt,Lt){return v(wt.getFullYear()%100,Lt,2)}function Me(wt,Lt){return v(wt.getFullYear()%1e4,Lt,4)}function Te(wt){var Lt=wt.getTimezoneOffset();return(Lt>0?"-":(Lt*=-1,"+"))+v(Lt/60|0,"0",2)+v(Lt%60,"0",2)}function Q(wt,Lt){return v(wt.getUTCDate(),Lt,2)}function oe(wt,Lt){return v(wt.getUTCHours(),Lt,2)}function ce(wt,Lt){return v(wt.getUTCHours()%12||12,Lt,2)}function me(wt,Lt){return v(1+A.Z.count((0,d.Z)(wt),wt),Lt,3)}function Ae(wt,Lt){return v(wt.getUTCMilliseconds(),Lt,3)}function Ie(wt,Lt){return Ae(wt,Lt)+"000"}function Ce(wt,Lt){return v(wt.getUTCMonth()+1,Lt,2)}function Re(wt,Lt){return v(wt.getUTCMinutes(),Lt,2)}function le(wt,Lt){return v(wt.getUTCSeconds(),Lt,2)}function de(wt){var Lt=wt.getUTCDay();return Lt===0?7:Lt}function _e(wt,Lt){return v(k.Ox.count((0,d.Z)(wt)-1,wt),Lt,2)}function Fe(wt,Lt){var Ct=wt.getUTCDay();return wt=Ct>=4||Ct===0?(0,k.hB)(wt):k.hB.ceil(wt),v(k.hB.count((0,d.Z)(wt),wt)+((0,d.Z)(wt).getUTCDay()===4),Lt,2)}function Ve(wt){return wt.getUTCDay()}function He(wt,Lt){return v(k.l6.count((0,d.Z)(wt)-1,wt),Lt,2)}function nt(wt,Lt){return v(wt.getUTCFullYear()%100,Lt,2)}function tt(wt,Lt){return v(wt.getUTCFullYear()%1e4,Lt,4)}function ot(){return"+0000"}function dt(){return"%"}function kt(wt){return+wt}function mt(wt){return Math.floor(+wt/1e3)}n=r({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),a=n.format,n.parse,i=n.utcFormat,n.utcParse},82301:function($,R,e){e.d(R,{a:function(){return T}});var k=e(30052),A=e(54263),l=(0,k.Z)(function(x){x.setHours(0,0,0,0)},function(x,d){x.setDate(x.getDate()+d)},function(x,d){return(d-x-(d.getTimezoneOffset()-x.getTimezoneOffset())*A.yB)/A.UD},function(x){return x.getDate()-1});R.Z=l;var T=l.range},54263:function($,R,e){e.d(R,{UD:function(){return T},Y2:function(){return l},Ym:function(){return k},iM:function(){return x},yB:function(){return A}});var k=1e3,A=6e4,l=36e5,T=864e5,x=6048e5},81041:function($,R,e){e.r(R),e.d(R,{timeDay:function(){return h.Z},timeDays:function(){return h.a},timeFriday:function(){return f.mC},timeFridays:function(){return f.b$},timeHour:function(){return i},timeHours:function(){return c},timeInterval:function(){return k.Z},timeMillisecond:function(){return l},timeMilliseconds:function(){return T},timeMinute:function(){return r},timeMinutes:function(){return n},timeMonday:function(){return f.wA},timeMondays:function(){return f.bJ},timeMonth:function(){return v},timeMonths:function(){return g},timeSaturday:function(){return f.EY},timeSaturdays:function(){return f.Ff},timeSecond:function(){return s},timeSeconds:function(){return t},timeSunday:function(){return f.OM},timeSundays:function(){return f.vm},timeThursday:function(){return f.bL},timeThursdays:function(){return f.$t},timeTuesday:function(){return f.sy},timeTuesdays:function(){return f.aU},timeWednesday:function(){return f.zg},timeWednesdays:function(){return f.Ld},timeWeek:function(){return f.OM},timeWeeks:function(){return f.vm},timeYear:function(){return y.Z},timeYears:function(){return y.g},utcDay:function(){return E.Z},utcDays:function(){return E.y},utcFriday:function(){return L.QQ},utcFridays:function(){return L.fz},utcHour:function(){return S},utcHours:function(){return _},utcMillisecond:function(){return l},utcMilliseconds:function(){return T},utcMinute:function(){return m},utcMinutes:function(){return w},utcMonday:function(){return L.l6},utcMondays:function(){return L.$3},utcMonth:function(){return P},utcMonths:function(){return I},utcSaturday:function(){return L.g4},utcSaturdays:function(){return L.Q_},utcSecond:function(){return s},utcSeconds:function(){return t},utcSunday:function(){return L.Ox},utcSundays:function(){return L.SU},utcThursday:function(){return L.hB},utcThursdays:function(){return L.xj},utcTuesday:function(){return L.J1},utcTuesdays:function(){return L.DK},utcWednesday:function(){return L.b3},utcWednesdays:function(){return L.uy},utcWeek:function(){return L.Ox},utcWeeks:function(){return L.SU},utcYear:function(){return U.Z},utcYears:function(){return U.D}});var k=e(30052),A=(0,k.Z)(function(){},function(z,H){z.setTime(+z+H)},function(z,H){return H-z});A.every=function(z){return z=Math.floor(z),isFinite(z)&&z>0?z>1?(0,k.Z)(function(H){H.setTime(Math.floor(H/z)*z)},function(H,F){H.setTime(+H+F*z)},function(H,F){return(F-H)/z}):A:null};var l=A,T=A.range,x=e(54263),d=(0,k.Z)(function(z){z.setTime(z-z.getMilliseconds())},function(z,H){z.setTime(+z+H*x.Ym)},function(z,H){return(H-z)/x.Ym},function(z){return z.getUTCSeconds()}),s=d,t=d.range,o=(0,k.Z)(function(z){z.setTime(z-z.getMilliseconds()-z.getSeconds()*x.Ym)},function(z,H){z.setTime(+z+H*x.yB)},function(z,H){return(H-z)/x.yB},function(z){return z.getMinutes()}),r=o,n=o.range,a=(0,k.Z)(function(z){z.setTime(z-z.getMilliseconds()-z.getSeconds()*x.Ym-z.getMinutes()*x.yB)},function(z,H){z.setTime(+z+H*x.Y2)},function(z,H){return(H-z)/x.Y2},function(z){return z.getHours()}),i=a,c=a.range,h=e(82301),f=e(59879),b=(0,k.Z)(function(z){z.setDate(1),z.setHours(0,0,0,0)},function(z,H){z.setMonth(z.getMonth()+H)},function(z,H){return H.getMonth()-z.getMonth()+12*(H.getFullYear()-z.getFullYear())},function(z){return z.getMonth()}),v=b,g=b.range,y=e(34823),p=(0,k.Z)(function(z){z.setUTCSeconds(0,0)},function(z,H){z.setTime(+z+H*x.yB)},function(z,H){return(H-z)/x.yB},function(z){return z.getUTCMinutes()}),m=p,w=p.range,u=(0,k.Z)(function(z){z.setUTCMinutes(0,0,0)},function(z,H){z.setTime(+z+H*x.Y2)},function(z,H){return(H-z)/x.Y2},function(z){return z.getUTCHours()}),S=u,_=u.range,E=e(48480),L=e(58176),C=(0,k.Z)(function(z){z.setUTCDate(1),z.setUTCHours(0,0,0,0)},function(z,H){z.setUTCMonth(z.getUTCMonth()+H)},function(z,H){return H.getUTCMonth()-z.getUTCMonth()+12*(H.getUTCFullYear()-z.getUTCFullYear())},function(z){return z.getUTCMonth()}),P=C,I=C.range,U=e(79791)},30052:function($,R,e){e.d(R,{Z:function(){return l}});var k=new Date,A=new Date;function l(T,x,d,s){function t(o){return T(o=arguments.length===0?new Date:new Date(+o)),o}return t.floor=function(o){return T(o=new Date(+o)),o},t.ceil=function(o){return T(o=new Date(o-1)),x(o,1),T(o),o},t.round=function(o){var r=t(o),n=t.ceil(o);return o-r<n-o?r:n},t.offset=function(o,r){return x(o=new Date(+o),r==null?1:Math.floor(r)),o},t.range=function(o,r,n){var a,i=[];if(o=t.ceil(o),n=n==null?1:Math.floor(n),!(o<r&&n>0))return i;do i.push(a=new Date(+o)),x(o,n),T(o);while(a<o&&o<r);return i},t.filter=function(o){return l(function(r){if(r>=r)for(;T(r),!o(r);)r.setTime(r-1)},function(r,n){if(r>=r)if(n<0)for(;++n<=0;)for(;x(r,-1),!o(r););else for(;--n>=0;)for(;x(r,1),!o(r););})},d&&(t.count=function(o,r){return k.setTime(+o),A.setTime(+r),T(k),T(A),Math.floor(d(k,A))},t.every=function(o){return o=Math.floor(o),isFinite(o)&&o>0?o>1?t.filter(s?function(r){return s(r)%o==0}:function(r){return t.count(0,r)%o==0}):t:null}),t}},48480:function($,R,e){e.d(R,{y:function(){return T}});var k=e(30052),A=e(54263),l=(0,k.Z)(function(x){x.setUTCHours(0,0,0,0)},function(x,d){x.setUTCDate(x.getUTCDate()+d)},function(x,d){return(d-x)/A.UD},function(x){return x.getUTCDate()-1});R.Z=l;var T=l.range},58176:function($,R,e){e.d(R,{$3:function(){return a},DK:function(){return i},J1:function(){return d},Ox:function(){return T},QQ:function(){return o},Q_:function(){return b},SU:function(){return n},b3:function(){return s},fz:function(){return f},g4:function(){return r},hB:function(){return t},l6:function(){return x},uy:function(){return c},xj:function(){return h}});var k=e(30052),A=e(54263);function l(v){return(0,k.Z)(function(g){g.setUTCDate(g.getUTCDate()-(g.getUTCDay()+7-v)%7),g.setUTCHours(0,0,0,0)},function(g,y){g.setUTCDate(g.getUTCDate()+7*y)},function(g,y){return(y-g)/A.iM})}var T=l(0),x=l(1),d=l(2),s=l(3),t=l(4),o=l(5),r=l(6),n=T.range,a=x.range,i=d.range,c=s.range,h=t.range,f=o.range,b=r.range},79791:function($,R,e){e.d(R,{D:function(){return l}});var k=e(30052),A=(0,k.Z)(function(T){T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,x){T.setUTCFullYear(T.getUTCFullYear()+x)},function(T,x){return x.getUTCFullYear()-T.getUTCFullYear()},function(T){return T.getUTCFullYear()});A.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,k.Z)(function(x){x.setUTCFullYear(Math.floor(x.getUTCFullYear()/T)*T),x.setUTCMonth(0,1),x.setUTCHours(0,0,0,0)},function(x,d){x.setUTCFullYear(x.getUTCFullYear()+d*T)}):null},R.Z=A;var l=A.range},59879:function($,R,e){e.d(R,{$t:function(){return h},EY:function(){return r},Ff:function(){return b},Ld:function(){return c},OM:function(){return T},aU:function(){return i},b$:function(){return f},bJ:function(){return a},bL:function(){return t},mC:function(){return o},sy:function(){return d},vm:function(){return n},wA:function(){return x},zg:function(){return s}});var k=e(30052),A=e(54263);function l(v){return(0,k.Z)(function(g){g.setDate(g.getDate()-(g.getDay()+7-v)%7),g.setHours(0,0,0,0)},function(g,y){g.setDate(g.getDate()+7*y)},function(g,y){return(y-g-(y.getTimezoneOffset()-g.getTimezoneOffset())*A.yB)/A.iM})}var T=l(0),x=l(1),d=l(2),s=l(3),t=l(4),o=l(5),r=l(6),n=T.range,a=x.range,i=d.range,c=s.range,h=t.range,f=o.range,b=r.range},34823:function($,R,e){e.d(R,{g:function(){return l}});var k=e(30052),A=(0,k.Z)(function(T){T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,x){T.setFullYear(T.getFullYear()+x)},function(T,x){return x.getFullYear()-T.getFullYear()},function(T){return T.getFullYear()});A.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,k.Z)(function(x){x.setFullYear(Math.floor(x.getFullYear()/T)*T),x.setMonth(0,1),x.setHours(0,0,0,0)},function(x,d){x.setFullYear(x.getFullYear()+d*T)}):null},R.Z=A;var l=A.range},17045:function($,R,e){var k=e(8709),A=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",l=Object.prototype.toString,T=Array.prototype.concat,x=Object.defineProperty,d=x&&function(){var o={};try{for(var r in x(o,"x",{enumerable:!1,value:o}),o)return!1;return o.x===o}catch{return!1}}(),s=function(o,r,n,a){var i;(!(r in o)||typeof(i=a)=="function"&&l.call(i)==="[object Function]"&&a())&&(d?x(o,r,{configurable:!0,enumerable:!1,value:n,writable:!0}):o[r]=n)},t=function(o,r){var n=arguments.length>2?arguments[2]:{},a=k(r);A&&(a=T.call(a,Object.getOwnPropertySymbols(r)));for(var i=0;i<a.length;i+=1)s(o,a[i],r[a[i]],n[a[i]])};t.supportsDescriptors=!!d,$.exports=t},46775:function($){$.exports=function(){for(var R=0;R<arguments.length;R++)if(arguments[R]!==void 0)return arguments[R]}},53545:function($){$.exports=k;var R=(k.canvas=document.createElement("canvas")).getContext("2d"),e=A([32,126]);function k(l,T){Array.isArray(l)&&(l=l.join(", "));var x,d={},s=16,t=.05;T&&(T.length===2&&typeof T[0]=="number"?x=A(T):Array.isArray(T)?x=T:(T.o?x=A(T.o):T.pairs&&(x=T.pairs),T.fontSize&&(s=T.fontSize),T.threshold!=null&&(t=T.threshold))),x||(x=e),R.font=s+"px "+l;for(var o=0;o<x.length;o++){var r=x[o],n=R.measureText(r[0]).width+R.measureText(r[1]).width,a=R.measureText(r).width;if(Math.abs(n-a)>s*t){var i=(a-n)/s;d[r]=1e3*i}}return d}function A(l){for(var T=[],x=l[0];x<=l[1];x++)for(var d=String.fromCharCode(x),s=l[0];s<l[1];s++){var t=d+String.fromCharCode(s);T.push(t)}return T}k.createPairs=A,k.ascii=e},31457:function($,R,e){var k=e(65185),A=e(18625),l={M:"moveTo",C:"bezierCurveTo"};$.exports=function(T,x){T.beginPath(),A(k(x)).forEach(function(d){var s=d[0],t=d.slice(1);T[l[s]].apply(T,t)}),T.closePath()}},90660:function($){$.exports=function(R){switch(R){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function($){function R(e,k,A){var l=0|e[A];if(l<=0)return[];var T,x=new Array(l);if(A===e.length-1)for(T=0;T<l;++T)x[T]=k;else for(T=0;T<l;++T)x[T]=R(e,k,A+1);return x}$.exports=function(e,k){switch(k===void 0&&(k=0),typeof e){case"number":if(e>0)return function(A,l){var T,x;for(T=new Array(A),x=0;x<A;++x)T[x]=l;return T}(0|e,k);break;case"object":if(typeof e.length=="number")return R(e,k,0)}return[]}},11474:function($){function R(S,_,E){E=E||2;var L,C,P,I,U,z,H,F=_&&_.length,N=F?_[0]*E:S.length,B=e(S,0,N,E,!0),j=[];if(!B||B.next===B.prev)return j;if(F&&(B=function(G,V,W,J){var X,ee,re,ie=[];for(X=0,ee=V.length;X<ee;X++)(re=e(G,V[X]*J,X<ee-1?V[X+1]*J:G.length,J,!1))===re.next&&(re.steiner=!0),ie.push(n(re));for(ie.sort(s),X=0;X<ie.length;X++)t(ie[X],W),W=k(W,W.next);return W}(S,_,B,E)),S.length>80*E){L=P=S[0],C=I=S[1];for(var K=E;K<N;K+=E)(U=S[K])<L&&(L=U),(z=S[K+1])<C&&(C=z),U>P&&(P=U),z>I&&(I=z);H=(H=Math.max(P-L,I-C))!==0?1/H:0}return A(B,j,E,L,C,H),j}function e(S,_,E,L,C){var P,I;if(C===u(S,_,E,L)>0)for(P=_;P<E;P+=L)I=p(P,S[P],S[P+1],I);else for(P=E-L;P>=_;P-=L)I=p(P,S[P],S[P+1],I);return I&&h(I,I.next)&&(m(I),I=I.next),I}function k(S,_){if(!S)return S;_||(_=S);var E,L=S;do if(E=!1,L.steiner||!h(L,L.next)&&c(L.prev,L,L.next)!==0)L=L.next;else{if(m(L),(L=_=L.prev)===L.next)break;E=!0}while(E||L!==_);return _}function A(S,_,E,L,C,P,I){if(S){!I&&P&&function(F,N,B,j){var K=F;do K.z===null&&(K.z=r(K.x,K.y,N,B,j)),K.prevZ=K.prev,K.nextZ=K.next,K=K.next;while(K!==F);K.prevZ.nextZ=null,K.prevZ=null,function(G){var V,W,J,X,ee,re,ie,se,fe=1;do{for(W=G,G=null,ee=null,re=0;W;){for(re++,J=W,ie=0,V=0;V<fe&&(ie++,J=J.nextZ);V++);for(se=fe;ie>0||se>0&&J;)ie!==0&&(se===0||!J||W.z<=J.z)?(X=W,W=W.nextZ,ie--):(X=J,J=J.nextZ,se--),ee?ee.nextZ=X:G=X,X.prevZ=ee,ee=X;W=J}ee.nextZ=null,fe*=2}while(re>1)}(K)}(S,L,C,P);for(var U,z,H=S;S.prev!==S.next;)if(U=S.prev,z=S.next,P?T(S,L,C,P):l(S))_.push(U.i/E),_.push(S.i/E),_.push(z.i/E),m(S),S=z.next,H=z.next;else if((S=z)===H){I?I===1?A(S=x(k(S),_,E),_,E,L,C,P,2):I===2&&d(S,_,E,L,C,P):A(k(S),_,E,L,C,P,1);break}}}function l(S){var _=S.prev,E=S,L=S.next;if(c(_,E,L)>=0)return!1;for(var C=S.next.next;C!==S.prev;){if(a(_.x,_.y,E.x,E.y,L.x,L.y,C.x,C.y)&&c(C.prev,C,C.next)>=0)return!1;C=C.next}return!0}function T(S,_,E,L){var C=S.prev,P=S,I=S.next;if(c(C,P,I)>=0)return!1;for(var U=C.x<P.x?C.x<I.x?C.x:I.x:P.x<I.x?P.x:I.x,z=C.y<P.y?C.y<I.y?C.y:I.y:P.y<I.y?P.y:I.y,H=C.x>P.x?C.x>I.x?C.x:I.x:P.x>I.x?P.x:I.x,F=C.y>P.y?C.y>I.y?C.y:I.y:P.y>I.y?P.y:I.y,N=r(U,z,_,E,L),B=r(H,F,_,E,L),j=S.prevZ,K=S.nextZ;j&&j.z>=N&&K&&K.z<=B;){if(j!==S.prev&&j!==S.next&&a(C.x,C.y,P.x,P.y,I.x,I.y,j.x,j.y)&&c(j.prev,j,j.next)>=0||(j=j.prevZ,K!==S.prev&&K!==S.next&&a(C.x,C.y,P.x,P.y,I.x,I.y,K.x,K.y)&&c(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;j&&j.z>=N;){if(j!==S.prev&&j!==S.next&&a(C.x,C.y,P.x,P.y,I.x,I.y,j.x,j.y)&&c(j.prev,j,j.next)>=0)return!1;j=j.prevZ}for(;K&&K.z<=B;){if(K!==S.prev&&K!==S.next&&a(C.x,C.y,P.x,P.y,I.x,I.y,K.x,K.y)&&c(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function x(S,_,E){var L=S;do{var C=L.prev,P=L.next.next;!h(C,P)&&f(C,L,L.next,P)&&g(C,P)&&g(P,C)&&(_.push(C.i/E),_.push(L.i/E),_.push(P.i/E),m(L),m(L.next),L=S=P),L=L.next}while(L!==S);return k(L)}function d(S,_,E,L,C,P){var I=S;do{for(var U=I.next.next;U!==I.prev;){if(I.i!==U.i&&i(I,U)){var z=y(I,U);return I=k(I,I.next),z=k(z,z.next),A(I,_,E,L,C,P),void A(z,_,E,L,C,P)}U=U.next}I=I.next}while(I!==S)}function s(S,_){return S.x-_.x}function t(S,_){if(_=function(L,C){var P,I=C,U=L.x,z=L.y,H=-1/0;do{if(z<=I.y&&z>=I.next.y&&I.next.y!==I.y){var F=I.x+(z-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(F<=U&&F>H){if(H=F,F===U){if(z===I.y)return I;if(z===I.next.y)return I.next}P=I.x<I.next.x?I:I.next}}I=I.next}while(I!==C);if(!P)return null;if(U===H)return P;var N,B=P,j=P.x,K=P.y,G=1/0;I=P;do U>=I.x&&I.x>=j&&U!==I.x&&a(z<K?U:H,z,j,K,z<K?H:U,z,I.x,I.y)&&(N=Math.abs(z-I.y)/(U-I.x),g(I,L)&&(N<G||N===G&&(I.x>P.x||I.x===P.x&&o(P,I)))&&(P=I,G=N)),I=I.next;while(I!==B);return P}(S,_),_){var E=y(_,S);k(_,_.next),k(E,E.next)}}function o(S,_){return c(S.prev,S,_.prev)<0&&c(_.next,S,S.next)<0}function r(S,_,E,L,C){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-E)*C)|S<<8))|S<<4))|S<<2))|S<<1))|(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_=32767*(_-L)*C)|_<<8))|_<<4))|_<<2))|_<<1))<<1}function n(S){var _=S,E=S;do(_.x<E.x||_.x===E.x&&_.y<E.y)&&(E=_),_=_.next;while(_!==S);return E}function a(S,_,E,L,C,P,I,U){return(C-I)*(_-U)-(S-I)*(P-U)>=0&&(S-I)*(L-U)-(E-I)*(_-U)>=0&&(E-I)*(P-U)-(C-I)*(L-U)>=0}function i(S,_){return S.next.i!==_.i&&S.prev.i!==_.i&&!function(E,L){var C=E;do{if(C.i!==E.i&&C.next.i!==E.i&&C.i!==L.i&&C.next.i!==L.i&&f(C,C.next,E,L))return!0;C=C.next}while(C!==E);return!1}(S,_)&&(g(S,_)&&g(_,S)&&function(E,L){var C=E,P=!1,I=(E.x+L.x)/2,U=(E.y+L.y)/2;do C.y>U!=C.next.y>U&&C.next.y!==C.y&&I<(C.next.x-C.x)*(U-C.y)/(C.next.y-C.y)+C.x&&(P=!P),C=C.next;while(C!==E);return P}(S,_)&&(c(S.prev,S,_.prev)||c(S,_.prev,_))||h(S,_)&&c(S.prev,S,S.next)>0&&c(_.prev,_,_.next)>0)}function c(S,_,E){return(_.y-S.y)*(E.x-_.x)-(_.x-S.x)*(E.y-_.y)}function h(S,_){return S.x===_.x&&S.y===_.y}function f(S,_,E,L){var C=v(c(S,_,E)),P=v(c(S,_,L)),I=v(c(E,L,S)),U=v(c(E,L,_));return C!==P&&I!==U||!(C!==0||!b(S,E,_))||!(P!==0||!b(S,L,_))||!(I!==0||!b(E,S,L))||!(U!==0||!b(E,_,L))}function b(S,_,E){return _.x<=Math.max(S.x,E.x)&&_.x>=Math.min(S.x,E.x)&&_.y<=Math.max(S.y,E.y)&&_.y>=Math.min(S.y,E.y)}function v(S){return S>0?1:S<0?-1:0}function g(S,_){return c(S.prev,S,S.next)<0?c(S,_,S.next)>=0&&c(S,S.prev,_)>=0:c(S,_,S.prev)<0||c(S,S.next,_)<0}function y(S,_){var E=new w(S.i,S.x,S.y),L=new w(_.i,_.x,_.y),C=S.next,P=_.prev;return S.next=_,_.prev=S,E.next=C,C.prev=E,L.next=E,E.prev=L,P.next=L,L.prev=P,L}function p(S,_,E,L){var C=new w(S,_,E);return L?(C.next=L.next,C.prev=L,L.next.prev=C,L.next=C):(C.prev=C,C.next=C),C}function m(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function w(S,_,E){this.i=S,this.x=_,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function u(S,_,E,L){for(var C=0,P=_,I=E-L;P<E;P+=L)C+=(S[I]-S[P])*(S[P+1]+S[I+1]),I=P;return C}$.exports=R,$.exports.default=R,R.deviation=function(S,_,E,L){var C=_&&_.length,P=C?_[0]*E:S.length,I=Math.abs(u(S,0,P,E));if(C)for(var U=0,z=_.length;U<z;U++){var H=_[U]*E,F=U<z-1?_[U+1]*E:S.length;I-=Math.abs(u(S,H,F,E))}var N=0;for(U=0;U<L.length;U+=3){var B=L[U]*E,j=L[U+1]*E,K=L[U+2]*E;N+=Math.abs((S[B]-S[K])*(S[j+1]-S[B+1])-(S[B]-S[j])*(S[K+1]-S[B+1]))}return I===0&&N===0?0:Math.abs((N-I)/I)},R.flatten=function(S){for(var _=S[0][0].length,E={vertices:[],holes:[],dimensions:_},L=0,C=0;C<S.length;C++){for(var P=0;P<S[C].length;P++)for(var I=0;I<_;I++)E.vertices.push(S[C][P][I]);C>0&&(L+=S[C-1].length,E.holes.push(L))}return E}},2502:function($,R,e){var k=e(68664);$.exports=function(A,l){var T,x=[],d=[],s=[],t={},o=[];function r(g){s[g]=!1,t.hasOwnProperty(g)&&Object.keys(t[g]).forEach(function(y){delete t[g][y],s[y]&&r(y)})}function n(g){var y,p,m=!1;for(d.push(g),s[g]=!0,y=0;y<o[g].length;y++)(p=o[g][y])===T?(a(T,d),m=!0):s[p]||(m=n(p));if(m)r(g);else for(y=0;y<o[g].length;y++){p=o[g][y];var w=t[p];w||(w={},t[p]=w),w[p]=!0}return d.pop(),m}function a(g,y){var p=[].concat(y).concat(g);l?l(n):x.push(p)}function i(g){(function(E){for(var L=0;L<A.length;L++)L<E&&(A[L]=[]),A[L]=A[L].filter(function(C){return C>=E})})(g);for(var y,p=k(A).components.filter(function(E){return E.length>1}),m=1/0,w=0;w<p.length;w++)for(var u=0;u<p[w].length;u++)p[w][u]<m&&(m=p[w][u],y=w);var S=p[y];if(!S)return!1;var _=A.map(function(E,L){return S.indexOf(L)===-1?[]:E.filter(function(C){return S.indexOf(C)!==-1})});return{leastVertex:m,adjList:_}}T=0;for(var c=A.length;T<c;){var h=i(T);if(T=h.leastVertex,o=h.adjList){for(var f=0;f<o.length;f++)for(var b=0;b<o[f].length;b++){var v=o[f][b];s[+v]=!1,t[v]={}}n(T),T+=1}else T=c}return l?void 0:x}},72943:function($,R,e){var k,A=TypeError,l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch{l=null}var T=function(){throw new A},x=l?function(){try{return T}catch{try{return l(arguments,"callee").get}catch{return T}}}():T,d=e(57877)(),s=Object.getPrototypeOf||function(h){return h.__proto__},t=typeof Uint8Array>"u"?k:s(Uint8Array),o={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?k:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer>"u"?k:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":d?s([][Symbol.iterator]()):k,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":k,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":k,"%AsyncGenerator%":k,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":k,"%AsyncIteratorPrototype%":k,"%Atomics%":typeof Atomics>"u"?k:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView>"u"?k:DataView,"%DataViewPrototype%":typeof DataView>"u"?k:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array>"u"?k:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array>"u"?k:Float32Array.prototype,"%Float64Array%":typeof Float64Array>"u"?k:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array>"u"?k:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":k,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":k,"%Int8Array%":typeof Int8Array>"u"?k:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array>"u"?k:Int8Array.prototype,"%Int16Array%":typeof Int16Array>"u"?k:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array>"u"?k:Int8Array.prototype,"%Int32Array%":typeof Int32Array>"u"?k:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array>"u"?k:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?s(s([][Symbol.iterator]())):k,"%JSON%":typeof JSON=="object"?JSON:k,"%JSONParse%":typeof JSON=="object"?JSON.parse:k,"%Map%":typeof Map>"u"?k:Map,"%MapIteratorPrototype%":typeof Map<"u"&&d?s(new Map()[Symbol.iterator]()):k,"%MapPrototype%":typeof Map>"u"?k:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?k:Promise,"%PromisePrototype%":typeof Promise>"u"?k:Promise.prototype,"%PromiseProto_then%":typeof Promise>"u"?k:Promise.prototype.then,"%Promise_all%":typeof Promise>"u"?k:Promise.all,"%Promise_reject%":typeof Promise>"u"?k:Promise.reject,"%Promise_resolve%":typeof Promise>"u"?k:Promise.resolve,"%Proxy%":typeof Proxy>"u"?k:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect>"u"?k:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set>"u"?k:Set,"%SetIteratorPrototype%":typeof Set<"u"&&d?s(new Set()[Symbol.iterator]()):k,"%SetPrototype%":typeof Set>"u"?k:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?k:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer>"u"?k:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":d?s(""[Symbol.iterator]()):k,"%StringPrototype%":String.prototype,"%Symbol%":d?Symbol:k,"%SymbolPrototype%":d?Symbol.prototype:k,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":x,"%TypedArray%":t,"%TypedArrayPrototype%":t?t.prototype:k,"%TypeError%":A,"%TypeErrorPrototype%":A.prototype,"%Uint8Array%":typeof Uint8Array>"u"?k:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array>"u"?k:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?k:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray>"u"?k:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array>"u"?k:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array>"u"?k:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array>"u"?k:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array>"u"?k:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap>"u"?k:WeakMap,"%WeakMapPrototype%":typeof WeakMap>"u"?k:WeakMap.prototype,"%WeakSet%":typeof WeakSet>"u"?k:WeakSet,"%WeakSetPrototype%":typeof WeakSet>"u"?k:WeakSet.prototype},r=e(77575).call(Function.call,String.prototype.replace),n=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,a=/\\(\\)?/g,i=function(h){var f=[];return r(h,n,function(b,v,g,y){f[f.length]=g?r(y,a,"$1"):v||b}),f},c=function(h,f){if(!(h in o))throw new SyntaxError("intrinsic "+h+" does not exist!");if(o[h]===void 0&&!f)throw new A("intrinsic "+h+" exists, but is not available. Please file an issue!");return o[h]};$.exports=function(h,f){if(typeof h!="string"||h.length===0)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof f!="boolean")throw new TypeError('"allowMissing" argument must be a boolean');for(var b=i(h),v=c("%"+(b.length>0?b[0]:"")+"%",f),g=1;g<b.length;g+=1)if(v!=null)if(l&&g+1>=b.length){var y=l(v,b[g]);if(!f&&!(b[g]in v))throw new A("base intrinsic for "+h+" exists, but the property is not available.");v=y?y.get||y.value:v[b[g]]}else v=v[b[g]];return v}},84671:function($,R,e){var k=e(77575),A=e(72943)("%Function%"),l=A.apply,T=A.call;$.exports=function(){return k.apply(T,arguments)},$.exports.apply=function(){return k.apply(l,arguments)}},92978:function($,R,e){var k=e(72943),A=e(84671),l=A(k("String.prototype.indexOf"));$.exports=function(T,x){var d=k(T,!!x);return typeof d=="function"&&l(T,".prototype.")?A(d):d}},67295:function($,R,e){var k=e(72943)("%Object.getOwnPropertyDescriptor%");if(k)try{k([],"length")}catch{k=null}$.exports=k},16134:function($,R,e){var k=e(36672);$.exports=function(){return k(this).length=0,this}},4892:function($,R,e){$.exports=e(64404)()?Array.from:e(49441)},64404:function($){$.exports=function(){var R,e,k=Array.from;return typeof k=="function"&&(e=k(R=["raz","dwa"]),Boolean(e&&e!==R&&e[1]==="dwa"))}},49441:function($,R,e){var k=e(8260).iterator,A=e(73051),l=e(33717),T=e(35976),x=e(78513),d=e(36672),s=e(95296),t=e(87963),o=Array.isArray,r=Function.prototype.call,n={configurable:!0,enumerable:!0,writable:!0,value:null},a=Object.defineProperty;$.exports=function(i){var c,h,f,b,v,g,y,p,m,w,u=arguments[1],S=arguments[2];if(i=Object(d(i)),s(u)&&x(u),this&&this!==Array&&l(this))c=this;else{if(!u){if(A(i))return(v=i.length)!==1?Array.apply(null,i):((b=new Array(1))[0]=i[0],b);if(o(i)){for(b=new Array(v=i.length),h=0;h<v;++h)b[h]=i[h];return b}}b=[]}if(!o(i)){if((m=i[k])!==void 0){for(y=x(m).call(i),c&&(b=new c),p=y.next(),h=0;!p.done;)w=u?r.call(u,S,p.value,h):p.value,c?(n.value=w,a(b,h,n)):b[h]=w,p=y.next(),++h;v=h}else if(t(i)){for(v=i.length,c&&(b=new c),h=0,f=0;h<v;++h)w=i[h],h+1<v&&(g=w.charCodeAt(0))>=55296&&g<=56319&&(w+=i[++h]),w=u?r.call(u,S,w,f):w,c?(n.value=w,a(b,f,n)):b[f]=w,++f;v=f}}if(v===void 0)for(v=T(i.length),c&&(b=new c(v)),h=0;h<v;++h)w=u?r.call(u,S,i[h],h):i[h],c?(n.value=w,a(b,h,n)):b[h]=w;return c&&(n.value=null,b.length=v),b}},73051:function($){var R=Object.prototype.toString,e=R.call(function(){return arguments}());$.exports=function(k){return R.call(k)===e}},33717:function($){var R=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);$.exports=function(k){return typeof k=="function"&&e(R.call(k))}},52345:function($){$.exports=function(){}},9953:function($,R,e){$.exports=e(90436)()?Math.sign:e(6069)},90436:function($){$.exports=function(){var R=Math.sign;return typeof R=="function"&&R(10)===1&&R(-20)===-1}},6069:function($){$.exports=function(R){return R=Number(R),isNaN(R)||R===0?R:R>0?1:-1}},56247:function($,R,e){var k=e(9953),A=Math.abs,l=Math.floor;$.exports=function(T){return isNaN(T)?0:(T=Number(T))!==0&&isFinite(T)?k(T)*l(A(T)):T}},35976:function($,R,e){var k=e(56247),A=Math.max;$.exports=function(l){return A(0,k(l))}},67260:function($,R,e){var k=e(78513),A=e(36672),l=Function.prototype.bind,T=Function.prototype.call,x=Object.keys,d=Object.prototype.propertyIsEnumerable;$.exports=function(s,t){return function(o,r){var n,a=arguments[2],i=arguments[3];return o=Object(A(o)),k(r),n=x(o),i&&n.sort(typeof i=="function"?l.call(i,o):void 0),typeof s!="function"&&(s=n[s]),T.call(s,n,function(c,h){return d.call(o,c)?T.call(r,a,o[c],c,o,h):t})}}},95879:function($,R,e){$.exports=e(73583)()?Object.assign:e(34205)},73583:function($){$.exports=function(){var R,e=Object.assign;return typeof e=="function"&&(e(R={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),R.foo+R.bar+R.trzy==="razdwatrzy")}},34205:function($,R,e){var k=e(68700),A=e(36672),l=Math.max;$.exports=function(T,x){var d,s,t,o=l(arguments.length,2);for(T=Object(A(T)),t=function(r){try{T[r]=x[r]}catch(n){d||(d=n)}},s=1;s<o;++s)k(x=arguments[s]).forEach(t);if(d!==void 0)throw d;return T}},19012:function($,R,e){var k=e(4892),A=e(95879),l=e(36672);$.exports=function(T){var x=Object(l(T)),d=arguments[1],s=Object(arguments[2]);if(x!==T&&!d)return x;var t={};return d?k(d,function(o){(s.ensure||o in T)&&(t[o]=T[o])}):A(t,T),t}},52818:function($,R,e){var k,A,l,T,x=Object.create;e(33247)()||(k=e(51882)),$.exports=k?k.level!==1?x:(A={},l={},T={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(d){l[d]=d!=="__proto__"?T:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(A,l),Object.defineProperty(k,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:A}),function(d,s){return x(d===null?A:d,s)}):x},96437:function($,R,e){$.exports=e(67260)("forEach")},99611:function($,R,e){var k=e(95296),A={function:!0,object:!0};$.exports=function(l){return k(l)&&A[typeof l]||!1}},95296:function($,R,e){var k=e(52345)();$.exports=function(A){return A!==k&&A!==null}},68700:function($,R,e){$.exports=e(13895)()?Object.keys:e(25217)},13895:function($){$.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},25217:function($,R,e){var k=e(95296),A=Object.keys;$.exports=function(l){return A(k(l)?Object(l):l)}},16906:function($,R,e){var k=e(78513),A=e(96437),l=Function.prototype.call;$.exports=function(T,x){var d={},s=arguments[2];return k(x),A(T,function(t,o,r,n){d[o]=l.call(x,s,t,o,r,n)}),d}},21780:function($,R,e){var k=e(95296),A=Array.prototype.forEach,l=Object.create,T=function(x,d){var s;for(s in x)d[s]=x[s]};$.exports=function(x){var d=l(null);return A.call(arguments,function(s){k(s)&&T(Object(s),d)}),d}},1496:function($,R,e){$.exports=e(33247)()?Object.setPrototypeOf:e(51882)},33247:function($){var R=Object.create,e=Object.getPrototypeOf,k={};$.exports=function(){var A=Object.setPrototypeOf,l=arguments[0]||R;return typeof A=="function"&&e(A(l(null),k))===k}},51882:function($,R,e){var k,A,l,T,x=e(99611),d=e(36672),s=Object.prototype.isPrototypeOf,t=Object.defineProperty,o={configurable:!0,enumerable:!1,writable:!0,value:void 0};k=function(r,n){if(d(r),n===null||x(n))return r;throw new TypeError("Prototype must be null or an object")},$.exports=(A=function(){var r,n=Object.create(null),a={},i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(i){try{(r=i.set).call(n,a)}catch{}if(Object.getPrototypeOf(n)===a)return{set:r,level:2}}return n.__proto__=a,Object.getPrototypeOf(n)===a?{level:2}:((n={}).__proto__=a,Object.getPrototypeOf(n)===a&&{level:1})}(),A?(A.level===2?A.set?(T=A.set,l=function(r,n){return T.call(k(r,n),n),r}):l=function(r,n){return k(r,n).__proto__=n,r}:l=function r(n,a){var i;return k(n,a),(i=s.call(r.nullPolyfill,n))&&delete r.nullPolyfill.__proto__,a===null&&(a=r.nullPolyfill),n.__proto__=a,i&&t(r.nullPolyfill,"__proto__",o),n},Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:A.level})):null),e(52818)},78513:function($){$.exports=function(R){if(typeof R!="function")throw new TypeError(R+" is not a function");return R}},98976:function($,R,e){var k=e(99611);$.exports=function(A){if(!k(A))throw new TypeError(A+" is not an Object");return A}},36672:function($,R,e){var k=e(95296);$.exports=function(A){if(!k(A))throw new TypeError("Cannot use null or undefined");return A}},66741:function($,R,e){$.exports=e(17557)()?String.prototype.contains:e(60381)},17557:function($){var R="razdwatrzy";$.exports=function(){return typeof R.contains=="function"&&R.contains("dwa")===!0&&R.contains("foo")===!1}},60381:function($){var R=String.prototype.indexOf;$.exports=function(e){return R.call(this,e,arguments[1])>-1}},87963:function($){var R=Object.prototype.toString,e=R.call("");$.exports=function(k){return typeof k=="string"||k&&typeof k=="object"&&(k instanceof String||R.call(k)===e)||!1}},43043:function($){var R=Object.create(null),e=Math.random;$.exports=function(){var k;do k=e().toString(36).slice(2);while(R[k]);return k}},32411:function($,R,e){var k,A=e(1496),l=e(66741),T=e(62072),x=e(8260),d=e(95426),s=Object.defineProperty;k=$.exports=function(t,o){if(!(this instanceof k))throw new TypeError("Constructor requires 'new'");d.call(this,t),o=o?l.call(o,"key+value")?"key+value":l.call(o,"key")?"key":"value":"value",s(this,"__kind__",T("",o))},A&&A(k,d),delete k.prototype.constructor,k.prototype=Object.create(d.prototype,{_resolve:T(function(t){return this.__kind__==="value"?this.__list__[t]:this.__kind__==="key+value"?[t,this.__list__[t]]:t})}),s(k.prototype,x.toStringTag,T("c","Array Iterator"))},27515:function($,R,e){var k=e(73051),A=e(78513),l=e(87963),T=e(66661),x=Array.isArray,d=Function.prototype.call,s=Array.prototype.some;$.exports=function(t,o){var r,n,a,i,c,h,f,b,v=arguments[2];if(x(t)||k(t)?r="array":l(t)?r="string":t=T(t),A(o),a=function(){i=!0},r!=="array")if(r!=="string")for(n=t.next();!n.done;){if(d.call(o,v,n.value,a),i)return;n=t.next()}else for(h=t.length,c=0;c<h&&(f=t[c],c+1<h&&(b=f.charCodeAt(0))>=55296&&b<=56319&&(f+=t[++c]),d.call(o,v,f,a),!i);++c);else s.call(t,function(g){return d.call(o,v,g,a),i})}},66661:function($,R,e){var k=e(73051),A=e(87963),l=e(32411),T=e(259),x=e(58095),d=e(8260).iterator;$.exports=function(s){return typeof x(s)[d]=="function"?s[d]():k(s)?new l(s):A(s)?new T(s):new l(s)}},95426:function($,R,e){var k,A=e(16134),l=e(95879),T=e(78513),x=e(36672),d=e(62072),s=e(55174),t=e(8260),o=Object.defineProperty,r=Object.defineProperties;$.exports=k=function(n,a){if(!(this instanceof k))throw new TypeError("Constructor requires 'new'");r(this,{__list__:d("w",x(n)),__context__:d("w",a),__nextIndex__:d("w",0)}),a&&(T(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))},delete k.prototype.constructor,r(k.prototype,l({_next:d(function(){var n;if(this.__list__)return this.__redo__&&(n=this.__redo__.shift())!==void 0?n:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:d(function(){return this._createResult(this._next())}),_createResult:d(function(n){return n===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(n)}}),_resolve:d(function(n){return this.__list__[n]}),_unBind:d(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:d(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},s({_onAdd:d(function(n){n>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(a,i){a>=n&&(this.__redo__[i]=++a)},this),this.__redo__.push(n)):o(this,"__redo__",d("c",[n])))}),_onDelete:d(function(n){var a;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((a=this.__redo__.indexOf(n))!==-1&&this.__redo__.splice(a,1),this.__redo__.forEach(function(i,c){i>n&&(this.__redo__[c]=--i)},this)))}),_onClear:d(function(){this.__redo__&&A.call(this.__redo__),this.__nextIndex__=0})}))),o(k.prototype,t.iterator,d(function(){return this}))},35940:function($,R,e){var k=e(73051),A=e(95296),l=e(87963),T=e(8260).iterator,x=Array.isArray;$.exports=function(d){return!(!A(d)||!x(d)&&!l(d)&&!k(d)&&typeof d[T]!="function")}},259:function($,R,e){var k,A=e(1496),l=e(62072),T=e(8260),x=e(95426),d=Object.defineProperty;k=$.exports=function(s){if(!(this instanceof k))throw new TypeError("Constructor requires 'new'");s=String(s),x.call(this,s),d(this,"__length__",l("",s.length))},A&&A(k,x),delete k.prototype.constructor,k.prototype=Object.create(x.prototype,{_next:l(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:l(function(s){var t,o=this.__list__[s];return this.__nextIndex__===this.__length__?o:(t=o.charCodeAt(0))>=55296&&t<=56319?o+this.__list__[this.__nextIndex__++]:o})}),d(k.prototype,T.toStringTag,l("c","String Iterator"))},58095:function($,R,e){var k=e(35940);$.exports=function(A){if(!k(A))throw new TypeError(A+" is not iterable");return A}},73523:function($){function R(e,k){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var A=Object(e),l=1;l<arguments.length;l++){var T=arguments[l];if(T!=null)for(var x=Object.keys(Object(T)),d=0,s=x.length;d<s;d++){var t=x[d],o=Object.getOwnPropertyDescriptor(T,t);o!==void 0&&o.enumerable&&(A[t]=T[t])}}return A}$.exports={assign:R,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:R})}}},8260:function($,R,e){$.exports=e(69711)()?e(94908).Symbol:e(18415)},69711:function($,R,e){var k=e(94908),A={object:!0,symbol:!0};$.exports=function(){var l,T=k.Symbol;if(typeof T!="function")return!1;l=T("test symbol");try{String(l)}catch{return!1}return!!A[typeof T.iterator]&&!!A[typeof T.toPrimitive]&&!!A[typeof T.toStringTag]}},82276:function($){$.exports=function(R){return!!R&&(typeof R=="symbol"||!!R.constructor&&R.constructor.name==="Symbol"&&R[R.constructor.toStringTag]==="Symbol")}},29366:function($,R,e){var k=e(62072),A=Object.create,l=Object.defineProperty,T=Object.prototype,x=A(null);$.exports=function(d){for(var s,t,o=0;x[d+(o||"")];)++o;return x[d+=o||""]=!0,l(T,s="@@"+d,k.gs(null,function(r){t||(t=!0,l(this,s,k(r)),t=!1)})),s}},92842:function($,R,e){var k=e(62072),A=e(94908).Symbol;$.exports=function(l){return Object.defineProperties(l,{hasInstance:k("",A&&A.hasInstance||l("hasInstance")),isConcatSpreadable:k("",A&&A.isConcatSpreadable||l("isConcatSpreadable")),iterator:k("",A&&A.iterator||l("iterator")),match:k("",A&&A.match||l("match")),replace:k("",A&&A.replace||l("replace")),search:k("",A&&A.search||l("search")),species:k("",A&&A.species||l("species")),split:k("",A&&A.split||l("split")),toPrimitive:k("",A&&A.toPrimitive||l("toPrimitive")),toStringTag:k("",A&&A.toStringTag||l("toStringTag")),unscopables:k("",A&&A.unscopables||l("unscopables"))})}},13304:function($,R,e){var k=e(62072),A=e(53308),l=Object.create(null);$.exports=function(T){return Object.defineProperties(T,{for:k(function(x){return l[x]?l[x]:l[x]=T(String(x))}),keyFor:k(function(x){var d;for(d in A(x),l)if(l[d]===x)return d})})}},18415:function($,R,e){var k,A,l,T=e(62072),x=e(53308),d=e(94908).Symbol,s=e(29366),t=e(92842),o=e(13304),r=Object.create,n=Object.defineProperties,a=Object.defineProperty;if(typeof d=="function")try{String(d()),l=!0}catch{}else d=null;A=function(i){if(this instanceof A)throw new TypeError("Symbol is not a constructor");return k(i)},$.exports=k=function i(c){var h;if(this instanceof i)throw new TypeError("Symbol is not a constructor");return l?d(c):(h=r(A.prototype),c=c===void 0?"":String(c),n(h,{__description__:T("",c),__name__:T("",s(c))}))},t(k),o(k),n(A.prototype,{constructor:T(k),toString:T("",function(){return this.__name__})}),n(k.prototype,{toString:T(function(){return"Symbol ("+x(this).__description__+")"}),valueOf:T(function(){return x(this)})}),a(k.prototype,k.toPrimitive,T("",function(){var i=x(this);return typeof i=="symbol"?i:i.toString()})),a(k.prototype,k.toStringTag,T("c","Symbol")),a(A.prototype,k.toStringTag,T("c",k.prototype[k.toStringTag])),a(A.prototype,k.toPrimitive,T("c",k.prototype[k.toPrimitive]))},53308:function($,R,e){var k=e(82276);$.exports=function(A){if(!k(A))throw new TypeError(A+" is not a symbol");return A}},83522:function($,R,e){$.exports=e(96402)()?WeakMap:e(329)},96402:function($){$.exports=function(){var R,e;if(typeof WeakMap!="function")return!1;try{R=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(R)==="[object WeakMap]"&&typeof R.set=="function"&&R.set({},1)===R&&typeof R.delete=="function"&&typeof R.has=="function"&&R.get(e)==="one"}},96416:function($){$.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},329:function($,R,e){var k,A=e(95296),l=e(1496),T=e(98976),x=e(36672),d=e(43043),s=e(62072),t=e(66661),o=e(27515),r=e(8260).toStringTag,n=e(96416),a=Array.isArray,i=Object.defineProperty,c=Object.prototype.hasOwnProperty,h=Object.getPrototypeOf;$.exports=k=function(){var f,b=arguments[0];if(!(this instanceof k))throw new TypeError("Constructor requires 'new'");return f=n&&l&&WeakMap!==k?l(new WeakMap,h(this)):this,A(b)&&(a(b)||(b=t(b))),i(f,"__weakMapData__",s("c","$weakMap$"+d())),b&&o(b,function(v){x(v),f.set(v[0],v[1])}),f},n&&(l&&l(k,WeakMap),k.prototype=Object.create(WeakMap.prototype,{constructor:s(k)})),Object.defineProperties(k.prototype,{delete:s(function(f){return!!c.call(T(f),this.__weakMapData__)&&(delete f[this.__weakMapData__],!0)}),get:s(function(f){if(c.call(T(f),this.__weakMapData__))return f[this.__weakMapData__]}),has:s(function(f){return c.call(T(f),this.__weakMapData__)}),set:s(function(f,b){return i(T(f),this.__weakMapData__,s("c",b)),this}),toString:s(function(){return"[object WeakMap]"})}),i(k.prototype,r,s("c","WeakMap"))},15398:function($){var R,e=typeof Reflect=="object"?Reflect:null,k=e&&typeof e.apply=="function"?e.apply:function(c,h,f){return Function.prototype.apply.call(c,h,f)};R=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:function(c){return Object.getOwnPropertyNames(c)};var A=Number.isNaN||function(c){return c!=c};function l(){l.init.call(this)}$.exports=l,$.exports.once=function(c,h){return new Promise(function(f,b){function v(y){c.removeListener(h,g),b(y)}function g(){typeof c.removeListener=="function"&&c.removeListener("error",v),f([].slice.call(arguments))}i(c,h,g,{once:!0}),h!=="error"&&function(y,p,m){typeof y.on=="function"&&i(y,"error",p,{once:!0})}(c,v)})},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var T=10;function x(c){if(typeof c!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof c)}function d(c){return c._maxListeners===void 0?l.defaultMaxListeners:c._maxListeners}function s(c,h,f,b){var v,g,y,p;if(x(f),(g=c._events)===void 0?(g=c._events=Object.create(null),c._eventsCount=0):(g.newListener!==void 0&&(c.emit("newListener",h,f.listener?f.listener:f),g=c._events),y=g[h]),y===void 0)y=g[h]=f,++c._eventsCount;else if(typeof y=="function"?y=g[h]=b?[f,y]:[y,f]:b?y.unshift(f):y.push(f),(v=d(c))>0&&y.length>v&&!y.warned){y.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+y.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=c,m.type=h,m.count=y.length,p=m,console&&console.warn&&console.warn(p)}return c}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o(c,h,f){var b={fired:!1,wrapFn:void 0,target:c,type:h,listener:f},v=t.bind(b);return v.listener=f,b.wrapFn=v,v}function r(c,h,f){var b=c._events;if(b===void 0)return[];var v=b[h];return v===void 0?[]:typeof v=="function"?f?[v.listener||v]:[v]:f?function(g){for(var y=new Array(g.length),p=0;p<y.length;++p)y[p]=g[p].listener||g[p];return y}(v):a(v,v.length)}function n(c){var h=this._events;if(h!==void 0){var f=h[c];if(typeof f=="function")return 1;if(f!==void 0)return f.length}return 0}function a(c,h){for(var f=new Array(h),b=0;b<h;++b)f[b]=c[b];return f}function i(c,h,f,b){if(typeof c.on=="function")b.once?c.once(h,f):c.on(h,f);else{if(typeof c.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof c);c.addEventListener(h,function v(g){b.once&&c.removeEventListener(h,v),f(g)})}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(c){if(typeof c!="number"||c<0||A(c))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+c+".");T=c}}),l.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(c){if(typeof c!="number"||c<0||A(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+c+".");return this._maxListeners=c,this},l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(c){for(var h=[],f=1;f<arguments.length;f++)h.push(arguments[f]);var b=c==="error",v=this._events;if(v!==void 0)b=b&&v.error===void 0;else if(!b)return!1;if(b){var g;if(h.length>0&&(g=h[0]),g instanceof Error)throw g;var y=new Error("Unhandled error."+(g?" ("+g.message+")":""));throw y.context=g,y}var p=v[c];if(p===void 0)return!1;if(typeof p=="function")k(p,this,h);else{var m=p.length,w=a(p,m);for(f=0;f<m;++f)k(w[f],this,h)}return!0},l.prototype.addListener=function(c,h){return s(this,c,h,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(c,h){return s(this,c,h,!0)},l.prototype.once=function(c,h){return x(h),this.on(c,o(this,c,h)),this},l.prototype.prependOnceListener=function(c,h){return x(h),this.prependListener(c,o(this,c,h)),this},l.prototype.removeListener=function(c,h){var f,b,v,g,y;if(x(h),(b=this._events)===void 0)return this;if((f=b[c])===void 0)return this;if(f===h||f.listener===h)--this._eventsCount==0?this._events=Object.create(null):(delete b[c],b.removeListener&&this.emit("removeListener",c,f.listener||h));else if(typeof f!="function"){for(v=-1,g=f.length-1;g>=0;g--)if(f[g]===h||f[g].listener===h){y=f[g].listener,v=g;break}if(v<0)return this;v===0?f.shift():function(p,m){for(;m+1<p.length;m++)p[m]=p[m+1];p.pop()}(f,v),f.length===1&&(b[c]=f[0]),b.removeListener!==void 0&&this.emit("removeListener",c,y||h)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(c){var h,f,b;if((f=this._events)===void 0)return this;if(f.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):f[c]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete f[c]),this;if(arguments.length===0){var v,g=Object.keys(f);for(b=0;b<g.length;++b)(v=g[b])!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(h=f[c])=="function")this.removeListener(c,h);else if(h!==void 0)for(b=h.length-1;b>=0;b--)this.removeListener(c,h[b]);return this},l.prototype.listeners=function(c){return r(this,c,!0)},l.prototype.rawListeners=function(c){return r(this,c,!1)},l.listenerCount=function(c,h){return typeof c.listenerCount=="function"?c.listenerCount(h):n.call(c,h)},l.prototype.listenerCount=n,l.prototype.eventNames=function(){return this._eventsCount>0?R(this._events):[]}},60774:function($){var R=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};$.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return R()}try{return __global__||R()}finally{delete Object.prototype.__global__}}()},94908:function($,R,e){$.exports=e(51152)()?globalThis:e(60774)},51152:function($){$.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},92770:function($,R,e){var k=e(18546);$.exports=function(A){var l=typeof A;if(l==="string"){var T=A;if((A=+A)==0&&k(T))return!1}else if(l!=="number")return!1;return A-A<1}},30120:function($,R,e){var k=e(90660);$.exports=function(A,l,T){if(!A)throw new TypeError("must specify data as first parameter");if(T=0|+(T||0),Array.isArray(A)&&A[0]&&typeof A[0][0]=="number"){var x,d,s,t,o=A[0].length,r=A.length*o;l&&typeof l!="string"||(l=new(k(l||"float32"))(r+T));var n=l.length-T;if(r!==n)throw new Error("source length "+r+" ("+o+"x"+A.length+") does not match destination length "+n);for(x=0,s=T;x<A.length;x++)for(d=0;d<o;d++)l[s++]=A[x][d]===null?NaN:A[x][d]}else if(l&&typeof l!="string")l.set(A,T);else{var a=k(l||"float32");if(Array.isArray(A)||l==="array")for(x=0,s=T,t=(l=new a(A.length+T)).length;s<t;s++,x++)l[s]=A[x]===null?NaN:A[x];else T===0?l=new a(A):(l=new a(A.length+T)).set(A,T)}return l}},68016:function($,R,e){var k=e(53313),A=[32,126];$.exports=function(l){var T=(l=l||{}).shape?l.shape:l.canvas?[l.canvas.width,l.canvas.height]:[512,512],x=l.canvas||document.createElement("canvas"),d=l.font,s=typeof l.step=="number"?[l.step,l.step]:l.step||[32,32],t=l.chars||A;if(d&&typeof d!="string"&&(d=k(d)),Array.isArray(t)){if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var o=[],r=t[0],n=0;r<=t[1];r++)o[n++]=String.fromCharCode(r);t=o}}else t=String(t).split("");T=T.slice(),x.width=T[0],x.height=T[1];var a=x.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,x.width,x.height),a.font=d,a.textAlign="center",a.textBaseline="middle",a.fillStyle="#fff";var i=s[0]/2,c=s[1]/2;for(r=0;r<t.length;r++)a.fillText(t[r],i,c),(i+=s[0])>T[0]-s[0]/2&&(i=s[0]/2,c+=s[1]);return x}},32879:function($){function R(l,T){T||(T={}),(typeof l=="string"||Array.isArray(l))&&(T.family=l);var x=Array.isArray(T.family)?T.family.join(", "):T.family;if(!x)throw Error("`family` must be defined");var d=T.size||T.fontSize||T.em||48,s=T.weight||T.fontWeight||"",t=(l=[T.style||T.fontStyle||"",s,d].join(" ")+"px "+x,T.origin||"top");if(R.cache[x]&&d<=R.cache[x].em)return e(R.cache[x],t);var o=T.canvas||R.canvas,r=o.getContext("2d"),n={upper:T.upper!==void 0?T.upper:"H",lower:T.lower!==void 0?T.lower:"x",descent:T.descent!==void 0?T.descent:"p",ascent:T.ascent!==void 0?T.ascent:"h",tittle:T.tittle!==void 0?T.tittle:"i",overshoot:T.overshoot!==void 0?T.overshoot:"O"},a=Math.ceil(1.5*d);o.height=a,o.width=.5*a,r.font=l;var i="H",c={top:0};r.clearRect(0,0,a,a),r.textBaseline="top",r.fillStyle="black",r.fillText(i,0,0);var h=k(r.getImageData(0,0,a,a));r.clearRect(0,0,a,a),r.textBaseline="bottom",r.fillText(i,0,a);var f=k(r.getImageData(0,0,a,a));c.lineHeight=c.bottom=a-f+h,r.clearRect(0,0,a,a),r.textBaseline="alphabetic",r.fillText(i,0,a);var b=a-k(r.getImageData(0,0,a,a))-1+h;c.baseline=c.alphabetic=b,r.clearRect(0,0,a,a),r.textBaseline="middle",r.fillText(i,0,.5*a);var v=k(r.getImageData(0,0,a,a));c.median=c.middle=a-v-1+h-.5*a,r.clearRect(0,0,a,a),r.textBaseline="hanging",r.fillText(i,0,.5*a);var g=k(r.getImageData(0,0,a,a));c.hanging=a-g-1+h-.5*a,r.clearRect(0,0,a,a),r.textBaseline="ideographic",r.fillText(i,0,a);var y=k(r.getImageData(0,0,a,a));if(c.ideographic=a-y-1+h,n.upper&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.upper,0,0),c.upper=k(r.getImageData(0,0,a,a)),c.capHeight=c.baseline-c.upper),n.lower&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.lower,0,0),c.lower=k(r.getImageData(0,0,a,a)),c.xHeight=c.baseline-c.lower),n.tittle&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.tittle,0,0),c.tittle=k(r.getImageData(0,0,a,a))),n.ascent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.ascent,0,0),c.ascent=k(r.getImageData(0,0,a,a))),n.descent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.descent,0,0),c.descent=A(r.getImageData(0,0,a,a))),n.overshoot){r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.overshoot,0,0);var p=A(r.getImageData(0,0,a,a));c.overshoot=p-b}for(var m in c)c[m]/=d;return c.em=d,R.cache[x]=c,e(c,t)}function e(l,T){var x={};for(var d in typeof T=="string"&&(T=l[T]),l)d!=="em"&&(x[d]=l[d]-T);return x}function k(l){for(var T=l.height,x=l.data,d=3;d<x.length;d+=4)if(x[d]!==0)return Math.floor(.25*(d-3)/T)}function A(l){for(var T=l.height,x=l.data,d=x.length-1;d>0;d-=4)if(x[d]!==0)return Math.floor(.25*(d-3)/T)}$.exports=R,R.canvas=document.createElement("canvas"),R.cache={}},86165:function($){var R=Object.prototype.hasOwnProperty,e=Object.prototype.toString;$.exports=function(k,A,l){if(e.call(A)!=="[object Function]")throw new TypeError("iterator must be a function");var T=k.length;if(T===+T)for(var x=0;x<T;x++)A.call(l,k[x],x,k);else for(var d in k)R.call(k,d)&&A.call(l,k[d],d,k)}},73047:function($){var R="Function.prototype.bind called on incompatible ",e=Array.prototype.slice,k=Object.prototype.toString,A="[object Function]";$.exports=function(l){var T=this;if(typeof T!="function"||k.call(T)!==A)throw new TypeError(R+T);for(var x,d=e.call(arguments,1),s=function(){if(this instanceof x){var a=T.apply(this,d.concat(e.call(arguments)));return Object(a)===a?a:this}return T.apply(l,d.concat(e.call(arguments)))},t=Math.max(0,T.length-d.length),o=[],r=0;r<t;r++)o.push("$"+r);if(x=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(s),T.prototype){var n=function(){};n.prototype=T.prototype,x.prototype=new n,n.prototype=null}return x}},77575:function($,R,e){var k=e(73047);$.exports=Function.prototype.bind||k},86249:function($){$.exports=function(R,e){if(typeof R!="string")throw new TypeError("must specify type string");if(e=e||{},typeof document>"u"&&!e.canvas)return null;var k=e.canvas||document.createElement("canvas");typeof e.width=="number"&&(k.width=e.width),typeof e.height=="number"&&(k.height=e.height);var A,l=e;try{var T=[R];R.indexOf("webgl")===0&&T.push("experimental-"+R);for(var x=0;x<T.length;x++)if(A=k.getContext(T[x],l))return A}catch{A=null}return A||null}},68318:function($,R,e){var k,A=SyntaxError,l=Function,T=TypeError,x=function(E){try{return Function('"use strict"; return ('+E+").constructor;")()}catch{}},d=Object.getOwnPropertyDescriptor;if(d)try{d({},"")}catch{d=null}var s=function(){throw new T},t=d?function(){try{return s}catch{try{return d(arguments,"callee").get}catch{return s}}}():s,o=e(57877)(),r=Object.getPrototypeOf||function(E){return E.__proto__},n=x("async function* () {}"),a=n?n.prototype:k,i=a?a.prototype:k,c=typeof Uint8Array>"u"?k:r(Uint8Array),h={"%AggregateError%":typeof AggregateError>"u"?k:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?k:ArrayBuffer,"%ArrayIteratorPrototype%":o?r([][Symbol.iterator]()):k,"%AsyncFromSyncIteratorPrototype%":k,"%AsyncFunction%":x("async function () {}"),"%AsyncGenerator%":a,"%AsyncGeneratorFunction%":n,"%AsyncIteratorPrototype%":i?r(i):k,"%Atomics%":typeof Atomics>"u"?k:Atomics,"%BigInt%":typeof BigInt>"u"?k:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?k:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?k:Float32Array,"%Float64Array%":typeof Float64Array>"u"?k:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?k:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":x("function* () {}"),"%Int8Array%":typeof Int8Array>"u"?k:Int8Array,"%Int16Array%":typeof Int16Array>"u"?k:Int16Array,"%Int32Array%":typeof Int32Array>"u"?k:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":o?r(r([][Symbol.iterator]())):k,"%JSON%":typeof JSON=="object"?JSON:k,"%Map%":typeof Map>"u"?k:Map,"%MapIteratorPrototype%":typeof Map<"u"&&o?r(new Map()[Symbol.iterator]()):k,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?k:Promise,"%Proxy%":typeof Proxy>"u"?k:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?k:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?k:Set,"%SetIteratorPrototype%":typeof Set<"u"&&o?r(new Set()[Symbol.iterator]()):k,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?k:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":o?r(""[Symbol.iterator]()):k,"%Symbol%":o?Symbol:k,"%SyntaxError%":A,"%ThrowTypeError%":t,"%TypedArray%":c,"%TypeError%":T,"%Uint8Array%":typeof Uint8Array>"u"?k:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?k:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?k:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?k:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?k:WeakMap,"%WeakRef%":typeof WeakRef>"u"?k:WeakRef,"%WeakSet%":typeof WeakSet>"u"?k:WeakSet},f={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=e(77575),v=e(35065),g=b.call(Function.call,Array.prototype.concat),y=b.call(Function.apply,Array.prototype.splice),p=b.call(Function.call,String.prototype.replace),m=b.call(Function.call,String.prototype.slice),w=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,u=/\\(\\)?/g,S=function(E){var L=m(E,0,1),C=m(E,-1);if(L==="%"&&C!=="%")throw new A("invalid intrinsic syntax, expected closing `%`");if(C==="%"&&L!=="%")throw new A("invalid intrinsic syntax, expected opening `%`");var P=[];return p(E,w,function(I,U,z,H){P[P.length]=z?p(H,u,"$1"):U||I}),P},_=function(E,L){var C,P=E;if(v(f,P)&&(P="%"+(C=f[P])[0]+"%"),v(h,P)){var I=h[P];if(I===void 0&&!L)throw new T("intrinsic "+E+" exists, but is not available. Please file an issue!");return{alias:C,name:P,value:I}}throw new A("intrinsic "+E+" does not exist!")};$.exports=function(E,L){if(typeof E!="string"||E.length===0)throw new T("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof L!="boolean")throw new T('"allowMissing" argument must be a boolean');var C=S(E),P=C.length>0?C[0]:"",I=_("%"+P+"%",L),U=I.name,z=I.value,H=!1,F=I.alias;F&&(P=F[0],y(C,g([0,1],F)));for(var N=1,B=!0;N<C.length;N+=1){var j=C[N],K=m(j,0,1),G=m(j,-1);if((K==='"'||K==="'"||K==="`"||G==='"'||G==="'"||G==="`")&&K!==G)throw new A("property names with quotes must have matching quotes");if(j!=="constructor"&&B||(H=!0),v(h,U="%"+(P+="."+j)+"%"))z=h[U];else if(z!=null){if(!(j in z)){if(!L)throw new T("base intrinsic for "+E+" exists, but the property is not available.");return}if(d&&N+1>=C.length){var V=d(z,j);z=(B=!!V)&&"get"in V&&!("originalValue"in V.get)?V.get:z[j]}else B=v(z,j),z=z[j];B&&!H&&(h[U]=z)}}return z}},85400:function($){$.exports=function(R,e){var k=e[0],A=e[1],l=e[2],T=e[3],x=e[4],d=e[5],s=e[6],t=e[7],o=e[8],r=e[9],n=e[10],a=e[11],i=e[12],c=e[13],h=e[14],f=e[15];return R[0]=d*(n*f-a*h)-r*(s*f-t*h)+c*(s*a-t*n),R[1]=-(A*(n*f-a*h)-r*(l*f-T*h)+c*(l*a-T*n)),R[2]=A*(s*f-t*h)-d*(l*f-T*h)+c*(l*t-T*s),R[3]=-(A*(s*a-t*n)-d*(l*a-T*n)+r*(l*t-T*s)),R[4]=-(x*(n*f-a*h)-o*(s*f-t*h)+i*(s*a-t*n)),R[5]=k*(n*f-a*h)-o*(l*f-T*h)+i*(l*a-T*n),R[6]=-(k*(s*f-t*h)-x*(l*f-T*h)+i*(l*t-T*s)),R[7]=k*(s*a-t*n)-x*(l*a-T*n)+o*(l*t-T*s),R[8]=x*(r*f-a*c)-o*(d*f-t*c)+i*(d*a-t*r),R[9]=-(k*(r*f-a*c)-o*(A*f-T*c)+i*(A*a-T*r)),R[10]=k*(d*f-t*c)-x*(A*f-T*c)+i*(A*t-T*d),R[11]=-(k*(d*a-t*r)-x*(A*a-T*r)+o*(A*t-T*d)),R[12]=-(x*(r*h-n*c)-o*(d*h-s*c)+i*(d*n-s*r)),R[13]=k*(r*h-n*c)-o*(A*h-l*c)+i*(A*n-l*r),R[14]=-(k*(d*h-s*c)-x*(A*h-l*c)+i*(A*s-l*d)),R[15]=k*(d*n-s*r)-x*(A*n-l*r)+o*(A*s-l*d),R}},42331:function($){$.exports=function(R){var e=new Float32Array(16);return e[0]=R[0],e[1]=R[1],e[2]=R[2],e[3]=R[3],e[4]=R[4],e[5]=R[5],e[6]=R[6],e[7]=R[7],e[8]=R[8],e[9]=R[9],e[10]=R[10],e[11]=R[11],e[12]=R[12],e[13]=R[13],e[14]=R[14],e[15]=R[15],e}},31042:function($){$.exports=function(R,e){return R[0]=e[0],R[1]=e[1],R[2]=e[2],R[3]=e[3],R[4]=e[4],R[5]=e[5],R[6]=e[6],R[7]=e[7],R[8]=e[8],R[9]=e[9],R[10]=e[10],R[11]=e[11],R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15],R}},11902:function($){$.exports=function(){var R=new Float32Array(16);return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},89887:function($){$.exports=function(R){var e=R[0],k=R[1],A=R[2],l=R[3],T=R[4],x=R[5],d=R[6],s=R[7],t=R[8],o=R[9],r=R[10],n=R[11],a=R[12],i=R[13],c=R[14],h=R[15];return(e*x-k*T)*(r*h-n*c)-(e*d-A*T)*(o*h-n*i)+(e*s-l*T)*(o*c-r*i)+(k*d-A*x)*(t*h-n*a)-(k*s-l*x)*(t*c-r*a)+(A*s-l*d)*(t*i-o*a)}},27812:function($){$.exports=function(R,e){var k=e[0],A=e[1],l=e[2],T=e[3],x=k+k,d=A+A,s=l+l,t=k*x,o=A*x,r=A*d,n=l*x,a=l*d,i=l*s,c=T*x,h=T*d,f=T*s;return R[0]=1-r-i,R[1]=o+f,R[2]=n-h,R[3]=0,R[4]=o-f,R[5]=1-t-i,R[6]=a+c,R[7]=0,R[8]=n+h,R[9]=a-c,R[10]=1-t-r,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},34045:function($){$.exports=function(R,e,k){var A,l,T,x=k[0],d=k[1],s=k[2],t=Math.sqrt(x*x+d*d+s*s);return Math.abs(t)<1e-6?null:(x*=t=1/t,d*=t,s*=t,A=Math.sin(e),T=1-(l=Math.cos(e)),R[0]=x*x*T+l,R[1]=d*x*T+s*A,R[2]=s*x*T-d*A,R[3]=0,R[4]=x*d*T-s*A,R[5]=d*d*T+l,R[6]=s*d*T+x*A,R[7]=0,R[8]=x*s*T+d*A,R[9]=d*s*T-x*A,R[10]=s*s*T+l,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R)}},45973:function($){$.exports=function(R,e,k){var A=e[0],l=e[1],T=e[2],x=e[3],d=A+A,s=l+l,t=T+T,o=A*d,r=A*s,n=A*t,a=l*s,i=l*t,c=T*t,h=x*d,f=x*s,b=x*t;return R[0]=1-(a+c),R[1]=r+b,R[2]=n-f,R[3]=0,R[4]=r-b,R[5]=1-(o+c),R[6]=i+h,R[7]=0,R[8]=n+f,R[9]=i-h,R[10]=1-(o+a),R[11]=0,R[12]=k[0],R[13]=k[1],R[14]=k[2],R[15]=1,R}},81472:function($){$.exports=function(R,e){return R[0]=e[0],R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=e[1],R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=e[2],R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},14669:function($){$.exports=function(R,e){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=e[0],R[13]=e[1],R[14]=e[2],R[15]=1,R}},75262:function($){$.exports=function(R,e){var k=Math.sin(e),A=Math.cos(e);return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=A,R[6]=k,R[7]=0,R[8]=0,R[9]=-k,R[10]=A,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},331:function($){$.exports=function(R,e){var k=Math.sin(e),A=Math.cos(e);return R[0]=A,R[1]=0,R[2]=-k,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=k,R[9]=0,R[10]=A,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},11049:function($){$.exports=function(R,e){var k=Math.sin(e),A=Math.cos(e);return R[0]=A,R[1]=k,R[2]=0,R[3]=0,R[4]=-k,R[5]=A,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},75195:function($){$.exports=function(R,e,k,A,l,T,x){var d=1/(k-e),s=1/(l-A),t=1/(T-x);return R[0]=2*T*d,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=2*T*s,R[6]=0,R[7]=0,R[8]=(k+e)*d,R[9]=(l+A)*s,R[10]=(x+T)*t,R[11]=-1,R[12]=0,R[13]=0,R[14]=x*T*2*t,R[15]=0,R}},71551:function($){$.exports=function(R){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},79576:function($,R,e){$.exports={create:e(11902),clone:e(42331),copy:e(31042),identity:e(71551),transpose:e(88654),invert:e(95874),adjoint:e(85400),determinant:e(89887),multiply:e(91362),translate:e(31283),scale:e(10789),rotate:e(65074),rotateX:e(35545),rotateY:e(94918),rotateZ:e(15692),fromRotation:e(34045),fromRotationTranslation:e(45973),fromScaling:e(81472),fromTranslation:e(14669),fromXRotation:e(75262),fromYRotation:e(331),fromZRotation:e(11049),fromQuat:e(27812),frustum:e(75195),perspective:e(7864),perspectiveFromFieldOfView:e(35279),ortho:e(60378),lookAt:e(65551),str:e(6726)}},95874:function($){$.exports=function(R,e){var k=e[0],A=e[1],l=e[2],T=e[3],x=e[4],d=e[5],s=e[6],t=e[7],o=e[8],r=e[9],n=e[10],a=e[11],i=e[12],c=e[13],h=e[14],f=e[15],b=k*d-A*x,v=k*s-l*x,g=k*t-T*x,y=A*s-l*d,p=A*t-T*d,m=l*t-T*s,w=o*c-r*i,u=o*h-n*i,S=o*f-a*i,_=r*h-n*c,E=r*f-a*c,L=n*f-a*h,C=b*L-v*E+g*_+y*S-p*u+m*w;return C?(C=1/C,R[0]=(d*L-s*E+t*_)*C,R[1]=(l*E-A*L-T*_)*C,R[2]=(c*m-h*p+f*y)*C,R[3]=(n*p-r*m-a*y)*C,R[4]=(s*S-x*L-t*u)*C,R[5]=(k*L-l*S+T*u)*C,R[6]=(h*g-i*m-f*v)*C,R[7]=(o*m-n*g+a*v)*C,R[8]=(x*E-d*S+t*w)*C,R[9]=(A*S-k*E-T*w)*C,R[10]=(i*p-c*g+f*b)*C,R[11]=(r*g-o*p-a*b)*C,R[12]=(d*u-x*_-s*w)*C,R[13]=(k*_-A*u+l*w)*C,R[14]=(c*v-i*y-h*b)*C,R[15]=(o*y-r*v+n*b)*C,R):null}},65551:function($,R,e){var k=e(71551);$.exports=function(A,l,T,x){var d,s,t,o,r,n,a,i,c,h,f=l[0],b=l[1],v=l[2],g=x[0],y=x[1],p=x[2],m=T[0],w=T[1],u=T[2];return Math.abs(f-m)<1e-6&&Math.abs(b-w)<1e-6&&Math.abs(v-u)<1e-6?k(A):(a=f-m,i=b-w,c=v-u,d=y*(c*=h=1/Math.sqrt(a*a+i*i+c*c))-p*(i*=h),s=p*(a*=h)-g*c,t=g*i-y*a,(h=Math.sqrt(d*d+s*s+t*t))?(d*=h=1/h,s*=h,t*=h):(d=0,s=0,t=0),o=i*t-c*s,r=c*d-a*t,n=a*s-i*d,(h=Math.sqrt(o*o+r*r+n*n))?(o*=h=1/h,r*=h,n*=h):(o=0,r=0,n=0),A[0]=d,A[1]=o,A[2]=a,A[3]=0,A[4]=s,A[5]=r,A[6]=i,A[7]=0,A[8]=t,A[9]=n,A[10]=c,A[11]=0,A[12]=-(d*f+s*b+t*v),A[13]=-(o*f+r*b+n*v),A[14]=-(a*f+i*b+c*v),A[15]=1,A)}},91362:function($){$.exports=function(R,e,k){var A=e[0],l=e[1],T=e[2],x=e[3],d=e[4],s=e[5],t=e[6],o=e[7],r=e[8],n=e[9],a=e[10],i=e[11],c=e[12],h=e[13],f=e[14],b=e[15],v=k[0],g=k[1],y=k[2],p=k[3];return R[0]=v*A+g*d+y*r+p*c,R[1]=v*l+g*s+y*n+p*h,R[2]=v*T+g*t+y*a+p*f,R[3]=v*x+g*o+y*i+p*b,v=k[4],g=k[5],y=k[6],p=k[7],R[4]=v*A+g*d+y*r+p*c,R[5]=v*l+g*s+y*n+p*h,R[6]=v*T+g*t+y*a+p*f,R[7]=v*x+g*o+y*i+p*b,v=k[8],g=k[9],y=k[10],p=k[11],R[8]=v*A+g*d+y*r+p*c,R[9]=v*l+g*s+y*n+p*h,R[10]=v*T+g*t+y*a+p*f,R[11]=v*x+g*o+y*i+p*b,v=k[12],g=k[13],y=k[14],p=k[15],R[12]=v*A+g*d+y*r+p*c,R[13]=v*l+g*s+y*n+p*h,R[14]=v*T+g*t+y*a+p*f,R[15]=v*x+g*o+y*i+p*b,R}},60378:function($){$.exports=function(R,e,k,A,l,T,x){var d=1/(e-k),s=1/(A-l),t=1/(T-x);return R[0]=-2*d,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=-2*s,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=2*t,R[11]=0,R[12]=(e+k)*d,R[13]=(l+A)*s,R[14]=(x+T)*t,R[15]=1,R}},7864:function($){$.exports=function(R,e,k,A,l){var T=1/Math.tan(e/2),x=1/(A-l);return R[0]=T/k,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=T,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=(l+A)*x,R[11]=-1,R[12]=0,R[13]=0,R[14]=2*l*A*x,R[15]=0,R}},35279:function($){$.exports=function(R,e,k,A){var l=Math.tan(e.upDegrees*Math.PI/180),T=Math.tan(e.downDegrees*Math.PI/180),x=Math.tan(e.leftDegrees*Math.PI/180),d=Math.tan(e.rightDegrees*Math.PI/180),s=2/(x+d),t=2/(l+T);return R[0]=s,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=t,R[6]=0,R[7]=0,R[8]=-(x-d)*s*.5,R[9]=(l-T)*t*.5,R[10]=A/(k-A),R[11]=-1,R[12]=0,R[13]=0,R[14]=A*k/(k-A),R[15]=0,R}},65074:function($){$.exports=function(R,e,k,A){var l,T,x,d,s,t,o,r,n,a,i,c,h,f,b,v,g,y,p,m,w,u,S,_,E=A[0],L=A[1],C=A[2],P=Math.sqrt(E*E+L*L+C*C);return Math.abs(P)<1e-6?null:(E*=P=1/P,L*=P,C*=P,l=Math.sin(k),x=1-(T=Math.cos(k)),d=e[0],s=e[1],t=e[2],o=e[3],r=e[4],n=e[5],a=e[6],i=e[7],c=e[8],h=e[9],f=e[10],b=e[11],v=E*E*x+T,g=L*E*x+C*l,y=C*E*x-L*l,p=E*L*x-C*l,m=L*L*x+T,w=C*L*x+E*l,u=E*C*x+L*l,S=L*C*x-E*l,_=C*C*x+T,R[0]=d*v+r*g+c*y,R[1]=s*v+n*g+h*y,R[2]=t*v+a*g+f*y,R[3]=o*v+i*g+b*y,R[4]=d*p+r*m+c*w,R[5]=s*p+n*m+h*w,R[6]=t*p+a*m+f*w,R[7]=o*p+i*m+b*w,R[8]=d*u+r*S+c*_,R[9]=s*u+n*S+h*_,R[10]=t*u+a*S+f*_,R[11]=o*u+i*S+b*_,e!==R&&(R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15]),R)}},35545:function($){$.exports=function(R,e,k){var A=Math.sin(k),l=Math.cos(k),T=e[4],x=e[5],d=e[6],s=e[7],t=e[8],o=e[9],r=e[10],n=e[11];return e!==R&&(R[0]=e[0],R[1]=e[1],R[2]=e[2],R[3]=e[3],R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15]),R[4]=T*l+t*A,R[5]=x*l+o*A,R[6]=d*l+r*A,R[7]=s*l+n*A,R[8]=t*l-T*A,R[9]=o*l-x*A,R[10]=r*l-d*A,R[11]=n*l-s*A,R}},94918:function($){$.exports=function(R,e,k){var A=Math.sin(k),l=Math.cos(k),T=e[0],x=e[1],d=e[2],s=e[3],t=e[8],o=e[9],r=e[10],n=e[11];return e!==R&&(R[4]=e[4],R[5]=e[5],R[6]=e[6],R[7]=e[7],R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15]),R[0]=T*l-t*A,R[1]=x*l-o*A,R[2]=d*l-r*A,R[3]=s*l-n*A,R[8]=T*A+t*l,R[9]=x*A+o*l,R[10]=d*A+r*l,R[11]=s*A+n*l,R}},15692:function($){$.exports=function(R,e,k){var A=Math.sin(k),l=Math.cos(k),T=e[0],x=e[1],d=e[2],s=e[3],t=e[4],o=e[5],r=e[6],n=e[7];return e!==R&&(R[8]=e[8],R[9]=e[9],R[10]=e[10],R[11]=e[11],R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15]),R[0]=T*l+t*A,R[1]=x*l+o*A,R[2]=d*l+r*A,R[3]=s*l+n*A,R[4]=t*l-T*A,R[5]=o*l-x*A,R[6]=r*l-d*A,R[7]=n*l-s*A,R}},10789:function($){$.exports=function(R,e,k){var A=k[0],l=k[1],T=k[2];return R[0]=e[0]*A,R[1]=e[1]*A,R[2]=e[2]*A,R[3]=e[3]*A,R[4]=e[4]*l,R[5]=e[5]*l,R[6]=e[6]*l,R[7]=e[7]*l,R[8]=e[8]*T,R[9]=e[9]*T,R[10]=e[10]*T,R[11]=e[11]*T,R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15],R}},6726:function($){$.exports=function(R){return"mat4("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+", "+R[4]+", "+R[5]+", "+R[6]+", "+R[7]+", "+R[8]+", "+R[9]+", "+R[10]+", "+R[11]+", "+R[12]+", "+R[13]+", "+R[14]+", "+R[15]+")"}},31283:function($){$.exports=function(R,e,k){var A,l,T,x,d,s,t,o,r,n,a,i,c=k[0],h=k[1],f=k[2];return e===R?(R[12]=e[0]*c+e[4]*h+e[8]*f+e[12],R[13]=e[1]*c+e[5]*h+e[9]*f+e[13],R[14]=e[2]*c+e[6]*h+e[10]*f+e[14],R[15]=e[3]*c+e[7]*h+e[11]*f+e[15]):(A=e[0],l=e[1],T=e[2],x=e[3],d=e[4],s=e[5],t=e[6],o=e[7],r=e[8],n=e[9],a=e[10],i=e[11],R[0]=A,R[1]=l,R[2]=T,R[3]=x,R[4]=d,R[5]=s,R[6]=t,R[7]=o,R[8]=r,R[9]=n,R[10]=a,R[11]=i,R[12]=A*c+d*h+r*f+e[12],R[13]=l*c+s*h+n*f+e[13],R[14]=T*c+t*h+a*f+e[14],R[15]=x*c+o*h+i*f+e[15]),R}},88654:function($){$.exports=function(R,e){if(R===e){var k=e[1],A=e[2],l=e[3],T=e[6],x=e[7],d=e[11];R[1]=e[4],R[2]=e[8],R[3]=e[12],R[4]=k,R[6]=e[9],R[7]=e[13],R[8]=A,R[9]=T,R[11]=e[14],R[12]=l,R[13]=x,R[14]=d}else R[0]=e[0],R[1]=e[4],R[2]=e[8],R[3]=e[12],R[4]=e[1],R[5]=e[5],R[6]=e[9],R[7]=e[13],R[8]=e[2],R[9]=e[6],R[10]=e[10],R[11]=e[14],R[12]=e[3],R[13]=e[7],R[14]=e[11],R[15]=e[15];return R}},42505:function($,R,e){var k=e(72791),A=e(71299),l=e(98580),T=e(12018),x=e(83522),d=e(25075),s=e(68016),t=e(58404),o=e(18863),r=e(10973),n=e(25677),a=e(75686),i=e(53545),c=e(56131),h=e(32879),f=e(30120),b=e(13547).nextPow2,v=new x,g=!1;if(document.body){var y=document.body.appendChild(document.createElement("div"));y.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(y).fontStretch&&(g=!0),document.body.removeChild(y)}var p=function(m){(function(w){return typeof w=="function"&&w._gl&&w.prop&&w.texture&&w.buffer})(m)?(m={regl:m},this.gl=m.regl._gl):this.gl=T(m),this.shader=v.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=m.regl||l({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),v.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(r(m)?m:{})};p.prototype.createShader=function(){var m=this.regl,w=m({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:m.prop("count"),offset:m.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:m.this("sizeBuffer")},width:{offset:0,stride:8,buffer:m.this("sizeBuffer")},char:m.this("charBuffer"),position:m.this("position")},uniforms:{atlasSize:function(u,S){return[S.atlas.width,S.atlas.height]},atlasDim:function(u,S){return[S.atlas.cols,S.atlas.rows]},atlas:function(u,S){return S.atlas.texture},charStep:function(u,S){return S.atlas.step},em:function(u,S){return S.atlas.em},color:m.prop("color"),opacity:m.prop("opacity"),viewport:m.this("viewportArray"),scale:m.this("scale"),align:m.prop("align"),baseline:m.prop("baseline"),translate:m.this("translate"),positionOffset:m.prop("positionOffset")},primitive:"points",viewport:m.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:m,draw:w,atlas:{}}},p.prototype.update=function(m){var w=this;if(typeof m=="string")m={text:m};else if(!m)return;(m=A(m,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(m.opacity)?this.opacity=m.opacity.map(function(Q){return parseFloat(Q)}):this.opacity=parseFloat(m.opacity)),m.viewport!=null&&(this.viewport=o(m.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),m.kerning!=null&&(this.kerning=m.kerning),m.offset!=null&&(typeof m.offset=="number"&&(m.offset=[m.offset,0]),this.positionOffset=f(m.offset)),m.direction&&(this.direction=m.direction),m.range&&(this.range=m.range,this.scale=[1/(m.range[2]-m.range[0]),1/(m.range[3]-m.range[1])],this.translate=[-m.range[0],-m.range[1]]),m.scale&&(this.scale=m.scale),m.translate&&(this.translate=m.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||m.font||(m.font=p.baseFontSize+"px sans-serif");var u,S=!1,_=!1;if(m.font&&(Array.isArray(m.font)?m.font:[m.font]).forEach(function(Q,oe){if(typeof Q=="string")try{Q=k.parse(Q)}catch{Q=k.parse(p.baseFontSize+"px "+Q)}else Q=k.parse(k.stringify(Q));var ce=k.stringify({size:p.baseFontSize,family:Q.family,stretch:g?Q.stretch:void 0,variant:Q.variant,weight:Q.weight,style:Q.style}),me=n(Q.size),Ae=Math.round(me[0]*a(me[1]));if(Ae!==w.fontSize[oe]&&(_=!0,w.fontSize[oe]=Ae),!(w.font[oe]&&ce==w.font[oe].baseString||(S=!0,w.font[oe]=p.fonts[ce],w.font[oe]))){var Ie=Q.family.join(", "),Ce=[Q.style];Q.style!=Q.variant&&Ce.push(Q.variant),Q.variant!=Q.weight&&Ce.push(Q.weight),g&&Q.weight!=Q.stretch&&Ce.push(Q.stretch),w.font[oe]={baseString:ce,family:Ie,weight:Q.weight,stretch:Q.stretch,style:Q.style,variant:Q.variant,width:{},kerning:{},metrics:h(Ie,{origin:"top",fontSize:p.baseFontSize,fontStyle:Ce.join(" ")})},p.fonts[ce]=w.font[oe]}}),(S||_)&&this.font.forEach(function(Q,oe){var ce=k.stringify({size:w.fontSize[oe],family:Q.family,stretch:g?Q.stretch:void 0,variant:Q.variant,weight:Q.weight,style:Q.style});if(w.fontAtlas[oe]=w.shader.atlas[ce],!w.fontAtlas[oe]){var me=Q.metrics;w.shader.atlas[ce]=w.fontAtlas[oe]={fontString:ce,step:2*Math.ceil(w.fontSize[oe]*me.bottom*.5),em:w.fontSize[oe],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:w.regl.texture()}}m.text==null&&(m.text=w.text)}),typeof m.text=="string"&&m.position&&m.position.length>2){for(var E=Array(.5*m.position.length),L=0;L<E.length;L++)E[L]=m.text;m.text=E}if(m.text!=null||S){if(this.textOffsets=[0],Array.isArray(m.text)){this.count=m.text[0].length,this.counts=[this.count];for(var C=1;C<m.text.length;C++)this.textOffsets[C]=this.textOffsets[C-1]+m.text[C-1].length,this.count+=m.text[C].length,this.counts.push(m.text[C].length);this.text=m.text.join("")}else this.text=m.text,this.count=this.text.length,this.counts=[this.count];u=[],this.font.forEach(function(Q,oe){p.atlasContext.font=Q.baseString;for(var ce=w.fontAtlas[oe],me=0;me<w.text.length;me++){var Ae=w.text.charAt(me);if(ce.ids[Ae]==null&&(ce.ids[Ae]=ce.chars.length,ce.chars.push(Ae),u.push(Ae)),Q.width[Ae]==null&&(Q.width[Ae]=p.atlasContext.measureText(Ae).width/p.baseFontSize,w.kerning)){var Ie=[];for(var Ce in Q.width)Ie.push(Ce+Ae,Ae+Ce);c(Q.kerning,i(Q.family,{pairs:Ie}))}}})}if(m.position)if(m.position.length>2){for(var P=!m.position[0].length,I=t.mallocFloat(2*this.count),U=0,z=0;U<this.counts.length;U++){var H=this.counts[U];if(P)for(var F=0;F<H;F++)I[z++]=m.position[2*U],I[z++]=m.position[2*U+1];else for(var N=0;N<H;N++)I[z++]=m.position[U][0],I[z++]=m.position[U][1]}this.position.call?this.position({type:"float",data:I}):this.position=this.regl.buffer({type:"float",data:I}),t.freeFloat(I)}else this.position.destroy&&this.position.destroy(),this.position={constant:m.position};if(m.text||S){var B=t.mallocUint8(this.count),j=t.mallocFloat(2*this.count);this.textWidth=[];for(var K=0,G=0;K<this.counts.length;K++){for(var V=this.counts[K],W=this.font[K]||this.font[0],J=this.fontAtlas[K]||this.fontAtlas[0],X=0;X<V;X++){var ee=this.text.charAt(G),re=this.text.charAt(G-1);if(B[G]=J.ids[ee],j[2*G]=W.width[ee],X){var ie=j[2*G-2],se=j[2*G],fe=j[2*G-1]+.5*ie+.5*se;if(this.kerning){var ye=W.kerning[re+ee];ye&&(fe+=.001*ye)}j[2*G+1]=fe}else j[2*G+1]=.5*j[2*G];G++}this.textWidth.push(j.length?.5*j[2*G-2]+j[2*G-1]:0)}m.align||(m.align=this.align),this.charBuffer({data:B,type:"uint8",usage:"stream"}),this.sizeBuffer({data:j,type:"float",usage:"stream"}),t.freeUint8(B),t.freeFloat(j),u.length&&this.font.forEach(function(Q,oe){var ce=w.fontAtlas[oe],me=ce.step,Ae=Math.floor(p.maxAtlasSize/me),Ie=Math.min(Ae,ce.chars.length),Ce=Math.ceil(ce.chars.length/Ie),Re=b(Ie*me),le=b(Ce*me);ce.width=Re,ce.height=le,ce.rows=Ce,ce.cols=Ie,ce.em&&ce.texture({data:s({canvas:p.atlasCanvas,font:ce.fontString,chars:ce.chars,shape:[Re,le],step:[me,me]})})})}if(m.align&&(this.align=m.align,this.alignOffset=this.textWidth.map(function(Q,oe){var ce=Array.isArray(w.align)?w.align.length>1?w.align[oe]:w.align[0]:w.align;if(typeof ce=="number")return ce;switch(ce){case"right":case"end":return-Q;case"center":case"centre":case"middle":return .5*-Q}return 0})),this.baseline==null&&m.baseline==null&&(m.baseline=0),m.baseline!=null&&(this.baseline=m.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Q,oe){var ce=(w.font[oe]||w.font[0]).metrics,me=0;return me+=.5*ce.bottom,-1*(me+=typeof Q=="number"?Q-ce.baseline:-ce[Q])})),m.color!=null)if(m.color||(m.color="transparent"),typeof m.color!="string"&&isNaN(m.color)){var ge;if(typeof m.color[0]=="number"&&m.color.length>this.counts.length){var he=m.color.length;ge=t.mallocUint8(he);for(var ve=(m.color.subarray||m.color.slice).bind(m.color),Oe=0;Oe<he;Oe+=4)ge.set(d(ve(Oe,Oe+4),"uint8"),Oe)}else{var xe=m.color.length;ge=t.mallocUint8(4*xe);for(var ke=0;ke<xe;ke++)ge.set(d(m.color[ke]||0,"uint8"),4*ke)}this.color=ge}else this.color=d(m.color,"uint8");if(m.position||m.text||m.color||m.baseline||m.align||m.font||m.offset||m.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Me=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Me);for(var Te=0;Te<this.batch.length;Te++)this.batch[Te]={count:this.counts.length>1?this.counts[Te]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Te]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*Te,4*Te+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Te]:this.opacity,baseline:this.baselineOffset[Te]!=null?this.baselineOffset[Te]:this.baselineOffset[0],align:this.align?this.alignOffset[Te]!=null?this.alignOffset[Te]:this.alignOffset[0]:0,atlas:this.fontAtlas[Te]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*Te,2*Te+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},p.prototype.destroy=function(){},p.prototype.kerning=!0,p.prototype.position={constant:new Float32Array(2)},p.prototype.translate=null,p.prototype.scale=null,p.prototype.font=null,p.prototype.text="",p.prototype.positionOffset=[0,0],p.prototype.opacity=1,p.prototype.color=new Uint8Array([0,0,0,255]),p.prototype.alignOffset=[0,0],p.maxAtlasSize=1024,p.atlasCanvas=document.createElement("canvas"),p.atlasContext=p.atlasCanvas.getContext("2d",{alpha:!1}),p.baseFontSize=64,p.fonts={},$.exports=p},12018:function($,R,e){var k=e(71299);function A(x){if(x.container)if(x.container==document.body)document.body.style.width||(x.canvas.width=x.width||x.pixelRatio*e.g.innerWidth),document.body.style.height||(x.canvas.height=x.height||x.pixelRatio*e.g.innerHeight);else{var d=x.container.getBoundingClientRect();x.canvas.width=x.width||d.right-d.left,x.canvas.height=x.height||d.bottom-d.top}}function l(x){return typeof x.getContext=="function"&&"width"in x&&"height"in x}function T(){var x=document.createElement("canvas");return x.style.position="absolute",x.style.top=0,x.style.left=0,x}$.exports=function(x){var d;if(x?typeof x=="string"&&(x={container:x}):x={},(x=l(x)||typeof(d=x).nodeName=="string"&&typeof d.appendChild=="function"&&typeof d.getBoundingClientRect=="function"?{container:x}:function(t){return typeof t.drawArrays=="function"||typeof t.drawElements=="function"}(x)?{gl:x}:k(x,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(x.pixelRatio=e.g.pixelRatio||1),x.gl)return x.gl;if(x.canvas&&(x.container=x.canvas.parentNode),x.container){if(typeof x.container=="string"){var s=document.querySelector(x.container);if(!s)throw Error("Element "+x.container+" is not found");x.container=s}l(x.container)?(x.canvas=x.container,x.container=x.canvas.parentNode):x.canvas||(x.canvas=T(),x.container.appendChild(x.canvas),A(x))}else if(!x.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");x.container=document.body||document.documentElement,x.canvas=T(),x.container.appendChild(x.canvas),A(x)}return x.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{x.gl=x.canvas.getContext(t,x.attrs)}catch{}return x.gl}),x.gl}},56068:function($){$.exports=function(R){typeof R=="string"&&(R=[R]);for(var e=[].slice.call(arguments,1),k=[],A=0;A<R.length-1;A++)k.push(R[A],e[A]||"");return k.push(R[A]),k.join("")}},57035:function($,R,e){var k,A=e(54404);k=typeof e.g.matchMedia=="function"?!e.g.matchMedia("(hover: none)").matches:A,$.exports=k},38520:function($,R,e){var k=e(54404);$.exports=k&&function(){var A=!1;try{var l=Object.defineProperty({},"passive",{get:function(){A=!0}});window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{A=!1}return A}()},57877:function($,R,e){var k=typeof Symbol<"u"&&Symbol,A=e(35638);$.exports=function(){return typeof k=="function"&&typeof Symbol=="function"&&typeof k("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&A()}},35638:function($){$.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var R={},e=Symbol("test"),k=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(k)!=="[object Symbol]")return!1;for(e in R[e]=42,R)return!1;if(typeof Object.keys=="function"&&Object.keys(R).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(R).length!==0)return!1;var A=Object.getOwnPropertySymbols(R);if(A.length!==1||A[0]!==e||!Object.prototype.propertyIsEnumerable.call(R,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(R,e);if(l.value!==42||l.enumerable!==!0)return!1}return!0}},84543:function($,R,e){var k=e(35638);$.exports=function(){return k()&&!!Symbol.toStringTag}},35065:function($,R,e){var k=e(77575);$.exports=k.call(Function.call,Object.prototype.hasOwnProperty)},95280:function($,R){R.read=function(e,k,A,l,T){var x,d,s=8*T-l-1,t=(1<<s)-1,o=t>>1,r=-7,n=A?T-1:0,a=A?-1:1,i=e[k+n];for(n+=a,x=i&(1<<-r)-1,i>>=-r,r+=s;r>0;x=256*x+e[k+n],n+=a,r-=8);for(d=x&(1<<-r)-1,x>>=-r,r+=l;r>0;d=256*d+e[k+n],n+=a,r-=8);if(x===0)x=1-o;else{if(x===t)return d?NaN:1/0*(i?-1:1);d+=Math.pow(2,l),x-=o}return(i?-1:1)*d*Math.pow(2,x-l)},R.write=function(e,k,A,l,T,x){var d,s,t,o=8*x-T-1,r=(1<<o)-1,n=r>>1,a=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,i=l?0:x-1,c=l?1:-1,h=k<0||k===0&&1/k<0?1:0;for(k=Math.abs(k),isNaN(k)||k===1/0?(s=isNaN(k)?1:0,d=r):(d=Math.floor(Math.log(k)/Math.LN2),k*(t=Math.pow(2,-d))<1&&(d--,t*=2),(k+=d+n>=1?a/t:a*Math.pow(2,1-n))*t>=2&&(d++,t/=2),d+n>=r?(s=0,d=r):d+n>=1?(s=(k*t-1)*Math.pow(2,T),d+=n):(s=k*Math.pow(2,n-1)*Math.pow(2,T),d=0));T>=8;e[A+i]=255&s,i+=c,s/=256,T-=8);for(d=d<<T|s,o+=T;o>0;e[A+i]=255&d,i+=c,d/=256,o-=8);e[A+i-c]|=128*h}},42018:function($){typeof Object.create=="function"?$.exports=function(R,e){e&&(R.super_=e,R.prototype=Object.create(e.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}))}:$.exports=function(R,e){if(e){R.super_=e;var k=function(){};k.prototype=e.prototype,R.prototype=new k,R.prototype.constructor=R}}},47216:function($){var R=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",e=Object.prototype.toString,k=function(T){return!(R&&T&&typeof T=="object"&&Symbol.toStringTag in T)&&e.call(T)==="[object Arguments]"},A=function(T){return!!k(T)||T!==null&&typeof T=="object"&&typeof T.length=="number"&&T.length>=0&&e.call(T)!=="[object Array]"&&e.call(T.callee)==="[object Function]"},l=function(){return k(arguments)}();k.isLegacyArguments=A,$.exports=l?k:A},54404:function($){$.exports=!0},65481:function($,R,e){var k,A=Object.prototype.toString,l=Function.prototype.toString,T=/^\s*(?:function)?\*/,x=e(84543)(),d=Object.getPrototypeOf;$.exports=function(s){if(typeof s!="function")return!1;if(T.test(l.call(s)))return!0;if(!x)return A.call(s)==="[object GeneratorFunction]";if(!d)return!1;if(k===void 0){var t=function(){if(!x)return!1;try{return Function("return function*() {}")()}catch{}}();k=!!t&&d(t)}return d(s)===k}},62683:function($){$.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},64274:function($){$.exports=function(R){return R!=R}},15567:function($,R,e){var k=e(68222),A=e(17045),l=e(64274),T=e(14922),x=e(22442),d=k(T(),Number);A(d,{getPolyfill:T,implementation:l,shim:x}),$.exports=d},14922:function($,R,e){var k=e(64274);$.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:k}},22442:function($,R,e){var k=e(17045),A=e(14922);$.exports=function(){var l=A();return k(Number,{isNaN:l},{isNaN:function(){return Number.isNaN!==l}}),l}},64941:function($){$.exports=function(R){var e=typeof R;return R!==null&&(e==="object"||e==="function")}},10973:function($){var R=Object.prototype.toString;$.exports=function(e){var k;return R.call(e)==="[object Object]"&&((k=Object.getPrototypeOf(e))===null||k===Object.getPrototypeOf({}))}},18546:function($){$.exports=function(R){for(var e,k=R.length,A=0;A<k;A++)if(((e=R.charCodeAt(A))<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},89546:function($){$.exports=function(R){return typeof R=="string"&&(R=R.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(R)&&/[\dz]$/i.test(R)&&R.length>4))}},9187:function($,R,e){var k=e(86165),A=e(72077),l=e(92978),T=l("Object.prototype.toString"),x=e(57877)()&&typeof Symbol.toStringTag=="symbol",d=A(),s=l("Array.prototype.indexOf",!0)||function(a,i){for(var c=0;c<a.length;c+=1)if(a[c]===i)return c;return-1},t=l("String.prototype.slice"),o={},r=e(67295),n=Object.getPrototypeOf;x&&r&&n&&k(d,function(a){var i=new e.g[a];if(!(Symbol.toStringTag in i))throw new EvalError("this engine has support for Symbol.toStringTag, but "+a+" does not have the property! Please report this.");var c=n(i),h=r(c,Symbol.toStringTag);if(!h){var f=n(c);h=r(f,Symbol.toStringTag)}o[a]=h.get}),$.exports=function(a){if(!a||typeof a!="object")return!1;if(!x){var i=t(T(a),8,-1);return s(d,i)>-1}return!!r&&function(c){var h=!1;return k(o,function(f,b){if(!h)try{h=f.call(c)===b}catch{}}),h}(a)}},44517:function($){$.exports=function(){var R,e,k;function A(l,T){if(R)if(e){var x="var sharedChunk = {}; ("+R+")(sharedChunk); ("+e+")(sharedChunk);",d={};R(d),(k=T(d)).workerUrl=window.URL.createObjectURL(new Blob([x],{type:"text/javascript"}))}else e=T;else R=T}return A(0,function(l){function T(M,O){return M(O={exports:{}},O.exports),O.exports}var x="1.10.1",d=s;function s(M,O,Z,ae){this.cx=3*M,this.bx=3*(Z-M)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*O,this.by=3*(ae-O)-this.cy,this.ay=1-this.cy-this.by,this.p1x=M,this.p1y=ae,this.p2x=Z,this.p2y=ae}s.prototype.sampleCurveX=function(M){return((this.ax*M+this.bx)*M+this.cx)*M},s.prototype.sampleCurveY=function(M){return((this.ay*M+this.by)*M+this.cy)*M},s.prototype.sampleCurveDerivativeX=function(M){return(3*this.ax*M+2*this.bx)*M+this.cx},s.prototype.solveCurveX=function(M,O){var Z,ae,be,Ee,je;for(O===void 0&&(O=1e-6),be=M,je=0;je<8;je++){if(Ee=this.sampleCurveX(be)-M,Math.abs(Ee)<O)return be;var Qe=this.sampleCurveDerivativeX(be);if(Math.abs(Qe)<1e-6)break;be-=Ee/Qe}if((be=M)<(Z=0))return Z;if(be>(ae=1))return ae;for(;Z<ae;){if(Ee=this.sampleCurveX(be),Math.abs(Ee-M)<O)return be;M>Ee?Z=be:ae=be,be=.5*(ae-Z)+Z}return be},s.prototype.solve=function(M,O){return this.sampleCurveY(this.solveCurveX(M,O))};var t=o;function o(M,O){this.x=M,this.y=O}function r(M,O,Z,ae){var be=new d(M,O,Z,ae);return function(Ee){return be.solve(Ee)}}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(M){return this.clone()._add(M)},sub:function(M){return this.clone()._sub(M)},multByPoint:function(M){return this.clone()._multByPoint(M)},divByPoint:function(M){return this.clone()._divByPoint(M)},mult:function(M){return this.clone()._mult(M)},div:function(M){return this.clone()._div(M)},rotate:function(M){return this.clone()._rotate(M)},rotateAround:function(M,O){return this.clone()._rotateAround(M,O)},matMult:function(M){return this.clone()._matMult(M)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(M){return this.x===M.x&&this.y===M.y},dist:function(M){return Math.sqrt(this.distSqr(M))},distSqr:function(M){var O=M.x-this.x,Z=M.y-this.y;return O*O+Z*Z},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(M){return Math.atan2(this.y-M.y,this.x-M.x)},angleWith:function(M){return this.angleWithSep(M.x,M.y)},angleWithSep:function(M,O){return Math.atan2(this.x*O-this.y*M,this.x*M+this.y*O)},_matMult:function(M){var O=M[0]*this.x+M[1]*this.y,Z=M[2]*this.x+M[3]*this.y;return this.x=O,this.y=Z,this},_add:function(M){return this.x+=M.x,this.y+=M.y,this},_sub:function(M){return this.x-=M.x,this.y-=M.y,this},_mult:function(M){return this.x*=M,this.y*=M,this},_div:function(M){return this.x/=M,this.y/=M,this},_multByPoint:function(M){return this.x*=M.x,this.y*=M.y,this},_divByPoint:function(M){return this.x/=M.x,this.y/=M.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var M=this.y;return this.y=this.x,this.x=-M,this},_rotate:function(M){var O=Math.cos(M),Z=Math.sin(M),ae=O*this.x-Z*this.y,be=Z*this.x+O*this.y;return this.x=ae,this.y=be,this},_rotateAround:function(M,O){var Z=Math.cos(M),ae=Math.sin(M),be=O.x+Z*(this.x-O.x)-ae*(this.y-O.y),Ee=O.y+ae*(this.x-O.x)+Z*(this.y-O.y);return this.x=be,this.y=Ee,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(M){return M instanceof o?M:Array.isArray(M)?new o(M[0],M[1]):M};var n=r(.25,.1,.25,1);function a(M,O,Z){return Math.min(Z,Math.max(O,M))}function i(M,O,Z){var ae=Z-O,be=((M-O)%ae+ae)%ae+O;return be===O?Z:be}function c(M){for(var O=[],Z=arguments.length-1;Z-- >0;)O[Z]=arguments[Z+1];for(var ae=0,be=O;ae<be.length;ae+=1){var Ee=be[ae];for(var je in Ee)M[je]=Ee[je]}return M}var h=1;function f(){return h++}function b(){return function M(O){return O?(O^16*Math.random()>>O/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,M)}()}function v(M){return!!M&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(M)}function g(M,O){M.forEach(function(Z){O[Z]&&(O[Z]=O[Z].bind(O))})}function y(M,O){return M.indexOf(O,M.length-O.length)!==-1}function p(M,O,Z){var ae={};for(var be in M)ae[be]=O.call(Z||this,M[be],be,M);return ae}function m(M,O,Z){var ae={};for(var be in M)O.call(Z||this,M[be],be,M)&&(ae[be]=M[be]);return ae}function w(M){return Array.isArray(M)?M.map(w):typeof M=="object"&&M?p(M,w):M}var u={};function S(M){u[M]||(typeof console<"u"&&console.warn(M),u[M]=!0)}function _(M,O,Z){return(Z.y-M.y)*(O.x-M.x)>(O.y-M.y)*(Z.x-M.x)}function E(M){for(var O=0,Z=0,ae=M.length,be=ae-1,Ee=void 0,je=void 0;Z<ae;be=Z++)Ee=M[Z],O+=((je=M[be]).x-Ee.x)*(Ee.y+je.y);return O}function L(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function C(M){var O={};if(M.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ae,be,Ee,je){var Qe=Ee||je;return O[be]=!Qe||Qe.toLowerCase(),""}),O["max-age"]){var Z=parseInt(O["max-age"],10);isNaN(Z)?delete O["max-age"]:O["max-age"]=Z}return O}var P=null;function I(M){if(P==null){var O=M.navigator?M.navigator.userAgent:null;P=!!M.safari||!(!O||!(/\b(iPad|iPhone|iPod)\b/.test(O)||O.match("Safari")&&!O.match("Chrome")))}return P}function U(M){try{var O=self[M];return O.setItem("_mapbox_test_",1),O.removeItem("_mapbox_test_"),!0}catch{return!1}}var z,H,F,N,B=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),j=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,K=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,G={now:B,frame:function(M){var O=j(M);return{cancel:function(){return K(O)}}},getImageData:function(M,O){O===void 0&&(O=0);var Z=self.document.createElement("canvas"),ae=Z.getContext("2d");if(!ae)throw new Error("failed to create canvas 2d context");return Z.width=M.width,Z.height=M.height,ae.drawImage(M,0,0,M.width,M.height),ae.getImageData(-O,-O,M.width+2*O,M.height+2*O)},resolveURL:function(M){return z||(z=self.document.createElement("a")),z.href=M,z.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(H==null&&(H=self.matchMedia("(prefers-reduced-motion: reduce)")),H.matches)}},V={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},W={supported:!1,testSupport:function(M){!J&&N&&(X?ee(M):F=M)}},J=!1,X=!1;function ee(M){var O=M.createTexture();M.bindTexture(M.TEXTURE_2D,O);try{if(M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,N),M.isContextLost())return;W.supported=!0}catch{}M.deleteTexture(O),J=!0}self.document&&((N=self.document.createElement("img")).onload=function(){F&&ee(F),F=null,X=!0},N.onerror=function(){J=!0,F=null},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var re="01",ie=function(M,O){this._transformRequestFn=M,this._customAccessToken=O,this._createSkuToken()};function se(M){return M.indexOf("mapbox:")===0}ie.prototype._createSkuToken=function(){var M=function(){for(var O="",Z=0;Z<10;Z++)O+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",re,O].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=M.token,this._skuTokenExpiresAt=M.tokenExpiresAt},ie.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ie.prototype.transformRequest=function(M,O){return this._transformRequestFn&&this._transformRequestFn(M,O)||{url:M}},ie.prototype.normalizeStyleURL=function(M,O){if(!se(M))return M;var Z=he(M);return Z.path="/styles/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||O)},ie.prototype.normalizeGlyphsURL=function(M,O){if(!se(M))return M;var Z=he(M);return Z.path="/fonts/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||O)},ie.prototype.normalizeSourceURL=function(M,O){if(!se(M))return M;var Z=he(M);return Z.path="/v4/"+Z.authority+".json",Z.params.push("secure"),this._makeAPIURL(Z,this._customAccessToken||O)},ie.prototype.normalizeSpriteURL=function(M,O,Z,ae){var be=he(M);return se(M)?(be.path="/styles/v1"+be.path+"/sprite"+O+Z,this._makeAPIURL(be,this._customAccessToken||ae)):(be.path+=""+O+Z,ve(be))},ie.prototype.normalizeTileURL=function(M,O){if(this._isSkuTokenExpired()&&this._createSkuToken(),M&&!se(M))return M;var Z=he(M),ae=G.devicePixelRatio>=2||O===512?"@2x":"",be=W.supported?".webp":"$1";Z.path=Z.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+ae+be),Z.path=Z.path.replace(/^.+\/v4\//,"/"),Z.path="/v4"+Z.path;var Ee=this._customAccessToken||function(je){for(var Qe=0,lt=je;Qe<lt.length;Qe+=1){var _t=lt[Qe].match(/^access_token=(.*)$/);if(_t)return _t[1]}return null}(Z.params)||V.ACCESS_TOKEN;return V.REQUIRE_ACCESS_TOKEN&&Ee&&this._skuToken&&Z.params.push("sku="+this._skuToken),this._makeAPIURL(Z,Ee)},ie.prototype.canonicalizeTileURL=function(M,O){var Z=he(M);if(!Z.path.match(/(^\/v4\/)/)||!Z.path.match(/\.[\w]+$/))return M;var ae="mapbox://tiles/";ae+=Z.path.replace("/v4/","");var be=Z.params;return O&&(be=be.filter(function(Ee){return!Ee.match(/^access_token=/)})),be.length&&(ae+="?"+be.join("&")),ae},ie.prototype.canonicalizeTileset=function(M,O){for(var Z=!!O&&se(O),ae=[],be=0,Ee=M.tiles||[];be<Ee.length;be+=1){var je=Ee[be];ye(je)?ae.push(this.canonicalizeTileURL(je,Z)):ae.push(je)}return ae},ie.prototype._makeAPIURL=function(M,O){var Z="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ae=he(V.API_URL);if(M.protocol=ae.protocol,M.authority=ae.authority,ae.path!=="/"&&(M.path=""+ae.path+M.path),!V.REQUIRE_ACCESS_TOKEN)return ve(M);if(!(O=O||V.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Z);if(O[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Z);return M.params=M.params.filter(function(be){return be.indexOf("access_token")===-1}),M.params.push("access_token="+O),ve(M)};var fe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ye(M){return fe.test(M)}var ge=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function he(M){var O=M.match(ge);if(!O)throw new Error("Unable to parse URL object");return{protocol:O[1],authority:O[2],path:O[3]||"/",params:O[4]?O[4].split("&"):[]}}function ve(M){var O=M.params.length?"?"+M.params.join("&"):"";return M.protocol+"://"+M.authority+M.path+O}var Oe="mapbox.eventData";function xe(M){if(!M)return null;var O,Z=M.split(".");if(!Z||Z.length!==3)return null;try{return JSON.parse((O=Z[1],decodeURIComponent(self.atob(O).split("").map(function(ae){return"%"+("00"+ae.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var ke=function(M){this.type=M,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ke.prototype.getStorageKey=function(M){var O,Z,ae=xe(V.ACCESS_TOKEN);return O=ae&&ae.u?(Z=ae.u,self.btoa(encodeURIComponent(Z).replace(/%([0-9A-F]{2})/g,function(be,Ee){return String.fromCharCode(Number("0x"+Ee))}))):V.ACCESS_TOKEN||"",M?Oe+"."+M+":"+O:Oe+":"+O},ke.prototype.fetchEventData=function(){var M=U("localStorage"),O=this.getStorageKey(),Z=this.getStorageKey("uuid");if(M)try{var ae=self.localStorage.getItem(O);ae&&(this.eventData=JSON.parse(ae));var be=self.localStorage.getItem(Z);be&&(this.anonId=be)}catch{S("Unable to read from LocalStorage")}},ke.prototype.saveEventData=function(){var M=U("localStorage"),O=this.getStorageKey(),Z=this.getStorageKey("uuid");if(M)try{self.localStorage.setItem(Z,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(O,JSON.stringify(this.eventData))}catch{S("Unable to write to LocalStorage")}},ke.prototype.processRequests=function(M){},ke.prototype.postEvent=function(M,O,Z,ae){var be=this;if(V.EVENTS_URL){var Ee=he(V.EVENTS_URL);Ee.params.push("access_token="+(ae||V.ACCESS_TOKEN||""));var je={event:this.type,created:new Date(M).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:x,skuId:re,userId:this.anonId},Qe=O?c(je,O):je,lt={url:ve(Ee),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Qe])};this.pendingRequest=Ct(lt,function(_t){be.pendingRequest=null,Z(_t),be.saveEventData(),be.processRequests(ae)})}},ke.prototype.queueRequest=function(M,O){this.queue.push(M),this.processRequests(O)};var Me,Te,Q=function(M){function O(){M.call(this,"map.load"),this.success={},this.skuToken=""}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.postMapLoadEvent=function(Z,ae,be,Ee){this.skuToken=be,(V.EVENTS_URL&&Ee||V.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(je){return se(je)||ye(je)}))&&this.queueRequest({id:ae,timestamp:Date.now()},Ee)},O.prototype.processRequests=function(Z){var ae=this;if(!this.pendingRequest&&this.queue.length!==0){var be=this.queue.shift(),Ee=be.id,je=be.timestamp;Ee&&this.success[Ee]||(this.anonId||this.fetchEventData(),v(this.anonId)||(this.anonId=b()),this.postEvent(je,{skuToken:this.skuToken},function(Qe){Qe||Ee&&(ae.success[Ee]=!0)},Z))}},O}(ke),oe=function(M){function O(Z){M.call(this,"appUserTurnstile"),this._customAccessToken=Z}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.postTurnstileEvent=function(Z,ae){V.EVENTS_URL&&V.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(be){return se(be)||ye(be)})&&this.queueRequest(Date.now(),ae)},O.prototype.processRequests=function(Z){var ae=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var be=xe(V.ACCESS_TOKEN),Ee=be?be.u:V.ACCESS_TOKEN,je=Ee!==this.eventData.tokenU;v(this.anonId)||(this.anonId=b(),je=!0);var Qe=this.queue.shift();if(this.eventData.lastSuccess){var lt=new Date(this.eventData.lastSuccess),_t=new Date(Qe),Mt=(Qe-this.eventData.lastSuccess)/864e5;je=je||Mt>=1||Mt<-1||lt.getDate()!==_t.getDate()}else je=!0;if(!je)return this.processRequests();this.postEvent(Qe,{"enabled.telemetry":!1},function(Bt){Bt||(ae.eventData.lastSuccess=Qe,ae.eventData.tokenU=Ee)},Z)}},O}(ke),ce=new oe,me=ce.postTurnstileEvent.bind(ce),Ae=new Q,Ie=Ae.postMapLoadEvent.bind(Ae),Ce="mapbox-tiles",Re=500,le=50;function de(){self.caches&&!Me&&(Me=self.caches.open(Ce))}function _e(M,O,Z){if(de(),Me){var ae={status:O.status,statusText:O.statusText,headers:new self.Headers};O.headers.forEach(function(Ee,je){return ae.headers.set(je,Ee)});var be=C(O.headers.get("Cache-Control")||"");be["no-store"]||(be["max-age"]&&ae.headers.set("Expires",new Date(Z+1e3*be["max-age"]).toUTCString()),new Date(ae.headers.get("Expires")).getTime()-Z<42e4||function(Ee,je){if(Te===void 0)try{new Response(new ReadableStream),Te=!0}catch{Te=!1}Te?je(Ee.body):Ee.blob().then(je)}(O,function(Ee){var je=new self.Response(Ee,ae);de(),Me&&Me.then(function(Qe){return Qe.put(Fe(M.url),je)}).catch(function(Qe){return S(Qe.message)})}))}}function Fe(M){var O=M.indexOf("?");return O<0?M:M.slice(0,O)}function Ve(M,O){if(de(),!Me)return O(null);var Z=Fe(M.url);Me.then(function(ae){ae.match(Z).then(function(be){var Ee=function(je){if(!je)return!1;var Qe=new Date(je.headers.get("Expires")||0),lt=C(je.headers.get("Cache-Control")||"");return Qe>Date.now()&&!lt["no-cache"]}(be);ae.delete(Z),Ee&&ae.put(Z,be.clone()),O(null,be,Ee)}).catch(O)}).catch(O)}var He,nt=1/0;function tt(){return He==null&&(He=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),He}var ot={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ot);var dt=function(M){function O(Z,ae,be){ae===401&&ye(be)&&(Z+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),M.call(this,Z),this.status=ae,this.url=be,this.name=this.constructor.name,this.message=Z}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},O}(Error),kt=L()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href};function mt(M,O){var Z,ae=new self.AbortController,be=new self.Request(M.url,{method:M.method||"GET",body:M.body,credentials:M.credentials,headers:M.headers,referrer:kt(),signal:ae.signal}),Ee=!1,je=!1,Qe=(Z=be.url).indexOf("sku=")>0&&ye(Z);M.type==="json"&&be.headers.set("Accept","application/json");var lt=function(Mt,Bt,qt){if(!je){if(Mt&&Mt.message!=="SecurityError"&&S(Mt),Bt&&qt)return _t(Bt);var Vt=Date.now();self.fetch(be).then(function(rn){if(rn.ok){var xn=Qe?rn.clone():null;return _t(rn,xn,Vt)}return O(new dt(rn.statusText,rn.status,M.url))}).catch(function(rn){rn.code!==20&&O(new Error(rn.message))})}},_t=function(Mt,Bt,qt){(M.type==="arrayBuffer"?Mt.arrayBuffer():M.type==="json"?Mt.json():Mt.text()).then(function(Vt){je||(Bt&&qt&&_e(be,Bt,qt),Ee=!0,O(null,Vt,Mt.headers.get("Cache-Control"),Mt.headers.get("Expires")))}).catch(function(Vt){je||O(new Error(Vt.message))})};return Qe?Ve(be,lt):lt(null,null),{cancel:function(){je=!0,Ee||ae.abort()}}}var wt=function(M,O){if(Z=M.url,!(/^file:/.test(Z)||/^file:/.test(kt())&&!/^\w+:/.test(Z))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return mt(M,O);if(L()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",M,O,void 0,!0)}var Z;return function(ae,be){var Ee=new self.XMLHttpRequest;for(var je in Ee.open(ae.method||"GET",ae.url,!0),ae.type==="arrayBuffer"&&(Ee.responseType="arraybuffer"),ae.headers)Ee.setRequestHeader(je,ae.headers[je]);return ae.type==="json"&&(Ee.responseType="text",Ee.setRequestHeader("Accept","application/json")),Ee.withCredentials=ae.credentials==="include",Ee.onerror=function(){be(new Error(Ee.statusText))},Ee.onload=function(){if((Ee.status>=200&&Ee.status<300||Ee.status===0)&&Ee.response!==null){var Qe=Ee.response;if(ae.type==="json")try{Qe=JSON.parse(Ee.response)}catch(lt){return be(lt)}be(null,Qe,Ee.getResponseHeader("Cache-Control"),Ee.getResponseHeader("Expires"))}else be(new dt(Ee.statusText,Ee.status,ae.url))},Ee.send(ae.body),{cancel:function(){return Ee.abort()}}}(M,O)},Lt=function(M,O){return wt(c(M,{type:"arrayBuffer"}),O)},Ct=function(M,O){return wt(c(M,{method:"POST"}),O)},It,Ut;It=[],Ut=0;var Rt=function(M,O){if(W.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),Ut>=V.MAX_PARALLEL_IMAGE_REQUESTS){var Z={requestParameters:M,callback:O,cancelled:!1,cancel:function(){this.cancelled=!0}};return It.push(Z),Z}Ut++;var ae=!1,be=function(){if(!ae)for(ae=!0,Ut--;It.length&&Ut<V.MAX_PARALLEL_IMAGE_REQUESTS;){var je=It.shift(),Qe=je.requestParameters,lt=je.callback;je.cancelled||(je.cancel=Rt(Qe,lt).cancel)}},Ee=Lt(M,function(je,Qe,lt,_t){be(),je?O(je):Qe&&(tt()?function(Mt,Bt){var qt=new self.Blob([new Uint8Array(Mt)],{type:"image/png"});self.createImageBitmap(qt).then(function(Vt){Bt(null,Vt)}).catch(function(Vt){Bt(new Error("Could not load image because of "+Vt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Qe,O):function(Mt,Bt,qt,Vt){var rn=new self.Image,xn=self.URL;rn.onload=function(){Bt(null,rn),xn.revokeObjectURL(rn.src)},rn.onerror=function(){return Bt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var In=new self.Blob([new Uint8Array(Mt)],{type:"image/png"});rn.cacheControl=qt,rn.expires=Vt,rn.src=Mt.byteLength?xn.createObjectURL(In):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Qe,O,lt,_t))});return{cancel:function(){Ee.cancel(),be()}}};function Ge(M,O,Z){Z[M]&&Z[M].indexOf(O)!==-1||(Z[M]=Z[M]||[],Z[M].push(O))}function We(M,O,Z){if(Z&&Z[M]){var ae=Z[M].indexOf(O);ae!==-1&&Z[M].splice(ae,1)}}var Be=function(M,O){O===void 0&&(O={}),c(this,O),this.type=M},Ye=function(M){function O(Z,ae){ae===void 0&&(ae={}),M.call(this,"error",c({error:Z},ae))}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(Be),rt=function(){};rt.prototype.on=function(M,O){return this._listeners=this._listeners||{},Ge(M,O,this._listeners),this},rt.prototype.off=function(M,O){return We(M,O,this._listeners),We(M,O,this._oneTimeListeners),this},rt.prototype.once=function(M,O){return this._oneTimeListeners=this._oneTimeListeners||{},Ge(M,O,this._oneTimeListeners),this},rt.prototype.fire=function(M,O){typeof M=="string"&&(M=new Be(M,O||{}));var Z=M.type;if(this.listens(Z)){M.target=this;for(var ae=0,be=this._listeners&&this._listeners[Z]?this._listeners[Z].slice():[];ae<be.length;ae+=1)be[ae].call(this,M);for(var Ee=0,je=this._oneTimeListeners&&this._oneTimeListeners[Z]?this._oneTimeListeners[Z].slice():[];Ee<je.length;Ee+=1){var Qe=je[Ee];We(Z,Qe,this._oneTimeListeners),Qe.call(this,M)}var lt=this._eventedParent;lt&&(c(M,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),lt.fire(M))}else M instanceof Ye&&console.error(M.error);return this},rt.prototype.listens=function(M){return this._listeners&&this._listeners[M]&&this._listeners[M].length>0||this._oneTimeListeners&&this._oneTimeListeners[M]&&this._oneTimeListeners[M].length>0||this._eventedParent&&this._eventedParent.listens(M)},rt.prototype.setEventedParent=function(M,O){return this._eventedParent=M,this._eventedParentData=O,this};var Se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ze=function(M,O,Z,ae){this.message=(M?M+": ":"")+Z,ae&&(this.identifier=ae),O!=null&&O.__line__&&(this.line=O.__line__)};function Ke(M){var O=M.key,Z=M.value;return Z?[new ze(O,Z,"constants have been deprecated as of v8")]:[]}function st(M){for(var O=[],Z=arguments.length-1;Z-- >0;)O[Z]=arguments[Z+1];for(var ae=0,be=O;ae<be.length;ae+=1){var Ee=be[ae];for(var je in Ee)M[je]=Ee[je]}return M}function ct(M){return M instanceof Number||M instanceof String||M instanceof Boolean?M.valueOf():M}function Tt(M){if(Array.isArray(M))return M.map(Tt);if(M instanceof Object&&!(M instanceof Number||M instanceof String||M instanceof Boolean)){var O={};for(var Z in M)O[Z]=Tt(M[Z]);return O}return ct(M)}var Et=function(M){function O(Z,ae){M.call(this,ae),this.message=ae,this.key=Z}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(Error),At=function(M,O){O===void 0&&(O=[]),this.parent=M,this.bindings={};for(var Z=0,ae=O;Z<ae.length;Z+=1){var be=ae[Z],Ee=be[0],je=be[1];this.bindings[Ee]=je}};At.prototype.concat=function(M){return new At(this,M)},At.prototype.get=function(M){if(this.bindings[M])return this.bindings[M];if(this.parent)return this.parent.get(M);throw new Error(M+" not found in scope.")},At.prototype.has=function(M){return!!this.bindings[M]||!!this.parent&&this.parent.has(M)};var ht={kind:"null"},pt={kind:"number"},gt={kind:"string"},Pt={kind:"boolean"},Ot={kind:"color"},Ht={kind:"object"},jt={kind:"value"},Nt={kind:"collator"},Gt={kind:"formatted"},un={kind:"resolvedImage"};function pn(M,O){return{kind:"array",itemType:M,N:O}}function Kt(M){if(M.kind==="array"){var O=Kt(M.itemType);return typeof M.N=="number"?"array<"+O+", "+M.N+">":M.itemType.kind==="value"?"array":"array<"+O+">"}return M.kind}var wn=[ht,pt,gt,Pt,Ot,Gt,Ht,pn(jt),un];function Bn(M,O){if(O.kind==="error")return null;if(M.kind==="array"){if(O.kind==="array"&&(O.N===0&&O.itemType.kind==="value"||!Bn(M.itemType,O.itemType))&&(typeof M.N!="number"||M.N===O.N))return null}else{if(M.kind===O.kind)return null;if(M.kind==="value"){for(var Z=0,ae=wn;Z<ae.length;Z+=1)if(!Bn(ae[Z],O))return null}}return"Expected "+Kt(M)+" but found "+Kt(O)+" instead."}function vn(M,O){return O.some(function(Z){return Z.kind===M.kind})}function cn(M,O){return O.some(function(Z){return Z==="null"?M===null:Z==="array"?Array.isArray(M):Z==="object"?M&&!Array.isArray(M)&&typeof M=="object":Z===typeof M})}var dn=T(function(M,O){var Z={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ae(lt){return(lt=Math.round(lt))<0?0:lt>255?255:lt}function be(lt){return lt<0?0:lt>1?1:lt}function Ee(lt){return lt[lt.length-1]==="%"?ae(parseFloat(lt)/100*255):ae(parseInt(lt))}function je(lt){return lt[lt.length-1]==="%"?be(parseFloat(lt)/100):be(parseFloat(lt))}function Qe(lt,_t,Mt){return Mt<0?Mt+=1:Mt>1&&(Mt-=1),6*Mt<1?lt+(_t-lt)*Mt*6:2*Mt<1?_t:3*Mt<2?lt+(_t-lt)*(2/3-Mt)*6:lt}try{O.parseCSSColor=function(lt){var _t,Mt=lt.replace(/ /g,"").toLowerCase();if(Mt in Z)return Z[Mt].slice();if(Mt[0]==="#")return Mt.length===4?(_t=parseInt(Mt.substr(1),16))>=0&&_t<=4095?[(3840&_t)>>4|(3840&_t)>>8,240&_t|(240&_t)>>4,15&_t|(15&_t)<<4,1]:null:Mt.length===7&&(_t=parseInt(Mt.substr(1),16))>=0&&_t<=16777215?[(16711680&_t)>>16,(65280&_t)>>8,255&_t,1]:null;var Bt=Mt.indexOf("("),qt=Mt.indexOf(")");if(Bt!==-1&&qt+1===Mt.length){var Vt=Mt.substr(0,Bt),rn=Mt.substr(Bt+1,qt-(Bt+1)).split(","),xn=1;switch(Vt){case"rgba":if(rn.length!==4)return null;xn=je(rn.pop());case"rgb":return rn.length!==3?null:[Ee(rn[0]),Ee(rn[1]),Ee(rn[2]),xn];case"hsla":if(rn.length!==4)return null;xn=je(rn.pop());case"hsl":if(rn.length!==3)return null;var In=(parseFloat(rn[0])%360+360)%360/360,On=je(rn[1]),jn=je(rn[2]),Vn=jn<=.5?jn*(On+1):jn+On-jn*On,Yn=2*jn-Vn;return[ae(255*Qe(Yn,Vn,In+1/3)),ae(255*Qe(Yn,Vn,In)),ae(255*Qe(Yn,Vn,In-1/3)),xn];default:return null}}return null}}catch{}}),sn=dn.parseCSSColor,hn=function(M,O,Z,ae){ae===void 0&&(ae=1),this.r=M,this.g=O,this.b=Z,this.a=ae};hn.parse=function(M){if(M){if(M instanceof hn)return M;if(typeof M=="string"){var O=sn(M);if(O)return new hn(O[0]/255*O[3],O[1]/255*O[3],O[2]/255*O[3],O[3])}}},hn.prototype.toString=function(){var M=this.toArray(),O=M[0],Z=M[1],ae=M[2],be=M[3];return"rgba("+Math.round(O)+","+Math.round(Z)+","+Math.round(ae)+","+be+")"},hn.prototype.toArray=function(){var M=this,O=M.r,Z=M.g,ae=M.b,be=M.a;return be===0?[0,0,0,0]:[255*O/be,255*Z/be,255*ae/be,be]},hn.black=new hn(0,0,0,1),hn.white=new hn(1,1,1,1),hn.transparent=new hn(0,0,0,0),hn.red=new hn(1,0,0,1);var En=function(M,O,Z){this.sensitivity=M?O?"variant":"case":O?"accent":"base",this.locale=Z,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};En.prototype.compare=function(M,O){return this.collator.compare(M,O)},En.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Mn=function(M,O,Z,ae,be){this.text=M,this.image=O,this.scale=Z,this.fontStack=ae,this.textColor=be},Rn=function(M){this.sections=M};Rn.fromString=function(M){return new Rn([new Mn(M,null,null,null,null)])},Rn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(M){return M.text.length!==0||M.image&&M.image.name.length!==0})},Rn.factory=function(M){return M instanceof Rn?M:Rn.fromString(M)},Rn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(M){return M.text}).join("")},Rn.prototype.serialize=function(){for(var M=["format"],O=0,Z=this.sections;O<Z.length;O+=1){var ae=Z[O];if(ae.image)M.push(["image",ae.image.name]);else{M.push(ae.text);var be={};ae.fontStack&&(be["text-font"]=["literal",ae.fontStack.split(",")]),ae.scale&&(be["font-scale"]=ae.scale),ae.textColor&&(be["text-color"]=["rgba"].concat(ae.textColor.toArray())),M.push(be)}}return M};var Nn=function(M){this.name=M.name,this.available=M.available};function Fn(M,O,Z,ae){return typeof M=="number"&&M>=0&&M<=255&&typeof O=="number"&&O>=0&&O<=255&&typeof Z=="number"&&Z>=0&&Z<=255?ae===void 0||typeof ae=="number"&&ae>=0&&ae<=1?null:"Invalid rgba value ["+[M,O,Z,ae].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof ae=="number"?[M,O,Z,ae]:[M,O,Z]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function rr(M){if(M===null||typeof M=="string"||typeof M=="boolean"||typeof M=="number"||M instanceof hn||M instanceof En||M instanceof Rn||M instanceof Nn)return!0;if(Array.isArray(M)){for(var O=0,Z=M;O<Z.length;O+=1)if(!rr(Z[O]))return!1;return!0}if(typeof M=="object"){for(var ae in M)if(!rr(M[ae]))return!1;return!0}return!1}function $n(M){if(M===null)return ht;if(typeof M=="string")return gt;if(typeof M=="boolean")return Pt;if(typeof M=="number")return pt;if(M instanceof hn)return Ot;if(M instanceof En)return Nt;if(M instanceof Rn)return Gt;if(M instanceof Nn)return un;if(Array.isArray(M)){for(var O,Z=M.length,ae=0,be=M;ae<be.length;ae+=1){var Ee=$n(be[ae]);if(O){if(O===Ee)continue;O=jt;break}O=Ee}return pn(O||jt,Z)}return Ht}function mr(M){var O=typeof M;return M===null?"":O==="string"||O==="number"||O==="boolean"?String(M):M instanceof hn||M instanceof Rn||M instanceof Nn?M.toString():JSON.stringify(M)}Nn.prototype.toString=function(){return this.name},Nn.fromString=function(M){return M?new Nn({name:M,available:!1}):null},Nn.prototype.serialize=function(){return["image",this.name]};var fr=function(M,O){this.type=M,this.value=O};fr.parse=function(M,O){if(M.length!==2)return O.error("'literal' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(!rr(M[1]))return O.error("invalid value");var Z=M[1],ae=$n(Z),be=O.expectedType;return ae.kind!=="array"||ae.N!==0||!be||be.kind!=="array"||typeof be.N=="number"&&be.N!==0||(ae=be),new fr(ae,Z)},fr.prototype.evaluate=function(){return this.value},fr.prototype.eachChild=function(){},fr.prototype.outputDefined=function(){return!0},fr.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof hn?["rgba"].concat(this.value.toArray()):this.value instanceof Rn?this.value.serialize():this.value};var Zn=function(M){this.name="ExpressionEvaluationError",this.message=M};Zn.prototype.toJSON=function(){return this.message};var qn={string:gt,number:pt,boolean:Pt,object:Ht},ur=function(M,O){this.type=M,this.args=O};ur.parse=function(M,O){if(M.length<2)return O.error("Expected at least one argument.");var Z,ae=1,be=M[0];if(be==="array"){var Ee,je;if(M.length>2){var Qe=M[1];if(typeof Qe!="string"||!(Qe in qn)||Qe==="object")return O.error('The item type argument of "array" must be one of string, number, boolean',1);Ee=qn[Qe],ae++}else Ee=jt;if(M.length>3){if(M[2]!==null&&(typeof M[2]!="number"||M[2]<0||M[2]!==Math.floor(M[2])))return O.error('The length argument to "array" must be a positive integer literal',2);je=M[2],ae++}Z=pn(Ee,je)}else Z=qn[be];for(var lt=[];ae<M.length;ae++){var _t=O.parse(M[ae],ae,jt);if(!_t)return null;lt.push(_t)}return new ur(Z,lt)},ur.prototype.evaluate=function(M){for(var O=0;O<this.args.length;O++){var Z=this.args[O].evaluate(M);if(!Bn(this.type,$n(Z)))return Z;if(O===this.args.length-1)throw new Zn("Expected value to be of type "+Kt(this.type)+", but found "+Kt($n(Z))+" instead.")}return null},ur.prototype.eachChild=function(M){this.args.forEach(M)},ur.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},ur.prototype.serialize=function(){var M=this.type,O=[M.kind];if(M.kind==="array"){var Z=M.itemType;if(Z.kind==="string"||Z.kind==="number"||Z.kind==="boolean"){O.push(Z.kind);var ae=M.N;(typeof ae=="number"||this.args.length>1)&&O.push(ae)}}return O.concat(this.args.map(function(be){return be.serialize()}))};var Zt=function(M){this.type=Gt,this.sections=M};Zt.parse=function(M,O){if(M.length<2)return O.error("Expected at least one argument.");var Z=M[1];if(!Array.isArray(Z)&&typeof Z=="object")return O.error("First argument must be an image or text section.");for(var ae=[],be=!1,Ee=1;Ee<=M.length-1;++Ee){var je=M[Ee];if(be&&typeof je=="object"&&!Array.isArray(je)){be=!1;var Qe=null;if(je["font-scale"]&&!(Qe=O.parse(je["font-scale"],1,pt)))return null;var lt=null;if(je["text-font"]&&!(lt=O.parse(je["text-font"],1,pn(gt))))return null;var _t=null;if(je["text-color"]&&!(_t=O.parse(je["text-color"],1,Ot)))return null;var Mt=ae[ae.length-1];Mt.scale=Qe,Mt.font=lt,Mt.textColor=_t}else{var Bt=O.parse(M[Ee],1,jt);if(!Bt)return null;var qt=Bt.type.kind;if(qt!=="string"&&qt!=="value"&&qt!=="null"&&qt!=="resolvedImage")return O.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");be=!0,ae.push({content:Bt,scale:null,font:null,textColor:null})}}return new Zt(ae)},Zt.prototype.evaluate=function(M){return new Rn(this.sections.map(function(O){var Z=O.content.evaluate(M);return $n(Z)===un?new Mn("",Z,null,null,null):new Mn(mr(Z),null,O.scale?O.scale.evaluate(M):null,O.font?O.font.evaluate(M).join(","):null,O.textColor?O.textColor.evaluate(M):null)}))},Zt.prototype.eachChild=function(M){for(var O=0,Z=this.sections;O<Z.length;O+=1){var ae=Z[O];M(ae.content),ae.scale&&M(ae.scale),ae.font&&M(ae.font),ae.textColor&&M(ae.textColor)}},Zt.prototype.outputDefined=function(){return!1},Zt.prototype.serialize=function(){for(var M=["format"],O=0,Z=this.sections;O<Z.length;O+=1){var ae=Z[O];M.push(ae.content.serialize());var be={};ae.scale&&(be["font-scale"]=ae.scale.serialize()),ae.font&&(be["text-font"]=ae.font.serialize()),ae.textColor&&(be["text-color"]=ae.textColor.serialize()),M.push(be)}return M};var nn=function(M){this.type=un,this.input=M};nn.parse=function(M,O){if(M.length!==2)return O.error("Expected two arguments.");var Z=O.parse(M[1],1,gt);return Z?new nn(Z):O.error("No image name provided.")},nn.prototype.evaluate=function(M){var O=this.input.evaluate(M),Z=Nn.fromString(O);return Z&&M.availableImages&&(Z.available=M.availableImages.indexOf(O)>-1),Z},nn.prototype.eachChild=function(M){M(this.input)},nn.prototype.outputDefined=function(){return!1},nn.prototype.serialize=function(){return["image",this.input.serialize()]};var zn={"to-boolean":Pt,"to-color":Ot,"to-number":pt,"to-string":gt},_n=function(M,O){this.type=M,this.args=O};_n.parse=function(M,O){if(M.length<2)return O.error("Expected at least one argument.");var Z=M[0];if((Z==="to-boolean"||Z==="to-string")&&M.length!==2)return O.error("Expected one argument.");for(var ae=zn[Z],be=[],Ee=1;Ee<M.length;Ee++){var je=O.parse(M[Ee],Ee,jt);if(!je)return null;be.push(je)}return new _n(ae,be)},_n.prototype.evaluate=function(M){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(M));if(this.type.kind==="color"){for(var O,Z,ae=0,be=this.args;ae<be.length;ae+=1){if(Z=null,(O=be[ae].evaluate(M))instanceof hn)return O;if(typeof O=="string"){var Ee=M.parseColor(O);if(Ee)return Ee}else if(Array.isArray(O)&&!(Z=O.length<3||O.length>4?"Invalid rbga value "+JSON.stringify(O)+": expected an array containing either three or four numeric values.":Fn(O[0],O[1],O[2],O[3])))return new hn(O[0]/255,O[1]/255,O[2]/255,O[3])}throw new Zn(Z||"Could not parse color from value '"+(typeof O=="string"?O:String(JSON.stringify(O)))+"'")}if(this.type.kind==="number"){for(var je=null,Qe=0,lt=this.args;Qe<lt.length;Qe+=1){if((je=lt[Qe].evaluate(M))===null)return 0;var _t=Number(je);if(!isNaN(_t))return _t}throw new Zn("Could not convert "+JSON.stringify(je)+" to number.")}return this.type.kind==="formatted"?Rn.fromString(mr(this.args[0].evaluate(M))):this.type.kind==="resolvedImage"?Nn.fromString(mr(this.args[0].evaluate(M))):mr(this.args[0].evaluate(M))},_n.prototype.eachChild=function(M){this.args.forEach(M)},_n.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},_n.prototype.serialize=function(){if(this.type.kind==="formatted")return new Zt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new nn(this.args[0]).serialize();var M=["to-"+this.type.kind];return this.eachChild(function(O){M.push(O.serialize())}),M};var Cn=["Unknown","Point","LineString","Polygon"],Un=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Un.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Un.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Cn[this.feature.type]:this.feature.type:null},Un.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Un.prototype.canonicalID=function(){return this.canonical},Un.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Un.prototype.parseColor=function(M){var O=this._parseColorCache[M];return O||(O=this._parseColorCache[M]=hn.parse(M)),O};var Gn=function(M,O,Z,ae){this.name=M,this.type=O,this._evaluate=Z,this.args=ae};Gn.prototype.evaluate=function(M){return this._evaluate(M,this.args)},Gn.prototype.eachChild=function(M){this.args.forEach(M)},Gn.prototype.outputDefined=function(){return!1},Gn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(M){return M.serialize()}))},Gn.parse=function(M,O){var Z,ae=M[0],be=Gn.definitions[ae];if(!be)return O.error('Unknown expression "'+ae+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Ee=Array.isArray(be)?be[0]:be.type,je=Array.isArray(be)?[[be[1],be[2]]]:be.overloads,Qe=je.filter(function(jr){var Pr=jr[0];return!Array.isArray(Pr)||Pr.length===M.length-1}),lt=null,_t=0,Mt=Qe;_t<Mt.length;_t+=1){var Bt=Mt[_t],qt=Bt[0],Vt=Bt[1];lt=new ir(O.registry,O.path,null,O.scope);for(var rn=[],xn=!1,In=1;In<M.length;In++){var On=M[In],jn=Array.isArray(qt)?qt[In-1]:qt.type,Vn=lt.parse(On,1+rn.length,jn);if(!Vn){xn=!0;break}rn.push(Vn)}if(!xn)if(Array.isArray(qt)&&qt.length!==rn.length)lt.error("Expected "+qt.length+" arguments, but found "+rn.length+" instead.");else{for(var Yn=0;Yn<rn.length;Yn++){var Qn=Array.isArray(qt)?qt[Yn]:qt.type,tr=rn[Yn];lt.concat(Yn+1).checkSubtype(Qn,tr.type)}if(lt.errors.length===0)return new Gn(ae,Ee,Vt,rn)}}if(Qe.length===1)(Z=O.errors).push.apply(Z,lt.errors);else{for(var xr=(Qe.length?Qe:je).map(function(jr){return Pr=jr[0],Array.isArray(Pr)?"("+Pr.map(Kt).join(", ")+")":"("+Kt(Pr.type)+"...)";var Pr}).join(" | "),pr=[],Tr=1;Tr<M.length;Tr++){var Er=O.parse(M[Tr],1+pr.length);if(!Er)return null;pr.push(Kt(Er.type))}O.error("Expected arguments of type "+xr+", but found ("+pr.join(", ")+") instead.")}return null},Gn.register=function(M,O){for(var Z in Gn.definitions=O,O)M[Z]=Gn};var ar=function(M,O,Z){this.type=Nt,this.locale=Z,this.caseSensitive=M,this.diacriticSensitive=O};ar.parse=function(M,O){if(M.length!==2)return O.error("Expected one argument.");var Z=M[1];if(typeof Z!="object"||Array.isArray(Z))return O.error("Collator options argument must be an object.");var ae=O.parse(Z["case-sensitive"]!==void 0&&Z["case-sensitive"],1,Pt);if(!ae)return null;var be=O.parse(Z["diacritic-sensitive"]!==void 0&&Z["diacritic-sensitive"],1,Pt);if(!be)return null;var Ee=null;return Z.locale&&!(Ee=O.parse(Z.locale,1,gt))?null:new ar(ae,be,Ee)},ar.prototype.evaluate=function(M){return new En(this.caseSensitive.evaluate(M),this.diacriticSensitive.evaluate(M),this.locale?this.locale.evaluate(M):null)},ar.prototype.eachChild=function(M){M(this.caseSensitive),M(this.diacriticSensitive),this.locale&&M(this.locale)},ar.prototype.outputDefined=function(){return!1},ar.prototype.serialize=function(){var M={};return M["case-sensitive"]=this.caseSensitive.serialize(),M["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(M.locale=this.locale.serialize()),["collator",M]};var yr=8192;function $t(M,O){M[0]=Math.min(M[0],O[0]),M[1]=Math.min(M[1],O[1]),M[2]=Math.max(M[2],O[0]),M[3]=Math.max(M[3],O[1])}function kn(M,O){return!(M[0]<=O[0]||M[2]>=O[2]||M[1]<=O[1]||M[3]>=O[3])}function zt(M,O){var Z,ae=(180+M[0])/360,be=(Z=M[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Z*Math.PI/360)))/360),Ee=Math.pow(2,O.z);return[Math.round(ae*Ee*yr),Math.round(be*Ee*yr)]}function Wt(M,O,Z){return O[1]>M[1]!=Z[1]>M[1]&&M[0]<(Z[0]-O[0])*(M[1]-O[1])/(Z[1]-O[1])+O[0]}function tn(M,O){for(var Z=!1,ae=0,be=O.length;ae<be;ae++)for(var Ee=O[ae],je=0,Qe=Ee.length;je<Qe-1;je++){if(lt=M,_t=Ee[je],Mt=Ee[je+1],Bt=void 0,qt=void 0,Vt=void 0,rn=void 0,Bt=lt[0]-_t[0],qt=lt[1]-_t[1],Vt=lt[0]-Mt[0],rn=lt[1]-Mt[1],Bt*rn-Vt*qt==0&&Bt*Vt<=0&&qt*rn<=0)return!1;Wt(M,Ee[je],Ee[je+1])&&(Z=!Z)}var lt,_t,Mt,Bt,qt,Vt,rn;return Z}function Sn(M,O){for(var Z=0;Z<O.length;Z++)if(tn(M,O[Z]))return!0;return!1}function An(M,O,Z,ae){var be=M[0]-Z[0],Ee=M[1]-Z[1],je=O[0]-Z[0],Qe=O[1]-Z[1],lt=ae[0]-Z[0],_t=ae[1]-Z[1],Mt=be*_t-lt*Ee,Bt=je*_t-lt*Qe;return Mt>0&&Bt<0||Mt<0&&Bt>0}function Tn(M,O,Z){for(var ae=0,be=Z;ae<be.length;ae+=1)for(var Ee=be[ae],je=0;je<Ee.length-1;++je)if(Qe=M,lt=O,_t=Ee[je],Mt=Ee[je+1],Bt=void 0,qt=void 0,Vt=void 0,Vt=[lt[0]-Qe[0],lt[1]-Qe[1]],Bt=[Mt[0]-_t[0],Mt[1]-_t[1]],qt=Vt,Bt[0]*qt[1]-Bt[1]*qt[0]!=0&&An(Qe,lt,_t,Mt)&&An(_t,Mt,Qe,lt))return!0;var Qe,lt,_t,Mt,Bt,qt,Vt;return!1}function an(M,O){for(var Z=0;Z<M.length;++Z)if(!tn(M[Z],O))return!1;for(var ae=0;ae<M.length-1;++ae)if(Tn(M[ae],M[ae+1],O))return!1;return!0}function mn(M,O){for(var Z=0;Z<O.length;Z++)if(an(M,O[Z]))return!0;return!1}function on(M,O,Z){for(var ae=[],be=0;be<M.length;be++){for(var Ee=[],je=0;je<M[be].length;je++){var Qe=zt(M[be][je],Z);$t(O,Qe),Ee.push(Qe)}ae.push(Ee)}return ae}function fn(M,O,Z){for(var ae=[],be=0;be<M.length;be++){var Ee=on(M[be],O,Z);ae.push(Ee)}return ae}function yn(M,O,Z,ae){if(M[0]<Z[0]||M[0]>Z[2]){var be=.5*ae,Ee=M[0]-Z[0]>be?-ae:Z[0]-M[0]>be?ae:0;Ee===0&&(Ee=M[0]-Z[2]>be?-ae:Z[2]-M[0]>be?ae:0),M[0]+=Ee}$t(O,M)}function Ln(M,O,Z,ae){for(var be=Math.pow(2,ae.z)*yr,Ee=[ae.x*yr,ae.y*yr],je=[],Qe=0,lt=M;Qe<lt.length;Qe+=1)for(var _t=0,Mt=lt[Qe];_t<Mt.length;_t+=1){var Bt=Mt[_t],qt=[Bt.x+Ee[0],Bt.y+Ee[1]];yn(qt,O,Z,be),je.push(qt)}return je}function Hn(M,O,Z,ae){for(var be=Math.pow(2,ae.z)*yr,Ee=[ae.x*yr,ae.y*yr],je=[],Qe=0,lt=M;Qe<lt.length;Qe+=1){for(var _t=[],Mt=0,Bt=lt[Qe];Mt<Bt.length;Mt+=1){var qt=Bt[Mt],Vt=[qt.x+Ee[0],qt.y+Ee[1]];$t(O,Vt),_t.push(Vt)}je.push(_t)}if(O[2]-O[0]<=be/2){(jn=O)[0]=jn[1]=1/0,jn[2]=jn[3]=-1/0;for(var rn=0,xn=je;rn<xn.length;rn+=1)for(var In=0,On=xn[rn];In<On.length;In+=1)yn(On[In],O,Z,be)}var jn;return je}var Wn=function(M,O){this.type=Pt,this.geojson=M,this.geometries=O};function Kn(M){if(M instanceof Gn&&(M.name==="get"&&M.args.length===1||M.name==="feature-state"||M.name==="has"&&M.args.length===1||M.name==="properties"||M.name==="geometry-type"||M.name==="id"||/^filter-/.test(M.name))||M instanceof Wn)return!1;var O=!0;return M.eachChild(function(Z){O&&!Kn(Z)&&(O=!1)}),O}function nr(M){if(M instanceof Gn&&M.name==="feature-state")return!1;var O=!0;return M.eachChild(function(Z){O&&!nr(Z)&&(O=!1)}),O}function er(M,O){if(M instanceof Gn&&O.indexOf(M.name)>=0)return!1;var Z=!0;return M.eachChild(function(ae){Z&&!er(ae,O)&&(Z=!1)}),Z}Wn.parse=function(M,O){if(M.length!==2)return O.error("'within' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(rr(M[1])){var Z=M[1];if(Z.type==="FeatureCollection")for(var ae=0;ae<Z.features.length;++ae){var be=Z.features[ae].geometry.type;if(be==="Polygon"||be==="MultiPolygon")return new Wn(Z,Z.features[ae].geometry)}else if(Z.type==="Feature"){var Ee=Z.geometry.type;if(Ee==="Polygon"||Ee==="MultiPolygon")return new Wn(Z,Z.geometry)}else if(Z.type==="Polygon"||Z.type==="MultiPolygon")return new Wn(Z,Z)}return O.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Wn.prototype.evaluate=function(M){if(M.geometry()!=null&&M.canonicalID()!=null){if(M.geometryType()==="Point")return function(O,Z){var ae=[1/0,1/0,-1/0,-1/0],be=[1/0,1/0,-1/0,-1/0],Ee=O.canonicalID();if(Z.type==="Polygon"){var je=on(Z.coordinates,be,Ee),Qe=Ln(O.geometry(),ae,be,Ee);if(!kn(ae,be))return!1;for(var lt=0,_t=Qe;lt<_t.length;lt+=1)if(!tn(_t[lt],je))return!1}if(Z.type==="MultiPolygon"){var Mt=fn(Z.coordinates,be,Ee),Bt=Ln(O.geometry(),ae,be,Ee);if(!kn(ae,be))return!1;for(var qt=0,Vt=Bt;qt<Vt.length;qt+=1)if(!Sn(Vt[qt],Mt))return!1}return!0}(M,this.geometries);if(M.geometryType()==="LineString")return function(O,Z){var ae=[1/0,1/0,-1/0,-1/0],be=[1/0,1/0,-1/0,-1/0],Ee=O.canonicalID();if(Z.type==="Polygon"){var je=on(Z.coordinates,be,Ee),Qe=Hn(O.geometry(),ae,be,Ee);if(!kn(ae,be))return!1;for(var lt=0,_t=Qe;lt<_t.length;lt+=1)if(!an(_t[lt],je))return!1}if(Z.type==="MultiPolygon"){var Mt=fn(Z.coordinates,be,Ee),Bt=Hn(O.geometry(),ae,be,Ee);if(!kn(ae,be))return!1;for(var qt=0,Vt=Bt;qt<Vt.length;qt+=1)if(!mn(Vt[qt],Mt))return!1}return!0}(M,this.geometries)}return!1},Wn.prototype.eachChild=function(){},Wn.prototype.outputDefined=function(){return!0},Wn.prototype.serialize=function(){return["within",this.geojson]};var or=function(M,O){this.type=O.type,this.name=M,this.boundExpression=O};or.parse=function(M,O){if(M.length!==2||typeof M[1]!="string")return O.error("'var' expression requires exactly one string literal argument.");var Z=M[1];return O.scope.has(Z)?new or(Z,O.scope.get(Z)):O.error('Unknown variable "'+Z+'". Make sure "'+Z+'" has been bound in an enclosing "let" expression before using it.',1)},or.prototype.evaluate=function(M){return this.boundExpression.evaluate(M)},or.prototype.eachChild=function(){},or.prototype.outputDefined=function(){return!1},or.prototype.serialize=function(){return["var",this.name]};var ir=function(M,O,Z,ae,be){O===void 0&&(O=[]),ae===void 0&&(ae=new At),be===void 0&&(be=[]),this.registry=M,this.path=O,this.key=O.map(function(Ee){return"["+Ee+"]"}).join(""),this.scope=ae,this.errors=be,this.expectedType=Z};function lr(M){if(M instanceof or)return lr(M.boundExpression);if(M instanceof Gn&&M.name==="error"||M instanceof ar||M instanceof Wn)return!1;var O=M instanceof _n||M instanceof ur,Z=!0;return M.eachChild(function(ae){Z=O?Z&&lr(ae):Z&&ae instanceof fr}),!!Z&&Kn(M)&&er(M,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function br(M,O){for(var Z,ae,be=M.length-1,Ee=0,je=be,Qe=0;Ee<=je;)if(Z=M[Qe=Math.floor((Ee+je)/2)],ae=M[Qe+1],Z<=O){if(Qe===be||O<ae)return Qe;Ee=Qe+1}else{if(!(Z>O))throw new Zn("Input is not a number.");je=Qe-1}return 0}ir.prototype.parse=function(M,O,Z,ae,be){return be===void 0&&(be={}),O?this.concat(O,Z,ae)._parse(M,be):this._parse(M,be)},ir.prototype._parse=function(M,O){function Z(_t,Mt,Bt){return Bt==="assert"?new ur(Mt,[_t]):Bt==="coerce"?new _n(Mt,[_t]):_t}if(M!==null&&typeof M!="string"&&typeof M!="boolean"&&typeof M!="number"||(M=["literal",M]),Array.isArray(M)){if(M.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ae=M[0];if(typeof ae!="string")return this.error("Expression name must be a string, but found "+typeof ae+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var be=this.registry[ae];if(be){var Ee=be.parse(M,this);if(!Ee)return null;if(this.expectedType){var je=this.expectedType,Qe=Ee.type;if(je.kind!=="string"&&je.kind!=="number"&&je.kind!=="boolean"&&je.kind!=="object"&&je.kind!=="array"||Qe.kind!=="value")if(je.kind!=="color"&&je.kind!=="formatted"&&je.kind!=="resolvedImage"||Qe.kind!=="value"&&Qe.kind!=="string"){if(this.checkSubtype(je,Qe))return null}else Ee=Z(Ee,je,O.typeAnnotation||"coerce");else Ee=Z(Ee,je,O.typeAnnotation||"assert")}if(!(Ee instanceof fr)&&Ee.type.kind!=="resolvedImage"&&lr(Ee)){var lt=new Un;try{Ee=new fr(Ee.type,Ee.evaluate(lt))}catch(_t){return this.error(_t.message),null}}return Ee}return this.error('Unknown expression "'+ae+'". If you wanted a literal array, use ["literal", [...]].',0)}return M===void 0?this.error("'undefined' value invalid. Use null instead."):typeof M=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof M+" instead.")},ir.prototype.concat=function(M,O,Z){var ae=typeof M=="number"?this.path.concat(M):this.path,be=Z?this.scope.concat(Z):this.scope;return new ir(this.registry,ae,O||null,be,this.errors)},ir.prototype.error=function(M){for(var O=[],Z=arguments.length-1;Z-- >0;)O[Z]=arguments[Z+1];var ae=""+this.key+O.map(function(be){return"["+be+"]"}).join("");this.errors.push(new Et(ae,M))},ir.prototype.checkSubtype=function(M,O){var Z=Bn(M,O);return Z&&this.error(Z),Z};var Ur=function(M,O,Z){this.type=M,this.input=O,this.labels=[],this.outputs=[];for(var ae=0,be=Z;ae<be.length;ae+=1){var Ee=be[ae],je=Ee[0],Qe=Ee[1];this.labels.push(je),this.outputs.push(Qe)}};function Sr(M,O,Z){return M*(1-Z)+O*Z}Ur.parse=function(M,O){if(M.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return O.error("Expected an even number of arguments.");var Z=O.parse(M[1],1,pt);if(!Z)return null;var ae=[],be=null;O.expectedType&&O.expectedType.kind!=="value"&&(be=O.expectedType);for(var Ee=1;Ee<M.length;Ee+=2){var je=Ee===1?-1/0:M[Ee],Qe=M[Ee+1],lt=Ee,_t=Ee+1;if(typeof je!="number")return O.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',lt);if(ae.length&&ae[ae.length-1][0]>=je)return O.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',lt);var Mt=O.parse(Qe,_t,be);if(!Mt)return null;be=be||Mt.type,ae.push([je,Mt])}return new Ur(be,Z,ae)},Ur.prototype.evaluate=function(M){var O=this.labels,Z=this.outputs;if(O.length===1)return Z[0].evaluate(M);var ae=this.input.evaluate(M);if(ae<=O[0])return Z[0].evaluate(M);var be=O.length;return ae>=O[be-1]?Z[be-1].evaluate(M):Z[br(O,ae)].evaluate(M)},Ur.prototype.eachChild=function(M){M(this.input);for(var O=0,Z=this.outputs;O<Z.length;O+=1)M(Z[O])},Ur.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},Ur.prototype.serialize=function(){for(var M=["step",this.input.serialize()],O=0;O<this.labels.length;O++)O>0&&M.push(this.labels[O]),M.push(this.outputs[O].serialize());return M};var cr=Object.freeze({__proto__:null,number:Sr,color:function(M,O,Z){return new hn(Sr(M.r,O.r,Z),Sr(M.g,O.g,Z),Sr(M.b,O.b,Z),Sr(M.a,O.a,Z))},array:function(M,O,Z){return M.map(function(ae,be){return Sr(ae,O[be],Z)})}}),Lr=.95047,Rr=1.08883,li=4/29,Si=6/29,Oi=3*Si*Si,La=Math.PI/180,Vi=180/Math.PI;function vi(M){return M>.008856451679035631?Math.pow(M,.3333333333333333):M/Oi+li}function Ca(M){return M>Si?M*M*M:Oi*(M-li)}function io(M){return 255*(M<=.0031308?12.92*M:1.055*Math.pow(M,.4166666666666667)-.055)}function Yo(M){return(M/=255)<=.04045?M/12.92:Math.pow((M+.055)/1.055,2.4)}function Xo(M){var O=Yo(M.r),Z=Yo(M.g),ae=Yo(M.b),be=vi((.4124564*O+.3575761*Z+.1804375*ae)/Lr),Ee=vi((.2126729*O+.7151522*Z+.072175*ae)/1);return{l:116*Ee-16,a:500*(be-Ee),b:200*(Ee-vi((.0193339*O+.119192*Z+.9503041*ae)/Rr)),alpha:M.a}}function ll(M){var O=(M.l+16)/116,Z=isNaN(M.a)?O:O+M.a/500,ae=isNaN(M.b)?O:O-M.b/200;return O=1*Ca(O),Z=Lr*Ca(Z),ae=Rr*Ca(ae),new hn(io(3.2404542*Z-1.5371385*O-.4985314*ae),io(-.969266*Z+1.8760108*O+.041556*ae),io(.0556434*Z-.2040259*O+1.0572252*ae),M.alpha)}function Gs(M,O,Z){var ae=O-M;return M+Z*(ae>180||ae<-180?ae-360*Math.round(ae/360):ae)}var Jo={forward:Xo,reverse:ll,interpolate:function(M,O,Z){return{l:Sr(M.l,O.l,Z),a:Sr(M.a,O.a,Z),b:Sr(M.b,O.b,Z),alpha:Sr(M.alpha,O.alpha,Z)}}},ka={forward:function(M){var O=Xo(M),Z=O.l,ae=O.a,be=O.b,Ee=Math.atan2(be,ae)*Vi;return{h:Ee<0?Ee+360:Ee,c:Math.sqrt(ae*ae+be*be),l:Z,alpha:M.a}},reverse:function(M){var O=M.h*La,Z=M.c;return ll({l:M.l,a:Math.cos(O)*Z,b:Math.sin(O)*Z,alpha:M.alpha})},interpolate:function(M,O,Z){return{h:Gs(M.h,O.h,Z),c:Sr(M.c,O.c,Z),l:Sr(M.l,O.l,Z),alpha:Sr(M.alpha,O.alpha,Z)}}},Zs=Object.freeze({__proto__:null,lab:Jo,hcl:ka}),Di=function(M,O,Z,ae,be){this.type=M,this.operator=O,this.interpolation=Z,this.input=ae,this.labels=[],this.outputs=[];for(var Ee=0,je=be;Ee<je.length;Ee+=1){var Qe=je[Ee],lt=Qe[0],_t=Qe[1];this.labels.push(lt),this.outputs.push(_t)}};function hs(M,O,Z,ae){var be=ae-Z,Ee=M-Z;return be===0?0:O===1?Ee/be:(Math.pow(O,Ee)-1)/(Math.pow(O,be)-1)}Di.interpolationFactor=function(M,O,Z,ae){var be=0;if(M.name==="exponential")be=hs(O,M.base,Z,ae);else if(M.name==="linear")be=hs(O,1,Z,ae);else if(M.name==="cubic-bezier"){var Ee=M.controlPoints;be=new d(Ee[0],Ee[1],Ee[2],Ee[3]).solve(hs(O,1,Z,ae))}return be},Di.parse=function(M,O){var Z=M[0],ae=M[1],be=M[2],Ee=M.slice(3);if(!Array.isArray(ae)||ae.length===0)return O.error("Expected an interpolation type expression.",1);if(ae[0]==="linear")ae={name:"linear"};else if(ae[0]==="exponential"){var je=ae[1];if(typeof je!="number")return O.error("Exponential interpolation requires a numeric base.",1,1);ae={name:"exponential",base:je}}else{if(ae[0]!=="cubic-bezier")return O.error("Unknown interpolation type "+String(ae[0]),1,0);var Qe=ae.slice(1);if(Qe.length!==4||Qe.some(function(In){return typeof In!="number"||In<0||In>1}))return O.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ae={name:"cubic-bezier",controlPoints:Qe}}if(M.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return O.error("Expected an even number of arguments.");if(!(be=O.parse(be,2,pt)))return null;var lt=[],_t=null;Z==="interpolate-hcl"||Z==="interpolate-lab"?_t=Ot:O.expectedType&&O.expectedType.kind!=="value"&&(_t=O.expectedType);for(var Mt=0;Mt<Ee.length;Mt+=2){var Bt=Ee[Mt],qt=Ee[Mt+1],Vt=Mt+3,rn=Mt+4;if(typeof Bt!="number")return O.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Vt);if(lt.length&&lt[lt.length-1][0]>=Bt)return O.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Vt);var xn=O.parse(qt,rn,_t);if(!xn)return null;_t=_t||xn.type,lt.push([Bt,xn])}return _t.kind==="number"||_t.kind==="color"||_t.kind==="array"&&_t.itemType.kind==="number"&&typeof _t.N=="number"?new Di(_t,Z,ae,be,lt):O.error("Type "+Kt(_t)+" is not interpolatable.")},Di.prototype.evaluate=function(M){var O=this.labels,Z=this.outputs;if(O.length===1)return Z[0].evaluate(M);var ae=this.input.evaluate(M);if(ae<=O[0])return Z[0].evaluate(M);var be=O.length;if(ae>=O[be-1])return Z[be-1].evaluate(M);var Ee=br(O,ae),je=O[Ee],Qe=O[Ee+1],lt=Di.interpolationFactor(this.interpolation,ae,je,Qe),_t=Z[Ee].evaluate(M),Mt=Z[Ee+1].evaluate(M);return this.operator==="interpolate"?cr[this.type.kind.toLowerCase()](_t,Mt,lt):this.operator==="interpolate-hcl"?ka.reverse(ka.interpolate(ka.forward(_t),ka.forward(Mt),lt)):Jo.reverse(Jo.interpolate(Jo.forward(_t),Jo.forward(Mt),lt))},Di.prototype.eachChild=function(M){M(this.input);for(var O=0,Z=this.outputs;O<Z.length;O+=1)M(Z[O])},Di.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},Di.prototype.serialize=function(){var M;M=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var O=[this.operator,M,this.input.serialize()],Z=0;Z<this.labels.length;Z++)O.push(this.labels[Z],this.outputs[Z].serialize());return O};var ya=function(M,O){this.type=M,this.args=O};ya.parse=function(M,O){if(M.length<2)return O.error("Expectected at least one argument.");var Z=null,ae=O.expectedType;ae&&ae.kind!=="value"&&(Z=ae);for(var be=[],Ee=0,je=M.slice(1);Ee<je.length;Ee+=1){var Qe=je[Ee],lt=O.parse(Qe,1+be.length,Z,void 0,{typeAnnotation:"omit"});if(!lt)return null;Z=Z||lt.type,be.push(lt)}var _t=ae&&be.some(function(Mt){return Bn(ae,Mt.type)});return new ya(_t?jt:Z,be)},ya.prototype.evaluate=function(M){for(var O,Z=null,ae=0,be=0,Ee=this.args;be<Ee.length&&(ae++,(Z=Ee[be].evaluate(M))&&Z instanceof Nn&&!Z.available&&(O||(O=Z.name),Z=null,ae===this.args.length&&(Z=O)),Z===null);be+=1);return Z},ya.prototype.eachChild=function(M){this.args.forEach(M)},ya.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},ya.prototype.serialize=function(){var M=["coalesce"];return this.eachChild(function(O){M.push(O.serialize())}),M};var Aa=function(M,O){this.type=O.type,this.bindings=[].concat(M),this.result=O};Aa.prototype.evaluate=function(M){return this.result.evaluate(M)},Aa.prototype.eachChild=function(M){for(var O=0,Z=this.bindings;O<Z.length;O+=1)M(Z[O][1]);M(this.result)},Aa.parse=function(M,O){if(M.length<4)return O.error("Expected at least 3 arguments, but found "+(M.length-1)+" instead.");for(var Z=[],ae=1;ae<M.length-1;ae+=2){var be=M[ae];if(typeof be!="string")return O.error("Expected string, but found "+typeof be+" instead.",ae);if(/[^a-zA-Z0-9_]/.test(be))return O.error("Variable names must contain only alphanumeric characters or '_'.",ae);var Ee=O.parse(M[ae+1],ae+1);if(!Ee)return null;Z.push([be,Ee])}var je=O.parse(M[M.length-1],M.length-1,O.expectedType,Z);return je?new Aa(Z,je):null},Aa.prototype.outputDefined=function(){return this.result.outputDefined()},Aa.prototype.serialize=function(){for(var M=["let"],O=0,Z=this.bindings;O<Z.length;O+=1){var ae=Z[O],be=ae[0],Ee=ae[1];M.push(be,Ee.serialize())}return M.push(this.result.serialize()),M};var xo=function(M,O,Z){this.type=M,this.index=O,this.input=Z};xo.parse=function(M,O){if(M.length!==3)return O.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var Z=O.parse(M[1],1,pt),ae=O.parse(M[2],2,pn(O.expectedType||jt));if(!Z||!ae)return null;var be=ae.type;return new xo(be.itemType,Z,ae)},xo.prototype.evaluate=function(M){var O=this.index.evaluate(M),Z=this.input.evaluate(M);if(O<0)throw new Zn("Array index out of bounds: "+O+" < 0.");if(O>=Z.length)throw new Zn("Array index out of bounds: "+O+" > "+(Z.length-1)+".");if(O!==Math.floor(O))throw new Zn("Array index must be an integer, but found "+O+" instead.");return Z[O]},xo.prototype.eachChild=function(M){M(this.index),M(this.input)},xo.prototype.outputDefined=function(){return!1},xo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Qr=function(M,O){this.type=Pt,this.needle=M,this.haystack=O};Qr.parse=function(M,O){if(M.length!==3)return O.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var Z=O.parse(M[1],1,jt),ae=O.parse(M[2],2,jt);return Z&&ae?vn(Z.type,[Pt,gt,pt,ht,jt])?new Qr(Z,ae):O.error("Expected first argument to be of type boolean, string, number or null, but found "+Kt(Z.type)+" instead"):null},Qr.prototype.evaluate=function(M){var O=this.needle.evaluate(M),Z=this.haystack.evaluate(M);if(!Z)return!1;if(!cn(O,["boolean","string","number","null"]))throw new Zn("Expected first argument to be of type boolean, string, number or null, but found "+Kt($n(O))+" instead.");if(!cn(Z,["string","array"]))throw new Zn("Expected second argument to be of type array or string, but found "+Kt($n(Z))+" instead.");return Z.indexOf(O)>=0},Qr.prototype.eachChild=function(M){M(this.needle),M(this.haystack)},Qr.prototype.outputDefined=function(){return!0},Qr.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var bo=function(M,O,Z){this.type=pt,this.needle=M,this.haystack=O,this.fromIndex=Z};bo.parse=function(M,O){if(M.length<=2||M.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var Z=O.parse(M[1],1,jt),ae=O.parse(M[2],2,jt);if(!Z||!ae)return null;if(!vn(Z.type,[Pt,gt,pt,ht,jt]))return O.error("Expected first argument to be of type boolean, string, number or null, but found "+Kt(Z.type)+" instead");if(M.length===4){var be=O.parse(M[3],3,pt);return be?new bo(Z,ae,be):null}return new bo(Z,ae)},bo.prototype.evaluate=function(M){var O=this.needle.evaluate(M),Z=this.haystack.evaluate(M);if(!cn(O,["boolean","string","number","null"]))throw new Zn("Expected first argument to be of type boolean, string, number or null, but found "+Kt($n(O))+" instead.");if(!cn(Z,["string","array"]))throw new Zn("Expected second argument to be of type array or string, but found "+Kt($n(Z))+" instead.");if(this.fromIndex){var ae=this.fromIndex.evaluate(M);return Z.indexOf(O,ae)}return Z.indexOf(O)},bo.prototype.eachChild=function(M){M(this.needle),M(this.haystack),this.fromIndex&&M(this.fromIndex)},bo.prototype.outputDefined=function(){return!1},bo.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var M=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),M]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Pa=function(M,O,Z,ae,be,Ee){this.inputType=M,this.type=O,this.input=Z,this.cases=ae,this.outputs=be,this.otherwise=Ee};Pa.parse=function(M,O){if(M.length<5)return O.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if(M.length%2!=1)return O.error("Expected an even number of arguments.");var Z,ae;O.expectedType&&O.expectedType.kind!=="value"&&(ae=O.expectedType);for(var be={},Ee=[],je=2;je<M.length-1;je+=2){var Qe=M[je],lt=M[je+1];Array.isArray(Qe)||(Qe=[Qe]);var _t=O.concat(je);if(Qe.length===0)return _t.error("Expected at least one branch label.");for(var Mt=0,Bt=Qe;Mt<Bt.length;Mt+=1){var qt=Bt[Mt];if(typeof qt!="number"&&typeof qt!="string")return _t.error("Branch labels must be numbers or strings.");if(typeof qt=="number"&&Math.abs(qt)>Number.MAX_SAFE_INTEGER)return _t.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof qt=="number"&&Math.floor(qt)!==qt)return _t.error("Numeric branch labels must be integer values.");if(Z){if(_t.checkSubtype(Z,$n(qt)))return null}else Z=$n(qt);if(be[String(qt)]!==void 0)return _t.error("Branch labels must be unique.");be[String(qt)]=Ee.length}var Vt=O.parse(lt,je,ae);if(!Vt)return null;ae=ae||Vt.type,Ee.push(Vt)}var rn=O.parse(M[1],1,jt);if(!rn)return null;var xn=O.parse(M[M.length-1],M.length-1,ae);return xn?rn.type.kind!=="value"&&O.concat(1).checkSubtype(Z,rn.type)?null:new Pa(Z,ae,rn,be,Ee,xn):null},Pa.prototype.evaluate=function(M){var O=this.input.evaluate(M);return($n(O)===this.inputType&&this.outputs[this.cases[O]]||this.otherwise).evaluate(M)},Pa.prototype.eachChild=function(M){M(this.input),this.outputs.forEach(M),M(this.otherwise)},Pa.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})&&this.otherwise.outputDefined()},Pa.prototype.serialize=function(){for(var M=this,O=["match",this.input.serialize()],Z=[],ae={},be=0,Ee=Object.keys(this.cases).sort();be<Ee.length;be+=1){var je=Ee[be];(Bt=ae[this.cases[je]])===void 0?(ae[this.cases[je]]=Z.length,Z.push([this.cases[je],[je]])):Z[Bt][1].push(je)}for(var Qe=function(Vt){return M.inputType.kind==="number"?Number(Vt):Vt},lt=0,_t=Z;lt<_t.length;lt+=1){var Mt=_t[lt],Bt=Mt[0],qt=Mt[1];qt.length===1?O.push(Qe(qt[0])):O.push(qt.map(Qe)),O.push(this.outputs[outputIndex$1].serialize())}return O.push(this.otherwise.serialize()),O};var Va=function(M,O,Z){this.type=M,this.branches=O,this.otherwise=Z};Va.parse=function(M,O){if(M.length<4)return O.error("Expected at least 3 arguments, but found only "+(M.length-1)+".");if(M.length%2!=0)return O.error("Expected an odd number of arguments.");var Z;O.expectedType&&O.expectedType.kind!=="value"&&(Z=O.expectedType);for(var ae=[],be=1;be<M.length-1;be+=2){var Ee=O.parse(M[be],be,Pt);if(!Ee)return null;var je=O.parse(M[be+1],be+1,Z);if(!je)return null;ae.push([Ee,je]),Z=Z||je.type}var Qe=O.parse(M[M.length-1],M.length-1,Z);return Qe?new Va(Z,ae,Qe):null},Va.prototype.evaluate=function(M){for(var O=0,Z=this.branches;O<Z.length;O+=1){var ae=Z[O],be=ae[0],Ee=ae[1];if(be.evaluate(M))return Ee.evaluate(M)}return this.otherwise.evaluate(M)},Va.prototype.eachChild=function(M){for(var O=0,Z=this.branches;O<Z.length;O+=1){var ae=Z[O],be=ae[0],Ee=ae[1];M(be),M(Ee)}M(this.otherwise)},Va.prototype.outputDefined=function(){return this.branches.every(function(M){return M[0],M[1].outputDefined()})&&this.otherwise.outputDefined()},Va.prototype.serialize=function(){var M=["case"];return this.eachChild(function(O){M.push(O.serialize())}),M};var Ja=function(M,O,Z,ae){this.type=M,this.input=O,this.beginIndex=Z,this.endIndex=ae};function ps(M,O){return M==="=="||M==="!="?O.kind==="boolean"||O.kind==="string"||O.kind==="number"||O.kind==="null"||O.kind==="value":O.kind==="string"||O.kind==="number"||O.kind==="value"}function ul(M,O,Z,ae){return ae.compare(O,Z)===0}function ao(M,O,Z){var ae=M!=="=="&&M!=="!=";return function(){function be(Ee,je,Qe){this.type=Pt,this.lhs=Ee,this.rhs=je,this.collator=Qe,this.hasUntypedArgument=Ee.type.kind==="value"||je.type.kind==="value"}return be.parse=function(Ee,je){if(Ee.length!==3&&Ee.length!==4)return je.error("Expected two or three arguments.");var Qe=Ee[0],lt=je.parse(Ee[1],1,jt);if(!lt)return null;if(!ps(Qe,lt.type))return je.concat(1).error('"'+Qe+`" comparisons are not supported for type '`+Kt(lt.type)+"'.");var _t=je.parse(Ee[2],2,jt);if(!_t)return null;if(!ps(Qe,_t.type))return je.concat(2).error('"'+Qe+`" comparisons are not supported for type '`+Kt(_t.type)+"'.");if(lt.type.kind!==_t.type.kind&&lt.type.kind!=="value"&&_t.type.kind!=="value")return je.error("Cannot compare types '"+Kt(lt.type)+"' and '"+Kt(_t.type)+"'.");ae&&(lt.type.kind==="value"&&_t.type.kind!=="value"?lt=new ur(_t.type,[lt]):lt.type.kind!=="value"&&_t.type.kind==="value"&&(_t=new ur(lt.type,[_t])));var Mt=null;if(Ee.length===4){if(lt.type.kind!=="string"&&_t.type.kind!=="string"&&lt.type.kind!=="value"&&_t.type.kind!=="value")return je.error("Cannot use collator to compare non-string types.");if(!(Mt=je.parse(Ee[3],3,Nt)))return null}return new be(lt,_t,Mt)},be.prototype.evaluate=function(Ee){var je=this.lhs.evaluate(Ee),Qe=this.rhs.evaluate(Ee);if(ae&&this.hasUntypedArgument){var lt=$n(je),_t=$n(Qe);if(lt.kind!==_t.kind||lt.kind!=="string"&&lt.kind!=="number")throw new Zn('Expected arguments for "'+M+'" to be (string, string) or (number, number), but found ('+lt.kind+", "+_t.kind+") instead.")}if(this.collator&&!ae&&this.hasUntypedArgument){var Mt=$n(je),Bt=$n(Qe);if(Mt.kind!=="string"||Bt.kind!=="string")return O(Ee,je,Qe)}return this.collator?Z(Ee,je,Qe,this.collator.evaluate(Ee)):O(Ee,je,Qe)},be.prototype.eachChild=function(Ee){Ee(this.lhs),Ee(this.rhs),this.collator&&Ee(this.collator)},be.prototype.outputDefined=function(){return!0},be.prototype.serialize=function(){var Ee=[M];return this.eachChild(function(je){Ee.push(je.serialize())}),Ee},be}()}Ja.parse=function(M,O){if(M.length<=2||M.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var Z=O.parse(M[1],1,jt),ae=O.parse(M[2],2,pt);if(!Z||!ae)return null;if(!vn(Z.type,[pn(jt),gt,jt]))return O.error("Expected first argument to be of type array or string, but found "+Kt(Z.type)+" instead");if(M.length===4){var be=O.parse(M[3],3,pt);return be?new Ja(Z.type,Z,ae,be):null}return new Ja(Z.type,Z,ae)},Ja.prototype.evaluate=function(M){var O=this.input.evaluate(M),Z=this.beginIndex.evaluate(M);if(!cn(O,["string","array"]))throw new Zn("Expected first argument to be of type array or string, but found "+Kt($n(O))+" instead.");if(this.endIndex){var ae=this.endIndex.evaluate(M);return O.slice(Z,ae)}return O.slice(Z)},Ja.prototype.eachChild=function(M){M(this.input),M(this.beginIndex),this.endIndex&&M(this.endIndex)},Ja.prototype.outputDefined=function(){return!1},Ja.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var M=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),M]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var cl=ao("==",function(M,O,Z){return O===Z},ul),fl=ao("!=",function(M,O,Z){return O!==Z},function(M,O,Z,ae){return!ul(0,O,Z,ae)}),bl=ao("<",function(M,O,Z){return O<Z},function(M,O,Z,ae){return ae.compare(O,Z)<0}),Ws=ao(">",function(M,O,Z){return O>Z},function(M,O,Z,ae){return ae.compare(O,Z)>0}),hl=ao("<=",function(M,O,Z){return O<=Z},function(M,O,Z,ae){return ae.compare(O,Z)<=0}),Ys=ao(">=",function(M,O,Z){return O>=Z},function(M,O,Z,ae){return ae.compare(O,Z)>=0}),oo=function(M,O,Z,ae,be){this.type=gt,this.number=M,this.locale=O,this.currency=Z,this.minFractionDigits=ae,this.maxFractionDigits=be};oo.parse=function(M,O){if(M.length!==3)return O.error("Expected two arguments.");var Z=O.parse(M[1],1,pt);if(!Z)return null;var ae=M[2];if(typeof ae!="object"||Array.isArray(ae))return O.error("NumberFormat options argument must be an object.");var be=null;if(ae.locale&&!(be=O.parse(ae.locale,1,gt)))return null;var Ee=null;if(ae.currency&&!(Ee=O.parse(ae.currency,1,gt)))return null;var je=null;if(ae["min-fraction-digits"]&&!(je=O.parse(ae["min-fraction-digits"],1,pt)))return null;var Qe=null;return ae["max-fraction-digits"]&&!(Qe=O.parse(ae["max-fraction-digits"],1,pt))?null:new oo(Z,be,Ee,je,Qe)},oo.prototype.evaluate=function(M){return new Intl.NumberFormat(this.locale?this.locale.evaluate(M):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(M):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(M):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(M):void 0}).format(this.number.evaluate(M))},oo.prototype.eachChild=function(M){M(this.number),this.locale&&M(this.locale),this.currency&&M(this.currency),this.minFractionDigits&&M(this.minFractionDigits),this.maxFractionDigits&&M(this.maxFractionDigits)},oo.prototype.outputDefined=function(){return!1},oo.prototype.serialize=function(){var M={};return this.locale&&(M.locale=this.locale.serialize()),this.currency&&(M.currency=this.currency.serialize()),this.minFractionDigits&&(M["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(M["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),M]};var so=function(M){this.type=pt,this.input=M};so.parse=function(M,O){if(M.length!==2)return O.error("Expected 1 argument, but found "+(M.length-1)+" instead.");var Z=O.parse(M[1],1);return Z?Z.type.kind!=="array"&&Z.type.kind!=="string"&&Z.type.kind!=="value"?O.error("Expected argument of type string or array, but found "+Kt(Z.type)+" instead."):new so(Z):null},so.prototype.evaluate=function(M){var O=this.input.evaluate(M);if(typeof O=="string"||Array.isArray(O))return O.length;throw new Zn("Expected value to be of type string or array, but found "+Kt($n(O))+" instead.")},so.prototype.eachChild=function(M){M(this.input)},so.prototype.outputDefined=function(){return!1},so.prototype.serialize=function(){var M=["length"];return this.eachChild(function(O){M.push(O.serialize())}),M};var Ko={"==":cl,"!=":fl,">":Ws,"<":bl,">=":Ys,"<=":hl,array:ur,at:xo,boolean:ur,case:Va,coalesce:ya,collator:ar,format:Zt,image:nn,in:Qr,"index-of":bo,interpolate:Di,"interpolate-hcl":Di,"interpolate-lab":Di,length:so,let:Aa,literal:fr,match:Pa,number:ur,"number-format":oo,object:ur,slice:Ja,step:Ur,string:ur,"to-boolean":_n,"to-color":_n,"to-number":_n,"to-string":_n,var:or,within:Wn};function lo(M,O){var Z=O[0],ae=O[1],be=O[2],Ee=O[3];Z=Z.evaluate(M),ae=ae.evaluate(M),be=be.evaluate(M);var je=Ee?Ee.evaluate(M):1,Qe=Fn(Z,ae,be,je);if(Qe)throw new Zn(Qe);return new hn(Z/255*je,ae/255*je,be/255*je,je)}function Xs(M,O){return M in O}function Js(M,O){var Z=O[M];return Z===void 0?null:Z}function Ro(M){return{type:M}}function Cs(M){return{result:"success",value:M}}function _o(M){return{result:"error",value:M}}function $o(M){return M["property-type"]==="data-driven"||M["property-type"]==="cross-faded-data-driven"}function zo(M){return!!M.expression&&M.expression.parameters.indexOf("zoom")>-1}function uo(M){return!!M.expression&&M.expression.interpolated}function ei(M){return M instanceof Number?"number":M instanceof String?"string":M instanceof Boolean?"boolean":Array.isArray(M)?"array":M===null?"null":typeof M}function wo(M){return typeof M=="object"&&M!==null&&!Array.isArray(M)}function _l(M){return M}function Ps(M,O){var Z,ae,be,Ee=O.type==="color",je=M.stops&&typeof M.stops[0][0]=="object",Qe=je||M.property!==void 0,lt=je||!Qe,_t=M.type||(uo(O)?"exponential":"interval");if(Ee&&((M=st({},M)).stops&&(M.stops=M.stops.map(function(pr){return[pr[0],hn.parse(pr[1])]})),M.default?M.default=hn.parse(M.default):M.default=hn.parse(O.default)),M.colorSpace&&M.colorSpace!=="rgb"&&!Zs[M.colorSpace])throw new Error("Unknown color space: "+M.colorSpace);if(_t==="exponential")Z=Oa;else if(_t==="interval")Z=Qo;else if(_t==="categorical"){Z=Do,ae=Object.create(null);for(var Mt=0,Bt=M.stops;Mt<Bt.length;Mt+=1){var qt=Bt[Mt];ae[qt[0]]=qt[1]}be=typeof M.stops[0][0]}else{if(_t!=="identity")throw new Error('Unknown function type "'+_t+'"');Z=Ks}if(je){for(var Vt={},rn=[],xn=0;xn<M.stops.length;xn++){var In=M.stops[xn],On=In[0].zoom;Vt[On]===void 0&&(Vt[On]={zoom:On,type:M.type,property:M.property,default:M.default,stops:[]},rn.push(On)),Vt[On].stops.push([In[0].value,In[1]])}for(var jn=[],Vn=0,Yn=rn;Vn<Yn.length;Vn+=1){var Qn=Yn[Vn];jn.push([Vt[Qn].zoom,Ps(Vt[Qn],O)])}var tr={name:"linear"};return{kind:"composite",interpolationType:tr,interpolationFactor:Di.interpolationFactor.bind(void 0,tr),zoomStops:jn.map(function(pr){return pr[0]}),evaluate:function(pr,Tr){var Er=pr.zoom;return Oa({stops:jn,base:M.base},O,Er).evaluate(Er,Tr)}}}if(lt){var xr=_t==="exponential"?{name:"exponential",base:M.base!==void 0?M.base:1}:null;return{kind:"camera",interpolationType:xr,interpolationFactor:Di.interpolationFactor.bind(void 0,xr),zoomStops:M.stops.map(function(pr){return pr[0]}),evaluate:function(pr){var Tr=pr.zoom;return Z(M,O,Tr,ae,be)}}}return{kind:"source",evaluate:function(pr,Tr){var Er=Tr&&Tr.properties?Tr.properties[M.property]:void 0;return Er===void 0?ds(M.default,O.default):Z(M,O,Er,ae,be)}}}function ds(M,O,Z){return M!==void 0?M:O!==void 0?O:Z!==void 0?Z:void 0}function Do(M,O,Z,ae,be){return ds(typeof Z===be?ae[Z]:void 0,M.default,O.default)}function Qo(M,O,Z){if(ei(Z)!=="number")return ds(M.default,O.default);var ae=M.stops.length;if(ae===1||Z<=M.stops[0][0])return M.stops[0][1];if(Z>=M.stops[ae-1][0])return M.stops[ae-1][1];var be=br(M.stops.map(function(Ee){return Ee[0]}),Z);return M.stops[be][1]}function Oa(M,O,Z){var ae=M.base!==void 0?M.base:1;if(ei(Z)!=="number")return ds(M.default,O.default);var be=M.stops.length;if(be===1||Z<=M.stops[0][0])return M.stops[0][1];if(Z>=M.stops[be-1][0])return M.stops[be-1][1];var Ee=br(M.stops.map(function(Bt){return Bt[0]}),Z),je=function(Bt,qt,Vt,rn){var xn=rn-Vt,In=Bt-Vt;return xn===0?0:qt===1?In/xn:(Math.pow(qt,In)-1)/(Math.pow(qt,xn)-1)}(Z,ae,M.stops[Ee][0],M.stops[Ee+1][0]),Qe=M.stops[Ee][1],lt=M.stops[Ee+1][1],_t=cr[O.type]||_l;if(M.colorSpace&&M.colorSpace!=="rgb"){var Mt=Zs[M.colorSpace];_t=function(Bt,qt){return Mt.reverse(Mt.interpolate(Mt.forward(Bt),Mt.forward(qt),je))}}return typeof Qe.evaluate=="function"?{evaluate:function(){for(var Bt=[],qt=arguments.length;qt--;)Bt[qt]=arguments[qt];var Vt=Qe.evaluate.apply(void 0,Bt),rn=lt.evaluate.apply(void 0,Bt);if(Vt!==void 0&&rn!==void 0)return _t(Vt,rn,je)}}:_t(Qe,lt,je)}function Ks(M,O,Z){return O.type==="color"?Z=hn.parse(Z):O.type==="formatted"?Z=Rn.fromString(Z.toString()):O.type==="resolvedImage"?Z=Nn.fromString(Z.toString()):ei(Z)===O.type||O.type==="enum"&&O.values[Z]||(Z=void 0),ds(Z,M.default,O.default)}Gn.register(Ko,{error:[{kind:"error"},[gt],function(M,O){var Z=O[0];throw new Zn(Z.evaluate(M))}],typeof:[gt,[jt],function(M,O){return Kt($n(O[0].evaluate(M)))}],"to-rgba":[pn(pt,4),[Ot],function(M,O){return O[0].evaluate(M).toArray()}],rgb:[Ot,[pt,pt,pt],lo],rgba:[Ot,[pt,pt,pt,pt],lo],has:{type:Pt,overloads:[[[gt],function(M,O){return Xs(O[0].evaluate(M),M.properties())}],[[gt,Ht],function(M,O){var Z=O[0],ae=O[1];return Xs(Z.evaluate(M),ae.evaluate(M))}]]},get:{type:jt,overloads:[[[gt],function(M,O){return Js(O[0].evaluate(M),M.properties())}],[[gt,Ht],function(M,O){var Z=O[0],ae=O[1];return Js(Z.evaluate(M),ae.evaluate(M))}]]},"feature-state":[jt,[gt],function(M,O){return Js(O[0].evaluate(M),M.featureState||{})}],properties:[Ht,[],function(M){return M.properties()}],"geometry-type":[gt,[],function(M){return M.geometryType()}],id:[jt,[],function(M){return M.id()}],zoom:[pt,[],function(M){return M.globals.zoom}],"heatmap-density":[pt,[],function(M){return M.globals.heatmapDensity||0}],"line-progress":[pt,[],function(M){return M.globals.lineProgress||0}],accumulated:[jt,[],function(M){return M.globals.accumulated===void 0?null:M.globals.accumulated}],"+":[pt,Ro(pt),function(M,O){for(var Z=0,ae=0,be=O;ae<be.length;ae+=1)Z+=be[ae].evaluate(M);return Z}],"*":[pt,Ro(pt),function(M,O){for(var Z=1,ae=0,be=O;ae<be.length;ae+=1)Z*=be[ae].evaluate(M);return Z}],"-":{type:pt,overloads:[[[pt,pt],function(M,O){var Z=O[0],ae=O[1];return Z.evaluate(M)-ae.evaluate(M)}],[[pt],function(M,O){return-O[0].evaluate(M)}]]},"/":[pt,[pt,pt],function(M,O){var Z=O[0],ae=O[1];return Z.evaluate(M)/ae.evaluate(M)}],"%":[pt,[pt,pt],function(M,O){var Z=O[0],ae=O[1];return Z.evaluate(M)%ae.evaluate(M)}],ln2:[pt,[],function(){return Math.LN2}],pi:[pt,[],function(){return Math.PI}],e:[pt,[],function(){return Math.E}],"^":[pt,[pt,pt],function(M,O){var Z=O[0],ae=O[1];return Math.pow(Z.evaluate(M),ae.evaluate(M))}],sqrt:[pt,[pt],function(M,O){var Z=O[0];return Math.sqrt(Z.evaluate(M))}],log10:[pt,[pt],function(M,O){var Z=O[0];return Math.log(Z.evaluate(M))/Math.LN10}],ln:[pt,[pt],function(M,O){var Z=O[0];return Math.log(Z.evaluate(M))}],log2:[pt,[pt],function(M,O){var Z=O[0];return Math.log(Z.evaluate(M))/Math.LN2}],sin:[pt,[pt],function(M,O){var Z=O[0];return Math.sin(Z.evaluate(M))}],cos:[pt,[pt],function(M,O){var Z=O[0];return Math.cos(Z.evaluate(M))}],tan:[pt,[pt],function(M,O){var Z=O[0];return Math.tan(Z.evaluate(M))}],asin:[pt,[pt],function(M,O){var Z=O[0];return Math.asin(Z.evaluate(M))}],acos:[pt,[pt],function(M,O){var Z=O[0];return Math.acos(Z.evaluate(M))}],atan:[pt,[pt],function(M,O){var Z=O[0];return Math.atan(Z.evaluate(M))}],min:[pt,Ro(pt),function(M,O){return Math.min.apply(Math,O.map(function(Z){return Z.evaluate(M)}))}],max:[pt,Ro(pt),function(M,O){return Math.max.apply(Math,O.map(function(Z){return Z.evaluate(M)}))}],abs:[pt,[pt],function(M,O){var Z=O[0];return Math.abs(Z.evaluate(M))}],round:[pt,[pt],function(M,O){var Z=O[0].evaluate(M);return Z<0?-Math.round(-Z):Math.round(Z)}],floor:[pt,[pt],function(M,O){var Z=O[0];return Math.floor(Z.evaluate(M))}],ceil:[pt,[pt],function(M,O){var Z=O[0];return Math.ceil(Z.evaluate(M))}],"filter-==":[Pt,[gt,jt],function(M,O){var Z=O[0],ae=O[1];return M.properties()[Z.value]===ae.value}],"filter-id-==":[Pt,[jt],function(M,O){var Z=O[0];return M.id()===Z.value}],"filter-type-==":[Pt,[gt],function(M,O){var Z=O[0];return M.geometryType()===Z.value}],"filter-<":[Pt,[gt,jt],function(M,O){var Z=O[0],ae=O[1],be=M.properties()[Z.value],Ee=ae.value;return typeof be==typeof Ee&&be<Ee}],"filter-id-<":[Pt,[jt],function(M,O){var Z=O[0],ae=M.id(),be=Z.value;return typeof ae==typeof be&&ae<be}],"filter->":[Pt,[gt,jt],function(M,O){var Z=O[0],ae=O[1],be=M.properties()[Z.value],Ee=ae.value;return typeof be==typeof Ee&&be>Ee}],"filter-id->":[Pt,[jt],function(M,O){var Z=O[0],ae=M.id(),be=Z.value;return typeof ae==typeof be&&ae>be}],"filter-<=":[Pt,[gt,jt],function(M,O){var Z=O[0],ae=O[1],be=M.properties()[Z.value],Ee=ae.value;return typeof be==typeof Ee&&be<=Ee}],"filter-id-<=":[Pt,[jt],function(M,O){var Z=O[0],ae=M.id(),be=Z.value;return typeof ae==typeof be&&ae<=be}],"filter->=":[Pt,[gt,jt],function(M,O){var Z=O[0],ae=O[1],be=M.properties()[Z.value],Ee=ae.value;return typeof be==typeof Ee&&be>=Ee}],"filter-id->=":[Pt,[jt],function(M,O){var Z=O[0],ae=M.id(),be=Z.value;return typeof ae==typeof be&&ae>=be}],"filter-has":[Pt,[jt],function(M,O){return O[0].value in M.properties()}],"filter-has-id":[Pt,[],function(M){return M.id()!==null&&M.id()!==void 0}],"filter-type-in":[Pt,[pn(gt)],function(M,O){return O[0].value.indexOf(M.geometryType())>=0}],"filter-id-in":[Pt,[pn(jt)],function(M,O){return O[0].value.indexOf(M.id())>=0}],"filter-in-small":[Pt,[gt,pn(jt)],function(M,O){var Z=O[0];return O[1].value.indexOf(M.properties()[Z.value])>=0}],"filter-in-large":[Pt,[gt,pn(jt)],function(M,O){var Z=O[0],ae=O[1];return function(be,Ee,je,Qe){for(;je<=Qe;){var lt=je+Qe>>1;if(Ee[lt]===be)return!0;Ee[lt]>be?Qe=lt-1:je=lt+1}return!1}(M.properties()[Z.value],ae.value,0,ae.value.length-1)}],all:{type:Pt,overloads:[[[Pt,Pt],function(M,O){var Z=O[0],ae=O[1];return Z.evaluate(M)&&ae.evaluate(M)}],[Ro(Pt),function(M,O){for(var Z=0,ae=O;Z<ae.length;Z+=1)if(!ae[Z].evaluate(M))return!1;return!0}]]},any:{type:Pt,overloads:[[[Pt,Pt],function(M,O){var Z=O[0],ae=O[1];return Z.evaluate(M)||ae.evaluate(M)}],[Ro(Pt),function(M,O){for(var Z=0,ae=O;Z<ae.length;Z+=1)if(ae[Z].evaluate(M))return!0;return!1}]]},"!":[Pt,[Pt],function(M,O){return!O[0].evaluate(M)}],"is-supported-script":[Pt,[gt],function(M,O){var Z=O[0],ae=M.globals&&M.globals.isSupportedScript;return!ae||ae(Z.evaluate(M))}],upcase:[gt,[gt],function(M,O){return O[0].evaluate(M).toUpperCase()}],downcase:[gt,[gt],function(M,O){return O[0].evaluate(M).toLowerCase()}],concat:[gt,Ro(jt),function(M,O){return O.map(function(Z){return mr(Z.evaluate(M))}).join("")}],"resolved-locale":[gt,[Nt],function(M,O){return O[0].evaluate(M).resolvedLocale()}]});var gs=function(M,O){this.expression=M,this._warningHistory={},this._evaluator=new Un,this._defaultValue=O?function(Z){return Z.type==="color"&&wo(Z.default)?new hn(0,0,0,0):Z.type==="color"?hn.parse(Z.default)||null:Z.default===void 0?null:Z.default}(O):null,this._enumValues=O&&O.type==="enum"?O.values:null};function es(M){return Array.isArray(M)&&M.length>0&&typeof M[0]=="string"&&M[0]in Ko}function vs(M,O){var Z=new ir(Ko,[],O?function(be){var Ee={color:Ot,string:gt,number:pt,enum:gt,boolean:Pt,formatted:Gt,resolvedImage:un};return be.type==="array"?pn(Ee[be.value]||jt,be.length):Ee[be.type]}(O):void 0),ae=Z.parse(M,void 0,void 0,void 0,O&&O.type==="string"?{typeAnnotation:"coerce"}:void 0);return ae?Cs(new gs(ae,O)):_o(Z.errors)}gs.prototype.evaluateWithoutErrorHandling=function(M,O,Z,ae,be,Ee){return this._evaluator.globals=M,this._evaluator.feature=O,this._evaluator.featureState=Z,this._evaluator.canonical=ae,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Ee,this.expression.evaluate(this._evaluator)},gs.prototype.evaluate=function(M,O,Z,ae,be,Ee){this._evaluator.globals=M,this._evaluator.feature=O||null,this._evaluator.featureState=Z||null,this._evaluator.canonical=ae,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Ee||null;try{var je=this.expression.evaluate(this._evaluator);if(je==null||typeof je=="number"&&je!=je)return this._defaultValue;if(this._enumValues&&!(je in this._enumValues))throw new Zn("Expected value to be one of "+Object.keys(this._enumValues).map(function(Qe){return JSON.stringify(Qe)}).join(", ")+", but found "+JSON.stringify(je)+" instead.");return je}catch(Qe){return this._warningHistory[Qe.message]||(this._warningHistory[Qe.message]=!0,typeof console<"u"&&console.warn(Qe.message)),this._defaultValue}};var Fo=function(M,O){this.kind=M,this._styleExpression=O,this.isStateDependent=M!=="constant"&&!nr(O.expression)};Fo.prototype.evaluateWithoutErrorHandling=function(M,O,Z,ae,be,Ee){return this._styleExpression.evaluateWithoutErrorHandling(M,O,Z,ae,be,Ee)},Fo.prototype.evaluate=function(M,O,Z,ae,be,Ee){return this._styleExpression.evaluate(M,O,Z,ae,be,Ee)};var Bo=function(M,O,Z,ae){this.kind=M,this.zoomStops=Z,this._styleExpression=O,this.isStateDependent=M!=="camera"&&!nr(O.expression),this.interpolationType=ae};function ts(M,O){if((M=vs(M,O)).result==="error")return M;var Z=M.value.expression,ae=Kn(Z);if(!ae&&!$o(O))return _o([new Et("","data expressions not supported")]);var be=er(Z,["zoom"]);if(!be&&!zo(O))return _o([new Et("","zoom expressions not supported")]);var Ee=ys(Z);if(!Ee&&!be)return _o([new Et("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Ee instanceof Et)return _o([Ee]);if(Ee instanceof Di&&!uo(O))return _o([new Et("",'"interpolate" expressions cannot be used with this property')]);if(!Ee)return Cs(new Fo(ae?"constant":"source",M.value));var je=Ee instanceof Di?Ee.interpolation:void 0;return Cs(new Bo(ae?"camera":"composite",M.value,Ee.labels,je))}Bo.prototype.evaluateWithoutErrorHandling=function(M,O,Z,ae,be,Ee){return this._styleExpression.evaluateWithoutErrorHandling(M,O,Z,ae,be,Ee)},Bo.prototype.evaluate=function(M,O,Z,ae,be,Ee){return this._styleExpression.evaluate(M,O,Z,ae,be,Ee)},Bo.prototype.interpolationFactor=function(M,O,Z){return this.interpolationType?Di.interpolationFactor(this.interpolationType,M,O,Z):0};var ms=function(M,O){this._parameters=M,this._specification=O,st(this,Ps(this._parameters,this._specification))};function ys(M){var O=null;if(M instanceof Aa)O=ys(M.result);else if(M instanceof ya)for(var Z=0,ae=M.args;Z<ae.length;Z+=1){var be=ae[Z];if(O=ys(be))break}else(M instanceof Ur||M instanceof Di)&&M.input instanceof Gn&&M.input.name==="zoom"&&(O=M);return O instanceof Et||M.eachChild(function(Ee){var je=ys(Ee);je instanceof Et?O=je:!O&&je?O=new Et("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):O&&je&&O!==je&&(O=new Et("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),O}function Ia(M){var O=M.key,Z=M.value,ae=M.valueSpec||{},be=M.objectElementValidators||{},Ee=M.style,je=M.styleSpec,Qe=[],lt=ei(Z);if(lt!=="object")return[new ze(O,Z,"object expected, "+lt+" found")];for(var _t in Z){var Mt=_t.split(".")[0],Bt=ae[Mt]||ae["*"],qt=void 0;if(be[Mt])qt=be[Mt];else if(ae[Mt])qt=mi;else if(be["*"])qt=be["*"];else{if(!ae["*"]){Qe.push(new ze(O,Z[_t],'unknown property "'+_t+'"'));continue}qt=mi}Qe=Qe.concat(qt({key:(O&&O+".")+_t,value:Z[_t],valueSpec:Bt,style:Ee,styleSpec:je,object:Z,objectKey:_t},Z))}for(var Vt in ae)be[Vt]||ae[Vt].required&&ae[Vt].default===void 0&&Z[Vt]===void 0&&Qe.push(new ze(O,Z,'missing required property "'+Vt+'"'));return Qe}function xs(M){var O=M.value,Z=M.valueSpec,ae=M.style,be=M.styleSpec,Ee=M.key,je=M.arrayElementValidator||mi;if(ei(O)!=="array")return[new ze(Ee,O,"array expected, "+ei(O)+" found")];if(Z.length&&O.length!==Z.length)return[new ze(Ee,O,"array length "+Z.length+" expected, length "+O.length+" found")];if(Z["min-length"]&&O.length<Z["min-length"])return[new ze(Ee,O,"array length at least "+Z["min-length"]+" expected, length "+O.length+" found")];var Qe={type:Z.value,values:Z.values};be.$version<7&&(Qe.function=Z.function),ei(Z.value)==="object"&&(Qe=Z.value);for(var lt=[],_t=0;_t<O.length;_t++)lt=lt.concat(je({array:O,arrayIndex:_t,value:O[_t],valueSpec:Qe,style:ae,styleSpec:be,key:Ee+"["+_t+"]"}));return lt}function bs(M){var O=M.key,Z=M.value,ae=M.valueSpec,be=ei(Z);return be==="number"&&Z!=Z&&(be="NaN"),be!=="number"?[new ze(O,Z,"number expected, "+be+" found")]:"minimum"in ae&&Z<ae.minimum?[new ze(O,Z,Z+" is less than the minimum value "+ae.minimum)]:"maximum"in ae&&Z>ae.maximum?[new ze(O,Z,Z+" is greater than the maximum value "+ae.maximum)]:[]}function $s(M){var O,Z,ae,be=M.valueSpec,Ee=ct(M.value.type),je={},Qe=Ee!=="categorical"&&M.value.property===void 0,lt=!Qe,_t=ei(M.value.stops)==="array"&&ei(M.value.stops[0])==="array"&&ei(M.value.stops[0][0])==="object",Mt=Ia({key:M.key,value:M.value,valueSpec:M.styleSpec.function,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{stops:function(Vt){if(Ee==="identity")return[new ze(Vt.key,Vt.value,'identity function may not have a "stops" property')];var rn=[],xn=Vt.value;return rn=rn.concat(xs({key:Vt.key,value:xn,valueSpec:Vt.valueSpec,style:Vt.style,styleSpec:Vt.styleSpec,arrayElementValidator:Bt})),ei(xn)==="array"&&xn.length===0&&rn.push(new ze(Vt.key,xn,"array must have at least one stop")),rn},default:function(Vt){return mi({key:Vt.key,value:Vt.value,valueSpec:be,style:Vt.style,styleSpec:Vt.styleSpec})}}});return Ee==="identity"&&Qe&&Mt.push(new ze(M.key,M.value,'missing required property "property"')),Ee==="identity"||M.value.stops||Mt.push(new ze(M.key,M.value,'missing required property "stops"')),Ee==="exponential"&&M.valueSpec.expression&&!uo(M.valueSpec)&&Mt.push(new ze(M.key,M.value,"exponential functions not supported")),M.styleSpec.$version>=8&&(lt&&!$o(M.valueSpec)?Mt.push(new ze(M.key,M.value,"property functions not supported")):Qe&&!zo(M.valueSpec)&&Mt.push(new ze(M.key,M.value,"zoom functions not supported"))),Ee!=="categorical"&&!_t||M.value.property!==void 0||Mt.push(new ze(M.key,M.value,'"property" property is required')),Mt;function Bt(Vt){var rn=[],xn=Vt.value,In=Vt.key;if(ei(xn)!=="array")return[new ze(In,xn,"array expected, "+ei(xn)+" found")];if(xn.length!==2)return[new ze(In,xn,"array length 2 expected, length "+xn.length+" found")];if(_t){if(ei(xn[0])!=="object")return[new ze(In,xn,"object expected, "+ei(xn[0])+" found")];if(xn[0].zoom===void 0)return[new ze(In,xn,"object stop key must have zoom")];if(xn[0].value===void 0)return[new ze(In,xn,"object stop key must have value")];if(ae&&ae>ct(xn[0].zoom))return[new ze(In,xn[0].zoom,"stop zoom values must appear in ascending order")];ct(xn[0].zoom)!==ae&&(ae=ct(xn[0].zoom),Z=void 0,je={}),rn=rn.concat(Ia({key:In+"[0]",value:xn[0],valueSpec:{zoom:{}},style:Vt.style,styleSpec:Vt.styleSpec,objectElementValidators:{zoom:bs,value:qt}}))}else rn=rn.concat(qt({key:In+"[0]",value:xn[0],valueSpec:{},style:Vt.style,styleSpec:Vt.styleSpec},xn));return es(Tt(xn[1]))?rn.concat([new ze(In+"[1]",xn[1],"expressions are not allowed in function stops.")]):rn.concat(mi({key:In+"[1]",value:xn[1],valueSpec:be,style:Vt.style,styleSpec:Vt.styleSpec}))}function qt(Vt,rn){var xn=ei(Vt.value),In=ct(Vt.value),On=Vt.value!==null?Vt.value:rn;if(O){if(xn!==O)return[new ze(Vt.key,On,xn+" stop domain type must match previous stop domain type "+O)]}else O=xn;if(xn!=="number"&&xn!=="string"&&xn!=="boolean")return[new ze(Vt.key,On,"stop domain value must be a number, string, or boolean")];if(xn!=="number"&&Ee!=="categorical"){var jn="number expected, "+xn+" found";return $o(be)&&Ee===void 0&&(jn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ze(Vt.key,On,jn)]}return Ee!=="categorical"||xn!=="number"||isFinite(In)&&Math.floor(In)===In?Ee!=="categorical"&&xn==="number"&&Z!==void 0&&In<Z?[new ze(Vt.key,On,"stop domain values must appear in ascending order")]:(Z=In,Ee==="categorical"&&In in je?[new ze(Vt.key,On,"stop domain values must be unique")]:(je[In]=!0,[])):[new ze(Vt.key,On,"integer expected, found "+In)]}}function To(M){var O=(M.expressionContext==="property"?ts:vs)(Tt(M.value),M.valueSpec);if(O.result==="error")return O.value.map(function(ae){return new ze(""+M.key+ae.key,M.value,ae.message)});var Z=O.value.expression||O.value._styleExpression.expression;if(M.expressionContext==="property"&&M.propertyKey==="text-font"&&!Z.outputDefined())return[new ze(M.key,M.value,'Invalid data expression for "'+M.propertyKey+'". Output values must be contained as literals within the expression.')];if(M.expressionContext==="property"&&M.propertyType==="layout"&&!nr(Z))return[new ze(M.key,M.value,'"feature-state" data expressions are not supported with layout properties.')];if(M.expressionContext==="filter"&&!nr(Z))return[new ze(M.key,M.value,'"feature-state" data expressions are not supported with filters.')];if(M.expressionContext&&M.expressionContext.indexOf("cluster")===0){if(!er(Z,["zoom","feature-state"]))return[new ze(M.key,M.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(M.expressionContext==="cluster-initial"&&!Kn(Z))return[new ze(M.key,M.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Os(M){var O=M.key,Z=M.value,ae=M.valueSpec,be=[];return Array.isArray(ae.values)?ae.values.indexOf(ct(Z))===-1&&be.push(new ze(O,Z,"expected one of ["+ae.values.join(", ")+"], "+JSON.stringify(Z)+" found")):Object.keys(ae.values).indexOf(ct(Z))===-1&&be.push(new ze(O,Z,"expected one of ["+Object.keys(ae.values).join(", ")+"], "+JSON.stringify(Z)+" found")),be}function _s(M){if(M===!0||M===!1)return!0;if(!Array.isArray(M)||M.length===0)return!1;switch(M[0]){case"has":return M.length>=2&&M[1]!=="$id"&&M[1]!=="$type";case"in":return M.length>=3&&(typeof M[1]!="string"||Array.isArray(M[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return M.length!==3||Array.isArray(M[1])||Array.isArray(M[2]);case"any":case"all":for(var O=0,Z=M.slice(1);O<Z.length;O+=1){var ae=Z[O];if(!_s(ae)&&typeof ae!="boolean")return!1}return!0;default:return!0}}ms.deserialize=function(M){return new ms(M._parameters,M._specification)},ms.serialize=function(M){return{_parameters:M._parameters,_specification:M._specification}};var Qs={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ws(M){if(M==null)return{filter:function(){return!0},needGeometry:!1};_s(M)||(M=jo(M));var O=vs(M,Qs);if(O.result==="error")throw new Error(O.value.map(function(Z){return Z.key+": "+Z.message}).join(", "));return{filter:function(Z,ae,be){return O.value.evaluate(Z,ae,{},be)},needGeometry:No(M)}}function ns(M,O){return M<O?-1:M>O?1:0}function No(M){if(!Array.isArray(M))return!1;if(M[0]==="within")return!0;for(var O=1;O<M.length;O++)if(No(M[O]))return!0;return!1}function jo(M){if(!M)return!0;var O,Z=M[0];return M.length<=1?Z!=="any":Z==="=="?ai(M[1],M[2],"=="):Z==="!="?Wi(ai(M[1],M[2],"==")):Z==="<"||Z===">"||Z==="<="||Z===">="?ai(M[1],M[2],Z):Z==="any"?(O=M.slice(1),["any"].concat(O.map(jo))):Z==="all"?["all"].concat(M.slice(1).map(jo)):Z==="none"?["all"].concat(M.slice(1).map(jo).map(Wi)):Z==="in"?ko(M[1],M.slice(2)):Z==="!in"?Wi(ko(M[1],M.slice(2))):Z==="has"?Ao(M[1]):Z==="!has"?Wi(Ao(M[1])):Z!=="within"||M}function ai(M,O,Z){switch(M){case"$type":return["filter-type-"+Z,O];case"$id":return["filter-id-"+Z,O];default:return["filter-"+Z,M,O]}}function ko(M,O){if(O.length===0)return!1;switch(M){case"$type":return["filter-type-in",["literal",O]];case"$id":return["filter-id-in",["literal",O]];default:return O.length>200&&!O.some(function(Z){return typeof Z!=typeof O[0]})?["filter-in-large",M,["literal",O.sort(ns)]]:["filter-in-small",M,["literal",O]]}}function Ao(M){switch(M){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",M]}}function Wi(M){return["!",M]}function Xr(M){return _s(Tt(M.value))?To(st({},M,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Kr(M)}function Kr(M){var O=M.value,Z=M.key;if(ei(O)!=="array")return[new ze(Z,O,"array expected, "+ei(O)+" found")];var ae,be=M.styleSpec,Ee=[];if(O.length<1)return[new ze(Z,O,"filter array must have at least 1 element")];switch(Ee=Ee.concat(Os({key:Z+"[0]",value:O[0],valueSpec:be.filter_operator,style:M.style,styleSpec:M.styleSpec})),ct(O[0])){case"<":case"<=":case">":case">=":O.length>=2&&ct(O[1])==="$type"&&Ee.push(new ze(Z,O,'"$type" cannot be use with operator "'+O[0]+'"'));case"==":case"!=":O.length!==3&&Ee.push(new ze(Z,O,'filter array for operator "'+O[0]+'" must have 3 elements'));case"in":case"!in":O.length>=2&&(ae=ei(O[1]))!=="string"&&Ee.push(new ze(Z+"[1]",O[1],"string expected, "+ae+" found"));for(var je=2;je<O.length;je++)ae=ei(O[je]),ct(O[1])==="$type"?Ee=Ee.concat(Os({key:Z+"["+je+"]",value:O[je],valueSpec:be.geometry_type,style:M.style,styleSpec:M.styleSpec})):ae!=="string"&&ae!=="number"&&ae!=="boolean"&&Ee.push(new ze(Z+"["+je+"]",O[je],"string, number, or boolean expected, "+ae+" found"));break;case"any":case"all":case"none":for(var Qe=1;Qe<O.length;Qe++)Ee=Ee.concat(Kr({key:Z+"["+Qe+"]",value:O[Qe],style:M.style,styleSpec:M.styleSpec}));break;case"has":case"!has":ae=ei(O[1]),O.length!==2?Ee.push(new ze(Z,O,'filter array for "'+O[0]+'" operator must have 2 elements')):ae!=="string"&&Ee.push(new ze(Z+"[1]",O[1],"string expected, "+ae+" found"));break;case"within":ae=ei(O[1]),O.length!==2?Ee.push(new ze(Z,O,'filter array for "'+O[0]+'" operator must have 2 elements')):ae!=="object"&&Ee.push(new ze(Z+"[1]",O[1],"object expected, "+ae+" found"))}return Ee}function co(M,O){var Z=M.key,ae=M.style,be=M.styleSpec,Ee=M.value,je=M.objectKey,Qe=be[O+"_"+M.layerType];if(!Qe)return[];var lt=je.match(/^(.*)-transition$/);if(O==="paint"&&lt&&Qe[lt[1]]&&Qe[lt[1]].transition)return mi({key:Z,value:Ee,valueSpec:be.transition,style:ae,styleSpec:be});var _t,Mt=M.valueSpec||Qe[je];if(!Mt)return[new ze(Z,Ee,'unknown property "'+je+'"')];if(ei(Ee)==="string"&&$o(Mt)&&!Mt.tokens&&(_t=/^{([^}]+)}$/.exec(Ee)))return[new ze(Z,Ee,'"'+je+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(_t[1])+" }`.")];var Bt=[];return M.layerType==="symbol"&&(je==="text-field"&&ae&&!ae.glyphs&&Bt.push(new ze(Z,Ee,'use of "text-field" requires a style "glyphs" property')),je==="text-font"&&wo(Tt(Ee))&&ct(Ee.type)==="identity"&&Bt.push(new ze(Z,Ee,'"text-font" does not support identity functions'))),Bt.concat(mi({key:M.key,value:Ee,valueSpec:Mt,style:ae,styleSpec:be,expressionContext:"property",propertyType:O,propertyKey:je}))}function Ka(M){return co(M,"paint")}function Is(M){return co(M,"layout")}function el(M){var O=[],Z=M.value,ae=M.key,be=M.style,Ee=M.styleSpec;Z.type||Z.ref||O.push(new ze(ae,Z,'either "type" or "ref" is required'));var je,Qe=ct(Z.type),lt=ct(Z.ref);if(Z.id)for(var _t=ct(Z.id),Mt=0;Mt<M.arrayIndex;Mt++){var Bt=be.layers[Mt];ct(Bt.id)===_t&&O.push(new ze(ae,Z.id,'duplicate layer id "'+Z.id+'", previously used at line '+Bt.id.__line__))}if("ref"in Z)["type","source","source-layer","filter","layout"].forEach(function(rn){rn in Z&&O.push(new ze(ae,Z[rn],'"'+rn+'" is prohibited for ref layers'))}),be.layers.forEach(function(rn){ct(rn.id)===lt&&(je=rn)}),je?je.ref?O.push(new ze(ae,Z.ref,"ref cannot reference another ref layer")):Qe=ct(je.type):O.push(new ze(ae,Z.ref,'ref layer "'+lt+'" not found'));else if(Qe!=="background")if(Z.source){var qt=be.sources&&be.sources[Z.source],Vt=qt&&ct(qt.type);qt?Vt==="vector"&&Qe==="raster"?O.push(new ze(ae,Z.source,'layer "'+Z.id+'" requires a raster source')):Vt==="raster"&&Qe!=="raster"?O.push(new ze(ae,Z.source,'layer "'+Z.id+'" requires a vector source')):Vt!=="vector"||Z["source-layer"]?Vt==="raster-dem"&&Qe!=="hillshade"?O.push(new ze(ae,Z.source,"raster-dem source can only be used with layer type 'hillshade'.")):Qe!=="line"||!Z.paint||!Z.paint["line-gradient"]||Vt==="geojson"&&qt.lineMetrics||O.push(new ze(ae,Z,'layer "'+Z.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):O.push(new ze(ae,Z,'layer "'+Z.id+'" must specify a "source-layer"')):O.push(new ze(ae,Z.source,'source "'+Z.source+'" not found'))}else O.push(new ze(ae,Z,'missing required property "source"'));return O=O.concat(Ia({key:ae,value:Z,valueSpec:Ee.layer,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return mi({key:ae+".type",value:Z.type,valueSpec:Ee.layer.type,style:M.style,styleSpec:M.styleSpec,object:Z,objectKey:"type"})},filter:Xr,layout:function(rn){return Ia({layer:Z,key:rn.key,value:rn.value,style:rn.style,styleSpec:rn.styleSpec,objectElementValidators:{"*":function(xn){return Is(st({layerType:Qe},xn))}}})},paint:function(rn){return Ia({layer:Z,key:rn.key,value:rn.value,style:rn.style,styleSpec:rn.styleSpec,objectElementValidators:{"*":function(xn){return Ka(st({layerType:Qe},xn))}}})}}})),O}function Uo(M){var O=M.value,Z=M.key,ae=ei(O);return ae!=="string"?[new ze(Z,O,"string expected, "+ae+" found")]:[]}var tl={promoteId:function(M){var O=M.key,Z=M.value;if(ei(Z)==="string")return Uo({key:O,value:Z});var ae=[];for(var be in Z)ae.push.apply(ae,Uo({key:O+"."+be,value:Z[be]}));return ae}};function Vo(M){var O=M.value,Z=M.key,ae=M.styleSpec,be=M.style;if(!O.type)return[new ze(Z,O,'"type" is required')];var Ee,je=ct(O.type);switch(je){case"vector":case"raster":case"raster-dem":return Ia({key:Z,value:O,valueSpec:ae["source_"+je.replace("-","_")],style:M.style,styleSpec:ae,objectElementValidators:tl});case"geojson":if(Ee=Ia({key:Z,value:O,valueSpec:ae.source_geojson,style:be,styleSpec:ae,objectElementValidators:tl}),O.cluster)for(var Qe in O.clusterProperties){var lt=O.clusterProperties[Qe],_t=lt[0],Mt=lt[1],Bt=typeof _t=="string"?[_t,["accumulated"],["get",Qe]]:_t;Ee.push.apply(Ee,To({key:Z+"."+Qe+".map",value:Mt,expressionContext:"cluster-map"})),Ee.push.apply(Ee,To({key:Z+"."+Qe+".reduce",value:Bt,expressionContext:"cluster-reduce"}))}return Ee;case"video":return Ia({key:Z,value:O,valueSpec:ae.source_video,style:be,styleSpec:ae});case"image":return Ia({key:Z,value:O,valueSpec:ae.source_image,style:be,styleSpec:ae});case"canvas":return[new ze(Z,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Os({key:Z+".type",value:O.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:be,styleSpec:ae})}}function fo(M){var O=M.value,Z=M.styleSpec,ae=Z.light,be=M.style,Ee=[],je=ei(O);if(O===void 0)return Ee;if(je!=="object")return Ee.concat([new ze("light",O,"object expected, "+je+" found")]);for(var Qe in O){var lt=Qe.match(/^(.*)-transition$/);Ee=lt&&ae[lt[1]]&&ae[lt[1]].transition?Ee.concat(mi({key:Qe,value:O[Qe],valueSpec:Z.transition,style:be,styleSpec:Z})):ae[Qe]?Ee.concat(mi({key:Qe,value:O[Qe],valueSpec:ae[Qe],style:be,styleSpec:Z})):Ee.concat([new ze(Qe,O[Qe],'unknown property "'+Qe+'"')])}return Ee}var Ho={"*":function(){return[]},array:xs,boolean:function(M){var O=M.value,Z=M.key,ae=ei(O);return ae!=="boolean"?[new ze(Z,O,"boolean expected, "+ae+" found")]:[]},number:bs,color:function(M){var O=M.key,Z=M.value,ae=ei(Z);return ae!=="string"?[new ze(O,Z,"color expected, "+ae+" found")]:sn(Z)===null?[new ze(O,Z,'color expected, "'+Z+'" found')]:[]},constants:Ke,enum:Os,filter:Xr,function:$s,layer:el,object:Ia,source:Vo,light:fo,string:Uo,formatted:function(M){return Uo(M).length===0?[]:To(M)},resolvedImage:function(M){return Uo(M).length===0?[]:To(M)}};function mi(M){var O=M.value,Z=M.valueSpec,ae=M.styleSpec;return Z.expression&&wo(ct(O))?$s(M):Z.expression&&es(Tt(O))?To(M):Z.type&&Ho[Z.type]?Ho[Z.type](M):Ia(st({},M,{valueSpec:Z.type?ae[Z.type]:Z}))}function $a(M){var O=M.value,Z=M.key,ae=Uo(M);return ae.length||(O.indexOf("{fontstack}")===-1&&ae.push(new ze(Z,O,'"glyphs" url must include a "{fontstack}" token')),O.indexOf("{range}")===-1&&ae.push(new ze(Z,O,'"glyphs" url must include a "{range}" token'))),ae}function qo(M,O){O===void 0&&(O=Se);var Z=[];return Z=Z.concat(mi({key:"",value:M,valueSpec:O.$root,styleSpec:O,style:M,objectElementValidators:{glyphs:$a,"*":function(){return[]}}})),M.constants&&(Z=Z.concat(Ke({key:"constants",value:M.constants,style:M,styleSpec:O}))),Ri(Z)}function Ri(M){return[].concat(M).sort(function(O,Z){return O.line-Z.line})}function Yi(M){return function(){for(var O=[],Z=arguments.length;Z--;)O[Z]=arguments[Z];return Ri(M.apply(this,O))}}qo.source=Yi(Vo),qo.light=Yi(fo),qo.layer=Yi(el),qo.filter=Yi(Xr),qo.paintProperty=Yi(Ka),qo.layoutProperty=Yi(Is);var Xi=qo,Gi=Xi.light,la=Xi.paintProperty,Mo=Xi.layoutProperty;function Ra(M,O){var Z=!1;if(O&&O.length)for(var ae=0,be=O;ae<be.length;ae+=1){var Ee=be[ae];M.fire(new Ye(new Error(Ee.message))),Z=!0}return Z}var Fi=xa;function xa(M,O,Z){var ae=this.cells=[];if(M instanceof ArrayBuffer){this.arrayBuffer=M;var be=new Int32Array(this.arrayBuffer);M=be[0],O=be[1],Z=be[2],this.d=O+2*Z;for(var Ee=0;Ee<this.d*this.d;Ee++){var je=be[3+Ee],Qe=be[3+Ee+1];ae.push(je===Qe?null:be.subarray(je,Qe))}var lt=be[3+ae.length],_t=be[3+ae.length+1];this.keys=be.subarray(lt,_t),this.bboxes=be.subarray(_t),this.insert=this._insertReadonly}else{this.d=O+2*Z;for(var Mt=0;Mt<this.d*this.d;Mt++)ae.push([]);this.keys=[],this.bboxes=[]}this.n=O,this.extent=M,this.padding=Z,this.scale=O/M,this.uid=0;var Bt=Z/O*M;this.min=-Bt,this.max=M+Bt}xa.prototype.insert=function(M,O,Z,ae,be){this._forEachCell(O,Z,ae,be,this._insertCell,this.uid++),this.keys.push(M),this.bboxes.push(O),this.bboxes.push(Z),this.bboxes.push(ae),this.bboxes.push(be)},xa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},xa.prototype._insertCell=function(M,O,Z,ae,be,Ee){this.cells[be].push(Ee)},xa.prototype.query=function(M,O,Z,ae,be){var Ee=this.min,je=this.max;if(M<=Ee&&O<=Ee&&je<=Z&&je<=ae&&!be)return Array.prototype.slice.call(this.keys);var Qe=[];return this._forEachCell(M,O,Z,ae,this._queryCell,Qe,{},be),Qe},xa.prototype._queryCell=function(M,O,Z,ae,be,Ee,je,Qe){var lt=this.cells[be];if(lt!==null)for(var _t=this.keys,Mt=this.bboxes,Bt=0;Bt<lt.length;Bt++){var qt=lt[Bt];if(je[qt]===void 0){var Vt=4*qt;(Qe?Qe(Mt[Vt+0],Mt[Vt+1],Mt[Vt+2],Mt[Vt+3]):M<=Mt[Vt+2]&&O<=Mt[Vt+3]&&Z>=Mt[Vt+0]&&ae>=Mt[Vt+1])?(je[qt]=!0,Ee.push(_t[qt])):je[qt]=!1}}},xa.prototype._forEachCell=function(M,O,Z,ae,be,Ee,je,Qe){for(var lt=this._convertToCellCoord(M),_t=this._convertToCellCoord(O),Mt=this._convertToCellCoord(Z),Bt=this._convertToCellCoord(ae),qt=lt;qt<=Mt;qt++)for(var Vt=_t;Vt<=Bt;Vt++){var rn=this.d*Vt+qt;if((!Qe||Qe(this._convertFromCellCoord(qt),this._convertFromCellCoord(Vt),this._convertFromCellCoord(qt+1),this._convertFromCellCoord(Vt+1)))&&be.call(this,M,O,Z,ae,rn,Ee,je,Qe))return}},xa.prototype._convertFromCellCoord=function(M){return(M-this.padding)/this.scale},xa.prototype._convertToCellCoord=function(M){return Math.max(0,Math.min(this.d-1,Math.floor(M*this.scale)+this.padding))},xa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var M=this.cells,O=3+this.cells.length+1+1,Z=0,ae=0;ae<this.cells.length;ae++)Z+=this.cells[ae].length;var be=new Int32Array(O+Z+this.keys.length+this.bboxes.length);be[0]=this.extent,be[1]=this.n,be[2]=this.padding;for(var Ee=O,je=0;je<M.length;je++){var Qe=M[je];be[3+je]=Ee,be.set(Qe,Ee),Ee+=Qe.length}return be[3+M.length]=Ee,be.set(this.keys,Ee),Ee+=this.keys.length,be[3+M.length+1]=Ee,be.set(this.bboxes,Ee),Ee+=this.bboxes.length,be.buffer};var Rs=self.ImageData,zs=self.ImageBitmap,aa={};function _r(M,O,Z){Z===void 0&&(Z={}),Object.defineProperty(O,"_classRegistryKey",{value:M,writeable:!1}),aa[M]={klass:O,omit:Z.omit||[],shallow:Z.shallow||[]}}for(var Go in _r("Object",Object),Fi.serialize=function(M,O){var Z=M.toArrayBuffer();return O&&O.push(Z),{buffer:Z}},Fi.deserialize=function(M){return new Fi(M.buffer)},_r("Grid",Fi),_r("Color",hn),_r("Error",Error),_r("ResolvedImage",Nn),_r("StylePropertyFunction",ms),_r("StyleExpression",gs,{omit:["_evaluator"]}),_r("ZoomDependentExpression",Bo),_r("ZoomConstantExpression",Fo),_r("CompoundExpression",Gn,{omit:["_evaluate"]}),Ko)Ko[Go]._classRegistryKey||_r("Expression_"+Go,Ko[Go]);function ua(M){return M&&typeof ArrayBuffer<"u"&&(M instanceof ArrayBuffer||M.constructor&&M.constructor.name==="ArrayBuffer")}function Ds(M){return zs&&M instanceof zs}function rs(M,O){if(M==null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp)return M;if(ua(M)||Ds(M))return O&&O.push(M),M;if(ArrayBuffer.isView(M)){var Z=M;return O&&O.push(Z.buffer),Z}if(M instanceof Rs)return O&&O.push(M.data.buffer),M;if(Array.isArray(M)){for(var ae=[],be=0,Ee=M;be<Ee.length;be+=1){var je=Ee[be];ae.push(rs(je,O))}return ae}if(typeof M=="object"){var Qe=M.constructor,lt=Qe._classRegistryKey;if(!lt)throw new Error("can't serialize object of unregistered class");var _t=Qe.serialize?Qe.serialize(M,O):{};if(!Qe.serialize){for(var Mt in M)if(M.hasOwnProperty(Mt)&&!(aa[lt].omit.indexOf(Mt)>=0)){var Bt=M[Mt];_t[Mt]=aa[lt].shallow.indexOf(Mt)>=0?Bt:rs(Bt,O)}M instanceof Error&&(_t.message=M.message)}if(_t.$name)throw new Error("$name property is reserved for worker serialization logic.");return lt!=="Object"&&(_t.$name=lt),_t}throw new Error("can't serialize object of type "+typeof M)}function is(M){if(M==null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp||ua(M)||Ds(M)||ArrayBuffer.isView(M)||M instanceof Rs)return M;if(Array.isArray(M))return M.map(is);if(typeof M=="object"){var O=M.$name||"Object",Z=aa[O].klass;if(!Z)throw new Error("can't deserialize unregistered class "+O);if(Z.deserialize)return Z.deserialize(M);for(var ae=Object.create(Z.prototype),be=0,Ee=Object.keys(M);be<Ee.length;be+=1){var je=Ee[be];if(je!=="$name"){var Qe=M[je];ae[je]=aa[O].shallow.indexOf(je)>=0?Qe:is(Qe)}}return ae}throw new Error("can't deserialize object of type "+typeof M)}var as=function(){this.first=!0};as.prototype.update=function(M,O){var Z=Math.floor(M);return this.first?(this.first=!1,this.lastIntegerZoom=Z,this.lastIntegerZoomTime=0,this.lastZoom=M,this.lastFloorZoom=Z,!0):(this.lastFloorZoom>Z?(this.lastIntegerZoom=Z+1,this.lastIntegerZoomTime=O):this.lastFloorZoom<Z&&(this.lastIntegerZoom=Z,this.lastIntegerZoomTime=O),M!==this.lastZoom&&(this.lastZoom=M,this.lastFloorZoom=Z,!0))};var wr={"Latin-1 Supplement":function(M){return M>=128&&M<=255},Arabic:function(M){return M>=1536&&M<=1791},"Arabic Supplement":function(M){return M>=1872&&M<=1919},"Arabic Extended-A":function(M){return M>=2208&&M<=2303},"Hangul Jamo":function(M){return M>=4352&&M<=4607},"Unified Canadian Aboriginal Syllabics":function(M){return M>=5120&&M<=5759},Khmer:function(M){return M>=6016&&M<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(M){return M>=6320&&M<=6399},"General Punctuation":function(M){return M>=8192&&M<=8303},"Letterlike Symbols":function(M){return M>=8448&&M<=8527},"Number Forms":function(M){return M>=8528&&M<=8591},"Miscellaneous Technical":function(M){return M>=8960&&M<=9215},"Control Pictures":function(M){return M>=9216&&M<=9279},"Optical Character Recognition":function(M){return M>=9280&&M<=9311},"Enclosed Alphanumerics":function(M){return M>=9312&&M<=9471},"Geometric Shapes":function(M){return M>=9632&&M<=9727},"Miscellaneous Symbols":function(M){return M>=9728&&M<=9983},"Miscellaneous Symbols and Arrows":function(M){return M>=11008&&M<=11263},"CJK Radicals Supplement":function(M){return M>=11904&&M<=12031},"Kangxi Radicals":function(M){return M>=12032&&M<=12255},"Ideographic Description Characters":function(M){return M>=12272&&M<=12287},"CJK Symbols and Punctuation":function(M){return M>=12288&&M<=12351},Hiragana:function(M){return M>=12352&&M<=12447},Katakana:function(M){return M>=12448&&M<=12543},Bopomofo:function(M){return M>=12544&&M<=12591},"Hangul Compatibility Jamo":function(M){return M>=12592&&M<=12687},Kanbun:function(M){return M>=12688&&M<=12703},"Bopomofo Extended":function(M){return M>=12704&&M<=12735},"CJK Strokes":function(M){return M>=12736&&M<=12783},"Katakana Phonetic Extensions":function(M){return M>=12784&&M<=12799},"Enclosed CJK Letters and Months":function(M){return M>=12800&&M<=13055},"CJK Compatibility":function(M){return M>=13056&&M<=13311},"CJK Unified Ideographs Extension A":function(M){return M>=13312&&M<=19903},"Yijing Hexagram Symbols":function(M){return M>=19904&&M<=19967},"CJK Unified Ideographs":function(M){return M>=19968&&M<=40959},"Yi Syllables":function(M){return M>=40960&&M<=42127},"Yi Radicals":function(M){return M>=42128&&M<=42191},"Hangul Jamo Extended-A":function(M){return M>=43360&&M<=43391},"Hangul Syllables":function(M){return M>=44032&&M<=55215},"Hangul Jamo Extended-B":function(M){return M>=55216&&M<=55295},"Private Use Area":function(M){return M>=57344&&M<=63743},"CJK Compatibility Ideographs":function(M){return M>=63744&&M<=64255},"Arabic Presentation Forms-A":function(M){return M>=64336&&M<=65023},"Vertical Forms":function(M){return M>=65040&&M<=65055},"CJK Compatibility Forms":function(M){return M>=65072&&M<=65103},"Small Form Variants":function(M){return M>=65104&&M<=65135},"Arabic Presentation Forms-B":function(M){return M>=65136&&M<=65279},"Halfwidth and Fullwidth Forms":function(M){return M>=65280&&M<=65519}};function os(M){for(var O=0,Z=M;O<Z.length;O+=1)if(za(Z[O].charCodeAt(0)))return!0;return!1}function za(M){return!(M!==746&&M!==747&&(M<4352||!(wr["Bopomofo Extended"](M)||wr.Bopomofo(M)||wr["CJK Compatibility Forms"](M)&&!(M>=65097&&M<=65103)||wr["CJK Compatibility Ideographs"](M)||wr["CJK Compatibility"](M)||wr["CJK Radicals Supplement"](M)||wr["CJK Strokes"](M)||!(!wr["CJK Symbols and Punctuation"](M)||M>=12296&&M<=12305||M>=12308&&M<=12319||M===12336)||wr["CJK Unified Ideographs Extension A"](M)||wr["CJK Unified Ideographs"](M)||wr["Enclosed CJK Letters and Months"](M)||wr["Hangul Compatibility Jamo"](M)||wr["Hangul Jamo Extended-A"](M)||wr["Hangul Jamo Extended-B"](M)||wr["Hangul Jamo"](M)||wr["Hangul Syllables"](M)||wr.Hiragana(M)||wr["Ideographic Description Characters"](M)||wr.Kanbun(M)||wr["Kangxi Radicals"](M)||wr["Katakana Phonetic Extensions"](M)||wr.Katakana(M)&&M!==12540||!(!wr["Halfwidth and Fullwidth Forms"](M)||M===65288||M===65289||M===65293||M>=65306&&M<=65310||M===65339||M===65341||M===65343||M>=65371&&M<=65503||M===65507||M>=65512&&M<=65519)||!(!wr["Small Form Variants"](M)||M>=65112&&M<=65118||M>=65123&&M<=65126)||wr["Unified Canadian Aboriginal Syllabics"](M)||wr["Unified Canadian Aboriginal Syllabics Extended"](M)||wr["Vertical Forms"](M)||wr["Yijing Hexagram Symbols"](M)||wr["Yi Syllables"](M)||wr["Yi Radicals"](M))))}function Fs(M){return!(za(M)||function(O){return!!(wr["Latin-1 Supplement"](O)&&(O===167||O===169||O===174||O===177||O===188||O===189||O===190||O===215||O===247)||wr["General Punctuation"](O)&&(O===8214||O===8224||O===8225||O===8240||O===8241||O===8251||O===8252||O===8258||O===8263||O===8264||O===8265||O===8273)||wr["Letterlike Symbols"](O)||wr["Number Forms"](O)||wr["Miscellaneous Technical"](O)&&(O>=8960&&O<=8967||O>=8972&&O<=8991||O>=8996&&O<=9e3||O===9003||O>=9085&&O<=9114||O>=9150&&O<=9165||O===9167||O>=9169&&O<=9179||O>=9186&&O<=9215)||wr["Control Pictures"](O)&&O!==9251||wr["Optical Character Recognition"](O)||wr["Enclosed Alphanumerics"](O)||wr["Geometric Shapes"](O)||wr["Miscellaneous Symbols"](O)&&!(O>=9754&&O<=9759)||wr["Miscellaneous Symbols and Arrows"](O)&&(O>=11026&&O<=11055||O>=11088&&O<=11097||O>=11192&&O<=11243)||wr["CJK Symbols and Punctuation"](O)||wr.Katakana(O)||wr["Private Use Area"](O)||wr["CJK Compatibility Forms"](O)||wr["Small Form Variants"](O)||wr["Halfwidth and Fullwidth Forms"](O)||O===8734||O===8756||O===8757||O>=9984&&O<=10087||O>=10102&&O<=10131||O===65532||O===65533)}(M))}function Ts(M){return wr.Arabic(M)||wr["Arabic Supplement"](M)||wr["Arabic Extended-A"](M)||wr["Arabic Presentation Forms-A"](M)||wr["Arabic Presentation Forms-B"](M)}function Ji(M){return M>=1424&&M<=2303||wr["Arabic Presentation Forms-A"](M)||wr["Arabic Presentation Forms-B"](M)}function Zo(M,O){return!(!O&&Ji(M)||M>=2304&&M<=3583||M>=3840&&M<=4255||wr.Khmer(M))}function ho(M){for(var O=0,Z=M;O<Z.length;O+=1)if(Ji(Z[O].charCodeAt(0)))return!0;return!1}var ba="deferred",So="loading",Ha="loaded",Da="error",Wo=null,Ki="unavailable",Fa=null,ri=function(M){M&&typeof M=="string"&&M.indexOf("NetworkError")>-1&&(Ki=Da),Wo&&Wo(M)};function ks(){Ma.fire(new Be("pluginStateChange",{pluginStatus:Ki,pluginURL:Fa}))}var Ma=new rt,Ba=function(){return Ki},Qa=function(){if(Ki!==ba||!Fa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ki=So,ks(),Fa&&Lt({url:Fa},function(M){M?ri(M):(Ki=Ha,ks())})},ca={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ki===Ha||ca.applyArabicShaping!=null},isLoading:function(){return Ki===So},setState:function(M){Ki=M.pluginStatus,Fa=M.pluginURL},isParsed:function(){return ca.applyArabicShaping!=null&&ca.processBidirectionalText!=null&&ca.processStyledBidirectionalText!=null},getPluginURL:function(){return Fa}},ni=function(M,O){this.zoom=M,O?(this.now=O.now,this.fadeDuration=O.fadeDuration,this.zoomHistory=O.zoomHistory,this.transition=O.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new as,this.transition={})};ni.prototype.isSupportedScript=function(M){return function(O,Z){for(var ae=0,be=O;ae<be.length;ae+=1)if(!Zo(be[ae].charCodeAt(0),Z))return!1;return!0}(M,ca.isLoaded())},ni.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ni.prototype.getCrossfadeParameters=function(){var M=this.zoom,O=M-Math.floor(M),Z=this.crossFadingFactor();return M>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:O+(1-O)*Z}:{fromScale:.5,toScale:1,t:1-(1-Z)*O}};var Hi=function(M,O){this.property=M,this.value=O,this.expression=function(Z,ae){if(wo(Z))return new ms(Z,ae);if(es(Z)){var be=ts(Z,ae);if(be.result==="error")throw new Error(be.value.map(function(je){return je.key+": "+je.message}).join(", "));return be.value}var Ee=Z;return typeof Z=="string"&&ae.type==="color"&&(Ee=hn.parse(Z)),{kind:"constant",evaluate:function(){return Ee}}}(O===void 0?M.specification.default:O,M.specification)};Hi.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Hi.prototype.possiblyEvaluate=function(M,O,Z){return this.property.possiblyEvaluate(this,M,O,Z)};var qa=function(M){this.property=M,this.value=new Hi(M,void 0)};qa.prototype.transitioned=function(M,O){return new eo(this.property,this.value,O,c({},M.transition,this.transition),M.now)},qa.prototype.untransitioned=function(){return new eo(this.property,this.value,null,{},0)};var fa=function(M){this._properties=M,this._values=Object.create(M.defaultTransitionablePropertyValues)};fa.prototype.getValue=function(M){return w(this._values[M].value.value)},fa.prototype.setValue=function(M,O){this._values.hasOwnProperty(M)||(this._values[M]=new qa(this._values[M].property)),this._values[M].value=new Hi(this._values[M].property,O===null?void 0:w(O))},fa.prototype.getTransition=function(M){return w(this._values[M].transition)},fa.prototype.setTransition=function(M,O){this._values.hasOwnProperty(M)||(this._values[M]=new qa(this._values[M].property)),this._values[M].transition=w(O)||void 0},fa.prototype.serialize=function(){for(var M={},O=0,Z=Object.keys(this._values);O<Z.length;O+=1){var ae=Z[O],be=this.getValue(ae);be!==void 0&&(M[ae]=be);var Ee=this.getTransition(ae);Ee!==void 0&&(M[ae+"-transition"]=Ee)}return M},fa.prototype.transitioned=function(M,O){for(var Z=new Eo(this._properties),ae=0,be=Object.keys(this._values);ae<be.length;ae+=1){var Ee=be[ae];Z._values[Ee]=this._values[Ee].transitioned(M,O._values[Ee])}return Z},fa.prototype.untransitioned=function(){for(var M=new Eo(this._properties),O=0,Z=Object.keys(this._values);O<Z.length;O+=1){var ae=Z[O];M._values[ae]=this._values[ae].untransitioned()}return M};var eo=function(M,O,Z,ae,be){this.property=M,this.value=O,this.begin=be+ae.delay||0,this.end=this.begin+ae.duration||0,M.specification.transition&&(ae.delay||ae.duration)&&(this.prior=Z)};eo.prototype.possiblyEvaluate=function(M,O,Z){var ae=M.now||0,be=this.value.possiblyEvaluate(M,O,Z),Ee=this.prior;if(Ee){if(ae>this.end)return this.prior=null,be;if(this.value.isDataDriven())return this.prior=null,be;if(ae<this.begin)return Ee.possiblyEvaluate(M,O,Z);var je=(ae-this.begin)/(this.end-this.begin);return this.property.interpolate(Ee.possiblyEvaluate(M,O,Z),be,function(Qe){if(Qe<=0)return 0;if(Qe>=1)return 1;var lt=Qe*Qe,_t=lt*Qe;return 4*(Qe<.5?_t:3*(Qe-lt)+_t-.75)}(je))}return be};var Eo=function(M){this._properties=M,this._values=Object.create(M.defaultTransitioningPropertyValues)};Eo.prototype.possiblyEvaluate=function(M,O,Z){for(var ae=new Na(this._properties),be=0,Ee=Object.keys(this._values);be<Ee.length;be+=1){var je=Ee[be];ae._values[je]=this._values[je].possiblyEvaluate(M,O,Z)}return ae},Eo.prototype.hasTransition=function(){for(var M=0,O=Object.keys(this._values);M<O.length;M+=1){var Z=O[M];if(this._values[Z].prior)return!0}return!1};var po=function(M){this._properties=M,this._values=Object.create(M.defaultPropertyValues)};po.prototype.getValue=function(M){return w(this._values[M].value)},po.prototype.setValue=function(M,O){this._values[M]=new Hi(this._values[M].property,O===null?void 0:w(O))},po.prototype.serialize=function(){for(var M={},O=0,Z=Object.keys(this._values);O<Z.length;O+=1){var ae=Z[O],be=this.getValue(ae);be!==void 0&&(M[ae]=be)}return M},po.prototype.possiblyEvaluate=function(M,O,Z){for(var ae=new Na(this._properties),be=0,Ee=Object.keys(this._values);be<Ee.length;be+=1){var je=Ee[be];ae._values[je]=this._values[je].possiblyEvaluate(M,O,Z)}return ae};var $i=function(M,O,Z){this.property=M,this.value=O,this.parameters=Z};$i.prototype.isConstant=function(){return this.value.kind==="constant"},$i.prototype.constantOr=function(M){return this.value.kind==="constant"?this.value.value:M},$i.prototype.evaluate=function(M,O,Z,ae){return this.property.evaluate(this.value,this.parameters,M,O,Z,ae)};var Na=function(M){this._properties=M,this._values=Object.create(M.defaultPossiblyEvaluatedValues)};Na.prototype.get=function(M){return this._values[M]};var Mr=function(M){this.specification=M};Mr.prototype.possiblyEvaluate=function(M,O){return M.expression.evaluate(O)},Mr.prototype.interpolate=function(M,O,Z){var ae=cr[this.specification.type];return ae?ae(M,O,Z):M};var Or=function(M,O){this.specification=M,this.overrides=O};Or.prototype.possiblyEvaluate=function(M,O,Z,ae){return M.expression.kind==="constant"||M.expression.kind==="camera"?new $i(this,{kind:"constant",value:M.expression.evaluate(O,null,{},Z,ae)},O):new $i(this,M.expression,O)},Or.prototype.interpolate=function(M,O,Z){if(M.value.kind!=="constant"||O.value.kind!=="constant")return M;if(M.value.value===void 0||O.value.value===void 0)return new $i(this,{kind:"constant",value:void 0},M.parameters);var ae=cr[this.specification.type];return ae?new $i(this,{kind:"constant",value:ae(M.value.value,O.value.value,Z)},M.parameters):M},Or.prototype.evaluate=function(M,O,Z,ae,be,Ee){return M.kind==="constant"?M.value:M.evaluate(O,Z,ae,be,Ee)};var ss=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.possiblyEvaluate=function(Z,ae,be,Ee){if(Z.value===void 0)return new $i(this,{kind:"constant",value:void 0},ae);if(Z.expression.kind==="constant"){var je=Z.expression.evaluate(ae,null,{},be,Ee),Qe=Z.property.specification.type==="resolvedImage"&&typeof je!="string"?je.name:je,lt=this._calculate(Qe,Qe,Qe,ae);return new $i(this,{kind:"constant",value:lt},ae)}if(Z.expression.kind==="camera"){var _t=this._calculate(Z.expression.evaluate({zoom:ae.zoom-1}),Z.expression.evaluate({zoom:ae.zoom}),Z.expression.evaluate({zoom:ae.zoom+1}),ae);return new $i(this,{kind:"constant",value:_t},ae)}return new $i(this,Z.expression,ae)},O.prototype.evaluate=function(Z,ae,be,Ee,je,Qe){if(Z.kind==="source"){var lt=Z.evaluate(ae,be,Ee,je,Qe);return this._calculate(lt,lt,lt,ae)}return Z.kind==="composite"?this._calculate(Z.evaluate({zoom:Math.floor(ae.zoom)-1},be,Ee),Z.evaluate({zoom:Math.floor(ae.zoom)},be,Ee),Z.evaluate({zoom:Math.floor(ae.zoom)+1},be,Ee),ae):Z.value},O.prototype._calculate=function(Z,ae,be,Ee){return Ee.zoom>Ee.zoomHistory.lastIntegerZoom?{from:Z,to:ae}:{from:be,to:ae}},O.prototype.interpolate=function(Z){return Z},O}(Or),go=function(M){this.specification=M};go.prototype.possiblyEvaluate=function(M,O,Z,ae){if(M.value!==void 0){if(M.expression.kind==="constant"){var be=M.expression.evaluate(O,null,{},Z,ae);return this._calculate(be,be,be,O)}return this._calculate(M.expression.evaluate(new ni(Math.floor(O.zoom-1),O)),M.expression.evaluate(new ni(Math.floor(O.zoom),O)),M.expression.evaluate(new ni(Math.floor(O.zoom+1),O)),O)}},go.prototype._calculate=function(M,O,Z,ae){return ae.zoom>ae.zoomHistory.lastIntegerZoom?{from:M,to:O}:{from:Z,to:O}},go.prototype.interpolate=function(M){return M};var Ga=function(M){this.specification=M};Ga.prototype.possiblyEvaluate=function(M,O,Z,ae){return!!M.expression.evaluate(O,null,{},Z,ae)},Ga.prototype.interpolate=function(){return!1};var Qi=function(M){for(var O in this.properties=M,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],M){var Z=M[O];Z.specification.overridable&&this.overridableProperties.push(O);var ae=this.defaultPropertyValues[O]=new Hi(Z,void 0),be=this.defaultTransitionablePropertyValues[O]=new qa(Z);this.defaultTransitioningPropertyValues[O]=be.untransitioned(),this.defaultPossiblyEvaluatedValues[O]=ae.possiblyEvaluate({})}};_r("DataDrivenProperty",Or),_r("DataConstantProperty",Mr),_r("CrossFadedDataDrivenProperty",ss),_r("CrossFadedProperty",go),_r("ColorRampProperty",Ga);var Bs="-transition",ha=function(M){function O(Z,ae){if(M.call(this),this.id=Z.id,this.type=Z.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},Z.type!=="custom"&&(this.metadata=Z.metadata,this.minzoom=Z.minzoom,this.maxzoom=Z.maxzoom,Z.type!=="background"&&(this.source=Z.source,this.sourceLayer=Z["source-layer"],this.filter=Z.filter),ae.layout&&(this._unevaluatedLayout=new po(ae.layout)),ae.paint)){for(var be in this._transitionablePaint=new fa(ae.paint),Z.paint)this.setPaintProperty(be,Z.paint[be],{validate:!1});for(var Ee in Z.layout)this.setLayoutProperty(Ee,Z.layout[Ee],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Na(ae.paint)}}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},O.prototype.getLayoutProperty=function(Z){return Z==="visibility"?this.visibility:this._unevaluatedLayout.getValue(Z)},O.prototype.setLayoutProperty=function(Z,ae,be){if(be===void 0&&(be={}),ae!=null){var Ee="layers."+this.id+".layout."+Z;if(this._validate(Mo,Ee,Z,ae,be))return}Z!=="visibility"?this._unevaluatedLayout.setValue(Z,ae):this.visibility=ae},O.prototype.getPaintProperty=function(Z){return y(Z,Bs)?this._transitionablePaint.getTransition(Z.slice(0,-Bs.length)):this._transitionablePaint.getValue(Z)},O.prototype.setPaintProperty=function(Z,ae,be){if(be===void 0&&(be={}),ae!=null){var Ee="layers."+this.id+".paint."+Z;if(this._validate(la,Ee,Z,ae,be))return!1}if(y(Z,Bs))return this._transitionablePaint.setTransition(Z.slice(0,-Bs.length),ae||void 0),!1;var je=this._transitionablePaint._values[Z],Qe=je.property.specification["property-type"]==="cross-faded-data-driven",lt=je.value.isDataDriven(),_t=je.value;this._transitionablePaint.setValue(Z,ae),this._handleSpecialPaintPropertyUpdate(Z);var Mt=this._transitionablePaint._values[Z].value;return Mt.isDataDriven()||lt||Qe||this._handleOverridablePaintPropertyUpdate(Z,_t,Mt)},O.prototype._handleSpecialPaintPropertyUpdate=function(Z){},O.prototype._handleOverridablePaintPropertyUpdate=function(Z,ae,be){return!1},O.prototype.isHidden=function(Z){return!!(this.minzoom&&Z<this.minzoom)||!!(this.maxzoom&&Z>=this.maxzoom)||this.visibility==="none"},O.prototype.updateTransitions=function(Z){this._transitioningPaint=this._transitionablePaint.transitioned(Z,this._transitioningPaint)},O.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},O.prototype.recalculate=function(Z,ae){Z.getCrossfadeParameters&&(this._crossfadeParameters=Z.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Z,void 0,ae)),this.paint=this._transitioningPaint.possiblyEvaluate(Z,void 0,ae)},O.prototype.serialize=function(){var Z={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Z.layout=Z.layout||{},Z.layout.visibility=this.visibility),m(Z,function(ae,be){return!(ae===void 0||be==="layout"&&!Object.keys(ae).length||be==="paint"&&!Object.keys(ae).length)})},O.prototype._validate=function(Z,ae,be,Ee,je){return je===void 0&&(je={}),(!je||je.validate!==!1)&&Ra(this,Z.call(Xi,{key:ae,layerType:this.type,objectKey:be,value:Ee,styleSpec:Se,style:{glyphs:!0,sprite:!0}}))},O.prototype.is3D=function(){return!1},O.prototype.isTileClipped=function(){return!1},O.prototype.hasOffscreenPass=function(){return!1},O.prototype.resize=function(){},O.prototype.isStateDependent=function(){for(var Z in this.paint._values){var ae=this.paint.get(Z);if(ae instanceof $i&&$o(ae.property.specification)&&(ae.value.kind==="source"||ae.value.kind==="composite")&&ae.value.isStateDependent)return!0}return!1},O}(rt),ls={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},vo=function(M,O){this._structArray=M,this._pos1=O*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},oi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function fi(M,O){O===void 0&&(O=1);var Z=0,ae=0;return{members:M.map(function(be){var Ee,je=(Ee=be.type,ls[Ee].BYTES_PER_ELEMENT),Qe=Z=Ns(Z,Math.max(O,je)),lt=be.components||1;return ae=Math.max(ae,je),Z+=je*lt,{name:be.name,type:be.type,components:lt,offset:Qe}}),size:Ns(Z,Math.max(ae,O)),alignment:O}}function Ns(M,O){return Math.ceil(M/O)*O}oi.serialize=function(M,O){return M._trim(),O&&(M.isTransferred=!0,O.push(M.arrayBuffer)),{length:M.length,arrayBuffer:M.arrayBuffer}},oi.deserialize=function(M){var O=Object.create(this.prototype);return O.arrayBuffer=M.arrayBuffer,O.length=M.length,O.capacity=M.arrayBuffer.byteLength/O.bytesPerElement,O._refreshViews(),O},oi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},oi.prototype.clear=function(){this.length=0},oi.prototype.resize=function(M){this.reserve(M),this.length=M},oi.prototype.reserve=function(M){if(M>this.capacity){this.capacity=Math.max(M,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var O=this.uint8;this._refreshViews(),O&&this.uint8.set(O)}},oi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Xe=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae){var be=this.length;return this.resize(be+1),this.emplace(be,Z,ae)},O.prototype.emplace=function(Z,ae,be){var Ee=2*Z;return this.int16[Ee+0]=ae,this.int16[Ee+1]=be,Z},O}(oi);Xe.prototype.bytesPerElement=4,_r("StructArrayLayout2i4",Xe);var $e=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,be,Ee){var je=this.length;return this.resize(je+1),this.emplace(je,Z,ae,be,Ee)},O.prototype.emplace=function(Z,ae,be,Ee,je){var Qe=4*Z;return this.int16[Qe+0]=ae,this.int16[Qe+1]=be,this.int16[Qe+2]=Ee,this.int16[Qe+3]=je,Z},O}(oi);$e.prototype.bytesPerElement=8,_r("StructArrayLayout4i8",$e);var at=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,be,Ee,je,Qe){var lt=this.length;return this.resize(lt+1),this.emplace(lt,Z,ae,be,Ee,je,Qe)},O.prototype.emplace=function(Z,ae,be,Ee,je,Qe,lt){var _t=6*Z;return this.int16[_t+0]=ae,this.int16[_t+1]=be,this.int16[_t+2]=Ee,this.int16[_t+3]=je,this.int16[_t+4]=Qe,this.int16[_t+5]=lt,Z},O}(oi);at.prototype.bytesPerElement=12,_r("StructArrayLayout2i4i12",at);var ft=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,be,Ee,je,Qe){var lt=this.length;return this.resize(lt+1),this.emplace(lt,Z,ae,be,Ee,je,Qe)},O.prototype.emplace=function(Z,ae,be,Ee,je,Qe,lt){var _t=4*Z,Mt=8*Z;return this.int16[_t+0]=ae,this.int16[_t+1]=be,this.uint8[Mt+4]=Ee,this.uint8[Mt+5]=je,this.uint8[Mt+6]=Qe,this.uint8[Mt+7]=lt,Z},O}(oi);ft.prototype.bytesPerElement=8,_r("StructArrayLayout2i4ub8",ft);var bt=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,be,Ee,je,Qe,lt,_t,Mt,Bt){var qt=this.length;return this.resize(qt+1),this.emplace(qt,Z,ae,be,Ee,je,Qe,lt,_t,Mt,Bt)},O.prototype.emplace=function(Z,ae,be,Ee,je,Qe,lt,_t,Mt,Bt,qt){var Vt=9*Z,rn=18*Z;return this.uint16[Vt+0]=ae,this.uint16[Vt+1]=be,this.uint16[Vt+2]=Ee,this.uint16[Vt+3]=je,this.uint16[Vt+4]=Qe,this.uint16[Vt+5]=lt,this.uint16[Vt+6]=_t,this.uint16[Vt+7]=Mt,this.uint8[rn+16]=Bt,this.uint8[rn+17]=qt,Z},O}(oi);bt.prototype.bytesPerElement=18,_r("StructArrayLayout8ui2ub18",bt);var yt=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,be,Ee,je,Qe,lt,_t,Mt,Bt,qt,Vt){var rn=this.length;return this.resize(rn+1),this.emplace(rn,Z,ae,be,Ee,je,Qe,lt,_t,Mt,Bt,qt,Vt)},O.prototype.emplace=function(Z,ae,be,Ee,je,Qe,lt,_t,Mt,Bt,qt,Vt,rn){var xn=12*Z;return this.int16[xn+0]=ae,this.int16[xn+1]=be,this.int16[xn+2]=Ee,this.int16[xn+3]=je,this.uint16[xn+4]=Qe,this.uint16[xn+5]=lt,this.uint16[xn+6]=_t,this.uint16[xn+7]=Mt,this.int16[xn+8]=Bt,this.int16[xn+9]=qt,this.int16[xn+10]=Vt,this.int16[xn+11]=rn,Z},O}(oi);yt.prototype.bytesPerElement=24,_r("StructArrayLayout4i4ui4i24",yt);var D=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,be){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,Z,ae,be)},O.prototype.emplace=function(Z,ae,be,Ee){var je=3*Z;return this.float32[je+0]=ae,this.float32[je+1]=be,this.float32[je+2]=Ee,Z},O}(oi);D.prototype.bytesPerElement=12,_r("StructArrayLayout3f12",D);var Y=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z){var ae=this.length;return this.resize(ae+1),this.emplace(ae,Z)},O.prototype.emplace=function(Z,ae){var be=1*Z;return this.uint32[be+0]=ae,Z},O}(oi);Y.prototype.bytesPerElement=4,_r("StructArrayLayout1ul4",Y);var q=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,be,Ee,je,Qe,lt,_t,Mt){var Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,Z,ae,be,Ee,je,Qe,lt,_t,Mt)},O.prototype.emplace=function(Z,ae,be,Ee,je,Qe,lt,_t,Mt,Bt){var qt=10*Z,Vt=5*Z;return this.int16[qt+0]=ae,this.int16[qt+1]=be,this.int16[qt+2]=Ee,this.int16[qt+3]=je,this.int16[qt+4]=Qe,this.int16[qt+5]=lt,this.uint32[Vt+3]=_t,this.uint16[qt+8]=Mt,this.uint16[qt+9]=Bt,Z},O}(oi);q.prototype.bytesPerElement=20,_r("StructArrayLayout6i1ul2ui20",q);var ne=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,be,Ee,je,Qe){var lt=this.length;return this.resize(lt+1),this.emplace(lt,Z,ae,be,Ee,je,Qe)},O.prototype.emplace=function(Z,ae,be,Ee,je,Qe,lt){var _t=6*Z;return this.int16[_t+0]=ae,this.int16[_t+1]=be,this.int16[_t+2]=Ee,this.int16[_t+3]=je,this.int16[_t+4]=Qe,this.int16[_t+5]=lt,Z},O}(oi);ne.prototype.bytesPerElement=12,_r("StructArrayLayout2i2i2i12",ne);var pe=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,be,Ee,je){var Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,Z,ae,be,Ee,je)},O.prototype.emplace=function(Z,ae,be,Ee,je,Qe){var lt=4*Z,_t=8*Z;return this.float32[lt+0]=ae,this.float32[lt+1]=be,this.float32[lt+2]=Ee,this.int16[_t+6]=je,this.int16[_t+7]=Qe,Z},O}(oi);pe.prototype.bytesPerElement=16,_r("StructArrayLayout2f1f2i16",pe);var Le=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,be,Ee){var je=this.length;return this.resize(je+1),this.emplace(je,Z,ae,be,Ee)},O.prototype.emplace=function(Z,ae,be,Ee,je){var Qe=12*Z,lt=3*Z;return this.uint8[Qe+0]=ae,this.uint8[Qe+1]=be,this.float32[lt+1]=Ee,this.float32[lt+2]=je,Z},O}(oi);Le.prototype.bytesPerElement=12,_r("StructArrayLayout2ub2f12",Le);var Ne=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,be){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,Z,ae,be)},O.prototype.emplace=function(Z,ae,be,Ee){var je=3*Z;return this.uint16[je+0]=ae,this.uint16[je+1]=be,this.uint16[je+2]=Ee,Z},O}(oi);Ne.prototype.bytesPerElement=6,_r("StructArrayLayout3ui6",Ne);var qe=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,be,Ee,je,Qe,lt,_t,Mt,Bt,qt,Vt,rn,xn,In,On,jn){var Vn=this.length;return this.resize(Vn+1),this.emplace(Vn,Z,ae,be,Ee,je,Qe,lt,_t,Mt,Bt,qt,Vt,rn,xn,In,On,jn)},O.prototype.emplace=function(Z,ae,be,Ee,je,Qe,lt,_t,Mt,Bt,qt,Vt,rn,xn,In,On,jn,Vn){var Yn=24*Z,Qn=12*Z,tr=48*Z;return this.int16[Yn+0]=ae,this.int16[Yn+1]=be,this.uint16[Yn+2]=Ee,this.uint16[Yn+3]=je,this.uint32[Qn+2]=Qe,this.uint32[Qn+3]=lt,this.uint32[Qn+4]=_t,this.uint16[Yn+10]=Mt,this.uint16[Yn+11]=Bt,this.uint16[Yn+12]=qt,this.float32[Qn+7]=Vt,this.float32[Qn+8]=rn,this.uint8[tr+36]=xn,this.uint8[tr+37]=In,this.uint8[tr+38]=On,this.uint32[Qn+10]=jn,this.int16[Yn+22]=Vn,Z},O}(oi);qe.prototype.bytesPerElement=48,_r("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",qe);var et=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,be,Ee,je,Qe,lt,_t,Mt,Bt,qt,Vt,rn,xn,In,On,jn,Vn,Yn,Qn,tr,xr,pr,Tr,Er,jr,Pr,Nr){var Ir=this.length;return this.resize(Ir+1),this.emplace(Ir,Z,ae,be,Ee,je,Qe,lt,_t,Mt,Bt,qt,Vt,rn,xn,In,On,jn,Vn,Yn,Qn,tr,xr,pr,Tr,Er,jr,Pr,Nr)},O.prototype.emplace=function(Z,ae,be,Ee,je,Qe,lt,_t,Mt,Bt,qt,Vt,rn,xn,In,On,jn,Vn,Yn,Qn,tr,xr,pr,Tr,Er,jr,Pr,Nr,Ir){var Cr=34*Z,Jr=17*Z;return this.int16[Cr+0]=ae,this.int16[Cr+1]=be,this.int16[Cr+2]=Ee,this.int16[Cr+3]=je,this.int16[Cr+4]=Qe,this.int16[Cr+5]=lt,this.int16[Cr+6]=_t,this.int16[Cr+7]=Mt,this.uint16[Cr+8]=Bt,this.uint16[Cr+9]=qt,this.uint16[Cr+10]=Vt,this.uint16[Cr+11]=rn,this.uint16[Cr+12]=xn,this.uint16[Cr+13]=In,this.uint16[Cr+14]=On,this.uint16[Cr+15]=jn,this.uint16[Cr+16]=Vn,this.uint16[Cr+17]=Yn,this.uint16[Cr+18]=Qn,this.uint16[Cr+19]=tr,this.uint16[Cr+20]=xr,this.uint16[Cr+21]=pr,this.uint16[Cr+22]=Tr,this.uint32[Jr+12]=Er,this.float32[Jr+13]=jr,this.float32[Jr+14]=Pr,this.float32[Jr+15]=Nr,this.float32[Jr+16]=Ir,Z},O}(oi);et.prototype.bytesPerElement=68,_r("StructArrayLayout8i15ui1ul4f68",et);var vt=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z){var ae=this.length;return this.resize(ae+1),this.emplace(ae,Z)},O.prototype.emplace=function(Z,ae){var be=1*Z;return this.float32[be+0]=ae,Z},O}(oi);vt.prototype.bytesPerElement=4,_r("StructArrayLayout1f4",vt);var xt=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,be){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,Z,ae,be)},O.prototype.emplace=function(Z,ae,be,Ee){var je=3*Z;return this.int16[je+0]=ae,this.int16[je+1]=be,this.int16[je+2]=Ee,Z},O}(oi);xt.prototype.bytesPerElement=6,_r("StructArrayLayout3i6",xt);var te=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,be){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,Z,ae,be)},O.prototype.emplace=function(Z,ae,be,Ee){var je=2*Z,Qe=4*Z;return this.uint32[je+0]=ae,this.uint16[Qe+2]=be,this.uint16[Qe+3]=Ee,Z},O}(oi);te.prototype.bytesPerElement=8,_r("StructArrayLayout1ul2ui8",te);var ue=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae){var be=this.length;return this.resize(be+1),this.emplace(be,Z,ae)},O.prototype.emplace=function(Z,ae,be){var Ee=2*Z;return this.uint16[Ee+0]=ae,this.uint16[Ee+1]=be,Z},O}(oi);ue.prototype.bytesPerElement=4,_r("StructArrayLayout2ui4",ue);var we=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z){var ae=this.length;return this.resize(ae+1),this.emplace(ae,Z)},O.prototype.emplace=function(Z,ae){var be=1*Z;return this.uint16[be+0]=ae,Z},O}(oi);we.prototype.bytesPerElement=2,_r("StructArrayLayout1ui2",we);var Pe=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae){var be=this.length;return this.resize(be+1),this.emplace(be,Z,ae)},O.prototype.emplace=function(Z,ae,be){var Ee=2*Z;return this.float32[Ee+0]=ae,this.float32[Ee+1]=be,Z},O}(oi);Pe.prototype.bytesPerElement=8,_r("StructArrayLayout2f8",Pe);var De=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ae,be,Ee){var je=this.length;return this.resize(je+1),this.emplace(je,Z,ae,be,Ee)},O.prototype.emplace=function(Z,ae,be,Ee,je){var Qe=4*Z;return this.float32[Qe+0]=ae,this.float32[Qe+1]=be,this.float32[Qe+2]=Ee,this.float32[Qe+3]=je,Z},O}(oi);De.prototype.bytesPerElement=16,_r("StructArrayLayout4f16",De);var Ue=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O;var Z={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Z.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Z.x1.get=function(){return this._structArray.int16[this._pos2+2]},Z.y1.get=function(){return this._structArray.int16[this._pos2+3]},Z.x2.get=function(){return this._structArray.int16[this._pos2+4]},Z.y2.get=function(){return this._structArray.int16[this._pos2+5]},Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(O.prototype,Z),O}(vo);Ue.prototype.size=20;var Ze=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.get=function(Z){return new Ue(this,Z)},O}(q);_r("CollisionBoxArray",Ze);var Je=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Z.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Z.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Z.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Z.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Z.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Z.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Z.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Z.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Z.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Z.placedOrientation.set=function(ae){this._structArray.uint8[this._pos1+37]=ae},Z.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Z.hidden.set=function(ae){this._structArray.uint8[this._pos1+38]=ae},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Z.crossTileID.set=function(ae){this._structArray.uint32[this._pos4+10]=ae},Z.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(O.prototype,Z),O}(vo);Je.prototype.size=48;var it=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.get=function(Z){return new Je(this,Z)},O}(qe);_r("PlacedSymbolArray",it);var ut=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Z.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Z.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Z.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Z.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Z.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Z.key.get=function(){return this._structArray.uint16[this._pos2+8]},Z.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Z.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Z.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Z.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Z.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Z.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Z.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Z.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Z.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Z.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Z.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Z.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Z.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Z.crossTileID.set=function(ae){this._structArray.uint32[this._pos4+12]=ae},Z.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Z.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Z.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Z.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(O.prototype,Z),O}(vo);ut.prototype.size=68;var St=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.get=function(Z){return new ut(this,Z)},O}(et);_r("SymbolInstanceArray",St);var Dt=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.getoffsetX=function(Z){return this.float32[1*Z+0]},O}(vt);_r("GlyphOffsetArray",Dt);var Ft=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.getx=function(Z){return this.int16[3*Z+0]},O.prototype.gety=function(Z){return this.int16[3*Z+1]},O.prototype.gettileUnitDistanceFromAnchor=function(Z){return this.int16[3*Z+2]},O}(xt);_r("SymbolLineVertexArray",Ft);var Yt=function(M){function O(){M.apply(this,arguments)}M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O;var Z={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(O.prototype,Z),O}(vo);Yt.prototype.size=8;var ln=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.get=function(Z){return new Yt(this,Z)},O}(te);_r("FeatureIndexArray",ln);var Xt=fi([{name:"a_pos",components:2,type:"Int16"}],4).members,en=function(M){M===void 0&&(M=[]),this.segments=M};function Jt(M,O){return 256*(M=a(Math.floor(M),0,255))+a(Math.floor(O),0,255)}en.prototype.prepareSegment=function(M,O,Z,ae){var be=this.segments[this.segments.length-1];return M>en.MAX_VERTEX_ARRAY_LENGTH&&S("Max vertices per segment is "+en.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+M),(!be||be.vertexLength+M>en.MAX_VERTEX_ARRAY_LENGTH||be.sortKey!==ae)&&(be={vertexOffset:O.length,primitiveOffset:Z.length,vertexLength:0,primitiveLength:0},ae!==void 0&&(be.sortKey=ae),this.segments.push(be)),be},en.prototype.get=function(){return this.segments},en.prototype.destroy=function(){for(var M=0,O=this.segments;M<O.length;M+=1){var Z=O[M];for(var ae in Z.vaos)Z.vaos[ae].destroy()}},en.simpleSegment=function(M,O,Z,ae){return new en([{vertexOffset:M,primitiveOffset:O,vertexLength:Z,primitiveLength:ae,vaos:{},sortKey:0}])},en.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,_r("SegmentVector",en);var bn=fi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),gn=T(function(M){M.exports=function(O,Z){var ae,be,Ee,je,Qe,lt,_t,Mt;for(ae=3&O.length,be=O.length-ae,Ee=Z,Qe=3432918353,lt=461845907,Mt=0;Mt<be;)_t=255&O.charCodeAt(Mt)|(255&O.charCodeAt(++Mt))<<8|(255&O.charCodeAt(++Mt))<<16|(255&O.charCodeAt(++Mt))<<24,++Mt,Ee=27492+(65535&(je=5*(65535&(Ee=(Ee^=_t=(65535&(_t=(_t=(65535&_t)*Qe+(((_t>>>16)*Qe&65535)<<16)&4294967295)<<15|_t>>>17))*lt+(((_t>>>16)*lt&65535)<<16)&4294967295)<<13|Ee>>>19))+((5*(Ee>>>16)&65535)<<16)&4294967295))+((58964+(je>>>16)&65535)<<16);switch(_t=0,ae){case 3:_t^=(255&O.charCodeAt(Mt+2))<<16;case 2:_t^=(255&O.charCodeAt(Mt+1))<<8;case 1:Ee^=_t=(65535&(_t=(_t=(65535&(_t^=255&O.charCodeAt(Mt)))*Qe+(((_t>>>16)*Qe&65535)<<16)&4294967295)<<15|_t>>>17))*lt+(((_t>>>16)*lt&65535)<<16)&4294967295}return Ee^=O.length,Ee=2246822507*(65535&(Ee^=Ee>>>16))+((2246822507*(Ee>>>16)&65535)<<16)&4294967295,Ee=3266489909*(65535&(Ee^=Ee>>>13))+((3266489909*(Ee>>>16)&65535)<<16)&4294967295,(Ee^=Ee>>>16)>>>0}}),Qt=T(function(M){M.exports=function(O,Z){for(var ae,be=O.length,Ee=Z^be,je=0;be>=4;)ae=1540483477*(65535&(ae=255&O.charCodeAt(je)|(255&O.charCodeAt(++je))<<8|(255&O.charCodeAt(++je))<<16|(255&O.charCodeAt(++je))<<24))+((1540483477*(ae>>>16)&65535)<<16),Ee=1540483477*(65535&Ee)+((1540483477*(Ee>>>16)&65535)<<16)^(ae=1540483477*(65535&(ae^=ae>>>24))+((1540483477*(ae>>>16)&65535)<<16)),be-=4,++je;switch(be){case 3:Ee^=(255&O.charCodeAt(je+2))<<16;case 2:Ee^=(255&O.charCodeAt(je+1))<<8;case 1:Ee=1540483477*(65535&(Ee^=255&O.charCodeAt(je)))+((1540483477*(Ee>>>16)&65535)<<16)}return Ee=1540483477*(65535&(Ee^=Ee>>>13))+((1540483477*(Ee>>>16)&65535)<<16),(Ee^=Ee>>>15)>>>0}}),Pn=gn,Dn=gn,Xn=Qt;Pn.murmur3=Dn,Pn.murmur2=Xn;var Jn=function(){this.ids=[],this.positions=[],this.indexed=!1};Jn.prototype.add=function(M,O,Z,ae){this.ids.push(vr(M)),this.positions.push(O,Z,ae)},Jn.prototype.getPositions=function(M){for(var O=vr(M),Z=0,ae=this.ids.length-1;Z<ae;){var be=Z+ae>>1;this.ids[be]>=O?ae=be:Z=be+1}for(var Ee=[];this.ids[Z]===O;){var je=this.positions[3*Z],Qe=this.positions[3*Z+1],lt=this.positions[3*Z+2];Ee.push({index:je,start:Qe,end:lt}),Z++}return Ee},Jn.serialize=function(M,O){var Z=new Float64Array(M.ids),ae=new Uint32Array(M.positions);return sr(Z,ae,0,Z.length-1),O&&O.push(Z.buffer,ae.buffer),{ids:Z,positions:ae}},Jn.deserialize=function(M){var O=new Jn;return O.ids=M.ids,O.positions=M.positions,O.indexed=!0,O};var gr=Math.pow(2,53)-1;function vr(M){var O=+M;return!isNaN(O)&&O<=gr?O:Pn(String(M))}function sr(M,O,Z,ae){for(;Z<ae;){for(var be=M[Z+ae>>1],Ee=Z-1,je=ae+1;;){do Ee++;while(M[Ee]<be);do je--;while(M[je]>be);if(Ee>=je)break;dr(M,Ee,je),dr(O,3*Ee,3*je),dr(O,3*Ee+1,3*je+1),dr(O,3*Ee+2,3*je+2)}je-Z<ae-je?(sr(M,O,Z,je),Z=je+1):(sr(M,O,je+1,ae),ae=je)}}function dr(M,O,Z){var ae=M[O];M[O]=M[Z],M[Z]=ae}_r("FeaturePositionMap",Jn);var kr=function(M,O){this.gl=M.gl,this.location=O},Vr=function(M){function O(Z,ae){M.call(this,Z,ae),this.current=0}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1i(this.location,Z))},O}(kr),Hr=function(M){function O(Z,ae){M.call(this,Z,ae),this.current=0}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1f(this.location,Z))},O}(kr),hr=function(M){function O(Z,ae){M.call(this,Z,ae),this.current=[0,0]}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]||(this.current=Z,this.gl.uniform2f(this.location,Z[0],Z[1]))},O}(kr),Ar=function(M){function O(Z,ae){M.call(this,Z,ae),this.current=[0,0,0]}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]||(this.current=Z,this.gl.uniform3f(this.location,Z[0],Z[1],Z[2]))},O}(kr),Dr=function(M){function O(Z,ae){M.call(this,Z,ae),this.current=[0,0,0,0]}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]&&Z[3]===this.current[3]||(this.current=Z,this.gl.uniform4f(this.location,Z[0],Z[1],Z[2],Z[3]))},O}(kr),zr=function(M){function O(Z,ae){M.call(this,Z,ae),this.current=hn.transparent}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Z){Z.r===this.current.r&&Z.g===this.current.g&&Z.b===this.current.b&&Z.a===this.current.a||(this.current=Z,this.gl.uniform4f(this.location,Z.r,Z.g,Z.b,Z.a))},O}(kr),Wr=new Float32Array(16),Zr=function(M){function O(Z,ae){M.call(this,Z,ae),this.current=Wr}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.set=function(Z){if(Z[12]!==this.current[12]||Z[0]!==this.current[0])return this.current=Z,void this.gl.uniformMatrix4fv(this.location,!1,Z);for(var ae=1;ae<16;ae++)if(Z[ae]!==this.current[ae]){this.current=Z,this.gl.uniformMatrix4fv(this.location,!1,Z);break}},O}(kr);function $r(M){return[Jt(255*M.r,255*M.g),Jt(255*M.b,255*M.a)]}var ui=function(M,O,Z){this.value=M,this.uniformNames=O.map(function(ae){return"u_"+ae}),this.type=Z};ui.prototype.setUniform=function(M,O,Z){M.set(Z.constantOr(this.value))},ui.prototype.getBinding=function(M,O,Z){return this.type==="color"?new zr(M,O):new Hr(M,O)};var yi=function(M,O){this.uniformNames=O.map(function(Z){return"u_"+Z}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};yi.prototype.setConstantPatternPositions=function(M,O){this.pixelRatioFrom=O.pixelRatio,this.pixelRatioTo=M.pixelRatio,this.patternFrom=O.tlbr,this.patternTo=M.tlbr},yi.prototype.setUniform=function(M,O,Z,ae){var be=ae==="u_pattern_to"?this.patternTo:ae==="u_pattern_from"?this.patternFrom:ae==="u_pixel_ratio_to"?this.pixelRatioTo:ae==="u_pixel_ratio_from"?this.pixelRatioFrom:null;be&&M.set(be)},yi.prototype.getBinding=function(M,O,Z){return Z.substr(0,9)==="u_pattern"?new Dr(M,O):new Hr(M,O)};var hi=function(M,O,Z,ae){this.expression=M,this.type=Z,this.maxValue=0,this.paintVertexAttributes=O.map(function(be){return{name:"a_"+be,type:"Float32",components:Z==="color"?2:1,offset:0}}),this.paintVertexArray=new ae};hi.prototype.populatePaintArray=function(M,O,Z,ae,be){var Ee=this.paintVertexArray.length,je=this.expression.evaluate(new ni(0),O,{},ae,[],be);this.paintVertexArray.resize(M),this._setPaintValue(Ee,M,je)},hi.prototype.updatePaintArray=function(M,O,Z,ae){var be=this.expression.evaluate({zoom:0},Z,ae);this._setPaintValue(M,O,be)},hi.prototype._setPaintValue=function(M,O,Z){if(this.type==="color")for(var ae=$r(Z),be=M;be<O;be++)this.paintVertexArray.emplace(be,ae[0],ae[1]);else{for(var Ee=M;Ee<O;Ee++)this.paintVertexArray.emplace(Ee,Z);this.maxValue=Math.max(this.maxValue,Math.abs(Z))}},hi.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},hi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var si=function(M,O,Z,ae,be,Ee){this.expression=M,this.uniformNames=O.map(function(je){return"u_"+je+"_t"}),this.type=Z,this.useIntegerZoom=ae,this.zoom=be,this.maxValue=0,this.paintVertexAttributes=O.map(function(je){return{name:"a_"+je,type:"Float32",components:Z==="color"?4:2,offset:0}}),this.paintVertexArray=new Ee};si.prototype.populatePaintArray=function(M,O,Z,ae,be){var Ee=this.expression.evaluate(new ni(this.zoom),O,{},ae,[],be),je=this.expression.evaluate(new ni(this.zoom+1),O,{},ae,[],be),Qe=this.paintVertexArray.length;this.paintVertexArray.resize(M),this._setPaintValue(Qe,M,Ee,je)},si.prototype.updatePaintArray=function(M,O,Z,ae){var be=this.expression.evaluate({zoom:this.zoom},Z,ae),Ee=this.expression.evaluate({zoom:this.zoom+1},Z,ae);this._setPaintValue(M,O,be,Ee)},si.prototype._setPaintValue=function(M,O,Z,ae){if(this.type==="color")for(var be=$r(Z),Ee=$r(ae),je=M;je<O;je++)this.paintVertexArray.emplace(je,be[0],be[1],Ee[0],Ee[1]);else{for(var Qe=M;Qe<O;Qe++)this.paintVertexArray.emplace(Qe,Z,ae);this.maxValue=Math.max(this.maxValue,Math.abs(Z),Math.abs(ae))}},si.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},si.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},si.prototype.setUniform=function(M,O){var Z=this.useIntegerZoom?Math.floor(O.zoom):O.zoom,ae=a(this.expression.interpolationFactor(Z,this.zoom,this.zoom+1),0,1);M.set(ae)},si.prototype.getBinding=function(M,O,Z){return new Hr(M,O)};var ci=function(M,O,Z,ae,be,Ee){this.expression=M,this.type=O,this.useIntegerZoom=Z,this.zoom=ae,this.layerId=Ee,this.zoomInPaintVertexArray=new be,this.zoomOutPaintVertexArray=new be};ci.prototype.populatePaintArray=function(M,O,Z){var ae=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(M),this.zoomOutPaintVertexArray.resize(M),this._setPaintValues(ae,M,O.patterns&&O.patterns[this.layerId],Z)},ci.prototype.updatePaintArray=function(M,O,Z,ae,be){this._setPaintValues(M,O,Z.patterns&&Z.patterns[this.layerId],be)},ci.prototype._setPaintValues=function(M,O,Z,ae){if(ae&&Z){var be=Z.min,Ee=Z.mid,je=Z.max,Qe=ae[be],lt=ae[Ee],_t=ae[je];if(Qe&&lt&&_t)for(var Mt=M;Mt<O;Mt++)this.zoomInPaintVertexArray.emplace(Mt,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],Qe.tl[0],Qe.tl[1],Qe.br[0],Qe.br[1],lt.pixelRatio,Qe.pixelRatio),this.zoomOutPaintVertexArray.emplace(Mt,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],_t.tl[0],_t.tl[1],_t.br[0],_t.br[1],lt.pixelRatio,_t.pixelRatio)}},ci.prototype.upload=function(M){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=M.createVertexBuffer(this.zoomInPaintVertexArray,bn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=M.createVertexBuffer(this.zoomOutPaintVertexArray,bn.members,this.expression.isStateDependent))},ci.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var pi=function(M,O,Z,ae){this.binders={},this.layoutAttributes=ae,this._buffers=[];var be=[];for(var Ee in M.paint._values)if(Z(Ee)){var je=M.paint.get(Ee);if(je instanceof $i&&$o(je.property.specification)){var Qe=Lo(Ee,M.type),lt=je.value,_t=je.property.specification.type,Mt=je.property.useIntegerZoom,Bt=je.property.specification["property-type"],qt=Bt==="cross-faded"||Bt==="cross-faded-data-driven";if(lt.kind==="constant")this.binders[Ee]=qt?new yi(lt.value,Qe):new ui(lt.value,Qe,_t),be.push("/u_"+Ee);else if(lt.kind==="source"||qt){var Vt=Bi(Ee,_t,"source");this.binders[Ee]=qt?new ci(lt,_t,Mt,O,Vt,M.id):new hi(lt,Qe,_t,Vt),be.push("/a_"+Ee)}else{var rn=Bi(Ee,_t,"composite");this.binders[Ee]=new si(lt,Qe,_t,Mt,O,rn),be.push("/z_"+Ee)}}}this.cacheKey=be.sort().join("")};pi.prototype.getMaxValue=function(M){var O=this.binders[M];return O instanceof hi||O instanceof si?O.maxValue:0},pi.prototype.populatePaintArrays=function(M,O,Z,ae,be){for(var Ee in this.binders){var je=this.binders[Ee];(je instanceof hi||je instanceof si||je instanceof ci)&&je.populatePaintArray(M,O,Z,ae,be)}},pi.prototype.setConstantPatternPositions=function(M,O){for(var Z in this.binders){var ae=this.binders[Z];ae instanceof yi&&ae.setConstantPatternPositions(M,O)}},pi.prototype.updatePaintArrays=function(M,O,Z,ae,be){var Ee=!1;for(var je in M)for(var Qe=0,lt=O.getPositions(je);Qe<lt.length;Qe+=1){var _t=lt[Qe],Mt=Z.feature(_t.index);for(var Bt in this.binders){var qt=this.binders[Bt];if((qt instanceof hi||qt instanceof si||qt instanceof ci)&&qt.expression.isStateDependent===!0){var Vt=ae.paint.get(Bt);qt.expression=Vt.value,qt.updatePaintArray(_t.start,_t.end,Mt,M[je],be),Ee=!0}}}return Ee},pi.prototype.defines=function(){var M=[];for(var O in this.binders){var Z=this.binders[O];(Z instanceof ui||Z instanceof yi)&&M.push.apply(M,Z.uniformNames.map(function(ae){return"#define HAS_UNIFORM_"+ae}))}return M},pi.prototype.getPaintVertexBuffers=function(){return this._buffers},pi.prototype.getUniforms=function(M,O){var Z=[];for(var ae in this.binders){var be=this.binders[ae];if(be instanceof ui||be instanceof yi||be instanceof si)for(var Ee=0,je=be.uniformNames;Ee<je.length;Ee+=1){var Qe=je[Ee];if(O[Qe]){var lt=be.getBinding(M,O[Qe],Qe);Z.push({name:Qe,property:ae,binding:lt})}}}return Z},pi.prototype.setUniforms=function(M,O,Z,ae){for(var be=0,Ee=O;be<Ee.length;be+=1){var je=Ee[be],Qe=je.name,lt=je.property,_t=je.binding;this.binders[lt].setUniform(_t,ae,Z.get(lt),Qe)}},pi.prototype.updatePaintBuffers=function(M){for(var O in this._buffers=[],this.binders){var Z=this.binders[O];if(M&&Z instanceof ci){var ae=M.fromScale===2?Z.zoomInPaintVertexBuffer:Z.zoomOutPaintVertexBuffer;ae&&this._buffers.push(ae)}else(Z instanceof hi||Z instanceof si)&&Z.paintVertexBuffer&&this._buffers.push(Z.paintVertexBuffer)}},pi.prototype.upload=function(M){for(var O in this.binders){var Z=this.binders[O];(Z instanceof hi||Z instanceof si||Z instanceof ci)&&Z.upload(M)}this.updatePaintBuffers()},pi.prototype.destroy=function(){for(var M in this.binders){var O=this.binders[M];(O instanceof hi||O instanceof si||O instanceof ci)&&O.destroy()}};var Ei=function(M,O,Z,ae){ae===void 0&&(ae=function(){return!0}),this.programConfigurations={};for(var be=0,Ee=O;be<Ee.length;be+=1){var je=Ee[be];this.programConfigurations[je.id]=new pi(je,Z,ae,M)}this.needsUpload=!1,this._featureMap=new Jn,this._bufferOffset=0};function Lo(M,O){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[M]||[M.replace(O+"-","").replace(/-/g,"_")]}function Bi(M,O,Z){var ae={color:{source:Pe,composite:De},number:{source:vt,composite:Pe}},be=function(Ee){return{"line-pattern":{source:bt,composite:bt},"fill-pattern":{source:bt,composite:bt},"fill-extrusion-pattern":{source:bt,composite:bt}}[Ee]}(M);return be&&be[Z]||ae[O][Z]}Ei.prototype.populatePaintArrays=function(M,O,Z,ae,be,Ee){for(var je in this.programConfigurations)this.programConfigurations[je].populatePaintArrays(M,O,ae,be,Ee);O.id!==void 0&&this._featureMap.add(O.id,Z,this._bufferOffset,M),this._bufferOffset=M,this.needsUpload=!0},Ei.prototype.updatePaintArrays=function(M,O,Z,ae){for(var be=0,Ee=Z;be<Ee.length;be+=1){var je=Ee[be];this.needsUpload=this.programConfigurations[je.id].updatePaintArrays(M,this._featureMap,O,je,ae)||this.needsUpload}},Ei.prototype.get=function(M){return this.programConfigurations[M]},Ei.prototype.upload=function(M){if(this.needsUpload){for(var O in this.programConfigurations)this.programConfigurations[O].upload(M);this.needsUpload=!1}},Ei.prototype.destroy=function(){for(var M in this.programConfigurations)this.programConfigurations[M].destroy()},_r("ConstantBinder",ui),_r("CrossFadedConstantBinder",yi),_r("SourceExpressionBinder",hi),_r("CrossFadedCompositeBinder",ci),_r("CompositeExpressionBinder",si),_r("ProgramConfiguration",pi,{omit:["_buffers"]}),_r("ProgramConfigurationSet",Ei);var Br=8192,Zi,ea=(Zi=15,{min:-1*Math.pow(2,Zi-1),max:Math.pow(2,Zi-1)-1});function Ai(M){for(var O=Br/M.extent,Z=M.loadGeometry(),ae=0;ae<Z.length;ae++)for(var be=Z[ae],Ee=0;Ee<be.length;Ee++){var je=be[Ee];je.x=Math.round(je.x*O),je.y=Math.round(je.y*O),(je.x<ea.min||je.x>ea.max||je.y<ea.min||je.y>ea.max)&&(S("Geometry exceeds allowed extent, reduce your vector tile buffer size"),je.x=a(je.x,ea.min,ea.max),je.y=a(je.y,ea.min,ea.max))}return Z}function Za(M,O,Z,ae,be){M.emplaceBack(2*O+(ae+1)/2,2*Z+(be+1)/2)}var Yr=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new Xe,this.indexArray=new Ne,this.segments=new en,this.programConfigurations=new Ei(Xt,M.layers,M.zoom),this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function Ni(M,O){for(var Z=0;Z<M.length;Z++)if(dl(O,M[Z]))return!0;for(var ae=0;ae<O.length;ae++)if(dl(M,O[ae]))return!0;return!!Ql(M,O)}function pa(M,O,Z){return!!dl(M,O)||!!pl(O,M,Z)}function js(M,O){if(M.length===1)return wl(O,M[0]);for(var Z=0;Z<O.length;Z++)for(var ae=O[Z],be=0;be<ae.length;be++)if(dl(M,ae[be]))return!0;for(var Ee=0;Ee<M.length;Ee++)if(wl(O,M[Ee]))return!0;for(var je=0;je<O.length;je++)if(Ql(M,O[je]))return!0;return!1}function uc(M,O,Z){if(M.length>1){if(Ql(M,O))return!0;for(var ae=0;ae<O.length;ae++)if(pl(O[ae],M,Z))return!0}for(var be=0;be<M.length;be++)if(pl(M[be],O,Z))return!0;return!1}function Ql(M,O){if(M.length===0||O.length===0)return!1;for(var Z=0;Z<M.length-1;Z++)for(var ae=M[Z],be=M[Z+1],Ee=0;Ee<O.length-1;Ee++)if(cc(ae,be,O[Ee],O[Ee+1]))return!0;return!1}function cc(M,O,Z,ae){return _(M,Z,ae)!==_(O,Z,ae)&&_(M,O,Z)!==_(M,O,ae)}function pl(M,O,Z){var ae=Z*Z;if(O.length===1)return M.distSqr(O[0])<ae;for(var be=1;be<O.length;be++)if(ku(M,O[be-1],O[be])<ae)return!0;return!1}function ku(M,O,Z){var ae=O.distSqr(Z);if(ae===0)return M.distSqr(O);var be=((M.x-O.x)*(Z.x-O.x)+(M.y-O.y)*(Z.y-O.y))/ae;return be<0?M.distSqr(O):be>1?M.distSqr(Z):M.distSqr(Z.sub(O)._mult(be)._add(O))}function wl(M,O){for(var Z,ae,be,Ee=!1,je=0;je<M.length;je++)for(var Qe=0,lt=(Z=M[je]).length-1;Qe<Z.length;lt=Qe++)ae=Z[Qe],be=Z[lt],ae.y>O.y!=be.y>O.y&&O.x<(be.x-ae.x)*(O.y-ae.y)/(be.y-ae.y)+ae.x&&(Ee=!Ee);return Ee}function dl(M,O){for(var Z=!1,ae=0,be=M.length-1;ae<M.length;be=ae++){var Ee=M[ae],je=M[be];Ee.y>O.y!=je.y>O.y&&O.x<(je.x-Ee.x)*(O.y-Ee.y)/(je.y-Ee.y)+Ee.x&&(Z=!Z)}return Z}function fc(M,O,Z){var ae=Z[0],be=Z[2];if(M.x<ae.x&&O.x<ae.x||M.x>be.x&&O.x>be.x||M.y<ae.y&&O.y<ae.y||M.y>be.y&&O.y>be.y)return!1;var Ee=_(M,O,Z[0]);return Ee!==_(M,O,Z[1])||Ee!==_(M,O,Z[2])||Ee!==_(M,O,Z[3])}function nl(M,O,Z){var ae=O.paint.get(M).value;return ae.kind==="constant"?ae.value:Z.programConfigurations.get(O.id).getMaxValue(M)}function Au(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function Mu(M,O,Z,ae,be){if(!O[0]&&!O[1])return M;var Ee=t.convert(O)._mult(be);Z==="viewport"&&Ee._rotate(-ae);for(var je=[],Qe=0;Qe<M.length;Qe++){var lt=M[Qe];je.push(lt.sub(Ee))}return je}Yr.prototype.populate=function(M,O,Z){var ae=this.layers[0],be=[],Ee=null;ae.type==="circle"&&(Ee=ae.layout.get("circle-sort-key"));for(var je=0,Qe=M;je<Qe.length;je+=1){var lt=Qe[je],_t=lt.feature,Mt=lt.id,Bt=lt.index,qt=lt.sourceLayerIndex,Vt=this.layers[0]._featureFilter.needGeometry,rn={type:_t.type,id:Mt,properties:_t.properties,geometry:Vt?Ai(_t):[]};if(this.layers[0]._featureFilter.filter(new ni(this.zoom),rn,Z)){Vt||(rn.geometry=Ai(_t));var xn=Ee?Ee.evaluate(rn,{},Z):void 0,In={id:Mt,properties:_t.properties,type:_t.type,sourceLayerIndex:qt,index:Bt,geometry:rn.geometry,patterns:{},sortKey:xn};be.push(In)}}Ee&&be.sort(function(Tr,Er){return Tr.sortKey-Er.sortKey});for(var On=0,jn=be;On<jn.length;On+=1){var Vn=jn[On],Yn=Vn,Qn=Yn.geometry,tr=Yn.index,xr=Yn.sourceLayerIndex,pr=M[tr].feature;this.addFeature(Vn,Qn,tr,Z),O.featureIndex.insert(pr,Qn,tr,xr,this.index)}},Yr.prototype.update=function(M,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,Z)},Yr.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Yr.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Yr.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Xt),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Yr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Yr.prototype.addFeature=function(M,O,Z,ae){for(var be=0,Ee=O;be<Ee.length;be+=1)for(var je=0,Qe=Ee[be];je<Qe.length;je+=1){var lt=Qe[je],_t=lt.x,Mt=lt.y;if(!(_t<0||_t>=Br||Mt<0||Mt>=Br)){var Bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,M.sortKey),qt=Bt.vertexLength;Za(this.layoutVertexArray,_t,Mt,-1,-1),Za(this.layoutVertexArray,_t,Mt,1,-1),Za(this.layoutVertexArray,_t,Mt,1,1),Za(this.layoutVertexArray,_t,Mt,-1,1),this.indexArray.emplaceBack(qt,qt+1,qt+2),this.indexArray.emplaceBack(qt,qt+3,qt+2),Bt.vertexLength+=4,Bt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Z,{},ae)},_r("CircleBucket",Yr,{omit:["layers"]});var Oh=new Qi({"circle-sort-key":new Or(Se.layout_circle["circle-sort-key"])}),Ih={paint:new Qi({"circle-radius":new Or(Se.paint_circle["circle-radius"]),"circle-color":new Or(Se.paint_circle["circle-color"]),"circle-blur":new Or(Se.paint_circle["circle-blur"]),"circle-opacity":new Or(Se.paint_circle["circle-opacity"]),"circle-translate":new Mr(Se.paint_circle["circle-translate"]),"circle-translate-anchor":new Mr(Se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Mr(Se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Mr(Se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Or(Se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Or(Se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Or(Se.paint_circle["circle-stroke-opacity"])}),layout:Oh},Co=typeof Float32Array<"u"?Float32Array:Array;function hc(M){return M[0]=1,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=1,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=1,M[11]=0,M[12]=0,M[13]=0,M[14]=0,M[15]=1,M}function Kc(M,O,Z){var ae=O[0],be=O[1],Ee=O[2],je=O[3],Qe=O[4],lt=O[5],_t=O[6],Mt=O[7],Bt=O[8],qt=O[9],Vt=O[10],rn=O[11],xn=O[12],In=O[13],On=O[14],jn=O[15],Vn=Z[0],Yn=Z[1],Qn=Z[2],tr=Z[3];return M[0]=Vn*ae+Yn*Qe+Qn*Bt+tr*xn,M[1]=Vn*be+Yn*lt+Qn*qt+tr*In,M[2]=Vn*Ee+Yn*_t+Qn*Vt+tr*On,M[3]=Vn*je+Yn*Mt+Qn*rn+tr*jn,Vn=Z[4],Yn=Z[5],Qn=Z[6],tr=Z[7],M[4]=Vn*ae+Yn*Qe+Qn*Bt+tr*xn,M[5]=Vn*be+Yn*lt+Qn*qt+tr*In,M[6]=Vn*Ee+Yn*_t+Qn*Vt+tr*On,M[7]=Vn*je+Yn*Mt+Qn*rn+tr*jn,Vn=Z[8],Yn=Z[9],Qn=Z[10],tr=Z[11],M[8]=Vn*ae+Yn*Qe+Qn*Bt+tr*xn,M[9]=Vn*be+Yn*lt+Qn*qt+tr*In,M[10]=Vn*Ee+Yn*_t+Qn*Vt+tr*On,M[11]=Vn*je+Yn*Mt+Qn*rn+tr*jn,Vn=Z[12],Yn=Z[13],Qn=Z[14],tr=Z[15],M[12]=Vn*ae+Yn*Qe+Qn*Bt+tr*xn,M[13]=Vn*be+Yn*lt+Qn*qt+tr*In,M[14]=Vn*Ee+Yn*_t+Qn*Vt+tr*On,M[15]=Vn*je+Yn*Mt+Qn*rn+tr*jn,M}Math.hypot||(Math.hypot=function(){for(var M=arguments,O=0,Z=arguments.length;Z--;)O+=M[Z]*M[Z];return Math.sqrt(O)});var Rh=Kc,Su,zh=function(M,O,Z){return M[0]=O[0]-Z[0],M[1]=O[1]-Z[1],M[2]=O[2]-Z[2],M};function Eu(M,O,Z){var ae=O[0],be=O[1],Ee=O[2],je=O[3];return M[0]=Z[0]*ae+Z[4]*be+Z[8]*Ee+Z[12]*je,M[1]=Z[1]*ae+Z[5]*be+Z[9]*Ee+Z[13]*je,M[2]=Z[2]*ae+Z[6]*be+Z[10]*Ee+Z[14]*je,M[3]=Z[3]*ae+Z[7]*be+Z[11]*Ee+Z[15]*je,M}Su=new Co(3),Co!=Float32Array&&(Su[0]=0,Su[1]=0,Su[2]=0),function(){var M=new Co(4);Co!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0,M[3]=0)}();var Dh=function(M){var O=M[0],Z=M[1];return O*O+Z*Z},Fh=(function(){var M=new Co(2);Co!=Float32Array&&(M[0]=0,M[1]=0)}(),function(M){function O(Z){M.call(this,Z,Ih)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.createBucket=function(Z){return new Yr(Z)},O.prototype.queryRadius=function(Z){var ae=Z;return nl("circle-radius",this,ae)+nl("circle-stroke-width",this,ae)+Au(this.paint.get("circle-translate"))},O.prototype.queryIntersectsFeature=function(Z,ae,be,Ee,je,Qe,lt,_t){for(var Mt=Mu(Z,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Qe.angle,lt),Bt=this.paint.get("circle-radius").evaluate(ae,be)+this.paint.get("circle-stroke-width").evaluate(ae,be),qt=this.paint.get("circle-pitch-alignment")==="map",Vt=qt?Mt:function(xr,pr){return xr.map(function(Tr){return $c(Tr,pr)})}(Mt,_t),rn=qt?Bt*lt:Bt,xn=0,In=Ee;xn<In.length;xn+=1)for(var On=0,jn=In[xn];On<jn.length;On+=1){var Vn=jn[On],Yn=qt?Vn:$c(Vn,_t),Qn=rn,tr=Eu([],[Vn.x,Vn.y,0,1],_t);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Qn*=tr[3]/Qe.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Qn*=Qe.cameraToCenterDistance/tr[3]),pa(Vt,Yn,Qn))return!0}return!1},O}(ha));function $c(M,O){var Z=Eu([],[M.x,M.y,0,1],O);return new t(Z[0]/Z[3],Z[1]/Z[3])}var Qc=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(Yr);function pc(M,O,Z,ae){var be=O.width,Ee=O.height;if(ae){if(ae instanceof Uint8ClampedArray)ae=new Uint8Array(ae.buffer);else if(ae.length!==be*Ee*Z)throw new RangeError("mismatched image size")}else ae=new Uint8Array(be*Ee*Z);return M.width=be,M.height=Ee,M.data=ae,M}function ef(M,O,Z){var ae=O.width,be=O.height;if(ae!==M.width||be!==M.height){var Ee=pc({},{width:ae,height:be},Z);dc(M,Ee,{x:0,y:0},{x:0,y:0},{width:Math.min(M.width,ae),height:Math.min(M.height,be)},Z),M.width=ae,M.height=be,M.data=Ee.data}}function dc(M,O,Z,ae,be,Ee){if(be.width===0||be.height===0)return O;if(be.width>M.width||be.height>M.height||Z.x>M.width-be.width||Z.y>M.height-be.height)throw new RangeError("out of range source coordinates for image copy");if(be.width>O.width||be.height>O.height||ae.x>O.width-be.width||ae.y>O.height-be.height)throw new RangeError("out of range destination coordinates for image copy");for(var je=M.data,Qe=O.data,lt=0;lt<be.height;lt++)for(var _t=((Z.y+lt)*M.width+Z.x)*Ee,Mt=((ae.y+lt)*O.width+ae.x)*Ee,Bt=0;Bt<be.width*Ee;Bt++)Qe[Mt+Bt]=je[_t+Bt];return O}_r("HeatmapBucket",Qc,{omit:["layers"]});var Tl=function(M,O){pc(this,M,1,O)};Tl.prototype.resize=function(M){ef(this,M,1)},Tl.prototype.clone=function(){return new Tl({width:this.width,height:this.height},new Uint8Array(this.data))},Tl.copy=function(M,O,Z,ae,be){dc(M,O,Z,ae,be,1)};var to=function(M,O){pc(this,M,4,O)};to.prototype.resize=function(M){ef(this,M,4)},to.prototype.replace=function(M,O){O?this.data.set(M):M instanceof Uint8ClampedArray?this.data=new Uint8Array(M.buffer):this.data=M},to.prototype.clone=function(){return new to({width:this.width,height:this.height},new Uint8Array(this.data))},to.copy=function(M,O,Z,ae,be){dc(M,O,Z,ae,be,4)},_r("AlphaImage",Tl),_r("RGBAImage",to);var Bh={paint:new Qi({"heatmap-radius":new Or(Se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Or(Se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Mr(Se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ga(Se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Mr(Se.paint_heatmap["heatmap-opacity"])})};function tf(M,O){for(var Z=new Uint8Array(1024),ae={},be=0,Ee=0;be<256;be++,Ee+=4){ae[O]=be/255;var je=M.evaluate(ae);Z[Ee+0]=Math.floor(255*je.r/je.a),Z[Ee+1]=Math.floor(255*je.g/je.a),Z[Ee+2]=Math.floor(255*je.b/je.a),Z[Ee+3]=Math.floor(255*je.a)}return new to({width:256,height:1},Z)}var Nh=function(M){function O(Z){M.call(this,Z,Bh),this._updateColorRamp()}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.createBucket=function(Z){return new Qc(Z)},O.prototype._handleSpecialPaintPropertyUpdate=function(Z){Z==="heatmap-color"&&this._updateColorRamp()},O.prototype._updateColorRamp=function(){var Z=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=tf(Z,"heatmapDensity"),this.colorRampTexture=null},O.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},O}(ha),jh={paint:new Qi({"hillshade-illumination-direction":new Mr(Se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Mr(Se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Mr(Se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Mr(Se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Mr(Se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Mr(Se.paint_hillshade["hillshade-accent-color"])})},Uh=function(M){function O(Z){M.call(this,Z,jh)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},O}(ha),nf=fi([{name:"a_pos",components:2,type:"Int16"}],4).members,gc=Lu,Vh=Lu;function Lu(M,O,Z){Z=Z||2;var ae,be,Ee,je,Qe,lt,_t,Mt=O&&O.length,Bt=Mt?O[0]*Z:M.length,qt=rf(M,0,Bt,Z,!0),Vt=[];if(!qt||qt.next===qt.prev)return Vt;if(Mt&&(qt=function(xn,In,On,jn){var Vn,Yn,Qn,tr=[];for(Vn=0,Yn=In.length;Vn<Yn;Vn++)(Qn=rf(xn,In[Vn]*jn,Vn<Yn-1?In[Vn+1]*jn:xn.length,jn,!1))===Qn.next&&(Qn.steiner=!0),tr.push(Jh(Qn));for(tr.sort(Wh),Vn=0;Vn<tr.length;Vn++)Yh(tr[Vn],On),On=vl(On,On.next);return On}(M,O,qt,Z)),M.length>80*Z){ae=Ee=M[0],be=je=M[1];for(var rn=Z;rn<Bt;rn+=Z)(Qe=M[rn])<ae&&(ae=Qe),(lt=M[rn+1])<be&&(be=lt),Qe>Ee&&(Ee=Qe),lt>je&&(je=lt);_t=(_t=Math.max(Ee-ae,je-be))!==0?1/_t:0}return eu(qt,Vt,Z,ae,be,_t),Vt}function rf(M,O,Z,ae,be){var Ee,je;if(be===yc(M,O,Z,ae)>0)for(Ee=O;Ee<Z;Ee+=ae)je=sf(Ee,M[Ee],M[Ee+1],je);else for(Ee=Z-ae;Ee>=O;Ee-=ae)je=sf(Ee,M[Ee],M[Ee+1],je);return je&&Cu(je,je.next)&&(nu(je),je=je.next),je}function vl(M,O){if(!M)return M;O||(O=M);var Z,ae=M;do if(Z=!1,ae.steiner||!Cu(ae,ae.next)&&ta(ae.prev,ae,ae.next)!==0)ae=ae.next;else{if(nu(ae),(ae=O=ae.prev)===ae.next)break;Z=!0}while(Z||ae!==O);return O}function eu(M,O,Z,ae,be,Ee,je){if(M){!je&&Ee&&function(Mt,Bt,qt,Vt){var rn=Mt;do rn.z===null&&(rn.z=vc(rn.x,rn.y,Bt,qt,Vt)),rn.prevZ=rn.prev,rn.nextZ=rn.next,rn=rn.next;while(rn!==Mt);rn.prevZ.nextZ=null,rn.prevZ=null,function(xn){var In,On,jn,Vn,Yn,Qn,tr,xr,pr=1;do{for(On=xn,xn=null,Yn=null,Qn=0;On;){for(Qn++,jn=On,tr=0,In=0;In<pr&&(tr++,jn=jn.nextZ);In++);for(xr=pr;tr>0||xr>0&&jn;)tr!==0&&(xr===0||!jn||On.z<=jn.z)?(Vn=On,On=On.nextZ,tr--):(Vn=jn,jn=jn.nextZ,xr--),Yn?Yn.nextZ=Vn:xn=Vn,Vn.prevZ=Yn,Yn=Vn;On=jn}Yn.nextZ=null,pr*=2}while(Qn>1)}(rn)}(M,ae,be,Ee);for(var Qe,lt,_t=M;M.prev!==M.next;)if(Qe=M.prev,lt=M.next,Ee?qh(M,ae,be,Ee):Hh(M))O.push(Qe.i/Z),O.push(M.i/Z),O.push(lt.i/Z),nu(M),M=lt.next,_t=lt.next;else if((M=lt)===_t){je?je===1?eu(M=Gh(vl(M),O,Z),O,Z,ae,be,Ee,2):je===2&&Zh(M,O,Z,ae,be,Ee):eu(vl(M),O,Z,ae,be,Ee,1);break}}}function Hh(M){var O=M.prev,Z=M,ae=M.next;if(ta(O,Z,ae)>=0)return!1;for(var be=M.next.next;be!==M.prev;){if(Il(O.x,O.y,Z.x,Z.y,ae.x,ae.y,be.x,be.y)&&ta(be.prev,be,be.next)>=0)return!1;be=be.next}return!0}function qh(M,O,Z,ae){var be=M.prev,Ee=M,je=M.next;if(ta(be,Ee,je)>=0)return!1;for(var Qe=be.x<Ee.x?be.x<je.x?be.x:je.x:Ee.x<je.x?Ee.x:je.x,lt=be.y<Ee.y?be.y<je.y?be.y:je.y:Ee.y<je.y?Ee.y:je.y,_t=be.x>Ee.x?be.x>je.x?be.x:je.x:Ee.x>je.x?Ee.x:je.x,Mt=be.y>Ee.y?be.y>je.y?be.y:je.y:Ee.y>je.y?Ee.y:je.y,Bt=vc(Qe,lt,O,Z,ae),qt=vc(_t,Mt,O,Z,ae),Vt=M.prevZ,rn=M.nextZ;Vt&&Vt.z>=Bt&&rn&&rn.z<=qt;){if(Vt!==M.prev&&Vt!==M.next&&Il(be.x,be.y,Ee.x,Ee.y,je.x,je.y,Vt.x,Vt.y)&&ta(Vt.prev,Vt,Vt.next)>=0||(Vt=Vt.prevZ,rn!==M.prev&&rn!==M.next&&Il(be.x,be.y,Ee.x,Ee.y,je.x,je.y,rn.x,rn.y)&&ta(rn.prev,rn,rn.next)>=0))return!1;rn=rn.nextZ}for(;Vt&&Vt.z>=Bt;){if(Vt!==M.prev&&Vt!==M.next&&Il(be.x,be.y,Ee.x,Ee.y,je.x,je.y,Vt.x,Vt.y)&&ta(Vt.prev,Vt,Vt.next)>=0)return!1;Vt=Vt.prevZ}for(;rn&&rn.z<=qt;){if(rn!==M.prev&&rn!==M.next&&Il(be.x,be.y,Ee.x,Ee.y,je.x,je.y,rn.x,rn.y)&&ta(rn.prev,rn,rn.next)>=0)return!1;rn=rn.nextZ}return!0}function Gh(M,O,Z){var ae=M;do{var be=ae.prev,Ee=ae.next.next;!Cu(be,Ee)&&af(be,ae,ae.next,Ee)&&tu(be,Ee)&&tu(Ee,be)&&(O.push(be.i/Z),O.push(ae.i/Z),O.push(Ee.i/Z),nu(ae),nu(ae.next),ae=M=Ee),ae=ae.next}while(ae!==M);return vl(ae)}function Zh(M,O,Z,ae,be,Ee){var je=M;do{for(var Qe=je.next.next;Qe!==je.prev;){if(je.i!==Qe.i&&Kh(je,Qe)){var lt=of(je,Qe);return je=vl(je,je.next),lt=vl(lt,lt.next),eu(je,O,Z,ae,be,Ee),void eu(lt,O,Z,ae,be,Ee)}Qe=Qe.next}je=je.next}while(je!==M)}function Wh(M,O){return M.x-O.x}function Yh(M,O){if(O=function(ae,be){var Ee,je=be,Qe=ae.x,lt=ae.y,_t=-1/0;do{if(lt<=je.y&&lt>=je.next.y&&je.next.y!==je.y){var Mt=je.x+(lt-je.y)*(je.next.x-je.x)/(je.next.y-je.y);if(Mt<=Qe&&Mt>_t){if(_t=Mt,Mt===Qe){if(lt===je.y)return je;if(lt===je.next.y)return je.next}Ee=je.x<je.next.x?je:je.next}}je=je.next}while(je!==be);if(!Ee)return null;if(Qe===_t)return Ee;var Bt,qt=Ee,Vt=Ee.x,rn=Ee.y,xn=1/0;je=Ee;do Qe>=je.x&&je.x>=Vt&&Qe!==je.x&&Il(lt<rn?Qe:_t,lt,Vt,rn,lt<rn?_t:Qe,lt,je.x,je.y)&&(Bt=Math.abs(lt-je.y)/(Qe-je.x),tu(je,ae)&&(Bt<xn||Bt===xn&&(je.x>Ee.x||je.x===Ee.x&&Xh(Ee,je)))&&(Ee=je,xn=Bt)),je=je.next;while(je!==qt);return Ee}(M,O)){var Z=of(O,M);vl(O,O.next),vl(Z,Z.next)}}function Xh(M,O){return ta(M.prev,M,O.prev)<0&&ta(O.next,M,M.next)<0}function vc(M,O,Z,ae,be){return(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-Z)*be)|M<<8))|M<<4))|M<<2))|M<<1))|(O=1431655765&((O=858993459&((O=252645135&((O=16711935&((O=32767*(O-ae)*be)|O<<8))|O<<4))|O<<2))|O<<1))<<1}function Jh(M){var O=M,Z=M;do(O.x<Z.x||O.x===Z.x&&O.y<Z.y)&&(Z=O),O=O.next;while(O!==M);return Z}function Il(M,O,Z,ae,be,Ee,je,Qe){return(be-je)*(O-Qe)-(M-je)*(Ee-Qe)>=0&&(M-je)*(ae-Qe)-(Z-je)*(O-Qe)>=0&&(Z-je)*(Ee-Qe)-(be-je)*(ae-Qe)>=0}function Kh(M,O){return M.next.i!==O.i&&M.prev.i!==O.i&&!function(Z,ae){var be=Z;do{if(be.i!==Z.i&&be.next.i!==Z.i&&be.i!==ae.i&&be.next.i!==ae.i&&af(be,be.next,Z,ae))return!0;be=be.next}while(be!==Z);return!1}(M,O)&&(tu(M,O)&&tu(O,M)&&function(Z,ae){var be=Z,Ee=!1,je=(Z.x+ae.x)/2,Qe=(Z.y+ae.y)/2;do be.y>Qe!=be.next.y>Qe&&be.next.y!==be.y&&je<(be.next.x-be.x)*(Qe-be.y)/(be.next.y-be.y)+be.x&&(Ee=!Ee),be=be.next;while(be!==Z);return Ee}(M,O)&&(ta(M.prev,M,O.prev)||ta(M,O.prev,O))||Cu(M,O)&&ta(M.prev,M,M.next)>0&&ta(O.prev,O,O.next)>0)}function ta(M,O,Z){return(O.y-M.y)*(Z.x-O.x)-(O.x-M.x)*(Z.y-O.y)}function Cu(M,O){return M.x===O.x&&M.y===O.y}function af(M,O,Z,ae){var be=Ou(ta(M,O,Z)),Ee=Ou(ta(M,O,ae)),je=Ou(ta(Z,ae,M)),Qe=Ou(ta(Z,ae,O));return be!==Ee&&je!==Qe||!(be!==0||!Pu(M,Z,O))||!(Ee!==0||!Pu(M,ae,O))||!(je!==0||!Pu(Z,M,ae))||!(Qe!==0||!Pu(Z,O,ae))}function Pu(M,O,Z){return O.x<=Math.max(M.x,Z.x)&&O.x>=Math.min(M.x,Z.x)&&O.y<=Math.max(M.y,Z.y)&&O.y>=Math.min(M.y,Z.y)}function Ou(M){return M>0?1:M<0?-1:0}function tu(M,O){return ta(M.prev,M,M.next)<0?ta(M,O,M.next)>=0&&ta(M,M.prev,O)>=0:ta(M,O,M.prev)<0||ta(M,M.next,O)<0}function of(M,O){var Z=new mc(M.i,M.x,M.y),ae=new mc(O.i,O.x,O.y),be=M.next,Ee=O.prev;return M.next=O,O.prev=M,Z.next=be,be.prev=Z,ae.next=Z,Z.prev=ae,Ee.next=ae,ae.prev=Ee,ae}function sf(M,O,Z,ae){var be=new mc(M,O,Z);return ae?(be.next=ae.next,be.prev=ae,ae.next.prev=be,ae.next=be):(be.prev=be,be.next=be),be}function nu(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function mc(M,O,Z){this.i=M,this.x=O,this.y=Z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yc(M,O,Z,ae){for(var be=0,Ee=O,je=Z-ae;Ee<Z;Ee+=ae)be+=(M[je]-M[Ee])*(M[Ee+1]+M[je+1]),je=Ee;return be}function $h(M,O,Z,ae,be){lf(M,O,Z||0,ae||M.length-1,be||Qh)}function lf(M,O,Z,ae,be){for(;ae>Z;){if(ae-Z>600){var Ee=ae-Z+1,je=O-Z+1,Qe=Math.log(Ee),lt=.5*Math.exp(2*Qe/3),_t=.5*Math.sqrt(Qe*lt*(Ee-lt)/Ee)*(je-Ee/2<0?-1:1);lf(M,O,Math.max(Z,Math.floor(O-je*lt/Ee+_t)),Math.min(ae,Math.floor(O+(Ee-je)*lt/Ee+_t)),be)}var Mt=M[O],Bt=Z,qt=ae;for(ru(M,Z,O),be(M[ae],Mt)>0&&ru(M,Z,ae);Bt<qt;){for(ru(M,Bt,qt),Bt++,qt--;be(M[Bt],Mt)<0;)Bt++;for(;be(M[qt],Mt)>0;)qt--}be(M[Z],Mt)===0?ru(M,Z,qt):ru(M,++qt,ae),qt<=O&&(Z=qt+1),O<=qt&&(ae=qt-1)}}function ru(M,O,Z){var ae=M[O];M[O]=M[Z],M[Z]=ae}function Qh(M,O){return M<O?-1:M>O?1:0}function xc(M,O){var Z=M.length;if(Z<=1)return[M];for(var ae,be,Ee=[],je=0;je<Z;je++){var Qe=E(M[je]);Qe!==0&&(M[je].area=Math.abs(Qe),be===void 0&&(be=Qe<0),be===Qe<0?(ae&&Ee.push(ae),ae=[M[je]]):ae.push(M[je]))}if(ae&&Ee.push(ae),O>1)for(var lt=0;lt<Ee.length;lt++)Ee[lt].length<=O||($h(Ee[lt],O,1,Ee[lt].length-1,ep),Ee[lt]=Ee[lt].slice(0,O));return Ee}function ep(M,O){return O.area-M.area}function bc(M,O,Z){for(var ae=Z.patternDependencies,be=!1,Ee=0,je=O;Ee<je.length;Ee+=1){var Qe=je[Ee].paint.get(M+"-pattern");Qe.isConstant()||(be=!0);var lt=Qe.constantOr(null);lt&&(be=!0,ae[lt.to]=!0,ae[lt.from]=!0)}return be}function _c(M,O,Z,ae,be){for(var Ee=be.patternDependencies,je=0,Qe=O;je<Qe.length;je+=1){var lt=Qe[je],_t=lt.paint.get(M+"-pattern").value;if(_t.kind!=="constant"){var Mt=_t.evaluate({zoom:ae-1},Z,{},be.availableImages),Bt=_t.evaluate({zoom:ae},Z,{},be.availableImages),qt=_t.evaluate({zoom:ae+1},Z,{},be.availableImages);Mt=Mt&&Mt.name?Mt.name:Mt,Bt=Bt&&Bt.name?Bt.name:Bt,qt=qt&&qt.name?qt.name:qt,Ee[Mt]=!0,Ee[Bt]=!0,Ee[qt]=!0,Z.patterns[lt.id]={min:Mt,mid:Bt,max:qt}}}return Z}Lu.deviation=function(M,O,Z,ae){var be=O&&O.length,Ee=be?O[0]*Z:M.length,je=Math.abs(yc(M,0,Ee,Z));if(be)for(var Qe=0,lt=O.length;Qe<lt;Qe++){var _t=O[Qe]*Z,Mt=Qe<lt-1?O[Qe+1]*Z:M.length;je-=Math.abs(yc(M,_t,Mt,Z))}var Bt=0;for(Qe=0;Qe<ae.length;Qe+=3){var qt=ae[Qe]*Z,Vt=ae[Qe+1]*Z,rn=ae[Qe+2]*Z;Bt+=Math.abs((M[qt]-M[rn])*(M[Vt+1]-M[qt+1])-(M[qt]-M[Vt])*(M[rn+1]-M[qt+1]))}return je===0&&Bt===0?0:Math.abs((Bt-je)/je)},Lu.flatten=function(M){for(var O=M[0][0].length,Z={vertices:[],holes:[],dimensions:O},ae=0,be=0;be<M.length;be++){for(var Ee=0;Ee<M[be].length;Ee++)for(var je=0;je<O;je++)Z.vertices.push(M[be][Ee][je]);be>0&&(ae+=M[be-1].length,Z.holes.push(ae))}return Z},gc.default=Vh;var As=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Xe,this.indexArray=new Ne,this.indexArray2=new ue,this.programConfigurations=new Ei(nf,M.layers,M.zoom),this.segments=new en,this.segments2=new en,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};As.prototype.populate=function(M,O,Z){this.hasPattern=bc("fill",this.layers,O);for(var ae=this.layers[0].layout.get("fill-sort-key"),be=[],Ee=0,je=M;Ee<je.length;Ee+=1){var Qe=je[Ee],lt=Qe.feature,_t=Qe.id,Mt=Qe.index,Bt=Qe.sourceLayerIndex,qt=this.layers[0]._featureFilter.needGeometry,Vt={type:lt.type,id:_t,properties:lt.properties,geometry:qt?Ai(lt):[]};if(this.layers[0]._featureFilter.filter(new ni(this.zoom),Vt,Z)){qt||(Vt.geometry=Ai(lt));var rn=ae?ae.evaluate(Vt,{},Z,O.availableImages):void 0,xn={id:_t,properties:lt.properties,type:lt.type,sourceLayerIndex:Bt,index:Mt,geometry:Vt.geometry,patterns:{},sortKey:rn};be.push(xn)}}ae&&be.sort(function(Tr,Er){return Tr.sortKey-Er.sortKey});for(var In=0,On=be;In<On.length;In+=1){var jn=On[In],Vn=jn,Yn=Vn.geometry,Qn=Vn.index,tr=Vn.sourceLayerIndex;if(this.hasPattern){var xr=_c("fill",this.layers,jn,this.zoom,O);this.patternFeatures.push(xr)}else this.addFeature(jn,Yn,Qn,Z,{});var pr=M[Qn].feature;O.featureIndex.insert(pr,Yn,Qn,tr,this.index)}},As.prototype.update=function(M,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,Z)},As.prototype.addFeatures=function(M,O,Z){for(var ae=0,be=this.patternFeatures;ae<be.length;ae+=1){var Ee=be[ae];this.addFeature(Ee,Ee.geometry,Ee.index,O,Z)}},As.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},As.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},As.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,nf),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.indexBuffer2=M.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(M),this.uploaded=!0},As.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},As.prototype.addFeature=function(M,O,Z,ae,be){for(var Ee=0,je=xc(O,500);Ee<je.length;Ee+=1){for(var Qe=je[Ee],lt=0,_t=0,Mt=Qe;_t<Mt.length;_t+=1)lt+=Mt[_t].length;for(var Bt=this.segments.prepareSegment(lt,this.layoutVertexArray,this.indexArray),qt=Bt.vertexLength,Vt=[],rn=[],xn=0,In=Qe;xn<In.length;xn+=1){var On=In[xn];if(On.length!==0){On!==Qe[0]&&rn.push(Vt.length/2);var jn=this.segments2.prepareSegment(On.length,this.layoutVertexArray,this.indexArray2),Vn=jn.vertexLength;this.layoutVertexArray.emplaceBack(On[0].x,On[0].y),this.indexArray2.emplaceBack(Vn+On.length-1,Vn),Vt.push(On[0].x),Vt.push(On[0].y);for(var Yn=1;Yn<On.length;Yn++)this.layoutVertexArray.emplaceBack(On[Yn].x,On[Yn].y),this.indexArray2.emplaceBack(Vn+Yn-1,Vn+Yn),Vt.push(On[Yn].x),Vt.push(On[Yn].y);jn.vertexLength+=On.length,jn.primitiveLength+=On.length}}for(var Qn=gc(Vt,rn),tr=0;tr<Qn.length;tr+=3)this.indexArray.emplaceBack(qt+Qn[tr],qt+Qn[tr+1],qt+Qn[tr+2]);Bt.vertexLength+=lt,Bt.primitiveLength+=Qn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Z,be,ae)},_r("FillBucket",As,{omit:["layers","patternFeatures"]});var tp=new Qi({"fill-sort-key":new Or(Se.layout_fill["fill-sort-key"])}),np={paint:new Qi({"fill-antialias":new Mr(Se.paint_fill["fill-antialias"]),"fill-opacity":new Or(Se.paint_fill["fill-opacity"]),"fill-color":new Or(Se.paint_fill["fill-color"]),"fill-outline-color":new Or(Se.paint_fill["fill-outline-color"]),"fill-translate":new Mr(Se.paint_fill["fill-translate"]),"fill-translate-anchor":new Mr(Se.paint_fill["fill-translate-anchor"]),"fill-pattern":new ss(Se.paint_fill["fill-pattern"])}),layout:tp},rp=function(M){function O(Z){M.call(this,Z,np)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.recalculate=function(Z,ae){M.prototype.recalculate.call(this,Z,ae);var be=this.paint._values["fill-outline-color"];be.value.kind==="constant"&&be.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},O.prototype.createBucket=function(Z){return new As(Z)},O.prototype.queryRadius=function(){return Au(this.paint.get("fill-translate"))},O.prototype.queryIntersectsFeature=function(Z,ae,be,Ee,je,Qe,lt){return js(Mu(Z,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Qe.angle,lt),Ee)},O.prototype.isTileClipped=function(){return!0},O}(ha),uf=fi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,cf=Rl;function Rl(M,O,Z,ae,be){this.properties={},this.extent=Z,this.type=0,this._pbf=M,this._geometry=-1,this._keys=ae,this._values=be,M.readFields(ip,this,O)}function ip(M,O,Z){M==1?O.id=Z.readVarint():M==2?function(ae,be){for(var Ee=ae.readVarint()+ae.pos;ae.pos<Ee;){var je=be._keys[ae.readVarint()],Qe=be._values[ae.readVarint()];be.properties[je]=Qe}}(Z,O):M==3?O.type=Z.readVarint():M==4&&(O._geometry=Z.pos)}function ap(M){for(var O,Z,ae=0,be=0,Ee=M.length,je=Ee-1;be<Ee;je=be++)O=M[be],ae+=((Z=M[je]).x-O.x)*(O.y+Z.y);return ae}Rl.types=["Unknown","Point","LineString","Polygon"],Rl.prototype.loadGeometry=function(){var M=this._pbf;M.pos=this._geometry;for(var O,Z=M.readVarint()+M.pos,ae=1,be=0,Ee=0,je=0,Qe=[];M.pos<Z;){if(be<=0){var lt=M.readVarint();ae=7&lt,be=lt>>3}if(be--,ae===1||ae===2)Ee+=M.readSVarint(),je+=M.readSVarint(),ae===1&&(O&&Qe.push(O),O=[]),O.push(new t(Ee,je));else{if(ae!==7)throw new Error("unknown command "+ae);O&&O.push(O[0].clone())}}return O&&Qe.push(O),Qe},Rl.prototype.bbox=function(){var M=this._pbf;M.pos=this._geometry;for(var O=M.readVarint()+M.pos,Z=1,ae=0,be=0,Ee=0,je=1/0,Qe=-1/0,lt=1/0,_t=-1/0;M.pos<O;){if(ae<=0){var Mt=M.readVarint();Z=7&Mt,ae=Mt>>3}if(ae--,Z===1||Z===2)(be+=M.readSVarint())<je&&(je=be),be>Qe&&(Qe=be),(Ee+=M.readSVarint())<lt&&(lt=Ee),Ee>_t&&(_t=Ee);else if(Z!==7)throw new Error("unknown command "+Z)}return[je,lt,Qe,_t]},Rl.prototype.toGeoJSON=function(M,O,Z){var ae,be,Ee=this.extent*Math.pow(2,Z),je=this.extent*M,Qe=this.extent*O,lt=this.loadGeometry(),_t=Rl.types[this.type];function Mt(Vt){for(var rn=0;rn<Vt.length;rn++){var xn=Vt[rn],In=180-360*(xn.y+Qe)/Ee;Vt[rn]=[360*(xn.x+je)/Ee-180,360/Math.PI*Math.atan(Math.exp(In*Math.PI/180))-90]}}switch(this.type){case 1:var Bt=[];for(ae=0;ae<lt.length;ae++)Bt[ae]=lt[ae][0];Mt(lt=Bt);break;case 2:for(ae=0;ae<lt.length;ae++)Mt(lt[ae]);break;case 3:for(lt=function(Vt){var rn=Vt.length;if(rn<=1)return[Vt];for(var xn,In,On=[],jn=0;jn<rn;jn++){var Vn=ap(Vt[jn]);Vn!==0&&(In===void 0&&(In=Vn<0),In===Vn<0?(xn&&On.push(xn),xn=[Vt[jn]]):xn.push(Vt[jn]))}return xn&&On.push(xn),On}(lt),ae=0;ae<lt.length;ae++)for(be=0;be<lt[ae].length;be++)Mt(lt[ae][be])}lt.length===1?lt=lt[0]:_t="Multi"+_t;var qt={type:"Feature",geometry:{type:_t,coordinates:lt},properties:this.properties};return"id"in this&&(qt.id=this.id),qt};var ff=hf;function hf(M,O){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=M,this._keys=[],this._values=[],this._features=[],M.readFields(op,this,O),this.length=this._features.length}function op(M,O,Z){M===15?O.version=Z.readVarint():M===1?O.name=Z.readString():M===5?O.extent=Z.readVarint():M===2?O._features.push(Z.pos):M===3?O._keys.push(Z.readString()):M===4&&O._values.push(function(ae){for(var be=null,Ee=ae.readVarint()+ae.pos;ae.pos<Ee;){var je=ae.readVarint()>>3;be=je===1?ae.readString():je===2?ae.readFloat():je===3?ae.readDouble():je===4?ae.readVarint64():je===5?ae.readVarint():je===6?ae.readSVarint():je===7?ae.readBoolean():null}return be}(Z))}function sp(M,O,Z){if(M===3){var ae=new ff(Z,Z.readVarint()+Z.pos);ae.length&&(O[ae.name]=ae)}}hf.prototype.feature=function(M){if(M<0||M>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[M];var O=this._pbf.readVarint()+this._pbf.pos;return new cf(this._pbf,O,this.extent,this._keys,this._values)};var zl={VectorTile:function(M,O){this.layers=M.readFields(sp,{},O)},VectorTileFeature:cf,VectorTileLayer:ff},lp=zl.VectorTileFeature.types,wc=Math.pow(2,13);function iu(M,O,Z,ae,be,Ee,je,Qe){M.emplaceBack(O,Z,2*Math.floor(ae*wc)+je,be*wc*2,Ee*wc*2,Math.round(Qe))}var Ms=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new at,this.indexArray=new Ne,this.programConfigurations=new Ei(uf,M.layers,M.zoom),this.segments=new en,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function up(M,O){return M.x===O.x&&(M.x<0||M.x>Br)||M.y===O.y&&(M.y<0||M.y>Br)}Ms.prototype.populate=function(M,O,Z){this.features=[],this.hasPattern=bc("fill-extrusion",this.layers,O);for(var ae=0,be=M;ae<be.length;ae+=1){var Ee=be[ae],je=Ee.feature,Qe=Ee.id,lt=Ee.index,_t=Ee.sourceLayerIndex,Mt=this.layers[0]._featureFilter.needGeometry,Bt={type:je.type,id:Qe,properties:je.properties,geometry:Mt?Ai(je):[]};if(this.layers[0]._featureFilter.filter(new ni(this.zoom),Bt,Z)){var qt={id:Qe,sourceLayerIndex:_t,index:lt,geometry:Mt?Bt.geometry:Ai(je),properties:je.properties,type:je.type,patterns:{}};je.id!==void 0&&(qt.id=je.id),this.hasPattern?this.features.push(_c("fill-extrusion",this.layers,qt,this.zoom,O)):this.addFeature(qt,qt.geometry,lt,Z,{}),O.featureIndex.insert(je,qt.geometry,lt,_t,this.index,!0)}}},Ms.prototype.addFeatures=function(M,O,Z){for(var ae=0,be=this.features;ae<be.length;ae+=1){var Ee=be[ae],je=Ee.geometry;this.addFeature(Ee,je,Ee.index,O,Z)}},Ms.prototype.update=function(M,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,Z)},Ms.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ms.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ms.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,uf),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Ms.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ms.prototype.addFeature=function(M,O,Z,ae,be){for(var Ee=0,je=xc(O,500);Ee<je.length;Ee+=1){for(var Qe=je[Ee],lt=0,_t=0,Mt=Qe;_t<Mt.length;_t+=1)lt+=Mt[_t].length;for(var Bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),qt=0,Vt=Qe;qt<Vt.length;qt+=1){var rn=Vt[qt];if(rn.length!==0&&!((Jr=rn).every(function(qr){return qr.x<0})||Jr.every(function(qr){return qr.x>Br})||Jr.every(function(qr){return qr.y<0})||Jr.every(function(qr){return qr.y>Br})))for(var xn=0,In=0;In<rn.length;In++){var On=rn[In];if(In>=1){var jn=rn[In-1];if(!up(On,jn)){Bt.vertexLength+4>en.MAX_VERTEX_ARRAY_LENGTH&&(Bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Vn=On.sub(jn)._perp()._unit(),Yn=jn.dist(On);xn+Yn>32768&&(xn=0),iu(this.layoutVertexArray,On.x,On.y,Vn.x,Vn.y,0,0,xn),iu(this.layoutVertexArray,On.x,On.y,Vn.x,Vn.y,0,1,xn),xn+=Yn,iu(this.layoutVertexArray,jn.x,jn.y,Vn.x,Vn.y,0,0,xn),iu(this.layoutVertexArray,jn.x,jn.y,Vn.x,Vn.y,0,1,xn);var Qn=Bt.vertexLength;this.indexArray.emplaceBack(Qn,Qn+2,Qn+1),this.indexArray.emplaceBack(Qn+1,Qn+2,Qn+3),Bt.vertexLength+=4,Bt.primitiveLength+=2}}}}if(Bt.vertexLength+lt>en.MAX_VERTEX_ARRAY_LENGTH&&(Bt=this.segments.prepareSegment(lt,this.layoutVertexArray,this.indexArray)),lp[M.type]==="Polygon"){for(var tr=[],xr=[],pr=Bt.vertexLength,Tr=0,Er=Qe;Tr<Er.length;Tr+=1){var jr=Er[Tr];if(jr.length!==0){jr!==Qe[0]&&xr.push(tr.length/2);for(var Pr=0;Pr<jr.length;Pr++){var Nr=jr[Pr];iu(this.layoutVertexArray,Nr.x,Nr.y,0,0,1,1,0),tr.push(Nr.x),tr.push(Nr.y)}}}for(var Ir=gc(tr,xr),Cr=0;Cr<Ir.length;Cr+=3)this.indexArray.emplaceBack(pr+Ir[Cr],pr+Ir[Cr+2],pr+Ir[Cr+1]);Bt.primitiveLength+=Ir.length/3,Bt.vertexLength+=lt}}var Jr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Z,be,ae)},_r("FillExtrusionBucket",Ms,{omit:["layers","features"]});var cp={paint:new Qi({"fill-extrusion-opacity":new Mr(Se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Or(Se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Mr(Se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Mr(Se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ss(Se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Or(Se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Or(Se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Mr(Se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},fp=function(M){function O(Z){M.call(this,Z,cp)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.createBucket=function(Z){return new Ms(Z)},O.prototype.queryRadius=function(){return Au(this.paint.get("fill-extrusion-translate"))},O.prototype.is3D=function(){return!0},O.prototype.queryIntersectsFeature=function(Z,ae,be,Ee,je,Qe,lt,_t){var Mt=Mu(Z,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Qe.angle,lt),Bt=this.paint.get("fill-extrusion-height").evaluate(ae,be),qt=this.paint.get("fill-extrusion-base").evaluate(ae,be),Vt=function(xn,In,On,jn){for(var Vn=[],Yn=0,Qn=xn;Yn<Qn.length;Yn+=1){var tr=Qn[Yn],xr=[tr.x,tr.y,jn,1];Eu(xr,xr,In),Vn.push(new t(xr[0]/xr[3],xr[1]/xr[3]))}return Vn}(Mt,_t,0,0),rn=function(xn,In,On,jn){for(var Vn=[],Yn=[],Qn=jn[8]*In,tr=jn[9]*In,xr=jn[10]*In,pr=jn[11]*In,Tr=jn[8]*On,Er=jn[9]*On,jr=jn[10]*On,Pr=jn[11]*On,Nr=0,Ir=xn;Nr<Ir.length;Nr+=1){for(var Cr=[],Jr=[],qr=0,bi=Ir[Nr];qr<bi.length;qr+=1){var Fr=bi[qr],gi=Fr.x,Ti=Fr.y,Mi=jn[0]*gi+jn[4]*Ti+jn[12],Ci=jn[1]*gi+jn[5]*Ti+jn[13],_i=jn[2]*gi+jn[6]*Ti+jn[14],ia=jn[3]*gi+jn[7]*Ti+jn[15],Ii=_i+xr,ga=ia+pr,Ea=Mi+Tr,_a=Ci+Er,Wa=_i+jr,wa=ia+Pr,oa=new t((Mi+Qn)/ga,(Ci+tr)/ga);oa.z=Ii/ga,Cr.push(oa);var Ta=new t(Ea/wa,_a/wa);Ta.z=Wa/wa,Jr.push(Ta)}Vn.push(Cr),Yn.push(Jr)}return[Vn,Yn]}(Ee,qt,Bt,_t);return function(xn,In,On){var jn=1/0;js(On,In)&&(jn=pf(On,In[0]));for(var Vn=0;Vn<In.length;Vn++)for(var Yn=In[Vn],Qn=xn[Vn],tr=0;tr<Yn.length-1;tr++){var xr=Yn[tr],pr=Yn[tr+1],Tr=Qn[tr],Er=[xr,pr,Qn[tr+1],Tr,xr];Ni(On,Er)&&(jn=Math.min(jn,pf(On,Er)))}return jn!==1/0&&jn}(rn[0],rn[1],Vt)},O}(ha);function au(M,O){return M.x*O.x+M.y*O.y}function pf(M,O){if(M.length===1){for(var Z,ae=0,be=O[ae++];!Z||be.equals(Z);)if(!(Z=O[ae++]))return 1/0;for(;ae<O.length;ae++){var Ee=O[ae],je=M[0],Qe=Z.sub(be),lt=Ee.sub(be),_t=je.sub(be),Mt=au(Qe,Qe),Bt=au(Qe,lt),qt=au(lt,lt),Vt=au(_t,Qe),rn=au(_t,lt),xn=Mt*qt-Bt*Bt,In=(qt*Vt-Bt*rn)/xn,On=(Mt*rn-Bt*Vt)/xn,jn=1-In-On,Vn=be.z*jn+Z.z*In+Ee.z*On;if(isFinite(Vn))return Vn}return 1/0}for(var Yn=1/0,Qn=0,tr=O;Qn<tr.length;Qn+=1){var xr=tr[Qn];Yn=Math.min(Yn,xr.z)}return Yn}var df=fi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,hp=zl.VectorTileFeature.types,pp=Math.cos(Math.PI/180*37.5),gf=Math.pow(2,14)/.5,no=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ft,this.indexArray=new Ne,this.programConfigurations=new Ei(df,M.layers,M.zoom),this.segments=new en,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};no.prototype.populate=function(M,O,Z){this.hasPattern=bc("line",this.layers,O);for(var ae=this.layers[0].layout.get("line-sort-key"),be=[],Ee=0,je=M;Ee<je.length;Ee+=1){var Qe=je[Ee],lt=Qe.feature,_t=Qe.id,Mt=Qe.index,Bt=Qe.sourceLayerIndex,qt=this.layers[0]._featureFilter.needGeometry,Vt={type:lt.type,id:_t,properties:lt.properties,geometry:qt?Ai(lt):[]};if(this.layers[0]._featureFilter.filter(new ni(this.zoom),Vt,Z)){qt||(Vt.geometry=Ai(lt));var rn=ae?ae.evaluate(Vt,{},Z):void 0,xn={id:_t,properties:lt.properties,type:lt.type,sourceLayerIndex:Bt,index:Mt,geometry:Vt.geometry,patterns:{},sortKey:rn};be.push(xn)}}ae&&be.sort(function(Tr,Er){return Tr.sortKey-Er.sortKey});for(var In=0,On=be;In<On.length;In+=1){var jn=On[In],Vn=jn,Yn=Vn.geometry,Qn=Vn.index,tr=Vn.sourceLayerIndex;if(this.hasPattern){var xr=_c("line",this.layers,jn,this.zoom,O);this.patternFeatures.push(xr)}else this.addFeature(jn,Yn,Qn,Z,{});var pr=M[Qn].feature;O.featureIndex.insert(pr,Yn,Qn,tr,this.index)}},no.prototype.update=function(M,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,O,this.stateDependentLayers,Z)},no.prototype.addFeatures=function(M,O,Z){for(var ae=0,be=this.patternFeatures;ae<be.length;ae+=1){var Ee=be[ae];this.addFeature(Ee,Ee.geometry,Ee.index,O,Z)}},no.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},no.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},no.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,df),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},no.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},no.prototype.addFeature=function(M,O,Z,ae,be){for(var Ee=this.layers[0].layout,je=Ee.get("line-join").evaluate(M,{}),Qe=Ee.get("line-cap"),lt=Ee.get("line-miter-limit"),_t=Ee.get("line-round-limit"),Mt=0,Bt=O;Mt<Bt.length;Mt+=1){var qt=Bt[Mt];this.addLine(qt,M,je,Qe,lt,_t)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Z,be,ae)},no.prototype.addLine=function(M,O,Z,ae,be,Ee){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,O.properties&&O.properties.hasOwnProperty("mapbox_clip_start")&&O.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+O.properties.mapbox_clip_start,this.clipEnd=+O.properties.mapbox_clip_end;for(var je=0;je<M.length-1;je++)this.totalDistance+=M[je].dist(M[je+1]);this.updateScaledDistance()}for(var Qe=hp[O.type]==="Polygon",lt=M.length;lt>=2&&M[lt-1].equals(M[lt-2]);)lt--;for(var _t=0;_t<lt-1&&M[_t].equals(M[_t+1]);)_t++;if(!(lt<(Qe?3:2))){Z==="bevel"&&(be=1.05);var Mt,Bt=this.overscaling<=16?122880/(512*this.overscaling):0,qt=this.segments.prepareSegment(10*lt,this.layoutVertexArray,this.indexArray),Vt=void 0,rn=void 0,xn=void 0,In=void 0;this.e1=this.e2=-1,Qe&&(Mt=M[lt-2],In=M[_t].sub(Mt)._unit()._perp());for(var On=_t;On<lt;On++)if(!(rn=On===lt-1?Qe?M[_t+1]:void 0:M[On+1])||!M[On].equals(rn)){In&&(xn=In),Mt&&(Vt=Mt),Mt=M[On],In=rn?rn.sub(Mt)._unit()._perp():xn;var jn=(xn=xn||In).add(In);jn.x===0&&jn.y===0||jn._unit();var Vn=xn.x*In.x+xn.y*In.y,Yn=jn.x*In.x+jn.y*In.y,Qn=Yn!==0?1/Yn:1/0,tr=2*Math.sqrt(2-2*Yn),xr=Yn<pp&&Vt&&rn,pr=xn.x*In.y-xn.y*In.x>0;if(xr&&On>_t){var Tr=Mt.dist(Vt);if(Tr>2*Bt){var Er=Mt.sub(Mt.sub(Vt)._mult(Bt/Tr)._round());this.updateDistance(Vt,Er),this.addCurrentVertex(Er,xn,0,0,qt),Vt=Er}}var jr=Vt&&rn,Pr=jr?Z:Qe?"butt":ae;if(jr&&Pr==="round"&&(Qn<Ee?Pr="miter":Qn<=2&&(Pr="fakeround")),Pr==="miter"&&Qn>be&&(Pr="bevel"),Pr==="bevel"&&(Qn>2&&(Pr="flipbevel"),Qn<be&&(Pr="miter")),Vt&&this.updateDistance(Vt,Mt),Pr==="miter")jn._mult(Qn),this.addCurrentVertex(Mt,jn,0,0,qt);else if(Pr==="flipbevel"){if(Qn>100)jn=In.mult(-1);else{var Nr=Qn*xn.add(In).mag()/xn.sub(In).mag();jn._perp()._mult(Nr*(pr?-1:1))}this.addCurrentVertex(Mt,jn,0,0,qt),this.addCurrentVertex(Mt,jn.mult(-1),0,0,qt)}else if(Pr==="bevel"||Pr==="fakeround"){var Ir=-Math.sqrt(Qn*Qn-1),Cr=pr?Ir:0,Jr=pr?0:Ir;if(Vt&&this.addCurrentVertex(Mt,xn,Cr,Jr,qt),Pr==="fakeround")for(var qr=Math.round(180*tr/Math.PI/20),bi=1;bi<qr;bi++){var Fr=bi/qr;if(Fr!==.5){var gi=Fr-.5;Fr+=Fr*gi*(Fr-1)*((1.0904+Vn*(Vn*(3.55645-1.43519*Vn)-3.2452))*gi*gi+(.848013+Vn*(.215638*Vn-1.06021)))}var Ti=In.sub(xn)._mult(Fr)._add(xn)._unit()._mult(pr?-1:1);this.addHalfVertex(Mt,Ti.x,Ti.y,!1,pr,0,qt)}rn&&this.addCurrentVertex(Mt,In,-Cr,-Jr,qt)}else if(Pr==="butt")this.addCurrentVertex(Mt,jn,0,0,qt);else if(Pr==="square"){var Mi=Vt?1:-1;this.addCurrentVertex(Mt,jn,Mi,Mi,qt)}else Pr==="round"&&(Vt&&(this.addCurrentVertex(Mt,xn,0,0,qt),this.addCurrentVertex(Mt,xn,1,1,qt,!0)),rn&&(this.addCurrentVertex(Mt,In,-1,-1,qt,!0),this.addCurrentVertex(Mt,In,0,0,qt)));if(xr&&On<lt-1){var Ci=Mt.dist(rn);if(Ci>2*Bt){var _i=Mt.add(rn.sub(Mt)._mult(Bt/Ci)._round());this.updateDistance(Mt,_i),this.addCurrentVertex(_i,In,0,0,qt),Mt=_i}}}}},no.prototype.addCurrentVertex=function(M,O,Z,ae,be,Ee){Ee===void 0&&(Ee=!1);var je=O.x+O.y*Z,Qe=O.y-O.x*Z,lt=-O.x+O.y*ae,_t=-O.y-O.x*ae;this.addHalfVertex(M,je,Qe,Ee,!1,Z,be),this.addHalfVertex(M,lt,_t,Ee,!0,-ae,be),this.distance>gf/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(M,O,Z,ae,be,Ee))},no.prototype.addHalfVertex=function(M,O,Z,ae,be,Ee,je){var Qe=M.x,lt=M.y,_t=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((Qe<<1)+(ae?1:0),(lt<<1)+(be?1:0),Math.round(63*O)+128,Math.round(63*Z)+128,1+(Ee===0?0:Ee<0?-1:1)|(63&_t)<<2,_t>>6);var Mt=je.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Mt),je.primitiveLength++),be?this.e2=Mt:this.e1=Mt},no.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(gf-1):this.distance},no.prototype.updateDistance=function(M,O){this.distance+=M.dist(O),this.updateScaledDistance()},_r("LineBucket",no,{omit:["layers","patternFeatures"]});var dp=new Qi({"line-cap":new Mr(Se.layout_line["line-cap"]),"line-join":new Or(Se.layout_line["line-join"]),"line-miter-limit":new Mr(Se.layout_line["line-miter-limit"]),"line-round-limit":new Mr(Se.layout_line["line-round-limit"]),"line-sort-key":new Or(Se.layout_line["line-sort-key"])}),vf={paint:new Qi({"line-opacity":new Or(Se.paint_line["line-opacity"]),"line-color":new Or(Se.paint_line["line-color"]),"line-translate":new Mr(Se.paint_line["line-translate"]),"line-translate-anchor":new Mr(Se.paint_line["line-translate-anchor"]),"line-width":new Or(Se.paint_line["line-width"]),"line-gap-width":new Or(Se.paint_line["line-gap-width"]),"line-offset":new Or(Se.paint_line["line-offset"]),"line-blur":new Or(Se.paint_line["line-blur"]),"line-dasharray":new go(Se.paint_line["line-dasharray"]),"line-pattern":new ss(Se.paint_line["line-pattern"]),"line-gradient":new Ga(Se.paint_line["line-gradient"])}),layout:dp},gp=function(M){function O(){M.apply(this,arguments)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.possiblyEvaluate=function(Z,ae){return ae=new ni(Math.floor(ae.zoom),{now:ae.now,fadeDuration:ae.fadeDuration,zoomHistory:ae.zoomHistory,transition:ae.transition}),M.prototype.possiblyEvaluate.call(this,Z,ae)},O.prototype.evaluate=function(Z,ae,be,Ee){return ae=c({},ae,{zoom:Math.floor(ae.zoom)}),M.prototype.evaluate.call(this,Z,ae,be,Ee)},O}(Or),mf=new gp(vf.paint.properties["line-width"].specification);mf.useIntegerZoom=!0;var vp=function(M){function O(Z){M.call(this,Z,vf)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype._handleSpecialPaintPropertyUpdate=function(Z){Z==="line-gradient"&&this._updateGradient()},O.prototype._updateGradient=function(){var Z=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=tf(Z,"lineProgress"),this.gradientTexture=null},O.prototype.recalculate=function(Z,ae){M.prototype.recalculate.call(this,Z,ae),this.paint._values["line-floorwidth"]=mf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Z)},O.prototype.createBucket=function(Z){return new no(Z)},O.prototype.queryRadius=function(Z){var ae=Z,be=yf(nl("line-width",this,ae),nl("line-gap-width",this,ae)),Ee=nl("line-offset",this,ae);return be/2+Math.abs(Ee)+Au(this.paint.get("line-translate"))},O.prototype.queryIntersectsFeature=function(Z,ae,be,Ee,je,Qe,lt){var _t=Mu(Z,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Qe.angle,lt),Mt=lt/2*yf(this.paint.get("line-width").evaluate(ae,be),this.paint.get("line-gap-width").evaluate(ae,be)),Bt=this.paint.get("line-offset").evaluate(ae,be);return Bt&&(Ee=function(qt,Vt){for(var rn=[],xn=new t(0,0),In=0;In<qt.length;In++){for(var On=qt[In],jn=[],Vn=0;Vn<On.length;Vn++){var Yn=On[Vn-1],Qn=On[Vn],tr=On[Vn+1],xr=Vn===0?xn:Qn.sub(Yn)._unit()._perp(),pr=Vn===On.length-1?xn:tr.sub(Qn)._unit()._perp(),Tr=xr._add(pr)._unit(),Er=Tr.x*pr.x+Tr.y*pr.y;Tr._mult(1/Er),jn.push(Tr._mult(Vt)._add(Qn))}rn.push(jn)}return rn}(Ee,Bt*lt)),function(qt,Vt,rn){for(var xn=0;xn<Vt.length;xn++){var In=Vt[xn];if(qt.length>=3){for(var On=0;On<In.length;On++)if(dl(qt,In[On]))return!0}if(uc(qt,In,rn))return!0}return!1}(_t,Ee,Mt)},O.prototype.isTileClipped=function(){return!0},O}(ha);function yf(M,O){return O>0?O+2*M:M}var Tc=fi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),mp=fi([{name:"a_projected_pos",components:3,type:"Float32"}],4),yp=(fi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),fi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),xf=(fi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),fi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),xp=fi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function bp(M,O,Z){return M.sections.forEach(function(ae){ae.text=function(be,Ee,je){var Qe=Ee.layout.get("text-transform").evaluate(je,{});return Qe==="uppercase"?be=be.toLocaleUpperCase():Qe==="lowercase"&&(be=be.toLocaleLowerCase()),ca.applyArabicShaping&&(be=ca.applyArabicShaping(be)),be}(ae.text,O,Z)}),M}fi([{name:"triangle",components:3,type:"Uint16"}]),fi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),fi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),fi([{type:"Float32",name:"offsetX"}]),fi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ou={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Sa=24,bf=function(M,O,Z,ae,be){var Ee,je,Qe=8*be-ae-1,lt=(1<<Qe)-1,_t=lt>>1,Mt=-7,Bt=Z?be-1:0,qt=Z?-1:1,Vt=M[O+Bt];for(Bt+=qt,Ee=Vt&(1<<-Mt)-1,Vt>>=-Mt,Mt+=Qe;Mt>0;Ee=256*Ee+M[O+Bt],Bt+=qt,Mt-=8);for(je=Ee&(1<<-Mt)-1,Ee>>=-Mt,Mt+=ae;Mt>0;je=256*je+M[O+Bt],Bt+=qt,Mt-=8);if(Ee===0)Ee=1-_t;else{if(Ee===lt)return je?NaN:1/0*(Vt?-1:1);je+=Math.pow(2,ae),Ee-=_t}return(Vt?-1:1)*je*Math.pow(2,Ee-ae)},_f=function(M,O,Z,ae,be,Ee){var je,Qe,lt,_t=8*Ee-be-1,Mt=(1<<_t)-1,Bt=Mt>>1,qt=be===23?Math.pow(2,-24)-Math.pow(2,-77):0,Vt=ae?0:Ee-1,rn=ae?1:-1,xn=O<0||O===0&&1/O<0?1:0;for(O=Math.abs(O),isNaN(O)||O===1/0?(Qe=isNaN(O)?1:0,je=Mt):(je=Math.floor(Math.log(O)/Math.LN2),O*(lt=Math.pow(2,-je))<1&&(je--,lt*=2),(O+=je+Bt>=1?qt/lt:qt*Math.pow(2,1-Bt))*lt>=2&&(je++,lt/=2),je+Bt>=Mt?(Qe=0,je=Mt):je+Bt>=1?(Qe=(O*lt-1)*Math.pow(2,be),je+=Bt):(Qe=O*Math.pow(2,Bt-1)*Math.pow(2,be),je=0));be>=8;M[Z+Vt]=255&Qe,Vt+=rn,Qe/=256,be-=8);for(je=je<<be|Qe,_t+=be;_t>0;M[Z+Vt]=255&je,Vt+=rn,je/=256,_t-=8);M[Z+Vt-rn]|=128*xn},Iu=wi;function wi(M){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(M)?M:new Uint8Array(M||0),this.pos=0,this.type=0,this.length=this.buf.length}wi.Varint=0,wi.Fixed64=1,wi.Bytes=2,wi.Fixed32=5;var kc=4294967296,wf=1/kc,Tf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function rl(M){return M.type===wi.Bytes?M.readVarint()+M.pos:M.pos+1}function Dl(M,O,Z){return Z?4294967296*O+(M>>>0):4294967296*(O>>>0)+(M>>>0)}function kf(M,O,Z){var ae=O<=16383?1:O<=2097151?2:O<=268435455?3:Math.floor(Math.log(O)/(7*Math.LN2));Z.realloc(ae);for(var be=Z.pos-1;be>=M;be--)Z.buf[be+ae]=Z.buf[be]}function _p(M,O){for(var Z=0;Z<M.length;Z++)O.writeVarint(M[Z])}function wp(M,O){for(var Z=0;Z<M.length;Z++)O.writeSVarint(M[Z])}function Tp(M,O){for(var Z=0;Z<M.length;Z++)O.writeFloat(M[Z])}function kp(M,O){for(var Z=0;Z<M.length;Z++)O.writeDouble(M[Z])}function Ap(M,O){for(var Z=0;Z<M.length;Z++)O.writeBoolean(M[Z])}function Mp(M,O){for(var Z=0;Z<M.length;Z++)O.writeFixed32(M[Z])}function Sp(M,O){for(var Z=0;Z<M.length;Z++)O.writeSFixed32(M[Z])}function Ep(M,O){for(var Z=0;Z<M.length;Z++)O.writeFixed64(M[Z])}function Lp(M,O){for(var Z=0;Z<M.length;Z++)O.writeSFixed64(M[Z])}function Ru(M,O){return(M[O]|M[O+1]<<8|M[O+2]<<16)+16777216*M[O+3]}function Fl(M,O,Z){M[Z]=O,M[Z+1]=O>>>8,M[Z+2]=O>>>16,M[Z+3]=O>>>24}function Af(M,O){return(M[O]|M[O+1]<<8|M[O+2]<<16)+(M[O+3]<<24)}wi.prototype={destroy:function(){this.buf=null},readFields:function(M,O,Z){for(Z=Z||this.length;this.pos<Z;){var ae=this.readVarint(),be=ae>>3,Ee=this.pos;this.type=7&ae,M(be,O,this),this.pos===Ee&&this.skip(ae)}return O},readMessage:function(M,O){return this.readFields(M,O,this.readVarint()+this.pos)},readFixed32:function(){var M=Ru(this.buf,this.pos);return this.pos+=4,M},readSFixed32:function(){var M=Af(this.buf,this.pos);return this.pos+=4,M},readFixed64:function(){var M=Ru(this.buf,this.pos)+Ru(this.buf,this.pos+4)*kc;return this.pos+=8,M},readSFixed64:function(){var M=Ru(this.buf,this.pos)+Af(this.buf,this.pos+4)*kc;return this.pos+=8,M},readFloat:function(){var M=bf(this.buf,this.pos,!0,23,4);return this.pos+=4,M},readDouble:function(){var M=bf(this.buf,this.pos,!0,52,8);return this.pos+=8,M},readVarint:function(M){var O,Z,ae=this.buf;return O=127&(Z=ae[this.pos++]),Z<128?O:(O|=(127&(Z=ae[this.pos++]))<<7,Z<128?O:(O|=(127&(Z=ae[this.pos++]))<<14,Z<128?O:(O|=(127&(Z=ae[this.pos++]))<<21,Z<128?O:function(be,Ee,je){var Qe,lt,_t=je.buf;if(Qe=(112&(lt=_t[je.pos++]))>>4,lt<128||(Qe|=(127&(lt=_t[je.pos++]))<<3,lt<128)||(Qe|=(127&(lt=_t[je.pos++]))<<10,lt<128)||(Qe|=(127&(lt=_t[je.pos++]))<<17,lt<128)||(Qe|=(127&(lt=_t[je.pos++]))<<24,lt<128)||(Qe|=(1&(lt=_t[je.pos++]))<<31,lt<128))return Dl(be,Qe,Ee);throw new Error("Expected varint not more than 10 bytes")}(O|=(15&(Z=ae[this.pos]))<<28,M,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var M=this.readVarint();return M%2==1?(M+1)/-2:M/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var M=this.readVarint()+this.pos,O=this.pos;return this.pos=M,M-O>=12&&Tf?function(Z,ae,be){return Tf.decode(Z.subarray(ae,be))}(this.buf,O,M):function(Z,ae,be){for(var Ee="",je=ae;je<be;){var Qe,lt,_t,Mt=Z[je],Bt=null,qt=Mt>239?4:Mt>223?3:Mt>191?2:1;if(je+qt>be)break;qt===1?Mt<128&&(Bt=Mt):qt===2?(192&(Qe=Z[je+1]))==128&&(Bt=(31&Mt)<<6|63&Qe)<=127&&(Bt=null):qt===3?(Qe=Z[je+1],lt=Z[je+2],(192&Qe)==128&&(192&lt)==128&&((Bt=(15&Mt)<<12|(63&Qe)<<6|63&lt)<=2047||Bt>=55296&&Bt<=57343)&&(Bt=null)):qt===4&&(Qe=Z[je+1],lt=Z[je+2],_t=Z[je+3],(192&Qe)==128&&(192&lt)==128&&(192&_t)==128&&((Bt=(15&Mt)<<18|(63&Qe)<<12|(63&lt)<<6|63&_t)<=65535||Bt>=1114112)&&(Bt=null)),Bt===null?(Bt=65533,qt=1):Bt>65535&&(Bt-=65536,Ee+=String.fromCharCode(Bt>>>10&1023|55296),Bt=56320|1023&Bt),Ee+=String.fromCharCode(Bt),je+=qt}return Ee}(this.buf,O,M)},readBytes:function(){var M=this.readVarint()+this.pos,O=this.buf.subarray(this.pos,M);return this.pos=M,O},readPackedVarint:function(M,O){if(this.type!==wi.Bytes)return M.push(this.readVarint(O));var Z=rl(this);for(M=M||[];this.pos<Z;)M.push(this.readVarint(O));return M},readPackedSVarint:function(M){if(this.type!==wi.Bytes)return M.push(this.readSVarint());var O=rl(this);for(M=M||[];this.pos<O;)M.push(this.readSVarint());return M},readPackedBoolean:function(M){if(this.type!==wi.Bytes)return M.push(this.readBoolean());var O=rl(this);for(M=M||[];this.pos<O;)M.push(this.readBoolean());return M},readPackedFloat:function(M){if(this.type!==wi.Bytes)return M.push(this.readFloat());var O=rl(this);for(M=M||[];this.pos<O;)M.push(this.readFloat());return M},readPackedDouble:function(M){if(this.type!==wi.Bytes)return M.push(this.readDouble());var O=rl(this);for(M=M||[];this.pos<O;)M.push(this.readDouble());return M},readPackedFixed32:function(M){if(this.type!==wi.Bytes)return M.push(this.readFixed32());var O=rl(this);for(M=M||[];this.pos<O;)M.push(this.readFixed32());return M},readPackedSFixed32:function(M){if(this.type!==wi.Bytes)return M.push(this.readSFixed32());var O=rl(this);for(M=M||[];this.pos<O;)M.push(this.readSFixed32());return M},readPackedFixed64:function(M){if(this.type!==wi.Bytes)return M.push(this.readFixed64());var O=rl(this);for(M=M||[];this.pos<O;)M.push(this.readFixed64());return M},readPackedSFixed64:function(M){if(this.type!==wi.Bytes)return M.push(this.readSFixed64());var O=rl(this);for(M=M||[];this.pos<O;)M.push(this.readSFixed64());return M},skip:function(M){var O=7&M;if(O===wi.Varint)for(;this.buf[this.pos++]>127;);else if(O===wi.Bytes)this.pos=this.readVarint()+this.pos;else if(O===wi.Fixed32)this.pos+=4;else{if(O!==wi.Fixed64)throw new Error("Unimplemented type: "+O);this.pos+=8}},writeTag:function(M,O){this.writeVarint(M<<3|O)},realloc:function(M){for(var O=this.length||16;O<this.pos+M;)O*=2;if(O!==this.length){var Z=new Uint8Array(O);Z.set(this.buf),this.buf=Z,this.length=O}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(M){this.realloc(4),Fl(this.buf,M,this.pos),this.pos+=4},writeSFixed32:function(M){this.realloc(4),Fl(this.buf,M,this.pos),this.pos+=4},writeFixed64:function(M){this.realloc(8),Fl(this.buf,-1&M,this.pos),Fl(this.buf,Math.floor(M*wf),this.pos+4),this.pos+=8},writeSFixed64:function(M){this.realloc(8),Fl(this.buf,-1&M,this.pos),Fl(this.buf,Math.floor(M*wf),this.pos+4),this.pos+=8},writeVarint:function(M){(M=+M||0)>268435455||M<0?function(O,Z){var ae,be;if(O>=0?(ae=O%4294967296|0,be=O/4294967296|0):(be=~(-O/4294967296),4294967295^(ae=~(-O%4294967296))?ae=ae+1|0:(ae=0,be=be+1|0)),O>=18446744073709552e3||O<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Z.realloc(10),function(Ee,je,Qe){Qe.buf[Qe.pos++]=127&Ee|128,Ee>>>=7,Qe.buf[Qe.pos++]=127&Ee|128,Ee>>>=7,Qe.buf[Qe.pos++]=127&Ee|128,Ee>>>=7,Qe.buf[Qe.pos++]=127&Ee|128,Ee>>>=7,Qe.buf[Qe.pos]=127&Ee}(ae,0,Z),function(Ee,je){var Qe=(7&Ee)<<4;je.buf[je.pos++]|=Qe|((Ee>>>=3)?128:0),Ee&&(je.buf[je.pos++]=127&Ee|((Ee>>>=7)?128:0),Ee&&(je.buf[je.pos++]=127&Ee|((Ee>>>=7)?128:0),Ee&&(je.buf[je.pos++]=127&Ee|((Ee>>>=7)?128:0),Ee&&(je.buf[je.pos++]=127&Ee|((Ee>>>=7)?128:0),Ee&&(je.buf[je.pos++]=127&Ee)))))}(be,Z)}(M,this):(this.realloc(4),this.buf[this.pos++]=127&M|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=M>>>7&127))))},writeSVarint:function(M){this.writeVarint(M<0?2*-M-1:2*M)},writeBoolean:function(M){this.writeVarint(Boolean(M))},writeString:function(M){M=String(M),this.realloc(4*M.length),this.pos++;var O=this.pos;this.pos=function(ae,be,Ee){for(var je,Qe,lt=0;lt<be.length;lt++){if((je=be.charCodeAt(lt))>55295&&je<57344){if(!Qe){je>56319||lt+1===be.length?(ae[Ee++]=239,ae[Ee++]=191,ae[Ee++]=189):Qe=je;continue}if(je<56320){ae[Ee++]=239,ae[Ee++]=191,ae[Ee++]=189,Qe=je;continue}je=Qe-55296<<10|je-56320|65536,Qe=null}else Qe&&(ae[Ee++]=239,ae[Ee++]=191,ae[Ee++]=189,Qe=null);je<128?ae[Ee++]=je:(je<2048?ae[Ee++]=je>>6|192:(je<65536?ae[Ee++]=je>>12|224:(ae[Ee++]=je>>18|240,ae[Ee++]=je>>12&63|128),ae[Ee++]=je>>6&63|128),ae[Ee++]=63&je|128)}return Ee}(this.buf,M,this.pos);var Z=this.pos-O;Z>=128&&kf(O,Z,this),this.pos=O-1,this.writeVarint(Z),this.pos+=Z},writeFloat:function(M){this.realloc(4),_f(this.buf,M,this.pos,!0,23,4),this.pos+=4},writeDouble:function(M){this.realloc(8),_f(this.buf,M,this.pos,!0,52,8),this.pos+=8},writeBytes:function(M){var O=M.length;this.writeVarint(O),this.realloc(O);for(var Z=0;Z<O;Z++)this.buf[this.pos++]=M[Z]},writeRawMessage:function(M,O){this.pos++;var Z=this.pos;M(O,this);var ae=this.pos-Z;ae>=128&&kf(Z,ae,this),this.pos=Z-1,this.writeVarint(ae),this.pos+=ae},writeMessage:function(M,O,Z){this.writeTag(M,wi.Bytes),this.writeRawMessage(O,Z)},writePackedVarint:function(M,O){O.length&&this.writeMessage(M,_p,O)},writePackedSVarint:function(M,O){O.length&&this.writeMessage(M,wp,O)},writePackedBoolean:function(M,O){O.length&&this.writeMessage(M,Ap,O)},writePackedFloat:function(M,O){O.length&&this.writeMessage(M,Tp,O)},writePackedDouble:function(M,O){O.length&&this.writeMessage(M,kp,O)},writePackedFixed32:function(M,O){O.length&&this.writeMessage(M,Mp,O)},writePackedSFixed32:function(M,O){O.length&&this.writeMessage(M,Sp,O)},writePackedFixed64:function(M,O){O.length&&this.writeMessage(M,Ep,O)},writePackedSFixed64:function(M,O){O.length&&this.writeMessage(M,Lp,O)},writeBytesField:function(M,O){this.writeTag(M,wi.Bytes),this.writeBytes(O)},writeFixed32Field:function(M,O){this.writeTag(M,wi.Fixed32),this.writeFixed32(O)},writeSFixed32Field:function(M,O){this.writeTag(M,wi.Fixed32),this.writeSFixed32(O)},writeFixed64Field:function(M,O){this.writeTag(M,wi.Fixed64),this.writeFixed64(O)},writeSFixed64Field:function(M,O){this.writeTag(M,wi.Fixed64),this.writeSFixed64(O)},writeVarintField:function(M,O){this.writeTag(M,wi.Varint),this.writeVarint(O)},writeSVarintField:function(M,O){this.writeTag(M,wi.Varint),this.writeSVarint(O)},writeStringField:function(M,O){this.writeTag(M,wi.Bytes),this.writeString(O)},writeFloatField:function(M,O){this.writeTag(M,wi.Fixed32),this.writeFloat(O)},writeDoubleField:function(M,O){this.writeTag(M,wi.Fixed64),this.writeDouble(O)},writeBooleanField:function(M,O){this.writeVarintField(M,Boolean(O))}};function Cp(M,O,Z){M===1&&Z.readMessage(Pp,O)}function Pp(M,O,Z){if(M===3){var ae=Z.readMessage(Op,{}),be=ae.id,Ee=ae.bitmap,je=ae.width,Qe=ae.height,lt=ae.left,_t=ae.top,Mt=ae.advance;O.push({id:be,bitmap:new Tl({width:je+6,height:Qe+6},Ee),metrics:{width:je,height:Qe,left:lt,top:_t,advance:Mt}})}}function Op(M,O,Z){M===1?O.id=Z.readVarint():M===2?O.bitmap=Z.readBytes():M===3?O.width=Z.readVarint():M===4?O.height=Z.readVarint():M===5?O.left=Z.readSVarint():M===6?O.top=Z.readSVarint():M===7&&(O.advance=Z.readVarint())}function Mf(M){for(var O=0,Z=0,ae=0,be=M;ae<be.length;ae+=1){var Ee=be[ae];O+=Ee.w*Ee.h,Z=Math.max(Z,Ee.w)}M.sort(function(xn,In){return In.h-xn.h});for(var je=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(O/.95)),Z),h:1/0}],Qe=0,lt=0,_t=0,Mt=M;_t<Mt.length;_t+=1)for(var Bt=Mt[_t],qt=je.length-1;qt>=0;qt--){var Vt=je[qt];if(!(Bt.w>Vt.w||Bt.h>Vt.h)){if(Bt.x=Vt.x,Bt.y=Vt.y,lt=Math.max(lt,Bt.y+Bt.h),Qe=Math.max(Qe,Bt.x+Bt.w),Bt.w===Vt.w&&Bt.h===Vt.h){var rn=je.pop();qt<je.length&&(je[qt]=rn)}else Bt.h===Vt.h?(Vt.x+=Bt.w,Vt.w-=Bt.w):Bt.w===Vt.w?(Vt.y+=Bt.h,Vt.h-=Bt.h):(je.push({x:Vt.x+Bt.w,y:Vt.y,w:Vt.w-Bt.w,h:Bt.h}),Vt.y+=Bt.h,Vt.h-=Bt.h);break}}return{w:Qe,h:lt,fill:O/(Qe*lt)||0}}var zu=function(M,O){var Z=O.pixelRatio,ae=O.version,be=O.stretchX,Ee=O.stretchY,je=O.content;this.paddedRect=M,this.pixelRatio=Z,this.stretchX=be,this.stretchY=Ee,this.content=je,this.version=ae},su={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};su.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},su.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},su.tlbr.get=function(){return this.tl.concat(this.br)},su.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(zu.prototype,su);var lu=function(M,O){var Z={},ae={};this.haveRenderCallbacks=[];var be=[];this.addImages(M,Z,be),this.addImages(O,ae,be);var Ee=Mf(be),je=Ee.w,Qe=Ee.h,lt=new to({width:je||1,height:Qe||1});for(var _t in M){var Mt=M[_t],Bt=Z[_t].paddedRect;to.copy(Mt.data,lt,{x:0,y:0},{x:Bt.x+1,y:Bt.y+1},Mt.data)}for(var qt in O){var Vt=O[qt],rn=ae[qt].paddedRect,xn=rn.x+1,In=rn.y+1,On=Vt.data.width,jn=Vt.data.height;to.copy(Vt.data,lt,{x:0,y:0},{x:xn,y:In},Vt.data),to.copy(Vt.data,lt,{x:0,y:jn-1},{x:xn,y:In-1},{width:On,height:1}),to.copy(Vt.data,lt,{x:0,y:0},{x:xn,y:In+jn},{width:On,height:1}),to.copy(Vt.data,lt,{x:On-1,y:0},{x:xn-1,y:In},{width:1,height:jn}),to.copy(Vt.data,lt,{x:0,y:0},{x:xn+On,y:In},{width:1,height:jn})}this.image=lt,this.iconPositions=Z,this.patternPositions=ae};lu.prototype.addImages=function(M,O,Z){for(var ae in M){var be=M[ae],Ee={x:0,y:0,w:be.data.width+2,h:be.data.height+2};Z.push(Ee),O[ae]=new zu(Ee,be),be.hasRenderCallback&&this.haveRenderCallbacks.push(ae)}},lu.prototype.patchUpdatedImages=function(M,O){for(var Z in M.dispatchRenderCallbacks(this.haveRenderCallbacks),M.updatedImages)this.patchUpdatedImage(this.iconPositions[Z],M.getImage(Z),O),this.patchUpdatedImage(this.patternPositions[Z],M.getImage(Z),O)},lu.prototype.patchUpdatedImage=function(M,O,Z){if(M&&O&&M.version!==O.version){M.version=O.version;var ae=M.tl,be=ae[0],Ee=ae[1];Z.update(O.data,void 0,{x:be,y:Ee})}},_r("ImagePosition",zu),_r("ImageAtlas",lu);var Po={horizontal:1,vertical:2,horizontalOnly:3},Du=-17,Bl=function(){this.scale=1,this.fontStack="",this.imageName=null};Bl.forText=function(M,O){var Z=new Bl;return Z.scale=M||1,Z.fontStack=O,Z},Bl.forImage=function(M){var O=new Bl;return O.imageName=M,O};var ja=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Fu(M,O,Z,ae,be,Ee,je,Qe,lt,_t,Mt,Bt,qt,Vt,rn,xn){var In,On=ja.fromFeature(M,be);Bt===Po.vertical&&On.verticalizePunctuation();var jn=ca.processBidirectionalText,Vn=ca.processStyledBidirectionalText;if(jn&&On.sections.length===1){In=[];for(var Yn=0,Qn=jn(On.toString(),Ac(On,_t,Ee,O,ae,Vt,rn));Yn<Qn.length;Yn+=1){var tr=Qn[Yn],xr=new ja;xr.text=tr,xr.sections=On.sections;for(var pr=0;pr<tr.length;pr++)xr.sectionIndex.push(0);In.push(xr)}}else if(Vn){In=[];for(var Tr=0,Er=Vn(On.text,On.sectionIndex,Ac(On,_t,Ee,O,ae,Vt,rn));Tr<Er.length;Tr+=1){var jr=Er[Tr],Pr=new ja;Pr.text=jr[0],Pr.sectionIndex=jr[1],Pr.sections=On.sections,In.push(Pr)}}else In=function(Cr,Jr){for(var qr=[],bi=Cr.text,Fr=0,gi=0,Ti=Jr;gi<Ti.length;gi+=1){var Mi=Ti[gi];qr.push(Cr.substring(Fr,Mi)),Fr=Mi}return Fr<bi.length&&qr.push(Cr.substring(Fr,bi.length)),qr}(On,Ac(On,_t,Ee,O,ae,Vt,rn));var Nr=[],Ir={positionedLines:Nr,text:On.toString(),top:Mt[1],bottom:Mt[1],left:Mt[0],right:Mt[0],writingMode:Bt,iconsInText:!1,verticalizable:!1};return function(Cr,Jr,qr,bi,Fr,gi,Ti,Mi,Ci,_i,ia,Ii){for(var ga=0,Ea=Du,_a=0,Wa=0,wa=Mi==="right"?1:Mi==="left"?0:.5,oa=0,Ta=0,va=Fr;Ta<va.length;Ta+=1){var sa=va[Ta];sa.trim();var Gr=sa.getMaxScale(),ti=(Gr-1)*Sa,ji={positionedGlyphs:[],lineOffset:0};Cr.positionedLines[oa]=ji;var xi=ji.positionedGlyphs,zi=0;if(sa.length()){for(var Pi=0;Pi<sa.length();Pi++){var ii=sa.getSection(Pi),Ui=sa.getSectionIndex(Pi),Ya=sa.getCharCode(Pi),yo=0,Ua=null,Ss=null,ol=null,ma=Sa,Es=!(Ci===Po.horizontal||!ia&&!za(Ya)||ia&&(Bu[Ya]||Ts(Ya)));if(ii.imageName){var us=bi[ii.imageName];if(!us)continue;ol=ii.imageName,Cr.iconsInText=Cr.iconsInText||!0,Ss=us.paddedRect;var cs=us.displaySize;ii.scale=ii.scale*Sa/Ii,Ua={width:cs[0],height:cs[1],left:1,top:-3,advance:Es?cs[1]:cs[0]},yo=ti+(Sa-cs[1]*ii.scale),ma=Ua.advance;var Sl=Es?cs[0]*ii.scale-Sa*Gr:cs[1]*ii.scale-Sa*Gr;Sl>0&&Sl>zi&&(zi=Sl)}else{var Wu=qr[ii.fontStack],El=Wu&&Wu[Ya];if(El&&El.rect)Ss=El.rect,Ua=El.metrics;else{var Yu=Jr[ii.fontStack],fu=Yu&&Yu[Ya];if(!fu)continue;Ua=fu.metrics}yo=(Gr-ii.scale)*Sa}Es?(Cr.verticalizable=!0,xi.push({glyph:Ya,imageName:ol,x:ga,y:Ea+yo,vertical:Es,scale:ii.scale,fontStack:ii.fontStack,sectionIndex:Ui,metrics:Ua,rect:Ss}),ga+=ma*ii.scale+_i):(xi.push({glyph:Ya,imageName:ol,x:ga,y:Ea+yo,vertical:Es,scale:ii.scale,fontStack:ii.fontStack,sectionIndex:Ui,metrics:Ua,rect:Ss}),ga+=Ua.advance*ii.scale+_i)}if(xi.length!==0){var zc=ga-_i;_a=Math.max(zc,_a),Rp(xi,0,xi.length-1,wa,zi)}ga=0;var Xu=gi*Gr+zi;ji.lineOffset=Math.max(zi,ti),Ea+=Xu,Wa=Math.max(Xu,Wa),++oa}else Ea+=gi,++oa}var Zl=Ea-Du,Ju=Mc(Ti),Ku=Ju.horizontalAlign,hu=Ju.verticalAlign;(function(Dc,pu,Ll,Wl,$u,Qu,Yl,ec,tc){var du=(pu-Ll)*$u,gu=0;gu=Qu!==Yl?-ec*Wl-Du:(-Wl*tc+.5)*Yl;for(var Cl=0,vu=Dc;Cl<vu.length;Cl+=1)for(var Pl=0,mu=vu[Cl].positionedGlyphs;Pl<mu.length;Pl+=1){var yu=mu[Pl];yu.x+=du,yu.y+=gu}})(Cr.positionedLines,wa,Ku,hu,_a,Wa,gi,Zl,Fr.length),Cr.top+=-hu*Zl,Cr.bottom=Cr.top+Zl,Cr.left+=-Ku*_a,Cr.right=Cr.left+_a}(Ir,O,Z,ae,In,je,Qe,lt,Bt,_t,qt,xn),!function(Cr){for(var Jr=0,qr=Cr;Jr<qr.length;Jr+=1)if(qr[Jr].positionedGlyphs.length!==0)return!1;return!0}(Nr)&&Ir}ja.fromFeature=function(M,O){for(var Z=new ja,ae=0;ae<M.sections.length;ae++){var be=M.sections[ae];be.image?Z.addImageSection(be):Z.addTextSection(be,O)}return Z},ja.prototype.length=function(){return this.text.length},ja.prototype.getSection=function(M){return this.sections[this.sectionIndex[M]]},ja.prototype.getSectionIndex=function(M){return this.sectionIndex[M]},ja.prototype.getCharCode=function(M){return this.text.charCodeAt(M)},ja.prototype.verticalizePunctuation=function(){this.text=function(M){for(var O="",Z=0;Z<M.length;Z++){var ae=M.charCodeAt(Z+1)||null,be=M.charCodeAt(Z-1)||null;ae&&Fs(ae)&&!ou[M[Z+1]]||be&&Fs(be)&&!ou[M[Z-1]]||!ou[M[Z]]?O+=M[Z]:O+=ou[M[Z]]}return O}(this.text)},ja.prototype.trim=function(){for(var M=0,O=0;O<this.text.length&&Bu[this.text.charCodeAt(O)];O++)M++;for(var Z=this.text.length,ae=this.text.length-1;ae>=0&&ae>=M&&Bu[this.text.charCodeAt(ae)];ae--)Z--;this.text=this.text.substring(M,Z),this.sectionIndex=this.sectionIndex.slice(M,Z)},ja.prototype.substring=function(M,O){var Z=new ja;return Z.text=this.text.substring(M,O),Z.sectionIndex=this.sectionIndex.slice(M,O),Z.sections=this.sections,Z},ja.prototype.toString=function(){return this.text},ja.prototype.getMaxScale=function(){var M=this;return this.sectionIndex.reduce(function(O,Z){return Math.max(O,M.sections[Z].scale)},0)},ja.prototype.addTextSection=function(M,O){this.text+=M.text,this.sections.push(Bl.forText(M.scale,M.fontStack||O));for(var Z=this.sections.length-1,ae=0;ae<M.text.length;++ae)this.sectionIndex.push(Z)},ja.prototype.addImageSection=function(M){var O=M.image?M.image.name:"";if(O.length!==0){var Z=this.getNextImageSectionCharCode();Z?(this.text+=String.fromCharCode(Z),this.sections.push(Bl.forImage(O)),this.sectionIndex.push(this.sections.length-1)):S("Reached maximum number of images 6401")}else S("Can't add FormattedSection with an empty image.")},ja.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Bu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},mo={};function Sf(M,O,Z,ae,be,Ee){if(O.imageName){var je=ae[O.imageName];return je?je.displaySize[0]*O.scale*Sa/Ee+be:0}var Qe=Z[O.fontStack],lt=Qe&&Qe[M];return lt?lt.metrics.advance*O.scale+be:0}function Ef(M,O,Z,ae){var be=Math.pow(M-O,2);return ae?M<O?be/2:2*be:be+Math.abs(Z)*Z}function Ip(M,O,Z){var ae=0;return M===10&&(ae-=1e4),Z&&(ae+=150),M!==40&&M!==65288||(ae+=50),O!==41&&O!==65289||(ae+=50),ae}function Lf(M,O,Z,ae,be,Ee){for(var je=null,Qe=Ef(O,Z,be,Ee),lt=0,_t=ae;lt<_t.length;lt+=1){var Mt=_t[lt],Bt=Ef(O-Mt.x,Z,be,Ee)+Mt.badness;Bt<=Qe&&(je=Mt,Qe=Bt)}return{index:M,x:O,priorBreak:je,badness:Qe}}function Cf(M){return M?Cf(M.priorBreak).concat(M.index):[]}function Ac(M,O,Z,ae,be,Ee,je){if(Ee!=="point")return[];if(!M)return[];for(var Qe=[],lt=function(In,On,jn,Vn,Yn,Qn){for(var tr=0,xr=0;xr<In.length();xr++){var pr=In.getSection(xr);tr+=Sf(In.getCharCode(xr),pr,Vn,Yn,On,Qn)}return tr/Math.max(1,Math.ceil(tr/jn))}(M,O,Z,ae,be,je),_t=M.text.indexOf("")>=0,Mt=0,Bt=0;Bt<M.length();Bt++){var qt=M.getSection(Bt),Vt=M.getCharCode(Bt);if(Bu[Vt]||(Mt+=Sf(Vt,qt,ae,be,O,je)),Bt<M.length()-1){var rn=!((xn=Vt)<11904||!(wr["Bopomofo Extended"](xn)||wr.Bopomofo(xn)||wr["CJK Compatibility Forms"](xn)||wr["CJK Compatibility Ideographs"](xn)||wr["CJK Compatibility"](xn)||wr["CJK Radicals Supplement"](xn)||wr["CJK Strokes"](xn)||wr["CJK Symbols and Punctuation"](xn)||wr["CJK Unified Ideographs Extension A"](xn)||wr["CJK Unified Ideographs"](xn)||wr["Enclosed CJK Letters and Months"](xn)||wr["Halfwidth and Fullwidth Forms"](xn)||wr.Hiragana(xn)||wr["Ideographic Description Characters"](xn)||wr["Kangxi Radicals"](xn)||wr["Katakana Phonetic Extensions"](xn)||wr.Katakana(xn)||wr["Vertical Forms"](xn)||wr["Yi Radicals"](xn)||wr["Yi Syllables"](xn)));(mo[Vt]||rn||qt.imageName)&&Qe.push(Lf(Bt+1,Mt,lt,Qe,Ip(Vt,M.getCharCode(Bt+1),rn&&_t),!1))}}var xn;return Cf(Lf(M.length(),Mt,lt,Qe,0,!0))}function Mc(M){var O=.5,Z=.5;switch(M){case"right":case"top-right":case"bottom-right":O=1;break;case"left":case"top-left":case"bottom-left":O=0}switch(M){case"bottom":case"bottom-right":case"bottom-left":Z=1;break;case"top":case"top-right":case"top-left":Z=0}return{horizontalAlign:O,verticalAlign:Z}}function Rp(M,O,Z,ae,be){if(ae||be)for(var Ee=M[Z],je=Ee.metrics.advance*Ee.scale,Qe=(M[Z].x+je)*ae,lt=O;lt<=Z;lt++)M[lt].x-=Qe,M[lt].y+=be}function Pf(M,O,Z,ae,be,Ee){var je,Qe=M.image;if(Qe.content){var lt=Qe.content,_t=Qe.pixelRatio||1;je=[lt[0]/_t,lt[1]/_t,Qe.displaySize[0]-lt[2]/_t,Qe.displaySize[1]-lt[3]/_t]}var Mt,Bt,qt,Vt,rn=O.left*Ee,xn=O.right*Ee;Z==="width"||Z==="both"?(Vt=be[0]+rn-ae[3],Bt=be[0]+xn+ae[1]):Bt=(Vt=be[0]+(rn+xn-Qe.displaySize[0])/2)+Qe.displaySize[0];var In=O.top*Ee,On=O.bottom*Ee;return Z==="height"||Z==="both"?(Mt=be[1]+In-ae[0],qt=be[1]+On+ae[2]):qt=(Mt=be[1]+(In+On-Qe.displaySize[1])/2)+Qe.displaySize[1],{image:Qe,top:Mt,right:Bt,bottom:qt,left:Vt,collisionPadding:je}}mo[10]=!0,mo[32]=!0,mo[38]=!0,mo[40]=!0,mo[41]=!0,mo[43]=!0,mo[45]=!0,mo[47]=!0,mo[173]=!0,mo[183]=!0,mo[8203]=!0,mo[8208]=!0,mo[8211]=!0,mo[8231]=!0;var Nl=function(M){function O(Z,ae,be,Ee){M.call(this,Z,ae),this.angle=be,Ee!==void 0&&(this.segment=Ee)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.clone=function(){return new O(this.x,this.y,this.angle,this.segment)},O}(t);_r("Anchor",Nl);var Us=128;function Sc(M,O){var Z=O.expression;if(Z.kind==="constant")return{kind:"constant",layoutSize:Z.evaluate(new ni(M+1))};if(Z.kind==="source")return{kind:"source"};for(var ae=Z.zoomStops,be=Z.interpolationType,Ee=0;Ee<ae.length&&ae[Ee]<=M;)Ee++;for(var je=Ee=Math.max(0,Ee-1);je<ae.length&&ae[je]<M+1;)je++;je=Math.min(ae.length-1,je);var Qe=ae[Ee],lt=ae[je];return Z.kind==="composite"?{kind:"composite",minZoom:Qe,maxZoom:lt,interpolationType:be}:{kind:"camera",minZoom:Qe,maxZoom:lt,minSize:Z.evaluate(new ni(Qe)),maxSize:Z.evaluate(new ni(lt)),interpolationType:be}}function Of(M,O,Z){var ae=O.uSize,be=O.uSizeT,Ee=Z.lowerSize,je=Z.upperSize;return M.kind==="source"?Ee/Us:M.kind==="composite"?Sr(Ee/Us,je/Us,be):ae}function If(M,O){var Z=0,ae=0;if(M.kind==="constant")ae=M.layoutSize;else if(M.kind!=="source"){var be=M.interpolationType,Ee=M.minZoom,je=M.maxZoom,Qe=be?a(Di.interpolationFactor(be,O,Ee,je),0,1):0;M.kind==="camera"?ae=Sr(M.minSize,M.maxSize,Qe):Z=Qe}return{uSizeT:Z,uSize:ae}}var zp=Object.freeze({__proto__:null,getSizeData:Sc,evaluateSizeForFeature:Of,evaluateSizeForZoom:If,SIZE_PACK_FACTOR:Us});function Rf(M,O,Z,ae,be){if(O.segment===void 0)return!0;for(var Ee=O,je=O.segment+1,Qe=0;Qe>-Z/2;){if(--je<0)return!1;Qe-=M[je].dist(Ee),Ee=M[je]}Qe+=M[je].dist(M[je+1]),je++;for(var lt=[],_t=0;Qe<Z/2;){var Mt=M[je-1],Bt=M[je],qt=M[je+1];if(!qt)return!1;var Vt=Mt.angleTo(Bt)-Bt.angleTo(qt);for(Vt=Math.abs((Vt+3*Math.PI)%(2*Math.PI)-Math.PI),lt.push({distance:Qe,angleDelta:Vt}),_t+=Vt;Qe-lt[0].distance>ae;)_t-=lt.shift().angleDelta;if(_t>be)return!1;je++,Qe+=Bt.dist(qt)}return!0}function zf(M){for(var O=0,Z=0;Z<M.length-1;Z++)O+=M[Z].dist(M[Z+1]);return O}function Df(M,O,Z){return M?.6*O*Z:0}function Ff(M,O){return Math.max(M?M.right-M.left:0,O?O.right-O.left:0)}function Dp(M,O,Z,ae,be,Ee){for(var je=Df(Z,be,Ee),Qe=Ff(Z,ae)*Ee,lt=0,_t=zf(M)/2,Mt=0;Mt<M.length-1;Mt++){var Bt=M[Mt],qt=M[Mt+1],Vt=Bt.dist(qt);if(lt+Vt>_t){var rn=(_t-lt)/Vt,xn=Sr(Bt.x,qt.x,rn),In=Sr(Bt.y,qt.y,rn),On=new Nl(xn,In,qt.angleTo(Bt),Mt);return On._round(),!je||Rf(M,On,Qe,je,O)?On:void 0}lt+=Vt}}function Fp(M,O,Z,ae,be,Ee,je,Qe,lt){var _t=Df(ae,Ee,je),Mt=Ff(ae,be),Bt=Mt*je,qt=M[0].x===0||M[0].x===lt||M[0].y===0||M[0].y===lt;return O-Bt<O/4&&(O=Bt+O/4),Bf(M,qt?O/2*Qe%O:(Mt/2+2*Ee)*je*Qe%O,O,_t,Z,Bt,qt,!1,lt)}function Bf(M,O,Z,ae,be,Ee,je,Qe,lt){for(var _t=Ee/2,Mt=zf(M),Bt=0,qt=O-Z,Vt=[],rn=0;rn<M.length-1;rn++){for(var xn=M[rn],In=M[rn+1],On=xn.dist(In),jn=In.angleTo(xn);qt+Z<Bt+On;){var Vn=((qt+=Z)-Bt)/On,Yn=Sr(xn.x,In.x,Vn),Qn=Sr(xn.y,In.y,Vn);if(Yn>=0&&Yn<lt&&Qn>=0&&Qn<lt&&qt-_t>=0&&qt+_t<=Mt){var tr=new Nl(Yn,Qn,jn,rn);tr._round(),ae&&!Rf(M,tr,Ee,ae,be)||Vt.push(tr)}}Bt+=On}return Qe||Vt.length||je||(Vt=Bf(M,Bt/2,Z,ae,be,Ee,je,!0,lt)),Vt}function Nf(M,O,Z,ae,be){for(var Ee=[],je=0;je<M.length;je++)for(var Qe=M[je],lt=void 0,_t=0;_t<Qe.length-1;_t++){var Mt=Qe[_t],Bt=Qe[_t+1];Mt.x<O&&Bt.x<O||(Mt.x<O?Mt=new t(O,Mt.y+(Bt.y-Mt.y)*((O-Mt.x)/(Bt.x-Mt.x)))._round():Bt.x<O&&(Bt=new t(O,Mt.y+(Bt.y-Mt.y)*((O-Mt.x)/(Bt.x-Mt.x)))._round()),Mt.y<Z&&Bt.y<Z||(Mt.y<Z?Mt=new t(Mt.x+(Bt.x-Mt.x)*((Z-Mt.y)/(Bt.y-Mt.y)),Z)._round():Bt.y<Z&&(Bt=new t(Mt.x+(Bt.x-Mt.x)*((Z-Mt.y)/(Bt.y-Mt.y)),Z)._round()),Mt.x>=ae&&Bt.x>=ae||(Mt.x>=ae?Mt=new t(ae,Mt.y+(Bt.y-Mt.y)*((ae-Mt.x)/(Bt.x-Mt.x)))._round():Bt.x>=ae&&(Bt=new t(ae,Mt.y+(Bt.y-Mt.y)*((ae-Mt.x)/(Bt.x-Mt.x)))._round()),Mt.y>=be&&Bt.y>=be||(Mt.y>=be?Mt=new t(Mt.x+(Bt.x-Mt.x)*((be-Mt.y)/(Bt.y-Mt.y)),be)._round():Bt.y>=be&&(Bt=new t(Mt.x+(Bt.x-Mt.x)*((be-Mt.y)/(Bt.y-Mt.y)),be)._round()),lt&&Mt.equals(lt[lt.length-1])||(lt=[Mt],Ee.push(lt)),lt.push(Bt)))))}return Ee}function jf(M,O,Z,ae){var be=[],Ee=M.image,je=Ee.pixelRatio,Qe=Ee.paddedRect.w-2,lt=Ee.paddedRect.h-2,_t=M.right-M.left,Mt=M.bottom-M.top,Bt=Ee.stretchX||[[0,Qe]],qt=Ee.stretchY||[[0,lt]],Vt=function(gi,Ti){return gi+Ti[1]-Ti[0]},rn=Bt.reduce(Vt,0),xn=qt.reduce(Vt,0),In=Qe-rn,On=lt-xn,jn=0,Vn=rn,Yn=0,Qn=xn,tr=0,xr=In,pr=0,Tr=On;if(Ee.content&&ae){var Er=Ee.content;jn=Nu(Bt,0,Er[0]),Yn=Nu(qt,0,Er[1]),Vn=Nu(Bt,Er[0],Er[2]),Qn=Nu(qt,Er[1],Er[3]),tr=Er[0]-jn,pr=Er[1]-Yn,xr=Er[2]-Er[0]-Vn,Tr=Er[3]-Er[1]-Qn}var jr=function(gi,Ti,Mi,Ci){var _i=ju(gi.stretch-jn,Vn,_t,M.left),ia=Uu(gi.fixed-tr,xr,gi.stretch,rn),Ii=ju(Ti.stretch-Yn,Qn,Mt,M.top),ga=Uu(Ti.fixed-pr,Tr,Ti.stretch,xn),Ea=ju(Mi.stretch-jn,Vn,_t,M.left),_a=Uu(Mi.fixed-tr,xr,Mi.stretch,rn),Wa=ju(Ci.stretch-Yn,Qn,Mt,M.top),wa=Uu(Ci.fixed-pr,Tr,Ci.stretch,xn),oa=new t(_i,Ii),Ta=new t(Ea,Ii),va=new t(Ea,Wa),sa=new t(_i,Wa),Gr=new t(ia/je,ga/je),ti=new t(_a/je,wa/je),ji=O*Math.PI/180;if(ji){var xi=Math.sin(ji),zi=Math.cos(ji),Pi=[zi,-xi,xi,zi];oa._matMult(Pi),Ta._matMult(Pi),sa._matMult(Pi),va._matMult(Pi)}var ii=gi.stretch+gi.fixed,Ui=Mi.stretch+Mi.fixed,Ya=Ti.stretch+Ti.fixed,yo=Ci.stretch+Ci.fixed;return{tl:oa,tr:Ta,bl:sa,br:va,tex:{x:Ee.paddedRect.x+1+ii,y:Ee.paddedRect.y+1+Ya,w:Ui-ii,h:yo-Ya},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Gr,pixelOffsetBR:ti,minFontScaleX:xr/je/_t,minFontScaleY:Tr/je/Mt,isSDF:Z}};if(ae&&(Ee.stretchX||Ee.stretchY))for(var Pr=Uf(Bt,In,rn),Nr=Uf(qt,On,xn),Ir=0;Ir<Pr.length-1;Ir++)for(var Cr=Pr[Ir],Jr=Pr[Ir+1],qr=0;qr<Nr.length-1;qr++){var bi=Nr[qr],Fr=Nr[qr+1];be.push(jr(Cr,bi,Jr,Fr))}else be.push(jr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Qe+1},{fixed:0,stretch:lt+1}));return be}function Nu(M,O,Z){for(var ae=0,be=0,Ee=M;be<Ee.length;be+=1){var je=Ee[be];ae+=Math.max(O,Math.min(Z,je[1]))-Math.max(O,Math.min(Z,je[0]))}return ae}function Uf(M,O,Z){for(var ae=[{fixed:-1,stretch:0}],be=0,Ee=M;be<Ee.length;be+=1){var je=Ee[be],Qe=je[0],lt=je[1],_t=ae[ae.length-1];ae.push({fixed:Qe-_t.stretch,stretch:_t.stretch}),ae.push({fixed:Qe-_t.stretch,stretch:_t.stretch+(lt-Qe)})}return ae.push({fixed:O+1,stretch:Z}),ae}function ju(M,O,Z,ae){return M/O*Z+ae}function Uu(M,O,Z,ae){return M-O*Z/ae}var Vu=function(M,O,Z,ae,be,Ee,je,Qe,lt,_t){if(this.boxStartIndex=M.length,lt){var Mt=Ee.top,Bt=Ee.bottom,qt=Ee.collisionPadding;qt&&(Mt-=qt[1],Bt+=qt[3]);var Vt=Bt-Mt;Vt>0&&(Vt=Math.max(10,Vt),this.circleDiameter=Vt)}else{var rn=Ee.top*je-Qe,xn=Ee.bottom*je+Qe,In=Ee.left*je-Qe,On=Ee.right*je+Qe,jn=Ee.collisionPadding;if(jn&&(In-=jn[0]*je,rn-=jn[1]*je,On+=jn[2]*je,xn+=jn[3]*je),_t){var Vn=new t(In,rn),Yn=new t(On,rn),Qn=new t(In,xn),tr=new t(On,xn),xr=_t*Math.PI/180;Vn._rotate(xr),Yn._rotate(xr),Qn._rotate(xr),tr._rotate(xr),In=Math.min(Vn.x,Yn.x,Qn.x,tr.x),On=Math.max(Vn.x,Yn.x,Qn.x,tr.x),rn=Math.min(Vn.y,Yn.y,Qn.y,tr.y),xn=Math.max(Vn.y,Yn.y,Qn.y,tr.y)}M.emplaceBack(O.x,O.y,In,rn,On,xn,Z,ae,be)}this.boxEndIndex=M.length},jl=function(M,O){if(M===void 0&&(M=[]),O===void 0&&(O=Bp),this.data=M,this.length=this.data.length,this.compare=O,this.length>0)for(var Z=(this.length>>1)-1;Z>=0;Z--)this._down(Z)};function Bp(M,O){return M<O?-1:M>O?1:0}function Np(M,O,Z){O===void 0&&(O=1),Z===void 0&&(Z=!1);for(var ae=1/0,be=1/0,Ee=-1/0,je=-1/0,Qe=M[0],lt=0;lt<Qe.length;lt++){var _t=Qe[lt];(!lt||_t.x<ae)&&(ae=_t.x),(!lt||_t.y<be)&&(be=_t.y),(!lt||_t.x>Ee)&&(Ee=_t.x),(!lt||_t.y>je)&&(je=_t.y)}var Mt=Ee-ae,Bt=je-be,qt=Math.min(Mt,Bt),Vt=qt/2,rn=new jl([],jp);if(qt===0)return new t(ae,be);for(var xn=ae;xn<Ee;xn+=qt)for(var In=be;In<je;In+=qt)rn.push(new Ul(xn+Vt,In+Vt,Vt,M));for(var On=function(Yn){for(var Qn=0,tr=0,xr=0,pr=Yn[0],Tr=0,Er=pr.length,jr=Er-1;Tr<Er;jr=Tr++){var Pr=pr[Tr],Nr=pr[jr],Ir=Pr.x*Nr.y-Nr.x*Pr.y;tr+=(Pr.x+Nr.x)*Ir,xr+=(Pr.y+Nr.y)*Ir,Qn+=3*Ir}return new Ul(tr/Qn,xr/Qn,0,Yn)}(M),jn=rn.length;rn.length;){var Vn=rn.pop();(Vn.d>On.d||!On.d)&&(On=Vn,Z&&console.log("found best %d after %d probes",Math.round(1e4*Vn.d)/1e4,jn)),Vn.max-On.d<=O||(Vt=Vn.h/2,rn.push(new Ul(Vn.p.x-Vt,Vn.p.y-Vt,Vt,M)),rn.push(new Ul(Vn.p.x+Vt,Vn.p.y-Vt,Vt,M)),rn.push(new Ul(Vn.p.x-Vt,Vn.p.y+Vt,Vt,M)),rn.push(new Ul(Vn.p.x+Vt,Vn.p.y+Vt,Vt,M)),jn+=4)}return Z&&(console.log("num probes: "+jn),console.log("best distance: "+On.d)),On.p}function jp(M,O){return O.max-M.max}function Ul(M,O,Z,ae){this.p=new t(M,O),this.h=Z,this.d=function(be,Ee){for(var je=!1,Qe=1/0,lt=0;lt<Ee.length;lt++)for(var _t=Ee[lt],Mt=0,Bt=_t.length,qt=Bt-1;Mt<Bt;qt=Mt++){var Vt=_t[Mt],rn=_t[qt];Vt.y>be.y!=rn.y>be.y&&be.x<(rn.x-Vt.x)*(be.y-Vt.y)/(rn.y-Vt.y)+Vt.x&&(je=!je),Qe=Math.min(Qe,ku(be,Vt,rn))}return(je?1:-1)*Math.sqrt(Qe)}(this.p,ae),this.max=this.d+this.h*Math.SQRT2}jl.prototype.push=function(M){this.data.push(M),this.length++,this._up(this.length-1)},jl.prototype.pop=function(){if(this.length!==0){var M=this.data[0],O=this.data.pop();return this.length--,this.length>0&&(this.data[0]=O,this._down(0)),M}},jl.prototype.peek=function(){return this.data[0]},jl.prototype._up=function(M){for(var O=this.data,Z=this.compare,ae=O[M];M>0;){var be=M-1>>1,Ee=O[be];if(Z(ae,Ee)>=0)break;O[M]=Ee,M=be}O[M]=ae},jl.prototype._down=function(M){for(var O=this.data,Z=this.compare,ae=this.length>>1,be=O[M];M<ae;){var Ee=1+(M<<1),je=O[Ee],Qe=Ee+1;if(Qe<this.length&&Z(O[Qe],je)<0&&(Ee=Qe,je=O[Qe]),Z(je,be)>=0)break;O[M]=je,M=Ee}O[M]=be};var Ec=Number.POSITIVE_INFINITY;function Vf(M,O){return O[1]!==Ec?function(Z,ae,be){var Ee=0,je=0;switch(ae=Math.abs(ae),be=Math.abs(be),Z){case"top-right":case"top-left":case"top":je=be-7;break;case"bottom-right":case"bottom-left":case"bottom":je=7-be}switch(Z){case"top-right":case"bottom-right":case"right":Ee=-ae;break;case"top-left":case"bottom-left":case"left":Ee=ae}return[Ee,je]}(M,O[0],O[1]):function(Z,ae){var be=0,Ee=0;ae<0&&(ae=0);var je=ae/Math.sqrt(2);switch(Z){case"top-right":case"top-left":Ee=je-7;break;case"bottom-right":case"bottom-left":Ee=7-je;break;case"bottom":Ee=7-ae;break;case"top":Ee=ae-7}switch(Z){case"top-right":case"bottom-right":be=-je;break;case"top-left":case"bottom-left":be=je;break;case"left":be=ae;break;case"right":be=-ae}return[be,Ee]}(M,O[0])}function Lc(M){switch(M){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var ml=32640;function Hf(M,O,Z,ae,be,Ee,je,Qe,lt,_t,Mt,Bt,qt,Vt,rn){var xn=function(Yn,Qn,tr,xr,pr,Tr,Er,jr){for(var Pr=xr.layout.get("text-rotate").evaluate(Tr,{})*Math.PI/180,Nr=[],Ir=0,Cr=Qn.positionedLines;Ir<Cr.length;Ir+=1)for(var Jr=Cr[Ir],qr=0,bi=Jr.positionedGlyphs;qr<bi.length;qr+=1){var Fr=bi[qr];if(Fr.rect){var gi=Fr.rect||{},Ti=4,Mi=!0,Ci=1,_i=0,ia=(pr||jr)&&Fr.vertical,Ii=Fr.metrics.advance*Fr.scale/2;if(jr&&Qn.verticalizable){var ga=(Fr.scale-1)*Sa,Ea=(Sa-Fr.metrics.width*Fr.scale)/2;_i=Jr.lineOffset/2-(Fr.imageName?-Ea:ga)}if(Fr.imageName){var _a=Er[Fr.imageName];Mi=_a.sdf,Ti=1/(Ci=_a.pixelRatio)}var Wa=pr?[Fr.x+Ii,Fr.y]:[0,0],wa=pr?[0,0]:[Fr.x+Ii+tr[0],Fr.y+tr[1]-_i],oa=[0,0];ia&&(oa=wa,wa=[0,0]);var Ta=(Fr.metrics.left-Ti)*Fr.scale-Ii+wa[0],va=(-Fr.metrics.top-Ti)*Fr.scale+wa[1],sa=Ta+gi.w*Fr.scale/Ci,Gr=va+gi.h*Fr.scale/Ci,ti=new t(Ta,va),ji=new t(sa,va),xi=new t(Ta,Gr),zi=new t(sa,Gr);if(ia){var Pi=new t(-Ii,Ii-Du),ii=-Math.PI/2,Ui=12-Ii,Ya=Fr.imageName?Ui:0,yo=new t(22-Ui,-Ya),Ua=new(Function.prototype.bind.apply(t,[null].concat(oa)));ti._rotateAround(ii,Pi)._add(yo)._add(Ua),ji._rotateAround(ii,Pi)._add(yo)._add(Ua),xi._rotateAround(ii,Pi)._add(yo)._add(Ua),zi._rotateAround(ii,Pi)._add(yo)._add(Ua)}if(Pr){var Ss=Math.sin(Pr),ol=Math.cos(Pr),ma=[ol,-Ss,Ss,ol];ti._matMult(ma),ji._matMult(ma),xi._matMult(ma),zi._matMult(ma)}var Es=new t(0,0),us=new t(0,0);Nr.push({tl:ti,tr:ji,bl:xi,br:zi,tex:gi,writingMode:Qn.writingMode,glyphOffset:Wa,sectionIndex:Fr.sectionIndex,isSDF:Mi,pixelOffsetTL:Es,pixelOffsetBR:us,minFontScaleX:0,minFontScaleY:0})}}return Nr}(0,Z,Qe,be,Ee,je,ae,M.allowVerticalPlacement),In=M.textSizeData,On=null;In.kind==="source"?(On=[Us*be.layout.get("text-size").evaluate(je,{})])[0]>ml&&S(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):In.kind==="composite"&&((On=[Us*Vt.compositeTextSizes[0].evaluate(je,{},rn),Us*Vt.compositeTextSizes[1].evaluate(je,{},rn)])[0]>ml||On[1]>ml)&&S(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),M.addSymbols(M.text,xn,On,Qe,Ee,je,_t,O,lt.lineStartIndex,lt.lineLength,qt,rn);for(var jn=0,Vn=Mt;jn<Vn.length;jn+=1)Bt[Vn[jn]]=M.text.placedSymbolArray.length-1;return 4*xn.length}function qf(M){for(var O in M)return M[O];return null}function Up(M,O,Z,ae){var be=M.compareText;if(O in be){for(var Ee=be[O],je=Ee.length-1;je>=0;je--)if(ae.dist(Ee[je])<Z)return!0}else be[O]=[];return be[O].push(ae),!1}var Vp=zl.VectorTileFeature.types,Hp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Hu(M,O,Z,ae,be,Ee,je,Qe,lt,_t,Mt,Bt,qt){var Vt=Qe?Math.min(ml,Math.round(Qe[0])):0,rn=Qe?Math.min(ml,Math.round(Qe[1])):0;M.emplaceBack(O,Z,Math.round(32*ae),Math.round(32*be),Ee,je,(Vt<<1)+(lt?1:0),rn,16*_t,16*Mt,256*Bt,256*qt)}function Cc(M,O,Z){M.emplaceBack(O.x,O.y,Z),M.emplaceBack(O.x,O.y,Z),M.emplaceBack(O.x,O.y,Z),M.emplaceBack(O.x,O.y,Z)}function qp(M){for(var O=0,Z=M.sections;O<Z.length;O+=1)if(ho(Z[O].text))return!0;return!1}var Vl=function(M){this.layoutVertexArray=new yt,this.indexArray=new Ne,this.programConfigurations=M,this.segments=new en,this.dynamicLayoutVertexArray=new D,this.opacityVertexArray=new Y,this.placedSymbolArray=new it};Vl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Vl.prototype.upload=function(M,O,Z,ae){this.isEmpty()||(Z&&(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Tc.members),this.indexBuffer=M.createIndexBuffer(this.indexArray,O),this.dynamicLayoutVertexBuffer=M.createVertexBuffer(this.dynamicLayoutVertexArray,mp.members,!0),this.opacityVertexBuffer=M.createVertexBuffer(this.opacityVertexArray,Hp,!0),this.opacityVertexBuffer.itemSize=1),(Z||ae)&&this.programConfigurations.upload(M))},Vl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},_r("SymbolBuffers",Vl);var uu=function(M,O,Z){this.layoutVertexArray=new M,this.layoutAttributes=O,this.indexArray=new Z,this.segments=new en,this.collisionVertexArray=new Le};uu.prototype.upload=function(M){this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=M.createVertexBuffer(this.collisionVertexArray,yp.members,!0)},uu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},_r("CollisionBuffers",uu);var di=function(M){this.collisionBoxArray=M.collisionBoxArray,this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(je){return je.id}),this.index=M.index,this.pixelRatio=M.pixelRatio,this.sourceLayerIndex=M.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=hc([]),this.placementViewportMatrix=hc([]);var O=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Sc(this.zoom,O["text-size"]),this.iconSizeData=Sc(this.zoom,O["icon-size"]);var Z=this.layers[0].layout,ae=Z.get("symbol-sort-key"),be=Z.get("symbol-z-order");this.sortFeaturesByKey=be!=="viewport-y"&&ae.constantOr(1)!==void 0;var Ee=be==="viewport-y"||be==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ee&&(Z.get("text-allow-overlap")||Z.get("icon-allow-overlap")||Z.get("text-ignore-placement")||Z.get("icon-ignore-placement")),Z.get("symbol-placement")==="point"&&(this.writingModes=Z.get("text-writing-mode").map(function(je){return Po[je]})),this.stateDependentLayerIds=this.layers.filter(function(je){return je.isStateDependent()}).map(function(je){return je.id}),this.sourceID=M.sourceID};di.prototype.createArrays=function(){this.text=new Vl(new Ei(Tc.members,this.layers,this.zoom,function(M){return/^text/.test(M)})),this.icon=new Vl(new Ei(Tc.members,this.layers,this.zoom,function(M){return/^icon/.test(M)})),this.glyphOffsetArray=new Dt,this.lineVertexArray=new Ft,this.symbolInstances=new St},di.prototype.calculateGlyphDependencies=function(M,O,Z,ae,be){for(var Ee=0;Ee<M.length;Ee++)if(O[M.charCodeAt(Ee)]=!0,(Z||ae)&&be){var je=ou[M.charAt(Ee)];je&&(O[je.charCodeAt(0)]=!0)}},di.prototype.populate=function(M,O,Z){var ae=this.layers[0],be=ae.layout,Ee=be.get("text-font"),je=be.get("text-field"),Qe=be.get("icon-image"),lt=(je.value.kind!=="constant"||je.value.value instanceof Rn&&!je.value.value.isEmpty()||je.value.value.toString().length>0)&&(Ee.value.kind!=="constant"||Ee.value.value.length>0),_t=Qe.value.kind!=="constant"||!!Qe.value.value||Object.keys(Qe.parameters).length>0,Mt=be.get("symbol-sort-key");if(this.features=[],lt||_t){for(var Bt=O.iconDependencies,qt=O.glyphDependencies,Vt=O.availableImages,rn=new ni(this.zoom),xn=0,In=M;xn<In.length;xn+=1){var On=In[xn],jn=On.feature,Vn=On.id,Yn=On.index,Qn=On.sourceLayerIndex,tr=ae._featureFilter.needGeometry,xr={type:jn.type,id:Vn,properties:jn.properties,geometry:tr?Ai(jn):[]};if(ae._featureFilter.filter(rn,xr,Z)){tr||(xr.geometry=Ai(jn));var pr=void 0;if(lt){var Tr=ae.getValueAndResolveTokens("text-field",xr,Z,Vt),Er=Rn.factory(Tr);qp(Er)&&(this.hasRTLText=!0),(!this.hasRTLText||Ba()==="unavailable"||this.hasRTLText&&ca.isParsed())&&(pr=bp(Er,ae,xr))}var jr=void 0;if(_t){var Pr=ae.getValueAndResolveTokens("icon-image",xr,Z,Vt);jr=Pr instanceof Nn?Pr:Nn.fromString(Pr)}if(pr||jr){var Nr=this.sortFeaturesByKey?Mt.evaluate(xr,{},Z):void 0,Ir={id:Vn,text:pr,icon:jr,index:Yn,sourceLayerIndex:Qn,geometry:Ai(jn),properties:jn.properties,type:Vp[jn.type],sortKey:Nr};if(this.features.push(Ir),jr&&(Bt[jr.name]=!0),pr){var Cr=Ee.evaluate(xr,{},Z).join(","),Jr=be.get("text-rotation-alignment")==="map"&&be.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Po.vertical)>=0;for(var qr=0,bi=pr.sections;qr<bi.length;qr+=1){var Fr=bi[qr];if(Fr.image)Bt[Fr.image.name]=!0;else{var gi=os(pr.toString()),Ti=Fr.fontStack||Cr,Mi=qt[Ti]=qt[Ti]||{};this.calculateGlyphDependencies(Fr.text,Mi,Jr,this.allowVerticalPlacement,gi)}}}}}}be.get("symbol-placement")==="line"&&(this.features=function(Ci){var _i={},ia={},Ii=[],ga=0;function Ea(zi){Ii.push(Ci[zi]),ga++}function _a(zi,Pi,ii){var Ui=ia[zi];return delete ia[zi],ia[Pi]=Ui,Ii[Ui].geometry[0].pop(),Ii[Ui].geometry[0]=Ii[Ui].geometry[0].concat(ii[0]),Ui}function Wa(zi,Pi,ii){var Ui=_i[Pi];return delete _i[Pi],_i[zi]=Ui,Ii[Ui].geometry[0].shift(),Ii[Ui].geometry[0]=ii[0].concat(Ii[Ui].geometry[0]),Ui}function wa(zi,Pi,ii){var Ui=ii?Pi[0][Pi[0].length-1]:Pi[0][0];return zi+":"+Ui.x+":"+Ui.y}for(var oa=0;oa<Ci.length;oa++){var Ta=Ci[oa],va=Ta.geometry,sa=Ta.text?Ta.text.toString():null;if(sa){var Gr=wa(sa,va),ti=wa(sa,va,!0);if(Gr in ia&&ti in _i&&ia[Gr]!==_i[ti]){var ji=Wa(Gr,ti,va),xi=_a(Gr,ti,Ii[ji].geometry);delete _i[Gr],delete ia[ti],ia[wa(sa,Ii[xi].geometry,!0)]=xi,Ii[ji].geometry=null}else Gr in ia?_a(Gr,ti,va):ti in _i?Wa(Gr,ti,va):(Ea(oa),_i[Gr]=ga-1,ia[ti]=ga-1)}else Ea(oa)}return Ii.filter(function(zi){return zi.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ci,_i){return Ci.sortKey-_i.sortKey})}},di.prototype.update=function(M,O,Z){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(M,O,this.layers,Z),this.icon.programConfigurations.updatePaintArrays(M,O,this.layers,Z))},di.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},di.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},di.prototype.upload=function(M){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(M),this.iconCollisionBox.upload(M)),this.text.upload(M,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(M,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},di.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},di.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},di.prototype.addToLineVertexArray=function(M,O){var Z=this.lineVertexArray.length;if(M.segment!==void 0){for(var ae=M.dist(O[M.segment+1]),be=M.dist(O[M.segment]),Ee={},je=M.segment+1;je<O.length;je++)Ee[je]={x:O[je].x,y:O[je].y,tileUnitDistanceFromAnchor:ae},je<O.length-1&&(ae+=O[je+1].dist(O[je]));for(var Qe=M.segment||0;Qe>=0;Qe--)Ee[Qe]={x:O[Qe].x,y:O[Qe].y,tileUnitDistanceFromAnchor:be},Qe>0&&(be+=O[Qe-1].dist(O[Qe]));for(var lt=0;lt<O.length;lt++){var _t=Ee[lt];this.lineVertexArray.emplaceBack(_t.x,_t.y,_t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Z,lineLength:this.lineVertexArray.length-Z}},di.prototype.addSymbols=function(M,O,Z,ae,be,Ee,je,Qe,lt,_t,Mt,Bt){for(var qt=M.indexArray,Vt=M.layoutVertexArray,rn=M.segments.prepareSegment(4*O.length,Vt,qt,Ee.sortKey),xn=this.glyphOffsetArray.length,In=rn.vertexLength,On=this.allowVerticalPlacement&&je===Po.vertical?Math.PI/2:0,jn=Ee.text&&Ee.text.sections,Vn=0;Vn<O.length;Vn++){var Yn=O[Vn],Qn=Yn.tl,tr=Yn.tr,xr=Yn.bl,pr=Yn.br,Tr=Yn.tex,Er=Yn.pixelOffsetTL,jr=Yn.pixelOffsetBR,Pr=Yn.minFontScaleX,Nr=Yn.minFontScaleY,Ir=Yn.glyphOffset,Cr=Yn.isSDF,Jr=Yn.sectionIndex,qr=rn.vertexLength,bi=Ir[1];Hu(Vt,Qe.x,Qe.y,Qn.x,bi+Qn.y,Tr.x,Tr.y,Z,Cr,Er.x,Er.y,Pr,Nr),Hu(Vt,Qe.x,Qe.y,tr.x,bi+tr.y,Tr.x+Tr.w,Tr.y,Z,Cr,jr.x,Er.y,Pr,Nr),Hu(Vt,Qe.x,Qe.y,xr.x,bi+xr.y,Tr.x,Tr.y+Tr.h,Z,Cr,Er.x,jr.y,Pr,Nr),Hu(Vt,Qe.x,Qe.y,pr.x,bi+pr.y,Tr.x+Tr.w,Tr.y+Tr.h,Z,Cr,jr.x,jr.y,Pr,Nr),Cc(M.dynamicLayoutVertexArray,Qe,On),qt.emplaceBack(qr,qr+1,qr+2),qt.emplaceBack(qr+1,qr+2,qr+3),rn.vertexLength+=4,rn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ir[0]),Vn!==O.length-1&&Jr===O[Vn+1].sectionIndex||M.programConfigurations.populatePaintArrays(Vt.length,Ee,Ee.index,{},Bt,jn&&jn[Jr])}M.placedSymbolArray.emplaceBack(Qe.x,Qe.y,xn,this.glyphOffsetArray.length-xn,In,lt,_t,Qe.segment,Z?Z[0]:0,Z?Z[1]:0,ae[0],ae[1],je,0,!1,0,Mt)},di.prototype._addCollisionDebugVertex=function(M,O,Z,ae,be,Ee){return O.emplaceBack(0,0),M.emplaceBack(Z.x,Z.y,ae,be,Math.round(Ee.x),Math.round(Ee.y))},di.prototype.addCollisionDebugVertices=function(M,O,Z,ae,be,Ee,je){var Qe=be.segments.prepareSegment(4,be.layoutVertexArray,be.indexArray),lt=Qe.vertexLength,_t=be.layoutVertexArray,Mt=be.collisionVertexArray,Bt=je.anchorX,qt=je.anchorY;this._addCollisionDebugVertex(_t,Mt,Ee,Bt,qt,new t(M,O)),this._addCollisionDebugVertex(_t,Mt,Ee,Bt,qt,new t(Z,O)),this._addCollisionDebugVertex(_t,Mt,Ee,Bt,qt,new t(Z,ae)),this._addCollisionDebugVertex(_t,Mt,Ee,Bt,qt,new t(M,ae)),Qe.vertexLength+=4;var Vt=be.indexArray;Vt.emplaceBack(lt,lt+1),Vt.emplaceBack(lt+1,lt+2),Vt.emplaceBack(lt+2,lt+3),Vt.emplaceBack(lt+3,lt),Qe.primitiveLength+=4},di.prototype.addDebugCollisionBoxes=function(M,O,Z,ae){for(var be=M;be<O;be++){var Ee=this.collisionBoxArray.get(be),je=Ee.x1,Qe=Ee.y1,lt=Ee.x2,_t=Ee.y2;this.addCollisionDebugVertices(je,Qe,lt,_t,ae?this.textCollisionBox:this.iconCollisionBox,Ee.anchorPoint,Z)}},di.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new uu(ne,xf.members,ue),this.iconCollisionBox=new uu(ne,xf.members,ue);for(var M=0;M<this.symbolInstances.length;M++){var O=this.symbolInstances.get(M);this.addDebugCollisionBoxes(O.textBoxStartIndex,O.textBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.iconBoxStartIndex,O.iconBoxEndIndex,O,!1),this.addDebugCollisionBoxes(O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O,!1)}},di.prototype._deserializeCollisionBoxesForSymbol=function(M,O,Z,ae,be,Ee,je,Qe,lt){for(var _t={},Mt=O;Mt<Z;Mt++){var Bt=M.get(Mt);_t.textBox={x1:Bt.x1,y1:Bt.y1,x2:Bt.x2,y2:Bt.y2,anchorPointX:Bt.anchorPointX,anchorPointY:Bt.anchorPointY},_t.textFeatureIndex=Bt.featureIndex;break}for(var qt=ae;qt<be;qt++){var Vt=M.get(qt);_t.verticalTextBox={x1:Vt.x1,y1:Vt.y1,x2:Vt.x2,y2:Vt.y2,anchorPointX:Vt.anchorPointX,anchorPointY:Vt.anchorPointY},_t.verticalTextFeatureIndex=Vt.featureIndex;break}for(var rn=Ee;rn<je;rn++){var xn=M.get(rn);_t.iconBox={x1:xn.x1,y1:xn.y1,x2:xn.x2,y2:xn.y2,anchorPointX:xn.anchorPointX,anchorPointY:xn.anchorPointY},_t.iconFeatureIndex=xn.featureIndex;break}for(var In=Qe;In<lt;In++){var On=M.get(In);_t.verticalIconBox={x1:On.x1,y1:On.y1,x2:On.x2,y2:On.y2,anchorPointX:On.anchorPointX,anchorPointY:On.anchorPointY},_t.verticalIconFeatureIndex=On.featureIndex;break}return _t},di.prototype.deserializeCollisionBoxes=function(M){this.collisionArrays=[];for(var O=0;O<this.symbolInstances.length;O++){var Z=this.symbolInstances.get(O);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(M,Z.textBoxStartIndex,Z.textBoxEndIndex,Z.verticalTextBoxStartIndex,Z.verticalTextBoxEndIndex,Z.iconBoxStartIndex,Z.iconBoxEndIndex,Z.verticalIconBoxStartIndex,Z.verticalIconBoxEndIndex))}},di.prototype.hasTextData=function(){return this.text.segments.get().length>0},di.prototype.hasIconData=function(){return this.icon.segments.get().length>0},di.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},di.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},di.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},di.prototype.addIndicesForPlacedSymbol=function(M,O){for(var Z=M.placedSymbolArray.get(O),ae=Z.vertexStartIndex+4*Z.numGlyphs,be=Z.vertexStartIndex;be<ae;be+=4)M.indexArray.emplaceBack(be,be+1,be+2),M.indexArray.emplaceBack(be+1,be+2,be+3)},di.prototype.getSortedSymbolIndexes=function(M){if(this.sortedAngle===M&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var O=Math.sin(M),Z=Math.cos(M),ae=[],be=[],Ee=[],je=0;je<this.symbolInstances.length;++je){Ee.push(je);var Qe=this.symbolInstances.get(je);ae.push(0|Math.round(O*Qe.anchorX+Z*Qe.anchorY)),be.push(Qe.featureIndex)}return Ee.sort(function(lt,_t){return ae[lt]-ae[_t]||be[_t]-be[lt]}),Ee},di.prototype.addToSortKeyRanges=function(M,O){var Z=this.sortKeyRanges[this.sortKeyRanges.length-1];Z&&Z.sortKey===O?Z.symbolInstanceEnd=M+1:this.sortKeyRanges.push({sortKey:O,symbolInstanceStart:M,symbolInstanceEnd:M+1})},di.prototype.sortFeatures=function(M){var O=this;if(this.sortFeaturesByY&&this.sortedAngle!==M&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(M),this.sortedAngle=M,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Z=0,ae=this.symbolInstanceIndexes;Z<ae.length;Z+=1){var be=ae[Z],Ee=this.symbolInstances.get(be);this.featureSortOrder.push(Ee.featureIndex),[Ee.rightJustifiedTextSymbolIndex,Ee.centerJustifiedTextSymbolIndex,Ee.leftJustifiedTextSymbolIndex].forEach(function(je,Qe,lt){je>=0&&lt.indexOf(je)===Qe&&O.addIndicesForPlacedSymbol(O.text,je)}),Ee.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Ee.verticalPlacedTextSymbolIndex),Ee.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ee.placedIconSymbolIndex),Ee.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ee.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},_r("SymbolBucket",di,{omit:["layers","collisionBoxArray","features","compareText"]}),di.MAX_GLYPHS=65535,di.addDynamicAttributes=Cc;var Gp=new Qi({"symbol-placement":new Mr(Se.layout_symbol["symbol-placement"]),"symbol-spacing":new Mr(Se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Mr(Se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Or(Se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Mr(Se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Mr(Se.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Mr(Se.layout_symbol["icon-ignore-placement"]),"icon-optional":new Mr(Se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Mr(Se.layout_symbol["icon-rotation-alignment"]),"icon-size":new Or(Se.layout_symbol["icon-size"]),"icon-text-fit":new Mr(Se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Mr(Se.layout_symbol["icon-text-fit-padding"]),"icon-image":new Or(Se.layout_symbol["icon-image"]),"icon-rotate":new Or(Se.layout_symbol["icon-rotate"]),"icon-padding":new Mr(Se.layout_symbol["icon-padding"]),"icon-keep-upright":new Mr(Se.layout_symbol["icon-keep-upright"]),"icon-offset":new Or(Se.layout_symbol["icon-offset"]),"icon-anchor":new Or(Se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Mr(Se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Mr(Se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Mr(Se.layout_symbol["text-rotation-alignment"]),"text-field":new Or(Se.layout_symbol["text-field"]),"text-font":new Or(Se.layout_symbol["text-font"]),"text-size":new Or(Se.layout_symbol["text-size"]),"text-max-width":new Or(Se.layout_symbol["text-max-width"]),"text-line-height":new Mr(Se.layout_symbol["text-line-height"]),"text-letter-spacing":new Or(Se.layout_symbol["text-letter-spacing"]),"text-justify":new Or(Se.layout_symbol["text-justify"]),"text-radial-offset":new Or(Se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Mr(Se.layout_symbol["text-variable-anchor"]),"text-anchor":new Or(Se.layout_symbol["text-anchor"]),"text-max-angle":new Mr(Se.layout_symbol["text-max-angle"]),"text-writing-mode":new Mr(Se.layout_symbol["text-writing-mode"]),"text-rotate":new Or(Se.layout_symbol["text-rotate"]),"text-padding":new Mr(Se.layout_symbol["text-padding"]),"text-keep-upright":new Mr(Se.layout_symbol["text-keep-upright"]),"text-transform":new Or(Se.layout_symbol["text-transform"]),"text-offset":new Or(Se.layout_symbol["text-offset"]),"text-allow-overlap":new Mr(Se.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Mr(Se.layout_symbol["text-ignore-placement"]),"text-optional":new Mr(Se.layout_symbol["text-optional"])}),Pc={paint:new Qi({"icon-opacity":new Or(Se.paint_symbol["icon-opacity"]),"icon-color":new Or(Se.paint_symbol["icon-color"]),"icon-halo-color":new Or(Se.paint_symbol["icon-halo-color"]),"icon-halo-width":new Or(Se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Or(Se.paint_symbol["icon-halo-blur"]),"icon-translate":new Mr(Se.paint_symbol["icon-translate"]),"icon-translate-anchor":new Mr(Se.paint_symbol["icon-translate-anchor"]),"text-opacity":new Or(Se.paint_symbol["text-opacity"]),"text-color":new Or(Se.paint_symbol["text-color"],{runtimeType:Ot,getOverride:function(M){return M.textColor},hasOverride:function(M){return!!M.textColor}}),"text-halo-color":new Or(Se.paint_symbol["text-halo-color"]),"text-halo-width":new Or(Se.paint_symbol["text-halo-width"]),"text-halo-blur":new Or(Se.paint_symbol["text-halo-blur"]),"text-translate":new Mr(Se.paint_symbol["text-translate"]),"text-translate-anchor":new Mr(Se.paint_symbol["text-translate-anchor"])}),layout:Gp},Hl=function(M){this.type=M.property.overrides?M.property.overrides.runtimeType:ht,this.defaultValue=M};Hl.prototype.evaluate=function(M){if(M.formattedSection){var O=this.defaultValue.property.overrides;if(O&&O.hasOverride(M.formattedSection))return O.getOverride(M.formattedSection)}return M.feature&&M.featureState?this.defaultValue.evaluate(M.feature,M.featureState):this.defaultValue.property.specification.default},Hl.prototype.eachChild=function(M){this.defaultValue.isConstant()||M(this.defaultValue.value._styleExpression.expression)},Hl.prototype.outputDefined=function(){return!1},Hl.prototype.serialize=function(){return null},_r("FormatSectionOverride",Hl,{omit:["defaultValue"]});var Zp=function(M){function O(Z){M.call(this,Z,Pc)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.recalculate=function(Z,ae){if(M.prototype.recalculate.call(this,Z,ae),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var be=this.layout.get("text-writing-mode");if(be){for(var Ee=[],je=0,Qe=be;je<Qe.length;je+=1){var lt=Qe[je];Ee.indexOf(lt)<0&&Ee.push(lt)}this.layout._values["text-writing-mode"]=Ee}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},O.prototype.getValueAndResolveTokens=function(Z,ae,be,Ee){var je=this.layout.get(Z).evaluate(ae,{},be,Ee),Qe=this._unevaluatedLayout._values[Z];return Qe.isDataDriven()||es(Qe.value)||!je?je:function(lt,_t){return _t.replace(/{([^{}]+)}/g,function(Mt,Bt){return Bt in lt?String(lt[Bt]):""})}(ae.properties,je)},O.prototype.createBucket=function(Z){return new di(Z)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype._setPaintOverrides=function(){for(var Z=0,ae=Pc.paint.overridableProperties;Z<ae.length;Z+=1){var be=ae[Z];if(O.hasPaintOverride(this.layout,be)){var Ee,je=this.paint.get(be),Qe=new Hl(je),lt=new gs(Qe,je.property.specification);Ee=je.value.kind==="constant"||je.value.kind==="source"?new Fo("source",lt):new Bo("composite",lt,je.value.zoomStops,je.value._interpolationType),this.paint._values[be]=new $i(je.property,Ee,je.parameters)}}},O.prototype._handleOverridablePaintPropertyUpdate=function(Z,ae,be){return!(!this.layout||ae.isDataDriven()||be.isDataDriven())&&O.hasPaintOverride(this.layout,Z)},O.hasPaintOverride=function(Z,ae){var be=Z.get("text-field"),Ee=Pc.paint.properties[ae],je=!1,Qe=function(Mt){for(var Bt=0,qt=Mt;Bt<qt.length;Bt+=1){var Vt=qt[Bt];if(Ee.overrides&&Ee.overrides.hasOverride(Vt))return void(je=!0)}};if(be.value.kind==="constant"&&be.value.value instanceof Rn)Qe(be.value.value.sections);else if(be.value.kind==="source"){var lt=function(Mt){if(!je)if(Mt instanceof fr&&$n(Mt.value)===Gt){var Bt=Mt.value;Qe(Bt.sections)}else Mt instanceof Zt?Qe(Mt.sections):Mt.eachChild(lt)},_t=be.value;_t._styleExpression&&lt(_t._styleExpression.expression)}return je},O}(ha),Wp={paint:new Qi({"background-color":new Mr(Se.paint_background["background-color"]),"background-pattern":new go(Se.paint_background["background-pattern"]),"background-opacity":new Mr(Se.paint_background["background-opacity"])})},Yp=function(M){function O(Z){M.call(this,Z,Wp)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(ha),Xp={paint:new Qi({"raster-opacity":new Mr(Se.paint_raster["raster-opacity"]),"raster-hue-rotate":new Mr(Se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Mr(Se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Mr(Se.paint_raster["raster-brightness-max"]),"raster-saturation":new Mr(Se.paint_raster["raster-saturation"]),"raster-contrast":new Mr(Se.paint_raster["raster-contrast"]),"raster-resampling":new Mr(Se.paint_raster["raster-resampling"]),"raster-fade-duration":new Mr(Se.paint_raster["raster-fade-duration"])})},Jp=function(M){function O(Z){M.call(this,Z,Xp)}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O}(ha),Kp=function(M){function O(Z){M.call(this,Z,{}),this.implementation=Z}return M&&(O.__proto__=M),O.prototype=Object.create(M&&M.prototype),O.prototype.constructor=O,O.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},O.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},O.prototype.recalculate=function(){},O.prototype.updateTransitions=function(){},O.prototype.hasTransition=function(){},O.prototype.serialize=function(){},O.prototype.onAdd=function(Z){this.implementation.onAdd&&this.implementation.onAdd(Z,Z.painter.context.gl)},O.prototype.onRemove=function(Z){this.implementation.onRemove&&this.implementation.onRemove(Z,Z.painter.context.gl)},O}(ha),$p={circle:Fh,heatmap:Nh,hillshade:Uh,fill:rp,"fill-extrusion":fp,line:vp,symbol:Zp,background:Yp,raster:Jp},Gf=self.HTMLImageElement,Zf=self.HTMLCanvasElement,Wf=self.HTMLVideoElement,Yf=self.ImageData,qu=self.ImageBitmap,kl=function(M,O,Z,ae){this.context=M,this.format=Z,this.texture=M.gl.createTexture(),this.update(O,ae)};kl.prototype.update=function(M,O,Z){var ae=M.width,be=M.height,Ee=!(this.size&&this.size[0]===ae&&this.size[1]===be||Z),je=this.context,Qe=je.gl;if(this.useMipmap=Boolean(O&&O.useMipmap),Qe.bindTexture(Qe.TEXTURE_2D,this.texture),je.pixelStoreUnpackFlipY.set(!1),je.pixelStoreUnpack.set(1),je.pixelStoreUnpackPremultiplyAlpha.set(this.format===Qe.RGBA&&(!O||O.premultiply!==!1)),Ee)this.size=[ae,be],M instanceof Gf||M instanceof Zf||M instanceof Wf||M instanceof Yf||qu&&M instanceof qu?Qe.texImage2D(Qe.TEXTURE_2D,0,this.format,this.format,Qe.UNSIGNED_BYTE,M):Qe.texImage2D(Qe.TEXTURE_2D,0,this.format,ae,be,0,this.format,Qe.UNSIGNED_BYTE,M.data);else{var lt=Z||{x:0,y:0},_t=lt.x,Mt=lt.y;M instanceof Gf||M instanceof Zf||M instanceof Wf||M instanceof Yf||qu&&M instanceof qu?Qe.texSubImage2D(Qe.TEXTURE_2D,0,_t,Mt,Qe.RGBA,Qe.UNSIGNED_BYTE,M):Qe.texSubImage2D(Qe.TEXTURE_2D,0,_t,Mt,ae,be,Qe.RGBA,Qe.UNSIGNED_BYTE,M.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Qe.generateMipmap(Qe.TEXTURE_2D)},kl.prototype.bind=function(M,O,Z){var ae=this.context.gl;ae.bindTexture(ae.TEXTURE_2D,this.texture),Z!==ae.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Z=ae.LINEAR),M!==this.filter&&(ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,M),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,Z||M),this.filter=M),O!==this.wrap&&(ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,O),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,O),this.wrap=O)},kl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},kl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Oc=function(M){var O=this;this._callback=M,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){O._triggered=!1,O._callback()})};Oc.prototype.trigger=function(){var M=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){M._triggered=!1,M._callback()},0))},Oc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var ql=function(M,O,Z){this.target=M,this.parent=O,this.mapId=Z,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},g(["receive","process"],this),this.invoker=new Oc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=L()?M:self};function Xf(M,O,Z){var ae=2*Math.PI*6378137/256/Math.pow(2,Z);return[M*ae-2*Math.PI*6378137/2,O*ae-2*Math.PI*6378137/2]}ql.prototype.send=function(M,O,Z,ae,be){var Ee=this;be===void 0&&(be=!1);var je=Math.round(1e18*Math.random()).toString(36).substring(0,10);Z&&(this.callbacks[je]=Z);var Qe=I(this.globalScope)?void 0:[];return this.target.postMessage({id:je,type:M,hasCallback:!!Z,targetMapId:ae,mustQueue:be,sourceMapId:this.mapId,data:rs(O,Qe)},Qe),{cancel:function(){Z&&delete Ee.callbacks[je],Ee.target.postMessage({id:je,type:"<cancel>",targetMapId:ae,sourceMapId:Ee.mapId})}}},ql.prototype.receive=function(M){var O=M.data,Z=O.id;if(Z&&(!O.targetMapId||this.mapId===O.targetMapId))if(O.type==="<cancel>"){delete this.tasks[Z];var ae=this.cancelCallbacks[Z];delete this.cancelCallbacks[Z],ae&&ae()}else L()||O.mustQueue?(this.tasks[Z]=O,this.taskQueue.push(Z),this.invoker.trigger()):this.processTask(Z,O)},ql.prototype.process=function(){if(this.taskQueue.length){var M=this.taskQueue.shift(),O=this.tasks[M];delete this.tasks[M],this.taskQueue.length&&this.invoker.trigger(),O&&this.processTask(M,O)}},ql.prototype.processTask=function(M,O){var Z=this;if(O.type==="<response>"){var ae=this.callbacks[M];delete this.callbacks[M],ae&&(O.error?ae(is(O.error)):ae(null,is(O.data)))}else{var be=!1,Ee=I(this.globalScope)?void 0:[],je=O.hasCallback?function(Mt,Bt){be=!0,delete Z.cancelCallbacks[M],Z.target.postMessage({id:M,type:"<response>",sourceMapId:Z.mapId,error:Mt?rs(Mt):null,data:rs(Bt,Ee)},Ee)}:function(Mt){be=!0},Qe=null,lt=is(O.data);if(this.parent[O.type])Qe=this.parent[O.type](O.sourceMapId,lt,je);else if(this.parent.getWorkerSource){var _t=O.type.split(".");Qe=this.parent.getWorkerSource(O.sourceMapId,_t[0],lt.source)[_t[1]](lt,je)}else je(new Error("Could not find function "+O.type));!be&&Qe&&Qe.cancel&&(this.cancelCallbacks[M]=Qe.cancel)}},ql.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var na=function(M,O){M&&(O?this.setSouthWest(M).setNorthEast(O):M.length===4?this.setSouthWest([M[0],M[1]]).setNorthEast([M[2],M[3]]):this.setSouthWest(M[0]).setNorthEast(M[1]))};na.prototype.setNorthEast=function(M){return this._ne=M instanceof Li?new Li(M.lng,M.lat):Li.convert(M),this},na.prototype.setSouthWest=function(M){return this._sw=M instanceof Li?new Li(M.lng,M.lat):Li.convert(M),this},na.prototype.extend=function(M){var O,Z,ae=this._sw,be=this._ne;if(M instanceof Li)O=M,Z=M;else{if(!(M instanceof na)){if(Array.isArray(M)){if(M.length===4||M.every(Array.isArray)){var Ee=M;return this.extend(na.convert(Ee))}var je=M;return this.extend(Li.convert(je))}return this}if(O=M._sw,Z=M._ne,!O||!Z)return this}return ae||be?(ae.lng=Math.min(O.lng,ae.lng),ae.lat=Math.min(O.lat,ae.lat),be.lng=Math.max(Z.lng,be.lng),be.lat=Math.max(Z.lat,be.lat)):(this._sw=new Li(O.lng,O.lat),this._ne=new Li(Z.lng,Z.lat)),this},na.prototype.getCenter=function(){return new Li((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},na.prototype.getSouthWest=function(){return this._sw},na.prototype.getNorthEast=function(){return this._ne},na.prototype.getNorthWest=function(){return new Li(this.getWest(),this.getNorth())},na.prototype.getSouthEast=function(){return new Li(this.getEast(),this.getSouth())},na.prototype.getWest=function(){return this._sw.lng},na.prototype.getSouth=function(){return this._sw.lat},na.prototype.getEast=function(){return this._ne.lng},na.prototype.getNorth=function(){return this._ne.lat},na.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},na.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},na.prototype.isEmpty=function(){return!(this._sw&&this._ne)},na.prototype.contains=function(M){var O=Li.convert(M),Z=O.lng,ae=O.lat,be=this._sw.lat<=ae&&ae<=this._ne.lat,Ee=this._sw.lng<=Z&&Z<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Ee=this._sw.lng>=Z&&Z>=this._ne.lng),be&&Ee},na.convert=function(M){return!M||M instanceof na?M:new na(M)};var Jf=63710088e-1,Li=function(M,O){if(isNaN(M)||isNaN(O))throw new Error("Invalid LngLat object: ("+M+", "+O+")");if(this.lng=+M,this.lat=+O,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Li.prototype.wrap=function(){return new Li(i(this.lng,-180,180),this.lat)},Li.prototype.toArray=function(){return[this.lng,this.lat]},Li.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Li.prototype.distanceTo=function(M){var O=Math.PI/180,Z=this.lat*O,ae=M.lat*O,be=Math.sin(Z)*Math.sin(ae)+Math.cos(Z)*Math.cos(ae)*Math.cos((M.lng-this.lng)*O);return Jf*Math.acos(Math.min(be,1))},Li.prototype.toBounds=function(M){M===void 0&&(M=0);var O=360*M/40075017,Z=O/Math.cos(Math.PI/180*this.lat);return new na(new Li(this.lng-Z,this.lat-O),new Li(this.lng+Z,this.lat+O))},Li.convert=function(M){if(M instanceof Li)return M;if(Array.isArray(M)&&(M.length===2||M.length===3))return new Li(Number(M[0]),Number(M[1]));if(!Array.isArray(M)&&typeof M=="object"&&M!==null)return new Li(Number("lng"in M?M.lng:M.lon),Number(M.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Kf=2*Math.PI*Jf;function $f(M){return Kf*Math.cos(M*Math.PI/180)}function Qf(M){return(180+M)/360}function eh(M){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M*Math.PI/360)))/360}function th(M,O){return M/$f(O)}function Ic(M){var O=180-360*M;return 360/Math.PI*Math.atan(Math.exp(O*Math.PI/180))-90}var Al=function(M,O,Z){Z===void 0&&(Z=0),this.x=+M,this.y=+O,this.z=+Z};Al.fromLngLat=function(M,O){O===void 0&&(O=0);var Z=Li.convert(M);return new Al(Qf(Z.lng),eh(Z.lat),th(O,Z.lat))},Al.prototype.toLngLat=function(){return new Li(360*this.x-180,Ic(this.y))},Al.prototype.toAltitude=function(){return M=this.z,O=this.y,M*$f(Ic(O));var M,O},Al.prototype.meterInMercatorCoordinateUnits=function(){return 1/Kf*(M=Ic(this.y),1/Math.cos(M*Math.PI/180));var M};var Ml=function(M,O,Z){this.z=M,this.x=O,this.y=Z,this.key=cu(0,M,M,O,Z)};Ml.prototype.equals=function(M){return this.z===M.z&&this.x===M.x&&this.y===M.y},Ml.prototype.url=function(M,O){var Z,ae,be,Ee,je,Qe=(Z=this.x,ae=this.y,be=this.z,Ee=Xf(256*Z,256*(ae=Math.pow(2,be)-ae-1),be),je=Xf(256*(Z+1),256*(ae+1),be),Ee[0]+","+Ee[1]+","+je[0]+","+je[1]),lt=function(_t,Mt,Bt){for(var qt,Vt="",rn=_t;rn>0;rn--)Vt+=(Mt&(qt=1<<rn-1)?1:0)+(Bt&qt?2:0);return Vt}(this.z,this.x,this.y);return M[(this.x+this.y)%M.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(O==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",lt).replace("{bbox-epsg-3857}",Qe)},Ml.prototype.getTilePoint=function(M){var O=Math.pow(2,this.z);return new t((M.x*O-this.x)*Br,(M.y*O-this.y)*Br)},Ml.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var nh=function(M,O){this.wrap=M,this.canonical=O,this.key=cu(M,O.z,O.z,O.x,O.y)},ra=function(M,O,Z,ae,be){this.overscaledZ=M,this.wrap=O,this.canonical=new Ml(Z,+ae,+be),this.key=cu(O,M,Z,ae,be)};function cu(M,O,Z,ae,be){(M*=2)<0&&(M=-1*M-1);var Ee=1<<Z;return(Ee*Ee*M+Ee*be+ae).toString(36)+Z.toString(36)+O.toString(36)}ra.prototype.equals=function(M){return this.overscaledZ===M.overscaledZ&&this.wrap===M.wrap&&this.canonical.equals(M.canonical)},ra.prototype.scaledTo=function(M){var O=this.canonical.z-M;return M>this.canonical.z?new ra(M,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ra(M,this.wrap,M,this.canonical.x>>O,this.canonical.y>>O)},ra.prototype.calculateScaledKey=function(M,O){var Z=this.canonical.z-M;return M>this.canonical.z?cu(this.wrap*+O,M,this.canonical.z,this.canonical.x,this.canonical.y):cu(this.wrap*+O,M,M,this.canonical.x>>Z,this.canonical.y>>Z)},ra.prototype.isChildOf=function(M){if(M.wrap!==this.wrap)return!1;var O=this.canonical.z-M.canonical.z;return M.overscaledZ===0||M.overscaledZ<this.overscaledZ&&M.canonical.x===this.canonical.x>>O&&M.canonical.y===this.canonical.y>>O},ra.prototype.children=function(M){if(this.overscaledZ>=M)return[new ra(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var O=this.canonical.z+1,Z=2*this.canonical.x,ae=2*this.canonical.y;return[new ra(O,this.wrap,O,Z,ae),new ra(O,this.wrap,O,Z+1,ae),new ra(O,this.wrap,O,Z,ae+1),new ra(O,this.wrap,O,Z+1,ae+1)]},ra.prototype.isLessThan=function(M){return this.wrap<M.wrap||!(this.wrap>M.wrap)&&(this.overscaledZ<M.overscaledZ||!(this.overscaledZ>M.overscaledZ)&&(this.canonical.x<M.canonical.x||!(this.canonical.x>M.canonical.x)&&this.canonical.y<M.canonical.y))},ra.prototype.wrapped=function(){return new ra(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ra.prototype.unwrapTo=function(M){return new ra(this.overscaledZ,M,this.canonical.z,this.canonical.x,this.canonical.y)},ra.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ra.prototype.toUnwrapped=function(){return new nh(this.wrap,this.canonical)},ra.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ra.prototype.getTilePoint=function(M){return this.canonical.getTilePoint(new Al(M.x-this.wrap,M.y))},_r("CanonicalTileID",Ml),_r("OverscaledTileID",ra,{omit:["posMatrix"]});var il=function(M,O,Z){if(this.uid=M,O.height!==O.width)throw new RangeError("DEM tiles must be square");if(Z&&Z!=="mapbox"&&Z!=="terrarium")return S('"'+Z+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=O.height;var ae=this.dim=O.height-2;this.data=new Uint32Array(O.data.buffer),this.encoding=Z||"mapbox";for(var be=0;be<ae;be++)this.data[this._idx(-1,be)]=this.data[this._idx(0,be)],this.data[this._idx(ae,be)]=this.data[this._idx(ae-1,be)],this.data[this._idx(be,-1)]=this.data[this._idx(be,0)],this.data[this._idx(be,ae)]=this.data[this._idx(be,ae-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ae,-1)]=this.data[this._idx(ae-1,0)],this.data[this._idx(-1,ae)]=this.data[this._idx(0,ae-1)],this.data[this._idx(ae,ae)]=this.data[this._idx(ae-1,ae-1)]};il.prototype.get=function(M,O){var Z=new Uint8Array(this.data.buffer),ae=4*this._idx(M,O);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(Z[ae],Z[ae+1],Z[ae+2])},il.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},il.prototype._idx=function(M,O){if(M<-1||M>=this.dim+1||O<-1||O>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(O+1)*this.stride+(M+1)},il.prototype._unpackMapbox=function(M,O,Z){return(256*M*256+256*O+Z)/10-1e4},il.prototype._unpackTerrarium=function(M,O,Z){return 256*M+O+Z/256-32768},il.prototype.getPixels=function(){return new to({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},il.prototype.backfillBorder=function(M,O,Z){if(this.dim!==M.dim)throw new Error("dem dimension mismatch");var ae=O*this.dim,be=O*this.dim+this.dim,Ee=Z*this.dim,je=Z*this.dim+this.dim;switch(O){case-1:ae=be-1;break;case 1:be=ae+1}switch(Z){case-1:Ee=je-1;break;case 1:je=Ee+1}for(var Qe=-O*this.dim,lt=-Z*this.dim,_t=Ee;_t<je;_t++)for(var Mt=ae;Mt<be;Mt++)this.data[this._idx(Mt,_t)]=M.data[this._idx(Mt+Qe,_t+lt)]},_r("DEMData",il);var Gu=function(M){this._stringToNumber={},this._numberToString=[];for(var O=0;O<M.length;O++){var Z=M[O];this._stringToNumber[Z]=O,this._numberToString[O]=Z}};Gu.prototype.encode=function(M){return this._stringToNumber[M]},Gu.prototype.decode=function(M){return this._numberToString[M]};var Zu=function(M,O,Z,ae,be){this.type="Feature",this._vectorTileFeature=M,M._z=O,M._x=Z,M._y=ae,this.properties=M.properties,this.id=be},Rc={geometry:{configurable:!0}};Rc.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Rc.geometry.set=function(M){this._geometry=M},Zu.prototype.toJSON=function(){var M={geometry:this.geometry};for(var O in this)O!=="_geometry"&&O!=="_vectorTileFeature"&&(M[O]=this[O]);return M},Object.defineProperties(Zu.prototype,Rc);var Gl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Gl.prototype.updateState=function(M,O,Z){var ae=String(O);if(this.stateChanges[M]=this.stateChanges[M]||{},this.stateChanges[M][ae]=this.stateChanges[M][ae]||{},c(this.stateChanges[M][ae],Z),this.deletedStates[M]===null)for(var be in this.deletedStates[M]={},this.state[M])be!==ae&&(this.deletedStates[M][be]=null);else if(this.deletedStates[M]&&this.deletedStates[M][ae]===null)for(var Ee in this.deletedStates[M][ae]={},this.state[M][ae])Z[Ee]||(this.deletedStates[M][ae][Ee]=null);else for(var je in Z)this.deletedStates[M]&&this.deletedStates[M][ae]&&this.deletedStates[M][ae][je]===null&&delete this.deletedStates[M][ae][je]},Gl.prototype.removeFeatureState=function(M,O,Z){if(this.deletedStates[M]!==null){var ae=String(O);if(this.deletedStates[M]=this.deletedStates[M]||{},Z&&O!==void 0)this.deletedStates[M][ae]!==null&&(this.deletedStates[M][ae]=this.deletedStates[M][ae]||{},this.deletedStates[M][ae][Z]=null);else if(O!==void 0)if(this.stateChanges[M]&&this.stateChanges[M][ae])for(Z in this.deletedStates[M][ae]={},this.stateChanges[M][ae])this.deletedStates[M][ae][Z]=null;else this.deletedStates[M][ae]=null;else this.deletedStates[M]=null}},Gl.prototype.getState=function(M,O){var Z=String(O),ae=this.state[M]||{},be=this.stateChanges[M]||{},Ee=c({},ae[Z],be[Z]);if(this.deletedStates[M]===null)return{};if(this.deletedStates[M]){var je=this.deletedStates[M][O];if(je===null)return{};for(var Qe in je)delete Ee[Qe]}return Ee},Gl.prototype.initializeTileState=function(M,O){M.setFeatureState(this.state,O)},Gl.prototype.coalesceChanges=function(M,O){var Z={};for(var ae in this.stateChanges){this.state[ae]=this.state[ae]||{};var be={};for(var Ee in this.stateChanges[ae])this.state[ae][Ee]||(this.state[ae][Ee]={}),c(this.state[ae][Ee],this.stateChanges[ae][Ee]),be[Ee]=this.state[ae][Ee];Z[ae]=be}for(var je in this.deletedStates){this.state[je]=this.state[je]||{};var Qe={};if(this.deletedStates[je]===null)for(var lt in this.state[je])Qe[lt]={},this.state[je][lt]={};else for(var _t in this.deletedStates[je]){if(this.deletedStates[je][_t]===null)this.state[je][_t]={};else for(var Mt=0,Bt=Object.keys(this.deletedStates[je][_t]);Mt<Bt.length;Mt+=1){var qt=Bt[Mt];delete this.state[je][_t][qt]}Qe[_t]=this.state[je][_t]}Z[je]=Z[je]||{},c(Z[je],Qe)}if(this.stateChanges={},this.deletedStates={},Object.keys(Z).length!==0)for(var Vt in M)M[Vt].setFeatureState(Z,O)};var al=function(M,O){this.tileID=M,this.x=M.canonical.x,this.y=M.canonical.y,this.z=M.canonical.z,this.grid=new Fi(Br,16,0),this.grid3D=new Fi(Br,16,0),this.featureIndexArray=new ln,this.promoteId=O};function rh(M,O,Z,ae,be){return p(M,function(Ee,je){var Qe=O instanceof Na?O.get(je):null;return Qe&&Qe.evaluate?Qe.evaluate(Z,ae,be):Qe})}function ih(M){for(var O=1/0,Z=1/0,ae=-1/0,be=-1/0,Ee=0,je=M;Ee<je.length;Ee+=1){var Qe=je[Ee];O=Math.min(O,Qe.x),Z=Math.min(Z,Qe.y),ae=Math.max(ae,Qe.x),be=Math.max(be,Qe.y)}return{minX:O,minY:Z,maxX:ae,maxY:be}}function Qp(M,O){return O-M}al.prototype.insert=function(M,O,Z,ae,be,Ee){var je=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Z,ae,be);for(var Qe=Ee?this.grid3D:this.grid,lt=0;lt<O.length;lt++){for(var _t=O[lt],Mt=[1/0,1/0,-1/0,-1/0],Bt=0;Bt<_t.length;Bt++){var qt=_t[Bt];Mt[0]=Math.min(Mt[0],qt.x),Mt[1]=Math.min(Mt[1],qt.y),Mt[2]=Math.max(Mt[2],qt.x),Mt[3]=Math.max(Mt[3],qt.y)}Mt[0]<Br&&Mt[1]<Br&&Mt[2]>=0&&Mt[3]>=0&&Qe.insert(je,Mt[0],Mt[1],Mt[2],Mt[3])}},al.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new zl.VectorTile(new Iu(this.rawTileData)).layers,this.sourceLayerCoder=new Gu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},al.prototype.query=function(M,O,Z,ae){var be=this;this.loadVTLayers();for(var Ee=M.params||{},je=Br/M.tileSize/M.scale,Qe=ws(Ee.filter),lt=M.queryGeometry,_t=M.queryPadding*je,Mt=ih(lt),Bt=this.grid.query(Mt.minX-_t,Mt.minY-_t,Mt.maxX+_t,Mt.maxY+_t),qt=ih(M.cameraQueryGeometry),Vt=0,rn=this.grid3D.query(qt.minX-_t,qt.minY-_t,qt.maxX+_t,qt.maxY+_t,function(Yn,Qn,tr,xr){return function(pr,Tr,Er,jr,Pr){for(var Nr=0,Ir=pr;Nr<Ir.length;Nr+=1){var Cr=Ir[Nr];if(Tr<=Cr.x&&Er<=Cr.y&&jr>=Cr.x&&Pr>=Cr.y)return!0}var Jr=[new t(Tr,Er),new t(Tr,Pr),new t(jr,Pr),new t(jr,Er)];if(pr.length>2){for(var qr=0,bi=Jr;qr<bi.length;qr+=1)if(dl(pr,bi[qr]))return!0}for(var Fr=0;Fr<pr.length-1;Fr++)if(fc(pr[Fr],pr[Fr+1],Jr))return!0;return!1}(M.cameraQueryGeometry,Yn-_t,Qn-_t,tr+_t,xr+_t)});Vt<rn.length;Vt+=1){var xn=rn[Vt];Bt.push(xn)}Bt.sort(Qp);for(var In,On={},jn=function(Yn){var Qn=Bt[Yn];if(Qn!==In){In=Qn;var tr=be.featureIndexArray.get(Qn),xr=null;be.loadMatchingFeature(On,tr.bucketIndex,tr.sourceLayerIndex,tr.featureIndex,Qe,Ee.layers,Ee.availableImages,O,Z,ae,function(pr,Tr,Er){return xr||(xr=Ai(pr)),Tr.queryIntersectsFeature(lt,pr,Er,xr,be.z,M.transform,je,M.pixelPosMatrix)})}},Vn=0;Vn<Bt.length;Vn++)jn(Vn);return On},al.prototype.loadMatchingFeature=function(M,O,Z,ae,be,Ee,je,Qe,lt,_t,Mt){var Bt=this.bucketLayerIDs[O];if(!Ee||function(xr,pr){for(var Tr=0;Tr<xr.length;Tr++)if(pr.indexOf(xr[Tr])>=0)return!0;return!1}(Ee,Bt)){var qt=this.sourceLayerCoder.decode(Z),Vt=this.vtLayers[qt].feature(ae);if(be.filter(new ni(this.tileID.overscaledZ),Vt))for(var rn=this.getId(Vt,qt),xn=0;xn<Bt.length;xn++){var In=Bt[xn];if(!(Ee&&Ee.indexOf(In)<0)){var On=Qe[In];if(On){var jn={};rn!==void 0&&_t&&(jn=_t.getState(On.sourceLayer||"_geojsonTileLayer",rn));var Vn=lt[In];Vn.paint=rh(Vn.paint,On.paint,Vt,jn,je),Vn.layout=rh(Vn.layout,On.layout,Vt,jn,je);var Yn=!Mt||Mt(Vt,On,jn);if(Yn){var Qn=new Zu(Vt,this.z,this.x,this.y,rn);Qn.layer=Vn;var tr=M[In];tr===void 0&&(tr=M[In]=[]),tr.push({featureIndex:ae,feature:Qn,intersectionZ:Yn})}}}}}},al.prototype.lookupSymbolFeatures=function(M,O,Z,ae,be,Ee,je,Qe){var lt={};this.loadVTLayers();for(var _t=ws(be),Mt=0,Bt=M;Mt<Bt.length;Mt+=1){var qt=Bt[Mt];this.loadMatchingFeature(lt,Z,ae,qt,_t,Ee,je,Qe,O)}return lt},al.prototype.hasLayer=function(M){for(var O=0,Z=this.bucketLayerIDs;O<Z.length;O+=1)for(var ae=0,be=Z[O];ae<be.length;ae+=1)if(M===be[ae])return!0;return!1},al.prototype.getId=function(M,O){var Z=M.id;if(this.promoteId){var ae=typeof this.promoteId=="string"?this.promoteId:this.promoteId[O];typeof(Z=M.properties[ae])=="boolean"&&(Z=Number(Z))}return Z},_r("FeatureIndex",al,{omit:["rawTileData","sourceLayerCoder"]});var da=function(M,O){this.tileID=M,this.uid=f(),this.uses=0,this.tileSize=O,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};da.prototype.registerFadeDuration=function(M){var O=M+this.timeAdded;O<G.now()||this.fadeEndTime&&O<this.fadeEndTime||(this.fadeEndTime=O)},da.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},da.prototype.loadVectorData=function(M,O,Z){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",M){for(var ae in M.featureIndex&&(this.latestFeatureIndex=M.featureIndex,M.rawTileData?(this.latestRawTileData=M.rawTileData,this.latestFeatureIndex.rawTileData=M.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=M.collisionBoxArray,this.buckets=function(_t,Mt){var Bt={};if(!Mt)return Bt;for(var qt=function(){var xn=rn[Vt],In=xn.layerIds.map(function(Yn){return Mt.getLayer(Yn)}).filter(Boolean);if(In.length!==0){xn.layers=In,xn.stateDependentLayerIds&&(xn.stateDependentLayers=xn.stateDependentLayerIds.map(function(Yn){return In.filter(function(Qn){return Qn.id===Yn})[0]}));for(var On=0,jn=In;On<jn.length;On+=1){var Vn=jn[On];Bt[Vn.id]=xn}}},Vt=0,rn=_t;Vt<rn.length;Vt+=1)qt();return Bt}(M.buckets,O.style),this.hasSymbolBuckets=!1,this.buckets){var be=this.buckets[ae];if(be instanceof di){if(this.hasSymbolBuckets=!0,!Z)break;be.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Ee in this.buckets){var je=this.buckets[Ee];if(je instanceof di&&je.hasRTLText){this.hasRTLText=!0,ca.isLoading()||ca.isLoaded()||Ba()!=="deferred"||Qa();break}}for(var Qe in this.queryPadding=0,this.buckets){var lt=this.buckets[Qe];this.queryPadding=Math.max(this.queryPadding,O.style.getLayer(Qe).queryRadius(lt))}M.imageAtlas&&(this.imageAtlas=M.imageAtlas),M.glyphAtlasImage&&(this.glyphAtlasImage=M.glyphAtlasImage)}else this.collisionBoxArray=new Ze},da.prototype.unloadVectorData=function(){for(var M in this.buckets)this.buckets[M].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},da.prototype.getBucket=function(M){return this.buckets[M.id]},da.prototype.upload=function(M){for(var O in this.buckets){var Z=this.buckets[O];Z.uploadPending()&&Z.upload(M)}var ae=M.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new kl(M,this.imageAtlas.image,ae.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new kl(M,this.glyphAtlasImage,ae.ALPHA),this.glyphAtlasImage=null)},da.prototype.prepare=function(M){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(M,this.imageAtlasTexture)},da.prototype.queryRenderedFeatures=function(M,O,Z,ae,be,Ee,je,Qe,lt,_t){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ae,cameraQueryGeometry:be,scale:Ee,tileSize:this.tileSize,pixelPosMatrix:_t,transform:Qe,params:je,queryPadding:this.queryPadding*lt},M,O,Z):{}},da.prototype.querySourceFeatures=function(M,O){var Z=this.latestFeatureIndex;if(Z&&Z.rawTileData){var ae=Z.loadVTLayers(),be=O?O.sourceLayer:"",Ee=ae._geojsonTileLayer||ae[be];if(Ee)for(var je=ws(O&&O.filter),Qe=this.tileID.canonical,lt=Qe.z,_t=Qe.x,Mt=Qe.y,Bt={z:lt,x:_t,y:Mt},qt=0;qt<Ee.length;qt++){var Vt=Ee.feature(qt);if(je.filter(new ni(this.tileID.overscaledZ),Vt)){var rn=Z.getId(Vt,be),xn=new Zu(Vt,lt,_t,Mt,rn);xn.tile=Bt,M.push(xn)}}}},da.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},da.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},da.prototype.setExpiryData=function(M){var O=this.expirationTime;if(M.cacheControl){var Z=C(M.cacheControl);Z["max-age"]&&(this.expirationTime=Date.now()+1e3*Z["max-age"])}else M.expires&&(this.expirationTime=new Date(M.expires).getTime());if(this.expirationTime){var ae=Date.now(),be=!1;if(this.expirationTime>ae)be=!1;else if(O)if(this.expirationTime<O)be=!0;else{var Ee=this.expirationTime-O;Ee?this.expirationTime=ae+Math.max(Ee,3e4):be=!0}else be=!0;be?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},da.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},da.prototype.setFeatureState=function(M,O){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(M).length!==0){var Z=this.latestFeatureIndex.loadVTLayers();for(var ae in this.buckets)if(O.style.hasLayer(ae)){var be=this.buckets[ae],Ee=be.layers[0].sourceLayer||"_geojsonTileLayer",je=Z[Ee],Qe=M[Ee];if(je&&Qe&&Object.keys(Qe).length!==0){be.update(Qe,je,this.imageAtlas&&this.imageAtlas.patternPositions||{});var lt=O&&O.style&&O.style.getLayer(ae);lt&&(this.queryPadding=Math.max(this.queryPadding,lt.queryRadius(be)))}}}},da.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},da.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<G.now()},da.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},da.prototype.setHoldDuration=function(M){this.symbolFadeHoldUntil=G.now()+M},da.prototype.setDependencies=function(M,O){for(var Z={},ae=0,be=O;ae<be.length;ae+=1)Z[be[ae]]=!0;this.dependencies[M]=Z},da.prototype.hasDependency=function(M,O){for(var Z=0,ae=M;Z<ae.length;Z+=1){var be=ae[Z],Ee=this.dependencies[be];if(Ee){for(var je=0,Qe=O;je<Qe.length;je+=1)if(Ee[Qe[je]])return!0}}return!1};var yl=self.performance,ah=function(M){this._marks={start:[M.url,"start"].join("#"),end:[M.url,"end"].join("#"),measure:M.url.toString()},yl.mark(this._marks.start)};ah.prototype.finish=function(){yl.mark(this._marks.end);var M=yl.getEntriesByName(this._marks.measure);return M.length===0&&(yl.measure(this._marks.measure,this._marks.start,this._marks.end),M=yl.getEntriesByName(this._marks.measure),yl.clearMarks(this._marks.start),yl.clearMarks(this._marks.end),yl.clearMeasures(this._marks.measure)),M},l.Actor=ql,l.AlphaImage=Tl,l.CanonicalTileID=Ml,l.CollisionBoxArray=Ze,l.Color=hn,l.DEMData=il,l.DataConstantProperty=Mr,l.DictionaryCoder=Gu,l.EXTENT=Br,l.ErrorEvent=Ye,l.EvaluationParameters=ni,l.Event=Be,l.Evented=rt,l.FeatureIndex=al,l.FillBucket=As,l.FillExtrusionBucket=Ms,l.ImageAtlas=lu,l.ImagePosition=zu,l.LineBucket=no,l.LngLat=Li,l.LngLatBounds=na,l.MercatorCoordinate=Al,l.ONE_EM=Sa,l.OverscaledTileID=ra,l.Point=t,l.Point$1=t,l.Properties=Qi,l.Protobuf=Iu,l.RGBAImage=to,l.RequestManager=ie,l.RequestPerformance=ah,l.ResourceType=ot,l.SegmentVector=en,l.SourceFeatureState=Gl,l.StructArrayLayout1ui2=we,l.StructArrayLayout2f1f2i16=pe,l.StructArrayLayout2i4=Xe,l.StructArrayLayout3ui6=Ne,l.StructArrayLayout4i8=$e,l.SymbolBucket=di,l.Texture=kl,l.Tile=da,l.Transitionable=fa,l.Uniform1f=Hr,l.Uniform1i=Vr,l.Uniform2f=hr,l.Uniform3f=Ar,l.Uniform4f=Dr,l.UniformColor=zr,l.UniformMatrix4f=Zr,l.UnwrappedTileID=nh,l.ValidationError=ze,l.WritingMode=Po,l.ZoomHistory=as,l.add=function(M,O,Z){return M[0]=O[0]+Z[0],M[1]=O[1]+Z[1],M[2]=O[2]+Z[2],M},l.addDynamicAttributes=Cc,l.asyncAll=function(M,O,Z){if(!M.length)return Z(null,[]);var ae=M.length,be=new Array(M.length),Ee=null;M.forEach(function(je,Qe){O(je,function(lt,_t){lt&&(Ee=lt),be[Qe]=_t,--ae==0&&Z(Ee,be)})})},l.bezier=r,l.bindAll=g,l.browser=G,l.cacheEntryPossiblyAdded=function(M){++nt>le&&(M.getActor().send("enforceCacheSizeLimit",Re),nt=0)},l.clamp=a,l.clearTileCache=function(M){var O=self.caches.delete(Ce);M&&O.catch(M).then(function(){return M()})},l.clipLine=Nf,l.clone=function(M){var O=new Co(16);return O[0]=M[0],O[1]=M[1],O[2]=M[2],O[3]=M[3],O[4]=M[4],O[5]=M[5],O[6]=M[6],O[7]=M[7],O[8]=M[8],O[9]=M[9],O[10]=M[10],O[11]=M[11],O[12]=M[12],O[13]=M[13],O[14]=M[14],O[15]=M[15],O},l.clone$1=w,l.clone$2=function(M){var O=new Co(3);return O[0]=M[0],O[1]=M[1],O[2]=M[2],O},l.collisionCircleLayout=xp,l.config=V,l.create=function(){var M=new Co(16);return Co!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=0,M[12]=0,M[13]=0,M[14]=0),M[0]=1,M[5]=1,M[10]=1,M[15]=1,M},l.create$1=function(){var M=new Co(9);return Co!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[5]=0,M[6]=0,M[7]=0),M[0]=1,M[4]=1,M[8]=1,M},l.create$2=function(){var M=new Co(4);return Co!=Float32Array&&(M[1]=0,M[2]=0),M[0]=1,M[3]=1,M},l.createCommonjsModule=T,l.createExpression=vs,l.createLayout=fi,l.createStyleLayer=function(M){return M.type==="custom"?new Kp(M):new $p[M.type](M)},l.cross=function(M,O,Z){var ae=O[0],be=O[1],Ee=O[2],je=Z[0],Qe=Z[1],lt=Z[2];return M[0]=be*lt-Ee*Qe,M[1]=Ee*je-ae*lt,M[2]=ae*Qe-be*je,M},l.deepEqual=function M(O,Z){if(Array.isArray(O)){if(!Array.isArray(Z)||O.length!==Z.length)return!1;for(var ae=0;ae<O.length;ae++)if(!M(O[ae],Z[ae]))return!1;return!0}if(typeof O=="object"&&O!==null&&Z!==null){if(typeof Z!="object"||Object.keys(O).length!==Object.keys(Z).length)return!1;for(var be in O)if(!M(O[be],Z[be]))return!1;return!0}return O===Z},l.dot=function(M,O){return M[0]*O[0]+M[1]*O[1]+M[2]*O[2]},l.dot$1=function(M,O){return M[0]*O[0]+M[1]*O[1]+M[2]*O[2]+M[3]*O[3]},l.ease=n,l.emitValidationErrors=Ra,l.endsWith=y,l.enforceCacheSizeLimit=function(M){de(),Me&&Me.then(function(O){O.keys().then(function(Z){for(var ae=0;ae<Z.length-M;ae++)O.delete(Z[ae])})})},l.evaluateSizeForFeature=Of,l.evaluateSizeForZoom=If,l.evaluateVariableOffset=Vf,l.evented=Ma,l.extend=c,l.featureFilter=ws,l.filterObject=m,l.fromRotation=function(M,O){var Z=Math.sin(O),ae=Math.cos(O);return M[0]=ae,M[1]=Z,M[2]=0,M[3]=-Z,M[4]=ae,M[5]=0,M[6]=0,M[7]=0,M[8]=1,M},l.getAnchorAlignment=Mc,l.getAnchorJustification=Lc,l.getArrayBuffer=Lt,l.getImage=Rt,l.getJSON=function(M,O){return wt(c(M,{type:"json"}),O)},l.getRTLTextPluginStatus=Ba,l.getReferrer=kt,l.getVideo=function(M,O){var Z,ae,be=self.document.createElement("video");be.muted=!0,be.onloadstart=function(){O(null,be)};for(var Ee=0;Ee<M.length;Ee++){var je=self.document.createElement("source");Z=M[Ee],ae=void 0,(ae=self.document.createElement("a")).href=Z,ae.protocol===self.document.location.protocol&&ae.host===self.document.location.host||(be.crossOrigin="Anonymous"),je.src=M[Ee],be.appendChild(je)}return{cancel:function(){}}},l.identity=hc,l.invert=function(M,O){var Z=O[0],ae=O[1],be=O[2],Ee=O[3],je=O[4],Qe=O[5],lt=O[6],_t=O[7],Mt=O[8],Bt=O[9],qt=O[10],Vt=O[11],rn=O[12],xn=O[13],In=O[14],On=O[15],jn=Z*Qe-ae*je,Vn=Z*lt-be*je,Yn=Z*_t-Ee*je,Qn=ae*lt-be*Qe,tr=ae*_t-Ee*Qe,xr=be*_t-Ee*lt,pr=Mt*xn-Bt*rn,Tr=Mt*In-qt*rn,Er=Mt*On-Vt*rn,jr=Bt*In-qt*xn,Pr=Bt*On-Vt*xn,Nr=qt*On-Vt*In,Ir=jn*Nr-Vn*Pr+Yn*jr+Qn*Er-tr*Tr+xr*pr;return Ir?(Ir=1/Ir,M[0]=(Qe*Nr-lt*Pr+_t*jr)*Ir,M[1]=(be*Pr-ae*Nr-Ee*jr)*Ir,M[2]=(xn*xr-In*tr+On*Qn)*Ir,M[3]=(qt*tr-Bt*xr-Vt*Qn)*Ir,M[4]=(lt*Er-je*Nr-_t*Tr)*Ir,M[5]=(Z*Nr-be*Er+Ee*Tr)*Ir,M[6]=(In*Yn-rn*xr-On*Vn)*Ir,M[7]=(Mt*xr-qt*Yn+Vt*Vn)*Ir,M[8]=(je*Pr-Qe*Er+_t*pr)*Ir,M[9]=(ae*Er-Z*Pr-Ee*pr)*Ir,M[10]=(rn*tr-xn*Yn+On*jn)*Ir,M[11]=(Bt*Yn-Mt*tr-Vt*jn)*Ir,M[12]=(Qe*Tr-je*jr-lt*pr)*Ir,M[13]=(Z*jr-ae*Tr+be*pr)*Ir,M[14]=(xn*Vn-rn*Qn-In*jn)*Ir,M[15]=(Mt*Qn-Bt*Vn+qt*jn)*Ir,M):null},l.isChar=wr,l.isMapboxURL=se,l.keysDifference=function(M,O){var Z=[];for(var ae in M)ae in O||Z.push(ae);return Z},l.makeRequest=wt,l.mapObject=p,l.mercatorXfromLng=Qf,l.mercatorYfromLat=eh,l.mercatorZfromAltitude=th,l.mul=Rh,l.multiply=Kc,l.mvt=zl,l.normalize=function(M,O){var Z=O[0],ae=O[1],be=O[2],Ee=Z*Z+ae*ae+be*be;return Ee>0&&(Ee=1/Math.sqrt(Ee)),M[0]=O[0]*Ee,M[1]=O[1]*Ee,M[2]=O[2]*Ee,M},l.number=Sr,l.offscreenCanvasSupported=tt,l.ortho=function(M,O,Z,ae,be,Ee,je){var Qe=1/(O-Z),lt=1/(ae-be),_t=1/(Ee-je);return M[0]=-2*Qe,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=-2*lt,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=2*_t,M[11]=0,M[12]=(O+Z)*Qe,M[13]=(be+ae)*lt,M[14]=(je+Ee)*_t,M[15]=1,M},l.parseGlyphPBF=function(M){return new Iu(M).readFields(Cp,[])},l.pbf=Iu,l.performSymbolLayout=function(M,O,Z,ae,be,Ee,je){M.createArrays();var Qe=512*M.overscaling;M.tilePixelRatio=Br/Qe,M.compareText={},M.iconsNeedLinear=!1;var lt=M.layers[0].layout,_t=M.layers[0]._unevaluatedLayout._values,Mt={};if(M.textSizeData.kind==="composite"){var Bt=M.textSizeData,qt=Bt.minZoom,Vt=Bt.maxZoom;Mt.compositeTextSizes=[_t["text-size"].possiblyEvaluate(new ni(qt),je),_t["text-size"].possiblyEvaluate(new ni(Vt),je)]}if(M.iconSizeData.kind==="composite"){var rn=M.iconSizeData,xn=rn.minZoom,In=rn.maxZoom;Mt.compositeIconSizes=[_t["icon-size"].possiblyEvaluate(new ni(xn),je),_t["icon-size"].possiblyEvaluate(new ni(In),je)]}Mt.layoutTextSize=_t["text-size"].possiblyEvaluate(new ni(M.zoom+1),je),Mt.layoutIconSize=_t["icon-size"].possiblyEvaluate(new ni(M.zoom+1),je),Mt.textMaxSize=_t["text-size"].possiblyEvaluate(new ni(18));for(var On=lt.get("text-line-height")*Sa,jn=lt.get("text-rotation-alignment")==="map"&&lt.get("symbol-placement")!=="point",Vn=lt.get("text-keep-upright"),Yn=lt.get("text-size"),Qn=function(){var pr=xr[tr],Tr=lt.get("text-font").evaluate(pr,{},je).join(","),Er=Yn.evaluate(pr,{},je),jr=Mt.layoutTextSize.evaluate(pr,{},je),Pr=Mt.layoutIconSize.evaluate(pr,{},je),Nr={horizontal:{},vertical:void 0},Ir=pr.text,Cr=[0,0];if(Ir){var Jr=Ir.toString(),qr=lt.get("text-letter-spacing").evaluate(pr,{},je)*Sa,bi=function(Gr){for(var ti=0,ji=Gr;ti<ji.length;ti+=1)if(xi=ji[ti].charCodeAt(0),wr.Arabic(xi)||wr["Arabic Supplement"](xi)||wr["Arabic Extended-A"](xi)||wr["Arabic Presentation Forms-A"](xi)||wr["Arabic Presentation Forms-B"](xi))return!1;var xi;return!0}(Jr)?qr:0,Fr=lt.get("text-anchor").evaluate(pr,{},je),gi=lt.get("text-variable-anchor");if(!gi){var Ti=lt.get("text-radial-offset").evaluate(pr,{},je);Cr=Ti?Vf(Fr,[Ti*Sa,Ec]):lt.get("text-offset").evaluate(pr,{},je).map(function(Gr){return Gr*Sa})}var Mi=jn?"center":lt.get("text-justify").evaluate(pr,{},je),Ci=lt.get("symbol-placement"),_i=Ci==="point"?lt.get("text-max-width").evaluate(pr,{},je)*Sa:0,ia=function(){M.allowVerticalPlacement&&os(Jr)&&(Nr.vertical=Fu(Ir,O,Z,be,Tr,_i,On,Fr,"left",bi,Cr,Po.vertical,!0,Ci,jr,Er))};if(!jn&&gi){for(var Ii=Mi==="auto"?gi.map(function(Gr){return Lc(Gr)}):[Mi],ga=!1,Ea=0;Ea<Ii.length;Ea++){var _a=Ii[Ea];if(!Nr.horizontal[_a])if(ga)Nr.horizontal[_a]=Nr.horizontal[0];else{var Wa=Fu(Ir,O,Z,be,Tr,_i,On,"center",_a,bi,Cr,Po.horizontal,!1,Ci,jr,Er);Wa&&(Nr.horizontal[_a]=Wa,ga=Wa.positionedLines.length===1)}}ia()}else{Mi==="auto"&&(Mi=Lc(Fr));var wa=Fu(Ir,O,Z,be,Tr,_i,On,Fr,Mi,bi,Cr,Po.horizontal,!1,Ci,jr,Er);wa&&(Nr.horizontal[Mi]=wa),ia(),os(Jr)&&jn&&Vn&&(Nr.vertical=Fu(Ir,O,Z,be,Tr,_i,On,Fr,Mi,bi,Cr,Po.vertical,!1,Ci,jr,Er))}}var oa=void 0,Ta=!1;if(pr.icon&&pr.icon.name){var va=ae[pr.icon.name];va&&(oa=function(Gr,ti,ji){var xi=Mc(ji),zi=xi.horizontalAlign,Pi=xi.verticalAlign,ii=ti[0],Ui=ti[1],Ya=ii-Gr.displaySize[0]*zi,yo=Ya+Gr.displaySize[0],Ua=Ui-Gr.displaySize[1]*Pi;return{image:Gr,top:Ua,bottom:Ua+Gr.displaySize[1],left:Ya,right:yo}}(be[pr.icon.name],lt.get("icon-offset").evaluate(pr,{},je),lt.get("icon-anchor").evaluate(pr,{},je)),Ta=va.sdf,M.sdfIcons===void 0?M.sdfIcons=va.sdf:M.sdfIcons!==va.sdf&&S("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(va.pixelRatio!==M.pixelRatio||lt.get("icon-rotate").constantOr(1)!==0)&&(M.iconsNeedLinear=!0))}var sa=qf(Nr.horizontal)||Nr.vertical;M.iconsInText=!!sa&&sa.iconsInText,(sa||oa)&&function(Gr,ti,ji,xi,zi,Pi,ii,Ui,Ya,yo,Ua){var Ss=Pi.textMaxSize.evaluate(ti,{});Ss===void 0&&(Ss=ii);var ol,ma=Gr.layers[0].layout,Es=ma.get("icon-offset").evaluate(ti,{},Ua),us=qf(ji.horizontal),cs=24,Sl=ii/cs,Wu=Gr.tilePixelRatio*Sl,El=Gr.tilePixelRatio*Ss/cs,Yu=Gr.tilePixelRatio*Ui,fu=Gr.tilePixelRatio*ma.get("symbol-spacing"),zc=ma.get("text-padding")*Gr.tilePixelRatio,Xu=ma.get("icon-padding")*Gr.tilePixelRatio,Zl=ma.get("text-max-angle")/180*Math.PI,Ju=ma.get("text-rotation-alignment")==="map"&&ma.get("symbol-placement")!=="point",Ku=ma.get("icon-rotation-alignment")==="map"&&ma.get("symbol-placement")!=="point",hu=ma.get("symbol-placement"),Dc=fu/2,pu=ma.get("icon-text-fit");xi&&pu!=="none"&&(Gr.allowVerticalPlacement&&ji.vertical&&(ol=Pf(xi,ji.vertical,pu,ma.get("icon-text-fit-padding"),Es,Sl)),us&&(xi=Pf(xi,us,pu,ma.get("icon-text-fit-padding"),Es,Sl)));var Ll=function(ed,xu){xu.x<0||xu.x>=Br||xu.y<0||xu.y>=Br||function(qi,Ls,td,xl,Vc,ch,nc,Vs,rc,bu,ic,ac,Hc,fh,_u,hh,ph,dh,gh,vh,Oo,oc,mh,Hs,nd){var yh,Ol,Xl,Jl,Kl,$l=qi.addToLineVertexArray(Ls,td),xh=0,bh=0,_h=0,wh=0,qc=-1,Gc=-1,sl={},Th=Pn(""),Zc=0,Wc=0;if(Vs._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Zc=(yh=Vs.layout.get("text-offset").evaluate(Oo,{},Hs).map(function(Tu){return Tu*Sa}))[0],Wc=yh[1]):(Zc=Vs.layout.get("text-radial-offset").evaluate(Oo,{},Hs)*Sa,Wc=Ec),qi.allowVerticalPlacement&&xl.vertical){var kh=Vs.layout.get("text-rotate").evaluate(Oo,{},Hs)+90,rd=xl.vertical;Jl=new Vu(rc,Ls,bu,ic,ac,rd,Hc,fh,_u,kh),nc&&(Kl=new Vu(rc,Ls,bu,ic,ac,nc,ph,dh,_u,kh))}if(Vc){var Yc=Vs.layout.get("icon-rotate").evaluate(Oo,{}),Ah=Vs.layout.get("icon-text-fit")!=="none",Mh=jf(Vc,Yc,mh,Ah),Xc=nc?jf(nc,Yc,mh,Ah):void 0;Xl=new Vu(rc,Ls,bu,ic,ac,Vc,ph,dh,!1,Yc),xh=4*Mh.length;var Sh=qi.iconSizeData,wu=null;Sh.kind==="source"?(wu=[Us*Vs.layout.get("icon-size").evaluate(Oo,{})])[0]>ml&&S(qi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Sh.kind==="composite"&&((wu=[Us*oc.compositeIconSizes[0].evaluate(Oo,{},Hs),Us*oc.compositeIconSizes[1].evaluate(Oo,{},Hs)])[0]>ml||wu[1]>ml)&&S(qi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),qi.addSymbols(qi.icon,Mh,wu,vh,gh,Oo,!1,Ls,$l.lineStartIndex,$l.lineLength,-1,Hs),qc=qi.icon.placedSymbolArray.length-1,Xc&&(bh=4*Xc.length,qi.addSymbols(qi.icon,Xc,wu,vh,gh,Oo,Po.vertical,Ls,$l.lineStartIndex,$l.lineLength,-1,Hs),Gc=qi.icon.placedSymbolArray.length-1)}for(var Eh in xl.horizontal){var sc=xl.horizontal[Eh];if(!Ol){Th=Pn(sc.text);var id=Vs.layout.get("text-rotate").evaluate(Oo,{},Hs);Ol=new Vu(rc,Ls,bu,ic,ac,sc,Hc,fh,_u,id)}var Lh=sc.positionedLines.length===1;if(_h+=Hf(qi,Ls,sc,ch,Vs,_u,Oo,hh,$l,xl.vertical?Po.horizontal:Po.horizontalOnly,Lh?Object.keys(xl.horizontal):[Eh],sl,qc,oc,Hs),Lh)break}xl.vertical&&(wh+=Hf(qi,Ls,xl.vertical,ch,Vs,_u,Oo,hh,$l,Po.vertical,["vertical"],sl,Gc,oc,Hs));var ad=Ol?Ol.boxStartIndex:qi.collisionBoxArray.length,od=Ol?Ol.boxEndIndex:qi.collisionBoxArray.length,sd=Jl?Jl.boxStartIndex:qi.collisionBoxArray.length,ld=Jl?Jl.boxEndIndex:qi.collisionBoxArray.length,ud=Xl?Xl.boxStartIndex:qi.collisionBoxArray.length,cd=Xl?Xl.boxEndIndex:qi.collisionBoxArray.length,fd=Kl?Kl.boxStartIndex:qi.collisionBoxArray.length,hd=Kl?Kl.boxEndIndex:qi.collisionBoxArray.length,qs=-1,lc=function(Tu,Ph){return Tu&&Tu.circleDiameter?Math.max(Tu.circleDiameter,Ph):Ph};qs=lc(Ol,qs),qs=lc(Jl,qs),qs=lc(Xl,qs);var Ch=(qs=lc(Kl,qs))>-1?1:0;Ch&&(qs*=nd/Sa),qi.glyphOffsetArray.length>=di.MAX_GLYPHS&&S("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Oo.sortKey!==void 0&&qi.addToSortKeyRanges(qi.symbolInstances.length,Oo.sortKey),qi.symbolInstances.emplaceBack(Ls.x,Ls.y,sl.right>=0?sl.right:-1,sl.center>=0?sl.center:-1,sl.left>=0?sl.left:-1,sl.vertical||-1,qc,Gc,Th,ad,od,sd,ld,ud,cd,fd,hd,bu,_h,wh,xh,bh,Ch,0,Hc,Zc,Wc,qs)}(Gr,xu,ed,ji,xi,zi,ol,Gr.layers[0],Gr.collisionBoxArray,ti.index,ti.sourceLayerIndex,Gr.index,Wu,zc,Ju,Ya,Yu,Xu,Ku,Es,ti,Pi,yo,Ua,ii)};if(hu==="line")for(var Wl=0,$u=Nf(ti.geometry,0,0,Br,Br);Wl<$u.length;Wl+=1)for(var Qu=$u[Wl],Yl=0,ec=Fp(Qu,fu,Zl,ji.vertical||us,xi,cs,El,Gr.overscaling,Br);Yl<ec.length;Yl+=1){var tc=ec[Yl];us&&Up(Gr,us.text,Dc,tc)||Ll(Qu,tc)}else if(hu==="line-center")for(var du=0,gu=ti.geometry;du<gu.length;du+=1){var Cl=gu[du];if(Cl.length>1){var vu=Dp(Cl,Zl,ji.vertical||us,xi,cs,El);vu&&Ll(Cl,vu)}}else if(ti.type==="Polygon")for(var Pl=0,mu=xc(ti.geometry,0);Pl<mu.length;Pl+=1){var yu=mu[Pl],oh=Np(yu,16);Ll(yu[0],new Nl(oh.x,oh.y,0))}else if(ti.type==="LineString")for(var Fc=0,sh=ti.geometry;Fc<sh.length;Fc+=1){var Bc=sh[Fc];Ll(Bc,new Nl(Bc[0].x,Bc[0].y,0))}else if(ti.type==="Point")for(var Nc=0,lh=ti.geometry;Nc<lh.length;Nc+=1)for(var jc=0,uh=lh[Nc];jc<uh.length;jc+=1){var Uc=uh[jc];Ll([Uc],new Nl(Uc.x,Uc.y,0))}}(M,pr,Nr,oa,ae,Mt,jr,Pr,Cr,Ta,je)},tr=0,xr=M.features;tr<xr.length;tr+=1)Qn();Ee&&M.generateCollisionDebugBuffers()},l.perspective=function(M,O,Z,ae,be){var Ee,je=1/Math.tan(O/2);return M[0]=je/Z,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=je,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=-1,M[12]=0,M[13]=0,M[15]=0,be!=null&&be!==1/0?(Ee=1/(ae-be),M[10]=(be+ae)*Ee,M[14]=2*be*ae*Ee):(M[10]=-1,M[14]=-2*ae),M},l.pick=function(M,O){for(var Z={},ae=0;ae<O.length;ae++){var be=O[ae];be in M&&(Z[be]=M[be])}return Z},l.plugin=ca,l.polygonIntersectsPolygon=Ni,l.postMapLoadEvent=Ie,l.postTurnstileEvent=me,l.potpack=Mf,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=_r,l.registerForPluginStateChange=function(M){return M({pluginStatus:Ki,pluginURL:Fa}),Ma.on("pluginStateChange",M),M},l.rotate=function(M,O,Z){var ae=O[0],be=O[1],Ee=O[2],je=O[3],Qe=Math.sin(Z),lt=Math.cos(Z);return M[0]=ae*lt+Ee*Qe,M[1]=be*lt+je*Qe,M[2]=ae*-Qe+Ee*lt,M[3]=be*-Qe+je*lt,M},l.rotateX=function(M,O,Z){var ae=Math.sin(Z),be=Math.cos(Z),Ee=O[4],je=O[5],Qe=O[6],lt=O[7],_t=O[8],Mt=O[9],Bt=O[10],qt=O[11];return O!==M&&(M[0]=O[0],M[1]=O[1],M[2]=O[2],M[3]=O[3],M[12]=O[12],M[13]=O[13],M[14]=O[14],M[15]=O[15]),M[4]=Ee*be+_t*ae,M[5]=je*be+Mt*ae,M[6]=Qe*be+Bt*ae,M[7]=lt*be+qt*ae,M[8]=_t*be-Ee*ae,M[9]=Mt*be-je*ae,M[10]=Bt*be-Qe*ae,M[11]=qt*be-lt*ae,M},l.rotateZ=function(M,O,Z){var ae=Math.sin(Z),be=Math.cos(Z),Ee=O[0],je=O[1],Qe=O[2],lt=O[3],_t=O[4],Mt=O[5],Bt=O[6],qt=O[7];return O!==M&&(M[8]=O[8],M[9]=O[9],M[10]=O[10],M[11]=O[11],M[12]=O[12],M[13]=O[13],M[14]=O[14],M[15]=O[15]),M[0]=Ee*be+_t*ae,M[1]=je*be+Mt*ae,M[2]=Qe*be+Bt*ae,M[3]=lt*be+qt*ae,M[4]=_t*be-Ee*ae,M[5]=Mt*be-je*ae,M[6]=Bt*be-Qe*ae,M[7]=qt*be-lt*ae,M},l.scale=function(M,O,Z){var ae=Z[0],be=Z[1],Ee=Z[2];return M[0]=O[0]*ae,M[1]=O[1]*ae,M[2]=O[2]*ae,M[3]=O[3]*ae,M[4]=O[4]*be,M[5]=O[5]*be,M[6]=O[6]*be,M[7]=O[7]*be,M[8]=O[8]*Ee,M[9]=O[9]*Ee,M[10]=O[10]*Ee,M[11]=O[11]*Ee,M[12]=O[12],M[13]=O[13],M[14]=O[14],M[15]=O[15],M},l.scale$1=function(M,O,Z){return M[0]=O[0]*Z,M[1]=O[1]*Z,M[2]=O[2]*Z,M[3]=O[3]*Z,M},l.scale$2=function(M,O,Z){return M[0]=O[0]*Z,M[1]=O[1]*Z,M[2]=O[2]*Z,M},l.setCacheLimits=function(M,O){Re=M,le=O},l.setRTLTextPlugin=function(M,O,Z){if(Z===void 0&&(Z=!1),Ki===ba||Ki===So||Ki===Ha)throw new Error("setRTLTextPlugin cannot be called multiple times.");Fa=G.resolveURL(M),Ki=ba,Wo=O,ks(),Z||Qa()},l.sphericalToCartesian=function(M){var O=M[0],Z=M[1],ae=M[2];return Z+=90,Z*=Math.PI/180,ae*=Math.PI/180,{x:O*Math.cos(Z)*Math.sin(ae),y:O*Math.sin(Z)*Math.sin(ae),z:O*Math.cos(ae)}},l.sqrLen=Dh,l.styleSpec=Se,l.sub=zh,l.symbolSize=zp,l.transformMat3=function(M,O,Z){var ae=O[0],be=O[1],Ee=O[2];return M[0]=ae*Z[0]+be*Z[3]+Ee*Z[6],M[1]=ae*Z[1]+be*Z[4]+Ee*Z[7],M[2]=ae*Z[2]+be*Z[5]+Ee*Z[8],M},l.transformMat4=Eu,l.translate=function(M,O,Z){var ae,be,Ee,je,Qe,lt,_t,Mt,Bt,qt,Vt,rn,xn=Z[0],In=Z[1],On=Z[2];return O===M?(M[12]=O[0]*xn+O[4]*In+O[8]*On+O[12],M[13]=O[1]*xn+O[5]*In+O[9]*On+O[13],M[14]=O[2]*xn+O[6]*In+O[10]*On+O[14],M[15]=O[3]*xn+O[7]*In+O[11]*On+O[15]):(ae=O[0],be=O[1],Ee=O[2],je=O[3],Qe=O[4],lt=O[5],_t=O[6],Mt=O[7],Bt=O[8],qt=O[9],Vt=O[10],rn=O[11],M[0]=ae,M[1]=be,M[2]=Ee,M[3]=je,M[4]=Qe,M[5]=lt,M[6]=_t,M[7]=Mt,M[8]=Bt,M[9]=qt,M[10]=Vt,M[11]=rn,M[12]=ae*xn+Qe*In+Bt*On+O[12],M[13]=be*xn+lt*In+qt*On+O[13],M[14]=Ee*xn+_t*In+Vt*On+O[14],M[15]=je*xn+Mt*In+rn*On+O[15]),M},l.triggerPluginCompletionEvent=ri,l.uniqueId=f,l.validateCustomStyleLayer=function(M){var O=[],Z=M.id;return Z===void 0&&O.push({message:"layers."+Z+': missing required property "id"'}),M.render===void 0&&O.push({message:"layers."+Z+': missing required method "render"'}),M.renderingMode&&M.renderingMode!=="2d"&&M.renderingMode!=="3d"&&O.push({message:"layers."+Z+': property "renderingMode" must be either "2d" or "3d"'}),O},l.validateLight=Gi,l.validateStyle=Xi,l.values=function(M){var O=[];for(var Z in M)O.push(M[Z]);return O},l.vectorTile=zl,l.version=x,l.warnOnce=S,l.webpSupported=W,l.window=self,l.wrap=i}),A(0,function(l){function T(Ge){var We=typeof Ge;if(We==="number"||We==="boolean"||We==="string"||Ge==null)return JSON.stringify(Ge);if(Array.isArray(Ge)){for(var Be="[",Ye=0,rt=Ge;Ye<rt.length;Ye+=1)Be+=T(rt[Ye])+",";return Be+"]"}for(var Se=Object.keys(Ge).sort(),ze="{",Ke=0;Ke<Se.length;Ke++)ze+=JSON.stringify(Se[Ke])+":"+T(Ge[Se[Ke]])+",";return ze+"}"}function x(Ge){for(var We="",Be=0,Ye=l.refProperties;Be<Ye.length;Be+=1)We+="/"+T(Ge[Ye[Be]]);return We}var d=function(Ge){this.keyCache={},Ge&&this.replace(Ge)};d.prototype.replace=function(Ge){this._layerConfigs={},this._layers={},this.update(Ge,[])},d.prototype.update=function(Ge,We){for(var Be=this,Ye=0,rt=Ge;Ye<rt.length;Ye+=1){var Se=rt[Ye];this._layerConfigs[Se.id]=Se;var ze=this._layers[Se.id]=l.createStyleLayer(Se);ze._featureFilter=l.featureFilter(ze.filter),this.keyCache[Se.id]&&delete this.keyCache[Se.id]}for(var Ke=0,st=We;Ke<st.length;Ke+=1){var ct=st[Ke];delete this.keyCache[ct],delete this._layerConfigs[ct],delete this._layers[ct]}this.familiesBySource={};for(var Tt=0,Et=function(Ht,jt){for(var Nt={},Gt=0;Gt<Ht.length;Gt++){var un=jt&&jt[Ht[Gt].id]||x(Ht[Gt]);jt&&(jt[Ht[Gt].id]=un);var pn=Nt[un];pn||(pn=Nt[un]=[]),pn.push(Ht[Gt])}var Kt=[];for(var wn in Nt)Kt.push(Nt[wn]);return Kt}(l.values(this._layerConfigs),this.keyCache);Tt<Et.length;Tt+=1){var At=Et[Tt].map(function(Ht){return Be._layers[Ht.id]}),ht=At[0];if(ht.visibility!=="none"){var pt=ht.source||"",gt=this.familiesBySource[pt];gt||(gt=this.familiesBySource[pt]={});var Pt=ht.sourceLayer||"_geojsonTileLayer",Ot=gt[Pt];Ot||(Ot=gt[Pt]=[]),Ot.push(At)}}};var s=function(Ge){var We={},Be=[];for(var Ye in Ge){var rt=Ge[Ye],Se=We[Ye]={};for(var ze in rt){var Ke=rt[+ze];if(Ke&&Ke.bitmap.width!==0&&Ke.bitmap.height!==0){var st={x:0,y:0,w:Ke.bitmap.width+2,h:Ke.bitmap.height+2};Be.push(st),Se[ze]={rect:st,metrics:Ke.metrics}}}}var ct=l.potpack(Be),Tt=ct.w,Et=ct.h,At=new l.AlphaImage({width:Tt||1,height:Et||1});for(var ht in Ge){var pt=Ge[ht];for(var gt in pt){var Pt=pt[+gt];if(Pt&&Pt.bitmap.width!==0&&Pt.bitmap.height!==0){var Ot=We[ht][gt].rect;l.AlphaImage.copy(Pt.bitmap,At,{x:0,y:0},{x:Ot.x+1,y:Ot.y+1},Pt.bitmap)}}}this.image=At,this.positions=We};l.register("GlyphAtlas",s);var t=function(Ge){this.tileID=new l.OverscaledTileID(Ge.tileID.overscaledZ,Ge.tileID.wrap,Ge.tileID.canonical.z,Ge.tileID.canonical.x,Ge.tileID.canonical.y),this.uid=Ge.uid,this.zoom=Ge.zoom,this.pixelRatio=Ge.pixelRatio,this.tileSize=Ge.tileSize,this.source=Ge.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ge.showCollisionBoxes,this.collectResourceTiming=!!Ge.collectResourceTiming,this.returnDependencies=!!Ge.returnDependencies,this.promoteId=Ge.promoteId};function o(Ge,We,Be){for(var Ye=new l.EvaluationParameters(We),rt=0,Se=Ge;rt<Se.length;rt+=1)Se[rt].recalculate(Ye,Be)}function r(Ge,We){var Be=l.getArrayBuffer(Ge.request,function(Ye,rt,Se,ze){Ye?We(Ye):rt&&We(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(rt)),rawData:rt,cacheControl:Se,expires:ze})});return function(){Be.cancel(),We()}}t.prototype.parse=function(Ge,We,Be,Ye,rt){var Se=this;this.status="parsing",this.data=Ge,this.collisionBoxArray=new l.CollisionBoxArray;var ze=new l.DictionaryCoder(Object.keys(Ge.layers).sort()),Ke=new l.FeatureIndex(this.tileID,this.promoteId);Ke.bucketLayerIDs=[];var st,ct,Tt,Et,At={},ht={featureIndex:Ke,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Be},pt=We.familiesBySource[this.source];for(var gt in pt){var Pt=Ge.layers[gt];if(Pt){Pt.version===1&&l.warnOnce('Vector tile source "'+this.source+'" layer "'+gt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ot=ze.encode(gt),Ht=[],jt=0;jt<Pt.length;jt++){var Nt=Pt.feature(jt),Gt=Ke.getId(Nt,gt);Ht.push({feature:Nt,id:Gt,index:jt,sourceLayerIndex:Ot})}for(var un=0,pn=pt[gt];un<pn.length;un+=1){var Kt=pn[un],wn=Kt[0];wn.minzoom&&this.zoom<Math.floor(wn.minzoom)||wn.maxzoom&&this.zoom>=wn.maxzoom||wn.visibility!=="none"&&(o(Kt,this.zoom,Be),(At[wn.id]=wn.createBucket({index:Ke.bucketLayerIDs.length,layers:Kt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ot,sourceID:this.source})).populate(Ht,ht,this.tileID.canonical),Ke.bucketLayerIDs.push(Kt.map(function(sn){return sn.id})))}}}var Bn=l.mapObject(ht.glyphDependencies,function(sn){return Object.keys(sn).map(Number)});Object.keys(Bn).length?Ye.send("getGlyphs",{uid:this.uid,stacks:Bn},function(sn,hn){st||(st=sn,ct=hn,dn.call(Se))}):ct={};var vn=Object.keys(ht.iconDependencies);vn.length?Ye.send("getImages",{icons:vn,source:this.source,tileID:this.tileID,type:"icons"},function(sn,hn){st||(st=sn,Tt=hn,dn.call(Se))}):Tt={};var cn=Object.keys(ht.patternDependencies);function dn(){if(st)return rt(st);if(ct&&Tt&&Et){var sn=new s(ct),hn=new l.ImageAtlas(Tt,Et);for(var En in At){var Mn=At[En];Mn instanceof l.SymbolBucket?(o(Mn.layers,this.zoom,Be),l.performSymbolLayout(Mn,ct,sn.positions,Tt,hn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Mn.hasPattern&&(Mn instanceof l.LineBucket||Mn instanceof l.FillBucket||Mn instanceof l.FillExtrusionBucket)&&(o(Mn.layers,this.zoom,Be),Mn.addFeatures(ht,this.tileID.canonical,hn.patternPositions))}this.status="done",rt(null,{buckets:l.values(At).filter(function(Rn){return!Rn.isEmpty()}),featureIndex:Ke,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:sn.image,imageAtlas:hn,glyphMap:this.returnDependencies?ct:null,iconMap:this.returnDependencies?Tt:null,glyphPositions:this.returnDependencies?sn.positions:null})}}cn.length?Ye.send("getImages",{icons:cn,source:this.source,tileID:this.tileID,type:"patterns"},function(sn,hn){st||(st=sn,Et=hn,dn.call(Se))}):Et={},dn.call(this)};var n=function(Ge,We,Be,Ye){this.actor=Ge,this.layerIndex=We,this.availableImages=Be,this.loadVectorData=Ye||r,this.loading={},this.loaded={}};n.prototype.loadTile=function(Ge,We){var Be=this,Ye=Ge.uid;this.loading||(this.loading={});var rt=!!(Ge&&Ge.request&&Ge.request.collectResourceTiming)&&new l.RequestPerformance(Ge.request),Se=this.loading[Ye]=new t(Ge);Se.abort=this.loadVectorData(Ge,function(ze,Ke){if(delete Be.loading[Ye],ze||!Ke)return Se.status="done",Be.loaded[Ye]=Se,We(ze);var st=Ke.rawData,ct={};Ke.expires&&(ct.expires=Ke.expires),Ke.cacheControl&&(ct.cacheControl=Ke.cacheControl);var Tt={};if(rt){var Et=rt.finish();Et&&(Tt.resourceTiming=JSON.parse(JSON.stringify(Et)))}Se.vectorTile=Ke.vectorTile,Se.parse(Ke.vectorTile,Be.layerIndex,Be.availableImages,Be.actor,function(At,ht){if(At||!ht)return We(At);We(null,l.extend({rawTileData:st.slice(0)},ht,ct,Tt))}),Be.loaded=Be.loaded||{},Be.loaded[Ye]=Se})},n.prototype.reloadTile=function(Ge,We){var Be=this,Ye=this.loaded,rt=Ge.uid,Se=this;if(Ye&&Ye[rt]){var ze=Ye[rt];ze.showCollisionBoxes=Ge.showCollisionBoxes;var Ke=function(st,ct){var Tt=ze.reloadCallback;Tt&&(delete ze.reloadCallback,ze.parse(ze.vectorTile,Se.layerIndex,Be.availableImages,Se.actor,Tt)),We(st,ct)};ze.status==="parsing"?ze.reloadCallback=Ke:ze.status==="done"&&(ze.vectorTile?ze.parse(ze.vectorTile,this.layerIndex,this.availableImages,this.actor,Ke):Ke())}},n.prototype.abortTile=function(Ge,We){var Be=this.loading,Ye=Ge.uid;Be&&Be[Ye]&&Be[Ye].abort&&(Be[Ye].abort(),delete Be[Ye]),We()},n.prototype.removeTile=function(Ge,We){var Be=this.loaded,Ye=Ge.uid;Be&&Be[Ye]&&delete Be[Ye],We()};var a=l.window.ImageBitmap,i=function(){this.loaded={}};i.prototype.loadTile=function(Ge,We){var Be=Ge.uid,Ye=Ge.encoding,rt=Ge.rawImageData,Se=a&&rt instanceof a?this.getImageData(rt):rt,ze=new l.DEMData(Be,Se,Ye);this.loaded=this.loaded||{},this.loaded[Be]=ze,We(null,ze)},i.prototype.getImageData=function(Ge){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ge.width,Ge.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ge.width,this.offscreenCanvas.height=Ge.height,this.offscreenCanvasContext.drawImage(Ge,0,0,Ge.width,Ge.height);var We=this.offscreenCanvasContext.getImageData(-1,-1,Ge.width+2,Ge.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:We.width,height:We.height},We.data)},i.prototype.removeTile=function(Ge){var We=this.loaded,Be=Ge.uid;We&&We[Be]&&delete We[Be]};var c=function Ge(We,Be){var Ye,rt=We&&We.type;if(rt==="FeatureCollection")for(Ye=0;Ye<We.features.length;Ye++)Ge(We.features[Ye],Be);else if(rt==="GeometryCollection")for(Ye=0;Ye<We.geometries.length;Ye++)Ge(We.geometries[Ye],Be);else if(rt==="Feature")Ge(We.geometry,Be);else if(rt==="Polygon")h(We.coordinates,Be);else if(rt==="MultiPolygon")for(Ye=0;Ye<We.coordinates.length;Ye++)h(We.coordinates[Ye],Be);return We};function h(Ge,We){if(Ge.length!==0){f(Ge[0],We);for(var Be=1;Be<Ge.length;Be++)f(Ge[Be],!We)}}function f(Ge,We){for(var Be=0,Ye=0,rt=Ge.length,Se=rt-1;Ye<rt;Se=Ye++)Be+=(Ge[Ye][0]-Ge[Se][0])*(Ge[Se][1]+Ge[Ye][1]);Be>=0!=!!We&&Ge.reverse()}var b=l.vectorTile.VectorTileFeature.prototype.toGeoJSON,v=function(Ge){this._feature=Ge,this.extent=l.EXTENT,this.type=Ge.type,this.properties=Ge.tags,"id"in Ge&&!isNaN(Ge.id)&&(this.id=parseInt(Ge.id,10))};v.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Ge=[],We=0,Be=this._feature.geometry;We<Be.length;We+=1){var Ye=Be[We];Ge.push([new l.Point$1(Ye[0],Ye[1])])}return Ge}for(var rt=[],Se=0,ze=this._feature.geometry;Se<ze.length;Se+=1){for(var Ke=[],st=0,ct=ze[Se];st<ct.length;st+=1){var Tt=ct[st];Ke.push(new l.Point$1(Tt[0],Tt[1]))}rt.push(Ke)}return rt},v.prototype.toGeoJSON=function(Ge,We,Be){return b.call(this,Ge,We,Be)};var g=function(Ge){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=Ge.length,this._features=Ge};g.prototype.feature=function(Ge){return new v(this._features[Ge])};var y=l.vectorTile.VectorTileFeature,p=m;function m(Ge,We){this.options=We||{},this.features=Ge,this.length=Ge.length}function w(Ge,We){this.id=typeof Ge.id=="number"?Ge.id:void 0,this.type=Ge.type,this.rawGeometry=Ge.type===1?[Ge.geometry]:Ge.geometry,this.properties=Ge.tags,this.extent=We||4096}m.prototype.feature=function(Ge){return new w(this.features[Ge],this.options.extent)},w.prototype.loadGeometry=function(){var Ge=this.rawGeometry;this.geometry=[];for(var We=0;We<Ge.length;We++){for(var Be=Ge[We],Ye=[],rt=0;rt<Be.length;rt++)Ye.push(new l.Point$1(Be[rt][0],Be[rt][1]));this.geometry.push(Ye)}return this.geometry},w.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ge=this.geometry,We=1/0,Be=-1/0,Ye=1/0,rt=-1/0,Se=0;Se<Ge.length;Se++)for(var ze=Ge[Se],Ke=0;Ke<ze.length;Ke++){var st=ze[Ke];We=Math.min(We,st.x),Be=Math.max(Be,st.x),Ye=Math.min(Ye,st.y),rt=Math.max(rt,st.y)}return[We,Ye,Be,rt]},w.prototype.toGeoJSON=y.prototype.toGeoJSON;var u=L,S=L,_=function(Ge,We){We=We||{};var Be={};for(var Ye in Ge)Be[Ye]=new p(Ge[Ye].features,We),Be[Ye].name=Ye,Be[Ye].version=We.version,Be[Ye].extent=We.extent;return L({layers:Be})},E=p;function L(Ge){var We=new l.pbf;return function(Be,Ye){for(var rt in Be.layers)Ye.writeMessage(3,C,Be.layers[rt])}(Ge,We),We.finish()}function C(Ge,We){var Be;We.writeVarintField(15,Ge.version||1),We.writeStringField(1,Ge.name||""),We.writeVarintField(5,Ge.extent||4096);var Ye={keys:[],values:[],keycache:{},valuecache:{}};for(Be=0;Be<Ge.length;Be++)Ye.feature=Ge.feature(Be),We.writeMessage(2,P,Ye);var rt=Ye.keys;for(Be=0;Be<rt.length;Be++)We.writeStringField(3,rt[Be]);var Se=Ye.values;for(Be=0;Be<Se.length;Be++)We.writeMessage(4,F,Se[Be])}function P(Ge,We){var Be=Ge.feature;Be.id!==void 0&&We.writeVarintField(1,Be.id),We.writeMessage(2,I,Ge),We.writeVarintField(3,Be.type),We.writeMessage(4,H,Be)}function I(Ge,We){var Be=Ge.feature,Ye=Ge.keys,rt=Ge.values,Se=Ge.keycache,ze=Ge.valuecache;for(var Ke in Be.properties){var st=Se[Ke];st===void 0&&(Ye.push(Ke),st=Ye.length-1,Se[Ke]=st),We.writeVarint(st);var ct=Be.properties[Ke],Tt=typeof ct;Tt!=="string"&&Tt!=="boolean"&&Tt!=="number"&&(ct=JSON.stringify(ct));var Et=Tt+":"+ct,At=ze[Et];At===void 0&&(rt.push(ct),At=rt.length-1,ze[Et]=At),We.writeVarint(At)}}function U(Ge,We){return(We<<3)+(7&Ge)}function z(Ge){return Ge<<1^Ge>>31}function H(Ge,We){for(var Be=Ge.loadGeometry(),Ye=Ge.type,rt=0,Se=0,ze=Be.length,Ke=0;Ke<ze;Ke++){var st=Be[Ke],ct=1;Ye===1&&(ct=st.length),We.writeVarint(U(1,ct));for(var Tt=Ye===3?st.length-1:st.length,Et=0;Et<Tt;Et++){Et===1&&Ye!==1&&We.writeVarint(U(2,Tt-1));var At=st[Et].x-rt,ht=st[Et].y-Se;We.writeVarint(z(At)),We.writeVarint(z(ht)),rt+=At,Se+=ht}Ye===3&&We.writeVarint(U(7,1))}}function F(Ge,We){var Be=typeof Ge;Be==="string"?We.writeStringField(1,Ge):Be==="boolean"?We.writeBooleanField(7,Ge):Be==="number"&&(Ge%1!=0?We.writeDoubleField(3,Ge):Ge<0?We.writeSVarintField(6,Ge):We.writeVarintField(5,Ge))}function N(Ge,We,Be,Ye,rt,Se){if(!(rt-Ye<=Be)){var ze=Ye+rt>>1;B(Ge,We,ze,Ye,rt,Se%2),N(Ge,We,Be,Ye,ze-1,Se+1),N(Ge,We,Be,ze+1,rt,Se+1)}}function B(Ge,We,Be,Ye,rt,Se){for(;rt>Ye;){if(rt-Ye>600){var ze=rt-Ye+1,Ke=Be-Ye+1,st=Math.log(ze),ct=.5*Math.exp(2*st/3),Tt=.5*Math.sqrt(st*ct*(ze-ct)/ze)*(Ke-ze/2<0?-1:1);B(Ge,We,Be,Math.max(Ye,Math.floor(Be-Ke*ct/ze+Tt)),Math.min(rt,Math.floor(Be+(ze-Ke)*ct/ze+Tt)),Se)}var Et=We[2*Be+Se],At=Ye,ht=rt;for(j(Ge,We,Ye,Be),We[2*rt+Se]>Et&&j(Ge,We,Ye,rt);At<ht;){for(j(Ge,We,At,ht),At++,ht--;We[2*At+Se]<Et;)At++;for(;We[2*ht+Se]>Et;)ht--}We[2*Ye+Se]===Et?j(Ge,We,Ye,ht):j(Ge,We,++ht,rt),ht<=Be&&(Ye=ht+1),Be<=ht&&(rt=ht-1)}}function j(Ge,We,Be,Ye){K(Ge,Be,Ye),K(We,2*Be,2*Ye),K(We,2*Be+1,2*Ye+1)}function K(Ge,We,Be){var Ye=Ge[We];Ge[We]=Ge[Be],Ge[Be]=Ye}function G(Ge,We,Be,Ye){var rt=Ge-Be,Se=We-Ye;return rt*rt+Se*Se}u.fromVectorTileJs=S,u.fromGeojsonVt=_,u.GeoJSONWrapper=E;var V=function(Ge){return Ge[0]},W=function(Ge){return Ge[1]},J=function(Ge,We,Be,Ye,rt){We===void 0&&(We=V),Be===void 0&&(Be=W),Ye===void 0&&(Ye=64),rt===void 0&&(rt=Float64Array),this.nodeSize=Ye,this.points=Ge;for(var Se=Ge.length<65536?Uint16Array:Uint32Array,ze=this.ids=new Se(Ge.length),Ke=this.coords=new rt(2*Ge.length),st=0;st<Ge.length;st++)ze[st]=st,Ke[2*st]=We(Ge[st]),Ke[2*st+1]=Be(Ge[st]);N(ze,Ke,Ye,0,ze.length-1,0)};J.prototype.range=function(Ge,We,Be,Ye){return function(rt,Se,ze,Ke,st,ct,Tt){for(var Et,At,ht=[0,rt.length-1,0],pt=[];ht.length;){var gt=ht.pop(),Pt=ht.pop(),Ot=ht.pop();if(Pt-Ot<=Tt)for(var Ht=Ot;Ht<=Pt;Ht++)Et=Se[2*Ht],At=Se[2*Ht+1],Et>=ze&&Et<=st&&At>=Ke&&At<=ct&&pt.push(rt[Ht]);else{var jt=Math.floor((Ot+Pt)/2);Et=Se[2*jt],At=Se[2*jt+1],Et>=ze&&Et<=st&&At>=Ke&&At<=ct&&pt.push(rt[jt]);var Nt=(gt+1)%2;(gt===0?ze<=Et:Ke<=At)&&(ht.push(Ot),ht.push(jt-1),ht.push(Nt)),(gt===0?st>=Et:ct>=At)&&(ht.push(jt+1),ht.push(Pt),ht.push(Nt))}}return pt}(this.ids,this.coords,Ge,We,Be,Ye,this.nodeSize)},J.prototype.within=function(Ge,We,Be){return function(Ye,rt,Se,ze,Ke,st){for(var ct=[0,Ye.length-1,0],Tt=[],Et=Ke*Ke;ct.length;){var At=ct.pop(),ht=ct.pop(),pt=ct.pop();if(ht-pt<=st)for(var gt=pt;gt<=ht;gt++)G(rt[2*gt],rt[2*gt+1],Se,ze)<=Et&&Tt.push(Ye[gt]);else{var Pt=Math.floor((pt+ht)/2),Ot=rt[2*Pt],Ht=rt[2*Pt+1];G(Ot,Ht,Se,ze)<=Et&&Tt.push(Ye[Pt]);var jt=(At+1)%2;(At===0?Se-Ke<=Ot:ze-Ke<=Ht)&&(ct.push(pt),ct.push(Pt-1),ct.push(jt)),(At===0?Se+Ke>=Ot:ze+Ke>=Ht)&&(ct.push(Pt+1),ct.push(ht),ct.push(jt))}}return Tt}(this.ids,this.coords,Ge,We,Be,this.nodeSize)};var X={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ge){return Ge}},ee=function(Ge){this.options=he(Object.create(X),Ge),this.trees=new Array(this.options.maxZoom+1)};function re(Ge,We,Be,Ye,rt){return{x:Ge,y:We,zoom:1/0,id:Be,parentId:-1,numPoints:Ye,properties:rt}}function ie(Ge,We){var Be=Ge.geometry.coordinates,Ye=Be[0],rt=Be[1];return{x:ye(Ye),y:ge(rt),zoom:1/0,index:We,parentId:-1}}function se(Ge){return{type:"Feature",id:Ge.id,properties:fe(Ge),geometry:{type:"Point",coordinates:[(Ye=Ge.x,360*(Ye-.5)),(We=Ge.y,Be=(180-360*We)*Math.PI/180,360*Math.atan(Math.exp(Be))/Math.PI-90)]}};var We,Be,Ye}function fe(Ge){var We=Ge.numPoints,Be=We>=1e4?Math.round(We/1e3)+"k":We>=1e3?Math.round(We/100)/10+"k":We;return he(he({},Ge.properties),{cluster:!0,cluster_id:Ge.id,point_count:We,point_count_abbreviated:Be})}function ye(Ge){return Ge/360+.5}function ge(Ge){var We=Math.sin(Ge*Math.PI/180),Be=.5-.25*Math.log((1+We)/(1-We))/Math.PI;return Be<0?0:Be>1?1:Be}function he(Ge,We){for(var Be in We)Ge[Be]=We[Be];return Ge}function ve(Ge){return Ge.x}function Oe(Ge){return Ge.y}function xe(Ge,We,Be,Ye){for(var rt,Se=Ye,ze=Be-We>>1,Ke=Be-We,st=Ge[We],ct=Ge[We+1],Tt=Ge[Be],Et=Ge[Be+1],At=We+3;At<Be;At+=3){var ht=ke(Ge[At],Ge[At+1],st,ct,Tt,Et);if(ht>Se)rt=At,Se=ht;else if(ht===Se){var pt=Math.abs(At-ze);pt<Ke&&(rt=At,Ke=pt)}}Se>Ye&&(rt-We>3&&xe(Ge,We,rt,Ye),Ge[rt+2]=Se,Be-rt>3&&xe(Ge,rt,Be,Ye))}function ke(Ge,We,Be,Ye,rt,Se){var ze=rt-Be,Ke=Se-Ye;if(ze!==0||Ke!==0){var st=((Ge-Be)*ze+(We-Ye)*Ke)/(ze*ze+Ke*Ke);st>1?(Be=rt,Ye=Se):st>0&&(Be+=ze*st,Ye+=Ke*st)}return(ze=Ge-Be)*ze+(Ke=We-Ye)*Ke}function Me(Ge,We,Be,Ye){var rt={id:Ge===void 0?null:Ge,type:We,geometry:Be,tags:Ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Se){var ze=Se.geometry,Ke=Se.type;if(Ke==="Point"||Ke==="MultiPoint"||Ke==="LineString")Te(Se,ze);else if(Ke==="Polygon"||Ke==="MultiLineString")for(var st=0;st<ze.length;st++)Te(Se,ze[st]);else if(Ke==="MultiPolygon")for(st=0;st<ze.length;st++)for(var ct=0;ct<ze[st].length;ct++)Te(Se,ze[st][ct])}(rt),rt}function Te(Ge,We){for(var Be=0;Be<We.length;Be+=3)Ge.minX=Math.min(Ge.minX,We[Be]),Ge.minY=Math.min(Ge.minY,We[Be+1]),Ge.maxX=Math.max(Ge.maxX,We[Be]),Ge.maxY=Math.max(Ge.maxY,We[Be+1])}function Q(Ge,We,Be,Ye){if(We.geometry){var rt=We.geometry.coordinates,Se=We.geometry.type,ze=Math.pow(Be.tolerance/((1<<Be.maxZoom)*Be.extent),2),Ke=[],st=We.id;if(Be.promoteId?st=We.properties[Be.promoteId]:Be.generateId&&(st=Ye||0),Se==="Point")oe(rt,Ke);else if(Se==="MultiPoint")for(var ct=0;ct<rt.length;ct++)oe(rt[ct],Ke);else if(Se==="LineString")ce(rt,Ke,ze,!1);else if(Se==="MultiLineString"){if(Be.lineMetrics){for(ct=0;ct<rt.length;ct++)Ke=[],ce(rt[ct],Ke,ze,!1),Ge.push(Me(st,"LineString",Ke,We.properties));return}me(rt,Ke,ze,!1)}else if(Se==="Polygon")me(rt,Ke,ze,!0);else{if(Se!=="MultiPolygon"){if(Se==="GeometryCollection"){for(ct=0;ct<We.geometry.geometries.length;ct++)Q(Ge,{id:st,geometry:We.geometry.geometries[ct],properties:We.properties},Be,Ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ct=0;ct<rt.length;ct++){var Tt=[];me(rt[ct],Tt,ze,!0),Ke.push(Tt)}}Ge.push(Me(st,Se,Ke,We.properties))}}function oe(Ge,We){We.push(Ae(Ge[0])),We.push(Ie(Ge[1])),We.push(0)}function ce(Ge,We,Be,Ye){for(var rt,Se,ze=0,Ke=0;Ke<Ge.length;Ke++){var st=Ae(Ge[Ke][0]),ct=Ie(Ge[Ke][1]);We.push(st),We.push(ct),We.push(0),Ke>0&&(ze+=Ye?(rt*ct-st*Se)/2:Math.sqrt(Math.pow(st-rt,2)+Math.pow(ct-Se,2))),rt=st,Se=ct}var Tt=We.length-3;We[2]=1,xe(We,0,Tt,Be),We[Tt+2]=1,We.size=Math.abs(ze),We.start=0,We.end=We.size}function me(Ge,We,Be,Ye){for(var rt=0;rt<Ge.length;rt++){var Se=[];ce(Ge[rt],Se,Be,Ye),We.push(Se)}}function Ae(Ge){return Ge/360+.5}function Ie(Ge){var We=Math.sin(Ge*Math.PI/180),Be=.5-.25*Math.log((1+We)/(1-We))/Math.PI;return Be<0?0:Be>1?1:Be}function Ce(Ge,We,Be,Ye,rt,Se,ze,Ke){if(Ye/=We,Se>=(Be/=We)&&ze<Ye)return Ge;if(ze<Be||Se>=Ye)return null;for(var st=[],ct=0;ct<Ge.length;ct++){var Tt=Ge[ct],Et=Tt.geometry,At=Tt.type,ht=rt===0?Tt.minX:Tt.minY,pt=rt===0?Tt.maxX:Tt.maxY;if(ht>=Be&&pt<Ye)st.push(Tt);else if(!(pt<Be||ht>=Ye)){var gt=[];if(At==="Point"||At==="MultiPoint")Re(Et,gt,Be,Ye,rt);else if(At==="LineString")le(Et,gt,Be,Ye,rt,!1,Ke.lineMetrics);else if(At==="MultiLineString")_e(Et,gt,Be,Ye,rt,!1);else if(At==="Polygon")_e(Et,gt,Be,Ye,rt,!0);else if(At==="MultiPolygon")for(var Pt=0;Pt<Et.length;Pt++){var Ot=[];_e(Et[Pt],Ot,Be,Ye,rt,!0),Ot.length&&gt.push(Ot)}if(gt.length){if(Ke.lineMetrics&&At==="LineString"){for(Pt=0;Pt<gt.length;Pt++)st.push(Me(Tt.id,At,gt[Pt],Tt.tags));continue}At!=="LineString"&&At!=="MultiLineString"||(gt.length===1?(At="LineString",gt=gt[0]):At="MultiLineString"),At!=="Point"&&At!=="MultiPoint"||(At=gt.length===3?"Point":"MultiPoint"),st.push(Me(Tt.id,At,gt,Tt.tags))}}}return st.length?st:null}function Re(Ge,We,Be,Ye,rt){for(var Se=0;Se<Ge.length;Se+=3){var ze=Ge[Se+rt];ze>=Be&&ze<=Ye&&(We.push(Ge[Se]),We.push(Ge[Se+1]),We.push(Ge[Se+2]))}}function le(Ge,We,Be,Ye,rt,Se,ze){for(var Ke,st,ct=de(Ge),Tt=rt===0?Ve:He,Et=Ge.start,At=0;At<Ge.length-3;At+=3){var ht=Ge[At],pt=Ge[At+1],gt=Ge[At+2],Pt=Ge[At+3],Ot=Ge[At+4],Ht=rt===0?ht:pt,jt=rt===0?Pt:Ot,Nt=!1;ze&&(Ke=Math.sqrt(Math.pow(ht-Pt,2)+Math.pow(pt-Ot,2))),Ht<Be?jt>Be&&(st=Tt(ct,ht,pt,Pt,Ot,Be),ze&&(ct.start=Et+Ke*st)):Ht>Ye?jt<Ye&&(st=Tt(ct,ht,pt,Pt,Ot,Ye),ze&&(ct.start=Et+Ke*st)):Fe(ct,ht,pt,gt),jt<Be&&Ht>=Be&&(st=Tt(ct,ht,pt,Pt,Ot,Be),Nt=!0),jt>Ye&&Ht<=Ye&&(st=Tt(ct,ht,pt,Pt,Ot,Ye),Nt=!0),!Se&&Nt&&(ze&&(ct.end=Et+Ke*st),We.push(ct),ct=de(Ge)),ze&&(Et+=Ke)}var Gt=Ge.length-3;ht=Ge[Gt],pt=Ge[Gt+1],gt=Ge[Gt+2],(Ht=rt===0?ht:pt)>=Be&&Ht<=Ye&&Fe(ct,ht,pt,gt),Gt=ct.length-3,Se&&Gt>=3&&(ct[Gt]!==ct[0]||ct[Gt+1]!==ct[1])&&Fe(ct,ct[0],ct[1],ct[2]),ct.length&&We.push(ct)}function de(Ge){var We=[];return We.size=Ge.size,We.start=Ge.start,We.end=Ge.end,We}function _e(Ge,We,Be,Ye,rt,Se){for(var ze=0;ze<Ge.length;ze++)le(Ge[ze],We,Be,Ye,rt,Se,!1)}function Fe(Ge,We,Be,Ye){Ge.push(We),Ge.push(Be),Ge.push(Ye)}function Ve(Ge,We,Be,Ye,rt,Se){var ze=(Se-We)/(Ye-We);return Ge.push(Se),Ge.push(Be+(rt-Be)*ze),Ge.push(1),ze}function He(Ge,We,Be,Ye,rt,Se){var ze=(Se-Be)/(rt-Be);return Ge.push(We+(Ye-We)*ze),Ge.push(Se),Ge.push(1),ze}function nt(Ge,We){for(var Be=[],Ye=0;Ye<Ge.length;Ye++){var rt,Se=Ge[Ye],ze=Se.type;if(ze==="Point"||ze==="MultiPoint"||ze==="LineString")rt=tt(Se.geometry,We);else if(ze==="MultiLineString"||ze==="Polygon"){rt=[];for(var Ke=0;Ke<Se.geometry.length;Ke++)rt.push(tt(Se.geometry[Ke],We))}else if(ze==="MultiPolygon")for(rt=[],Ke=0;Ke<Se.geometry.length;Ke++){for(var st=[],ct=0;ct<Se.geometry[Ke].length;ct++)st.push(tt(Se.geometry[Ke][ct],We));rt.push(st)}Be.push(Me(Se.id,ze,rt,Se.tags))}return Be}function tt(Ge,We){var Be=[];Be.size=Ge.size,Ge.start!==void 0&&(Be.start=Ge.start,Be.end=Ge.end);for(var Ye=0;Ye<Ge.length;Ye+=3)Be.push(Ge[Ye]+We,Ge[Ye+1],Ge[Ye+2]);return Be}function ot(Ge,We){if(Ge.transformed)return Ge;var Be,Ye,rt,Se=1<<Ge.z,ze=Ge.x,Ke=Ge.y;for(Be=0;Be<Ge.features.length;Be++){var st=Ge.features[Be],ct=st.geometry,Tt=st.type;if(st.geometry=[],Tt===1)for(Ye=0;Ye<ct.length;Ye+=2)st.geometry.push(dt(ct[Ye],ct[Ye+1],We,Se,ze,Ke));else for(Ye=0;Ye<ct.length;Ye++){var Et=[];for(rt=0;rt<ct[Ye].length;rt+=2)Et.push(dt(ct[Ye][rt],ct[Ye][rt+1],We,Se,ze,Ke));st.geometry.push(Et)}}return Ge.transformed=!0,Ge}function dt(Ge,We,Be,Ye,rt,Se){return[Math.round(Be*(Ge*Ye-rt)),Math.round(Be*(We*Ye-Se))]}function kt(Ge,We,Be,Ye,rt){for(var Se=We===rt.maxZoom?0:rt.tolerance/((1<<We)*rt.extent),ze={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Be,y:Ye,z:We,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ke=0;Ke<Ge.length;Ke++){ze.numFeatures++,mt(ze,Ge[Ke],Se,rt);var st=Ge[Ke].minX,ct=Ge[Ke].minY,Tt=Ge[Ke].maxX,Et=Ge[Ke].maxY;st<ze.minX&&(ze.minX=st),ct<ze.minY&&(ze.minY=ct),Tt>ze.maxX&&(ze.maxX=Tt),Et>ze.maxY&&(ze.maxY=Et)}return ze}function mt(Ge,We,Be,Ye){var rt=We.geometry,Se=We.type,ze=[];if(Se==="Point"||Se==="MultiPoint")for(var Ke=0;Ke<rt.length;Ke+=3)ze.push(rt[Ke]),ze.push(rt[Ke+1]),Ge.numPoints++,Ge.numSimplified++;else if(Se==="LineString")wt(ze,rt,Ge,Be,!1,!1);else if(Se==="MultiLineString"||Se==="Polygon")for(Ke=0;Ke<rt.length;Ke++)wt(ze,rt[Ke],Ge,Be,Se==="Polygon",Ke===0);else if(Se==="MultiPolygon")for(var st=0;st<rt.length;st++){var ct=rt[st];for(Ke=0;Ke<ct.length;Ke++)wt(ze,ct[Ke],Ge,Be,!0,Ke===0)}if(ze.length){var Tt=We.tags||null;if(Se==="LineString"&&Ye.lineMetrics){for(var Et in Tt={},We.tags)Tt[Et]=We.tags[Et];Tt.mapbox_clip_start=rt.start/rt.size,Tt.mapbox_clip_end=rt.end/rt.size}var At={geometry:ze,type:Se==="Polygon"||Se==="MultiPolygon"?3:Se==="LineString"||Se==="MultiLineString"?2:1,tags:Tt};We.id!==null&&(At.id=We.id),Ge.features.push(At)}}function wt(Ge,We,Be,Ye,rt,Se){var ze=Ye*Ye;if(Ye>0&&We.size<(rt?ze:Ye))Be.numPoints+=We.length/3;else{for(var Ke=[],st=0;st<We.length;st+=3)(Ye===0||We[st+2]>ze)&&(Be.numSimplified++,Ke.push(We[st]),Ke.push(We[st+1])),Be.numPoints++;rt&&function(ct,Tt){for(var Et=0,At=0,ht=ct.length,pt=ht-2;At<ht;pt=At,At+=2)Et+=(ct[At]-ct[pt])*(ct[At+1]+ct[pt+1]);if(Et>0===Tt)for(At=0,ht=ct.length;At<ht/2;At+=2){var gt=ct[At],Pt=ct[At+1];ct[At]=ct[ht-2-At],ct[At+1]=ct[ht-1-At],ct[ht-2-At]=gt,ct[ht-1-At]=Pt}}(Ke,Se),Ge.push(Ke)}}function Lt(Ge,We){var Be=(We=this.options=function(rt,Se){for(var ze in Se)rt[ze]=Se[ze];return rt}(Object.create(this.options),We)).debug;if(Be&&console.time("preprocess data"),We.maxZoom<0||We.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(We.promoteId&&We.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ye=function(rt,Se){var ze=[];if(rt.type==="FeatureCollection")for(var Ke=0;Ke<rt.features.length;Ke++)Q(ze,rt.features[Ke],Se,Ke);else rt.type==="Feature"?Q(ze,rt,Se):Q(ze,{geometry:rt},Se);return ze}(Ge,We);this.tiles={},this.tileCoords=[],Be&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",We.indexMaxZoom,We.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ye=function(rt,Se){var ze=Se.buffer/Se.extent,Ke=rt,st=Ce(rt,1,-1-ze,ze,0,-1,2,Se),ct=Ce(rt,1,1-ze,2+ze,0,-1,2,Se);return(st||ct)&&(Ke=Ce(rt,1,-ze,1+ze,0,-1,2,Se)||[],st&&(Ke=nt(st,1).concat(Ke)),ct&&(Ke=Ke.concat(nt(ct,-1)))),Ke}(Ye,We)).length&&this.splitTile(Ye,0,0,0),Be&&(Ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ct(Ge,We,Be){return 32*((1<<Ge)*Be+We)+Ge}function It(Ge,We){var Be=Ge.tileID.canonical;if(!this._geoJSONIndex)return We(null,null);var Ye=this._geoJSONIndex.getTile(Be.z,Be.x,Be.y);if(!Ye)return We(null,null);var rt=new g(Ye.features),Se=u(rt);Se.byteOffset===0&&Se.byteLength===Se.buffer.byteLength||(Se=new Uint8Array(Se)),We(null,{vectorTile:rt,rawData:Se.buffer})}ee.prototype.load=function(Ge){var We=this.options,Be=We.log,Ye=We.minZoom,rt=We.maxZoom,Se=We.nodeSize;Be&&console.time("total time");var ze="prepare "+Ge.length+" points";Be&&console.time(ze),this.points=Ge;for(var Ke=[],st=0;st<Ge.length;st++)Ge[st].geometry&&Ke.push(ie(Ge[st],st));this.trees[rt+1]=new J(Ke,ve,Oe,Se,Float32Array),Be&&console.timeEnd(ze);for(var ct=rt;ct>=Ye;ct--){var Tt=+Date.now();Ke=this._cluster(Ke,ct),this.trees[ct]=new J(Ke,ve,Oe,Se,Float32Array),Be&&console.log("z%d: %d clusters in %dms",ct,Ke.length,+Date.now()-Tt)}return Be&&console.timeEnd("total time"),this},ee.prototype.getClusters=function(Ge,We){var Be=((Ge[0]+180)%360+360)%360-180,Ye=Math.max(-90,Math.min(90,Ge[1])),rt=Ge[2]===180?180:((Ge[2]+180)%360+360)%360-180,Se=Math.max(-90,Math.min(90,Ge[3]));if(Ge[2]-Ge[0]>=360)Be=-180,rt=180;else if(Be>rt){var ze=this.getClusters([Be,Ye,180,Se],We),Ke=this.getClusters([-180,Ye,rt,Se],We);return ze.concat(Ke)}for(var st=this.trees[this._limitZoom(We)],ct=[],Tt=0,Et=st.range(ye(Be),ge(Se),ye(rt),ge(Ye));Tt<Et.length;Tt+=1){var At=Et[Tt],ht=st.points[At];ct.push(ht.numPoints?se(ht):this.points[ht.index])}return ct},ee.prototype.getChildren=function(Ge){var We=this._getOriginId(Ge),Be=this._getOriginZoom(Ge),Ye="No cluster with the specified id.",rt=this.trees[Be];if(!rt)throw new Error(Ye);var Se=rt.points[We];if(!Se)throw new Error(Ye);for(var ze=this.options.radius/(this.options.extent*Math.pow(2,Be-1)),Ke=[],st=0,ct=rt.within(Se.x,Se.y,ze);st<ct.length;st+=1){var Tt=ct[st],Et=rt.points[Tt];Et.parentId===Ge&&Ke.push(Et.numPoints?se(Et):this.points[Et.index])}if(Ke.length===0)throw new Error(Ye);return Ke},ee.prototype.getLeaves=function(Ge,We,Be){We=We||10,Be=Be||0;var Ye=[];return this._appendLeaves(Ye,Ge,We,Be,0),Ye},ee.prototype.getTile=function(Ge,We,Be){var Ye=this.trees[this._limitZoom(Ge)],rt=Math.pow(2,Ge),Se=this.options,ze=Se.extent,Ke=Se.radius/ze,st=(Be-Ke)/rt,ct=(Be+1+Ke)/rt,Tt={features:[]};return this._addTileFeatures(Ye.range((We-Ke)/rt,st,(We+1+Ke)/rt,ct),Ye.points,We,Be,rt,Tt),We===0&&this._addTileFeatures(Ye.range(1-Ke/rt,st,1,ct),Ye.points,rt,Be,rt,Tt),We===rt-1&&this._addTileFeatures(Ye.range(0,st,Ke/rt,ct),Ye.points,-1,Be,rt,Tt),Tt.features.length?Tt:null},ee.prototype.getClusterExpansionZoom=function(Ge){for(var We=this._getOriginZoom(Ge)-1;We<=this.options.maxZoom;){var Be=this.getChildren(Ge);if(We++,Be.length!==1)break;Ge=Be[0].properties.cluster_id}return We},ee.prototype._appendLeaves=function(Ge,We,Be,Ye,rt){for(var Se=0,ze=this.getChildren(We);Se<ze.length;Se+=1){var Ke=ze[Se],st=Ke.properties;if(st&&st.cluster?rt+st.point_count<=Ye?rt+=st.point_count:rt=this._appendLeaves(Ge,st.cluster_id,Be,Ye,rt):rt<Ye?rt++:Ge.push(Ke),Ge.length===Be)break}return rt},ee.prototype._addTileFeatures=function(Ge,We,Be,Ye,rt,Se){for(var ze=0,Ke=Ge;ze<Ke.length;ze+=1){var st=We[Ke[ze]],ct=st.numPoints,Tt={type:1,geometry:[[Math.round(this.options.extent*(st.x*rt-Be)),Math.round(this.options.extent*(st.y*rt-Ye))]],tags:ct?fe(st):this.points[st.index].properties},Et=void 0;ct?Et=st.id:this.options.generateId?Et=st.index:this.points[st.index].id&&(Et=this.points[st.index].id),Et!==void 0&&(Tt.id=Et),Se.features.push(Tt)}},ee.prototype._limitZoom=function(Ge){return Math.max(this.options.minZoom,Math.min(Ge,this.options.maxZoom+1))},ee.prototype._cluster=function(Ge,We){for(var Be=[],Ye=this.options,rt=Ye.radius,Se=Ye.extent,ze=Ye.reduce,Ke=rt/(Se*Math.pow(2,We)),st=0;st<Ge.length;st++){var ct=Ge[st];if(!(ct.zoom<=We)){ct.zoom=We;for(var Tt=this.trees[We+1],Et=Tt.within(ct.x,ct.y,Ke),At=ct.numPoints||1,ht=ct.x*At,pt=ct.y*At,gt=ze&&At>1?this._map(ct,!0):null,Pt=(st<<5)+(We+1)+this.points.length,Ot=0,Ht=Et;Ot<Ht.length;Ot+=1){var jt=Ht[Ot],Nt=Tt.points[jt];if(!(Nt.zoom<=We)){Nt.zoom=We;var Gt=Nt.numPoints||1;ht+=Nt.x*Gt,pt+=Nt.y*Gt,At+=Gt,Nt.parentId=Pt,ze&&(gt||(gt=this._map(ct,!0)),ze(gt,this._map(Nt)))}}At===1?Be.push(ct):(ct.parentId=Pt,Be.push(re(ht/At,pt/At,Pt,At,gt)))}}return Be},ee.prototype._getOriginId=function(Ge){return Ge-this.points.length>>5},ee.prototype._getOriginZoom=function(Ge){return(Ge-this.points.length)%32},ee.prototype._map=function(Ge,We){if(Ge.numPoints)return We?he({},Ge.properties):Ge.properties;var Be=this.points[Ge.index].properties,Ye=this.options.map(Be);return We&&Ye===Be?he({},Ye):Ye},Lt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Lt.prototype.splitTile=function(Ge,We,Be,Ye,rt,Se,ze){for(var Ke=[Ge,We,Be,Ye],st=this.options,ct=st.debug;Ke.length;){Ye=Ke.pop(),Be=Ke.pop(),We=Ke.pop(),Ge=Ke.pop();var Tt=1<<We,Et=Ct(We,Be,Ye),At=this.tiles[Et];if(!At&&(ct>1&&console.time("creation"),At=this.tiles[Et]=kt(Ge,We,Be,Ye,st),this.tileCoords.push({z:We,x:Be,y:Ye}),ct)){ct>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",We,Be,Ye,At.numFeatures,At.numPoints,At.numSimplified),console.timeEnd("creation"));var ht="z"+We;this.stats[ht]=(this.stats[ht]||0)+1,this.total++}if(At.source=Ge,rt){if(We===st.maxZoom||We===rt)continue;var pt=1<<rt-We;if(Be!==Math.floor(Se/pt)||Ye!==Math.floor(ze/pt))continue}else if(We===st.indexMaxZoom||At.numPoints<=st.indexMaxPoints)continue;if(At.source=null,Ge.length!==0){ct>1&&console.time("clipping");var gt,Pt,Ot,Ht,jt,Nt,Gt=.5*st.buffer/st.extent,un=.5-Gt,pn=.5+Gt,Kt=1+Gt;gt=Pt=Ot=Ht=null,jt=Ce(Ge,Tt,Be-Gt,Be+pn,0,At.minX,At.maxX,st),Nt=Ce(Ge,Tt,Be+un,Be+Kt,0,At.minX,At.maxX,st),Ge=null,jt&&(gt=Ce(jt,Tt,Ye-Gt,Ye+pn,1,At.minY,At.maxY,st),Pt=Ce(jt,Tt,Ye+un,Ye+Kt,1,At.minY,At.maxY,st),jt=null),Nt&&(Ot=Ce(Nt,Tt,Ye-Gt,Ye+pn,1,At.minY,At.maxY,st),Ht=Ce(Nt,Tt,Ye+un,Ye+Kt,1,At.minY,At.maxY,st),Nt=null),ct>1&&console.timeEnd("clipping"),Ke.push(gt||[],We+1,2*Be,2*Ye),Ke.push(Pt||[],We+1,2*Be,2*Ye+1),Ke.push(Ot||[],We+1,2*Be+1,2*Ye),Ke.push(Ht||[],We+1,2*Be+1,2*Ye+1)}}},Lt.prototype.getTile=function(Ge,We,Be){var Ye=this.options,rt=Ye.extent,Se=Ye.debug;if(Ge<0||Ge>24)return null;var ze=1<<Ge,Ke=Ct(Ge,We=(We%ze+ze)%ze,Be);if(this.tiles[Ke])return ot(this.tiles[Ke],rt);Se>1&&console.log("drilling down to z%d-%d-%d",Ge,We,Be);for(var st,ct=Ge,Tt=We,Et=Be;!st&&ct>0;)ct--,Tt=Math.floor(Tt/2),Et=Math.floor(Et/2),st=this.tiles[Ct(ct,Tt,Et)];return st&&st.source?(Se>1&&console.log("found parent tile z%d-%d-%d",ct,Tt,Et),Se>1&&console.time("drilling down"),this.splitTile(st.source,ct,Tt,Et,Ge,We,Be),Se>1&&console.timeEnd("drilling down"),this.tiles[Ke]?ot(this.tiles[Ke],rt):null):null};var Ut=function(Ge){function We(Be,Ye,rt,Se){Ge.call(this,Be,Ye,rt,It),Se&&(this.loadGeoJSON=Se)}return Ge&&(We.__proto__=Ge),We.prototype=Object.create(Ge&&Ge.prototype),We.prototype.constructor=We,We.prototype.loadData=function(Be,Ye){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ye,this._pendingLoadDataParams=Be,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},We.prototype._loadData=function(){var Be=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ye=this._pendingCallback,rt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Se=!!(rt&&rt.request&&rt.request.collectResourceTiming)&&new l.RequestPerformance(rt.request);this.loadGeoJSON(rt,function(ze,Ke){if(ze||!Ke)return Ye(ze);if(typeof Ke!="object")return Ye(new Error("Input data given to '"+rt.source+"' is not a valid GeoJSON object."));c(Ke,!0);try{Be._geoJSONIndex=rt.cluster?new ee(function(Tt){var Et=Tt.superclusterOptions,At=Tt.clusterProperties;if(!At||!Et)return Et;for(var ht={},pt={},gt={accumulated:null,zoom:0},Pt={properties:null},Ot=Object.keys(At),Ht=0,jt=Ot;Ht<jt.length;Ht+=1){var Nt=jt[Ht],Gt=At[Nt],un=Gt[0],pn=Gt[1],Kt=l.createExpression(pn),wn=l.createExpression(typeof un=="string"?[un,["accumulated"],["get",Nt]]:un);ht[Nt]=Kt.value,pt[Nt]=wn.value}return Et.map=function(Bn){Pt.properties=Bn;for(var vn={},cn=0,dn=Ot;cn<dn.length;cn+=1){var sn=dn[cn];vn[sn]=ht[sn].evaluate(gt,Pt)}return vn},Et.reduce=function(Bn,vn){Pt.properties=vn;for(var cn=0,dn=Ot;cn<dn.length;cn+=1){var sn=dn[cn];gt.accumulated=Bn[sn],Bn[sn]=pt[sn].evaluate(gt,Pt)}},Et}(rt)).load(Ke.features):function(Tt,Et){return new Lt(Tt,Et)}(Ke,rt.geojsonVtOptions)}catch(Tt){return Ye(Tt)}Be.loaded={};var st={};if(Se){var ct=Se.finish();ct&&(st.resourceTiming={},st.resourceTiming[rt.source]=JSON.parse(JSON.stringify(ct)))}Ye(null,st)})}},We.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},We.prototype.reloadTile=function(Be,Ye){var rt=this.loaded,Se=Be.uid;return rt&&rt[Se]?Ge.prototype.reloadTile.call(this,Be,Ye):this.loadTile(Be,Ye)},We.prototype.loadGeoJSON=function(Be,Ye){if(Be.request)l.getJSON(Be.request,Ye);else{if(typeof Be.data!="string")return Ye(new Error("Input data given to '"+Be.source+"' is not a valid GeoJSON object."));try{return Ye(null,JSON.parse(Be.data))}catch{return Ye(new Error("Input data given to '"+Be.source+"' is not a valid GeoJSON object."))}}},We.prototype.removeSource=function(Be,Ye){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ye()},We.prototype.getClusterExpansionZoom=function(Be,Ye){try{Ye(null,this._geoJSONIndex.getClusterExpansionZoom(Be.clusterId))}catch(rt){Ye(rt)}},We.prototype.getClusterChildren=function(Be,Ye){try{Ye(null,this._geoJSONIndex.getChildren(Be.clusterId))}catch(rt){Ye(rt)}},We.prototype.getClusterLeaves=function(Be,Ye){try{Ye(null,this._geoJSONIndex.getLeaves(Be.clusterId,Be.limit,Be.offset))}catch(rt){Ye(rt)}},We}(n),Rt=function(Ge){var We=this;this.self=Ge,this.actor=new l.Actor(Ge,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:n,geojson:Ut},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Be,Ye){if(We.workerSourceTypes[Be])throw new Error('Worker source with name "'+Be+'" already registered.');We.workerSourceTypes[Be]=Ye},this.self.registerRTLTextPlugin=function(Be){if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=Be.applyArabicShaping,l.plugin.processBidirectionalText=Be.processBidirectionalText,l.plugin.processStyledBidirectionalText=Be.processStyledBidirectionalText}};return Rt.prototype.setReferrer=function(Ge,We){this.referrer=We},Rt.prototype.setImages=function(Ge,We,Be){for(var Ye in this.availableImages[Ge]=We,this.workerSources[Ge]){var rt=this.workerSources[Ge][Ye];for(var Se in rt)rt[Se].availableImages=We}Be()},Rt.prototype.setLayers=function(Ge,We,Be){this.getLayerIndex(Ge).replace(We),Be()},Rt.prototype.updateLayers=function(Ge,We,Be){this.getLayerIndex(Ge).update(We.layers,We.removedIds),Be()},Rt.prototype.loadTile=function(Ge,We,Be){this.getWorkerSource(Ge,We.type,We.source).loadTile(We,Be)},Rt.prototype.loadDEMTile=function(Ge,We,Be){this.getDEMWorkerSource(Ge,We.source).loadTile(We,Be)},Rt.prototype.reloadTile=function(Ge,We,Be){this.getWorkerSource(Ge,We.type,We.source).reloadTile(We,Be)},Rt.prototype.abortTile=function(Ge,We,Be){this.getWorkerSource(Ge,We.type,We.source).abortTile(We,Be)},Rt.prototype.removeTile=function(Ge,We,Be){this.getWorkerSource(Ge,We.type,We.source).removeTile(We,Be)},Rt.prototype.removeDEMTile=function(Ge,We){this.getDEMWorkerSource(Ge,We.source).removeTile(We)},Rt.prototype.removeSource=function(Ge,We,Be){if(this.workerSources[Ge]&&this.workerSources[Ge][We.type]&&this.workerSources[Ge][We.type][We.source]){var Ye=this.workerSources[Ge][We.type][We.source];delete this.workerSources[Ge][We.type][We.source],Ye.removeSource!==void 0?Ye.removeSource(We,Be):Be()}},Rt.prototype.loadWorkerSource=function(Ge,We,Be){try{this.self.importScripts(We.url),Be()}catch(Ye){Be(Ye.toString())}},Rt.prototype.syncRTLPluginState=function(Ge,We,Be){try{l.plugin.setState(We);var Ye=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Ye!=null){this.self.importScripts(Ye);var rt=l.plugin.isParsed();Be(rt?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ye),rt)}}catch(Se){Be(Se.toString())}},Rt.prototype.getAvailableImages=function(Ge){var We=this.availableImages[Ge];return We||(We=[]),We},Rt.prototype.getLayerIndex=function(Ge){var We=this.layerIndexes[Ge];return We||(We=this.layerIndexes[Ge]=new d),We},Rt.prototype.getWorkerSource=function(Ge,We,Be){var Ye=this;if(this.workerSources[Ge]||(this.workerSources[Ge]={}),this.workerSources[Ge][We]||(this.workerSources[Ge][We]={}),!this.workerSources[Ge][We][Be]){var rt={send:function(Se,ze,Ke){Ye.actor.send(Se,ze,Ke,Ge)}};this.workerSources[Ge][We][Be]=new this.workerSourceTypes[We](rt,this.getLayerIndex(Ge),this.getAvailableImages(Ge))}return this.workerSources[Ge][We][Be]},Rt.prototype.getDEMWorkerSource=function(Ge,We){return this.demWorkerSources[Ge]||(this.demWorkerSources[Ge]={}),this.demWorkerSources[Ge][We]||(this.demWorkerSources[Ge][We]=new i),this.demWorkerSources[Ge][We]},Rt.prototype.enforceCacheSizeLimit=function(Ge,We){l.enforceCacheSizeLimit(We)},typeof WorkerGlobalScope<"u"&&l.window!==void 0&&l.window instanceof WorkerGlobalScope&&(l.window.worker=new Rt(l.window)),Rt}),A(0,function(l){var T=l.createCommonjsModule(function(D){function Y(pe){return!q(pe)}function q(pe){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Ne,qe,et=new Blob([""],{type:"text/javascript"}),vt=URL.createObjectURL(et);try{qe=new Worker(vt),Ne=!0}catch{Ne=!1}return qe&&qe.terminate(),URL.revokeObjectURL(vt),Ne}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Ne=document.createElement("canvas");Ne.width=Ne.height=1;var qe=Ne.getContext("2d");if(!qe)return!1;var et=qe.getImageData(0,0,1,1);return et&&et.width===Ne.width}()?(Le=pe&&pe.failIfMajorPerformanceCaveat,ne[Le]===void 0&&(ne[Le]=function(Ne){var qe=function(vt){var xt=document.createElement("canvas"),te=Object.create(Y.webGLContextAttributes);return te.failIfMajorPerformanceCaveat=vt,xt.probablySupportsContext?xt.probablySupportsContext("webgl",te)||xt.probablySupportsContext("experimental-webgl",te):xt.supportsContext?xt.supportsContext("webgl",te)||xt.supportsContext("experimental-webgl",te):xt.getContext("webgl",te)||xt.getContext("experimental-webgl",te)}(Ne);if(!qe)return!1;var et=qe.createShader(qe.VERTEX_SHADER);return!(!et||qe.isContextLost())&&(qe.shaderSource(et,"void main() {}"),qe.compileShader(et),qe.getShaderParameter(et,qe.COMPILE_STATUS)===!0)}(Le)),ne[Le]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var Le}D.exports?D.exports=Y:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=Y,window.mapboxgl.notSupportedReason=q);var ne={};Y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),x={create:function(D,Y,q){var ne=l.window.document.createElement(D);return Y!==void 0&&(ne.className=Y),q&&q.appendChild(ne),ne},createNS:function(D,Y){return l.window.document.createElementNS(D,Y)}},d=l.window.document.documentElement.style;function s(D){if(!d)return D[0];for(var Y=0;Y<D.length;Y++)if(D[Y]in d)return D[Y];return D[0]}var t,o=s(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);x.disableDrag=function(){d&&o&&(t=d[o],d[o]="none")},x.enableDrag=function(){d&&o&&(d[o]=t)};var r=s(["transform","WebkitTransform"]);x.setTransform=function(D,Y){D.style[r]=Y};var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});l.window.addEventListener("test",a,a),l.window.removeEventListener("test",a,a)}catch{n=!1}x.addEventListener=function(D,Y,q,ne){ne===void 0&&(ne={}),"passive"in ne&&n?D.addEventListener(Y,q,ne):D.addEventListener(Y,q,ne.capture)},x.removeEventListener=function(D,Y,q,ne){ne===void 0&&(ne={}),"passive"in ne&&n?D.removeEventListener(Y,q,ne):D.removeEventListener(Y,q,ne.capture)};var i=function(D){D.preventDefault(),D.stopPropagation(),l.window.removeEventListener("click",i,!0)};function c(D){var Y=D.userImage;return!!(Y&&Y.render&&Y.render())&&(D.data.replace(new Uint8Array(Y.data.buffer)),!0)}x.suppressClick=function(){l.window.addEventListener("click",i,!0),l.window.setTimeout(function(){l.window.removeEventListener("click",i,!0)},0)},x.mousePos=function(D,Y){var q=D.getBoundingClientRect();return new l.Point(Y.clientX-q.left-D.clientLeft,Y.clientY-q.top-D.clientTop)},x.touchPos=function(D,Y){for(var q=D.getBoundingClientRect(),ne=[],pe=0;pe<Y.length;pe++)ne.push(new l.Point(Y[pe].clientX-q.left-D.clientLeft,Y[pe].clientY-q.top-D.clientTop));return ne},x.mouseButton=function(D){return l.window.InstallTrigger!==void 0&&D.button===2&&D.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:D.button},x.remove=function(D){D.parentNode&&D.parentNode.removeChild(D)};var h=function(D){function Y(){D.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.isLoaded=function(){return this.loaded},Y.prototype.setLoaded=function(q){if(this.loaded!==q&&(this.loaded=q,q)){for(var ne=0,pe=this.requestors;ne<pe.length;ne+=1){var Le=pe[ne],Ne=Le.ids,qe=Le.callback;this._notify(Ne,qe)}this.requestors=[]}},Y.prototype.getImage=function(q){return this.images[q]},Y.prototype.addImage=function(q,ne){this._validate(q,ne)&&(this.images[q]=ne)},Y.prototype._validate=function(q,ne){var pe=!0;return this._validateStretch(ne.stretchX,ne.data&&ne.data.width)||(this.fire(new l.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchX" value'))),pe=!1),this._validateStretch(ne.stretchY,ne.data&&ne.data.height)||(this.fire(new l.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchY" value'))),pe=!1),this._validateContent(ne.content,ne)||(this.fire(new l.ErrorEvent(new Error('Image "'+q+'" has invalid "content" value'))),pe=!1),pe},Y.prototype._validateStretch=function(q,ne){if(!q)return!0;for(var pe=0,Le=0,Ne=q;Le<Ne.length;Le+=1){var qe=Ne[Le];if(qe[0]<pe||qe[1]<qe[0]||ne<qe[1])return!1;pe=qe[1]}return!0},Y.prototype._validateContent=function(q,ne){return!(q&&(q.length!==4||q[0]<0||ne.data.width<q[0]||q[1]<0||ne.data.height<q[1]||q[2]<0||ne.data.width<q[2]||q[3]<0||ne.data.height<q[3]||q[2]<q[0]||q[3]<q[1]))},Y.prototype.updateImage=function(q,ne){var pe=this.images[q];ne.version=pe.version+1,this.images[q]=ne,this.updatedImages[q]=!0},Y.prototype.removeImage=function(q){var ne=this.images[q];delete this.images[q],delete this.patterns[q],ne.userImage&&ne.userImage.onRemove&&ne.userImage.onRemove()},Y.prototype.listImages=function(){return Object.keys(this.images)},Y.prototype.getImages=function(q,ne){var pe=!0;if(!this.isLoaded())for(var Le=0,Ne=q;Le<Ne.length;Le+=1){var qe=Ne[Le];this.images[qe]||(pe=!1)}this.isLoaded()||pe?this._notify(q,ne):this.requestors.push({ids:q,callback:ne})},Y.prototype._notify=function(q,ne){for(var pe={},Le=0,Ne=q;Le<Ne.length;Le+=1){var qe=Ne[Le];this.images[qe]||this.fire(new l.Event("styleimagemissing",{id:qe}));var et=this.images[qe];et?pe[qe]={data:et.data.clone(),pixelRatio:et.pixelRatio,sdf:et.sdf,version:et.version,stretchX:et.stretchX,stretchY:et.stretchY,content:et.content,hasRenderCallback:Boolean(et.userImage&&et.userImage.render)}:l.warnOnce('Image "'+qe+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}ne(null,pe)},Y.prototype.getPixelSize=function(){var q=this.atlasImage;return{width:q.width,height:q.height}},Y.prototype.getPattern=function(q){var ne=this.patterns[q],pe=this.getImage(q);if(!pe)return null;if(ne&&ne.position.version===pe.version)return ne.position;if(ne)ne.position.version=pe.version;else{var Le={w:pe.data.width+2,h:pe.data.height+2,x:0,y:0},Ne=new l.ImagePosition(Le,pe);this.patterns[q]={bin:Le,position:Ne}}return this._updatePatternAtlas(),this.patterns[q].position},Y.prototype.bind=function(q){var ne=q.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(q,this.atlasImage,ne.RGBA),this.atlasTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE)},Y.prototype._updatePatternAtlas=function(){var q=[];for(var ne in this.patterns)q.push(this.patterns[ne].bin);var pe=l.potpack(q),Le=pe.w,Ne=pe.h,qe=this.atlasImage;for(var et in qe.resize({width:Le||1,height:Ne||1}),this.patterns){var vt=this.patterns[et].bin,xt=vt.x+1,te=vt.y+1,ue=this.images[et].data,we=ue.width,Pe=ue.height;l.RGBAImage.copy(ue,qe,{x:0,y:0},{x:xt,y:te},{width:we,height:Pe}),l.RGBAImage.copy(ue,qe,{x:0,y:Pe-1},{x:xt,y:te-1},{width:we,height:1}),l.RGBAImage.copy(ue,qe,{x:0,y:0},{x:xt,y:te+Pe},{width:we,height:1}),l.RGBAImage.copy(ue,qe,{x:we-1,y:0},{x:xt-1,y:te},{width:1,height:Pe}),l.RGBAImage.copy(ue,qe,{x:0,y:0},{x:xt+we,y:te},{width:1,height:Pe})}this.dirty=!0},Y.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Y.prototype.dispatchRenderCallbacks=function(q){for(var ne=0,pe=q;ne<pe.length;ne+=1){var Le=pe[ne];if(!this.callbackDispatchedThisFrame[Le]){this.callbackDispatchedThisFrame[Le]=!0;var Ne=this.images[Le];c(Ne)&&this.updateImage(Le,Ne)}}},Y}(l.Evented),f=g,b=g,v=1e20;function g(D,Y,q,ne,pe,Le){this.fontSize=D||24,this.buffer=Y===void 0?3:Y,this.cutoff=ne||.25,this.fontFamily=pe||"sans-serif",this.fontWeight=Le||"normal",this.radius=q||8;var Ne=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Ne,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Ne*Ne),this.gridInner=new Float64Array(Ne*Ne),this.f=new Float64Array(Ne),this.d=new Float64Array(Ne),this.z=new Float64Array(Ne+1),this.v=new Int16Array(Ne),this.middle=Math.round(Ne/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(D,Y,q,ne,pe,Le,Ne){for(var qe=0;qe<Y;qe++){for(var et=0;et<q;et++)ne[et]=D[et*Y+qe];for(p(ne,pe,Le,Ne,q),et=0;et<q;et++)D[et*Y+qe]=pe[et]}for(et=0;et<q;et++){for(qe=0;qe<Y;qe++)ne[qe]=D[et*Y+qe];for(p(ne,pe,Le,Ne,Y),qe=0;qe<Y;qe++)D[et*Y+qe]=Math.sqrt(pe[qe])}}function p(D,Y,q,ne,pe){q[0]=0,ne[0]=-v,ne[1]=+v;for(var Le=1,Ne=0;Le<pe;Le++){for(var qe=(D[Le]+Le*Le-(D[q[Ne]]+q[Ne]*q[Ne]))/(2*Le-2*q[Ne]);qe<=ne[Ne];)Ne--,qe=(D[Le]+Le*Le-(D[q[Ne]]+q[Ne]*q[Ne]))/(2*Le-2*q[Ne]);q[++Ne]=Le,ne[Ne]=qe,ne[Ne+1]=+v}for(Le=0,Ne=0;Le<pe;Le++){for(;ne[Ne+1]<Le;)Ne++;Y[Le]=(Le-q[Ne])*(Le-q[Ne])+D[q[Ne]]}}g.prototype.draw=function(D){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(D,this.buffer,this.middle);for(var Y=this.ctx.getImageData(0,0,this.size,this.size),q=new Uint8ClampedArray(this.size*this.size),ne=0;ne<this.size*this.size;ne++){var pe=Y.data[4*ne+3]/255;this.gridOuter[ne]=pe===1?0:pe===0?v:Math.pow(Math.max(0,.5-pe),2),this.gridInner[ne]=pe===1?v:pe===0?0:Math.pow(Math.max(0,pe-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),ne=0;ne<this.size*this.size;ne++){var Le=this.gridOuter[ne]-this.gridInner[ne];q[ne]=Math.max(0,Math.min(255,Math.round(255-255*(Le/this.radius+this.cutoff))))}return q},f.default=b;var m=function(D,Y){this.requestManager=D,this.localIdeographFontFamily=Y,this.entries={}};m.prototype.setURL=function(D){this.url=D},m.prototype.getGlyphs=function(D,Y){var q=this,ne=[];for(var pe in D)for(var Le=0,Ne=D[pe];Le<Ne.length;Le+=1){var qe=Ne[Le];ne.push({stack:pe,id:qe})}l.asyncAll(ne,function(et,vt){var xt=et.stack,te=et.id,ue=q.entries[xt];ue||(ue=q.entries[xt]={glyphs:{},requests:{},ranges:{}});var we=ue.glyphs[te];if(we===void 0){if(we=q._tinySDF(ue,xt,te))return ue.glyphs[te]=we,void vt(null,{stack:xt,id:te,glyph:we});var Pe=Math.floor(te/256);if(256*Pe>65535)vt(new Error("glyphs > 65535 not supported"));else if(ue.ranges[Pe])vt(null,{stack:xt,id:te,glyph:we});else{var De=ue.requests[Pe];De||(De=ue.requests[Pe]=[],m.loadGlyphRange(xt,Pe,q.url,q.requestManager,function(Ue,Ze){if(Ze){for(var Je in Ze)q._doesCharSupportLocalGlyph(+Je)||(ue.glyphs[+Je]=Ze[+Je]);ue.ranges[Pe]=!0}for(var it=0,ut=De;it<ut.length;it+=1)(0,ut[it])(Ue,Ze);delete ue.requests[Pe]})),De.push(function(Ue,Ze){Ue?vt(Ue):Ze&&vt(null,{stack:xt,id:te,glyph:Ze[te]||null})})}}else vt(null,{stack:xt,id:te,glyph:we})},function(et,vt){if(et)Y(et);else if(vt){for(var xt={},te=0,ue=vt;te<ue.length;te+=1){var we=ue[te],Pe=we.stack,De=we.id,Ue=we.glyph;(xt[Pe]||(xt[Pe]={}))[De]=Ue&&{id:Ue.id,bitmap:Ue.bitmap.clone(),metrics:Ue.metrics}}Y(null,xt)}})},m.prototype._doesCharSupportLocalGlyph=function(D){return!!this.localIdeographFontFamily&&(l.isChar["CJK Unified Ideographs"](D)||l.isChar["Hangul Syllables"](D)||l.isChar.Hiragana(D)||l.isChar.Katakana(D))},m.prototype._tinySDF=function(D,Y,q){var ne=this.localIdeographFontFamily;if(ne&&this._doesCharSupportLocalGlyph(q)){var pe=D.tinySDF;if(!pe){var Le="400";/bold/i.test(Y)?Le="900":/medium/i.test(Y)?Le="500":/light/i.test(Y)&&(Le="200"),pe=D.tinySDF=new m.TinySDF(24,3,8,.25,ne,Le)}return{id:q,bitmap:new l.AlphaImage({width:30,height:30},pe.draw(String.fromCharCode(q))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},m.loadGlyphRange=function(D,Y,q,ne,pe){var Le=256*Y,Ne=Le+255,qe=ne.transformRequest(ne.normalizeGlyphsURL(q).replace("{fontstack}",D).replace("{range}",Le+"-"+Ne),l.ResourceType.Glyphs);l.getArrayBuffer(qe,function(et,vt){if(et)pe(et);else if(vt){for(var xt={},te=0,ue=l.parseGlyphPBF(vt);te<ue.length;te+=1){var we=ue[te];xt[we.id]=we}pe(null,xt)}})},m.TinySDF=f;var w=function(){this.specification=l.styleSpec.light.position};w.prototype.possiblyEvaluate=function(D,Y){return l.sphericalToCartesian(D.expression.evaluate(Y))},w.prototype.interpolate=function(D,Y,q){return{x:l.number(D.x,Y.x,q),y:l.number(D.y,Y.y,q),z:l.number(D.z,Y.z,q)}};var u=new l.Properties({anchor:new l.DataConstantProperty(l.styleSpec.light.anchor),position:new w,color:new l.DataConstantProperty(l.styleSpec.light.color),intensity:new l.DataConstantProperty(l.styleSpec.light.intensity)}),S="-transition",_=function(D){function Y(q){D.call(this),this._transitionable=new l.Transitionable(u),this.setLight(q),this._transitioning=this._transitionable.untransitioned()}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getLight=function(){return this._transitionable.serialize()},Y.prototype.setLight=function(q,ne){if(ne===void 0&&(ne={}),!this._validate(l.validateLight,q,ne))for(var pe in q){var Le=q[pe];l.endsWith(pe,S)?this._transitionable.setTransition(pe.slice(0,-S.length),Le):this._transitionable.setValue(pe,Le)}},Y.prototype.updateTransitions=function(q){this._transitioning=this._transitionable.transitioned(q,this._transitioning)},Y.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Y.prototype.recalculate=function(q){this.properties=this._transitioning.possiblyEvaluate(q)},Y.prototype._validate=function(q,ne,pe){return(!pe||pe.validate!==!1)&&l.emitValidationErrors(this,q.call(l.validateStyle,l.extend({value:ne,style:{glyphs:!0,sprite:!0},styleSpec:l.styleSpec})))},Y}(l.Evented),E=function(D,Y){this.width=D,this.height=Y,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(D,Y){var q=D.join(",")+String(Y);return this.dashEntry[q]||(this.dashEntry[q]=this.addDash(D,Y)),this.dashEntry[q]},E.prototype.getDashRanges=function(D,Y,q){var ne=[],pe=D.length%2==1?-D[D.length-1]*q:0,Le=D[0]*q,Ne=!0;ne.push({left:pe,right:Le,isDash:Ne,zeroLength:D[0]===0});for(var qe=D[0],et=1;et<D.length;et++){Ne=!Ne;var vt=D[et];pe=qe*q,Le=(qe+=vt)*q,ne.push({left:pe,right:Le,isDash:Ne,zeroLength:vt===0})}return ne},E.prototype.addRoundDash=function(D,Y,q){for(var ne=Y/2,pe=-q;pe<=q;pe++)for(var Le=this.nextRow+q+pe,Ne=this.width*Le,qe=0,et=D[qe],vt=0;vt<this.width;vt++){vt/et.right>1&&(et=D[++qe]);var xt=Math.abs(vt-et.left),te=Math.abs(vt-et.right),ue=Math.min(xt,te),we=void 0,Pe=pe/q*(ne+1);if(et.isDash){var De=ne-Math.abs(Pe);we=Math.sqrt(ue*ue+De*De)}else we=ne-Math.sqrt(ue*ue+Pe*Pe);this.data[Ne+vt]=Math.max(0,Math.min(255,we+128))}},E.prototype.addRegularDash=function(D){for(var Y=D.length-1;Y>=0;--Y){var q=D[Y],ne=D[Y+1];q.zeroLength?D.splice(Y,1):ne&&ne.isDash===q.isDash&&(ne.left=q.left,D.splice(Y,1))}var pe=D[0],Le=D[D.length-1];pe.isDash===Le.isDash&&(pe.left=Le.left-this.width,Le.right=pe.right+this.width);for(var Ne=this.width*this.nextRow,qe=0,et=D[qe],vt=0;vt<this.width;vt++){vt/et.right>1&&(et=D[++qe]);var xt=Math.abs(vt-et.left),te=Math.abs(vt-et.right),ue=Math.min(xt,te),we=et.isDash?ue:-ue;this.data[Ne+vt]=Math.max(0,Math.min(255,we+128))}},E.prototype.addDash=function(D,Y){var q=Y?7:0,ne=2*q+1;if(this.nextRow+ne>this.height)return l.warnOnce("LineAtlas out of space"),null;for(var pe=0,Le=0;Le<D.length;Le++)pe+=D[Le];if(pe!==0){var Ne=this.width/pe,qe=this.getDashRanges(D,this.width,Ne);Y?this.addRoundDash(qe,Ne,q):this.addRegularDash(qe)}var et={y:(this.nextRow+q+.5)/this.height,height:2*q/this.height,width:pe};return this.nextRow+=ne,this.dirty=!0,et},E.prototype.bind=function(D){var Y=D.gl;this.texture?(Y.bindTexture(Y.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,Y.texSubImage2D(Y.TEXTURE_2D,0,0,0,this.width,this.height,Y.ALPHA,Y.UNSIGNED_BYTE,this.data))):(this.texture=Y.createTexture(),Y.bindTexture(Y.TEXTURE_2D,this.texture),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_S,Y.REPEAT),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_T,Y.REPEAT),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MIN_FILTER,Y.LINEAR),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MAG_FILTER,Y.LINEAR),Y.texImage2D(Y.TEXTURE_2D,0,Y.ALPHA,this.width,this.height,0,Y.ALPHA,Y.UNSIGNED_BYTE,this.data))};var L=function D(Y,q){this.workerPool=Y,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var ne=this.workerPool.acquire(this.id),pe=0;pe<ne.length;pe++){var Le=ne[pe],Ne=new D.Actor(Le,q,this.id);Ne.name="Worker "+pe,this.actors.push(Ne)}};function C(D,Y,q){var ne=function(pe,Le){if(pe)return q(pe);if(Le){var Ne=l.pick(l.extend(Le,D),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Le.vector_layers&&(Ne.vectorLayers=Le.vector_layers,Ne.vectorLayerIds=Ne.vectorLayers.map(function(qe){return qe.id})),Ne.tiles=Y.canonicalizeTileset(Ne,D.url),q(null,Ne)}};return D.url?l.getJSON(Y.transformRequest(Y.normalizeSourceURL(D.url),l.ResourceType.Source),ne):l.browser.frame(function(){return ne(null,D)})}L.prototype.broadcast=function(D,Y,q){q=q||function(){},l.asyncAll(this.actors,function(ne,pe){ne.send(D,Y,pe)},q)},L.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},L.prototype.remove=function(){this.actors.forEach(function(D){D.remove()}),this.actors=[],this.workerPool.release(this.id)},L.Actor=l.Actor;var P=function(D,Y,q){this.bounds=l.LngLatBounds.convert(this.validateBounds(D)),this.minzoom=Y||0,this.maxzoom=q||24};P.prototype.validateBounds=function(D){return Array.isArray(D)&&D.length===4?[Math.max(-180,D[0]),Math.max(-90,D[1]),Math.min(180,D[2]),Math.min(90,D[3])]:[-180,-90,180,90]},P.prototype.contains=function(D){var Y=Math.pow(2,D.z),q=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*Y),ne=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*Y),pe=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*Y),Le=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*Y);return D.x>=q&&D.x<pe&&D.y>=ne&&D.y<Le};var I=function(D){function Y(q,ne,pe,Le){if(D.call(this),this.id=q,this.dispatcher=pe,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(ne,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},ne),this._collectResourceTiming=ne.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Le)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(ne,pe){q._tileJSONRequest=null,q._loaded=!0,ne?q.fire(new l.ErrorEvent(ne)):pe&&(l.extend(q,pe),pe.bounds&&(q.tileBounds=new P(pe.bounds,q.minzoom,q.maxzoom)),l.postTurnstileEvent(pe.tiles,q.map._requestManager._customAccessToken),l.postMapLoadEvent(pe.tiles,q.map._getMapId(),q.map._requestManager._skuToken,q.map._requestManager._customAccessToken),q.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return l.extend({},this._options)},Y.prototype.loadTile=function(q,ne){var pe=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme)),Le={request:this.map._requestManager.transformRequest(pe,l.ResourceType.Tile),uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,tileSize:this.tileSize*q.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function Ne(qe,et){return delete q.request,q.aborted?ne(null):qe&&qe.status!==404?ne(qe):(et&&et.resourceTiming&&(q.resourceTiming=et.resourceTiming),this.map._refreshExpiredTiles&&et&&q.setExpiryData(et),q.loadVectorData(et,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),ne(null),void(q.reloadCallback&&(this.loadTile(q,q.reloadCallback),q.reloadCallback=null)))}Le.request.collectResourceTiming=this._collectResourceTiming,q.actor&&q.state!=="expired"?q.state==="loading"?q.reloadCallback=ne:q.request=q.actor.send("reloadTile",Le,Ne.bind(this)):(q.actor=this.dispatcher.getActor(),q.request=q.actor.send("loadTile",Le,Ne.bind(this)))},Y.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.actor&&q.actor.send("abortTile",{uid:q.uid,type:this.type,source:this.id},void 0)},Y.prototype.unloadTile=function(q){q.unloadVectorData(),q.actor&&q.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id},void 0)},Y.prototype.hasTransition=function(){return!1},Y}(l.Evented),U=function(D){function Y(q,ne,pe,Le){D.call(this),this.id=q,this.dispatcher=pe,this.setEventedParent(Le),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},ne),l.extend(this,l.pick(ne,["url","scheme","tileSize"]))}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(ne,pe){q._tileJSONRequest=null,q._loaded=!0,ne?q.fire(new l.ErrorEvent(ne)):pe&&(l.extend(q,pe),pe.bounds&&(q.tileBounds=new P(pe.bounds,q.minzoom,q.maxzoom)),l.postTurnstileEvent(pe.tiles),l.postMapLoadEvent(pe.tiles,q.map._getMapId(),q.map._requestManager._skuToken),q.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return l.extend({},this._options)},Y.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},Y.prototype.loadTile=function(q,ne){var pe=this,Le=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);q.request=l.getImage(this.map._requestManager.transformRequest(Le,l.ResourceType.Tile),function(Ne,qe){if(delete q.request,q.aborted)q.state="unloaded",ne(null);else if(Ne)q.state="errored",ne(Ne);else if(qe){pe.map._refreshExpiredTiles&&q.setExpiryData(qe),delete qe.cacheControl,delete qe.expires;var et=pe.map.painter.context,vt=et.gl;q.texture=pe.map.painter.getTileTexture(qe.width),q.texture?q.texture.update(qe,{useMipmap:!0}):(q.texture=new l.Texture(et,qe,vt.RGBA,{useMipmap:!0}),q.texture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE,vt.LINEAR_MIPMAP_NEAREST),et.extTextureFilterAnisotropic&&vt.texParameterf(vt.TEXTURE_2D,et.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,et.extTextureFilterAnisotropicMax)),q.state="loaded",l.cacheEntryPossiblyAdded(pe.dispatcher),ne(null)}})},Y.prototype.abortTile=function(q,ne){q.request&&(q.request.cancel(),delete q.request),ne()},Y.prototype.unloadTile=function(q,ne){q.texture&&this.map.painter.saveTileTexture(q.texture),ne()},Y.prototype.hasTransition=function(){return!1},Y}(l.Evented),z=function(D){function Y(q,ne,pe,Le){D.call(this,q,ne,pe,Le),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},ne),this.encoding=ne.encoding||"mapbox"}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},Y.prototype.loadTile=function(q,ne){var pe=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Le(Ne,qe){Ne&&(q.state="errored",ne(Ne)),qe&&(q.dem=qe,q.needsHillshadePrepare=!0,q.state="loaded",ne(null))}q.request=l.getImage(this.map._requestManager.transformRequest(pe,l.ResourceType.Tile),function(Ne,qe){if(delete q.request,q.aborted)q.state="unloaded",ne(null);else if(Ne)q.state="errored",ne(Ne);else if(qe){this.map._refreshExpiredTiles&&q.setExpiryData(qe),delete qe.cacheControl,delete qe.expires;var et=l.window.ImageBitmap&&qe instanceof l.window.ImageBitmap&&l.offscreenCanvasSupported()?qe:l.browser.getImageData(qe,1),vt={uid:q.uid,coord:q.tileID,source:this.id,rawImageData:et,encoding:this.encoding};q.actor&&q.state!=="expired"||(q.actor=this.dispatcher.getActor(),q.actor.send("loadDEMTile",vt,Le.bind(this)))}}.bind(this)),q.neighboringTiles=this._getNeighboringTiles(q.tileID)},Y.prototype._getNeighboringTiles=function(q){var ne=q.canonical,pe=Math.pow(2,ne.z),Le=(ne.x-1+pe)%pe,Ne=ne.x===0?q.wrap-1:q.wrap,qe=(ne.x+1+pe)%pe,et=ne.x+1===pe?q.wrap+1:q.wrap,vt={};return vt[new l.OverscaledTileID(q.overscaledZ,Ne,ne.z,Le,ne.y).key]={backfilled:!1},vt[new l.OverscaledTileID(q.overscaledZ,et,ne.z,qe,ne.y).key]={backfilled:!1},ne.y>0&&(vt[new l.OverscaledTileID(q.overscaledZ,Ne,ne.z,Le,ne.y-1).key]={backfilled:!1},vt[new l.OverscaledTileID(q.overscaledZ,q.wrap,ne.z,ne.x,ne.y-1).key]={backfilled:!1},vt[new l.OverscaledTileID(q.overscaledZ,et,ne.z,qe,ne.y-1).key]={backfilled:!1}),ne.y+1<pe&&(vt[new l.OverscaledTileID(q.overscaledZ,Ne,ne.z,Le,ne.y+1).key]={backfilled:!1},vt[new l.OverscaledTileID(q.overscaledZ,q.wrap,ne.z,ne.x,ne.y+1).key]={backfilled:!1},vt[new l.OverscaledTileID(q.overscaledZ,et,ne.z,qe,ne.y+1).key]={backfilled:!1}),vt},Y.prototype.unloadTile=function(q){q.demTexture&&this.map.painter.saveTileTexture(q.demTexture),q.fbo&&(q.fbo.destroy(),delete q.fbo),q.dem&&delete q.dem,delete q.neighboringTiles,q.state="unloaded",q.actor&&q.actor.send("removeDEMTile",{uid:q.uid,source:this.id})},Y}(U),H=function(D){function Y(q,ne,pe,Le){D.call(this),this.id=q,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=pe.getActor(),this.setEventedParent(Le),this._data=ne.data,this._options=l.extend({},ne),this._collectResourceTiming=ne.collectResourceTiming,this._resourceTiming=[],ne.maxzoom!==void 0&&(this.maxzoom=ne.maxzoom),ne.type&&(this.type=ne.type),ne.attribution&&(this.attribution=ne.attribution),this.promoteId=ne.promoteId;var Ne=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:ne.cluster||!1,geojsonVtOptions:{buffer:(ne.buffer!==void 0?ne.buffer:128)*Ne,tolerance:(ne.tolerance!==void 0?ne.tolerance:.375)*Ne,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:ne.lineMetrics||!1,generateId:ne.generateId||!1},superclusterOptions:{maxZoom:ne.clusterMaxZoom!==void 0?Math.min(ne.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:l.EXTENT,radius:(ne.clusterRadius||50)*Ne,log:!1,generateId:ne.generateId||!1},clusterProperties:ne.clusterProperties},ne.workerOptions)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var q=this;this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ne){if(ne)q.fire(new l.ErrorEvent(ne));else{var pe={dataType:"source",sourceDataType:"metadata"};q._collectResourceTiming&&q._resourceTiming&&q._resourceTiming.length>0&&(pe.resourceTiming=q._resourceTiming,q._resourceTiming=[]),q.fire(new l.Event("data",pe))}})},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.setData=function(q){var ne=this;return this._data=q,this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(pe){if(pe)ne.fire(new l.ErrorEvent(pe));else{var Le={dataType:"source",sourceDataType:"content"};ne._collectResourceTiming&&ne._resourceTiming&&ne._resourceTiming.length>0&&(Le.resourceTiming=ne._resourceTiming,ne._resourceTiming=[]),ne.fire(new l.Event("data",Le))}}),this},Y.prototype.getClusterExpansionZoom=function(q,ne){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:q,source:this.id},ne),this},Y.prototype.getClusterChildren=function(q,ne){return this.actor.send("geojson.getClusterChildren",{clusterId:q,source:this.id},ne),this},Y.prototype.getClusterLeaves=function(q,ne,pe,Le){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:q,limit:ne,offset:pe},Le),this},Y.prototype._updateWorkerData=function(q){var ne=this;this._loaded=!1;var pe=l.extend({},this.workerOptions),Le=this._data;typeof Le=="string"?(pe.request=this.map._requestManager.transformRequest(l.browser.resolveURL(Le),l.ResourceType.Source),pe.request.collectResourceTiming=this._collectResourceTiming):pe.data=JSON.stringify(Le),this.actor.send(this.type+".loadData",pe,function(Ne,qe){ne._removed||qe&&qe.abandoned||(ne._loaded=!0,qe&&qe.resourceTiming&&qe.resourceTiming[ne.id]&&(ne._resourceTiming=qe.resourceTiming[ne.id].slice(0)),ne.actor.send(ne.type+".coalesce",{source:pe.source},null),q(Ne))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.loadTile=function(q,ne){var pe=this,Le=q.actor?"reloadTile":"loadTile";q.actor=this.actor;var Ne={type:this.type,uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};q.request=this.actor.send(Le,Ne,function(qe,et){return delete q.request,q.unloadVectorData(),q.aborted?ne(null):qe?ne(qe):(q.loadVectorData(et,pe.map.painter,Le==="reloadTile"),ne(null))})},Y.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.aborted=!0},Y.prototype.unloadTile=function(q){q.unloadVectorData(),this.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id})},Y.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},Y.prototype.serialize=function(){return l.extend({},this._options,{type:this.type,data:this._data})},Y.prototype.hasTransition=function(){return!1},Y}(l.Evented),F=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),N=function(D){function Y(q,ne,pe,Le){D.call(this),this.id=q,this.dispatcher=pe,this.coordinates=ne.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Le),this.options=ne}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(q,ne){var pe=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),function(Le,Ne){pe._loaded=!0,Le?pe.fire(new l.ErrorEvent(Le)):Ne&&(pe.image=Ne,q&&(pe.coordinates=q),ne&&ne(),pe._finishLoading())})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.updateImage=function(q){var ne=this;return this.image&&q.url?(this.options.url=q.url,this.load(q.coordinates,function(){ne.texture=null}),this):this},Y.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.setCoordinates=function(q){var ne=this;this.coordinates=q;var pe=q.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(Ne){for(var qe=1/0,et=1/0,vt=-1/0,xt=-1/0,te=0,ue=Ne;te<ue.length;te+=1){var we=ue[te];qe=Math.min(qe,we.x),et=Math.min(et,we.y),vt=Math.max(vt,we.x),xt=Math.max(xt,we.y)}var Pe=vt-qe,De=xt-et,Ue=Math.max(Pe,De),Ze=Math.max(0,Math.floor(-Math.log(Ue)/Math.LN2)),Je=Math.pow(2,Ze);return new l.CanonicalTileID(Ze,Math.floor((qe+vt)/2*Je),Math.floor((et+xt)/2*Je))}(pe),this.minzoom=this.maxzoom=this.tileID.z;var Le=pe.map(function(Ne){return ne.tileID.getTilePoint(Ne)._round()});return this._boundsArray=new l.StructArrayLayout4i8,this._boundsArray.emplaceBack(Le[0].x,Le[0].y,0,0),this._boundsArray.emplaceBack(Le[1].x,Le[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(Le[3].x,Le[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(Le[2].x,Le[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this},Y.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var q=this.map.painter.context,ne=q.gl;for(var pe in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l.Texture(q,this.image,ne.RGBA),this.texture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE)),this.tiles){var Le=this.tiles[pe];Le.state!=="loaded"&&(Le.state="loaded",Le.texture=this.texture)}}},Y.prototype.loadTile=function(q,ne){this.tileID&&this.tileID.equals(q.tileID.canonical)?(this.tiles[String(q.tileID.wrap)]=q,q.buckets={},ne(null)):(q.state="errored",ne(null))},Y.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return!1},Y}(l.Evented),B=function(D){function Y(q,ne,pe,Le){D.call(this,q,ne,pe,Le),this.roundZoom=!0,this.type="video",this.options=ne}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var q=this;this._loaded=!1;var ne=this.options;this.urls=[];for(var pe=0,Le=ne.urls;pe<Le.length;pe+=1){var Ne=Le[pe];this.urls.push(this.map._requestManager.transformRequest(Ne,l.ResourceType.Source).url)}l.getVideo(this.urls,function(qe,et){q._loaded=!0,qe?q.fire(new l.ErrorEvent(qe)):et&&(q.video=et,q.video.loop=!0,q.video.addEventListener("playing",function(){q.map.triggerRepaint()}),q.map&&q.video.play(),q._finishLoading())})},Y.prototype.pause=function(){this.video&&this.video.pause()},Y.prototype.play=function(){this.video&&this.video.play()},Y.prototype.seek=function(q){if(this.video){var ne=this.video.seekable;q<ne.start(0)||q>ne.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ne.start(0)+" and "+ne.end(0)+"-second mark."))):this.video.currentTime=q}},Y.prototype.getVideo=function(){return this.video},Y.prototype.onAdd=function(q){this.map||(this.map=q,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Y.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var q=this.map.painter.context,ne=q.gl;for(var pe in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),ne.texSubImage2D(ne.TEXTURE_2D,0,0,0,ne.RGBA,ne.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(q,this.video,ne.RGBA),this.texture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE)),this.tiles){var Le=this.tiles[pe];Le.state!=="loaded"&&(Le.state="loaded",Le.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this.video&&!this.video.paused},Y}(N),j=function(D){function Y(q,ne,pe,Le){D.call(this,q,ne,pe,Le),ne.coordinates?Array.isArray(ne.coordinates)&&ne.coordinates.length===4&&!ne.coordinates.some(function(Ne){return!Array.isArray(Ne)||Ne.length!==2||Ne.some(function(qe){return typeof qe!="number"})})||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+q,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+q,null,'missing required property "coordinates"'))),ne.animate&&typeof ne.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError("sources."+q,null,'optional "animate" property must be a boolean value'))),ne.canvas?typeof ne.canvas=="string"||ne.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+q,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+q,null,'missing required property "canvas"'))),this.options=ne,this.animate=ne.animate===void 0||ne.animate}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},Y.prototype.getCanvas=function(){return this.canvas},Y.prototype.onAdd=function(q){this.map=q,this.load(),this.canvas&&this.animate&&this.play()},Y.prototype.onRemove=function(){this.pause()},Y.prototype.prepare=function(){var q=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,q=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,q=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var ne=this.map.painter.context,pe=ne.gl;for(var Le in this.boundsBuffer||(this.boundsBuffer=ne.createVertexBuffer(this._boundsArray,F.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(q||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(ne,this.canvas,pe.RGBA,{premultiply:!0}),this.tiles){var Ne=this.tiles[Le];Ne.state!=="loaded"&&(Ne.state="loaded",Ne.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this._playing},Y.prototype._hasInvalidDimensions=function(){for(var q=0,ne=[this.canvas.width,this.canvas.height];q<ne.length;q+=1){var pe=ne[q];if(isNaN(pe)||pe<=0)return!0}return!1},Y}(N),K={vector:I,raster:U,"raster-dem":z,geojson:H,video:B,image:N,canvas:j};function G(D,Y){var q=l.identity([]);return l.translate(q,q,[1,1,0]),l.scale(q,q,[.5*D.width,.5*D.height,1]),l.multiply(q,q,D.calculatePosMatrix(Y.toUnwrapped()))}function V(D,Y,q,ne,pe,Le){var Ne=function(De,Ue,Ze){if(De)for(var Je=0,it=De;Je<it.length;Je+=1){var ut=Ue[it[Je]];if(ut&&ut.source===Ze&&ut.type==="fill-extrusion")return!0}else for(var St in Ue){var Dt=Ue[St];if(Dt.source===Ze&&Dt.type==="fill-extrusion")return!0}return!1}(pe&&pe.layers,Y,D.id),qe=Le.maxPitchScaleFactor(),et=D.tilesIn(ne,qe,Ne);et.sort(W);for(var vt=[],xt=0,te=et;xt<te.length;xt+=1){var ue=te[xt];vt.push({wrappedTileID:ue.tileID.wrapped().key,queryResults:ue.tile.queryRenderedFeatures(Y,q,D._state,ue.queryGeometry,ue.cameraQueryGeometry,ue.scale,pe,Le,qe,G(D.transform,ue.tileID))})}var we=function(De){for(var Ue={},Ze={},Je=0,it=De;Je<it.length;Je+=1){var ut=it[Je],St=ut.queryResults,Dt=ut.wrappedTileID,Ft=Ze[Dt]=Ze[Dt]||{};for(var Yt in St)for(var ln=St[Yt],Xt=Ft[Yt]=Ft[Yt]||{},en=Ue[Yt]=Ue[Yt]||[],Jt=0,bn=ln;Jt<bn.length;Jt+=1){var gn=bn[Jt];Xt[gn.featureIndex]||(Xt[gn.featureIndex]=!0,en.push(gn))}}return Ue}(vt);for(var Pe in we)we[Pe].forEach(function(De){var Ue=De.feature,Ze=D.getFeatureState(Ue.layer["source-layer"],Ue.id);Ue.source=Ue.layer.source,Ue.layer["source-layer"]&&(Ue.sourceLayer=Ue.layer["source-layer"]),Ue.state=Ze});return we}function W(D,Y){var q=D.tileID,ne=Y.tileID;return q.overscaledZ-ne.overscaledZ||q.canonical.y-ne.canonical.y||q.wrap-ne.wrap||q.canonical.x-ne.canonical.x}var J=function(D,Y){this.max=D,this.onRemove=Y,this.reset()};J.prototype.reset=function(){for(var D in this.data)for(var Y=0,q=this.data[D];Y<q.length;Y+=1){var ne=q[Y];ne.timeout&&clearTimeout(ne.timeout),this.onRemove(ne.value)}return this.data={},this.order=[],this},J.prototype.add=function(D,Y,q){var ne=this,pe=D.wrapped().key;this.data[pe]===void 0&&(this.data[pe]=[]);var Le={value:Y,timeout:void 0};if(q!==void 0&&(Le.timeout=setTimeout(function(){ne.remove(D,Le)},q)),this.data[pe].push(Le),this.order.push(pe),this.order.length>this.max){var Ne=this._getAndRemoveByKey(this.order[0]);Ne&&this.onRemove(Ne)}return this},J.prototype.has=function(D){return D.wrapped().key in this.data},J.prototype.getAndRemove=function(D){return this.has(D)?this._getAndRemoveByKey(D.wrapped().key):null},J.prototype._getAndRemoveByKey=function(D){var Y=this.data[D].shift();return Y.timeout&&clearTimeout(Y.timeout),this.data[D].length===0&&delete this.data[D],this.order.splice(this.order.indexOf(D),1),Y.value},J.prototype.getByKey=function(D){var Y=this.data[D];return Y?Y[0].value:null},J.prototype.get=function(D){return this.has(D)?this.data[D.wrapped().key][0].value:null},J.prototype.remove=function(D,Y){if(!this.has(D))return this;var q=D.wrapped().key,ne=Y===void 0?0:this.data[q].indexOf(Y),pe=this.data[q][ne];return this.data[q].splice(ne,1),pe.timeout&&clearTimeout(pe.timeout),this.data[q].length===0&&delete this.data[q],this.onRemove(pe.value),this.order.splice(this.order.indexOf(q),1),this},J.prototype.setMaxSize=function(D){for(this.max=D;this.order.length>this.max;){var Y=this._getAndRemoveByKey(this.order[0]);Y&&this.onRemove(Y)}return this},J.prototype.filter=function(D){var Y=[];for(var q in this.data)for(var ne=0,pe=this.data[q];ne<pe.length;ne+=1){var Le=pe[ne];D(Le.value)||Y.push(Le)}for(var Ne=0,qe=Y;Ne<qe.length;Ne+=1){var et=qe[Ne];this.remove(et.value.tileID,et)}};var X=function(D,Y,q){this.context=D;var ne=D.gl;this.buffer=ne.createBuffer(),this.dynamicDraw=Boolean(q),this.context.unbindVAO(),D.bindElementBuffer.set(this.buffer),ne.bufferData(ne.ELEMENT_ARRAY_BUFFER,Y.arrayBuffer,this.dynamicDraw?ne.DYNAMIC_DRAW:ne.STATIC_DRAW),this.dynamicDraw||delete Y.arrayBuffer};X.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},X.prototype.updateData=function(D){var Y=this.context.gl;this.context.unbindVAO(),this.bind(),Y.bufferSubData(Y.ELEMENT_ARRAY_BUFFER,0,D.arrayBuffer)},X.prototype.destroy=function(){var D=this.context.gl;this.buffer&&(D.deleteBuffer(this.buffer),delete this.buffer)};var ee={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},re=function(D,Y,q,ne){this.length=Y.length,this.attributes=q,this.itemSize=Y.bytesPerElement,this.dynamicDraw=ne,this.context=D;var pe=D.gl;this.buffer=pe.createBuffer(),D.bindVertexBuffer.set(this.buffer),pe.bufferData(pe.ARRAY_BUFFER,Y.arrayBuffer,this.dynamicDraw?pe.DYNAMIC_DRAW:pe.STATIC_DRAW),this.dynamicDraw||delete Y.arrayBuffer};re.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},re.prototype.updateData=function(D){var Y=this.context.gl;this.bind(),Y.bufferSubData(Y.ARRAY_BUFFER,0,D.arrayBuffer)},re.prototype.enableAttributes=function(D,Y){for(var q=0;q<this.attributes.length;q++){var ne=this.attributes[q],pe=Y.attributes[ne.name];pe!==void 0&&D.enableVertexAttribArray(pe)}},re.prototype.setVertexAttribPointers=function(D,Y,q){for(var ne=0;ne<this.attributes.length;ne++){var pe=this.attributes[ne],Le=Y.attributes[pe.name];Le!==void 0&&D.vertexAttribPointer(Le,pe.components,D[ee[pe.type]],!1,this.itemSize,pe.offset+this.itemSize*(q||0))}},re.prototype.destroy=function(){var D=this.context.gl;this.buffer&&(D.deleteBuffer(this.buffer),delete this.buffer)};var ie=function(D){this.gl=D.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ie.prototype.get=function(){return this.current},ie.prototype.set=function(D){},ie.prototype.getDefault=function(){return this.default},ie.prototype.setDefault=function(){this.set(this.default)};var se=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return l.Color.transparent},Y.prototype.set=function(q){var ne=this.current;(q.r!==ne.r||q.g!==ne.g||q.b!==ne.b||q.a!==ne.a||this.dirty)&&(this.gl.clearColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},Y}(ie),fe=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 1},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearDepth(q),this.current=q,this.dirty=!1)},Y}(ie),ye=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 0},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearStencil(q),this.current=q,this.dirty=!1)},Y}(ie),ge=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return[!0,!0,!0,!0]},Y.prototype.set=function(q){var ne=this.current;(q[0]!==ne[0]||q[1]!==ne[1]||q[2]!==ne[2]||q[3]!==ne[3]||this.dirty)&&(this.gl.colorMask(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},Y}(ie),he=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!0},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthMask(q),this.current=q,this.dirty=!1)},Y}(ie),ve=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 255},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.stencilMask(q),this.current=q,this.dirty=!1)},Y}(ie),Oe=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},Y.prototype.set=function(q){var ne=this.current;(q.func!==ne.func||q.ref!==ne.ref||q.mask!==ne.mask||this.dirty)&&(this.gl.stencilFunc(q.func,q.ref,q.mask),this.current=q,this.dirty=!1)},Y}(ie),xe=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var q=this.gl;return[q.KEEP,q.KEEP,q.KEEP]},Y.prototype.set=function(q){var ne=this.current;(q[0]!==ne[0]||q[1]!==ne[1]||q[2]!==ne[2]||this.dirty)&&(this.gl.stencilOp(q[0],q[1],q[2]),this.current=q,this.dirty=!1)},Y}(ie),ke=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;q?ne.enable(ne.STENCIL_TEST):ne.disable(ne.STENCIL_TEST),this.current=q,this.dirty=!1}},Y}(ie),Me=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return[0,1]},Y.prototype.set=function(q){var ne=this.current;(q[0]!==ne[0]||q[1]!==ne[1]||this.dirty)&&(this.gl.depthRange(q[0],q[1]),this.current=q,this.dirty=!1)},Y}(ie),Te=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;q?ne.enable(ne.DEPTH_TEST):ne.disable(ne.DEPTH_TEST),this.current=q,this.dirty=!1}},Y}(ie),Q=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.LESS},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthFunc(q),this.current=q,this.dirty=!1)},Y}(ie),oe=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;q?ne.enable(ne.BLEND):ne.disable(ne.BLEND),this.current=q,this.dirty=!1}},Y}(ie),ce=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var q=this.gl;return[q.ONE,q.ZERO]},Y.prototype.set=function(q){var ne=this.current;(q[0]!==ne[0]||q[1]!==ne[1]||this.dirty)&&(this.gl.blendFunc(q[0],q[1]),this.current=q,this.dirty=!1)},Y}(ie),me=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return l.Color.transparent},Y.prototype.set=function(q){var ne=this.current;(q.r!==ne.r||q.g!==ne.g||q.b!==ne.b||q.a!==ne.a||this.dirty)&&(this.gl.blendColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},Y}(ie),Ae=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.FUNC_ADD},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.blendEquation(q),this.current=q,this.dirty=!1)},Y}(ie),Ie=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;q?ne.enable(ne.CULL_FACE):ne.disable(ne.CULL_FACE),this.current=q,this.dirty=!1}},Y}(ie),Ce=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.BACK},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.cullFace(q),this.current=q,this.dirty=!1)},Y}(ie),Re=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.CCW},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.frontFace(q),this.current=q,this.dirty=!1)},Y}(ie),le=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.useProgram(q),this.current=q,this.dirty=!1)},Y}(ie),de=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.TEXTURE0},Y.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.activeTexture(q),this.current=q,this.dirty=!1)},Y}(ie),_e=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var q=this.gl;return[0,0,q.drawingBufferWidth,q.drawingBufferHeight]},Y.prototype.set=function(q){var ne=this.current;(q[0]!==ne[0]||q[1]!==ne[1]||q[2]!==ne[2]||q[3]!==ne[3]||this.dirty)&&(this.gl.viewport(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},Y}(ie),Fe=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;ne.bindFramebuffer(ne.FRAMEBUFFER,q),this.current=q,this.dirty=!1}},Y}(ie),Ve=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;ne.bindRenderbuffer(ne.RENDERBUFFER,q),this.current=q,this.dirty=!1}},Y}(ie),He=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;ne.bindTexture(ne.TEXTURE_2D,q),this.current=q,this.dirty=!1}},Y}(ie),nt=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;ne.bindBuffer(ne.ARRAY_BUFFER,q),this.current=q,this.dirty=!1}},Y}(ie),tt=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){var ne=this.gl;ne.bindBuffer(ne.ELEMENT_ARRAY_BUFFER,q),this.current=q,this.dirty=!1},Y}(ie),ot=function(D){function Y(q){D.call(this,q),this.vao=q.extVertexArrayObject}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){this.vao&&(q!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(q),this.current=q,this.dirty=!1)},Y}(ie),dt=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 4},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;ne.pixelStorei(ne.UNPACK_ALIGNMENT,q),this.current=q,this.dirty=!1}},Y}(ie),kt=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q),this.current=q,this.dirty=!1}},Y}(ie),mt=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(q!==this.current||this.dirty){var ne=this.gl;ne.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,q),this.current=q,this.dirty=!1}},Y}(ie),wt=function(D){function Y(q,ne){D.call(this,q),this.context=q,this.parent=ne}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y}(ie),Lt=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.setDirty=function(){this.dirty=!0},Y.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ne=this.gl;ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,q,0),this.current=q,this.dirty=!1}},Y}(wt),Ct=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ne=this.gl;ne.framebufferRenderbuffer(ne.FRAMEBUFFER,ne.DEPTH_ATTACHMENT,ne.RENDERBUFFER,q),this.current=q,this.dirty=!1}},Y}(wt),It=function(D,Y,q,ne){this.context=D,this.width=Y,this.height=q;var pe=D.gl,Le=this.framebuffer=pe.createFramebuffer();this.colorAttachment=new Lt(D,Le),ne&&(this.depthAttachment=new Ct(D,Le))};It.prototype.destroy=function(){var D=this.context.gl,Y=this.colorAttachment.get();if(Y&&D.deleteTexture(Y),this.depthAttachment){var q=this.depthAttachment.get();q&&D.deleteRenderbuffer(q)}D.deleteFramebuffer(this.framebuffer)};var Ut=function(D,Y,q){this.func=D,this.mask=Y,this.range=q};Ut.ReadOnly=!1,Ut.ReadWrite=!0,Ut.disabled=new Ut(519,Ut.ReadOnly,[0,1]);var Rt=7680,Ge=function(D,Y,q,ne,pe,Le){this.test=D,this.ref=Y,this.mask=q,this.fail=ne,this.depthFail=pe,this.pass=Le};Ge.disabled=new Ge({func:519,mask:0},0,0,Rt,Rt,Rt);var We=function(D,Y,q){this.blendFunction=D,this.blendColor=Y,this.mask=q};We.disabled=new We(We.Replace=[1,0],l.Color.transparent,[!1,!1,!1,!1]),We.unblended=new We(We.Replace,l.Color.transparent,[!0,!0,!0,!0]),We.alphaBlended=new We([1,771],l.Color.transparent,[!0,!0,!0,!0]);var Be=function(D,Y,q){this.enable=D,this.mode=Y,this.frontFace=q};Be.disabled=new Be(!1,1029,2305),Be.backCCW=new Be(!0,1029,2305);var Ye=function(D){this.gl=D,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new se(this),this.clearDepth=new fe(this),this.clearStencil=new ye(this),this.colorMask=new ge(this),this.depthMask=new he(this),this.stencilMask=new ve(this),this.stencilFunc=new Oe(this),this.stencilOp=new xe(this),this.stencilTest=new ke(this),this.depthRange=new Me(this),this.depthTest=new Te(this),this.depthFunc=new Q(this),this.blend=new oe(this),this.blendFunc=new ce(this),this.blendColor=new me(this),this.blendEquation=new Ae(this),this.cullFace=new Ie(this),this.cullFaceSide=new Ce(this),this.frontFace=new Re(this),this.program=new le(this),this.activeTexture=new de(this),this.viewport=new _e(this),this.bindFramebuffer=new Fe(this),this.bindRenderbuffer=new Ve(this),this.bindTexture=new He(this),this.bindVertexBuffer=new nt(this),this.bindElementBuffer=new tt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ot(this),this.pixelStoreUnpack=new dt(this),this.pixelStoreUnpackPremultiplyAlpha=new kt(this),this.pixelStoreUnpackFlipY=new mt(this),this.extTextureFilterAnisotropic=D.getExtension("EXT_texture_filter_anisotropic")||D.getExtension("MOZ_EXT_texture_filter_anisotropic")||D.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=D.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=D.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(D.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=D.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=D.getExtension("EXT_disjoint_timer_query")};Ye.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ye.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ye.prototype.createIndexBuffer=function(D,Y){return new X(this,D,Y)},Ye.prototype.createVertexBuffer=function(D,Y,q){return new re(this,D,Y,q)},Ye.prototype.createRenderbuffer=function(D,Y,q){var ne=this.gl,pe=ne.createRenderbuffer();return this.bindRenderbuffer.set(pe),ne.renderbufferStorage(ne.RENDERBUFFER,D,Y,q),this.bindRenderbuffer.set(null),pe},Ye.prototype.createFramebuffer=function(D,Y,q){return new It(this,D,Y,q)},Ye.prototype.clear=function(D){var Y=D.color,q=D.depth,ne=this.gl,pe=0;Y&&(pe|=ne.COLOR_BUFFER_BIT,this.clearColor.set(Y),this.colorMask.set([!0,!0,!0,!0])),q!==void 0&&(pe|=ne.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(q),this.depthMask.set(!0)),ne.clear(pe)},Ye.prototype.setCullFace=function(D){D.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(D.mode),this.frontFace.set(D.frontFace))},Ye.prototype.setDepthMode=function(D){D.func!==this.gl.ALWAYS||D.mask?(this.depthTest.set(!0),this.depthFunc.set(D.func),this.depthMask.set(D.mask),this.depthRange.set(D.range)):this.depthTest.set(!1)},Ye.prototype.setStencilMode=function(D){D.test.func!==this.gl.ALWAYS||D.mask?(this.stencilTest.set(!0),this.stencilMask.set(D.mask),this.stencilOp.set([D.fail,D.depthFail,D.pass]),this.stencilFunc.set({func:D.test.func,ref:D.ref,mask:D.test.mask})):this.stencilTest.set(!1)},Ye.prototype.setColorMode=function(D){l.deepEqual(D.blendFunction,We.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(D.blendFunction),this.blendColor.set(D.blendColor)),this.colorMask.set(D.mask)},Ye.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var rt=function(D){function Y(q,ne,pe){var Le=this;D.call(this),this.id=q,this.dispatcher=pe,this.on("data",function(Ne){Ne.dataType==="source"&&Ne.sourceDataType==="metadata"&&(Le._sourceLoaded=!0),Le._sourceLoaded&&!Le._paused&&Ne.dataType==="source"&&Ne.sourceDataType==="content"&&(Le.reload(),Le.transform&&Le.update(Le.transform))}),this.on("error",function(){Le._sourceErrored=!0}),this._source=function(Ne,qe,et,vt){var xt=new K[qe.type](Ne,qe,et,vt);if(xt.id!==Ne)throw new Error("Expected Source id to be "+Ne+" instead of "+xt.id);return l.bindAll(["load","abort","unload","serialize","prepare"],xt),xt}(q,ne,pe,this),this._tiles={},this._cache=new J(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new l.SourceFeatureState}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.onAdd=function(q){this.map=q,this._maxTileCacheSize=q?q._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(q)},Y.prototype.onRemove=function(q){this._source&&this._source.onRemove&&this._source.onRemove(q)},Y.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var q in this._tiles){var ne=this._tiles[q];if(ne.state!=="loaded"&&ne.state!=="errored")return!1}return!0},Y.prototype.getSource=function(){return this._source},Y.prototype.pause=function(){this._paused=!0},Y.prototype.resume=function(){if(this._paused){var q=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,q&&this.reload(),this.transform&&this.update(this.transform)}},Y.prototype._loadTile=function(q,ne){return this._source.loadTile(q,ne)},Y.prototype._unloadTile=function(q){if(this._source.unloadTile)return this._source.unloadTile(q,function(){})},Y.prototype._abortTile=function(q){if(this._source.abortTile)return this._source.abortTile(q,function(){})},Y.prototype.serialize=function(){return this._source.serialize()},Y.prototype.prepare=function(q){for(var ne in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var pe=this._tiles[ne];pe.upload(q),pe.prepare(this.map.style.imageManager)}},Y.prototype.getIds=function(){return l.values(this._tiles).map(function(q){return q.tileID}).sort(Se).map(function(q){return q.key})},Y.prototype.getRenderableIds=function(q){var ne=this,pe=[];for(var Le in this._tiles)this._isIdRenderable(Le,q)&&pe.push(this._tiles[Le]);return q?pe.sort(function(Ne,qe){var et=Ne.tileID,vt=qe.tileID,xt=new l.Point(et.canonical.x,et.canonical.y)._rotate(ne.transform.angle),te=new l.Point(vt.canonical.x,vt.canonical.y)._rotate(ne.transform.angle);return et.overscaledZ-vt.overscaledZ||te.y-xt.y||te.x-xt.x}).map(function(Ne){return Ne.tileID.key}):pe.map(function(Ne){return Ne.tileID}).sort(Se).map(function(Ne){return Ne.key})},Y.prototype.hasRenderableParent=function(q){var ne=this.findLoadedParent(q,0);return!!ne&&this._isIdRenderable(ne.tileID.key)},Y.prototype._isIdRenderable=function(q,ne){return this._tiles[q]&&this._tiles[q].hasData()&&!this._coveredTiles[q]&&(ne||!this._tiles[q].holdingForFade())},Y.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var q in this._cache.reset(),this._tiles)this._tiles[q].state!=="errored"&&this._reloadTile(q,"reloading")},Y.prototype._reloadTile=function(q,ne){var pe=this._tiles[q];pe&&(pe.state!=="loading"&&(pe.state=ne),this._loadTile(pe,this._tileLoaded.bind(this,pe,q,ne)))},Y.prototype._tileLoaded=function(q,ne,pe,Le){if(Le)return q.state="errored",void(Le.status!==404?this._source.fire(new l.ErrorEvent(Le,{tile:q})):this.update(this.transform));q.timeAdded=l.browser.now(),pe==="expired"&&(q.refreshedUponExpiration=!0),this._setTileReloadTimer(ne,q),this.getSource().type==="raster-dem"&&q.dem&&this._backfillDEM(q),this._state.initializeTileState(q,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:q,coord:q.tileID}))},Y.prototype._backfillDEM=function(q){for(var ne=this.getRenderableIds(),pe=0;pe<ne.length;pe++){var Le=ne[pe];if(q.neighboringTiles&&q.neighboringTiles[Le]){var Ne=this.getTileByID(Le);qe(q,Ne),qe(Ne,q)}}function qe(et,vt){et.needsHillshadePrepare=!0;var xt=vt.tileID.canonical.x-et.tileID.canonical.x,te=vt.tileID.canonical.y-et.tileID.canonical.y,ue=Math.pow(2,et.tileID.canonical.z),we=vt.tileID.key;xt===0&&te===0||Math.abs(te)>1||(Math.abs(xt)>1&&(Math.abs(xt+ue)===1?xt+=ue:Math.abs(xt-ue)===1&&(xt-=ue)),vt.dem&&et.dem&&(et.dem.backfillBorder(vt.dem,xt,te),et.neighboringTiles&&et.neighboringTiles[we]&&(et.neighboringTiles[we].backfilled=!0)))}},Y.prototype.getTile=function(q){return this.getTileByID(q.key)},Y.prototype.getTileByID=function(q){return this._tiles[q]},Y.prototype._retainLoadedChildren=function(q,ne,pe,Le){for(var Ne in this._tiles){var qe=this._tiles[Ne];if(!(Le[Ne]||!qe.hasData()||qe.tileID.overscaledZ<=ne||qe.tileID.overscaledZ>pe)){for(var et=qe.tileID;qe&&qe.tileID.overscaledZ>ne+1;){var vt=qe.tileID.scaledTo(qe.tileID.overscaledZ-1);(qe=this._tiles[vt.key])&&qe.hasData()&&(et=vt)}for(var xt=et;xt.overscaledZ>ne;)if(q[(xt=xt.scaledTo(xt.overscaledZ-1)).key]){Le[et.key]=et;break}}}},Y.prototype.findLoadedParent=function(q,ne){if(q.key in this._loadedParentTiles){var pe=this._loadedParentTiles[q.key];return pe&&pe.tileID.overscaledZ>=ne?pe:null}for(var Le=q.overscaledZ-1;Le>=ne;Le--){var Ne=q.scaledTo(Le),qe=this._getLoadedTile(Ne);if(qe)return qe}},Y.prototype._getLoadedTile=function(q){var ne=this._tiles[q.key];return ne&&ne.hasData()?ne:this._cache.getByKey(q.wrapped().key)},Y.prototype.updateCacheSize=function(q){var ne=(Math.ceil(q.width/this._source.tileSize)+1)*(Math.ceil(q.height/this._source.tileSize)+1),pe=Math.floor(5*ne),Le=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,pe):pe;this._cache.setMaxSize(Le)},Y.prototype.handleWrapJump=function(q){var ne=(q-(this._prevLng===void 0?q:this._prevLng))/360,pe=Math.round(ne);if(this._prevLng=q,pe){var Le={};for(var Ne in this._tiles){var qe=this._tiles[Ne];qe.tileID=qe.tileID.unwrapTo(qe.tileID.wrap+pe),Le[qe.tileID.key]=qe}for(var et in this._tiles=Le,this._timers)clearTimeout(this._timers[et]),delete this._timers[et];for(var vt in this._tiles){var xt=this._tiles[vt];this._setTileReloadTimer(vt,xt)}}},Y.prototype.update=function(q){var ne=this;if(this.transform=q,this._sourceLoaded&&!this._paused){var pe;this.updateCacheSize(q),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?pe=q.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ft){return new l.OverscaledTileID(Ft.canonical.z,Ft.wrap,Ft.canonical.z,Ft.canonical.x,Ft.canonical.y)}):(pe=q.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(pe=pe.filter(function(Ft){return ne._source.hasTile(Ft)}))):pe=[];var Le=q.coveringZoomLevel(this._source),Ne=Math.max(Le-Y.maxOverzooming,this._source.minzoom),qe=Math.max(Le+Y.maxUnderzooming,this._source.minzoom),et=this._updateRetainedTiles(pe,Le);if(ze(this._source.type)){for(var vt={},xt={},te=0,ue=Object.keys(et);te<ue.length;te+=1){var we=ue[te],Pe=et[we],De=this._tiles[we];if(De&&!(De.fadeEndTime&&De.fadeEndTime<=l.browser.now())){var Ue=this.findLoadedParent(Pe,Ne);Ue&&(this._addTile(Ue.tileID),vt[Ue.tileID.key]=Ue.tileID),xt[we]=Pe}}for(var Ze in this._retainLoadedChildren(xt,Le,qe,et),vt)et[Ze]||(this._coveredTiles[Ze]=!0,et[Ze]=vt[Ze])}for(var Je in et)this._tiles[Je].clearFadeHold();for(var it=0,ut=l.keysDifference(this._tiles,et);it<ut.length;it+=1){var St=ut[it],Dt=this._tiles[St];Dt.hasSymbolBuckets&&!Dt.holdingForFade()?Dt.setHoldDuration(this.map._fadeDuration):Dt.hasSymbolBuckets&&!Dt.symbolFadeFinished()||this._removeTile(St)}this._updateLoadedParentTileCache()}},Y.prototype.releaseSymbolFadeTiles=function(){for(var q in this._tiles)this._tiles[q].holdingForFade()&&this._removeTile(q)},Y.prototype._updateRetainedTiles=function(q,ne){for(var pe={},Le={},Ne=Math.max(ne-Y.maxOverzooming,this._source.minzoom),qe=Math.max(ne+Y.maxUnderzooming,this._source.minzoom),et={},vt=0,xt=q;vt<xt.length;vt+=1){var te=xt[vt],ue=this._addTile(te);pe[te.key]=te,ue.hasData()||ne<this._source.maxzoom&&(et[te.key]=te)}this._retainLoadedChildren(et,ne,qe,pe);for(var we=0,Pe=q;we<Pe.length;we+=1){var De=Pe[we],Ue=this._tiles[De.key];if(!Ue.hasData()){if(ne+1>this._source.maxzoom){var Ze=De.children(this._source.maxzoom)[0],Je=this.getTile(Ze);if(Je&&Je.hasData()){pe[Ze.key]=Ze;continue}}else{var it=De.children(this._source.maxzoom);if(pe[it[0].key]&&pe[it[1].key]&&pe[it[2].key]&&pe[it[3].key])continue}for(var ut=Ue.wasRequested(),St=De.overscaledZ-1;St>=Ne;--St){var Dt=De.scaledTo(St);if(Le[Dt.key]||(Le[Dt.key]=!0,!(Ue=this.getTile(Dt))&&ut&&(Ue=this._addTile(Dt)),Ue&&(pe[Dt.key]=Dt,ut=Ue.wasRequested(),Ue.hasData())))break}}}return pe},Y.prototype._updateLoadedParentTileCache=function(){for(var q in this._loadedParentTiles={},this._tiles){for(var ne=[],pe=void 0,Le=this._tiles[q].tileID;Le.overscaledZ>0;){if(Le.key in this._loadedParentTiles){pe=this._loadedParentTiles[Le.key];break}ne.push(Le.key);var Ne=Le.scaledTo(Le.overscaledZ-1);if(pe=this._getLoadedTile(Ne))break;Le=Ne}for(var qe=0,et=ne;qe<et.length;qe+=1){var vt=et[qe];this._loadedParentTiles[vt]=pe}}},Y.prototype._addTile=function(q){var ne=this._tiles[q.key];if(ne)return ne;(ne=this._cache.getAndRemove(q))&&(this._setTileReloadTimer(q.key,ne),ne.tileID=q,this._state.initializeTileState(ne,this.map?this.map.painter:null),this._cacheTimers[q.key]&&(clearTimeout(this._cacheTimers[q.key]),delete this._cacheTimers[q.key],this._setTileReloadTimer(q.key,ne)));var pe=Boolean(ne);return pe||(ne=new l.Tile(q,this._source.tileSize*q.overscaleFactor()),this._loadTile(ne,this._tileLoaded.bind(this,ne,q.key,ne.state))),ne?(ne.uses++,this._tiles[q.key]=ne,pe||this._source.fire(new l.Event("dataloading",{tile:ne,coord:ne.tileID,dataType:"source"})),ne):null},Y.prototype._setTileReloadTimer=function(q,ne){var pe=this;q in this._timers&&(clearTimeout(this._timers[q]),delete this._timers[q]);var Le=ne.getExpiryTimeout();Le&&(this._timers[q]=setTimeout(function(){pe._reloadTile(q,"expired"),delete pe._timers[q]},Le))},Y.prototype._removeTile=function(q){var ne=this._tiles[q];ne&&(ne.uses--,delete this._tiles[q],this._timers[q]&&(clearTimeout(this._timers[q]),delete this._timers[q]),ne.uses>0||(ne.hasData()&&ne.state!=="reloading"?this._cache.add(ne.tileID,ne,ne.getExpiryTimeout()):(ne.aborted=!0,this._abortTile(ne),this._unloadTile(ne))))},Y.prototype.clearTiles=function(){for(var q in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(q);this._cache.reset()},Y.prototype.tilesIn=function(q,ne,pe){var Le=this,Ne=[],qe=this.transform;if(!qe)return Ne;for(var et=pe?qe.getCameraQueryGeometry(q):q,vt=q.map(function(St){return qe.pointCoordinate(St)}),xt=et.map(function(St){return qe.pointCoordinate(St)}),te=this.getIds(),ue=1/0,we=1/0,Pe=-1/0,De=-1/0,Ue=0,Ze=xt;Ue<Ze.length;Ue+=1){var Je=Ze[Ue];ue=Math.min(ue,Je.x),we=Math.min(we,Je.y),Pe=Math.max(Pe,Je.x),De=Math.max(De,Je.y)}for(var it=function(St){var Dt=Le._tiles[te[St]];if(!Dt.holdingForFade()){var Ft=Dt.tileID,Yt=Math.pow(2,qe.zoom-Dt.tileID.overscaledZ),ln=ne*Dt.queryPadding*l.EXTENT/Dt.tileSize/Yt,Xt=[Ft.getTilePoint(new l.MercatorCoordinate(ue,we)),Ft.getTilePoint(new l.MercatorCoordinate(Pe,De))];if(Xt[0].x-ln<l.EXTENT&&Xt[0].y-ln<l.EXTENT&&Xt[1].x+ln>=0&&Xt[1].y+ln>=0){var en=vt.map(function(bn){return Ft.getTilePoint(bn)}),Jt=xt.map(function(bn){return Ft.getTilePoint(bn)});Ne.push({tile:Dt,tileID:Ft,queryGeometry:en,cameraQueryGeometry:Jt,scale:Yt})}}},ut=0;ut<te.length;ut++)it(ut);return Ne},Y.prototype.getVisibleCoordinates=function(q){for(var ne=this,pe=this.getRenderableIds(q).map(function(et){return ne._tiles[et].tileID}),Le=0,Ne=pe;Le<Ne.length;Le+=1){var qe=Ne[Le];qe.posMatrix=this.transform.calculatePosMatrix(qe.toUnwrapped())}return pe},Y.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ze(this._source.type))for(var q in this._tiles){var ne=this._tiles[q];if(ne.fadeEndTime!==void 0&&ne.fadeEndTime>=l.browser.now())return!0}return!1},Y.prototype.setFeatureState=function(q,ne,pe){q=q||"_geojsonTileLayer",this._state.updateState(q,ne,pe)},Y.prototype.removeFeatureState=function(q,ne,pe){q=q||"_geojsonTileLayer",this._state.removeFeatureState(q,ne,pe)},Y.prototype.getFeatureState=function(q,ne){return q=q||"_geojsonTileLayer",this._state.getState(q,ne)},Y.prototype.setDependencies=function(q,ne,pe){var Le=this._tiles[q];Le&&Le.setDependencies(ne,pe)},Y.prototype.reloadTilesForDependencies=function(q,ne){for(var pe in this._tiles)this._tiles[pe].hasDependency(q,ne)&&this._reloadTile(pe,"reloading");this._cache.filter(function(Le){return!Le.hasDependency(q,ne)})},Y}(l.Evented);function Se(D,Y){var q=Math.abs(2*D.wrap)-+(D.wrap<0),ne=Math.abs(2*Y.wrap)-+(Y.wrap<0);return D.overscaledZ-Y.overscaledZ||ne-q||Y.canonical.y-D.canonical.y||Y.canonical.x-D.canonical.x}function ze(D){return D==="raster"||D==="image"||D==="video"}function Ke(){return new l.window.Worker(yt.workerUrl)}rt.maxOverzooming=10,rt.maxUnderzooming=3;var st="mapboxgl_preloaded_worker_pool",ct=function(){this.active={}};ct.prototype.acquire=function(D){if(!this.workers)for(this.workers=[];this.workers.length<ct.workerCount;)this.workers.push(new Ke);return this.active[D]=!0,this.workers.slice()},ct.prototype.release=function(D){delete this.active[D],this.numActive()===0&&(this.workers.forEach(function(Y){Y.terminate()}),this.workers=null)},ct.prototype.isPreloaded=function(){return!!this.active[st]},ct.prototype.numActive=function(){return Object.keys(this.active).length};var Tt,Et=Math.floor(l.browser.hardwareConcurrency/2);function At(){return Tt||(Tt=new ct),Tt}function ht(D,Y){var q={};for(var ne in D)ne!=="ref"&&(q[ne]=D[ne]);return l.refProperties.forEach(function(pe){pe in Y&&(q[pe]=Y[pe])}),q}function pt(D){D=D.slice();for(var Y=Object.create(null),q=0;q<D.length;q++)Y[D[q].id]=D[q];for(var ne=0;ne<D.length;ne++)"ref"in D[ne]&&(D[ne]=ht(D[ne],Y[D[ne].ref]));return D}ct.workerCount=Math.max(Math.min(Et,6),1);var gt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Pt(D,Y,q){q.push({command:gt.addSource,args:[D,Y[D]]})}function Ot(D,Y,q){Y.push({command:gt.removeSource,args:[D]}),q[D]=!0}function Ht(D,Y,q,ne){Ot(D,q,ne),Pt(D,Y,q)}function jt(D,Y,q){var ne;for(ne in D[q])if(D[q].hasOwnProperty(ne)&&ne!=="data"&&!l.deepEqual(D[q][ne],Y[q][ne]))return!1;for(ne in Y[q])if(Y[q].hasOwnProperty(ne)&&ne!=="data"&&!l.deepEqual(D[q][ne],Y[q][ne]))return!1;return!0}function Nt(D,Y,q,ne,pe,Le){var Ne;for(Ne in Y=Y||{},D=D||{})D.hasOwnProperty(Ne)&&(l.deepEqual(D[Ne],Y[Ne])||q.push({command:Le,args:[ne,Ne,Y[Ne],pe]}));for(Ne in Y)Y.hasOwnProperty(Ne)&&!D.hasOwnProperty(Ne)&&(l.deepEqual(D[Ne],Y[Ne])||q.push({command:Le,args:[ne,Ne,Y[Ne],pe]}))}function Gt(D){return D.id}function un(D,Y){return D[Y.id]=Y,D}function pn(D,Y){if(!D)return[{command:gt.setStyle,args:[Y]}];var q=[];try{if(!l.deepEqual(D.version,Y.version))return[{command:gt.setStyle,args:[Y]}];l.deepEqual(D.center,Y.center)||q.push({command:gt.setCenter,args:[Y.center]}),l.deepEqual(D.zoom,Y.zoom)||q.push({command:gt.setZoom,args:[Y.zoom]}),l.deepEqual(D.bearing,Y.bearing)||q.push({command:gt.setBearing,args:[Y.bearing]}),l.deepEqual(D.pitch,Y.pitch)||q.push({command:gt.setPitch,args:[Y.pitch]}),l.deepEqual(D.sprite,Y.sprite)||q.push({command:gt.setSprite,args:[Y.sprite]}),l.deepEqual(D.glyphs,Y.glyphs)||q.push({command:gt.setGlyphs,args:[Y.glyphs]}),l.deepEqual(D.transition,Y.transition)||q.push({command:gt.setTransition,args:[Y.transition]}),l.deepEqual(D.light,Y.light)||q.push({command:gt.setLight,args:[Y.light]});var ne={},pe=[];(function(Ne,qe,et,vt){var xt;for(xt in qe=qe||{},Ne=Ne||{})Ne.hasOwnProperty(xt)&&(qe.hasOwnProperty(xt)||Ot(xt,et,vt));for(xt in qe)qe.hasOwnProperty(xt)&&(Ne.hasOwnProperty(xt)?l.deepEqual(Ne[xt],qe[xt])||(Ne[xt].type==="geojson"&&qe[xt].type==="geojson"&&jt(Ne,qe,xt)?et.push({command:gt.setGeoJSONSourceData,args:[xt,qe[xt].data]}):Ht(xt,qe,et,vt)):Pt(xt,qe,et))})(D.sources,Y.sources,pe,ne);var Le=[];D.layers&&D.layers.forEach(function(Ne){ne[Ne.source]?q.push({command:gt.removeLayer,args:[Ne.id]}):Le.push(Ne)}),q=q.concat(pe),function(Ne,qe,et){qe=qe||[];var vt,xt,te,ue,we,Pe,De,Ue=(Ne=Ne||[]).map(Gt),Ze=qe.map(Gt),Je=Ne.reduce(un,{}),it=qe.reduce(un,{}),ut=Ue.slice(),St=Object.create(null);for(vt=0,xt=0;vt<Ue.length;vt++)te=Ue[vt],it.hasOwnProperty(te)?xt++:(et.push({command:gt.removeLayer,args:[te]}),ut.splice(ut.indexOf(te,xt),1));for(vt=0,xt=0;vt<Ze.length;vt++)te=Ze[Ze.length-1-vt],ut[ut.length-1-vt]!==te&&(Je.hasOwnProperty(te)?(et.push({command:gt.removeLayer,args:[te]}),ut.splice(ut.lastIndexOf(te,ut.length-xt),1)):xt++,Pe=ut[ut.length-vt],et.push({command:gt.addLayer,args:[it[te],Pe]}),ut.splice(ut.length-vt,0,te),St[te]=!0);for(vt=0;vt<Ze.length;vt++)if(ue=Je[te=Ze[vt]],we=it[te],!St[te]&&!l.deepEqual(ue,we))if(l.deepEqual(ue.source,we.source)&&l.deepEqual(ue["source-layer"],we["source-layer"])&&l.deepEqual(ue.type,we.type)){for(De in Nt(ue.layout,we.layout,et,te,null,gt.setLayoutProperty),Nt(ue.paint,we.paint,et,te,null,gt.setPaintProperty),l.deepEqual(ue.filter,we.filter)||et.push({command:gt.setFilter,args:[te,we.filter]}),l.deepEqual(ue.minzoom,we.minzoom)&&l.deepEqual(ue.maxzoom,we.maxzoom)||et.push({command:gt.setLayerZoomRange,args:[te,we.minzoom,we.maxzoom]}),ue)ue.hasOwnProperty(De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?Nt(ue[De],we[De],et,te,De.slice(6),gt.setPaintProperty):l.deepEqual(ue[De],we[De])||et.push({command:gt.setLayerProperty,args:[te,De,we[De]]}));for(De in we)we.hasOwnProperty(De)&&!ue.hasOwnProperty(De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?Nt(ue[De],we[De],et,te,De.slice(6),gt.setPaintProperty):l.deepEqual(ue[De],we[De])||et.push({command:gt.setLayerProperty,args:[te,De,we[De]]}))}else et.push({command:gt.removeLayer,args:[te]}),Pe=ut[ut.lastIndexOf(te)+1],et.push({command:gt.addLayer,args:[we,Pe]})}(Le,Y.layers,q)}catch(Ne){console.warn("Unable to compute style diff:",Ne),q=[{command:gt.setStyle,args:[Y]}]}return q}var Kt=function(D,Y){this.reset(D,Y)};Kt.prototype.reset=function(D,Y){this.points=D||[],this._distances=[0];for(var q=1;q<this.points.length;q++)this._distances[q]=this._distances[q-1]+this.points[q].dist(this.points[q-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(Y||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Kt.prototype.lerp=function(D){if(this.points.length===1)return this.points[0];D=l.clamp(D,0,1);for(var Y=1,q=this._distances[Y],ne=D*this.paddedLength+this.padding;q<ne&&Y<this._distances.length;)q=this._distances[++Y];var pe=Y-1,Le=this._distances[pe],Ne=q-Le,qe=Ne>0?(ne-Le)/Ne:0;return this.points[pe].mult(1-qe).add(this.points[Y].mult(qe))};var wn=function(D,Y,q){var ne=this.boxCells=[],pe=this.circleCells=[];this.xCellCount=Math.ceil(D/q),this.yCellCount=Math.ceil(Y/q);for(var Le=0;Le<this.xCellCount*this.yCellCount;Le++)ne.push([]),pe.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=D,this.height=Y,this.xScale=this.xCellCount/D,this.yScale=this.yCellCount/Y,this.boxUid=0,this.circleUid=0};function Bn(D,Y,q,ne,pe){var Le=l.create();return Y?(l.scale(Le,Le,[1/pe,1/pe,1]),q||l.rotateZ(Le,Le,ne.angle)):l.multiply(Le,ne.labelPlaneMatrix,D),Le}function vn(D,Y,q,ne,pe){if(Y){var Le=l.clone(D);return l.scale(Le,Le,[pe,pe,1]),q||l.rotateZ(Le,Le,-ne.angle),Le}return ne.glCoordMatrix}function cn(D,Y){var q=[D.x,D.y,0,1];mr(q,q,Y);var ne=q[3];return{point:new l.Point(q[0]/ne,q[1]/ne),signedDistanceFromCamera:ne}}function dn(D,Y){return .5+D/Y*.5}function sn(D,Y){var q=D[0]/D[3],ne=D[1]/D[3];return q>=-Y[0]&&q<=Y[0]&&ne>=-Y[1]&&ne<=Y[1]}function hn(D,Y,q,ne,pe,Le,Ne,qe){var et=ne?D.textSizeData:D.iconSizeData,vt=l.evaluateSizeForZoom(et,q.transform.zoom),xt=[256/q.width*2+1,256/q.height*2+1],te=ne?D.text.dynamicLayoutVertexArray:D.icon.dynamicLayoutVertexArray;te.clear();for(var ue=D.lineVertexArray,we=ne?D.text.placedSymbolArray:D.icon.placedSymbolArray,Pe=q.transform.width/q.transform.height,De=!1,Ue=0;Ue<we.length;Ue++){var Ze=we.get(Ue);if(Ze.hidden||Ze.writingMode===l.WritingMode.vertical&&!De)$n(Ze.numGlyphs,te);else{De=!1;var Je=[Ze.anchorX,Ze.anchorY,0,1];if(l.transformMat4(Je,Je,Y),sn(Je,xt)){var it=Je[3],ut=dn(q.transform.cameraToCenterDistance,it),St=l.evaluateSizeForFeature(et,vt,Ze),Dt=Ne?St/ut:St*ut,Ft=new l.Point(Ze.anchorX,Ze.anchorY),Yt=cn(Ft,pe).point,ln={},Xt=Rn(Ze,Dt,!1,qe,Y,pe,Le,D.glyphOffsetArray,ue,te,Yt,Ft,ln,Pe);De=Xt.useVertical,(Xt.notEnoughRoom||De||Xt.needsFlipping&&Rn(Ze,Dt,!0,qe,Y,pe,Le,D.glyphOffsetArray,ue,te,Yt,Ft,ln,Pe).notEnoughRoom)&&$n(Ze.numGlyphs,te)}else $n(Ze.numGlyphs,te)}}ne?D.text.dynamicLayoutVertexBuffer.updateData(te):D.icon.dynamicLayoutVertexBuffer.updateData(te)}function En(D,Y,q,ne,pe,Le,Ne,qe,et,vt,xt){var te=qe.glyphStartIndex+qe.numGlyphs,ue=qe.lineStartIndex,we=qe.lineStartIndex+qe.lineLength,Pe=Y.getoffsetX(qe.glyphStartIndex),De=Y.getoffsetX(te-1),Ue=Fn(D*Pe,q,ne,pe,Le,Ne,qe.segment,ue,we,et,vt,xt);if(!Ue)return null;var Ze=Fn(D*De,q,ne,pe,Le,Ne,qe.segment,ue,we,et,vt,xt);return Ze?{first:Ue,last:Ze}:null}function Mn(D,Y,q,ne){return D===l.WritingMode.horizontal&&Math.abs(q.y-Y.y)>Math.abs(q.x-Y.x)*ne?{useVertical:!0}:(D===l.WritingMode.vertical?Y.y<q.y:Y.x>q.x)?{needsFlipping:!0}:null}function Rn(D,Y,q,ne,pe,Le,Ne,qe,et,vt,xt,te,ue,we){var Pe,De=Y/24,Ue=D.lineOffsetX*De,Ze=D.lineOffsetY*De;if(D.numGlyphs>1){var Je=D.glyphStartIndex+D.numGlyphs,it=D.lineStartIndex,ut=D.lineStartIndex+D.lineLength,St=En(De,qe,Ue,Ze,q,xt,te,D,et,Le,ue);if(!St)return{notEnoughRoom:!0};var Dt=cn(St.first.point,Ne).point,Ft=cn(St.last.point,Ne).point;if(ne&&!q){var Yt=Mn(D.writingMode,Dt,Ft,we);if(Yt)return Yt}Pe=[St.first];for(var ln=D.glyphStartIndex+1;ln<Je-1;ln++)Pe.push(Fn(De*qe.getoffsetX(ln),Ue,Ze,q,xt,te,D.segment,it,ut,et,Le,ue));Pe.push(St.last)}else{if(ne&&!q){var Xt=cn(te,pe).point,en=D.lineStartIndex+D.segment+1,Jt=new l.Point(et.getx(en),et.gety(en)),bn=cn(Jt,pe),gn=bn.signedDistanceFromCamera>0?bn.point:Nn(te,Jt,Xt,1,pe),Qt=Mn(D.writingMode,Xt,gn,we);if(Qt)return Qt}var Pn=Fn(De*qe.getoffsetX(D.glyphStartIndex),Ue,Ze,q,xt,te,D.segment,D.lineStartIndex,D.lineStartIndex+D.lineLength,et,Le,ue);if(!Pn)return{notEnoughRoom:!0};Pe=[Pn]}for(var Dn=0,Xn=Pe;Dn<Xn.length;Dn+=1){var Jn=Xn[Dn];l.addDynamicAttributes(vt,Jn.point,Jn.angle)}return{}}function Nn(D,Y,q,ne,pe){var Le=cn(D.add(D.sub(Y)._unit()),pe).point,Ne=q.sub(Le);return q.add(Ne._mult(ne/Ne.mag()))}function Fn(D,Y,q,ne,pe,Le,Ne,qe,et,vt,xt,te){var ue=ne?D-Y:D+Y,we=ue>0?1:-1,Pe=0;ne&&(we*=-1,Pe=Math.PI),we<0&&(Pe+=Math.PI);for(var De=we>0?qe+Ne:qe+Ne+1,Ue=pe,Ze=pe,Je=0,it=0,ut=Math.abs(ue),St=[];Je+it<=ut;){if((De+=we)<qe||De>=et)return null;if(Ze=Ue,St.push(Ue),(Ue=te[De])===void 0){var Dt=new l.Point(vt.getx(De),vt.gety(De)),Ft=cn(Dt,xt);if(Ft.signedDistanceFromCamera>0)Ue=te[De]=Ft.point;else{var Yt=De-we;Ue=Nn(Je===0?Le:new l.Point(vt.getx(Yt),vt.gety(Yt)),Dt,Ze,ut-Je+1,xt)}}Je+=it,it=Ze.dist(Ue)}var ln=(ut-Je)/it,Xt=Ue.sub(Ze),en=Xt.mult(ln)._add(Ze);en._add(Xt._unit()._perp()._mult(q*we));var Jt=Pe+Math.atan2(Ue.y-Ze.y,Ue.x-Ze.x);return St.push(en),{point:en,angle:Jt,path:St}}wn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},wn.prototype.insert=function(D,Y,q,ne,pe){this._forEachCell(Y,q,ne,pe,this._insertBoxCell,this.boxUid++),this.boxKeys.push(D),this.bboxes.push(Y),this.bboxes.push(q),this.bboxes.push(ne),this.bboxes.push(pe)},wn.prototype.insertCircle=function(D,Y,q,ne){this._forEachCell(Y-ne,q-ne,Y+ne,q+ne,this._insertCircleCell,this.circleUid++),this.circleKeys.push(D),this.circles.push(Y),this.circles.push(q),this.circles.push(ne)},wn.prototype._insertBoxCell=function(D,Y,q,ne,pe,Le){this.boxCells[pe].push(Le)},wn.prototype._insertCircleCell=function(D,Y,q,ne,pe,Le){this.circleCells[pe].push(Le)},wn.prototype._query=function(D,Y,q,ne,pe,Le){if(q<0||D>this.width||ne<0||Y>this.height)return!pe&&[];var Ne=[];if(D<=0&&Y<=0&&this.width<=q&&this.height<=ne){if(pe)return!0;for(var qe=0;qe<this.boxKeys.length;qe++)Ne.push({key:this.boxKeys[qe],x1:this.bboxes[4*qe],y1:this.bboxes[4*qe+1],x2:this.bboxes[4*qe+2],y2:this.bboxes[4*qe+3]});for(var et=0;et<this.circleKeys.length;et++){var vt=this.circles[3*et],xt=this.circles[3*et+1],te=this.circles[3*et+2];Ne.push({key:this.circleKeys[et],x1:vt-te,y1:xt-te,x2:vt+te,y2:xt+te})}return Le?Ne.filter(Le):Ne}var ue={hitTest:pe,seenUids:{box:{},circle:{}}};return this._forEachCell(D,Y,q,ne,this._queryCell,Ne,ue,Le),pe?Ne.length>0:Ne},wn.prototype._queryCircle=function(D,Y,q,ne,pe){var Le=D-q,Ne=D+q,qe=Y-q,et=Y+q;if(Ne<0||Le>this.width||et<0||qe>this.height)return!ne&&[];var vt=[],xt={hitTest:ne,circle:{x:D,y:Y,radius:q},seenUids:{box:{},circle:{}}};return this._forEachCell(Le,qe,Ne,et,this._queryCellCircle,vt,xt,pe),ne?vt.length>0:vt},wn.prototype.query=function(D,Y,q,ne,pe){return this._query(D,Y,q,ne,!1,pe)},wn.prototype.hitTest=function(D,Y,q,ne,pe){return this._query(D,Y,q,ne,!0,pe)},wn.prototype.hitTestCircle=function(D,Y,q,ne){return this._queryCircle(D,Y,q,!0,ne)},wn.prototype._queryCell=function(D,Y,q,ne,pe,Le,Ne,qe){var et=Ne.seenUids,vt=this.boxCells[pe];if(vt!==null)for(var xt=this.bboxes,te=0,ue=vt;te<ue.length;te+=1){var we=ue[te];if(!et.box[we]){et.box[we]=!0;var Pe=4*we;if(D<=xt[Pe+2]&&Y<=xt[Pe+3]&&q>=xt[Pe+0]&&ne>=xt[Pe+1]&&(!qe||qe(this.boxKeys[we]))){if(Ne.hitTest)return Le.push(!0),!0;Le.push({key:this.boxKeys[we],x1:xt[Pe],y1:xt[Pe+1],x2:xt[Pe+2],y2:xt[Pe+3]})}}}var De=this.circleCells[pe];if(De!==null)for(var Ue=this.circles,Ze=0,Je=De;Ze<Je.length;Ze+=1){var it=Je[Ze];if(!et.circle[it]){et.circle[it]=!0;var ut=3*it;if(this._circleAndRectCollide(Ue[ut],Ue[ut+1],Ue[ut+2],D,Y,q,ne)&&(!qe||qe(this.circleKeys[it]))){if(Ne.hitTest)return Le.push(!0),!0;var St=Ue[ut],Dt=Ue[ut+1],Ft=Ue[ut+2];Le.push({key:this.circleKeys[it],x1:St-Ft,y1:Dt-Ft,x2:St+Ft,y2:Dt+Ft})}}}},wn.prototype._queryCellCircle=function(D,Y,q,ne,pe,Le,Ne,qe){var et=Ne.circle,vt=Ne.seenUids,xt=this.boxCells[pe];if(xt!==null)for(var te=this.bboxes,ue=0,we=xt;ue<we.length;ue+=1){var Pe=we[ue];if(!vt.box[Pe]){vt.box[Pe]=!0;var De=4*Pe;if(this._circleAndRectCollide(et.x,et.y,et.radius,te[De+0],te[De+1],te[De+2],te[De+3])&&(!qe||qe(this.boxKeys[Pe])))return Le.push(!0),!0}}var Ue=this.circleCells[pe];if(Ue!==null)for(var Ze=this.circles,Je=0,it=Ue;Je<it.length;Je+=1){var ut=it[Je];if(!vt.circle[ut]){vt.circle[ut]=!0;var St=3*ut;if(this._circlesCollide(Ze[St],Ze[St+1],Ze[St+2],et.x,et.y,et.radius)&&(!qe||qe(this.circleKeys[ut])))return Le.push(!0),!0}}},wn.prototype._forEachCell=function(D,Y,q,ne,pe,Le,Ne,qe){for(var et=this._convertToXCellCoord(D),vt=this._convertToYCellCoord(Y),xt=this._convertToXCellCoord(q),te=this._convertToYCellCoord(ne),ue=et;ue<=xt;ue++)for(var we=vt;we<=te;we++){var Pe=this.xCellCount*we+ue;if(pe.call(this,D,Y,q,ne,Pe,Le,Ne,qe))return}},wn.prototype._convertToXCellCoord=function(D){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(D*this.xScale)))},wn.prototype._convertToYCellCoord=function(D){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(D*this.yScale)))},wn.prototype._circlesCollide=function(D,Y,q,ne,pe,Le){var Ne=ne-D,qe=pe-Y,et=q+Le;return et*et>Ne*Ne+qe*qe},wn.prototype._circleAndRectCollide=function(D,Y,q,ne,pe,Le,Ne){var qe=(Le-ne)/2,et=Math.abs(D-(ne+qe));if(et>qe+q)return!1;var vt=(Ne-pe)/2,xt=Math.abs(Y-(pe+vt));if(xt>vt+q)return!1;if(et<=qe||xt<=vt)return!0;var te=et-qe,ue=xt-vt;return te*te+ue*ue<=q*q};var rr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function $n(D,Y){for(var q=0;q<D;q++){var ne=Y.length;Y.resize(ne+4),Y.float32.set(rr,3*ne)}}function mr(D,Y,q){var ne=Y[0],pe=Y[1];return D[0]=q[0]*ne+q[4]*pe+q[12],D[1]=q[1]*ne+q[5]*pe+q[13],D[3]=q[3]*ne+q[7]*pe+q[15],D}var fr=100,Zn=function(D,Y,q){Y===void 0&&(Y=new wn(D.width+200,D.height+200,25)),q===void 0&&(q=new wn(D.width+200,D.height+200,25)),this.transform=D,this.grid=Y,this.ignoredGrid=q,this.pitchfactor=Math.cos(D._pitch)*D.cameraToCenterDistance,this.screenRightBoundary=D.width+fr,this.screenBottomBoundary=D.height+fr,this.gridRightBoundary=D.width+200,this.gridBottomBoundary=D.height+200};function qn(D,Y,q){return Y*(l.EXTENT/(D.tileSize*Math.pow(2,q-D.tileID.overscaledZ)))}Zn.prototype.placeCollisionBox=function(D,Y,q,ne,pe){var Le=this.projectAndGetPerspectiveRatio(ne,D.anchorPointX,D.anchorPointY),Ne=q*Le.perspectiveRatio,qe=D.x1*Ne+Le.point.x,et=D.y1*Ne+Le.point.y,vt=D.x2*Ne+Le.point.x,xt=D.y2*Ne+Le.point.y;return!this.isInsideGrid(qe,et,vt,xt)||!Y&&this.grid.hitTest(qe,et,vt,xt,pe)?{box:[],offscreen:!1}:{box:[qe,et,vt,xt],offscreen:this.isOffscreen(qe,et,vt,xt)}},Zn.prototype.placeCollisionCircles=function(D,Y,q,ne,pe,Le,Ne,qe,et,vt,xt,te,ue){var we=[],Pe=new l.Point(Y.anchorX,Y.anchorY),De=cn(Pe,Le),Ue=dn(this.transform.cameraToCenterDistance,De.signedDistanceFromCamera),Ze=(vt?pe/Ue:pe*Ue)/l.ONE_EM,Je=cn(Pe,Ne).point,it=En(Ze,ne,Y.lineOffsetX*Ze,Y.lineOffsetY*Ze,!1,Je,Pe,Y,q,Ne,{}),ut=!1,St=!1,Dt=!0;if(it){for(var Ft=.5*te*Ue+ue,Yt=new l.Point(-100,-100),ln=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),Xt=new Kt,en=it.first,Jt=it.last,bn=[],gn=en.path.length-1;gn>=1;gn--)bn.push(en.path[gn]);for(var Qt=1;Qt<Jt.path.length;Qt++)bn.push(Jt.path[Qt]);var Pn=2.5*Ft;if(qe){var Dn=bn.map(function(yi){return cn(yi,qe)});bn=Dn.some(function(yi){return yi.signedDistanceFromCamera<=0})?[]:Dn.map(function(yi){return yi.point})}var Xn=[];if(bn.length>0){for(var Jn=bn[0].clone(),gr=bn[0].clone(),vr=1;vr<bn.length;vr++)Jn.x=Math.min(Jn.x,bn[vr].x),Jn.y=Math.min(Jn.y,bn[vr].y),gr.x=Math.max(gr.x,bn[vr].x),gr.y=Math.max(gr.y,bn[vr].y);Xn=Jn.x>=Yt.x&&gr.x<=ln.x&&Jn.y>=Yt.y&&gr.y<=ln.y?[bn]:gr.x<Yt.x||Jn.x>ln.x||gr.y<Yt.y||Jn.y>ln.y?[]:l.clipLine([bn],Yt.x,Yt.y,ln.x,ln.y)}for(var sr=0,dr=Xn;sr<dr.length;sr+=1){var kr=dr[sr];Xt.reset(kr,.25*Ft);var Vr;Vr=Xt.length<=.5*Ft?1:Math.ceil(Xt.paddedLength/Pn)+1;for(var Hr=0;Hr<Vr;Hr++){var hr=Hr/Math.max(Vr-1,1),Ar=Xt.lerp(hr),Dr=Ar.x+fr,zr=Ar.y+fr;we.push(Dr,zr,Ft,0);var Wr=Dr-Ft,Zr=zr-Ft,$r=Dr+Ft,ui=zr+Ft;if(Dt=Dt&&this.isOffscreen(Wr,Zr,$r,ui),St=St||this.isInsideGrid(Wr,Zr,$r,ui),!D&&this.grid.hitTestCircle(Dr,zr,Ft,xt)&&(ut=!0,!et))return{circles:[],offscreen:!1,collisionDetected:ut}}}}return{circles:!et&&ut||!St?[]:we,offscreen:Dt,collisionDetected:ut}},Zn.prototype.queryRenderedSymbols=function(D){if(D.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var Y=[],q=1/0,ne=1/0,pe=-1/0,Le=-1/0,Ne=0,qe=D;Ne<qe.length;Ne+=1){var et=qe[Ne],vt=new l.Point(et.x+fr,et.y+fr);q=Math.min(q,vt.x),ne=Math.min(ne,vt.y),pe=Math.max(pe,vt.x),Le=Math.max(Le,vt.y),Y.push(vt)}for(var xt={},te={},ue=0,we=this.grid.query(q,ne,pe,Le).concat(this.ignoredGrid.query(q,ne,pe,Le));ue<we.length;ue+=1){var Pe=we[ue],De=Pe.key;if(xt[De.bucketInstanceId]===void 0&&(xt[De.bucketInstanceId]={}),!xt[De.bucketInstanceId][De.featureIndex]){var Ue=[new l.Point(Pe.x1,Pe.y1),new l.Point(Pe.x2,Pe.y1),new l.Point(Pe.x2,Pe.y2),new l.Point(Pe.x1,Pe.y2)];l.polygonIntersectsPolygon(Y,Ue)&&(xt[De.bucketInstanceId][De.featureIndex]=!0,te[De.bucketInstanceId]===void 0&&(te[De.bucketInstanceId]=[]),te[De.bucketInstanceId].push(De.featureIndex))}}return te},Zn.prototype.insertCollisionBox=function(D,Y,q,ne,pe){var Le={bucketInstanceId:q,featureIndex:ne,collisionGroupID:pe};(Y?this.ignoredGrid:this.grid).insert(Le,D[0],D[1],D[2],D[3])},Zn.prototype.insertCollisionCircles=function(D,Y,q,ne,pe){for(var Le=Y?this.ignoredGrid:this.grid,Ne={bucketInstanceId:q,featureIndex:ne,collisionGroupID:pe},qe=0;qe<D.length;qe+=4)Le.insertCircle(Ne,D[qe],D[qe+1],D[qe+2])},Zn.prototype.projectAndGetPerspectiveRatio=function(D,Y,q){var ne=[Y,q,0,1];return mr(ne,ne,D),{point:new l.Point((ne[0]/ne[3]+1)/2*this.transform.width+fr,(-ne[1]/ne[3]+1)/2*this.transform.height+fr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/ne[3]*.5}},Zn.prototype.isOffscreen=function(D,Y,q,ne){return q<fr||D>=this.screenRightBoundary||ne<fr||Y>this.screenBottomBoundary},Zn.prototype.isInsideGrid=function(D,Y,q,ne){return q>=0&&D<this.gridRightBoundary&&ne>=0&&Y<this.gridBottomBoundary},Zn.prototype.getViewportMatrix=function(){var D=l.identity([]);return l.translate(D,D,[-100,-100,0]),D};var ur=function(D,Y,q,ne){this.opacity=D?Math.max(0,Math.min(1,D.opacity+(D.placed?Y:-Y))):ne&&q?1:0,this.placed=q};ur.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Zt=function(D,Y,q,ne,pe){this.text=new ur(D?D.text:null,Y,q,pe),this.icon=new ur(D?D.icon:null,Y,ne,pe)};Zt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var nn=function(D,Y,q){this.text=D,this.icon=Y,this.skipFade=q},zn=function(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]},_n=function(D,Y,q,ne,pe){this.bucketInstanceId=D,this.featureIndex=Y,this.sourceLayerIndex=q,this.bucketIndex=ne,this.tileID=pe},Cn=function(D){this.crossSourceCollisions=D,this.maxGroupID=0,this.collisionGroups={}};function Un(D,Y,q,ne,pe){var Le=l.getAnchorAlignment(D),Ne=-(Le.horizontalAlign-.5)*Y,qe=-(Le.verticalAlign-.5)*q,et=l.evaluateVariableOffset(D,ne);return new l.Point(Ne+et[0]*pe,qe+et[1]*pe)}function Gn(D,Y,q,ne,pe,Le){var Ne=D.x1,qe=D.x2,et=D.y1,vt=D.y2,xt=D.anchorPointX,te=D.anchorPointY,ue=new l.Point(Y,q);return ne&&ue._rotate(pe?Le:-Le),{x1:Ne+ue.x,y1:et+ue.y,x2:qe+ue.x,y2:vt+ue.y,anchorPointX:xt,anchorPointY:te}}Cn.prototype.get=function(D){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[D]){var Y=++this.maxGroupID;this.collisionGroups[D]={ID:Y,predicate:function(q){return q.collisionGroupID===Y}}}return this.collisionGroups[D]};var ar=function(D,Y,q,ne){this.transform=D.clone(),this.collisionIndex=new Zn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=Y,this.retainedQueryData={},this.collisionGroups=new Cn(q),this.collisionCircleArrays={},this.prevPlacement=ne,ne&&(ne.prevPlacement=void 0),this.placedOrientations={}};function yr(D,Y,q,ne,pe){D.emplaceBack(Y?1:0,q?1:0,ne||0,pe||0),D.emplaceBack(Y?1:0,q?1:0,ne||0,pe||0),D.emplaceBack(Y?1:0,q?1:0,ne||0,pe||0),D.emplaceBack(Y?1:0,q?1:0,ne||0,pe||0)}ar.prototype.getBucketParts=function(D,Y,q,ne){var pe=q.getBucket(Y),Le=q.latestFeatureIndex;if(pe&&Le&&Y.id===pe.layerIds[0]){var Ne=q.collisionBoxArray,qe=pe.layers[0].layout,et=Math.pow(2,this.transform.zoom-q.tileID.overscaledZ),vt=q.tileSize/l.EXTENT,xt=this.transform.calculatePosMatrix(q.tileID.toUnwrapped()),te=qe.get("text-pitch-alignment")==="map",ue=qe.get("text-rotation-alignment")==="map",we=qn(q,1,this.transform.zoom),Pe=Bn(xt,te,ue,this.transform,we),De=null;if(te){var Ue=vn(xt,te,ue,this.transform,we);De=l.multiply([],this.transform.labelPlaneMatrix,Ue)}this.retainedQueryData[pe.bucketInstanceId]=new _n(pe.bucketInstanceId,Le,pe.sourceLayerIndex,pe.index,q.tileID);var Ze={bucket:pe,layout:qe,posMatrix:xt,textLabelPlaneMatrix:Pe,labelToScreenMatrix:De,scale:et,textPixelRatio:vt,holdingForFade:q.holdingForFade(),collisionBoxArray:Ne,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(pe.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(pe.sourceID)};if(ne)for(var Je=0,it=pe.sortKeyRanges;Je<it.length;Je+=1){var ut=it[Je],St=ut.sortKey,Dt=ut.symbolInstanceStart,Ft=ut.symbolInstanceEnd;D.push({sortKey:St,symbolInstanceStart:Dt,symbolInstanceEnd:Ft,parameters:Ze})}else D.push({symbolInstanceStart:0,symbolInstanceEnd:pe.symbolInstances.length,parameters:Ze})}},ar.prototype.attemptAnchorPlacement=function(D,Y,q,ne,pe,Le,Ne,qe,et,vt,xt,te,ue,we,Pe){var De,Ue=[te.textOffset0,te.textOffset1],Ze=Un(D,q,ne,Ue,pe),Je=this.collisionIndex.placeCollisionBox(Gn(Y,Ze.x,Ze.y,Le,Ne,this.transform.angle),xt,qe,et,vt.predicate);if(!Pe||this.collisionIndex.placeCollisionBox(Gn(Pe,Ze.x,Ze.y,Le,Ne,this.transform.angle),xt,qe,et,vt.predicate).box.length!==0)return Je.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[te.crossTileID]&&this.prevPlacement.placements[te.crossTileID]&&this.prevPlacement.placements[te.crossTileID].text&&(De=this.prevPlacement.variableOffsets[te.crossTileID].anchor),this.variableOffsets[te.crossTileID]={textOffset:Ue,width:q,height:ne,anchor:D,textBoxScale:pe,prevAnchor:De},this.markUsedJustification(ue,D,te,we),ue.allowVerticalPlacement&&(this.markUsedOrientation(ue,we,te),this.placedOrientations[te.crossTileID]=we),{shift:Ze,placedGlyphBoxes:Je}):void 0},ar.prototype.placeLayerBucketPart=function(D,Y,q){var ne=this,pe=D.parameters,Le=pe.bucket,Ne=pe.layout,qe=pe.posMatrix,et=pe.textLabelPlaneMatrix,vt=pe.labelToScreenMatrix,xt=pe.textPixelRatio,te=pe.holdingForFade,ue=pe.collisionBoxArray,we=pe.partiallyEvaluatedTextSize,Pe=pe.collisionGroup,De=Ne.get("text-optional"),Ue=Ne.get("icon-optional"),Ze=Ne.get("text-allow-overlap"),Je=Ne.get("icon-allow-overlap"),it=Ne.get("text-rotation-alignment")==="map",ut=Ne.get("text-pitch-alignment")==="map",St=Ne.get("icon-text-fit")!=="none",Dt=Ne.get("symbol-z-order")==="viewport-y",Ft=Ze&&(Je||!Le.hasIconData()||Ue),Yt=Je&&(Ze||!Le.hasTextData()||De);!Le.collisionArrays&&ue&&Le.deserializeCollisionBoxes(ue);var ln=function(Qt,Pn){if(!Y[Qt.crossTileID])if(te)ne.placements[Qt.crossTileID]=new nn(!1,!1,!1);else{var Dn,Xn=!1,Jn=!1,gr=!0,vr=null,sr={box:null,offscreen:null},dr={box:null,offscreen:null},kr=null,Vr=null,Hr=0,hr=0,Ar=0;Pn.textFeatureIndex?Hr=Pn.textFeatureIndex:Qt.useRuntimeCollisionCircles&&(Hr=Qt.featureIndex),Pn.verticalTextFeatureIndex&&(hr=Pn.verticalTextFeatureIndex);var Dr=Pn.textBox;if(Dr){var zr=function(Yr){var Ni=l.WritingMode.horizontal;if(Le.allowVerticalPlacement&&!Yr&&ne.prevPlacement){var pa=ne.prevPlacement.placedOrientations[Qt.crossTileID];pa&&(ne.placedOrientations[Qt.crossTileID]=pa,Ni=pa,ne.markUsedOrientation(Le,Ni,Qt))}return Ni},Wr=function(Yr,Ni){if(Le.allowVerticalPlacement&&Qt.numVerticalGlyphVertices>0&&Pn.verticalTextBox)for(var pa=0,js=Le.writingModes;pa<js.length&&(js[pa]===l.WritingMode.vertical?(sr=Ni(),dr=sr):sr=Yr(),!(sr&&sr.box&&sr.box.length));pa+=1);else sr=Yr()};if(Ne.get("text-variable-anchor")){var Zr=Ne.get("text-variable-anchor");if(ne.prevPlacement&&ne.prevPlacement.variableOffsets[Qt.crossTileID]){var $r=ne.prevPlacement.variableOffsets[Qt.crossTileID];Zr.indexOf($r.anchor)>0&&(Zr=Zr.filter(function(Yr){return Yr!==$r.anchor})).unshift($r.anchor)}var ui=function(Yr,Ni,pa){for(var js=Yr.x2-Yr.x1,uc=Yr.y2-Yr.y1,Ql=Qt.textBoxScale,cc=St&&!Je?Ni:null,pl={box:[],offscreen:!1},ku=Ze?2*Zr.length:Zr.length,wl=0;wl<ku;++wl){var dl=Zr[wl%Zr.length],fc=wl>=Zr.length,nl=ne.attemptAnchorPlacement(dl,Yr,js,uc,Ql,it,ut,xt,qe,Pe,fc,Qt,Le,pa,cc);if(nl&&(pl=nl.placedGlyphBoxes)&&pl.box&&pl.box.length){Xn=!0,vr=nl.shift;break}}return pl};Wr(function(){return ui(Dr,Pn.iconBox,l.WritingMode.horizontal)},function(){var Yr=Pn.verticalTextBox,Ni=sr&&sr.box&&sr.box.length;return Le.allowVerticalPlacement&&!Ni&&Qt.numVerticalGlyphVertices>0&&Yr?ui(Yr,Pn.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),sr&&(Xn=sr.box,gr=sr.offscreen);var yi=zr(sr&&sr.box);if(!Xn&&ne.prevPlacement){var hi=ne.prevPlacement.variableOffsets[Qt.crossTileID];hi&&(ne.variableOffsets[Qt.crossTileID]=hi,ne.markUsedJustification(Le,hi.anchor,Qt,yi))}}else{var si=function(Yr,Ni){var pa=ne.collisionIndex.placeCollisionBox(Yr,Ze,xt,qe,Pe.predicate);return pa&&pa.box&&pa.box.length&&(ne.markUsedOrientation(Le,Ni,Qt),ne.placedOrientations[Qt.crossTileID]=Ni),pa};Wr(function(){return si(Dr,l.WritingMode.horizontal)},function(){var Yr=Pn.verticalTextBox;return Le.allowVerticalPlacement&&Qt.numVerticalGlyphVertices>0&&Yr?si(Yr,l.WritingMode.vertical):{box:null,offscreen:null}}),zr(sr&&sr.box&&sr.box.length)}}if(Xn=(Dn=sr)&&Dn.box&&Dn.box.length>0,gr=Dn&&Dn.offscreen,Qt.useRuntimeCollisionCircles){var ci=Le.text.placedSymbolArray.get(Qt.centerJustifiedTextSymbolIndex),pi=l.evaluateSizeForFeature(Le.textSizeData,we,ci),Ei=Ne.get("text-padding"),Lo=Qt.collisionCircleDiameter;kr=ne.collisionIndex.placeCollisionCircles(Ze,ci,Le.lineVertexArray,Le.glyphOffsetArray,pi,qe,et,vt,q,ut,Pe.predicate,Lo,Ei),Xn=Ze||kr.circles.length>0&&!kr.collisionDetected,gr=gr&&kr.offscreen}if(Pn.iconFeatureIndex&&(Ar=Pn.iconFeatureIndex),Pn.iconBox){var Bi=function(Yr){var Ni=St&&vr?Gn(Yr,vr.x,vr.y,it,ut,ne.transform.angle):Yr;return ne.collisionIndex.placeCollisionBox(Ni,Je,xt,qe,Pe.predicate)};Jn=dr&&dr.box&&dr.box.length&&Pn.verticalIconBox?(Vr=Bi(Pn.verticalIconBox)).box.length>0:(Vr=Bi(Pn.iconBox)).box.length>0,gr=gr&&Vr.offscreen}var Br=De||Qt.numHorizontalGlyphVertices===0&&Qt.numVerticalGlyphVertices===0,Zi=Ue||Qt.numIconVertices===0;if(Br||Zi?Zi?Br||(Jn=Jn&&Xn):Xn=Jn&&Xn:Jn=Xn=Jn&&Xn,Xn&&Dn&&Dn.box&&(dr&&dr.box&&hr?ne.collisionIndex.insertCollisionBox(Dn.box,Ne.get("text-ignore-placement"),Le.bucketInstanceId,hr,Pe.ID):ne.collisionIndex.insertCollisionBox(Dn.box,Ne.get("text-ignore-placement"),Le.bucketInstanceId,Hr,Pe.ID)),Jn&&Vr&&ne.collisionIndex.insertCollisionBox(Vr.box,Ne.get("icon-ignore-placement"),Le.bucketInstanceId,Ar,Pe.ID),kr&&(Xn&&ne.collisionIndex.insertCollisionCircles(kr.circles,Ne.get("text-ignore-placement"),Le.bucketInstanceId,Hr,Pe.ID),q)){var ea=Le.bucketInstanceId,Ai=ne.collisionCircleArrays[ea];Ai===void 0&&(Ai=ne.collisionCircleArrays[ea]=new zn);for(var Za=0;Za<kr.circles.length;Za+=4)Ai.circles.push(kr.circles[Za+0]),Ai.circles.push(kr.circles[Za+1]),Ai.circles.push(kr.circles[Za+2]),Ai.circles.push(kr.collisionDetected?1:0)}ne.placements[Qt.crossTileID]=new nn(Xn||Ft,Jn||Yt,gr||Le.justReloaded),Y[Qt.crossTileID]=!0}};if(Dt)for(var Xt=Le.getSortedSymbolIndexes(this.transform.angle),en=Xt.length-1;en>=0;--en){var Jt=Xt[en];ln(Le.symbolInstances.get(Jt),Le.collisionArrays[Jt])}else for(var bn=D.symbolInstanceStart;bn<D.symbolInstanceEnd;bn++)ln(Le.symbolInstances.get(bn),Le.collisionArrays[bn]);if(q&&Le.bucketInstanceId in this.collisionCircleArrays){var gn=this.collisionCircleArrays[Le.bucketInstanceId];l.invert(gn.invProjMatrix,qe),gn.viewportMatrix=this.collisionIndex.getViewportMatrix()}Le.justReloaded=!1},ar.prototype.markUsedJustification=function(D,Y,q,ne){var pe,Le={left:q.leftJustifiedTextSymbolIndex,center:q.centerJustifiedTextSymbolIndex,right:q.rightJustifiedTextSymbolIndex};pe=ne===l.WritingMode.vertical?q.verticalPlacedTextSymbolIndex:Le[l.getAnchorJustification(Y)];for(var Ne=0,qe=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex,q.verticalPlacedTextSymbolIndex];Ne<qe.length;Ne+=1){var et=qe[Ne];et>=0&&(D.text.placedSymbolArray.get(et).crossTileID=pe>=0&&et!==pe?0:q.crossTileID)}},ar.prototype.markUsedOrientation=function(D,Y,q){for(var ne=Y===l.WritingMode.horizontal||Y===l.WritingMode.horizontalOnly?Y:0,pe=Y===l.WritingMode.vertical?Y:0,Le=0,Ne=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex];Le<Ne.length;Le+=1){var qe=Ne[Le];D.text.placedSymbolArray.get(qe).placedOrientation=ne}q.verticalPlacedTextSymbolIndex&&(D.text.placedSymbolArray.get(q.verticalPlacedTextSymbolIndex).placedOrientation=pe)},ar.prototype.commit=function(D){this.commitTime=D,this.zoomAtLastRecencyCheck=this.transform.zoom;var Y=this.prevPlacement,q=!1;this.prevZoomAdjustment=Y?Y.zoomAdjustment(this.transform.zoom):0;var ne=Y?Y.symbolFadeChange(D):1,pe=Y?Y.opacities:{},Le=Y?Y.variableOffsets:{},Ne=Y?Y.placedOrientations:{};for(var qe in this.placements){var et=this.placements[qe],vt=pe[qe];vt?(this.opacities[qe]=new Zt(vt,ne,et.text,et.icon),q=q||et.text!==vt.text.placed||et.icon!==vt.icon.placed):(this.opacities[qe]=new Zt(null,ne,et.text,et.icon,et.skipFade),q=q||et.text||et.icon)}for(var xt in pe){var te=pe[xt];if(!this.opacities[xt]){var ue=new Zt(te,ne,!1,!1);ue.isHidden()||(this.opacities[xt]=ue,q=q||te.text.placed||te.icon.placed)}}for(var we in Le)this.variableOffsets[we]||!this.opacities[we]||this.opacities[we].isHidden()||(this.variableOffsets[we]=Le[we]);for(var Pe in Ne)this.placedOrientations[Pe]||!this.opacities[Pe]||this.opacities[Pe].isHidden()||(this.placedOrientations[Pe]=Ne[Pe]);q?this.lastPlacementChangeTime=D:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=Y?Y.lastPlacementChangeTime:D)},ar.prototype.updateLayerOpacities=function(D,Y){for(var q={},ne=0,pe=Y;ne<pe.length;ne+=1){var Le=pe[ne],Ne=Le.getBucket(D);Ne&&Le.latestFeatureIndex&&D.id===Ne.layerIds[0]&&this.updateBucketOpacities(Ne,q,Le.collisionBoxArray)}},ar.prototype.updateBucketOpacities=function(D,Y,q){var ne=this;D.hasTextData()&&D.text.opacityVertexArray.clear(),D.hasIconData()&&D.icon.opacityVertexArray.clear(),D.hasIconCollisionBoxData()&&D.iconCollisionBox.collisionVertexArray.clear(),D.hasTextCollisionBoxData()&&D.textCollisionBox.collisionVertexArray.clear();var pe=D.layers[0].layout,Le=new Zt(null,0,!1,!1,!0),Ne=pe.get("text-allow-overlap"),qe=pe.get("icon-allow-overlap"),et=pe.get("text-variable-anchor"),vt=pe.get("text-rotation-alignment")==="map",xt=pe.get("text-pitch-alignment")==="map",te=pe.get("icon-text-fit")!=="none",ue=new Zt(null,0,Ne&&(qe||!D.hasIconData()||pe.get("icon-optional")),qe&&(Ne||!D.hasTextData()||pe.get("text-optional")),!0);!D.collisionArrays&&q&&(D.hasIconCollisionBoxData()||D.hasTextCollisionBoxData())&&D.deserializeCollisionBoxes(q);for(var we=function(Ze,Je,it){for(var ut=0;ut<Je/4;ut++)Ze.opacityVertexArray.emplaceBack(it)},Pe=function(Ze){var Je=D.symbolInstances.get(Ze),it=Je.numHorizontalGlyphVertices,ut=Je.numVerticalGlyphVertices,St=Je.crossTileID,Dt=Y[St],Ft=ne.opacities[St];Dt?Ft=Le:Ft||(Ft=ue,ne.opacities[St]=Ft),Y[St]=!0;var Yt=it>0||ut>0,ln=Je.numIconVertices>0,Xt=ne.placedOrientations[Je.crossTileID],en=Xt===l.WritingMode.vertical,Jt=Xt===l.WritingMode.horizontal||Xt===l.WritingMode.horizontalOnly;if(Yt){var bn=Tn(Ft.text),gn=en?an:bn;we(D.text,it,gn);var Qt=Jt?an:bn;we(D.text,ut,Qt);var Pn=Ft.text.isHidden();[Je.rightJustifiedTextSymbolIndex,Je.centerJustifiedTextSymbolIndex,Je.leftJustifiedTextSymbolIndex].forEach(function(Ar){Ar>=0&&(D.text.placedSymbolArray.get(Ar).hidden=Pn||en?1:0)}),Je.verticalPlacedTextSymbolIndex>=0&&(D.text.placedSymbolArray.get(Je.verticalPlacedTextSymbolIndex).hidden=Pn||Jt?1:0);var Dn=ne.variableOffsets[Je.crossTileID];Dn&&ne.markUsedJustification(D,Dn.anchor,Je,Xt);var Xn=ne.placedOrientations[Je.crossTileID];Xn&&(ne.markUsedJustification(D,"left",Je,Xn),ne.markUsedOrientation(D,Xn,Je))}if(ln){var Jn=Tn(Ft.icon),gr=!(te&&Je.verticalPlacedIconSymbolIndex&&en);if(Je.placedIconSymbolIndex>=0){var vr=gr?Jn:an;we(D.icon,Je.numIconVertices,vr),D.icon.placedSymbolArray.get(Je.placedIconSymbolIndex).hidden=Ft.icon.isHidden()}if(Je.verticalPlacedIconSymbolIndex>=0){var sr=gr?an:Jn;we(D.icon,Je.numVerticalIconVertices,sr),D.icon.placedSymbolArray.get(Je.verticalPlacedIconSymbolIndex).hidden=Ft.icon.isHidden()}}if(D.hasIconCollisionBoxData()||D.hasTextCollisionBoxData()){var dr=D.collisionArrays[Ze];if(dr){var kr=new l.Point(0,0);if(dr.textBox||dr.verticalTextBox){var Vr=!0;if(et){var Hr=ne.variableOffsets[St];Hr?(kr=Un(Hr.anchor,Hr.width,Hr.height,Hr.textOffset,Hr.textBoxScale),vt&&kr._rotate(xt?ne.transform.angle:-ne.transform.angle)):Vr=!1}dr.textBox&&yr(D.textCollisionBox.collisionVertexArray,Ft.text.placed,!Vr||en,kr.x,kr.y),dr.verticalTextBox&&yr(D.textCollisionBox.collisionVertexArray,Ft.text.placed,!Vr||Jt,kr.x,kr.y)}var hr=Boolean(!Jt&&dr.verticalIconBox);dr.iconBox&&yr(D.iconCollisionBox.collisionVertexArray,Ft.icon.placed,hr,te?kr.x:0,te?kr.y:0),dr.verticalIconBox&&yr(D.iconCollisionBox.collisionVertexArray,Ft.icon.placed,!hr,te?kr.x:0,te?kr.y:0)}}},De=0;De<D.symbolInstances.length;De++)Pe(De);if(D.sortFeatures(this.transform.angle),this.retainedQueryData[D.bucketInstanceId]&&(this.retainedQueryData[D.bucketInstanceId].featureSortOrder=D.featureSortOrder),D.hasTextData()&&D.text.opacityVertexBuffer&&D.text.opacityVertexBuffer.updateData(D.text.opacityVertexArray),D.hasIconData()&&D.icon.opacityVertexBuffer&&D.icon.opacityVertexBuffer.updateData(D.icon.opacityVertexArray),D.hasIconCollisionBoxData()&&D.iconCollisionBox.collisionVertexBuffer&&D.iconCollisionBox.collisionVertexBuffer.updateData(D.iconCollisionBox.collisionVertexArray),D.hasTextCollisionBoxData()&&D.textCollisionBox.collisionVertexBuffer&&D.textCollisionBox.collisionVertexBuffer.updateData(D.textCollisionBox.collisionVertexArray),D.bucketInstanceId in this.collisionCircleArrays){var Ue=this.collisionCircleArrays[D.bucketInstanceId];D.placementInvProjMatrix=Ue.invProjMatrix,D.placementViewportMatrix=Ue.viewportMatrix,D.collisionCircleArray=Ue.circles,delete this.collisionCircleArrays[D.bucketInstanceId]}},ar.prototype.symbolFadeChange=function(D){return this.fadeDuration===0?1:(D-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ar.prototype.zoomAdjustment=function(D){return Math.max(0,(this.transform.zoom-D)/1.5)},ar.prototype.hasTransitions=function(D){return this.stale||D-this.lastPlacementChangeTime<this.fadeDuration},ar.prototype.stillRecent=function(D,Y){var q=this.zoomAtLastRecencyCheck===Y?1-this.zoomAdjustment(Y):1;return this.zoomAtLastRecencyCheck=Y,this.commitTime+this.fadeDuration*q>D},ar.prototype.setStale=function(){this.stale=!0};var $t=Math.pow(2,25),kn=Math.pow(2,24),zt=Math.pow(2,17),Wt=Math.pow(2,16),tn=Math.pow(2,9),Sn=Math.pow(2,8),An=Math.pow(2,1);function Tn(D){if(D.opacity===0&&!D.placed)return 0;if(D.opacity===1&&D.placed)return 4294967295;var Y=D.placed?1:0,q=Math.floor(127*D.opacity);return q*$t+Y*kn+q*zt+Y*Wt+q*tn+Y*Sn+q*An+Y}var an=0,mn=function(D){this._sortAcrossTiles=D.layout.get("symbol-z-order")!=="viewport-y"&&D.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};mn.prototype.continuePlacement=function(D,Y,q,ne,pe){for(var Le=this._bucketParts;this._currentTileIndex<D.length;){var Ne=D[this._currentTileIndex];if(Y.getBucketParts(Le,ne,Ne,this._sortAcrossTiles),this._currentTileIndex++,pe())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Le.sort(function(et,vt){return et.sortKey-vt.sortKey}));this._currentPartIndex<Le.length;){var qe=Le[this._currentPartIndex];if(Y.placeLayerBucketPart(qe,this._seenCrossTileIDs,q),this._currentPartIndex++,pe())return!0}return!1};var on=function(D,Y,q,ne,pe,Le,Ne){this.placement=new ar(D,pe,Le,Ne),this._currentPlacementIndex=Y.length-1,this._forceFullPlacement=q,this._showCollisionBoxes=ne,this._done=!1};on.prototype.isDone=function(){return this._done},on.prototype.continuePlacement=function(D,Y,q){for(var ne=this,pe=l.browser.now(),Le=function(){var et=l.browser.now()-pe;return!ne._forceFullPlacement&&et>2};this._currentPlacementIndex>=0;){var Ne=Y[D[this._currentPlacementIndex]],qe=this.placement.collisionIndex.transform.zoom;if(Ne.type==="symbol"&&(!Ne.minzoom||Ne.minzoom<=qe)&&(!Ne.maxzoom||Ne.maxzoom>qe)){if(this._inProgressLayer||(this._inProgressLayer=new mn(Ne)),this._inProgressLayer.continuePlacement(q[Ne.source],this.placement,this._showCollisionBoxes,Ne,Le))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},on.prototype.commit=function(D){return this.placement.commit(D),this.placement};var fn=512/l.EXTENT/2,yn=function(D,Y,q){this.tileID=D,this.indexedSymbolInstances={},this.bucketInstanceId=q;for(var ne=0;ne<Y.length;ne++){var pe=Y.get(ne),Le=pe.key;this.indexedSymbolInstances[Le]||(this.indexedSymbolInstances[Le]=[]),this.indexedSymbolInstances[Le].push({crossTileID:pe.crossTileID,coord:this.getScaledCoordinates(pe,D)})}};yn.prototype.getScaledCoordinates=function(D,Y){var q=Y.canonical.z-this.tileID.canonical.z,ne=fn/Math.pow(2,q);return{x:Math.floor((Y.canonical.x*l.EXTENT+D.anchorX)*ne),y:Math.floor((Y.canonical.y*l.EXTENT+D.anchorY)*ne)}},yn.prototype.findMatches=function(D,Y,q){for(var ne=this.tileID.canonical.z<Y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-Y.canonical.z),pe=0;pe<D.length;pe++){var Le=D.get(pe);if(!Le.crossTileID){var Ne=this.indexedSymbolInstances[Le.key];if(Ne)for(var qe=this.getScaledCoordinates(Le,Y),et=0,vt=Ne;et<vt.length;et+=1){var xt=vt[et];if(Math.abs(xt.coord.x-qe.x)<=ne&&Math.abs(xt.coord.y-qe.y)<=ne&&!q[xt.crossTileID]){q[xt.crossTileID]=!0,Le.crossTileID=xt.crossTileID;break}}}}};var Ln=function(){this.maxCrossTileID=0};Ln.prototype.generate=function(){return++this.maxCrossTileID};var Hn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Hn.prototype.handleWrapJump=function(D){var Y=Math.round((D-this.lng)/360);if(Y!==0)for(var q in this.indexes){var ne=this.indexes[q],pe={};for(var Le in ne){var Ne=ne[Le];Ne.tileID=Ne.tileID.unwrapTo(Ne.tileID.wrap+Y),pe[Ne.tileID.key]=Ne}this.indexes[q]=pe}this.lng=D},Hn.prototype.addBucket=function(D,Y,q){if(this.indexes[D.overscaledZ]&&this.indexes[D.overscaledZ][D.key]){if(this.indexes[D.overscaledZ][D.key].bucketInstanceId===Y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(D.overscaledZ,this.indexes[D.overscaledZ][D.key])}for(var ne=0;ne<Y.symbolInstances.length;ne++)Y.symbolInstances.get(ne).crossTileID=0;this.usedCrossTileIDs[D.overscaledZ]||(this.usedCrossTileIDs[D.overscaledZ]={});var pe=this.usedCrossTileIDs[D.overscaledZ];for(var Le in this.indexes){var Ne=this.indexes[Le];if(Number(Le)>D.overscaledZ)for(var qe in Ne){var et=Ne[qe];et.tileID.isChildOf(D)&&et.findMatches(Y.symbolInstances,D,pe)}else{var vt=Ne[D.scaledTo(Number(Le)).key];vt&&vt.findMatches(Y.symbolInstances,D,pe)}}for(var xt=0;xt<Y.symbolInstances.length;xt++){var te=Y.symbolInstances.get(xt);te.crossTileID||(te.crossTileID=q.generate(),pe[te.crossTileID]=!0)}return this.indexes[D.overscaledZ]===void 0&&(this.indexes[D.overscaledZ]={}),this.indexes[D.overscaledZ][D.key]=new yn(D,Y.symbolInstances,Y.bucketInstanceId),!0},Hn.prototype.removeBucketCrossTileIDs=function(D,Y){for(var q in Y.indexedSymbolInstances)for(var ne=0,pe=Y.indexedSymbolInstances[q];ne<pe.length;ne+=1){var Le=pe[ne];delete this.usedCrossTileIDs[D][Le.crossTileID]}},Hn.prototype.removeStaleBuckets=function(D){var Y=!1;for(var q in this.indexes){var ne=this.indexes[q];for(var pe in ne)D[ne[pe].bucketInstanceId]||(this.removeBucketCrossTileIDs(q,ne[pe]),delete ne[pe],Y=!0)}return Y};var Wn=function(){this.layerIndexes={},this.crossTileIDs=new Ln,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Wn.prototype.addLayer=function(D,Y,q){var ne=this.layerIndexes[D.id];ne===void 0&&(ne=this.layerIndexes[D.id]=new Hn);var pe=!1,Le={};ne.handleWrapJump(q);for(var Ne=0,qe=Y;Ne<qe.length;Ne+=1){var et=qe[Ne],vt=et.getBucket(D);vt&&D.id===vt.layerIds[0]&&(vt.bucketInstanceId||(vt.bucketInstanceId=++this.maxBucketInstanceId),ne.addBucket(et.tileID,vt,this.crossTileIDs)&&(pe=!0),Le[vt.bucketInstanceId]=!0)}return ne.removeStaleBuckets(Le)&&(pe=!0),pe},Wn.prototype.pruneUnusedLayers=function(D){var Y={};for(var q in D.forEach(function(ne){Y[ne]=!0}),this.layerIndexes)Y[q]||delete this.layerIndexes[q]};var Kn=function(D,Y){return l.emitValidationErrors(D,Y&&Y.filter(function(q){return q.identifier!=="source.canvas"}))},nr=l.pick(gt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),er=l.pick(gt,["setCenter","setZoom","setBearing","setPitch"]),or=function(){var D={},Y=l.styleSpec.$version;for(var q in l.styleSpec.$root){var ne=l.styleSpec.$root[q];if(ne.required){var pe;(pe=q==="version"?Y:ne.type==="array"?[]:{})!=null&&(D[q]=pe)}}return D}(),ir=function(D){function Y(q,ne){var pe=this;ne===void 0&&(ne={}),D.call(this),this.map=q,this.dispatcher=new L(At(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new m(q._requestManager,ne.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new Wn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());var Le=this;this._rtlTextPluginCallback=Y.registerForPluginStateChange(function(Ne){var qe={pluginStatus:Ne.pluginStatus,pluginURL:Ne.pluginURL};Le.dispatcher.broadcast("syncRTLPluginState",qe,function(et,vt){if(l.triggerPluginCompletionEvent(et),vt&&vt.every(function(te){return te}))for(var xt in Le.sourceCaches)Le.sourceCaches[xt].reload()})}),this.on("data",function(Ne){if(Ne.dataType==="source"&&Ne.sourceDataType==="metadata"){var qe=pe.sourceCaches[Ne.sourceId];if(qe){var et=qe.getSource();if(et&&et.vectorLayerIds)for(var vt in pe._layers){var xt=pe._layers[vt];xt.source===et.id&&pe._validateLayer(xt)}}}})}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.loadURL=function(q,ne){var pe=this;ne===void 0&&(ne={}),this.fire(new l.Event("dataloading",{dataType:"style"}));var Le=typeof ne.validate=="boolean"?ne.validate:!l.isMapboxURL(q);q=this.map._requestManager.normalizeStyleURL(q,ne.accessToken);var Ne=this.map._requestManager.transformRequest(q,l.ResourceType.Style);this._request=l.getJSON(Ne,function(qe,et){pe._request=null,qe?pe.fire(new l.ErrorEvent(qe)):et&&pe._load(et,Le)})},Y.prototype.loadJSON=function(q,ne){var pe=this;ne===void 0&&(ne={}),this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(function(){pe._request=null,pe._load(q,ne.validate!==!1)})},Y.prototype.loadEmpty=function(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(or,!1)},Y.prototype._load=function(q,ne){if(!ne||!Kn(this,l.validateStyle(q))){for(var pe in this._loaded=!0,this.stylesheet=q,q.sources)this.addSource(pe,q.sources[pe],{validate:!1});q.sprite?this._loadSprite(q.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(q.glyphs);var Le=pt(this.stylesheet.layers);this._order=Le.map(function(vt){return vt.id}),this._layers={},this._serializedLayers={};for(var Ne=0,qe=Le;Ne<qe.length;Ne+=1){var et=qe[Ne];(et=l.createStyleLayer(et)).setEventedParent(this,{layer:{id:et.id}}),this._layers[et.id]=et,this._serializedLayers[et.id]=et.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new _(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}},Y.prototype._loadSprite=function(q){var ne=this;this._spriteRequest=function(pe,Le,Ne){var qe,et,vt,xt=l.browser.devicePixelRatio>1?"@2x":"",te=l.getJSON(Le.transformRequest(Le.normalizeSpriteURL(pe,xt,".json"),l.ResourceType.SpriteJSON),function(Pe,De){te=null,vt||(vt=Pe,qe=De,we())}),ue=l.getImage(Le.transformRequest(Le.normalizeSpriteURL(pe,xt,".png"),l.ResourceType.SpriteImage),function(Pe,De){ue=null,vt||(vt=Pe,et=De,we())});function we(){if(vt)Ne(vt);else if(qe&&et){var Pe=l.browser.getImageData(et),De={};for(var Ue in qe){var Ze=qe[Ue],Je=Ze.width,it=Ze.height,ut=Ze.x,St=Ze.y,Dt=Ze.sdf,Ft=Ze.pixelRatio,Yt=Ze.stretchX,ln=Ze.stretchY,Xt=Ze.content,en=new l.RGBAImage({width:Je,height:it});l.RGBAImage.copy(Pe,en,{x:ut,y:St},{x:0,y:0},{width:Je,height:it}),De[Ue]={data:en,pixelRatio:Ft,sdf:Dt,stretchX:Yt,stretchY:ln,content:Xt}}Ne(null,De)}}return{cancel:function(){te&&(te.cancel(),te=null),ue&&(ue.cancel(),ue=null)}}}(q,this.map._requestManager,function(pe,Le){if(ne._spriteRequest=null,pe)ne.fire(new l.ErrorEvent(pe));else if(Le)for(var Ne in Le)ne.imageManager.addImage(Ne,Le[Ne]);ne.imageManager.setLoaded(!0),ne._availableImages=ne.imageManager.listImages(),ne.dispatcher.broadcast("setImages",ne._availableImages),ne.fire(new l.Event("data",{dataType:"style"}))})},Y.prototype._validateLayer=function(q){var ne=this.sourceCaches[q.source];if(ne){var pe=q.sourceLayer;if(pe){var Le=ne.getSource();(Le.type==="geojson"||Le.vectorLayerIds&&Le.vectorLayerIds.indexOf(pe)===-1)&&this.fire(new l.ErrorEvent(new Error('Source layer "'+pe+'" does not exist on source "'+Le.id+'" as specified by style layer "'+q.id+'"')))}}},Y.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var q in this.sourceCaches)if(!this.sourceCaches[q].loaded())return!1;return!!this.imageManager.isLoaded()},Y.prototype._serializeLayers=function(q){for(var ne=[],pe=0,Le=q;pe<Le.length;pe+=1){var Ne=Le[pe],qe=this._layers[Ne];qe.type!=="custom"&&ne.push(qe.serialize())}return ne},Y.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var q in this.sourceCaches)if(this.sourceCaches[q].hasTransition())return!0;for(var ne in this._layers)if(this._layers[ne].hasTransition())return!0;return!1},Y.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},Y.prototype.update=function(q){if(this._loaded){var ne=this._changed;if(this._changed){var pe=Object.keys(this._updatedLayers),Le=Object.keys(this._removedLayers);for(var Ne in(pe.length||Le.length)&&this._updateWorkerLayers(pe,Le),this._updatedSources){var qe=this._updatedSources[Ne];qe==="reload"?this._reloadSource(Ne):qe==="clear"&&this._clearSource(Ne)}for(var et in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[et].updateTransitions(q);this.light.updateTransitions(q),this._resetUpdates()}for(var vt in this.sourceCaches)this.sourceCaches[vt].used=!1;for(var xt=0,te=this._order;xt<te.length;xt+=1){var ue=te[xt],we=this._layers[ue];we.recalculate(q,this._availableImages),!we.isHidden(q.zoom)&&we.source&&(this.sourceCaches[we.source].used=!0)}this.light.recalculate(q),this.z=q.zoom,ne&&this.fire(new l.Event("data",{dataType:"style"}))}},Y.prototype._updateTilesForChangedImages=function(){var q=Object.keys(this._changedImages);if(q.length){for(var ne in this.sourceCaches)this.sourceCaches[ne].reloadTilesForDependencies(["icons","patterns"],q);this._changedImages={}}},Y.prototype._updateWorkerLayers=function(q,ne){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(q),removedIds:ne})},Y.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},Y.prototype.setState=function(q){var ne=this;if(this._checkLoaded(),Kn(this,l.validateStyle(q)))return!1;(q=l.clone$1(q)).layers=pt(q.layers);var pe=pn(this.serialize(),q).filter(function(Ne){return!(Ne.command in er)});if(pe.length===0)return!1;var Le=pe.filter(function(Ne){return!(Ne.command in nr)});if(Le.length>0)throw new Error("Unimplemented: "+Le.map(function(Ne){return Ne.command}).join(", ")+".");return pe.forEach(function(Ne){Ne.command!=="setTransition"&&ne[Ne.command].apply(ne,Ne.args)}),this.stylesheet=q,!0},Y.prototype.addImage=function(q,ne){if(this.getImage(q))return this.fire(new l.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(q,ne),this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},Y.prototype.updateImage=function(q,ne){this.imageManager.updateImage(q,ne)},Y.prototype.getImage=function(q){return this.imageManager.getImage(q)},Y.prototype.removeImage=function(q){if(!this.getImage(q))return this.fire(new l.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(q),this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},Y.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Y.prototype.addSource=function(q,ne,pe){var Le=this;if(pe===void 0&&(pe={}),this._checkLoaded(),this.sourceCaches[q]!==void 0)throw new Error("There is already a source with this ID");if(!ne.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ne).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(ne.type)>=0&&this._validate(l.validateStyle.source,"sources."+q,ne,null,pe))){this.map&&this.map._collectResourceTiming&&(ne.collectResourceTiming=!0);var Ne=this.sourceCaches[q]=new rt(q,ne,this.dispatcher);Ne.style=this,Ne.setEventedParent(this,function(){return{isSourceLoaded:Le.loaded(),source:Ne.serialize(),sourceId:q}}),Ne.onAdd(this.map),this._changed=!0}},Y.prototype.removeSource=function(q){if(this._checkLoaded(),this.sourceCaches[q]===void 0)throw new Error("There is no source with this ID");for(var ne in this._layers)if(this._layers[ne].source===q)return this.fire(new l.ErrorEvent(new Error('Source "'+q+'" cannot be removed while layer "'+ne+'" is using it.')));var pe=this.sourceCaches[q];delete this.sourceCaches[q],delete this._updatedSources[q],pe.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:q})),pe.setEventedParent(null),pe.clearTiles(),pe.onRemove&&pe.onRemove(this.map),this._changed=!0},Y.prototype.setGeoJSONSourceData=function(q,ne){this._checkLoaded(),this.sourceCaches[q].getSource().setData(ne),this._changed=!0},Y.prototype.getSource=function(q){return this.sourceCaches[q]&&this.sourceCaches[q].getSource()},Y.prototype.addLayer=function(q,ne,pe){pe===void 0&&(pe={}),this._checkLoaded();var Le=q.id;if(this.getLayer(Le))this.fire(new l.ErrorEvent(new Error('Layer with id "'+Le+'" already exists on this map')));else{var Ne;if(q.type==="custom"){if(Kn(this,l.validateCustomStyleLayer(q)))return;Ne=l.createStyleLayer(q)}else{if(typeof q.source=="object"&&(this.addSource(Le,q.source),q=l.clone$1(q),q=l.extend(q,{source:Le})),this._validate(l.validateStyle.layer,"layers."+Le,q,{arrayIndex:-1},pe))return;Ne=l.createStyleLayer(q),this._validateLayer(Ne),Ne.setEventedParent(this,{layer:{id:Le}}),this._serializedLayers[Ne.id]=Ne.serialize()}var qe=ne?this._order.indexOf(ne):this._order.length;if(ne&&qe===-1)this.fire(new l.ErrorEvent(new Error('Layer with id "'+ne+'" does not exist on this map.')));else{if(this._order.splice(qe,0,Le),this._layerOrderChanged=!0,this._layers[Le]=Ne,this._removedLayers[Le]&&Ne.source&&Ne.type!=="custom"){var et=this._removedLayers[Le];delete this._removedLayers[Le],et.type!==Ne.type?this._updatedSources[Ne.source]="clear":(this._updatedSources[Ne.source]="reload",this.sourceCaches[Ne.source].pause())}this._updateLayer(Ne),Ne.onAdd&&Ne.onAdd(this.map)}}},Y.prototype.moveLayer=function(q,ne){if(this._checkLoaded(),this._changed=!0,this._layers[q]){if(q!==ne){var pe=this._order.indexOf(q);this._order.splice(pe,1);var Le=ne?this._order.indexOf(ne):this._order.length;ne&&Le===-1?this.fire(new l.ErrorEvent(new Error('Layer with id "'+ne+'" does not exist on this map.'))):(this._order.splice(Le,0,q),this._layerOrderChanged=!0)}}else this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be moved.")))},Y.prototype.removeLayer=function(q){this._checkLoaded();var ne=this._layers[q];if(ne){ne.setEventedParent(null);var pe=this._order.indexOf(q);this._order.splice(pe,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[q]=ne,delete this._layers[q],delete this._serializedLayers[q],delete this._updatedLayers[q],delete this._updatedPaintProps[q],ne.onRemove&&ne.onRemove(this.map)}else this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be removed.")))},Y.prototype.getLayer=function(q){return this._layers[q]},Y.prototype.hasLayer=function(q){return q in this._layers},Y.prototype.setLayerZoomRange=function(q,ne,pe){this._checkLoaded();var Le=this.getLayer(q);Le?Le.minzoom===ne&&Le.maxzoom===pe||(ne!=null&&(Le.minzoom=ne),pe!=null&&(Le.maxzoom=pe),this._updateLayer(Le)):this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot have zoom extent.")))},Y.prototype.setFilter=function(q,ne,pe){pe===void 0&&(pe={}),this._checkLoaded();var Le=this.getLayer(q);if(Le){if(!l.deepEqual(Le.filter,ne))return ne==null?(Le.filter=void 0,void this._updateLayer(Le)):void(this._validate(l.validateStyle.filter,"layers."+Le.id+".filter",ne,null,pe)||(Le.filter=l.clone$1(ne),this._updateLayer(Le)))}else this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be filtered.")))},Y.prototype.getFilter=function(q){return l.clone$1(this.getLayer(q).filter)},Y.prototype.setLayoutProperty=function(q,ne,pe,Le){Le===void 0&&(Le={}),this._checkLoaded();var Ne=this.getLayer(q);Ne?l.deepEqual(Ne.getLayoutProperty(ne),pe)||(Ne.setLayoutProperty(ne,pe,Le),this._updateLayer(Ne)):this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},Y.prototype.getLayoutProperty=function(q,ne){var pe=this.getLayer(q);if(pe)return pe.getLayoutProperty(ne);this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style.")))},Y.prototype.setPaintProperty=function(q,ne,pe,Le){Le===void 0&&(Le={}),this._checkLoaded();var Ne=this.getLayer(q);Ne?l.deepEqual(Ne.getPaintProperty(ne),pe)||(Ne.setPaintProperty(ne,pe,Le)&&this._updateLayer(Ne),this._changed=!0,this._updatedPaintProps[q]=!0):this.fire(new l.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},Y.prototype.getPaintProperty=function(q,ne){return this.getLayer(q).getPaintProperty(ne)},Y.prototype.setFeatureState=function(q,ne){this._checkLoaded();var pe=q.source,Le=q.sourceLayer,Ne=this.sourceCaches[pe];if(Ne!==void 0){var qe=Ne.getSource().type;qe==="geojson"&&Le?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):qe!=="vector"||Le?(q.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),Ne.setFeatureState(Le,q.id,ne)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+pe+"' does not exist in the map's style.")))},Y.prototype.removeFeatureState=function(q,ne){this._checkLoaded();var pe=q.source,Le=this.sourceCaches[pe];if(Le!==void 0){var Ne=Le.getSource().type,qe=Ne==="vector"?q.sourceLayer:void 0;Ne!=="vector"||qe?ne&&typeof q.id!="string"&&typeof q.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):Le.removeFeatureState(qe,q.id,ne):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+pe+"' does not exist in the map's style.")))},Y.prototype.getFeatureState=function(q){this._checkLoaded();var ne=q.source,pe=q.sourceLayer,Le=this.sourceCaches[ne];if(Le!==void 0){if(Le.getSource().type!=="vector"||pe)return q.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),Le.getFeatureState(pe,q.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+ne+"' does not exist in the map's style.")))},Y.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Y.prototype.serialize=function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(q){return q.serialize()}),layers:this._serializeLayers(this._order)},function(q){return q!==void 0})},Y.prototype._updateLayer=function(q){this._updatedLayers[q.id]=!0,q.source&&!this._updatedSources[q.source]&&this.sourceCaches[q.source].getSource().type!=="raster"&&(this._updatedSources[q.source]="reload",this.sourceCaches[q.source].pause()),this._changed=!0},Y.prototype._flattenAndSortRenderedFeatures=function(q){for(var ne=this,pe=function(Xt){return ne._layers[Xt].type==="fill-extrusion"},Le={},Ne=[],qe=this._order.length-1;qe>=0;qe--){var et=this._order[qe];if(pe(et)){Le[et]=qe;for(var vt=0,xt=q;vt<xt.length;vt+=1){var te=xt[vt][et];if(te)for(var ue=0,we=te;ue<we.length;ue+=1){var Pe=we[ue];Ne.push(Pe)}}}}Ne.sort(function(Xt,en){return en.intersectionZ-Xt.intersectionZ});for(var De=[],Ue=this._order.length-1;Ue>=0;Ue--){var Ze=this._order[Ue];if(pe(Ze))for(var Je=Ne.length-1;Je>=0;Je--){var it=Ne[Je].feature;if(Le[it.layer.id]<Ue)break;De.push(it),Ne.pop()}else for(var ut=0,St=q;ut<St.length;ut+=1){var Dt=St[ut][Ze];if(Dt)for(var Ft=0,Yt=Dt;Ft<Yt.length;Ft+=1){var ln=Yt[Ft];De.push(ln.feature)}}}return De},Y.prototype.queryRenderedFeatures=function(q,ne,pe){ne&&ne.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",ne.filter,null,ne);var Le={};if(ne&&ne.layers){if(!Array.isArray(ne.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Ne=0,qe=ne.layers;Ne<qe.length;Ne+=1){var et=qe[Ne],vt=this._layers[et];if(!vt)return this.fire(new l.ErrorEvent(new Error("The layer '"+et+"' does not exist in the map's style and cannot be queried for features."))),[];Le[vt.source]=!0}}var xt=[];for(var te in ne.availableImages=this._availableImages,this.sourceCaches)ne.layers&&!Le[te]||xt.push(V(this.sourceCaches[te],this._layers,this._serializedLayers,q,ne,pe));return this.placement&&xt.push(function(ue,we,Pe,De,Ue,Ze,Je){for(var it={},ut=Ze.queryRenderedSymbols(De),St=[],Dt=0,Ft=Object.keys(ut).map(Number);Dt<Ft.length;Dt+=1){var Yt=Ft[Dt];St.push(Je[Yt])}St.sort(W);for(var ln=function(){var gn=en[Xt],Qt=gn.featureIndex.lookupSymbolFeatures(ut[gn.bucketInstanceId],we,gn.bucketIndex,gn.sourceLayerIndex,Ue.filter,Ue.layers,Ue.availableImages,ue);for(var Pn in Qt){var Dn=it[Pn]=it[Pn]||[],Xn=Qt[Pn];Xn.sort(function(sr,dr){var kr=gn.featureSortOrder;if(kr){var Vr=kr.indexOf(sr.featureIndex);return kr.indexOf(dr.featureIndex)-Vr}return dr.featureIndex-sr.featureIndex});for(var Jn=0,gr=Xn;Jn<gr.length;Jn+=1){var vr=gr[Jn];Dn.push(vr)}}},Xt=0,en=St;Xt<en.length;Xt+=1)ln();var Jt=function(gn){it[gn].forEach(function(Qt){var Pn=Qt.feature,Dn=ue[gn],Xn=Pe[Dn.source].getFeatureState(Pn.layer["source-layer"],Pn.id);Pn.source=Pn.layer.source,Pn.layer["source-layer"]&&(Pn.sourceLayer=Pn.layer["source-layer"]),Pn.state=Xn})};for(var bn in it)Jt(bn);return it}(this._layers,this._serializedLayers,this.sourceCaches,q,ne,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(xt)},Y.prototype.querySourceFeatures=function(q,ne){ne&&ne.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",ne.filter,null,ne);var pe=this.sourceCaches[q];return pe?function(Le,Ne){for(var qe=Le.getRenderableIds().map(function(we){return Le.getTileByID(we)}),et=[],vt={},xt=0;xt<qe.length;xt++){var te=qe[xt],ue=te.tileID.canonical.key;vt[ue]||(vt[ue]=!0,te.querySourceFeatures(et,Ne))}return et}(pe,ne):[]},Y.prototype.addSourceType=function(q,ne,pe){return Y.getSourceType(q)?pe(new Error('A source type called "'+q+'" already exists.')):(Y.setSourceType(q,ne),ne.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:q,url:ne.workerSourceURL},pe):pe(null,null))},Y.prototype.getLight=function(){return this.light.getLight()},Y.prototype.setLight=function(q,ne){ne===void 0&&(ne={}),this._checkLoaded();var pe=this.light.getLight(),Le=!1;for(var Ne in q)if(!l.deepEqual(q[Ne],pe[Ne])){Le=!0;break}if(Le){var qe={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(q,ne),this.light.updateTransitions(qe)}},Y.prototype._validate=function(q,ne,pe,Le,Ne){return Ne===void 0&&(Ne={}),(!Ne||Ne.validate!==!1)&&Kn(this,q.call(l.validateStyle,l.extend({key:ne,style:this.serialize(),value:pe,styleSpec:l.styleSpec},Le)))},Y.prototype._remove=function(){for(var q in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[q].setEventedParent(null);for(var ne in this.sourceCaches)this.sourceCaches[ne].clearTiles(),this.sourceCaches[ne].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},Y.prototype._clearSource=function(q){this.sourceCaches[q].clearTiles()},Y.prototype._reloadSource=function(q){this.sourceCaches[q].resume(),this.sourceCaches[q].reload()},Y.prototype._updateSources=function(q){for(var ne in this.sourceCaches)this.sourceCaches[ne].update(q)},Y.prototype._generateCollisionBoxes=function(){for(var q in this.sourceCaches)this._reloadSource(q)},Y.prototype._updatePlacement=function(q,ne,pe,Le,Ne){Ne===void 0&&(Ne=!1);for(var qe=!1,et=!1,vt={},xt=0,te=this._order;xt<te.length;xt+=1){var ue=te[xt],we=this._layers[ue];if(we.type==="symbol"){if(!vt[we.source]){var Pe=this.sourceCaches[we.source];vt[we.source]=Pe.getRenderableIds(!0).map(function(ut){return Pe.getTileByID(ut)}).sort(function(ut,St){return St.tileID.overscaledZ-ut.tileID.overscaledZ||(ut.tileID.isLessThan(St.tileID)?-1:1)})}var De=this.crossTileSymbolIndex.addLayer(we,vt[we.source],q.center.lng);qe=qe||De}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Ne=Ne||this._layerOrderChanged||pe===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),q.zoom))&&(this.pauseablePlacement=new on(q,this._order,Ne,ne,pe,Le,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,vt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),et=!0),qe&&this.pauseablePlacement.placement.setStale()),et||qe)for(var Ue=0,Ze=this._order;Ue<Ze.length;Ue+=1){var Je=Ze[Ue],it=this._layers[Je];it.type==="symbol"&&this.placement.updateLayerOpacities(it,vt[it.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())},Y.prototype._releaseSymbolFadeTiles=function(){for(var q in this.sourceCaches)this.sourceCaches[q].releaseSymbolFadeTiles()},Y.prototype.getImages=function(q,ne,pe){this.imageManager.getImages(ne.icons,pe),this._updateTilesForChangedImages();var Le=this.sourceCaches[ne.source];Le&&Le.setDependencies(ne.tileID.key,ne.type,ne.icons)},Y.prototype.getGlyphs=function(q,ne,pe){this.glyphManager.getGlyphs(ne.stacks,pe)},Y.prototype.getResource=function(q,ne,pe){return l.makeRequest(ne,pe)},Y}(l.Evented);ir.getSourceType=function(D){return K[D]},ir.setSourceType=function(D,Y){K[D]=Y},ir.registerForPluginStateChange=l.registerForPluginStateChange;var lr=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),br=Qr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Ur=Qr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Sr=Qr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),cr=Qr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Lr=Qr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Rr=Qr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),li=Qr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Si=Qr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Oi=Qr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),La=Qr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Vi=Qr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),vi=Qr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ca=Qr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),io=Qr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Yo=Qr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Xo=Qr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),ll=Qr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Gs=Qr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Jo=Qr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ka=Qr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Zs=Qr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Di=Qr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),hs=Qr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ya=Qr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Aa=Qr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),xo=Qr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Qr(D,Y){var q=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,ne={};return{fragmentSource:D=D.replace(q,function(pe,Le,Ne,qe,et){return ne[et]=!0,Le==="define"?`
#ifndef HAS_UNIFORM_u_`+et+`
varying `+Ne+" "+qe+" "+et+`;
#else
uniform `+Ne+" "+qe+" u_"+et+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+et+`
    `+Ne+" "+qe+" "+et+" = u_"+et+`;
#endif
`}),vertexSource:Y=Y.replace(q,function(pe,Le,Ne,qe,et){var vt=qe==="float"?"vec2":"vec4",xt=et.match(/color/)?"color":vt;return ne[et]?Le==="define"?`
#ifndef HAS_UNIFORM_u_`+et+`
uniform lowp float u_`+et+`_t;
attribute `+Ne+" "+vt+" a_"+et+`;
varying `+Ne+" "+qe+" "+et+`;
#else
uniform `+Ne+" "+qe+" u_"+et+`;
#endif
`:xt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+et+`
    `+et+" = a_"+et+`;
#else
    `+Ne+" "+qe+" "+et+" = u_"+et+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+et+`
    `+et+" = unpack_mix_"+xt+"(a_"+et+", u_"+et+`_t);
#else
    `+Ne+" "+qe+" "+et+" = u_"+et+`;
#endif
`:Le==="define"?`
#ifndef HAS_UNIFORM_u_`+et+`
uniform lowp float u_`+et+`_t;
attribute `+Ne+" "+vt+" a_"+et+`;
#else
uniform `+Ne+" "+qe+" u_"+et+`;
#endif
`:xt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+et+`
    `+Ne+" "+qe+" "+et+" = a_"+et+`;
#else
    `+Ne+" "+qe+" "+et+" = u_"+et+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+et+`
    `+Ne+" "+qe+" "+et+" = unpack_mix_"+xt+"(a_"+et+", u_"+et+`_t);
#else
    `+Ne+" "+qe+" "+et+" = u_"+et+`;
#endif
`})}}var bo=Object.freeze({__proto__:null,prelude:br,background:Ur,backgroundPattern:Sr,circle:cr,clippingMask:Lr,heatmap:Rr,heatmapTexture:li,collisionBox:Si,collisionCircle:Oi,debug:La,fill:Vi,fillOutline:vi,fillOutlinePattern:Ca,fillPattern:io,fillExtrusion:Yo,fillExtrusionPattern:Xo,hillshadePrepare:ll,hillshade:Gs,line:Jo,lineGradient:ka,linePattern:Zs,lineSDF:Di,raster:hs,symbolIcon:ya,symbolSDF:Aa,symbolTextAndIcon:xo}),Pa=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Pa.prototype.bind=function(D,Y,q,ne,pe,Le,Ne,qe){this.context=D;for(var et=this.boundPaintVertexBuffers.length!==ne.length,vt=0;!et&&vt<ne.length;vt++)this.boundPaintVertexBuffers[vt]!==ne[vt]&&(et=!0);var xt=!this.vao||this.boundProgram!==Y||this.boundLayoutVertexBuffer!==q||et||this.boundIndexBuffer!==pe||this.boundVertexOffset!==Le||this.boundDynamicVertexBuffer!==Ne||this.boundDynamicVertexBuffer2!==qe;!D.extVertexArrayObject||xt?this.freshBind(Y,q,ne,pe,Le,Ne,qe):(D.bindVertexArrayOES.set(this.vao),Ne&&Ne.bind(),pe&&pe.dynamicDraw&&pe.bind(),qe&&qe.bind())},Pa.prototype.freshBind=function(D,Y,q,ne,pe,Le,Ne){var qe,et=D.numAttributes,vt=this.context,xt=vt.gl;if(vt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=vt.extVertexArrayObject.createVertexArrayOES(),vt.bindVertexArrayOES.set(this.vao),qe=0,this.boundProgram=D,this.boundLayoutVertexBuffer=Y,this.boundPaintVertexBuffers=q,this.boundIndexBuffer=ne,this.boundVertexOffset=pe,this.boundDynamicVertexBuffer=Le,this.boundDynamicVertexBuffer2=Ne;else{qe=vt.currentNumAttributes||0;for(var te=et;te<qe;te++)xt.disableVertexAttribArray(te)}Y.enableAttributes(xt,D);for(var ue=0,we=q;ue<we.length;ue+=1)we[ue].enableAttributes(xt,D);Le&&Le.enableAttributes(xt,D),Ne&&Ne.enableAttributes(xt,D),Y.bind(),Y.setVertexAttribPointers(xt,D,pe);for(var Pe=0,De=q;Pe<De.length;Pe+=1){var Ue=De[Pe];Ue.bind(),Ue.setVertexAttribPointers(xt,D,pe)}Le&&(Le.bind(),Le.setVertexAttribPointers(xt,D,pe)),ne&&ne.bind(),Ne&&(Ne.bind(),Ne.setVertexAttribPointers(xt,D,pe)),vt.currentNumAttributes=et},Pa.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Va=function(D,Y,q,ne,pe){var Le=D.gl;this.program=Le.createProgram();var Ne=q?q.defines():[];pe&&Ne.push("#define OVERDRAW_INSPECTOR;");var qe=Ne.concat(br.fragmentSource,Y.fragmentSource).join(`
`),et=Ne.concat(br.vertexSource,Y.vertexSource).join(`
`),vt=Le.createShader(Le.FRAGMENT_SHADER);if(Le.isContextLost())this.failedToCreate=!0;else{Le.shaderSource(vt,qe),Le.compileShader(vt),Le.attachShader(this.program,vt);var xt=Le.createShader(Le.VERTEX_SHADER);if(Le.isContextLost())this.failedToCreate=!0;else{Le.shaderSource(xt,et),Le.compileShader(xt),Le.attachShader(this.program,xt);for(var te=q?q.layoutAttributes:[],ue=0;ue<te.length;ue++)Le.bindAttribLocation(this.program,ue,te[ue].name);Le.linkProgram(this.program),Le.deleteShader(xt),Le.deleteShader(vt),this.numAttributes=Le.getProgramParameter(this.program,Le.ACTIVE_ATTRIBUTES),this.attributes={};for(var we={},Pe=0;Pe<this.numAttributes;Pe++){var De=Le.getActiveAttrib(this.program,Pe);De&&(this.attributes[De.name]=Le.getAttribLocation(this.program,De.name))}for(var Ue=Le.getProgramParameter(this.program,Le.ACTIVE_UNIFORMS),Ze=0;Ze<Ue;Ze++){var Je=Le.getActiveUniform(this.program,Ze);Je&&(we[Je.name]=Le.getUniformLocation(this.program,Je.name))}this.fixedUniforms=ne(D,we),this.binderUniforms=q?q.getUniforms(D,we):[]}}};function Ja(D,Y,q){var ne=1/qn(q,1,Y.transform.tileZoom),pe=Math.pow(2,q.tileID.overscaledZ),Le=q.tileSize*Math.pow(2,Y.transform.tileZoom)/pe,Ne=Le*(q.tileID.canonical.x+q.tileID.wrap*pe),qe=Le*q.tileID.canonical.y;return{u_image:0,u_texsize:q.imageAtlasTexture.size,u_scale:[ne,D.fromScale,D.toScale],u_fade:D.t,u_pixel_coord_upper:[Ne>>16,qe>>16],u_pixel_coord_lower:[65535&Ne,65535&qe]}}Va.prototype.draw=function(D,Y,q,ne,pe,Le,Ne,qe,et,vt,xt,te,ue,we,Pe,De){var Ue,Ze=D.gl;if(!this.failedToCreate){for(var Je in D.program.set(this.program),D.setDepthMode(q),D.setStencilMode(ne),D.setColorMode(pe),D.setCullFace(Le),this.fixedUniforms)this.fixedUniforms[Je].set(Ne[Je]);we&&we.setUniforms(D,this.binderUniforms,te,{zoom:ue});for(var it=(Ue={},Ue[Ze.LINES]=2,Ue[Ze.TRIANGLES]=3,Ue[Ze.LINE_STRIP]=1,Ue)[Y],ut=0,St=xt.get();ut<St.length;ut+=1){var Dt=St[ut],Ft=Dt.vaos||(Dt.vaos={});(Ft[qe]||(Ft[qe]=new Pa)).bind(D,this,et,we?we.getPaintVertexBuffers():[],vt,Dt.vertexOffset,Pe,De),Ze.drawElements(Y,Dt.primitiveLength*it,Ze.UNSIGNED_SHORT,Dt.primitiveOffset*it*2)}}};var ps=function(D,Y,q,ne){var pe=Y.style.light,Le=pe.properties.get("position"),Ne=[Le.x,Le.y,Le.z],qe=l.create$1();pe.properties.get("anchor")==="viewport"&&l.fromRotation(qe,-Y.transform.angle),l.transformMat3(Ne,Ne,qe);var et=pe.properties.get("color");return{u_matrix:D,u_lightpos:Ne,u_lightintensity:pe.properties.get("intensity"),u_lightcolor:[et.r,et.g,et.b],u_vertical_gradient:+q,u_opacity:ne}},ul=function(D,Y,q,ne,pe,Le,Ne){return l.extend(ps(D,Y,q,ne),Ja(Le,Y,Ne),{u_height_factor:-Math.pow(2,pe.overscaledZ)/Ne.tileSize/8})},ao=function(D){return{u_matrix:D}},cl=function(D,Y,q,ne){return l.extend(ao(D),Ja(q,Y,ne))},fl=function(D,Y){return{u_matrix:D,u_world:Y}},bl=function(D,Y,q,ne,pe){return l.extend(cl(D,Y,q,ne),{u_world:pe})},Ws=function(D,Y,q,ne){var pe,Le,Ne=D.transform;if(ne.paint.get("circle-pitch-alignment")==="map"){var qe=qn(q,1,Ne.zoom);pe=!0,Le=[qe,qe]}else pe=!1,Le=Ne.pixelsToGLUnits;return{u_camera_to_center_distance:Ne.cameraToCenterDistance,u_scale_with_map:+(ne.paint.get("circle-pitch-scale")==="map"),u_matrix:D.translatePosMatrix(Y.posMatrix,q,ne.paint.get("circle-translate"),ne.paint.get("circle-translate-anchor")),u_pitch_with_map:+pe,u_device_pixel_ratio:l.browser.devicePixelRatio,u_extrude_scale:Le}},hl=function(D,Y,q){var ne=qn(q,1,Y.zoom),pe=Math.pow(2,Y.zoom-q.tileID.overscaledZ),Le=q.tileID.overscaleFactor();return{u_matrix:D,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pixels_to_tile_units:ne,u_extrude_scale:[Y.pixelsToGLUnits[0]/(ne*pe),Y.pixelsToGLUnits[1]/(ne*pe)],u_overscale_factor:Le}},Ys=function(D,Y,q){return{u_matrix:D,u_inv_matrix:Y,u_camera_to_center_distance:q.cameraToCenterDistance,u_viewport_size:[q.width,q.height]}},oo=function(D,Y,q){return q===void 0&&(q=1),{u_matrix:D,u_color:Y,u_overlay:0,u_overlay_scale:q}},so=function(D){return{u_matrix:D}},Ko=function(D,Y,q,ne){return{u_matrix:D,u_extrude_scale:qn(Y,1,q),u_intensity:ne}},lo=function(D,Y,q){var ne=D.transform;return{u_matrix:_o(D,Y,q),u_ratio:1/qn(Y,1,ne.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_units_to_pixels:[1/ne.pixelsToGLUnits[0],1/ne.pixelsToGLUnits[1]]}},Xs=function(D,Y,q){return l.extend(lo(D,Y,q),{u_image:0})},Js=function(D,Y,q,ne){var pe=D.transform,Le=Cs(Y,pe);return{u_matrix:_o(D,Y,q),u_texsize:Y.imageAtlasTexture.size,u_ratio:1/qn(Y,1,pe.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_image:0,u_scale:[Le,ne.fromScale,ne.toScale],u_fade:ne.t,u_units_to_pixels:[1/pe.pixelsToGLUnits[0],1/pe.pixelsToGLUnits[1]]}},Ro=function(D,Y,q,ne,pe){var Le=D.transform,Ne=D.lineAtlas,qe=Cs(Y,Le),et=q.layout.get("line-cap")==="round",vt=Ne.getDash(ne.from,et),xt=Ne.getDash(ne.to,et),te=vt.width*pe.fromScale,ue=xt.width*pe.toScale;return l.extend(lo(D,Y,q),{u_patternscale_a:[qe/te,-vt.height/2],u_patternscale_b:[qe/ue,-xt.height/2],u_sdfgamma:Ne.width/(256*Math.min(te,ue)*l.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:vt.y,u_tex_y_b:xt.y,u_mix:pe.t})};function Cs(D,Y){return 1/qn(D,1,Y.tileZoom)}function _o(D,Y,q){return D.translatePosMatrix(Y.tileID.posMatrix,Y,q.paint.get("line-translate"),q.paint.get("line-translate-anchor"))}var $o=function(D,Y,q,ne,pe){return{u_matrix:D,u_tl_parent:Y,u_scale_parent:q,u_buffer_scale:1,u_fade_t:ne.mix,u_opacity:ne.opacity*pe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:pe.paint.get("raster-brightness-min"),u_brightness_high:pe.paint.get("raster-brightness-max"),u_saturation_factor:(Ne=pe.paint.get("raster-saturation"),Ne>0?1-1/(1.001-Ne):-Ne),u_contrast_factor:(Le=pe.paint.get("raster-contrast"),Le>0?1/(1-Le):1+Le),u_spin_weights:zo(pe.paint.get("raster-hue-rotate"))};var Le,Ne};function zo(D){D*=Math.PI/180;var Y=Math.sin(D),q=Math.cos(D);return[(2*q+1)/3,(-Math.sqrt(3)*Y-q+1)/3,(Math.sqrt(3)*Y-q+1)/3]}var uo,ei=function(D,Y,q,ne,pe,Le,Ne,qe,et,vt){var xt=pe.transform;return{u_is_size_zoom_constant:+(D==="constant"||D==="source"),u_is_size_feature_constant:+(D==="constant"||D==="camera"),u_size_t:Y?Y.uSizeT:0,u_size:Y?Y.uSize:0,u_camera_to_center_distance:xt.cameraToCenterDistance,u_pitch:xt.pitch/360*2*Math.PI,u_rotate_symbol:+q,u_aspect_ratio:xt.width/xt.height,u_fade_change:pe.options.fadeDuration?pe.symbolFadeChange:1,u_matrix:Le,u_label_plane_matrix:Ne,u_coord_matrix:qe,u_is_text:+et,u_pitch_with_map:+ne,u_texsize:vt,u_texture:0}},wo=function(D,Y,q,ne,pe,Le,Ne,qe,et,vt,xt){var te=pe.transform;return l.extend(ei(D,Y,q,ne,pe,Le,Ne,qe,et,vt),{u_gamma_scale:ne?Math.cos(te._pitch)*te.cameraToCenterDistance:1,u_device_pixel_ratio:l.browser.devicePixelRatio,u_is_halo:+xt})},_l=function(D,Y,q,ne,pe,Le,Ne,qe,et,vt){return l.extend(wo(D,Y,q,ne,pe,Le,Ne,qe,!0,et,!0),{u_texsize_icon:vt,u_texture_icon:1})},Ps=function(D,Y,q){return{u_matrix:D,u_opacity:Y,u_color:q}},ds=function(D,Y,q,ne,pe,Le){return l.extend(function(Ne,qe,et,vt){var xt=et.imageManager.getPattern(Ne.from.toString()),te=et.imageManager.getPattern(Ne.to.toString()),ue=et.imageManager.getPixelSize(),we=ue.width,Pe=ue.height,De=Math.pow(2,vt.tileID.overscaledZ),Ue=vt.tileSize*Math.pow(2,et.transform.tileZoom)/De,Ze=Ue*(vt.tileID.canonical.x+vt.tileID.wrap*De),Je=Ue*vt.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:xt.tl,u_pattern_br_a:xt.br,u_pattern_tl_b:te.tl,u_pattern_br_b:te.br,u_texsize:[we,Pe],u_mix:qe.t,u_pattern_size_a:xt.displaySize,u_pattern_size_b:te.displaySize,u_scale_a:qe.fromScale,u_scale_b:qe.toScale,u_tile_units_to_pixels:1/qn(vt,1,et.transform.tileZoom),u_pixel_coord_upper:[Ze>>16,Je>>16],u_pixel_coord_lower:[65535&Ze,65535&Je]}}(ne,Le,q,pe),{u_matrix:D,u_opacity:Y})},Do={fillExtrusion:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_lightpos:new l.Uniform3f(D,Y.u_lightpos),u_lightintensity:new l.Uniform1f(D,Y.u_lightintensity),u_lightcolor:new l.Uniform3f(D,Y.u_lightcolor),u_vertical_gradient:new l.Uniform1f(D,Y.u_vertical_gradient),u_opacity:new l.Uniform1f(D,Y.u_opacity)}},fillExtrusionPattern:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_lightpos:new l.Uniform3f(D,Y.u_lightpos),u_lightintensity:new l.Uniform1f(D,Y.u_lightintensity),u_lightcolor:new l.Uniform3f(D,Y.u_lightcolor),u_vertical_gradient:new l.Uniform1f(D,Y.u_vertical_gradient),u_height_factor:new l.Uniform1f(D,Y.u_height_factor),u_image:new l.Uniform1i(D,Y.u_image),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_pixel_coord_upper:new l.Uniform2f(D,Y.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(D,Y.u_pixel_coord_lower),u_scale:new l.Uniform3f(D,Y.u_scale),u_fade:new l.Uniform1f(D,Y.u_fade),u_opacity:new l.Uniform1f(D,Y.u_opacity)}},fill:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix)}},fillPattern:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_image:new l.Uniform1i(D,Y.u_image),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_pixel_coord_upper:new l.Uniform2f(D,Y.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(D,Y.u_pixel_coord_lower),u_scale:new l.Uniform3f(D,Y.u_scale),u_fade:new l.Uniform1f(D,Y.u_fade)}},fillOutline:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_world:new l.Uniform2f(D,Y.u_world)}},fillOutlinePattern:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_world:new l.Uniform2f(D,Y.u_world),u_image:new l.Uniform1i(D,Y.u_image),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_pixel_coord_upper:new l.Uniform2f(D,Y.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(D,Y.u_pixel_coord_lower),u_scale:new l.Uniform3f(D,Y.u_scale),u_fade:new l.Uniform1f(D,Y.u_fade)}},circle:function(D,Y){return{u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(D,Y.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(D,Y.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(D,Y.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix)}},collisionBox:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(D,Y.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(D,Y.u_extrude_scale),u_overscale_factor:new l.Uniform1f(D,Y.u_overscale_factor)}},collisionCircle:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_inv_matrix:new l.UniformMatrix4f(D,Y.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(D,Y.u_viewport_size)}},debug:function(D,Y){return{u_color:new l.UniformColor(D,Y.u_color),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_overlay:new l.Uniform1i(D,Y.u_overlay),u_overlay_scale:new l.Uniform1f(D,Y.u_overlay_scale)}},clippingMask:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix)}},heatmap:function(D,Y){return{u_extrude_scale:new l.Uniform1f(D,Y.u_extrude_scale),u_intensity:new l.Uniform1f(D,Y.u_intensity),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix)}},heatmapTexture:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_world:new l.Uniform2f(D,Y.u_world),u_image:new l.Uniform1i(D,Y.u_image),u_color_ramp:new l.Uniform1i(D,Y.u_color_ramp),u_opacity:new l.Uniform1f(D,Y.u_opacity)}},hillshade:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_image:new l.Uniform1i(D,Y.u_image),u_latrange:new l.Uniform2f(D,Y.u_latrange),u_light:new l.Uniform2f(D,Y.u_light),u_shadow:new l.UniformColor(D,Y.u_shadow),u_highlight:new l.UniformColor(D,Y.u_highlight),u_accent:new l.UniformColor(D,Y.u_accent)}},hillshadePrepare:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_image:new l.Uniform1i(D,Y.u_image),u_dimension:new l.Uniform2f(D,Y.u_dimension),u_zoom:new l.Uniform1f(D,Y.u_zoom),u_maxzoom:new l.Uniform1f(D,Y.u_maxzoom),u_unpack:new l.Uniform4f(D,Y.u_unpack)}},line:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_ratio:new l.Uniform1f(D,Y.u_ratio),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(D,Y.u_units_to_pixels)}},lineGradient:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_ratio:new l.Uniform1f(D,Y.u_ratio),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(D,Y.u_units_to_pixels),u_image:new l.Uniform1i(D,Y.u_image)}},linePattern:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_ratio:new l.Uniform1f(D,Y.u_ratio),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_image:new l.Uniform1i(D,Y.u_image),u_units_to_pixels:new l.Uniform2f(D,Y.u_units_to_pixels),u_scale:new l.Uniform3f(D,Y.u_scale),u_fade:new l.Uniform1f(D,Y.u_fade)}},lineSDF:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_ratio:new l.Uniform1f(D,Y.u_ratio),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(D,Y.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(D,Y.u_patternscale_a),u_patternscale_b:new l.Uniform2f(D,Y.u_patternscale_b),u_sdfgamma:new l.Uniform1f(D,Y.u_sdfgamma),u_image:new l.Uniform1i(D,Y.u_image),u_tex_y_a:new l.Uniform1f(D,Y.u_tex_y_a),u_tex_y_b:new l.Uniform1f(D,Y.u_tex_y_b),u_mix:new l.Uniform1f(D,Y.u_mix)}},raster:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_tl_parent:new l.Uniform2f(D,Y.u_tl_parent),u_scale_parent:new l.Uniform1f(D,Y.u_scale_parent),u_buffer_scale:new l.Uniform1f(D,Y.u_buffer_scale),u_fade_t:new l.Uniform1f(D,Y.u_fade_t),u_opacity:new l.Uniform1f(D,Y.u_opacity),u_image0:new l.Uniform1i(D,Y.u_image0),u_image1:new l.Uniform1i(D,Y.u_image1),u_brightness_low:new l.Uniform1f(D,Y.u_brightness_low),u_brightness_high:new l.Uniform1f(D,Y.u_brightness_high),u_saturation_factor:new l.Uniform1f(D,Y.u_saturation_factor),u_contrast_factor:new l.Uniform1f(D,Y.u_contrast_factor),u_spin_weights:new l.Uniform3f(D,Y.u_spin_weights)}},symbolIcon:function(D,Y){return{u_is_size_zoom_constant:new l.Uniform1i(D,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(D,Y.u_is_size_feature_constant),u_size_t:new l.Uniform1f(D,Y.u_size_t),u_size:new l.Uniform1f(D,Y.u_size),u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_pitch:new l.Uniform1f(D,Y.u_pitch),u_rotate_symbol:new l.Uniform1i(D,Y.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(D,Y.u_aspect_ratio),u_fade_change:new l.Uniform1f(D,Y.u_fade_change),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(D,Y.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(D,Y.u_coord_matrix),u_is_text:new l.Uniform1i(D,Y.u_is_text),u_pitch_with_map:new l.Uniform1i(D,Y.u_pitch_with_map),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_texture:new l.Uniform1i(D,Y.u_texture)}},symbolSDF:function(D,Y){return{u_is_size_zoom_constant:new l.Uniform1i(D,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(D,Y.u_is_size_feature_constant),u_size_t:new l.Uniform1f(D,Y.u_size_t),u_size:new l.Uniform1f(D,Y.u_size),u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_pitch:new l.Uniform1f(D,Y.u_pitch),u_rotate_symbol:new l.Uniform1i(D,Y.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(D,Y.u_aspect_ratio),u_fade_change:new l.Uniform1f(D,Y.u_fade_change),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(D,Y.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(D,Y.u_coord_matrix),u_is_text:new l.Uniform1i(D,Y.u_is_text),u_pitch_with_map:new l.Uniform1i(D,Y.u_pitch_with_map),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_texture:new l.Uniform1i(D,Y.u_texture),u_gamma_scale:new l.Uniform1f(D,Y.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(D,Y.u_is_halo)}},symbolTextAndIcon:function(D,Y){return{u_is_size_zoom_constant:new l.Uniform1i(D,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(D,Y.u_is_size_feature_constant),u_size_t:new l.Uniform1f(D,Y.u_size_t),u_size:new l.Uniform1f(D,Y.u_size),u_camera_to_center_distance:new l.Uniform1f(D,Y.u_camera_to_center_distance),u_pitch:new l.Uniform1f(D,Y.u_pitch),u_rotate_symbol:new l.Uniform1i(D,Y.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(D,Y.u_aspect_ratio),u_fade_change:new l.Uniform1f(D,Y.u_fade_change),u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(D,Y.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(D,Y.u_coord_matrix),u_is_text:new l.Uniform1i(D,Y.u_is_text),u_pitch_with_map:new l.Uniform1i(D,Y.u_pitch_with_map),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_texsize_icon:new l.Uniform2f(D,Y.u_texsize_icon),u_texture:new l.Uniform1i(D,Y.u_texture),u_texture_icon:new l.Uniform1i(D,Y.u_texture_icon),u_gamma_scale:new l.Uniform1f(D,Y.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(D,Y.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(D,Y.u_is_halo)}},background:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_opacity:new l.Uniform1f(D,Y.u_opacity),u_color:new l.UniformColor(D,Y.u_color)}},backgroundPattern:function(D,Y){return{u_matrix:new l.UniformMatrix4f(D,Y.u_matrix),u_opacity:new l.Uniform1f(D,Y.u_opacity),u_image:new l.Uniform1i(D,Y.u_image),u_pattern_tl_a:new l.Uniform2f(D,Y.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(D,Y.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(D,Y.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(D,Y.u_pattern_br_b),u_texsize:new l.Uniform2f(D,Y.u_texsize),u_mix:new l.Uniform1f(D,Y.u_mix),u_pattern_size_a:new l.Uniform2f(D,Y.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(D,Y.u_pattern_size_b),u_scale_a:new l.Uniform1f(D,Y.u_scale_a),u_scale_b:new l.Uniform1f(D,Y.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(D,Y.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(D,Y.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(D,Y.u_tile_units_to_pixels)}}};function Qo(D,Y,q,ne,pe,Le,Ne){for(var qe=D.context,et=qe.gl,vt=D.useProgram("collisionBox"),xt=[],te=0,ue=0,we=0;we<ne.length;we++){var Pe=ne[we],De=Y.getTile(Pe),Ue=De.getBucket(q);if(Ue){var Ze=Pe.posMatrix;pe[0]===0&&pe[1]===0||(Ze=D.translatePosMatrix(Pe.posMatrix,De,pe,Le));var Je=Ne?Ue.textCollisionBox:Ue.iconCollisionBox,it=Ue.collisionCircleArray;if(it.length>0){var ut=l.create(),St=Ze;l.mul(ut,Ue.placementInvProjMatrix,D.transform.glCoordMatrix),l.mul(ut,ut,Ue.placementViewportMatrix),xt.push({circleArray:it,circleOffset:ue,transform:St,invTransform:ut}),ue=te+=it.length/4}Je&&vt.draw(qe,et.LINES,Ut.disabled,Ge.disabled,D.colorModeForRenderPass(),Be.disabled,hl(Ze,D.transform,De),q.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,null,D.transform.zoom,null,null,Je.collisionVertexBuffer)}}if(Ne&&xt.length){var Dt=D.useProgram("collisionCircle"),Ft=new l.StructArrayLayout2f1f2i16;Ft.resize(4*te),Ft._trim();for(var Yt=0,ln=0,Xt=xt;ln<Xt.length;ln+=1)for(var en=Xt[ln],Jt=0;Jt<en.circleArray.length/4;Jt++){var bn=4*Jt,gn=en.circleArray[bn+0],Qt=en.circleArray[bn+1],Pn=en.circleArray[bn+2],Dn=en.circleArray[bn+3];Ft.emplace(Yt++,gn,Qt,Pn,Dn,0),Ft.emplace(Yt++,gn,Qt,Pn,Dn,1),Ft.emplace(Yt++,gn,Qt,Pn,Dn,2),Ft.emplace(Yt++,gn,Qt,Pn,Dn,3)}(!uo||uo.length<2*te)&&(uo=function(kr){var Vr=2*kr,Hr=new l.StructArrayLayout3ui6;Hr.resize(Vr),Hr._trim();for(var hr=0;hr<Vr;hr++){var Ar=6*hr;Hr.uint16[Ar+0]=4*hr+0,Hr.uint16[Ar+1]=4*hr+1,Hr.uint16[Ar+2]=4*hr+2,Hr.uint16[Ar+3]=4*hr+2,Hr.uint16[Ar+4]=4*hr+3,Hr.uint16[Ar+5]=4*hr+0}return Hr}(te));for(var Xn=qe.createIndexBuffer(uo,!0),Jn=qe.createVertexBuffer(Ft,l.collisionCircleLayout.members,!0),gr=0,vr=xt;gr<vr.length;gr+=1){var sr=vr[gr],dr=Ys(sr.transform,sr.invTransform,D.transform);Dt.draw(qe,et.TRIANGLES,Ut.disabled,Ge.disabled,D.colorModeForRenderPass(),Be.disabled,dr,q.id,Jn,Xn,l.SegmentVector.simpleSegment(0,2*sr.circleOffset,sr.circleArray.length,sr.circleArray.length/2),null,D.transform.zoom,null,null,null)}Jn.destroy(),Xn.destroy()}}var Oa=l.identity(new Float32Array(16));function Ks(D,Y,q,ne,pe,Le){var Ne=l.getAnchorAlignment(D),qe=-(Ne.horizontalAlign-.5)*Y,et=-(Ne.verticalAlign-.5)*q,vt=l.evaluateVariableOffset(D,ne);return new l.Point((qe/pe+vt[0])*Le,(et/pe+vt[1])*Le)}function gs(D,Y,q,ne,pe,Le,Ne,qe,et,vt,xt){var te=D.text.placedSymbolArray,ue=D.text.dynamicLayoutVertexArray,we=D.icon.dynamicLayoutVertexArray,Pe={};ue.clear();for(var De=0;De<te.length;De++){var Ue=te.get(De),Ze=D.allowVerticalPlacement&&!Ue.placedOrientation,Je=Ue.hidden||!Ue.crossTileID||Ze?null:ne[Ue.crossTileID];if(Je){var it=new l.Point(Ue.anchorX,Ue.anchorY),ut=cn(it,q?qe:Ne),St=dn(Le.cameraToCenterDistance,ut.signedDistanceFromCamera),Dt=pe.evaluateSizeForFeature(D.textSizeData,vt,Ue)*St/l.ONE_EM;q&&(Dt*=D.tilePixelRatio/et);for(var Ft=Je.width,Yt=Je.height,ln=Ks(Je.anchor,Ft,Yt,Je.textOffset,Je.textBoxScale,Dt),Xt=q?cn(it.add(ln),Ne).point:ut.point.add(Y?ln.rotate(-Le.angle):ln),en=D.allowVerticalPlacement&&Ue.placedOrientation===l.WritingMode.vertical?Math.PI/2:0,Jt=0;Jt<Ue.numGlyphs;Jt++)l.addDynamicAttributes(ue,Xt,en);xt&&Ue.associatedIconIndex>=0&&(Pe[Ue.associatedIconIndex]={shiftedAnchor:Xt,angle:en})}else $n(Ue.numGlyphs,ue)}if(xt){we.clear();for(var bn=D.icon.placedSymbolArray,gn=0;gn<bn.length;gn++){var Qt=bn.get(gn);if(Qt.hidden)$n(Qt.numGlyphs,we);else{var Pn=Pe[gn];if(Pn)for(var Dn=0;Dn<Qt.numGlyphs;Dn++)l.addDynamicAttributes(we,Pn.shiftedAnchor,Pn.angle);else $n(Qt.numGlyphs,we)}}D.icon.dynamicLayoutVertexBuffer.updateData(we)}D.text.dynamicLayoutVertexBuffer.updateData(ue)}function es(D,Y,q){return q.iconsInText&&Y?"symbolTextAndIcon":D?"symbolSDF":"symbolIcon"}function vs(D,Y,q,ne,pe,Le,Ne,qe,et,vt,xt,te){for(var ue=D.context,we=ue.gl,Pe=D.transform,De=qe==="map",Ue=et==="map",Ze=De&&q.layout.get("symbol-placement")!=="point",Je=De&&!Ue&&!Ze,it=q.layout.get("symbol-sort-key").constantOr(1)!==void 0,ut=D.depthModeForSublayer(0,Ut.ReadOnly),St=q.layout.get("text-variable-anchor"),Dt=[],Ft=0,Yt=ne;Ft<Yt.length;Ft+=1){var ln=Yt[Ft],Xt=Y.getTile(ln),en=Xt.getBucket(q);if(en){var Jt=pe?en.text:en.icon;if(Jt&&Jt.segments.get().length){var bn=Jt.programConfigurations.get(q.id),gn=pe||en.sdfIcons,Qt=pe?en.textSizeData:en.iconSizeData,Pn=Ue||Pe.pitch!==0,Dn=D.useProgram(es(gn,pe,en),bn),Xn=l.evaluateSizeForZoom(Qt,Pe.zoom),Jn=void 0,gr=[0,0],vr=void 0,sr=void 0,dr=null,kr=void 0;if(pe){if(vr=Xt.glyphAtlasTexture,sr=we.LINEAR,Jn=Xt.glyphAtlasTexture.size,en.iconsInText){gr=Xt.imageAtlasTexture.size,dr=Xt.imageAtlasTexture;var Vr=Qt.kind==="composite"||Qt.kind==="camera";kr=Pn||D.options.rotating||D.options.zooming||Vr?we.LINEAR:we.NEAREST}}else{var Hr=q.layout.get("icon-size").constantOr(0)!==1||en.iconsNeedLinear;vr=Xt.imageAtlasTexture,sr=gn||D.options.rotating||D.options.zooming||Hr||Pn?we.LINEAR:we.NEAREST,Jn=Xt.imageAtlasTexture.size}var hr=qn(Xt,1,D.transform.zoom),Ar=Bn(ln.posMatrix,Ue,De,D.transform,hr),Dr=vn(ln.posMatrix,Ue,De,D.transform,hr),zr=St&&en.hasTextData(),Wr=q.layout.get("icon-text-fit")!=="none"&&zr&&en.hasIconData();Ze&&hn(en,ln.posMatrix,D,pe,Ar,Dr,Ue,vt);var Zr=D.translatePosMatrix(ln.posMatrix,Xt,Le,Ne),$r=Ze||pe&&St||Wr?Oa:Ar,ui=D.translatePosMatrix(Dr,Xt,Le,Ne,!0),yi=gn&&q.paint.get(pe?"text-halo-width":"icon-halo-width").constantOr(1)!==0,hi={program:Dn,buffers:Jt,uniformValues:gn?en.iconsInText?_l(Qt.kind,Xn,Je,Ue,D,Zr,$r,ui,Jn,gr):wo(Qt.kind,Xn,Je,Ue,D,Zr,$r,ui,pe,Jn,!0):ei(Qt.kind,Xn,Je,Ue,D,Zr,$r,ui,pe,Jn),atlasTexture:vr,atlasTextureIcon:dr,atlasInterpolation:sr,atlasInterpolationIcon:kr,isSDF:gn,hasHalo:yi};if(it)for(var si=0,ci=Jt.segments.get();si<ci.length;si+=1){var pi=ci[si];Dt.push({segments:new l.SegmentVector([pi]),sortKey:pi.sortKey,state:hi})}else Dt.push({segments:Jt.segments,sortKey:0,state:hi})}}}it&&Dt.sort(function(ea,Ai){return ea.sortKey-Ai.sortKey});for(var Ei=0,Lo=Dt;Ei<Lo.length;Ei+=1){var Bi=Lo[Ei],Br=Bi.state;if(ue.activeTexture.set(we.TEXTURE0),Br.atlasTexture.bind(Br.atlasInterpolation,we.CLAMP_TO_EDGE),Br.atlasTextureIcon&&(ue.activeTexture.set(we.TEXTURE1),Br.atlasTextureIcon&&Br.atlasTextureIcon.bind(Br.atlasInterpolationIcon,we.CLAMP_TO_EDGE)),Br.isSDF){var Zi=Br.uniformValues;Br.hasHalo&&(Zi.u_is_halo=1,Fo(Br.buffers,Bi.segments,q,D,Br.program,ut,xt,te,Zi)),Zi.u_is_halo=0}Fo(Br.buffers,Bi.segments,q,D,Br.program,ut,xt,te,Br.uniformValues)}}function Fo(D,Y,q,ne,pe,Le,Ne,qe,et){var vt=ne.context,xt=vt.gl;pe.draw(vt,xt.TRIANGLES,Le,Ne,qe,Be.disabled,et,q.id,D.layoutVertexBuffer,D.indexBuffer,Y,q.paint,ne.transform.zoom,D.programConfigurations.get(q.id),D.dynamicLayoutVertexBuffer,D.opacityVertexBuffer)}function Bo(D,Y,q,ne,pe,Le,Ne){var qe,et,vt,xt,te,ue=D.context.gl,we=q.paint.get("fill-pattern"),Pe=we&&we.constantOr(1),De=q.getCrossfadeParameters();Ne?(et=Pe&&!q.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",qe=ue.LINES):(et=Pe?"fillPattern":"fill",qe=ue.TRIANGLES);for(var Ue=0,Ze=ne;Ue<Ze.length;Ue+=1){var Je=Ze[Ue],it=Y.getTile(Je);if(!Pe||it.patternsLoaded()){var ut=it.getBucket(q);if(ut){var St=ut.programConfigurations.get(q.id),Dt=D.useProgram(et,St);Pe&&(D.context.activeTexture.set(ue.TEXTURE0),it.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),St.updatePaintBuffers(De));var Ft=we.constantOr(null);if(Ft&&it.imageAtlas){var Yt=it.imageAtlas,ln=Yt.patternPositions[Ft.to.toString()],Xt=Yt.patternPositions[Ft.from.toString()];ln&&Xt&&St.setConstantPatternPositions(ln,Xt)}var en=D.translatePosMatrix(Je.posMatrix,it,q.paint.get("fill-translate"),q.paint.get("fill-translate-anchor"));if(Ne){xt=ut.indexBuffer2,te=ut.segments2;var Jt=[ue.drawingBufferWidth,ue.drawingBufferHeight];vt=et==="fillOutlinePattern"&&Pe?bl(en,D,De,it,Jt):fl(en,Jt)}else xt=ut.indexBuffer,te=ut.segments,vt=Pe?cl(en,D,De,it):ao(en);Dt.draw(D.context,qe,pe,D.stencilModeForClipping(Je),Le,Be.disabled,vt,q.id,ut.layoutVertexBuffer,xt,te,q.paint,D.transform.zoom,St)}}}}function ts(D,Y,q,ne,pe,Le,Ne){for(var qe=D.context,et=qe.gl,vt=q.paint.get("fill-extrusion-pattern"),xt=vt.constantOr(1),te=q.getCrossfadeParameters(),ue=q.paint.get("fill-extrusion-opacity"),we=0,Pe=ne;we<Pe.length;we+=1){var De=Pe[we],Ue=Y.getTile(De),Ze=Ue.getBucket(q);if(Ze){var Je=Ze.programConfigurations.get(q.id),it=D.useProgram(xt?"fillExtrusionPattern":"fillExtrusion",Je);xt&&(D.context.activeTexture.set(et.TEXTURE0),Ue.imageAtlasTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE),Je.updatePaintBuffers(te));var ut=vt.constantOr(null);if(ut&&Ue.imageAtlas){var St=Ue.imageAtlas,Dt=St.patternPositions[ut.to.toString()],Ft=St.patternPositions[ut.from.toString()];Dt&&Ft&&Je.setConstantPatternPositions(Dt,Ft)}var Yt=D.translatePosMatrix(De.posMatrix,Ue,q.paint.get("fill-extrusion-translate"),q.paint.get("fill-extrusion-translate-anchor")),ln=q.paint.get("fill-extrusion-vertical-gradient"),Xt=xt?ul(Yt,D,ln,ue,De,te,Ue):ps(Yt,D,ln,ue);it.draw(qe,qe.gl.TRIANGLES,pe,Le,Ne,Be.backCCW,Xt,q.id,Ze.layoutVertexBuffer,Ze.indexBuffer,Ze.segments,q.paint,D.transform.zoom,Je)}}}function ms(D,Y,q,ne,pe,Le){var Ne=D.context,qe=Ne.gl,et=Y.fbo;if(et){var vt=D.useProgram("hillshade");Ne.activeTexture.set(qe.TEXTURE0),qe.bindTexture(qe.TEXTURE_2D,et.colorAttachment.get());var xt=function(te,ue,we){var Pe=we.paint.get("hillshade-shadow-color"),De=we.paint.get("hillshade-highlight-color"),Ue=we.paint.get("hillshade-accent-color"),Ze=we.paint.get("hillshade-illumination-direction")*(Math.PI/180);we.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ze-=te.transform.angle);var Je,it,ut,St=!te.options.moving;return{u_matrix:te.transform.calculatePosMatrix(ue.tileID.toUnwrapped(),St),u_image:0,u_latrange:(Je=ue.tileID,it=Math.pow(2,Je.canonical.z),ut=Je.canonical.y,[new l.MercatorCoordinate(0,ut/it).toLngLat().lat,new l.MercatorCoordinate(0,(ut+1)/it).toLngLat().lat]),u_light:[we.paint.get("hillshade-exaggeration"),Ze],u_shadow:Pe,u_highlight:De,u_accent:Ue}}(D,Y,q);vt.draw(Ne,qe.TRIANGLES,ne,pe,Le,Be.disabled,xt,q.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments)}}function ys(D,Y,q,ne,pe,Le,Ne){var qe=D.context,et=qe.gl,vt=Y.dem;if(vt&&vt.data){var xt=vt.dim,te=vt.stride,ue=vt.getPixels();if(qe.activeTexture.set(et.TEXTURE1),qe.pixelStoreUnpackPremultiplyAlpha.set(!1),Y.demTexture=Y.demTexture||D.getTileTexture(te),Y.demTexture){var we=Y.demTexture;we.update(ue,{premultiply:!1}),we.bind(et.NEAREST,et.CLAMP_TO_EDGE)}else Y.demTexture=new l.Texture(qe,ue,et.RGBA,{premultiply:!1}),Y.demTexture.bind(et.NEAREST,et.CLAMP_TO_EDGE);qe.activeTexture.set(et.TEXTURE0);var Pe=Y.fbo;if(!Pe){var De=new l.Texture(qe,{width:xt,height:xt,data:null},et.RGBA);De.bind(et.LINEAR,et.CLAMP_TO_EDGE),(Pe=Y.fbo=qe.createFramebuffer(xt,xt,!0)).colorAttachment.set(De.texture)}qe.bindFramebuffer.set(Pe.framebuffer),qe.viewport.set([0,0,xt,xt]),D.useProgram("hillshadePrepare").draw(qe,et.TRIANGLES,pe,Le,Ne,Be.disabled,function(Ue,Ze,Je){var it=Ze.stride,ut=l.create();return l.ortho(ut,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(ut,ut,[0,-l.EXTENT,0]),{u_matrix:ut,u_image:1,u_dimension:[it,it],u_zoom:Ue.overscaledZ,u_maxzoom:Je,u_unpack:Ze.getUnpackVector()}}(Y.tileID,vt,ne),q.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments),Y.needsHillshadePrepare=!1}}function Ia(D,Y,q,ne,pe){var Le=ne.paint.get("raster-fade-duration");if(Le>0){var Ne=l.browser.now(),qe=(Ne-D.timeAdded)/Le,et=Y?(Ne-Y.timeAdded)/Le:-1,vt=q.getSource(),xt=pe.coveringZoomLevel({tileSize:vt.tileSize,roundZoom:vt.roundZoom}),te=!Y||Math.abs(Y.tileID.overscaledZ-xt)>Math.abs(D.tileID.overscaledZ-xt),ue=te&&D.refreshedUponExpiration?1:l.clamp(te?qe:1-et,0,1);return D.refreshedUponExpiration&&qe>=1&&(D.refreshedUponExpiration=!1),Y?{opacity:1,mix:1-ue}:{opacity:ue,mix:0}}return{opacity:1,mix:0}}var xs=new l.Color(1,0,0,1),bs=new l.Color(0,1,0,1),$s=new l.Color(0,0,1,1),To=new l.Color(1,0,1,1),Os=new l.Color(0,1,1,1);function _s(D){var Y=D.transform.padding;Qs(D,D.transform.height-(Y.top||0),3,xs),Qs(D,Y.bottom||0,3,bs),ws(D,Y.left||0,3,$s),ws(D,D.transform.width-(Y.right||0),3,To);var q=D.transform.centerPoint;(function(ne,pe,Le,Ne){var qe=20,et=2;ns(ne,pe-et/2,Le-qe/2,et,qe,Ne),ns(ne,pe-qe/2,Le-et/2,qe,et,Ne)})(D,q.x,D.transform.height-q.y,Os)}function Qs(D,Y,q,ne){ns(D,0,Y+q/2,D.transform.width,q,ne)}function ws(D,Y,q,ne){ns(D,Y-q/2,0,q,D.transform.height,ne)}function ns(D,Y,q,ne,pe,Le){var Ne=D.context,qe=Ne.gl;qe.enable(qe.SCISSOR_TEST),qe.scissor(Y*l.browser.devicePixelRatio,q*l.browser.devicePixelRatio,ne*l.browser.devicePixelRatio,pe*l.browser.devicePixelRatio),Ne.clear({color:Le}),qe.disable(qe.SCISSOR_TEST)}function No(D,Y,q){var ne=D.context,pe=ne.gl,Le=q.posMatrix,Ne=D.useProgram("debug"),qe=Ut.disabled,et=Ge.disabled,vt=D.colorModeForRenderPass(),xt="$debug";ne.activeTexture.set(pe.TEXTURE0),D.emptyTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),Ne.draw(ne,pe.LINE_STRIP,qe,et,vt,Be.disabled,oo(Le,l.Color.red),xt,D.debugBuffer,D.tileBorderIndexBuffer,D.debugSegments);var te=Y.getTileByID(q.key).latestRawTileData,ue=te&&te.byteLength||0,we=Math.floor(ue/1024),Pe=Y.getTile(q).tileSize,De=512/Math.min(Pe,512)*(q.overscaledZ/D.transform.zoom)*.5,Ue=q.canonical.toString();q.overscaledZ!==q.canonical.z&&(Ue+=" => "+q.overscaledZ),function(Ze,Je){Ze.initDebugOverlayCanvas();var it=Ze.debugOverlayCanvas,ut=Ze.context.gl,St=Ze.debugOverlayCanvas.getContext("2d");St.clearRect(0,0,it.width,it.height),St.shadowColor="white",St.shadowBlur=2,St.lineWidth=1.5,St.strokeStyle="white",St.textBaseline="top",St.font="bold 36px Open Sans, sans-serif",St.fillText(Je,5,5),St.strokeText(Je,5,5),Ze.debugOverlayTexture.update(it),Ze.debugOverlayTexture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE)}(D,Ue+" "+we+"kb"),Ne.draw(ne,pe.TRIANGLES,qe,et,We.alphaBlended,Be.disabled,oo(Le,l.Color.transparent,De),xt,D.debugBuffer,D.quadTriangleIndexBuffer,D.debugSegments)}var jo={symbol:function(D,Y,q,ne,pe){if(D.renderPass==="translucent"){var Le=Ge.disabled,Ne=D.colorModeForRenderPass();q.layout.get("text-variable-anchor")&&function(qe,et,vt,xt,te,ue,we){for(var Pe=et.transform,De=te==="map",Ue=ue==="map",Ze=0,Je=qe;Ze<Je.length;Ze+=1){var it=Je[Ze],ut=xt.getTile(it),St=ut.getBucket(vt);if(St&&St.text&&St.text.segments.get().length){var Dt=St.textSizeData,Ft=l.evaluateSizeForZoom(Dt,Pe.zoom),Yt=qn(ut,1,et.transform.zoom),ln=Bn(it.posMatrix,Ue,De,et.transform,Yt),Xt=vt.layout.get("icon-text-fit")!=="none"&&St.hasIconData();if(Ft){var en=Math.pow(2,Pe.zoom-ut.tileID.overscaledZ);gs(St,De,Ue,we,l.symbolSize,Pe,ln,it.posMatrix,en,Ft,Xt)}}}}(ne,D,q,Y,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),pe),q.paint.get("icon-opacity").constantOr(1)!==0&&vs(D,Y,q,ne,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),Le,Ne),q.paint.get("text-opacity").constantOr(1)!==0&&vs(D,Y,q,ne,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),Le,Ne),Y.map.showCollisionBoxes&&(Qo(D,Y,q,ne,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),!0),Qo(D,Y,q,ne,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),!1))}},circle:function(D,Y,q,ne){if(D.renderPass==="translucent"){var pe=q.paint.get("circle-opacity"),Le=q.paint.get("circle-stroke-width"),Ne=q.paint.get("circle-stroke-opacity"),qe=q.layout.get("circle-sort-key").constantOr(1)!==void 0;if(pe.constantOr(1)!==0||Le.constantOr(1)!==0&&Ne.constantOr(1)!==0){for(var et=D.context,vt=et.gl,xt=D.depthModeForSublayer(0,Ut.ReadOnly),te=Ge.disabled,ue=D.colorModeForRenderPass(),we=[],Pe=0;Pe<ne.length;Pe++){var De=ne[Pe],Ue=Y.getTile(De),Ze=Ue.getBucket(q);if(Ze){var Je=Ze.programConfigurations.get(q.id),it={programConfiguration:Je,program:D.useProgram("circle",Je),layoutVertexBuffer:Ze.layoutVertexBuffer,indexBuffer:Ze.indexBuffer,uniformValues:Ws(D,De,Ue,q)};if(qe)for(var ut=0,St=Ze.segments.get();ut<St.length;ut+=1){var Dt=St[ut];we.push({segments:new l.SegmentVector([Dt]),sortKey:Dt.sortKey,state:it})}else we.push({segments:Ze.segments,sortKey:0,state:it})}}qe&&we.sort(function(Dn,Xn){return Dn.sortKey-Xn.sortKey});for(var Ft=0,Yt=we;Ft<Yt.length;Ft+=1){var ln=Yt[Ft],Xt=ln.state,en=Xt.programConfiguration,Jt=Xt.program,bn=Xt.layoutVertexBuffer,gn=Xt.indexBuffer,Qt=Xt.uniformValues,Pn=ln.segments;Jt.draw(et,vt.TRIANGLES,xt,te,ue,Be.disabled,Qt,q.id,bn,gn,Pn,q.paint,D.transform.zoom,en)}}}},heatmap:function(D,Y,q,ne){if(q.paint.get("heatmap-opacity")!==0)if(D.renderPass==="offscreen"){var pe=D.context,Le=pe.gl,Ne=Ge.disabled,qe=new We([Le.ONE,Le.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(De,Ue,Ze){var Je=De.gl;De.activeTexture.set(Je.TEXTURE1),De.viewport.set([0,0,Ue.width/4,Ue.height/4]);var it=Ze.heatmapFbo;if(it)Je.bindTexture(Je.TEXTURE_2D,it.colorAttachment.get()),De.bindFramebuffer.set(it.framebuffer);else{var ut=Je.createTexture();Je.bindTexture(Je.TEXTURE_2D,ut),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_WRAP_S,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_WRAP_T,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_MIN_FILTER,Je.LINEAR),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_MAG_FILTER,Je.LINEAR),it=Ze.heatmapFbo=De.createFramebuffer(Ue.width/4,Ue.height/4,!1),function(St,Dt,Ft,Yt){var ln=St.gl,Xt=St.extRenderToTextureHalfFloat?St.extTextureHalfFloat.HALF_FLOAT_OES:ln.UNSIGNED_BYTE;ln.texImage2D(ln.TEXTURE_2D,0,ln.RGBA,Dt.width/4,Dt.height/4,0,ln.RGBA,Xt,null),Yt.colorAttachment.set(Ft)}(De,Ue,ut,it)}})(pe,D,q),pe.clear({color:l.Color.transparent});for(var et=0;et<ne.length;et++){var vt=ne[et];if(!Y.hasRenderableParent(vt)){var xt=Y.getTile(vt),te=xt.getBucket(q);if(te){var ue=te.programConfigurations.get(q.id),we=D.useProgram("heatmap",ue),Pe=D.transform.zoom;we.draw(pe,Le.TRIANGLES,Ut.disabled,Ne,qe,Be.disabled,Ko(vt.posMatrix,xt,Pe,q.paint.get("heatmap-intensity")),q.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,q.paint,D.transform.zoom,ue)}}}pe.viewport.set([0,0,D.width,D.height])}else D.renderPass==="translucent"&&(D.context.setColorMode(D.colorModeForRenderPass()),function(De,Ue){var Ze=De.context,Je=Ze.gl,it=Ue.heatmapFbo;if(it){Ze.activeTexture.set(Je.TEXTURE0),Je.bindTexture(Je.TEXTURE_2D,it.colorAttachment.get()),Ze.activeTexture.set(Je.TEXTURE1);var ut=Ue.colorRampTexture;ut||(ut=Ue.colorRampTexture=new l.Texture(Ze,Ue.colorRamp,Je.RGBA)),ut.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),De.useProgram("heatmapTexture").draw(Ze,Je.TRIANGLES,Ut.disabled,Ge.disabled,De.colorModeForRenderPass(),Be.disabled,function(St,Dt,Ft,Yt){var ln=l.create();l.ortho(ln,0,St.width,St.height,0,0,1);var Xt=St.context.gl;return{u_matrix:ln,u_world:[Xt.drawingBufferWidth,Xt.drawingBufferHeight],u_image:Ft,u_color_ramp:Yt,u_opacity:Dt.paint.get("heatmap-opacity")}}(De,Ue,0,1),Ue.id,De.viewportBuffer,De.quadTriangleIndexBuffer,De.viewportSegments,Ue.paint,De.transform.zoom)}}(D,q))},line:function(D,Y,q,ne){if(D.renderPass==="translucent"){var pe=q.paint.get("line-opacity"),Le=q.paint.get("line-width");if(pe.constantOr(1)!==0&&Le.constantOr(1)!==0){var Ne=D.depthModeForSublayer(0,Ut.ReadOnly),qe=D.colorModeForRenderPass(),et=q.paint.get("line-dasharray"),vt=q.paint.get("line-pattern"),xt=vt.constantOr(1),te=q.paint.get("line-gradient"),ue=q.getCrossfadeParameters(),we=xt?"linePattern":et?"lineSDF":te?"lineGradient":"line",Pe=D.context,De=Pe.gl,Ue=!0;if(te){Pe.activeTexture.set(De.TEXTURE0);var Ze=q.gradientTexture;if(!q.gradient)return;Ze||(Ze=q.gradientTexture=new l.Texture(Pe,q.gradient,De.RGBA)),Ze.bind(De.LINEAR,De.CLAMP_TO_EDGE)}for(var Je=0,it=ne;Je<it.length;Je+=1){var ut=it[Je],St=Y.getTile(ut);if(!xt||St.patternsLoaded()){var Dt=St.getBucket(q);if(Dt){var Ft=Dt.programConfigurations.get(q.id),Yt=D.context.program.get(),ln=D.useProgram(we,Ft),Xt=Ue||ln.program!==Yt,en=vt.constantOr(null);if(en&&St.imageAtlas){var Jt=St.imageAtlas,bn=Jt.patternPositions[en.to.toString()],gn=Jt.patternPositions[en.from.toString()];bn&&gn&&Ft.setConstantPatternPositions(bn,gn)}var Qt=xt?Js(D,St,q,ue):et?Ro(D,St,q,et,ue):te?Xs(D,St,q):lo(D,St,q);xt?(Pe.activeTexture.set(De.TEXTURE0),St.imageAtlasTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE),Ft.updatePaintBuffers(ue)):et&&(Xt||D.lineAtlas.dirty)&&(Pe.activeTexture.set(De.TEXTURE0),D.lineAtlas.bind(Pe)),ln.draw(Pe,De.TRIANGLES,Ne,D.stencilModeForClipping(ut),qe,Be.disabled,Qt,q.id,Dt.layoutVertexBuffer,Dt.indexBuffer,Dt.segments,q.paint,D.transform.zoom,Ft),Ue=!1}}}}}},fill:function(D,Y,q,ne){var pe=q.paint.get("fill-color"),Le=q.paint.get("fill-opacity");if(Le.constantOr(1)!==0){var Ne=D.colorModeForRenderPass(),qe=q.paint.get("fill-pattern"),et=D.opaquePassEnabledForLayer()&&!qe.constantOr(1)&&pe.constantOr(l.Color.transparent).a===1&&Le.constantOr(0)===1?"opaque":"translucent";if(D.renderPass===et){var vt=D.depthModeForSublayer(1,D.renderPass==="opaque"?Ut.ReadWrite:Ut.ReadOnly);Bo(D,Y,q,ne,vt,Ne,!1)}if(D.renderPass==="translucent"&&q.paint.get("fill-antialias")){var xt=D.depthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,Ut.ReadOnly);Bo(D,Y,q,ne,xt,Ne,!0)}}},"fill-extrusion":function(D,Y,q,ne){var pe=q.paint.get("fill-extrusion-opacity");if(pe!==0&&D.renderPass==="translucent"){var Le=new Ut(D.context.gl.LEQUAL,Ut.ReadWrite,D.depthRangeFor3D);if(pe!==1||q.paint.get("fill-extrusion-pattern").constantOr(1))ts(D,Y,q,ne,Le,Ge.disabled,We.disabled),ts(D,Y,q,ne,Le,D.stencilModeFor3D(),D.colorModeForRenderPass());else{var Ne=D.colorModeForRenderPass();ts(D,Y,q,ne,Le,Ge.disabled,Ne)}}},hillshade:function(D,Y,q,ne){if(D.renderPass==="offscreen"||D.renderPass==="translucent"){for(var pe=D.context,Le=Y.getSource().maxzoom,Ne=D.depthModeForSublayer(0,Ut.ReadOnly),qe=D.colorModeForRenderPass(),et=D.renderPass==="translucent"?D.stencilConfigForOverlap(ne):[{},ne],vt=et[0],xt=0,te=et[1];xt<te.length;xt+=1){var ue=te[xt],we=Y.getTile(ue);we.needsHillshadePrepare&&D.renderPass==="offscreen"?ys(D,we,q,Le,Ne,Ge.disabled,qe):D.renderPass==="translucent"&&ms(D,we,q,Ne,vt[ue.overscaledZ],qe)}pe.viewport.set([0,0,D.width,D.height])}},raster:function(D,Y,q,ne){if(D.renderPass==="translucent"&&q.paint.get("raster-opacity")!==0&&ne.length)for(var pe=D.context,Le=pe.gl,Ne=Y.getSource(),qe=D.useProgram("raster"),et=D.colorModeForRenderPass(),vt=Ne instanceof N?[{},ne]:D.stencilConfigForOverlap(ne),xt=vt[0],te=vt[1],ue=te[te.length-1].overscaledZ,we=!D.options.moving,Pe=0,De=te;Pe<De.length;Pe+=1){var Ue=De[Pe],Ze=D.depthModeForSublayer(Ue.overscaledZ-ue,q.paint.get("raster-opacity")===1?Ut.ReadWrite:Ut.ReadOnly,Le.LESS),Je=Y.getTile(Ue),it=D.transform.calculatePosMatrix(Ue.toUnwrapped(),we);Je.registerFadeDuration(q.paint.get("raster-fade-duration"));var ut=Y.findLoadedParent(Ue,0),St=Ia(Je,ut,Y,q,D.transform),Dt=void 0,Ft=void 0,Yt=q.paint.get("raster-resampling")==="nearest"?Le.NEAREST:Le.LINEAR;pe.activeTexture.set(Le.TEXTURE0),Je.texture.bind(Yt,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST),pe.activeTexture.set(Le.TEXTURE1),ut?(ut.texture.bind(Yt,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST),Dt=Math.pow(2,ut.tileID.overscaledZ-Je.tileID.overscaledZ),Ft=[Je.tileID.canonical.x*Dt%1,Je.tileID.canonical.y*Dt%1]):Je.texture.bind(Yt,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST);var ln=$o(it,Ft||[0,0],Dt||1,St,q);Ne instanceof N?qe.draw(pe,Le.TRIANGLES,Ze,Ge.disabled,et,Be.disabled,ln,q.id,Ne.boundsBuffer,D.quadTriangleIndexBuffer,Ne.boundsSegments):qe.draw(pe,Le.TRIANGLES,Ze,xt[Ue.overscaledZ],et,Be.disabled,ln,q.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments)}},background:function(D,Y,q){var ne=q.paint.get("background-color"),pe=q.paint.get("background-opacity");if(pe!==0){var Le=D.context,Ne=Le.gl,qe=D.transform,et=qe.tileSize,vt=q.paint.get("background-pattern");if(!D.isPatternMissing(vt)){var xt=!vt&&ne.a===1&&pe===1&&D.opaquePassEnabledForLayer()?"opaque":"translucent";if(D.renderPass===xt){var te=Ge.disabled,ue=D.depthModeForSublayer(0,xt==="opaque"?Ut.ReadWrite:Ut.ReadOnly),we=D.colorModeForRenderPass(),Pe=D.useProgram(vt?"backgroundPattern":"background"),De=qe.coveringTiles({tileSize:et});vt&&(Le.activeTexture.set(Ne.TEXTURE0),D.imageManager.bind(D.context));for(var Ue=q.getCrossfadeParameters(),Ze=0,Je=De;Ze<Je.length;Ze+=1){var it=Je[Ze],ut=D.transform.calculatePosMatrix(it.toUnwrapped()),St=vt?ds(ut,pe,D,vt,{tileID:it,tileSize:et},Ue):Ps(ut,pe,ne);Pe.draw(Le,Ne.TRIANGLES,ue,te,we,Be.disabled,St,q.id,D.tileExtentBuffer,D.quadTriangleIndexBuffer,D.tileExtentSegments)}}}}},debug:function(D,Y,q){for(var ne=0;ne<q.length;ne++)No(D,Y,q[ne])},custom:function(D,Y,q){var ne=D.context,pe=q.implementation;if(D.renderPass==="offscreen"){var Le=pe.prerender;Le&&(D.setCustomLayerDefaults(),ne.setColorMode(D.colorModeForRenderPass()),Le.call(pe,ne.gl,D.transform.customLayerMatrix()),ne.setDirty(),D.setBaseState())}else if(D.renderPass==="translucent"){D.setCustomLayerDefaults(),ne.setColorMode(D.colorModeForRenderPass()),ne.setStencilMode(Ge.disabled);var Ne=pe.renderingMode==="3d"?new Ut(D.context.gl.LEQUAL,Ut.ReadWrite,D.depthRangeFor3D):D.depthModeForSublayer(0,Ut.ReadOnly);ne.setDepthMode(Ne),pe.render(ne.gl,D.transform.customLayerMatrix()),ne.setDirty(),D.setBaseState(),ne.bindFramebuffer.set(null)}}},ai=function(D,Y){this.context=new Ye(D),this.transform=Y,this._tileTextures={},this.setup(),this.numSublayers=rt.maxUnderzooming+rt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wn,this.gpuTimers={}};ai.prototype.resize=function(D,Y){if(this.width=D*l.browser.devicePixelRatio,this.height=Y*l.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var q=0,ne=this.style._order;q<ne.length;q+=1){var pe=ne[q];this.style._layers[pe].resize()}},ai.prototype.setup=function(){var D=this.context,Y=new l.StructArrayLayout2i4;Y.emplaceBack(0,0),Y.emplaceBack(l.EXTENT,0),Y.emplaceBack(0,l.EXTENT),Y.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=D.createVertexBuffer(Y,lr.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);var q=new l.StructArrayLayout2i4;q.emplaceBack(0,0),q.emplaceBack(l.EXTENT,0),q.emplaceBack(0,l.EXTENT),q.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=D.createVertexBuffer(q,lr.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);var ne=new l.StructArrayLayout4i8;ne.emplaceBack(0,0,0,0),ne.emplaceBack(l.EXTENT,0,l.EXTENT,0),ne.emplaceBack(0,l.EXTENT,0,l.EXTENT),ne.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=D.createVertexBuffer(ne,F.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);var pe=new l.StructArrayLayout2i4;pe.emplaceBack(0,0),pe.emplaceBack(1,0),pe.emplaceBack(0,1),pe.emplaceBack(1,1),this.viewportBuffer=D.createVertexBuffer(pe,lr.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);var Le=new l.StructArrayLayout1ui2;Le.emplaceBack(0),Le.emplaceBack(1),Le.emplaceBack(3),Le.emplaceBack(2),Le.emplaceBack(0),this.tileBorderIndexBuffer=D.createIndexBuffer(Le);var Ne=new l.StructArrayLayout3ui6;Ne.emplaceBack(0,1,2),Ne.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=D.createIndexBuffer(Ne),this.emptyTexture=new l.Texture(D,{width:1,height:1,data:new Uint8Array([0,0,0,0])},D.gl.RGBA);var qe=this.context.gl;this.stencilClearMode=new Ge({func:qe.ALWAYS,mask:0},0,255,qe.ZERO,qe.ZERO,qe.ZERO)},ai.prototype.clearStencil=function(){var D=this.context,Y=D.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var q=l.create();l.ortho(q,0,this.width,this.height,0,0,1),l.scale(q,q,[Y.drawingBufferWidth,Y.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(D,Y.TRIANGLES,Ut.disabled,this.stencilClearMode,We.disabled,Be.disabled,so(q),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ai.prototype._renderTileClippingMasks=function(D,Y){if(this.currentStencilSource!==D.source&&D.isTileClipped()&&Y&&Y.length){this.currentStencilSource=D.source;var q=this.context,ne=q.gl;this.nextStencilID+Y.length>256&&this.clearStencil(),q.setColorMode(We.disabled),q.setDepthMode(Ut.disabled);var pe=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Le=0,Ne=Y;Le<Ne.length;Le+=1){var qe=Ne[Le],et=this._tileClippingMaskIDs[qe.key]=this.nextStencilID++;pe.draw(q,ne.TRIANGLES,Ut.disabled,new Ge({func:ne.ALWAYS,mask:0},et,255,ne.KEEP,ne.KEEP,ne.REPLACE),We.disabled,Be.disabled,so(qe.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ai.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var D=this.nextStencilID++,Y=this.context.gl;return new Ge({func:Y.NOTEQUAL,mask:255},D,255,Y.KEEP,Y.KEEP,Y.REPLACE)},ai.prototype.stencilModeForClipping=function(D){var Y=this.context.gl;return new Ge({func:Y.EQUAL,mask:255},this._tileClippingMaskIDs[D.key],0,Y.KEEP,Y.KEEP,Y.REPLACE)},ai.prototype.stencilConfigForOverlap=function(D){var Y,q=this.context.gl,ne=D.sort(function(et,vt){return vt.overscaledZ-et.overscaledZ}),pe=ne[ne.length-1].overscaledZ,Le=ne[0].overscaledZ-pe+1;if(Le>1){this.currentStencilSource=void 0,this.nextStencilID+Le>256&&this.clearStencil();for(var Ne={},qe=0;qe<Le;qe++)Ne[qe+pe]=new Ge({func:q.GEQUAL,mask:255},qe+this.nextStencilID,255,q.KEEP,q.KEEP,q.REPLACE);return this.nextStencilID+=Le,[Ne,ne]}return[(Y={},Y[pe]=Ge.disabled,Y),ne]},ai.prototype.colorModeForRenderPass=function(){var D=this.context.gl;if(this._showOverdrawInspector){var Y=.125;return new We([D.CONSTANT_COLOR,D.ONE],new l.Color(Y,Y,Y,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?We.unblended:We.alphaBlended},ai.prototype.depthModeForSublayer=function(D,Y,q){if(!this.opaquePassEnabledForLayer())return Ut.disabled;var ne=1-((1+this.currentLayer)*this.numSublayers+D)*this.depthEpsilon;return new Ut(q||this.context.gl.LEQUAL,Y,[ne,ne])},ai.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ai.prototype.render=function(D,Y){var q=this;this.style=D,this.options=Y,this.lineAtlas=D.lineAtlas,this.imageManager=D.imageManager,this.glyphManager=D.glyphManager,this.symbolFadeChange=D.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();var ne=this.style._order,pe=this.style.sourceCaches;for(var Le in pe){var Ne=pe[Le];Ne.used&&Ne.prepare(this.context)}var qe,et,vt={},xt={},te={};for(var ue in pe){var we=pe[ue];vt[ue]=we.getVisibleCoordinates(),xt[ue]=vt[ue].slice().reverse(),te[ue]=we.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Pe=0;Pe<ne.length;Pe++){var De=ne[Pe];if(this.style._layers[De].is3D()){this.opaquePassCutoff=Pe;break}}this.renderPass="offscreen";for(var Ue=0,Ze=ne;Ue<Ze.length;Ue+=1){var Je=Ze[Ue],it=this.style._layers[Je];if(it.hasOffscreenPass()&&!it.isHidden(this.transform.zoom)){var ut=xt[it.source];(it.type==="custom"||ut.length)&&this.renderLayer(this,pe[it.source],it,ut)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:Y.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=Y.showOverdrawInspector,this.depthRangeFor3D=[0,1-(D._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=ne.length-1;this.currentLayer>=0;this.currentLayer--){var St=this.style._layers[ne[this.currentLayer]],Dt=pe[St.source],Ft=vt[St.source];this._renderTileClippingMasks(St,Ft),this.renderLayer(this,Dt,St,Ft)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ne.length;this.currentLayer++){var Yt=this.style._layers[ne[this.currentLayer]],ln=pe[Yt.source],Xt=(Yt.type==="symbol"?te:xt)[Yt.source];this._renderTileClippingMasks(Yt,vt[Yt.source]),this.renderLayer(this,ln,Yt,Xt)}this.options.showTileBoundaries&&(l.values(this.style._layers).forEach(function(en){en.source&&!en.isHidden(q.transform.zoom)&&(en.source!==(et&&et.id)&&(et=q.style.sourceCaches[en.source]),(!qe||qe.getSource().maxzoom<et.getSource().maxzoom)&&(qe=et))}),qe&&jo.debug(this,qe,qe.getVisibleCoordinates())),this.options.showPadding&&_s(this),this.context.setDefault()},ai.prototype.renderLayer=function(D,Y,q,ne){q.isHidden(this.transform.zoom)||(q.type==="background"||q.type==="custom"||ne.length)&&(this.id=q.id,this.gpuTimingStart(q),jo[q.type](D,Y,q,ne,this.style.placement.variableOffsets),this.gpuTimingEnd())},ai.prototype.gpuTimingStart=function(D){if(this.options.gpuTiming){var Y=this.context.extTimerQuery,q=this.gpuTimers[D.id];q||(q=this.gpuTimers[D.id]={calls:0,cpuTime:0,query:Y.createQueryEXT()}),q.calls++,Y.beginQueryEXT(Y.TIME_ELAPSED_EXT,q.query)}},ai.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var D=this.context.extTimerQuery;D.endQueryEXT(D.TIME_ELAPSED_EXT)}},ai.prototype.collectGpuTimers=function(){var D=this.gpuTimers;return this.gpuTimers={},D},ai.prototype.queryGpuTimers=function(D){var Y={};for(var q in D){var ne=D[q],pe=this.context.extTimerQuery,Le=pe.getQueryObjectEXT(ne.query,pe.QUERY_RESULT_EXT)/1e6;pe.deleteQueryEXT(ne.query),Y[q]=Le}return Y},ai.prototype.translatePosMatrix=function(D,Y,q,ne,pe){if(!q[0]&&!q[1])return D;var Le=pe?ne==="map"?this.transform.angle:0:ne==="viewport"?-this.transform.angle:0;if(Le){var Ne=Math.sin(Le),qe=Math.cos(Le);q=[q[0]*qe-q[1]*Ne,q[0]*Ne+q[1]*qe]}var et=[pe?q[0]:qn(Y,q[0],this.transform.zoom),pe?q[1]:qn(Y,q[1],this.transform.zoom),0],vt=new Float32Array(16);return l.translate(vt,D,et),vt},ai.prototype.saveTileTexture=function(D){var Y=this._tileTextures[D.size[0]];Y?Y.push(D):this._tileTextures[D.size[0]]=[D]},ai.prototype.getTileTexture=function(D){var Y=this._tileTextures[D];return Y&&Y.length>0?Y.pop():null},ai.prototype.isPatternMissing=function(D){if(!D)return!1;if(!D.from||!D.to)return!0;var Y=this.imageManager.getPattern(D.from.toString()),q=this.imageManager.getPattern(D.to.toString());return!Y||!q},ai.prototype.useProgram=function(D,Y){this.cache=this.cache||{};var q=""+D+(Y?Y.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[q]||(this.cache[q]=new Va(this.context,bo[D],Y,Do[D],this._showOverdrawInspector)),this.cache[q]},ai.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ai.prototype.setBaseState=function(){var D=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(D.FUNC_ADD)},ai.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var D=this.context.gl;this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,D.RGBA)}},ai.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ko=function(D,Y){this.points=D,this.planes=Y};ko.fromInvProjectionMatrix=function(D,Y,q){var ne=Math.pow(2,q),pe=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Ne){return l.transformMat4([],Ne,D)}).map(function(Ne){return l.scale$1([],Ne,1/Ne[3]/Y*ne)}),Le=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Ne){var qe=l.sub([],pe[Ne[0]],pe[Ne[1]]),et=l.sub([],pe[Ne[2]],pe[Ne[1]]),vt=l.normalize([],l.cross([],qe,et)),xt=-l.dot(vt,pe[Ne[1]]);return vt.concat(xt)});return new ko(pe,Le)};var Ao=function(D,Y){this.min=D,this.max=Y,this.center=l.scale$2([],l.add([],this.min,this.max),.5)};Ao.prototype.quadrant=function(D){for(var Y=[D%2==0,D<2],q=l.clone$2(this.min),ne=l.clone$2(this.max),pe=0;pe<Y.length;pe++)q[pe]=Y[pe]?this.min[pe]:this.center[pe],ne[pe]=Y[pe]?this.center[pe]:this.max[pe];return ne[2]=this.max[2],new Ao(q,ne)},Ao.prototype.distanceX=function(D){return Math.max(Math.min(this.max[0],D[0]),this.min[0])-D[0]},Ao.prototype.distanceY=function(D){return Math.max(Math.min(this.max[1],D[1]),this.min[1])-D[1]},Ao.prototype.intersects=function(D){for(var Y=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],q=!0,ne=0;ne<D.planes.length;ne++){for(var pe=D.planes[ne],Le=0,Ne=0;Ne<Y.length;Ne++)Le+=l.dot$1(pe,Y[Ne])>=0;if(Le===0)return 0;Le!==Y.length&&(q=!1)}if(q)return 2;for(var qe=0;qe<3;qe++){for(var et=Number.MAX_VALUE,vt=-Number.MAX_VALUE,xt=0;xt<D.points.length;xt++){var te=D.points[xt][qe]-this.min[qe];et=Math.min(et,te),vt=Math.max(vt,te)}if(vt<0||et>this.max[qe]-this.min[qe])return 0}return 1};var Wi=function(D,Y,q,ne){if(D===void 0&&(D=0),Y===void 0&&(Y=0),q===void 0&&(q=0),ne===void 0&&(ne=0),isNaN(D)||D<0||isNaN(Y)||Y<0||isNaN(q)||q<0||isNaN(ne)||ne<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=D,this.bottom=Y,this.left=q,this.right=ne};Wi.prototype.interpolate=function(D,Y,q){return Y.top!=null&&D.top!=null&&(this.top=l.number(D.top,Y.top,q)),Y.bottom!=null&&D.bottom!=null&&(this.bottom=l.number(D.bottom,Y.bottom,q)),Y.left!=null&&D.left!=null&&(this.left=l.number(D.left,Y.left,q)),Y.right!=null&&D.right!=null&&(this.right=l.number(D.right,Y.right,q)),this},Wi.prototype.getCenter=function(D,Y){var q=l.clamp((this.left+D-this.right)/2,0,D),ne=l.clamp((this.top+Y-this.bottom)/2,0,Y);return new l.Point(q,ne)},Wi.prototype.equals=function(D){return this.top===D.top&&this.bottom===D.bottom&&this.left===D.left&&this.right===D.right},Wi.prototype.clone=function(){return new Wi(this.top,this.bottom,this.left,this.right)},Wi.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Xr=function(D,Y,q,ne,pe){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=pe===void 0||pe,this._minZoom=D||0,this._maxZoom=Y||22,this._minPitch=q??0,this._maxPitch=ne??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Wi,this._posMatrixCache={},this._alignedPosMatrixCache={}},Kr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Xr.prototype.clone=function(){var D=new Xr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return D.tileSize=this.tileSize,D.latRange=this.latRange,D.width=this.width,D.height=this.height,D._center=this._center,D.zoom=this.zoom,D.angle=this.angle,D._fov=this._fov,D._pitch=this._pitch,D._unmodified=this._unmodified,D._edgeInsets=this._edgeInsets.clone(),D._calcMatrices(),D},Kr.minZoom.get=function(){return this._minZoom},Kr.minZoom.set=function(D){this._minZoom!==D&&(this._minZoom=D,this.zoom=Math.max(this.zoom,D))},Kr.maxZoom.get=function(){return this._maxZoom},Kr.maxZoom.set=function(D){this._maxZoom!==D&&(this._maxZoom=D,this.zoom=Math.min(this.zoom,D))},Kr.minPitch.get=function(){return this._minPitch},Kr.minPitch.set=function(D){this._minPitch!==D&&(this._minPitch=D,this.pitch=Math.max(this.pitch,D))},Kr.maxPitch.get=function(){return this._maxPitch},Kr.maxPitch.set=function(D){this._maxPitch!==D&&(this._maxPitch=D,this.pitch=Math.min(this.pitch,D))},Kr.renderWorldCopies.get=function(){return this._renderWorldCopies},Kr.renderWorldCopies.set=function(D){D===void 0?D=!0:D===null&&(D=!1),this._renderWorldCopies=D},Kr.worldSize.get=function(){return this.tileSize*this.scale},Kr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Kr.size.get=function(){return new l.Point(this.width,this.height)},Kr.bearing.get=function(){return-this.angle/Math.PI*180},Kr.bearing.set=function(D){var Y=-l.wrap(D,-180,180)*Math.PI/180;this.angle!==Y&&(this._unmodified=!1,this.angle=Y,this._calcMatrices(),this.rotationMatrix=l.create$2(),l.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Kr.pitch.get=function(){return this._pitch/Math.PI*180},Kr.pitch.set=function(D){var Y=l.clamp(D,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Y&&(this._unmodified=!1,this._pitch=Y,this._calcMatrices())},Kr.fov.get=function(){return this._fov/Math.PI*180},Kr.fov.set=function(D){D=Math.max(.01,Math.min(60,D)),this._fov!==D&&(this._unmodified=!1,this._fov=D/180*Math.PI,this._calcMatrices())},Kr.zoom.get=function(){return this._zoom},Kr.zoom.set=function(D){var Y=Math.min(Math.max(D,this.minZoom),this.maxZoom);this._zoom!==Y&&(this._unmodified=!1,this._zoom=Y,this.scale=this.zoomScale(Y),this.tileZoom=Math.floor(Y),this.zoomFraction=Y-this.tileZoom,this._constrain(),this._calcMatrices())},Kr.center.get=function(){return this._center},Kr.center.set=function(D){D.lat===this._center.lat&&D.lng===this._center.lng||(this._unmodified=!1,this._center=D,this._constrain(),this._calcMatrices())},Kr.padding.get=function(){return this._edgeInsets.toJSON()},Kr.padding.set=function(D){this._edgeInsets.equals(D)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,D,1),this._calcMatrices())},Kr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Xr.prototype.isPaddingEqual=function(D){return this._edgeInsets.equals(D)},Xr.prototype.interpolatePadding=function(D,Y,q){this._unmodified=!1,this._edgeInsets.interpolate(D,Y,q),this._constrain(),this._calcMatrices()},Xr.prototype.coveringZoomLevel=function(D){var Y=(D.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/D.tileSize));return Math.max(0,Y)},Xr.prototype.getVisibleUnwrappedCoordinates=function(D){var Y=[new l.UnwrappedTileID(0,D)];if(this._renderWorldCopies)for(var q=this.pointCoordinate(new l.Point(0,0)),ne=this.pointCoordinate(new l.Point(this.width,0)),pe=this.pointCoordinate(new l.Point(this.width,this.height)),Le=this.pointCoordinate(new l.Point(0,this.height)),Ne=Math.floor(Math.min(q.x,ne.x,pe.x,Le.x)),qe=Math.floor(Math.max(q.x,ne.x,pe.x,Le.x)),et=Ne-1;et<=qe+1;et++)et!==0&&Y.push(new l.UnwrappedTileID(et,D));return Y},Xr.prototype.coveringTiles=function(D){var Y=this.coveringZoomLevel(D),q=Y;if(D.minzoom!==void 0&&Y<D.minzoom)return[];D.maxzoom!==void 0&&Y>D.maxzoom&&(Y=D.maxzoom);var ne=l.MercatorCoordinate.fromLngLat(this.center),pe=Math.pow(2,Y),Le=[pe*ne.x,pe*ne.y,0],Ne=ko.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,Y),qe=D.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(qe=Y);var et=function(Xt){return{aabb:new Ao([Xt*pe,0,0],[(Xt+1)*pe,pe,0]),zoom:0,x:0,y:0,wrap:Xt,fullyVisible:!1}},vt=[],xt=[],te=Y,ue=D.reparseOverscaled?q:Y;if(this._renderWorldCopies)for(var we=1;we<=3;we++)vt.push(et(-we)),vt.push(et(we));for(vt.push(et(0));vt.length>0;){var Pe=vt.pop(),De=Pe.x,Ue=Pe.y,Ze=Pe.fullyVisible;if(!Ze){var Je=Pe.aabb.intersects(Ne);if(Je===0)continue;Ze=Je===2}var it=Pe.aabb.distanceX(Le),ut=Pe.aabb.distanceY(Le),St=Math.max(Math.abs(it),Math.abs(ut)),Dt=3+(1<<te-Pe.zoom)-2;if(Pe.zoom===te||St>Dt&&Pe.zoom>=qe)xt.push({tileID:new l.OverscaledTileID(Pe.zoom===te?ue:Pe.zoom,Pe.wrap,Pe.zoom,De,Ue),distanceSq:l.sqrLen([Le[0]-.5-De,Le[1]-.5-Ue])});else for(var Ft=0;Ft<4;Ft++){var Yt=(De<<1)+Ft%2,ln=(Ue<<1)+(Ft>>1);vt.push({aabb:Pe.aabb.quadrant(Ft),zoom:Pe.zoom+1,x:Yt,y:ln,wrap:Pe.wrap,fullyVisible:Ze})}}return xt.sort(function(Xt,en){return Xt.distanceSq-en.distanceSq}).map(function(Xt){return Xt.tileID})},Xr.prototype.resize=function(D,Y){this.width=D,this.height=Y,this.pixelsToGLUnits=[2/D,-2/Y],this._constrain(),this._calcMatrices()},Kr.unmodified.get=function(){return this._unmodified},Xr.prototype.zoomScale=function(D){return Math.pow(2,D)},Xr.prototype.scaleZoom=function(D){return Math.log(D)/Math.LN2},Xr.prototype.project=function(D){var Y=l.clamp(D.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(D.lng)*this.worldSize,l.mercatorYfromLat(Y)*this.worldSize)},Xr.prototype.unproject=function(D){return new l.MercatorCoordinate(D.x/this.worldSize,D.y/this.worldSize).toLngLat()},Kr.point.get=function(){return this.project(this.center)},Xr.prototype.setLocationAtPoint=function(D,Y){var q=this.pointCoordinate(Y),ne=this.pointCoordinate(this.centerPoint),pe=this.locationCoordinate(D),Le=new l.MercatorCoordinate(pe.x-(q.x-ne.x),pe.y-(q.y-ne.y));this.center=this.coordinateLocation(Le),this._renderWorldCopies&&(this.center=this.center.wrap())},Xr.prototype.locationPoint=function(D){return this.coordinatePoint(this.locationCoordinate(D))},Xr.prototype.pointLocation=function(D){return this.coordinateLocation(this.pointCoordinate(D))},Xr.prototype.locationCoordinate=function(D){return l.MercatorCoordinate.fromLngLat(D)},Xr.prototype.coordinateLocation=function(D){return D.toLngLat()},Xr.prototype.pointCoordinate=function(D){var Y=[D.x,D.y,0,1],q=[D.x,D.y,1,1];l.transformMat4(Y,Y,this.pixelMatrixInverse),l.transformMat4(q,q,this.pixelMatrixInverse);var ne=Y[3],pe=q[3],Le=Y[0]/ne,Ne=q[0]/pe,qe=Y[1]/ne,et=q[1]/pe,vt=Y[2]/ne,xt=q[2]/pe,te=vt===xt?0:(0-vt)/(xt-vt);return new l.MercatorCoordinate(l.number(Le,Ne,te)/this.worldSize,l.number(qe,et,te)/this.worldSize)},Xr.prototype.coordinatePoint=function(D){var Y=[D.x*this.worldSize,D.y*this.worldSize,0,1];return l.transformMat4(Y,Y,this.pixelMatrix),new l.Point(Y[0]/Y[3],Y[1]/Y[3])},Xr.prototype.getBounds=function(){return new l.LngLatBounds().extend(this.pointLocation(new l.Point(0,0))).extend(this.pointLocation(new l.Point(this.width,0))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))},Xr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Xr.prototype.setMaxBounds=function(D){D?(this.lngRange=[D.getWest(),D.getEast()],this.latRange=[D.getSouth(),D.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Xr.prototype.calculatePosMatrix=function(D,Y){Y===void 0&&(Y=!1);var q=D.key,ne=Y?this._alignedPosMatrixCache:this._posMatrixCache;if(ne[q])return ne[q];var pe=D.canonical,Le=this.worldSize/this.zoomScale(pe.z),Ne=pe.x+Math.pow(2,pe.z)*D.wrap,qe=l.identity(new Float64Array(16));return l.translate(qe,qe,[Ne*Le,pe.y*Le,0]),l.scale(qe,qe,[Le/l.EXTENT,Le/l.EXTENT,1]),l.multiply(qe,Y?this.alignedProjMatrix:this.projMatrix,qe),ne[q]=new Float32Array(qe),ne[q]},Xr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Xr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var D,Y,q,ne,pe=-90,Le=90,Ne=-180,qe=180,et=this.size,vt=this._unmodified;if(this.latRange){var xt=this.latRange;pe=l.mercatorYfromLat(xt[1])*this.worldSize,D=(Le=l.mercatorYfromLat(xt[0])*this.worldSize)-pe<et.y?et.y/(Le-pe):0}if(this.lngRange){var te=this.lngRange;Ne=l.mercatorXfromLng(te[0])*this.worldSize,Y=(qe=l.mercatorXfromLng(te[1])*this.worldSize)-Ne<et.x?et.x/(qe-Ne):0}var ue=this.point,we=Math.max(Y||0,D||0);if(we)return this.center=this.unproject(new l.Point(Y?(qe+Ne)/2:ue.x,D?(Le+pe)/2:ue.y)),this.zoom+=this.scaleZoom(we),this._unmodified=vt,void(this._constraining=!1);if(this.latRange){var Pe=ue.y,De=et.y/2;Pe-De<pe&&(ne=pe+De),Pe+De>Le&&(ne=Le-De)}if(this.lngRange){var Ue=ue.x,Ze=et.x/2;Ue-Ze<Ne&&(q=Ne+Ze),Ue+Ze>qe&&(q=qe-Ze)}q===void 0&&ne===void 0||(this.center=this.unproject(new l.Point(q!==void 0?q:ue.x,ne!==void 0?ne:ue.y))),this._unmodified=vt,this._constraining=!1}},Xr.prototype._calcMatrices=function(){if(this.height){var D=this._fov/2,Y=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(D)*this.height;var q=Math.PI/2+this._pitch,ne=this._fov*(.5+Y.y/this.height),pe=Math.sin(ne)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-q-ne,.01,Math.PI-.01)),Le=this.point,Ne=Le.x,qe=Le.y,et=1.01*(Math.cos(Math.PI/2-this._pitch)*pe+this.cameraToCenterDistance),vt=this.height/50,xt=new Float64Array(16);l.perspective(xt,this._fov,this.width/this.height,vt,et),xt[8]=2*-Y.x/this.width,xt[9]=2*Y.y/this.height,l.scale(xt,xt,[1,-1,1]),l.translate(xt,xt,[0,0,-this.cameraToCenterDistance]),l.rotateX(xt,xt,this._pitch),l.rotateZ(xt,xt,this.angle),l.translate(xt,xt,[-Ne,-qe,0]),this.mercatorMatrix=l.scale([],xt,[this.worldSize,this.worldSize,this.worldSize]),l.scale(xt,xt,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=xt,this.invProjMatrix=l.invert([],this.projMatrix);var te=this.width%2/2,ue=this.height%2/2,we=Math.cos(this.angle),Pe=Math.sin(this.angle),De=Ne-Math.round(Ne)+we*te+Pe*ue,Ue=qe-Math.round(qe)+we*ue+Pe*te,Ze=new Float64Array(xt);if(l.translate(Ze,Ze,[De>.5?De-1:De,Ue>.5?Ue-1:Ue,0]),this.alignedProjMatrix=Ze,xt=l.create(),l.scale(xt,xt,[this.width/2,-this.height/2,1]),l.translate(xt,xt,[1,-1,0]),this.labelPlaneMatrix=xt,xt=l.create(),l.scale(xt,xt,[1,-1,1]),l.translate(xt,xt,[-1,-1,0]),l.scale(xt,xt,[2/this.width,2/this.height,1]),this.glCoordMatrix=xt,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(xt=l.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=xt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Xr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var D=this.pointCoordinate(new l.Point(0,0)),Y=[D.x*this.worldSize,D.y*this.worldSize,0,1];return l.transformMat4(Y,Y,this.pixelMatrix)[3]/this.cameraToCenterDistance},Xr.prototype.getCameraPoint=function(){var D=this._pitch,Y=Math.tan(D)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,Y))},Xr.prototype.getCameraQueryGeometry=function(D){var Y=this.getCameraPoint();if(D.length===1)return[D[0],Y];for(var q=Y.x,ne=Y.y,pe=Y.x,Le=Y.y,Ne=0,qe=D;Ne<qe.length;Ne+=1){var et=qe[Ne];q=Math.min(q,et.x),ne=Math.min(ne,et.y),pe=Math.max(pe,et.x),Le=Math.max(Le,et.y)}return[new l.Point(q,ne),new l.Point(pe,ne),new l.Point(pe,Le),new l.Point(q,Le),new l.Point(q,ne)]},Object.defineProperties(Xr.prototype,Kr);var co=function(D){var Y,q,ne,pe,Le;this._hashName=D&&encodeURIComponent(D),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(Y=this._updateHashUnthrottled.bind(this),q=300,ne=!1,pe=null,Le=function(){pe=null,ne&&(Y(),pe=setTimeout(Le,q),ne=!1)},function(){return ne=!0,pe||Le(),pe})};co.prototype.addTo=function(D){return this._map=D,l.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},co.prototype.remove=function(){return l.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},co.prototype.getHashString=function(D){var Y=this._map.getCenter(),q=Math.round(100*this._map.getZoom())/100,ne=Math.ceil((q*Math.LN2+Math.log(512/360/.5))/Math.LN10),pe=Math.pow(10,ne),Le=Math.round(Y.lng*pe)/pe,Ne=Math.round(Y.lat*pe)/pe,qe=this._map.getBearing(),et=this._map.getPitch(),vt="";if(vt+=D?"/"+Le+"/"+Ne+"/"+q:q+"/"+Ne+"/"+Le,(qe||et)&&(vt+="/"+Math.round(10*qe)/10),et&&(vt+="/"+Math.round(et)),this._hashName){var xt=this._hashName,te=!1,ue=l.window.location.hash.slice(1).split("&").map(function(we){var Pe=we.split("=")[0];return Pe===xt?(te=!0,Pe+"="+vt):we}).filter(function(we){return we});return te||ue.push(xt+"="+vt),"#"+ue.join("&")}return"#"+vt},co.prototype._getCurrentHash=function(){var D,Y=this,q=l.window.location.hash.replace("#","");return this._hashName?(q.split("&").map(function(ne){return ne.split("=")}).forEach(function(ne){ne[0]===Y._hashName&&(D=ne)}),(D&&D[1]||"").split("/")):q.split("/")},co.prototype._onHashChange=function(){var D=this._getCurrentHash();if(D.length>=3&&!D.some(function(q){return isNaN(q)})){var Y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(D[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+D[2],+D[1]],zoom:+D[0],bearing:Y,pitch:+(D[4]||0)}),!0}return!1},co.prototype._updateHashUnthrottled=function(){var D=this.getHashString();try{l.window.history.replaceState(l.window.history.state,"",D)}catch{}};var Ka={linearity:.3,easing:l.bezier(0,0,.3,1)},Is=l.extend({deceleration:2500,maxSpeed:1400},Ka),el=l.extend({deceleration:20,maxSpeed:1400},Ka),Uo=l.extend({deceleration:1e3,maxSpeed:360},Ka),tl=l.extend({deceleration:1e3,maxSpeed:90},Ka),Vo=function(D){this._map=D,this.clear()};function fo(D,Y){(!D.duration||D.duration<Y.duration)&&(D.duration=Y.duration,D.easing=Y.easing)}function Ho(D,Y,q){var ne=q.maxSpeed,pe=q.linearity,Le=q.deceleration,Ne=l.clamp(D*pe/(Y/1e3),-ne,ne),qe=Math.abs(Ne)/(Le*pe);return{easing:q.easing,duration:1e3*qe,amount:Ne*(qe/2)}}Vo.prototype.clear=function(){this._inertiaBuffer=[]},Vo.prototype.record=function(D){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:D})},Vo.prototype._drainInertiaBuffer=function(){for(var D=this._inertiaBuffer,Y=l.browser.now();D.length>0&&Y-D[0].time>160;)D.shift()},Vo.prototype._onMoveEnd=function(D){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var Y={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0},q=0,ne=this._inertiaBuffer;q<ne.length;q+=1){var pe=ne[q].settings;Y.zoom+=pe.zoomDelta||0,Y.bearing+=pe.bearingDelta||0,Y.pitch+=pe.pitchDelta||0,pe.panDelta&&Y.pan._add(pe.panDelta),pe.around&&(Y.around=pe.around),pe.pinchAround&&(Y.pinchAround=pe.pinchAround)}var Le=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Ne={};if(Y.pan.mag()){var qe=Ho(Y.pan.mag(),Le,l.extend({},Is,D||{}));Ne.offset=Y.pan.mult(qe.amount/Y.pan.mag()),Ne.center=this._map.transform.center,fo(Ne,qe)}if(Y.zoom){var et=Ho(Y.zoom,Le,el);Ne.zoom=this._map.transform.zoom+et.amount,fo(Ne,et)}if(Y.bearing){var vt=Ho(Y.bearing,Le,Uo);Ne.bearing=this._map.transform.bearing+l.clamp(vt.amount,-179,179),fo(Ne,vt)}if(Y.pitch){var xt=Ho(Y.pitch,Le,tl);Ne.pitch=this._map.transform.pitch+xt.amount,fo(Ne,xt)}if(Ne.zoom||Ne.bearing){var te=Y.pinchAround===void 0?Y.around:Y.pinchAround;Ne.around=te?this._map.unproject(te):this._map.getCenter()}return this.clear(),l.extend(Ne,{noMoveStart:!0})}};var mi=function(D){function Y(ne,pe,Le,Ne){Ne===void 0&&(Ne={});var qe=x.mousePos(pe.getCanvasContainer(),Le),et=pe.unproject(qe);D.call(this,ne,l.extend({point:qe,lngLat:et,originalEvent:Le},Ne)),this._defaultPrevented=!1,this.target=pe}D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y;var q={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,q),Y}(l.Event),$a=function(D){function Y(ne,pe,Le){var Ne=ne==="touchend"?Le.changedTouches:Le.touches,qe=x.touchPos(pe.getCanvasContainer(),Ne),et=qe.map(function(te){return pe.unproject(te)}),vt=qe.reduce(function(te,ue,we,Pe){return te.add(ue.div(Pe.length))},new l.Point(0,0)),xt=pe.unproject(vt);D.call(this,ne,{points:qe,point:vt,lngLats:et,lngLat:xt,originalEvent:Le}),this._defaultPrevented=!1}D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y;var q={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,q),Y}(l.Event),qo=function(D){function Y(ne,pe,Le){D.call(this,ne,{originalEvent:Le}),this._defaultPrevented=!1}D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y;var q={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,q),Y}(l.Event),Ri=function(D,Y){this._map=D,this._clickTolerance=Y.clickTolerance};Ri.prototype.reset=function(){delete this._mousedownPos},Ri.prototype.wheel=function(D){return this._firePreventable(new qo(D.type,this._map,D))},Ri.prototype.mousedown=function(D,Y){return this._mousedownPos=Y,this._firePreventable(new mi(D.type,this._map,D))},Ri.prototype.mouseup=function(D){this._map.fire(new mi(D.type,this._map,D))},Ri.prototype.click=function(D,Y){this._mousedownPos&&this._mousedownPos.dist(Y)>=this._clickTolerance||this._map.fire(new mi(D.type,this._map,D))},Ri.prototype.dblclick=function(D){return this._firePreventable(new mi(D.type,this._map,D))},Ri.prototype.mouseover=function(D){this._map.fire(new mi(D.type,this._map,D))},Ri.prototype.mouseout=function(D){this._map.fire(new mi(D.type,this._map,D))},Ri.prototype.touchstart=function(D){return this._firePreventable(new $a(D.type,this._map,D))},Ri.prototype.touchmove=function(D){this._map.fire(new $a(D.type,this._map,D))},Ri.prototype.touchend=function(D){this._map.fire(new $a(D.type,this._map,D))},Ri.prototype.touchcancel=function(D){this._map.fire(new $a(D.type,this._map,D))},Ri.prototype._firePreventable=function(D){if(this._map.fire(D),D.defaultPrevented)return{}},Ri.prototype.isEnabled=function(){return!0},Ri.prototype.isActive=function(){return!1},Ri.prototype.enable=function(){},Ri.prototype.disable=function(){};var Yi=function(D){this._map=D};Yi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Yi.prototype.mousemove=function(D){this._map.fire(new mi(D.type,this._map,D))},Yi.prototype.mousedown=function(){this._delayContextMenu=!0},Yi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new mi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Yi.prototype.contextmenu=function(D){this._delayContextMenu?this._contextMenuEvent=D:this._map.fire(new mi(D.type,this._map,D)),this._map.listens("contextmenu")&&D.preventDefault()},Yi.prototype.isEnabled=function(){return!0},Yi.prototype.isActive=function(){return!1},Yi.prototype.enable=function(){},Yi.prototype.disable=function(){};var Xi=function(D,Y){this._map=D,this._el=D.getCanvasContainer(),this._container=D.getContainer(),this._clickTolerance=Y.clickTolerance||1};function Gi(D,Y){for(var q={},ne=0;ne<D.length;ne++)q[D[ne].identifier]=Y[ne];return q}Xi.prototype.isEnabled=function(){return!!this._enabled},Xi.prototype.isActive=function(){return!!this._active},Xi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Xi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Xi.prototype.mousedown=function(D,Y){this.isEnabled()&&D.shiftKey&&D.button===0&&(x.disableDrag(),this._startPos=this._lastPos=Y,this._active=!0)},Xi.prototype.mousemoveWindow=function(D,Y){if(this._active){var q=Y;if(!(this._lastPos.equals(q)||!this._box&&q.dist(this._startPos)<this._clickTolerance)){var ne=this._startPos;this._lastPos=q,this._box||(this._box=x.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",D));var pe=Math.min(ne.x,q.x),Le=Math.max(ne.x,q.x),Ne=Math.min(ne.y,q.y),qe=Math.max(ne.y,q.y);x.setTransform(this._box,"translate("+pe+"px,"+Ne+"px)"),this._box.style.width=Le-pe+"px",this._box.style.height=qe-Ne+"px"}}},Xi.prototype.mouseupWindow=function(D,Y){var q=this;if(this._active&&D.button===0){var ne=this._startPos,pe=Y;if(this.reset(),x.suppressClick(),ne.x!==pe.x||ne.y!==pe.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:D})),{cameraAnimation:function(Le){return Le.fitScreenCoordinates(ne,pe,q._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",D)}},Xi.prototype.keydown=function(D){this._active&&D.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",D))},Xi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos},Xi.prototype._fireEvent=function(D,Y){return this._map.fire(new l.Event(D,{originalEvent:Y}))};var la=function(D){this.reset(),this.numTouches=D.numTouches};la.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},la.prototype.touchstart=function(D,Y,q){(this.centroid||q.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=D.timeStamp),q.length===this.numTouches&&(this.centroid=function(ne){for(var pe=new l.Point(0,0),Le=0,Ne=ne;Le<Ne.length;Le+=1){var qe=Ne[Le];pe._add(qe)}return pe.div(ne.length)}(Y),this.touches=Gi(q,Y)))},la.prototype.touchmove=function(D,Y,q){if(!this.aborted&&this.centroid){var ne=Gi(q,Y);for(var pe in this.touches){var Le=this.touches[pe],Ne=ne[pe];(!Ne||Ne.dist(Le)>30)&&(this.aborted=!0)}}},la.prototype.touchend=function(D,Y,q){if((!this.centroid||D.timeStamp-this.startTime>500)&&(this.aborted=!0),q.length===0){var ne=!this.aborted&&this.centroid;if(this.reset(),ne)return ne}};var Mo=function(D){this.singleTap=new la(D),this.numTaps=D.numTaps,this.reset()};Mo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Mo.prototype.touchstart=function(D,Y,q){this.singleTap.touchstart(D,Y,q)},Mo.prototype.touchmove=function(D,Y,q){this.singleTap.touchmove(D,Y,q)},Mo.prototype.touchend=function(D,Y,q){var ne=this.singleTap.touchend(D,Y,q);if(ne){var pe=D.timeStamp-this.lastTime<500,Le=!this.lastTap||this.lastTap.dist(ne)<30;if(pe&&Le||this.reset(),this.count++,this.lastTime=D.timeStamp,this.lastTap=ne,this.count===this.numTaps)return this.reset(),ne}};var Ra=function(){this._zoomIn=new Mo({numTouches:1,numTaps:2}),this._zoomOut=new Mo({numTouches:2,numTaps:1}),this.reset()};Ra.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ra.prototype.touchstart=function(D,Y,q){this._zoomIn.touchstart(D,Y,q),this._zoomOut.touchstart(D,Y,q)},Ra.prototype.touchmove=function(D,Y,q){this._zoomIn.touchmove(D,Y,q),this._zoomOut.touchmove(D,Y,q)},Ra.prototype.touchend=function(D,Y,q){var ne=this,pe=this._zoomIn.touchend(D,Y,q),Le=this._zoomOut.touchend(D,Y,q);return pe?(this._active=!0,D.preventDefault(),setTimeout(function(){return ne.reset()},0),{cameraAnimation:function(Ne){return Ne.easeTo({duration:300,zoom:Ne.getZoom()+1,around:Ne.unproject(pe)},{originalEvent:D})}}):Le?(this._active=!0,D.preventDefault(),setTimeout(function(){return ne.reset()},0),{cameraAnimation:function(Ne){return Ne.easeTo({duration:300,zoom:Ne.getZoom()-1,around:Ne.unproject(Le)},{originalEvent:D})}}):void 0},Ra.prototype.touchcancel=function(){this.reset()},Ra.prototype.enable=function(){this._enabled=!0},Ra.prototype.disable=function(){this._enabled=!1,this.reset()},Ra.prototype.isEnabled=function(){return this._enabled},Ra.prototype.isActive=function(){return this._active};var Fi=function(D){this.reset(),this._clickTolerance=D.clickTolerance||1};Fi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Fi.prototype._correctButton=function(D,Y){return!1},Fi.prototype._move=function(D,Y){return{}},Fi.prototype.mousedown=function(D,Y){if(!this._lastPoint){var q=x.mouseButton(D);this._correctButton(D,q)&&(this._lastPoint=Y,this._eventButton=q)}},Fi.prototype.mousemoveWindow=function(D,Y){var q=this._lastPoint;if(q&&(D.preventDefault(),this._moved||!(Y.dist(q)<this._clickTolerance)))return this._moved=!0,this._lastPoint=Y,this._move(q,Y)},Fi.prototype.mouseupWindow=function(D){x.mouseButton(D)===this._eventButton&&(this._moved&&x.suppressClick(),this.reset())},Fi.prototype.enable=function(){this._enabled=!0},Fi.prototype.disable=function(){this._enabled=!1,this.reset()},Fi.prototype.isEnabled=function(){return this._enabled},Fi.prototype.isActive=function(){return this._active};var xa=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.mousedown=function(q,ne){D.prototype.mousedown.call(this,q,ne),this._lastPoint&&(this._active=!0)},Y.prototype._correctButton=function(q,ne){return ne===0&&!q.ctrlKey},Y.prototype._move=function(q,ne){return{around:ne,panDelta:ne.sub(q)}},Y}(Fi),Rs=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype._correctButton=function(q,ne){return ne===0&&q.ctrlKey||ne===2},Y.prototype._move=function(q,ne){var pe=.8*(ne.x-q.x);if(pe)return this._active=!0,{bearingDelta:pe}},Y.prototype.contextmenu=function(q){q.preventDefault()},Y}(Fi),zs=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype._correctButton=function(q,ne){return ne===0&&q.ctrlKey||ne===2},Y.prototype._move=function(q,ne){var pe=-.5*(ne.y-q.y);if(pe)return this._active=!0,{pitchDelta:pe}},Y.prototype.contextmenu=function(q){q.preventDefault()},Y}(Fi),aa=function(D){this._minTouches=1,this._clickTolerance=D.clickTolerance||1,this.reset()};aa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)},aa.prototype.touchstart=function(D,Y,q){return this._calculateTransform(D,Y,q)},aa.prototype.touchmove=function(D,Y,q){if(this._active)return D.preventDefault(),this._calculateTransform(D,Y,q)},aa.prototype.touchend=function(D,Y,q){this._calculateTransform(D,Y,q),this._active&&q.length<this._minTouches&&this.reset()},aa.prototype.touchcancel=function(){this.reset()},aa.prototype._calculateTransform=function(D,Y,q){q.length>0&&(this._active=!0);var ne=Gi(q,Y),pe=new l.Point(0,0),Le=new l.Point(0,0),Ne=0;for(var qe in ne){var et=ne[qe],vt=this._touches[qe];vt&&(pe._add(et),Le._add(et.sub(vt)),Ne++,ne[qe]=et)}if(this._touches=ne,!(Ne<this._minTouches)&&Le.mag()){var xt=Le.div(Ne);if(this._sum._add(xt),!(this._sum.mag()<this._clickTolerance))return{around:pe.div(Ne),panDelta:xt}}},aa.prototype.enable=function(){this._enabled=!0},aa.prototype.disable=function(){this._enabled=!1,this.reset()},aa.prototype.isEnabled=function(){return this._enabled},aa.prototype.isActive=function(){return this._active};var _r=function(){this.reset()};function Go(D,Y,q){for(var ne=0;ne<D.length;ne++)if(D[ne].identifier===q)return Y[ne]}_r.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},_r.prototype._start=function(D){},_r.prototype._move=function(D,Y,q){return{}},_r.prototype.touchstart=function(D,Y,q){this._firstTwoTouches||q.length<2||(this._firstTwoTouches=[q[0].identifier,q[1].identifier],this._start([Y[0],Y[1]]))},_r.prototype.touchmove=function(D,Y,q){if(this._firstTwoTouches){D.preventDefault();var ne=this._firstTwoTouches,pe=ne[0],Le=ne[1],Ne=Go(q,Y,pe),qe=Go(q,Y,Le);if(Ne&&qe){var et=this._aroundCenter?null:Ne.add(qe).div(2);return this._move([Ne,qe],et,D)}}},_r.prototype.touchend=function(D,Y,q){if(this._firstTwoTouches){var ne=this._firstTwoTouches,pe=ne[0],Le=ne[1],Ne=Go(q,Y,pe),qe=Go(q,Y,Le);Ne&&qe||(this._active&&x.suppressClick(),this.reset())}},_r.prototype.touchcancel=function(){this.reset()},_r.prototype.enable=function(D){this._enabled=!0,this._aroundCenter=!!D&&D.around==="center"},_r.prototype.disable=function(){this._enabled=!1,this.reset()},_r.prototype.isEnabled=function(){return this._enabled},_r.prototype.isActive=function(){return this._active};function ua(D,Y){return Math.log(D/Y)/Math.LN2}var Ds=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){D.prototype.reset.call(this),delete this._distance,delete this._startDistance},Y.prototype._start=function(q){this._startDistance=this._distance=q[0].dist(q[1])},Y.prototype._move=function(q,ne){var pe=this._distance;if(this._distance=q[0].dist(q[1]),this._active||!(Math.abs(ua(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ua(this._distance,pe),pinchAround:ne}},Y}(_r);function rs(D,Y){return 180*D.angleWith(Y)/Math.PI}var is=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){D.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},Y.prototype._start=function(q){this._startVector=this._vector=q[0].sub(q[1]),this._minDiameter=q[0].dist(q[1])},Y.prototype._move=function(q,ne){var pe=this._vector;if(this._vector=q[0].sub(q[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:rs(this._vector,pe),pinchAround:ne}},Y.prototype._isBelowThreshold=function(q){this._minDiameter=Math.min(this._minDiameter,q.mag());var ne=25/(Math.PI*this._minDiameter)*360,pe=rs(q,this._startVector);return Math.abs(pe)<ne},Y}(_r);function as(D){return Math.abs(D.y)>Math.abs(D.x)}var wr=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){D.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},Y.prototype._start=function(q){this._lastPoints=q,as(q[0].sub(q[1]))&&(this._valid=!1)},Y.prototype._move=function(q,ne,pe){var Le=q[0].sub(this._lastPoints[0]),Ne=q[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Le,Ne,pe.timeStamp),this._valid)return this._lastPoints=q,this._active=!0,{pitchDelta:(Le.y+Ne.y)/2*-.5}},Y.prototype.gestureBeginsVertically=function(q,ne,pe){if(this._valid!==void 0)return this._valid;var Le=q.mag()>=2,Ne=ne.mag()>=2;if(Le||Ne){if(!Le||!Ne)return this._firstMove===void 0&&(this._firstMove=pe),pe-this._firstMove<100&&void 0;var qe=q.y>0==ne.y>0;return as(q)&&as(ne)&&qe}},Y}(_r),os={panStep:100,bearingStep:15,pitchStep:10},za=function(){var D=os;this._panStep=D.panStep,this._bearingStep=D.bearingStep,this._pitchStep=D.pitchStep};function Fs(D){return D*(2-D)}za.prototype.reset=function(){this._active=!1},za.prototype.keydown=function(D){var Y=this;if(!(D.altKey||D.ctrlKey||D.metaKey)){var q=0,ne=0,pe=0,Le=0,Ne=0;switch(D.keyCode){case 61:case 107:case 171:case 187:q=1;break;case 189:case 109:case 173:q=-1;break;case 37:D.shiftKey?ne=-1:(D.preventDefault(),Le=-1);break;case 39:D.shiftKey?ne=1:(D.preventDefault(),Le=1);break;case 38:D.shiftKey?pe=1:(D.preventDefault(),Ne=-1);break;case 40:D.shiftKey?pe=-1:(D.preventDefault(),Ne=1);break;default:return}return{cameraAnimation:function(qe){var et=qe.getZoom();qe.easeTo({duration:300,easeId:"keyboardHandler",easing:Fs,zoom:q?Math.round(et)+q*(D.shiftKey?2:1):et,bearing:qe.getBearing()+ne*Y._bearingStep,pitch:qe.getPitch()+pe*Y._pitchStep,offset:[-Le*Y._panStep,-Ne*Y._panStep],center:qe.getCenter()},{originalEvent:D})}}}},za.prototype.enable=function(){this._enabled=!0},za.prototype.disable=function(){this._enabled=!1,this.reset()},za.prototype.isEnabled=function(){return this._enabled},za.prototype.isActive=function(){return this._active};var Ts=4.000244140625,Ji=function(D,Y){this._map=D,this._el=D.getCanvasContainer(),this._handler=Y,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Ji.prototype.setZoomRate=function(D){this._defaultZoomRate=D},Ji.prototype.setWheelZoomRate=function(D){this._wheelZoomRate=D},Ji.prototype.isEnabled=function(){return!!this._enabled},Ji.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Ji.prototype.isZooming=function(){return!!this._zooming},Ji.prototype.enable=function(D){this.isEnabled()||(this._enabled=!0,this._aroundCenter=D&&D.around==="center")},Ji.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ji.prototype.wheel=function(D){if(this.isEnabled()){var Y=D.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*D.deltaY:D.deltaY,q=l.browser.now(),ne=q-(this._lastWheelEventTime||0);this._lastWheelEventTime=q,Y!==0&&Y%Ts==0?this._type="wheel":Y!==0&&Math.abs(Y)<4?this._type="trackpad":ne>400?(this._type=null,this._lastValue=Y,this._timeout=setTimeout(this._onTimeout,40,D)):this._type||(this._type=Math.abs(ne*Y)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,Y+=this._lastValue)),D.shiftKey&&Y&&(Y/=4),this._type&&(this._lastWheelEvent=D,this._delta-=Y,this._active||this._start(D)),D.preventDefault()}},Ji.prototype._onTimeout=function(D){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(D)},Ji.prototype._start=function(D){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var Y=x.mousePos(this._el,D);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(Y)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ji.prototype.renderFrame=function(){return this._onScrollFrame()},Ji.prototype._onScrollFrame=function(){var D=this;if(this._frameId&&(this._frameId=null,this.isActive())){var Y=this._map.transform;if(this._delta!==0){var q=this._type==="wheel"&&Math.abs(this._delta)>Ts?this._wheelZoomRate:this._defaultZoomRate,ne=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&ne!==0&&(ne=1/ne);var pe=typeof this._targetZoom=="number"?Y.zoomScale(this._targetZoom):Y.scale;this._targetZoom=Math.min(Y.maxZoom,Math.max(Y.minZoom,Y.scaleZoom(pe*ne))),this._type==="wheel"&&(this._startZoom=Y.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Le,Ne=typeof this._targetZoom=="number"?this._targetZoom:Y.zoom,qe=this._startZoom,et=this._easing,vt=!1;if(this._type==="wheel"&&qe&&et){var xt=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),te=et(xt);Le=l.number(qe,Ne,te),xt<1?this._frameId||(this._frameId=!0):vt=!0}else Le=Ne,vt=!0;return this._active=!0,vt&&(this._active=!1,this._finishTimeout=setTimeout(function(){D._zooming=!1,D._handler._triggerRenderFrame(),delete D._targetZoom,delete D._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!vt,zoomDelta:Le-Y.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ji.prototype._smoothOutEasing=function(D){var Y=l.ease;if(this._prevEase){var q=this._prevEase,ne=(l.browser.now()-q.start)/q.duration,pe=q.easing(ne+.01)-q.easing(ne),Le=.27/Math.sqrt(pe*pe+1e-4)*.01,Ne=Math.sqrt(.0729-Le*Le);Y=l.bezier(Le,Ne,.25,1)}return this._prevEase={start:l.browser.now(),duration:D,easing:Y},Y},Ji.prototype.reset=function(){this._active=!1};var Zo=function(D,Y){this._clickZoom=D,this._tapZoom=Y};Zo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Zo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Zo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Zo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ho=function(){this.reset()};ho.prototype.reset=function(){this._active=!1},ho.prototype.dblclick=function(D,Y){return D.preventDefault(),{cameraAnimation:function(q){q.easeTo({duration:300,zoom:q.getZoom()+(D.shiftKey?-1:1),around:q.unproject(Y)},{originalEvent:D})}}},ho.prototype.enable=function(){this._enabled=!0},ho.prototype.disable=function(){this._enabled=!1,this.reset()},ho.prototype.isEnabled=function(){return this._enabled},ho.prototype.isActive=function(){return this._active};var ba=function(){this._tap=new Mo({numTouches:1,numTaps:1}),this.reset()};ba.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ba.prototype.touchstart=function(D,Y,q){this._swipePoint||(this._tapTime&&D.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?q.length>0&&(this._swipePoint=Y[0],this._swipeTouch=q[0].identifier):this._tap.touchstart(D,Y,q))},ba.prototype.touchmove=function(D,Y,q){if(this._tapTime){if(this._swipePoint){if(q[0].identifier!==this._swipeTouch)return;var ne=Y[0],pe=ne.y-this._swipePoint.y;return this._swipePoint=ne,D.preventDefault(),this._active=!0,{zoomDelta:pe/128}}}else this._tap.touchmove(D,Y,q)},ba.prototype.touchend=function(D,Y,q){this._tapTime?this._swipePoint&&q.length===0&&this.reset():this._tap.touchend(D,Y,q)&&(this._tapTime=D.timeStamp)},ba.prototype.touchcancel=function(){this.reset()},ba.prototype.enable=function(){this._enabled=!0},ba.prototype.disable=function(){this._enabled=!1,this.reset()},ba.prototype.isEnabled=function(){return this._enabled},ba.prototype.isActive=function(){return this._active};var So=function(D,Y,q){this._el=D,this._mousePan=Y,this._touchPan=q};So.prototype.enable=function(D){this._inertiaOptions=D||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},So.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},So.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},So.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Ha=function(D,Y,q){this._pitchWithRotate=D.pitchWithRotate,this._mouseRotate=Y,this._mousePitch=q};Ha.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Ha.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Ha.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Ha.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Da=function(D,Y,q,ne){this._el=D,this._touchZoom=Y,this._touchRotate=q,this._tapDragZoom=ne,this._rotationDisabled=!1,this._enabled=!0};Da.prototype.enable=function(D){this._touchZoom.enable(D),this._rotationDisabled||this._touchRotate.enable(D),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Da.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Da.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Da.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Da.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Da.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Wo=function(D){return D.zoom||D.drag||D.pitch||D.rotate},Ki=function(D){function Y(){D.apply(this,arguments)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y}(l.Event);function Fa(D){return D.panDelta&&D.panDelta.mag()||D.zoomDelta||D.bearingDelta||D.pitchDelta}var ri=function(D,Y){this._map=D,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Vo(D),this._bearingSnap=Y.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(Y),l.bindAll(["handleEvent","handleWindowEvent"],this);var q=this._el;this._listeners=[[q,"touchstart",{passive:!1}],[q,"touchmove",{passive:!1}],[q,"touchend",void 0],[q,"touchcancel",void 0],[q,"mousedown",void 0],[q,"mousemove",void 0],[q,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[q,"mouseover",void 0],[q,"mouseout",void 0],[q,"dblclick",void 0],[q,"click",void 0],[q,"keydown",{capture:!1}],[q,"keyup",void 0],[q,"wheel",{passive:!1}],[q,"contextmenu",void 0],[l.window,"blur",void 0]];for(var ne=0,pe=this._listeners;ne<pe.length;ne+=1){var Le=pe[ne],Ne=Le[0],qe=Le[1],et=Le[2];x.addEventListener(Ne,qe,Ne===l.window.document?this.handleWindowEvent:this.handleEvent,et)}};ri.prototype.destroy=function(){for(var D=0,Y=this._listeners;D<Y.length;D+=1){var q=Y[D],ne=q[0],pe=q[1],Le=q[2];x.removeEventListener(ne,pe,ne===l.window.document?this.handleWindowEvent:this.handleEvent,Le)}},ri.prototype._addDefaultHandlers=function(D){var Y=this._map,q=Y.getCanvasContainer();this._add("mapEvent",new Ri(Y,D));var ne=Y.boxZoom=new Xi(Y,D);this._add("boxZoom",ne);var pe=new Ra,Le=new ho;Y.doubleClickZoom=new Zo(Le,pe),this._add("tapZoom",pe),this._add("clickZoom",Le);var Ne=new ba;this._add("tapDragZoom",Ne);var qe=Y.touchPitch=new wr;this._add("touchPitch",qe);var et=new Rs(D),vt=new zs(D);Y.dragRotate=new Ha(D,et,vt),this._add("mouseRotate",et,["mousePitch"]),this._add("mousePitch",vt,["mouseRotate"]);var xt=new xa(D),te=new aa(D);Y.dragPan=new So(q,xt,te),this._add("mousePan",xt),this._add("touchPan",te,["touchZoom","touchRotate"]);var ue=new is,we=new Ds;Y.touchZoomRotate=new Da(q,we,ue,Ne),this._add("touchRotate",ue,["touchPan","touchZoom"]),this._add("touchZoom",we,["touchPan","touchRotate"]);var Pe=Y.scrollZoom=new Ji(Y,this);this._add("scrollZoom",Pe,["mousePan"]);var De=Y.keyboard=new za;this._add("keyboard",De),this._add("blockableMapEvent",new Yi(Y));for(var Ue=0,Ze=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Ue<Ze.length;Ue+=1){var Je=Ze[Ue];D.interactive&&D[Je]&&Y[Je].enable(D[Je])}},ri.prototype._add=function(D,Y,q){this._handlers.push({handlerName:D,handler:Y,allowed:q}),this._handlersById[D]=Y},ri.prototype.stop=function(){if(!this._updatingCamera){for(var D=0,Y=this._handlers;D<Y.length;D+=1)Y[D].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ri.prototype.isActive=function(){for(var D=0,Y=this._handlers;D<Y.length;D+=1)if(Y[D].handler.isActive())return!0;return!1},ri.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ri.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ri.prototype.isMoving=function(){return Boolean(Wo(this._eventsInProgress))||this.isZooming()},ri.prototype._blockedByActive=function(D,Y,q){for(var ne in D)if(ne!==q&&(!Y||Y.indexOf(ne)<0))return!0;return!1},ri.prototype.handleWindowEvent=function(D){this.handleEvent(D,D.type+"Window")},ri.prototype._getMapTouches=function(D){for(var Y=[],q=0,ne=D;q<ne.length;q+=1){var pe=ne[q],Le=pe.target;this._el.contains(Le)&&Y.push(pe)}return Y},ri.prototype.handleEvent=function(D,Y){if(D.type!=="blur"){this._updatingCamera=!0;for(var q=D.type==="renderFrame"?void 0:D,ne={needsRenderFrame:!1},pe={},Le={},Ne=D.touches?this._getMapTouches(D.touches):void 0,qe=Ne?x.touchPos(this._el,Ne):x.mousePos(this._el,D),et=0,vt=this._handlers;et<vt.length;et+=1){var xt=vt[et],te=xt.handlerName,ue=xt.handler,we=xt.allowed;if(ue.isEnabled()){var Pe=void 0;this._blockedByActive(Le,we,te)?ue.reset():ue[Y||D.type]&&(Pe=ue[Y||D.type](D,qe,Ne),this.mergeHandlerResult(ne,pe,Pe,te,q),Pe&&Pe.needsRenderFrame&&this._triggerRenderFrame()),(Pe||ue.isActive())&&(Le[te]=ue)}}var De={};for(var Ue in this._previousActiveHandlers)Le[Ue]||(De[Ue]=q);this._previousActiveHandlers=Le,(Object.keys(De).length||Fa(ne))&&(this._changes.push([ne,pe,De]),this._triggerRenderFrame()),(Object.keys(Le).length||Fa(ne))&&this._map._stop(!0),this._updatingCamera=!1;var Ze=ne.cameraAnimation;Ze&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Ze(this._map))}else this.stop()},ri.prototype.mergeHandlerResult=function(D,Y,q,ne,pe){if(q){l.extend(D,q);var Le={handlerName:ne,originalEvent:q.originalEvent||pe};q.zoomDelta!==void 0&&(Y.zoom=Le),q.panDelta!==void 0&&(Y.drag=Le),q.pitchDelta!==void 0&&(Y.pitch=Le),q.bearingDelta!==void 0&&(Y.rotate=Le)}},ri.prototype._applyChanges=function(){for(var D={},Y={},q={},ne=0,pe=this._changes;ne<pe.length;ne+=1){var Le=pe[ne],Ne=Le[0],qe=Le[1],et=Le[2];Ne.panDelta&&(D.panDelta=(D.panDelta||new l.Point(0,0))._add(Ne.panDelta)),Ne.zoomDelta&&(D.zoomDelta=(D.zoomDelta||0)+Ne.zoomDelta),Ne.bearingDelta&&(D.bearingDelta=(D.bearingDelta||0)+Ne.bearingDelta),Ne.pitchDelta&&(D.pitchDelta=(D.pitchDelta||0)+Ne.pitchDelta),Ne.around!==void 0&&(D.around=Ne.around),Ne.pinchAround!==void 0&&(D.pinchAround=Ne.pinchAround),Ne.noInertia&&(D.noInertia=Ne.noInertia),l.extend(Y,qe),l.extend(q,et)}this._updateMapTransform(D,Y,q),this._changes=[]},ri.prototype._updateMapTransform=function(D,Y,q){var ne=this._map,pe=ne.transform;if(!Fa(D))return this._fireEvents(Y,q);var Le=D.panDelta,Ne=D.zoomDelta,qe=D.bearingDelta,et=D.pitchDelta,vt=D.around,xt=D.pinchAround;xt!==void 0&&(vt=xt),ne._stop(!0),vt=vt||ne.transform.centerPoint;var te=pe.pointLocation(Le?vt.sub(Le):vt);qe&&(pe.bearing+=qe),et&&(pe.pitch+=et),Ne&&(pe.zoom+=Ne),pe.setLocationAtPoint(te,vt),this._map._update(),D.noInertia||this._inertia.record(D),this._fireEvents(Y,q)},ri.prototype._fireEvents=function(D,Y){var q=this,ne=Wo(this._eventsInProgress),pe=Wo(D),Le={};for(var Ne in D){var qe=D[Ne].originalEvent;this._eventsInProgress[Ne]||(Le[Ne+"start"]=qe),this._eventsInProgress[Ne]=D[Ne]}for(var et in!ne&&pe&&this._fireEvent("movestart",pe.originalEvent),Le)this._fireEvent(et,Le[et]);for(var vt in D.rotate&&(this._bearingChanged=!0),pe&&this._fireEvent("move",pe.originalEvent),D){var xt=D[vt].originalEvent;this._fireEvent(vt,xt)}var te,ue={};for(var we in this._eventsInProgress){var Pe=this._eventsInProgress[we],De=Pe.handlerName,Ue=Pe.originalEvent;this._handlersById[De].isActive()||(delete this._eventsInProgress[we],te=Y[De]||Ue,ue[we+"end"]=te)}for(var Ze in ue)this._fireEvent(Ze,ue[Ze]);var Je=Wo(this._eventsInProgress);if((ne||pe)&&!Je){this._updatingCamera=!0;var it=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ut=function(St){return St!==0&&-q._bearingSnap<St&&St<q._bearingSnap};it?(ut(it.bearing||this._map.getBearing())&&(it.bearing=0),this._map.easeTo(it,{originalEvent:te})):(this._map.fire(new l.Event("moveend",{originalEvent:te})),ut(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ri.prototype._fireEvent=function(D,Y){this._map.fire(new l.Event(D,Y?{originalEvent:Y}:{}))},ri.prototype._triggerRenderFrame=function(){var D=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(Y){delete D._frameId,D.handleEvent(new Ki("renderFrame",{timeStamp:Y})),D._applyChanges()}))};var ks=function(D){function Y(q,ne){D.call(this),this._moving=!1,this._zooming=!1,this.transform=q,this._bearingSnap=ne.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.getCenter=function(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)},Y.prototype.setCenter=function(q,ne){return this.jumpTo({center:q},ne)},Y.prototype.panBy=function(q,ne,pe){return q=l.Point.convert(q).mult(-1),this.panTo(this.transform.center,l.extend({offset:q},ne),pe)},Y.prototype.panTo=function(q,ne,pe){return this.easeTo(l.extend({center:q},ne),pe)},Y.prototype.getZoom=function(){return this.transform.zoom},Y.prototype.setZoom=function(q,ne){return this.jumpTo({zoom:q},ne),this},Y.prototype.zoomTo=function(q,ne,pe){return this.easeTo(l.extend({zoom:q},ne),pe)},Y.prototype.zoomIn=function(q,ne){return this.zoomTo(this.getZoom()+1,q,ne),this},Y.prototype.zoomOut=function(q,ne){return this.zoomTo(this.getZoom()-1,q,ne),this},Y.prototype.getBearing=function(){return this.transform.bearing},Y.prototype.setBearing=function(q,ne){return this.jumpTo({bearing:q},ne),this},Y.prototype.getPadding=function(){return this.transform.padding},Y.prototype.setPadding=function(q,ne){return this.jumpTo({padding:q},ne),this},Y.prototype.rotateTo=function(q,ne,pe){return this.easeTo(l.extend({bearing:q},ne),pe)},Y.prototype.resetNorth=function(q,ne){return this.rotateTo(0,l.extend({duration:1e3},q),ne),this},Y.prototype.resetNorthPitch=function(q,ne){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},q),ne),this},Y.prototype.snapToNorth=function(q,ne){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(q,ne):this},Y.prototype.getPitch=function(){return this.transform.pitch},Y.prototype.setPitch=function(q,ne){return this.jumpTo({pitch:q},ne),this},Y.prototype.cameraForBounds=function(q,ne){return q=l.LngLatBounds.convert(q),this._cameraForBoxAndBearing(q.getNorthWest(),q.getSouthEast(),0,ne)},Y.prototype._cameraForBoxAndBearing=function(q,ne,pe,Le){var Ne={top:0,bottom:0,right:0,left:0};if(typeof(Le=l.extend({padding:Ne,offset:[0,0],maxZoom:this.transform.maxZoom},Le)).padding=="number"){var qe=Le.padding;Le.padding={top:qe,bottom:qe,right:qe,left:qe}}Le.padding=l.extend(Ne,Le.padding);var et=this.transform,vt=et.padding,xt=et.project(l.LngLat.convert(q)),te=et.project(l.LngLat.convert(ne)),ue=xt.rotate(-pe*Math.PI/180),we=te.rotate(-pe*Math.PI/180),Pe=new l.Point(Math.max(ue.x,we.x),Math.max(ue.y,we.y)),De=new l.Point(Math.min(ue.x,we.x),Math.min(ue.y,we.y)),Ue=Pe.sub(De),Ze=(et.width-(vt.left+vt.right+Le.padding.left+Le.padding.right))/Ue.x,Je=(et.height-(vt.top+vt.bottom+Le.padding.top+Le.padding.bottom))/Ue.y;if(!(Je<0||Ze<0)){var it=Math.min(et.scaleZoom(et.scale*Math.min(Ze,Je)),Le.maxZoom),ut=l.Point.convert(Le.offset),St=(Le.padding.left-Le.padding.right)/2,Dt=(Le.padding.top-Le.padding.bottom)/2,Ft=new l.Point(ut.x+St,ut.y+Dt).mult(et.scale/et.zoomScale(it));return{center:et.unproject(xt.add(te).div(2).sub(Ft)),zoom:it,bearing:pe}}l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},Y.prototype.fitBounds=function(q,ne,pe){return this._fitInternal(this.cameraForBounds(q,ne),ne,pe)},Y.prototype.fitScreenCoordinates=function(q,ne,pe,Le,Ne){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(q)),this.transform.pointLocation(l.Point.convert(ne)),pe,Le),Le,Ne)},Y.prototype._fitInternal=function(q,ne,pe){return q?(delete(ne=l.extend(q,ne)).padding,ne.linear?this.easeTo(ne,pe):this.flyTo(ne,pe)):this},Y.prototype.jumpTo=function(q,ne){this.stop();var pe=this.transform,Le=!1,Ne=!1,qe=!1;return"zoom"in q&&pe.zoom!==+q.zoom&&(Le=!0,pe.zoom=+q.zoom),q.center!==void 0&&(pe.center=l.LngLat.convert(q.center)),"bearing"in q&&pe.bearing!==+q.bearing&&(Ne=!0,pe.bearing=+q.bearing),"pitch"in q&&pe.pitch!==+q.pitch&&(qe=!0,pe.pitch=+q.pitch),q.padding==null||pe.isPaddingEqual(q.padding)||(pe.padding=q.padding),this.fire(new l.Event("movestart",ne)).fire(new l.Event("move",ne)),Le&&this.fire(new l.Event("zoomstart",ne)).fire(new l.Event("zoom",ne)).fire(new l.Event("zoomend",ne)),Ne&&this.fire(new l.Event("rotatestart",ne)).fire(new l.Event("rotate",ne)).fire(new l.Event("rotateend",ne)),qe&&this.fire(new l.Event("pitchstart",ne)).fire(new l.Event("pitch",ne)).fire(new l.Event("pitchend",ne)),this.fire(new l.Event("moveend",ne))},Y.prototype.easeTo=function(q,ne){var pe=this;this._stop(!1,q.easeId),((q=l.extend({offset:[0,0],duration:500,easing:l.ease},q)).animate===!1||!q.essential&&l.browser.prefersReducedMotion)&&(q.duration=0);var Le=this.transform,Ne=this.getZoom(),qe=this.getBearing(),et=this.getPitch(),vt=this.getPadding(),xt="zoom"in q?+q.zoom:Ne,te="bearing"in q?this._normalizeBearing(q.bearing,qe):qe,ue="pitch"in q?+q.pitch:et,we="padding"in q?q.padding:Le.padding,Pe=l.Point.convert(q.offset),De=Le.centerPoint.add(Pe),Ue=Le.pointLocation(De),Ze=l.LngLat.convert(q.center||Ue);this._normalizeCenter(Ze);var Je,it,ut=Le.project(Ue),St=Le.project(Ze).sub(ut),Dt=Le.zoomScale(xt-Ne);q.around&&(Je=l.LngLat.convert(q.around),it=Le.locationPoint(Je));var Ft={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||xt!==Ne,this._rotating=this._rotating||qe!==te,this._pitching=this._pitching||ue!==et,this._padding=!Le.isPaddingEqual(we),this._easeId=q.easeId,this._prepareEase(ne,q.noMoveStart,Ft),clearTimeout(this._easeEndTimeoutID),this._ease(function(Yt){if(pe._zooming&&(Le.zoom=l.number(Ne,xt,Yt)),pe._rotating&&(Le.bearing=l.number(qe,te,Yt)),pe._pitching&&(Le.pitch=l.number(et,ue,Yt)),pe._padding&&(Le.interpolatePadding(vt,we,Yt),De=Le.centerPoint.add(Pe)),Je)Le.setLocationAtPoint(Je,it);else{var ln=Le.zoomScale(Le.zoom-Ne),Xt=xt>Ne?Math.min(2,Dt):Math.max(.5,Dt),en=Math.pow(Xt,1-Yt),Jt=Le.unproject(ut.add(St.mult(Yt*en)).mult(ln));Le.setLocationAtPoint(Le.renderWorldCopies?Jt.wrap():Jt,De)}pe._fireMoveEvents(ne)},function(Yt){pe._afterEase(ne,Yt)},q),this},Y.prototype._prepareEase=function(q,ne,pe){pe===void 0&&(pe={}),this._moving=!0,ne||pe.moving||this.fire(new l.Event("movestart",q)),this._zooming&&!pe.zooming&&this.fire(new l.Event("zoomstart",q)),this._rotating&&!pe.rotating&&this.fire(new l.Event("rotatestart",q)),this._pitching&&!pe.pitching&&this.fire(new l.Event("pitchstart",q))},Y.prototype._fireMoveEvents=function(q){this.fire(new l.Event("move",q)),this._zooming&&this.fire(new l.Event("zoom",q)),this._rotating&&this.fire(new l.Event("rotate",q)),this._pitching&&this.fire(new l.Event("pitch",q))},Y.prototype._afterEase=function(q,ne){if(!this._easeId||!ne||this._easeId!==ne){delete this._easeId;var pe=this._zooming,Le=this._rotating,Ne=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,pe&&this.fire(new l.Event("zoomend",q)),Le&&this.fire(new l.Event("rotateend",q)),Ne&&this.fire(new l.Event("pitchend",q)),this.fire(new l.Event("moveend",q))}},Y.prototype.flyTo=function(q,ne){var pe=this;if(!q.essential&&l.browser.prefersReducedMotion){var Le=l.pick(q,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Le,ne)}this.stop(),q=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},q);var Ne=this.transform,qe=this.getZoom(),et=this.getBearing(),vt=this.getPitch(),xt=this.getPadding(),te="zoom"in q?l.clamp(+q.zoom,Ne.minZoom,Ne.maxZoom):qe,ue="bearing"in q?this._normalizeBearing(q.bearing,et):et,we="pitch"in q?+q.pitch:vt,Pe="padding"in q?q.padding:Ne.padding,De=Ne.zoomScale(te-qe),Ue=l.Point.convert(q.offset),Ze=Ne.centerPoint.add(Ue),Je=Ne.pointLocation(Ze),it=l.LngLat.convert(q.center||Je);this._normalizeCenter(it);var ut=Ne.project(Je),St=Ne.project(it).sub(ut),Dt=q.curve,Ft=Math.max(Ne.width,Ne.height),Yt=Ft/De,ln=St.mag();if("minZoom"in q){var Xt=l.clamp(Math.min(q.minZoom,qe,te),Ne.minZoom,Ne.maxZoom),en=Ft/Ne.zoomScale(Xt-qe);Dt=Math.sqrt(en/ln*2)}var Jt=Dt*Dt;function bn(sr){var dr=(Yt*Yt-Ft*Ft+(sr?-1:1)*Jt*Jt*ln*ln)/(2*(sr?Yt:Ft)*Jt*ln);return Math.log(Math.sqrt(dr*dr+1)-dr)}function gn(sr){return(Math.exp(sr)-Math.exp(-sr))/2}function Qt(sr){return(Math.exp(sr)+Math.exp(-sr))/2}var Pn=bn(0),Dn=function(sr){return Qt(Pn)/Qt(Pn+Dt*sr)},Xn=function(sr){return Ft*((Qt(Pn)*(gn(dr=Pn+Dt*sr)/Qt(dr))-gn(Pn))/Jt)/ln;var dr},Jn=(bn(1)-Pn)/Dt;if(Math.abs(ln)<1e-6||!isFinite(Jn)){if(Math.abs(Ft-Yt)<1e-6)return this.easeTo(q,ne);var gr=Yt<Ft?-1:1;Jn=Math.abs(Math.log(Yt/Ft))/Dt,Xn=function(){return 0},Dn=function(sr){return Math.exp(gr*Dt*sr)}}if("duration"in q)q.duration=+q.duration;else{var vr="screenSpeed"in q?+q.screenSpeed/Dt:+q.speed;q.duration=1e3*Jn/vr}return q.maxDuration&&q.duration>q.maxDuration&&(q.duration=0),this._zooming=!0,this._rotating=et!==ue,this._pitching=we!==vt,this._padding=!Ne.isPaddingEqual(Pe),this._prepareEase(ne,!1),this._ease(function(sr){var dr=sr*Jn,kr=1/Dn(dr);Ne.zoom=sr===1?te:qe+Ne.scaleZoom(kr),pe._rotating&&(Ne.bearing=l.number(et,ue,sr)),pe._pitching&&(Ne.pitch=l.number(vt,we,sr)),pe._padding&&(Ne.interpolatePadding(xt,Pe,sr),Ze=Ne.centerPoint.add(Ue));var Vr=sr===1?it:Ne.unproject(ut.add(St.mult(Xn(dr))).mult(kr));Ne.setLocationAtPoint(Ne.renderWorldCopies?Vr.wrap():Vr,Ze),pe._fireMoveEvents(ne)},function(){return pe._afterEase(ne)},q),this},Y.prototype.isEasing=function(){return!!this._easeFrameId},Y.prototype.stop=function(){return this._stop()},Y.prototype._stop=function(q,ne){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var pe=this._onEaseEnd;delete this._onEaseEnd,pe.call(this,ne)}if(!q){var Le=this.handlers;Le&&Le.stop()}return this},Y.prototype._ease=function(q,ne,pe){pe.animate===!1||pe.duration===0?(q(1),ne()):(this._easeStart=l.browser.now(),this._easeOptions=pe,this._onEaseFrame=q,this._onEaseEnd=ne,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Y.prototype._renderFrameCallback=function(){var q=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(q)),q<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Y.prototype._normalizeBearing=function(q,ne){q=l.wrap(q,-180,180);var pe=Math.abs(q-ne);return Math.abs(q-360-ne)<pe&&(q-=360),Math.abs(q+360-ne)<pe&&(q+=360),q},Y.prototype._normalizeCenter=function(q){var ne=this.transform;if(ne.renderWorldCopies&&!ne.lngRange){var pe=q.lng-ne.center.lng;q.lng+=pe>180?-360:pe<-180?360:0}},Y}(l.Evented),Ma=function(D){D===void 0&&(D={}),this.options=D,l.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Ma.prototype.getDefaultPosition=function(){return"bottom-right"},Ma.prototype.onAdd=function(D){var Y=this.options&&this.options.compact;return this._map=D,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=x.create("div","mapboxgl-ctrl-attrib-inner",this._container),Y&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),Y===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ma.prototype.onRemove=function(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ma.prototype._updateEditLink=function(){var D=this._editLink;D||(D=this._editLink=this._container.querySelector(".mapbox-improve-map"));var Y=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(D){var q=Y.reduce(function(ne,pe,Le){return pe.value&&(ne+=pe.key+"="+pe.value+(Le<Y.length-1?"&":"")),ne},"?");D.href=l.config.FEEDBACK_URL+"/"+q+(this._map._hash?this._map._hash.getHashString(!0):""),D.rel="noopener nofollow"}},Ma.prototype._updateData=function(D){!D||D.sourceDataType!=="metadata"&&D.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Ma.prototype._updateAttributions=function(){if(this._map.style){var D=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?D=D.concat(this.options.customAttribution.map(function(qe){return typeof qe!="string"?"":qe})):typeof this.options.customAttribution=="string"&&D.push(this.options.customAttribution)),this._map.style.stylesheet){var Y=this._map.style.stylesheet;this.styleOwner=Y.owner,this.styleId=Y.id}var q=this._map.style.sourceCaches;for(var ne in q){var pe=q[ne];if(pe.used){var Le=pe.getSource();Le.attribution&&D.indexOf(Le.attribution)<0&&D.push(Le.attribution)}}D.sort(function(qe,et){return qe.length-et.length});var Ne=(D=D.filter(function(qe,et){for(var vt=et+1;vt<D.length;vt++)if(D[vt].indexOf(qe)>=0)return!1;return!0})).join(" | ");Ne!==this._attribHTML&&(this._attribHTML=Ne,D.length?(this._innerContainer.innerHTML=Ne,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ma.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Ba=function(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)};Ba.prototype.onAdd=function(D){this._map=D,this._container=x.create("div","mapboxgl-ctrl");var Y=x.create("a","mapboxgl-ctrl-logo");return Y.target="_blank",Y.rel="noopener nofollow",Y.href="https://www.mapbox.com/",Y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),Y.setAttribute("rel","noopener nofollow"),this._container.appendChild(Y),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ba.prototype.onRemove=function(){x.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ba.prototype.getDefaultPosition=function(){return"bottom-left"},Ba.prototype._updateLogo=function(D){D&&D.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Ba.prototype._logoRequired=function(){if(this._map.style){var D=this._map.style.sourceCaches;for(var Y in D)if(D[Y].getSource().mapbox_logo)return!0;return!1}},Ba.prototype._updateCompact=function(){var D=this._container.children;if(D.length){var Y=D[0];this._map.getCanvasContainer().offsetWidth<250?Y.classList.add("mapboxgl-compact"):Y.classList.remove("mapboxgl-compact")}};var Qa=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Qa.prototype.add=function(D){var Y=++this._id;return this._queue.push({callback:D,id:Y,cancelled:!1}),Y},Qa.prototype.remove=function(D){for(var Y=this._currentlyRunning,q=0,ne=Y?this._queue.concat(Y):this._queue;q<ne.length;q+=1){var pe=ne[q];if(pe.id===D)return void(pe.cancelled=!0)}},Qa.prototype.run=function(D){D===void 0&&(D=0);var Y=this._currentlyRunning=this._queue;this._queue=[];for(var q=0,ne=Y;q<ne.length;q+=1){var pe=ne[q];if(!pe.cancelled&&(pe.callback(D),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Qa.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ca={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ni=l.window.HTMLImageElement,Hi=l.window.HTMLElement,qa=l.window.ImageBitmap,fa=60,eo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:fa,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Eo=function(D){function Y(ne){var pe=this;if((ne=l.extend({},eo,ne)).minZoom!=null&&ne.maxZoom!=null&&ne.minZoom>ne.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(ne.minPitch!=null&&ne.maxPitch!=null&&ne.minPitch>ne.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(ne.minPitch!=null&&ne.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(ne.maxPitch!=null&&ne.maxPitch>fa)throw new Error("maxPitch must be less than or equal to 60");var Le=new Xr(ne.minZoom,ne.maxZoom,ne.minPitch,ne.maxPitch,ne.renderWorldCopies);if(D.call(this,Le,ne),this._interactive=ne.interactive,this._maxTileCacheSize=ne.maxTileCacheSize,this._failIfMajorPerformanceCaveat=ne.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=ne.preserveDrawingBuffer,this._antialias=ne.antialias,this._trackResize=ne.trackResize,this._bearingSnap=ne.bearingSnap,this._refreshExpiredTiles=ne.refreshExpiredTiles,this._fadeDuration=ne.fadeDuration,this._crossSourceCollisions=ne.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=ne.collectResourceTiming,this._renderTaskQueue=new Qa,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},ca,ne.locale),this._requestManager=new l.RequestManager(ne.transformRequest,ne.accessToken),typeof ne.container=="string"){if(this._container=l.window.document.getElementById(ne.container),!this._container)throw new Error("Container '"+ne.container+"' not found.")}else{if(!(ne.container instanceof Hi))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=ne.container}if(ne.maxBounds&&this.setMaxBounds(ne.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return pe._update(!1)}),this.on("moveend",function(){return pe._update(!1)}),this.on("zoom",function(){return pe._update(!0)}),l.window!==void 0&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ri(this,ne);var Ne=typeof ne.hash=="string"&&ne.hash||void 0;this._hash=ne.hash&&new co(Ne).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:ne.center,zoom:ne.zoom,bearing:ne.bearing,pitch:ne.pitch}),ne.bounds&&(this.resize(),this.fitBounds(ne.bounds,l.extend({},ne.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=ne.localIdeographFontFamily,ne.style&&this.setStyle(ne.style,{localIdeographFontFamily:ne.localIdeographFontFamily}),ne.attributionControl&&this.addControl(new Ma({customAttribution:ne.customAttribution})),this.addControl(new Ba,ne.logoPosition),this.on("style.load",function(){pe.transform.unmodified&&pe.jumpTo(pe.style.stylesheet)}),this.on("data",function(qe){pe._update(qe.dataType==="style"),pe.fire(new l.Event(qe.dataType+"data",qe))}),this.on("dataloading",function(qe){pe.fire(new l.Event(qe.dataType+"dataloading",qe))})}D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y;var q={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return Y.prototype._getMapId=function(){return this._mapId},Y.prototype.addControl=function(ne,pe){if(pe===void 0&&ne.getDefaultPosition&&(pe=ne.getDefaultPosition()),pe===void 0&&(pe="top-right"),!ne||!ne.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Le=ne.onAdd(this);this._controls.push(ne);var Ne=this._controlPositions[pe];return pe.indexOf("bottom")!==-1?Ne.insertBefore(Le,Ne.firstChild):Ne.appendChild(Le),this},Y.prototype.removeControl=function(ne){if(!ne||!ne.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var pe=this._controls.indexOf(ne);return pe>-1&&this._controls.splice(pe,1),ne.onRemove(this),this},Y.prototype.resize=function(ne){var pe=this._containerDimensions(),Le=pe[0],Ne=pe[1];this._resizeCanvas(Le,Ne),this.transform.resize(Le,Ne),this.painter.resize(Le,Ne);var qe=!this._moving;return qe&&(this.stop(),this.fire(new l.Event("movestart",ne)).fire(new l.Event("move",ne))),this.fire(new l.Event("resize",ne)),qe&&this.fire(new l.Event("moveend",ne)),this},Y.prototype.getBounds=function(){return this.transform.getBounds()},Y.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},Y.prototype.setMaxBounds=function(ne){return this.transform.setMaxBounds(l.LngLatBounds.convert(ne)),this._update()},Y.prototype.setMinZoom=function(ne){if((ne=ne??-2)>=-2&&ne<=this.transform.maxZoom)return this.transform.minZoom=ne,this._update(),this.getZoom()<ne&&this.setZoom(ne),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},Y.prototype.getMinZoom=function(){return this.transform.minZoom},Y.prototype.setMaxZoom=function(ne){if((ne=ne??22)>=this.transform.minZoom)return this.transform.maxZoom=ne,this._update(),this.getZoom()>ne&&this.setZoom(ne),this;throw new Error("maxZoom must be greater than the current minZoom")},Y.prototype.getMaxZoom=function(){return this.transform.maxZoom},Y.prototype.setMinPitch=function(ne){if((ne=ne??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(ne>=0&&ne<=this.transform.maxPitch)return this.transform.minPitch=ne,this._update(),this.getPitch()<ne&&this.setPitch(ne),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},Y.prototype.getMinPitch=function(){return this.transform.minPitch},Y.prototype.setMaxPitch=function(ne){if((ne=ne??fa)>fa)throw new Error("maxPitch must be less than or equal to 60");if(ne>=this.transform.minPitch)return this.transform.maxPitch=ne,this._update(),this.getPitch()>ne&&this.setPitch(ne),this;throw new Error("maxPitch must be greater than the current minPitch")},Y.prototype.getMaxPitch=function(){return this.transform.maxPitch},Y.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},Y.prototype.setRenderWorldCopies=function(ne){return this.transform.renderWorldCopies=ne,this._update()},Y.prototype.project=function(ne){return this.transform.locationPoint(l.LngLat.convert(ne))},Y.prototype.unproject=function(ne){return this.transform.pointLocation(l.Point.convert(ne))},Y.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},Y.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},Y.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},Y.prototype._createDelegatedListener=function(ne,pe,Le){var Ne,qe=this;if(ne==="mouseenter"||ne==="mouseover"){var et=!1;return{layer:pe,listener:Le,delegates:{mousemove:function(xt){var te=qe.getLayer(pe)?qe.queryRenderedFeatures(xt.point,{layers:[pe]}):[];te.length?et||(et=!0,Le.call(qe,new mi(ne,qe,xt.originalEvent,{features:te}))):et=!1},mouseout:function(){et=!1}}}}if(ne==="mouseleave"||ne==="mouseout"){var vt=!1;return{layer:pe,listener:Le,delegates:{mousemove:function(xt){(qe.getLayer(pe)?qe.queryRenderedFeatures(xt.point,{layers:[pe]}):[]).length?vt=!0:vt&&(vt=!1,Le.call(qe,new mi(ne,qe,xt.originalEvent)))},mouseout:function(xt){vt&&(vt=!1,Le.call(qe,new mi(ne,qe,xt.originalEvent)))}}}}return{layer:pe,listener:Le,delegates:(Ne={},Ne[ne]=function(xt){var te=qe.getLayer(pe)?qe.queryRenderedFeatures(xt.point,{layers:[pe]}):[];te.length&&(xt.features=te,Le.call(qe,xt),delete xt.features)},Ne)}},Y.prototype.on=function(ne,pe,Le){if(Le===void 0)return D.prototype.on.call(this,ne,pe);var Ne=this._createDelegatedListener(ne,pe,Le);for(var qe in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ne]=this._delegatedListeners[ne]||[],this._delegatedListeners[ne].push(Ne),Ne.delegates)this.on(qe,Ne.delegates[qe]);return this},Y.prototype.once=function(ne,pe,Le){if(Le===void 0)return D.prototype.once.call(this,ne,pe);var Ne=this._createDelegatedListener(ne,pe,Le);for(var qe in Ne.delegates)this.once(qe,Ne.delegates[qe]);return this},Y.prototype.off=function(ne,pe,Le){var Ne=this;return Le===void 0?D.prototype.off.call(this,ne,pe):(this._delegatedListeners&&this._delegatedListeners[ne]&&function(qe){for(var et=qe[ne],vt=0;vt<et.length;vt++){var xt=et[vt];if(xt.layer===pe&&xt.listener===Le){for(var te in xt.delegates)Ne.off(te,xt.delegates[te]);return et.splice(vt,1),Ne}}}(this._delegatedListeners),this)},Y.prototype.queryRenderedFeatures=function(ne,pe){if(!this.style)return[];var Le;if(pe!==void 0||ne===void 0||ne instanceof l.Point||Array.isArray(ne)||(pe=ne,ne=void 0),pe=pe||{},(ne=ne||[[0,0],[this.transform.width,this.transform.height]])instanceof l.Point||typeof ne[0]=="number")Le=[l.Point.convert(ne)];else{var Ne=l.Point.convert(ne[0]),qe=l.Point.convert(ne[1]);Le=[Ne,new l.Point(qe.x,Ne.y),qe,new l.Point(Ne.x,qe.y),Ne]}return this.style.queryRenderedFeatures(Le,pe,this.transform)},Y.prototype.querySourceFeatures=function(ne,pe){return this.style.querySourceFeatures(ne,pe)},Y.prototype.setStyle=function(ne,pe){return(pe=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},pe)).diff!==!1&&pe.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ne?(this._diffStyle(ne,pe),this):(this._localIdeographFontFamily=pe.localIdeographFontFamily,this._updateStyle(ne,pe))},Y.prototype._getUIString=function(ne){var pe=this._locale[ne];if(pe==null)throw new Error("Missing UI string '"+ne+"'");return pe},Y.prototype._updateStyle=function(ne,pe){return this.style&&(this.style.setEventedParent(null),this.style._remove()),ne?(this.style=new ir(this,pe||{}),this.style.setEventedParent(this,{style:this.style}),typeof ne=="string"?this.style.loadURL(ne):this.style.loadJSON(ne),this):(delete this.style,this)},Y.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ir(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},Y.prototype._diffStyle=function(ne,pe){var Le=this;if(typeof ne=="string"){var Ne=this._requestManager.normalizeStyleURL(ne),qe=this._requestManager.transformRequest(Ne,l.ResourceType.Style);l.getJSON(qe,function(et,vt){et?Le.fire(new l.ErrorEvent(et)):vt&&Le._updateDiff(vt,pe)})}else typeof ne=="object"&&this._updateDiff(ne,pe)},Y.prototype._updateDiff=function(ne,pe){try{this.style.setState(ne)&&this._update(!0)}catch(Le){l.warnOnce("Unable to perform style diff: "+(Le.message||Le.error||Le)+".  Rebuilding the style from scratch."),this._updateStyle(ne,pe)}},Y.prototype.getStyle=function(){if(this.style)return this.style.serialize()},Y.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},Y.prototype.addSource=function(ne,pe){return this._lazyInitEmptyStyle(),this.style.addSource(ne,pe),this._update(!0)},Y.prototype.isSourceLoaded=function(ne){var pe=this.style&&this.style.sourceCaches[ne];if(pe!==void 0)return pe.loaded();this.fire(new l.ErrorEvent(new Error("There is no source with ID '"+ne+"'")))},Y.prototype.areTilesLoaded=function(){var ne=this.style&&this.style.sourceCaches;for(var pe in ne){var Le=ne[pe]._tiles;for(var Ne in Le){var qe=Le[Ne];if(qe.state!=="loaded"&&qe.state!=="errored")return!1}}return!0},Y.prototype.addSourceType=function(ne,pe,Le){return this._lazyInitEmptyStyle(),this.style.addSourceType(ne,pe,Le)},Y.prototype.removeSource=function(ne){return this.style.removeSource(ne),this._update(!0)},Y.prototype.getSource=function(ne){return this.style.getSource(ne)},Y.prototype.addImage=function(ne,pe,Le){Le===void 0&&(Le={});var Ne=Le.pixelRatio;Ne===void 0&&(Ne=1);var qe=Le.sdf;qe===void 0&&(qe=!1);var et=Le.stretchX,vt=Le.stretchY,xt=Le.content;if(this._lazyInitEmptyStyle(),pe instanceof ni||qa&&pe instanceof qa){var te=l.browser.getImageData(pe),ue=te.width,we=te.height,Pe=te.data;this.style.addImage(ne,{data:new l.RGBAImage({width:ue,height:we},Pe),pixelRatio:Ne,stretchX:et,stretchY:vt,content:xt,sdf:qe,version:0})}else{if(pe.width===void 0||pe.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var De=pe.width,Ue=pe.height,Ze=pe.data,Je=pe;this.style.addImage(ne,{data:new l.RGBAImage({width:De,height:Ue},new Uint8Array(Ze)),pixelRatio:Ne,stretchX:et,stretchY:vt,content:xt,sdf:qe,version:0,userImage:Je}),Je.onAdd&&Je.onAdd(this,ne)}},Y.prototype.updateImage=function(ne,pe){var Le=this.style.getImage(ne);if(!Le)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Ne=pe instanceof ni||qa&&pe instanceof qa?l.browser.getImageData(pe):pe,qe=Ne.width,et=Ne.height,vt=Ne.data;if(qe===void 0||et===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(qe!==Le.data.width||et!==Le.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var xt=!(pe instanceof ni||qa&&pe instanceof qa);Le.data.replace(vt,xt),this.style.updateImage(ne,Le)},Y.prototype.hasImage=function(ne){return ne?!!this.style.getImage(ne):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)},Y.prototype.removeImage=function(ne){this.style.removeImage(ne)},Y.prototype.loadImage=function(ne,pe){l.getImage(this._requestManager.transformRequest(ne,l.ResourceType.Image),pe)},Y.prototype.listImages=function(){return this.style.listImages()},Y.prototype.addLayer=function(ne,pe){return this._lazyInitEmptyStyle(),this.style.addLayer(ne,pe),this._update(!0)},Y.prototype.moveLayer=function(ne,pe){return this.style.moveLayer(ne,pe),this._update(!0)},Y.prototype.removeLayer=function(ne){return this.style.removeLayer(ne),this._update(!0)},Y.prototype.getLayer=function(ne){return this.style.getLayer(ne)},Y.prototype.setLayerZoomRange=function(ne,pe,Le){return this.style.setLayerZoomRange(ne,pe,Le),this._update(!0)},Y.prototype.setFilter=function(ne,pe,Le){return Le===void 0&&(Le={}),this.style.setFilter(ne,pe,Le),this._update(!0)},Y.prototype.getFilter=function(ne){return this.style.getFilter(ne)},Y.prototype.setPaintProperty=function(ne,pe,Le,Ne){return Ne===void 0&&(Ne={}),this.style.setPaintProperty(ne,pe,Le,Ne),this._update(!0)},Y.prototype.getPaintProperty=function(ne,pe){return this.style.getPaintProperty(ne,pe)},Y.prototype.setLayoutProperty=function(ne,pe,Le,Ne){return Ne===void 0&&(Ne={}),this.style.setLayoutProperty(ne,pe,Le,Ne),this._update(!0)},Y.prototype.getLayoutProperty=function(ne,pe){return this.style.getLayoutProperty(ne,pe)},Y.prototype.setLight=function(ne,pe){return pe===void 0&&(pe={}),this._lazyInitEmptyStyle(),this.style.setLight(ne,pe),this._update(!0)},Y.prototype.getLight=function(){return this.style.getLight()},Y.prototype.setFeatureState=function(ne,pe){return this.style.setFeatureState(ne,pe),this._update()},Y.prototype.removeFeatureState=function(ne,pe){return this.style.removeFeatureState(ne,pe),this._update()},Y.prototype.getFeatureState=function(ne){return this.style.getFeatureState(ne)},Y.prototype.getContainer=function(){return this._container},Y.prototype.getCanvasContainer=function(){return this._canvasContainer},Y.prototype.getCanvas=function(){return this._canvas},Y.prototype._containerDimensions=function(){var ne=0,pe=0;return this._container&&(ne=this._container.clientWidth||400,pe=this._container.clientHeight||300),[ne,pe]},Y.prototype._detectMissingCSS=function(){l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},Y.prototype._setupContainer=function(){var ne=this._container;ne.classList.add("mapboxgl-map"),(this._missingCSSCanary=x.create("div","mapboxgl-canary",ne)).style.visibility="hidden",this._detectMissingCSS();var pe=this._canvasContainer=x.create("div","mapboxgl-canvas-container",ne);this._interactive&&pe.classList.add("mapboxgl-interactive"),this._canvas=x.create("canvas","mapboxgl-canvas",pe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Le=this._containerDimensions();this._resizeCanvas(Le[0],Le[1]);var Ne=this._controlContainer=x.create("div","mapboxgl-control-container",ne),qe=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(et){qe[et]=x.create("div","mapboxgl-ctrl-"+et,Ne)})},Y.prototype._resizeCanvas=function(ne,pe){var Le=l.browser.devicePixelRatio||1;this._canvas.width=Le*ne,this._canvas.height=Le*pe,this._canvas.style.width=ne+"px",this._canvas.style.height=pe+"px"},Y.prototype._setupPainter=function(){var ne=l.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),pe=this._canvas.getContext("webgl",ne)||this._canvas.getContext("experimental-webgl",ne);pe?(this.painter=new ai(pe,this.transform),l.webpSupported.testSupport(pe)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))},Y.prototype._contextLost=function(ne){ne.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:ne}))},Y.prototype._contextRestored=function(ne){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:ne}))},Y.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},Y.prototype._update=function(ne){return this.style?(this._styleDirty=this._styleDirty||ne,this._sourcesDirty=!0,this.triggerRepaint(),this):this},Y.prototype._requestRenderFrame=function(ne){return this._update(),this._renderTaskQueue.add(ne)},Y.prototype._cancelRenderFrame=function(ne){this._renderTaskQueue.remove(ne)},Y.prototype._render=function(ne){var pe,Le=this,Ne=0,qe=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(pe=qe.createQueryEXT(),qe.beginQueryEXT(qe.TIME_ELAPSED_EXT,pe),Ne=l.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ne),!this._removed){var et=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var vt=this.transform.zoom,xt=l.browser.now();this.style.zoomHistory.update(vt,xt);var te=new l.EvaluationParameters(vt,{now:xt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ue=te.crossFadingFactor();ue===1&&ue===this._crossFadingFactor||(et=!0,this._crossFadingFactor=ue),this.style.update(te)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||et)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var we=l.browser.now()-Ne;qe.endQueryEXT(qe.TIME_ELAPSED_EXT,pe),setTimeout(function(){var De=qe.getQueryObjectEXT(pe,qe.QUERY_RESULT_EXT)/1e6;qe.deleteQueryEXT(pe),Le.fire(new l.Event("gpu-timing-frame",{cpuTime:we,gpuTime:De}))},50)}if(this.listens("gpu-timing-layer")){var Pe=this.painter.collectGpuTimers();setTimeout(function(){var De=Le.painter.queryGpuTimers(Pe);Le.fire(new l.Event("gpu-timing-layer",{layerTimes:De}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new l.Event("idle"))),this}},Y.prototype.remove=function(){this._hash&&this._hash.remove();for(var ne=0,pe=this._controls;ne<pe.length;ne+=1)pe[ne].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),l.window!==void 0&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));var Le=this.painter.context.gl.getExtension("WEBGL_lose_context");Le&&Le.loseContext(),po(this._canvasContainer),po(this._controlContainer),po(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new l.Event("remove"))},Y.prototype.triggerRepaint=function(){var ne=this;this.style&&!this._frame&&(this._frame=l.browser.frame(function(pe){ne._frame=null,ne._render(pe)}))},Y.prototype._onWindowOnline=function(){this._update()},Y.prototype._onWindowResize=function(ne){this._trackResize&&this.resize({originalEvent:ne})._update()},q.showTileBoundaries.get=function(){return!!this._showTileBoundaries},q.showTileBoundaries.set=function(ne){this._showTileBoundaries!==ne&&(this._showTileBoundaries=ne,this._update())},q.showPadding.get=function(){return!!this._showPadding},q.showPadding.set=function(ne){this._showPadding!==ne&&(this._showPadding=ne,this._update())},q.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},q.showCollisionBoxes.set=function(ne){this._showCollisionBoxes!==ne&&(this._showCollisionBoxes=ne,ne?this.style._generateCollisionBoxes():this._update())},q.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},q.showOverdrawInspector.set=function(ne){this._showOverdrawInspector!==ne&&(this._showOverdrawInspector=ne,this._update())},q.repaint.get=function(){return!!this._repaint},q.repaint.set=function(ne){this._repaint!==ne&&(this._repaint=ne,this.triggerRepaint())},q.vertices.get=function(){return!!this._vertices},q.vertices.set=function(ne){this._vertices=ne,this._update()},Y.prototype._setCacheLimits=function(ne,pe){l.setCacheLimits(ne,pe)},q.version.get=function(){return l.version},Object.defineProperties(Y.prototype,q),Y}(ks);function po(D){D.parentNode&&D.parentNode.removeChild(D)}var $i={showCompass:!0,showZoom:!0,visualizePitch:!1},Na=function(D){var Y=this;this.options=l.extend({},$i,D),this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(q){return q.preventDefault()}),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(q){return Y._map.zoomIn({},{originalEvent:q})}),x.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(q){return Y._map.zoomOut({},{originalEvent:q})}),x.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(q){Y.options.visualizePitch?Y._map.resetNorthPitch({},{originalEvent:q}):Y._map.resetNorth({},{originalEvent:q})}),this._compassIcon=x.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Na.prototype._updateZoomButtons=function(){var D=this._map.getZoom();this._zoomInButton.disabled=D===this._map.getMaxZoom(),this._zoomOutButton.disabled=D===this._map.getMinZoom()},Na.prototype._rotateCompassArrow=function(){var D=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=D},Na.prototype.onAdd=function(D){return this._map=D,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Mr(this._map,this._compass,this.options.visualizePitch)),this._container},Na.prototype.onRemove=function(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Na.prototype._createButton=function(D,Y){var q=x.create("button",D,this._container);return q.type="button",q.addEventListener("click",Y),q},Na.prototype._setButtonTitle=function(D,Y){var q=this._map._getUIString("NavigationControl."+Y);D.title=q,D.setAttribute("aria-label",q)};var Mr=function(D,Y,q){q===void 0&&(q=!1),this._clickTolerance=10,this.element=Y,this.mouseRotate=new Rs({clickTolerance:D.dragRotate._mouseRotate._clickTolerance}),this.map=D,q&&(this.mousePitch=new zs({clickTolerance:D.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),x.addEventListener(Y,"mousedown",this.mousedown),x.addEventListener(Y,"touchstart",this.touchstart,{passive:!1}),x.addEventListener(Y,"touchmove",this.touchmove),x.addEventListener(Y,"touchend",this.touchend),x.addEventListener(Y,"touchcancel",this.reset)};function Or(D,Y,q){if(D=new l.LngLat(D.lng,D.lat),Y){var ne=new l.LngLat(D.lng-360,D.lat),pe=new l.LngLat(D.lng+360,D.lat),Le=q.locationPoint(D).distSqr(Y);q.locationPoint(ne).distSqr(Y)<Le?D=ne:q.locationPoint(pe).distSqr(Y)<Le&&(D=pe)}for(;Math.abs(D.lng-q.center.lng)>180;){var Ne=q.locationPoint(D);if(Ne.x>=0&&Ne.y>=0&&Ne.x<=q.width&&Ne.y<=q.height)break;D.lng>q.center.lng?D.lng-=360:D.lng+=360}return D}Mr.prototype.down=function(D,Y){this.mouseRotate.mousedown(D,Y),this.mousePitch&&this.mousePitch.mousedown(D,Y),x.disableDrag()},Mr.prototype.move=function(D,Y){var q=this.map,ne=this.mouseRotate.mousemoveWindow(D,Y);if(ne&&ne.bearingDelta&&q.setBearing(q.getBearing()+ne.bearingDelta),this.mousePitch){var pe=this.mousePitch.mousemoveWindow(D,Y);pe&&pe.pitchDelta&&q.setPitch(q.getPitch()+pe.pitchDelta)}},Mr.prototype.off=function(){var D=this.element;x.removeEventListener(D,"mousedown",this.mousedown),x.removeEventListener(D,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(D,"touchmove",this.touchmove),x.removeEventListener(D,"touchend",this.touchend),x.removeEventListener(D,"touchcancel",this.reset),this.offTemp()},Mr.prototype.offTemp=function(){x.enableDrag(),x.removeEventListener(l.window,"mousemove",this.mousemove),x.removeEventListener(l.window,"mouseup",this.mouseup)},Mr.prototype.mousedown=function(D){this.down(l.extend({},D,{ctrlKey:!0,preventDefault:function(){return D.preventDefault()}}),x.mousePos(this.element,D)),x.addEventListener(l.window,"mousemove",this.mousemove),x.addEventListener(l.window,"mouseup",this.mouseup)},Mr.prototype.mousemove=function(D){this.move(D,x.mousePos(this.element,D))},Mr.prototype.mouseup=function(D){this.mouseRotate.mouseupWindow(D),this.mousePitch&&this.mousePitch.mouseupWindow(D),this.offTemp()},Mr.prototype.touchstart=function(D){D.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,D.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return D.preventDefault()}},this._startPos))},Mr.prototype.touchmove=function(D){D.targetTouches.length!==1?this.reset():(this._lastPos=x.touchPos(this.element,D.targetTouches)[0],this.move({preventDefault:function(){return D.preventDefault()}},this._lastPos))},Mr.prototype.touchend=function(D){D.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Mr.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ss={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function go(D,Y,q){var ne=D.classList;for(var pe in ss)ne.remove("mapboxgl-"+q+"-anchor-"+pe);ne.add("mapboxgl-"+q+"-anchor-"+Y)}var Ga,Qi=function(D){function Y(q,ne){var pe=this;if(D.call(this),(q instanceof l.window.HTMLElement||ne)&&(q=l.extend({element:q},ne)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=q&&q.anchor||"center",this._color=q&&q.color||"#3FB1CE",this._draggable=q&&q.draggable||!1,this._state="inactive",this._rotation=q&&q.rotation||0,this._rotationAlignment=q&&q.rotationAlignment||"auto",this._pitchAlignment=q&&q.pitchAlignment&&q.pitchAlignment!=="auto"?q.pitchAlignment:this._rotationAlignment,q&&q.element)this._element=q.element,this._offset=l.Point.convert(q&&q.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div"),this._element.setAttribute("aria-label","Map marker");var Le=x.createNS("http://www.w3.org/2000/svg","svg");Le.setAttributeNS(null,"display","block"),Le.setAttributeNS(null,"height","41px"),Le.setAttributeNS(null,"width","27px"),Le.setAttributeNS(null,"viewBox","0 0 27 41");var Ne=x.createNS("http://www.w3.org/2000/svg","g");Ne.setAttributeNS(null,"stroke","none"),Ne.setAttributeNS(null,"stroke-width","1"),Ne.setAttributeNS(null,"fill","none"),Ne.setAttributeNS(null,"fill-rule","evenodd");var qe=x.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"fill-rule","nonzero");var et=x.createNS("http://www.w3.org/2000/svg","g");et.setAttributeNS(null,"transform","translate(3.0, 29.0)"),et.setAttributeNS(null,"fill","#000000");for(var vt=0,xt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];vt<xt.length;vt+=1){var te=xt[vt],ue=x.createNS("http://www.w3.org/2000/svg","ellipse");ue.setAttributeNS(null,"opacity","0.04"),ue.setAttributeNS(null,"cx","10.5"),ue.setAttributeNS(null,"cy","5.80029008"),ue.setAttributeNS(null,"rx",te.rx),ue.setAttributeNS(null,"ry",te.ry),et.appendChild(ue)}var we=x.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"fill",this._color);var Pe=x.createNS("http://www.w3.org/2000/svg","path");Pe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),we.appendChild(Pe);var De=x.createNS("http://www.w3.org/2000/svg","g");De.setAttributeNS(null,"opacity","0.25"),De.setAttributeNS(null,"fill","#000000");var Ue=x.createNS("http://www.w3.org/2000/svg","path");Ue.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),De.appendChild(Ue);var Ze=x.createNS("http://www.w3.org/2000/svg","g");Ze.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ze.setAttributeNS(null,"fill","#FFFFFF");var Je=x.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"transform","translate(8.0, 8.0)");var it=x.createNS("http://www.w3.org/2000/svg","circle");it.setAttributeNS(null,"fill","#000000"),it.setAttributeNS(null,"opacity","0.25"),it.setAttributeNS(null,"cx","5.5"),it.setAttributeNS(null,"cy","5.5"),it.setAttributeNS(null,"r","5.4999962");var ut=x.createNS("http://www.w3.org/2000/svg","circle");ut.setAttributeNS(null,"fill","#FFFFFF"),ut.setAttributeNS(null,"cx","5.5"),ut.setAttributeNS(null,"cy","5.5"),ut.setAttributeNS(null,"r","5.4999962"),Je.appendChild(it),Je.appendChild(ut),qe.appendChild(et),qe.appendChild(we),qe.appendChild(De),qe.appendChild(Ze),qe.appendChild(Je),Le.appendChild(qe),this._element.appendChild(Le),this._offset=l.Point.convert(q&&q.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(St){St.preventDefault()}),this._element.addEventListener("mousedown",function(St){St.preventDefault()}),this._element.addEventListener("focus",function(){var St=pe._map.getContainer();St.scrollTop=0,St.scrollLeft=0}),go(this._element,this._anchor,"marker"),this._popup=null}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.addTo=function(q){return this.remove(),this._map=q,q.getCanvasContainer().appendChild(this._element),q.on("move",this._update),q.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Y.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(q){return this._lngLat=l.LngLat.convert(q),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Y.prototype.getElement=function(){return this._element},Y.prototype.setPopup=function(q){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),q){if(!("offset"in q.options)){var ne=13.5,pe=Math.sqrt(Math.pow(ne,2)/2);q.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[pe,-1*(24.6+pe)],"bottom-right":[-pe,-1*(24.6+pe)],left:[ne,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=q,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Y.prototype._onKeyPress=function(q){var ne=q.code,pe=q.charCode||q.keyCode;ne!=="Space"&&ne!=="Enter"&&pe!==32&&pe!==13||this.togglePopup()},Y.prototype._onMapClick=function(q){var ne=q.originalEvent.target,pe=this._element;this._popup&&(ne===pe||pe.contains(ne))&&this.togglePopup()},Y.prototype.getPopup=function(){return this._popup},Y.prototype.togglePopup=function(){var q=this._popup;return q?(q.isOpen()?q.remove():q.addTo(this._map),this):this},Y.prototype._update=function(q){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Or(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var ne="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?ne="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(ne="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var pe="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?pe="rotateX(0deg)":this._pitchAlignment==="map"&&(pe="rotateX("+this._map.getPitch()+"deg)"),q&&q.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,ss[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+pe+" "+ne)}},Y.prototype.getOffset=function(){return this._offset},Y.prototype.setOffset=function(q){return this._offset=l.Point.convert(q),this._update(),this},Y.prototype._onMove=function(q){this._pos=q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag"))},Y.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"},Y.prototype._addDragHandler=function(q){this._element.contains(q.originalEvent.target)&&(q.preventDefault(),this._positionDelta=q.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Y.prototype.setDraggable=function(q){return this._draggable=!!q,this._map&&(q?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Y.prototype.isDraggable=function(){return this._draggable},Y.prototype.setRotation=function(q){return this._rotation=q||0,this._update(),this},Y.prototype.getRotation=function(){return this._rotation},Y.prototype.setRotationAlignment=function(q){return this._rotationAlignment=q||"auto",this._update(),this},Y.prototype.getRotationAlignment=function(){return this._rotationAlignment},Y.prototype.setPitchAlignment=function(q){return this._pitchAlignment=q&&q!=="auto"?q:this._rotationAlignment,this._update(),this},Y.prototype.getPitchAlignment=function(){return this._pitchAlignment},Y}(l.Evented),Bs={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ha=0,ls=!1,vo=function(D){function Y(q){D.call(this),this.options=l.extend({},Bs,q),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.onAdd=function(q){return this._map=q,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),ne=this._setupUI,Ga!==void 0?ne(Ga):l.window.navigator.permissions!==void 0?l.window.navigator.permissions.query({name:"geolocation"}).then(function(pe){Ga=pe.state!=="denied",ne(Ga)}):(Ga=!!l.window.navigator.geolocation,ne(Ga)),this._container;var ne},Y.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ha=0,ls=!1},Y.prototype._isOutOfMapMaxBounds=function(q){var ne=this._map.getMaxBounds(),pe=q.coords;return ne&&(pe.longitude<ne.getWest()||pe.longitude>ne.getEast()||pe.latitude<ne.getSouth()||pe.latitude>ne.getNorth())},Y.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},Y.prototype._onSuccess=function(q){if(this._map){if(this._isOutOfMapMaxBounds(q))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",q)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=q,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(q),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(q),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",q)),this._finish()}},Y.prototype._updateCamera=function(q){var ne=new l.LngLat(q.coords.longitude,q.coords.latitude),pe=q.coords.accuracy,Le=this._map.getBearing(),Ne=l.extend({bearing:Le},this.options.fitBoundsOptions);this._map.fitBounds(ne.toBounds(pe),Ne,{geolocateSource:!0})},Y.prototype._updateMarker=function(q){if(q){var ne=new l.LngLat(q.coords.longitude,q.coords.latitude);this._accuracyCircleMarker.setLngLat(ne).addTo(this._map),this._userLocationDotMarker.setLngLat(ne).addTo(this._map),this._accuracy=q.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},Y.prototype._updateCircleRadius=function(){var q=this._map._container.clientHeight/2,ne=this._map.unproject([0,q]),pe=this._map.unproject([1,q]),Le=ne.distanceTo(pe),Ne=Math.ceil(2*this._accuracy/Le);this._circleElement.style.width=Ne+"px",this._circleElement.style.height=Ne+"px"},Y.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},Y.prototype._onError=function(q){if(this._map){if(this.options.trackUserLocation)if(q.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var ne=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ne,this._geolocateButton.setAttribute("aria-label",ne),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(q.code===3&&ls)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",q)),this._finish()}},Y.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},Y.prototype._setupUI=function(q){var ne=this;if(this._container.addEventListener("contextmenu",function(Ne){return Ne.preventDefault()}),this._geolocateButton=x.create("button","mapboxgl-ctrl-geolocate",this._container),x.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",q===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var pe=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=pe,this._geolocateButton.setAttribute("aria-label",pe)}else{var Le=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Le,this._geolocateButton.setAttribute("aria-label",Le)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Qi(this._dotElement),this._circleElement=x.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Qi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Ne){var qe=Ne.originalEvent&&Ne.originalEvent.type==="resize";Ne.geolocateSource||ne._watchState!=="ACTIVE_LOCK"||qe||(ne._watchState="BACKGROUND",ne._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ne._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ne.fire(new l.Event("trackuserlocationend")))})},Y.prototype.trigger=function(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ha--,ls=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var q;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ha>1?(q={maximumAge:6e5,timeout:0},ls=!0):(q=this.options.positionOptions,ls=!1),this._geolocationWatchID=l.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,q)}}else l.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},Y.prototype._clearWatch=function(){l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Y}(l.Evented),oi={maxWidth:100,unit:"metric"},fi=function(D){this.options=l.extend({},oi,D),l.bindAll(["_onMove","setUnit"],this)};function Ns(D,Y,q){var ne=q&&q.maxWidth||100,pe=D._container.clientHeight/2,Le=D.unproject([0,pe]),Ne=D.unproject([ne,pe]),qe=Le.distanceTo(Ne);if(q&&q.unit==="imperial"){var et=3.2808*qe;et>5280?Xe(Y,ne,et/5280,D._getUIString("ScaleControl.Miles")):Xe(Y,ne,et,D._getUIString("ScaleControl.Feet"))}else q&&q.unit==="nautical"?Xe(Y,ne,qe/1852,D._getUIString("ScaleControl.NauticalMiles")):qe>=1e3?Xe(Y,ne,qe/1e3,D._getUIString("ScaleControl.Kilometers")):Xe(Y,ne,qe,D._getUIString("ScaleControl.Meters"))}function Xe(D,Y,q,ne){var pe,Le,Ne,qe=(pe=q,(Le=Math.pow(10,(""+Math.floor(pe)).length-1))*((Ne=pe/Le)>=10?10:Ne>=5?5:Ne>=3?3:Ne>=2?2:Ne>=1?1:function(vt){var xt=Math.pow(10,Math.ceil(-Math.log(vt)/Math.LN10));return Math.round(vt*xt)/xt}(Ne))),et=qe/q;D.style.width=Y*et+"px",D.innerHTML=qe+"&nbsp;"+ne}fi.prototype.getDefaultPosition=function(){return"bottom-left"},fi.prototype._onMove=function(){Ns(this._map,this._container,this.options)},fi.prototype.onAdd=function(D){return this._map=D,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",D.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},fi.prototype.onRemove=function(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},fi.prototype.setUnit=function(D){this.options.unit=D,Ns(this._map,this._container,this.options)};var $e=function(D){this._fullscreen=!1,D&&D.container&&(D.container instanceof l.window.HTMLElement?this._container=D.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in l.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in l.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in l.window.document&&(this._fullscreenchange="MSFullscreenChange")};$e.prototype.onAdd=function(D){return this._map=D,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},$e.prototype.onRemove=function(){x.remove(this._controlContainer),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},$e.prototype._checkFullscreenSupport=function(){return!!(l.window.document.fullscreenEnabled||l.window.document.mozFullScreenEnabled||l.window.document.msFullscreenEnabled||l.window.document.webkitFullscreenEnabled)},$e.prototype._setupUI=function(){var D=this._fullscreenButton=x.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);x.create("span","mapboxgl-ctrl-icon",D).setAttribute("aria-hidden",!0),D.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},$e.prototype._updateTitle=function(){var D=this._getTitle();this._fullscreenButton.setAttribute("aria-label",D),this._fullscreenButton.title=D},$e.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},$e.prototype._isFullscreen=function(){return this._fullscreen},$e.prototype._changeIcon=function(){(l.window.document.fullscreenElement||l.window.document.mozFullScreenElement||l.window.document.webkitFullscreenElement||l.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},$e.prototype._onClickFullscreen=function(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.mozCancelFullScreen?l.window.document.mozCancelFullScreen():l.window.document.msExitFullscreen?l.window.document.msExitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var at={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},ft=function(D){function Y(q){D.call(this),this.options=l.extend(Object.create(at),q),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return D&&(Y.__proto__=D),Y.prototype=Object.create(D&&D.prototype),Y.prototype.constructor=Y,Y.prototype.addTo=function(q){return this._map&&this.remove(),this._map=q,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this},Y.prototype.isOpen=function(){return!!this._map},Y.prototype.remove=function(){return this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(q){return this._lngLat=l.LngLat.convert(q),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},Y.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},Y.prototype.getElement=function(){return this._container},Y.prototype.setText=function(q){return this.setDOMContent(l.window.document.createTextNode(q))},Y.prototype.setHTML=function(q){var ne,pe=l.window.document.createDocumentFragment(),Le=l.window.document.createElement("body");for(Le.innerHTML=q;ne=Le.firstChild;)pe.appendChild(ne);return this.setDOMContent(pe)},Y.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},Y.prototype.setMaxWidth=function(q){return this.options.maxWidth=q,this._update(),this},Y.prototype.setDOMContent=function(q){return this._createContent(),this._content.appendChild(q),this._update(),this},Y.prototype.addClassName=function(q){this._container&&this._container.classList.add(q)},Y.prototype.removeClassName=function(q){this._container&&this._container.classList.remove(q)},Y.prototype.toggleClassName=function(q){if(this._container)return this._container.classList.toggle(q)},Y.prototype._createContent=function(){this._content&&x.remove(this._content),this._content=x.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=x.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},Y.prototype._onMouseUp=function(q){this._update(q.point)},Y.prototype._onMouseMove=function(q){this._update(q.point)},Y.prototype._onDrag=function(q){this._update(q.point)},Y.prototype._update=function(q){var ne=this,pe=this._lngLat||this._trackPointer;if(this._map&&pe&&this._content&&(this._container||(this._container=x.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=x.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(ue){return ne._container.classList.add(ue)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Or(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||q)){var Le=this._pos=this._trackPointer&&q?q:this._map.project(this._lngLat),Ne=this.options.anchor,qe=bt(this.options.offset);if(!Ne){var et,vt=this._container.offsetWidth,xt=this._container.offsetHeight;et=Le.y+qe.bottom.y<xt?["top"]:Le.y>this._map.transform.height-xt?["bottom"]:[],Le.x<vt/2?et.push("left"):Le.x>this._map.transform.width-vt/2&&et.push("right"),Ne=et.length===0?"bottom":et.join("-")}var te=Le.add(qe[Ne]).round();x.setTransform(this._container,ss[Ne]+" translate("+te.x+"px,"+te.y+"px)"),go(this._container,Ne,"popup")}},Y.prototype._onClose=function(){this.remove()},Y}(l.Evented);function bt(D){if(D){if(typeof D=="number"){var Y=Math.round(Math.sqrt(.5*Math.pow(D,2)));return{center:new l.Point(0,0),top:new l.Point(0,D),"top-left":new l.Point(Y,Y),"top-right":new l.Point(-Y,Y),bottom:new l.Point(0,-D),"bottom-left":new l.Point(Y,-Y),"bottom-right":new l.Point(-Y,-Y),left:new l.Point(D,0),right:new l.Point(-D,0)}}if(D instanceof l.Point||Array.isArray(D)){var q=l.Point.convert(D);return{center:q,top:q,"top-left":q,"top-right":q,bottom:q,"bottom-left":q,"bottom-right":q,left:q,right:q}}return{center:l.Point.convert(D.center||[0,0]),top:l.Point.convert(D.top||[0,0]),"top-left":l.Point.convert(D["top-left"]||[0,0]),"top-right":l.Point.convert(D["top-right"]||[0,0]),bottom:l.Point.convert(D.bottom||[0,0]),"bottom-left":l.Point.convert(D["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(D["bottom-right"]||[0,0]),left:l.Point.convert(D.left||[0,0]),right:l.Point.convert(D.right||[0,0])}}return bt(new l.Point(0,0))}var yt={version:l.version,supported:T,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:Eo,NavigationControl:Na,GeolocateControl:vo,AttributionControl:Ma,ScaleControl:fi,FullscreenControl:$e,Popup:ft,Marker:Qi,Style:ir,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,config:l.config,prewarm:function(){At().acquire(st)},clearPrewarmedResources:function(){var D=Tt;D&&(D.isPreloaded()&&D.numActive()===1?(D.release(st),Tt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(D){l.config.ACCESS_TOKEN=D},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(D){l.config.API_URL=D},get workerCount(){return ct.workerCount},set workerCount(D){ct.workerCount=D},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(D){l.config.MAX_PARALLEL_IMAGE_REQUESTS=D},clearStorage:function(D){l.clearTileCache(D)},workerUrl:""};return yt}),k}()},27084:function($){$.exports=Math.log2||function(R){return Math.log(R)*Math.LOG2E}},16825:function($,R,e){$.exports=function(A,l){l||(l=A,A=window);var T=0,x=0,d=0,s={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function o(g){var y=!1;return"altKey"in g&&(y=y||g.altKey!==s.alt,s.alt=!!g.altKey),"shiftKey"in g&&(y=y||g.shiftKey!==s.shift,s.shift=!!g.shiftKey),"ctrlKey"in g&&(y=y||g.ctrlKey!==s.control,s.control=!!g.ctrlKey),"metaKey"in g&&(y=y||g.metaKey!==s.meta,s.meta=!!g.metaKey),y}function r(g,y){var p=k.x(y),m=k.y(y);"buttons"in y&&(g=0|y.buttons),(g!==T||p!==x||m!==d||o(y))&&(T=0|g,x=p||0,d=m||0,l&&l(T,x,d,s))}function n(g){r(0,g)}function a(){(T||x||d||s.shift||s.alt||s.meta||s.control)&&(x=d=0,T=0,s.shift=s.alt=s.control=s.meta=!1,l&&l(0,0,0,s))}function i(g){o(g)&&l&&l(T,x,d,s)}function c(g){k.buttons(g)===0?r(0,g):r(T,g)}function h(g){r(T|k.buttons(g),g)}function f(g){r(T&~k.buttons(g),g)}function b(){t||(t=!0,A.addEventListener("mousemove",c),A.addEventListener("mousedown",h),A.addEventListener("mouseup",f),A.addEventListener("mouseleave",n),A.addEventListener("mouseenter",n),A.addEventListener("mouseout",n),A.addEventListener("mouseover",n),A.addEventListener("blur",a),A.addEventListener("keyup",i),A.addEventListener("keydown",i),A.addEventListener("keypress",i),A!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",i),window.addEventListener("keydown",i),window.addEventListener("keypress",i)))}b();var v={element:A};return Object.defineProperties(v,{enabled:{get:function(){return t},set:function(g){g?b():t&&(t=!1,A.removeEventListener("mousemove",c),A.removeEventListener("mousedown",h),A.removeEventListener("mouseup",f),A.removeEventListener("mouseleave",n),A.removeEventListener("mouseenter",n),A.removeEventListener("mouseout",n),A.removeEventListener("mouseover",n),A.removeEventListener("blur",a),A.removeEventListener("keyup",i),A.removeEventListener("keydown",i),A.removeEventListener("keypress",i),A!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",i),window.removeEventListener("keydown",i),window.removeEventListener("keypress",i)))},enumerable:!0},buttons:{get:function(){return T},enumerable:!0},x:{get:function(){return x},enumerable:!0},y:{get:function(){return d},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),v};var k=e(74311)},48956:function($){var R={left:0,top:0};$.exports=function(e,k,A){k=k||e.currentTarget||e.srcElement,Array.isArray(A)||(A=[0,0]);var l,T=e.clientX||0,x=e.clientY||0,d=(l=k)===window||l===document||l===document.body?R:l.getBoundingClientRect();return A[0]=T-d.left,A[1]=x-d.top,A}},74311:function($,R){function e(k){return k.target||k.srcElement||window}R.buttons=function(k){if(typeof k=="object"){if("buttons"in k)return k.buttons;if("which"in k){if((A=k.which)===2)return 4;if(A===3)return 2;if(A>0)return 1<<A-1}else if("button"in k){var A;if((A=k.button)===1)return 4;if(A===2)return 2;if(A>=0)return 1<<A}}return 0},R.element=e,R.x=function(k){if(typeof k=="object"){if("offsetX"in k)return k.offsetX;var A=e(k).getBoundingClientRect();return k.clientX-A.left}return 0},R.y=function(k){if(typeof k=="object"){if("offsetY"in k)return k.offsetY;var A=e(k).getBoundingClientRect();return k.clientY-A.top}return 0}},1195:function($,R,e){var k=e(75686);$.exports=function(A,l,T){typeof A=="function"&&(T=!!l,l=A,A=window);var x=k("ex",A),d=function(s){T&&s.preventDefault();var t=s.deltaX||0,o=s.deltaY||0,r=s.deltaZ||0,n=1;switch(s.deltaMode){case 1:n=x;break;case 2:n=window.innerHeight}if(o*=n,r*=n,(t*=n)||o||r)return l(t,o,r,s)};return A.addEventListener("wheel",d),d}},7417:function($,R,e){var k;(function(A,l,T){l[A]=l[A]||function(){var x,d,s,t=Object.prototype.toString,o=typeof setImmediate<"u"?function(p){return setImmediate(p)}:setTimeout;try{Object.defineProperty({},"x",{}),x=function(p,m,w,u){return Object.defineProperty(p,m,{value:w,writable:!0,configurable:u!==!1})}}catch{x=function(m,w,u){return m[w]=u,m}}function r(p,m){s.add(p,m),d||(d=o(s.drain))}function n(p){var m,w=typeof p;return p==null||w!="object"&&w!="function"||(m=p.then),typeof m=="function"&&m}function a(){for(var p=0;p<this.chain.length;p++)i(this,this.state===1?this.chain[p].success:this.chain[p].failure,this.chain[p]);this.chain.length=0}function i(p,m,w){var u,S;try{m===!1?w.reject(p.msg):(u=m===!0?p.msg:m.call(void 0,p.msg))===w.promise?w.reject(TypeError("Promise-chain cycle")):(S=n(u))?S.call(u,w.resolve,w.reject):w.resolve(u)}catch(_){w.reject(_)}}function c(p){var m,w=this;if(!w.triggered){w.triggered=!0,w.def&&(w=w.def);try{(m=n(p))?r(function(){var u=new b(w);try{m.call(p,function(){c.apply(u,arguments)},function(){h.apply(u,arguments)})}catch(S){h.call(u,S)}}):(w.msg=p,w.state=1,w.chain.length>0&&r(a,w))}catch(u){h.call(new b(w),u)}}}function h(p){var m=this;m.triggered||(m.triggered=!0,m.def&&(m=m.def),m.msg=p,m.state=2,m.chain.length>0&&r(a,m))}function f(p,m,w,u){for(var S=0;S<m.length;S++)(function(_){p.resolve(m[_]).then(function(E){w(_,E)},u)})(S)}function b(p){this.def=p,this.triggered=!1}function v(p){this.promise=p,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(p){if(typeof p!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var m=new v(this);this.then=function(w,u){var S={success:typeof w!="function"||w,failure:typeof u=="function"&&u};return S.promise=new this.constructor(function(_,E){if(typeof _!="function"||typeof E!="function")throw TypeError("Not a function");S.resolve=_,S.reject=E}),m.chain.push(S),m.state!==0&&r(a,m),S.promise},this.catch=function(w){return this.then(void 0,w)};try{p.call(void 0,function(w){c.call(m,w)},function(w){h.call(m,w)})}catch(w){h.call(m,w)}}s=function(){var p,m,w;function u(S,_){this.fn=S,this.self=_,this.next=void 0}return{add:function(S,_){w=new u(S,_),m?m.next=w:p=w,m=w,w=void 0},drain:function(){var S=p;for(p=m=d=void 0;S;)S.fn.call(S.self),S=S.next}}}();var y=x({},"constructor",g,!1);return g.prototype=y,x(y,"__NPO__",0,!1),x(g,"resolve",function(p){return p&&typeof p=="object"&&p.__NPO__===1?p:new this(function(m,w){if(typeof m!="function"||typeof w!="function")throw TypeError("Not a function");m(p)})}),x(g,"reject",function(p){return new this(function(m,w){if(typeof m!="function"||typeof w!="function")throw TypeError("Not a function");w(p)})}),x(g,"all",function(p){var m=this;return t.call(p)!="[object Array]"?m.reject(TypeError("Not an array")):p.length===0?m.resolve([]):new m(function(w,u){if(typeof w!="function"||typeof u!="function")throw TypeError("Not a function");var S=p.length,_=Array(S),E=0;f(m,p,function(L,C){_[L]=C,++E===S&&w(_)},u)})}),x(g,"race",function(p){var m=this;return t.call(p)!="[object Array]"?m.reject(TypeError("Not an array")):new m(function(w,u){if(typeof w!="function"||typeof u!="function")throw TypeError("Not a function");f(m,p,function(S,_){w(_)},u)})}),g}(),$.exports?$.exports=l[A]:(k=function(){return l[A]}.call(R,e,R,$))===void 0||($.exports=k)})("Promise",e.g!==void 0?e.g:this)},18625:function($){var R=Math.PI,e=x(120);function k(d,s,t,o){return["C",d,s,t,o,t,o]}function A(d,s,t,o,r,n){return["C",d/3+.6666666666666666*t,s/3+.6666666666666666*o,r/3+.6666666666666666*t,n/3+.6666666666666666*o,r,n]}function l(d,s,t,o,r,n,a,i,c,h){if(h)S=h[0],_=h[1],w=h[2],u=h[3];else{var f=T(d,s,-r);d=f.x,s=f.y;var b=(d-(i=(f=T(i,c,-r)).x))/2,v=(s-(c=f.y))/2,g=b*b/(t*t)+v*v/(o*o);g>1&&(t*=g=Math.sqrt(g),o*=g);var y=t*t,p=o*o,m=(n==a?-1:1)*Math.sqrt(Math.abs((y*p-y*v*v-p*b*b)/(y*v*v+p*b*b)));m==1/0&&(m=1);var w=m*t*v/o+(d+i)/2,u=m*-o*b/t+(s+c)/2,S=Math.asin(((s-u)/o).toFixed(9)),_=Math.asin(((c-u)/o).toFixed(9));(S=d<w?R-S:S)<0&&(S=2*R+S),(_=i<w?R-_:_)<0&&(_=2*R+_),a&&S>_&&(S-=2*R),!a&&_>S&&(_-=2*R)}if(Math.abs(_-S)>e){var E=_,L=i,C=c;_=S+e*(a&&_>S?1:-1);var P=l(i=w+t*Math.cos(_),c=u+o*Math.sin(_),t,o,r,0,a,L,C,[_,E,w,u])}var I=Math.tan((_-S)/4),U=4/3*t*I,z=4/3*o*I,H=[2*d-(d+U*Math.sin(S)),2*s-(s-z*Math.cos(S)),i+U*Math.sin(_),c-z*Math.cos(_),i,c];if(h)return H;P&&(H=H.concat(P));for(var F=0;F<H.length;){var N=T(H[F],H[F+1],r);H[F++]=N.x,H[F++]=N.y}return H}function T(d,s,t){return{x:d*Math.cos(t)-s*Math.sin(t),y:d*Math.sin(t)+s*Math.cos(t)}}function x(d){return d*(R/180)}$.exports=function(d){for(var s,t=[],o=0,r=0,n=0,a=0,i=null,c=null,h=0,f=0,b=0,v=d.length;b<v;b++){var g=d[b],y=g[0];switch(y){case"M":n=g[1],a=g[2];break;case"A":(g=l(h,f,g[1],g[2],x(g[3]),g[4],g[5],g[6],g[7])).unshift("C"),g.length>7&&(t.push(g.splice(0,7)),g.unshift("C"));break;case"S":var p=h,m=f;s!="C"&&s!="S"||(p+=p-o,m+=m-r),g=["C",p,m,g[1],g[2],g[3],g[4]];break;case"T":s=="Q"||s=="T"?(i=2*h-i,c=2*f-c):(i=h,c=f),g=A(h,f,i,c,g[1],g[2]);break;case"Q":i=g[1],c=g[2],g=A(h,f,g[1],g[2],g[3],g[4]);break;case"L":g=k(h,f,g[1],g[2]);break;case"H":g=k(h,f,g[1],f);break;case"V":g=k(h,f,h,g[1]);break;case"Z":g=k(h,f,n,a)}s=y,h=g[g.length-2],f=g[g.length-1],g.length>4?(o=g[g.length-4],r=g[g.length-3]):(o=h,r=f),t.push(g)}return t}},56131:function($){var R=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;function A(l){if(l==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(l)}$.exports=function(){try{if(!Object.assign)return!1;var l=new String("abc");if(l[5]="de",Object.getOwnPropertyNames(l)[0]==="5")return!1;for(var T={},x=0;x<10;x++)T["_"+String.fromCharCode(x)]=x;if(Object.getOwnPropertyNames(T).map(function(s){return T[s]}).join("")!=="0123456789")return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(s){d[s]=s}),Object.keys(Object.assign({},d)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(l,T){for(var x,d,s=A(l),t=1;t<arguments.length;t++){for(var o in x=Object(arguments[t]))e.call(x,o)&&(s[o]=x[o]);if(R){d=R(x);for(var r=0;r<d.length;r++)k.call(x,d[r])&&(s[d[r]]=x[d[r]])}}return s}},65848:function($){var R=function(e){return e!=e};$.exports=function(e,k){return e===0&&k===0?1/e==1/k:e===k||!(!R(e)||!R(k))}},64003:function($,R,e){var k=e(17045),A=e(68222),l=e(65848),T=e(27015),x=e(55572),d=A(T(),Object);k(d,{getPolyfill:T,implementation:l,shim:x}),$.exports=d},27015:function($,R,e){var k=e(65848);$.exports=function(){return typeof Object.is=="function"?Object.is:k}},55572:function($,R,e){var k=e(27015),A=e(17045);$.exports=function(){var l=k();return A(Object,{is:l},{is:function(){return Object.is!==l}}),l}},99019:function($,R,e){var k;if(!Object.keys){var A=Object.prototype.hasOwnProperty,l=Object.prototype.toString,T=e(64178),x=Object.prototype.propertyIsEnumerable,d=!x.call({toString:null},"toString"),s=x.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=function(a){var i=a.constructor;return i&&i.prototype===a},r={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},n=function(){if(typeof window>"u")return!1;for(var a in window)try{if(!r["$"+a]&&A.call(window,a)&&window[a]!==null&&typeof window[a]=="object")try{o(window[a])}catch{return!0}}catch{return!0}return!1}();k=function(a){var i=a!==null&&typeof a=="object",c=l.call(a)==="[object Function]",h=T(a),f=i&&l.call(a)==="[object String]",b=[];if(!i&&!c&&!h)throw new TypeError("Object.keys called on a non-object");var v=s&&c;if(f&&a.length>0&&!A.call(a,0))for(var g=0;g<a.length;++g)b.push(String(g));if(h&&a.length>0)for(var y=0;y<a.length;++y)b.push(String(y));else for(var p in a)v&&p==="prototype"||!A.call(a,p)||b.push(String(p));if(d)for(var m=function(u){if(typeof window>"u"||!n)return o(u);try{return o(u)}catch{return!1}}(a),w=0;w<t.length;++w)m&&t[w]==="constructor"||!A.call(a,t[w])||b.push(t[w]);return b}}$.exports=k},8709:function($,R,e){var k=Array.prototype.slice,A=e(64178),l=Object.keys,T=l?function(d){return l(d)}:e(99019),x=Object.keys;T.shim=function(){if(Object.keys){var d=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);d||(Object.keys=function(s){return A(s)?x(k.call(s)):x(s)})}else Object.keys=T;return Object.keys||T},$.exports=T},64178:function($){var R=Object.prototype.toString;$.exports=function(e){var k=R.call(e),A=k==="[object Arguments]";return A||(A=k!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&R.call(e.callee)==="[object Function]"),A}},88641:function($){function R(A,l){if(typeof A!="string")return[A];var T=[A];typeof l=="string"||Array.isArray(l)?l={brackets:l}:l||(l={});var x=l.brackets?Array.isArray(l.brackets)?l.brackets:[l.brackets]:["{}","[]","()"],d=l.escape||"___",s=!!l.flat;x.forEach(function(o){var r=new RegExp(["\\",o[0],"[^\\",o[0],"\\",o[1],"]*\\",o[1]].join("")),n=[];function a(i,c,h){var f=T.push(i.slice(o[0].length,-o[1].length))-1;return n.push(f),d+f+d}T.forEach(function(i,c){for(var h,f=0;i!=h;)if(h=i,i=i.replace(r,a),f++>1e4)throw Error("References have circular dependency. Please, check them.");T[c]=i}),n=n.reverse(),T=T.map(function(i){return n.forEach(function(c){i=i.replace(new RegExp("(\\"+d+c+"\\"+d+")","g"),o[0]+"$1"+o[1])}),i})});var t=new RegExp("\\"+d+"([0-9]+)\\"+d);return s?T:function o(r,n,a){for(var i,c=[],h=0;i=t.exec(r);){if(h++>1e4)throw Error("Circular references in parenthesis");c.push(r.slice(0,i.index)),c.push(o(n[i[1]],n)),r=r.slice(i.index+i[0].length)}return c.push(r),c}(T[0],T)}function e(A,l){if(l&&l.flat){var T,x=l&&l.escape||"___",d=A[0];if(!d)return"";for(var s=new RegExp("\\"+x+"([0-9]+)\\"+x),t=0;d!=T;){if(t++>1e4)throw Error("Circular references in "+A);T=d,d=d.replace(s,o)}return d}return A.reduce(function r(n,a){return Array.isArray(a)&&(a=a.reduce(r,"")),n+a},"");function o(r,n){if(A[n]==null)throw Error("Reference "+n+"is undefined");return A[n]}}function k(A,l){return Array.isArray(A)?e(A,l):R(A,l)}k.parse=R,k.stringify=e,$.exports=k},18863:function($,R,e){var k=e(71299);$.exports=function(A){var l;return arguments.length>1&&(A=arguments),typeof A=="string"?A=A.split(/\s/).map(parseFloat):typeof A=="number"&&(A=[A]),A.length&&typeof A[0]=="number"?l=A.length===1?{width:A[0],height:A[0],x:0,y:0}:A.length===2?{width:A[0],height:A[1],x:0,y:0}:{x:A[0],y:A[1],width:A[2]-A[0]||0,height:A[3]-A[1]||0}:A&&(l={x:(A=k(A,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:A.top||0},A.width==null?A.right?l.width=A.right-l.x:l.width=0:l.width=A.width,A.height==null?A.bottom?l.height=A.bottom-l.y:l.height=0:l.height=A.height),l}},95616:function($){$.exports=function(A){var l=[];return A.replace(e,function(T,x,d){var s=x.toLowerCase();for(d=function(t){var o=t.match(k);return o?o.map(Number):[]}(d),s=="m"&&d.length>2&&(l.push([x].concat(d.splice(0,2))),s="l",x=x=="m"?"l":"L");;){if(d.length==R[s])return d.unshift(x),l.push(d);if(d.length<R[s])throw new Error("malformed path data");l.push([x].concat(d.splice(0,R[s])))}}),l};var R={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,k=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},25677:function($){$.exports=function(R,e){e||(e=[0,""]),R=String(R);var k=parseFloat(R,10);return e[0]=k,e[1]=R.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},9748:function($,R,e){var k=e(90386);(function(){var A,l,T,x,d,s;typeof performance<"u"&&performance!==null&&performance.now?$.exports=function(){return performance.now()}:k!=null&&k.hrtime?($.exports=function(){return(A()-d)/1e6},l=k.hrtime,x=(A=function(){var t;return 1e9*(t=l())[0]+t[1]})(),s=1e9*k.uptime(),d=x-s):Date.now?($.exports=function(){return Date.now()-T},T=Date.now()):($.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)},71299:function($){$.exports=function(k,A,l){var T,x,d={};if(typeof A=="string"&&(A=e(A)),Array.isArray(A)){var s={};for(x=0;x<A.length;x++)s[A[x]]=!0;A=s}for(T in A)A[T]=e(A[T]);var t={};for(T in A){var o=A[T];if(Array.isArray(o))for(x=0;x<o.length;x++){var r=o[x];if(l&&(t[r]=!0),r in k){if(d[T]=k[r],l)for(var n=x;n<o.length;n++)t[o[n]]=!0;break}}else T in k&&(A[T]&&(d[T]=k[T]),l&&(t[T]=!0))}if(l)for(T in k)t[T]||(d[T]=k[T]);return d};var R={};function e(k){return R[k]?R[k]:(typeof k=="string"&&(k=R[k]=k.split(/\s*,\s*|\s+/)),k)}},38258:function($){$.exports=function(R,e,k,A){var l=R[0],T=R[1],x=!1;k===void 0&&(k=0),A===void 0&&(A=e.length);for(var d=A-k,s=0,t=d-1;s<d;t=s++){var o=e[s+k][0],r=e[s+k][1],n=e[t+k][0],a=e[t+k][1];r>T!=a>T&&l<(n-o)*(T-r)/(a-r)+o&&(x=!x)}return x}},52142:function($,R,e){var k,A=e(69444),l=e(29023),T=e(87263),x=e(11328),d=e(55968),s=e(10670),t=!1,o=l();function r(n,a,i){var c=k.segments(n),h=k.segments(a),f=i(k.combine(c,h));return k.polygon(f)}k={buildLog:function(n){return n===!0?t=A():n===!1&&(t=!1),t!==!1&&t.list},epsilon:function(n){return o.epsilon(n)},segments:function(n){var a=T(!0,o,t);return n.regions.forEach(a.addRegion),{segments:a.calculate(n.inverted),inverted:n.inverted}},combine:function(n,a){return{combined:T(!1,o,t).calculate(n.segments,n.inverted,a.segments,a.inverted),inverted1:n.inverted,inverted2:a.inverted}},selectUnion:function(n){return{segments:d.union(n.combined,t),inverted:n.inverted1||n.inverted2}},selectIntersect:function(n){return{segments:d.intersect(n.combined,t),inverted:n.inverted1&&n.inverted2}},selectDifference:function(n){return{segments:d.difference(n.combined,t),inverted:n.inverted1&&!n.inverted2}},selectDifferenceRev:function(n){return{segments:d.differenceRev(n.combined,t),inverted:!n.inverted1&&n.inverted2}},selectXor:function(n){return{segments:d.xor(n.combined,t),inverted:n.inverted1!==n.inverted2}},polygon:function(n){return{regions:x(n.segments,o,t),inverted:n.inverted}},polygonFromGeoJSON:function(n){return s.toPolygon(k,n)},polygonToGeoJSON:function(n){return s.fromPolygon(k,o,n)},union:function(n,a){return r(n,a,k.selectUnion)},intersect:function(n,a){return r(n,a,k.selectIntersect)},difference:function(n,a){return r(n,a,k.selectDifference)},differenceRev:function(n,a){return r(n,a,k.selectDifferenceRev)},xor:function(n,a){return r(n,a,k.selectXor)}},typeof window=="object"&&(window.PolyBool=k),$.exports=k},69444:function($){$.exports=function(){var R,e=0,k=!1;function A(l,T){return R.list.push({type:l,data:T?JSON.parse(JSON.stringify(T)):void 0}),R}return R={list:[],segmentId:function(){return e++},checkIntersection:function(l,T){return A("check",{seg1:l,seg2:T})},segmentChop:function(l,T){return A("div_seg",{seg:l,pt:T}),A("chop",{seg:l,pt:T})},statusRemove:function(l){return A("pop_seg",{seg:l})},segmentUpdate:function(l){return A("seg_update",{seg:l})},segmentNew:function(l,T){return A("new_seg",{seg:l,primary:T})},segmentRemove:function(l){return A("rem_seg",{seg:l})},tempStatus:function(l,T,x){return A("temp_status",{seg:l,above:T,below:x})},rewind:function(l){return A("rewind",{seg:l})},status:function(l,T,x){return A("status",{seg:l,above:T,below:x})},vert:function(l){return l===k?R:(k=l,A("vert",{x:l}))},log:function(l){return typeof l!="string"&&(l=JSON.stringify(l,!1,"  ")),A("log",{txt:l})},reset:function(){return A("reset")},selected:function(l){return A("selected",{segs:l})},chainStart:function(l){return A("chain_start",{seg:l})},chainRemoveHead:function(l,T){return A("chain_rem_head",{index:l,pt:T})},chainRemoveTail:function(l,T){return A("chain_rem_tail",{index:l,pt:T})},chainNew:function(l,T){return A("chain_new",{pt1:l,pt2:T})},chainMatch:function(l){return A("chain_match",{index:l})},chainClose:function(l){return A("chain_close",{index:l})},chainAddHead:function(l,T){return A("chain_add_head",{index:l,pt:T})},chainAddTail:function(l,T){return A("chain_add_tail",{index:l,pt:T})},chainConnect:function(l,T){return A("chain_con",{index1:l,index2:T})},chainReverse:function(l){return A("chain_rev",{index:l})},chainJoin:function(l,T){return A("chain_join",{index1:l,index2:T})},done:function(){return A("done")}}}},29023:function($){$.exports=function(R){typeof R!="number"&&(R=1e-10);var e={epsilon:function(k){return typeof k=="number"&&(R=k),R},pointAboveOrOnLine:function(k,A,l){var T=A[0],x=A[1],d=l[0],s=l[1],t=k[0];return(d-T)*(k[1]-x)-(s-x)*(t-T)>=-R},pointBetween:function(k,A,l){var T=k[1]-A[1],x=l[0]-A[0],d=k[0]-A[0],s=l[1]-A[1],t=d*x+T*s;return!(t<R||t-(x*x+s*s)>-R)},pointsSameX:function(k,A){return Math.abs(k[0]-A[0])<R},pointsSameY:function(k,A){return Math.abs(k[1]-A[1])<R},pointsSame:function(k,A){return e.pointsSameX(k,A)&&e.pointsSameY(k,A)},pointsCompare:function(k,A){return e.pointsSameX(k,A)?e.pointsSameY(k,A)?0:k[1]<A[1]?-1:1:k[0]<A[0]?-1:1},pointsCollinear:function(k,A,l){var T=k[0]-A[0],x=k[1]-A[1],d=A[0]-l[0],s=A[1]-l[1];return Math.abs(T*s-d*x)<R},linesIntersect:function(k,A,l,T){var x=A[0]-k[0],d=A[1]-k[1],s=T[0]-l[0],t=T[1]-l[1],o=x*t-d*s;if(Math.abs(o)<R)return!1;var r=k[0]-l[0],n=k[1]-l[1],a=(s*n-t*r)/o,i=(x*n-d*r)/o,c={alongA:0,alongB:0,pt:[k[0]+a*x,k[1]+a*d]};return c.alongA=a<=-R?-2:a<R?-1:a-1<=-R?0:a-1<R?1:2,c.alongB=i<=-R?-2:i<R?-1:i-1<=-R?0:i-1<R?1:2,c},pointInsideRegion:function(k,A){for(var l=k[0],T=k[1],x=A[A.length-1][0],d=A[A.length-1][1],s=!1,t=0;t<A.length;t++){var o=A[t][0],r=A[t][1];r-T>R!=d-T>R&&(x-o)*(T-r)/(d-r)+o-l>R&&(s=!s),x=o,d=r}return s}};return e}},10670:function($){var R={toPolygon:function(e,k){function A(x){if(x.length<=0)return e.segments({inverted:!1,regions:[]});function d(o){var r=o.slice(0,o.length-1);return e.segments({inverted:!1,regions:[r]})}for(var s=d(x[0]),t=1;t<x.length;t++)s=e.selectDifference(e.combine(s,d(x[t])));return s}if(k.type==="Polygon")return e.polygon(A(k.coordinates));if(k.type==="MultiPolygon"){for(var l=e.segments({inverted:!1,regions:[]}),T=0;T<k.coordinates.length;T++)l=e.selectUnion(e.combine(l,A(k.coordinates[T])));return e.polygon(l)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,k,A){function l(i,c){return k.pointInsideRegion([.5*(i[0][0]+i[1][0]),.5*(i[0][1]+i[1][1])],c)}function T(i){return{region:i,children:[]}}A=e.polygon(e.segments(A));var x=T(null);function d(i,c){for(var h=0;h<i.children.length;h++)if(l(c,(b=i.children[h]).region))return void d(b,c);var f=T(c);for(h=0;h<i.children.length;h++){var b;l((b=i.children[h]).region,c)&&(f.children.push(b),i.children.splice(h,1),h--)}i.children.push(f)}for(var s=0;s<A.regions.length;s++){var t=A.regions[s];t.length<3||d(x,t)}function o(i,c){for(var h=0,f=i[i.length-1][0],b=i[i.length-1][1],v=[],g=0;g<i.length;g++){var y=i[g][0],p=i[g][1];v.push([y,p]),h+=p*f-y*b,f=y,b=p}return h<0!==c&&v.reverse(),v.push([v[0][0],v[0][1]]),v}var r=[];function n(i){var c=[o(i.region,!1)];r.push(c);for(var h=0;h<i.children.length;h++)c.push(a(i.children[h]))}function a(i){for(var c=0;c<i.children.length;c++)n(i.children[c]);return o(i.region,!0)}for(s=0;s<x.children.length;s++)n(x.children[s]);return r.length<=0?{type:"Polygon",coordinates:[]}:r.length==1?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}};$.exports=R},87263:function($,R,e){var k=e(26859);$.exports=function(A,l,T){function x(n,a,i){return{id:T?T.segmentId():-1,start:n,end:a,myFill:{above:i.myFill.above,below:i.myFill.below},otherFill:null}}var d=k.create();function s(n,a){d.insertBefore(n,function(i){return c=n.isStart,h=n.pt,f=a,b=i.isStart,v=i.pt,g=i.other.pt,((y=l.pointsCompare(h,v))!==0?y:l.pointsSame(f,g)?0:c!==b?c?1:-1:l.pointAboveOrOnLine(f,b?v:g,b?g:v)?1:-1)<0;var c,h,f,b,v,g,y})}function t(n,a){var i=function(c,h){var f=k.node({isStart:!0,pt:c.start,seg:c,primary:h,other:null,status:null});return s(f,c.end),f}(n,a);return function(c,h,f){var b=k.node({isStart:!1,pt:h.end,seg:h,primary:f,other:c,status:null});c.other=b,s(b,c.pt)}(i,n,a),i}function o(n,a){var i=x(a,n.seg.end,n.seg);return function(c,h){T&&T.segmentChop(c.seg,h),c.other.remove(),c.seg.end=h,c.other.pt=h,s(c.other,c.pt)}(n,a),t(i,n.primary)}function r(n,a){var i=k.create();function c(E){return i.findTransition(function(L){var C,P,I,U,z,H;return C=E,P=L.ev,I=C.seg.start,U=C.seg.end,z=P.seg.start,H=P.seg.end,(l.pointsCollinear(I,z,H)?l.pointsCollinear(U,z,H)||l.pointAboveOrOnLine(U,z,H)?1:-1:l.pointAboveOrOnLine(I,z,H)?1:-1)>0})}function h(E,L){var C=E.seg,P=L.seg,I=C.start,U=C.end,z=P.start,H=P.end;T&&T.checkIntersection(C,P);var F=l.linesIntersect(I,U,z,H);if(F===!1){if(!l.pointsCollinear(I,U,z)||l.pointsSame(I,H)||l.pointsSame(U,z))return!1;var N=l.pointsSame(I,z),B=l.pointsSame(U,H);if(N&&B)return L;var j=!N&&l.pointBetween(I,z,H),K=!B&&l.pointBetween(U,z,H);if(N)return K?o(L,U):o(E,H),L;j&&(B||(K?o(L,U):o(E,H)),o(L,I))}else F.alongA===0&&(F.alongB===-1?o(E,z):F.alongB===0?o(E,F.pt):F.alongB===1&&o(E,H)),F.alongB===0&&(F.alongA===-1?o(L,I):F.alongA===0?o(L,F.pt):F.alongA===1&&o(L,U));return!1}for(var f=[];!d.isEmpty();){var b=d.getHead();if(T&&T.vert(b.pt[0]),b.isStart){let E=function(){if(g){var L=h(b,g);if(L)return L}return!!y&&h(b,y)};var _=E;T&&T.segmentNew(b.seg,b.primary);var v=c(b),g=v.before?v.before.ev:null,y=v.after?v.after.ev:null;T&&T.tempStatus(b.seg,!!g&&g.seg,!!y&&y.seg);var p,m,w=E();if(w&&(A?(m=b.seg.myFill.below===null||b.seg.myFill.above!==b.seg.myFill.below)&&(w.seg.myFill.above=!w.seg.myFill.above):w.seg.otherFill=b.seg.myFill,T&&T.segmentUpdate(w.seg),b.other.remove(),b.remove()),d.getHead()!==b){T&&T.rewind(b.seg);continue}A?(m=b.seg.myFill.below===null||b.seg.myFill.above!==b.seg.myFill.below,b.seg.myFill.below=y?y.seg.myFill.above:n,b.seg.myFill.above=m?!b.seg.myFill.below:b.seg.myFill.below):b.seg.otherFill===null&&(p=y?b.primary===y.primary?y.seg.otherFill.above:y.seg.myFill.above:b.primary?a:n,b.seg.otherFill={above:p,below:p}),T&&T.status(b.seg,!!g&&g.seg,!!y&&y.seg),b.other.status=v.insert(k.node({ev:b}))}else{var u=b.status;if(u===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(i.exists(u.prev)&&i.exists(u.next)&&h(u.prev.ev,u.next.ev),T&&T.statusRemove(u.ev.seg),u.remove(),!b.primary){var S=b.seg.myFill;b.seg.myFill=b.seg.otherFill,b.seg.otherFill=S}f.push(b.seg)}d.getHead().remove()}return T&&T.done(),f}return A?{addRegion:function(n){for(var a,i,c,h=n[n.length-1],f=0;f<n.length;f++){a=h,h=n[f];var b=l.pointsCompare(a,h);b!==0&&t((i=b<0?a:h,c=b<0?h:a,{id:T?T.segmentId():-1,start:i,end:c,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(n){return r(n,!1)}}:{calculate:function(n,a,i,c){return n.forEach(function(h){t(x(h.start,h.end,h),!0)}),i.forEach(function(h){t(x(h.start,h.end,h),!1)}),r(a,c)}}}},26859:function($){$.exports={create:function(){var R={root:{root:!0,next:null},exists:function(e){return e!==null&&e!==R.root},isEmpty:function(){return R.root.next===null},getHead:function(){return R.root.next},insertBefore:function(e,k){for(var A=R.root,l=R.root.next;l!==null;){if(k(l))return e.prev=l.prev,e.next=l,l.prev.next=e,void(l.prev=e);A=l,l=l.next}A.next=e,e.prev=A,e.next=null},findTransition:function(e){for(var k=R.root,A=R.root.next;A!==null&&!e(A);)k=A,A=A.next;return{before:k===R.root?null:k,after:A,insert:function(l){return l.prev=k,l.next=A,k.next=l,A!==null&&(A.prev=l),l}}}};return R},node:function(R){return R.prev=null,R.next=null,R.remove=function(){R.prev.next=R.next,R.next&&(R.next.prev=R.prev),R.prev=null,R.next=null},R}}},11328:function($){$.exports=function(R,e,k){var A=[],l=[];return R.forEach(function(T){var x=T.start,d=T.end;if(e.pointsSame(x,d))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{k&&k.chainStart(T);for(var s={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},o=s,r=0;r<A.length;r++){var n=(f=A[r])[0],a=(f[1],f[f.length-1]);if(f[f.length-2],e.pointsSame(n,x)){if(u(r,!0,!0))break}else if(e.pointsSame(n,d)){if(u(r,!0,!1))break}else if(e.pointsSame(a,x)){if(u(r,!1,!0))break}else if(e.pointsSame(a,d)&&u(r,!1,!1))break}if(o===s)return A.push([x,d]),void(k&&k.chainNew(x,d));if(o===t){k&&k.chainMatch(s.index);var i=s.index,c=s.matches_pt1?d:x,h=s.matches_head,f=A[i],b=h?f[0]:f[f.length-1],v=h?f[1]:f[f.length-2],g=h?f[f.length-1]:f[0],y=h?f[f.length-2]:f[1];return e.pointsCollinear(v,b,c)&&(h?(k&&k.chainRemoveHead(s.index,c),f.shift()):(k&&k.chainRemoveTail(s.index,c),f.pop()),b=v),e.pointsSame(g,c)?(A.splice(i,1),e.pointsCollinear(y,g,b)&&(h?(k&&k.chainRemoveTail(s.index,b),f.pop()):(k&&k.chainRemoveHead(s.index,b),f.shift())),k&&k.chainClose(s.index),void l.push(f)):void(h?(k&&k.chainAddHead(s.index,c),f.unshift(c)):(k&&k.chainAddTail(s.index,c),f.push(c)))}var p=s.index,m=t.index;k&&k.chainConnect(p,m);var w=A[p].length<A[m].length;s.matches_head?t.matches_head?w?(S(p),_(p,m)):(S(m),_(m,p)):_(m,p):t.matches_head?_(p,m):w?(S(p),_(m,p)):(S(m),_(p,m))}function u(E,L,C){return o.index=E,o.matches_head=L,o.matches_pt1=C,o===s?(o=t,!1):(o=null,!0)}function S(E){k&&k.chainReverse(E),A[E].reverse()}function _(E,L){var C=A[E],P=A[L],I=C[C.length-1],U=C[C.length-2],z=P[0],H=P[1];e.pointsCollinear(U,I,z)&&(k&&k.chainRemoveTail(E,I),C.pop(),I=U),e.pointsCollinear(I,z,H)&&(k&&k.chainRemoveHead(L,z),P.shift()),k&&k.chainJoin(E,L),A[E]=C.concat(P),A.splice(L,1)}}),l}},55968:function($){function R(k,A,l){var T=[];return k.forEach(function(x){var d=(x.myFill.above?8:0)+(x.myFill.below?4:0)+(x.otherFill&&x.otherFill.above?2:0)+(x.otherFill&&x.otherFill.below?1:0);A[d]!==0&&T.push({id:l?l.segmentId():-1,start:x.start,end:x.end,myFill:{above:A[d]===1,below:A[d]===2},otherFill:null})}),l&&l.selected(T),T}var e={union:function(k,A){return R(k,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],A)},intersect:function(k,A){return R(k,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],A)},difference:function(k,A){return R(k,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],A)},differenceRev:function(k,A){return R(k,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],A)},xor:function(k,A){return R(k,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],A)}};$.exports=e},14847:function($,R,e){var k=e(21630).Transform,A=e(90715);function l(){k.call(this,{readableObjectMode:!0})}function T(x,d,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=x,d&&(this.code=d),s&&(this.statusCode=s)}l.prototype=Object.create(k.prototype),l.prototype.constructor=l,A(l.prototype),R.OF=function(x,d,s){for(var t=d,o=0;o<s.length;)if(x[t++]!==s[o++])return!1;return!0},R.eG=function(x,d){var s=[],t=0;if(d&&d==="hex")for(;t<x.length;)s.push(parseInt(x.slice(t,t+2),16)),t+=2;else for(;t<x.length;t++)s.push(255&x.charCodeAt(t));return s},R.mP=function(x,d){return x[d]|x[d+1]<<8},R.n8=function(x,d){return x[d+1]|x[d]<<8},R.nm=function(x,d){return x[d]|x[d+1]<<8|x[d+2]<<16|16777216*x[d+3]},R.Ag=function(x,d){return x[d+3]|x[d+2]<<8|x[d+1]<<16|16777216*x[d]},T.prototype=Object.create(Error.prototype),T.prototype.constructor=T},71371:function($){function R(A,l){var T=new Error(A);return T.code=l,T}function e(A){try{return decodeURIComponent(escape(A))}catch{return A}}function k(A,l,T){this.input=A.subarray(l,T),this.start=l;var x=String.fromCharCode.apply(null,this.input.subarray(0,4));if(x!=="II*\0"&&x!=="MM\0*")throw R("invalid TIFF signature","EBADDATA");this.big_endian=x[0]==="M"}k.prototype.each=function(A){this.aborted=!1;var l=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:l}];this.ifds_to_read.length>0&&!this.aborted;){var T=this.ifds_to_read.shift();T.offset&&this.scan_ifd(T.id,T.offset,A)}},k.prototype.read_uint16=function(A){var l=this.input;if(A+2>l.length)throw R("unexpected EOF","EBADDATA");return this.big_endian?256*l[A]+l[A+1]:l[A]+256*l[A+1]},k.prototype.read_uint32=function(A){var l=this.input;if(A+4>l.length)throw R("unexpected EOF","EBADDATA");return this.big_endian?16777216*l[A]+65536*l[A+1]+256*l[A+2]+l[A+3]:l[A]+256*l[A+1]+65536*l[A+2]+16777216*l[A+3]},k.prototype.is_subifd_link=function(A,l){return A===0&&l===34665||A===0&&l===34853||A===34665&&l===40965},k.prototype.exif_format_length=function(A){switch(A){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},k.prototype.exif_format_read=function(A,l){var T;switch(A){case 1:case 2:return this.input[l];case 6:return(T=this.input[l])|33554430*(128&T);case 3:return this.read_uint16(l);case 8:return(T=this.read_uint16(l))|131070*(32768&T);case 4:return this.read_uint32(l);case 9:return 0|this.read_uint32(l);default:return null}},k.prototype.scan_ifd=function(A,l,T){var x=this.read_uint16(l);l+=2;for(var d=0;d<x;d++){var s=this.read_uint16(l),t=this.read_uint16(l+2),o=this.read_uint32(l+4),r=this.exif_format_length(t),n=o*r,a=n<=4?l+8:this.read_uint32(l+8),i=!1;if(a+n>this.input.length)throw R("unexpected EOF","EBADDATA");for(var c=[],h=a,f=0;f<o;f++,h+=r){var b=this.exif_format_read(t,h);if(b===null){c=null;break}c.push(b)}if(Array.isArray(c)&&t===2&&(c=e(String.fromCharCode.apply(null,c)))&&c[c.length-1]==="\0"&&(c=c.slice(0,-1)),this.is_subifd_link(A,s)&&Array.isArray(c)&&Number.isInteger(c[0])&&c[0]>0&&(this.ifds_to_read.push({id:s,offset:c[0]}),i=!0),T({is_big_endian:this.big_endian,ifd:A,tag:s,format:t,count:o,entry_offset:l+this.start,data_length:n,data_offset:a+this.start,value:c,is_subifd_link:i})===!1)return void(this.aborted=!0);l+=12}A===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(l)})},$.exports.ExifParser=k,$.exports.get_orientation=function(A){var l=0;try{return new k(A,0,A.length).each(function(T){if(T.ifd===0&&T.tag===274&&Array.isArray(T.value))return l=T.value[0],!1}),l}catch{return-1}}},76767:function($,R,e){var k=e(14847).n8,A=e(14847).Ag;function l(o,r){if(o.length<4+r)return null;var n=A(o,r);return o.length<n+r||n<8?null:{boxtype:String.fromCharCode.apply(null,o.slice(r+4,r+8)),data:o.slice(r+8,r+n),end:r+n}}function T(o,r){for(var n=0;;){var a=l(o,n);if(!a)break;switch(a.boxtype){case"ispe":r.sizes.push({width:A(a.data,4),height:A(a.data,8)});break;case"irot":r.transforms.push({type:"irot",value:3&a.data[0]});break;case"imir":r.transforms.push({type:"imir",value:1&a.data[0]})}n=a.end}}function x(o,r,n){for(var a=0,i=0;i<n;i++)a=256*a+(o[r+i]||0);return a}function d(o,r){for(var n=o[4]>>4&15,a=15&o[4],i=o[5]>>4&15,c=k(o,6),h=8,f=0;f<c;f++){var b=k(o,h),v=k(o,h+=2),g=x(o,h+=2,i),y=k(o,h+=i);if(h+=2,v===0&&y===1){var p=x(o,h,n),m=x(o,h+n,a);r.item_loc[b]={length:m,offset:p+g}}h+=y*(n+a)}}function s(o,r){for(var n=k(o,4),a=6,i=0;i<n;i++){var c=l(o,a);if(!c)break;if(c.boxtype==="infe"){for(var h=k(c.data,4),f="",b=8;b<c.data.length&&c.data[b];b++)f+=String.fromCharCode(c.data[b]);r.item_inf[f]=h}a=c.end}}function t(o,r){for(var n=0;;){var a=l(o,n);if(!a)break;a.boxtype==="ipco"&&T(a.data,r),n=a.end}}$.exports.unbox=l,$.exports.readSizeFromMeta=function(o){var r={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(b,v){for(var g=4;;){var y=l(b,g);if(!y)break;y.boxtype==="iprp"&&t(y.data,v),y.boxtype==="iloc"&&d(y.data,v),y.boxtype==="iinf"&&s(y.data,v),g=y.end}}(o,r),r.sizes.length){var n,a,i,c=(a=(n=r.sizes).reduce(function(b,v){return b.width>v.width||b.width===v.width&&b.height>v.height?b:v}),i=n.reduce(function(b,v){return b.height>v.height||b.height===v.height&&b.width>v.width?b:v}),a.width>i.height||a.width===i.height&&a.height>i.width?a:i),h=1;r.transforms.forEach(function(b){var v={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},g={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(b.type==="imir"&&(h=b.value===0?g[h]:v[h=v[h=g[h]]]),b.type==="irot")for(var y=0;y<b.value;y++)h=v[h]});var f=null;return r.item_inf.Exif&&(f=r.item_loc[r.item_inf.Exif]),{width:c.width,height:c.height,orientation:r.transforms.length?h:null,variants:r.sizes,exif_location:f}}},$.exports.getMimeType=function(o){var r=String.fromCharCode.apply(null,o.slice(0,4)),n={};n[r]=!0;for(var a=8;a<o.length;a+=4)n[String.fromCharCode.apply(null,o.slice(a,a+4))]=!0;if(n.mif1||n.msf1||n.miaf)return r==="avif"||r==="avis"||r==="avio"?{type:"avif",mime:"image/avif"}:r==="heic"||r==="heix"?{type:"heic",mime:"image/heic"}:r==="hevc"||r==="hevx"?{type:"heic",mime:"image/heic-sequence"}:n.avif||n.avis?{type:"avif",mime:"image/avif"}:n.heic||n.heix||n.hevc||n.hevx||n.heis?n.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24461:function($,R,e){var k=e(14847).eG,A=e(14847).OF,l=e(14847).Ag,T=e(76767),x=e(71371),d=k("ftyp");$.exports=function(s){if(A(s,4,d)){var t=T.unbox(s,0);if(t){var o=T.getMimeType(t.data);if(o){for(var r,n=t.end;;){var a=T.unbox(s,n);if(!a)break;if(n=a.end,a.boxtype==="mdat")return;if(a.boxtype==="meta"){r=a.data;break}}if(r){var i=T.readSizeFromMeta(r);if(i){var c={width:i.width,height:i.height,type:o.type,mime:o.mime,wUnits:"px",hUnits:"px"};if(i.variants.length>1&&(c.variants=i.variants),i.orientation&&(c.orientation=i.orientation),i.exif_location&&i.exif_location.offset+i.exif_location.length<=s.length){var h=l(s,i.exif_location.offset),f=s.slice(i.exif_location.offset+h+4,i.exif_location.offset+i.exif_location.length),b=x.get_orientation(f);b>0&&(c.orientation=b)}return c}}}}}}},2504:function($,R,e){var k=e(14847).eG,A=e(14847).OF,l=e(14847).mP,T=k("BM");$.exports=function(x){if(!(x.length<26)&&A(x,0,T))return{width:l(x,18),height:l(x,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function($,R,e){var k=e(14847).eG,A=e(14847).OF,l=e(14847).mP,T=k("GIF87a"),x=k("GIF89a");$.exports=function(d){if(!(d.length<10)&&(A(d,0,T)||A(d,0,x)))return{width:l(d,6),height:l(d,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function($,R,e){var k=e(14847).mP;$.exports=function(A){var l=k(A,0),T=k(A,2),x=k(A,4);if(l===0&&T===1&&x){for(var d=[],s={width:0,height:0},t=0;t<x;t++){var o=A[6+16*t]||256,r=A[6+16*t+1]||256,n={width:o,height:r};d.push(n),(o>s.width||r>s.height)&&(s=n)}return{width:s.width,height:s.height,variants:d,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},54261:function($,R,e){var k=e(14847).n8,A=e(14847).eG,l=e(14847).OF,T=e(71371),x=A("Exif\0\0");$.exports=function(d){if(!(d.length<2)&&d[0]===255&&d[1]===216&&d[2]===255)for(var s=2;;){for(;;){if(d.length-s<2)return;if(d[s++]===255)break}for(var t,o,r=d[s++];r===255;)r=d[s++];if(208<=r&&r<=217||r===1)t=0;else{if(!(192<=r&&r<=254)||d.length-s<2)return;t=k(d,s)-2,s+=2}if(r===217||r===218)return;if(r===225&&t>=10&&l(d,s,x)&&(o=T.get_orientation(d.slice(s+6,s+t))),t>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(d.length-s<t)return;var n={width:k(d,s+3),height:k(d,s+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return o>0&&(n.orientation=o),n}s+=t}}},6303:function($,R,e){var k=e(14847).eG,A=e(14847).OF,l=e(14847).Ag,T=k(`PNG\r

`),x=k("IHDR");$.exports=function(d){if(!(d.length<24)&&A(d,0,T)&&A(d,12,x))return{width:l(d,16),height:l(d,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function($,R,e){var k=e(14847).eG,A=e(14847).OF,l=e(14847).Ag,T=k("8BPS\0");$.exports=function(x){if(!(x.length<22)&&A(x,0,T))return{width:l(x,18),height:l(x,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function($){function R(s){return typeof s=="number"&&isFinite(s)&&s>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,k=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,A=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,l=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,T=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,x=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function d(s){return x.test(s)?s.match(x)[0]:"px"}$.exports=function(s){if(function(g){var y,p=0,m=g.length;for(g[0]===239&&g[1]===187&&g[2]===191&&(p=3);p<m&&((y=g[p])===32||y===9||y===13||y===10);)p++;return p!==m&&g[p]===60}(s)){for(var t="",o=0;o<s.length;o++)t+=String.fromCharCode(s[o]);var r=(t.match(e)||[""])[0];if(k.test(r)){var n=function(g){var y=g.match(A),p=g.match(l),m=g.match(T);return{width:y&&(y[1]||y[2]),height:p&&(p[1]||p[2]),viewbox:m&&(m[1]||m[2])}}(r),a=parseFloat(n.width),i=parseFloat(n.height);if(n.width&&n.height)return!R(a)||!R(i)?void 0:{width:a,height:i,type:"svg",mime:"image/svg+xml",wUnits:d(n.width),hUnits:d(n.height)};var c=(n.viewbox||"").split(" "),h={width:c[2],height:c[3]},f=parseFloat(h.width),b=parseFloat(h.height);if(R(f)&&R(b)&&d(h.width)===d(h.height)){var v=f/b;return n.width?R(a)?{width:a,height:a/v,type:"svg",mime:"image/svg+xml",wUnits:d(n.width),hUnits:d(n.width)}:void 0:n.height?R(i)?{width:i*v,height:i,type:"svg",mime:"image/svg+xml",wUnits:d(n.height),hUnits:d(n.height)}:void 0:{width:f,height:b,type:"svg",mime:"image/svg+xml",wUnits:d(h.width),hUnits:d(h.height)}}}}}},66278:function($,R,e){var k=e(14847).eG,A=e(14847).OF,l=e(14847).mP,T=e(14847).n8,x=e(14847).nm,d=e(14847).Ag,s=k("II*\0"),t=k("MM\0*");function o(a,i,c){return c?T(a,i):l(a,i)}function r(a,i,c){return c?d(a,i):x(a,i)}function n(a,i,c){var h=o(a,i+2,c);return r(a,i+4,c)!==1||h!==3&&h!==4?null:h===3?o(a,i+8,c):r(a,i+8,c)}$.exports=function(a){if(!(a.length<8)&&(A(a,0,s)||A(a,0,t))){var i=a[0]===77,c=r(a,4,i)-8;if(!(c<0)){var h=c+8;if(!(a.length-h<2)){var f=12*o(a,h+0,i);if(!(f<=0||(h+=2,a.length-h<f))){var b,v,g,y;for(b=0;b<f;b+=12)(y=o(a,h+b,i))===256?v=n(a,h+b,i):y===257&&(g=n(a,h+b,i));return v&&g?{width:v,height:g,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},90784:function($,R,e){var k=e(14847).eG,A=e(14847).OF,l=e(14847).mP,T=e(14847).nm,x=e(71371),d=k("RIFF"),s=k("WEBP");function t(n,a){if(n[a+3]===157&&n[a+4]===1&&n[a+5]===42)return{width:16383&l(n,a+6),height:16383&l(n,a+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function o(n,a){if(n[a]===47){var i=T(n,a+1);return{width:1+(16383&i),height:1+(i>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function r(n,a){return{width:1+(n[a+6]<<16|n[a+5]<<8|n[a+4]),height:1+(n[a+9]<<a|n[a+8]<<8|n[a+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}$.exports=function(n){if(!(n.length<16)&&(A(n,0,d)||A(n,8,s))){var a=12,i=null,c=0,h=T(n,4)+8;if(!(h>n.length)){for(;a+8<h;)if(n[a]!==0){var f=String.fromCharCode.apply(null,n.slice(a,a+4)),b=T(n,a+4);f==="VP8 "&&b>=10?i=i||t(n,a+8):f==="VP8L"&&b>=9?i=i||o(n,a+8):f==="VP8X"&&b>=10?i=i||r(n,a+8):f==="EXIF"&&(c=x.get_orientation(n.slice(a+8,a+8+b)),a=1/0),a+=8+b}else a++;if(i)return c>0&&(i.orientation=c),i}}}},91497:function($,R,e){$.exports={avif:e(24461),bmp:e(2504),gif:e(47342),ico:e(31355),jpeg:e(54261),png:e(6303),psd:e(38689),svg:e(6881),tiff:e(66278),webp:e(90784)}},33575:function($,R,e){var k=e(91497);$.exports=function(A){return function(l){for(var T=Object.keys(k),x=0;x<T.length;x++){var d=k[T[x]](l);if(d)return d}return null}(A)},$.exports.parsers=k},90386:function($){var R,e,k=$.exports={};function A(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function T(i){if(R===setTimeout)return setTimeout(i,0);if((R===A||!R)&&setTimeout)return R=setTimeout,setTimeout(i,0);try{return R(i,0)}catch{try{return R.call(null,i,0)}catch{return R.call(this,i,0)}}}(function(){try{R=typeof setTimeout=="function"?setTimeout:A}catch{R=A}try{e=typeof clearTimeout=="function"?clearTimeout:l}catch{e=l}})();var x,d=[],s=!1,t=-1;function o(){s&&x&&(s=!1,x.length?d=x.concat(d):t=-1,d.length&&r())}function r(){if(!s){var i=T(o);s=!0;for(var c=d.length;c;){for(x=d,d=[];++t<c;)x&&x[t].run();t=-1,c=d.length}x=null,s=!1,function(h){if(e===clearTimeout)return clearTimeout(h);if((e===l||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(h);try{e(h)}catch{try{return e.call(null,h)}catch{return e.call(this,h)}}}(i)}}function n(i,c){this.fun=i,this.array=c}function a(){}k.nextTick=function(i){var c=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)c[h-1]=arguments[h];d.push(new n(i,c)),d.length!==1||s||T(r)},n.prototype.run=function(){this.fun.apply(null,this.array)},k.title="browser",k.browser=!0,k.env={},k.argv=[],k.version="",k.versions={},k.on=a,k.addListener=a,k.once=a,k.off=a,k.removeListener=a,k.removeAllListeners=a,k.emit=a,k.prependListener=a,k.prependOnceListener=a,k.listeners=function(i){return[]},k.binding=function(i){throw new Error("process.binding is not supported")},k.cwd=function(){return"/"},k.chdir=function(i){throw new Error("process.chdir is not supported")},k.umask=function(){return 0}},5877:function($,R,e){for(var k=e(9748),A=typeof window>"u"?e.g:window,l=["moz","webkit"],T="AnimationFrame",x=A["request"+T],d=A["cancel"+T]||A["cancelRequest"+T],s=0;!x&&s<l.length;s++)x=A[l[s]+"Request"+T],d=A[l[s]+"Cancel"+T]||A[l[s]+"CancelRequest"+T];if(!x||!d){var t=0,o=0,r=[];x=function(n){if(r.length===0){var a=k(),i=Math.max(0,16.666666666666668-(a-t));t=i+a,setTimeout(function(){var c=r.slice(0);r.length=0;for(var h=0;h<c.length;h++)if(!c[h].cancelled)try{c[h].callback(t)}catch(f){setTimeout(function(){throw f},0)}},Math.round(i))}return r.push({handle:++o,callback:n,cancelled:!1}),o},d=function(n){for(var a=0;a<r.length;a++)r[a].handle===n&&(r[a].cancelled=!0)}}$.exports=function(n){return x.call(A,n)},$.exports.cancel=function(){d.apply(A,arguments)},$.exports.polyfill=function(n){n||(n=A),n.requestAnimationFrame=x,n.cancelAnimationFrame=d}},3593:function($,R,e){var k=e(21527),A=e(25075),l=e(93447),T=e(71299),x=e(56131),d=e(30120),s=e(57060),t=s.float32,o=s.fract32;$.exports=function(n,a){if(typeof n=="function"?(a||(a={}),a.regl=n):a=n,a.length&&(a.positions=a),!(n=a.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var i,c,h,f,b,v,g=n._gl,y={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},p=[];return f=n.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),c=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),h=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),b=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),v=n.buffer({usage:"static",type:"float",data:r}),S(a),i=n({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:n.prop("range"),lineWidth:n.prop("lineWidth"),capSize:n.prop("capSize"),opacity:n.prop("opacity"),scale:n.prop("scale"),translate:n.prop("translate"),scaleFract:n.prop("scaleFract"),translateFract:n.prop("translateFract"),viewport:function(E,L){return[L.viewport.x,L.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:f,offset:function(E,L){return 4*L.offset},divisor:1},position:{buffer:c,offset:function(E,L){return 8*L.offset},divisor:1},positionFract:{buffer:h,offset:function(E,L){return 8*L.offset},divisor:1},error:{buffer:b,offset:function(E,L){return 16*L.offset},divisor:1},direction:{buffer:v,stride:24,offset:0},lineOffset:{buffer:v,stride:24,offset:8},capOffset:{buffer:v,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:n.prop("viewport")},viewport:n.prop("viewport"),stencil:!1,instances:n.prop("count"),count:r.length}),x(m,{update:S,draw:w,destroy:_,regl:n,gl:g,canvas:g.canvas,groups:p}),m;function m(E){E?S(E):E===null&&_(),w()}function w(E){if(typeof E=="number")return u(E);E&&!Array.isArray(E)&&(E=[E]),n._refresh(),p.forEach(function(L,C){L&&(E&&(E[C]?L.draw=!0:L.draw=!1),L.draw?u(C):L.draw=!0)})}function u(E){typeof E=="number"&&(E=p[E]),E!=null&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],i(E),E.after&&E.after(E))}function S(E){if(E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var L=0,C=0;if(m.groups=p=E.map(function(N,B){var j=p[B];return N&&(typeof N=="function"?N={after:N}:typeof N[0]=="number"&&(N={positions:N}),N=T(N,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),j||(p[B]=j={id:B,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},N=x({},y,N)),l(j,N,[{lineWidth:function(K){return .5*+K},capSize:function(K){return .5*+K},opacity:parseFloat,errors:function(K){return K=d(K),C+=K.length,K},positions:function(K,G){return K=d(K,"float64"),G.count=Math.floor(K.length/2),G.bounds=k(K,2),G.offset=L,L+=G.count,K}},{color:function(K,G){var V=G.count;if(K||(K="transparent"),!Array.isArray(K)||typeof K[0]=="number"){var W=K;K=Array(V);for(var J=0;J<V;J++)K[J]=W}if(K.length<V)throw Error("Not enough colors");for(var X=new Uint8Array(4*V),ee=0;ee<V;ee++){var re=A(K[ee],"uint8");X.set(re,4*ee)}return X},range:function(K,G,V){var W=G.bounds;return K||(K=W),G.scale=[1/(K[2]-K[0]),1/(K[3]-K[1])],G.translate=[-K[0],-K[1]],G.scaleFract=o(G.scale),G.translateFract=o(G.translate),K},viewport:function(K){var G;return Array.isArray(K)?G={x:K[0],y:K[1],width:K[2]-K[0],height:K[3]-K[1]}:K?(G={x:K.x||K.left||0,y:K.y||K.top||0},K.right?G.width=K.right-G.x:G.width=K.w||K.width||0,K.bottom?G.height=K.bottom-G.y:G.height=K.h||K.height||0):G={x:0,y:0,width:g.drawingBufferWidth,height:g.drawingBufferHeight},G}}])),j}),L||C){var P=p.reduce(function(N,B,j){return N+(B?B.count:0)},0),I=new Float64Array(2*P),U=new Uint8Array(4*P),z=new Float32Array(4*P);p.forEach(function(N,B){if(N){var j=N.positions,K=N.count,G=N.offset,V=N.color,W=N.errors;K&&(U.set(V,4*G),z.set(W,4*G),I.set(j,2*G))}});var H=t(I);c(H);var F=o(I,H);h(F),f(U),b(z)}}}function _(){c.destroy(),h.destroy(),f.destroy(),b.destroy(),v.destroy()}};var r=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},46075:function($,R,e){var k=e(25075),A=e(21527),l=e(56131),T=e(56068),x=e(71299),d=e(30120),s=e(11474),t=e(54),o=e(57060),r=o.float32,n=o.fract32,a=e(83522),i=e(18863),c=e(6851);function h(f,b){if(!(this instanceof h))return new h(f,b);if(typeof f=="function"?(b||(b={}),b.regl=f):b=f,b.length&&(b.positions=b),!(f=b.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=f._gl,this.regl=f,this.passes=[],this.shaders=h.shaders.has(f)?h.shaders.get(f):h.shaders.set(f,h.createShaders(f)).get(f),this.update(b)}$.exports=h,h.dashMult=2,h.maxPatternLength=256,h.precisionThreshold=3e6,h.maxPoints=1e4,h.maxLines=2048,h.shaders=new a,h.createShaders=function(f){var b,v=f.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),g={primitive:"triangle strip",instances:f.prop("count"),count:4,offset:0,uniforms:{miterMode:function(p,m){return m.join==="round"?2:1},miterLimit:f.prop("miterLimit"),scale:f.prop("scale"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),thickness:f.prop("thickness"),dashTexture:f.prop("dashTexture"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),dashLength:f.prop("dashLength"),viewport:function(p,m){return[m.viewport.x,m.viewport.y,p.viewportWidth,p.viewportHeight]},depth:f.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(p,m){return!m.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:f.prop("viewport")},viewport:f.prop("viewport")},y=f(l({vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:v,divisor:0,stride:8,offset:0},lineTop:{buffer:v,divisor:0,stride:8,offset:4},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},g));try{b=f(l({cull:{enable:!0,face:"back"},vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:v,divisor:0,stride:8,offset:0},lineTop:{buffer:v,divisor:0,stride:8,offset:4},aColor:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:f.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},g))}catch{b=y}return{fill:f({primitive:"triangle",elements:function(p,m){return m.triangles},offset:0,vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:f.prop("scale"),color:f.prop("fill"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),viewport:function(p,m){return[m.viewport.x,m.viewport.y,p.viewportWidth,p.viewportHeight]}},attributes:{position:{buffer:f.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8}},blend:g.blend,depth:{enable:!1},scissor:g.scissor,stencil:g.stencil,viewport:g.viewport}),rect:y,miter:b}},h.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},h.prototype.render=function(){for(var f,b=[],v=arguments.length;v--;)b[v]=arguments[v];b.length&&(f=this).update.apply(f,b),this.draw()},h.prototype.draw=function(){for(var f=this,b=[],v=arguments.length;v--;)b[v]=arguments[v];return(b.length?b:this.passes).forEach(function(g,y){var p;if(g&&Array.isArray(g))return(p=f).draw.apply(p,g);typeof g=="number"&&(g=f.passes[g]),g&&g.count>1&&g.opacity&&(f.regl._refresh(),g.fill&&g.triangles&&g.triangles.length>2&&f.shaders.fill(g),g.thickness&&(g.scale[0]*g.viewport.width>h.precisionThreshold||g.scale[1]*g.viewport.height>h.precisionThreshold||g.join==="rect"||!g.join&&(g.thickness<=2||g.count>=h.maxPoints)?f.shaders.rect(g):f.shaders.miter(g)))}),this},h.prototype.update=function(f){var b=this;if(f){f.length!=null?typeof f[0]=="number"&&(f=[{positions:f}]):Array.isArray(f)||(f=[f]);var v=this.regl,g=this.gl;if(f.forEach(function(u,S){var _=b.passes[S];if(u!==void 0)if(u!==null){if(typeof u[0]=="number"&&(u={positions:u}),u=x(u,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),_||(b.passes[S]=_={id:S,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:v.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:v.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},u=l({},h.defaults,u)),u.thickness!=null&&(_.thickness=parseFloat(u.thickness)),u.opacity!=null&&(_.opacity=parseFloat(u.opacity)),u.miterLimit!=null&&(_.miterLimit=parseFloat(u.miterLimit)),u.overlay!=null&&(_.overlay=!!u.overlay,S<h.maxLines&&(_.depth=2*(h.maxLines-1-S%h.maxLines)/h.maxLines-1)),u.join!=null&&(_.join=u.join),u.hole!=null&&(_.hole=u.hole),u.fill!=null&&(_.fill=u.fill?k(u.fill,"uint8"):null),u.viewport!=null&&(_.viewport=i(u.viewport)),_.viewport||(_.viewport=i([g.drawingBufferWidth,g.drawingBufferHeight])),u.close!=null&&(_.close=u.close),u.positions===null&&(u.positions=[]),u.positions){var E,L;if(u.positions.x&&u.positions.y){var C=u.positions.x,P=u.positions.y;L=_.count=Math.max(C.length,P.length),E=new Float64Array(2*L);for(var I=0;I<L;I++)E[2*I]=C[I],E[2*I+1]=P[I]}else E=d(u.positions,"float64"),L=_.count=Math.floor(E.length/2);var U=_.bounds=A(E,2);if(_.fill){for(var z=[],H={},F=0,N=0,B=0,j=_.count;N<j;N++){var K=E[2*N],G=E[2*N+1];isNaN(K)||isNaN(G)||K==null||G==null?(K=E[2*F],G=E[2*F+1],H[N]=F):F=N,z[B++]=K,z[B++]=G}if(u.splitNull){_.count-1 in H||(H[_.count]=_.count-1);var V=Object.keys(H).map(Number).sort(function(mt,wt){return mt-wt}),W=[],J=0,X=_.hole!=null?_.hole[0]:null;if(X!=null){var ee=c(V,function(mt){return mt>=X});(V=V.slice(0,ee)).push(X)}for(var re=function(mt){var wt=z.slice(2*J,2*V[mt]).concat(X?z.slice(2*X):[]),Lt=(_.hole||[]).map(function(It){return It-X+(V[mt]-J)}),Ct=s(wt,Lt);Ct=Ct.map(function(It){return It+J+(It+J<V[mt]?0:X-V[mt])}),W.push.apply(W,Ct),J=V[mt]+1},ie=0;ie<V.length;ie++)re(ie);for(var se=0,fe=W.length;se<fe;se++)H[W[se]]!=null&&(W[se]=H[W[se]]);_.triangles=W}else{for(var ye=s(z,_.hole||[]),ge=0,he=ye.length;ge<he;ge++)H[ye[ge]]!=null&&(ye[ge]=H[ye[ge]]);_.triangles=ye}}var ve=new Float64Array(E);t(ve,2,U);var Oe=new Float64Array(2*L+6);_.close?E[0]===E[2*L-2]&&E[1]===E[2*L-1]?(Oe[0]=ve[2*L-4],Oe[1]=ve[2*L-3]):(Oe[0]=ve[2*L-2],Oe[1]=ve[2*L-1]):(Oe[0]=ve[0],Oe[1]=ve[1]),Oe.set(ve,2),_.close?E[0]===E[2*L-2]&&E[1]===E[2*L-1]?(Oe[2*L+2]=ve[2],Oe[2*L+3]=ve[3],_.count-=1):(Oe[2*L+2]=ve[0],Oe[2*L+3]=ve[1],Oe[2*L+4]=ve[2],Oe[2*L+5]=ve[3]):(Oe[2*L+2]=ve[2*L-2],Oe[2*L+3]=ve[2*L-1],Oe[2*L+4]=ve[2*L-2],Oe[2*L+5]=ve[2*L-1]);var xe=r(Oe);_.positionBuffer(xe);var ke=n(Oe,xe);_.positionFractBuffer(ke)}if(u.range?_.range=u.range:_.range||(_.range=_.bounds),(u.range||u.positions)&&_.count){var Me=_.bounds,Te=Me[2]-Me[0],Q=Me[3]-Me[1],oe=_.range[2]-_.range[0],ce=_.range[3]-_.range[1];_.scale=[Te/oe,Q/ce],_.translate=[-_.range[0]/oe+Me[0]/oe||0,-_.range[1]/ce+Me[1]/ce||0],_.scaleFract=n(_.scale),_.translateFract=n(_.translate)}if(u.dashes){var me,Ae=0;if(!u.dashes||u.dashes.length<2)Ae=1,me=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ae=0;for(var Ie=0;Ie<u.dashes.length;++Ie)Ae+=u.dashes[Ie];me=new Uint8Array(Ae*h.dashMult);for(var Ce=0,Re=255,le=0;le<2;le++)for(var de=0;de<u.dashes.length;++de){for(var _e=0,Fe=u.dashes[de]*h.dashMult*.5;_e<Fe;++_e)me[Ce++]=Re;Re^=255}}_.dashLength=Ae,_.dashTexture({channels:1,data:me,width:me.length,height:1,mag:"linear",min:"linear"},0,0)}if(u.color){var Ve=_.count,He=u.color;He||(He="transparent");var nt=new Uint8Array(4*Ve+4);if(Array.isArray(He)&&typeof He[0]!="number"){for(var tt=0;tt<Ve;tt++){var ot=k(He[tt],"uint8");nt.set(ot,4*tt)}nt.set(k(He[0],"uint8"),4*Ve)}else for(var dt=k(He,"uint8"),kt=0;kt<Ve+1;kt++)nt.set(dt,4*kt);_.colorBuffer({usage:"dynamic",type:"uint8",data:nt})}}else b.passes[S]=null}),f.length<this.passes.length){for(var y=f.length;y<this.passes.length;y++){var p=this.passes[y];p&&(p.colorBuffer.destroy(),p.positionBuffer.destroy(),p.dashTexture.destroy())}this.passes.length=f.length}for(var m=[],w=0;w<this.passes.length;w++)this.passes[w]!==null&&m.push(this.passes[w]);return this.passes=m,this}},h.prototype.destroy=function(){return this.passes.forEach(function(f){f.colorBuffer.destroy(),f.positionBuffer.destroy(),f.dashTexture.destroy()}),this.passes.length=0,this}},11870:function($,R,e){function k(g,y){return function(p){if(Array.isArray(p))return p}(g)||function(p,m){var w=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(w!=null){var u,S,_=[],E=!0,L=!1;try{for(w=w.call(p);!(E=(u=w.next()).done)&&(_.push(u.value),!m||_.length!==m);E=!0);}catch(C){L=!0,S=C}finally{try{E||w.return==null||w.return()}finally{if(L)throw S}}return _}}(g,y)||A(g,y)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function A(g,y){if(g){if(typeof g=="string")return l(g,y);var p=Object.prototype.toString.call(g).slice(8,-1);return p==="Object"&&g.constructor&&(p=g.constructor.name),p==="Map"||p==="Set"?Array.from(g):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?l(g,y):void 0}}function l(g,y){(y==null||y>g.length)&&(y=g.length);for(var p=0,m=new Array(y);p<y;p++)m[p]=g[p];return m}var T=e(25075),x=e(21527),d=e(6475),s=e(88294),t=e(56131),o=e(56068),r=e(71299),n=e(93447),a=e(30120),i=e(62683),c=e(57060),h=e(18863),f=b;function b(g,y){var p=this;if(!(this instanceof b))return new b(g,y);typeof g=="function"?(y||(y={}),y.regl=g):(y=g,g=null),y&&y.length&&(y.positions=y);var m,w=(g=y.regl)._gl,u=[];this.tooManyColors=i,m=g.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:g,gl:w,groups:[],markerCache:[null],markerTextures:[null],palette:u,paletteIds:{},paletteTexture:m,maxColors:255,maxSize:100,canvas:w.canvas}),this.update(y);var S={uniforms:{constPointSize:!!y.constPointSize,opacity:g.prop("opacity"),paletteSize:function(L,C){return[p.tooManyColors?0:255,m.height]},pixelRatio:g.context("pixelRatio"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translate:g.prop("translate"),translateFract:g.prop("translateFract"),markerTexture:g.prop("markerTexture"),paletteTexture:m},attributes:{x:function(L,C){return C.xAttr||{buffer:C.positionBuffer,stride:8,offset:0}},y:function(L,C){return C.yAttr||{buffer:C.positionBuffer,stride:8,offset:4}},xFract:function(L,C){return C.xAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:0}},yFract:function(L,C){return C.yAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:4}},size:function(L,C){return C.size.length?{buffer:C.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*C.size/p.maxSize)]}},borderSize:function(L,C){return C.borderSize.length?{buffer:C.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*C.borderSize/p.maxSize)]}},colorId:function(L,C){return C.color.length?{buffer:C.colorBuffer,stride:p.tooManyColors?8:4,offset:0}:{constant:p.tooManyColors?u.slice(4*C.color,4*C.color+4):[C.color]}},borderColorId:function(L,C){return C.borderColor.length?{buffer:C.colorBuffer,stride:p.tooManyColors?8:4,offset:p.tooManyColors?4:2}:{constant:p.tooManyColors?u.slice(4*C.borderColor,4*C.borderColor+4):[C.borderColor]}},isActive:function(L,C){return C.activation===!0?{constant:[1]}:C.activation?C.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:g.prop("elements"),count:g.prop("count"),offset:g.prop("offset"),primitive:"points"},_=t({},S);_.frag=o([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),_.vert=o([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=g(_);var E=t({},S);E.frag=o([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),E.vert=o([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),i&&(E.frag=E.frag.replace("smoothstep","smoothStep"),_.frag=_.frag.replace("smoothstep","smoothStep")),this.drawCircle=g(E)}b.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},b.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},b.prototype.draw=function(){for(var g=this,y=arguments.length,p=new Array(y),m=0;m<y;m++)p[m]=arguments[m];var w=this.groups;if(p.length===1&&Array.isArray(p[0])&&(p[0][0]===null||Array.isArray(p[0][0]))&&(p=p[0]),this.regl._refresh(),p.length)for(var u=0;u<p.length;u++)this.drawItem(u,p[u]);else w.forEach(function(S,_){g.drawItem(_)});return this},b.prototype.drawItem=function(g,y){var p,m=this.groups,w=m[g];if(typeof y=="number"&&(g=y,w=m[y],y=null),w&&w.count&&w.opacity){w.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,w,y));for(var u=[],S=1;S<w.activation.length;S++)w.activation[S]&&(w.activation[S]===!0||w.activation[S].data.length)&&u.push.apply(u,function(_){if(Array.isArray(_))return l(_)}(p=this.getMarkerDrawOptions(S,w,y))||function(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}(p)||A(p)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());u.length&&this.drawMarker(u)}},b.prototype.getMarkerDrawOptions=function(g,y,p){var m=y.range,w=y.tree,u=y.viewport,S=y.activation,_=y.selectionBuffer,E=y.count;if(this.regl,!w)return p?[t({},y,{markerTexture:this.markerTextures[g],activation:S[g],count:p.length,elements:p,offset:0})]:[t({},y,{markerTexture:this.markerTextures[g],activation:S[g],offset:0})];var L=[],C=w.range(m,{lod:!0,px:[(m[2]-m[0])/u.width,(m[3]-m[1])/u.height]});if(p){for(var P=S[g].data,I=new Uint8Array(E),U=0;U<p.length;U++){var z=p[U];I[z]=P?P[z]:1}_.subdata(I)}for(var H=C.length;H--;){var F=k(C[H],2),N=F[0],B=F[1];L.push(t({},y,{markerTexture:this.markerTextures[g],activation:p?_:S[g],offset:N,count:B-N}))}return L},b.prototype.update=function(){for(var g=this,y=arguments.length,p=new Array(y),m=0;m<y;m++)p[m]=arguments[m];if(p.length){p.length===1&&Array.isArray(p[0])&&(p=p[0]);var w=this.groups,u=this.gl,S=this.regl,_=this.maxSize,E=this.maxColors,L=this.palette;this.groups=w=p.map(function(C,P){var I=w[P];if(C===void 0)return I;C===null?C={positions:null}:typeof C=="function"?C={ondraw:C}:typeof C[0]=="number"&&(C={positions:C}),(C=r(C,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(C.positions=[]),C.tooManyColors!=null&&(g.tooManyColors=C.tooManyColors),I||(w[P]=I={id:P,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},C=t({},b.defaults,C)),C.positions&&!("marker"in C)&&(C.marker=I.marker,delete I.marker),C.marker&&!("positions"in C)&&(C.positions=I.positions,delete I.positions);var U=0,z=0;if(n(I,C,[{snap:!0,size:function(ge,he){return ge==null&&(ge=b.defaults.size),U+=ge&&ge.length?1:0,ge},borderSize:function(ge,he){return ge==null&&(ge=b.defaults.borderSize),U+=ge&&ge.length?1:0,ge},opacity:parseFloat,color:function(ge,he){return ge==null&&(ge=b.defaults.color),ge=g.updateColor(ge),z++,ge},borderColor:function(ge,he){return ge==null&&(ge=b.defaults.borderColor),ge=g.updateColor(ge),z++,ge},bounds:function(ge,he,ve){return"range"in ve||(ve.range=null),ge},positions:function(ge,he,ve){var Oe=he.snap,xe=he.positionBuffer,ke=he.positionFractBuffer,Me=he.selectionBuffer;if(ge.x||ge.y)return ge.x.length?he.xAttr={buffer:S.buffer(ge.x),offset:0,stride:4,count:ge.x.length}:he.xAttr={buffer:ge.x.buffer,offset:4*ge.x.offset||0,stride:4*(ge.x.stride||1),count:ge.x.count},ge.y.length?he.yAttr={buffer:S.buffer(ge.y),offset:0,stride:4,count:ge.y.length}:he.yAttr={buffer:ge.y.buffer,offset:4*ge.y.offset||0,stride:4*(ge.y.stride||1),count:ge.y.count},he.count=Math.max(he.xAttr.count,he.yAttr.count),ge;ge=a(ge,"float64");var Te=he.count=Math.floor(ge.length/2),Q=he.bounds=Te?x(ge,2):null;if(ve.range||he.range||(delete he.range,ve.range=Q),ve.marker||he.marker||(delete he.marker,ve.marker=null),Oe&&(Oe===!0||Te>Oe)?he.tree=s(ge,{bounds:Q}):Oe&&Oe.length&&(he.tree=Oe),he.tree){var oe={primitive:"points",usage:"static",data:he.tree,type:"uint32"};he.elements?he.elements(oe):he.elements=S.elements(oe)}var ce=c.float32(ge);return xe({data:ce,usage:"dynamic"}),ke({data:c.fract32(ge,ce),usage:"dynamic"}),Me({data:new Uint8Array(Te),type:"uint8",usage:"stream"}),ge}},{marker:function(ge,he,ve){var Oe=he.activation;if(Oe.forEach(function(ce){return ce&&ce.destroy&&ce.destroy()}),Oe.length=0,ge&&typeof ge[0]!="number"){for(var xe=[],ke=0,Me=Math.min(ge.length,he.count);ke<Me;ke++){var Te=g.addMarker(ge[ke]);xe[Te]||(xe[Te]=new Uint8Array(he.count)),xe[Te][ke]=1}for(var Q=0;Q<xe.length;Q++)if(xe[Q]){var oe={data:xe[Q],type:"uint8",usage:"static"};Oe[Q]?Oe[Q](oe):Oe[Q]=S.buffer(oe),Oe[Q].data=xe[Q]}}else Oe[g.addMarker(ge)]=!0;return ge},range:function(ge,he,ve){var Oe=he.bounds;if(Oe)return ge||(ge=Oe),he.scale=[1/(ge[2]-ge[0]),1/(ge[3]-ge[1])],he.translate=[-ge[0],-ge[1]],he.scaleFract=c.fract(he.scale),he.translateFract=c.fract(he.translate),ge},viewport:function(ge){return h(ge||[u.drawingBufferWidth,u.drawingBufferHeight])}}]),U){var H=I,F=H.count,N=H.size,B=H.borderSize,j=H.sizeBuffer,K=new Uint8Array(2*F);if(N.length||B.length)for(var G=0;G<F;G++)K[2*G]=Math.round(255*(N[G]==null?N:N[G])/_),K[2*G+1]=Math.round(255*(B[G]==null?B:B[G])/_);j({data:K,usage:"dynamic"})}if(z){var V,W=I,J=W.count,X=W.color,ee=W.borderColor,re=W.colorBuffer;if(g.tooManyColors){if(X.length||ee.length){V=new Uint8Array(8*J);for(var ie=0;ie<J;ie++){var se=X[ie];V[8*ie]=L[4*se],V[8*ie+1]=L[4*se+1],V[8*ie+2]=L[4*se+2],V[8*ie+3]=L[4*se+3];var fe=ee[ie];V[8*ie+4]=L[4*fe],V[8*ie+5]=L[4*fe+1],V[8*ie+6]=L[4*fe+2],V[8*ie+7]=L[4*fe+3]}}}else if(X.length||ee.length){V=new Uint8Array(4*J+2);for(var ye=0;ye<J;ye++)X[ye]!=null&&(V[4*ye]=X[ye]%E,V[4*ye+1]=Math.floor(X[ye]/E)),ee[ye]!=null&&(V[4*ye+2]=ee[ye]%E,V[4*ye+3]=Math.floor(ee[ye]/E))}re({data:V||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return I})}},b.prototype.addMarker=function(g){var y,p=this.markerTextures,m=this.regl,w=this.markerCache,u=g==null?0:w.indexOf(g);if(u>=0)return u;if(g instanceof Uint8Array||g instanceof Uint8ClampedArray)y=g;else{y=new Uint8Array(g.length);for(var S=0,_=g.length;S<_;S++)y[S]=255*g[S]}var E=Math.floor(Math.sqrt(y.length));return u=p.length,w.push(g),p.push(m.texture({channels:1,data:y,radius:E,mag:"linear",min:"linear"})),u},b.prototype.updateColor=function(g){var y=this.paletteIds,p=this.palette,m=this.maxColors;Array.isArray(g)||(g=[g]);var w=[];if(typeof g[0]=="number"){var u=[];if(Array.isArray(g))for(var S=0;S<g.length;S+=4)u.push(g.slice(S,S+4));else for(var _=0;_<g.length;_+=4)u.push(g.subarray(_,_+4));g=u}for(var E=0;E<g.length;E++){var L=g[E];L=T(L,"uint8");var C=d(L,!1);if(y[C]==null){var P=p.length;y[C]=Math.floor(P/4),p[P]=L[0],p[P+1]=L[1],p[P+2]=L[2],p[P+3]=L[3]}w[E]=y[C]}return!this.tooManyColors&&p.length>4*m&&(this.tooManyColors=!0),this.updatePalette(p),w.length===1?w[0]:w},b.prototype.updatePalette=function(g){if(!this.tooManyColors){var y=this.maxColors,p=this.paletteTexture,m=Math.ceil(.25*g.length/y);if(m>1)for(var w=.25*(g=g.slice()).length%y;w<m*y;w++)g.push(0,0,0,0);p.height<m&&p.resize(y,m),p.subimage({width:Math.min(.25*g.length,y),height:m,data:g},0,0)}},b.prototype.destroy=function(){return this.groups.forEach(function(g){g.sizeBuffer.destroy(),g.positionBuffer.destroy(),g.positionFractBuffer.destroy(),g.colorBuffer.destroy(),g.activation.forEach(function(y){return y&&y.destroy&&y.destroy()}),g.selectionBuffer.destroy(),g.elements&&g.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(g){return g&&g.destroy&&g.destroy()}),this};var v=e(56131);$.exports=function(g,y){var p=new f(g,y),m=p.render.bind(p);return v(m,{render:m,update:p.update.bind(p),draw:p.draw.bind(p),destroy:p.destroy.bind(p),regl:p.regl,gl:p.gl,canvas:p.gl.canvas,groups:p.groups,markers:p.markerCache,palette:p.palette}),m}},60487:function($,R,e){var k=e(11870),A=e(71299),l=e(21527),T=e(5877),x=e(57471),d=e(18863),s=e(30120);function t(a,i){if(!(this instanceof t))return new t(a);this.traces=[],this.passes={},this.regl=a,this.scatter=k(a),this.canvas=this.scatter.canvas}function o(a,i,c){return(a.id!=null?a.id:a)<<16|(255&i)<<8|255&c}function r(a,i,c){var h,f,b,v,g=a[i],y=a[c];return g.length>2?(g[0],g[2],h=g[1],f=g[3]):g.length?(h=g[0],f=g[1]):(g.x,h=g.y,g.x,g.width,f=g.y+g.height),y.length>2?(b=y[0],v=y[2],y[1],y[3]):y.length?(b=y[0],v=y[1]):(b=y.x,y.y,v=y.x+y.width,y.y,y.height),[b,h,v,f]}function n(a){if(typeof a=="number")return[a,a,a,a];if(a.length===2)return[a[0],a[1],a[0],a[1]];var i=d(a);return[i.x,i.y,i.x+i.width,i.y+i.height]}$.exports=t,t.prototype.render=function(){for(var a,i=this,c=[],h=arguments.length;h--;)c[h]=arguments[h];return c.length&&(a=this).update.apply(a,c),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){i.draw(),i.dirty=!0,i.planned=null})):(this.draw(),this.dirty=!0,T(function(){i.dirty=!1})),this)},t.prototype.update=function(){for(var a,i=[],c=arguments.length;c--;)i[c]=arguments[c];if(i.length){for(var h=0;h<i.length;h++)this.updateItem(h,i[h]);this.traces=this.traces.filter(Boolean);for(var f=[],b=0,v=0;v<this.traces.length;v++){for(var g=this.traces[v],y=this.traces[v].passes,p=0;p<y.length;p++)f.push(this.passes[y[p]]);g.passOffset=b,b+=g.passes.length}return(a=this.scatter).update.apply(a,f),this}},t.prototype.updateItem=function(a,i){var c=this.regl;if(i===null)return this.traces[a]=null,this;if(!i)return this;var h,f=A(i,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),b=this.traces[a]||(this.traces[a]={id:a,buffer:c.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:d([c._gl.drawingBufferWidth,c._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(f.color!=null&&(b.color=f.color),f.size!=null&&(b.size=f.size),f.marker!=null&&(b.marker=f.marker),f.borderColor!=null&&(b.borderColor=f.borderColor),f.borderSize!=null&&(b.borderSize=f.borderSize),f.opacity!=null&&(b.opacity=f.opacity),f.viewport&&(b.viewport=d(f.viewport)),f.diagonal!=null&&(b.diagonal=f.diagonal),f.upper!=null&&(b.upper=f.upper),f.lower!=null&&(b.lower=f.lower),f.data){b.buffer(s(f.data)),b.columns=f.data.length,b.count=f.data[0].length,b.bounds=[];for(var v=0;v<b.columns;v++)b.bounds[v]=l(f.data[v],1)}f.range&&(b.range=f.range,h=b.range&&typeof b.range[0]!="number"),f.domain&&(b.domain=f.domain);var g=!1;f.padding!=null&&(Array.isArray(f.padding)&&f.padding.length===b.columns&&typeof f.padding[f.padding.length-1]=="number"?(b.padding=f.padding.map(n),g=!0):b.padding=n(f.padding));var y=b.columns,p=b.count,m=b.viewport.width,w=b.viewport.height,u=b.viewport.x,S=b.viewport.y,_=m/y,E=w/y;b.passes=[];for(var L=0;L<y;L++)for(var C=0;C<y;C++)if((b.diagonal||C!==L)&&(b.upper||!(L>C))&&(b.lower||!(L<C))){var P=o(b.id,L,C),I=this.passes[P]||(this.passes[P]={});if(f.data&&(f.transpose?I.positions={x:{buffer:b.buffer,offset:C,count:p,stride:y},y:{buffer:b.buffer,offset:L,count:p,stride:y}}:I.positions={x:{buffer:b.buffer,offset:C*p,count:p},y:{buffer:b.buffer,offset:L*p,count:p}},I.bounds=r(b.bounds,L,C)),f.domain||f.viewport||f.data){var U=g?r(b.padding,L,C):b.padding;if(b.domain){var z=r(b.domain,L,C),H=z[0],F=z[1],N=z[2],B=z[3];I.viewport=[u+H*m+U[0],S+F*w+U[1],u+N*m-U[2],S+B*w-U[3]]}else I.viewport=[u+C*_+_*U[0],S+L*E+E*U[1],u+(C+1)*_-_*U[2],S+(L+1)*E-E*U[3]]}f.color&&(I.color=b.color),f.size&&(I.size=b.size),f.marker&&(I.marker=b.marker),f.borderSize&&(I.borderSize=b.borderSize),f.borderColor&&(I.borderColor=b.borderColor),f.opacity&&(I.opacity=b.opacity),f.range&&(I.range=h?r(b.range,L,C):b.range||I.bounds),b.passes.push(P)}return this},t.prototype.draw=function(){for(var a,i=[],c=arguments.length;c--;)i[c]=arguments[c];if(i.length){for(var h=[],f=0;f<i.length;f++)if(typeof i[f]=="number"){var b=this.traces[i[f]],v=b.passes,g=b.passOffset;h.push.apply(h,x(g,g+v.length))}else if(i[f].length){var y=i[f],p=this.traces[f],m=p.passes,w=p.passOffset;m=m.map(function(u,S){h[w+S]=y})}(a=this.scatter).draw.apply(a,h)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(a){a.buffer&&a.buffer.destroy&&a.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},98580:function($){$.exports=function(){function R(Be,Ye){this.id=ee++,this.type=Be,this.data=Ye}function e(Be){if(Be.length===0)return[];var Ye=Be.charAt(0),rt=Be.charAt(Be.length-1);if(1<Be.length&&Ye===rt&&(Ye==='"'||Ye==="'"))return['"'+Be.substr(1,Be.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Ye=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Be))return e(Be.substr(0,Ye.index)).concat(e(Ye[1])).concat(e(Be.substr(Ye.index+Ye[0].length)));if((Ye=Be.split(".")).length===1)return['"'+Be.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Be=[],rt=0;rt<Ye.length;++rt)Be=Be.concat(e(Ye[rt]));return Be}function k(Be){return"["+e(Be).join("][")+"]"}function A(Be){return typeof Be=="string"?Be.split():Be}function l(Be){return typeof Be=="string"?document.querySelector(Be):Be}function T(Be){var Ye,rt,Se,ze,Ke=Be||{};Be={};var st=[],ct=[],Tt=typeof window>"u"?1:window.devicePixelRatio,Et=!1,At={},ht=function(gt){},pt=function(){};if(typeof Ke=="string"?Ye=document.querySelector(Ke):typeof Ke=="object"&&(typeof Ke.nodeName=="string"&&typeof Ke.appendChild=="function"&&typeof Ke.getBoundingClientRect=="function"?Ye=Ke:typeof Ke.drawArrays=="function"||typeof Ke.drawElements=="function"?Se=(ze=Ke).canvas:("gl"in Ke?ze=Ke.gl:"canvas"in Ke?Se=l(Ke.canvas):"container"in Ke&&(rt=l(Ke.container)),"attributes"in Ke&&(Be=Ke.attributes),"extensions"in Ke&&(st=A(Ke.extensions)),"optionalExtensions"in Ke&&(ct=A(Ke.optionalExtensions)),"onDone"in Ke&&(ht=Ke.onDone),"profile"in Ke&&(Et=!!Ke.profile),"pixelRatio"in Ke&&(Tt=+Ke.pixelRatio),"cachedCode"in Ke&&(At=Ke.cachedCode))),Ye&&(Ye.nodeName.toLowerCase()==="canvas"?Se=Ye:rt=Ye),!ze){if(!Se){if(!(Ye=function(gt,Pt,Ot){function Ht(){var Gt=window.innerWidth,un=window.innerHeight;gt!==document.body&&(Gt=(un=Nt.getBoundingClientRect()).right-un.left,un=un.bottom-un.top),Nt.width=Ot*Gt,Nt.height=Ot*un}var jt,Nt=document.createElement("canvas");return X(Nt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),gt.appendChild(Nt),gt===document.body&&(Nt.style.position="absolute",X(gt.style,{margin:0,padding:0})),gt!==document.body&&typeof ResizeObserver=="function"?(jt=new ResizeObserver(function(){setTimeout(Ht)})).observe(gt):window.addEventListener("resize",Ht,!1),Ht(),{canvas:Nt,onDestroy:function(){jt?jt.disconnect():window.removeEventListener("resize",Ht),gt.removeChild(Nt)}}}(rt||document.body,0,Tt)))return null;Se=Ye.canvas,pt=Ye.onDestroy}Be.premultipliedAlpha===void 0&&(Be.premultipliedAlpha=!0),ze=function(gt,Pt){function Ot(Ht){try{return gt.getContext(Ht,Pt)}catch{return null}}return Ot("webgl")||Ot("experimental-webgl")||Ot("webgl-experimental")}(Se,Be)}return ze?{gl:ze,canvas:Se,container:rt,extensions:st,optionalExtensions:ct,pixelRatio:Tt,profile:Et,cachedCode:At,onDone:ht,onDestroy:pt}:(pt(),ht("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function x(Be,Ye){for(var rt=Array(Be),Se=0;Se<Be;++Se)rt[Se]=Ye(Se);return rt}function d(Be){var Ye,rt;return Ye=(65535<Be)<<4,Ye|=rt=(255<(Be>>>=Ye))<<3,(Ye|=rt=(15<(Be>>>=rt))<<2)|(rt=(3<(Be>>>=rt))<<1)|Be>>>rt>>1}function s(){function Be(Se){e:{for(var ze=16;268435456>=ze;ze*=16)if(Se<=ze){Se=ze;break e}Se=0}return 0<(ze=rt[d(Se)>>2]).length?ze.pop():new ArrayBuffer(Se)}function Ye(Se){rt[d(Se.byteLength)>>2].push(Se)}var rt=x(8,function(){return[]});return{alloc:Be,free:Ye,allocType:function(Se,ze){var Ke=null;switch(Se){case 5120:Ke=new Int8Array(Be(ze),0,ze);break;case 5121:Ke=new Uint8Array(Be(ze),0,ze);break;case 5122:Ke=new Int16Array(Be(2*ze),0,ze);break;case 5123:Ke=new Uint16Array(Be(2*ze),0,ze);break;case 5124:Ke=new Int32Array(Be(4*ze),0,ze);break;case 5125:Ke=new Uint32Array(Be(4*ze),0,ze);break;case 5126:Ke=new Float32Array(Be(4*ze),0,ze);break;default:return null}return Ke.length!==ze?Ke.subarray(0,ze):Ke},freeType:function(Se){Ye(Se.buffer)}}}function t(Be){return!!Be&&typeof Be=="object"&&Array.isArray(Be.shape)&&Array.isArray(Be.stride)&&typeof Be.offset=="number"&&Be.shape.length===Be.stride.length&&(Array.isArray(Be.data)||ge(Be.data))}function o(Be,Ye,rt,Se,ze,Ke){for(var st=0;st<Ye;++st)for(var ct=Be[st],Tt=0;Tt<rt;++Tt)for(var Et=ct[Tt],At=0;At<Se;++At)ze[Ke++]=Et[At]}function r(Be,Ye,rt,Se,ze){for(var Ke=1,st=rt+1;st<Ye.length;++st)Ke*=Ye[st];var ct=Ye[rt];if(Ye.length-rt==4){var Tt=Ye[rt+1],Et=Ye[rt+2];for(Ye=Ye[rt+3],st=0;st<ct;++st)o(Be[st],Tt,Et,Ye,Se,ze),ze+=Ke}else for(st=0;st<ct;++st)r(Be[st],Ye,rt+1,Se,ze),ze+=Ke}function n(Be){return 0|Oe[Object.prototype.toString.call(Be)]}function a(Be,Ye){for(var rt=0;rt<Ye.length;++rt)Be[rt]=Ye[rt]}function i(Be,Ye,rt,Se,ze,Ke,st){for(var ct=0,Tt=0;Tt<rt;++Tt)for(var Et=0;Et<Se;++Et)Be[ct++]=Ye[ze*Tt+Ke*Et+st]}function c(Be,Ye,rt,Se){function ze(ht){this.id=Tt++,this.buffer=Be.createBuffer(),this.type=ht,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,rt.profile&&(this.stats={size:0})}function Ke(ht,pt,gt){ht.byteLength=pt.byteLength,Be.bufferData(ht.type,pt,gt)}function st(ht,pt,gt,Pt,Ot,Ht){if(ht.usage=gt,Array.isArray(pt)){if(ht.dtype=Pt||5126,0<pt.length)if(Array.isArray(pt[0])){Ot=Te(pt);for(var jt=Pt=1;jt<Ot.length;++jt)Pt*=Ot[jt];ht.dimension=Pt,Ke(ht,pt=Me(pt,Ot,ht.dtype),gt),Ht?ht.persistentData=pt:fe.freeType(pt)}else typeof pt[0]=="number"?(ht.dimension=Ot,a(Ot=fe.allocType(ht.dtype,pt.length),pt),Ke(ht,Ot,gt),Ht?ht.persistentData=Ot:fe.freeType(Ot)):ge(pt[0])&&(ht.dimension=pt[0].length,ht.dtype=Pt||n(pt[0])||5126,Ke(ht,pt=Me(pt,[pt.length,pt[0].length],ht.dtype),gt),Ht?ht.persistentData=pt:fe.freeType(pt))}else if(ge(pt))ht.dtype=Pt||n(pt),ht.dimension=Ot,Ke(ht,pt,gt),Ht&&(ht.persistentData=new Uint8Array(new Uint8Array(pt.buffer)));else if(t(pt)){Ot=pt.shape;var Nt=pt.stride,Gt=(jt=pt.offset,0),un=0,pn=0,Kt=0;Ot.length===1?(Gt=Ot[0],un=1,pn=Nt[0],Kt=0):Ot.length===2&&(Gt=Ot[0],un=Ot[1],pn=Nt[0],Kt=Nt[1]),ht.dtype=Pt||n(pt.data)||5126,ht.dimension=un,i(Ot=fe.allocType(ht.dtype,Gt*un),pt.data,Gt,un,pn,Kt,jt),Ke(ht,Ot,gt),Ht?ht.persistentData=Ot:fe.freeType(Ot)}else pt instanceof ArrayBuffer&&(ht.dtype=5121,ht.dimension=Ot,Ke(ht,pt,gt),Ht&&(ht.persistentData=new Uint8Array(new Uint8Array(pt))))}function ct(ht){Ye.bufferCount--,Se(ht),Be.deleteBuffer(ht.buffer),ht.buffer=null,delete Et[ht.id]}var Tt=0,Et={};ze.prototype.bind=function(){Be.bindBuffer(this.type,this.buffer)},ze.prototype.destroy=function(){ct(this)};var At=[];return rt.profile&&(Ye.getTotalBufferSize=function(){var ht=0;return Object.keys(Et).forEach(function(pt){ht+=Et[pt].stats.size}),ht}),{create:function(ht,pt,gt,Pt){function Ot(jt){var Nt=35044,Gt=null,un=0,pn=0,Kt=1;return Array.isArray(jt)||ge(jt)||t(jt)||jt instanceof ArrayBuffer?Gt=jt:typeof jt=="number"?un=0|jt:jt&&("data"in jt&&(Gt=jt.data),"usage"in jt&&(Nt=ke[jt.usage]),"type"in jt&&(pn=xe[jt.type]),"dimension"in jt&&(Kt=0|jt.dimension),"length"in jt&&(un=0|jt.length)),Ht.bind(),Gt?st(Ht,Gt,Nt,pn,Kt,Pt):(un&&Be.bufferData(Ht.type,un,Nt),Ht.dtype=pn||5121,Ht.usage=Nt,Ht.dimension=Kt,Ht.byteLength=un),rt.profile&&(Ht.stats.size=Ht.byteLength*Q[Ht.dtype]),Ot}Ye.bufferCount++;var Ht=new ze(pt);return Et[Ht.id]=Ht,gt||Ot(ht),Ot._reglType="buffer",Ot._buffer=Ht,Ot.subdata=function(jt,Nt){var Gt,un=0|(Nt||0);if(Ht.bind(),ge(jt)||jt instanceof ArrayBuffer)Be.bufferSubData(Ht.type,un,jt);else if(Array.isArray(jt)){if(0<jt.length)if(typeof jt[0]=="number"){var pn=fe.allocType(Ht.dtype,jt.length);a(pn,jt),Be.bufferSubData(Ht.type,un,pn),fe.freeType(pn)}else(Array.isArray(jt[0])||ge(jt[0]))&&(Gt=Te(jt),pn=Me(jt,Gt,Ht.dtype),Be.bufferSubData(Ht.type,un,pn),fe.freeType(pn))}else if(t(jt)){Gt=jt.shape;var Kt=jt.stride,wn=pn=0,Bn=0,vn=0;Gt.length===1?(pn=Gt[0],wn=1,Bn=Kt[0],vn=0):Gt.length===2&&(pn=Gt[0],wn=Gt[1],Bn=Kt[0],vn=Kt[1]),Gt=Array.isArray(jt.data)?Ht.dtype:n(jt.data),i(Gt=fe.allocType(Gt,pn*wn),jt.data,pn,wn,Bn,vn,jt.offset),Be.bufferSubData(Ht.type,un,Gt),fe.freeType(Gt)}return Ot},rt.profile&&(Ot.stats=Ht.stats),Ot.destroy=function(){ct(Ht)},Ot},createStream:function(ht,pt){var gt=At.pop();return gt||(gt=new ze(ht)),gt.bind(),st(gt,pt,35040,0,1,!1),gt},destroyStream:function(ht){At.push(ht)},clear:function(){he(Et).forEach(ct),At.forEach(ct)},getBuffer:function(ht){return ht&&ht._buffer instanceof ze?ht._buffer:null},restore:function(){he(Et).forEach(function(ht){ht.buffer=Be.createBuffer(),Be.bindBuffer(ht.type,ht.buffer),Be.bufferData(ht.type,ht.persistentData||ht.byteLength,ht.usage)})},_initBuffer:st}}function h(Be,Ye,rt,Se){function ze(ht){this.id=Tt++,ct[this.id]=this,this.buffer=ht,this.primType=4,this.type=this.vertCount=0}function Ke(ht,pt,gt,Pt,Ot,Ht,jt){var Nt;if(ht.buffer.bind(),pt?((Nt=jt)||ge(pt)&&(!t(pt)||ge(pt.data))||(Nt=Ye.oes_element_index_uint?5125:5123),rt._initBuffer(ht.buffer,pt,gt,Nt,3)):(Be.bufferData(34963,Ht,gt),ht.buffer.dtype=Nt||5121,ht.buffer.usage=gt,ht.buffer.dimension=3,ht.buffer.byteLength=Ht),Nt=jt,!jt){switch(ht.buffer.dtype){case 5121:case 5120:Nt=5121;break;case 5123:case 5122:Nt=5123;break;case 5125:case 5124:Nt=5125}ht.buffer.dtype=Nt}ht.type=Nt,0>(pt=Ot)&&(pt=ht.buffer.byteLength,Nt===5123?pt>>=1:Nt===5125&&(pt>>=2)),ht.vertCount=pt,pt=Pt,0>Pt&&(pt=4,(Pt=ht.buffer.dimension)===1&&(pt=0),Pt===2&&(pt=1),Pt===3&&(pt=4)),ht.primType=pt}function st(ht){Se.elementsCount--,delete ct[ht.id],ht.buffer.destroy(),ht.buffer=null}var ct={},Tt=0,Et={uint8:5121,uint16:5123};Ye.oes_element_index_uint&&(Et.uint32=5125),ze.prototype.bind=function(){this.buffer.bind()};var At=[];return{create:function(ht,pt){function gt(Ht){if(Ht)if(typeof Ht=="number")Pt(Ht),Ot.primType=4,Ot.vertCount=0|Ht,Ot.type=5121;else{var jt=null,Nt=35044,Gt=-1,un=-1,pn=0,Kt=0;Array.isArray(Ht)||ge(Ht)||t(Ht)?jt=Ht:("data"in Ht&&(jt=Ht.data),"usage"in Ht&&(Nt=ke[Ht.usage]),"primitive"in Ht&&(Gt=oe[Ht.primitive]),"count"in Ht&&(un=0|Ht.count),"type"in Ht&&(Kt=Et[Ht.type]),"length"in Ht?pn=0|Ht.length:(pn=un,Kt===5123||Kt===5122?pn*=2:Kt!==5125&&Kt!==5124||(pn*=4))),Ke(Ot,jt,Nt,Gt,un,pn,Kt)}else Pt(),Ot.primType=4,Ot.vertCount=0,Ot.type=5121;return gt}var Pt=rt.create(null,34963,!0),Ot=new ze(Pt._buffer);return Se.elementsCount++,gt(ht),gt._reglType="elements",gt._elements=Ot,gt.subdata=function(Ht,jt){return Pt.subdata(Ht,jt),gt},gt.destroy=function(){st(Ot)},gt},createStream:function(ht){var pt=At.pop();return pt||(pt=new ze(rt.create(null,34963,!0,!1)._buffer)),Ke(pt,ht,35040,-1,-1,0,0),pt},destroyStream:function(ht){At.push(ht)},getElements:function(ht){return typeof ht=="function"&&ht._elements instanceof ze?ht._elements:null},clear:function(){he(ct).forEach(st)}}}function f(Be){for(var Ye=fe.allocType(5123,Be.length),rt=0;rt<Be.length;++rt)if(isNaN(Be[rt]))Ye[rt]=65535;else if(Be[rt]===1/0)Ye[rt]=31744;else if(Be[rt]===-1/0)Ye[rt]=64512;else{ce[0]=Be[rt];var Se=(Ke=me[0])>>>31<<15,ze=(Ke<<1>>>24)-127,Ke=Ke>>13&1023;Ye[rt]=-24>ze?Se:-14>ze?Se+(Ke+1024>>-14-ze):15<ze?Se+31744:Se+(ze+15<<10)+Ke}return Ye}function b(Be){return Array.isArray(Be)||ge(Be)}function v(Be){return"[object "+Be+"]"}function g(Be){return Array.isArray(Be)&&(Be.length===0||typeof Be[0]=="number")}function y(Be){return!(!Array.isArray(Be)||Be.length===0||!b(Be[0]))}function p(Be){return Object.prototype.toString.call(Be)}function m(Be){if(!Be)return!1;var Ye=p(Be);return 0<=He.indexOf(Ye)||g(Be)||y(Be)||t(Be)}function w(Be,Ye){Be.type===36193?(Be.data=f(Ye),fe.freeType(Ye)):Be.data=Ye}function u(Be,Ye,rt,Se,ze,Ke){if(Be=tt[Be]!==void 0?tt[Be]:Ce[Be]*nt[Ye],Ke&&(Be*=6),ze){for(Se=0;1<=rt;)Se+=Be*rt*rt,rt/=2;return Se}return Be*rt*Se}function S(Be,Ye,rt,Se,ze,Ke,st){function ct(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Tt($t,kn){$t.internalformat=kn.internalformat,$t.format=kn.format,$t.type=kn.type,$t.compressed=kn.compressed,$t.premultiplyAlpha=kn.premultiplyAlpha,$t.flipY=kn.flipY,$t.unpackAlignment=kn.unpackAlignment,$t.colorSpace=kn.colorSpace,$t.width=kn.width,$t.height=kn.height,$t.channels=kn.channels}function Et($t,kn){if(typeof kn=="object"&&kn){"premultiplyAlpha"in kn&&($t.premultiplyAlpha=kn.premultiplyAlpha),"flipY"in kn&&($t.flipY=kn.flipY),"alignment"in kn&&($t.unpackAlignment=kn.alignment),"colorSpace"in kn&&($t.colorSpace=Nn[kn.colorSpace]),"type"in kn&&($t.type=Fn[kn.type]);var zt=$t.width,Wt=$t.height,tn=$t.channels,Sn=!1;"shape"in kn?(zt=kn.shape[0],Wt=kn.shape[1],kn.shape.length===3&&(tn=kn.shape[2],Sn=!0)):("radius"in kn&&(zt=Wt=kn.radius),"width"in kn&&(zt=kn.width),"height"in kn&&(Wt=kn.height),"channels"in kn&&(tn=kn.channels,Sn=!0)),$t.width=0|zt,$t.height=0|Wt,$t.channels=0|tn,zt=!1,"format"in kn&&(zt=kn.format,Wt=$t.internalformat=rr[zt],$t.format=zn[Wt],zt in Fn&&!("type"in kn)&&($t.type=Fn[zt]),zt in $n&&($t.compressed=!0),zt=!0),!Sn&&zt?$t.channels=Ce[$t.format]:Sn&&!zt&&$t.channels!==Ie[$t.format]&&($t.format=$t.internalformat=Ie[$t.channels])}}function At($t){Be.pixelStorei(37440,$t.flipY),Be.pixelStorei(37441,$t.premultiplyAlpha),Be.pixelStorei(37443,$t.colorSpace),Be.pixelStorei(3317,$t.unpackAlignment)}function ht(){ct.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function pt($t,kn){var zt=null;if(m(kn)?zt=kn:kn&&(Et($t,kn),"x"in kn&&($t.xOffset=0|kn.x),"y"in kn&&($t.yOffset=0|kn.y),m(kn.data)&&(zt=kn.data)),kn.copy){var Wt=ze.viewportWidth,tn=ze.viewportHeight;$t.width=$t.width||Wt-$t.xOffset,$t.height=$t.height||tn-$t.yOffset,$t.needsCopy=!0}else if(zt){if(ge(zt))$t.channels=$t.channels||4,$t.data=zt,"type"in kn||$t.type!==5121||($t.type=0|Oe[Object.prototype.toString.call(zt)]);else if(g(zt)){switch($t.channels=$t.channels||4,tn=(Wt=zt).length,$t.type){case 5121:case 5123:case 5125:case 5126:(tn=fe.allocType($t.type,tn)).set(Wt),$t.data=tn;break;case 36193:$t.data=f(Wt)}$t.alignment=1,$t.needsFree=!0}else if(t(zt)){Wt=zt.data,Array.isArray(Wt)||$t.type!==5121||($t.type=0|Oe[Object.prototype.toString.call(Wt)]),tn=zt.shape;var Sn,An,Tn,an,mn=zt.stride;tn.length===3?(Tn=tn[2],an=mn[2]):an=Tn=1,Sn=tn[0],An=tn[1],tn=mn[0],mn=mn[1],$t.alignment=1,$t.width=Sn,$t.height=An,$t.channels=Tn,$t.format=$t.internalformat=Ie[Tn],$t.needsFree=!0,Sn=an,zt=zt.offset,Tn=$t.width,an=$t.height,An=$t.channels;for(var on=fe.allocType($t.type===36193?5126:$t.type,Tn*an*An),fn=0,yn=0;yn<an;++yn)for(var Ln=0;Ln<Tn;++Ln)for(var Hn=0;Hn<An;++Hn)on[fn++]=Wt[tn*Ln+mn*yn+Sn*Hn+zt];w($t,on)}else if(p(zt)===Re||p(zt)===le||p(zt)===de)p(zt)===Re||p(zt)===le?$t.element=zt:$t.element=zt.canvas,$t.width=$t.element.width,$t.height=$t.element.height,$t.channels=4;else if(p(zt)===_e)$t.element=zt,$t.width=zt.width,$t.height=zt.height,$t.channels=4;else if(p(zt)===Fe)$t.element=zt,$t.width=zt.naturalWidth,$t.height=zt.naturalHeight,$t.channels=4;else if(p(zt)===Ve)$t.element=zt,$t.width=zt.videoWidth,$t.height=zt.videoHeight,$t.channels=4;else if(y(zt)){for(Wt=$t.width||zt[0].length,tn=$t.height||zt.length,mn=$t.channels,mn=b(zt[0][0])?mn||zt[0][0].length:mn||1,Sn=ve.shape(zt),Tn=1,an=0;an<Sn.length;++an)Tn*=Sn[an];Tn=fe.allocType($t.type===36193?5126:$t.type,Tn),ve.flatten(zt,Sn,"",Tn),w($t,Tn),$t.alignment=1,$t.width=Wt,$t.height=tn,$t.channels=mn,$t.format=$t.internalformat=Ie[mn],$t.needsFree=!0}}else $t.width=$t.width||1,$t.height=$t.height||1,$t.channels=$t.channels||4}function gt($t,kn,zt,Wt,tn){var Sn=$t.element,An=$t.data,Tn=$t.internalformat,an=$t.format,mn=$t.type,on=$t.width,fn=$t.height;At($t),Sn?Be.texSubImage2D(kn,tn,zt,Wt,an,mn,Sn):$t.compressed?Be.compressedTexSubImage2D(kn,tn,zt,Wt,Tn,on,fn,An):$t.needsCopy?(Se(),Be.copyTexSubImage2D(kn,tn,zt,Wt,$t.xOffset,$t.yOffset,on,fn)):Be.texSubImage2D(kn,tn,zt,Wt,on,fn,an,mn,An)}function Pt(){return _n.pop()||new ht}function Ot($t){$t.needsFree&&fe.freeType($t.data),ht.call($t),_n.push($t)}function Ht(){ct.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function jt($t,kn,zt){var Wt=$t.images[0]=Pt();$t.mipmask=1,Wt.width=$t.width=kn,Wt.height=$t.height=zt,Wt.channels=$t.channels=4}function Nt($t,kn){var zt=null;if(m(kn))Tt(zt=$t.images[0]=Pt(),$t),pt(zt,kn),$t.mipmask=1;else if(Et($t,kn),Array.isArray(kn.mipmap))for(var Wt=kn.mipmap,tn=0;tn<Wt.length;++tn)Tt(zt=$t.images[tn]=Pt(),$t),zt.width>>=tn,zt.height>>=tn,pt(zt,Wt[tn]),$t.mipmask|=1<<tn;else Tt(zt=$t.images[0]=Pt(),$t),pt(zt,kn),$t.mipmask=1;Tt($t,$t.images[0])}function Gt($t,kn){for(var zt=$t.images,Wt=0;Wt<zt.length&&zt[Wt];++Wt){var tn=zt[Wt],Sn=kn,An=Wt,Tn=tn.element,an=tn.data,mn=tn.internalformat,on=tn.format,fn=tn.type,yn=tn.width,Ln=tn.height;At(tn),Tn?Be.texImage2D(Sn,An,on,on,fn,Tn):tn.compressed?Be.compressedTexImage2D(Sn,An,mn,yn,Ln,0,an):tn.needsCopy?(Se(),Be.copyTexImage2D(Sn,An,on,tn.xOffset,tn.yOffset,yn,Ln,0)):Be.texImage2D(Sn,An,on,yn,Ln,0,on,fn,an||null)}}function un(){var $t=Cn.pop()||new Ht;ct.call($t);for(var kn=$t.mipmask=0;16>kn;++kn)$t.images[kn]=null;return $t}function pn($t){for(var kn=$t.images,zt=0;zt<kn.length;++zt)kn[zt]&&Ot(kn[zt]),kn[zt]=null;Cn.push($t)}function Kt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function wn($t,kn){"min"in kn&&($t.minFilter=Rn[kn.min],0<=Ae.indexOf($t.minFilter)&&!("faces"in kn)&&($t.genMipmaps=!0)),"mag"in kn&&($t.magFilter=Mn[kn.mag]);var zt=$t.wrapS,Wt=$t.wrapT;if("wrap"in kn){var tn=kn.wrap;typeof tn=="string"?zt=Wt=En[tn]:Array.isArray(tn)&&(zt=En[tn[0]],Wt=En[tn[1]])}else"wrapS"in kn&&(zt=En[kn.wrapS]),"wrapT"in kn&&(Wt=En[kn.wrapT]);if($t.wrapS=zt,$t.wrapT=Wt,"anisotropic"in kn&&($t.anisotropic=kn.anisotropic),"mipmap"in kn){switch(zt=!1,typeof kn.mipmap){case"string":$t.mipmapHint=hn[kn.mipmap],zt=$t.genMipmaps=!0;break;case"boolean":zt=$t.genMipmaps=kn.mipmap;break;case"object":$t.genMipmaps=!1,zt=!0}!zt||"min"in kn||($t.minFilter=9984)}}function Bn($t,kn){Be.texParameteri(kn,10241,$t.minFilter),Be.texParameteri(kn,10240,$t.magFilter),Be.texParameteri(kn,10242,$t.wrapS),Be.texParameteri(kn,10243,$t.wrapT),Ye.ext_texture_filter_anisotropic&&Be.texParameteri(kn,34046,$t.anisotropic),$t.genMipmaps&&(Be.hint(33170,$t.mipmapHint),Be.generateMipmap(kn))}function vn($t){ct.call(this),this.mipmask=0,this.internalformat=6408,this.id=Un++,this.refCount=1,this.target=$t,this.texture=Be.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Kt,st.profile&&(this.stats={size:0})}function cn($t){Be.activeTexture(33984),Be.bindTexture($t.target,$t.texture)}function dn(){var $t=yr[0];$t?Be.bindTexture($t.target,$t.texture):Be.bindTexture(3553,null)}function sn($t){var kn=$t.texture,zt=$t.unit,Wt=$t.target;0<=zt&&(Be.activeTexture(33984+zt),Be.bindTexture(Wt,null),yr[zt]=null),Be.deleteTexture(kn),$t.texture=null,$t.params=null,$t.pixels=null,$t.refCount=0,delete Gn[$t.id],Ke.textureCount--}var hn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},En={repeat:10497,clamp:33071,mirror:33648},Mn={nearest:9728,linear:9729},Rn=X({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Mn),Nn={none:0,browser:37444},Fn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},rr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},$n={};Ye.ext_srgb&&(rr.srgb=35904,rr.srgba=35906),Ye.oes_texture_float&&(Fn.float32=Fn.float=5126),Ye.oes_texture_half_float&&(Fn.float16=Fn["half float"]=36193),Ye.webgl_depth_texture&&(X(rr,{depth:6402,"depth stencil":34041}),X(Fn,{uint16:5123,uint32:5125,"depth stencil":34042})),Ye.webgl_compressed_texture_s3tc&&X($n,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Ye.webgl_compressed_texture_atc&&X($n,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Ye.webgl_compressed_texture_pvrtc&&X($n,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Ye.webgl_compressed_texture_etc1&&($n["rgb etc1"]=36196);var mr=Array.prototype.slice.call(Be.getParameter(34467));Object.keys($n).forEach(function($t){var kn=$n[$t];0<=mr.indexOf(kn)&&(rr[$t]=kn)});var fr=Object.keys(rr);rt.textureFormats=fr;var Zn=[];Object.keys(rr).forEach(function($t){Zn[rr[$t]]=$t});var qn=[];Object.keys(Fn).forEach(function($t){qn[Fn[$t]]=$t});var ur=[];Object.keys(Mn).forEach(function($t){ur[Mn[$t]]=$t});var Zt=[];Object.keys(Rn).forEach(function($t){Zt[Rn[$t]]=$t});var nn=[];Object.keys(En).forEach(function($t){nn[En[$t]]=$t});var zn=fr.reduce(function($t,kn){var zt=rr[kn];return zt===6409||zt===6406||zt===6409||zt===6410||zt===6402||zt===34041||Ye.ext_srgb&&(zt===35904||zt===35906)?$t[zt]=zt:zt===32855||0<=kn.indexOf("rgba")?$t[zt]=6408:$t[zt]=6407,$t},{}),_n=[],Cn=[],Un=0,Gn={},ar=rt.maxTextureUnits,yr=Array(ar).map(function(){return null});return X(vn.prototype,{bind:function(){this.bindCount+=1;var $t=this.unit;if(0>$t){for(var kn=0;kn<ar;++kn){var zt=yr[kn];if(zt){if(0<zt.bindCount)continue;zt.unit=-1}yr[kn]=this,$t=kn;break}st.profile&&Ke.maxTextureUnits<$t+1&&(Ke.maxTextureUnits=$t+1),this.unit=$t,Be.activeTexture(33984+$t),Be.bindTexture(this.target,this.texture)}return $t},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&sn(this)}}),st.profile&&(Ke.getTotalTextureSize=function(){var $t=0;return Object.keys(Gn).forEach(function(kn){$t+=Gn[kn].stats.size}),$t}),{create2D:function($t,kn){function zt(tn,Sn){var An=Wt.texInfo;Kt.call(An);var Tn=un();return typeof tn=="number"?jt(Tn,0|tn,typeof Sn=="number"?0|Sn:0|tn):tn?(wn(An,tn),Nt(Tn,tn)):jt(Tn,1,1),An.genMipmaps&&(Tn.mipmask=(Tn.width<<1)-1),Wt.mipmask=Tn.mipmask,Tt(Wt,Tn),Wt.internalformat=Tn.internalformat,zt.width=Tn.width,zt.height=Tn.height,cn(Wt),Gt(Tn,3553),Bn(An,3553),dn(),pn(Tn),st.profile&&(Wt.stats.size=u(Wt.internalformat,Wt.type,Tn.width,Tn.height,An.genMipmaps,!1)),zt.format=Zn[Wt.internalformat],zt.type=qn[Wt.type],zt.mag=ur[An.magFilter],zt.min=Zt[An.minFilter],zt.wrapS=nn[An.wrapS],zt.wrapT=nn[An.wrapT],zt}var Wt=new vn(3553);return Gn[Wt.id]=Wt,Ke.textureCount++,zt($t,kn),zt.subimage=function(tn,Sn,An,Tn){Sn|=0,An|=0,Tn|=0;var an=Pt();return Tt(an,Wt),an.width=0,an.height=0,pt(an,tn),an.width=an.width||(Wt.width>>Tn)-Sn,an.height=an.height||(Wt.height>>Tn)-An,cn(Wt),gt(an,3553,Sn,An,Tn),dn(),Ot(an),zt},zt.resize=function(tn,Sn){var An=0|tn,Tn=0|Sn||An;if(An===Wt.width&&Tn===Wt.height)return zt;zt.width=Wt.width=An,zt.height=Wt.height=Tn,cn(Wt);for(var an=0;Wt.mipmask>>an;++an){var mn=An>>an,on=Tn>>an;if(!mn||!on)break;Be.texImage2D(3553,an,Wt.format,mn,on,0,Wt.format,Wt.type,null)}return dn(),st.profile&&(Wt.stats.size=u(Wt.internalformat,Wt.type,An,Tn,!1,!1)),zt},zt._reglType="texture2d",zt._texture=Wt,st.profile&&(zt.stats=Wt.stats),zt.destroy=function(){Wt.decRef()},zt},createCube:function($t,kn,zt,Wt,tn,Sn){function An(mn,on,fn,yn,Ln,Hn){var Wn,Kn=Tn.texInfo;for(Kt.call(Kn),Wn=0;6>Wn;++Wn)an[Wn]=un();if(typeof mn!="number"&&mn){if(typeof mn=="object")if(on)Nt(an[0],mn),Nt(an[1],on),Nt(an[2],fn),Nt(an[3],yn),Nt(an[4],Ln),Nt(an[5],Hn);else if(wn(Kn,mn),Et(Tn,mn),"faces"in mn)for(mn=mn.faces,Wn=0;6>Wn;++Wn)Tt(an[Wn],Tn),Nt(an[Wn],mn[Wn]);else for(Wn=0;6>Wn;++Wn)Nt(an[Wn],mn)}else for(mn=0|mn||1,Wn=0;6>Wn;++Wn)jt(an[Wn],mn,mn);for(Tt(Tn,an[0]),Tn.mipmask=Kn.genMipmaps?(an[0].width<<1)-1:an[0].mipmask,Tn.internalformat=an[0].internalformat,An.width=an[0].width,An.height=an[0].height,cn(Tn),Wn=0;6>Wn;++Wn)Gt(an[Wn],34069+Wn);for(Bn(Kn,34067),dn(),st.profile&&(Tn.stats.size=u(Tn.internalformat,Tn.type,An.width,An.height,Kn.genMipmaps,!0)),An.format=Zn[Tn.internalformat],An.type=qn[Tn.type],An.mag=ur[Kn.magFilter],An.min=Zt[Kn.minFilter],An.wrapS=nn[Kn.wrapS],An.wrapT=nn[Kn.wrapT],Wn=0;6>Wn;++Wn)pn(an[Wn]);return An}var Tn=new vn(34067);Gn[Tn.id]=Tn,Ke.cubeCount++;var an=Array(6);return An($t,kn,zt,Wt,tn,Sn),An.subimage=function(mn,on,fn,yn,Ln){fn|=0,yn|=0,Ln|=0;var Hn=Pt();return Tt(Hn,Tn),Hn.width=0,Hn.height=0,pt(Hn,on),Hn.width=Hn.width||(Tn.width>>Ln)-fn,Hn.height=Hn.height||(Tn.height>>Ln)-yn,cn(Tn),gt(Hn,34069+mn,fn,yn,Ln),dn(),Ot(Hn),An},An.resize=function(mn){if((mn|=0)!==Tn.width){An.width=Tn.width=mn,An.height=Tn.height=mn,cn(Tn);for(var on=0;6>on;++on)for(var fn=0;Tn.mipmask>>fn;++fn)Be.texImage2D(34069+on,fn,Tn.format,mn>>fn,mn>>fn,0,Tn.format,Tn.type,null);return dn(),st.profile&&(Tn.stats.size=u(Tn.internalformat,Tn.type,An.width,An.height,!1,!0)),An}},An._reglType="textureCube",An._texture=Tn,st.profile&&(An.stats=Tn.stats),An.destroy=function(){Tn.decRef()},An},clear:function(){for(var $t=0;$t<ar;++$t)Be.activeTexture(33984+$t),Be.bindTexture(3553,null),yr[$t]=null;he(Gn).forEach(sn),Ke.cubeCount=0,Ke.textureCount=0},getTexture:function($t){return null},restore:function(){for(var $t=0;$t<ar;++$t){var kn=yr[$t];kn&&(kn.bindCount=0,kn.unit=-1,yr[$t]=null)}he(Gn).forEach(function(zt){zt.texture=Be.createTexture(),Be.bindTexture(zt.target,zt.texture);for(var Wt=0;32>Wt;++Wt)if(zt.mipmask&1<<Wt)if(zt.target===3553)Be.texImage2D(3553,Wt,zt.internalformat,zt.width>>Wt,zt.height>>Wt,0,zt.internalformat,zt.type,null);else for(var tn=0;6>tn;++tn)Be.texImage2D(34069+tn,Wt,zt.internalformat,zt.width>>Wt,zt.height>>Wt,0,zt.internalformat,zt.type,null);Bn(zt.texInfo,zt.target)})},refresh:function(){for(var $t=0;$t<ar;++$t){var kn=yr[$t];kn&&(kn.bindCount=0,kn.unit=-1,yr[$t]=null),Be.activeTexture(33984+$t),Be.bindTexture(3553,null),Be.bindTexture(34067,null)}}}}function _(Be,Ye,rt,Se,ze,Ke){function st(vn,cn,dn){this.target=vn,this.texture=cn,this.renderbuffer=dn;var sn=vn=0;cn?(vn=cn.width,sn=cn.height):dn&&(vn=dn.width,sn=dn.height),this.width=vn,this.height=sn}function ct(vn){vn&&(vn.texture&&vn.texture._texture.decRef(),vn.renderbuffer&&vn.renderbuffer._renderbuffer.decRef())}function Tt(vn,cn,dn){vn&&(vn.texture?vn.texture._texture.refCount+=1:vn.renderbuffer._renderbuffer.refCount+=1)}function Et(vn,cn){cn&&(cn.texture?Be.framebufferTexture2D(36160,vn,cn.target,cn.texture._texture.texture,0):Be.framebufferRenderbuffer(36160,vn,36161,cn.renderbuffer._renderbuffer.renderbuffer))}function At(vn){var cn=3553,dn=null,sn=null,hn=vn;return typeof vn=="object"&&(hn=vn.data,"target"in vn&&(cn=0|vn.target)),(vn=hn._reglType)==="texture2d"||vn==="textureCube"?dn=hn:vn==="renderbuffer"&&(sn=hn,cn=36161),new st(cn,dn,sn)}function ht(vn,cn,dn,sn,hn){return dn?((vn=Se.create2D({width:vn,height:cn,format:sn,type:hn}))._texture.refCount=0,new st(3553,vn,null)):((vn=ze.create({width:vn,height:cn,format:sn}))._renderbuffer.refCount=0,new st(36161,null,vn))}function pt(vn){return vn&&(vn.texture||vn.renderbuffer)}function gt(vn,cn,dn){vn&&(vn.texture?vn.texture.resize(cn,dn):vn.renderbuffer&&vn.renderbuffer.resize(cn,dn),vn.width=cn,vn.height=dn)}function Pt(){this.id=wn++,Bn[this.id]=this,this.framebuffer=Be.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Ot(vn){vn.colorAttachments.forEach(ct),ct(vn.depthAttachment),ct(vn.stencilAttachment),ct(vn.depthStencilAttachment)}function Ht(vn){Be.deleteFramebuffer(vn.framebuffer),vn.framebuffer=null,Ke.framebufferCount--,delete Bn[vn.id]}function jt(vn){var cn;Be.bindFramebuffer(36160,vn.framebuffer);var dn=vn.colorAttachments;for(cn=0;cn<dn.length;++cn)Et(36064+cn,dn[cn]);for(cn=dn.length;cn<rt.maxColorAttachments;++cn)Be.framebufferTexture2D(36160,36064+cn,3553,null,0);Be.framebufferTexture2D(36160,33306,3553,null,0),Be.framebufferTexture2D(36160,36096,3553,null,0),Be.framebufferTexture2D(36160,36128,3553,null,0),Et(36096,vn.depthAttachment),Et(36128,vn.stencilAttachment),Et(33306,vn.depthStencilAttachment),Be.checkFramebufferStatus(36160),Be.isContextLost(),Be.bindFramebuffer(36160,Gt.next?Gt.next.framebuffer:null),Gt.cur=Gt.next,Be.getError()}function Nt(vn,cn){function dn(hn,En){var Mn,Rn=0,Nn=0,Fn=!0,rr=!0;Mn=null;var $n=!0,mr="rgba",fr="uint8",Zn=1,qn=null,ur=null,Zt=null,nn=!1;typeof hn=="number"?(Rn=0|hn,Nn=0|En||Rn):hn?("shape"in hn?(Rn=(Nn=hn.shape)[0],Nn=Nn[1]):("radius"in hn&&(Rn=Nn=hn.radius),"width"in hn&&(Rn=hn.width),"height"in hn&&(Nn=hn.height)),("color"in hn||"colors"in hn)&&(Mn=hn.color||hn.colors,Array.isArray(Mn)),Mn||("colorCount"in hn&&(Zn=0|hn.colorCount),"colorTexture"in hn&&($n=!!hn.colorTexture,mr="rgba4"),"colorType"in hn&&(fr=hn.colorType,!$n)&&(fr==="half float"||fr==="float16"?mr="rgba16f":fr!=="float"&&fr!=="float32"||(mr="rgba32f")),"colorFormat"in hn&&(mr=hn.colorFormat,0<=un.indexOf(mr)?$n=!0:0<=pn.indexOf(mr)&&($n=!1))),("depthTexture"in hn||"depthStencilTexture"in hn)&&(nn=!(!hn.depthTexture&&!hn.depthStencilTexture)),"depth"in hn&&(typeof hn.depth=="boolean"?Fn=hn.depth:(qn=hn.depth,rr=!1)),"stencil"in hn&&(typeof hn.stencil=="boolean"?rr=hn.stencil:(ur=hn.stencil,Fn=!1)),"depthStencil"in hn&&(typeof hn.depthStencil=="boolean"?Fn=rr=hn.depthStencil:(Zt=hn.depthStencil,rr=Fn=!1))):Rn=Nn=1;var zn=null,_n=null,Cn=null,Un=null;if(Array.isArray(Mn))zn=Mn.map(At);else if(Mn)zn=[At(Mn)];else for(zn=Array(Zn),Mn=0;Mn<Zn;++Mn)zn[Mn]=ht(Rn,Nn,$n,mr,fr);for(Rn=Rn||zn[0].width,Nn=Nn||zn[0].height,qn?_n=At(qn):Fn&&!rr&&(_n=ht(Rn,Nn,nn,"depth","uint32")),ur?Cn=At(ur):rr&&!Fn&&(Cn=ht(Rn,Nn,!1,"stencil","uint8")),Zt?Un=At(Zt):!qn&&!ur&&rr&&Fn&&(Un=ht(Rn,Nn,nn,"depth stencil","depth stencil")),Fn=null,Mn=0;Mn<zn.length;++Mn)Tt(zn[Mn]),zn[Mn]&&zn[Mn].texture&&(rr=kt[zn[Mn].texture._texture.format]*mt[zn[Mn].texture._texture.type],Fn===null&&(Fn=rr));return Tt(_n),Tt(Cn),Tt(Un),Ot(sn),sn.width=Rn,sn.height=Nn,sn.colorAttachments=zn,sn.depthAttachment=_n,sn.stencilAttachment=Cn,sn.depthStencilAttachment=Un,dn.color=zn.map(pt),dn.depth=pt(_n),dn.stencil=pt(Cn),dn.depthStencil=pt(Un),dn.width=sn.width,dn.height=sn.height,jt(sn),dn}var sn=new Pt;return Ke.framebufferCount++,dn(vn,cn),X(dn,{resize:function(hn,En){var Mn=Math.max(0|hn,1),Rn=Math.max(0|En||Mn,1);if(Mn===sn.width&&Rn===sn.height)return dn;for(var Nn=sn.colorAttachments,Fn=0;Fn<Nn.length;++Fn)gt(Nn[Fn],Mn,Rn);return gt(sn.depthAttachment,Mn,Rn),gt(sn.stencilAttachment,Mn,Rn),gt(sn.depthStencilAttachment,Mn,Rn),sn.width=dn.width=Mn,sn.height=dn.height=Rn,jt(sn),dn},_reglType:"framebuffer",_framebuffer:sn,destroy:function(){Ht(sn),Ot(sn)},use:function(hn){Gt.setFBO({framebuffer:dn},hn)}})}var Gt={cur:null,next:null,dirty:!1,setFBO:null},un=["rgba"],pn=["rgba4","rgb565","rgb5 a1"];Ye.ext_srgb&&pn.push("srgba"),Ye.ext_color_buffer_half_float&&pn.push("rgba16f","rgb16f"),Ye.webgl_color_buffer_float&&pn.push("rgba32f");var Kt=["uint8"];Ye.oes_texture_half_float&&Kt.push("half float","float16"),Ye.oes_texture_float&&Kt.push("float","float32");var wn=0,Bn={};return X(Gt,{getFramebuffer:function(vn){return typeof vn=="function"&&vn._reglType==="framebuffer"&&(vn=vn._framebuffer)instanceof Pt?vn:null},create:Nt,createCube:function(vn){function cn(sn){var hn,En={color:null},Mn=0,Rn=null;hn="rgba";var Nn="uint8",Fn=1;if(typeof sn=="number"?Mn=0|sn:sn?("shape"in sn?Mn=sn.shape[0]:("radius"in sn&&(Mn=0|sn.radius),"width"in sn?Mn=0|sn.width:"height"in sn&&(Mn=0|sn.height)),("color"in sn||"colors"in sn)&&(Rn=sn.color||sn.colors,Array.isArray(Rn)),Rn||("colorCount"in sn&&(Fn=0|sn.colorCount),"colorType"in sn&&(Nn=sn.colorType),"colorFormat"in sn&&(hn=sn.colorFormat)),"depth"in sn&&(En.depth=sn.depth),"stencil"in sn&&(En.stencil=sn.stencil),"depthStencil"in sn&&(En.depthStencil=sn.depthStencil)):Mn=1,Rn)if(Array.isArray(Rn))for(sn=[],hn=0;hn<Rn.length;++hn)sn[hn]=Rn[hn];else sn=[Rn];else for(sn=Array(Fn),Rn={radius:Mn,format:hn,type:Nn},hn=0;hn<Fn;++hn)sn[hn]=Se.createCube(Rn);for(En.color=Array(sn.length),hn=0;hn<sn.length;++hn)Fn=sn[hn],Mn=Mn||Fn.width,En.color[hn]={target:34069,data:sn[hn]};for(hn=0;6>hn;++hn){for(Fn=0;Fn<sn.length;++Fn)En.color[Fn].target=34069+hn;0<hn&&(En.depth=dn[0].depth,En.stencil=dn[0].stencil,En.depthStencil=dn[0].depthStencil),dn[hn]?dn[hn](En):dn[hn]=Nt(En)}return X(cn,{width:Mn,height:Mn,color:sn})}var dn=Array(6);return cn(vn),X(cn,{faces:dn,resize:function(sn){var hn=0|sn;if(hn===cn.width)return cn;var En=cn.color;for(sn=0;sn<En.length;++sn)En[sn].resize(hn);for(sn=0;6>sn;++sn)dn[sn].resize(hn);return cn.width=cn.height=hn,cn},_reglType:"framebufferCube",destroy:function(){dn.forEach(function(sn){sn.destroy()})}})},clear:function(){he(Bn).forEach(Ht)},restore:function(){Gt.cur=null,Gt.next=null,Gt.dirty=!0,he(Bn).forEach(function(vn){vn.framebuffer=Be.createFramebuffer(),jt(vn)})}})}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function L(Be,Ye,rt,Se,ze,Ke,st){function ct(){this.id=++At,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var gt=Ye.oes_vertex_array_object;this.vao=gt?gt.createVertexArrayOES():null,ht[this.id]=this,this.buffers=[]}var Tt=rt.maxAttributes,Et=Array(Tt);for(rt=0;rt<Tt;++rt)Et[rt]=new E;var At=0,ht={},pt={Record:E,scope:{},state:Et,currentVAO:null,targetVAO:null,restore:Ye.oes_vertex_array_object?function(){Ye.oes_vertex_array_object&&he(ht).forEach(function(gt){gt.refresh()})}:function(){},createVAO:function(gt){function Pt(Ht){var jt;Array.isArray(Ht)?(jt=Ht,Ot.elements&&Ot.ownsElements&&Ot.elements.destroy(),Ot.elements=null,Ot.ownsElements=!1,Ot.offset=0,Ot.count=0,Ot.instances=-1,Ot.primitive=4):(Ht.elements?(jt=Ht.elements,Ot.ownsElements?(typeof jt=="function"&&jt._reglType==="elements"?Ot.elements.destroy():Ot.elements(jt),Ot.ownsElements=!1):Ke.getElements(Ht.elements)?(Ot.elements=Ht.elements,Ot.ownsElements=!1):(Ot.elements=Ke.create(Ht.elements),Ot.ownsElements=!0)):(Ot.elements=null,Ot.ownsElements=!1),jt=Ht.attributes,Ot.offset=0,Ot.count=-1,Ot.instances=-1,Ot.primitive=4,Ot.elements&&(Ot.count=Ot.elements._elements.vertCount,Ot.primitive=Ot.elements._elements.primType),"offset"in Ht&&(Ot.offset=0|Ht.offset),"count"in Ht&&(Ot.count=0|Ht.count),"instances"in Ht&&(Ot.instances=0|Ht.instances),"primitive"in Ht&&(Ot.primitive=oe[Ht.primitive])),Ht={};var Nt=Ot.attributes;Nt.length=jt.length;for(var Gt=0;Gt<jt.length;++Gt){var un,pn=jt[Gt],Kt=Nt[Gt]=new E,wn=pn.data||pn;Array.isArray(wn)||ge(wn)||t(wn)?(Ot.buffers[Gt]&&(un=Ot.buffers[Gt],ge(wn)&&un._buffer.byteLength>=wn.byteLength?un.subdata(wn):(un.destroy(),Ot.buffers[Gt]=null)),Ot.buffers[Gt]||(un=Ot.buffers[Gt]=ze.create(pn,34962,!1,!0)),Kt.buffer=ze.getBuffer(un),Kt.size=0|Kt.buffer.dimension,Kt.normalized=!1,Kt.type=Kt.buffer.dtype,Kt.offset=0,Kt.stride=0,Kt.divisor=0,Kt.state=1,Ht[Gt]=1):ze.getBuffer(pn)?(Kt.buffer=ze.getBuffer(pn),Kt.size=0|Kt.buffer.dimension,Kt.normalized=!1,Kt.type=Kt.buffer.dtype,Kt.offset=0,Kt.stride=0,Kt.divisor=0,Kt.state=1):ze.getBuffer(pn.buffer)?(Kt.buffer=ze.getBuffer(pn.buffer),Kt.size=0|(+pn.size||Kt.buffer.dimension),Kt.normalized=!!pn.normalized||!1,Kt.type="type"in pn?xe[pn.type]:Kt.buffer.dtype,Kt.offset=0|(pn.offset||0),Kt.stride=0|(pn.stride||0),Kt.divisor=0|(pn.divisor||0),Kt.state=1):"x"in pn&&(Kt.x=+pn.x||0,Kt.y=+pn.y||0,Kt.z=+pn.z||0,Kt.w=+pn.w||0,Kt.state=2)}for(un=0;un<Ot.buffers.length;++un)!Ht[un]&&Ot.buffers[un]&&(Ot.buffers[un].destroy(),Ot.buffers[un]=null);return Ot.refresh(),Pt}var Ot=new ct;return Se.vaoCount+=1,Pt.destroy=function(){for(var Ht=0;Ht<Ot.buffers.length;++Ht)Ot.buffers[Ht]&&Ot.buffers[Ht].destroy();Ot.buffers.length=0,Ot.ownsElements&&(Ot.elements.destroy(),Ot.elements=null,Ot.ownsElements=!1),Ot.destroy()},Pt._vao=Ot,Pt._reglType="vao",Pt(gt)},getVAO:function(gt){return typeof gt=="function"&&gt._vao?gt._vao:null},destroyBuffer:function(gt){for(var Pt=0;Pt<Et.length;++Pt){var Ot=Et[Pt];Ot.buffer===gt&&(Be.disableVertexAttribArray(Pt),Ot.buffer=null)}},setVAO:Ye.oes_vertex_array_object?function(gt){if(gt!==pt.currentVAO){var Pt=Ye.oes_vertex_array_object;gt?Pt.bindVertexArrayOES(gt.vao):Pt.bindVertexArrayOES(null),pt.currentVAO=gt}}:function(gt){if(gt!==pt.currentVAO){if(gt)gt.bindAttrs();else{for(var Pt=Ye.angle_instanced_arrays,Ot=0;Ot<Et.length;++Ot){var Ht=Et[Ot];Ht.buffer?(Be.enableVertexAttribArray(Ot),Ht.buffer.bind(),Be.vertexAttribPointer(Ot,Ht.size,Ht.type,Ht.normalized,Ht.stride,Ht.offfset),Pt&&Ht.divisor&&Pt.vertexAttribDivisorANGLE(Ot,Ht.divisor)):(Be.disableVertexAttribArray(Ot),Be.vertexAttrib4f(Ot,Ht.x,Ht.y,Ht.z,Ht.w))}st.elements?Be.bindBuffer(34963,st.elements.buffer.buffer):Be.bindBuffer(34963,null)}pt.currentVAO=gt}},clear:Ye.oes_vertex_array_object?function(){he(ht).forEach(function(gt){gt.destroy()})}:function(){}};return ct.prototype.bindAttrs=function(){for(var gt=Ye.angle_instanced_arrays,Pt=this.attributes,Ot=0;Ot<Pt.length;++Ot){var Ht=Pt[Ot];Ht.buffer?(Be.enableVertexAttribArray(Ot),Be.bindBuffer(34962,Ht.buffer.buffer),Be.vertexAttribPointer(Ot,Ht.size,Ht.type,Ht.normalized,Ht.stride,Ht.offset),gt&&Ht.divisor&&gt.vertexAttribDivisorANGLE(Ot,Ht.divisor)):(Be.disableVertexAttribArray(Ot),Be.vertexAttrib4f(Ot,Ht.x,Ht.y,Ht.z,Ht.w))}for(gt=Pt.length;gt<Tt;++gt)Be.disableVertexAttribArray(gt);(gt=Ke.getElements(this.elements))?Be.bindBuffer(34963,gt.buffer.buffer):Be.bindBuffer(34963,null)},ct.prototype.refresh=function(){var gt=Ye.oes_vertex_array_object;gt&&(gt.bindVertexArrayOES(this.vao),this.bindAttrs(),pt.currentVAO=null,gt.bindVertexArrayOES(null))},ct.prototype.destroy=function(){if(this.vao){var gt=Ye.oes_vertex_array_object;this===pt.currentVAO&&(pt.currentVAO=null,gt.bindVertexArrayOES(null)),gt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ht[this.id]&&(delete ht[this.id],--Se.vaoCount)},pt}function C(Be,Ye,rt,Se){function ze(Pt,Ot,Ht,jt){this.name=Pt,this.id=Ot,this.location=Ht,this.info=jt}function Ke(Pt,Ot){for(var Ht=0;Ht<Pt.length;++Ht)if(Pt[Ht].id===Ot.id)return void(Pt[Ht].location=Ot.location);Pt.push(Ot)}function st(Pt,Ot,Ht){if(!(Nt=(Ht=Pt===35632?Et:At)[Ot])){var jt=Ye.str(Ot),Nt=Be.createShader(Pt);Be.shaderSource(Nt,jt),Be.compileShader(Nt),Ht[Ot]=Nt}return Nt}function ct(Pt,Ot){this.id=gt++,this.fragId=Pt,this.vertId=Ot,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Se.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Tt(Pt,Ot,Ht){var jt;jt=st(35632,Pt.fragId);var Nt=st(35633,Pt.vertId);if(Ot=Pt.program=Be.createProgram(),Be.attachShader(Ot,jt),Be.attachShader(Ot,Nt),Ht)for(jt=0;jt<Ht.length;++jt)Nt=Ht[jt],Be.bindAttribLocation(Ot,Nt[0],Nt[1]);Be.linkProgram(Ot),Nt=Be.getProgramParameter(Ot,35718),Se.profile&&(Pt.stats.uniformsCount=Nt);var Gt=Pt.uniforms;for(jt=0;jt<Nt;++jt)if(Ht=Be.getActiveUniform(Ot,jt))if(1<Ht.size)for(var un=0;un<Ht.size;++un){var pn=Ht.name.replace("[0]","["+un+"]");Ke(Gt,new ze(pn,Ye.id(pn),Be.getUniformLocation(Ot,pn),Ht))}else Ke(Gt,new ze(Ht.name,Ye.id(Ht.name),Be.getUniformLocation(Ot,Ht.name),Ht));for(Nt=Be.getProgramParameter(Ot,35721),Se.profile&&(Pt.stats.attributesCount=Nt),Pt=Pt.attributes,jt=0;jt<Nt;++jt)(Ht=Be.getActiveAttrib(Ot,jt))&&Ke(Pt,new ze(Ht.name,Ye.id(Ht.name),Be.getAttribLocation(Ot,Ht.name),Ht))}var Et={},At={},ht={},pt=[],gt=0;return Se.profile&&(rt.getMaxUniformsCount=function(){var Pt=0;return pt.forEach(function(Ot){Ot.stats.uniformsCount>Pt&&(Pt=Ot.stats.uniformsCount)}),Pt},rt.getMaxAttributesCount=function(){var Pt=0;return pt.forEach(function(Ot){Ot.stats.attributesCount>Pt&&(Pt=Ot.stats.attributesCount)}),Pt}),{clear:function(){var Pt=Be.deleteShader.bind(Be);he(Et).forEach(Pt),Et={},he(At).forEach(Pt),At={},pt.forEach(function(Ot){Be.deleteProgram(Ot.program)}),pt.length=0,ht={},rt.shaderCount=0},program:function(Pt,Ot,Ht,jt){var Nt=ht[Ot];Nt||(Nt=ht[Ot]={});var Gt=Nt[Pt];if(Gt&&(Gt.refCount++,!jt))return Gt;var un=new ct(Ot,Pt);return rt.shaderCount++,Tt(un,Ht,jt),Gt||(Nt[Pt]=un),pt.push(un),X(un,{destroy:function(){if(un.refCount--,0>=un.refCount){Be.deleteProgram(un.program);var pn=pt.indexOf(un);pt.splice(pn,1),rt.shaderCount--}0>=Nt[un.vertId].refCount&&(Be.deleteShader(At[un.vertId]),delete At[un.vertId],delete ht[un.fragId][un.vertId]),Object.keys(ht[un.fragId]).length||(Be.deleteShader(Et[un.fragId]),delete Et[un.fragId],delete ht[un.fragId])}})},restore:function(){Et={},At={};for(var Pt=0;Pt<pt.length;++Pt)Tt(pt[Pt],null,pt[Pt].attributes.map(function(Ot){return[Ot.location,Ot.name]}))},shader:st,frag:-1,vert:-1}}function P(Be,Ye,rt,Se,ze,Ke,st){function ct(Tt){var Et;Et=Ye.next===null?5121:Ye.next.colorAttachments[0].texture._texture.type;var At=0,ht=0,pt=Se.framebufferWidth,gt=Se.framebufferHeight,Pt=null;return ge(Tt)?Pt=Tt:Tt&&(At=0|Tt.x,ht=0|Tt.y,pt=0|(Tt.width||Se.framebufferWidth-At),gt=0|(Tt.height||Se.framebufferHeight-ht),Pt=Tt.data||null),rt(),Tt=pt*gt*4,Pt||(Et===5121?Pt=new Uint8Array(Tt):Et===5126&&(Pt=Pt||new Float32Array(Tt))),Be.pixelStorei(3333,4),Be.readPixels(At,ht,pt,gt,6408,Et,Pt),Pt}return function(Tt){return Tt&&"framebuffer"in Tt?function(Et){var At;return Ye.setFBO({framebuffer:Et.framebuffer},function(){At=ct(Et)}),At}(Tt):ct(Tt)}}function I(Be,Ye){return Be>>>Ye|Be<<32-Ye}function U(Be,Ye){var rt=(65535&Be)+(65535&Ye);return(Be>>16)+(Ye>>16)+(rt>>16)<<16|65535&rt}function z(Be){return Array.prototype.slice.call(Be)}function H(Be){return z(Be).join("")}function F(Be){function Ye(){var At=[],ht=[];return X(function(){At.push.apply(At,z(arguments))},{def:function(){var pt="v"+ze++;return ht.push(pt),0<arguments.length&&(At.push(pt,"="),At.push.apply(At,z(arguments)),At.push(";")),pt},toString:function(){return H([0<ht.length?"var "+ht.join(",")+";":"",H(At)])}})}function rt(){function At(Ot,Ht){pt(Ot,Ht,"=",ht.def(Ot,Ht),";")}var ht=Ye(),pt=Ye(),gt=ht.toString,Pt=pt.toString;return X(function(){ht.apply(ht,z(arguments))},{def:ht.def,entry:ht,exit:pt,save:At,set:function(Ot,Ht,jt){At(Ot,Ht),ht(Ot,Ht,"=",jt,";")},toString:function(){return gt()+Pt()}})}var Se=Be&&Be.cache,ze=0,Ke=[],st=[],ct=[],Tt=Ye(),Et={};return{global:Tt,link:function(At,ht){var pt=ht&&ht.stable;if(!pt){for(var gt=0;gt<st.length;++gt)if(st[gt]===At&&!ct[gt])return Ke[gt]}return gt="g"+ze++,Ke.push(gt),st.push(At),ct.push(pt),gt},block:Ye,proc:function(At,ht){function pt(){var Ht="a"+gt.length;return gt.push(Ht),Ht}var gt=[];ht=ht||0;for(var Pt=0;Pt<ht;++Pt)pt();var Ot=(Pt=rt()).toString;return Et[At]=X(Pt,{arg:pt,toString:function(){return H(["function(",gt.join(),"){",Ot(),"}"])}})},scope:rt,cond:function(){var At=H(arguments),ht=rt(),pt=rt(),gt=ht.toString,Pt=pt.toString;return X(ht,{then:function(){return ht.apply(ht,z(arguments)),this},else:function(){return pt.apply(pt,z(arguments)),this},toString:function(){var Ot=Pt();return Ot&&(Ot="else{"+Ot+"}"),H(["if(",At,"){",gt(),"}",Ot])}})},compile:function(){var At=['"use strict";',Tt,"return {"];Object.keys(Et).forEach(function(gt){At.push('"',gt,'":',Et[gt].toString(),",")}),At.push("}");var ht,pt=H(At).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Se&&(ht=function(gt){for(var Pt,Ot="",Ht=0;Ht<gt.length;Ht++)Pt=gt.charCodeAt(Ht),Ot+="0123456789abcdef".charAt(Pt>>>4&15)+"0123456789abcdef".charAt(15&Pt);return Ot}(function(gt){for(var Pt=Array(gt.length>>2),Ot=0;Ot<Pt.length;Ot++)Pt[Ot]=0;for(Ot=0;Ot<8*gt.length;Ot+=8)Pt[Ot>>5]|=(255&gt.charCodeAt(Ot/8))<<24-Ot%32;var Ht,jt,Nt,Gt,un,pn,Kt,wn,Bn,vn,cn,dn=8*gt.length;for(gt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Ot=Array(64),Pt[dn>>5]|=128<<24-dn%32,Pt[15+(dn+64>>9<<4)]=dn,wn=0;wn<Pt.length;wn+=16){for(dn=gt[0],Ht=gt[1],jt=gt[2],Nt=gt[3],Gt=gt[4],un=gt[5],pn=gt[6],Kt=gt[7],Bn=0;64>Bn;Bn++){var sn;16>Bn?Ot[Bn]=Pt[Bn+wn]:(vn=Bn,cn=U(cn=I(cn=Ot[Bn-2],17)^I(cn,19)^cn>>>10,Ot[Bn-7]),sn=I(sn=Ot[Bn-15],7)^I(sn,18)^sn>>>3,Ot[vn]=U(U(cn,sn),Ot[Bn-16])),vn=U(U(U(U(Kt,vn=I(vn=Gt,6)^I(vn,11)^I(vn,25)),Gt&un^~Gt&pn),wt[Bn]),Ot[Bn]),cn=U(Kt=I(Kt=dn,2)^I(Kt,13)^I(Kt,22),dn&Ht^dn&jt^Ht&jt),Kt=pn,pn=un,un=Gt,Gt=U(Nt,vn),Nt=jt,jt=Ht,Ht=dn,dn=U(vn,cn)}gt[0]=U(dn,gt[0]),gt[1]=U(Ht,gt[1]),gt[2]=U(jt,gt[2]),gt[3]=U(Nt,gt[3]),gt[4]=U(Gt,gt[4]),gt[5]=U(un,gt[5]),gt[6]=U(pn,gt[6]),gt[7]=U(Kt,gt[7])}for(Pt="",Ot=0;Ot<32*gt.length;Ot+=8)Pt+=String.fromCharCode(gt[Ot>>5]>>>24-Ot%32&255);return Pt}(function(gt){for(var Pt,Ot,Ht="",jt=-1;++jt<gt.length;)Pt=gt.charCodeAt(jt),Ot=jt+1<gt.length?gt.charCodeAt(jt+1):0,55296<=Pt&&56319>=Pt&&56320<=Ot&&57343>=Ot&&(Pt=65536+((1023&Pt)<<10)+(1023&Ot),jt++),127>=Pt?Ht+=String.fromCharCode(Pt):2047>=Pt?Ht+=String.fromCharCode(192|Pt>>>6&31,128|63&Pt):65535>=Pt?Ht+=String.fromCharCode(224|Pt>>>12&15,128|Pt>>>6&63,128|63&Pt):2097151>=Pt&&(Ht+=String.fromCharCode(240|Pt>>>18&7,128|Pt>>>12&63,128|Pt>>>6&63,128|63&Pt));return Ht}(pt))),Se[ht])?Se[ht].apply(null,st):(pt=Function.apply(null,Ke.concat(pt)),Se&&(Se[ht]=pt),pt.apply(null,st))}}}function N(Be){return Array.isArray(Be)||ge(Be)||t(Be)}function B(Be){return Be.sort(function(Ye,rt){return Ye==="viewport"?-1:rt==="viewport"?1:Ye<rt?-1:1})}function j(Be,Ye,rt,Se){this.thisDep=Be,this.contextDep=Ye,this.propDep=rt,this.append=Se}function K(Be){return Be&&!(Be.thisDep||Be.contextDep||Be.propDep)}function G(Be){return new j(!1,!1,!1,Be)}function V(Be,Ye){var rt=Be.type;if(rt===0)return new j(!0,1<=(rt=Be.data.length),2<=rt,Ye);if(rt===4)return new j((rt=Be.data).thisDep,rt.contextDep,rt.propDep,Ye);if(rt===5)return new j(!1,!1,!1,Ye);if(rt===6){for(var Se=rt=!1,ze=!1,Ke=0;Ke<Be.data.length;++Ke){var st=Be.data[Ke];st.type===1?ze=!0:st.type===2?Se=!0:st.type===3?rt=!0:st.type===0?(rt=!0,1<=(st=st.data)&&(Se=!0),2<=st&&(ze=!0)):st.type===4&&(rt=rt||st.data.thisDep,Se=Se||st.data.contextDep,ze=ze||st.data.propDep)}return new j(rt,Se,ze,Ye)}return new j(rt===3,rt===2,rt===1,Ye)}function W(Be,Ye,rt,Se,ze,Ke,st,ct,Tt,Et,At,ht,pt,gt,Pt,Ot){function Ht(zt){return zt.replace(".","_")}function jt(zt,Wt,tn){var Sn=Ht(zt);Un.push(zt),Cn[Sn]=_n[Sn]=!!tn,Gn[Sn]=Wt}function Nt(zt,Wt,tn){var Sn=Ht(zt);Un.push(zt),Array.isArray(tn)?(_n[Sn]=tn.slice(),Cn[Sn]=tn.slice()):_n[Sn]=Cn[Sn]=tn,ar[Sn]=Wt}function Gt(){var zt=F({cache:Pt}),Wt=zt.link,tn=zt.global;zt.id=kn++,zt.batchId="0";var Sn=Wt(yr),An=zt.shared={props:"a0"};Object.keys(yr).forEach(function(fn){An[fn]=tn.def(Sn,".",fn)});var Tn=zt.next={},an=zt.current={};Object.keys(ar).forEach(function(fn){Array.isArray(_n[fn])&&(Tn[fn]=tn.def(An.next,".",fn),an[fn]=tn.def(An.current,".",fn))});var mn=zt.constants={};Object.keys($t).forEach(function(fn){mn[fn]=tn.def(JSON.stringify($t[fn]))}),zt.invoke=function(fn,yn){switch(yn.type){case 0:var Ln=["this",An.context,An.props,zt.batchId];return fn.def(Wt(yn.data),".call(",Ln.slice(0,Math.max(yn.data.length+1,4)),")");case 1:return fn.def(An.props,yn.data);case 2:return fn.def(An.context,yn.data);case 3:return fn.def("this",yn.data);case 4:return yn.data.append(zt,fn),yn.data.ref;case 5:return yn.data.toString();case 6:return yn.data.map(function(Hn){return zt.invoke(fn,Hn)})}},zt.attribCache={};var on={};return zt.scopeAttrib=function(fn){if((fn=Ye.id(fn))in on)return on[fn];var yn=Et.scope[fn];return yn||(yn=Et.scope[fn]=new qn),on[fn]=Wt(yn)},zt}function un(zt,Wt){var tn=zt.static,Sn=zt.dynamic;if("framebuffer"in tn){var An=tn.framebuffer;return An?(An=ct.getFramebuffer(An),G(function(an,mn){var on=an.link(An),fn=an.shared;return mn.set(fn.framebuffer,".next",on),fn=fn.context,mn.set(fn,".framebufferWidth",on+".width"),mn.set(fn,".framebufferHeight",on+".height"),on})):G(function(an,mn){var on=an.shared;return mn.set(on.framebuffer,".next","null"),on=on.context,mn.set(on,".framebufferWidth",on+".drawingBufferWidth"),mn.set(on,".framebufferHeight",on+".drawingBufferHeight"),"null"})}if("framebuffer"in Sn){var Tn=Sn.framebuffer;return V(Tn,function(an,mn){var on=an.invoke(mn,Tn),fn=an.shared,yn=fn.framebuffer;return on=mn.def(yn,".getFramebuffer(",on,")"),mn.set(yn,".next",on),fn=fn.context,mn.set(fn,".framebufferWidth",on+"?"+on+".width:"+fn+".drawingBufferWidth"),mn.set(fn,".framebufferHeight",on+"?"+on+".height:"+fn+".drawingBufferHeight"),on})}return null}function pn(zt,Wt,tn){function Sn(fn){if(fn in An){var yn=Ye.id(An[fn]);return(fn=G(function(){return yn})).id=yn,fn}if(fn in Tn){var Ln=Tn[fn];return V(Ln,function(Hn,Wn){var Kn=Hn.invoke(Wn,Ln);return Wn.def(Hn.shared.strings,".id(",Kn,")")})}return null}var An=zt.static,Tn=zt.dynamic,an=Sn("frag"),mn=Sn("vert"),on=null;return K(an)&&K(mn)?(on=At.program(mn.id,an.id,null,tn),zt=G(function(fn,yn){return fn.link(on)})):zt=new j(an&&an.thisDep||mn&&mn.thisDep,an&&an.contextDep||mn&&mn.contextDep,an&&an.propDep||mn&&mn.propDep,function(fn,yn){var Ln,Hn,Wn=fn.shared.shader;return Ln=an?an.append(fn,yn):yn.def(Wn,".","frag"),Hn=mn?mn.append(fn,yn):yn.def(Wn,".","vert"),yn.def(Wn+".program("+Hn+","+Ln+")")}),{frag:an,vert:mn,progVar:zt,program:on}}function Kt(zt,Wt){function tn(Kn,nr){if(Kn in Sn){var er=0|Sn[Kn];return nr?Tn.offset=er:Tn.instances=er,G(function(ir,lr){return nr&&(ir.OFFSET=er),er})}if(Kn in An){var or=An[Kn];return V(or,function(ir,lr){var br=ir.invoke(lr,or);return nr&&(ir.OFFSET=br),br})}if(nr){if(on)return G(function(ir,lr){return ir.OFFSET=0});if(an)return new j(mn.thisDep,mn.contextDep,mn.propDep,function(ir,lr){return lr.def(ir.shared.vao+".currentVAO?"+ir.shared.vao+".currentVAO.offset:0")})}else if(an)return new j(mn.thisDep,mn.contextDep,mn.propDep,function(ir,lr){return lr.def(ir.shared.vao+".currentVAO?"+ir.shared.vao+".currentVAO.instances:-1")});return null}var Sn=zt.static,An=zt.dynamic,Tn={},an=!1,mn=function(){if("vao"in Sn){var Kn=Sn.vao;return Kn!==null&&Et.getVAO(Kn)===null&&(Kn=Et.createVAO(Kn)),an=!0,Tn.vao=Kn,G(function(er){var or=Et.getVAO(Kn);return or?er.link(or):"null"})}if("vao"in An){an=!0;var nr=An.vao;return V(nr,function(er,or){var ir=er.invoke(or,nr);return or.def(er.shared.vao+".getVAO("+ir+")")})}return null}(),on=!1,fn=function(){if("elements"in Sn){var Kn=Sn.elements;if(Tn.elements=Kn,N(Kn)){var nr=Tn.elements=Ke.create(Kn,!0);Kn=Ke.getElements(nr),on=!0}else Kn&&(Kn=Ke.getElements(Kn),on=!0);return nr=G(function(or,ir){if(Kn){var lr=or.link(Kn);return or.ELEMENTS=lr}return or.ELEMENTS=null}),nr.value=Kn,nr}if("elements"in An){on=!0;var er=An.elements;return V(er,function(or,ir){var lr=(br=or.shared).isBufferArgs,br=br.elements,Ur=or.invoke(ir,er),Sr=ir.def("null");return lr=ir.def(lr,"(",Ur,")"),Ur=or.cond(lr).then(Sr,"=",br,".createStream(",Ur,");").else(Sr,"=",br,".getElements(",Ur,");"),ir.entry(Ur),ir.exit(or.cond(lr).then(br,".destroyStream(",Sr,");")),or.ELEMENTS=Sr})}return an?new j(mn.thisDep,mn.contextDep,mn.propDep,function(or,ir){return ir.def(or.shared.vao+".currentVAO?"+or.shared.elements+".getElements("+or.shared.vao+".currentVAO.elements):null")}):null}(),yn=tn("offset",!0),Ln=function(){if("primitive"in Sn){var Kn=Sn.primitive;return Tn.primitive=Kn,G(function(er,or){return oe[Kn]})}if("primitive"in An){var nr=An.primitive;return V(nr,function(er,or){var ir=er.constants.primTypes,lr=er.invoke(or,nr);return or.def(ir,"[",lr,"]")})}return on?K(fn)?fn.value?G(function(er,or){return or.def(er.ELEMENTS,".primType")}):G(function(){return 4}):new j(fn.thisDep,fn.contextDep,fn.propDep,function(er,or){var ir=er.ELEMENTS;return or.def(ir,"?",ir,".primType:",4)}):an?new j(mn.thisDep,mn.contextDep,mn.propDep,function(er,or){return or.def(er.shared.vao+".currentVAO?"+er.shared.vao+".currentVAO.primitive:4")}):null}(),Hn=function(){if("count"in Sn){var Kn=0|Sn.count;return Tn.count=Kn,G(function(){return Kn})}if("count"in An){var nr=An.count;return V(nr,function(er,or){return er.invoke(or,nr)})}return on?K(fn)?fn?yn?new j(yn.thisDep,yn.contextDep,yn.propDep,function(er,or){return or.def(er.ELEMENTS,".vertCount-",er.OFFSET)}):G(function(er,or){return or.def(er.ELEMENTS,".vertCount")}):G(function(){return-1}):new j(fn.thisDep||yn.thisDep,fn.contextDep||yn.contextDep,fn.propDep||yn.propDep,function(er,or){var ir=er.ELEMENTS;return er.OFFSET?or.def(ir,"?",ir,".vertCount-",er.OFFSET,":-1"):or.def(ir,"?",ir,".vertCount:-1")}):an?new j(mn.thisDep,mn.contextDep,mn.propDep,function(er,or){return or.def(er.shared.vao,".currentVAO?",er.shared.vao,".currentVAO.count:-1")}):null}(),Wn=tn("instances",!1);return{elements:fn,primitive:Ln,count:Hn,instances:Wn,offset:yn,vao:mn,vaoActive:an,elementsActive:on,static:Tn}}function wn(zt,Wt){var tn=zt.static,Sn=zt.dynamic,An={};return Object.keys(tn).forEach(function(Tn){var an=tn[Tn],mn=Ye.id(Tn),on=new qn;if(N(an))on.state=1,on.buffer=ze.getBuffer(ze.create(an,34962,!1,!0)),on.type=0;else if(yn=ze.getBuffer(an))on.state=1,on.buffer=yn,on.type=0;else if("constant"in an){var fn=an.constant;on.buffer="null",on.state=2,typeof fn=="number"?on.x=fn:Lt.forEach(function(er,or){or<fn.length&&(on[er]=fn[or])})}else{var yn=N(an.buffer)?ze.getBuffer(ze.create(an.buffer,34962,!1,!0)):ze.getBuffer(an.buffer),Ln=0|an.offset,Hn=0|an.stride,Wn=0|an.size,Kn=!!an.normalized,nr=0;"type"in an&&(nr=xe[an.type]),an=0|an.divisor,on.buffer=yn,on.state=1,on.size=Wn,on.normalized=Kn,on.type=nr||yn.dtype,on.offset=Ln,on.stride=Hn,on.divisor=an}An[Tn]=G(function(er,or){var ir=er.attribCache;if(mn in ir)return ir[mn];var lr={isStream:!1};return Object.keys(on).forEach(function(br){lr[br]=on[br]}),on.buffer&&(lr.buffer=er.link(on.buffer),lr.type=lr.type||lr.buffer+".dtype"),ir[mn]=lr})}),Object.keys(Sn).forEach(function(Tn){var an=Sn[Tn];An[Tn]=V(an,function(mn,on){function fn(ir){on(Kn[ir],"=",yn,".",ir,"|0;")}var yn=mn.invoke(on,an),Ln=mn.shared,Hn=mn.constants,Wn=Ln.isBufferArgs,Kn=(Ln=Ln.buffer,{isStream:on.def(!1)}),nr=new qn;nr.state=1,Object.keys(nr).forEach(function(ir){Kn[ir]=on.def(""+nr[ir])});var er=Kn.buffer,or=Kn.type;return on("if(",Wn,"(",yn,")){",Kn.isStream,"=true;",er,"=",Ln,".createStream(",34962,",",yn,");",or,"=",er,".dtype;","}else{",er,"=",Ln,".getBuffer(",yn,");","if(",er,"){",or,"=",er,".dtype;",'}else if("constant" in ',yn,"){",Kn.state,"=",2,";","if(typeof "+yn+'.constant === "number"){',Kn[Lt[0]],"=",yn,".constant;",Lt.slice(1).map(function(ir){return Kn[ir]}).join("="),"=0;","}else{",Lt.map(function(ir,lr){return Kn[ir]+"="+yn+".constant.length>"+lr+"?"+yn+".constant["+lr+"]:0;"}).join(""),"}}else{","if(",Wn,"(",yn,".buffer)){",er,"=",Ln,".createStream(",34962,",",yn,".buffer);","}else{",er,"=",Ln,".getBuffer(",yn,".buffer);","}",or,'="type" in ',yn,"?",Hn.glTypes,"[",yn,".type]:",er,".dtype;",Kn.normalized,"=!!",yn,".normalized;"),fn("size"),fn("offset"),fn("stride"),fn("divisor"),on("}}"),on.exit("if(",Kn.isStream,"){",Ln,".destroyStream(",er,");","}"),Kn})}),An}function Bn(zt,Wt,tn,Sn,An){function Tn(nr){var er=mn[nr];er&&(fn[nr]=er)}var an=function(nr,er){if(typeof(or=nr.static).frag=="string"&&typeof or.vert=="string"){if(0<Object.keys(er.dynamic).length)return null;var or=er.static,ir=Object.keys(or);if(0<ir.length&&typeof or[ir[0]]=="number"){for(var lr=[],br=0;br<ir.length;++br)lr.push([0|or[ir[br]],ir[br]]);return lr}}return null}(zt,Wt),mn=function(nr,er,or){function ir(Sr){if(Sr in lr){var cr=lr[Sr];Sr=!0;var Lr,Rr,li=0|cr.x,Si=0|cr.y;return"width"in cr?Lr=0|cr.width:Sr=!1,"height"in cr?Rr=0|cr.height:Sr=!1,new j(!Sr&&er&&er.thisDep,!Sr&&er&&er.contextDep,!Sr&&er&&er.propDep,function(La,Vi){var vi=La.shared.context,Ca=Lr;"width"in cr||(Ca=Vi.def(vi,".","framebufferWidth","-",li));var io=Rr;return"height"in cr||(io=Vi.def(vi,".","framebufferHeight","-",Si)),[li,Si,Ca,io]})}if(Sr in br){var Oi=br[Sr];return Sr=V(Oi,function(La,Vi){var vi=La.invoke(Vi,Oi),Ca=La.shared.context,io=Vi.def(vi,".x|0"),Yo=Vi.def(vi,".y|0");return[io,Yo,Vi.def('"width" in ',vi,"?",vi,".width|0:","(",Ca,".","framebufferWidth","-",io,")"),vi=Vi.def('"height" in ',vi,"?",vi,".height|0:","(",Ca,".","framebufferHeight","-",Yo,")")]}),er&&(Sr.thisDep=Sr.thisDep||er.thisDep,Sr.contextDep=Sr.contextDep||er.contextDep,Sr.propDep=Sr.propDep||er.propDep),Sr}return er?new j(er.thisDep,er.contextDep,er.propDep,function(La,Vi){var vi=La.shared.context;return[0,0,Vi.def(vi,".","framebufferWidth"),Vi.def(vi,".","framebufferHeight")]}):null}var lr=nr.static,br=nr.dynamic;if(nr=ir("viewport")){var Ur=nr;nr=new j(nr.thisDep,nr.contextDep,nr.propDep,function(Sr,cr){var Lr=Ur.append(Sr,cr),Rr=Sr.shared.context;return cr.set(Rr,".viewportWidth",Lr[2]),cr.set(Rr,".viewportHeight",Lr[3]),Lr})}return{viewport:nr,scissor_box:ir("scissor.box")}}(zt,Ln=un(zt)),on=Kt(zt),fn=function(nr,er){var or=nr.static,ir=nr.dynamic,lr={};return Un.forEach(function(br){function Ur(cr,Lr){if(br in or){var Rr=cr(or[br]);lr[Sr]=G(function(){return Rr})}else if(br in ir){var li=ir[br];lr[Sr]=V(li,function(Si,Oi){return Lr(Si,Oi,Si.invoke(Oi,li))})}}var Sr=Ht(br);switch(br){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return Ur(function(cr){return cr},function(cr,Lr,Rr){return Rr});case"depth.func":return Ur(function(cr){return Ut[cr]},function(cr,Lr,Rr){return Lr.def(cr.constants.compareFuncs,"[",Rr,"]")});case"depth.range":return Ur(function(cr){return cr},function(cr,Lr,Rr){return[Lr.def("+",Rr,"[0]"),Lr=Lr.def("+",Rr,"[1]")]});case"blend.func":return Ur(function(cr){return[It["srcRGB"in cr?cr.srcRGB:cr.src],It["dstRGB"in cr?cr.dstRGB:cr.dst],It["srcAlpha"in cr?cr.srcAlpha:cr.src],It["dstAlpha"in cr?cr.dstAlpha:cr.dst]]},function(cr,Lr,Rr){function li(Vi,vi){return Lr.def('"',Vi,vi,'" in ',Rr,"?",Rr,".",Vi,vi,":",Rr,".",Vi)}cr=cr.constants.blendFuncs;var Si=li("src","RGB"),Oi=li("dst","RGB"),La=(Si=Lr.def(cr,"[",Si,"]"),Lr.def(cr,"[",li("src","Alpha"),"]"));return[Si,Oi=Lr.def(cr,"[",Oi,"]"),La,cr=Lr.def(cr,"[",li("dst","Alpha"),"]")]});case"blend.equation":return Ur(function(cr){return typeof cr=="string"?[ur[cr],ur[cr]]:typeof cr=="object"?[ur[cr.rgb],ur[cr.alpha]]:void 0},function(cr,Lr,Rr){var li=cr.constants.blendEquations,Si=Lr.def(),Oi=Lr.def();return(cr=cr.cond("typeof ",Rr,'==="string"')).then(Si,"=",Oi,"=",li,"[",Rr,"];"),cr.else(Si,"=",li,"[",Rr,".rgb];",Oi,"=",li,"[",Rr,".alpha];"),Lr(cr),[Si,Oi]});case"blend.color":return Ur(function(cr){return x(4,function(Lr){return+cr[Lr]})},function(cr,Lr,Rr){return x(4,function(li){return Lr.def("+",Rr,"[",li,"]")})});case"stencil.mask":return Ur(function(cr){return 0|cr},function(cr,Lr,Rr){return Lr.def(Rr,"|0")});case"stencil.func":return Ur(function(cr){return[Ut[cr.cmp||"keep"],cr.ref||0,"mask"in cr?cr.mask:-1]},function(cr,Lr,Rr){return[cr=Lr.def('"cmp" in ',Rr,"?",cr.constants.compareFuncs,"[",Rr,".cmp]",":",7680),Lr.def(Rr,".ref|0"),Lr=Lr.def('"mask" in ',Rr,"?",Rr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return Ur(function(cr){return[br==="stencil.opBack"?1029:1028,Rt[cr.fail||"keep"],Rt[cr.zfail||"keep"],Rt[cr.zpass||"keep"]]},function(cr,Lr,Rr){function li(Oi){return Lr.def('"',Oi,'" in ',Rr,"?",Si,"[",Rr,".",Oi,"]:",7680)}var Si=cr.constants.stencilOps;return[br==="stencil.opBack"?1029:1028,li("fail"),li("zfail"),li("zpass")]});case"polygonOffset.offset":return Ur(function(cr){return[0|cr.factor,0|cr.units]},function(cr,Lr,Rr){return[Lr.def(Rr,".factor|0"),Lr=Lr.def(Rr,".units|0")]});case"cull.face":return Ur(function(cr){var Lr=0;return cr==="front"?Lr=1028:cr==="back"&&(Lr=1029),Lr},function(cr,Lr,Rr){return Lr.def(Rr,'==="front"?',1028,":",1029)});case"frontFace":return Ur(function(cr){return Ge[cr]},function(cr,Lr,Rr){return Lr.def(Rr+'==="cw"?2304:2305')});case"colorMask":return Ur(function(cr){return cr.map(function(Lr){return!!Lr})},function(cr,Lr,Rr){return x(4,function(li){return"!!"+Rr+"["+li+"]"})});case"sample.coverage":return Ur(function(cr){return["value"in cr?cr.value:1,!!cr.invert]},function(cr,Lr,Rr){return[Lr.def('"value" in ',Rr,"?+",Rr,".value:1"),Lr=Lr.def("!!",Rr,".invert")]})}}),lr}(zt),yn=pn(zt,0,an);Tn("viewport"),Tn(Ht("scissor.box"));var Ln,Hn=0<Object.keys(fn).length;if((Ln={framebuffer:Ln,draw:on,shader:yn,state:fn,dirty:Hn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(nr){var er,or=nr.static;if(nr=nr.dynamic,"profile"in or){var ir=!!or.profile;(er=G(function(br,Ur){return ir})).enable=ir}else if("profile"in nr){var lr=nr.profile;er=V(lr,function(br,Ur){return br.invoke(Ur,lr)})}return er}(zt),Ln.uniforms=function(nr,er){var or=nr.static,ir=nr.dynamic,lr={};return Object.keys(or).forEach(function(br){var Ur,Sr=or[br];if(typeof Sr=="number"||typeof Sr=="boolean")Ur=G(function(){return Sr});else if(typeof Sr=="function"){var cr=Sr._reglType;cr==="texture2d"||cr==="textureCube"?Ur=G(function(Lr){return Lr.link(Sr)}):cr!=="framebuffer"&&cr!=="framebufferCube"||(Ur=G(function(Lr){return Lr.link(Sr.color[0])}))}else b(Sr)&&(Ur=G(function(Lr){return Lr.global.def("[",x(Sr.length,function(Rr){return Sr[Rr]}),"]")}));Ur.value=Sr,lr[br]=Ur}),Object.keys(ir).forEach(function(br){var Ur=ir[br];lr[br]=V(Ur,function(Sr,cr){return Sr.invoke(cr,Ur)})}),lr}(tn),Ln.drawVAO=Ln.scopeVAO=on.vao,!Ln.drawVAO&&yn.program&&!an&&rt.angle_instanced_arrays&&on.static.elements){var Wn=!0;if(zt=yn.program.attributes.map(function(nr){return nr=Wt.static[nr],Wn=Wn&&!!nr,nr}),Wn&&0<zt.length){var Kn=Et.getVAO(Et.createVAO({attributes:zt,elements:on.static.elements}));Ln.drawVAO=new j(null,null,null,function(nr,er){return nr.link(Kn)}),Ln.useVAO=!0}}return an?Ln.useVAO=!0:Ln.attributes=wn(Wt),Ln.context=function(nr){var er=nr.static,or=nr.dynamic,ir={};return Object.keys(er).forEach(function(lr){var br=er[lr];ir[lr]=G(function(Ur,Sr){return typeof br=="number"||typeof br=="boolean"?""+br:Ur.link(br)})}),Object.keys(or).forEach(function(lr){var br=or[lr];ir[lr]=V(br,function(Ur,Sr){return Ur.invoke(Sr,br)})}),ir}(Sn),Ln}function vn(zt,Wt,tn){var Sn=zt.shared.context,An=zt.scope();Object.keys(tn).forEach(function(Tn){Wt.save(Sn,"."+Tn);var an=tn[Tn].append(zt,Wt);Array.isArray(an)?An(Sn,".",Tn,"=[",an.join(),"];"):An(Sn,".",Tn,"=",an,";")}),Wt(An)}function cn(zt,Wt,tn,Sn){var An,Tn=(mn=zt.shared).gl,an=mn.framebuffer;nn&&(An=Wt.def(mn.extensions,".webgl_draw_buffers"));var mn=(on=zt.constants).drawBuffer,on=on.backBuffer;zt=tn?tn.append(zt,Wt):Wt.def(an,".next"),Sn||Wt("if(",zt,"!==",an,".cur){"),Wt("if(",zt,"){",Tn,".bindFramebuffer(",36160,",",zt,".framebuffer);"),nn&&Wt(An,".drawBuffersWEBGL(",mn,"[",zt,".colorAttachments.length]);"),Wt("}else{",Tn,".bindFramebuffer(",36160,",null);"),nn&&Wt(An,".drawBuffersWEBGL(",on,");"),Wt("}",an,".cur=",zt,";"),Sn||Wt("}")}function dn(zt,Wt,tn){var Sn=zt.shared,An=Sn.gl,Tn=zt.current,an=zt.next,mn=Sn.current,on=Sn.next,fn=zt.cond(mn,".dirty");Un.forEach(function(yn){var Ln,Hn;if(!((yn=Ht(yn))in tn.state))if(yn in an){Ln=an[yn],Hn=Tn[yn];var Wn=x(_n[yn].length,function(Kn){return fn.def(Ln,"[",Kn,"]")});fn(zt.cond(Wn.map(function(Kn,nr){return Kn+"!=="+Hn+"["+nr+"]"}).join("||")).then(An,".",ar[yn],"(",Wn,");",Wn.map(function(Kn,nr){return Hn+"["+nr+"]="+Kn}).join(";"),";"))}else Ln=fn.def(on,".",yn),Wn=zt.cond(Ln,"!==",mn,".",yn),fn(Wn),yn in Gn?Wn(zt.cond(Ln).then(An,".enable(",Gn[yn],");").else(An,".disable(",Gn[yn],");"),mn,".",yn,"=",Ln,";"):Wn(An,".",ar[yn],"(",Ln,");",mn,".",yn,"=",Ln,";")}),Object.keys(tn.state).length===0&&fn(mn,".dirty=false;"),Wt(fn)}function sn(zt,Wt,tn,Sn){var An,Tn=zt.shared,an=zt.current,mn=Tn.current,on=Tn.gl;B(Object.keys(tn)).forEach(function(fn){var yn=tn[fn];if(!Sn||Sn(yn)){var Ln=yn.append(zt,Wt);if(Gn[fn]){var Hn=Gn[fn];K(yn)?(An=zt.link(Ln,{stable:!0}),Wt(zt.cond(An).then(on,".enable(",Hn,");").else(on,".disable(",Hn,");")),Wt(mn,".",fn,"=",An,";")):(Wt(zt.cond(Ln).then(on,".enable(",Hn,");").else(on,".disable(",Hn,");")),Wt(mn,".",fn,"=",Ln,";"))}else if(b(Ln)){var Wn=an[fn];Wt(on,".",ar[fn],"(",Ln,");",Ln.map(function(Kn,nr){return Wn+"["+nr+"]="+Kn}).join(";"),";")}else K(yn)?(An=zt.link(Ln,{stable:!0}),Wt(on,".",ar[fn],"(",An,");",mn,".",fn,"=",An,";")):Wt(on,".",ar[fn],"(",Ln,");",mn,".",fn,"=",Ln,";")}})}function hn(zt,Wt){Zt&&(zt.instancing=Wt.def(zt.shared.extensions,".angle_instanced_arrays"))}function En(zt,Wt,tn,Sn,An){function Tn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function an(nr){nr(fn=Wt.def(),"=",Tn(),";"),typeof An=="string"?nr(Hn,".count+=",An,";"):nr(Hn,".count++;"),gt&&(Sn?nr(yn=Wt.def(),"=",Kn,".getNumPendingQueries();"):nr(Kn,".beginQuery(",Hn,");"))}function mn(nr){nr(Hn,".cpuTime+=",Tn(),"-",fn,";"),gt&&(Sn?nr(Kn,".pushScopeStats(",yn,",",Kn,".getNumPendingQueries(),",Hn,");"):nr(Kn,".endQuery();"))}function on(nr){var er=Wt.def(Wn,".profile");Wt(Wn,".profile=",nr,";"),Wt.exit(Wn,".profile=",er,";")}var fn,yn,Ln=zt.shared,Hn=zt.stats,Wn=Ln.current,Kn=Ln.timer;if(tn=tn.profile){if(K(tn))return void(tn.enable?(an(Wt),mn(Wt.exit),on("true")):on("false"));on(tn=tn.append(zt,Wt))}else tn=Wt.def(Wn,".profile");an(Ln=zt.block()),Wt("if(",tn,"){",Ln,"}"),mn(zt=zt.block()),Wt.exit("if(",tn,"){",zt,"}")}function Mn(zt,Wt,tn,Sn,An){function Tn(mn,on,fn){function yn(){Wt("if(!",Kn,".buffer){",Hn,".enableVertexAttribArray(",Wn,");}");var ir,lr=fn.type;ir=fn.size?Wt.def(fn.size,"||",on):on,Wt("if(",Kn,".type!==",lr,"||",Kn,".size!==",ir,"||",or.map(function(br){return Kn+"."+br+"!=="+fn[br]}).join("||"),"){",Hn,".bindBuffer(",34962,",",nr,".buffer);",Hn,".vertexAttribPointer(",[Wn,ir,lr,fn.normalized,fn.stride,fn.offset],");",Kn,".type=",lr,";",Kn,".size=",ir,";",or.map(function(br){return Kn+"."+br+"="+fn[br]+";"}).join(""),"}"),Zt&&(lr=fn.divisor,Wt("if(",Kn,".divisor!==",lr,"){",zt.instancing,".vertexAttribDivisorANGLE(",[Wn,lr],");",Kn,".divisor=",lr,";}"))}function Ln(){Wt("if(",Kn,".buffer){",Hn,".disableVertexAttribArray(",Wn,");",Kn,".buffer=null;","}if(",Lt.map(function(ir,lr){return Kn+"."+ir+"!=="+er[lr]}).join("||"),"){",Hn,".vertexAttrib4f(",Wn,",",er,");",Lt.map(function(ir,lr){return Kn+"."+ir+"="+er[lr]+";"}).join(""),"}")}var Hn=an.gl,Wn=Wt.def(mn,".location"),Kn=Wt.def(an.attributes,"[",Wn,"]");mn=fn.state;var nr=fn.buffer,er=[fn.x,fn.y,fn.z,fn.w],or=["buffer","normalized","offset","stride"];mn===1?yn():mn===2?Ln():(Wt("if(",mn,"===",1,"){"),yn(),Wt("}else{"),Ln(),Wt("}"))}var an=zt.shared;Sn.forEach(function(mn){var on,fn=mn.name,yn=tn.attributes[fn];if(yn){if(!An(yn))return;on=yn.append(zt,Wt)}else{if(!An(We))return;var Ln=zt.scopeAttrib(fn);on={},Object.keys(new qn).forEach(function(Hn){on[Hn]=Wt.def(Ln,".",Hn)})}Tn(zt.link(mn),function(Hn){switch(Hn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(mn.info.type),on)})}function Rn(zt,Wt,tn,Sn,An,Tn){for(var an,mn=zt.shared,on=mn.gl,fn=0;fn<Sn.length;++fn){var yn,Ln=(Kn=Sn[fn]).name,Hn=Kn.info.type,Wn=tn.uniforms[Ln],Kn=zt.link(Kn)+".location";if(Wn){if(!An(Wn))continue;if(K(Wn)){if(Ln=Wn.value,Hn===35678||Hn===35680)Wt(on,".uniform1i(",Kn,",",(Hn=zt.link(Ln._texture||Ln.color[0]._texture))+".bind());"),Wt.exit(Hn,".unbind();");else if(Hn===35674||Hn===35675||Hn===35676)Wn=2,Hn===35675?Wn=3:Hn===35676&&(Wn=4),Wt(on,".uniformMatrix",Wn,"fv(",Kn,",false,",Ln=zt.global.def("new Float32Array(["+Array.prototype.slice.call(Ln)+"])"),");");else{switch(Hn){case 5126:an="1f";break;case 35664:an="2f";break;case 35665:an="3f";break;case 35666:an="4f";break;case 35670:case 5124:an="1i";break;case 35671:case 35667:an="2i";break;case 35672:case 35668:an="3i";break;case 35673:case 35669:an="4i"}Wt(on,".uniform",an,"(",Kn,",",b(Ln)?Array.prototype.slice.call(Ln):Ln,");")}continue}yn=Wn.append(zt,Wt)}else{if(!An(We))continue;yn=Wt.def(mn.uniforms,"[",Ye.id(Ln),"]")}switch(Hn===35678?Wt("if(",yn,"&&",yn,'._reglType==="framebuffer"){',yn,"=",yn,".color[0];","}"):Hn===35680&&Wt("if(",yn,"&&",yn,'._reglType==="framebufferCube"){',yn,"=",yn,".color[0];","}"),Ln=1,Hn){case 35678:case 35680:Hn=Wt.def(yn,"._texture"),Wt(on,".uniform1i(",Kn,",",Hn,".bind());"),Wt.exit(Hn,".unbind();");continue;case 5124:case 35670:an="1i";break;case 35667:case 35671:an="2i",Ln=2;break;case 35668:case 35672:an="3i",Ln=3;break;case 35669:case 35673:an="4i",Ln=4;break;case 5126:an="1f";break;case 35664:an="2f",Ln=2;break;case 35665:an="3f",Ln=3;break;case 35666:an="4f",Ln=4;break;case 35674:an="Matrix2fv";break;case 35675:an="Matrix3fv";break;case 35676:an="Matrix4fv"}if(an.charAt(0)==="M"){Wt(on,".uniform",an,"(",Kn,","),Kn=Math.pow(Hn-35674+2,2);var nr=zt.global.def("new Float32Array(",Kn,")");Array.isArray(yn)?Wt("false,(",x(Kn,function(or){return nr+"["+or+"]="+yn[or]}),",",nr,")"):Wt("false,(Array.isArray(",yn,")||",yn," instanceof Float32Array)?",yn,":(",x(Kn,function(or){return nr+"["+or+"]="+yn+"["+or+"]"}),",",nr,")"),Wt(");")}else{if(1<Ln){Hn=[];var er=[];for(Wn=0;Wn<Ln;++Wn)Array.isArray(yn)?er.push(yn[Wn]):er.push(Wt.def(yn+"["+Wn+"]")),Tn&&Hn.push(Wt.def());Tn&&Wt("if(!",zt.batchId,"||",Hn.map(function(or,ir){return or+"!=="+er[ir]}).join("||"),"){",Hn.map(function(or,ir){return or+"="+er[ir]+";"}).join("")),Wt(on,".uniform",an,"(",Kn,",",er.join(","),");")}else Tn&&(Hn=Wt.def(),Wt("if(!",zt.batchId,"||",Hn,"!==",yn,"){",Hn,"=",yn,";")),Wt(on,".uniform",an,"(",Kn,",",yn,");");Tn&&Wt("}")}}}function Nn(zt,Wt,tn,Sn){function An(lr){var br=Hn[lr];return br?br.contextDep&&Sn.contextDynamic||br.propDep?br.append(zt,tn):br.append(zt,Wt):Wt.def(Ln,".",lr)}function Tn(){function lr(){tn(on,".drawElementsInstancedANGLE(",[Kn,er,or,nr+"<<(("+or+"-5121)>>1)",mn],");")}function br(){tn(on,".drawArraysInstancedANGLE(",[Kn,nr,er,mn],");")}Wn&&Wn!=="null"?ir?lr():(tn("if(",Wn,"){"),lr(),tn("}else{"),br(),tn("}")):br()}function an(){function lr(){tn(yn+".drawElements("+[Kn,er,or,nr+"<<(("+or+"-5121)>>1)"]+");")}function br(){tn(yn+".drawArrays("+[Kn,nr,er]+");")}Wn&&Wn!=="null"?ir?lr():(tn("if(",Wn,"){"),lr(),tn("}else{"),br(),tn("}")):br()}var mn,on,fn=zt.shared,yn=fn.gl,Ln=fn.draw,Hn=Sn.draw,Wn=function(){var lr=Hn.elements,br=Wt;return lr?((lr.contextDep&&Sn.contextDynamic||lr.propDep)&&(br=tn),lr=lr.append(zt,br),Hn.elementsActive&&br("if("+lr+")"+yn+".bindBuffer(34963,"+lr+".buffer.buffer);")):(lr=br.def(),br(lr,"=",Ln,".","elements",";","if(",lr,"){",yn,".bindBuffer(",34963,",",lr,".buffer.buffer);}","else if(",fn.vao,".currentVAO){",lr,"=",zt.shared.elements+".getElements("+fn.vao,".currentVAO.elements);",zn?"":"if("+lr+")"+yn+".bindBuffer(34963,"+lr+".buffer.buffer);","}")),lr}(),Kn=An("primitive"),nr=An("offset"),er=function(){var lr=Hn.count,br=Wt;return lr?((lr.contextDep&&Sn.contextDynamic||lr.propDep)&&(br=tn),lr=lr.append(zt,br)):lr=br.def(Ln,".","count"),lr}();if(typeof er=="number"){if(er===0)return}else tn("if(",er,"){"),tn.exit("}");Zt&&(mn=An("instances"),on=zt.instancing);var or=Wn+".type",ir=Hn.elements&&K(Hn.elements)&&!Hn.vaoActive;Zt&&(typeof mn!="number"||0<=mn)?typeof mn=="string"?(tn("if(",mn,">0){"),Tn(),tn("}else if(",mn,"<0){"),an(),tn("}")):Tn():an()}function Fn(zt,Wt,tn,Sn,An){return An=(Wt=Gt()).proc("body",An),Zt&&(Wt.instancing=An.def(Wt.shared.extensions,".angle_instanced_arrays")),zt(Wt,An,tn,Sn),Wt.compile().body}function rr(zt,Wt,tn,Sn){hn(zt,Wt),tn.useVAO?tn.drawVAO?Wt(zt.shared.vao,".setVAO(",tn.drawVAO.append(zt,Wt),");"):Wt(zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"):(Wt(zt.shared.vao,".setVAO(null);"),Mn(zt,Wt,tn,Sn.attributes,function(){return!0})),Rn(zt,Wt,tn,Sn.uniforms,function(){return!0},!1),Nn(zt,Wt,Wt,tn)}function $n(zt,Wt,tn,Sn){function An(){return!0}zt.batchId="a1",hn(zt,Wt),Mn(zt,Wt,tn,Sn.attributes,An),Rn(zt,Wt,tn,Sn.uniforms,An,!1),Nn(zt,Wt,Wt,tn)}function mr(zt,Wt,tn,Sn){function An(Ln){return Ln.contextDep&&an||Ln.propDep}function Tn(Ln){return!An(Ln)}hn(zt,Wt);var an=tn.contextDep,mn=Wt.def(),on=Wt.def();zt.shared.props=on,zt.batchId=mn;var fn=zt.scope(),yn=zt.scope();Wt(fn.entry,"for(",mn,"=0;",mn,"<","a1",";++",mn,"){",on,"=","a0","[",mn,"];",yn,"}",fn.exit),tn.needsContext&&vn(zt,yn,tn.context),tn.needsFramebuffer&&cn(zt,yn,tn.framebuffer),sn(zt,yn,tn.state,An),tn.profile&&An(tn.profile)&&En(zt,yn,tn,!1,!0),Sn?(tn.useVAO?tn.drawVAO?An(tn.drawVAO)?yn(zt.shared.vao,".setVAO(",tn.drawVAO.append(zt,yn),");"):fn(zt.shared.vao,".setVAO(",tn.drawVAO.append(zt,fn),");"):fn(zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"):(fn(zt.shared.vao,".setVAO(null);"),Mn(zt,fn,tn,Sn.attributes,Tn),Mn(zt,yn,tn,Sn.attributes,An)),Rn(zt,fn,tn,Sn.uniforms,Tn,!1),Rn(zt,yn,tn,Sn.uniforms,An,!0),Nn(zt,fn,yn,tn)):(Wt=zt.global.def("{}"),Sn=tn.shader.progVar.append(zt,yn),on=yn.def(Sn,".id"),fn=yn.def(Wt,"[",on,"]"),yn(zt.shared.gl,".useProgram(",Sn,".program);","if(!",fn,"){",fn,"=",Wt,"[",on,"]=",zt.link(function(Ln){return Fn($n,zt,tn,Ln,2)}),"(",Sn,");}",fn,".call(this,a0[",mn,"],",mn,");"))}function fr(zt,Wt){function tn(mn){var on=Wt.shader[mn];on&&(on=on.append(zt,Sn),isNaN(on)?Sn.set(An.shader,"."+mn,on):Sn.set(An.shader,"."+mn,zt.link(on,{stable:!0})))}var Sn=zt.proc("scope",3);zt.batchId="a2";var An=zt.shared,Tn=An.current;if(vn(zt,Sn,Wt.context),Wt.framebuffer&&Wt.framebuffer.append(zt,Sn),B(Object.keys(Wt.state)).forEach(function(mn){var on=Wt.state[mn],fn=on.append(zt,Sn);b(fn)?fn.forEach(function(yn,Ln){isNaN(yn)?Sn.set(zt.next[mn],"["+Ln+"]",yn):Sn.set(zt.next[mn],"["+Ln+"]",zt.link(yn,{stable:!0}))}):K(on)?Sn.set(An.next,"."+mn,zt.link(fn,{stable:!0})):Sn.set(An.next,"."+mn,fn)}),En(zt,Sn,Wt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(mn){var on=Wt.draw[mn];on&&(on=on.append(zt,Sn),isNaN(on)?Sn.set(An.draw,"."+mn,on):Sn.set(An.draw,"."+mn,zt.link(on),{stable:!0}))}),Object.keys(Wt.uniforms).forEach(function(mn){var on=Wt.uniforms[mn].append(zt,Sn);Array.isArray(on)&&(on="["+on.map(function(fn){return isNaN(fn)?fn:zt.link(fn,{stable:!0})})+"]"),Sn.set(An.uniforms,"["+zt.link(Ye.id(mn),{stable:!0})+"]",on)}),Object.keys(Wt.attributes).forEach(function(mn){var on=Wt.attributes[mn].append(zt,Sn),fn=zt.scopeAttrib(mn);Object.keys(new qn).forEach(function(yn){Sn.set(fn,"."+yn,on[yn])})}),Wt.scopeVAO){var an=Wt.scopeVAO.append(zt,Sn);isNaN(an)?Sn.set(An.vao,".targetVAO",an):Sn.set(An.vao,".targetVAO",zt.link(an,{stable:!0}))}tn("vert"),tn("frag"),0<Object.keys(Wt.state).length&&(Sn(Tn,".dirty=true;"),Sn.exit(Tn,".dirty=true;")),Sn("a1(",zt.shared.context,",a0,",zt.batchId,");")}function Zn(zt,Wt,tn){var Sn=Wt.static[tn];if(Sn&&function(yn){if(typeof yn=="object"&&!b(yn)){for(var Ln=Object.keys(yn),Hn=0;Hn<Ln.length;++Hn)if(re.isDynamic(yn[Ln[Hn]]))return!0;return!1}}(Sn)){var An=zt.global,Tn=Object.keys(Sn),an=!1,mn=!1,on=!1,fn=zt.global.def("{}");Tn.forEach(function(yn){var Ln=Sn[yn];if(re.isDynamic(Ln))typeof Ln=="function"&&(Ln=Sn[yn]=re.unbox(Ln)),yn=V(Ln,null),an=an||yn.thisDep,on=on||yn.propDep,mn=mn||yn.contextDep;else{switch(An(fn,".",yn,"="),typeof Ln){case"number":An(Ln);break;case"string":An('"',Ln,'"');break;case"object":Array.isArray(Ln)&&An("[",Ln.join(),"]");break;default:An(zt.link(Ln))}An(";")}}),Wt.dynamic[tn]=new re.DynamicVariable(4,{thisDep:an,contextDep:mn,propDep:on,ref:fn,append:function(yn,Ln){Tn.forEach(function(Hn){var Wn=Sn[Hn];re.isDynamic(Wn)&&(Wn=yn.invoke(Ln,Wn),Ln(fn,".",Hn,"=",Wn,";"))})}}),delete Wt.static[tn]}}var qn=Et.Record,ur={add:32774,subtract:32778,"reverse subtract":32779};rt.ext_blend_minmax&&(ur.min=32775,ur.max=32776);var Zt=rt.angle_instanced_arrays,nn=rt.webgl_draw_buffers,zn=rt.oes_vertex_array_object,_n={dirty:!0,profile:Ot.profile},Cn={},Un=[],Gn={},ar={};jt("dither",3024),jt("blend.enable",3042),Nt("blend.color","blendColor",[0,0,0,0]),Nt("blend.equation","blendEquationSeparate",[32774,32774]),Nt("blend.func","blendFuncSeparate",[1,0,1,0]),jt("depth.enable",2929,!0),Nt("depth.func","depthFunc",513),Nt("depth.range","depthRange",[0,1]),Nt("depth.mask","depthMask",!0),Nt("colorMask","colorMask",[!0,!0,!0,!0]),jt("cull.enable",2884),Nt("cull.face","cullFace",1029),Nt("frontFace","frontFace",2305),Nt("lineWidth","lineWidth",1),jt("polygonOffset.enable",32823),Nt("polygonOffset.offset","polygonOffset",[0,0]),jt("sample.alpha",32926),jt("sample.enable",32928),Nt("sample.coverage","sampleCoverage",[1,!1]),jt("stencil.enable",2960),Nt("stencil.mask","stencilMask",-1),Nt("stencil.func","stencilFunc",[519,0,-1]),Nt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Nt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),jt("scissor.enable",3089),Nt("scissor.box","scissor",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]),Nt("viewport","viewport",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]);var yr={gl:Be,context:pt,strings:Ye,next:Cn,current:_n,draw:ht,elements:Ke,buffer:ze,shader:At,attributes:Et.state,vao:Et,uniforms:Tt,framebuffer:ct,extensions:rt,timer:gt,isBufferArgs:N},$t={primTypes:oe,compareFuncs:Ut,blendFuncs:It,blendEquations:ur,stencilOps:Rt,glTypes:xe,orientationType:Ge};nn&&($t.backBuffer=[1029],$t.drawBuffer=x(Se.maxDrawbuffers,function(zt){return zt===0?[0]:x(zt,function(Wt){return 36064+Wt})}));var kn=0;return{next:Cn,current:_n,procs:function(){var zt=Gt(),Wt=zt.proc("poll"),tn=zt.proc("refresh"),Sn=zt.block();Wt(Sn),tn(Sn);var An,Tn=(on=zt.shared).gl,an=on.next,mn=on.current;Sn(mn,".dirty=false;"),cn(zt,Wt),cn(zt,tn,null,!0),Zt&&(An=zt.link(Zt)),rt.oes_vertex_array_object&&tn(zt.link(rt.oes_vertex_array_object),".bindVertexArrayOES(null);");var on=tn.def(on.attributes),fn=tn.def(0),yn=zt.cond(fn,".buffer");yn.then(Tn,".enableVertexAttribArray(i);",Tn,".bindBuffer(",34962,",",fn,".buffer.buffer);",Tn,".vertexAttribPointer(i,",fn,".size,",fn,".type,",fn,".normalized,",fn,".stride,",fn,".offset);").else(Tn,".disableVertexAttribArray(i);",Tn,".vertexAttrib4f(i,",fn,".x,",fn,".y,",fn,".z,",fn,".w);",fn,".buffer=null;");var Ln=zt.link(Se.maxAttributes,{stable:!0});return tn("for(var i=0;i<",Ln,";++i){",fn,"=",on,"[i];",yn,"}"),Zt&&tn("for(var i=0;i<",Ln,";++i){",An,".vertexAttribDivisorANGLE(i,",on,"[i].divisor);","}"),tn(zt.shared.vao,".currentVAO=null;",zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"),Object.keys(Gn).forEach(function(Hn){var Wn=Gn[Hn],Kn=Sn.def(an,".",Hn),nr=zt.block();nr("if(",Kn,"){",Tn,".enable(",Wn,")}else{",Tn,".disable(",Wn,")}",mn,".",Hn,"=",Kn,";"),tn(nr),Wt("if(",Kn,"!==",mn,".",Hn,"){",nr,"}")}),Object.keys(ar).forEach(function(Hn){var Wn,Kn,nr=ar[Hn],er=_n[Hn],or=zt.block();or(Tn,".",nr,"("),b(er)?(nr=er.length,Wn=zt.global.def(an,".",Hn),Kn=zt.global.def(mn,".",Hn),or(x(nr,function(ir){return Wn+"["+ir+"]"}),");",x(nr,function(ir){return Kn+"["+ir+"]="+Wn+"["+ir+"];"}).join("")),Wt("if(",x(nr,function(ir){return Wn+"["+ir+"]!=="+Kn+"["+ir+"]"}).join("||"),"){",or,"}")):(Wn=Sn.def(an,".",Hn),Kn=Sn.def(mn,".",Hn),or(Wn,");",mn,".",Hn,"=",Wn,";"),Wt("if(",Wn,"!==",Kn,"){",or,"}")),tn(or)}),zt.compile()}(),compile:function(zt,Wt,tn,Sn,An){var Tn=Gt();Tn.stats=Tn.link(An),Object.keys(Wt.static).forEach(function(mn){Zn(Tn,Wt,mn)}),Ct.forEach(function(mn){Zn(Tn,zt,mn)});var an=Bn(zt,Wt,tn,Sn);return an.shader.program&&(an.shader.program.attributes.sort(function(mn,on){return mn.name<on.name?-1:1}),an.shader.program.uniforms.sort(function(mn,on){return mn.name<on.name?-1:1})),function(mn,on){var fn=mn.proc("draw",1);hn(mn,fn),vn(mn,fn,on.context),cn(mn,fn,on.framebuffer),dn(mn,fn,on),sn(mn,fn,on.state),En(mn,fn,on,!1,!0);var yn=on.shader.progVar.append(mn,fn);if(fn(mn.shared.gl,".useProgram(",yn,".program);"),on.shader.program)rr(mn,fn,on,on.shader.program);else{fn(mn.shared.vao,".setVAO(null);");var Ln=mn.global.def("{}"),Hn=fn.def(yn,".id"),Wn=fn.def(Ln,"[",Hn,"]");fn(mn.cond(Wn).then(Wn,".call(this,a0);").else(Wn,"=",Ln,"[",Hn,"]=",mn.link(function(Kn){return Fn(rr,mn,on,Kn,1)}),"(",yn,");",Wn,".call(this,a0);"))}0<Object.keys(on.state).length&&fn(mn.shared.current,".dirty=true;"),mn.shared.vao&&fn(mn.shared.vao,".setVAO(null);")}(Tn,an),fr(Tn,an),function(mn,on){function fn(er){return er.contextDep&&Ln||er.propDep}var yn=mn.proc("batch",2);mn.batchId="0",hn(mn,yn);var Ln=!1,Hn=!0;Object.keys(on.context).forEach(function(er){Ln=Ln||on.context[er].propDep}),Ln||(vn(mn,yn,on.context),Hn=!1);var Wn=!1;if((Kn=on.framebuffer)?(Kn.propDep?Ln=Wn=!0:Kn.contextDep&&Ln&&(Wn=!0),Wn||cn(mn,yn,Kn)):cn(mn,yn,null),on.state.viewport&&on.state.viewport.propDep&&(Ln=!0),dn(mn,yn,on),sn(mn,yn,on.state,function(er){return!fn(er)}),on.profile&&fn(on.profile)||En(mn,yn,on,!1,"a1"),on.contextDep=Ln,on.needsContext=Hn,on.needsFramebuffer=Wn,(Hn=on.shader.progVar).contextDep&&Ln||Hn.propDep)mr(mn,yn,on,null);else if(Hn=Hn.append(mn,yn),yn(mn.shared.gl,".useProgram(",Hn,".program);"),on.shader.program)mr(mn,yn,on,on.shader.program);else{yn(mn.shared.vao,".setVAO(null);");var Kn=mn.global.def("{}"),nr=(Wn=yn.def(Hn,".id"),yn.def(Kn,"[",Wn,"]"));yn(mn.cond(nr).then(nr,".call(this,a0,a1);").else(nr,"=",Kn,"[",Wn,"]=",mn.link(function(er){return Fn(mr,mn,on,er,2)}),"(",Hn,");",nr,".call(this,a0,a1);"))}0<Object.keys(on.state).length&&yn(mn.shared.current,".dirty=true;"),mn.shared.vao&&yn(mn.shared.vao,".setVAO(null);")}(Tn,an),X(Tn.compile(),{destroy:function(){an.shader.program.destroy()}})}}}function J(Be,Ye){for(var rt=0;rt<Be.length;++rt)if(Be[rt]===Ye)return rt;return-1}var X=function(Be,Ye){for(var rt=Object.keys(Ye),Se=0;Se<rt.length;++Se)Be[rt[Se]]=Ye[rt[Se]];return Be},ee=0,re={DynamicVariable:R,define:function(Be,Ye){return new R(Be,k(Ye+""))},isDynamic:function(Be){return typeof Be=="function"&&!Be._reglType||Be instanceof R},unbox:function Be(Ye,rt){return typeof Ye=="function"?new R(0,Ye):typeof Ye=="number"||typeof Ye=="boolean"?new R(5,Ye):Array.isArray(Ye)?new R(6,Ye.map(function(Se,ze){return Be(Se)})):Ye instanceof R?Ye:void 0},accessor:k},ie={next:typeof requestAnimationFrame=="function"?function(Be){return requestAnimationFrame(Be)}:function(Be){return setTimeout(Be,16)},cancel:typeof cancelAnimationFrame=="function"?function(Be){return cancelAnimationFrame(Be)}:clearTimeout},se=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},fe=s();fe.zero=s();var ye=function(Be,Ye){var rt=1;Ye.ext_texture_filter_anisotropic&&(rt=Be.getParameter(34047));var Se=1,ze=1;Ye.webgl_draw_buffers&&(Se=Be.getParameter(34852),ze=Be.getParameter(36063));var Ke=!!Ye.oes_texture_float;if(Ke){Ke=Be.createTexture(),Be.bindTexture(3553,Ke),Be.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var st=Be.createFramebuffer();if(Be.bindFramebuffer(36160,st),Be.framebufferTexture2D(36160,36064,3553,Ke,0),Be.bindTexture(3553,null),Be.checkFramebufferStatus(36160)!==36053)Ke=!1;else{Be.viewport(0,0,1,1),Be.clearColor(1,0,0,1),Be.clear(16384);var ct=fe.allocType(5126,4);Be.readPixels(0,0,1,1,6408,5126,ct),Be.getError()?Ke=!1:(Be.deleteFramebuffer(st),Be.deleteTexture(Ke),Ke=ct[0]===1),fe.freeType(ct)}}return ct=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ct=Be.createTexture(),st=fe.allocType(5121,36),Be.activeTexture(33984),Be.bindTexture(34067,ct),Be.texImage2D(34069,0,6408,3,3,0,6408,5121,st),fe.freeType(st),Be.bindTexture(34067,null),Be.deleteTexture(ct),ct=!Be.getError()),{colorBits:[Be.getParameter(3410),Be.getParameter(3411),Be.getParameter(3412),Be.getParameter(3413)],depthBits:Be.getParameter(3414),stencilBits:Be.getParameter(3415),subpixelBits:Be.getParameter(3408),extensions:Object.keys(Ye).filter(function(Tt){return!!Ye[Tt]}),maxAnisotropic:rt,maxDrawbuffers:Se,maxColorAttachments:ze,pointSizeDims:Be.getParameter(33901),lineWidthDims:Be.getParameter(33902),maxViewportDims:Be.getParameter(3386),maxCombinedTextureUnits:Be.getParameter(35661),maxCubeMapSize:Be.getParameter(34076),maxRenderbufferSize:Be.getParameter(34024),maxTextureUnits:Be.getParameter(34930),maxTextureSize:Be.getParameter(3379),maxAttributes:Be.getParameter(34921),maxVertexUniforms:Be.getParameter(36347),maxVertexTextureUnits:Be.getParameter(35660),maxVaryingVectors:Be.getParameter(36348),maxFragmentUniforms:Be.getParameter(36349),glsl:Be.getParameter(35724),renderer:Be.getParameter(7937),vendor:Be.getParameter(7936),version:Be.getParameter(7938),readFloat:Ke,npotTextureCube:ct}},ge=function(Be){return Be instanceof Uint8Array||Be instanceof Uint16Array||Be instanceof Uint32Array||Be instanceof Int8Array||Be instanceof Int16Array||Be instanceof Int32Array||Be instanceof Float32Array||Be instanceof Float64Array||Be instanceof Uint8ClampedArray},he=function(Be){return Object.keys(Be).map(function(Ye){return Be[Ye]})},ve={shape:function(Be){for(var Ye=[];Be.length;Be=Be[0])Ye.push(Be.length);return Ye},flatten:function(Be,Ye,rt,Se){var ze=1;if(Ye.length)for(var Ke=0;Ke<Ye.length;++Ke)ze*=Ye[Ke];else ze=0;switch(rt=Se||fe.allocType(rt,ze),Ye.length){case 0:break;case 1:for(Se=Ye[0],Ye=0;Ye<Se;++Ye)rt[Ye]=Be[Ye];break;case 2:for(Se=Ye[0],Ye=Ye[1],Ke=ze=0;Ke<Se;++Ke)for(var st=Be[Ke],ct=0;ct<Ye;++ct)rt[ze++]=st[ct];break;case 3:o(Be,Ye[0],Ye[1],Ye[2],rt,0);break;default:r(Be,Ye,0,rt,0)}return rt}},Oe={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},xe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ke={dynamic:35048,stream:35040,static:35044},Me=ve.flatten,Te=ve.shape,Q=[];Q[5120]=1,Q[5122]=2,Q[5124]=4,Q[5121]=1,Q[5123]=2,Q[5125]=4,Q[5126]=4;var oe={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ce=new Float32Array(1),me=new Uint32Array(ce.buffer),Ae=[9984,9986,9985,9987],Ie=[0,6409,6410,6407,6408],Ce={};Ce[6409]=Ce[6406]=Ce[6402]=1,Ce[34041]=Ce[6410]=2,Ce[6407]=Ce[35904]=3,Ce[6408]=Ce[35906]=4;var Re=v("HTMLCanvasElement"),le=v("OffscreenCanvas"),de=v("CanvasRenderingContext2D"),_e=v("ImageBitmap"),Fe=v("HTMLImageElement"),Ve=v("HTMLVideoElement"),He=Object.keys(Oe).concat([Re,le,de,_e,Fe,Ve]),nt=[];nt[5121]=1,nt[5126]=4,nt[36193]=2,nt[5123]=2,nt[5125]=4;var tt=[];tt[32854]=2,tt[32855]=2,tt[36194]=2,tt[34041]=4,tt[33776]=.5,tt[33777]=.5,tt[33778]=1,tt[33779]=1,tt[35986]=.5,tt[35987]=1,tt[34798]=1,tt[35840]=.5,tt[35841]=.25,tt[35842]=.5,tt[35843]=.25,tt[36196]=.5;var ot=[];ot[32854]=2,ot[32855]=2,ot[36194]=2,ot[33189]=2,ot[36168]=1,ot[34041]=4,ot[35907]=4,ot[34836]=16,ot[34842]=8,ot[34843]=6;var dt=function(Be,Ye,rt,Se,ze){function Ke(ht){this.id=Et++,this.refCount=1,this.renderbuffer=ht,this.format=32854,this.height=this.width=0,ze.profile&&(this.stats={size:0})}function st(ht){var pt=ht.renderbuffer;Be.bindRenderbuffer(36161,null),Be.deleteRenderbuffer(pt),ht.renderbuffer=null,ht.refCount=0,delete At[ht.id],Se.renderbufferCount--}var ct={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Ye.ext_srgb&&(ct.srgba=35907),Ye.ext_color_buffer_half_float&&(ct.rgba16f=34842,ct.rgb16f=34843),Ye.webgl_color_buffer_float&&(ct.rgba32f=34836);var Tt=[];Object.keys(ct).forEach(function(ht){Tt[ct[ht]]=ht});var Et=0,At={};return Ke.prototype.decRef=function(){0>=--this.refCount&&st(this)},ze.profile&&(Se.getTotalRenderbufferSize=function(){var ht=0;return Object.keys(At).forEach(function(pt){ht+=At[pt].stats.size}),ht}),{create:function(ht,pt){function gt(Ot,Ht){var jt=0,Nt=0,Gt=32854;if(typeof Ot=="object"&&Ot?("shape"in Ot?(jt=0|(Nt=Ot.shape)[0],Nt=0|Nt[1]):("radius"in Ot&&(jt=Nt=0|Ot.radius),"width"in Ot&&(jt=0|Ot.width),"height"in Ot&&(Nt=0|Ot.height)),"format"in Ot&&(Gt=ct[Ot.format])):typeof Ot=="number"?(jt=0|Ot,Nt=typeof Ht=="number"?0|Ht:jt):Ot||(jt=Nt=1),jt!==Pt.width||Nt!==Pt.height||Gt!==Pt.format)return gt.width=Pt.width=jt,gt.height=Pt.height=Nt,Pt.format=Gt,Be.bindRenderbuffer(36161,Pt.renderbuffer),Be.renderbufferStorage(36161,Gt,jt,Nt),ze.profile&&(Pt.stats.size=ot[Pt.format]*Pt.width*Pt.height),gt.format=Tt[Pt.format],gt}var Pt=new Ke(Be.createRenderbuffer());return At[Pt.id]=Pt,Se.renderbufferCount++,gt(ht,pt),gt.resize=function(Ot,Ht){var jt=0|Ot,Nt=0|Ht||jt;return jt===Pt.width&&Nt===Pt.height||(gt.width=Pt.width=jt,gt.height=Pt.height=Nt,Be.bindRenderbuffer(36161,Pt.renderbuffer),Be.renderbufferStorage(36161,Pt.format,jt,Nt),ze.profile&&(Pt.stats.size=ot[Pt.format]*Pt.width*Pt.height)),gt},gt._reglType="renderbuffer",gt._renderbuffer=Pt,ze.profile&&(gt.stats=Pt.stats),gt.destroy=function(){Pt.decRef()},gt},clear:function(){he(At).forEach(st)},restore:function(){he(At).forEach(function(ht){ht.renderbuffer=Be.createRenderbuffer(),Be.bindRenderbuffer(36161,ht.renderbuffer),Be.renderbufferStorage(36161,ht.format,ht.width,ht.height)}),Be.bindRenderbuffer(36161,null)}}},kt=[];kt[6408]=4,kt[6407]=3;var mt=[];mt[5121]=1,mt[5126]=4,mt[36193]=2;var wt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Lt=["x","y","z","w"],Ct="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),It={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ut={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Rt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ge={cw:2304,ccw:2305},We=new j(!1,!1,!1,function(){});return function(Be){function Ye(){if($n.length===0)un&&un.update(),qn=null;else{qn=ie.next(Ye),At();for(var Zt=$n.length-1;0<=Zt;--Zt){var nn=$n[Zt];nn&&nn(Bn,null,0)}gt.flush(),un&&un.update()}}function rt(){!qn&&0<$n.length&&(qn=ie.next(Ye))}function Se(){qn&&(ie.cancel(Ye),qn=null)}function ze(Zt){Zt.preventDefault(),Se(),mr.forEach(function(nn){nn()})}function Ke(Zt){gt.getError(),Ot.restore(),hn.restore(),cn.restore(),En.restore(),Mn.restore(),Rn.restore(),sn.restore(),un&&un.restore(),Nn.procs.refresh(),rt(),fr.forEach(function(nn){nn()})}function st(Zt){function nn(zt,Wt){var tn={},Sn={};return Object.keys(zt).forEach(function(An){var Tn=zt[An];if(re.isDynamic(Tn))Sn[An]=re.unbox(Tn,An);else{if(Wt&&Array.isArray(Tn)){for(var an=0;an<Tn.length;++an)if(re.isDynamic(Tn[an]))return void(Sn[An]=re.unbox(Tn,An))}tn[An]=Tn}}),{dynamic:Sn,static:tn}}var zn=nn(Zt.context||{},!0),_n=nn(Zt.uniforms||{},!0),Cn=nn(Zt.attributes||{},!1);Zt=nn(function(zt){function Wt(Sn){if(Sn in tn){var An=tn[Sn];delete tn[Sn],Object.keys(An).forEach(function(Tn){tn[Sn+"."+Tn]=An[Tn]})}}var tn=X({},zt);return delete tn.uniforms,delete tn.attributes,delete tn.context,delete tn.vao,"stencil"in tn&&tn.stencil.op&&(tn.stencil.opBack=tn.stencil.opFront=tn.stencil.op,delete tn.stencil.op),Wt("blend"),Wt("depth"),Wt("cull"),Wt("stencil"),Wt("polygonOffset"),Wt("scissor"),Wt("sample"),"vao"in zt&&(tn.vao=zt.vao),tn}(Zt),!1);var Un={gpuTime:0,cpuTime:0,count:0},Gn=Nn.compile(Zt,Cn,_n,zn,Un),ar=Gn.draw,yr=Gn.batch,$t=Gn.scope,kn=[];return X(function(zt,Wt){var tn;if(typeof zt=="function")return $t.call(this,null,zt,0);if(typeof Wt=="function")if(typeof zt=="number")for(tn=0;tn<zt;++tn)$t.call(this,null,Wt,tn);else{if(!Array.isArray(zt))return $t.call(this,zt,Wt,0);for(tn=0;tn<zt.length;++tn)$t.call(this,zt[tn],Wt,tn)}else if(typeof zt=="number"){if(0<zt)return yr.call(this,function(Sn){for(;kn.length<Sn;)kn.push(null);return kn}(0|zt),0|zt)}else{if(!Array.isArray(zt))return ar.call(this,zt);if(zt.length)return yr.call(this,zt,zt.length)}},{stats:Un,destroy:function(){Gn.destroy()}})}function ct(Zt,nn){var zn=0;Nn.procs.poll();var _n=nn.color;_n&&(gt.clearColor(+_n[0]||0,+_n[1]||0,+_n[2]||0,+_n[3]||0),zn|=16384),"depth"in nn&&(gt.clearDepth(+nn.depth),zn|=256),"stencil"in nn&&(gt.clearStencil(0|nn.stencil),zn|=1024),gt.clear(zn)}function Tt(Zt){return $n.push(Zt),rt(),{cancel:function(){var nn=J($n,Zt);$n[nn]=function zn(){var _n=J($n,zn);$n[_n]=$n[$n.length-1],--$n.length,0>=$n.length&&Se()}}}}function Et(){var Zt=Fn.viewport,nn=Fn.scissor_box;Zt[0]=Zt[1]=nn[0]=nn[1]=0,Bn.viewportWidth=Bn.framebufferWidth=Bn.drawingBufferWidth=Zt[2]=nn[2]=gt.drawingBufferWidth,Bn.viewportHeight=Bn.framebufferHeight=Bn.drawingBufferHeight=Zt[3]=nn[3]=gt.drawingBufferHeight}function At(){Bn.tick+=1,Bn.time=pt(),Et(),Nn.procs.poll()}function ht(){En.refresh(),Et(),Nn.procs.refresh(),un&&un.update()}function pt(){return(se()-pn)/1e3}if(!(Be=T(Be)))return null;var gt=Be.gl,Pt=gt.getContextAttributes();gt.isContextLost();var Ot=function(Zt,nn){function zn(Gn){var ar;Gn=Gn.toLowerCase();try{ar=_n[Gn]=Zt.getExtension(Gn)}catch{}return!!ar}for(var _n={},Cn=0;Cn<nn.extensions.length;++Cn){var Un=nn.extensions[Cn];if(!zn(Un))return nn.onDestroy(),nn.onDone('"'+Un+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return nn.optionalExtensions.forEach(zn),{extensions:_n,restore:function(){Object.keys(_n).forEach(function(Gn){if(_n[Gn]&&!zn(Gn))throw Error("(regl): error restoring extension "+Gn)})}}}(gt,Be);if(!Ot)return null;var Ht=function(){var Zt={"":0},nn=[""];return{id:function(zn){var _n=Zt[zn];return _n||(_n=Zt[zn]=nn.length,nn.push(zn),_n)},str:function(zn){return nn[zn]}}}(),jt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Nt=Be.cachedCode||{},Gt=Ot.extensions,un=function(Zt,nn){function zn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function _n(kn,zt,Wt){var tn=Gn.pop()||new zn;tn.startQueryIndex=kn,tn.endQueryIndex=zt,tn.sum=0,tn.stats=Wt,ar.push(tn)}if(!nn.ext_disjoint_timer_query)return null;var Cn=[],Un=[],Gn=[],ar=[],yr=[],$t=[];return{beginQuery:function(kn){var zt=Cn.pop()||nn.ext_disjoint_timer_query.createQueryEXT();nn.ext_disjoint_timer_query.beginQueryEXT(35007,zt),Un.push(zt),_n(Un.length-1,Un.length,kn)},endQuery:function(){nn.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:_n,update:function(){var kn,zt;if((kn=Un.length)!==0){$t.length=Math.max($t.length,kn+1),yr.length=Math.max(yr.length,kn+1),yr[0]=0;var Wt=$t[0]=0;for(zt=kn=0;zt<Un.length;++zt){var tn=Un[zt];nn.ext_disjoint_timer_query.getQueryObjectEXT(tn,34919)?(Wt+=nn.ext_disjoint_timer_query.getQueryObjectEXT(tn,34918),Cn.push(tn)):Un[kn++]=tn,yr[zt+1]=Wt,$t[zt+1]=kn}for(Un.length=kn,zt=kn=0;zt<ar.length;++zt){var Sn=(Wt=ar[zt]).startQueryIndex;tn=Wt.endQueryIndex,Wt.sum+=yr[tn]-yr[Sn],Sn=$t[Sn],(tn=$t[tn])===Sn?(Wt.stats.gpuTime+=Wt.sum/1e6,Gn.push(Wt)):(Wt.startQueryIndex=Sn,Wt.endQueryIndex=tn,ar[kn++]=Wt)}ar.length=kn}},getNumPendingQueries:function(){return Un.length},clear:function(){Cn.push.apply(Cn,Un);for(var kn=0;kn<Cn.length;kn++)nn.ext_disjoint_timer_query.deleteQueryEXT(Cn[kn]);Un.length=0,Cn.length=0},restore:function(){Un.length=0,Cn.length=0}}}(0,Gt),pn=se(),Kt=gt.drawingBufferWidth,wn=gt.drawingBufferHeight,Bn={tick:0,time:0,viewportWidth:Kt,viewportHeight:wn,framebufferWidth:Kt,framebufferHeight:wn,drawingBufferWidth:Kt,drawingBufferHeight:wn,pixelRatio:Be.pixelRatio},vn=(Kt={elements:null,primitive:4,count:-1,offset:0,instances:-1},ye(gt,Gt)),cn=c(gt,jt,Be,function(Zt){return sn.destroyBuffer(Zt)}),dn=h(gt,Gt,cn,jt),sn=L(gt,Gt,vn,jt,cn,dn,Kt),hn=C(gt,Ht,jt,Be),En=S(gt,Gt,vn,function(){Nn.procs.poll()},Bn,jt,Be),Mn=dt(gt,Gt,0,jt,Be),Rn=_(gt,Gt,vn,En,Mn,jt),Nn=W(gt,Ht,Gt,vn,cn,dn,0,Rn,{},sn,hn,Kt,Bn,un,Nt,Be),Fn=(Ht=P(gt,Rn,Nn.procs.poll,Bn),Nn.next),rr=gt.canvas,$n=[],mr=[],fr=[],Zn=[Be.onDestroy],qn=null;rr&&(rr.addEventListener("webglcontextlost",ze,!1),rr.addEventListener("webglcontextrestored",Ke,!1));var ur=Rn.setFBO=st({framebuffer:re.define.call(null,1,"framebuffer")});return ht(),Pt=X(st,{clear:function(Zt){if("framebuffer"in Zt)if(Zt.framebuffer&&Zt.framebuffer_reglType==="framebufferCube")for(var nn=0;6>nn;++nn)ur(X({framebuffer:Zt.framebuffer.faces[nn]},Zt),ct);else ur(Zt,ct);else ct(0,Zt)},prop:re.define.bind(null,1),context:re.define.bind(null,2),this:re.define.bind(null,3),draw:st({}),buffer:function(Zt){return cn.create(Zt,34962,!1,!1)},elements:function(Zt){return dn.create(Zt,!1)},texture:En.create2D,cube:En.createCube,renderbuffer:Mn.create,framebuffer:Rn.create,framebufferCube:Rn.createCube,vao:sn.createVAO,attributes:Pt,frame:Tt,on:function(Zt,nn){var zn;switch(Zt){case"frame":return Tt(nn);case"lost":zn=mr;break;case"restore":zn=fr;break;case"destroy":zn=Zn}return zn.push(nn),{cancel:function(){for(var _n=0;_n<zn.length;++_n)if(zn[_n]===nn){zn[_n]=zn[zn.length-1],zn.pop();break}}}},limits:vn,hasExtension:function(Zt){return 0<=vn.extensions.indexOf(Zt.toLowerCase())},read:Ht,destroy:function(){$n.length=0,Se(),rr&&(rr.removeEventListener("webglcontextlost",ze),rr.removeEventListener("webglcontextrestored",Ke)),hn.clear(),Rn.clear(),Mn.clear(),sn.clear(),En.clear(),dn.clear(),cn.clear(),un&&un.clear(),Zn.forEach(function(Zt){Zt()})},_gl:gt,_refresh:ht,poll:function(){At(),un&&un.update()},now:pt,stats:jt,getCachedCode:function(){return Nt},preloadCachedCode:function(Zt){Object.entries(Zt).forEach(function(nn){Nt[nn[0]]=nn[1]})}}),Be.onDone(null,Pt),Pt}}()},71665:function($,R,e){var k=e(12856),A=k.Buffer;function l(x,d){for(var s in x)d[s]=x[s]}function T(x,d,s){return A(x,d,s)}A.from&&A.alloc&&A.allocUnsafe&&A.allocUnsafeSlow?$.exports=k:(l(k,R),R.Buffer=T),T.prototype=Object.create(A.prototype),l(A,T),T.from=function(x,d,s){if(typeof x=="number")throw new TypeError("Argument must not be a number");return A(x,d,s)},T.alloc=function(x,d,s){if(typeof x!="number")throw new TypeError("Argument must be a number");var t=A(x);return d!==void 0?typeof s=="string"?t.fill(d,s):t.fill(d):t.fill(0),t},T.allocUnsafe=function(x){if(typeof x!="number")throw new TypeError("Argument must be a number");return A(x)},T.allocUnsafeSlow=function(x){if(typeof x!="number")throw new TypeError("Argument must be a number");return k.SlowBuffer(x)}},21630:function($,R,e){$.exports=A;var k=e(15398).EventEmitter;function A(){k.call(this)}e(42018)(A,k),A.Readable=e(40410),A.Writable=e(37493),A.Duplex=e(37865),A.Transform=e(74308),A.PassThrough=e(66897),A.finished=e(12726),A.pipeline=e(10168),A.Stream=A,A.prototype.pipe=function(l,T){var x=this;function d(i){l.writable&&l.write(i)===!1&&x.pause&&x.pause()}function s(){x.readable&&x.resume&&x.resume()}x.on("data",d),l.on("drain",s),l._isStdio||T&&T.end===!1||(x.on("end",o),x.on("close",r));var t=!1;function o(){t||(t=!0,l.end())}function r(){t||(t=!0,typeof l.destroy=="function"&&l.destroy())}function n(i){if(a(),k.listenerCount(this,"error")===0)throw i}function a(){x.removeListener("data",d),l.removeListener("drain",s),x.removeListener("end",o),x.removeListener("close",r),x.removeListener("error",n),l.removeListener("error",n),x.removeListener("end",a),x.removeListener("close",a),l.removeListener("close",a)}return x.on("error",n),l.on("error",n),x.on("end",a),x.on("close",a),l.on("close",a),l.emit("pipe",x),l}},74322:function($){var R={};function e(A,l,T){T||(T=Error);var x=function(d){var s,t;function o(r,n,a){return d.call(this,function(i,c,h){return typeof l=="string"?l:l(i,c,h)}(r,n,a))||this}return t=d,(s=o).prototype=Object.create(t.prototype),s.prototype.constructor=s,s.__proto__=t,o}(T);x.prototype.name=T.name,x.prototype.code=A,R[A]=x}function k(A,l){if(Array.isArray(A)){var T=A.length;return A=A.map(function(x){return String(x)}),T>2?"one of ".concat(l," ").concat(A.slice(0,T-1).join(", "),", or ")+A[T-1]:T===2?"one of ".concat(l," ").concat(A[0]," or ").concat(A[1]):"of ".concat(l," ").concat(A[0])}return"of ".concat(l," ").concat(String(A))}e("ERR_INVALID_OPT_VALUE",function(A,l){return'The value "'+l+'" is invalid for option "'+A+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(A,l,T){var x,d,s,t,o;if(typeof l=="string"&&(d="not ",l.substr(0,d.length)===d)?(x="must not be",l=l.replace(/^not /,"")):x="must be",function(n,a,i){return(i===void 0||i>n.length)&&(i=n.length),n.substring(i-a.length,i)===a}(A," argument"))s="The ".concat(A," ").concat(x," ").concat(k(l,"type"));else{var r=(typeof o!="number"&&(o=0),o+1>(t=A).length||t.indexOf(".",o)===-1?"argument":"property");s='The "'.concat(A,'" ').concat(r," ").concat(x," ").concat(k(l,"type"))}return s+". Received type ".concat(typeof T)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(A){return"The "+A+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(A){return"Cannot call "+A+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(A){return"Unknown encoding: "+A},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),$.exports.q=R},37865:function($,R,e){var k=e(90386),A=Object.keys||function(n){var a=[];for(var i in n)a.push(i);return a};$.exports=t;var l=e(40410),T=e(37493);e(42018)(t,l);for(var x=A(T.prototype),d=0;d<x.length;d++){var s=x[d];t.prototype[s]||(t.prototype[s]=T.prototype[s])}function t(n){if(!(this instanceof t))return new t(n);l.call(this,n),T.call(this,n),this.allowHalfOpen=!0,n&&(n.readable===!1&&(this.readable=!1),n.writable===!1&&(this.writable=!1),n.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",o)))}function o(){this._writableState.ended||k.nextTick(r,this)}function r(n){n.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(n){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},66897:function($,R,e){$.exports=A;var k=e(74308);function A(l){if(!(this instanceof A))return new A(l);k.call(this,l)}e(42018)(A,k),A.prototype._transform=function(l,T,x){x(null,l)}},40410:function($,R,e){var k,A=e(90386);$.exports=w,w.ReadableState=m,e(15398).EventEmitter;var l,T=function(G,V){return G.listeners(V).length},x=e(71405),d=e(12856).Buffer,s=e.g.Uint8Array||function(){},t=e(40964);l=t&&t.debuglog?t.debuglog("stream"):function(){};var o,r,n,a=e(31125),i=e(65756),c=e(56306).getHighWaterMark,h=e(74322).q,f=h.ERR_INVALID_ARG_TYPE,b=h.ERR_STREAM_PUSH_AFTER_EOF,v=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(42018)(w,x);var y=i.errorOrDestroy,p=["error","close","destroy","pause","resume"];function m(G,V,W){k=k||e(37865),G=G||{},typeof W!="boolean"&&(W=V instanceof k),this.objectMode=!!G.objectMode,W&&(this.objectMode=this.objectMode||!!G.readableObjectMode),this.highWaterMark=c(this,G,"readableHighWaterMark",W),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=G.emitClose!==!1,this.autoDestroy=!!G.autoDestroy,this.destroyed=!1,this.defaultEncoding=G.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,G.encoding&&(o||(o=e(68019).s),this.decoder=new o(G.encoding),this.encoding=G.encoding)}function w(G){if(k=k||e(37865),!(this instanceof w))return new w(G);var V=this instanceof k;this._readableState=new m(G,this,V),this.readable=!0,G&&(typeof G.read=="function"&&(this._read=G.read),typeof G.destroy=="function"&&(this._destroy=G.destroy)),x.call(this)}function u(G,V,W,J,X){l("readableAddChunk",V);var ee,re=G._readableState;if(V===null)re.reading=!1,function(ie,se){if(l("onEofChunk"),!se.ended){if(se.decoder){var fe=se.decoder.end();fe&&fe.length&&(se.buffer.push(fe),se.length+=se.objectMode?1:fe.length)}se.ended=!0,se.sync?L(ie):(se.needReadable=!1,se.emittedReadable||(se.emittedReadable=!0,C(ie)))}}(G,re);else if(X||(ee=function(ie,se){var fe,ye;return ye=se,d.isBuffer(ye)||ye instanceof s||typeof se=="string"||se===void 0||ie.objectMode||(fe=new f("chunk",["string","Buffer","Uint8Array"],se)),fe}(re,V)),ee)y(G,ee);else if(re.objectMode||V&&V.length>0)if(typeof V=="string"||re.objectMode||Object.getPrototypeOf(V)===d.prototype||(V=function(ie){return d.from(ie)}(V)),J)re.endEmitted?y(G,new g):S(G,re,V,!0);else if(re.ended)y(G,new b);else{if(re.destroyed)return!1;re.reading=!1,re.decoder&&!W?(V=re.decoder.write(V),re.objectMode||V.length!==0?S(G,re,V,!1):P(G,re)):S(G,re,V,!1)}else J||(re.reading=!1,P(G,re));return!re.ended&&(re.length<re.highWaterMark||re.length===0)}function S(G,V,W,J){V.flowing&&V.length===0&&!V.sync?(V.awaitDrain=0,G.emit("data",W)):(V.length+=V.objectMode?1:W.length,J?V.buffer.unshift(W):V.buffer.push(W),V.needReadable&&L(G)),P(G,V)}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(G){this._readableState&&(this._readableState.destroyed=G)}}),w.prototype.destroy=i.destroy,w.prototype._undestroy=i.undestroy,w.prototype._destroy=function(G,V){V(G)},w.prototype.push=function(G,V){var W,J=this._readableState;return J.objectMode?W=!0:typeof G=="string"&&((V=V||J.defaultEncoding)!==J.encoding&&(G=d.from(G,V),V=""),W=!0),u(this,G,V,!1,W)},w.prototype.unshift=function(G){return u(this,G,null,!0,!1)},w.prototype.isPaused=function(){return this._readableState.flowing===!1},w.prototype.setEncoding=function(G){o||(o=e(68019).s);var V=new o(G);this._readableState.decoder=V,this._readableState.encoding=this._readableState.decoder.encoding;for(var W=this._readableState.buffer.head,J="";W!==null;)J+=V.write(W.data),W=W.next;return this._readableState.buffer.clear(),J!==""&&this._readableState.buffer.push(J),this._readableState.length=J.length,this};var _=1073741824;function E(G,V){return G<=0||V.length===0&&V.ended?0:V.objectMode?1:G!=G?V.flowing&&V.length?V.buffer.head.data.length:V.length:(G>V.highWaterMark&&(V.highWaterMark=function(W){return W>=_?W=_:(W--,W|=W>>>1,W|=W>>>2,W|=W>>>4,W|=W>>>8,W|=W>>>16,W++),W}(G)),G<=V.length?G:V.ended?V.length:(V.needReadable=!0,0))}function L(G){var V=G._readableState;l("emitReadable",V.needReadable,V.emittedReadable),V.needReadable=!1,V.emittedReadable||(l("emitReadable",V.flowing),V.emittedReadable=!0,A.nextTick(C,G))}function C(G){var V=G._readableState;l("emitReadable_",V.destroyed,V.length,V.ended),V.destroyed||!V.length&&!V.ended||(G.emit("readable"),V.emittedReadable=!1),V.needReadable=!V.flowing&&!V.ended&&V.length<=V.highWaterMark,F(G)}function P(G,V){V.readingMore||(V.readingMore=!0,A.nextTick(I,G,V))}function I(G,V){for(;!V.reading&&!V.ended&&(V.length<V.highWaterMark||V.flowing&&V.length===0);){var W=V.length;if(l("maybeReadMore read 0"),G.read(0),W===V.length)break}V.readingMore=!1}function U(G){var V=G._readableState;V.readableListening=G.listenerCount("readable")>0,V.resumeScheduled&&!V.paused?V.flowing=!0:G.listenerCount("data")>0&&G.resume()}function z(G){l("readable nexttick read 0"),G.read(0)}function H(G,V){l("resume",V.reading),V.reading||G.read(0),V.resumeScheduled=!1,G.emit("resume"),F(G),V.flowing&&!V.reading&&G.read(0)}function F(G){var V=G._readableState;for(l("flow",V.flowing);V.flowing&&G.read()!==null;);}function N(G,V){return V.length===0?null:(V.objectMode?W=V.buffer.shift():!G||G>=V.length?(W=V.decoder?V.buffer.join(""):V.buffer.length===1?V.buffer.first():V.buffer.concat(V.length),V.buffer.clear()):W=V.buffer.consume(G,V.decoder),W);var W}function B(G){var V=G._readableState;l("endReadable",V.endEmitted),V.endEmitted||(V.ended=!0,A.nextTick(j,V,G))}function j(G,V){if(l("endReadableNT",G.endEmitted,G.length),!G.endEmitted&&G.length===0&&(G.endEmitted=!0,V.readable=!1,V.emit("end"),G.autoDestroy)){var W=V._writableState;(!W||W.autoDestroy&&W.finished)&&V.destroy()}}function K(G,V){for(var W=0,J=G.length;W<J;W++)if(G[W]===V)return W;return-1}w.prototype.read=function(G){l("read",G),G=parseInt(G,10);var V=this._readableState,W=G;if(G!==0&&(V.emittedReadable=!1),G===0&&V.needReadable&&((V.highWaterMark!==0?V.length>=V.highWaterMark:V.length>0)||V.ended))return l("read: emitReadable",V.length,V.ended),V.length===0&&V.ended?B(this):L(this),null;if((G=E(G,V))===0&&V.ended)return V.length===0&&B(this),null;var J,X=V.needReadable;return l("need readable",X),(V.length===0||V.length-G<V.highWaterMark)&&l("length less than watermark",X=!0),V.ended||V.reading?l("reading or ended",X=!1):X&&(l("do read"),V.reading=!0,V.sync=!0,V.length===0&&(V.needReadable=!0),this._read(V.highWaterMark),V.sync=!1,V.reading||(G=E(W,V))),(J=G>0?N(G,V):null)===null?(V.needReadable=V.length<=V.highWaterMark,G=0):(V.length-=G,V.awaitDrain=0),V.length===0&&(V.ended||(V.needReadable=!0),W!==G&&V.ended&&B(this)),J!==null&&this.emit("data",J),J},w.prototype._read=function(G){y(this,new v("_read()"))},w.prototype.pipe=function(G,V){var W=this,J=this._readableState;switch(J.pipesCount){case 0:J.pipes=G;break;case 1:J.pipes=[J.pipes,G];break;default:J.pipes.push(G)}J.pipesCount+=1,l("pipe count=%d opts=%j",J.pipesCount,V);var X=V&&V.end===!1||G===A.stdout||G===A.stderr?he:ee;function ee(){l("onend"),G.end()}J.endEmitted?A.nextTick(X):W.once("end",X),G.on("unpipe",function ve(Oe,xe){l("onunpipe"),Oe===W&&xe&&xe.hasUnpiped===!1&&(xe.hasUnpiped=!0,l("cleanup"),G.removeListener("close",ye),G.removeListener("finish",ge),G.removeListener("drain",re),G.removeListener("error",fe),G.removeListener("unpipe",ve),W.removeListener("end",ee),W.removeListener("end",he),W.removeListener("data",se),ie=!0,!J.awaitDrain||G._writableState&&!G._writableState.needDrain||re())});var re=function(ve){return function(){var Oe=ve._readableState;l("pipeOnDrain",Oe.awaitDrain),Oe.awaitDrain&&Oe.awaitDrain--,Oe.awaitDrain===0&&T(ve,"data")&&(Oe.flowing=!0,F(ve))}}(W);G.on("drain",re);var ie=!1;function se(ve){l("ondata");var Oe=G.write(ve);l("dest.write",Oe),Oe===!1&&((J.pipesCount===1&&J.pipes===G||J.pipesCount>1&&K(J.pipes,G)!==-1)&&!ie&&(l("false write response, pause",J.awaitDrain),J.awaitDrain++),W.pause())}function fe(ve){l("onerror",ve),he(),G.removeListener("error",fe),T(G,"error")===0&&y(G,ve)}function ye(){G.removeListener("finish",ge),he()}function ge(){l("onfinish"),G.removeListener("close",ye),he()}function he(){l("unpipe"),W.unpipe(G)}return W.on("data",se),function(ve,Oe,xe){if(typeof ve.prependListener=="function")return ve.prependListener(Oe,xe);ve._events&&ve._events.error?Array.isArray(ve._events.error)?ve._events.error.unshift(xe):ve._events.error=[xe,ve._events.error]:ve.on(Oe,xe)}(G,"error",fe),G.once("close",ye),G.once("finish",ge),G.emit("pipe",W),J.flowing||(l("pipe resume"),W.resume()),G},w.prototype.unpipe=function(G){var V=this._readableState,W={hasUnpiped:!1};if(V.pipesCount===0)return this;if(V.pipesCount===1)return G&&G!==V.pipes||(G||(G=V.pipes),V.pipes=null,V.pipesCount=0,V.flowing=!1,G&&G.emit("unpipe",this,W)),this;if(!G){var J=V.pipes,X=V.pipesCount;V.pipes=null,V.pipesCount=0,V.flowing=!1;for(var ee=0;ee<X;ee++)J[ee].emit("unpipe",this,{hasUnpiped:!1});return this}var re=K(V.pipes,G);return re===-1||(V.pipes.splice(re,1),V.pipesCount-=1,V.pipesCount===1&&(V.pipes=V.pipes[0]),G.emit("unpipe",this,W)),this},w.prototype.on=function(G,V){var W=x.prototype.on.call(this,G,V),J=this._readableState;return G==="data"?(J.readableListening=this.listenerCount("readable")>0,J.flowing!==!1&&this.resume()):G==="readable"&&(J.endEmitted||J.readableListening||(J.readableListening=J.needReadable=!0,J.flowing=!1,J.emittedReadable=!1,l("on readable",J.length,J.reading),J.length?L(this):J.reading||A.nextTick(z,this))),W},w.prototype.addListener=w.prototype.on,w.prototype.removeListener=function(G,V){var W=x.prototype.removeListener.call(this,G,V);return G==="readable"&&A.nextTick(U,this),W},w.prototype.removeAllListeners=function(G){var V=x.prototype.removeAllListeners.apply(this,arguments);return G!=="readable"&&G!==void 0||A.nextTick(U,this),V},w.prototype.resume=function(){var G=this._readableState;return G.flowing||(l("resume"),G.flowing=!G.readableListening,function(V,W){W.resumeScheduled||(W.resumeScheduled=!0,A.nextTick(H,V,W))}(this,G)),G.paused=!1,this},w.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(G){var V=this,W=this._readableState,J=!1;for(var X in G.on("end",function(){if(l("wrapped end"),W.decoder&&!W.ended){var re=W.decoder.end();re&&re.length&&V.push(re)}V.push(null)}),G.on("data",function(re){l("wrapped data"),W.decoder&&(re=W.decoder.write(re)),W.objectMode&&re==null||(W.objectMode||re&&re.length)&&(V.push(re)||(J=!0,G.pause()))}),G)this[X]===void 0&&typeof G[X]=="function"&&(this[X]=function(re){return function(){return G[re].apply(G,arguments)}}(X));for(var ee=0;ee<p.length;ee++)G.on(p[ee],this.emit.bind(this,p[ee]));return this._read=function(re){l("wrapped _read",re),J&&(J=!1,G.resume())},this},typeof Symbol=="function"&&(w.prototype[Symbol.asyncIterator]=function(){return r===void 0&&(r=e(68221)),r(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(G){this._readableState&&(this._readableState.flowing=G)}}),w._fromList=N,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(w.from=function(G,V){return n===void 0&&(n=e(31748)),n(w,G,V)})},74308:function($,R,e){$.exports=t;var k=e(74322).q,A=k.ERR_METHOD_NOT_IMPLEMENTED,l=k.ERR_MULTIPLE_CALLBACK,T=k.ERR_TRANSFORM_ALREADY_TRANSFORMING,x=k.ERR_TRANSFORM_WITH_LENGTH_0,d=e(37865);function s(n,a){var i=this._transformState;i.transforming=!1;var c=i.writecb;if(c===null)return this.emit("error",new l);i.writechunk=null,i.writecb=null,a!=null&&this.push(a),c(n);var h=this._readableState;h.reading=!1,(h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}function t(n){if(!(this instanceof t))return new t(n);d.call(this,n),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",o)}function o(){var n=this;typeof this._flush!="function"||this._readableState.destroyed?r(this,null,null):this._flush(function(a,i){r(n,a,i)})}function r(n,a,i){if(a)return n.emit("error",a);if(i!=null&&n.push(i),n._writableState.length)throw new x;if(n._transformState.transforming)throw new T;return n.push(null)}e(42018)(t,d),t.prototype.push=function(n,a){return this._transformState.needTransform=!1,d.prototype.push.call(this,n,a)},t.prototype._transform=function(n,a,i){i(new A("_transform()"))},t.prototype._write=function(n,a,i){var c=this._transformState;if(c.writecb=i,c.writechunk=n,c.writeencoding=a,!c.transforming){var h=this._readableState;(c.needTransform||h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}},t.prototype._read=function(n){var a=this._transformState;a.writechunk===null||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))},t.prototype._destroy=function(n,a){d.prototype._destroy.call(this,n,function(i){a(i)})}},37493:function($,R,e){var k,A=e(90386);function l(P){var I=this;this.next=null,this.entry=null,this.finish=function(){(function(U,z,H){var F=U.entry;for(U.entry=null;F;){var N=F.callback;z.pendingcb--,N(void 0),F=F.next}z.corkedRequestsFree.next=U})(I,P)}}$.exports=w,w.WritableState=m;var T,x={deprecate:e(20588)},d=e(71405),s=e(12856).Buffer,t=e.g.Uint8Array||function(){},o=e(65756),r=e(56306).getHighWaterMark,n=e(74322).q,a=n.ERR_INVALID_ARG_TYPE,i=n.ERR_METHOD_NOT_IMPLEMENTED,c=n.ERR_MULTIPLE_CALLBACK,h=n.ERR_STREAM_CANNOT_PIPE,f=n.ERR_STREAM_DESTROYED,b=n.ERR_STREAM_NULL_VALUES,v=n.ERR_STREAM_WRITE_AFTER_END,g=n.ERR_UNKNOWN_ENCODING,y=o.errorOrDestroy;function p(){}function m(P,I,U){k=k||e(37865),P=P||{},typeof U!="boolean"&&(U=I instanceof k),this.objectMode=!!P.objectMode,U&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=r(this,P,"writableHighWaterMark",U),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var z=P.decodeStrings===!1;this.decodeStrings=!z,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(H){(function(F,N){var B=F._writableState,j=B.sync,K=B.writecb;if(typeof K!="function")throw new c;if(function(V){V.writing=!1,V.writecb=null,V.length-=V.writelen,V.writelen=0}(B),N)(function(V,W,J,X,ee){--W.pendingcb,J?(A.nextTick(ee,X),A.nextTick(C,V,W),V._writableState.errorEmitted=!0,y(V,X)):(ee(X),V._writableState.errorEmitted=!0,y(V,X),C(V,W))})(F,B,j,N,K);else{var G=E(B)||F.destroyed;G||B.corked||B.bufferProcessing||!B.bufferedRequest||_(F,B),j?A.nextTick(S,F,B,G,K):S(F,B,G,K)}})(I,H)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new l(this)}function w(P){var I=this instanceof(k=k||e(37865));if(!I&&!T.call(w,this))return new w(P);this._writableState=new m(P,this,I),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),d.call(this)}function u(P,I,U,z,H,F,N){I.writelen=z,I.writecb=N,I.writing=!0,I.sync=!0,I.destroyed?I.onwrite(new f("write")):U?P._writev(H,I.onwrite):P._write(H,F,I.onwrite),I.sync=!1}function S(P,I,U,z){U||function(H,F){F.length===0&&F.needDrain&&(F.needDrain=!1,H.emit("drain"))}(P,I),I.pendingcb--,z(),C(P,I)}function _(P,I){I.bufferProcessing=!0;var U=I.bufferedRequest;if(P._writev&&U&&U.next){var z=I.bufferedRequestCount,H=new Array(z),F=I.corkedRequestsFree;F.entry=U;for(var N=0,B=!0;U;)H[N]=U,U.isBuf||(B=!1),U=U.next,N+=1;H.allBuffers=B,u(P,I,!0,I.length,H,"",F.finish),I.pendingcb++,I.lastBufferedRequest=null,F.next?(I.corkedRequestsFree=F.next,F.next=null):I.corkedRequestsFree=new l(I),I.bufferedRequestCount=0}else{for(;U;){var j=U.chunk,K=U.encoding,G=U.callback;if(u(P,I,!1,I.objectMode?1:j.length,j,K,G),U=U.next,I.bufferedRequestCount--,I.writing)break}U===null&&(I.lastBufferedRequest=null)}I.bufferedRequest=U,I.bufferProcessing=!1}function E(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function L(P,I){P._final(function(U){I.pendingcb--,U&&y(P,U),I.prefinished=!0,P.emit("prefinish"),C(P,I)})}function C(P,I){var U=E(I);if(U&&(function(H,F){F.prefinished||F.finalCalled||(typeof H._final!="function"||F.destroyed?(F.prefinished=!0,H.emit("prefinish")):(F.pendingcb++,F.finalCalled=!0,A.nextTick(L,H,F)))}(P,I),I.pendingcb===0&&(I.finished=!0,P.emit("finish"),I.autoDestroy))){var z=P._readableState;(!z||z.autoDestroy&&z.endEmitted)&&P.destroy()}return U}e(42018)(w,d),m.prototype.getBuffer=function(){for(var P=this.bufferedRequest,I=[];P;)I.push(P),P=P.next;return I},function(){try{Object.defineProperty(m.prototype,"buffer",{get:x.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(P){return!!T.call(this,P)||this===w&&P&&P._writableState instanceof m}})):T=function(P){return P instanceof this},w.prototype.pipe=function(){y(this,new h)},w.prototype.write=function(P,I,U){var z,H=this._writableState,F=!1,N=!H.objectMode&&(z=P,s.isBuffer(z)||z instanceof t);return N&&!s.isBuffer(P)&&(P=function(B){return s.from(B)}(P)),typeof I=="function"&&(U=I,I=null),N?I="buffer":I||(I=H.defaultEncoding),typeof U!="function"&&(U=p),H.ending?function(B,j){var K=new v;y(B,K),A.nextTick(j,K)}(this,U):(N||function(B,j,K,G){var V;return K===null?V=new b:typeof K=="string"||j.objectMode||(V=new a("chunk",["string","Buffer"],K)),!V||(y(B,V),A.nextTick(G,V),!1)}(this,H,P,U))&&(H.pendingcb++,F=function(B,j,K,G,V,W){if(!K){var J=function(ie,se,fe){return ie.objectMode||ie.decodeStrings===!1||typeof se!="string"||(se=s.from(se,fe)),se}(j,G,V);G!==J&&(K=!0,V="buffer",G=J)}var X=j.objectMode?1:G.length;j.length+=X;var ee=j.length<j.highWaterMark;if(ee||(j.needDrain=!0),j.writing||j.corked){var re=j.lastBufferedRequest;j.lastBufferedRequest={chunk:G,encoding:V,isBuf:K,callback:W,next:null},re?re.next=j.lastBufferedRequest:j.bufferedRequest=j.lastBufferedRequest,j.bufferedRequestCount+=1}else u(B,j,!1,X,G,V,W);return ee}(this,H,N,P,I,U)),F},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,P.writing||P.corked||P.bufferProcessing||!P.bufferedRequest||_(this,P))},w.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new g(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(P,I,U){U(new i("_write()"))},w.prototype._writev=null,w.prototype.end=function(P,I,U){var z=this._writableState;return typeof P=="function"?(U=P,P=null,I=null):typeof I=="function"&&(U=I,I=null),P!=null&&this.write(P,I),z.corked&&(z.corked=1,this.uncork()),z.ending||function(H,F,N){F.ending=!0,C(H,F),N&&(F.finished?A.nextTick(N):H.once("finish",N)),F.ended=!0,H.writable=!1}(this,z,U),this},Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),w.prototype.destroy=o.destroy,w.prototype._undestroy=o.undestroy,w.prototype._destroy=function(P,I){I(P)}},68221:function($,R,e){var k,A=e(90386);function l(b,v,g){return v in b?Object.defineProperty(b,v,{value:g,enumerable:!0,configurable:!0,writable:!0}):b[v]=g,b}var T=e(12726),x=Symbol("lastResolve"),d=Symbol("lastReject"),s=Symbol("error"),t=Symbol("ended"),o=Symbol("lastPromise"),r=Symbol("handlePromise"),n=Symbol("stream");function a(b,v){return{value:b,done:v}}function i(b){var v=b[x];if(v!==null){var g=b[n].read();g!==null&&(b[o]=null,b[x]=null,b[d]=null,v(a(g,!1)))}}function c(b){A.nextTick(i,b)}var h=Object.getPrototypeOf(function(){}),f=Object.setPrototypeOf((l(k={get stream(){return this[n]},next:function(){var b=this,v=this[s];if(v!==null)return Promise.reject(v);if(this[t])return Promise.resolve(a(void 0,!0));if(this[n].destroyed)return new Promise(function(m,w){A.nextTick(function(){b[s]?w(b[s]):m(a(void 0,!0))})});var g,y=this[o];if(y)g=new Promise(function(m,w){return function(u,S){m.then(function(){w[t]?u(a(void 0,!0)):w[r](u,S)},S)}}(y,this));else{var p=this[n].read();if(p!==null)return Promise.resolve(a(p,!1));g=new Promise(this[r])}return this[o]=g,g}},Symbol.asyncIterator,function(){return this}),l(k,"return",function(){var b=this;return new Promise(function(v,g){b[n].destroy(null,function(y){y?g(y):v(a(void 0,!0))})})}),k),h);$.exports=function(b){var v,g=Object.create(f,(l(v={},n,{value:b,writable:!0}),l(v,x,{value:null,writable:!0}),l(v,d,{value:null,writable:!0}),l(v,s,{value:null,writable:!0}),l(v,t,{value:b._readableState.endEmitted,writable:!0}),l(v,r,{value:function(y,p){var m=g[n].read();m?(g[o]=null,g[x]=null,g[d]=null,y(a(m,!1))):(g[x]=y,g[d]=p)},writable:!0}),v));return g[o]=null,T(b,function(y){if(y&&y.code!=="ERR_STREAM_PREMATURE_CLOSE"){var p=g[d];return p!==null&&(g[o]=null,g[x]=null,g[d]=null,p(y)),void(g[s]=y)}var m=g[x];m!==null&&(g[o]=null,g[x]=null,g[d]=null,m(a(void 0,!0))),g[t]=!0}),b.on("readable",c.bind(null,g)),g}},31125:function($,R,e){function k(s,t){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),o.push.apply(o,r)}return o}function A(s,t,o){return t in s?Object.defineProperty(s,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[t]=o,s}function l(s,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,r.key,r)}}var T=e(12856).Buffer,x=e(69862).inspect,d=x&&x.custom||"inspect";$.exports=function(){function s(){(function(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")})(this,s),this.head=null,this.tail=null,this.length=0}var t,o;return t=s,o=[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,a=""+n.data;n=n.next;)a+=r+n.data;return a}},{key:"concat",value:function(r){if(this.length===0)return T.alloc(0);for(var n,a,i,c=T.allocUnsafe(r>>>0),h=this.head,f=0;h;)n=h.data,a=c,i=f,T.prototype.copy.call(n,a,i),f+=h.data.length,h=h.next;return c}},{key:"consume",value:function(r,n){var a;return r<this.head.data.length?(a=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):a=r===this.head.data.length?this.shift():n?this._getString(r):this._getBuffer(r),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,a=1,i=n.data;for(r-=i.length;n=n.next;){var c=n.data,h=r>c.length?c.length:r;if(h===c.length?i+=c:i+=c.slice(0,r),(r-=h)==0){h===c.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=c.slice(h));break}++a}return this.length-=a,i}},{key:"_getBuffer",value:function(r){var n=T.allocUnsafe(r),a=this.head,i=1;for(a.data.copy(n),r-=a.data.length;a=a.next;){var c=a.data,h=r>c.length?c.length:r;if(c.copy(n,n.length-r,0,h),(r-=h)==0){h===c.length?(++i,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=c.slice(h));break}++i}return this.length-=i,n}},{key:d,value:function(r,n){return x(this,function(a){for(var i=1;i<arguments.length;i++){var c=arguments[i]!=null?arguments[i]:{};i%2?k(Object(c),!0).forEach(function(h){A(a,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):k(Object(c)).forEach(function(h){Object.defineProperty(a,h,Object.getOwnPropertyDescriptor(c,h))})}return a}({},n,{depth:0,customInspect:!1}))}}],o&&l(t.prototype,o),s}()},65756:function($,R,e){var k=e(90386);function A(x,d){T(x,d),l(x)}function l(x){x._writableState&&!x._writableState.emitClose||x._readableState&&!x._readableState.emitClose||x.emit("close")}function T(x,d){x.emit("error",d)}$.exports={destroy:function(x,d){var s=this,t=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return t||o?(d?d(x):x&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,k.nextTick(T,this,x)):k.nextTick(T,this,x)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(x||null,function(r){!d&&r?s._writableState?s._writableState.errorEmitted?k.nextTick(l,s):(s._writableState.errorEmitted=!0,k.nextTick(A,s,r)):k.nextTick(A,s,r):d?(k.nextTick(l,s),d(r)):k.nextTick(l,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(x,d){var s=x._readableState,t=x._writableState;s&&s.autoDestroy||t&&t.autoDestroy?x.destroy(d):x.emit("error",d)}}},12726:function($,R,e){var k=e(74322).q.ERR_STREAM_PREMATURE_CLOSE;function A(){}$.exports=function l(T,x,d){if(typeof x=="function")return l(T,null,x);x||(x={}),d=function(b){var v=!1;return function(){if(!v){v=!0;for(var g=arguments.length,y=new Array(g),p=0;p<g;p++)y[p]=arguments[p];b.apply(this,y)}}}(d||A);var s=x.readable||x.readable!==!1&&T.readable,t=x.writable||x.writable!==!1&&T.writable,o=function(){T.writable||n()},r=T._writableState&&T._writableState.finished,n=function(){t=!1,r=!0,s||d.call(T)},a=T._readableState&&T._readableState.endEmitted,i=function(){s=!1,a=!0,t||d.call(T)},c=function(b){d.call(T,b)},h=function(){var b;return s&&!a?(T._readableState&&T._readableState.ended||(b=new k),d.call(T,b)):t&&!r?(T._writableState&&T._writableState.ended||(b=new k),d.call(T,b)):void 0},f=function(){T.req.on("finish",n)};return function(b){return b.setHeader&&typeof b.abort=="function"}(T)?(T.on("complete",n),T.on("abort",h),T.req?f():T.on("request",f)):t&&!T._writableState&&(T.on("end",o),T.on("close",o)),T.on("end",i),T.on("finish",n),x.error!==!1&&T.on("error",c),T.on("close",h),function(){T.removeListener("complete",n),T.removeListener("abort",h),T.removeListener("request",f),T.req&&T.req.removeListener("finish",n),T.removeListener("end",o),T.removeListener("close",o),T.removeListener("finish",n),T.removeListener("end",i),T.removeListener("error",c),T.removeListener("close",h)}}},31748:function($){$.exports=function(){throw new Error("Readable.from is not available in the browser")}},10168:function($,R,e){var k,A=e(74322).q,l=A.ERR_MISSING_ARGS,T=A.ERR_STREAM_DESTROYED;function x(r){if(r)throw r}function d(r,n,a,i){i=function(f){var b=!1;return function(){b||(b=!0,f.apply(void 0,arguments))}}(i);var c=!1;r.on("close",function(){c=!0}),k===void 0&&(k=e(12726)),k(r,{readable:n,writable:a},function(f){if(f)return i(f);c=!0,i()});var h=!1;return function(f){if(!c&&!h)return h=!0,function(b){return b.setHeader&&typeof b.abort=="function"}(r)?r.abort():typeof r.destroy=="function"?r.destroy():void i(f||new T("pipe"))}}function s(r){r()}function t(r,n){return r.pipe(n)}function o(r){return r.length?typeof r[r.length-1]!="function"?x:r.pop():x}$.exports=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i,c=o(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new l("streams");var h=n.map(function(f,b){var v=b<n.length-1;return d(f,v,b>0,function(g){i||(i=g),g&&h.forEach(s),v||(h.forEach(s),c(i))})});return n.reduce(t)}},56306:function($,R,e){var k=e(74322).q.ERR_INVALID_OPT_VALUE;$.exports={getHighWaterMark:function(A,l,T,x){var d=function(s,t,o){return s.highWaterMark!=null?s.highWaterMark:t?s[o]:null}(l,x,T);if(d!=null){if(!isFinite(d)||Math.floor(d)!==d||d<0)throw new k(x?T:"highWaterMark",d);return Math.floor(d)}return A.objectMode?16:16384}}},71405:function($,R,e){$.exports=e(15398).EventEmitter},68019:function($,R,e){var k=e(71665).Buffer,A=k.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(a){var i;switch(this.encoding=function(c){var h=function(f){if(!f)return"utf8";for(var b;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(b)return;f=(""+f).toLowerCase(),b=!0}}(c);if(typeof h!="string"&&(k.isEncoding===A||!A(c)))throw new Error("Unknown encoding: "+c);return h||c}(a),this.encoding){case"utf16le":this.text=d,this.end=s,i=4;break;case"utf8":this.fillLast=x,i=4;break;case"base64":this.text=t,this.end=o,i=3;break;default:return this.write=r,void(this.end=n)}this.lastNeed=0,this.lastTotal=0,this.lastChar=k.allocUnsafe(i)}function T(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function x(a){var i=this.lastTotal-this.lastNeed,c=function(h,f,b){if((192&f[0])!=128)return h.lastNeed=0,"";if(h.lastNeed>1&&f.length>1){if((192&f[1])!=128)return h.lastNeed=1,"";if(h.lastNeed>2&&f.length>2&&(192&f[2])!=128)return h.lastNeed=2,""}}(this,a);return c!==void 0?c:this.lastNeed<=a.length?(a.copy(this.lastChar,i,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,i,0,a.length),void(this.lastNeed-=a.length))}function d(a,i){if((a.length-i)%2==0){var c=a.toString("utf16le",i);if(c){var h=c.charCodeAt(c.length-1);if(h>=55296&&h<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",i,a.length-1)}function s(a){var i=a&&a.length?this.write(a):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return i+this.lastChar.toString("utf16le",0,c)}return i}function t(a,i){var c=(a.length-i)%3;return c===0?a.toString("base64",i):(this.lastNeed=3-c,this.lastTotal=3,c===1?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",i,a.length-c))}function o(a){var i=a&&a.length?this.write(a):"";return this.lastNeed?i+this.lastChar.toString("base64",0,3-this.lastNeed):i}function r(a){return a.toString(this.encoding)}function n(a){return a&&a.length?this.write(a):""}R.s=l,l.prototype.write=function(a){if(a.length===0)return"";var i,c;if(this.lastNeed){if((i=this.fillLast(a))===void 0)return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<a.length?i?i+this.text(a,c):this.text(a,c):i||""},l.prototype.end=function(a){var i=a&&a.length?this.write(a):"";return this.lastNeed?i+"":i},l.prototype.text=function(a,i){var c=function(f,b,v){var g=b.length-1;if(g<v)return 0;var y=T(b[g]);return y>=0?(y>0&&(f.lastNeed=y-1),y):--g<v||y===-2?0:(y=T(b[g]))>=0?(y>0&&(f.lastNeed=y-2),y):--g<v||y===-2?0:(y=T(b[g]))>=0?(y>0&&(y===2?y=0:f.lastNeed=y-3),y):0}(this,a,i);if(!this.lastNeed)return a.toString("utf8",i);this.lastTotal=c;var h=a.length-(c-this.lastNeed);return a.copy(this.lastChar,0,h),a.toString("utf8",i,h)},l.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},90715:function($,R,e){var k=e(32791),A=e(41633)("stream-parser");function l(a){A("initializing parser stream"),a._parserBytesLeft=0,a._parserBuffers=[],a._parserBuffered=0,a._parserState=-1,a._parserCallback=null,typeof a.push=="function"&&(a._parserOutput=a.push.bind(a)),a._parserInit=!0}function T(a,i){k(!this._parserCallback,'there is already a "callback" set!'),k(isFinite(a)&&a>0,'can only buffer a finite number of bytes > 0, got "'+a+'"'),this._parserInit||l(this),A("buffering %o bytes",a),this._parserBytesLeft=a,this._parserCallback=i,this._parserState=0}function x(a,i){k(!this._parserCallback,'there is already a "callback" set!'),k(a>0,'can only skip > 0 bytes, got "'+a+'"'),this._parserInit||l(this),A("skipping %o bytes",a),this._parserBytesLeft=a,this._parserCallback=i,this._parserState=1}function d(a,i){k(!this._parserCallback,'There is already a "callback" set!'),k(a>0,'can only pass through > 0 bytes, got "'+a+'"'),this._parserInit||l(this),A("passing through %o bytes",a),this._parserBytesLeft=a,this._parserCallback=i,this._parserState=2}function s(a,i,c){this._parserInit||l(this),A("write(%o bytes)",a.length),typeof i=="function"&&(c=i),r(this,a,null,c)}function t(a,i,c){this._parserInit||l(this),A("transform(%o bytes)",a.length),typeof i!="function"&&(i=this._parserOutput),r(this,a,i,c)}function o(a,i,c,h){if(a._parserBytesLeft-=i.length,A("%o bytes left for stream piece",a._parserBytesLeft),a._parserState===0?(a._parserBuffers.push(i),a._parserBuffered+=i.length):a._parserState===2&&c(i),a._parserBytesLeft!==0)return h;var f=a._parserCallback;if(f&&a._parserState===0&&a._parserBuffers.length>1&&(i=Buffer.concat(a._parserBuffers,a._parserBuffered)),a._parserState!==0&&(i=null),a._parserCallback=null,a._parserBuffered=0,a._parserState=-1,a._parserBuffers.splice(0),f){var b=[];i&&b.push(i),c&&b.push(c);var v=f.length>b.length;v&&b.push(n(h));var g=f.apply(a,b);if(!v||h===g)return h}}$.exports=function(a){var i=a&&typeof a._transform=="function",c=a&&typeof a._write=="function";if(!i&&!c)throw new Error("must pass a Writable or Transform stream in");A("extending Parser into stream"),a._bytes=T,a._skipBytes=x,i&&(a._passthrough=d),i?a._transform=t:a._write=s};var r=n(function a(i,c,h,f){return i._parserBytesLeft<=0?f(new Error("got data but not currently parsing anything")):c.length<=i._parserBytesLeft?function(){return o(i,c,h,f)}:function(){var b=c.slice(0,i._parserBytesLeft);return o(i,b,h,function(v){return v?f(v):c.length>b.length?function(){return a(i,c.slice(b.length),h,f)}:void 0})}});function n(a){return function(){for(var i=a.apply(this,arguments);typeof i=="function";)i=i();return i}}},41633:function($,R,e){var k=e(90386);function A(){var l;try{l=R.storage.debug}catch{}return!l&&k!==void 0&&"env"in k&&(l=k.env.DEBUG),l}(R=$.exports=e(74469)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},R.formatArgs=function(l){var T=this.useColors;if(l[0]=(T?"%c":"")+this.namespace+(T?" %c":" ")+l[0]+(T?"%c ":" ")+"+"+R.humanize(this.diff),T){var x="color: "+this.color;l.splice(1,0,x,"color: inherit");var d=0,s=0;l[0].replace(/%[a-zA-Z%]/g,function(t){t!=="%%"&&(d++,t==="%c"&&(s=d))}),l.splice(s,0,x)}},R.save=function(l){try{l==null?R.storage.removeItem("debug"):R.storage.debug=l}catch{}},R.load=A,R.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},R.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),R.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],R.formatters.j=function(l){try{return JSON.stringify(l)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}},R.enable(A())},74469:function($,R,e){var k;function A(l){function T(){if(T.enabled){var x=T,d=+new Date,s=d-(k||d);x.diff=s,x.prev=k,x.curr=d,k=d;for(var t=new Array(arguments.length),o=0;o<t.length;o++)t[o]=arguments[o];t[0]=R.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var r=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(a,i){if(a==="%%")return a;r++;var c=R.formatters[i];if(typeof c=="function"){var h=t[r];a=c.call(x,h),t.splice(r,1),r--}return a}),R.formatArgs.call(x,t);var n=T.log||R.log||console.log.bind(console);n.apply(x,t)}}return T.namespace=l,T.enabled=R.enabled(l),T.useColors=R.useColors(),T.color=function(x){var d,s=0;for(d in x)s=(s<<5)-s+x.charCodeAt(d),s|=0;return R.colors[Math.abs(s)%R.colors.length]}(l),typeof R.init=="function"&&R.init(T),T}(R=$.exports=A.debug=A.default=A).coerce=function(l){return l instanceof Error?l.stack||l.message:l},R.disable=function(){R.enable("")},R.enable=function(l){R.save(l),R.names=[],R.skips=[];for(var T=(typeof l=="string"?l:"").split(/[\s,]+/),x=T.length,d=0;d<x;d++)T[d]&&((l=T[d].replace(/\*/g,".*?"))[0]==="-"?R.skips.push(new RegExp("^"+l.substr(1)+"$")):R.names.push(new RegExp("^"+l+"$")))},R.enabled=function(l){var T,x;for(T=0,x=R.skips.length;T<x;T++)if(R.skips[T].test(l))return!1;for(T=0,x=R.names.length;T<x;T++)if(R.names[T].test(l))return!0;return!1},R.humanize=e(11375),R.names=[],R.skips=[],R.formatters={}},11375:function($){var R=1e3,e=60*R,k=60*e,A=24*k;function l(T,x,d){if(!(T<x))return T<1.5*x?Math.floor(T/x)+" "+d:Math.ceil(T/x)+" "+d+"s"}$.exports=function(T,x){x=x||{};var d,s=typeof T;if(s==="string"&&T.length>0)return function(t){if(!((t=String(t)).length>100)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(o){var r=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*A;case"hours":case"hour":case"hrs":case"hr":case"h":return r*k;case"minutes":case"minute":case"mins":case"min":case"m":return r*e;case"seconds":case"second":case"secs":case"sec":case"s":return r*R;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(T);if(s==="number"&&isNaN(T)===!1)return x.long?l(d=T,A,"day")||l(d,k,"hour")||l(d,e,"minute")||l(d,R,"second")||d+" ms":function(t){return t>=A?Math.round(t/A)+"d":t>=k?Math.round(t/k)+"h":t>=e?Math.round(t/e)+"m":t>=R?Math.round(t/R)+"s":t+"ms"}(T);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(T))}},99011:function($,R,e){var k=e(88641);$.exports=function(A,l,T){if(A==null)throw Error("First argument should be a string");if(l==null)throw Error("Separator should be a string or a RegExp");T?(typeof T=="string"||Array.isArray(T))&&(T={ignore:T}):T={},T.escape==null&&(T.escape=!0),T.ignore==null?T.ignore=["[]","()","{}","<>",'""',"''","``","",""]:(typeof T.ignore=="string"&&(T.ignore=[T.ignore]),T.ignore=T.ignore.map(function(n){return n.length===1&&(n+=n),n}));var x=k.parse(A,{flat:!0,brackets:T.ignore}),d=x[0].split(l);if(T.escape){for(var s=[],t=0;t<d.length;t++){var o=d[t],r=d[t+1];o[o.length-1]==="\\"&&o[o.length-2]!=="\\"?(s.push(o+l+r),t++):s.push(o)}d=s}for(t=0;t<d.length;t++)x[0]=d[t],d[t]=k.stringify(x,{flat:!0});return d}},68664:function($){$.exports=function(R){for(var e=R.length,k=new Array(e),A=new Array(e),l=new Array(e),T=new Array(e),x=new Array(e),d=new Array(e),s=0;s<e;++s)k[s]=-1,A[s]=0,l[s]=!1,T[s]=0,x[s]=-1,d[s]=[];var t,o=0,r=[],n=[];function a(h){var f=[h],b=[h];for(k[h]=A[h]=o,l[h]=!0,o+=1;b.length>0;){h=b[b.length-1];var v=R[h];if(T[h]<v.length){for(var g=T[h];g<v.length;++g){var y=v[g];if(k[y]<0){k[y]=A[y]=o,l[y]=!0,o+=1,f.push(y),b.push(y);break}l[y]&&(A[h]=0|Math.min(A[h],A[y])),x[y]>=0&&d[h].push(x[y])}T[h]=g}else{if(A[h]===k[h]){var p=[],m=[],w=0;for(g=f.length-1;g>=0;--g){var u=f[g];if(l[u]=!1,p.push(u),m.push(d[u]),w+=d[u].length,x[u]=r.length,u===h){f.length=g;break}}r.push(p);var S=new Array(w);for(g=0;g<m.length;g++)for(var _=0;_<m[g].length;_++)S[--w]=m[g][_];n.push(S)}b.pop()}}}for(s=0;s<e;++s)k[s]<0&&a(s);for(s=0;s<n.length;s++){var i=n[s];if(i.length!==0){i.sort(function(h,f){return h-f}),t=[i[0]];for(var c=1;c<i.length;c++)i[c]!==i[c-1]&&t.push(i[c]);n[s]=t}}return{components:r,adjacencyList:n}}},7095:function($,R,e){e.r(R);var k=2*Math.PI,A=function(x,d,s,t,o,r,n){var a=x.x,i=x.y;return{x:t*(a*=d)-o*(i*=s)+r,y:o*a+t*i+n}},l=function(x,d){var s=d===1.5707963267948966?.551915024494:d===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(d/4),t=Math.cos(x),o=Math.sin(x),r=Math.cos(x+d),n=Math.sin(x+d);return[{x:t-o*s,y:o+t*s},{x:r+n*s,y:n-r*s},{x:r,y:n}]},T=function(x,d,s,t){var o=x*s+d*t;return o>1&&(o=1),o<-1&&(o=-1),(x*t-d*s<0?-1:1)*Math.acos(o)};R.default=function(x){var d=x.px,s=x.py,t=x.cx,o=x.cy,r=x.rx,n=x.ry,a=x.xAxisRotation,i=a===void 0?0:a,c=x.largeArcFlag,h=c===void 0?0:c,f=x.sweepFlag,b=f===void 0?0:f,v=[];if(r===0||n===0)return[];var g=Math.sin(i*k/360),y=Math.cos(i*k/360),p=y*(d-t)/2+g*(s-o)/2,m=-g*(d-t)/2+y*(s-o)/2;if(p===0&&m===0)return[];r=Math.abs(r),n=Math.abs(n);var w=Math.pow(p,2)/Math.pow(r,2)+Math.pow(m,2)/Math.pow(n,2);w>1&&(r*=Math.sqrt(w),n*=Math.sqrt(w));var u=function(z,H,F,N,B,j,K,G,V,W,J,X){var ee=Math.pow(B,2),re=Math.pow(j,2),ie=Math.pow(J,2),se=Math.pow(X,2),fe=ee*re-ee*se-re*ie;fe<0&&(fe=0),fe/=ee*se+re*ie;var ye=(fe=Math.sqrt(fe)*(K===G?-1:1))*B/j*X,ge=fe*-j/B*J,he=W*ye-V*ge+(z+F)/2,ve=V*ye+W*ge+(H+N)/2,Oe=(J-ye)/B,xe=(X-ge)/j,ke=(-J-ye)/B,Me=(-X-ge)/j,Te=T(1,0,Oe,xe),Q=T(Oe,xe,ke,Me);return G===0&&Q>0&&(Q-=k),G===1&&Q<0&&(Q+=k),[he,ve,Te,Q]}(d,s,t,o,r,n,h,b,g,y,p,m),S=function(z,H){if(Array.isArray(z))return z;if(Symbol.iterator in Object(z))return function(F,N){var B=[],j=!0,K=!1,G=void 0;try{for(var V,W=F[Symbol.iterator]();!(j=(V=W.next()).done)&&(B.push(V.value),!N||B.length!==N);j=!0);}catch(J){K=!0,G=J}finally{try{!j&&W.return&&W.return()}finally{if(K)throw G}}return B}(z,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(u,4),_=S[0],E=S[1],L=S[2],C=S[3],P=Math.abs(C)/(k/4);Math.abs(1-P)<1e-7&&(P=1);var I=Math.max(Math.ceil(P),1);C/=I;for(var U=0;U<I;U++)v.push(l(L,C)),L+=C;return v.map(function(z){var H=A(z[0],r,n,y,g,_,E),F=H.x,N=H.y,B=A(z[1],r,n,y,g,_,E),j=B.x,K=B.y,G=A(z[2],r,n,y,g,_,E);return{x1:F,y1:N,x2:j,y2:K,x:G.x,y:G.y}})}},1750:function($,R,e){var k=e(95616),A=e(65185),l=e(29988),T=e(89546),x=e(32791);$.exports=function(d){if(Array.isArray(d)&&d.length===1&&typeof d[0]=="string"&&(d=d[0]),typeof d=="string"&&(x(T(d),"String is not an SVG path."),d=k(d)),x(Array.isArray(d),"Argument should be a string or an array of path segments."),d=A(d),!(d=l(d)).length)return[0,0,0,0];for(var s=[1/0,1/0,-1/0,-1/0],t=0,o=d.length;t<o;t++)for(var r=d[t].slice(1),n=0;n<r.length;n+=2)r[n+0]<s[0]&&(s[0]=r[n+0]),r[n+1]<s[1]&&(s[1]=r[n+1]),r[n+0]>s[2]&&(s[2]=r[n+0]),r[n+1]>s[3]&&(s[3]=r[n+1]);return s}},29988:function($,R,e){$.exports=function(T){for(var x,d=[],s=0,t=0,o=0,r=0,n=null,a=null,i=0,c=0,h=0,f=T.length;h<f;h++){var b=T[h],v=b[0];switch(v){case"M":o=b[1],r=b[2];break;case"A":var g=k({px:i,py:c,cx:b[6],cy:b[7],rx:b[1],ry:b[2],xAxisRotation:b[3],largeArcFlag:b[4],sweepFlag:b[5]});if(!g.length)continue;for(var y,p=0;p<g.length;p++)b=["C",(y=g[p]).x1,y.y1,y.x2,y.y2,y.x,y.y],p<g.length-1&&d.push(b);break;case"S":var m=i,w=c;x!="C"&&x!="S"||(m+=m-s,w+=w-t),b=["C",m,w,b[1],b[2],b[3],b[4]];break;case"T":x=="Q"||x=="T"?(n=2*i-n,a=2*c-a):(n=i,a=c),b=l(i,c,n,a,b[1],b[2]);break;case"Q":n=b[1],a=b[2],b=l(i,c,b[1],b[2],b[3],b[4]);break;case"L":b=A(i,c,b[1],b[2]);break;case"H":b=A(i,c,b[1],c);break;case"V":b=A(i,c,i,b[1]);break;case"Z":b=A(i,c,o,r)}x=v,i=b[b.length-2],c=b[b.length-1],b.length>4?(s=b[b.length-4],t=b[b.length-3]):(s=i,t=c),d.push(b)}return d};var k=e(7095);function A(T,x,d,s){return["C",T,x,d,s,d,s]}function l(T,x,d,s,t,o){return["C",T/3+.6666666666666666*d,x/3+.6666666666666666*s,t/3+.6666666666666666*d,o/3+.6666666666666666*s,t,o]}},82019:function($,R,e){var k,A=e(1750),l=e(95616),T=e(31457),x=e(89546),d=e(44781),s=document.createElement("canvas"),t=s.getContext("2d");$.exports=function(o,r){if(!x(o))throw Error("Argument should be valid svg path string");var n,a;r||(r={}),r.shape?(n=r.shape[0],a=r.shape[1]):(n=s.width=r.w||r.width||200,a=s.height=r.h||r.height||200);var i=Math.min(n,a),c=r.stroke||0,h=r.viewbox||r.viewBox||A(o),f=[n/(h[2]-h[0]),a/(h[3]-h[1])],b=Math.min(f[0]||0,f[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,n,a),t.fillStyle="white",c&&(typeof c!="number"&&(c=1),t.strokeStyle=c>0?"white":"black",t.lineWidth=Math.abs(c)),t.translate(.5*n,.5*a),t.scale(b,b),function(){if(k!=null)return k;var y=document.createElement("canvas").getContext("2d");if(y.canvas.width=y.canvas.height=1,!window.Path2D)return k=!1;var p=new Path2D("M0,0h1v1h-1v-1Z");y.fillStyle="black",y.fill(p);var m=y.getImageData(0,0,1,1);return k=m&&m.data&&m.data[3]===255}()){var v=new Path2D(o);t.fill(v),c&&t.stroke(v)}else{var g=l(o);T(t,g),t.fill(),c&&t.stroke()}return t.setTransform(1,0,0,1,0,0),d(t,{cutoff:r.cutoff!=null?r.cutoff:.5,radius:r.radius!=null?r.radius:.5*i})}},84267:function($,R,e){var k;(function(A){var l=/^\s+/,T=/\s+$/,x=0,d=A.round,s=A.min,t=A.max,o=A.random;function r(J,X){if(X=X||{},(J=J||"")instanceof r)return J;if(!(this instanceof r))return new r(J,X);var ee=function(re){var ie,se,fe,ye={r:0,g:0,b:0},ge=1,he=null,ve=null,Oe=null,xe=!1,ke=!1;return typeof re=="string"&&(re=function(Me){Me=Me.replace(l,"").replace(T,"").toLowerCase();var Te,Q=!1;if(L[Me])Me=L[Me],Q=!0;else if(Me=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(Te=V.rgb.exec(Me))?{r:Te[1],g:Te[2],b:Te[3]}:(Te=V.rgba.exec(Me))?{r:Te[1],g:Te[2],b:Te[3],a:Te[4]}:(Te=V.hsl.exec(Me))?{h:Te[1],s:Te[2],l:Te[3]}:(Te=V.hsla.exec(Me))?{h:Te[1],s:Te[2],l:Te[3],a:Te[4]}:(Te=V.hsv.exec(Me))?{h:Te[1],s:Te[2],v:Te[3]}:(Te=V.hsva.exec(Me))?{h:Te[1],s:Te[2],v:Te[3],a:Te[4]}:(Te=V.hex8.exec(Me))?{r:z(Te[1]),g:z(Te[2]),b:z(Te[3]),a:B(Te[4]),format:Q?"name":"hex8"}:(Te=V.hex6.exec(Me))?{r:z(Te[1]),g:z(Te[2]),b:z(Te[3]),format:Q?"name":"hex"}:(Te=V.hex4.exec(Me))?{r:z(Te[1]+""+Te[1]),g:z(Te[2]+""+Te[2]),b:z(Te[3]+""+Te[3]),a:B(Te[4]+""+Te[4]),format:Q?"name":"hex8"}:!!(Te=V.hex3.exec(Me))&&{r:z(Te[1]+""+Te[1]),g:z(Te[2]+""+Te[2]),b:z(Te[3]+""+Te[3]),format:Q?"name":"hex"}}(re)),typeof re=="object"&&(W(re.r)&&W(re.g)&&W(re.b)?(ie=re.r,se=re.g,fe=re.b,ye={r:255*I(ie,255),g:255*I(se,255),b:255*I(fe,255)},xe=!0,ke=String(re.r).substr(-1)==="%"?"prgb":"rgb"):W(re.h)&&W(re.s)&&W(re.v)?(he=F(re.s),ve=F(re.v),ye=function(Me,Te,Q){Me=6*I(Me,360),Te=I(Te,100),Q=I(Q,100);var oe=A.floor(Me),ce=Me-oe,me=Q*(1-Te),Ae=Q*(1-ce*Te),Ie=Q*(1-(1-ce)*Te),Ce=oe%6;return{r:255*[Q,Ae,me,me,Ie,Q][Ce],g:255*[Ie,Q,Q,Ae,me,me][Ce],b:255*[me,me,Ie,Q,Q,Ae][Ce]}}(re.h,he,ve),xe=!0,ke="hsv"):W(re.h)&&W(re.s)&&W(re.l)&&(he=F(re.s),Oe=F(re.l),ye=function(Me,Te,Q){var oe,ce,me;function Ae(Re,le,de){return de<0&&(de+=1),de>1&&(de-=1),de<1/6?Re+6*(le-Re)*de:de<.5?le:de<2/3?Re+(le-Re)*(2/3-de)*6:Re}if(Me=I(Me,360),Te=I(Te,100),Q=I(Q,100),Te===0)oe=ce=me=Q;else{var Ie=Q<.5?Q*(1+Te):Q+Te-Q*Te,Ce=2*Q-Ie;oe=Ae(Ce,Ie,Me+1/3),ce=Ae(Ce,Ie,Me),me=Ae(Ce,Ie,Me-1/3)}return{r:255*oe,g:255*ce,b:255*me}}(re.h,he,Oe),xe=!0,ke="hsl"),re.hasOwnProperty("a")&&(ge=re.a)),ge=P(ge),{ok:xe,format:re.format||ke,r:s(255,t(ye.r,0)),g:s(255,t(ye.g,0)),b:s(255,t(ye.b,0)),a:ge}}(J);this._originalInput=J,this._r=ee.r,this._g=ee.g,this._b=ee.b,this._a=ee.a,this._roundA=d(100*this._a)/100,this._format=X.format||ee.format,this._gradientType=X.gradientType,this._r<1&&(this._r=d(this._r)),this._g<1&&(this._g=d(this._g)),this._b<1&&(this._b=d(this._b)),this._ok=ee.ok,this._tc_id=x++}function n(J,X,ee){J=I(J,255),X=I(X,255),ee=I(ee,255);var re,ie,se=t(J,X,ee),fe=s(J,X,ee),ye=(se+fe)/2;if(se==fe)re=ie=0;else{var ge=se-fe;switch(ie=ye>.5?ge/(2-se-fe):ge/(se+fe),se){case J:re=(X-ee)/ge+(X<ee?6:0);break;case X:re=(ee-J)/ge+2;break;case ee:re=(J-X)/ge+4}re/=6}return{h:re,s:ie,l:ye}}function a(J,X,ee){J=I(J,255),X=I(X,255),ee=I(ee,255);var re,ie,se=t(J,X,ee),fe=s(J,X,ee),ye=se,ge=se-fe;if(ie=se===0?0:ge/se,se==fe)re=0;else{switch(se){case J:re=(X-ee)/ge+(X<ee?6:0);break;case X:re=(ee-J)/ge+2;break;case ee:re=(J-X)/ge+4}re/=6}return{h:re,s:ie,v:ye}}function i(J,X,ee,re){var ie=[H(d(J).toString(16)),H(d(X).toString(16)),H(d(ee).toString(16))];return re&&ie[0].charAt(0)==ie[0].charAt(1)&&ie[1].charAt(0)==ie[1].charAt(1)&&ie[2].charAt(0)==ie[2].charAt(1)?ie[0].charAt(0)+ie[1].charAt(0)+ie[2].charAt(0):ie.join("")}function c(J,X,ee,re){return[H(N(re)),H(d(J).toString(16)),H(d(X).toString(16)),H(d(ee).toString(16))].join("")}function h(J,X){X=X===0?0:X||10;var ee=r(J).toHsl();return ee.s-=X/100,ee.s=U(ee.s),r(ee)}function f(J,X){X=X===0?0:X||10;var ee=r(J).toHsl();return ee.s+=X/100,ee.s=U(ee.s),r(ee)}function b(J){return r(J).desaturate(100)}function v(J,X){X=X===0?0:X||10;var ee=r(J).toHsl();return ee.l+=X/100,ee.l=U(ee.l),r(ee)}function g(J,X){X=X===0?0:X||10;var ee=r(J).toRgb();return ee.r=t(0,s(255,ee.r-d(-X/100*255))),ee.g=t(0,s(255,ee.g-d(-X/100*255))),ee.b=t(0,s(255,ee.b-d(-X/100*255))),r(ee)}function y(J,X){X=X===0?0:X||10;var ee=r(J).toHsl();return ee.l-=X/100,ee.l=U(ee.l),r(ee)}function p(J,X){var ee=r(J).toHsl(),re=(ee.h+X)%360;return ee.h=re<0?360+re:re,r(ee)}function m(J){var X=r(J).toHsl();return X.h=(X.h+180)%360,r(X)}function w(J){var X=r(J).toHsl(),ee=X.h;return[r(J),r({h:(ee+120)%360,s:X.s,l:X.l}),r({h:(ee+240)%360,s:X.s,l:X.l})]}function u(J){var X=r(J).toHsl(),ee=X.h;return[r(J),r({h:(ee+90)%360,s:X.s,l:X.l}),r({h:(ee+180)%360,s:X.s,l:X.l}),r({h:(ee+270)%360,s:X.s,l:X.l})]}function S(J){var X=r(J).toHsl(),ee=X.h;return[r(J),r({h:(ee+72)%360,s:X.s,l:X.l}),r({h:(ee+216)%360,s:X.s,l:X.l})]}function _(J,X,ee){X=X||6,ee=ee||30;var re=r(J).toHsl(),ie=360/ee,se=[r(J)];for(re.h=(re.h-(ie*X>>1)+720)%360;--X;)re.h=(re.h+ie)%360,se.push(r(re));return se}function E(J,X){X=X||6;for(var ee=r(J).toHsv(),re=ee.h,ie=ee.s,se=ee.v,fe=[],ye=1/X;X--;)fe.push(r({h:re,s:ie,v:se})),se=(se+ye)%1;return fe}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var J=this.toRgb();return(299*J.r+587*J.g+114*J.b)/1e3},getLuminance:function(){var J,X,ee,re=this.toRgb();return J=re.r/255,X=re.g/255,ee=re.b/255,.2126*(J<=.03928?J/12.92:A.pow((J+.055)/1.055,2.4))+.7152*(X<=.03928?X/12.92:A.pow((X+.055)/1.055,2.4))+.0722*(ee<=.03928?ee/12.92:A.pow((ee+.055)/1.055,2.4))},setAlpha:function(J){return this._a=P(J),this._roundA=d(100*this._a)/100,this},toHsv:function(){var J=a(this._r,this._g,this._b);return{h:360*J.h,s:J.s,v:J.v,a:this._a}},toHsvString:function(){var J=a(this._r,this._g,this._b),X=d(360*J.h),ee=d(100*J.s),re=d(100*J.v);return this._a==1?"hsv("+X+", "+ee+"%, "+re+"%)":"hsva("+X+", "+ee+"%, "+re+"%, "+this._roundA+")"},toHsl:function(){var J=n(this._r,this._g,this._b);return{h:360*J.h,s:J.s,l:J.l,a:this._a}},toHslString:function(){var J=n(this._r,this._g,this._b),X=d(360*J.h),ee=d(100*J.s),re=d(100*J.l);return this._a==1?"hsl("+X+", "+ee+"%, "+re+"%)":"hsla("+X+", "+ee+"%, "+re+"%, "+this._roundA+")"},toHex:function(J){return i(this._r,this._g,this._b,J)},toHexString:function(J){return"#"+this.toHex(J)},toHex8:function(J){return function(X,ee,re,ie,se){var fe=[H(d(X).toString(16)),H(d(ee).toString(16)),H(d(re).toString(16)),H(N(ie))];return se&&fe[0].charAt(0)==fe[0].charAt(1)&&fe[1].charAt(0)==fe[1].charAt(1)&&fe[2].charAt(0)==fe[2].charAt(1)&&fe[3].charAt(0)==fe[3].charAt(1)?fe[0].charAt(0)+fe[1].charAt(0)+fe[2].charAt(0)+fe[3].charAt(0):fe.join("")}(this._r,this._g,this._b,this._a,J)},toHex8String:function(J){return"#"+this.toHex8(J)},toRgb:function(){return{r:d(this._r),g:d(this._g),b:d(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+d(this._r)+", "+d(this._g)+", "+d(this._b)+")":"rgba("+d(this._r)+", "+d(this._g)+", "+d(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:d(100*I(this._r,255))+"%",g:d(100*I(this._g,255))+"%",b:d(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+d(100*I(this._r,255))+"%, "+d(100*I(this._g,255))+"%, "+d(100*I(this._b,255))+"%)":"rgba("+d(100*I(this._r,255))+"%, "+d(100*I(this._g,255))+"%, "+d(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(C[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(J){var X="#"+c(this._r,this._g,this._b,this._a),ee=X,re=this._gradientType?"GradientType = 1, ":"";if(J){var ie=r(J);ee="#"+c(ie._r,ie._g,ie._b,ie._a)}return"progid:DXImageTransform.Microsoft.gradient("+re+"startColorstr="+X+",endColorstr="+ee+")"},toString:function(J){var X=!!J;J=J||this._format;var ee=!1,re=this._a<1&&this._a>=0;return X||!re||J!=="hex"&&J!=="hex6"&&J!=="hex3"&&J!=="hex4"&&J!=="hex8"&&J!=="name"?(J==="rgb"&&(ee=this.toRgbString()),J==="prgb"&&(ee=this.toPercentageRgbString()),J!=="hex"&&J!=="hex6"||(ee=this.toHexString()),J==="hex3"&&(ee=this.toHexString(!0)),J==="hex4"&&(ee=this.toHex8String(!0)),J==="hex8"&&(ee=this.toHex8String()),J==="name"&&(ee=this.toName()),J==="hsl"&&(ee=this.toHslString()),J==="hsv"&&(ee=this.toHsvString()),ee||this.toHexString()):J==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(J,X){var ee=J.apply(null,[this].concat([].slice.call(X)));return this._r=ee._r,this._g=ee._g,this._b=ee._b,this.setAlpha(ee._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(p,arguments)},_applyCombination:function(J,X){return J.apply(null,[this].concat([].slice.call(X)))},analogous:function(){return this._applyCombination(_,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(u,arguments)}},r.fromRatio=function(J,X){if(typeof J=="object"){var ee={};for(var re in J)J.hasOwnProperty(re)&&(ee[re]=re==="a"?J[re]:F(J[re]));J=ee}return r(J,X)},r.equals=function(J,X){return!(!J||!X)&&r(J).toRgbString()==r(X).toRgbString()},r.random=function(){return r.fromRatio({r:o(),g:o(),b:o()})},r.mix=function(J,X,ee){ee=ee===0?0:ee||50;var re=r(J).toRgb(),ie=r(X).toRgb(),se=ee/100;return r({r:(ie.r-re.r)*se+re.r,g:(ie.g-re.g)*se+re.g,b:(ie.b-re.b)*se+re.b,a:(ie.a-re.a)*se+re.a})},r.readability=function(J,X){var ee=r(J),re=r(X);return(A.max(ee.getLuminance(),re.getLuminance())+.05)/(A.min(ee.getLuminance(),re.getLuminance())+.05)},r.isReadable=function(J,X,ee){var re,ie,se,fe,ye,ge=r.readability(J,X);switch(ie=!1,(se=ee,(fe=((se=se||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&fe!=="AAA"&&(fe="AA"),(ye=(se.size||"small").toLowerCase())!=="small"&&ye!=="large"&&(ye="small"),re={level:fe,size:ye}).level+re.size){case"AAsmall":case"AAAlarge":ie=ge>=4.5;break;case"AAlarge":ie=ge>=3;break;case"AAAsmall":ie=ge>=7}return ie},r.mostReadable=function(J,X,ee){var re,ie,se,fe,ye=null,ge=0;ie=(ee=ee||{}).includeFallbackColors,se=ee.level,fe=ee.size;for(var he=0;he<X.length;he++)(re=r.readability(J,X[he]))>ge&&(ge=re,ye=r(X[he]));return r.isReadable(J,ye,{level:se,size:fe})||!ie?ye:(ee.includeFallbackColors=!1,r.mostReadable(J,["#fff","#000"],ee))};var L=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=r.hexNames=function(J){var X={};for(var ee in J)J.hasOwnProperty(ee)&&(X[J[ee]]=ee);return X}(L);function P(J){return J=parseFloat(J),(isNaN(J)||J<0||J>1)&&(J=1),J}function I(J,X){(function(re){return typeof re=="string"&&re.indexOf(".")!=-1&&parseFloat(re)===1})(J)&&(J="100%");var ee=function(re){return typeof re=="string"&&re.indexOf("%")!=-1}(J);return J=s(X,t(0,parseFloat(J))),ee&&(J=parseInt(J*X,10)/100),A.abs(J-X)<1e-6?1:J%X/parseFloat(X)}function U(J){return s(1,t(0,J))}function z(J){return parseInt(J,16)}function H(J){return J.length==1?"0"+J:""+J}function F(J){return J<=1&&(J=100*J+"%"),J}function N(J){return A.round(255*parseFloat(J)).toString(16)}function B(J){return z(J)/255}var j,K,G,V=(K="[\\s|\\(]+("+(j="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",G="[\\s|\\(]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",{CSS_UNIT:new RegExp(j),rgb:new RegExp("rgb"+K),rgba:new RegExp("rgba"+G),hsl:new RegExp("hsl"+K),hsla:new RegExp("hsla"+G),hsv:new RegExp("hsv"+K),hsva:new RegExp("hsva"+G),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function W(J){return!!V.CSS_UNIT.exec(J)}$.exports?$.exports=r:(k=function(){return r}.call(R,e,R,$))===void 0||($.exports=k)})(Math)},57060:function($){$.exports=e,$.exports.float32=$.exports.float=e,$.exports.fract32=$.exports.fract=function(k,A){if(k.length){if(k instanceof Float32Array)return new Float32Array(k.length);A instanceof Float32Array||(A=e(k));for(var l=0,T=A.length;l<T;l++)A[l]=k[l]-A[l];return A}return e(k-e(k))};var R=new Float32Array(1);function e(k){return k.length?k instanceof Float32Array?k:new Float32Array(k):(R[0]=k,R[0])}},75686:function($,R,e){var k=e(25677);function A(T,x){var d=k(getComputedStyle(T).getPropertyValue(x));return d[0]*l(d[1],T)}function l(T,x){switch(x=x||document.body,T=(T||"px").trim().toLowerCase(),x!==window&&x!==document||(x=document.body),T){case"%":return x.clientHeight/100;case"ch":case"ex":return function(d,s){var t=document.createElement("div");t.style["font-size"]="128"+d,s.appendChild(t);var o=A(t,"font-size")/128;return s.removeChild(t),o}(T,x);case"em":return A(x,"font-size");case"rem":return A(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 37.79527559055118;case"mm":return 3.7795275590551185;case"pt":return 1.3333333333333333;case"pc":return 16}return 1}$.exports=l},96892:function($,R,e){function k(T){return T}function A(T,x){return typeof x=="string"&&(x=T.objects[x]),x.type==="GeometryCollection"?{type:"FeatureCollection",features:x.geometries.map(function(d){return l(T,d)})}:l(T,x)}function l(T,x){var d=x.id,s=x.bbox,t=x.properties==null?{}:x.properties,o=function(r,n){var a=function(g){if(g==null)return k;var y,p,m=g.scale[0],w=g.scale[1],u=g.translate[0],S=g.translate[1];return function(_,E){E||(y=p=0);var L=2,C=_.length,P=new Array(C);for(P[0]=(y+=_[0])*m+u,P[1]=(p+=_[1])*w+S;L<C;)P[L]=_[L],++L;return P}}(r.transform),i=r.arcs;function c(g,y){y.length&&y.pop();for(var p=i[g<0?~g:g],m=0,w=p.length;m<w;++m)y.push(a(p[m],m));g<0&&function(u,S){for(var _,E=u.length,L=E-S;L<--E;)_=u[L],u[L++]=u[E],u[E]=_}(y,w)}function h(g){return a(g)}function f(g){for(var y=[],p=0,m=g.length;p<m;++p)c(g[p],y);return y.length<2&&y.push(y[0]),y}function b(g){for(var y=f(g);y.length<4;)y.push(y[0]);return y}function v(g){return g.map(b)}return function g(y){var p,m=y.type;switch(m){case"GeometryCollection":return{type:m,geometries:y.geometries.map(g)};case"Point":p=h(y.coordinates);break;case"MultiPoint":p=y.coordinates.map(h);break;case"LineString":p=f(y.arcs);break;case"MultiLineString":p=y.arcs.map(f);break;case"Polygon":p=v(y.arcs);break;case"MultiPolygon":p=y.arcs.map(v);break;default:return null}return{type:m,coordinates:p}}(n)}(T,x);return d==null&&s==null?{type:"Feature",properties:t,geometry:o}:s==null?{type:"Feature",id:d,properties:t,geometry:o}:{type:"Feature",id:d,bbox:s,properties:t,geometry:o}}e.d(R,{zL:function(){return A}})},73116:function($,R,e){var k=e(24511);$.exports=function(A){if(typeof A!="function"||!hasOwnProperty.call(A,"length"))return!1;try{if(typeof A.length!="number"||typeof A.call!="function"||typeof A.apply!="function")return!1}catch{return!1}return!k(A)}},69190:function($,R,e){var k=e(24582),A=e(47403),l=e(9234),T=e(6048),x=function(d,s){return d.replace("%v",T(s))};$.exports=function(d,s,t){if(!A(t))throw new TypeError(x(s,d));if(!k(d)){if("default"in t)return t.default;if(t.isOptional)return null}var o=l(t.errorMessage);throw k(o)||(o=s),new TypeError(x(o,d))}},18497:function($){$.exports=function(R){try{return R.toString()}catch{try{return String(R)}catch{return null}}}},6048:function($,R,e){var k=e(18497),A=/[\n\r\u2028\u2029]/g;$.exports=function(l){var T=k(l);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+""),T=T.replace(A,function(x){switch(x){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},47403:function($,R,e){var k=e(24582),A={object:!0,function:!0,undefined:!0};$.exports=function(l){return!!k(l)&&hasOwnProperty.call(A,typeof l)}},82527:function($,R,e){var k=e(69190),A=e(84985);$.exports=function(l){return A(l)?l:k(l,"%v is not a plain function",arguments[1])}},84985:function($,R,e){var k=e(73116),A=/^\s*class[\s{/}]/,l=Function.prototype.toString;$.exports=function(T){return!!k(T)&&!A.test(l.call(T))}},24511:function($,R,e){var k=e(47403);$.exports=function(A){if(!k(A))return!1;try{return!!A.constructor&&A.constructor.prototype===A}catch{return!1}}},9234:function($,R,e){var k=e(24582),A=e(47403),l=Object.prototype.toString;$.exports=function(T){if(!k(T))return null;if(A(T)){var x=T.toString;if(typeof x!="function"||x===l)return null}try{return""+T}catch{return null}}},10424:function($,R,e){var k=e(69190),A=e(24582);$.exports=function(l){return A(l)?l:k(l,"Cannot use %v",arguments[1])}},24582:function($){$.exports=function(R){return R!=null}},58404:function($,R,e){var k=e(13547),A=e(12129),l=e(12856).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:A([32,0]),UINT16:A([32,0]),UINT32:A([32,0]),BIGUINT64:A([32,0]),INT8:A([32,0]),INT16:A([32,0]),INT32:A([32,0]),BIGINT64:A([32,0]),FLOAT:A([32,0]),DOUBLE:A([32,0]),DATA:A([32,0]),UINT8C:A([32,0]),BUFFER:A([32,0])});var T=typeof Uint8ClampedArray<"u",x=typeof BigUint64Array<"u",d=typeof BigInt64Array<"u",s=e.g.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=A([32,0])),s.BIGUINT64||(s.BIGUINT64=A([32,0])),s.BIGINT64||(s.BIGINT64=A([32,0])),s.BUFFER||(s.BUFFER=A([32,0]));var t=s.DATA,o=s.BUFFER;function r(S){if(S){var _=S.length||S.byteLength,E=k.log2(_);t[E].push(S)}}function n(S){S=k.nextPow2(S);var _=k.log2(S),E=t[_];return E.length>0?E.pop():new ArrayBuffer(S)}function a(S){return new Uint8Array(n(S),0,S)}function i(S){return new Uint16Array(n(2*S),0,S)}function c(S){return new Uint32Array(n(4*S),0,S)}function h(S){return new Int8Array(n(S),0,S)}function f(S){return new Int16Array(n(2*S),0,S)}function b(S){return new Int32Array(n(4*S),0,S)}function v(S){return new Float32Array(n(4*S),0,S)}function g(S){return new Float64Array(n(8*S),0,S)}function y(S){return T?new Uint8ClampedArray(n(S),0,S):a(S)}function p(S){return x?new BigUint64Array(n(8*S),0,S):null}function m(S){return d?new BigInt64Array(n(8*S),0,S):null}function w(S){return new DataView(n(S),0,S)}function u(S){S=k.nextPow2(S);var _=k.log2(S),E=o[_];return E.length>0?E.pop():new l(S)}R.free=function(S){if(l.isBuffer(S))o[k.log2(S.length)].push(S);else{if(Object.prototype.toString.call(S)!=="[object ArrayBuffer]"&&(S=S.buffer),!S)return;var _=S.length||S.byteLength,E=0|k.log2(_);t[E].push(S)}},R.freeUint8=R.freeUint16=R.freeUint32=R.freeBigUint64=R.freeInt8=R.freeInt16=R.freeInt32=R.freeBigInt64=R.freeFloat32=R.freeFloat=R.freeFloat64=R.freeDouble=R.freeUint8Clamped=R.freeDataView=function(S){r(S.buffer)},R.freeArrayBuffer=r,R.freeBuffer=function(S){o[k.log2(S.length)].push(S)},R.malloc=function(S,_){if(_===void 0||_==="arraybuffer")return n(S);switch(_){case"uint8":return a(S);case"uint16":return i(S);case"uint32":return c(S);case"int8":return h(S);case"int16":return f(S);case"int32":return b(S);case"float":case"float32":return v(S);case"double":case"float64":return g(S);case"uint8_clamped":return y(S);case"bigint64":return m(S);case"biguint64":return p(S);case"buffer":return u(S);case"data":case"dataview":return w(S);default:return null}return null},R.mallocArrayBuffer=n,R.mallocUint8=a,R.mallocUint16=i,R.mallocUint32=c,R.mallocInt8=h,R.mallocInt16=f,R.mallocInt32=b,R.mallocFloat32=R.mallocFloat=v,R.mallocFloat64=R.mallocDouble=g,R.mallocUint8Clamped=y,R.mallocBigUint64=p,R.mallocBigInt64=m,R.mallocDataView=w,R.mallocBuffer=u,R.clearCache=function(){for(var S=0;S<32;++S)s.UINT8[S].length=0,s.UINT16[S].length=0,s.UINT32[S].length=0,s.INT8[S].length=0,s.INT16[S].length=0,s.INT32[S].length=0,s.FLOAT[S].length=0,s.DOUBLE[S].length=0,s.BIGUINT64[S].length=0,s.BIGINT64[S].length=0,s.UINT8C[S].length=0,t[S].length=0,o[S].length=0}},90448:function($){var R=/[\'\"]/;$.exports=function(e){return e?(R.test(e.charAt(0))&&(e=e.substr(1)),R.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},93447:function($){$.exports=function(R,e,k){Array.isArray(k)||(k=[].slice.call(arguments,2));for(var A=0,l=k.length;A<l;A++){var T=k[A];for(var x in T)if((e[x]===void 0||Array.isArray(e[x])||R[x]!==e[x])&&x in e){var d;if(T[x]===!0)d=e[x];else if(T[x]===!1||typeof T[x]=="function"&&(d=T[x](e[x],R,e))===void 0)continue;R[x]=d}}return R}},20588:function($,R,e){function k(A){try{if(!e.g.localStorage)return!1}catch{return!1}var l=e.g.localStorage[A];return l!=null&&String(l).toLowerCase()==="true"}$.exports=function(A,l){if(k("noDeprecation"))return A;var T=!1;return function(){if(!T){if(k("throwDeprecation"))throw new Error(l);k("traceDeprecation")?console.trace(l):console.warn(l),T=!0}return A.apply(this,arguments)}}},45920:function($){$.exports=function(R){return R&&typeof R=="object"&&typeof R.copy=="function"&&typeof R.fill=="function"&&typeof R.readUInt8=="function"}},4936:function($,R,e){var k=e(47216),A=e(65481),l=e(21099),T=e(9187);function x(I){return I.call.bind(I)}var d=typeof BigInt<"u",s=typeof Symbol<"u",t=x(Object.prototype.toString),o=x(Number.prototype.valueOf),r=x(String.prototype.valueOf),n=x(Boolean.prototype.valueOf);if(d)var a=x(BigInt.prototype.valueOf);if(s)var i=x(Symbol.prototype.valueOf);function c(I,U){if(typeof I!="object")return!1;try{return U(I),!0}catch{return!1}}function h(I){return t(I)==="[object Map]"}function f(I){return t(I)==="[object Set]"}function b(I){return t(I)==="[object WeakMap]"}function v(I){return t(I)==="[object WeakSet]"}function g(I){return t(I)==="[object ArrayBuffer]"}function y(I){return typeof ArrayBuffer<"u"&&(g.working?g(I):I instanceof ArrayBuffer)}function p(I){return t(I)==="[object DataView]"}function m(I){return typeof DataView<"u"&&(p.working?p(I):I instanceof DataView)}R.isArgumentsObject=k,R.isGeneratorFunction=A,R.isTypedArray=T,R.isPromise=function(I){return typeof Promise<"u"&&I instanceof Promise||I!==null&&typeof I=="object"&&typeof I.then=="function"&&typeof I.catch=="function"},R.isArrayBufferView=function(I){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(I):T(I)||m(I)},R.isUint8Array=function(I){return l(I)==="Uint8Array"},R.isUint8ClampedArray=function(I){return l(I)==="Uint8ClampedArray"},R.isUint16Array=function(I){return l(I)==="Uint16Array"},R.isUint32Array=function(I){return l(I)==="Uint32Array"},R.isInt8Array=function(I){return l(I)==="Int8Array"},R.isInt16Array=function(I){return l(I)==="Int16Array"},R.isInt32Array=function(I){return l(I)==="Int32Array"},R.isFloat32Array=function(I){return l(I)==="Float32Array"},R.isFloat64Array=function(I){return l(I)==="Float64Array"},R.isBigInt64Array=function(I){return l(I)==="BigInt64Array"},R.isBigUint64Array=function(I){return l(I)==="BigUint64Array"},h.working=typeof Map<"u"&&h(new Map),R.isMap=function(I){return typeof Map<"u"&&(h.working?h(I):I instanceof Map)},f.working=typeof Set<"u"&&f(new Set),R.isSet=function(I){return typeof Set<"u"&&(f.working?f(I):I instanceof Set)},b.working=typeof WeakMap<"u"&&b(new WeakMap),R.isWeakMap=function(I){return typeof WeakMap<"u"&&(b.working?b(I):I instanceof WeakMap)},v.working=typeof WeakSet<"u"&&v(new WeakSet),R.isWeakSet=function(I){return v(I)},g.working=typeof ArrayBuffer<"u"&&g(new ArrayBuffer),R.isArrayBuffer=y,p.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&p(new DataView(new ArrayBuffer(1),0,1)),R.isDataView=m;var w=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function u(I){return t(I)==="[object SharedArrayBuffer]"}function S(I){return w!==void 0&&(u.working===void 0&&(u.working=u(new w)),u.working?u(I):I instanceof w)}function _(I){return c(I,o)}function E(I){return c(I,r)}function L(I){return c(I,n)}function C(I){return d&&c(I,a)}function P(I){return s&&c(I,i)}R.isSharedArrayBuffer=S,R.isAsyncFunction=function(I){return t(I)==="[object AsyncFunction]"},R.isMapIterator=function(I){return t(I)==="[object Map Iterator]"},R.isSetIterator=function(I){return t(I)==="[object Set Iterator]"},R.isGeneratorObject=function(I){return t(I)==="[object Generator]"},R.isWebAssemblyCompiledModule=function(I){return t(I)==="[object WebAssembly.Module]"},R.isNumberObject=_,R.isStringObject=E,R.isBooleanObject=L,R.isBigIntObject=C,R.isSymbolObject=P,R.isBoxedPrimitive=function(I){return _(I)||E(I)||L(I)||C(I)||P(I)},R.isAnyArrayBuffer=function(I){return typeof Uint8Array<"u"&&(y(I)||S(I))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(I){Object.defineProperty(R,I,{enumerable:!1,value:function(){throw new Error(I+" is not supported in userland")}})})},43827:function($,R,e){var k=e(90386),A=Object.getOwnPropertyDescriptors||function(I){for(var U=Object.keys(I),z={},H=0;H<U.length;H++)z[U[H]]=Object.getOwnPropertyDescriptor(I,U[H]);return z},l=/%[sdj%]/g;R.format=function(I){if(!b(I)){for(var U=[],z=0;z<arguments.length;z++)U.push(s(arguments[z]));return U.join(" ")}z=1;for(var H=arguments,F=H.length,N=String(I).replace(l,function(j){if(j==="%%")return"%";if(z>=F)return j;switch(j){case"%s":return String(H[z++]);case"%d":return Number(H[z++]);case"%j":try{return JSON.stringify(H[z++])}catch{return"[Circular]"}default:return j}}),B=H[z];z<F;B=H[++z])h(B)||!y(B)?N+=" "+B:N+=" "+s(B);return N},R.deprecate=function(I,U){if(k!==void 0&&k.noDeprecation===!0)return I;if(k===void 0)return function(){return R.deprecate(I,U).apply(this,arguments)};var z=!1;return function(){if(!z){if(k.throwDeprecation)throw new Error(U);k.traceDeprecation?console.trace(U):console.error(U),z=!0}return I.apply(this,arguments)}};var T={},x=/^$/;if(k.env.NODE_DEBUG){var d=k.env.NODE_DEBUG;d=d.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),x=new RegExp("^"+d+"$","i")}function s(I,U){var z={seen:[],stylize:o};return arguments.length>=3&&(z.depth=arguments[2]),arguments.length>=4&&(z.colors=arguments[3]),c(U)?z.showHidden=U:U&&R._extend(z,U),v(z.showHidden)&&(z.showHidden=!1),v(z.depth)&&(z.depth=2),v(z.colors)&&(z.colors=!1),v(z.customInspect)&&(z.customInspect=!0),z.colors&&(z.stylize=t),r(z,I,z.depth)}function t(I,U){var z=s.styles[U];return z?"\x1B["+s.colors[z][0]+"m"+I+"\x1B["+s.colors[z][1]+"m":I}function o(I,U){return I}function r(I,U,z){if(I.customInspect&&U&&w(U.inspect)&&U.inspect!==R.inspect&&(!U.constructor||U.constructor.prototype!==U)){var H=U.inspect(z,I);return b(H)||(H=r(I,H,z)),H}var F=function(J,X){if(v(X))return J.stylize("undefined","undefined");if(b(X)){var ee="'"+JSON.stringify(X).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return J.stylize(ee,"string")}return f(X)?J.stylize(""+X,"number"):c(X)?J.stylize(""+X,"boolean"):h(X)?J.stylize("null","null"):void 0}(I,U);if(F)return F;var N=Object.keys(U),B=function(J){var X={};return J.forEach(function(ee,re){X[ee]=!0}),X}(N);if(I.showHidden&&(N=Object.getOwnPropertyNames(U)),m(U)&&(N.indexOf("message")>=0||N.indexOf("description")>=0))return n(U);if(N.length===0){if(w(U)){var j=U.name?": "+U.name:"";return I.stylize("[Function"+j+"]","special")}if(g(U))return I.stylize(RegExp.prototype.toString.call(U),"regexp");if(p(U))return I.stylize(Date.prototype.toString.call(U),"date");if(m(U))return n(U)}var K,G="",V=!1,W=["{","}"];return i(U)&&(V=!0,W=["[","]"]),w(U)&&(G=" [Function"+(U.name?": "+U.name:"")+"]"),g(U)&&(G=" "+RegExp.prototype.toString.call(U)),p(U)&&(G=" "+Date.prototype.toUTCString.call(U)),m(U)&&(G=" "+n(U)),N.length!==0||V&&U.length!=0?z<0?g(U)?I.stylize(RegExp.prototype.toString.call(U),"regexp"):I.stylize("[Object]","special"):(I.seen.push(U),K=V?function(J,X,ee,re,ie){for(var se=[],fe=0,ye=X.length;fe<ye;++fe)L(X,String(fe))?se.push(a(J,X,ee,re,String(fe),!0)):se.push("");return ie.forEach(function(ge){ge.match(/^\d+$/)||se.push(a(J,X,ee,re,ge,!0))}),se}(I,U,z,B,N):N.map(function(J){return a(I,U,z,B,J,V)}),I.seen.pop(),function(J,X,ee){return J.reduce(function(re,ie){return ie.indexOf(`
`),re+ie.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?ee[0]+(X===""?"":X+`
 `)+" "+J.join(`,
  `)+" "+ee[1]:ee[0]+X+" "+J.join(", ")+" "+ee[1]}(K,G,W)):W[0]+G+W[1]}function n(I){return"["+Error.prototype.toString.call(I)+"]"}function a(I,U,z,H,F,N){var B,j,K;if((K=Object.getOwnPropertyDescriptor(U,F)||{value:U[F]}).get?j=K.set?I.stylize("[Getter/Setter]","special"):I.stylize("[Getter]","special"):K.set&&(j=I.stylize("[Setter]","special")),L(H,F)||(B="["+F+"]"),j||(I.seen.indexOf(K.value)<0?(j=h(z)?r(I,K.value,null):r(I,K.value,z-1)).indexOf(`
`)>-1&&(j=N?j.split(`
`).map(function(G){return"  "+G}).join(`
`).slice(2):`
`+j.split(`
`).map(function(G){return"   "+G}).join(`
`)):j=I.stylize("[Circular]","special")),v(B)){if(N&&F.match(/^\d+$/))return j;(B=JSON.stringify(""+F)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(B=B.slice(1,-1),B=I.stylize(B,"name")):(B=B.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),B=I.stylize(B,"string"))}return B+": "+j}function i(I){return Array.isArray(I)}function c(I){return typeof I=="boolean"}function h(I){return I===null}function f(I){return typeof I=="number"}function b(I){return typeof I=="string"}function v(I){return I===void 0}function g(I){return y(I)&&u(I)==="[object RegExp]"}function y(I){return typeof I=="object"&&I!==null}function p(I){return y(I)&&u(I)==="[object Date]"}function m(I){return y(I)&&(u(I)==="[object Error]"||I instanceof Error)}function w(I){return typeof I=="function"}function u(I){return Object.prototype.toString.call(I)}function S(I){return I<10?"0"+I.toString(10):I.toString(10)}R.debuglog=function(I){if(I=I.toUpperCase(),!T[I])if(x.test(I)){var U=k.pid;T[I]=function(){var z=R.format.apply(R,arguments);console.error("%s %d: %s",I,U,z)}}else T[I]=function(){};return T[I]},R.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},R.types=e(4936),R.isArray=i,R.isBoolean=c,R.isNull=h,R.isNullOrUndefined=function(I){return I==null},R.isNumber=f,R.isString=b,R.isSymbol=function(I){return typeof I=="symbol"},R.isUndefined=v,R.isRegExp=g,R.types.isRegExp=g,R.isObject=y,R.isDate=p,R.types.isDate=p,R.isError=m,R.types.isNativeError=m,R.isFunction=w,R.isPrimitive=function(I){return I===null||typeof I=="boolean"||typeof I=="number"||typeof I=="string"||typeof I=="symbol"||I===void 0},R.isBuffer=e(45920);var _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(){var I=new Date,U=[S(I.getHours()),S(I.getMinutes()),S(I.getSeconds())].join(":");return[I.getDate(),_[I.getMonth()],U].join(" ")}function L(I,U){return Object.prototype.hasOwnProperty.call(I,U)}R.log=function(){console.log("%s - %s",E(),R.format.apply(R,arguments))},R.inherits=e(42018),R._extend=function(I,U){if(!U||!y(U))return I;for(var z=Object.keys(U),H=z.length;H--;)I[z[H]]=U[z[H]];return I};var C=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function P(I,U){if(!I){var z=new Error("Promise was rejected with a falsy value");z.reason=I,I=z}return U(I)}R.promisify=function(I){if(typeof I!="function")throw new TypeError('The "original" argument must be of type Function');if(C&&I[C]){var U;if(typeof(U=I[C])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(U,C,{value:U,enumerable:!1,writable:!1,configurable:!0}),U}function U(){for(var z,H,F=new Promise(function(j,K){z=j,H=K}),N=[],B=0;B<arguments.length;B++)N.push(arguments[B]);N.push(function(j,K){j?H(j):z(K)});try{I.apply(this,N)}catch(j){H(j)}return F}return Object.setPrototypeOf(U,Object.getPrototypeOf(I)),C&&Object.defineProperty(U,C,{value:U,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(U,A(I))},R.promisify.custom=C,R.callbackify=function(I){if(typeof I!="function")throw new TypeError('The "original" argument must be of type Function');function U(){for(var z=[],H=0;H<arguments.length;H++)z.push(arguments[H]);var F=z.pop();if(typeof F!="function")throw new TypeError("The last argument must be of type Function");var N=this,B=function(){return F.apply(N,arguments)};I.apply(this,z).then(function(j){k.nextTick(B.bind(null,null,j))},function(j){k.nextTick(P.bind(null,j,B))})}return Object.setPrototypeOf(U,Object.getPrototypeOf(I)),Object.defineProperties(U,A(I)),U}},40372:function($,R,e){var k=e(86249);$.exports=function(A){return k("webgl",A)}},21099:function($,R,e){var k=e(86165),A=e(72077),l=e(92978),T=l("Object.prototype.toString"),x=e(57877)()&&typeof Symbol.toStringTag=="symbol",d=A(),s=l("String.prototype.slice"),t={},o=e(67295),r=Object.getPrototypeOf;x&&o&&r&&k(d,function(a){if(typeof e.g[a]=="function"){var i=new e.g[a];if(!(Symbol.toStringTag in i))throw new EvalError("this engine has support for Symbol.toStringTag, but "+a+" does not have the property! Please report this.");var c=r(i),h=o(c,Symbol.toStringTag);if(!h){var f=r(c);h=o(f,Symbol.toStringTag)}t[a]=h.get}});var n=e(9187);$.exports=function(a){return!!n(a)&&(x?function(i){var c=!1;return k(t,function(h,f){if(!c)try{var b=h.call(i);b===f&&(c=b)}catch{}}),c}(a):s(T(a),8,-1))}},3961:function($,R,e){var k=e(63489),A=e(56131),l=k.instance();function T(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}T.prototype=new k.baseCalendar,A(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(n,a){if(typeof n=="string"){var i=n.match(d);return i?i[0]:""}var c=this._validateYear(n),h=n.month(),f=""+this.toChineseMonth(c,h);return a&&f.length<2&&(f="0"+f),this.isIntercalaryMonth(c,h)&&(f+="i"),f},monthNames:function(n){if(typeof n=="string"){var a=n.match(s);return a?a[0]:""}var i=this._validateYear(n),c=n.month(),h=["","","","","","","","","","","",""][this.toChineseMonth(i,c)-1];return this.isIntercalaryMonth(i,c)&&(h=""+h),h},monthNamesShort:function(n){if(typeof n=="string"){var a=n.match(t);return a?a[0]:""}var i=this._validateYear(n),c=n.month(),h=["","","","","","","","","","","",""][this.toChineseMonth(i,c)-1];return this.isIntercalaryMonth(i,c)&&(h=""+h),h},parseMonth:function(n,a){n=this._validateYear(n);var i,c=parseInt(a);if(isNaN(c))a[0]===""&&(i=!0,a=a.substring(1)),a[a.length-1]===""&&(a=a.substring(0,a.length-1)),c=1+["","","","","","","","","","","",""].indexOf(a);else{var h=a[a.length-1];i=h==="i"||h==="I"}return this.toMonthIndex(n,c,i)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(n,a){if(n.year&&(n=n.year()),typeof n!="number"||n<1888||n>2111)throw a.replace(/\{0\}/,this.local.name);return n},toMonthIndex:function(n,a,i){var c=this.intercalaryMonth(n);if(i&&a!==c||a<1||a>12)throw k.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?!i&&a<=c?a-1:a:a-1},toChineseMonth:function(n,a){n.year&&(a=(n=n.year()).month());var i=this.intercalaryMonth(n);if(a<0||a>(i?12:11))throw k.local.invalidMonth.replace(/\{0\}/,this.local.name);return i?a<i?a+1:a:a+1},intercalaryMonth:function(n){return n=this._validateYear(n),o[n-o[0]]>>13},isIntercalaryMonth:function(n,a){n.year&&(a=(n=n.year()).month());var i=this.intercalaryMonth(n);return!!i&&i===a},leapYear:function(n){return this.intercalaryMonth(n)!==0},weekOfYear:function(n,a,i){var c,h=this._validateYear(n,k.local.invalidyear),f=r[h-r[0]],b=f>>9&4095,v=f>>5&15,g=31&f;(c=l.newDate(b,v,g)).add(4-(c.dayOfWeek()||7),"d");var y=this.toJD(n,a,i)-c.toJD();return 1+Math.floor(y/7)},monthsInYear:function(n){return this.leapYear(n)?13:12},daysInMonth:function(n,a){n.year&&(a=n.month(),n=n.year()),n=this._validateYear(n);var i=o[n-o[0]];if(a>(i>>13?12:11))throw k.local.invalidMonth.replace(/\{0\}/,this.local.name);return i&1<<12-a?30:29},weekDay:function(n,a,i){return(this.dayOfWeek(n,a,i)||7)<6},toJD:function(n,a,i){var c=this._validate(n,f,i,k.local.invalidDate);n=this._validateYear(c.year()),a=c.month(),i=c.day();var h=this.isIntercalaryMonth(n,a),f=this.toChineseMonth(n,a),b=function(v,g,y,p,m){var w,u,S;if(typeof v=="object")u=v,w=g||{};else{var _;if(!(typeof v=="number"&&v>=1888&&v<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof g=="number"&&g>=1&&g<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof y=="number"&&y>=1&&y<=30))throw new Error("Lunar day outside range 1 - 30");typeof p=="object"?(_=!1,w=p):(_=!!p,w={}),u={year:v,month:g,day:y,isIntercalary:_}}S=u.day-1;var E,L=o[u.year-o[0]],C=L>>13;E=C&&(u.month>C||u.isIntercalary)?u.month:u.month-1;for(var P=0;P<E;P++)S+=L&1<<12-P?30:29;var I=r[u.year-r[0]],U=new Date(I>>9&4095,(I>>5&15)-1,(31&I)+S);return w.year=U.getFullYear(),w.month=1+U.getMonth(),w.day=U.getDate(),w}(n,f,i,h);return l.toJD(b.year,b.month,b.day)},fromJD:function(n){var a=l.fromJD(n),i=function(h,f,b,v){var g,y;if(typeof h=="object")g=h,y=f||{};else{if(!(typeof h=="number"&&h>=1888&&h<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof f=="number"&&f>=1&&f<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof b=="number"&&b>=1&&b<=31))throw new Error("Solar day outside range 1 - 31");g={year:h,month:f,day:b},y={}}var p=r[g.year-r[0]],m=g.year<<9|g.month<<5|g.day;y.year=m>=p?g.year:g.year-1,p=r[y.year-r[0]];var w,u=new Date(p>>9&4095,(p>>5&15)-1,31&p),S=new Date(g.year,g.month-1,g.day);w=Math.round((S-u)/864e5);var _,E=o[y.year-o[0]];for(_=0;_<13;_++){var L=E&1<<12-_?30:29;if(w<L)break;w-=L}var C=E>>13;return!C||_<C?(y.isIntercalary=!1,y.month=1+_):_===C?(y.isIntercalary=!0,y.month=_):(y.isIntercalary=!1,y.month=_),y.day=1+w,y}(a.year(),a.month(),a.day()),c=this.toMonthIndex(i.year,i.month,i.isIntercalary);return this.newDate(i.year,c,i.day)},fromString:function(n){var a=n.match(x),i=this._validateYear(+a[1]),c=+a[2],h=!!a[3],f=this.toMonthIndex(i,c,h),b=+a[4];return this.newDate(i,f,b)},add:function(n,a,i){var c=n.year(),h=n.month(),f=this.isIntercalaryMonth(c,h),b=this.toChineseMonth(c,h),v=Object.getPrototypeOf(T.prototype).add.call(this,n,a,i);if(i==="y"){var g=v.year(),y=v.month(),p=this.isIntercalaryMonth(g,b),m=f&&p?this.toMonthIndex(g,b,!0):this.toMonthIndex(g,b,!1);m!==y&&v.month(m)}return v}});var x=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,d=/^\d?\d[iI]?/m,s=/^??[]?/m,t=/^??[]?/m;k.calendars.chinese=T;var o=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],r=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},38751:function($,R,e){var k=e(63489),A=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new k.baseCalendar,A(l.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var x=this._validate(T,this.minMonth,this.minDay,k.local.invalidYear);return(T=x.year()+(x.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear),13},weekOfYear:function(T,x,d){var s=this.newDate(T,x,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,x){var d=this._validate(T,x,this.minDay,k.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===13&&this.leapYear(d.year())?1:0)},weekDay:function(T,x,d){return(this.dayOfWeek(T,x,d)||7)<6},toJD:function(T,x,d){var s=this._validate(T,x,d,k.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var x=Math.floor(T)+.5-this.jdEpoch,d=Math.floor((x-Math.floor((x+366)/1461))/365)+1;d<=0&&d--,x=Math.floor(T)+.5-this.newDate(d,1,1).toJD();var s=Math.floor(x/30)+1,t=x-30*(s-1)+1;return this.newDate(d,s,t)}}),k.calendars.coptic=l},86825:function($,R,e){var k=e(63489),A=e(56131);function l(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}l.prototype=new k.baseCalendar,A(l.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(x){return this._validate(x,this.minMonth,this.minDay,k.local.invalidYear),!1},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,k.local.invalidYear),13},daysInYear:function(x){return this._validate(x,this.minMonth,this.minDay,k.local.invalidYear),400},weekOfYear:function(x,d,s){var t=this.newDate(x,d,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(x,d){var s=this._validate(x,d,this.minDay,k.local.invalidMonth);return this.daysPerMonth[s.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(x,d,s){return(this._validate(x,d,s,k.local.invalidDate).day()+1)%8},weekDay:function(x,d,s){var t=this.dayOfWeek(x,d,s);return t>=2&&t<=6},extraInfo:function(x,d,s){var t=this._validate(x,d,s,k.local.invalidDate);return{century:T[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(x,d,s){var t=this._validate(x,d,s,k.local.invalidDate);return x=t.year()+(t.year()<0?1:0),d=t.month(),(s=t.day())+(d>1?16:0)+(d>2?32*(d-2):0)+400*(x-1)+this.jdEpoch-1},fromJD:function(x){x=Math.floor(x+.5)-Math.floor(this.jdEpoch)-1;var d=Math.floor(x/400)+1;x-=400*(d-1),x+=x>15?16:0;var s=Math.floor(x/32)+1,t=x-32*(s-1)+1;return this.newDate(d<=0?d-1:d,s,t)}});var T={20:"Fruitbat",21:"Anchovy"};k.calendars.discworld=l},37715:function($,R,e){var k=e(63489),A=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new k.baseCalendar,A(l.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var x=this._validate(T,this.minMonth,this.minDay,k.local.invalidYear);return(T=x.year()+(x.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear),13},weekOfYear:function(T,x,d){var s=this.newDate(T,x,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,x){var d=this._validate(T,x,this.minDay,k.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===13&&this.leapYear(d.year())?1:0)},weekDay:function(T,x,d){return(this.dayOfWeek(T,x,d)||7)<6},toJD:function(T,x,d){var s=this._validate(T,x,d,k.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var x=Math.floor(T)+.5-this.jdEpoch,d=Math.floor((x-Math.floor((x+366)/1461))/365)+1;d<=0&&d--,x=Math.floor(T)+.5-this.newDate(d,1,1).toJD();var s=Math.floor(x/30)+1,t=x-30*(s-1)+1;return this.newDate(d,s,t)}}),k.calendars.ethiopian=l},99384:function($,R,e){var k=e(63489),A=e(56131);function l(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}function T(x,d){return x-d*Math.floor(x/d)}l.prototype=new k.baseCalendar,A(l.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var d=this._validate(x,this.minMonth,this.minDay,k.local.invalidYear);return this._leapYear(d.year())},_leapYear:function(x){return T(7*(x=x<0?x+1:x)+1,19)<7},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,k.local.invalidYear),this._leapYear(x.year?x.year():x)?13:12},weekOfYear:function(x,d,s){var t=this.newDate(x,d,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(x){return x=this._validate(x,this.minMonth,this.minDay,k.local.invalidYear).year(),this.toJD(x===-1?1:x+1,7,1)-this.toJD(x,7,1)},daysInMonth:function(x,d){return x.year&&(d=x.month(),x=x.year()),this._validate(x,d,this.minDay,k.local.invalidMonth),d===12&&this.leapYear(x)||d===8&&T(this.daysInYear(x),10)===5?30:d===9&&T(this.daysInYear(x),10)===3?29:this.daysPerMonth[d-1]},weekDay:function(x,d,s){return this.dayOfWeek(x,d,s)!==6},extraInfo:function(x,d,s){var t=this._validate(x,d,s,k.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(x,d,s){var t=this._validate(x,d,s,k.local.invalidDate);x=t.year(),d=t.month(),s=t.day();var o=x<=0?x+1:x,r=this.jdEpoch+this._delay1(o)+this._delay2(o)+s+1;if(d<7){for(var n=7;n<=this.monthsInYear(x);n++)r+=this.daysInMonth(x,n);for(n=1;n<d;n++)r+=this.daysInMonth(x,n)}else for(n=7;n<d;n++)r+=this.daysInMonth(x,n);return r},_delay1:function(x){var d=Math.floor((235*x-234)/19),s=12084+13753*d,t=29*d+Math.floor(s/25920);return T(3*(t+1),7)<3&&t++,t},_delay2:function(x){var d=this._delay1(x-1),s=this._delay1(x);return this._delay1(x+1)-s==356?2:s-d==382?1:0},fromJD:function(x){x=Math.floor(x)+.5;for(var d=Math.floor(98496*(x-this.jdEpoch)/35975351)-1;x>=this.toJD(d===-1?1:d+1,7,1);)d++;for(var s=x<this.toJD(d,1,1)?7:1;x>this.toJD(d,s,this.daysInMonth(d,s));)s++;var t=x-this.toJD(d,s,1)+1;return this.newDate(d,s,t)}}),k.calendars.hebrew=l},43805:function($,R,e){var k=e(63489),A=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new k.baseCalendar,A(l.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){return(11*this._validate(T,this.minMonth,this.minDay,k.local.invalidYear).year()+14)%30<11},weekOfYear:function(T,x,d){var s=this.newDate(T,x,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,x){var d=this._validate(T,x,this.minDay,k.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===12&&this.leapYear(d.year())?1:0)},weekDay:function(T,x,d){return this.dayOfWeek(T,x,d)!==5},toJD:function(T,x,d){var s=this._validate(T,x,d,k.local.invalidDate);return T=s.year(),x=s.month(),T=T<=0?T+1:T,(d=s.day())+Math.ceil(29.5*(x-1))+354*(T-1)+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var x=Math.floor((30*(T-this.jdEpoch)+10646)/10631);x=x<=0?x-1:x;var d=Math.min(12,Math.ceil((T-29-this.toJD(x,1,1))/29.5)+1),s=T-this.toJD(x,d,1)+1;return this.newDate(x,d,s)}}),k.calendars.islamic=l},88874:function($,R,e){var k=e(63489),A=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new k.baseCalendar,A(l.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var x=this._validate(T,this.minMonth,this.minDay,k.local.invalidYear);return(T=x.year()<0?x.year()+1:x.year())%4==0},weekOfYear:function(T,x,d){var s=this.newDate(T,x,d);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,x){var d=this._validate(T,x,this.minDay,k.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===2&&this.leapYear(d.year())?1:0)},weekDay:function(T,x,d){return(this.dayOfWeek(T,x,d)||7)<6},toJD:function(T,x,d){var s=this._validate(T,x,d,k.local.invalidDate);return T=s.year(),x=s.month(),d=s.day(),T<0&&T++,x<=2&&(T--,x+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(x+1))+d-1524.5},fromJD:function(T){var x=Math.floor(T+.5)+1524,d=Math.floor((x-122.1)/365.25),s=Math.floor(365.25*d),t=Math.floor((x-s)/30.6001),o=t-Math.floor(t<14?1:13),r=d-Math.floor(o>2?4716:4715),n=x-s-Math.floor(30.6001*t);return r<=0&&r--,this.newDate(r,o,n)}}),k.calendars.julian=l},83290:function($,R,e){var k=e(63489),A=e(56131);function l(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}function T(d,s){return d-s*Math.floor(d/s)}function x(d,s){return T(d-1,s)+1}l.prototype=new k.baseCalendar,A(l.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(d){return this._validate(d,this.minMonth,this.minDay,k.local.invalidYear),!1},formatYear:function(d){d=this._validate(d,this.minMonth,this.minDay,k.local.invalidYear).year();var s=Math.floor(d/400);return d%=400,d+=d<0?400:0,s+"."+Math.floor(d/20)+"."+d%20},forYear:function(d){if((d=d.split(".")).length<3)throw"Invalid Mayan year";for(var s=0,t=0;t<d.length;t++){var o=parseInt(d[t],10);if(Math.abs(o)>19||t>0&&o<0)throw"Invalid Mayan year";s=20*s+o}return s},monthsInYear:function(d){return this._validate(d,this.minMonth,this.minDay,k.local.invalidYear),18},weekOfYear:function(d,s,t){return this._validate(d,s,t,k.local.invalidDate),0},daysInYear:function(d){return this._validate(d,this.minMonth,this.minDay,k.local.invalidYear),360},daysInMonth:function(d,s){return this._validate(d,s,this.minDay,k.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(d,s,t){return this._validate(d,s,t,k.local.invalidDate).day()},weekDay:function(d,s,t){return this._validate(d,s,t,k.local.invalidDate),!0},extraInfo:function(d,s,t){var o=this._validate(d,s,t,k.local.invalidDate).toJD(),r=this._toHaab(o),n=this._toTzolkin(o);return{haabMonthName:this.local.haabMonths[r[0]-1],haabMonth:r[0],haabDay:r[1],tzolkinDayName:this.local.tzolkinMonths[n[0]-1],tzolkinDay:n[0],tzolkinTrecena:n[1]}},_toHaab:function(d){var s=T(8+(d-=this.jdEpoch)+340,365);return[Math.floor(s/20)+1,T(s,20)]},_toTzolkin:function(d){return[x(20+(d-=this.jdEpoch),20),x(d+4,13)]},toJD:function(d,s,t){var o=this._validate(d,s,t,k.local.invalidDate);return o.day()+20*o.month()+360*o.year()+this.jdEpoch},fromJD:function(d){d=Math.floor(d)+.5-this.jdEpoch;var s=Math.floor(d/360);d%=360,d+=d<0?360:0;var t=Math.floor(d/20),o=d%20;return this.newDate(s,t,o)}}),k.calendars.mayan=l},29108:function($,R,e){var k=e(63489),A=e(56131);function l(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}l.prototype=new k.baseCalendar;var T=k.instance("gregorian");A(l.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var d=this._validate(x,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear);return T.leapYear(d.year()+(d.year()<1?1:0)+1469)},weekOfYear:function(x,d,s){var t=this.newDate(x,d,s);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(x,d){var s=this._validate(x,d,this.minDay,k.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(x,d,s){return(this.dayOfWeek(x,d,s)||7)<6},toJD:function(x,d,s){var t=this._validate(x,d,s,k.local.invalidMonth);(x=t.year())<0&&x++;for(var o=t.day(),r=1;r<t.month();r++)o+=this.daysPerMonth[r-1];return o+T.toJD(x+1468,3,13)},fromJD:function(x){x=Math.floor(x+.5);for(var d=Math.floor((x-(this.jdEpoch-1))/366);x>=this.toJD(d+1,1,1);)d++;for(var s=x-Math.floor(this.toJD(d,1,1)+.5)+1,t=1;s>this.daysInMonth(d,t);)s-=this.daysInMonth(d,t),t++;return this.newDate(d,t,s)}}),k.calendars.nanakshahi=l},55422:function($,R,e){var k=e(63489),A=e(56131);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}l.prototype=new k.baseCalendar,A(l.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,x,d){var s=this.newDate(T,x,d);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){if(T=this._validate(T,this.minMonth,this.minDay,k.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[T]===void 0)return this.daysPerYear;for(var x=0,d=this.minMonth;d<=12;d++)x+=this.NEPALI_CALENDAR_DATA[T][d];return x},daysInMonth:function(T,x){return T.year&&(x=T.month(),T=T.year()),this._validate(T,x,this.minDay,k.local.invalidMonth),this.NEPALI_CALENDAR_DATA[T]===void 0?this.daysPerMonth[x-1]:this.NEPALI_CALENDAR_DATA[T][x]},weekDay:function(T,x,d){return this.dayOfWeek(T,x,d)!==6},toJD:function(T,x,d){var s=this._validate(T,x,d,k.local.invalidDate);T=s.year(),x=s.month(),d=s.day();var t=k.instance(),o=0,r=x,n=T;this._createMissingCalendarData(T);var a=T-(r>9||r===9&&d>=this.NEPALI_CALENDAR_DATA[n][0]?56:57);for(x!==9&&(o=d,r--);r!==9;)r<=0&&(r=12,n--),o+=this.NEPALI_CALENDAR_DATA[n][r],r--;return x===9?(o+=d-this.NEPALI_CALENDAR_DATA[n][0])<0&&(o+=t.daysInYear(a)):o+=this.NEPALI_CALENDAR_DATA[n][9]-this.NEPALI_CALENDAR_DATA[n][0],t.newDate(a,1,1).add(o,"d").toJD()},fromJD:function(T){var x=k.instance().fromJD(T),d=x.year(),s=x.dayOfYear(),t=d+56;this._createMissingCalendarData(t);for(var o=9,r=this.NEPALI_CALENDAR_DATA[t][0],n=this.NEPALI_CALENDAR_DATA[t][o]-r+1;s>n;)++o>12&&(o=1,t++),n+=this.NEPALI_CALENDAR_DATA[t][o];var a=this.NEPALI_CALENDAR_DATA[t][o]-(n-s);return this.newDate(t,o,a)},_createMissingCalendarData:function(T){var x=this.daysPerMonth.slice(0);x.unshift(17);for(var d=T-1;d<T+2;d++)this.NEPALI_CALENDAR_DATA[d]===void 0&&(this.NEPALI_CALENDAR_DATA[d]=x)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),k.calendars.nepali=l},94320:function($,R,e){var k=e(63489),A=e(56131);function l(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}function T(x,d){return x-d*Math.floor(x/d)}l.prototype=new k.baseCalendar,A(l.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(x){var d=this._validate(x,this.minMonth,this.minDay,k.local.invalidYear);return 682*((d.year()-(d.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(x,d,s){var t=this.newDate(x,d,s);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(x,d){var s=this._validate(x,d,this.minDay,k.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(x,d,s){return this.dayOfWeek(x,d,s)!==5},toJD:function(x,d,s){var t=this._validate(x,d,s,k.local.invalidDate);x=t.year(),d=t.month(),s=t.day();var o=x-(x>=0?474:473),r=474+T(o,2820);return s+(d<=7?31*(d-1):30*(d-1)+6)+Math.floor((682*r-110)/2816)+365*(r-1)+1029983*Math.floor(o/2820)+this.jdEpoch-1},fromJD:function(x){var d=(x=Math.floor(x)+.5)-this.toJD(475,1,1),s=Math.floor(d/1029983),t=T(d,1029983),o=2820;if(t!==1029982){var r=Math.floor(t/366),n=T(t,366);o=Math.floor((2134*r+2816*n+2815)/1028522)+r+1}var a=o+2820*s+474;a=a<=0?a-1:a;var i=x-this.toJD(a,1,1)+1,c=i<=186?Math.ceil(i/31):Math.ceil((i-6)/30),h=x-this.toJD(a,c,1)+1;return this.newDate(a,c,h)}}),k.calendars.persian=l,k.calendars.jalali=l},31320:function($,R,e){var k=e(63489),A=e(56131),l=k.instance();function T(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}T.prototype=new k.baseCalendar,A(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(x){var d=this._validate(x,this.minMonth,this.minDay,k.local.invalidYear);return x=this._t2gYear(d.year()),l.leapYear(x)},weekOfYear:function(x,d,s){var t=this._validate(x,this.minMonth,this.minDay,k.local.invalidYear);return x=this._t2gYear(t.year()),l.weekOfYear(x,t.month(),t.day())},daysInMonth:function(x,d){var s=this._validate(x,d,this.minDay,k.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(x,d,s){return(this.dayOfWeek(x,d,s)||7)<6},toJD:function(x,d,s){var t=this._validate(x,d,s,k.local.invalidDate);return x=this._t2gYear(t.year()),l.toJD(x,t.month(),t.day())},fromJD:function(x){var d=l.fromJD(x),s=this._g2tYear(d.year());return this.newDate(s,d.month(),d.day())},_t2gYear:function(x){return x+this.yearsOffset+(x>=-this.yearsOffset&&x<=-1?1:0)},_g2tYear:function(x){return x-this.yearsOffset-(x>=1&&x<=this.yearsOffset?1:0)}}),k.calendars.taiwan=T},51367:function($,R,e){var k=e(63489),A=e(56131),l=k.instance();function T(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}T.prototype=new k.baseCalendar,A(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var d=this._validate(x,this.minMonth,this.minDay,k.local.invalidYear);return x=this._t2gYear(d.year()),l.leapYear(x)},weekOfYear:function(x,d,s){var t=this._validate(x,this.minMonth,this.minDay,k.local.invalidYear);return x=this._t2gYear(t.year()),l.weekOfYear(x,t.month(),t.day())},daysInMonth:function(x,d){var s=this._validate(x,d,this.minDay,k.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(x,d,s){return(this.dayOfWeek(x,d,s)||7)<6},toJD:function(x,d,s){var t=this._validate(x,d,s,k.local.invalidDate);return x=this._t2gYear(t.year()),l.toJD(x,t.month(),t.day())},fromJD:function(x){var d=l.fromJD(x),s=this._g2tYear(d.year());return this.newDate(s,d.month(),d.day())},_t2gYear:function(x){return x-this.yearsOffset-(x>=1&&x<=this.yearsOffset?1:0)},_g2tYear:function(x){return x+this.yearsOffset+(x>=-this.yearsOffset&&x<=-1?1:0)}}),k.calendars.thai=T},21457:function($,R,e){var k=e(63489),A=e(56131);function l(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}l.prototype=new k.baseCalendar,A(l.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(x){var d=this._validate(x,this.minMonth,this.minDay,k.local.invalidYear);return this.daysInYear(d.year())===355},weekOfYear:function(x,d,s){var t=this.newDate(x,d,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(x){for(var d=0,s=1;s<=12;s++)d+=this.daysInMonth(x,s);return d},daysInMonth:function(x,d){for(var s=this._validate(x,d,this.minDay,k.local.invalidMonth).toJD()-24e5+.5,t=0,o=0;o<T.length;o++){if(T[o]>s)return T[t]-T[t-1];t++}return 30},weekDay:function(x,d,s){return this.dayOfWeek(x,d,s)!==5},toJD:function(x,d,s){var t=this._validate(x,d,s,k.local.invalidDate),o=12*(t.year()-1)+t.month()-15292;return t.day()+T[o-1]-1+24e5-.5},fromJD:function(x){for(var d=x-24e5+.5,s=0,t=0;t<T.length&&!(T[t]>d);t++)s++;var o=s+15292,r=Math.floor((o-1)/12),n=r+1,a=o-12*r,i=d-T[s-1]+1;return this.newDate(n,a,i)},isValid:function(x,d,s){var t=k.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(x=x.year!=null?x.year:x)>=1276&&x<=1500),t},_validate:function(x,d,s,t){var o=k.baseCalendar.prototype._validate.apply(this,arguments);if(o.year<1276||o.year>1500)throw t.replace(/\{0\}/,this.local.name);return o}}),k.calendars.ummalqura=l;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function($,R,e){var k=e(56131);function A(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function l(t,o,r,n){if(this._calendar=t,this._year=o,this._month=r,this._day=n,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(t,o){return"000000".substring(0,o-(t=""+t).length)+t}function x(){this.shortYearCutoff="+10"}function d(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}k(A.prototype,{instance:function(t,o){t=(t||"gregorian").toLowerCase(),o=o||"";var r=this._localCals[t+"-"+o];if(!r&&this.calendars[t]&&(r=new this.calendars[t](o),this._localCals[t+"-"+o]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return r},newDate:function(t,o,r,n,a){return(n=(t!=null&&t.year?t.calendar():typeof n=="string"?this.instance(n,a):n)||this.instance()).newDate(t,o,r)},substituteDigits:function(t){return function(o){return(o+"").replace(/[0-9]/g,function(r){return t[r]})}},substituteChineseDigits:function(t,o){return function(r){for(var n="",a=0;r>0;){var i=r%10;n=(i===0?"":t[i]+o[a])+n,a++,r=Math.floor(r/10)}return n.indexOf(t[1]+o[1])===0&&(n=n.substr(1)),n||t[0]}}}),k(l.prototype,{newDate:function(t,o,r){return this._calendar.newDate(t??this,o,r)},year:function(t){return arguments.length===0?this._year:this.set(t,"y")},month:function(t){return arguments.length===0?this._month:this.set(t,"m")},day:function(t){return arguments.length===0?this._day:this.set(t,"d")},date:function(t,o,r){if(!this._calendar.isValid(t,o,r))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=o,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,o){return this._calendar.add(this,t,o)},set:function(t,o){return this._calendar.set(this,t,o)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var o=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return o===0?0:o<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}}),k(x.prototype,{_validateLevel:0,newDate:function(t,o,r){return t==null?this.today():(t.year&&(this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),r=t.day(),o=t.month(),t=t.year()),new l(this,t,o,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var o=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(o.year()<0?"-":"")+T(Math.abs(o.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),12},monthOfYear:function(t,o){var r=this._validate(t,o,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(t,o){var r=(o+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,r,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth),r},daysInYear:function(t){var o=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return this.leapYear(o)?366:365},dayOfYear:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(t,o,r){return this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),{}},add:function(t,o,r){return this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,o,r),o,r)},_add:function(t,o,r){if(this._validateLevel++,r==="d"||r==="w"){var n=t.toJD()+o*(r==="w"?this.daysInWeek():1),a=t.calendar().fromJD(n);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var i=t.year()+(r==="y"?o:0),c=t.monthOfYear()+(r==="m"?o:0);a=t.day(),r==="y"?(t.month()!==this.fromMonthOfYear(i,c)&&(c=this.newDate(i,t.month(),this.minDay).monthOfYear()),c=Math.min(c,this.monthsInYear(i)),a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,c)))):r==="m"&&(function(f){for(;c<f.minMonth;)i--,c+=f.monthsInYear(i);for(var b=f.monthsInYear(i);c>b-1+f.minMonth;)i++,c-=b,b=f.monthsInYear(i)}(this),a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,c))));var h=[i,this.fromMonthOfYear(i,c),a];return this._validateLevel--,h}catch(f){throw this._validateLevel--,f}},_correctAdd:function(t,o,r,n){if(!(this.hasYearZero||n!=="y"&&n!=="m"||o[0]!==0&&t.year()>0==o[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n],i=r<0?-1:1;o=this._add(t,r*a[0]+i*a[1],a[2])}return t.date(o[0],o[1],o[2])},set:function(t,o,r){this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate);var n=r==="y"?o:t.year(),a=r==="m"?o:t.month(),i=r==="d"?o:t.day();return r!=="y"&&r!=="m"||(i=Math.min(i,this.daysInMonth(n,a))),t.date(n,a,i)},isValid:function(t,o,r){this._validateLevel++;var n=this.hasYearZero||t!==0;if(n){var a=this.newDate(t,o,this.minDay);n=o>=this.minMonth&&o-this.minMonth<this.monthsInYear(a)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(a)}return this._validateLevel--,n},toJSDate:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return s.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(t){return this.fromJD(s.instance().fromJSDate(t).toJD())},_validate:function(t,o,r,n){if(t.year){if(this._validateLevel===0&&this.name!==t.calendar().name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(t,o,r))throw n.replace(/\{0\}/,this.local.name);var a=this.newDate(t,o,r);return this._validateLevel--,a}catch(i){throw this._validateLevel--,i}}}),d.prototype=new x,k(d.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var o=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(t=o.year()+(o.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,o,r){var n=this.newDate(t,o,r);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(t,o){var r=this._validate(t,o,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(t,o,r){return(this.dayOfWeek(t,o,r)||7)<6},toJD:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);t=n.year(),o=n.month(),r=n.day(),t<0&&t++,o<3&&(o+=12,t--);var a=Math.floor(t/100),i=2-a+Math.floor(a/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(o+1))+r+i-1524.5},fromJD:function(t){var o=Math.floor(t+.5),r=Math.floor((o-186721625e-2)/36524.25),n=1524+(r=o+1+r-Math.floor(r/4)),a=Math.floor((n-122.1)/365.25),i=Math.floor(365.25*a),c=Math.floor((n-i)/30.6001),h=n-i-Math.floor(30.6001*c),f=c-(c>13.5?13:1),b=a-(f>2.5?4716:4715);return b<=0&&b--,this.newDate(b,f,h)},toJSDate:function(t,o,r){var n=this._validate(t,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),a=new Date(n.year(),n.month()-1,n.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var s=$.exports=new A;s.cdate=l,s.baseCalendar=x,s.calendars.gregorian=d},94338:function($,R,e){var k=e(56131),A=e(63489);k(A.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),A.local=A.regionalOptions[""],k(A.cdate.prototype,{formatDate:function(l,T){return typeof l!="string"&&(T=l,l=""),this._calendar.formatDate(l||"",this,T)}}),k(A.baseCalendar.prototype,{UNIX_EPOCH:A.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:A.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(l,T,x){if(typeof l!="string"&&(x=T,T=l,l=""),!T)return"";if(T.calendar()!==this)throw A.local.invalidFormat||A.regionalOptions[""].invalidFormat;l=l||this.local.dateFormat;for(var d,s,t,o=(x=x||{}).dayNamesShort||this.local.dayNamesShort,r=x.dayNames||this.local.dayNames,n=x.monthNumbers||this.local.monthNumbers,a=x.monthNamesShort||this.local.monthNamesShort,i=x.monthNames||this.local.monthNames,c=(x.calculateWeek||this.local.calculateWeek,function(u,S){for(var _=1;w+_<l.length&&l.charAt(w+_)===u;)_++;return w+=_-1,Math.floor(_/(S||1))>1}),h=function(u,S,_,E){var L=""+S;if(c(u,E))for(;L.length<_;)L="0"+L;return L},f=this,b=function(u){return typeof n=="function"?n.call(f,u,c("m")):y(h("m",u.month(),2))},v=function(u,S){return S?typeof i=="function"?i.call(f,u):i[u.month()-f.minMonth]:typeof a=="function"?a.call(f,u):a[u.month()-f.minMonth]},g=this.local.digits,y=function(u){return x.localNumbers&&g?g(u):u},p="",m=!1,w=0;w<l.length;w++)if(m)l.charAt(w)!=="'"||c("'")?p+=l.charAt(w):m=!1;else switch(l.charAt(w)){case"d":p+=y(h("d",T.day(),2));break;case"D":p+=(d=T.dayOfWeek(),s=o,t=r,c("D")?t[d]:s[d]);break;case"o":p+=h("o",T.dayOfYear(),3);break;case"w":p+=h("w",T.weekOfYear(),2);break;case"m":p+=b(T);break;case"M":p+=v(T,c("M"));break;case"y":p+=c("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":c("Y",2),p+=T.formatYear();break;case"J":p+=T.toJD();break;case"@":p+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":p+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":c("'")?p+="'":m=!0;break;default:p+=l.charAt(w)}return p},parseDate:function(l,T,x){if(T==null)throw A.local.invalidArguments||A.regionalOptions[""].invalidArguments;if((T=typeof T=="object"?T.toString():T+"")==="")return null;l=l||this.local.dateFormat;var d=(x=x||{}).shortYearCutoff||this.shortYearCutoff;d=typeof d!="string"?d:this.today().year()%100+parseInt(d,10);for(var s=x.dayNamesShort||this.local.dayNamesShort,t=x.dayNames||this.local.dayNames,o=x.parseMonth||this.local.parseMonth,r=x.monthNumbers||this.local.monthNumbers,n=x.monthNamesShort||this.local.monthNamesShort,a=x.monthNames||this.local.monthNames,i=-1,c=-1,h=-1,f=-1,b=-1,v=!1,g=!1,y=function(I,U){for(var z=1;L+z<l.length&&l.charAt(L+z)===I;)z++;return L+=z-1,Math.floor(z/(U||1))>1},p=function(I,U){var z=y(I,U),H=[2,3,z?4:2,z?4:2,10,11,20]["oyYJ@!".indexOf(I)+1],F=new RegExp("^-?\\d{1,"+H+"}"),N=T.substring(E).match(F);if(!N)throw(A.local.missingNumberAt||A.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=N[0].length,parseInt(N[0],10)},m=this,w=function(){if(typeof r=="function"){y("m");var I=r.call(m,T.substring(E));return E+=I.length,I}return p("m")},u=function(I,U,z,H){for(var F=y(I,H)?z:U,N=0;N<F.length;N++)if(T.substr(E,F[N].length).toLowerCase()===F[N].toLowerCase())return E+=F[N].length,N+m.minMonth;throw(A.local.unknownNameAt||A.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},S=function(){if(typeof a=="function"){var I=y("M")?a.call(m,T.substring(E)):n.call(m,T.substring(E));return E+=I.length,I}return u("M",n,a)},_=function(){if(T.charAt(E)!==l.charAt(L))throw(A.local.unexpectedLiteralAt||A.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,L=0;L<l.length;L++)if(g)l.charAt(L)!=="'"||y("'")?_():g=!1;else switch(l.charAt(L)){case"d":f=p("d");break;case"D":u("D",s,t);break;case"o":b=p("o");break;case"w":p("w");break;case"m":h=w();break;case"M":h=S();break;case"y":var C=L;v=!y("y",2),L=C,c=p("y",2);break;case"Y":c=p("Y",2);break;case"J":i=p("J")+.5,T.charAt(E)==="."&&(E++,p("J"));break;case"@":i=p("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":i=p("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":y("'")?_():g=!0;break;default:_()}if(E<T.length)throw A.local.unexpectedText||A.regionalOptions[""].unexpectedText;if(c===-1?c=this.today().year():c<100&&v&&(c+=d===-1?1900:this.today().year()-this.today().year()%100-(c<=d?0:100)),typeof h=="string"&&(h=o.call(this,c,h)),b>-1){h=1,f=b;for(var P=this.daysInMonth(c,h);f>P;P=this.daysInMonth(c,h))h++,f-=P}return i>-1?this.fromJD(i):this.newDate(c,h,f)},determineDate:function(l,T,x,d,s){x&&typeof x!="object"&&(s=d,d=x,x=null),typeof d!="string"&&(s=d,d="");var t=this;return T=T?T.newDate():null,l==null?T:typeof l=="string"?function(o){try{return t.parseDate(d,o,s)}catch{}for(var r=((o=o.toLowerCase()).match(/^c/)&&x?x.newDate():null)||t.today(),n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,a=n.exec(o);a;)r.add(parseInt(a[1],10),a[2]||"d"),a=n.exec(o);return r}(l):typeof l=="number"?isNaN(l)||l===1/0||l===-1/0?T:t.today().add(l,"d"):t.newDate(l)}})},69862:function(){},40964:function(){},72077:function($,R,e){var k=e(24696);$.exports=function(){return k(["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],function(A){return typeof e.g[A]=="function"})}},40402:function($){$.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function($){$.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function($){$.exports=JSON.parse('["normal","italic","oblique"]')},15659:function($){$.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function($){$.exports=JSON.parse('["inherit","initial","unset"]')},41901:function($){$.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},fs={};function ki($){var R=fs[$];if(R!==void 0)return R.exports;var e=fs[$]={exports:{}};return Io[$].call(e.exports,e,e.exports,ki),e.exports}return ki.n=function($){var R=$&&$.__esModule?function(){return $.default}:function(){return $};return ki.d(R,{a:R}),R},ki.d=function($,R){for(var e in R)ki.o(R,e)&&!ki.o($,e)&&Object.defineProperty($,e,{enumerable:!0,get:R[e]})},ki.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),ki.o=function($,R){return Object.prototype.hasOwnProperty.call($,R)},ki.r=function($){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty($,Symbol.toStringTag,{value:"Module"}),Object.defineProperty($,"__esModule",{value:!0})},ki(27909)}()})})(dd);const gd=pd(Jc);const vd=Xa=>{let ro=5381;for(let Io=0;Io<Xa.length;Io++)ro=(ro<<5)+ro+Xa.charCodeAt(Io);return ro},md=Xa=>{const ro=vd(Xa),Io=(ro&16711680)>>16,fs=(ro&65280)>>8,ki=ro&255;return"#"+("0"+Io.toString(16)).substr(-2)+("0"+fs.toString(16)).substr(-2)+("0"+ki.toString(16)).substr(-2)};d3.json("/data.json",(Xa,ro)=>{const Io=(e,k)=>e.map(A=>A[k]),fs=e=>e.map(k=>md(k.Category)),ki=e=>e.map(k=>`<b>Category:</b> ${k.Category} <br><b>Animal:</b> ${k.Animal} <br><b>Movie:</b> ${k.Film} (${k.Year}) <br><b>Location:</b> ${k.Location}`),$=Object.values(ro).map(e=>({hovermode:"closest",type:"scattermapbox",text:ki(e),lon:Io(e,"Long"),lat:Io(e,"Lat"),hovertemplate:"%{text}<extra></extra>",marker:{color:fs(e),size:8},name:e[0].Category,showlegend:!0})),R={title:"Where natural horror films takes place",dragmode:"zoom",mapbox:{style:"carto-darkmatter",center:{lat:38,lon:-90},zoom:2},margin:{r:0,t:0,b:0,l:0},legend:{orientation:"h",y:.25,x:.05,bgcolor:"#000",borderColor:"#282828",borderRadius:"8px"},config:{responsive:!0}};gd.newPlot("app",$,R)});
